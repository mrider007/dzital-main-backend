/*! For license information please see main.04bb227e.js.LICENSE.txt */
(()=>{var __webpack_modules__={5513:(t,n,r)=>{"use strict";r.d(n,{A:()=>oe});var i=function(){function t(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var n=t.prototype;return n.hydrate=function(e){e.forEach(this._insertTag)},n.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(n);try{r.insertRule(t,r.cssRules.length)}catch(e){0}}else n.appendChild(document.createTextNode(t));this.ctr++},n.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},t}(),o=Math.abs,s=String.fromCharCode,a=Object.assign;function c(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function u(e,t){return e.indexOf(t)}function d(e,t){return 0|e.charCodeAt(t)}function p(e,t,n){return e.slice(t,n)}function h(e){return e.length}function f(e){return e.length}function m(e,t){return t.push(e),e}var g=1,v=1,y=0,E=0,_=0,b="";function S(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:g,column:v,length:s,return:""}}function T(e,t){return a(S("",null,null,"",null,null,0),e,{length:-e.length},t)}function I(){return _=E>0?d(b,--E):0,v--,10===_&&(v=1,g--),_}function N(){return _=E<y?d(b,E++):0,v++,10===_&&(v=1,g++),_}function w(){return d(b,E)}function C(){return E}function O(e,t){return p(b,e,t)}function A(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function R(e){return g=v=1,y=h(b=e),E=0,[]}function M(e){return b="",e}function D(e){return c(O(E-1,L(91===e?e+2:40===e?e+1:e)))}function k(e){for(;(_=w())&&_<33;)N();return A(e)>2||A(_)>3?"":" "}function x(e,t){for(;--t&&N()&&!(_<48||_>102||_>57&&_<65||_>70&&_<97););return O(e,C()+(t<6&&32==w()&&32==N()))}function L(e){for(;N();)switch(_){case e:return E;case 34:case 39:34!==e&&39!==e&&L(_);break;case 40:41===e&&L(e);break;case 92:N()}return E}function P(e,t){for(;N()&&e+_!==57&&(e+_!==84||47!==w()););return"/*"+O(t,E-1)+"*"+s(47===e?e:N())}function j(e){for(;!A(w());)N();return O(e,E)}var U="-ms-",F="-moz-",z="-webkit-",B="comm",V="rule",H="decl",G="@keyframes";function W(e,t){for(var n="",r=f(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Y(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case H:return e.return=e.return||e.value;case B:return"";case G:return e.return=e.value+"{"+W(e.children,r)+"}";case V:e.value=e.props.join(",")}return h(n=W(e.children,r))?e.return=e.value+"{"+n+"}":""}function q(e){return M(K("",null,null,null,[""],e=R(e),0,[0],e))}function K(e,t,n,r,i,o,a,c,p){for(var f=0,g=0,v=a,y=0,E=0,_=0,b=1,S=1,T=1,O=0,A="",R=i,M=o,L=r,U=A;S;)switch(_=O,O=N()){case 40:if(108!=_&&58==d(U,v-1)){-1!=u(U+=l(D(O),"&","&\f"),"&\f")&&(T=-1);break}case 34:case 39:case 91:U+=D(O);break;case 9:case 10:case 13:case 32:U+=k(_);break;case 92:U+=x(C()-1,7);continue;case 47:switch(w()){case 42:case 47:m(J(P(N(),C()),t,n),p);break;default:U+="/"}break;case 123*b:c[f++]=h(U)*T;case 125*b:case 59:case 0:switch(O){case 0:case 125:S=0;case 59+g:-1==T&&(U=l(U,/\f/g,"")),E>0&&h(U)-v&&m(E>32?X(U+";",r,n,v-1):X(l(U," ","")+";",r,n,v-2),p);break;case 59:U+=";";default:if(m(L=Q(U,t,n,f,g,i,c,A,R=[],M=[],v),o),123===O)if(0===g)K(U,t,L,L,R,o,v,c,M);else switch(99===y&&110===d(U,3)?100:y){case 100:case 108:case 109:case 115:K(e,L,L,r&&m(Q(e,L,L,0,0,i,c,A,i,R=[],v),M),i,M,v,c,r?R:M);break;default:K(U,L,L,L,[""],M,0,c,M)}}f=g=E=0,b=T=1,A=U="",v=a;break;case 58:v=1+h(U),E=_;default:if(b<1)if(123==O)--b;else if(125==O&&0==b++&&125==I())continue;switch(U+=s(O),O*b){case 38:T=g>0?1:(U+="\f",-1);break;case 44:c[f++]=(h(U)-1)*T,T=1;break;case 64:45===w()&&(U+=D(N())),y=w(),g=v=h(A=U+=j(C())),O++;break;case 45:45===_&&2==h(U)&&(b=0)}}return o}function Q(e,t,n,r,i,s,a,u,d,h,m){for(var g=i-1,v=0===i?s:[""],y=f(v),E=0,_=0,b=0;E<r;++E)for(var T=0,I=p(e,g+1,g=o(_=a[E])),N=e;T<y;++T)(N=c(_>0?v[T]+" "+I:l(I,/&\f/g,v[T])))&&(d[b++]=N);return S(e,t,n,0===i?V:u,d,h,m)}function J(e,t,n){return S(e,t,n,B,s(_),p(e,2,-2),0)}function X(e,t,n,r){return S(e,t,n,H,p(e,0,r),p(e,r+1,-1),r)}var Z=function(e,t,n){for(var r=0,i=0;r=i,i=w(),38===r&&12===i&&(t[n]=1),!A(i);)N();return O(e,E)},$=function(e,t){return M(function(e,t){var n=-1,r=44;do{switch(A(r)){case 0:38===r&&12===w()&&(t[n]=1),e[n]+=Z(E-1,t,n);break;case 2:e[n]+=D(r);break;case 4:if(44===r){e[++n]=58===w()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=s(r)}}while(r=N());return e}(R(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var i=[],o=$(t,i),s=n.props,a=0,c=0;a<o.length;a++)for(var l=0;l<s.length;l++,c++)e.props[c]=i[a]?o[a].replace(/&\f/g,s[l]):s[l]+" "+o[a]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function re(e,t){switch(function(e,t){return 45^d(e,0)?(((t<<2^d(e,0))<<2^d(e,1))<<2^d(e,2))<<2^d(e,3):0}(e,t)){case 5103:return z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+F+e+U+e+e;case 6828:case 4268:return z+e+U+e+e;case 6165:return z+e+U+"flex-"+e+e;case 5187:return z+e+l(e,/(\w+).+(:[^]+)/,z+"box-$1$2"+U+"flex-$1$2")+e;case 5443:return z+e+U+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return z+e+U+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return z+e+U+l(e,"shrink","negative")+e;case 5292:return z+e+U+l(e,"basis","preferred-size")+e;case 6060:return z+"box-"+l(e,"-grow","")+z+e+U+l(e,"grow","positive")+e;case 4554:return z+l(e,/([^-])(transform)/g,"$1"+z+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,z+"box-pack:$3"+U+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(d(e,t+1)){case 109:if(45!==d(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+z+"$2-$3$1"+F+(108==d(e,t+3)?"$3":"$2-$3"))+e;case 115:return~u(e,"stretch")?re(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==d(e,t+1))break;case 6444:switch(d(e,h(e)-3-(~u(e,"!important")&&10))){case 107:return l(e,":",":"+z)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+z+(45===d(e,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+U+"$2box$3")+e}break;case 5936:switch(d(e,t+11)){case 114:return z+e+U+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+U+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+U+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return z+e+U+e+e}return e}var ie=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case H:e.return=re(e.value,e.length);break;case G:return W([T(e,{value:l(e.value,"@","@"+z)})],r);case V:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return W([T(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return W([T(e,{props:[l(t,/:(plac\w+)/,":"+z+"input-$1")]}),T(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),T(e,{props:[l(t,/:(plac\w+)/,U+"input-$1")]})],r)}return""}))}}],oe=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||ie;var o,s,a={},c=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;c.push(e)}));var l,u,d=[Y,(u=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],p=function(e){var t=f(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}([te,ne].concat(r,d));s=function(e,t,n,r){l=n,W(q(e?e+"{"+t.styles+"}":t.styles),p),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new i({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:s};return h.sheet.hydrate(c),h}},918:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},5756:(e,t,n)=>{"use strict";n.d(t,{C:()=>a,T:()=>l,i:()=>o,w:()=>c});var r=n(5043),i=n(5513),o=(n(2830),n(9436),!0),s=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null);var a=s.Provider,c=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(s);return e(t,i,n)}))};o||(c=function(e){return function(t){var n=(0,r.useContext)(s);return null===n?(n=(0,i.A)({key:"css"}),r.createElement(s.Provider,{value:n},e(t,n))):e(t,n)}});var l=r.createContext({})},3290:(e,t,n)=>{"use strict";n.d(t,{AH:()=>l,i7:()=>u,mL:()=>c});var r=n(5756),i=n(5043),o=n(1722),s=n(9436),a=n(2830),c=(n(5513),n(219),(0,r.w)((function(e,t){var n=e.styles,c=(0,a.J)([n],void 0,i.useContext(r.T));if(!r.i){for(var l,u=c.name,d=c.styles,p=c.next;void 0!==p;)u+=" "+p.name,d+=p.styles,p=p.next;var h=!0===t.compat,f=t.insert("",{name:u,styles:d},t.sheet,h);return h?null:i.createElement("style",((l={})["data-emotion"]=t.key+"-global "+u,l.dangerouslySetInnerHTML={__html:f},l.nonce=t.sheet.nonce,l))}var m=i.useRef();return(0,s.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+c.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),m.current=[n,r],function(){n.flush()}}),[t]),(0,s.i)((function(){var e=m.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==c.next&&(0,o.sk)(t,c.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",c,n,!1)}}),[t,c.name]),null})));function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.J)(t)}var u=function(){var e=l.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},2830:(e,t,n)=>{"use strict";n.d(t,{J:()=>f});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(918),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},l=(0,i.A)((function(e){return a(e)?e:e.replace(o,"-$&").toLowerCase()})),u=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return p={name:t,styles:n,next:p},t}))}return 1===r[e]||a(e)||"number"!==typeof t||0===t?t:t+"px"};function d(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=d(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=t&&void 0!==t[s]?r+=o+"{"+t[s]+"}":c(s)&&(r+=l(o)+":"+u(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=d(e,t,s);switch(o){case"animation":case"animationName":r+=l(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var p=0;p<s.length;p++)c(s[p])&&(r+=l(o)+":"+u(o,s[p])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=p,o=n(e);return p=i,d(e,t,o)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var p,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var f=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";p=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=d(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=d(n,t,e[s]),r&&(i+=o[s]);h.lastIndex=0;for(var a,c="";null!==(a=h.exec(i));)c+="-"+a[1];var l=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+c;return{name:l,styles:i,next:p}}},9436:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>a,s:()=>s});var i=n(5043),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,s=o||function(e){return e()},a=o||i.useLayoutEffect},1722:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},5552:(t,n,r)=>{"use strict";r.r(n),r.d(n,{Composite:()=>Ht,CompositeItem:()=>Gt,FloatingArrow:()=>Jt,FloatingDelayGroup:()=>fn,FloatingFocusManager:()=>Wn,FloatingList:()=>Pt,FloatingNode:()=>rn,FloatingOverlay:()=>qn,FloatingPortal:()=>Un,FloatingTree:()=>on,arrow:()=>Be,autoPlacement:()=>Me,autoUpdate:()=>Re,computePosition:()=>Fe,detectOverflow:()=>ue,flip:()=>ke,getOverflowAncestors:()=>S,hide:()=>Le,inline:()=>je,inner:()=>Tr,limitShift:()=>Ue,offset:()=>fe,platform:()=>Ae,safePolygon:()=>wr,shift:()=>De,size:()=>xe,useClick:()=>Jn,useClientPoint:()=>Zn,useDelayGroup:()=>mn,useDelayGroupContext:()=>hn,useDismiss:()=>nr,useFloating:()=>rr,useFloatingNodeId:()=>nn,useFloatingParentNodeId:()=>en,useFloatingPortalNode:()=>jn,useFloatingTree:()=>tn,useFocus:()=>ir,useHover:()=>un,useId:()=>Qt,useInnerOffset:()=>Ir,useInteractions:()=>cr,useListItem:()=>jt,useListNavigation:()=>fr,useMergeRefs:()=>ft,useRole:()=>gr,useTransitionStatus:()=>Er,useTransitionStyles:()=>_r,useTypeahead:()=>br});var i=r(5043),o=r.t(i,2);function s(e){return l(e)?(e.nodeName||"").toLowerCase():"#document"}function a(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function c(e){var t;return null==(t=(l(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function l(e){return e instanceof Node||e instanceof a(e).Node}function u(e){return e instanceof Element||e instanceof a(e).Element}function d(e){return e instanceof HTMLElement||e instanceof a(e).HTMLElement}function p(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof a(e).ShadowRoot)}function h(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=y(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function f(e){return["table","td","th"].includes(s(e))}function m(e){const t=g(),n=y(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function g(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function v(e){return["html","body","#document"].includes(s(e))}function y(e){return a(e).getComputedStyle(e)}function E(e){return u(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function _(e){if("html"===s(e))return e;const t=e.assignedSlot||e.parentNode||p(e)&&e.host||c(e);return p(t)?t.host:t}function b(e){const t=_(e);return v(t)?e.ownerDocument?e.ownerDocument.body:e.body:d(t)&&h(t)?t:b(t)}function S(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=b(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),s=a(i);return o?t.concat(s,s.visualViewport||[],h(i)?i:[],s.frameElement&&n?S(s.frameElement):[]):t.concat(i,S(i,[],n))}function T(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}function I(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&p(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function N(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function w(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}function C(e){return!(0!==e.mozInputSource||!e.isTrusted)||(R()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function O(e){return!w().includes("jsdom/")&&(!R()&&0===e.width&&0===e.height||R()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function A(){return/apple/i.test(navigator.vendor)}function R(){const e=/android/i;return e.test(N())||e.test(w())}function M(){return N().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function D(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function k(e){return(null==e?void 0:e.ownerDocument)||document}function x(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}function L(e){return"composedPath"in e?e.composedPath()[0]:e.target}const P="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function j(e){return d(e)&&e.matches(P)}function U(e){e.preventDefault(),e.stopPropagation()}function F(e){return!!e&&("combobox"===e.getAttribute("role")&&j(e))}const z=["top","right","bottom","left"],B=["start","end"],V=z.reduce(((e,t)=>e.concat(t,t+"-"+B[0],t+"-"+B[1])),[]),H=Math.min,G=Math.max,W=Math.round,Y=Math.floor,q=e=>({x:e,y:e}),K={left:"right",right:"left",bottom:"top",top:"bottom"},Q={start:"end",end:"start"};function J(e,t,n){return G(e,H(t,n))}function X(e,t){return"function"===typeof e?e(t):e}function Z(e){return e.split("-")[0]}function $(e){return e.split("-")[1]}function ee(e){return"x"===e?"y":"x"}function te(e){return"y"===e?"height":"width"}function ne(e){return["top","bottom"].includes(Z(e))?"y":"x"}function re(e){return ee(ne(e))}function ie(e,t,n){void 0===n&&(n=!1);const r=$(e),i=re(e),o=te(i);let s="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=se(s)),[s,se(s)]}function oe(e){return e.replace(/start|end/g,(e=>Q[e]))}function se(e){return e.replace(/left|right|bottom|top/g,(e=>K[e]))}function ae(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function ce(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function le(e,t,n){let{reference:r,floating:i}=e;const o=ne(t),s=re(t),a=te(s),c=Z(t),l="y"===o,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let h;switch(c){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch($(t)){case"start":h[s]-=p*(n&&l?-1:1);break;case"end":h[s]+=p*(n&&l?-1:1)}return h}async function ue(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:h=0}=X(t,e),f=ae(h),m=a[p?"floating"===d?"reference":"floating":d],g=ce(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),v="floating"===d?{...s.floating,x:r,y:i}:s.reference,y=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),E=await(null==o.isElement?void 0:o.isElement(y))&&await(null==o.getScale?void 0:o.getScale(y))||{x:1,y:1},_=ce(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:y,strategy:c}):v);return{top:(g.top-_.top+f.top)/E.y,bottom:(_.bottom-g.bottom+f.bottom)/E.y,left:(g.left-_.left+f.left)/E.x,right:(_.right-g.right+f.right)/E.x}}function de(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function pe(e){return z.some((t=>e[t]>=0))}function he(e){const t=H(...e.map((e=>e.left))),n=H(...e.map((e=>e.top)));return{x:t,y:n,width:G(...e.map((e=>e.right)))-t,height:G(...e.map((e=>e.bottom)))-n}}const fe=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,c=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),s=Z(n),a=$(n),c="y"===ne(n),l=["left","top"].includes(s)?-1:1,u=o&&c?-1:1,d=X(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:f}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&"number"===typeof f&&(h="end"===a?-1*f:f),c?{x:h*u,y:p*l}:{x:p*l,y:h*u}}(t,e);return s===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:s}}}}};function me(e){const t=y(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=d(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=W(n)!==o||W(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function ge(e){return u(e)?e:e.contextElement}function ve(e){const t=ge(e);if(!d(t))return q(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=me(t);let s=(o?W(n.width):n.width)/r,a=(o?W(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const ye=q(0);function Ee(e){const t=a(e);return g()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ye}function _e(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=ge(e);let s=q(1);t&&(r?u(r)&&(s=ve(r)):s=ve(e));const c=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==a(e))&&t}(o,n,r)?Ee(o):q(0);let l=(i.left+c.x)/s.x,d=(i.top+c.y)/s.y,p=i.width/s.x,h=i.height/s.y;if(o){const e=a(o),t=r&&u(r)?a(r):r;let n=e,i=n.frameElement;for(;i&&r&&t!==n;){const e=ve(i),t=i.getBoundingClientRect(),r=y(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,d*=e.y,p*=e.x,h*=e.y,l+=o,d+=s,n=a(i),i=n.frameElement}}return ce({width:p,height:h,x:l,y:d})}const be=[":popover-open",":modal"];function Se(t){return be.some((n=>{try{return t.matches(n)}catch(e){return!1}}))}function Te(e){return _e(c(e)).left+E(e).scrollLeft}function Ie(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=a(e),r=c(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,l=0,u=0;if(i){o=i.width,s=i.height;const e=g();(!e||e&&"fixed"===t)&&(l=i.offsetLeft,u=i.offsetTop)}return{width:o,height:s,x:l,y:u}}(e,n);else if("document"===t)r=function(e){const t=c(e),n=E(e),r=e.ownerDocument.body,i=G(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=G(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Te(e);const a=-n.scrollTop;return"rtl"===y(r).direction&&(s+=G(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}(c(e));else if(u(t))r=function(e,t){const n=_e(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=d(e)?ve(e):q(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n=Ee(e);r={...t,x:t.x-n.x,y:t.y-n.y}}return ce(r)}function Ne(e,t){const n=_(e);return!(n===t||!u(n)||v(n))&&("fixed"===y(n).position||Ne(n,t))}function we(e,t,n){const r=d(t),i=c(t),o="fixed"===n,a=_e(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const u=q(0);if(r||!r&&!o)if(("body"!==s(t)||h(i))&&(l=E(t)),r){const e=_e(t,!0,o,t);u.x=e.x+t.clientLeft,u.y=e.y+t.clientTop}else i&&(u.x=Te(i));return{x:a.left+l.scrollLeft-u.x,y:a.top+l.scrollTop-u.y,width:a.width,height:a.height}}function Ce(e,t){return d(e)&&"fixed"!==y(e).position?t?t(e):e.offsetParent:null}function Oe(e,t){const n=a(e);if(!d(e)||Se(e))return n;let r=Ce(e,t);for(;r&&f(r)&&"static"===y(r).position;)r=Ce(r,t);return r&&("html"===s(r)||"body"===s(r)&&"static"===y(r).position&&!m(r))?n:r||function(e){let t=_(e);for(;d(t)&&!v(t);){if(m(t))return t;t=_(t)}return null}(e)||n}const Ae={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o="fixed"===i,a=c(r),l=!!t&&Se(t.floating);if(r===a||l&&o)return n;let u={scrollLeft:0,scrollTop:0},p=q(1);const f=q(0),m=d(r);if((m||!m&&!o)&&(("body"!==s(r)||h(a))&&(u=E(r)),d(r))){const e=_e(r);p=ve(r),f.x=e.x+r.clientLeft,f.y=e.y+r.clientTop}return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-u.scrollLeft*p.x+f.x,y:n.y*p.y-u.scrollTop*p.y+f.y}},getDocumentElement:c,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[..."clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let r=S(e,[],!1).filter((e=>u(e)&&"body"!==s(e))),i=null;const o="fixed"===y(e).position;let a=o?_(e):e;for(;u(a)&&!v(a);){const t=y(a),n=m(a);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||h(a)&&!n&&Ne(e,a))?r=r.filter((e=>e!==a)):i=t,a=_(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=o[0],c=o.reduce(((e,n)=>{const r=Ie(t,n,i);return e.top=G(r.top,e.top),e.right=H(r.right,e.right),e.bottom=H(r.bottom,e.bottom),e.left=G(r.left,e.left),e}),Ie(t,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:Oe,getElementRects:async function(e){const t=this.getOffsetParent||Oe,n=this.getDimensions;return{reference:we(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=me(e);return{width:t,height:n}},getScale:ve,isElement:u,isRTL:function(e){return"rtl"===y(e).direction}};function Re(t,n,r,i){void 0===i&&(i={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:a="function"===typeof ResizeObserver,layoutShift:l="function"===typeof IntersectionObserver,animationFrame:u=!1}=i,d=ge(t),p=o||s?[...d?S(d):[],...S(n)]:[];p.forEach((e=>{o&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)}));const h=d&&l?function(t,n){let r,i=null;const o=c(t);function s(){var e;clearTimeout(r),null==(e=i)||e.disconnect(),i=null}return function a(c,l){void 0===c&&(c=!1),void 0===l&&(l=1),s();const{left:u,top:d,width:p,height:h}=t.getBoundingClientRect();if(c||n(),!p||!h)return;const f={rootMargin:-Y(d)+"px "+-Y(o.clientWidth-(u+p))+"px "+-Y(o.clientHeight-(d+h))+"px "+-Y(u)+"px",threshold:G(0,H(1,l))||1};let m=!0;function g(e){const t=e[0].intersectionRatio;if(t!==l){if(!m)return a();t?a(!1,t):r=setTimeout((()=>{a(!1,1e-7)}),100)}m=!1}try{i=new IntersectionObserver(g,{...f,root:o.ownerDocument})}catch(e){i=new IntersectionObserver(g,f)}i.observe(t)}(!0),s}(d,r):null;let f,m=-1,g=null;a&&(g=new ResizeObserver((e=>{let[t]=e;t&&t.target===d&&g&&(g.unobserve(n),cancelAnimationFrame(m),m=requestAnimationFrame((()=>{var e;null==(e=g)||e.observe(n)}))),r()})),d&&!u&&g.observe(d),g.observe(n));let v=u?_e(t):null;return u&&function e(){const n=_e(t);!v||n.x===v.x&&n.y===v.y&&n.width===v.width&&n.height===v.height||r();v=n,f=requestAnimationFrame(e)}(),r(),()=>{var e;p.forEach((e=>{o&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)})),null==h||h(),null==(e=g)||e.disconnect(),g=null,u&&cancelAnimationFrame(f)}}const Me=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,r,i;const{rects:o,middlewareData:s,placement:a,platform:c,elements:l}=t,{crossAxis:u=!1,alignment:d,allowedPlacements:p=V,autoAlignment:h=!0,...f}=X(e,t),m=void 0!==d||p===V?function(e,t,n){return(e?[...n.filter((t=>$(t)===e)),...n.filter((t=>$(t)!==e))]:n.filter((e=>Z(e)===e))).filter((n=>!e||$(n)===e||!!t&&oe(n)!==n))}(d||null,h,p):p,g=await ue(t,f),v=(null==(n=s.autoPlacement)?void 0:n.index)||0,y=m[v];if(null==y)return{};const E=ie(y,o,await(null==c.isRTL?void 0:c.isRTL(l.floating)));if(a!==y)return{reset:{placement:m[0]}};const _=[g[Z(y)],g[E[0]],g[E[1]]],b=[...(null==(r=s.autoPlacement)?void 0:r.overflows)||[],{placement:y,overflows:_}],S=m[v+1];if(S)return{data:{index:v+1,overflows:b},reset:{placement:S}};const T=b.map((e=>{const t=$(e.placement);return[e.placement,t&&u?e.overflows.slice(0,2).reduce(((e,t)=>e+t),0):e.overflows[0],e.overflows]})).sort(((e,t)=>e[1]-t[1])),I=(null==(i=T.filter((e=>e[2].slice(0,$(e[0])?2:3).every((e=>e<=0))))[0])?void 0:i[0])||T[0][0];return I!==a?{data:{index:v+1,overflows:b},reset:{placement:I}}:{}}}},De=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=X(e,t),l={x:n,y:r},u=await ue(t,c),d=ne(Z(i)),p=ee(d);let h=l[p],f=l[d];if(o){const e="y"===p?"bottom":"right";h=J(h+u["y"===p?"top":"left"],h,h-u[e])}if(s){const e="y"===d?"bottom":"right";f=J(f+u["y"===d?"top":"left"],f,f-u[e])}const m=a.fn({...t,[p]:h,[d]:f});return{...m,data:{x:m.x-n,y:m.y-r}}}}},ke=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=X(e,t);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const v=Z(i),y=Z(a)===a,E=await(null==c.isRTL?void 0:c.isRTL(l.floating)),_=p||(y||!m?[se(a)]:function(e){const t=se(e);return[oe(e),t,oe(t)]}(a));p||"none"===f||_.push(...function(e,t,n,r){const i=$(e);let o=function(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}(Z(e),"start"===n,r);return i&&(o=o.map((e=>e+"-"+i)),t&&(o=o.concat(o.map(oe)))),o}(a,m,f,E));const b=[a,..._],S=await ue(t,g),T=[];let I=(null==(r=o.flip)?void 0:r.overflows)||[];if(u&&T.push(S[v]),d){const e=ie(i,s,E);T.push(S[e[0]],S[e[1]])}if(I=[...I,{placement:i,overflows:T}],!T.every((e=>e<=0))){var N,w;const e=((null==(N=o.flip)?void 0:N.index)||0)+1,t=b[e];if(t)return{data:{index:e,overflows:I},reset:{placement:t}};let n=null==(w=I.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:w.placement;if(!n)switch(h){case"bestFit":{var C;const e=null==(C=I.map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:C[0];e&&(n=e);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}},xe=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:o}=t,{apply:s=(()=>{}),...a}=X(e,t),c=await ue(t,a),l=Z(n),u=$(n),d="y"===ne(n),{width:p,height:h}=r.floating;let f,m;"top"===l||"bottom"===l?(f=l,m=u===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(m=l,f="end"===u?"top":"bottom");const g=h-c[f],v=p-c[m],y=!t.middlewareData.shift;let E=g,_=v;if(d){const e=p-c.left-c.right;_=u||y?H(v,e):e}else{const e=h-c.top-c.bottom;E=u||y?H(g,e):e}if(y&&!u){const e=G(c.left,0),t=G(c.right,0),n=G(c.top,0),r=G(c.bottom,0);d?_=p-2*(0!==e||0!==t?e+t:G(c.left,c.right)):E=h-2*(0!==n||0!==r?n+r:G(c.top,c.bottom))}await s({...t,availableWidth:_,availableHeight:E});const b=await i.getDimensions(o.floating);return p!==b.width||h!==b.height?{reset:{rects:!0}}:{}}}},Le=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=X(e,t);switch(r){case"referenceHidden":{const e=de(await ue(t,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:pe(e)}}}case"escaped":{const e=de(await ue(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:pe(e)}}}default:return{}}}}},Pe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:c}=t,{element:l,padding:u=0}=X(e,t)||{};if(null==l)return{};const d=ae(u),p={x:n,y:r},h=re(i),f=te(h),m=await s.getDimensions(l),g="y"===h,v=g?"top":"left",y=g?"bottom":"right",E=g?"clientHeight":"clientWidth",_=o.reference[f]+o.reference[h]-p[h]-o.floating[f],b=p[h]-o.reference[h],S=await(null==s.getOffsetParent?void 0:s.getOffsetParent(l));let T=S?S[E]:0;T&&await(null==s.isElement?void 0:s.isElement(S))||(T=a.floating[E]||o.floating[f]);const I=_/2-b/2,N=T/2-m[f]/2-1,w=H(d[v],N),C=H(d[y],N),O=w,A=T-m[f]-C,R=T/2-m[f]/2+I,M=J(O,R,A),D=!c.arrow&&null!=$(i)&&R!==M&&o.reference[f]/2-(R<O?w:C)-m[f]/2<0,k=D?R<O?R-O:R-A:0;return{[h]:p[h]+k,data:{[h]:M,centerOffset:R-M-k,...D&&{alignmentOffset:k}},reset:D}}}),je=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:o,strategy:s}=t,{padding:a=2,x:c,y:l}=X(e,t),u=Array.from(await(null==o.getClientRects?void 0:o.getClientRects(r.reference))||[]),d=function(e){const t=e.slice().sort(((e,t)=>e.y-t.y)),n=[];let r=null;for(let i=0;i<t.length;i++){const e=t[i];!r||e.y-r.y>r.height/2?n.push([e]):n[n.length-1].push(e),r=e}return n.map((e=>ce(he(e))))}(u),p=ce(he(u)),h=ae(a);const f=await o.getElementRects({reference:{getBoundingClientRect:function(){if(2===d.length&&d[0].left>d[1].right&&null!=c&&null!=l)return d.find((e=>c>e.left-h.left&&c<e.right+h.right&&l>e.top-h.top&&l<e.bottom+h.bottom))||p;if(d.length>=2){if("y"===ne(n)){const e=d[0],t=d[d.length-1],r="top"===Z(n),i=e.top,o=t.bottom,s=r?e.left:t.left,a=r?e.right:t.right;return{top:i,bottom:o,left:s,right:a,width:a-s,height:o-i,x:s,y:i}}const e="left"===Z(n),t=G(...d.map((e=>e.right))),r=H(...d.map((e=>e.left))),i=d.filter((n=>e?n.left===r:n.right===t)),o=i[0].top,s=i[i.length-1].bottom;return{top:o,bottom:s,left:r,right:t,width:t-r,height:s-o,x:r,y:o}}return p}},floating:r.floating,strategy:s});return i.reference.x!==f.reference.x||i.reference.y!==f.reference.y||i.reference.width!==f.reference.width||i.reference.height!==f.reference.height?{reset:{rects:f}}:{}}}},Ue=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=X(e,t),u={x:n,y:r},d=ne(i),p=ee(d);let h=u[p],f=u[d];const m=X(a,t),g="number"===typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const e="y"===p?"height":"width",t=o.reference[p]-o.floating[e]+g.mainAxis,n=o.reference[p]+o.reference[e]-g.mainAxis;h<t?h=t:h>n&&(h=n)}if(l){var v,y;const e="y"===p?"width":"height",t=["top","left"].includes(Z(i)),n=o.reference[d]-o.floating[e]+(t&&(null==(v=s.offset)?void 0:v[d])||0)+(t?0:g.crossAxis),r=o.reference[d]+o.reference[e]+(t?0:(null==(y=s.offset)?void 0:y[d])||0)-(t?g.crossAxis:0);f<n?f=n:f>r&&(f=r)}return{[p]:h,[d]:f}}}},Fe=(e,t,n)=>{const r=new Map,i={platform:Ae,...n},o={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),c=await(null==s.isRTL?void 0:s.isRTL(t));let l=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=le(l,r,c),p=r,h={},f=0;for(let m=0;m<a.length;m++){const{name:n,fn:o}=a[m],{x:g,y:v,data:y,reset:E}=await o({x:u,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:h,rects:l,platform:s,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=v?v:d,h={...h,[n]:{...h[n],...y}},E&&f<=50&&(f++,"object"===typeof E&&(E.placement&&(p=E.placement),E.rects&&(l=!0===E.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):E.rects),({x:u,y:d}=le(l,p,c))),m=-1)}return{x:u,y:d,placement:p,strategy:i,middlewareData:h}})(e,t,{...i,platform:o})};var ze=r(7950);const Be=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"===typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?Pe({element:n.current,padding:r}).fn(t):{}:n?Pe({element:n,padding:r}).fn(t):{};var i}});var Ve="undefined"!==typeof document?i.useLayoutEffect:i.useEffect;function He(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!He(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!He(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function Ge(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function We(e,t){const n=Ge(e);return Math.round(t*n)/n}function Ye(e){const t=i.useRef(e);return Ve((()=>{t.current=e})),t}var qe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ke=qe.join(","),Qe="undefined"===typeof Element,Je=Qe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Xe=!Qe&&Element.prototype.getRootNode?function(e){var t;return null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null===e||void 0===e?void 0:e.ownerDocument},Ze=function e(t,n){var r;void 0===n&&(n=!0);var i=null===t||void 0===t||null===(r=t.getAttribute)||void 0===r?void 0:r.call(t,"inert");return""===i||"true"===i||n&&t&&e(t.parentNode)},$e=function(e,t,n){if(Ze(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(Ke));return t&&Je.call(e,Ke)&&r.unshift(e),r=r.filter(n)},et=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var s=o.shift();if(!Ze(s,!1))if("SLOT"===s.tagName){var a=s.assignedElements(),c=e(a.length?a:s.children,!0,r);r.flatten?i.push.apply(i,c):i.push({scopeParent:s,candidates:c})}else{Je.call(s,Ke)&&r.filter(s)&&(n||!t.includes(s))&&i.push(s);var l=s.shadowRoot||"function"===typeof r.getShadowRoot&&r.getShadowRoot(s),u=!Ze(l,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(l&&u){var d=e(!0===l?s.children:l.children,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:s,candidates:d})}else o.unshift.apply(o,s.children)}}return i},tt=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},nt=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null===e||void 0===e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!tt(e)?0:e.tabIndex},rt=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},it=function(e){return"INPUT"===e.tagName},ot=function(e){return function(e){return it(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||Xe(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!i||i===e}(e)},st=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},at=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var i=Je.call(e,"details>summary:first-of-type")?e.parentElement:e;if(Je.call(i,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return st(e)}else{if("function"===typeof r){for(var o=e;e;){var s=e.parentElement,a=Xe(e);if(s&&!s.shadowRoot&&!0===r(s))return st(e);e=e.assignedSlot?e.assignedSlot:s||a===e.ownerDocument?s:a.host}e=o}if(function(e){var t,n,r,i,o=e&&Xe(e),s=null===(t=o)||void 0===t?void 0:t.host,a=!1;if(o&&o!==e)for(a=!!(null!==(n=s)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(s)||null!==e&&void 0!==e&&null!==(i=e.ownerDocument)&&void 0!==i&&i.contains(e));!a&&s;){var c,l,u;a=!(null===(l=s=null===(c=o=Xe(s))||void 0===c?void 0:c.host)||void 0===l||null===(u=l.ownerDocument)||void 0===u||!u.contains(s))}return a}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},ct=function(e,t){return!(t.disabled||Ze(t)||function(e){return it(e)&&"hidden"===e.type}(t)||at(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!Je.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},lt=function(e,t){return!(ot(t)||nt(t)<0||!ct(e,t))},ut=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},dt=function e(t){var n=[],r=[];return t.forEach((function(t,i){var o=!!t.scopeParent,s=o?t.scopeParent:t,a=function(e,t){var n=nt(e);return n<0&&t&&!tt(e)?0:n}(s,o),c=o?e(t.candidates):s;0===a?o?n.push.apply(n,c):n.push(s):r.push({documentOrder:i,tabIndex:a,item:t,isScope:o,content:c})})),r.sort(rt).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},pt=function(e,t){var n;return n=(t=t||{}).getShadowRoot?et([e],t.includeContainer,{filter:lt.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:ut}):$e(e,t.includeContainer,lt.bind(null,t)),dt(n)},ht=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==Je.call(e,Ke)&&lt(t,e)};function ft(e){return i.useMemo((()=>e.every((e=>null==e))?null:t=>{e.forEach((e=>{"function"===typeof e?e(t):null!=e&&(e.current=t)}))}),e)}const mt={...o},gt=mt.useInsertionEffect||(e=>e());function vt(e){const t=i.useRef((()=>{0}));return gt((()=>{t.current=e})),i.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}const yt="ArrowUp",Et="ArrowDown",_t="ArrowLeft",bt="ArrowRight";function St(e,t,n){return Math.floor(e/t)!==n}function Tt(e,t){return t<0||t>=e.current.length}function It(e,t){return wt(e,{disabledIndices:t})}function Nt(e,t){return wt(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function wt(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:o=1}=void 0===t?{}:t;const s=e.current,a=i?e=>i.includes(e):e=>{const t=s[e];return null==t||t.hasAttribute("disabled")||"true"===t.getAttribute("aria-disabled")};let c=n;do{c+=r?-o:o}while(c>=0&&c<=s.length-1&&a(c));return c}function Ct(e,t){let{event:n,orientation:r,loop:i,cols:o,disabledIndices:s,minIndex:a,maxIndex:c,prevIndex:l,stopEvent:u=!1}=t,d=l;if(n.key===yt){if(u&&U(n),-1===l)d=c;else if(d=wt(e,{startingIndex:d,amount:o,decrement:!0,disabledIndices:s}),i&&(l-o<a||d<0)){const e=l%o,t=c%o,n=c-(t-e);d=t===e?c:t>e?n:n-o}Tt(e,d)&&(d=l)}if(n.key===Et&&(u&&U(n),-1===l?d=a:(d=wt(e,{startingIndex:l,amount:o,disabledIndices:s}),i&&l+o>c&&(d=wt(e,{startingIndex:l%o-o,amount:o,disabledIndices:s}))),Tt(e,d)&&(d=l)),"both"===r){const t=Y(l/o);n.key===bt&&(u&&U(n),l%o!==o-1?(d=wt(e,{startingIndex:l,disabledIndices:s}),i&&St(d,o,t)&&(d=wt(e,{startingIndex:l-l%o-1,disabledIndices:s}))):i&&(d=wt(e,{startingIndex:l-l%o-1,disabledIndices:s})),St(d,o,t)&&(d=l)),n.key===_t&&(u&&U(n),l%o!==0?(d=wt(e,{startingIndex:l,disabledIndices:s,decrement:!0}),i&&St(d,o,t)&&(d=wt(e,{startingIndex:l+(o-l%o),decrement:!0,disabledIndices:s}))):i&&(d=wt(e,{startingIndex:l+(o-l%o),decrement:!0,disabledIndices:s})),St(d,o,t)&&(d=l));const r=Y(c/o)===t;Tt(e,d)&&(d=i&&r?n.key===_t?c:wt(e,{startingIndex:l-l%o-1,disabledIndices:s}):l)}return d}function Ot(e,t,n){const r=[];let i=0;return e.forEach(((e,o)=>{let{width:s,height:a}=e,c=!1;for(n&&(i=0);!c;){const e=[];for(let n=0;n<s;n++)for(let r=0;r<a;r++)e.push(i+n+r*t);i%t+s<=t&&e.every((e=>null==r[e]))?(e.forEach((e=>{r[e]=o})),c=!0):i++}})),[...r]}function At(e,t,n,r,i){if(-1===e)return-1;const o=n.indexOf(e);switch(i){case"tl":return o;case"tr":return o+t[e].width-1;case"bl":return o+(t[e].height-1)*r;case"br":return n.lastIndexOf(e)}}function Rt(e,t){return t.flatMap(((t,n)=>e.includes(t)?[n]:[]))}let Mt=0;function Dt(e,t){void 0===t&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=t;r&&cancelAnimationFrame(Mt);const o=()=>null==e?void 0:e.focus({preventScroll:n});i?o():Mt=requestAnimationFrame(o)}var kt="undefined"!==typeof document?i.useLayoutEffect:i.useEffect;function xt(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const Lt=i.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function Pt(e){const{children:t,elementsRef:n,labelsRef:r}=e,[o,s]=i.useState((()=>new Map)),a=i.useCallback((e=>{s((t=>new Map(t).set(e,null)))}),[]),c=i.useCallback((e=>{s((t=>{const n=new Map(t);return n.delete(e),n}))}),[]);return kt((()=>{const e=new Map(o);Array.from(e.keys()).sort(xt).forEach(((t,n)=>{e.set(t,n)})),function(e,t){if(e.size!==t.size)return!1;for(const[n,r]of e.entries())if(r!==t.get(n))return!1;return!0}(o,e)||s(e)}),[o]),i.createElement(Lt.Provider,{value:i.useMemo((()=>({register:a,unregister:c,map:o,elementsRef:n,labelsRef:r})),[a,c,o,n,r])},t)}function jt(e){void 0===e&&(e={});const{label:t}=e,{register:n,unregister:r,map:o,elementsRef:s,labelsRef:a}=i.useContext(Lt),[c,l]=i.useState(null),u=i.useRef(null),d=i.useCallback((e=>{if(u.current=e,null!==c&&(s.current[c]=e,a)){var n;const r=void 0!==t;a.current[c]=r?t:null!=(n=null==e?void 0:e.textContent)?n:null}}),[c,s,a,t]);return kt((()=>{const e=u.current;if(e)return n(e),()=>{r(e)}}),[n,r]),kt((()=>{const e=u.current?o.get(u.current):null;null!=e&&l(e)}),[o]),i.useMemo((()=>({ref:d,index:null==c?-1:c})),[c,d])}function Ut(e,t){return"function"===typeof e?e(t):e?i.cloneElement(e,t):i.createElement("div",t)}const Ft=i.createContext({activeIndex:0,onNavigate:()=>{}}),zt=[_t,bt],Bt=[yt,Et],Vt=[...zt,...Bt],Ht=i.forwardRef((function(e,t){const{render:n,orientation:r="both",loop:o=!0,cols:s=1,disabledIndices:a=[],activeIndex:c,onNavigate:l,itemSizes:u,dense:d=!1,...p}=e,[h,f]=i.useState(0),m=null!=c?c:h,g=vt(null!=l?l:f),v=i.useRef([]),y=n&&"function"!==typeof n?n.props:{},E=i.useMemo((()=>({activeIndex:m,onNavigate:g})),[m,g]),_=s>1;const b={...p,...y,ref:t,"aria-orientation":"both"===r?void 0:r,onKeyDown(e){null==p.onKeyDown||p.onKeyDown(e),null==y.onKeyDown||y.onKeyDown(e),function(e){if(!Vt.includes(e.key))return;let t=m;if(_){const n=u||Array.from({length:v.current.length},(()=>({width:1,height:1}))),i=Ot(n,s,d),c=i.findIndex((e=>null!=e&&!a.includes(e))),l=i.reduce(((e,t,n)=>null==t||null!=a&&a.includes(t)?e:n),-1);t=i[Ct({current:i.map((e=>e?v.current[e]:null))},{event:e,orientation:r,loop:o,cols:s,disabledIndices:Rt([...a,void 0],i),minIndex:c,maxIndex:l,prevIndex:At(m,n,i,s,e.key===Et?"bl":e.key===bt?"tr":"tl")})]}const n=It(v,a),i=Nt(v,a),c={horizontal:[bt],vertical:[Et],both:[bt,Et]}[r],l={horizontal:[_t],vertical:[yt],both:[_t,yt]}[r],p=_?Vt:{horizontal:zt,vertical:Bt,both:Vt}[r];t===m&&[...c,...l].includes(e.key)&&(t=o&&t===i&&c.includes(e.key)?n:o&&t===n&&l.includes(e.key)?i:wt(v,{startingIndex:t,decrement:l.includes(e.key),disabledIndices:a})),t===m||Tt(v,t)||(e.stopPropagation(),p.includes(e.key)&&e.preventDefault(),g(t),queueMicrotask((()=>{Dt(v.current[t])})))}(e)}};return i.createElement(Ft.Provider,{value:E},i.createElement(Pt,{elementsRef:v},Ut(n,b)))})),Gt=i.forwardRef((function(e,t){const{render:n,...r}=e,o=n&&"function"!==typeof n?n.props:{},{activeIndex:s,onNavigate:a}=i.useContext(Ft),{ref:c,index:l}=jt(),u=ft([c,t,o.ref]),d=s===l;return Ut(n,{...r,...o,ref:u,tabIndex:d?0:-1,"data-active":d?"":void 0,onFocus(e){null==r.onFocus||r.onFocus(e),null==o.onFocus||o.onFocus(e),a(l)}})}));function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt.apply(this,arguments)}let Yt=!1,qt=0;const Kt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+qt++;const Qt=mt.useId||function(){const[e,t]=i.useState((()=>Yt?Kt():void 0));return kt((()=>{null==e&&t(Kt())}),[]),i.useEffect((()=>{Yt=!0}),[]),e};const Jt=i.forwardRef((function(e,t){const{context:{placement:n,elements:{floating:r},middlewareData:{arrow:o}},width:s=14,height:a=7,tipRadius:c=0,strokeWidth:l=0,staticOffset:u,stroke:d,d:p,style:{transform:h,...f}={},...m}=e;const g=Qt();if(!r)return null;const v=2*l,y=v/2,E=s/2*(c/-8+1),_=a/2*c/4,[b,S]=n.split("-"),T=Ae.isRTL(r),I=!!p,N="top"===b||"bottom"===b,w=u&&"end"===S?"bottom":"top";let C=u&&"end"===S?"right":"left";u&&T&&(C="end"===S?"left":"right");const O=null!=(null==o?void 0:o.x)?u||o.x:"",A=null!=(null==o?void 0:o.y)?u||o.y:"",R=p||"M0,0 H"+s+" L"+(s-E)+","+(a-_)+" Q"+s/2+","+a+" "+E+","+(a-_)+" Z",M={top:I?"rotate(180deg)":"",left:I?"rotate(90deg)":"rotate(-90deg)",bottom:I?"":"rotate(180deg)",right:I?"rotate(-90deg)":"rotate(90deg)"}[b];return i.createElement("svg",Wt({},m,{"aria-hidden":!0,ref:t,width:I?s:s+v,height:s,viewBox:"0 0 "+s+" "+(a>s?a:s),style:{position:"absolute",pointerEvents:"none",[C]:O,[w]:A,[b]:N||I?"100%":"calc(100% - "+v/2+"px)",transform:""+M+(null!=h?h:""),...f}}),v>0&&i.createElement("path",{clipPath:"url(#"+g+")",fill:"none",stroke:d,strokeWidth:v+(p?0:1),d:R}),i.createElement("path",{stroke:v&&!p?m.fill:"none",d:R}),i.createElement("clipPath",{id:g},i.createElement("rect",{x:-y,y:y*(I?-1:1),width:s+v,height:s})))}));function Xt(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}const Zt=i.createContext(null),$t=i.createContext(null),en=()=>{var e;return(null==(e=i.useContext(Zt))?void 0:e.id)||null},tn=()=>i.useContext($t);function nn(e){const t=Qt(),n=tn(),r=en(),i=e||r;return kt((()=>{const e={id:t,parentId:i};return null==n||n.addNode(e),()=>{null==n||n.removeNode(e)}}),[n,t,i]),t}function rn(e){const{children:t,id:n}=e,r=en();return i.createElement(Zt.Provider,{value:i.useMemo((()=>({id:n,parentId:r})),[n,r])},t)}function on(e){const{children:t}=e,n=i.useRef([]),r=i.useCallback((e=>{n.current=[...n.current,e]}),[]),o=i.useCallback((e=>{n.current=n.current.filter((t=>t!==e))}),[]),s=i.useState((()=>Xt()))[0];return i.createElement($t.Provider,{value:i.useMemo((()=>({nodesRef:n,addNode:r,removeNode:o,events:s})),[r,o,s])},t)}function sn(e){return"data-floating-ui-"+e}function an(e){const t=(0,i.useRef)(e);return kt((()=>{t.current=e})),t}const cn=sn("safe-polygon");function ln(e,t,n){return n&&!D(n)?0:"number"===typeof e?e:null==e?void 0:e[t]}function un(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,dataRef:o,events:s,elements:{domReference:a,floating:c},refs:l}=e,{enabled:d=!0,delay:p=0,handleClose:h=null,mouseOnly:f=!1,restMs:m=0,move:g=!0}=t,v=tn(),y=en(),E=an(h),_=an(p),b=i.useRef(),S=i.useRef(),T=i.useRef(),N=i.useRef(),w=i.useRef(!0),C=i.useRef(!1),O=i.useRef((()=>{})),A=i.useCallback((()=>{var e;const t=null==(e=o.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t}),[o]);i.useEffect((()=>{if(d)return s.on("openchange",e),()=>{s.off("openchange",e)};function e(e){let{open:t}=e;t||(clearTimeout(S.current),clearTimeout(N.current),w.current=!0)}}),[d,s]),i.useEffect((()=>{if(!d||!E.current||!n)return;function e(e){A()&&r(!1,e,"hover")}const t=k(c).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}}),[c,n,r,d,E,A]);const R=i.useCallback((function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="hover");const i=ln(_.current,"close",b.current);i&&!T.current?(clearTimeout(S.current),S.current=setTimeout((()=>r(!1,e,n)),i)):t&&(clearTimeout(S.current),r(!1,e,n))}),[_,r]),M=i.useCallback((()=>{O.current(),T.current=void 0}),[]),x=i.useCallback((()=>{if(C.current){const e=k(l.floating.current).body;e.style.pointerEvents="",e.removeAttribute(cn),C.current=!1}}),[l]);return i.useEffect((()=>{if(d&&u(a)){const e=a;return n&&e.addEventListener("mouseleave",l),null==c||c.addEventListener("mouseleave",l),g&&e.addEventListener("mousemove",i,{once:!0}),e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",s),()=>{n&&e.removeEventListener("mouseleave",l),null==c||c.removeEventListener("mouseleave",l),g&&e.removeEventListener("mousemove",i),e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",s)}}function t(){return!!o.current.openEvent&&["click","mousedown"].includes(o.current.openEvent.type)}function i(e){if(clearTimeout(S.current),w.current=!1,f&&!D(b.current)||m>0&&0===ln(_.current,"open"))return;const t=ln(_.current,"open",b.current);t?S.current=setTimeout((()=>{r(!0,e,"hover")}),t):r(!0,e,"hover")}function s(r){if(t())return;O.current();const i=k(c);if(clearTimeout(N.current),E.current){n||clearTimeout(S.current),T.current=E.current({...e,tree:v,x:r.clientX,y:r.clientY,onClose(){x(),M(),R(r,!0,"safe-polygon")}});const t=T.current;return i.addEventListener("mousemove",t),void(O.current=()=>{i.removeEventListener("mousemove",t)})}("touch"!==b.current||!I(c,r.relatedTarget))&&R(r)}function l(n){t()||null==E.current||E.current({...e,tree:v,x:n.clientX,y:n.clientY,onClose(){x(),M(),R(n)}})(n)}}),[a,c,d,e,f,m,g,R,M,x,r,n,v,_,E,o]),kt((()=>{var e;if(d&&n&&null!=(e=E.current)&&e.__options.blockPointerEvents&&A()){const e=k(c).body;if(e.setAttribute(cn,""),e.style.pointerEvents="none",C.current=!0,u(a)&&c){var t;const e=a,n=null==v||null==(t=v.nodesRef.current.find((e=>e.id===y)))||null==(t=t.context)?void 0:t.elements.floating;return n&&(n.style.pointerEvents=""),e.style.pointerEvents="auto",c.style.pointerEvents="auto",()=>{e.style.pointerEvents="",c.style.pointerEvents=""}}}}),[d,n,y,c,a,v,E,A]),kt((()=>{n||(b.current=void 0,M(),x())}),[n,M,x]),i.useEffect((()=>()=>{M(),clearTimeout(S.current),clearTimeout(N.current),x()}),[d,a,M,x]),i.useMemo((()=>{if(!d)return{};function e(e){b.current=e.pointerType}return{reference:{onPointerDown:e,onPointerEnter:e,onMouseMove(e){function t(){w.current||r(!0,e.nativeEvent,"hover")}f&&!D(b.current)||n||0===m||(clearTimeout(N.current),"touch"===b.current?t():N.current=setTimeout(t,m))}},floating:{onMouseEnter(){clearTimeout(S.current)},onMouseLeave(e){R(e.nativeEvent,!1)}}}}),[d,f,n,m,r,R])}const dn=()=>{},pn=i.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:dn,setState:dn,isInstantPhase:!1}),hn=()=>i.useContext(pn),fn=e=>{const{children:t,delay:n,timeoutMs:r=0}=e,[o,s]=i.useReducer(((e,t)=>({...e,...t})),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),a=i.useRef(null),c=i.useCallback((e=>{s({currentId:e})}),[]);return kt((()=>{o.currentId?null===a.current?a.current=o.currentId:s({isInstantPhase:!0}):(s({isInstantPhase:!1}),a.current=null)}),[o.currentId]),i.createElement(pn.Provider,{value:i.useMemo((()=>({...o,setState:s,setCurrentId:c})),[o,c])},t)};function mn(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:o}=t,s=null!=o?o:i,a=hn(),{currentId:c,setCurrentId:l,initialDelay:u,setState:d,timeoutMs:p}=a;return kt((()=>{c&&(d({delay:{open:1,close:ln(u,"close")}}),c!==s&&r(!1))}),[s,r,d,c,u]),kt((()=>{function e(){r(!1),d({delay:u,currentId:null})}if(c&&!n&&c===s){if(p){const t=window.setTimeout(e,p);return()=>{clearTimeout(t)}}e()}}),[n,d,c,s,r,u,p]),kt((()=>{l!==dn&&n&&l(s)}),[n,l,s]),a}function gn(e,t){let n=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)})),r=n;for(;r.length;)r=e.filter((e=>{var t;return null==(t=r)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))})),n=n.concat(r);return n}let vn=new WeakMap,yn=new WeakSet,En={},_n=0;const bn=()=>"undefined"!==typeof HTMLElement&&"inert"in HTMLElement.prototype,Sn=e=>e&&(e.host||Sn(e.parentNode)),Tn=(e,t)=>t.map((t=>{if(e.contains(t))return t;const n=Sn(t);return e.contains(n)?n:null})).filter((e=>null!=e));function In(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=k(e[0]).body;return function(e,t,n,r){const i="data-floating-ui-inert",o=r?"inert":n?"aria-hidden":null,s=Tn(t,e),a=new Set,c=new Set(s),l=[];En[i]||(En[i]=new WeakMap);const u=En[i];return s.forEach((function e(t){t&&!a.has(t)&&(a.add(t),t.parentNode&&e(t.parentNode))})),function e(t){t&&!c.has(t)&&Array.prototype.forEach.call(t.children,(t=>{if(a.has(t))e(t);else{const e=o?t.getAttribute(o):null,n=null!==e&&"false"!==e,r=(vn.get(t)||0)+1,s=(u.get(t)||0)+1;vn.set(t,r),u.set(t,s),l.push(t),1===r&&n&&yn.add(t),1===s&&t.setAttribute(i,""),!n&&o&&t.setAttribute(o,"true")}}))}(t),a.clear(),_n++,()=>{l.forEach((e=>{const t=(vn.get(e)||0)-1,n=(u.get(e)||0)-1;vn.set(e,t),u.set(e,n),t||(!yn.has(e)&&o&&e.removeAttribute(o),yn.delete(e)),n||e.removeAttribute(i)})),_n--,_n||(vn=new WeakMap,vn=new WeakMap,yn=new WeakSet,En={})}}(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const Nn=()=>({getShadowRoot:!0,displayCheck:"function"===typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function wn(e,t){const n=pt(e,Nn());"prev"===t&&n.reverse();const r=n.indexOf(T(k(e)));return n.slice(r+1)[0]}function Cn(){return wn(document.body,"next")}function On(){return wn(document.body,"prev")}function An(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!I(n,r)}function Rn(e){pt(e,Nn()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function Mn(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const Dn={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function kn(e){"Tab"===e.key&&(e.target,clearTimeout(undefined))}const xn=i.forwardRef((function(e,t){const[n,r]=i.useState();kt((()=>(A()&&r("button"),document.addEventListener("keydown",kn),()=>{document.removeEventListener("keydown",kn)})),[]);const o={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[sn("focus-guard")]:"",style:Dn};return i.createElement("span",Wt({},e,o))})),Ln=i.createContext(null),Pn=sn("portal");function jn(e){void 0===e&&(e={});const{id:t,root:n}=e,r=Qt(),o=Fn(),[s,a]=i.useState(null),c=i.useRef(null);return kt((()=>()=>{null==s||s.remove(),queueMicrotask((()=>{c.current=null}))}),[s]),kt((()=>{if(c.current)return;const e=t?document.getElementById(t):null;if(!e)return;const n=document.createElement("div");n.id=r,n.setAttribute(Pn,""),e.appendChild(n),c.current=n,a(n)}),[t,r]),kt((()=>{if(c.current)return;let e=n||(null==o?void 0:o.portalNode);e&&!u(e)&&(e=e.current),e=e||document.body;let i=null;t&&(i=document.createElement("div"),i.id=t,e.appendChild(i));const s=document.createElement("div");s.id=r,s.setAttribute(Pn,""),e=i||e,e.appendChild(s),c.current=s,a(s)}),[t,n,r,o]),s}function Un(e){const{children:t,id:n,root:r=null,preserveTabOrder:o=!0}=e,s=jn({id:n,root:r}),[a,c]=i.useState(null),l=i.useRef(null),u=i.useRef(null),d=i.useRef(null),p=i.useRef(null),h=!!a&&!a.modal&&a.open&&o&&!(!r&&!s);return i.useEffect((()=>{if(s&&o&&(null==a||!a.modal))return s.addEventListener("focusin",e,!0),s.addEventListener("focusout",e,!0),()=>{s.removeEventListener("focusin",e,!0),s.removeEventListener("focusout",e,!0)};function e(e){if(s&&An(e)){("focusin"===e.type?Mn:Rn)(s)}}}),[s,o,null==a?void 0:a.modal]),i.createElement(Ln.Provider,{value:i.useMemo((()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:u,beforeInsideRef:d,afterInsideRef:p,portalNode:s,setFocusManagerState:c})),[o,s])},h&&s&&i.createElement(xn,{"data-type":"outside",ref:l,onFocus:e=>{if(An(e,s)){var t;null==(t=d.current)||t.focus()}else{const e=On()||(null==a?void 0:a.refs.domReference.current);null==e||e.focus()}}}),h&&s&&i.createElement("span",{"aria-owns":s.id,style:Dn}),s&&(0,ze.createPortal)(t,s),h&&s&&i.createElement(xn,{"data-type":"outside",ref:u,onFocus:e=>{if(An(e,s)){var t;null==(t=p.current)||t.focus()}else{const t=Cn()||(null==a?void 0:a.refs.domReference.current);null==t||t.focus(),(null==a?void 0:a.closeOnFocusOut)&&(null==a||a.onOpenChange(!1,e.nativeEvent))}}}))}const Fn=()=>i.useContext(Ln),zn=20;let Bn=[];function Vn(e){Bn=Bn.filter((e=>e.isConnected));let t=e;if(t&&"body"!==s(t)){if(!ht(t,Nn())){const e=pt(t,Nn())[0];if(!e)return;t=e}Bn.push(t),Bn.length>zn&&(Bn=Bn.slice(-zn))}}function Hn(){return Bn.slice().reverse().find((e=>e.isConnected))}const Gn=i.forwardRef((function(e,t){return i.createElement("button",Wt({},e,{type:"button",ref:t,tabIndex:-1,style:Dn}))}));function Wn(e){const{context:t,children:n,disabled:r=!1,order:o=["content"],guards:s=!0,initialFocus:a=0,returnFocus:c=!0,modal:l=!0,visuallyHiddenDismiss:u=!1,closeOnFocusOut:p=!0}=e,{open:h,refs:f,nodeId:m,onOpenChange:g,events:v,dataRef:y,elements:{domReference:E,floating:_}}=t,b="number"===typeof a&&a<0,S=F(E)&&b,N=!bn()||s,w=an(o),A=an(a),R=an(c),M=tn(),D=Fn(),x=i.useRef(null),P=i.useRef(null),j=i.useRef(!1),z=i.useRef(!1),B=null!=D,V=i.useCallback((function(e){return void 0===e&&(e=_),e?pt(e,Nn()):[]}),[_]),H=i.useCallback((e=>{const t=V(e);return w.current.map((e=>E&&"reference"===e?E:_&&"floating"===e?_:t)).filter(Boolean).flat()}),[E,_,w,V]);function G(e){return!r&&u&&l?i.createElement(Gn,{ref:"start"===e?x:P,onClick:e=>g(!1,e.nativeEvent)},"string"===typeof u?u:"Dismiss"):null}i.useEffect((()=>{if(r||!l)return;function e(e){if("Tab"===e.key){I(_,T(k(_)))&&0===V().length&&!S&&U(e);const t=H(),n=L(e);"reference"===w.current[0]&&n===E&&(U(e),e.shiftKey?Dt(t[t.length-1]):Dt(t[1])),"floating"===w.current[1]&&n===_&&e.shiftKey&&(U(e),Dt(t[0]))}}const t=k(_);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}),[r,E,_,l,w,S,V,H]),i.useEffect((()=>{if(!r&&p)return _&&d(E)?(E.addEventListener("focusout",t),E.addEventListener("pointerdown",e),!l&&_.addEventListener("focusout",t),()=>{E.removeEventListener("focusout",t),E.removeEventListener("pointerdown",e),!l&&_.removeEventListener("focusout",t)}):void 0;function e(){z.current=!0,setTimeout((()=>{z.current=!1}))}function t(e){const t=e.relatedTarget;queueMicrotask((()=>{const n=!(I(E,t)||I(_,t)||I(t,_)||I(null==D?void 0:D.portalNode,t)||null!=t&&t.hasAttribute(sn("focus-guard"))||M&&(gn(M.nodesRef.current,m).find((e=>{var n,r;return I(null==(n=e.context)?void 0:n.elements.floating,t)||I(null==(r=e.context)?void 0:r.elements.domReference,t)}))||function(e,t){var n;let r=[],i=null==(n=e.find((e=>e.id===t)))?void 0:n.parentId;for(;i;){const t=e.find((e=>e.id===i));i=null==t?void 0:t.parentId,t&&(r=r.concat(t))}return r}(M.nodesRef.current,m).find((e=>{var n,r;return(null==(n=e.context)?void 0:n.elements.floating)===t||(null==(r=e.context)?void 0:r.elements.domReference)===t}))));t&&n&&!z.current&&t!==Hn()&&(j.current=!0,g(!1,e))}))}}),[r,E,_,l,m,M,D,g,p]),i.useEffect((()=>{var e;if(r)return;const t=Array.from((null==D||null==(e=D.portalNode)?void 0:e.querySelectorAll("["+sn("portal")+"]"))||[]);if(_){const e=[_,...t,x.current,P.current,w.current.includes("reference")||S?E:null].filter((e=>null!=e)),n=l||S?In(e,N,!N):In(e);return()=>{n()}}}),[r,E,_,l,w,D,S,N]),kt((()=>{if(r||!_)return;const e=T(k(_));queueMicrotask((()=>{const t=H(_),n=A.current,r=("number"===typeof n?t[n]:n.current)||_,i=I(_,e);b||i||!h||Dt(r,{preventScroll:r===_})}))}),[r,h,_,b,H,A]),kt((()=>{if(r||!_)return;let e=!1;const t=k(_),n=T(t),i=y.current;function o(t){let{reason:n,event:r,nested:i}=t;"escape-key"===n&&f.domReference.current&&Vn(f.domReference.current),"hover"===n&&"mouseleave"===r.type&&(j.current=!0),"outside-press"===n&&(i?(j.current=!1,e=!0):j.current=!(C(r)||O(r)))}return Vn(n),v.on("openchange",o),()=>{v.off("openchange",o);const n=T(t),r=I(_,n)||M&&gn(M.nodesRef.current,m).some((e=>{var t;return I(null==(t=e.context)?void 0:t.elements.floating,n)}));(r||i.openEvent&&["click","mousedown"].includes(i.openEvent.type))&&f.domReference.current&&Vn(f.domReference.current);const s=Hn();R.current&&!j.current&&d(s)&&(s===n||n===t.body||r)&&Dt(s,{cancelPrevious:!1,preventScroll:e})}}),[r,_,R,y,f,v,M,m]),kt((()=>{if(!r&&D)return D.setFocusManagerState({modal:l,closeOnFocusOut:p,open:h,onOpenChange:g,refs:f}),()=>{D.setFocusManagerState(null)}}),[r,D,l,h,g,f,p]),kt((()=>{if(r||!_||"function"!==typeof MutationObserver||b)return;const e=()=>{const e=_.getAttribute("tabindex");w.current.includes("floating")||T(k(_))!==f.domReference.current&&0===V().length?"0"!==e&&_.setAttribute("tabindex","0"):"-1"!==e&&_.setAttribute("tabindex","-1")};e();const t=new MutationObserver(e);return t.observe(_,{childList:!0,subtree:!0,attributes:!0}),()=>{t.disconnect()}}),[r,_,f,w,V,b]);const W=!r&&N&&(B||l);return i.createElement(i.Fragment,null,W&&i.createElement(xn,{"data-type":"inside",ref:null==D?void 0:D.beforeInsideRef,onFocus:e=>{if(l){const e=H();Dt("reference"===o[0]?e[0]:e[e.length-1])}else if(null!=D&&D.preserveTabOrder&&D.portalNode)if(j.current=!1,An(e,D.portalNode)){const e=Cn()||E;null==e||e.focus()}else{var t;null==(t=D.beforeOutsideRef.current)||t.focus()}}}),!S&&G("start"),n,G("end"),W&&i.createElement(xn,{"data-type":"inside",ref:null==D?void 0:D.afterInsideRef,onFocus:e=>{if(l)Dt(H()[0]);else if(null!=D&&D.preserveTabOrder&&D.portalNode)if(p&&(j.current=!0),An(e,D.portalNode)){const e=On()||E;null==e||e.focus()}else{var t;null==(t=D.afterOutsideRef.current)||t.focus()}}}))}const Yn=new Set,qn=i.forwardRef((function(e,t){const{lockScroll:n=!1,...r}=e,o=Qt();return kt((()=>{if(!n)return;Yn.add(o);const e=/iP(hone|ad|od)|iOS/.test(N()),t=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=t.left?parseFloat(t.left):window.pageXOffset,a=t.top?parseFloat(t.top):window.pageYOffset;if(t.overflow="hidden",i&&(t[r]=i+"px"),e){var c,l;const e=(null==(c=window.visualViewport)?void 0:c.offsetLeft)||0,n=(null==(l=window.visualViewport)?void 0:l.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(a-Math.floor(n))+"px",left:-(s-Math.floor(e))+"px",right:"0"})}return()=>{Yn.delete(o),0===Yn.size&&(Object.assign(t,{overflow:"",[r]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(s,a)))}}),[o,n]),i.createElement("div",Wt({ref:t},r,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...r.style}}))}));function Kn(e){return d(e.target)&&"BUTTON"===e.target.tagName}function Qn(e){return j(e)}function Jn(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:s}}=e,{enabled:a=!0,event:c="click",toggle:l=!0,ignoreMouse:u=!1,keyboardHandlers:d=!0}=t,p=i.useRef(),h=i.useRef(!1);return i.useMemo((()=>a?{reference:{onPointerDown(e){p.current=e.pointerType},onMouseDown(e){0===e.button&&(D(p.current,!0)&&u||"click"!==c&&(!n||!l||o.current.openEvent&&"mousedown"!==o.current.openEvent.type?(e.preventDefault(),r(!0,e.nativeEvent,"click")):r(!1,e.nativeEvent,"click")))},onClick(e){"mousedown"===c&&p.current?p.current=void 0:D(p.current,!0)&&u||(!n||!l||o.current.openEvent&&"click"!==o.current.openEvent.type?r(!0,e.nativeEvent,"click"):r(!1,e.nativeEvent,"click"))},onKeyDown(e){p.current=void 0,e.defaultPrevented||!d||Kn(e)||(" "!==e.key||Qn(s)||(e.preventDefault(),h.current=!0),"Enter"===e.key&&r(!n||!l,e.nativeEvent,"click"))},onKeyUp(e){e.defaultPrevented||!d||Kn(e)||Qn(s)||" "===e.key&&h.current&&(h.current=!1,r(!n||!l,e.nativeEvent,"click"))}}}:{}),[a,o,c,u,d,s,l,n,r])}function Xn(e){return null!=e&&null!=e.clientX}function Zn(e,t){void 0===t&&(t={});const{open:n,refs:r,dataRef:o,elements:{floating:s}}=e,{enabled:c=!0,axis:l="both",x:u=null,y:d=null}=t,p=i.useRef(!1),h=i.useRef(null),[f,m]=i.useState(),[g,v]=i.useState([]),y=vt(((e,t)=>{p.current||o.current.openEvent&&!Xn(o.current.openEvent)||r.setPositionReference(function(e,t){let n=null,r=null,i=!1;return{contextElement:e.current||void 0,getBoundingClientRect(){var o,s;const a=(null==(o=e.current)?void 0:o.getBoundingClientRect())||{width:0,height:0,x:0,y:0},c="x"===t.axis||"both"===t.axis,l="y"===t.axis||"both"===t.axis,u=["mouseenter","mousemove"].includes((null==(s=t.dataRef.current.openEvent)?void 0:s.type)||"")&&"touch"!==t.pointerType;let d=a.width,p=a.height,h=a.x,f=a.y;return null==n&&t.x&&c&&(n=a.x-t.x),null==r&&t.y&&l&&(r=a.y-t.y),h-=n||0,f-=r||0,d=0,p=0,!i||u?(d="y"===t.axis?a.width:0,p="x"===t.axis?a.height:0,h=c&&null!=t.x?t.x:h,f=l&&null!=t.y?t.y:f):i&&!u&&(p="x"===t.axis?a.height:p,d="y"===t.axis?a.width:d),i=!0,{width:d,height:p,x:h,y:f,top:f,right:h+d,bottom:f+p,left:h}}}}(r.domReference,{x:e,y:t,axis:l,dataRef:o,pointerType:f}))})),E=vt((e=>{null==u&&null==d&&(n?h.current||v([]):y(e.clientX,e.clientY))})),_=D(f)?s:n,b=i.useCallback((()=>{if(!_||!c||null!=u||null!=d)return;const e=a(r.floating.current);function t(n){const i=L(n);I(r.floating.current,i)?(e.removeEventListener("mousemove",t),h.current=null):y(n.clientX,n.clientY)}if(!o.current.openEvent||Xn(o.current.openEvent)){e.addEventListener("mousemove",t);const n=()=>{e.removeEventListener("mousemove",t),h.current=null};return h.current=n,n}r.setPositionReference(r.domReference.current)}),[o,c,_,r,y,u,d]);return i.useEffect((()=>b()),[b,g]),i.useEffect((()=>{c&&!s&&(p.current=!1)}),[c,s]),i.useEffect((()=>{!c&&n&&(p.current=!0)}),[c,n]),kt((()=>{!c||null==u&&null==d||(p.current=!1,y(u,d))}),[c,u,d,y]),i.useMemo((()=>{if(!c)return{};function e(e){let{pointerType:t}=e;m(t)}return{reference:{onPointerDown:e,onPointerEnter:e,onMouseMove:E,onMouseEnter:E}}}),[c,E])}const $n={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},er={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},tr=e=>{var t,n;return{escapeKey:"boolean"===typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"===typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function nr(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,nodeId:o,elements:{reference:s,domReference:a,floating:c},dataRef:l}=e,{enabled:p=!0,escapeKey:h=!0,outsidePress:f=!0,outsidePressEvent:m="pointerdown",referencePress:g=!1,referencePressEvent:E="pointerdown",ancestorScroll:b=!1,bubbles:T,capture:N}=t,w=tn(),C=vt("function"===typeof f?f:()=>!1),O="function"===typeof f?C:f,A=i.useRef(!1),R=i.useRef(!1),{escapeKey:M,outsidePress:D}=tr(T),{escapeKey:P,outsidePress:j}=tr(N),U=vt((e=>{if(!n||!p||!h||"Escape"!==e.key)return;const t=w?gn(w.nodesRef.current,o):[];if(!M&&(e.stopPropagation(),t.length>0)){let e=!0;if(t.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}r(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),F=vt((e=>{var t;const n=()=>{var t;U(e),null==(t=L(e))||t.removeEventListener("keydown",n)};null==(t=L(e))||t.addEventListener("keydown",n)})),z=vt((e=>{const t=A.current;A.current=!1;const n=R.current;if(R.current=!1,"click"===m&&n)return;if(t)return;if("function"===typeof O&&!O(e))return;const i=L(e),s="["+sn("inert")+"]",l=k(c).querySelectorAll(s);let p=u(i)?i:null;for(;p&&!v(p);){const e=_(p);if(v(e)||!u(e))break;p=e}if(l.length&&u(i)&&!i.matches("html,body")&&!I(i,c)&&Array.from(l).every((e=>!I(p,e))))return;if(d(i)&&c){const t=i.clientWidth>0&&i.scrollWidth>i.clientWidth,n=i.clientHeight>0&&i.scrollHeight>i.clientHeight;let r=n&&e.offsetX>i.clientWidth;if(n){"rtl"===y(i).direction&&(r=e.offsetX<=i.offsetWidth-i.clientWidth)}if(r||t&&e.offsetY>i.clientHeight)return}const h=w&&gn(w.nodesRef.current,o).some((t=>{var n;return x(e,null==(n=t.context)?void 0:n.elements.floating)}));if(x(e,c)||x(e,a)||h)return;const f=w?gn(w.nodesRef.current,o):[];if(f.length>0){let e=!0;if(f.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}r(!1,e,"outside-press")})),B=vt((e=>{var t;const n=()=>{var t;z(e),null==(t=L(e))||t.removeEventListener(m,n)};null==(t=L(e))||t.addEventListener(m,n)}));return i.useEffect((()=>{if(!n||!p)return;function e(e){r(!1,e,"ancestor-scroll")}l.current.__escapeKeyBubbles=M,l.current.__outsidePressBubbles=D;const t=k(c);h&&t.addEventListener("keydown",P?F:U,P),O&&t.addEventListener(m,j?B:z,j);let i=[];return b&&(u(a)&&(i=S(a)),u(c)&&(i=i.concat(S(c))),!u(s)&&s&&s.contextElement&&(i=i.concat(S(s.contextElement)))),i=i.filter((e=>{var n;return e!==(null==(n=t.defaultView)?void 0:n.visualViewport)})),i.forEach((t=>{t.addEventListener("scroll",e,{passive:!0})})),()=>{h&&t.removeEventListener("keydown",P?F:U,P),O&&t.removeEventListener(m,j?B:z,j),i.forEach((t=>{t.removeEventListener("scroll",e)}))}}),[l,c,a,s,h,O,m,n,r,b,p,M,D,U,P,F,z,j,B]),i.useEffect((()=>{A.current=!1}),[O,m]),i.useMemo((()=>p?{reference:{onKeyDown:U,[$n[E]]:e=>{g&&r(!1,e.nativeEvent,"reference-press")}},floating:{onKeyDown:U,onMouseDown(){R.current=!0},onMouseUp(){R.current=!0},[er[m]]:()=>{A.current=!0}}}:{}),[p,g,m,E,r,U])}function rr(e){var t;void 0===e&&(e={});const{open:n=!1,onOpenChange:r,nodeId:o}=e,[s,a]=i.useState(null),[c,l]=i.useState(null),d=(null==(t=e.elements)?void 0:t.reference)||s;kt((()=>{d&&(g.current=d)}),[d]);const p=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:a}={},transform:c=!0,whileElementsMounted:l,open:u}=e,[d,p]=i.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=i.useState(r);He(h,r)||f(r);const[m,g]=i.useState(null),[v,y]=i.useState(null),E=i.useCallback((e=>{e!==T.current&&(T.current=e,g(e))}),[]),_=i.useCallback((e=>{e!==I.current&&(I.current=e,y(e))}),[]),b=s||m,S=a||v,T=i.useRef(null),I=i.useRef(null),N=i.useRef(d),w=null!=l,C=Ye(l),O=Ye(o),A=i.useCallback((()=>{if(!T.current||!I.current)return;const e={placement:t,strategy:n,middleware:h};O.current&&(e.platform=O.current),Fe(T.current,I.current,e).then((e=>{const t={...e,isPositioned:!0};R.current&&!He(N.current,t)&&(N.current=t,ze.flushSync((()=>{p(t)})))}))}),[h,t,n,O]);Ve((()=>{!1===u&&N.current.isPositioned&&(N.current.isPositioned=!1,p((e=>({...e,isPositioned:!1}))))}),[u]);const R=i.useRef(!1);Ve((()=>(R.current=!0,()=>{R.current=!1})),[]),Ve((()=>{if(b&&(T.current=b),S&&(I.current=S),b&&S){if(C.current)return C.current(b,S,A);A()}}),[b,S,A,C,w]);const M=i.useMemo((()=>({reference:T,floating:I,setReference:E,setFloating:_})),[E,_]),D=i.useMemo((()=>({reference:b,floating:S})),[b,S]),k=i.useMemo((()=>{const e={position:n,left:0,top:0};if(!D.floating)return e;const t=We(D.floating,d.x),r=We(D.floating,d.y);return c?{...e,transform:"translate("+t+"px, "+r+"px)",...Ge(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,c,D.floating,d.x,d.y]);return i.useMemo((()=>({...d,update:A,refs:M,elements:D,floatingStyles:k})),[d,A,M,D,k])}({...e,elements:{...e.elements,...c&&{reference:c}}}),h=tn(),f=null!=en(),m=vt(((e,t,n)=>{v.current.openEvent=e?t:void 0,y.emit("openchange",{open:e,event:t,reason:n,nested:f}),null==r||r(e,t,n)})),g=i.useRef(null),v=i.useRef({}),y=i.useState((()=>Xt()))[0],E=Qt(),_=i.useCallback((e=>{const t=u(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;l(t),p.refs.setReference(t)}),[p.refs]),b=i.useCallback((e=>{(u(e)||null===e)&&(g.current=e,a(e)),(u(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!u(e))&&p.refs.setReference(e)}),[p.refs]),S=i.useMemo((()=>({...p.refs,setReference:b,setPositionReference:_,domReference:g})),[p.refs,b,_]),T=i.useMemo((()=>({...p.elements,domReference:d})),[p.elements,d]),I=i.useMemo((()=>({...p,refs:S,elements:T,dataRef:v,nodeId:o,floatingId:E,events:y,open:n,onOpenChange:m})),[p,o,E,y,n,m,S,T]);return kt((()=>{const e=null==h?void 0:h.nodesRef.current.find((e=>e.id===o));e&&(e.context=I)})),i.useMemo((()=>({...p,context:I,refs:S,elements:T})),[p,S,T,I])}function ir(t,n){void 0===n&&(n={});const{open:r,onOpenChange:o,events:s,refs:c,elements:{domReference:l}}=t,{enabled:p=!0,visibleOnly:h=!0}=n,f=i.useRef(!1),m=i.useRef(),g=i.useRef(!0);return i.useEffect((()=>{if(!p)return;const e=a(l);function t(){!r&&d(l)&&l===T(k(l))&&(f.current=!0)}function n(){g.current=!0}return e.addEventListener("blur",t),e.addEventListener("keydown",n,!0),()=>{e.removeEventListener("blur",t),e.removeEventListener("keydown",n,!0)}}),[l,r,p]),i.useEffect((()=>{if(p)return s.on("openchange",e),()=>{s.off("openchange",e)};function e(e){let{reason:t}=e;"reference-press"!==t&&"escape-key"!==t||(f.current=!0)}}),[s,p]),i.useEffect((()=>()=>{clearTimeout(m.current)}),[]),i.useMemo((()=>p?{reference:{onPointerDown(e){O(e.nativeEvent)||(g.current=!1)},onMouseLeave(){f.current=!1},onFocus(t){if(f.current)return;const n=L(t.nativeEvent);if(h&&u(n))try{if(A()&&M())throw Error();if(!n.matches(":focus-visible"))return}catch(e){if(!g.current&&!j(n))return}o(!0,t.nativeEvent,"focus")},onBlur(e){f.current=!1;const t=e.relatedTarget,n=u(t)&&t.hasAttribute(sn("focus-guard"))&&"outside"===t.getAttribute("data-type");m.current=window.setTimeout((()=>{const r=T(l?l.ownerDocument:document);(t||r!==l)&&(I(c.floating.current,r)||I(l,r)||n||o(!1,e.nativeEvent,"focus"))}))}}}:{}),[p,h,l,c,o])}const or="active",sr="selected";function ar(e,t,n){const r=new Map,i="item"===n;let o=e;if(i&&e){const{[or]:t,[sr]:n,...r}=e;o=r}return{..."floating"===n&&{tabIndex:-1},...o,...t.map((t=>{const r=t?t[n]:null;return"function"===typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,o]=t;var s;i&&[or,sr].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"===typeof o&&(null==(s=r.get(n))||s.push(o),e[n]=function(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return null==(e=r.get(n))?void 0:e.map((e=>e(...i))).find((e=>void 0!==e))})):e[n]=o)})),e):e),{})}}function cr(e){void 0===e&&(e=[]);const t=e,n=i.useCallback((t=>ar(t,e,"reference")),t),r=i.useCallback((t=>ar(t,e,"floating")),t),o=i.useCallback((t=>ar(t,e,"item")),e.map((e=>null==e?void 0:e.item)));return i.useMemo((()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:o})),[n,r,o])}let lr=!1;function ur(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function dr(e,t){return ur(t,e===yt||e===Et,e===_t||e===bt)}function pr(e,t,n){return ur(t,e===Et,n?e===_t:e===bt)||"Enter"===e||" "===e||""===e}function hr(e,t,n){return ur(t,n?e===bt:e===_t,e===yt)}function fr(e,t){const{open:n,onOpenChange:r,refs:o,elements:{domReference:s,floating:a}}=e,{listRef:c,activeIndex:l,onNavigate:u=(()=>{}),enabled:p=!0,selectedIndex:h=null,allowEscape:f=!1,loop:m=!1,nested:g=!1,rtl:v=!1,virtual:y=!1,focusItemOnOpen:E="auto",focusItemOnHover:_=!0,openOnArrowKeyDown:b=!0,disabledIndices:S,orientation:N="vertical",cols:w=1,scrollItemIntoView:R=!0,virtualItemRef:D,itemSizes:x,dense:L=!1}=t;const P=en(),j=tn(),z=vt(u),B=i.useRef(E),V=i.useRef(null!=h?h:-1),H=i.useRef(null),G=i.useRef(!0),W=i.useRef(z),Y=i.useRef(!!a),q=i.useRef(!1),K=i.useRef(!1),Q=an(S),J=an(n),X=an(R),[Z,$]=i.useState(),[ee,te]=i.useState(),ne=vt((function(e,t,n){void 0===n&&(n=!1);const r=e.current[t.current];r&&(y?($(r.id),null==j||j.events.emit("virtualfocus",r),D&&(D.current=r)):Dt(r,{preventScroll:!0,sync:!(!M()||!A())&&(lr||q.current)}),requestAnimationFrame((()=>{const e=X.current;e&&r&&(n||!G.current)&&(null==r.scrollIntoView||r.scrollIntoView("boolean"===typeof e?{block:"nearest",inline:"nearest"}:e))})))}));kt((()=>{document.createElement("div").focus({get preventScroll(){return lr=!0,!1}})}),[]),kt((()=>{p&&(n&&a?B.current&&null!=h&&(K.current=!0,V.current=h,z(h)):Y.current&&(V.current=-1,W.current(null)))}),[p,n,a,h,z]),kt((()=>{if(p&&n&&a)if(null==l){if(q.current=!1,null!=h)return;if(Y.current&&(V.current=-1,ne(c,V)),!Y.current&&B.current&&(null!=H.current||!0===B.current&&null==H.current)){let e=0;const t=()=>{if(null==c.current[0]){if(e<2){(e?requestAnimationFrame:queueMicrotask)(t)}e++}else V.current=null==H.current||pr(H.current,N,v)||g?It(c,Q.current):Nt(c,Q.current),H.current=null,z(V.current)};t()}}else Tt(c,l)||(V.current=l,ne(c,V,K.current),K.current=!1)}),[p,n,a,l,h,g,c,N,v,z,ne,Q]),kt((()=>{var e;if(!p||a||!j||y||!Y.current)return;const t=j.nodesRef.current,n=null==(e=t.find((e=>e.id===P)))||null==(e=e.context)?void 0:e.elements.floating,r=T(k(a)),i=t.some((e=>e.context&&I(e.context.elements.floating,r)));n&&!i&&G.current&&n.focus({preventScroll:!0})}),[p,a,j,P,y]),kt((()=>{if(p&&j&&y&&!P)return j.events.on("virtualfocus",e),()=>{j.events.off("virtualfocus",e)};function e(e){te(e.id),D&&(D.current=e)}}),[p,j,y,P,D]),kt((()=>{W.current=z,Y.current=!!a})),kt((()=>{n||(H.current=null)}),[n]);const re=null!=l,ie=i.useMemo((()=>{function e(e){if(!n)return;const t=c.current.indexOf(e);-1!==t&&z(t)}return{onFocus(t){let{currentTarget:n}=t;e(n)},onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:!0})},..._&&{onMouseMove(t){let{currentTarget:n}=t;e(n)},onPointerLeave(e){let{pointerType:t}=e;G.current&&"touch"!==t&&(V.current=-1,ne(c,V),z(null),y||Dt(o.floating.current,{preventScroll:!0}))}}}}),[n,o,ne,_,c,z,y]);return i.useMemo((()=>{if(!p)return{};const e=Q.current;function t(t){if(G.current=!1,q.current=!0,!J.current&&t.currentTarget===o.floating.current)return;if(g&&hr(t.key,N,v))return U(t),r(!1,t.nativeEvent,"list-navigation"),void(d(s)&&!y&&s.focus());const i=V.current,a=It(c,e),l=Nt(c,e);if("Home"===t.key&&(U(t),V.current=a,z(V.current)),"End"===t.key&&(U(t),V.current=l,z(V.current)),w>1){const n=x||Array.from({length:c.current.length},(()=>({width:1,height:1}))),r=Ot(n,w,L),i=r.findIndex((t=>null!=t&&!(null!=e&&e.includes(t)))),o=r.reduce(((t,n,r)=>null==n||null!=e&&e.includes(n)?t:r),-1);if(V.current=r[Ct({current:r.map((e=>null!=e?c.current[e]:null))},{event:t,orientation:N,loop:m,cols:w,disabledIndices:Rt([...e||[],void 0],r),minIndex:i,maxIndex:o,prevIndex:At(V.current,n,r,w,t.key===Et?"bl":t.key===bt?"tr":"tl"),stopEvent:!0})],z(V.current),"both"===N)return}if(dr(t.key,N)){if(U(t),n&&!y&&T(t.currentTarget.ownerDocument)===t.currentTarget)return V.current=pr(t.key,N,v)?a:l,void z(V.current);pr(t.key,N,v)?V.current=m?i>=l?f&&i!==c.current.length?-1:a:wt(c,{startingIndex:i,disabledIndices:e}):Math.min(l,wt(c,{startingIndex:i,disabledIndices:e})):V.current=m?i<=a?f&&-1!==i?c.current.length:l:wt(c,{startingIndex:i,decrement:!0,disabledIndices:e}):Math.max(a,wt(c,{startingIndex:i,decrement:!0,disabledIndices:e})),Tt(c,V.current)?z(null):z(V.current)}}function i(e){"auto"===E&&C(e.nativeEvent)&&(B.current=!0)}const a=y&&n&&re&&{"aria-activedescendant":ee||Z},l=c.current.find((e=>(null==e?void 0:e.id)===Z));return{reference:{...a,onKeyDown(i){G.current=!1;const o=0===i.key.indexOf("Arrow"),s=function(e,t,n){return ur(t,n?e===_t:e===bt,e===Et)}(i.key,N,v),a=hr(i.key,N,v),u=dr(i.key,N),d=(g?s:u)||"Enter"===i.key||""===i.key.trim();if(y&&n){const e=null==j?void 0:j.nodesRef.current.find((e=>null==e.parentId)),n=j&&e?function(e,t){let n,r=-1;return function t(i,o){o>r&&(n=i,r=o),gn(e,i).forEach((e=>{t(e.id,o+1)}))}(t,0),e.find((e=>e.id===n))}(j.nodesRef.current,e.id):null;if(o&&n&&D){const e=new KeyboardEvent("keydown",{key:i.key,bubbles:!0});if(s||a){var p,f;const t=(null==(p=n.context)?void 0:p.elements.domReference)===i.currentTarget,r=a&&!t?null==(f=n.context)?void 0:f.elements.domReference:s?l:null;r&&(U(i),r.dispatchEvent(e),te(void 0))}var m;if(u&&n.context)if(n.context.open&&n.parentId&&i.currentTarget!==n.context.elements.domReference)return U(i),void(null==(m=n.context.elements.domReference)||m.dispatchEvent(e))}return t(i)}(n||b||!o)&&(d&&(H.current=g&&u?null:i.key),g?s&&(U(i),n?(V.current=It(c,e),z(V.current)):r(!0,i.nativeEvent,"list-navigation")):u&&(null!=h&&(V.current=h),U(i),!n&&b?r(!0,i.nativeEvent,"list-navigation"):t(i),n&&z(V.current)))},onFocus(){n&&z(null)},onPointerDown:function(e){B.current=E,"auto"===E&&O(e.nativeEvent)&&(B.current=!0)},onMouseDown:i,onClick:i},floating:{"aria-orientation":"both"===N?void 0:N,...!F(s)&&a,onKeyDown:t,onPointerMove(){G.current=!0}},item:ie}}),[s,o,Z,ee,Q,J,c,p,N,v,y,n,re,g,h,b,f,w,m,E,z,r,ie,j,D,x,L])}const mr=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function gr(e,t){var n;void 0===t&&(t={});const{open:r,floatingId:o}=e,{enabled:s=!0,role:a="dialog"}=t,c=null!=(n=mr.get(a))?n:a,l=Qt(),u=null!=en();return i.useMemo((()=>{if(!s)return{};const e={id:o,...c&&{role:c}};return"tooltip"===c||"label"===a?{reference:{["aria-"+("label"===a?"labelledby":"describedby")]:r?o:void 0},floating:e}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===c?"dialog":c,"aria-controls":r?o:void 0,..."listbox"===c&&{role:"combobox"},..."menu"===c&&{id:l},..."menu"===c&&u&&{role:"menuitem"},..."select"===a&&{"aria-autocomplete":"none"},..."combobox"===a&&{"aria-autocomplete":"list"}},floating:{...e,..."menu"===c&&{"aria-labelledby":l}},item(e){let{active:t,selected:n}=e;const r={role:"option",...t&&{id:o+"-option"}};switch(a){case"select":return{...r,"aria-selected":t&&n};case"combobox":return{...r,...t&&{"aria-selected":!0}}}return{}}}}),[s,a,c,r,o,l,u])}const vr=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()));function yr(e,t){return"function"===typeof e?e(t):e}function Er(e,t){void 0===t&&(t={});const{open:n,elements:{floating:r}}=e,{duration:o=250}=t,s=("number"===typeof o?o:o.close)||0,[a,c]=i.useState(!1),[l,u]=i.useState("unmounted"),d=function(e,t){const[n,r]=i.useState(e);return e&&!n&&r(!0),i.useEffect((()=>{if(!e){const e=setTimeout((()=>r(!1)),t);return()=>clearTimeout(e)}}),[e,t]),n}(n,s);return kt((()=>{a&&!d&&u("unmounted")}),[a,d]),kt((()=>{if(r){if(n){u("initial");const e=requestAnimationFrame((()=>{u("open")}));return()=>{cancelAnimationFrame(e)}}c(!0),u("close")}}),[n,r]),{isMounted:d,status:l}}function _r(e,t){void 0===t&&(t={});const{initial:n={opacity:0},open:r,close:o,common:s,duration:a=250}=t,c=e.placement,l=c.split("-")[0],u=i.useMemo((()=>({side:l,placement:c})),[l,c]),d="number"===typeof a,p=(d?a:a.open)||0,h=(d?a:a.close)||0,[f,m]=i.useState((()=>({...yr(s,u),...yr(n,u)}))),{isMounted:g,status:v}=Er(e,{duration:a}),y=an(n),E=an(r),_=an(o),b=an(s);return kt((()=>{const e=yr(y.current,u),t=yr(_.current,u),n=yr(b.current,u),r=yr(E.current,u)||Object.keys(e).reduce(((e,t)=>(e[t]="",e)),{});if("initial"===v&&m((t=>({transitionProperty:t.transitionProperty,...n,...e}))),"open"===v&&m({transitionProperty:Object.keys(r).map(vr).join(","),transitionDuration:p+"ms",...n,...r}),"close"===v){const r=t||e;m({transitionProperty:Object.keys(r).map(vr).join(","),transitionDuration:h+"ms",...n,...r})}}),[h,_,y,E,b,p,v,u]),{isMounted:g,styles:f}}function br(e,t){var n;const{open:r,dataRef:o}=e,{listRef:s,activeIndex:a,onMatch:c,onTypingChange:l,enabled:u=!0,findMatch:d=null,resetMs:p=750,ignoreKeys:h=[],selectedIndex:f=null}=t,m=i.useRef(),g=i.useRef(""),v=i.useRef(null!=(n=null!=f?f:a)?n:-1),y=i.useRef(null),E=vt(c),_=vt(l),b=an(d),S=an(h);return kt((()=>{r&&(clearTimeout(m.current),y.current=null,g.current="")}),[r]),kt((()=>{var e;r&&""===g.current&&(v.current=null!=(e=null!=f?f:a)?e:-1)}),[r,f,a]),i.useMemo((()=>{if(!u)return{};function e(e){e?o.current.typing||(o.current.typing=e,_(e)):o.current.typing&&(o.current.typing=e,_(e))}function t(e,t,n){const r=b.current?b.current(t,n):t.find((e=>0===(null==e?void 0:e.toLocaleLowerCase().indexOf(n.toLocaleLowerCase()))));return r?e.indexOf(r):-1}function n(n){const i=s.current;if(g.current.length>0&&" "!==g.current[0]&&(-1===t(i,i,g.current)?e(!1):" "===n.key&&U(n)),null==i||S.current.includes(n.key)||1!==n.key.length||n.ctrlKey||n.metaKey||n.altKey)return;r&&" "!==n.key&&(U(n),e(!0));i.every((e=>{var t,n;return!e||(null==(t=e[0])?void 0:t.toLocaleLowerCase())!==(null==(n=e[1])?void 0:n.toLocaleLowerCase())}))&&g.current===n.key&&(g.current="",v.current=y.current),g.current+=n.key,clearTimeout(m.current),m.current=setTimeout((()=>{g.current="",v.current=y.current,e(!1)}),p);const o=v.current,a=t(i,[...i.slice((o||0)+1),...i.slice(0,(o||0)+1)],g.current);-1!==a?(E(a),y.current=a):" "!==n.key&&(g.current="",e(!1))}return{reference:{onKeyDown:n},floating:{onKeyDown:n,onKeyUp(t){" "===t.key&&e(!1)}}}}),[u,r,o,s,p,S,b,E,_])}function Sr(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const Tr=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:o=0,index:s=0,minItemsVisible:a=4,referenceOverflowThreshold:c=0,scrollRef:l,...u}=e,{rects:d,elements:{floating:p}}=t,h=n.current[s];if(!h)return{};const f={...t,...await fe(-h.offsetTop-p.clientTop-d.reference.height/2-h.offsetHeight/2-o).fn(t)},m=(null==l?void 0:l.current)||p,g=await ue(Sr(f,m.scrollHeight),u),v=await ue(f,{...u,elementContext:"reference"}),y=Math.max(0,g.top),E=f.y+y,_=Math.max(0,m.scrollHeight-y-Math.max(0,g.bottom));return m.style.maxHeight=_+"px",m.scrollTop=y,i&&(m.offsetHeight<h.offsetHeight*Math.min(a,n.current.length-1)-1||v.top>=-c||v.bottom>=-c?(0,ze.flushSync)((()=>i(!0))):(0,ze.flushSync)((()=>i(!1)))),r&&(r.current=await ue(Sr({...f,y:E},m.offsetHeight),u)),{y:E}}});function Ir(e,t){const{open:n,elements:r}=e,{enabled:o=!0,overflowRef:s,scrollRef:a,onChange:c}=t,l=vt(c),u=i.useRef(!1),d=i.useRef(null),p=i.useRef(null);return i.useEffect((()=>{if(!o)return;function e(e){if(e.ctrlKey||!t||null==s.current)return;const n=e.deltaY,r=s.current.top>=-.5,i=s.current.bottom>=-.5,o=t.scrollHeight-t.clientHeight,a=n<0?-1:1,c=n<0?"max":"min";t.scrollHeight<=t.clientHeight||(!r&&n>0||!i&&n<0?(e.preventDefault(),(0,ze.flushSync)((()=>{l((e=>e+Math[c](n,o*a)))}))):/firefox/i.test(w())&&(t.scrollTop+=n))}const t=(null==a?void 0:a.current)||r.floating;return n&&t?(t.addEventListener("wheel",e),requestAnimationFrame((()=>{d.current=t.scrollTop,null!=s.current&&(p.current={...s.current})})),()=>{d.current=null,p.current=null,t.removeEventListener("wheel",e)}):void 0}),[o,n,r.floating,s,a,l]),i.useMemo((()=>o?{floating:{onKeyDown(){u.current=!0},onWheel(){u.current=!1},onPointerMove(){u.current=!1},onScroll(){const e=(null==a?void 0:a.current)||r.floating;if(s.current&&e&&u.current){if(null!==d.current){const t=e.scrollTop-d.current;(s.current.bottom<-.5&&t<-1||s.current.top<-.5&&t>1)&&(0,ze.flushSync)((()=>l((e=>e+t))))}requestAnimationFrame((()=>{d.current=e.scrollTop}))}}}}:{}),[o,s,r.floating,a,l])}function Nr(e,t){const[n,r]=e;let i=!1;const o=t.length;for(let s=0,a=o-1;s<o;a=s++){const[e,o]=t[s]||[0,0],[c,l]=t[a]||[0,0];o>=r!==l>=r&&n<=(c-e)*(r-o)/(l-o)+e&&(i=!i)}return i}function wr(e){void 0===e&&(e={});const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=e;let i,o=!1,s=null,a=null,c=performance.now();const l=e=>{let{x:n,y:l,placement:d,elements:p,onClose:h,nodeId:f,tree:m}=e;return function(e){function g(){clearTimeout(i),h()}if(clearTimeout(i),!p.domReference||!p.floating||null==d||null==n||null==l)return;const{clientX:v,clientY:y}=e,E=[v,y],_=L(e),b="mouseleave"===e.type,S=I(p.floating,_),T=I(p.domReference,_),N=p.domReference.getBoundingClientRect(),w=p.floating.getBoundingClientRect(),C=d.split("-")[0],O=n>w.right-w.width/2,A=l>w.bottom-w.height/2,R=function(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}(E,N),M=w.width>N.width,D=w.height>N.height,k=(M?N:w).left,x=(M?N:w).right,P=(D?N:w).top,j=(D?N:w).bottom;if(S&&(o=!0,!b))return;if(T&&(o=!1),T&&!b)return void(o=!0);if(b&&u(e.relatedTarget)&&I(p.floating,e.relatedTarget))return;if(m&&gn(m.nodesRef.current,f).some((e=>{let{context:t}=e;return null==t?void 0:t.open})))return;if("top"===C&&l>=N.bottom-1||"bottom"===C&&l<=N.top+1||"left"===C&&n>=N.right-1||"right"===C&&n<=N.left+1)return g();let U=[];switch(C){case"top":U=[[k,N.top+1],[k,w.bottom-1],[x,w.bottom-1],[x,N.top+1]];break;case"bottom":U=[[k,w.top+1],[k,N.bottom-1],[x,N.bottom-1],[x,w.top+1]];break;case"left":U=[[w.right-1,j],[w.right-1,P],[N.left+1,P],[N.left+1,j]];break;case"right":U=[[N.right-1,j],[N.right-1,P],[w.left+1,P],[w.left+1,j]]}if(!Nr([v,y],U)){if(o&&!R)return g();if(!b&&r){const t=function(e,t){const n=performance.now(),r=n-c;if(null===s||null===a||0===r)return s=e,a=t,c=n,null;const i=e-s,o=t-a,l=Math.sqrt(i*i+o*o);return s=e,a=t,c=n,l/r}(e.clientX,e.clientY);if(null!==t&&t<.1)return g()}Nr([v,y],function(e){let[n,r]=e;switch(C){case"top":return[[M?n+t/2:O?n+4*t:n-4*t,r+t+1],[M?n-t/2:O?n+4*t:n-4*t,r+t+1],...[[w.left,O||M?w.bottom-t:w.top],[w.right,O?M?w.bottom-t:w.top:w.bottom-t]]];case"bottom":return[[M?n+t/2:O?n+4*t:n-4*t,r-t],[M?n-t/2:O?n+4*t:n-4*t,r-t],...[[w.left,O||M?w.top+t:w.bottom],[w.right,O?M?w.top+t:w.bottom:w.top+t]]];case"left":{const e=[n+t+1,D?r+t/2:A?r+4*t:r-4*t],i=[n+t+1,D?r-t/2:A?r+4*t:r-4*t];return[...[[A||D?w.right-t:w.left,w.top],[A?D?w.right-t:w.left:w.right-t,w.bottom]],e,i]}case"right":return[[n-t,D?r+t/2:A?r+4*t:r-4*t],[n-t,D?r-t/2:A?r+4*t:r-4*t],...[[A||D?w.left+t:w.right,w.top],[A?D?w.left+t:w.right:w.left+t,w.bottom]]]}}([n,l]))?!o&&r&&(i=window.setTimeout(g,40)):g()}}};return l.__options={blockPointerEvents:n},l}},7713:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>T,StyledEngineProvider:()=>S,ThemeContext:()=>c.T,css:()=>y.AH,default:()=>I,internal_processStyles:()=>N,keyframes:()=>y.i7});var r=n(8168),i=n(5043),o=n(918),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,o.A)((function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),c=n(5756),l=n(1722),u=n(2830),d=n(9436),p=a,h=function(e){return"theme"!==e},f=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?p:h},m=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},g=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,l.SF)(t,n,r),(0,d.s)((function(){return(0,l.sk)(t,n,r)})),null},v=function e(t,n){var o,s,a=t.__emotion_real===t,d=a&&t.__emotion_base||t;void 0!==n&&(o=n.label,s=n.target);var p=m(t,n,a),h=p||f(d),v=!h("as");return function(){var y=arguments,E=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&E.push("label:"+o+";"),null==y[0]||void 0===y[0].raw)E.push.apply(E,y);else{0,E.push(y[0][0]);for(var _=y.length,b=1;b<_;b++)E.push(y[b],y[0][b])}var S=(0,c.w)((function(e,t,n){var r=v&&e.as||d,o="",a=[],m=e;if(null==e.theme){for(var y in m={},e)m[y]=e[y];m.theme=i.useContext(c.T)}"string"===typeof e.className?o=(0,l.Rk)(t.registered,a,e.className):null!=e.className&&(o=e.className+" ");var _=(0,u.J)(E.concat(a),t.registered,m);o+=t.key+"-"+_.name,void 0!==s&&(o+=" "+s);var b=v&&void 0===p?f(r):h,S={};for(var T in e)v&&"as"===T||b(T)&&(S[T]=e[T]);return S.className=o,S.ref=n,i.createElement(i.Fragment,null,i.createElement(g,{cache:t,serialized:_,isStringTag:"string"===typeof r}),i.createElement(r,S))}));return S.displayName=void 0!==o?o:"Styled("+("string"===typeof d?d:d.displayName||d.name||"Component")+")",S.defaultProps=t.defaultProps,S.__emotion_real=S,S.__emotion_base=d,S.__emotion_styles=E,S.__emotion_forwardProp=p,Object.defineProperty(S,"toString",{value:function(){return"."+s}}),S.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:m(S,i,!0)})).apply(void 0,E)},S}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){v[e]=v(e)}));var y=n(3290),E=n(5513),_=n(579);let b;function S(e){const{injectFirst:t,children:n}=e;return t&&b?(0,_.jsx)(c.C,{value:b,children:n}):n}function T(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,_.jsx)(y.mL,{styles:r})}function I(e,t){return v(e,t)}"object"===typeof document&&(b=(0,E.A)({key:"css",prepend:!0}));const N=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},7266:(e,t,n)=>{"use strict";var r=n(4994);t.X4=h,t.e$=f,t.eM=function(e,t){const n=p(e),r=p(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=m;var i=r(n(7245)),o=r(n(1098));function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(e,t,n)}function a(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}function c(e){if(e.type)return e;if("#"===e.charAt(0))return c(a(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:n,values:o,colorSpace:r}}const l=e=>{const t=c(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function d(e){e=c(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const l=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),u({type:a,values:l})}function p(e){let t="hsl"===(e=c(e)).type||"hsla"===e.type?c(d(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function h(e,t){return e=c(e),t=s(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,u(e)}function f(e,t){if(e=c(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function m(e,t){if(e=c(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}},8052:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=m,rootShouldForwardProp:r=f,slotShouldForwardProp:c=f}=e,u=e=>(0,l.default)((0,i.default)({},e,{theme:v((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:d,slot:h,skipVariantsResolver:m,skipSx:_,overridesResolver:b=y(g(h))}=l,S=(0,o.default)(l,p),T=void 0!==m?m:h&&"Root"!==h&&"root"!==h||!1,I=_||!1;let N=f;"Root"===h||"root"===h?N=r:h?N=c:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(N=void 0);const w=(0,s.default)(e,(0,i.default)({shouldForwardProp:N,label:undefined},S)),C=e=>"function"===typeof e&&e.__emotion_real!==e||(0,a.isPlainObject)(e)?r=>E(e,(0,i.default)({},r,{theme:v({theme:r.theme,defaultTheme:n,themeId:t})})):e,O=function(r){let o=C(r);for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];const l=a?a.map(C):[];d&&b&&l.push((e=>{const r=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[d]||!r.components[d].styleOverrides)return null;const o=r.components[d].styleOverrides,s={};return Object.entries(o).forEach((t=>{let[n,o]=t;s[n]=E(o,(0,i.default)({},e,{theme:r}))})),b(e,s)})),d&&!T&&l.push((e=>{var r;const o=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));return E({variants:null==o||null==(r=o.components)||null==(r=r[d])?void 0:r.variants},(0,i.default)({},e,{theme:o}))})),I||l.push(u);const p=l.length-a.length;if(Array.isArray(r)&&p>0){const e=new Array(p).fill("");o=[...r,...e],o.raw=[...r.raw,...e]}const h=w(o,...l);return e.muiName&&(h.muiName=e.muiName),h};return w.withConfig&&(O.withConfig=w.withConfig),O}};var i=r(n(4634)),o=r(n(4893)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(7713)),a=n(4534),c=(r(n(578)),r(n(2046)),r(n(4989))),l=r(n(3234));const u=["ownerState"],d=["variants"],p=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const m=(0,c.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function v(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function y(e){return e?(t,n)=>n[e]:null}function E(e,t){let{ownerState:n}=t,r=(0,o.default)(t,u);const s="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(s))return s.flatMap((e=>E(e,(0,i.default)({ownerState:n},r))));if(s&&"object"===typeof s&&Array.isArray(s.variants)){const{variants:e=[]}=s;let t=(0,o.default)(s,d);return e.forEach((e=>{let o=!0;"function"===typeof e.props?o=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(o=!1)})),o&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return s}},9751:(e,t,n)=>{"use strict";n.d(t,{EU:()=>a,NI:()=>s,iZ:()=>l,kW:()=>u,vf:()=>c,zu:()=>i});var r=n(3216);const i={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(i[e],"px)")};function s(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||o;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||o;return Object.keys(t).reduce(((r,o)=>{if(-1!==Object.keys(e.values||i).indexOf(o)){r[e.up(o)]=n(t[o],o)}else{const e=o;r[e]=t[e]}return r}),{})}return n(t)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function c(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function l(e){const t=a(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const s=[t,...i].reduce(((e,t)=>(0,r.A)(e,t)),{});return c(Object.keys(t),s)}function u(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let s;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[s],s=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[s],s=n):e[n]=t,e)),{})}},9703:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){return{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},4853:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8587),i=n(8168);const o=["values","unit","step"],s=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,c=(0,r.A)(e,o),l=s(t),u=Object.keys(l);function d(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function p(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-a/100).concat(n,")")}function h(e,r){const i=u.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-a/100).concat(n,")")}return(0,i.A)({keys:u,values:l,up:d,down:p,between:h,only:function(e){return u.indexOf(e)+1<u.length?h(e,u[u.indexOf(e)+1]):d(e)},not:function(e){const t=u.indexOf(e);return 0===t?d(u[1]):t===u.length-1?p(u[t]):h(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},c)}},8280:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(8168),i=n(8587),o=n(3216),s=n(4853);const a={borderRadius:4};var c=n(8604);var l=n(8812),u=n(7758),d=n(9703);const p=["breakpoints","palette","spacing","shape"];const h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:h,shape:f={}}=e,m=(0,i.A)(e,p),g=(0,s.A)(t),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,c.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(h);let y=(0,o.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:v,shape:(0,r.A)({},a,f)},m);y.applyStyles=d.A;for(var E=arguments.length,_=new Array(E>1?E-1:0),b=1;b<E;b++)_[b-1]=arguments[b];return y=_.reduce(((e,t)=>(0,o.A)(e,t)),y),y.unstable_sxConfig=(0,r.A)({},u.A,null==m?void 0:m.unstable_sxConfig),y.unstable_sx=function(e){return(0,l.A)({sx:e,theme:this})},y}},4989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>o.A});var r=n(8280),i=n(4853),o=n(9703)},3815:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(3216);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},8604:(e,t,n)=>{"use strict";n.d(t,{LX:()=>f,MA:()=>h,_W:()=>m,Lc:()=>y,Ms:()=>E});var r=n(9751),i=n(7162),o=n(3815);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!c[e])return[e];e=c[e]}const[t,n]=e.split(""),r=s[t],i=a[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],p=[...u,...d];function h(e,t,n,r){var o;const s=null!=(o=(0,i.Yn)(e,t,!1))?o:n;return"number"===typeof s?e=>"string"===typeof e?e:s*e:Array.isArray(s)?e=>"string"===typeof e?e:s[e]:"function"===typeof s?s:()=>{}}function f(e){return h(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(l(n),i),s=e[n];return(0,r.NI)(e,s,o)}function v(e,t){const n=f(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(o.A,{})}function y(e){return v(e,u)}function E(e){return v(e,d)}function _(e){return v(e,p)}y.propTypes={},y.filterProps=u,E.propTypes={},E.filterProps=d,_.propTypes={},_.filterProps=p},7162:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a,BO:()=>s,Yn:()=>o});var r=n(410),i=n(9751);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function s(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r,i,e)),r}const a=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:c}=e,l=e=>{if(null==e[t])return null;const l=e[t],u=o(e.theme,a)||{};return(0,i.NI)(e,l,(e=>{let i=s(u,c,e);return e===i&&"string"===typeof e&&(i=s(u,c,"".concat(t).concat("default"===e?"":(0,r.A)(e)),e)),!1===n?i:{[n]:i}}))};return l.propTypes={},l.filterProps=[t],l}},7758:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var r=n(8604),i=n(7162),o=n(3815);const s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,o.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var a=n(9751);function c(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function l(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const u=l("border",c),d=l("borderTop",c),p=l("borderRight",c),h=l("borderBottom",c),f=l("borderLeft",c),m=l("borderColor"),g=l("borderTopColor"),v=l("borderRightColor"),y=l("borderBottomColor"),E=l("borderLeftColor"),_=l("outline",c),b=l("outlineColor"),S=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,a.NI)(e,e.borderRadius,n)}return null};S.propTypes={},S.filterProps=["borderRadius"];s(u,d,p,h,f,m,g,v,y,E,S,_,b);const T=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,a.NI)(e,e.gap,n)}return null};T.propTypes={},T.filterProps=["gap"];const I=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.columnGap,n)}return null};I.propTypes={},I.filterProps=["columnGap"];const N=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.rowGap,n)}return null};N.propTypes={},N.filterProps=["rowGap"];s(T,I,N,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function w(e,t){return"grey"===t?t:e}s((0,i.Ay)({prop:"color",themeKey:"palette",transform:w}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:w}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:w}));function C(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const O=(0,i.Ay)({prop:"width",transform:C}),A=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||a.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:C(t)}};return(0,a.NI)(e,e.maxWidth,t)}return null};A.filterProps=["maxWidth"];const R=(0,i.Ay)({prop:"minWidth",transform:C}),M=(0,i.Ay)({prop:"height",transform:C}),D=(0,i.Ay)({prop:"maxHeight",transform:C}),k=(0,i.Ay)({prop:"minHeight",transform:C}),x=((0,i.Ay)({prop:"size",cssProperty:"width",transform:C}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:C}),s(O,A,R,M,D,k,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:c},borderTop:{themeKey:"borders",transform:c},borderRight:{themeKey:"borders",transform:c},borderBottom:{themeKey:"borders",transform:c},borderLeft:{themeKey:"borders",transform:c},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:c},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:S},color:{themeKey:"palette",transform:w},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:w},backgroundColor:{themeKey:"palette",transform:w},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:T},rowGap:{style:N},columnGap:{style:I},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:C},maxWidth:{style:A},minWidth:{transform:C},height:{transform:C},maxHeight:{transform:C},minHeight:{transform:C},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8698:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(8168),i=n(8587),o=n(3216),s=n(7758);const a=["sx"],c=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:s.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function l(e){const{sx:t}=e,n=(0,i.A)(e,a),{systemProps:s,otherProps:l}=c(n);let u;return u=Array.isArray(t)?[s,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.Q)(e)?(0,r.A)({},s,e):s}:(0,r.A)({},s,t),(0,r.A)({},l,{sx:u})}},3234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>i.A,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>o.A});var r=n(8812),i=n(8698),o=n(7758)},8812:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,k:()=>c});var r=n(410),i=n(3815),o=n(7162),s=n(9751),a=n(7758);function c(){function e(e,t,n,i){const a={[e]:t,theme:n},c=i[e];if(!c)return{[e]:t};const{cssProperty:l=e,themeKey:u,transform:d,style:p}=c;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const h=(0,o.Yn)(n,u)||{};if(p)return p(a);return(0,s.NI)(a,t,(t=>{let n=(0,o.BO)(h,d,t);return t===n&&"string"===typeof t&&(n=(0,o.BO)(h,d,"".concat(e).concat("default"===t?"":(0,r.A)(t)),t)),!1===l?n:{[l]:n}}))}return function t(n){var r;const{sx:o,theme:c={}}=n||{};if(!o)return null;const l=null!=(r=c.unstable_sxConfig)?r:a.A;function u(n){let r=n;if("function"===typeof n)r=n(c);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,s.EU)(c.breakpoints),a=Object.keys(o);let u=o;return Object.keys(r).forEach((n=>{const o=(a=r[n],d=c,"function"===typeof a?a(d):a);var a,d;if(null!==o&&void 0!==o)if("object"===typeof o)if(l[n])u=(0,i.A)(u,e(n,o,c,l));else{const e=(0,s.NI)({theme:c},o,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,o)?u=(0,i.A)(u,e):u[n]=t({sx:o,theme:c})}else u=(0,i.A)(u,e(n,o,c,l))})),(0,s.vf)(a,u)}return Array.isArray(o)?o.map(u):u(o)}}const l=c();l.filterProps=["sx"];const u=l},410:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6632);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},578:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(410)},1098:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},3216:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,Q:()=>i});var r=n(8168);function i(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function o(e){if(!i(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=o(e[n])})),t}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,r.A)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?a[r]=s(e[r],t[r],n):n.clone?a[r]=i(t[r])?o(t[r]):t[r]:a[r]=t[r])})),a}},4534:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(3216)},6632:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},7245:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(6632)},2046:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c,getFunctionName:()=>o});var r=n(2086);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(e){const t="".concat(e).match(i);return t&&t[1]||""}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||o(e)||t}function a(e,t,n){const r=s(t);return e.displayName||(""!==r?"".concat(n,"(").concat(r,")"):n)}function c(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return s(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.ForwardRef:return a(e,e.render,"ForwardRef");case r.Memo:return a(e,e.type,"memo");default:return}}}},9472:function(module){var t;t=function(){return function(){var __webpack_modules__={4537:function(e){"use strict";e.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))}},7419:function(e,t){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),i=new Array(123),o=0;o<64;)i[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;n.encode=function(e,t,n){for(var i,o=null,s=[],a=0,c=0;t<n;){var l=e[t++];switch(c){case 0:s[a++]=r[l>>2],i=(3&l)<<4,c=1;break;case 1:s[a++]=r[i|l>>4],i=(15&l)<<2,c=2;break;case 2:s[a++]=r[i|l>>6],s[a++]=r[63&l],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=r[i],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";n.decode=function(e,t,n){for(var r,o=n,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if(void 0===(l=i[l]))throw Error(s);switch(a){case 0:r=l,a=1;break;case 1:t[n++]=r<<2|(48&l)>>4,r=l,a=2;break;case 2:t[n++]=(15&r)<<4|(60&l)>>2,r=l,a=3;break;case 3:t[n++]=(3&r)<<6|l,a=0}}if(1===a)throw Error(s);return n-o},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},5124:function(e){"use strict";function t(e,n){"string"==typeof e&&(n=e,e=void 0);var r=[];function i(e){if("string"!=typeof e){var n=o();if(t.verbose&&console.log("codegen: "+n),n="return "+n,e){for(var s=Object.keys(e),a=new Array(s.length+1),c=new Array(s.length),l=0;l<s.length;)a[l]=s[l],c[l]=e[s[l++]];return a[l]=n,Function.apply(null,a).apply(null,c)}return Function(n)()}for(var u=new Array(arguments.length-1),d=0;d<u.length;)u[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var n=u[d++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),d!==u.length)throw Error("parameter count mismatch");return r.push(e),i}function o(t){return"function "+(t||n||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}return i.toString=o,i}e.exports=t,t.verbose=!1},9211:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},9054:function(e,t,n){"use strict";e.exports=o;var r=n(4537),i=n(7199)("fs");function o(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&i&&i.readFile?i.readFile(e,(function(r,i){return r&&"undefined"!=typeof XMLHttpRequest?o.xhr(e,t,n):r?n(r):n(null,t.binary?i:i.toString("utf8"))})):o.xhr(e,t,n):r(o,this,e,t)}o.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var i=0;i<r.responseText.length;++i)e.push(255&r.responseText.charCodeAt(i))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)}},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},945:function(e){"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function s(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,r),e.readFloatLE=s.bind(null,i),e.readFloatBE=s.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,i,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function s(e,t,n,r,i){var o=e(r,i+t),s=e(r,i+n),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=s.bind(null,i,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function n(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function r(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},8626:function(e,t){"use strict";var n=t,r=n.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=n.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=r(e),i="";n&&(i=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return i+t.join("/")};n.resolve=function(e,t,n){return n||(t=i(t)),r(t)?t:(n||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}},6662:function(e){"use strict";e.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return e(n);s+n>r&&(o=e(r),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},4997:function(e,t){"use strict";var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],s=0;t<n;)(r=e[t++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},4188:function(e,t,n){var r,i,o;!function(s){"use strict";if(null!=t&&"number"!=typeof t.nodeType)e.exports=s();else if(null!=n.amdO)i=[],void 0===(o="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=o);else{var a=s(),c="undefined"!=typeof self?self:$.global;"function"!=typeof c.btoa&&(c.btoa=a.btoa),"function"!=typeof c.atob&&(c.atob=a.atob)}}((function(){"use strict";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(e){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidCharacterError",{btoa:function(n){for(var r,i,o=String(n),s=0,a=e,c="";o.charAt(0|s)||(a="=",s%1);c+=a.charAt(63&r>>8-s%1*8)){if((i=o.charCodeAt(s+=3/4))>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return c},atob:function(n){var r=String(n).replace(/[=]+$/,"");if(r.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,s=0,a=0,c="";o=r.charAt(a++);~o&&(i=s%4?64*i+o:o,s++%4)?c+=String.fromCharCode(255&i>>(-2*s&6)):0)o=e.indexOf(o);return c}}}))},9667:function(e,t,n){"use strict";n.r(t),n.d(t,{addUsersToChatRoom:function(){return E},addUsersToChatRoomAllowlist:function(){return K},addUsersToChatRoomWhitelist:function(){return q},blockChatRoomMember:function(){return L},blockChatRoomMembers:function(){return j},chatRoomBlockMulti:function(){return P},chatRoomBlockSingle:function(){return x},createChatRoom:function(){return d},deleteChatRoomSharedFile:function(){return se},destroyChatRoom:function(){return p},disableSendChatRoomMsg:function(){return W},enableSendChatRoomMsg:function(){return Y},fetchChatRoomAnnouncement:function(){return re},fetchChatRoomSharedFileList:function(){return ae},getChatRoomAdmin:function(){return N},getChatRoomAllowlist:function(){return $},getChatRoomAttributes:function(){return le},getChatRoomBlacklist:function(){return H},getChatRoomBlacklistNew:function(){return V},getChatRoomBlocklist:function(){return G},getChatRoomDetails:function(){return h},getChatRoomMuteList:function(){return D},getChatRoomMuted:function(){return M},getChatRoomMutelist:function(){return k},getChatRoomSharedFilelist:function(){return ce},getChatRoomWhitelist:function(){return Z},getChatRooms:function(){return u},isChatRoomWhiteUser:function(){return ee},isInChatRoomAllowlist:function(){return te},isInChatRoomMutelist:function(){return ne},joinChatRoom:function(){return _},leaveChatRoom:function(){return S},listChatRoomMember:function(){return T},listChatRoomMembers:function(){return I},modifyChatRoom:function(){return f},muteChatRoomMember:function(){return O},quitChatRoom:function(){return b},removeChatRoomAdmin:function(){return C},removeChatRoomAllowlistMember:function(){return X},removeChatRoomAttribute:function(){return he},removeChatRoomAttributes:function(){return pe},removeChatRoomBlockMulti:function(){return z},removeChatRoomBlockSingle:function(){return U},removeChatRoomMember:function(){return g},removeChatRoomMembers:function(){return y},removeChatRoomWhitelistMember:function(){return J},removeMultiChatRoomMember:function(){return v},removeMuteChatRoomMember:function(){return A},removeSingleChatRoomMember:function(){return m},rmUsersFromChatRoomWhitelist:function(){return Q},setChatRoomAdmin:function(){return w},setChatRoomAttribute:function(){return de},setChatRoomAttributes:function(){return ue},unblockChatRoomMember:function(){return F},unblockChatRoomMembers:function(){return B},unmuteChatRoomMember:function(){return R},updateChatRoomAnnouncement:function(){return ie},uploadChatRoomSharedFile:function(){return oe}}),n(1539),n(8674),n(8309),n(2526),n(1817),n(2222),n(9753),n(9600),n(2165),n(6992),n(8783),n(3948);var r=n(5531),i=n(7252),o=n(4370),s=n(3246),a=n(7360),c=n(1595);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e){var t=this;if("number"!=typeof e.pagenum||"number"!=typeof e.pagesize)throw Error("Invalid parameter");if(!s.XZ.call(this)){var n=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var l={pagenum:e.pagenum||1,pagesize:e.pagesize||20},u=this.context,d=u.orgName,p=u.appName,h=u.accessToken,f={url:this.apiUrl+"/"+d+"/"+p+"/chatrooms",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+h},data:l,success:function(t){"function"==typeof e.success&&e.success(t)},error:function(n){n.error&&n.error_description&&t.onError&&t.onError({type:r.E.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR,message:n.error_description,data:n}),"function"==typeof e.error&&e.error(n)}};return a.kg.debug("Call getChatRooms",e),o.hj.call(this,f,c.fI.GET_CHATROOM_LIST)}function d(e){if("string"!=typeof e.name)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={name:e.name,description:e.description,maxusers:e.maxusers,owner:this.user,members:e.members},l=this.context,u=l.orgName,d=l.appName,p=(l.accessToken,l.jid),h={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(d,"/chatrooms?resource=").concat(p.clientResource),dataType:"json",type:"POST",data:JSON.stringify(n),headers:{Authorization:"Bearer "+e.token||0,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call createChatRoom",e),o.hj.call(this,h,c.fI.CREATE_CHATROOM)}function p(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=(n.accessToken,n.jid),p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(e.chatRoomId,"?resource=").concat(d.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+e.token||0},success:e.success,error:e.error};return a.kg.debug("Call destroyChatRoom",e),o.hj.call(this,p,c.fI.DESTROY_CHATROOM)}function h(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p={url:this.apiUrl+"/"+l+"/"+u+"/chatrooms/"+e.chatRoomId,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomDetails",e),o.hj.call(this,p,c.fI.GET_CHATROOM_DETAIL)}function f(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f={groupname:e.chatRoomName,description:e.description,maxusers:e.maxusers},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"?resource=").concat(p.clientResource),type:"PUT",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call modifyChatRoom",e),o.hj.call(this,m,c.fI.MODIFY_CHATROOM)}function m(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||"string"!=typeof e.username)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/users/").concat(f,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeChatRoomMember",e),o.hj.call(this,m,c.fI.REMOVE_CHATROOM_MEMBER)}var g=m;function v(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||!Array.isArray(e.users))throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=e.chatRoomId,l=e.users.join(","),u=this.context,d=u.orgName,p=u.appName,h=u.accessToken,f=u.jid,m={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(p,"/chatrooms/").concat(n,"/users/").concat(l,"?resource=").concat(f.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeChatRoomMembers",e),o.hj.call(this,m,c.fI.MULTI_REMOVE_CHATROOM_MEMBER)}var y=v;function E(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||!Array.isArray(e.users))throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=e.chatRoomId,l={usernames:e.users},u=this.context,d=u.orgName,p=u.appName,h=u.accessToken,f=u.jid,m={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(p,"/chatrooms/").concat(n,"/users?resource=").concat(f.clientResource),type:"POST",data:JSON.stringify(l),dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call addUsersToChatRoom",e),o.hj.call(this,m,c.fI.ADD_USERS_TO_CHATROOM)}function _(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}return a.kg.debug("Call joinChatRoom",e),this.mSync.handleChatRoom(e,"join")}function b(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}return a.kg.debug("Call leaveChatRoom",e),this.mSync.handleChatRoom(e,"leave")}var S=b;function T(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(isNaN(e.pageNum)||e.pageNum<=0)throw Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw Error('The parameter "pageSize" should be a positive number');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={pagenum:e.pageNum,pagesize:e.pageSize},l=this.context,u=l.orgName,d=l.appName,p=l.accessToken,h={url:this.apiUrl+"/"+u+"/"+d+"/chatrooms/"+e.chatRoomId+"/users",dataType:"json",type:"GET",data:n,headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call listChatRoomMembers",e),o.hj.call(this,h,c.fI.LIST_CHATROOM_MEMBERS)}var I=T;function N(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.chatRoomId,h={url:this.apiUrl+"/"+l+"/"+u+"/chatrooms/"+p+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomAdmin",e),o.hj.call(this,h,c.fI.GET_CHATROOM_ADMIN)}function w(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f={newadmin:e.username},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/admin?resource=").concat(p.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setChatRoomAdmin",e),o.hj.call(this,m,c.fI.SET_CHATROOM_ADMIN)}function C(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/admin/").concat(f,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeChatRoomAdmin",e),o.hj.call(this,m,c.fI.REMOVE_CHATROOM_ADMIN)}function O(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if("number"!=typeof e.muteDuration)throw Error('Invalid parameter: "muteDuration"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f={usernames:[e.username],mute_duration:e.muteDuration},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/mute?resource=").concat(p.clientResource),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},data:JSON.stringify(f),success:e.success,error:e.error};return a.kg.debug("Call muteChatRoomMember",e),o.hj.call(this,m,c.fI.MUTE_CHATROOM_MEMBER)}function A(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/mute/").concat(f,"?resource=").concat(p.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unmuteChatRoomMember",e),o.hj.call(this,m,c.fI.REMOVE_MUTE_CHATROOM_MEMBER)}var R=A;function M(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.chatRoomId,h={url:this.apiUrl+"/"+l+"/"+u+"/chatrooms/"+p+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomMutelist",e),o.hj.call(this,h,c.fI.GET_MUTE_CHATROOM_MEMBERS)}var D=M,k=M;function x(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/blocks/users/").concat(f,"?resource=").concat(p.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call blockChatRoomMember",e),o.hj.call(this,m,c.fI.SET_CHATROOM_MEMBER_TO_BLACK)}var L=x;function P(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f={usernames:e.usernames},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/blocks/users?resource=").concat(p.clientResource),data:JSON.stringify(f),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Chat blockChatRoomMembers:",m),o.hj.call(this,m,c.fI.MULTI_SET_CHATROOM_MEMBER_TO_BLACK)}var j=P;function U(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/blocks/users/").concat(f,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unblockChatRoomMember",e),o.hj.call(this,m,c.fI.REMOVE_CHATROOM_MEMBER_BLACK)}var F=U;function z(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f=e.usernames.join(","),m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/blocks/users/").concat(f,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unblockChatRoomMembers",e),o.hj.call(this,m,c.fI.MULTI_REMOVE_CHATROOM_MEMBER_BLACK)}var B=z;function V(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.chatRoomId,h={url:this.apiUrl+"/"+l+"/"+u+"/chatrooms/"+p+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomBlocklist",e),o.hj.call(this,h,c.fI.GET_CHATROOM_BLOCK_MEMBERS)}var H=V,G=V;function W(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/ban?resource=").concat(p.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call disableSendChatRoomMsg",e),o.hj.call(this,f,c.fI.DISABLED_CHATROOM_SEND_MSG)}function Y(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/ban?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call enableSendChatRoomMsg",e),o.hj.call(this,f,c.fI.ENABLE_CHATROOM_SEND_MSG)}function q(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f={usernames:e.users},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/white/users?resource=").concat(p.clientResource),type:"POST",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call addUsersToChatRoomWhitelist",e),o.hj.call(this,m,c.fI.ADD_USERS_TO_CHATROOM)}var K=q;function Q(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.chatRoomId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/white/users/").concat(e.userName,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeChatRoomAllowlistMember",e),o.hj.call(this,f,c.fI.REMOVE_CHATROOM_WHITE_USERS)}var J=Q,X=Q;function Z(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.chatRoomId,h={url:this.apiUrl+"/"+l+"/"+u+"/chatrooms/"+p+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomAllowlist",e),o.hj.call(this,h,c.fI.GET_CHATROOM_WHITE_USERS)}var $=Z;function ee(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.chatRoomId,h={url:this.apiUrl+"/"+l+"/"+u+"/chatrooms/"+p+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call isInChatRoomAllowlist",e),o.hj.call(this,h,c.fI.CHECK_CHATROOM_WHITE_USER)}var te=ee;function ne(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,u=n.accessToken,d=n.userId,p={url:this.apiUrl+"/"+c+"/"+l+"/sdk/chatrooms/"+e.chatRoomId+"/mute/"+d,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u}};return a.kg.debug("Call isInChatRoomMutelist",e),o.hj.call(this,p).then((function(e){return e.data}))}function re(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.roomId,h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(p,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call fetchChatRoomAnnouncement",e),o.hj.call(this,h,c.fI.GET_CHATROOM_ANN)}function ie(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("string"!=typeof e.announcement)throw Error('Invalid parameter: "announcement"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.roomId,f={announcement:e.announcement},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/announcement?resource=").concat(p.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call updateChatRoomAnnouncement:",e),o.hj.call(this,m,c.fI.UPDATE_CHATROOM_ANN)}function oe(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("object"!==l(e.file))throw Error('Invalid parameter: "file"');if(s.XZ.call(this)){var t=this.context,n=t.orgName,r=t.appName,i=t.accessToken,u=t.jid,d=e.roomId;o.cT.call(this,{uploadUrl:"".concat(this.apiUrl,"/").concat(n,"/").concat(r,"/chatrooms/").concat(d,"/share_files?resource=").concat(u.clientResource),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:i,apiUrl:this.apiUrl,file:e.file,appKey:this.context.appKey},c.fI.UPLOAD_CHATROOM_FILE),a.kg.debug("Call uploadChatRoomSharedFile",e)}}function se(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("string"!=typeof e.fileId||""===e.fileId)throw Error('Invalid parameter: "fileId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.roomId,f=e.fileId,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(h,"/share_files/").concat(f,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call deleteChatRoomSharedFile",e),o.hj.call(this,m,c.fI.DELETE_CHATROOM_FILE)}function ae(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.roomId,h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatrooms/").concat(p,"/share_files"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json",accept:"application/json"},success:e.success,error:e.error};return a.kg.debug("Call fetchChatRoomSharedFileList",e),o.hj.call(this,h,c.fI.GET_CHATROOM_FILES)}var ce=ae;function le(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if(e.attributeKeys&&!Array.isArray(e.attributeKeys))throw Error('"Invalid parameter attributeKeys": '+e.attributeKeys);if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=(n.jid,e.chatRoomId),h={keys:e.attributeKeys},f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/metadata/chatroom/").concat(p),type:"POST",dataType:"json",data:JSON.stringify(h),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};return a.kg.debug("Call getChatRoomAttributes:",e),o.hj.call(this,f,c.fI.GET_CHATROOM_ATTR).then((function(e){return{data:e.data,type:e.type}}))}function ue(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("object"!==l(e.attributes))throw Error("Invalid parameter attributes: "+e.attributes);if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,u=n.orgName,d=n.appName,p=n.accessToken,h=n.userId,f=e.chatRoomId,m=e.attributes,g=e.autoDelete,v=void 0===g||g,y=e.isForced?"/forced":"",E={metaData:m,autoDelete:v?"DELETE":"NO_DELETE"},_={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(d,"/metadata/chatroom/").concat(f,"/user/").concat(h)+y,type:"PUT",dataType:"json",data:JSON.stringify(E),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"}};return a.kg.debug("Call setChatRoomAttributes:",e),o.hj.call(this,_,c.fI.SET_CHATROOM_ATTR).then((function(e){return(0,s._W)(e)}))}function de(e){var t;if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("string"!=typeof e.attributeKey||""===e.attributeKey)throw Error("Invalid parameter attributeKey: "+e.attributeKey);if("string"!=typeof e.attributeValue||""===e.attributeValue)throw Error("Invalid parameter attributeValue: "+e.attributeValue);if(!s.XZ.call(this)){var n=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var l=this.context,u=l.orgName,d=l.appName,p=l.accessToken,h=l.userId,f=e.chatRoomId,m=e.attributeKey,g=e.attributeValue,v=e.autoDelete,y=void 0===v||v,E=e.isForced?"/forced":"",_={metaData:(t={},t[m]=g,t),autoDelete:y?"DELETE":"NO_DELETE"},b={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(d,"/metadata/chatroom/").concat(f,"/user/").concat(h)+E,type:"PUT",dataType:"json",data:JSON.stringify(_),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"}};return a.kg.debug("Call setChatRoomAttribute:",e),o.hj.call(this,b,c.fI.SET_CHATROOM_ATTR).then((function(e){var t=(0,s.H7)(e);if(t)throw t}))}function pe(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if(!Array.isArray(e.attributeKeys))throw Error('"Invalid parameter attributes": '+e.attributeKeys);if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.userId,h=e.chatRoomId,f=e.attributeKeys,m=e.isForced?"/forced":"",g={keys:f},v={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/metadata/chatroom/").concat(h,"/user/").concat(p)+m,type:"DELETE",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};return a.kg.debug("Call removeChatRoomAttributes:",e),o.hj.call(this,v,c.fI.DELETE_CHATROOM_ATTR).then((function(e){return(0,s._W)(e)}))}function he(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("string"!=typeof e.attributeKey||""===e.attributeKey)throw Error('"Invalid parameter attributeKey": '+e.attributeKey);if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.userId,h=e.chatRoomId,f=e.attributeKey,m=e.isForced?"/forced":"",g={keys:[f]},v={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/metadata/chatroom/").concat(h,"/user/").concat(p)+m,type:"DELETE",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};return a.kg.debug("Call removeChatRoomAttribute:",e),o.hj.call(this,v,c.fI.DELETE_CHATROOM_ATTR).then((function(e){var t=(0,s.H7)(e);if(t)throw t}))}},4363:function(e,t,n){"use strict";n.d(t,{w:function(){return o}}),n(9601),n(2772);var r=n(7360),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function o(e){var t,n,o,s=e.id,a=e.payload,c=e.timestamp,l=e.to,u=a.bodies&&a.bodies.length>0?a.bodies[0]:{},d={},p={},h=a.type?a.type:l.indexOf("@conference.easemob.com")>-1?"groupChat":"singleChat";switch(h="chat"===h?"singleChat":h,u.type){case"txt":var f=null===(t=null==a?void 0:a.meta)||void 0===t?void 0:t.edit_msg;if(d={id:s,type:"txt",chatType:h,msg:u.msg||"",to:a.to||"",from:a.from,time:c,ext:a.ext},f){var m=f.edit_time,g=f.operator,v=f.count;d.modifiedInfo={operationTime:m,operatorId:g,operationCount:v}}break;case"img":d={id:s,type:"img",chatType:h,to:a.to,from:a.from,time:c,ext:a.ext,width:(null===(n=u.size)||void 0===n?void 0:n.width)||0,height:(null===(o=u.size)||void 0===o?void 0:o.height)||0,secret:u.secret||"",url:(null==u?void 0:u.url)||"",file_length:u.file_length||0,file:{}};break;case"video":d={id:s,type:"video",chatType:h,from:a.from,to:a.to,url:(null==u?void 0:u.url)||"",secret:u.secret||"",filename:u.filename,length:u.length||0,file:{},file_length:u.file_length||0,filetype:a.ext.file_type||"",ext:a.ext,time:c};break;case"loc":d={id:s,type:"loc",chatType:h,from:a.from,to:a.to,buildingName:u.buildingName||"",addr:u.addr,lat:u.lat,lng:u.lng,ext:a.ext,time:c};break;case"audio":d={id:s,type:"audio",chatType:h,from:a.from,to:a.to,secret:u.secret||"",ext:a.ext,time:c,url:(null==u?void 0:u.url)||"",file:{},filename:u.filename,length:u.length||0,file_length:u.file_length||0,filetype:a.ext.file_type||""};break;case"file":d={id:s,type:"file",chatType:h,from:a.from,to:a.to,ext:a.ext,time:c,url:(null==u?void 0:u.url)||"",secret:u.secret||"",file:{},filename:u.filename||"",file_length:u.file_length||0,filetype:a.ext.file_type||""};break;case"cmd":d={id:s,type:"cmd",chatType:h,from:a.from,to:a.to,ext:a.ext,time:c,action:u.action||""};break;case"custom":d={id:s,type:"custom",chatType:h,from:a.from,to:a.to,ext:a.ext,time:c,customEvent:u.customEvent||"",customExts:u.customExts||""};break;case"combine":d={id:s,type:"combine",chatType:h,msg:u.msg||"",to:a.to||"",from:a.from,time:c,ext:a.ext,title:u.title||"",summary:u.summary||"",url:(null==u?void 0:u.url)||"",compatibleText:u.text,combineLevel:u.combineLevel||0,secret:u.secret||"",filename:u.filename||"",file_length:u.file_length||0};break;default:r.kg.error("unexpected message: ".concat(e))}if(a.msgConfig&&(p.msgConfig=a.msgConfig),null==a?void 0:a.meta){var y=a.meta;y.thread&&(p.chatThread={messageId:y.thread.msg_parent_id,parentId:y.thread.muc_parent_id,chatThreadName:y.thread.thread_name}),y.reactions&&(p.reactions=y.reactions),y.translations&&(p.translations=y.translations)}return i(i({},d),p)}},2856:function(e,t,n){"use strict";n.r(t),n.d(t,{acceptGroupInvite:function(){return H},acceptGroupJoinRequest:function(){return F},addUsersToGroupAllowlist:function(){return ve},addUsersToGroupWhitelist:function(){return ge},agreeInviteIntoGroup:function(){return V},agreeJoinGroup:function(){return U},blockGroup:function(){return f},blockGroupMember:function(){return ie},blockGroupMembers:function(){return se},blockGroupMessages:function(){return m},changeGroupOwner:function(){return b},changeOwner:function(){return _},createGroup:function(){return h},createGroupNew:function(){return p},deleteGroupSharedFile:function(){return Me},destroyGroup:function(){return D},disableSendGroupMsg:function(){return fe},dissolveGroup:function(){return M},downloadGroupSharedFile:function(){return xe},enableSendGroupMsg:function(){return me},fetchGroupAnnouncement:function(){return Oe},fetchGroupSharedFileList:function(){return De},getGroup:function(){return y},getGroupAdmin:function(){return w},getGroupAllowlist:function(){return Se},getGroupBlacklist:function(){return pe},getGroupBlacklistNew:function(){return de},getGroupBlocklist:function(){return he},getGroupInfo:function(){return S},getGroupMemberAttributes:function(){return Pe},getGroupMembersAttributes:function(){return je},getGroupMsgReadUser:function(){return Ce},getGroupMuteList:function(){return te},getGroupMutelist:function(){return ne},getGroupSharedFilelist:function(){return ke},getGroupWhitelist:function(){return be},getJoinedGroups:function(){return E},getMuted:function(){return ee},getPublicGroups:function(){return v},groupBlockMulti:function(){return oe},groupBlockSingle:function(){return re},inviteToGroup:function(){return L},inviteUsersToGroup:function(){return P},isGroupWhiteUser:function(){return Te},isInGroupAllowlist:function(){return Ne},isInGroupMutelist:function(){return we},isInGroupWhiteList:function(){return Ie},joinGroup:function(){return j},leaveGroup:function(){return x},listGroupMember:function(){return I},listGroupMembers:function(){return N},listGroups:function(){return g},modifyGroup:function(){return T},mute:function(){return J},muteGroupMember:function(){return X},quitGroup:function(){return k},rejectGroupInvite:function(){return W},rejectGroupJoinRequest:function(){return B},rejectInviteIntoGroup:function(){return G},rejectJoinGroup:function(){return z},removeAdmin:function(){return A},removeGroupAdmin:function(){return R},removeGroupAllowlistMember:function(){return _e},removeGroupBlockMulti:function(){return le},removeGroupBlockSingle:function(){return ae},removeGroupMember:function(){return q},removeGroupMembers:function(){return Q},removeGroupWhitelistMember:function(){return Ee},removeMultiGroupMember:function(){return K},removeMute:function(){return Z},removeSingleGroupMember:function(){return Y},rmUsersFromGroupWhitelist:function(){return ye},setAdmin:function(){return C},setGroupAdmin:function(){return O},setGroupMemberAttributes:function(){return Le},unblockGroupMember:function(){return ce},unblockGroupMembers:function(){return ue},unmuteGroupMember:function(){return $},updateGroupAnnouncement:function(){return Ae},uploadGroupSharedFile:function(){return Re}}),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(2222),n(6699),n(2023),n(9554),n(4747),n(8309),n(9753),n(9600);var r=n(5531),i=n(7252),o=n(4370),s=n(3246),a=n(7360),c=n(1595);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var u=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function p(e){if(!e||!e.data)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups?resource=").concat(p.clientResource),dataType:"json",type:"POST",data:JSON.stringify({owner:this.user,groupname:e.data.groupname,desc:e.data.desc,members:e.data.members,public:e.data.public,approval:e.data.approval,allowinvites:e.data.allowinvites,invite_need_confirm:e.data.inviteNeedConfirm,maxusers:e.data.maxusers,custom:e.data.ext}),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:function(t){e.success&&e.success(t)},error:e.error};return a.kg.debug("Call createGroup:",e),o.hj.call(this,h,c.fI.CREATE_GROUP)}var h=p;function f(e){var t;if("string"!=typeof e.groupId||""===e.groupId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var n=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var l=this.context,u=l.orgName,d=l.appName,p=l.accessToken,h=l.jid,f={entities:[(t={},t["notification_ignore_"+e.groupId]=!0,t)]},m={type:"PUT",url:"".concat(this.apiUrl,"/").concat(u,"/").concat(d,"/users/").concat(this.user,"?resource=").concat(h.clientResource),data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call blockGroupMessages",e),o.hj.call(this,m,c.fI.BLOCK_GROUP)}var m=f;function g(e){if("number"!=typeof e.limit)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p={limit:e.limit,cursor:e.cursor};e.cursor||delete p.cursor;var h={url:this.apiUrl+"/"+l+"/"+u+"/publicchatgroups",type:"GET",dataType:"json",data:p,headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call listGroups",e),o.hj.call(this,h,c.fI.LIST_GROUP)}var v=g;function y(e){if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p={url:this.apiUrl+"/"+l+"/"+u+"/users/"+this.user+"/joined_chatgroups",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return a.kg.debug("Call getJoinedGroups",e),o.hj.call(this,p,c.fI.GET_USER_GROUP)}function E(e){if("number"!=typeof e.pageNum||"number"!=typeof e.pageSize)throw Error('Invalid parameter: "pageNum or pageSize"');if(e.pageNum<0||e.pageSize<0)throw Error('"pageNum" should >= 0 and "pageSize" should >= 0');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.needAffiliations||e.needRole?"/chatgroups/user/".concat(this.user,"?pagenum=").concat(e.pageNum,"&pagesize=").concat(e.pageSize,"&needAffiliations=").concat(e.needAffiliations,"&needRole=").concat(e.needRole):"/users/".concat(this.user,"/joined_chatgroups?pagenum=").concat(e.pageNum,"&pagesize=").concat(e.pageSize),h={url:this.apiUrl+"/"+l+"/"+u+p,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return a.kg.debug("Call getGroup",e),o.hj.call(this,h,c.fI.GET_USER_GROUP).then((function(e){var t=e.uri,n=e.entities,r=[];return t.includes("joined_chatgroups")||(n.forEach((function(e){var t={affiliationsCount:e.affiliations_count,groupName:e.name,groupId:e.groupId,role:e.permission,disabled:e.disabled,approval:e.membersonly,allowInvites:e.allowinvites,description:e.description,maxUsers:e.maxusers,public:e.public};r.push(t)})),e.entities=r),e}))}function _(e){if("string"!=typeof e.groupId||"string"!=typeof e.newOwner)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={newowner:e.newOwner},l=this.context,u=l.orgName,d=l.appName,p=l.accessToken,h=l.jid,f={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(d,"/chatgroups/").concat(e.groupId,"?resource=").concat(h.clientResource),type:"PUT",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},data:JSON.stringify(n),success:e.success,error:e.error};return a.kg.debug("Call changeOwner",e),o.hj.call(this,f,c.fI.CHANGE_OWNER)}var b=_;function S(e){if("string"!=typeof e.groupId&&!Array.isArray(e.groupId))throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p={url:this.apiUrl+"/"+l+"/"+u+"/chatgroups/"+e.groupId+"?joined_time=true",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupInfo",e),o.hj.call(this,p,c.fI.GET_GROUP_INFO)}function T(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error("Invalid parameter");if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={groupname:e.groupName,description:e.description,custom:e.ext},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"?resource=").concat(p.clientResource),type:"PUT",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call modifyGroup",e),o.hj.call(this,m,c.fI.MODIFY_GROUP)}function I(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(isNaN(e.pageNum)||e.pageNum<=0)throw Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw Error('The parameter "pageSize" should be a positive number');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={pagenum:e.pageNum,pagesize:e.pageSize},l=this.context,u=l.orgName,d=l.appName,p=l.accessToken,h={url:this.apiUrl+"/"+u+"/"+d+"/chatgroups/"+e.groupId+"/users",dataType:"json",type:"GET",data:n,headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call listGroupMember",e),o.hj.call(this,h,c.fI.LIST_GROUP_MEMBER)}var N=I;function w(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.groupId,h={url:this.apiUrl+"/"+l+"/"+u+"/chatgroups/"+p+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupAdmin",e),o.hj.call(this,h,c.fI.GET_GROUP_ADMIN)}function C(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={newadmin:e.username},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/admin?resource=").concat(p.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setGroupAdmin",e),o.hj.call(this,m,c.fI.SET_GROUP_ADMIN)}var O=C;function A(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/admin/").concat(f,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeAdmin",e),o.hj.call(this,m,c.fI.REMOVE_GROUP_ADMIN)}var R=A;function M(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"?version=v3&resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call destroyGroup",e),o.hj.call(this,f,c.fI.DISSOLVE_GROUP)}var D=M;function k(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/quit?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call quitGroup",e),o.hj.call(this,f,c.fI.QUIT_GROUP)}var x=k;function L(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=e.groupId,l={usernames:e.users},u=this.context,d=u.orgName,p=u.appName,h=u.accessToken,f=u.jid,m={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(p,"/chatgroups/").concat(n,"/invite?resource=").concat(f.clientResource),type:"POST",data:JSON.stringify(l),dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call inviteUsersToGroup",e),o.hj.call(this,m,c.fI.INVITE_TO_GROUP)}var P=L;function j(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(e.groupId,"/apply?resource=").concat(p.clientResource),type:"POST",dataType:"json",data:JSON.stringify({message:e.message||""}),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call joinGroup",e),o.hj.call(this,h,c.fI.JOIN_GROUP)}function U(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.applicant||""===e.applicant)throw Error('Invalid parameter: "applicant"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={applicant:e.applicant,verifyResult:!0,reason:"no clue"},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/apply_verify?resource=").concat(p.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call agreeJoinGroup",e),o.hj.call(this,m,c.fI.AGREE_JOIN_GROUP)}var F=U;function z(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.applicant||""===e.applicant)throw Error('Invalid parameter: "applicant"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={applicant:e.applicant,verifyResult:!1,reason:e.reason||""},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/apply_verify?resource=").concat(p.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call rejectGroupJoinRequest",e),o.hj.call(this,m,c.fI.REJECT_JOIN_GROUP)}var B=z;function V(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.invitee||""===e.invitee)throw Error('Invalid parameter: "invitee"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={invitee:e.invitee,verifyResult:!0},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/invite_verify?resource=").concat(p.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call acceptGroupInvite",e),o.hj.call(this,m,c.fI.AGREE_INVITE_GROUP)}var H=V;function G(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.invitee||""===e.invitee)throw Error('Invalid parameter: "invitee"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={invitee:e.invitee,verifyResult:!1},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/invite_verify?resource=").concat(p.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call rejectGroupInvite",e),o.hj.call(this,m,c.fI.REJECT_INVITE_GROUP)}var W=G;function Y(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=e.groupId,l=e.username,u=this.context,d=u.orgName,p=u.appName,h=u.accessToken,f=u.jid,m={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(p,"/chatgroups/").concat(n,"/users/").concat(l,"?resource=").concat(f.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeGroupMember",e),o.hj.call(this,m,c.fI.REMOVE_GROUP_MEMBER)}var q=Y;function K(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f=e.users.join(","),m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/users/").concat(f,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeGroupMembers",e),o.hj.call(this,m,c.fI.MULTI_REMOVE_GROUP_MEMBER)}var Q=K;function J(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!(Array.isArray(e.username)||"string"==typeof e.username&&""!==e.username))throw Error('Invalid parameter: "username"');if("number"!=typeof e.muteDuration)throw Error('Invalid parameter: "muteDuration"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={usernames:"string"==typeof e.username?[e.username]:e.username,mute_duration:e.muteDuration},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/mute?resource=").concat(p.clientResource),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},data:JSON.stringify(f),success:e.success,error:e.error};return a.kg.debug("Call muteGroupMember",e),o.hj.call(this,m,c.fI.MUTE_GROUP_MEMBER)}var X=J;function Z(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!(Array.isArray(e.username)||"string"==typeof e.username&&""!==e.username))throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/mute/").concat(f,"?resource=").concat(p.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unmuteGroupMember",e),o.hj.call(this,m,c.fI.UNMUTE_GROUP_MEMBER)}var $=Z;function ee(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.groupId,h={url:this.apiUrl+"/"+l+"/"+u+"/chatgroups/"+p+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupMuteList",e),o.hj.call(this,h,c.fI.GET_GROUP_MUTE_LIST)}var te=ee,ne=ee;function re(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/blocks/users/").concat(f,"?resource=").concat(p.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call blockGroupMember",e),o.hj.call(this,m,c.fI.BLOCK_GROUP_MEMBER)}var ie=re;function oe(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={usernames:e.usernames},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/blocks/users?resource=").concat(p.clientResource),data:JSON.stringify(f),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call blockGroupMembers",e),o.hj.call(this,m,c.fI.BLOCK_GROUP_MEMBERS)}var se=oe;function ae(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/blocks/users/").concat(f,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unblockGroupMember",e),o.hj.call(this,m,c.fI.UNBLOCK_GROUP_MEMBER)}var ce=ae;function le(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f=e.usernames.join(","),m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/blocks/users/").concat(f,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unblockGroupMembers",e),o.hj.call(this,m,c.fI.UNBLOCK_GROUP_MEMBERS)}var ue=le;function de(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.groupId,h={url:this.apiUrl+"/"+l+"/"+u+"/chatgroups/"+p+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupBlacklist",e),o.hj.call(this,h,c.fI.GET_GROUP_BLACK_LIST)}var pe=de,he=de;function fe(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/ban?resource=").concat(p.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call disableSendGroupMsg",e),o.hj.call(this,f,c.fI.DISABLED_SEND_GROUP_MSG)}function me(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/ban?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call enableSendGroupMsg",e),o.hj.call(this,f,c.fI.ENABLE_SEND_GROUP_MSG)}function ge(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={usernames:e.users},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/white/users?resource=").concat(p.clientResource),type:"POST",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call addUsersToGroupWhitelist",e),o.hj.call(this,m,c.fI.ADD_USERS_TO_GROUP_WHITE)}var ve=ge;function ye(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/white/users/").concat(e.userName,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeGroupAllowlistMember",e),o.hj.call(this,f,c.fI.REMOVE_GROUP_WHITE_MEMBER)}var Ee=ye,_e=ye;function be(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.groupId,h={url:this.apiUrl+"/"+l+"/"+u+"/chatgroups/"+p+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupAllowlist",e),o.hj.call(this,h,c.fI.GET_GROUP_WHITE_LIST)}var Se=be;function Te(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.groupId,h={url:this.apiUrl+"/"+l+"/"+u+"/chatgroups/"+p+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call isInGroupAllowlist",e),o.hj.call(this,h,c.fI.IS_IN_GROUP_WHITE_LIST)}var Ie=Te,Ne=Te;function we(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "chatRoomId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,u=n.accessToken,d=n.userId,p={url:this.apiUrl+"/"+c+"/"+l+"/sdk/group/"+e.groupId+"/mute/"+d,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u}};return a.kg.debug("Call isInGroupMutelist",e),o.hj.call(this,p).then((function(e){return e.data}))}function Ce(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.msgId||""===e.msgId)throw Error('Invalid parameter: "msgId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p={url:this.apiUrl+"/"+l+"/"+u+"/chatgroups/"+e.groupId+"/acks/"+e.msgId,dataType:"json",type:"GET",data:{limit:500,key:void 0},headers:{Authorization:"Bearer "+d},success:e.success,error:e.error};return a.kg.debug("Call getGroupMsgReadUser",e),o.hj.call(this,p,c.fI.GET_GROUP_MSG_READ_USER)}function Oe(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.groupId,h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(p,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call fetchGroupAnnouncement",e),o.hj.call(this,h,c.fI.GET_GROUP_ANN)}function Ae(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.announcement)throw Error('Invalid parameter: "announcement"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f={announcement:e.announcement},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/announcement?resource=").concat(p.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call updateGroupAnnouncement",e),o.hj.call(this,m,c.fI.UPDATE_GROUP_ANN)}function Re(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("object"!==l(e.file))throw Error('Invalid parameter: "file"');if(s.XZ.call(this)){var t=this.context,n=t.orgName,r=t.appName,i=t.accessToken,u=t.jid,d=e.groupId;o.cT.call(this,{uploadUrl:"".concat(this.apiUrl,"/").concat(n,"/").concat(r,"/chatgroups/").concat(d,"/share_files?resource=").concat(u.clientResource),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:i,apiUrl:this.apiUrl,file:e.file,appKey:this.context.appKey},c.fI.UPLOAD_GROUP_FILE),a.kg.debug("Call uploadGroupSharedFile",e)}}function Me(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.fileId||""===e.fileId)throw Error('Invalid parameter: "file"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=n.jid,h=e.groupId,f=e.fileId,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(h,"/share_files/").concat(f,"?resource=").concat(p.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call deleteGroupSharedFile",e),o.hj.call(this,m,c.fI.DELETE_GROUP_FILE)}function De(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,u=n.appName,d=n.accessToken,p=e.pageNum||1,h=e.pageSize||10,f=e.groupId,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/chatgroups/").concat(f,"/share_files?pagenum=").concat(p,"&pagesize=").concat(h),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupSharedFilelist",e),o.hj.call(this,m,c.fI.GET_GROUP_FILE_LIST)}var ke=De;function xe(e){var t=this.context,n=t.orgName,r=t.appName,i=t.accessToken,s=this.apiUrl,l=e.groupId,u=e.fileId;o.LR.call(this,{url:"".concat(s,"/").concat(n,"/").concat(r,"/chatgroups/").concat(l,"/share_files/").concat(u),onFileDownloadComplete:e.onFileDownloadComplete,onFileDownloadError:e.onFileDownloadError,accessToken:i,id:u,secret:e.secret},c.fI.DOWN_GROUP_FILE),a.kg.debug("Call downloadGroupSharedFile",e)}function Le(e){return u(this,void 0,void 0,(function(){var t,n,u,p,h,f,m,g,v,y,E;return d(this,(function(d){switch(d.label){case 0:if(t=e.groupId,n=e.userId,u=e.memberAttributes,"string"!=typeof t||""===t)throw Error('Invalid parameter: "groupId"');if("string"!=typeof n||""===n)throw Error('Invalid parameter: "userId"');if("object"!==l(u))throw Error('Invalid parameter: "memberAttributes"');return s.XZ.call(this)?(h=this.context,f=h.orgName,m=h.appName,g=h.accessToken,v=h.jid,y={metaData:u},E={url:"".concat(this.apiUrl,"/").concat(f,"/").concat(m,"/sdk/metadata/chatgroup/").concat(t,"/user/").concat(n,"?resource=").concat(v.clientResource),type:"PUT",dataType:"json",data:JSON.stringify(y),headers:{Authorization:"Bearer "+g,"Content-Type":"application/json"}},a.kg.debug("Call setGroupMemberAttributes",e),[4,o.hj.call(this,E,c.fI.SET_GROUP_MEMBER_ATTRS)]):(p=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(p)]);case 1:return d.sent(),[2]}}))}))}function Pe(e){var t=e.groupId,n=e.userId;return je.call(this,{groupId:t,userIds:[n]}).then((function(e){var t;return{type:e.type,data:null===(t=e.data)||void 0===t?void 0:t[n]}}))}function je(e){var t=e.groupId,n=e.userIds,l=e.keys,u=void 0===l?[]:l;if("string"!=typeof t||""===t)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(n)||(null==n?void 0:n.length)<=0)throw Error('Invalid parameter: "userIds"');if(!Array.isArray(u))throw Error('Invalid parameter: "keys"');if(!s.XZ.call(this)){var d=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(d)}var p=this.context,h=p.orgName,f=p.appName,m=p.accessToken,g={targets:n,properties:u},v={url:"".concat(this.apiUrl,"/").concat(h,"/").concat(f,"/sdk/metadata/chatgroup/").concat(t,"/get"),type:"POST",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+m,"Content-Type":"application/json"}};return a.kg.debug("Call getGroupMembersAttributes",e),o.hj.call(this,v,c.fI.GET_GROUP_MEMBER_ATTR).then((function(e){return{type:e.type,data:(null==e?void 0:e.data)||{}}}))}},7479:function(e,t,n){"use strict";n.r(t),n.d(t,{acceptContactInvite:function(){return V},acceptInvitation:function(){return B},addContact:function(){return U},addReaction:function(){return $},addToBlackList:function(){return W},addUsersToBlacklist:function(){return Y},addUsersToBlocklist:function(){return q},declineContactInvite:function(){return G},declineInvitation:function(){return H},deleteContact:function(){return z},deleteConversation:function(){return A},deleteReaction:function(){return ee},deleteSession:function(){return O},fetchHistoryMessages:function(){return L},fetchUserInfoById:function(){return D},getBlacklist:function(){return _},getBlocklist:function(){return b},getChatToken:function(){return x},getContacts:function(){return T},getConversationlist:function(){return C},getHistoryMessages:function(){return j},getReactionDetail:function(){return re},getReactionList:function(){return te},getReactionlist:function(){return ne},getRoster:function(){return S},getServerConversations:function(){return se},getServerPinnedConversations:function(){return ce},getSessionList:function(){return w},modifyMessage:function(){return Z},pinConversation:function(){return le},recallMessage:function(){return X},removeFromBlackList:function(){return K},removeHistoryMessages:function(){return oe},removeRoster:function(){return F},removeUserFromBlackList:function(){return Q},removeUserFromBlocklist:function(){return J},reportMessage:function(){return ie},updateCurrentUserNick:function(){return k},updateOwnUserInfo:function(){return R},updateUserInfo:function(){return M},uploadPushToken:function(){return N},uploadToken:function(){return I}}),n(9601),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(9554),n(4747),n(2222),n(7941),n(6699),n(3710),n(9714),n(9600),n(5069),n(561),n(9753),n(8309),n(1249);var r=n(3246),i=n(5531),o=n(7252),s=n(4370),a=n(8161),c=n(4968),l=n(4188),u=n.n(l),d=n(7360),p=n(1595),h=n(4363),f=n(7288),m=n(9743),g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},g.apply(this,arguments)},v=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},y=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},E={chat:"singleChat",chatroom:"chatRoom",groupchat:"groupChat",singleChat:"singleChat",chatRoom:"chatRoom",groupChat:"groupChat"};function _(e){if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u={url:this.apiUrl+"/"+a+"/"+c+"/users/"+this.user+"/blocks/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+l},success:function(t){var n={};t.data.forEach((function(e){n[e]={name:e}})),"function"==typeof(null==e?void 0:e.success)&&e.success(t)},error:function(t){"function"==typeof(null==e?void 0:e.error)&&e.error(t)}};return d.kg.debug("Call getBlocklist"),s.hj.call(this,u,p.fI.GET_BLACK_LIST)}var b=_,S=T;function T(e){var t=this;if(!r.XZ.call(this)){var n=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var a=this.context,c=a.orgName,l=a.appName,u=a.accessToken,h={url:this.apiUrl+"/"+c+"/"+l+"/users/"+this.user+"/contacts/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u},success:function(n){var r=[];n.data.forEach((function(e){r.push({name:e,subscription:"both",jid:t.context.jid})})),"function"==typeof(null==e?void 0:e.success)&&e.success(r)},error:function(t){"function"==typeof(null==e?void 0:e.error)&&e.error(t)}};return d.kg.debug("Call getContacts"),s.hj.call(this,h,p.fI.GET_CONTACTS)}function I(e){if("string"!=typeof e.deviceId||""===e.deviceId)throw Error('Invalid parameter: "deviceId"');if("string"!=typeof e.deviceToken||""===e.deviceToken)throw Error('Invalid parameter: "deviceToken"');if("string"!=typeof e.notifierName||""===e.notifierName)throw Error('Invalid parameter: "notifierName"');if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/users/").concat(this.user),type:"PUT",data:JSON.stringify({device_id:e.deviceId,device_token:e.deviceToken,notifier_name:e.notifierName}),dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e.success,error:e.error};return d.kg.debug("Call uploadPushToken",e),s.hj.call(this,u,p.fI.UPLOAD_PUSH_TOKEN)}var N=I;function w(e){if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/users/").concat(this.user,"/user_channels"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return d.kg.debug("Call getSessionList"),s.hj.call(this,u,p.fI.GET_SESSION_LIST)}function C(e){if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u=!!(e&&"number"==typeof e.pageNum&&"number"==typeof e.pageSize&&e.pageNum>0&&e.pageSize>0),f={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/users/").concat(this.user,"/user_channels").concat(u?"/page":""),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return u&&(f.data={pageNum:e.pageNum,pageSize:e.pageSize}),d.kg.debug("Call getConversationlist"),s.hj.call(this,f,p.fI.GET_SESSION_LIST).then((function(e){return function(e){var t=e.data.channel_infos;return null==t||t.forEach((function(e){e.meta&&"{}"!==JSON.stringify(e.meta)?(e.meta.payload=JSON.parse(e.meta.payload),e.lastMessage=(0,h.w)(e.meta)):e.lastMessage=e.meta,delete e.meta})),e}(e)}))}function O(e){if(e&&"string"!=typeof e.channel)throw Error("Invalid parameter channel: ".concat(e.channel));if(e&&"singleChat"!==e.chatType&&"groupChat"!==e.chatType)throw Error("Invalid parameter chatType: ".concat(e.chatType));if(e&&"boolean"!=typeof e.deleteRoam)throw Error("Invalid parameter deleteRoam: ".concat(e.deleteRoam));if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n,a=this.context,c=a.orgName,l=a.appName,u=a.accessToken,h=a.jid;n="singleChat"===e.chatType?"chat":"groupChat";var f={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/user/").concat(this.user,"/user_channel?resource=").concat(h.clientResource),dataType:"json",type:"DELETE",data:JSON.stringify({channel:e.channel,type:n,delete_roam:e.deleteRoam}),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return d.kg.debug("Call deleteSession",e),s.hj.call(this,f,p.fI.DELETE_SESSION)}var A=O;function R(e,t){if(!r.XZ.call(this)){var n=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var a=this.context,c=a.orgName,l=a.appName,u=a.accessToken,h=["nickname","avatarurl","mail","phone","gender","sign","birth","ext"],f={};if("wx"===s.P6.getEnvInfo().platform)if("string"==typeof e&&void 0!==t){if(!h.includes(e))throw new Error("illegal key, only these keys: nickname, avatarurl, mail, phone, gender, sign, birth, ext are allowed");f[e]=t}else{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("illegal params");h.forEach((function(t){h.includes(t)&&void 0!==e[t]&&(f[t]=e[t])}))}else if("string"==typeof e){if(!h.includes(e))throw new Error("illegal key, only these keys: nickname, avatarurl, mail, phone, gender, sign, birth, ext are allowed");f=e+"="+t}else{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("illegal params");var m=[];h.forEach((function(t){if(h.includes(t)&&void 0!==e[t]){var n=encodeURIComponent(t),r=encodeURIComponent(e[t]);m.push(n+"="+r)}})),f=m.join("&")}var g={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/metadata/user/").concat(this.user),type:"PUT",data:f,dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/x-www-form-urlencoded"}};return d.kg.debug("Call updateOwnUserInfo",e),s.hj.call(this,g,p.fI.UPDATE_USER_INFO)}var M=R;function D(e,t){if(!r.XZ.call(this)){var n=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var a,c=this.context,l=c.orgName,u=c.appName,h=c.accessToken,f=[];if("string"==typeof e)f=[e];else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("illegal params");f=e}a="string"==typeof t?[t]:t&&"[object Array]"===Object.prototype.toString.call(t)?t:["nickname","avatarurl","mail","phone","gender","sign","birth","ext"];var m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/metadata/user/get"),type:"POST",data:JSON.stringify({targets:f,properties:a}),dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"}};return d.kg.debug("Call fetchUserInfoById",e),s.hj.call(this,m,p.fI.GET_USER_INFO)}function k(e){if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/users/").concat(this.user),type:"PUT",dataType:"json",data:JSON.stringify({nickname:e}),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return d.kg.debug("Call updateCurrentUserNick",e),s.hj.call(this,u)}function x(e){if("string"!=typeof e||""===e)throw Error('Invalid parameter: "agoraToken"');var t=this.context,n=t.orgName,r=t.appName,i={url:this.apiUrl+"/"+n+"/"+r+"/token",dataType:"json",type:"POST",data:JSON.stringify({grant_type:"agora"}),headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}};return d.kg.debug("Call getChatToken",e),s.hj.call(this,i,p.fI.SDK_INTERNAL)}function L(e){var t=this;return new Promise((function(n,s){if(!e.queue)throw Error('Invalid parameter: "specified"');if(!r.XZ.call(t)){var a=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(a)}(function e(t){var r=this,i=t.count||20;P.call(this,{count:i,isGroup:!!t.isGroup,queue:t.queue,start:t.start,format:t.format,success:function(o){if(o.msgs.length>=i||o.is_last){var s=o.msgs.splice(0,i).reverse();t.success&&t.success(s),n(s)}else e.call(r,g(g({},t),{start:null}))},fail:function(e){s(e),t.fail&&t.fail(e)}})}).call(t,e),d.kg.debug("Call fetchHistoryMessages",e)}))}function P(e){var t=this,n=e.queue,r=this.mr_cache[n]||(this.mr_cache[n]={msgs:[]}),c=this.context.userId,l=e.start||-1,d=e.count||20;if(r.msgs.length>=d||r.is_last)"function"==typeof e.success&&e.success(r);else{r&&r.next_key&&(l=r.next_key),e.start&&(l=e.start);var h={queue:n+(e.isGroup?"@conference.easemob.com":"@easemob.com"),start:l,end:-1},f=this.context,m=f.orgName,g=f.appName,E={url:"".concat(this.apiUrl,"/").concat(m,"/").concat(g,"/users/").concat(c,"/messageroaming"),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"},data:JSON.stringify(h),success:function(n){return v(t,void 0,void 0,(function(){var t,i,o,s,c,l,d=this;return y(this,(function(p){switch(p.label){case 0:if(t=null==n?void 0:n.data,!n.data.msgs)return"function"==typeof e.success&&e.success(r),r.is_last=!0,r.next_key="",[2];i=t.msgs,o=i.length,r.is_last=t.is_last,r.next_key=t.next_key,s=function(t){return v(d,void 0,void 0,(function(){var n,r,i,o,s;return y(this,(function(c){switch(c.label){case 0:for(n=[],t=u().atob(t),r=0,i=t.length;r<i;++r)n.push(t.charCodeAt(r));return o=(o=this.context.root.lookup("easemob.pb.Meta")).decode(n),s={errorCode:0,reason:""},1!==o.ns?[3,2]:[4,a.Z.call(this,o,s,!0,e.format)];case 1:return[2,c.sent()];case 2:return[2]}}))}))},c=0,p.label=1;case 1:return c<o?[4,s(i[c].msg)]:[3,4];case 2:(l=p.sent())&&r.msgs.push(l),p.label=3;case 3:return c++,[3,1];case 4:return"function"==typeof e.success&&e.success(r),[2]}}))}))},error:function(e){if(e.error&&e.error_description){var n=o.Z.create({type:i.E.WEBIM_CONNCTION_AJAX_ERROR,message:"fetch history messages error",data:e});t.onError&&t.onError(n)}}};s.hj.call(this,E,p.fI.GET_HISTORY_MSG).catch((function(t){"function"==typeof e.fail&&e.fail(t)}))}}function j(e){var t=this;return new Promise((function(n,c){var l=e.targetId,p=e.cursor,h=void 0===p?-1:p,f=e.pageSize,m=void 0===f?20:f,g=e.chatType,E=e.searchDirection,_=e.searchOptions,b=void 0===_?{}:_,S=b.msgTypes,T=void 0===S?[]:S,I=b.startTime,N=void 0===I?null:I,w=b.endTime,C=void 0===w?null:w,O=b.from,A=void 0===O?null:O;if("string"!=typeof l||""===l)throw Error('"Invalid parameter": "targetId"');if(A&&"string"!=typeof A)throw Error('"Invalid parameter": "searchOptions.from"');if(T&&!Array.isArray(T))throw Error('"Invalid parameter": "searchOptions.msgTypes"');if(N&&"number"!=typeof N)throw Error('"Invalid parameter": "searchOptions.startTime"');if(C&&"number"!=typeof N)throw Error('"Invalid parameter": "searchOptions.endTime"');if(!r.XZ.call(t)){var R=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return c(R)}var M=t.context,D=M.orgName,k=M.appName,x=M.userId,L="groupChat"===e.chatType?"@conference.easemob.com":"@easemob.com",P={queue:"".concat(l).concat(L),start:h,pull_number:m,is_positive:"down"===E,msgType:T.join(",")||"",end:-1,startTime:N,endTime:C,userId:"singleChat"===g?null:A},j={url:"".concat(t.apiUrl,"/").concat(D,"/").concat(k,"/users/").concat(x,"/messageroaming"),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+t.token,"Content-Type":"application/json"},data:JSON.stringify(P),success:function(r){return v(t,void 0,void 0,(function(){var t,i,o,s,c,l,d,p,h=this;return y(this,(function(f){switch(f.label){case 0:t=null==r?void 0:r.data,i=t.msgs||[],o=function(e){return v(h,void 0,void 0,(function(){var t,n,r,i,o;return y(this,(function(s){switch(s.label){case 0:for(t=[],e=u().atob(e),n=0,r=e.length;n<r;++n)t.push(e.charCodeAt(n));return i=(i=this.context.root.lookup("easemob.pb.Meta")).decode(t),o={errorCode:0,reason:""},1!==i.ns?[3,2]:[4,a.Z.call(this,i,o,!0,!0)];case 1:return[2,s.sent()];case 2:return[2]}}))}))},s=[],c=0,f.label=1;case 1:return c<i.length?[4,o(i[c].msg)]:[3,4];case 2:(l=f.sent())&&s.push(l),f.label=3;case 3:return c++,[3,1];case 4:return t.msgs=s,d={cursor:t.next_key,messages:s,isLast:t.is_last},null===(p=e.success)||void 0===p||p.call(e,d),n(d),[2]}}))}))},error:e.fail};s.hj.call(t,j).catch((function(e){c(e)})),d.kg.debug("Call getHistoryMessages",e)}))}function U(e,t){var n=this;return new Promise((function(r,i){var o={id:n.getUniqueId(),to:e,message:t};c.Z.operatRoster.call(n,o,"add",r,i),d.kg.debug("Call addContact",o)}))}var F=z;function z(e){var t=this;return new Promise((function(n,r){var i={id:t.getUniqueId(),to:e};c.Z.operatRoster.call(t,i,"remove",n,r),d.kg.debug("Call deleteContact",i)}))}function B(e){var t=this;return new Promise((function(n,r){var i={id:t.getUniqueId(),to:e};c.Z.operatRoster.call(t,i,"accept",n,r),d.kg.debug("Call acceptInvitation",i)}))}var V=B;function H(e){var t=this;return new Promise((function(n,r){var i={id:t.getUniqueId(),to:e};c.Z.operatRoster.call(t,i,"decline",n,r),d.kg.debug("Call declineContactInvite",i)}))}var G=H;function W(e){var t=this;return new Promise((function(n,r){c.Z.operatRoster.call(t,{to:e.name},"ban",n,r),d.kg.debug("Call addUsersToBlocklist",e)}))}var Y=W,q=W;function K(e){var t=this;return new Promise((function(n,r){c.Z.operatRoster.call(t,{to:e.name},"allow",n,r),d.kg.debug("Call removeUserFromBlocklist",e)}))}var Q=K,J=K;function X(e){var t=this,n=this.getUniqueId(),r={id:n,to:e.to};this._msgHash[n]=g({},r);var i="";void 0!==e.chatType?i=e.chatType:void 0!==e.type&&(i="chat"===e.type?"singleChat":e.type);var o={id:n,type:"recall",chatType:i,ackId:e.mid,to:e.to,isChatThread:e.isChatThread||!1,success:function(n){return v(t,void 0,void 0,(function(){var t,r,o,s,a,c,l,u,d;return y(this,(function(p){switch(p.label){case 0:return p.trys.push([0,5,,6]),"singleChat"!==i&&"groupChat"!==i?[3,4]:[4,null===(o=null===(r=this._localCache)||void 0===r?void 0:r.getInstance())||void 0===o?void 0:o.removeMsgByServerMsgId(e.mid)];case 1:return p.sent(),[4,null===(a=null===(s=this._localCache)||void 0===s?void 0:s.getInstance())||void 0===a?void 0:a.getConversationLastMessage(e.to,i)];case 2:return t=p.sent(),[4,null===(l=null===(c=this._localCache)||void 0===c?void 0:c.getInstance())||void 0===l?void 0:l.updateLocalConversation((0,m.MQ)({conversationId:e.to,conversationType:i}),{lastMessageId:null==t?void 0:t.serverMsgId})];case 3:p.sent(),p.label=4;case 4:return null===(u=null==e?void 0:e.success)||void 0===u||u.call(e,n),[3,6];case 5:return p.sent(),null===(d=null==e?void 0:e.success)||void 0===d||d.call(e,n),[3,6];case 6:return[2]}}))}))},fail:e.fail};return d.kg.debug("Call recallMessage",e),this.mSync.send(o,this)}function Z(e){var t=e||{},n=t.messageId,r=t.modifiedMessage;if(d.kg.debug("Call modifyMessage",n,r),""===n)throw Error('Invalid parameter: "messageId"');if("txt"!==r.type)throw Error('Invalid parameter: "modifiedMessage.type"');return this.mSync.send(g({editMessageId:n},r))}function $(e){return v(this,void 0,void 0,(function(){var t,n,a,c,l,u,d,p,h;return y(this,(function(f){switch(f.label){case 0:if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reaction: ".concat(e.reaction));return r.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u=e.reaction,d=e.messageId,p={msgId:d,message:u},h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/reaction/user/").concat(this.user),type:"POST",data:JSON.stringify(p),dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}},[4,s.hj.call(this,h)]):(t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return f.sent(),[2]}}))}))}function ee(e){return v(this,void 0,void 0,(function(){var t,n,a,c,l,u,d,p;return y(this,(function(h){switch(h.label){case 0:if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reactionId: ".concat(e.reaction));return r.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u=e.messageId,d=e.reaction,p={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/reaction/user/").concat(this.user,"?msgId=").concat(u,"&message=").concat(d),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}},[4,s.hj.call(this,p)]):(t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return h.sent(),[2]}}))}))}function te(e){if("string"!=typeof e.chatType||!e.chatType)throw Error("Invalid parameter chatType: ".concat(e.chatType));if(!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u=e.chatType,d=e.messageId,p={msgIdList:"string"==typeof d?[d]:d,msgType:"singleChat"===u?"chat":"groupchat",groupId:e.groupId||null},h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/reaction/user/").concat(this.user),type:"GET",data:p,dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return s.hj.call(this,h).then((function(e){var t=e.data;return null==t||t.forEach((function(e){null==e||e.reactionList.forEach((function(e){e.isAddedBySelf=e.state,delete e.state,delete e.reactionId}))})),e}))}var ne=te;function re(e){if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reaction: ".concat(e.reaction));if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u=e.cursor,d=e.pageSize,p={msgId:e.messageId,message:e.reaction,currentPage:u||null,pageSize:d||20},h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/reaction/user/").concat(this.user,"/detail"),type:"GET",data:p,dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return s.hj.call(this,h).then((function(e){return e.data.isAddedBySelf=e.data.state,delete e.data.state,delete e.data.reactionId,e}))}function ie(e){return v(this,void 0,void 0,(function(){var t,n,a,c,l,u,d,p,h,f,m;return y(this,(function(g){switch(g.label){case 0:if("string"!=typeof e.reportType||!e.reportType)throw Error("Invalid parameter reportType: ".concat(e.reportType));if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.reportReason||!e.reportReason)throw Error("Invalid parameter messageId: ".concat(e.reportReason));return r.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u=e.reportType,d=e.reportReason,p=e.messageId,h={username:this.user,reportType:u,reportReason:d},f="".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/user/").concat(this.user,"/moderation/report/message/").concat(p),m={url:f,type:"POST",data:JSON.stringify(h),dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}},[4,s.hj.call(this,m)]):(t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return g.sent(),[2]}}))}))}function oe(e){var t;return v(this,void 0,void 0,(function(){var n,a,c,l,u,p,h,f,m;return y(this,(function(g){switch(g.label){case 0:if("string"!=typeof e.targetId||""===e.targetId)throw Error('"Invalid parameter targetId": '+e.targetId);if(!["singleChat","groupChat"].includes(e.chatType))throw Error('"Invalid parameter chatType": '+e.chatType);if(e.beforeTimeStamp&&("number"!=typeof e.beforeTimeStamp||e.beforeTimeStamp<0||(null===(t=e.beforeTimeStamp)||void 0===t?void 0:t.toString().length)>18))throw Error('"Invalid parameter beforeTimeStamp": '+e.beforeTimeStamp);if(e.messageIds&&!(Array.isArray(e.messageIds)&&e.messageIds.length>0&&e.messageIds.length<=20))throw Error('"Invalid parameter messageIds": '+e.messageIds);if(!e.messageIds&&!e.beforeTimeStamp)throw Error("messageIds or beforeTimeStamp field is required.");return r.XZ.call(this)?(a=this.context,c=a.orgName,l=a.appName,u=a.userId,p="singleChat"===e.chatType?"userId":"groupId",h="singleChat"===e.chatType?"chat":"group",f=e.messageIds?"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/sdk/message/roaming/").concat(h,"/user/").concat(u,"?").concat(p,"=").concat(e.targetId,"&msgIdList=").concat(e.messageIds,"&resource=").concat(this.clientResource):"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/sdk/message/roaming/").concat(h,"/user/").concat(u,"/time?").concat(p,"=").concat(e.targetId,"&delTime=").concat(e.beforeTimeStamp,"&&resource=").concat(this.clientResource),m={url:f,dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}},d.kg.debug("Call removeHistoryMessages",e),[4,s.hj.call(this,m)]):(n=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(n)]);case 1:return g.sent(),[2]}}))}))}function se(e){var t=this;if(!r.XZ.call(this)){var n=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}if((null==e?void 0:e.pageSize)&&"number"!=typeof e.pageSize)throw Error("Invalid parameter pageSize: ".concat(e.pageSize));if((null==e?void 0:e.cursor)&&"string"!=typeof e.cursor)throw Error("Invalid parameter cursor: ".concat(e.cursor));var a=this.context,c=a.orgName,l=a.appName,u=a.accessToken,h={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/sdk/user/").concat(this.user,"/user_channels/list?"),type:"GET",dataType:"json",data:{limit:(null==e?void 0:e.pageSize)||20,cursor:(null==e?void 0:e.cursor)||""},headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return d.kg.debug("Call getServerConversations",e),new Promise((function(e,n){s.hj.call(t,h,p.fI.GET_SESSION_LIST).then((function(n){return v(t,void 0,void 0,(function(){var t,r=this;return y(this,(function(i){switch(i.label){case 0:return t=ae(n),this._localCache?[4,Promise.all(t.data.conversations.map((function(e){return v(r,void 0,void 0,(function(){var t,n,r=this;return y(this,(function(i){return null===(n=null===(t=this._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.storeMessage(e.lastMessage,f.r.SUCCESS,!0).then((function(){var t,n;null===(n=null===(t=r._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.updateLocalConversation((0,m.MQ)({conversationId:e.conversationId,conversationType:e.conversationType}),{unReadCount:e.unReadCount})})),[2]}))}))})))]:[3,2];case 1:return i.sent(),e(t),[2];case 2:return e(t),[2]}}))}))})).catch((function(e){n(e)}))}))}function ae(e){var t=e.data,n=t.cursor,r=t.channel_infos,i=[];null==r||r.forEach((function(e){var t=null;(null==e?void 0:e.meta)&&"{}"!==JSON.stringify(e.meta)&&(e.meta.payload=JSON.parse(e.meta.payload),"delivery"!==(t=(0,h.w)(e.meta)).type&&"read"!==t.type&&"channel"!==t.type&&(t.chatType=E[t.chatType]));var n={conversationId:e.session_to,conversationType:"chat"===e.session_type?"singleChat":"groupChat",isPinned:e.is_top,pinnedTime:e.is_top?e.update_top_status_time:0,unReadCount:e.unread_num,lastMessage:t};i.push(n)}));var o={conversations:i,cursor:n||""};return{type:e.type,data:o}}function ce(e){if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}if((null==e?void 0:e.pageSize)&&"number"!=typeof e.pageSize)throw Error("Invalid parameter pageSize: ".concat(e.pageSize));if((null==e?void 0:e.cursor)&&"string"!=typeof e.cursor)throw Error("Invalid parameter cursor: ".concat(e.cursor));var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/sdk/user/").concat(this.user,"/user_channels/list?"),type:"GET",dataType:"json",data:{limit:(null==e?void 0:e.pageSize)||20,cursor:(null==e?void 0:e.cursor)||"",is_top:!0},headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return d.kg.debug("Call getServerConversations",e),s.hj.call(this,u,p.fI.GET_SESSION_LIST).then((function(e){return ae(e)}))}function le(e){return v(this,void 0,void 0,(function(){var t,n,a,c,l,u,h,f,m,g,v,E,_,b;return y(this,(function(y){if(!r.XZ.call(this))return t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)];if(n=e.conversationId,a=e.conversationType,c=e.isPinned,l="singleChat"===a?"chat":"groupChat","string"!=typeof n||""===n)throw Error("Invalid parameter conversationId: ".concat(n));if(!["singleChat","groupChat"].includes(a))throw Error("Invalid parameter conversationType: ".concat(a));if("boolean"!=typeof c)throw Error("Invalid parameter isPinned: ".concat(c));return u=this.context,h=u.orgName,f=u.appName,m=u.accessToken,g=u.jid,v={type:l,to:n},E=c?"":"type=".concat(l,"&to=").concat(n,"&"),_="".concat(this.apiUrl,"/").concat(h,"/").concat(f,"/sdk/user/").concat(this.user,"/user_channel/top?").concat(E,"resource=").concat(g.clientResource),b={url:_,type:c?"POST":"DELETE",dataType:"json",headers:{Authorization:"Bearer "+m,"Content-Type":"application/json"}},c&&(b.data=JSON.stringify(v)),d.kg.debug("Call pinConversation",e),[2,s.hj.call(this,b,p.fI.PIN_CONVERSATION).then((function(e){var t=e.type,n=e.data;return{type:t,data:{isPinned:n.is_top||!1,pinnedTime:n.is_top?n.update_top_status_time:0}}}))]}))}))}},3770:function(e,t,n){"use strict";n.r(t),n.d(t,{getPresenceStatus:function(){return m},getSubscribedPresenceList:function(){return h},getSubscribedPresencelist:function(){return f},publishPresence:function(){return u},subscribePresence:function(){return d},unsubscribePresence:function(){return p}}),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(2222),n(9753);var r=n(4370),i=n(3246),o=n(7252),s=n(5531),a=n(7360),c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function u(e){return c(this,void 0,void 0,(function(){var t,n,c,u,d,p,h,f,m;return l(this,(function(l){switch(l.label){case 0:if("string"!=typeof e.description)throw Error('Invalid parameter: "description"');return i.XZ.call(this)?(n=this.context,c=n.accessToken,u=n.orgName,d=n.appName,p=n.userId,h=this.context.jid.clientResource,f={ext:e.description},m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(d,"/users/").concat(p,"/presence/").concat(h,"/1"),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error},a.kg.debug("Call publishPresence:",e),[4,r.hj.call(this,m)]):(t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function d(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');if("number"!=typeof e.expiry)throw Error('Invalid parameter: "expiry"');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,u=n.userId,d=n.accessToken,p={usernames:e.usernames},h={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/users/").concat(u,"/presence/").concat(e.expiry),type:"POST",dataType:"json",data:JSON.stringify(p),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call subscribePresence:",e),r.hj.call(this,h).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}function p(e){return c(this,void 0,void 0,(function(){var t,n,c,u,d,p,h;return l(this,(function(l){switch(l.label){case 0:if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');return i.XZ.call(this)?(n=this.context,c=n.orgName,u=n.appName,d=n.userId,p=n.accessToken,h={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/users/").concat(d,"/presence"),type:"DELETE",dataType:"json",data:JSON.stringify(e.usernames),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error},a.kg.debug("Call unsubscribePresence:",e),[4,r.hj.call(this,h)]):(t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function h(e){if("number"!=typeof e.pageNum||"number"!=typeof e.pageSize)throw Error('Invalid parameter: "pageNum or pageSize"');if(e.pageNum<0||e.pageSize<0)throw Error('"pageNum" should >= 0 and "pageSize" should >= 0');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,u=n.userId,d=n.accessToken,p={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/users/").concat(u,"/presence/sublist?pageNum=").concat(e.pageNum,"&pageSize=").concat(e.pageSize),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getSubscribedPresenceList:",e),r.hj.call(this,p).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}var f=h;function m(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={usernames:e.usernames},c=this.context,l=c.orgName,u=c.appName,d=c.userId,p=c.accessToken,h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/users/").concat(d,"/presence"),type:"POST",dataType:"json",data:JSON.stringify(n),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getPresenceStatus:",e),r.hj.call(this,h).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}},1735:function(e,t,n){"use strict";n.r(t),n.d(t,{clearRemindTypeForConversation:function(){return d},getPushPerformLanguage:function(){return m},getSilentModeForAll:function(){return l},getSilentModeForConversation:function(){return p},getSilentModeForConversations:function(){return h},setPushPerformLanguage:function(){return f},setSilentModeForAll:function(){return c},setSilentModeForConversation:function(){return u}}),n(7941),n(1539),n(8674),n(2222),n(9753),n(9554),n(4747),n(9600);var r=n(4370),i=n(3246),o=n(7252),s=n(5531),a=n(7360);function c(e){if(!(e.options instanceof Object))throw Error('Invalid parameter: "options"');var t=e.options.paramType;if("number"!=typeof t||t<0||t>2)throw Error('Invalid parameter: "options of paramType"');if(0===t){if("string"!=typeof e.options.remindType)throw Error('Invalid parameter: "options of remindType"')}else if(1===t){if("number"!=typeof e.options.duration)throw Error('Invalid parameter: "options of duration"')}else if(2===t){var n=e.options,c=n.startTime,l=n.endTime;if(!(c instanceof Object&&Object.keys(c).length))throw Error('Invalid parameter: "options of startTime"');if(!c.hours||"number"!=typeof c.hours||!c.minutes||"number"!=typeof c.minutes)throw Error('Invalid parameter: "options of startTime of hours or minutes"');if(!(l instanceof Object&&Object.keys(l).length))throw Error('Invalid parameter: "options of endTime"');if(!l.hours||"number"!=typeof l.hours||!l.minutes||"number"!=typeof l.minutes)throw Error('Invalid parameter: "options of endTime of hours or minutes"')}if(!i.XZ.call(this)){var u=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(u)}var d=this.context,p=d.accessToken,h=d.orgName,f=d.appName,m=d.userId,g={};switch(t){case 0:g={type:e.options.remindType};break;case 1:g={ignoreDuration:e.options.duration};break;case 2:var v=e.options;c=v.startTime,l=v.endTime,g={ignoreInterval:"".concat(c.hours,":").concat(c.minutes,"-").concat(l.hours,":").concat(l.minutes)}}var y={url:"".concat(this.apiUrl,"/").concat(h,"/").concat(f,"/users/").concat(m,"/notification/user/").concat(m),type:"PUT",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setSilentModeForAll:",e),r.hj.call(this,y)}function l(e){if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,u=n.appName,d=n.userId,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/users/").concat(d,"/notification/user/").concat(d),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:null==e?void 0:e.success,error:null==e?void 0:e.error};return a.kg.debug("Call getSilentModeForAll:",e),r.hj.call(this,p)}function u(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!(e.options instanceof Object))throw Error('Invalid parameter: "options"');var t=e.options.paramType;if("number"!=typeof t||t<0||t>2)throw Error('Invalid parameter: "options of paramType"');if(0===t){if("string"!=typeof e.options.remindType)throw Error('Invalid parameter: "options of remindType"')}else if(1===t){if("number"!=typeof e.options.duration)throw Error('Invalid parameter: "options of duration"')}else if(2===t){var n=e.options,c=n.startTime,l=n.endTime;if(!(c instanceof Object&&Object.keys(c).length))throw Error('Invalid parameter: "options of startTime"');if(!c.hours||"number"!=typeof c.hours||!c.minutes||"number"!=typeof c.minutes)throw Error('Invalid parameter: "options of startTime of hours or minutes"');if(!(l instanceof Object&&Object.keys(l).length))throw Error('Invalid parameter: "options of endTime"');if(!l.hours||"number"!=typeof l.hours||!l.minutes||"number"!=typeof l.minutes)throw Error('Invalid parameter: "options of endTime of hours or minutes"')}if(!i.XZ.call(this)){var u=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(u)}var d=this.context,p=d.accessToken,h=d.orgName,f=d.appName,m=d.userId,g="chatgroup",v={};switch(t){case 0:v={type:e.options.remindType};break;case 1:v={ignoreDuration:e.options.duration};break;case 2:var y=e.options;c=y.startTime,l=y.endTime,v={ignoreInterval:"".concat(c.hours,":").concat(c.minutes,"-").concat(l.hours,":").concat(l.minutes)}}"singleChat"===e.type&&(g="user");var E={url:"".concat(this.apiUrl,"/").concat(h,"/").concat(f,"/users/").concat(m,"/notification/").concat(g,"/").concat(e.conversationId),type:"PUT",dataType:"json",data:JSON.stringify(v),headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setSilentModeForConversation:",e),r.hj.call(this,E)}function d(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,u=n.appName,d=n.userId,p="chatgroup";"singleChat"===e.type&&(p="user");var h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/users/").concat(d,"/notification/").concat(p,"/").concat(e.conversationId),type:"PUT",dataType:"json",data:JSON.stringify({type:"DEFAULT"}),headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call clearRemindTypeForConversation:",e),r.hj.call(this,h)}function p(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,u=n.appName,d=n.userId,p="chatgroup";"singleChat"===e.type&&(p="user");var h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/users/").concat(d,"/notification/").concat(p,"/").concat(e.conversationId),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getSilentModeForConversation:",e),r.hj.call(this,h)}function h(e){if(!Array.isArray(e.conversationList))throw Error('Invalid parameter: "conversationList"');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,u=n.appName,d=n.userId,p=[],h=[];e.conversationList.forEach((function(e){"singleChat"===e.type?p.push(e.id):h.push(e.id)}));var f=p.length?p.join(","):"",m=h.length?h.join(","):"",g={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/users/").concat(d,"/notification?user=").concat(f,"&group=").concat(m),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getSilentModeForConversations:",e),r.hj.call(this,g)}function f(e){if("string"!=typeof e.language||!e.language)throw Error('Invalid parameter: "language"');if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={translationLanguage:e.language},c=this.context,l=c.accessToken,u=c.orgName,d=c.appName,p=c.userId,h={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(d,"/users/").concat(p,"/notification/language"),type:"PUT",dataType:"json",data:JSON.stringify(n),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setPushPerformLanguage:",e),r.hj.call(this,h)}function m(e){if(!i.XZ.call(this)){var t=o.Z.create({type:s.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,u=n.appName,d=n.userId,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(u,"/users/").concat(d,"/notification/language"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:null==e?void 0:e.success,error:null==e?void 0:e.error};return a.kg.debug("Call getPushPerformLanguage:",e),r.hj.call(this,p)}},7384:function(e,t,n){"use strict";n.r(t),n.d(t,{changeChatThreadName:function(){return f},createChatThread:function(){return u},destroyChatThread:function(){return h},getChatThreadDetail:function(){return _},getChatThreadLastMessage:function(){return E},getChatThreadMembers:function(){return m},getChatThreads:function(){return y},getJoinedChatThreads:function(){return v},joinChatThread:function(){return d},leaveChatThread:function(){return p},removeChatThreadMember:function(){return g}}),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(8309),n(2222),n(9554),n(4747),n(9753);var r=n(5531),i=n(7252),o=n(4370),s=n(3246),a=n(4363),c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function u(e){if("string"!=typeof e.name||""===e.name)throw Error("Invalid parameter name: ".concat(e.name));if("string"!=typeof e.messageId||""===e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.parentId||""===e.parentId)throw Error("Invalid parameter parentId: ".concat(e.parentId));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u=n.jid,d={name:e.name,msg_id:e.messageId,group_id:e.parentId,owner:this.user},p={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread?resource=").concat(u.clientResource),type:"POST",dataType:"json",data:JSON.stringify(d),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,p).then((function(e){var t=e.data.thread_id;return e.data={chatThreadId:t},e}))}function d(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u=n.jid,d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"/user/").concat(this.user,"/join?resource=").concat(u.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,d).then((function(e){var t=e.data.detail;return t.messageId=t.msgId,t.parentId=t.groupId,delete t.msgId,delete t.groupId,e}))}function p(e){return c(this,void 0,void 0,(function(){var t,n,a,c,u,d,p;return l(this,(function(l){switch(l.label){case 0:if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));return s.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,u=n.accessToken,d=n.jid,p={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"/user/").concat(this.user,"/quit?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},[4,o.hj.call(this,p)]):(t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function h(e){return c(this,void 0,void 0,(function(){var t,n,a,c,u,d,p;return l(this,(function(l){switch(l.label){case 0:if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));return s.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,u=n.accessToken,d=n.jid,p={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},[4,o.hj.call(this,p)]):(t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function f(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if("string"!=typeof e.name||""===e.name)throw Error("Invalid parameter name: ".concat(e.name));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u=n.jid,d={name:e.name},p={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"?resource=").concat(u.clientResource),type:"PUT",dataType:"json",data:JSON.stringify(d),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,p)}function m(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u={limit:e.pageSize||20,cursor:e.cursor||""},d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"/users"),type:"GET",dataType:"json",data:u,headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,d)}function g(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if("string"!=typeof e.username||""===e.username)throw Error("Invalid parameter username: ".concat(e.username));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u=n.jid,d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"/users/").concat(e.username,"?resource=").concat(u.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,d)}function v(e){if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u={limit:e.pageSize||20,cursor:e.cursor||""},d={url:e.parentId?"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/threads/chatgroups/").concat(e.parentId,"/user/").concat(this.user):"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/threads/user/").concat(this.user),type:"GET",dataType:"json",data:u,headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,d).then((function(e){var t=e.entities;return null==t||t.forEach((function(e){e.parentId=e.groupId,e.messageId=e.msgId,delete e.groupId,delete e.msgId})),e}))}function y(e){if("string"!=typeof e.parentId||""===e.parentId)throw Error("Invalid parameter parentId: ".concat(e.parentId));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u={cursor:e.cursor||"",limit:e.pageSize||20},d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/threads/chatgroups/").concat(e.parentId),type:"GET",dataType:"json",data:u,headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,d).then((function(e){var t=e.entities;return null==t||t.forEach((function(e){e.parentId=e.groupId,e.messageId=e.msgId,delete e.groupId,delete e.msgId})),e}))}function E(e){if(!Array.isArray(e.chatThreadIds))throw Error("Invalid parameter chatThreadIds: ".concat(e.chatThreadIds));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,u=n.accessToken,d={threadIds:e.chatThreadIds},p={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/thread/message"),type:"POST",dataType:"json",data:JSON.stringify(d),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return o.hj.call(this,p).then((function(e){return function(e){var t=e.entities;return null==t||t.forEach((function(e){e.chatThreadId=e.thread_id,e.last_message&&"{}"!==JSON.stringify(e.last_message)?e.lastMessage=(0,a.w)(e.last_message):e.lastMessage=e.last_message,delete e.thread_id,delete e.last_message})),e}(e)}))}function _(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!s.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,u).then((function(e){return e.data.affiliationsCount=e.data.affiliations_count,e.data.messageId=e.data.msgId,e.data.parentId=e.data.groupId,delete e.data.affiliations_count,delete e.data.msgId,delete e.data.groupId,e}))}},70:function(e,t,n){"use strict";n.r(t),n.d(t,{getSupportedLanguages:function(){return c},translateMessage:function(){return l}}),n(1539),n(8674),n(2222),n(9753);var r=n(3246),i=n(5531),o=n(7252),s=n(7360),a=n(4370);function c(){if(!r.XZ.call(this)){var e=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(e)}var t=this.context,n=t.orgName,c=t.appName,l=t.accessToken,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(c,"/users/").concat(this.user,"/translate/support/language"),dataType:"json",type:"GET",headers:{Authorization:"Bearer "+l}};return s.kg.debug("Call getSupportedLanguages"),a.hj.call(this,u)}function l(e){if("string"!=typeof e.text||""===e.text)throw Error('Invalid parameter: "text"');if(!Array.isArray(e.languages))throw Error('Invalid parameter: "language"');if(!r.XZ.call(this)){var t=o.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,u=n.accessToken,d="".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/users/").concat(this.user,"/translate"),p={text:e.text,to:e.languages},h={url:d,dataType:"json",type:"POST",data:JSON.stringify(p),headers:{Authorization:"Bearer "+u}};return s.kg.debug("Call translateMessage"),a.hj.call(this,h)}},3246:function(e,t,n){"use strict";n.d(t,{H7:function(){return l},XZ:function(){return a},_W:function(){return c}}),n(7941),n(9554),n(1539),n(4747),n(6699),n(2023);var r=n(5531),i=n(7252);function o(){var e=this.context.appName,t=this.context.orgName;return!(!e||!t)||(this.onError&&this.onError({type:r.E.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"}),!1)}function s(){var e;if(!this.context.accessToken){var t=i.Z.create({type:r.E.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"});return this.onError&&this.onError(t),null===(e=this.eventHandler)||void 0===e||e.dispatch("onError",t),!1}return!0}function a(){return s.call(this)&&o.call(this)}function c(e){var t=e.data,n=e.type;return{data:{status:Object.keys(t.errorKeys).length>0?"fail":"success",errorKeys:t.errorKeys,successKeys:t.successKeys},type:n}}function l(e){var t=e.data,n=void 0;return Object.keys(t.errorKeys).length>0&&Object.keys(t.errorKeys).forEach((function(e){var o=t.errorKeys[e];n=o.includes("is not part of you")?i.Z.create({type:r.E.NO_PERMISSION,message:o}):o.includes("size of metadata for this single chatroom exceeds the user defined limit")||o.includes("total size of chatroom metadata for this app exceeds the user defined limit")||o.includes("is exceeding maximum limit")?i.Z.create({type:r.E.MAX_LIMIT,message:o}):o.includes("is not Legal")?i.Z.create({type:r.E.REQUEST_PARAMETER_ERROR,message:o}):o.includes("Failed to update userMetadata. Concurrent updates not allowed")?i.Z.create({type:r.E.OPERATION_NOT_ALLOWED,message:o}):i.Z.create({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,message:o})})),n}},2071:function(e,t,n){"use strict";n.d(t,{$x:function(){return a},F3:function(){return c},Nl:function(){return i},TJ:function(){return o},Tp:function(){return d},Wc:function(){return r},el:function(){return s},iB:function(){return l},yK:function(){return u}}),n(6992),n(1532),n(1539),n(8783),n(3948);var r=7,i=new Map,o=new Map,s="im",a="32f24ab2ddb74f508aa9286c356cec84",c=1e3,l={INIT:9674,API:9675},u="direct",d=-1},1595:function(e,t,n){"use strict";var r,i,o,s,a,c;n.d(t,{C8:function(){return r},aC:function(){return c},c:function(){return o},dd:function(){return a},fI:function(){return i},td:function(){return s}}),function(e){e[e.UNKNOWOPERATION=-1]="UNKNOWOPERATION",e[e.REST_GET_SESSION_LIST=1]="REST_GET_SESSION_LIST",e[e.REST_DEL_SESSION=2]="REST_DEL_SESSION",e[e.REST_GET_HISTORY_MESSAGE=3]="REST_GET_HISTORY_MESSAGE",e[e.REST_PIN_CONVERSATION=4]="REST_PIN_CONVERSATION",e[e.REST_OPERATE=10]="REST_OPERATE",e[e.MSYNC_SENDMESSAGE=11]="MSYNC_SENDMESSAGE",e[e.MSYNC_RECALLMESSAGE=12]="MSYNC_RECALLMESSAGE",e[e.MSYNC_MODIFYMESSAGE=13]="MSYNC_MODIFYMESSAGE",e[e.MSYNC_OPERATE=20]="MSYNC_OPERATE",e[e.ROSTER_ADD=21]="ROSTER_ADD",e[e.ROSTER_REMOVE=22]="ROSTER_REMOVE",e[e.ROSTER_ACCEPT=23]="ROSTER_ACCEPT",e[e.ROSTER_DECLINE=24]="ROSTER_DECLINE",e[e.ROSTER_BAN=25]="ROSTER_BAN",e[e.ROSTER_ALLOW=26]="ROSTER_ALLOW",e[e.ROSTER_BLACKLIST=27]="ROSTER_BLACKLIST",e[e.ROSTER_CONTACTS=28]="ROSTER_CONTACTS",e[e.ROSTER_OPERATE=30]="ROSTER_OPERATE",e[e.USER_LOGIN=31]="USER_LOGIN",e[e.USER_CREATE=32]="USER_CREATE",e[e.USER_UPDATE_USERINFO=33]="USER_UPDATE_USERINFO",e[e.USER_FETCH_USERINFO=34]="USER_FETCH_USERINFO",e[e.USER_UPDATE_NICK=35]="USER_UPDATE_NICK",e[e.USER_UPLOAD_PUSH_TOKEN=36]="USER_UPLOAD_PUSH_TOKEN",e[e.USER_OPERATE=40]="USER_OPERATE",e[e.GROUP_CREATEGROUP=41]="GROUP_CREATEGROUP",e[e.GROUP_BLOCK_MESSAGE=42]="GROUP_BLOCK_MESSAGE",e[e.GROUP_FETCH_PUBLICGROUPS_WITHCURSOR=43]="GROUP_FETCH_PUBLICGROUPS_WITHCURSOR",e[e.GROUP_FETCH_USERS_GROUP=44]="GROUP_FETCH_USERS_GROUP",e[e.GROUP_CHANGE_OWNER=45]="GROUP_CHANGE_OWNER",e[e.GROUP_FETCH_SPECIFICATION=46]="GROUP_FETCH_SPECIFICATION",e[e.GROUP_CHANGE_GROUPATTRIBUTE=47]="GROUP_CHANGE_GROUPATTRIBUTE",e[e.GROUP_FETCH_MEMEBERS=48]="GROUP_FETCH_MEMEBERS",e[e.GROUP_GET_ADMIN=49]="GROUP_GET_ADMIN",e[e.GROUP_SET_ADMIN=50]="GROUP_SET_ADMIN",e[e.GROUP_REMOVE_ADMIN=51]="GROUP_REMOVE_ADMIN",e[e.GROUP_DESTOTYGROUP=52]="GROUP_DESTOTYGROUP",e[e.GROUP_LEAVEGROUP=53]="GROUP_LEAVEGROUP",e[e.GROUP_INVITE_TO_GROUP=54]="GROUP_INVITE_TO_GROUP",e[e.GROUP_JOIN_PUBLICGROUP=55]="GROUP_JOIN_PUBLICGROUP",e[e.GROUP_ACCEPT_JOINPUBLICGROUPAPPL=56]="GROUP_ACCEPT_JOINPUBLICGROUPAPPL",e[e.GROUP_DECLINE_JOINPUBLICGROUPAPPL=57]="GROUP_DECLINE_JOINPUBLICGROUPAPPL",e[e.GROUP_ACCEPT_INVITATION=58]="GROUP_ACCEPT_INVITATION",e[e.GROUP_DECLINE_INVITATION=59]="GROUP_DECLINE_INVITATION",e[e.GROUP_REMOVE_MEMBER=60]="GROUP_REMOVE_MEMBER",e[e.GROUP_REMOVE_MEMBERS=61]="GROUP_REMOVE_MEMBERS",e[e.GROUP_MUTE_MEMBERS=62]="GROUP_MUTE_MEMBERS",e[e.GROUP_UNMUTE_MEMBERS=63]="GROUP_UNMUTE_MEMBERS",e[e.GROUP_FETCH_MUTES=64]="GROUP_FETCH_MUTES",e[e.GROUP_BLOCK_MEMBER=65]="GROUP_BLOCK_MEMBER",e[e.GROUP_BLOCK_MEMBERS=66]="GROUP_BLOCK_MEMBERS",e[e.GROUP_UNBLOCK_MEMBER=67]="GROUP_UNBLOCK_MEMBER",e[e.GROUP_UNBLOCK_MEMBERS=68]="GROUP_UNBLOCK_MEMBERS",e[e.GROUP_GET_BLOCK_LIST=69]="GROUP_GET_BLOCK_LIST",e[e.GROUP_MUTE_ALLMEMBERS=70]="GROUP_MUTE_ALLMEMBERS",e[e.GROUP_UNMUTE_ALLMEMBERS=71]="GROUP_UNMUTE_ALLMEMBERS",e[e.GROUP_ADD_WHITELIST=72]="GROUP_ADD_WHITELIST",e[e.GROUP_REMOVE_WHITELIST=73]="GROUP_REMOVE_WHITELIST",e[e.GROUP_FETCH_WHITELIST=74]="GROUP_FETCH_WHITELIST",e[e.GROUP_IS_IN_WHITELIST=75]="GROUP_IS_IN_WHITELIST",e[e.GROUP_GET_READ_USERS=76]="GROUP_GET_READ_USERS",e[e.GROUP_FETCH_ANNOUNCEMENT=77]="GROUP_FETCH_ANNOUNCEMENT",e[e.GROUP_UPDATE_ANNOUNCEMENT=78]="GROUP_UPDATE_ANNOUNCEMENT",e[e.GROUP_UPLOAD_SHAREDFILE=79]="GROUP_UPLOAD_SHAREDFILE",e[e.GROUP_DELETE_SHAREDFILE=80]="GROUP_DELETE_SHAREDFILE",e[e.GROUP_FETCH_SHAREDFILE=81]="GROUP_FETCH_SHAREDFILE",e[e.GROUP_DOWNLOAD_SHAREDFILE=82]="GROUP_DOWNLOAD_SHAREDFILE",e[e.GROUP_MEMBER_SET_META_DATA=83]="GROUP_MEMBER_SET_META_DATA",e[e.GROUP_MEMBER_FETCH_META_DATA=84]="GROUP_MEMBER_FETCH_META_DATA",e[e.GROUP_OPERATE=100]="GROUP_OPERATE",e[e.CHATROOM_FETCH_CHATROOMSWITHPAGE=101]="CHATROOM_FETCH_CHATROOMSWITHPAGE",e[e.CHATROOM_CREATECHATROOM=102]="CHATROOM_CREATECHATROOM",e[e.CHATROOM_DESTORYCHATROOM=103]="CHATROOM_DESTORYCHATROOM",e[e.CHATROOM_FETCH_SPECIFICATION=104]="CHATROOM_FETCH_SPECIFICATION",e[e.CHATROOM_CHANGE_ATTRIBUTE=105]="CHATROOM_CHANGE_ATTRIBUTE",e[e.CHATROOM_REMOVE_MEMBER=106]="CHATROOM_REMOVE_MEMBER",e[e.CHATROOM_REMOVE_MEMBERS=107]="CHATROOM_REMOVE_MEMBERS",e[e.CHATROOM_ADD_MEMBERS=108]="CHATROOM_ADD_MEMBERS",e[e.CHATROOM_JOINCAHTROOM=109]="CHATROOM_JOINCAHTROOM",e[e.CHATROOM_LEAVECAHTROOM=110]="CHATROOM_LEAVECAHTROOM",e[e.CHATROOM_FETCH_MEMBERS=111]="CHATROOM_FETCH_MEMBERS",e[e.CHATROOM_GET_ADMIN=112]="CHATROOM_GET_ADMIN",e[e.CHATROOM_SET_ADMIN=113]="CHATROOM_SET_ADMIN",e[e.CHATROOM_REMOVE_ADMIN=114]="CHATROOM_REMOVE_ADMIN",e[e.CHATROOM_MUTE_USER=115]="CHATROOM_MUTE_USER",e[e.CHATROOM_UNMUTE_USER=116]="CHATROOM_UNMUTE_USER",e[e.CHATROOM_FETCH_MUTES=117]="CHATROOM_FETCH_MUTES",e[e.CHATROOM_BLOCK_USER=118]="CHATROOM_BLOCK_USER",e[e.CHATROOM_BLOCK_USERS=119]="CHATROOM_BLOCK_USERS",e[e.CHATROOM_UNBLOCK_USER=120]="CHATROOM_UNBLOCK_USER",e[e.CHATROOM_UNBLOCK_USERS=121]="CHATROOM_UNBLOCK_USERS",e[e.CHATROOM_FETCH_BANS=122]="CHATROOM_FETCH_BANS",e[e.CHATROOM_MUTE_ALLMEMEBERS=123]="CHATROOM_MUTE_ALLMEMEBERS",e[e.CHATROOM_UNMUTE_ALLMEMEBERS=124]="CHATROOM_UNMUTE_ALLMEMEBERS",e[e.CHATROOM_ADD_WHITELIST=125]="CHATROOM_ADD_WHITELIST",e[e.CHATROOM_REMOVE_WHITELIST=126]="CHATROOM_REMOVE_WHITELIST",e[e.CHATROOM_FETCH_WHITELIST=127]="CHATROOM_FETCH_WHITELIST",e[e.CHATROOM_FETCH_MEMBERIN_WHITELIST=128]="CHATROOM_FETCH_MEMBERIN_WHITELIST",e[e.CHATROOM_FETCH_ANNOUNCEMENT=129]="CHATROOM_FETCH_ANNOUNCEMENT",e[e.CHATROOM_UPDATE_ANNOUNCEMENT=130]="CHATROOM_UPDATE_ANNOUNCEMENT",e[e.CHATROOM_REMOVE_SHARE_FILE=131]="CHATROOM_REMOVE_SHARE_FILE",e[e.CHATROOM_GET_SHARE_FILE_LIST=132]="CHATROOM_GET_SHARE_FILE_LIST",e[e.CHATROOM_UPLOAD_FILE=133]="CHATROOM_UPLOAD_FILE",e[e.CHATROOM_SET_META_DATA=134]="CHATROOM_SET_META_DATA",e[e.CHATROOM_DELETE_META_DATA=135]="CHATROOM_DELETE_META_DATA",e[e.CHATROOM_FETCH_META_DATA=136]="CHATROOM_FETCH_META_DATA",e[e.CHATROOM_OPERATE=150]="CHATROOM_OPERATE"}(r||(r={})),function(e){e.SDK_INTERNAL="SDK_INTERNAL",e.LOGIN="USER_LOGIN",e.REGISTER="USER_CREATE",e.GET_CHATROOM_LIST="CHATROOM_FETCH_CHATROOMSWITHPAGE",e.CREATE_CHATROOM="CHATROOM_CREATECHATROOM",e.DESTROY_CHATROOM="CHATROOM_DESTORYCHATROOM",e.GET_CHATROOM_DETAIL="CHATROOM_FETCH_SPECIFICATION",e.MODIFY_CHATROOM="CHATROOM_CHANGE_ATTRIBUTE",e.REMOVE_CHATROOM_MEMBER="CHATROOM_REMOVE_MEMBER",e.MULTI_REMOVE_CHATROOM_MEMBER="CHATROOM_REMOVE_MEMBERS",e.ADD_USERS_TO_CHATROOM="CHATROOM_ADD_MEMBERS",e.JOIN_CHATROOM="CHATROOM_JOINCAHTROOM",e.QUIT_CHATROOM="CHATROOM_LEAVECAHTROOM",e.LIST_CHATROOM_MEMBERS="CHATROOM_FETCH_MEMBERS",e.GET_CHATROOM_ADMIN="CHATROOM_GET_ADMIN",e.SET_CHATROOM_ADMIN="CHATROOM_SET_ADMIN",e.REMOVE_CHATROOM_ADMIN="CHATROOM_REMOVE_ADMIN",e.MUTE_CHATROOM_MEMBER="CHATROOM_MUTE_USER",e.REMOVE_MUTE_CHATROOM_MEMBER="CHATROOM_UNMUTE_USER",e.GET_MUTE_CHATROOM_MEMBERS="CHATROOM_FETCH_MUTES",e.SET_CHATROOM_MEMBER_TO_BLACK="CHATROOM_BLOCK_USER",e.MULTI_SET_CHATROOM_MEMBER_TO_BLACK="CHATROOM_BLOCK_USERS",e.REMOVE_CHATROOM_MEMBER_BLACK="CHATROOM_UNBLOCK_USER",e.MULTI_REMOVE_CHATROOM_MEMBER_BLACK="CHATROOM_UNBLOCK_USERS",e.GET_CHATROOM_BLOCK_MEMBERS="CHATROOM_FETCH_BANS",e.DISABLED_CHATROOM_SEND_MSG="CHATROOM_MUTE_ALLMEMEBERS",e.ENABLE_CHATROOM_SEND_MSG="CHATROOM_UNMUTE_ALLMEMEBERS",e.ADD_CHATROOM_WHITE_USERS="CHATROOM_ADD_WHITELIST",e.REMOVE_CHATROOM_WHITE_USERS="CHATROOM_REMOVE_WHITELIST",e.GET_CHATROOM_WHITE_USERS="CHATROOM_FETCH_WHITELIST",e.CHECK_CHATROOM_WHITE_USER="CHATROOM_FETCH_MEMBERIN_WHITELIST",e.GET_CHATROOM_ANN="CHATROOM_FETCH_ANNOUNCEMENT",e.UPDATE_CHATROOM_ANN="CHATROOM_UPDATE_ANNOUNCEMENT",e.DELETE_CHATROOM_FILE="CHATROOM_REMOVE_SHARE_FILE",e.GET_CHATROOM_FILES="CHATROOM_GET_SHARE_FILE_LIST",e.UPLOAD_CHATROOM_FILE="CHATROOM_UPLOAD_FILE",e.SET_CHATROOM_ATTR="CHATROOM_SET_META_DATA",e.DELETE_CHATROOM_ATTR="CHATROOM_DELETE_META_DATA",e.GET_CHATROOM_ATTR="CHATROOM_FETCH_META_DATA",e.CREATE_GROUP="GROUP_CREATEGROUP",e.BLOCK_GROUP="GROUP_BLOCK_MESSAGE",e.LIST_GROUP="GROUP_FETCH_PUBLICGROUPS_WITHCURSOR",e.GET_USER_GROUP="GROUP_FETCH_USERS_GROUP",e.CHANGE_OWNER="GROUP_CHANGE_OWNER",e.GET_GROUP_INFO="GROUP_FETCH_SPECIFICATION",e.MODIFY_GROUP="GROUP_CHANGE_GROUPATTRIBUTE",e.LIST_GROUP_MEMBER="GROUP_FETCH_MEMEBERS",e.GET_GROUP_ADMIN="GROUP_GET_ADMIN",e.SET_GROUP_ADMIN="GROUP_SET_ADMIN",e.REMOVE_GROUP_ADMIN="GROUP_REMOVE_ADMIN",e.DISSOLVE_GROUP="GROUP_DESTOTYGROUP",e.QUIT_GROUP="GROUP_LEAVEGROUP",e.INVITE_TO_GROUP="GROUP_INVITE_TO_GROUP",e.JOIN_GROUP="GROUP_JOIN_PUBLICGROUP",e.AGREE_JOIN_GROUP="GROUP_ACCEPT_JOINPUBLICGROUPAPPL",e.REJECT_JOIN_GROUP="GROUP_DECLINE_JOINPUBLICGROUPAPPL",e.AGREE_INVITE_GROUP="GROUP_ACCEPT_INVITATION",e.REJECT_INVITE_GROUP="GROUP_DECLINE_INVITATION",e.REMOVE_GROUP_MEMBER="GROUP_REMOVE_MEMBER",e.MULTI_REMOVE_GROUP_MEMBER="GROUP_REMOVE_MEMBERS",e.MUTE_GROUP_MEMBER="GROUP_MUTE_MEMBERS",e.UNMUTE_GROUP_MEMBER="GROUP_UNMUTE_MEMBERS",e.GET_GROUP_MUTE_LIST="GROUP_FETCH_MUTES",e.BLOCK_GROUP_MEMBER="GROUP_BLOCK_MEMBER",e.BLOCK_GROUP_MEMBERS="GROUP_BLOCK_MEMBERS",e.UNBLOCK_GROUP_MEMBER="GROUP_UNBLOCK_MEMBER",e.UNBLOCK_GROUP_MEMBERS="GROUP_UNBLOCK_MEMBERS",e.GET_GROUP_BLACK_LIST="GROUP_GET_BLOCK_LIST",e.DISABLED_SEND_GROUP_MSG="GROUP_MUTE_ALLMEMBERS",e.ENABLE_SEND_GROUP_MSG="GROUP_UNMUTE_ALLMEMBERS",e.ADD_USERS_TO_GROUP_WHITE="GROUP_ADD_WHITELIST",e.REMOVE_GROUP_WHITE_MEMBER="GROUP_REMOVE_WHITELIST",e.GET_GROUP_WHITE_LIST="GROUP_FETCH_WHITELIST",e.IS_IN_GROUP_WHITE_LIST="GROUP_IS_IN_WHITELIST",e.GET_GROUP_MSG_READ_USER="GROUP_GET_READ_USERS",e.GET_GROUP_ANN="GROUP_FETCH_ANNOUNCEMENT",e.UPDATE_GROUP_ANN="GROUP_UPDATE_ANNOUNCEMENT",e.UPLOAD_GROUP_FILE="GROUP_UPLOAD_SHAREDFILE",e.DELETE_GROUP_FILE="GROUP_DELETE_SHAREDFILE",e.GET_GROUP_FILE_LIST="GROUP_FETCH_SHAREDFILE",e.DOWN_GROUP_FILE="GROUP_DOWNLOAD_SHAREDFILE",e.SET_GROUP_MEMBER_ATTRS="GROUP_MEMBER_SET_META_DATA",e.GET_GROUP_MEMBER_ATTR="GROUP_MEMBER_FETCH_META_DATA",e.GET_SESSION_LIST="REST_GET_SESSION_LIST",e.DELETE_SESSION="REST_DEL_SESSION",e.GET_HISTORY_MSG="REST_GET_HISTORY_MESSAGE",e.PIN_CONVERSATION="REST_PIN_CONVERSATION",e.UPDATE_USER_INFO="USER_UPDATE_USERINFO",e.GET_USER_INFO="USER_FETCH_USERINFO",e.UPDATE_USER_NICK="USER_UPDATE_NICK",e.UPLOAD_PUSH_TOKEN="USER_UPLOAD_PUSH_TOKEN",e.GET_BLACK_LIST="ROSTER_BLACKLIST",e.GET_CONTACTS="ROSTER_CONTACTS",e.add="ROSTER_ADD",e.remove="ROSTER_REMOVE",e.accept="ROSTER_ACCEPT",e.decline="ROSTER_DECLINE",e.ban="ROSTER_BAN",e.allow="ROSTER_ALLOW",e.SEND_MSG="MSYNC_SENDMESSAGE",e.UPLOAD_MSG_ATTACH="UPLOAD_MSG_ATTACH",e.SEND_RECALL_MSG="MSYNC_RECALLMESSAGE",e.MODIFY_MESSAGE="MSYNC_MODIFYMESSAGE"}(i||(i={})),function(e){e.GET_DNS="REST_DNSLIST",e.LOGIN_BY_AGORA_TOKEN="LOGIN_BY_AGORA_TOKEN",e.LOGIN_BY_PWD="LOGIN_BY_PWD",e.RESISTER="REGISTER"}(o||(o={})),function(e){e[e["5G"]=7]="5G",e[e["4G"]=7]="4G",e[e["3G"]=7]="3G",e[e["2G"]=7]="2G",e[e["SLOW-2G"]=7]="SLOW-2G",e[e.WIFI=2]="WIFI",e[e.LAN=1]="LAN",e[e.DISCONNECTED=0]="DISCONNECTED",e[e.NONE=0]="NONE",e[e.UNKNOWN=-1]="UNKNOWN",e[e["WEBIM UNABLE TO GET"]=-2]="WEBIM UNABLE TO GET"}(s||(s={})),function(e){e[e.success=200]="success",e[e.failed=500]="failed"}(a||(a={})),function(e){e[e.web=0]="web",e[e.native=1]="native"}(c||(c={}))},9335:function(e,t,n){"use strict";n.d(t,{g:function(){return M},Z:function(){return me}}),n(9601),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(7042),n(2222),n(3710),n(9714),n(5212),n(8309),n(2772),n(9653),n(3843),n(1038),n(2564),n(7941),n(9753),n(8264),n(9575),n(2472),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016),n(6699),n(2023),n(561),n(3161),n(9554),n(4747),n(285),n(1637),n(8145),n(1249),n(4812);var r=n(4188),i=n.n(r),o=n(3720),s=n.n(o),a=n(5531),c=n(8161),l=n(7360),u=["public","members_only","allow_user_invites","invite_need_confirm"],d={name:"name",title:"name",description:"description",public:"public",members_only:"approval",allow_user_invites:"allowInvites",max_users:"maxUsers",invite_need_confirm:"inviteNeedConfirm",custom:"ext",last_modified:"lastModified"};function p(e,t){var n,r,i,o,s,a,c=this,l=this.context,p=l.userId,h=l.jid,f=t.from.name===p&&h.clientResource!==t.from.clientResource;return t.isThread?(i={id:t.mucId.name,name:t.mucName,operation:"",parentId:t.mucParentId.name,operator:t.from.name,userName:t.to.length?t.to[0].name:""},o={chatThreadId:t.mucId.name,chatThreadName:t.mucName,operation:"",parentId:t.mucParentId.name}):(r={type:"",owner:t.from.name,gid:t.mucId.name,from:t.from.name,fromJid:t.from,to:t.to.length?t.to[0].name:"",toJid:t.to,chatroom:t.isChatroom,status:t.status},s={operation:"",id:t.mucId.name,from:t.from.name},t.isChatroom&&(null===(n=null==t?void 0:t.eventInfo)||void 0===n?void 0:n.ext)&&(a=JSON.parse(t.eventInfo.ext))),({45:function(){var e,n,r;s.operation="memberAttributesUpdate";var i=JSON.parse(null===(e=null==t?void 0:t.eventInfo)||void 0===e?void 0:e.ext)||{};s.attributes=i.properties||{},s.userId=i.username||"",f?null===(n=c.eventHandler)||void 0===n||n.dispatch("onMultiDeviceEvent",s):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupEvent",s)},44:function(){var e;s.operation="removeChatRoomAttributes",s.attributes=a.result.successKeys,a.result.successKeys.length>0&&(null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",s))},43:function(){var e;s.operation="updateChatRoomAttributes";var t={};a.result.successKeys.forEach((function(e){t[e]=a.properties[e]})),s.attributes=t,a.result.successKeys.length>0&&(null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",s))},42:function(){},41:function(){},40:function(){},39:function(){},38:function(){var e;o.operation="chatThreadNameUpdate",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",o)},37:function(){var e;i.operation="userRemove",null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatThreadChange",i)},36:function(){var e;o.operation="chatThreadLeave",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",o)},35:function(){var e;o.operation="chatThreadJoin",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",o)},34:function(){var e;o.operation="chatThreadDestroy",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",o)},33:function(){var e;o.operation="chatThreadCreate",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",o)},32:function(){var e,n,i,o;r.type=t.isChatroom?"rmChatRoomMute":"rmGroupMute",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="unmuteAllMembers",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},31:function(){var e,n,i,o;r.type=t.isChatroom?"muteChatRoom":"muteGroup",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="muteAllMembers",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},30:function(){var e,n,i,o;r.type=t.isChatroom?"rmUserFromChatRoomWhiteList":"rmUserFromGroupWhiteList",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="removeAllowlistMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},29:function(){var e,n,i,o;r.type=t.isChatroom?"addUserToChatRoomWhiteList":"addUserToGroupWhiteList",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="addUserToAllowlist",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},28:function(){var e,n,i,o;r.type="deleteFile",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="deleteFile",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},27:function(){var e,n,i,o;r.type="uploadFile",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="uploadFile",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},26:function(){var e,n,i,o;r.type="deleteAnnouncement",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="deleteAnnouncement",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},25:function(){var e,n,i,o;r.type="updateAnnouncement",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="updateAnnouncement",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},24:function(){var e,n,i,o;r.type="removeMute",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="unmuteMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},23:function(){var e,n,i,o;r.type="addMute",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="muteMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},22:function(){var e,n,i,o;r.type="removeAdmin",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="removeAdmin",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},21:function(){var e,n,i,o;r.type="addAdmin",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="setAdmin",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},20:function(){var e,n,i,o;r.type="changeOwner",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="changeOwner",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},19:function(){var e,n,i,o;r.type="direct_joined",r.groupName=t.mucName,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="directJoined",s.name=t.mucName,t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},18:function(){var e,n,i,o;r.type=t.isChatroom?"leaveChatRoom":"leaveGroup",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="memberAbsence",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},17:function(){var e,n,i,o;r.type=t.isChatroom?"memberJoinChatRoomSuccess":"memberJoinPublicGroupSuccess",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="memberPresence",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},16:function(){var e,n;r.type="unblock",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},15:function(){var e,n;r.type="block",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},14:function(){var e,n,i,o,a,l=t.isChatroom;if(!l){var p=JSON.parse((null===(e=null==t?void 0:t.eventInfo)||void 0===e?void 0:e.ext)||"{}",(function(e,t){return"last_modified"===e?Number(t):u.includes(e)?"true"===t||!0===t:t}));s.detail=r.detail={},Object.keys(p).forEach((function(e){var t=d[e];if(t){var n=p[e];s.detail&&(s.detail[t]=n),r.detail&&(r.detail[t]=n)}}))}r.type="update",c.onPresence&&c.onPresence(r),l?null===(n=c.eventHandler)||void 0===n||n.dispatch("onChatroomChange",r):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupChange",r),s.operation="updateInfo",l?null===(o=c.eventHandler)||void 0===o||o.dispatch("onChatroomEvent",s):null===(a=c.eventHandler)||void 0===a||a.dispatch("onGroupEvent",s)},13:function(){var e,n,i,o;r.type="allow",r.reason=t.reason,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="unblockMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},12:function(){var e,n;r.type="ban",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},11:function(){var e,n;r.type="getBlackList",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},10:function(){var e,n,i,o;r.type="removedFromGroup",r.kicked=r.to,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="removeMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},9:function(){var e,n,i,o;r.type="invite_decline",r.kicked=r.to,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="rejectInvite",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},8:function(){var e,n,i,o;r.type="invite_accept",r.kicked=r.to,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="acceptInvite",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},7:function(){var e,n,i,o;r.type="invite",r.kicked=r.to,r.groupName=t.mucName,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="inviteToJoin",s.name=t.mucName,t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},6:function(){var e,n,i,o;r.type="joinPublicGroupDeclined",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="joinPublicGroupDeclined",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):(s.userId=t.to.length?t.to[0].name:"",null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s))},5:function(){var e,n,i,o;r.type="joinPublicGroupSuccess",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="acceptRequest",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},4:function(){var e,n,i,o;r.type="joinGroupNotifications",r.reason=t.reason,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="requestToJoin",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},3:function(){var e,n;r.type="leave",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},2:function(){var e,n;r.type="join",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},1:function(){var e,n,i,o;r.type="deleteGroupChat",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),s.operation="destroy",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(o=c.eventHandler)||void 0===o||o.dispatch("onGroupEvent",s)},0:function(){var e,n;s.operation="create",t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",s):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupEvent",s)}}[e]||function(){console.error("No match operation ".concat(e))})()}var h=function(e){var t=this.root.lookup("easemob.pb.MUCBody").decode(e.payload),n=t.operation;l.kg.debug("onMucMessage",t),p.call(this,n,t)},f=n(4968),m=n(7252),g=function(e){var t,n,r,i,o,s,c=this.root.lookup("easemob.pb.StatisticsBody").decode(e.payload);switch(c.operation){case 0:this.onStatisticMessage&&this.onStatisticMessage(c),null===(t=this.eventHandler)||void 0===t||t.dispatch("onStatisticMessage",c);break;case 1:s=m.Z.create({type:a.E.WEBIM_CONNCTION_USER_REMOVED,message:"user has been removed"}),this.logOut=!0,this.onError&&this.onError(s),null===(n=this.eventHandler)||void 0===n||n.dispatch("onError",s);break;case 2:s=m.Z.create({type:a.E.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE,message:"the user is already logged on another device"}),this.logOut=!0,this.onError&&this.onError(s),null===(r=this.eventHandler)||void 0===r||r.dispatch("onError",s);break;case 3:s=m.Z.create({type:a.E.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD,message:"the user was kicked by changing password"}),this.logOut=!0,this.onError&&this.onError(s),null===(i=this.eventHandler)||void 0===i||i.dispatch("onError",s);break;case 4:s=m.Z.create({type:a.E.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE,message:"the user was kicked by other device"}),this.logOut=!0,this.onError&&this.onError(s),null===(o=this.eventHandler)||void 0===o||o.dispatch("onError",s);break;default:l.kg.error("handleStatisticsMsg:",c)}},v=(n(9720),n(4370)),y=n(4363);function E(e){var t,n=[],r=[],i=e.data;i&&i.values&&i.values.forEach((function(e){Object.entries(e.status).forEach((function(e){r.push({device:e[0],status:Number(e[1])})})),n.push({userId:e.uid,lastTime:Number(e.last_time),expire:Number(e.expiry),ext:e.ext,statusDetails:r})})),this.onPresenceStatusChange&&this.onPresenceStatusChange(n),null===(t=this.eventHandler)||void 0===t||t.dispatch("onPresenceStatusChange",n)}function _(e){var t=this;e.data.forEach((function(e){var n,r={from:e.from,to:e.to,chatType:"chat"===e.channel_type?"singleChat":"groupChat",messageId:e.messageId,reactions:e.reactions,ts:e.ts};null===(n=t.eventHandler)||void 0===n||n.dispatch("onReactionChange",r)}))}function b(e){var t,n,r,i;if(e.data){var o=e.data,s={id:o.id||"",name:o.name||"",parentId:o.muc_parent_id||"",messageId:o.msg_parent_id||"",timestamp:o.timestamp||0,operator:o.from||"",operation:""};switch(o.operation){case"create":s.operation="create",s.createTimestamp=s.timestamp,s.messageCount=0,null===(t=this.eventHandler)||void 0===t||t.dispatch("onChatThreadChange",s);break;case"update_msg":s.operation="update",s.messageCount=o.message_count,o.last_message&&"{}"!==JSON.stringify(o.last_message)?s.lastMessage=(0,y.w)(o.last_message):"{}"===JSON.stringify(o.last_message)&&(s.lastMessage={}),null===(n=this.eventHandler)||void 0===n||n.dispatch("onChatThreadChange",s);break;case"update":s.operation="update",s.messageCount=o.message_count,null===(r=this.eventHandler)||void 0===r||r.dispatch("onChatThreadChange",s);break;case"delete":s.operation="destroy",null===(i=this.eventHandler)||void 0===i||i.dispatch("onChatThreadChange",s)}}}function S(e){var t,n=e.data;if(n.resource!==this.clientResource){var r={operation:"deleteRoaming",conversationId:n.to,chatType:"chat"===n.chatType?"singleChat":"groupChat",resource:n.resource};null===(t=this.eventHandler)||void 0===t||t.dispatch("onMultiDeviceEvent",r)}}function T(e){var t,n=e.data,r={operation:"del"===n.op?"deleteConversation":"top"===n.op?"pinnedConversation":"unpinnedConversation",conversationId:n.id,conversationType:"chat"===n.type?"singleChat":"groupChat",timestamp:n.ts};this.clientResource!==n.res&&(null===(t=this.eventHandler)||void 0===t||t.dispatch("onMultiDeviceEvent",r))}var I=function(e){var t=v.P6.parseNotify(e.payload);switch(t.type){case"presence":E.call(this,t);break;case"reaction":_.call(this,t);break;case"thread":b.call(this,t);break;case"roaming_delete":S.call(this,t);break;case"conv":T.call(this,t);break;default:l.kg.error("unexpected notify type: ".concat(t.type))}},N=n(7288),w=n(9743),C=1,O=n(2071),A=n(1595);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}var M,D=function(){return D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},D.apply(this,arguments)},k=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},x=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},L=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};!function(e){e[e.NORMAL=0]="NORMAL",e[e.SINGLECHAT=1]="SINGLECHAT",e[e.GROUPCHAT=2]="GROUPCHAT",e[e.CHATROOM=3]="CHATROOM",e[e.READ_ACK=4]="READ_ACK",e[e.DELIVER_ACK=5]="DELIVER_ACK",e[e.RECALL=6]="RECALL",e[e.CHANNEL_ACK=7]="CHANNEL_ACK",e[e.EDIT=8]="EDIT"}(M||(M={}));var P=v.P6.getEnvInfo();function j(){var e="webim",t="",n="",r=[],i=(new Date).valueOf();"webim"===this.deviceId?(n="random_"+i.toString(),e=this.deviceId+"_"+n,t=this.deviceId):e=t=n="webim_"+this.deviceId,this.context.jid&&(this.context.jid.clientResource=e);var o=this.root.lookup("easemob.pb.Provision"),s=o.decode(r);s.compressType=this.compressType,s.encryptType=this.encryptType,s.osType=this.osType,s.version=this.version,s.deviceName=t,s.resource=e,s.deviceUuid=n,s.auth="$t$"+this.token,s.actionVersion="v2.0",s=o.encode(s).finish();var a=this.root.lookup("easemob.pb.MSync"),c=a.decode(r);return c.version=this.version,c.guid=this.context.jid,c.auth="$t$"+this.token,c.command=3,c.deviceId=t,c.serviceId=this.dataReport.getServiceId(),c.encryptType=this.encryptType,c.payload=s,a.encode(c).finish()}function U(e,t){var n=this,r=v.P6.getEnvInfo();if("web"===r.platform||"zfb"===r.platform||"dd"===r.platform){for(var o="",s=0;s<e.length;s++)o+=String.fromCharCode(e[s]);return o=i().btoa(o),"web"===r.platform?o:{data:o,isBuffer:!1,complete:function(){},fail:function(e){"sendSocketMessage:fail taskID not exist"!==e.errMsg&&"SocketTast.send:fail SocketTask.readyState is not OPEN"!==e.errMsg||(l.kg.debug("send message fail and reconnect"),n.reconnecting||n.reconnect()),t&&n._msgHash&&n._msgHash[t]&&n._msgHash[t].fail({id:t})}}}var a=e;return{data:a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength),fail:function(e){"sendSocketMessage:fail taskID not exist"!==e.errMsg&&"SocketTast.send:fail SocketTask.readyState is not OPEN"!==e.errMsg||n.reconnecting||n.reconnect(),t&&n._msgHash&&n._msgHash[t]&&n._msgHash[t].fail({id:t})}}}function F(e,t){switch(e.ns){case 0:g.call(this,e);break;case 1:c.Z.call(this,e,t);break;case 2:h.call(this,e);break;case 3:f.Z.handleRosterMsg.call(this,e);break;case 4:this.registerConfrIQHandler&&this.registerConfrIQHandler(e,t,this);break;case 5:I.call(this,e);break;default:l.kg.error("distributeMeta",e)}}function z(e,t){for(var n=function(n){var i=new(s())(e[n].id.low,e[n].id.high,e[n].id.unsigned).toString();if(r._load_msg_cache.some((function(e){return e.msgId===i})))return"continue";var o=e[n].from.name,a=e[n].to?e[n].to.name:"",c=!!e[n].to&&-1!==e[n].to.domain.indexOf("conference");r._load_msg_cache.length<=r.max_cache_length||r._load_msg_cache.shift(),r._load_msg_cache.push({msgId:i,from:o,to:a,isGroup:c}),F.call(r,e[n],t)},r=this,i=0;i<e.length;i++)n(i)}function B(e){var t=this.root.lookup("easemob.pb.CommUnreadDL");if(t=t.decode(e.payload),"agoraToken"===this.grantType){var n=new(s())(t.timestamp.low,t.timestamp.high,t.timestamp.unsigned).toString();this.compareTokenExpireTime(Number(n),this.expirationTime)}if(0===t.unread.length)J.call(this);else for(var r=0;r<t.unread.length;r++)l.kg.debug("pull unread message",t.unread),G.call(this,t.unread[r].queue);J.call(this)}function V(){var e=[],t=this.root.lookup("easemob.pb.StatisticsBody"),n=t.decode(e);n.operation=0,n=t.encode(n).finish();var r=this.root.lookup("easemob.pb.Meta").decode(e);r.id=(new Date).valueOf(),r.ns=0,r.payload=n;var i=this.root.lookup("easemob.pb.CommSyncUL"),o=i.decode(e);o.meta=r,o=i.encode(o).finish();var s=this.root.lookup("easemob.pb.MSync"),a=s.decode(e);return a.version=this.version,a.encryptType=[0],a.command=0,a.payload=o,s.encode(a).finish()}function H(e){var t=[],n=this.root.lookup("easemob.pb.CommSyncUL"),r=n.decode(t);r.queue=e,r=n.encode(r).finish();var i=this.root.lookup("easemob.pb.MSync"),o=i.decode(t);return o.version=this.version,o.encryptType=this.encryptType,o.command=0,o.payload=r,i.encode(o).finish()}function G(e){l.kg.debug("sendBackqueue");var t=H.call(this,e);fe.call(this,t)}function W(e,t){var n=[],r=this.root.lookup("easemob.pb.CommSyncUL"),i=r.decode(n);i.queue=t,i.key=new(s())(e.low,e.high,e.unsigned).toString(),i=r.encode(i).finish();var o=this.root.lookup("easemob.pb.MSync"),a=o.decode(n);return a.version=this.version,a.encryptType=this.encryptType,a.command=0,a.payload=i,o.encode(a).finish()}function Y(){var e;if(this.times=1,this.autoReconnectNumTotal=0,this.onOpened&&this.onOpened(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onConnected"),"agoraToken"===this.grantType){var t=Date.now();this.expiresIn=this.expirationTime-t,this.tokenExpireTimeCountDown(this.expiresIn)}Q.call(this),Z.call(this),X.call(this),J.call(this)}function q(e,t){l.kg.debug("sendLastSession");var n=W.call(this,e,t);fe.call(this,n)}function K(e){var t,n,r,i,o,s,c=this,u=this.root.lookup("easemob.pb.Provision").decode(e.payload);if(this.context.jid&&(this.context.jid.clientResource=u.resource),this.clientResource=u.resource,0===u.status.errorCode)this.reconnecting=!1,this.logOut=!1,"zfb"!==P.platform&&"dd"!==P.platform||(this.sock.readyState=1),this._localCache?(null===(t=this._localCache)||void 0===t?void 0:t.getInstance())?Y.call(this):this._localCache&&new this._localCache({user:this.user,dbName:"cache_".concat(Math.abs((0,w.un)(this.appKey)),"_").concat(this.user),version:C,onInit:function(){return k(c,void 0,void 0,(function(){return x(this,(function(e){return l.kg.debug("localCache init success"),Y.call(this),[2]}))}))}}):Y.call(this);else{var d=void 0,p=u.status.reason;switch(p){case"Sorry, the app day live count limit":d=m.Z.create({type:a.E.MAX_LIMIT,message:"Sorry, the daily active user limit for this app has been reached"}),null===(n=this.eventHandler)||void 0===n||n.dispatch("onError",d);break;case"Sorry, the app online count limit":d=m.Z.create({type:a.E.MAX_LIMIT,message:"Sorry, the maximum number limit of online users for this app has been reached"}),null===(r=this.eventHandler)||void 0===r||r.dispatch("onError",d);break;case"Sorry, the app month live count limit":d=m.Z.create({type:a.E.MAX_LIMIT,message:"Sorry, the monthly active user limit for this app has been reached"}),null===(i=this.eventHandler)||void 0===i||i.dispatch("onError",d);break;case"Sorry, who are you?":d=m.Z.create({type:a.E.WEBIM_CONNCTION_AUTH_ERROR,message:"Auth failed"}),null===(o=this.eventHandler)||void 0===o||o.dispatch("onError",d);break;default:d=m.Z.create({type:a.E.SERVER_UNKNOWN_ERROR,message:p}),null===(s=this.eventHandler)||void 0===s||s.dispatch("onError",d)}}}function Q(){var e,t;if((null===(e=this.unMSyncSendMsgMap)||void 0===e?void 0:e.size)>0){for(var n=Array.from(this.unMSyncSendMsgMap.keys()),r=0;r<n.length;r++){var i=this.unMSyncSendMsgMap.get(n[r]);fe.call(this,i,n[r])}null===(t=this.unMSyncSendMsgMap)||void 0===t||t.clear()}}function J(){var e=V.call(this);fe.call(this,e)}function X(){var e=ee.call(this);fe.call(this,e)}function Z(){var e=this;$.call(this),this.heartBeatID=setInterval((function(){X.call(e)}),this.heartBeatWait)}function $(){clearInterval(this.heartBeatID)}function ee(){var e=this.root.lookup("easemob.pb.MSync"),t=e.decode([]);return t.version=this.version,t.encryptType=this.encryptType,t.command=1,e.encode(t).finish()}function te(e,t){return e.some((function(e){return e.name===t.name}))}function ne(e){var t=this,n=this.root.lookup("easemob.pb.CommNotice"),r=n.decode(e.payload),i=te(this._queues,r.queue);l.kg.debug("receive notice",n,this._queues),i||this.clientResource===r.queue.clientResource&&r.queue.name===this.context.userId||(this.qTimer&&clearTimeout(this.qTimer),this.qTimer=setTimeout((function(){var e=r.queue;te(t._queues,e)&&(G.call(t,e),l.kg.debug("\u2b07q:",e))}),1e4),this._queues.push(r.queue),1===this._queues.length&&G.call(this,r.queue))}function re(e){if("string"==typeof e){var t=JSON.parse(e);if(Array.isArray(t)){var n=t[0],r=t[1];this.closeInfo={code:n,reason:r}}}}function ie(e){return k(this,void 0,void 0,(function(){var t,n,r,o,s,a,c,u;return x(this,(function(d){if(t=v.P6.getEnvInfo(),n=this.root.lookup("easemob.pb.MSync"),"miniCore"===this.name){try{e.data instanceof ArrayBuffer||(l.kg.debug("received message: ".concat(e.data)),re.call(this,e.data)),o=new Uint8Array(e.data),r=n.decode(o)}catch(e){throw new Error("decode message fail.")}return[2,r]}if("web"===t.platform||"zfb"===t.platform||"dd"===t.platform){for('[401,"normal closed"]'===e.data&&(l.kg.debug("received message: ".concat(e.data)),re.call(this,e.data)),s=i().atob(e.data),a=[],c=0,u=s.length;c<u;++c)a.push(s.charCodeAt(c));return[2,n.decode(a)]}try{e.data instanceof ArrayBuffer||(l.kg.debug("received message: ".concat(e.data)),re.call(this,e.data)),r=n.decode(e.data)}catch(e){throw new Error("decode message fail.")}return[2,r]}))}))}function oe(e){var t=this;e.then((function(e){if(e)switch(e.command){case 0:se.call(t,e);break;case 1:B.call(t,e);break;case 2:ne.call(t,e);break;case 3:K.call(t,e);break;default:l.kg.error("unexpected msync command: ".concat(e.command))}else l.kg.error("unexpected msync result: ".concat(e))}))}function se(e){var t,n,r,i,o,c,l,u,d,p,h,f,g,y,E,_,b,S,T,I,w,C,R,M,L,P,j,U,F,B,V,H,W,Y,K,Q,J,X,Z,$,ee;return k(this,void 0,void 0,(function(){var k,te,ne,re,ie,oe,se,ae,ce,le,ue,de,pe,he,fe,me,ge,ve,ye,Ee,_e,be,Se,Te,Ie,Ne,we,Ce,Oe,Ae,Re,Me,De=this;return x(this,(function(x){switch(x.label){case 0:if(k=(k=this.root.lookup("easemob.pb.CommSyncDL")).decode(e.payload),te=new(s())(k.serverId.low,k.serverId.high,k.serverId.unsigned).toString(),ne=new(s())(k.metaId.low,k.metaId.high,k.metaId.unsigned).toString(),!(Number(ne)>0))return[3,10];if(!k.status)return[3,9];if(0!==k.status.errorCode)return[3,8];if((we=O.Nl.get(ne))&&(Ce=we.rpt,Oe=we.requestName,Ce({isEndApi:!0,data:{isSuccess:1,requestName:Oe,requestMethod:"WEBSOCKET",requestUrl:this.url,code:A.dd.success}}),O.Nl.delete(ne)),null==(re=this._msgHash[ne])?void 0:re.isHandleChatroom){try{ie="join"===(null===(t=this._msgHash[ne])||void 0===t?void 0:t.operation),(null===(n=this._msgHash[ne])||void 0===n?void 0:n.resolve)instanceof Function&&ie&&this._msgHash[ne].resolve({type:0,data:{action:"apply",id:this._msgHash[ne].roomId,result:!0,user:this.context.userId}}),(null===(r=this._msgHash[ne])||void 0===r?void 0:r.success)instanceof Function&&ie&&this._msgHash[ne].success({type:0,data:{action:"apply",id:this._msgHash[ne].roomId,result:!0,user:this.context.userId}}),(null===(i=this._msgHash[ne])||void 0===i?void 0:i.resolve)instanceof Function&&!ie&&this._msgHash[ne].resolve({type:0,data:{result:!0}}),(null===(o=this._msgHash[ne])||void 0===o?void 0:o.success)instanceof Function&&!ie&&this._msgHash[ne].success({type:0,data:{result:!0}})}catch(e){Ae=m.Z.create({type:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing success function error",data:e}),this.onError&&this.onError(Ae),null===(c=this.eventHandler)||void 0===c||c.dispatch("onError",Ae)}delete this._msgHash[ne]}if(!re||re.isHandleChatroom)return[3,7];if(oe=null,se="",ae=0,0!==k.metas.length)try{(ce=v.P6.parseNotify(k.metas[0].payload)).edit_msg&&(le=ce.edit_msg,ue=le.count,de=le.operator,pe=le.edit_time,he=le.sender,fe=le.send_time,oe={operationTime:pe,operatorId:de,operationCount:ue},se=he,ae=Number(fe))}catch(e){Ae=m.Z.create({type:a.E.WEBIM_LOAD_MSG_ERROR,message:"decode message error",data:e}),this.onError&&this.onError(Ae),null===(l=this.eventHandler)||void 0===l||l.dispatch("onError",Ae)}O.TJ.has(ne)&&(O.TJ.get(ne).rpt({isEndApi:!0,data:{isSuccess:1,requestMethod:"WEBSOCKET",requestUrl:this.url,code:A.dd.success,msgId:te}}),O.TJ.delete(ne)),x.label=1;case 1:return x.trys.push([1,5,,6]),me={localMsgId:ne,serverMsgId:te},oe&&(this._msgHash[ne].modifiedInfo=oe,ge=this._msgHash[ne],ve=ge.editMessageId,Ie=ge.type,ye=ge.chatType,Ee=ge.msg,_e=ge.to,be=ge.translations,Se={id:ve,type:Ie,chatType:ye,msg:Ee,modifiedInfo:oe,to:_e,from:se,time:Number(ae)},be&&(Se.translations=be),me.message=Se,null===(p=null===(d=null===(u=this._localCache)||void 0===u?void 0:u.getInstance())||void 0===d?void 0:d.getMessageByServerMsgId(ve))||void 0===p||p.then((function(e){var t,n;e&&"txt"===e.type&&(null===(n=null===(t=De._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.putMessageToDB(D(D({},e),{msg:Se.msg,modifiedInfo:Se.modifiedInfo,translations:Se.translations})))}))),[4,null===(f=null===(h=this._localCache)||void 0===h?void 0:h.getInstance())||void 0===f?void 0:f.updateLocalMessage(ne,{serverMsgId:te,status:N.r.SUCCESS})];case 2:return x.sent(),(null===(g=this._msgHash[ne])||void 0===g?void 0:g.success)instanceof Function?[4,this._msgHash[ne].success(ne,te)]:[3,4];case 3:x.sent(),x.label=4;case 4:return(null===(y=this._msgHash[ne])||void 0===y?void 0:y.resolve)instanceof Function&&this._msgHash[ne].resolve(me),[3,6];case 5:return Te=x.sent(),Ae=m.Z.create({type:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing success function error",data:Te}),this.onError&&this.onError(Ae),null===(E=this.eventHandler)||void 0===E||E.dispatch("onError",Ae),[3,6];case 6:this.onReceivedMessage&&this.onReceivedMessage({id:ne,mid:te,to:this._msgHash[ne].to,time:0}),null===(_=this.eventHandler)||void 0===_||_.dispatch("onReceivedMessage",{id:ne,mid:te,to:this._msgHash[ne].to}),delete this._msgHash[ne],x.label=7;case 7:return[3,9];case 8:if(15===k.status.errorCode)(null===(b=this._msgHash[ne])||void 0===b?void 0:b.fail)instanceof Function&&this._msgHash[ne].fail({type:a.E.SERVICE_NOT_ALLOW_MESSAGING_MUTE,reason:"you were muted"}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject({type:a.E.SERVICE_NOT_ALLOW_MESSAGING_MUTE,reason:"you were muted"}),null===(T=null===(S=this._localCache)||void 0===S?void 0:S.getInstance())||void 0===T||T.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL});else if(1===k.status.errorCode){switch(Ie=void 0,k.status.reason){case"blocked":Ie=a.E.PERMISSION_DENIED;break;case"group not found":Ie=a.E.GROUP_NOT_EXIST;break;case"not in group or chatroom":Ie=a.E.GROUP_NOT_JOINED;break;case"exceed recall time limit":Ie=a.E.MESSAGE_RECALL_TIME_LIMIT;break;case"message recall disabled":Ie=a.E.SERVICE_NOT_ENABLED;break;case"not in group or chatroom white list":Ie=a.E.SERVICE_NOT_ALLOW_MESSAGING;break;case"nonroster":Ie=a.E.USER_NOT_FRIEND,k.status.reason="not contact";break;case"group is disabled":Ie=a.E.GROUP_IS_DISABLED,k.status.reason="group is disabled";break;case"limit directed users":Ie=a.E.MAX_LIMIT;break;case"Sorry, edit limit reached":Ie=a.E.MAX_LIMIT,k.status.reason="Modify message limit reached";break;case"Sorry, message does not exist":Ie=a.E.MODIFY_MESSAGE_NOT_EXIST,k.status.reason="The message does not exist.";break;case"Sorry, You do not have permission":Ie=a.E.PERMISSION_DENIED,k.status.reason="You do not have the modified permission.";break;case"Sorry, format is incorrect":Ie=a.E.MODIFY_MESSAGE_FORMAT_ERROR,k.status.reason="The modify messaged format error.";break;case"Sorry, edit is not available":Ie=a.E.SERVICE_NOT_ENABLED,k.status.reason="The message modify function is not activated.";break;case"Sorry, edit fail":Ie=a.E.MODIFY_MESSAGE_FAILED,k.status.reason="Modify message failed.";break;default:k.status.reason.includes("grpID")&&k.status.reason.includes("does not exist!")?(Ie=a.E.CHATROOM_NOT_EXIST,k.status.reason="The chat room dose not exist."):k.status.reason.includes("username")&&k.status.reason.includes("doesn't exist!")?Ie=a.E.USER_NOT_FOUND:"group member list is full!"===k.status.reason?Ie=a.E.CHATROOM_MEMBERS_FULL:k.status.reason.includes("can not join this group")&&k.status.reason.includes("is in the blacklist")?(Ie=a.E.PERMISSION_DENIED,k.status.reason="permission denied"):Ie="can not operate this group, reason: group is disabled"===k.status.reason?a.E.GROUP_IS_DISABLED:k.status.reason.includes("moderation")?a.E.MESSAGE_MODERATION_BLOCKED:a.E.SERVER_UNKNOWN_ERROR}this._msgHash[ne]&&((null===(I=this._msgHash[ne])||void 0===I?void 0:I.isHandleChatroom)?(Ne=m.Z.create({type:Ie,message:k.status.reason||"",data:""}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].error instanceof Function&&this._msgHash[ne].error(Ne)):(Ne=m.Z.create({type:Ie,message:k.status.reason||"",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:Ie,reason:k.status.reason?k.status.reason:"",data:{id:ne,mid:te}}),null===(C=null===(w=this._localCache)||void 0===w?void 0:w.getInstance())||void 0===C||C.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL})),delete this._msgHash[ne])}else if(7===k.status.errorCode)"sensitive words"===k.status.reason&&this._msgHash[ne]?(Ne=m.Z.create({type:a.E.MESSAGE_INCLUDE_ILLEGAL_CONTENT,message:"sensitive words",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:a.E.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:ne,mid:te,reason:"sensitive words"}}),null===(M=null===(R=this._localCache)||void 0===R?void 0:R.getInstance())||void 0===M||M.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL})):"blocked by mod_antispam"===k.status.reason&&this._msgHash[ne]?(Ne=m.Z.create({type:a.E.MESSAGE_INCLUDE_ILLEGAL_CONTENT,message:"blocked by mod_antispam",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:a.E.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:ne,mid:te,reason:"blocked by mod_antispam"}}),null===(P=null===(L=this._localCache)||void 0===L?void 0:L.getInstance())||void 0===P||P.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL})):"user is mute"===k.status.reason&&this._msgHash[ne]?(Ne=m.Z.create({type:a.E.USER_MUTED_BY_ADMIN,message:"user is mute",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail(Ne),null===(U=null===(j=this._localCache)||void 0===j?void 0:j.getInstance())||void 0===U||U.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL})):"traffic limit"===k.status.reason&&this._msgHash[ne]?(Ne=m.Z.create({type:a.E.MESSAGE_CURRENT_LIMITING,message:"traffic limit",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail(Ne),null===(B=null===(F=this._localCache)||void 0===F?void 0:F.getInstance())||void 0===B||B.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL})):"Sorry, data is too large"===k.status.reason&&this._msgHash[ne]&&(Ne=m.Z.create({type:a.E.MESSAGE_SIZE_LIMIT,message:"Sorry, data is too large",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail(Ne),null===(H=null===(V=this._localCache)||void 0===V?void 0:V.getInstance())||void 0===H||H.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL}));else if(19===k.status.errorCode)this._msgHash[ne]&&(O.TJ.has(ne)&&(O.TJ.get(ne).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:a.E.MESSAGE_EXTERNAL_LOGIC_BLOCKED,codeDesc:k.status.reason||"",msgId:te}}),O.TJ.delete(ne)),Ne=m.Z.create({type:a.E.MESSAGE_EXTERNAL_LOGIC_BLOCKED,message:k.status.reason||"",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:a.E.MESSAGE_EXTERNAL_LOGIC_BLOCKED,data:{id:ne,mid:te,reason:k.status.reason}}),null===(Y=null===(W=this._localCache)||void 0===W?void 0:W.getInstance())||void 0===Y||Y.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL}));else if(this._msgHash[ne]){O.TJ.has(ne)&&(O.TJ.get(ne).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:a.E.WEBIM_LOAD_MSG_ERROR,codeDesc:(null===(K=k.status)||void 0===K?void 0:K.reason)||"",msgId:te}}),O.TJ.delete(ne));try{Ne=m.Z.create({type:a.E.WEBIM_LOAD_MSG_ERROR,message:(null===(Q=k.status)||void 0===Q?void 0:Q.reason)||"",data:{id:ne,mid:te,reason:k.status&&k.status.reason}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ne),null===(X=null===(J=this._localCache)||void 0===J?void 0:J.getInstance())||void 0===X||X.updateLocalMessage(ne,{serverMsgId:te,status:N.r.FAIL}),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:a.E.WEBIM_LOAD_MSG_ERROR,data:{errorCode:k.status&&k.status.errorCode,reason:k.status&&k.status.reason}})}catch(e){Ae=m.Z.create({type:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing fail function error",data:e}),this.onError&&this.onError(Ae),null===(Z=this.eventHandler)||void 0===Z||Z.dispatch("onError",Ae)}delete this._msgHash[ne]}else O.TJ.has(ne)&&(O.TJ.get(ne).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,codeDesc:"on message error",msgId:te}}),O.TJ.delete(ne)),(we=O.Nl.get(ne))&&(Ce=we.rpt,Oe=we.requestName,Ce({isEndApi:!0,data:{isSuccess:0,requestName:Oe,requestMethod:"WEBSOCKET",requestUrl:this.url,code:A.dd.failed,codeDesc:"on message error"}}),O.Nl.delete(ne)),Ae=m.Z.create({type:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"on message error"}),this.onError&&this.onError(Ae),null===($=this.eventHandler)||void 0===$||$.dispatch("onError",Ae);x.label=9;case 9:return[2];case 10:if(0!==k.metas.length)try{z.call(this,k.metas,k.status)}catch(e){Ae=m.Z.create({type:a.E.WEBIM_LOAD_MSG_ERROR,message:"decode message error",data:e}),this.onError&&this.onError(Ae),null===(ee=this.eventHandler)||void 0===ee||ee.dispatch("onError",Ae)}finally{k.isLast?(Re=-1,this._queues.some((function(e,t){return e.name===k.name&&(Re=t,!0)}))&&Re>0&&this._queues.splice(Re,1),this._queues.length>0&&(G.call(this,this._queues[0]),this.qTimer&&clearTimeout(this.qTimer))):q.call(this,k.nextKey,k.queue)}else k.isLast&&(Me=-1,this._queues.some((function(e,t){return e.name===k.queue.name&&(Me=t,!0)}))&&this._queues.splice(Me,1),this._queues.length>0&&(G.call(this,this._queues[0]),this.qTimer&&clearTimeout(this.qTimer)));return[2]}}))}))}function ae(e){var t=[],n=this.root.lookup("easemob.pb.KeyValue"),r=[];for(var i in e){var o=n.decode(t);o.key=i,"object"===R(e[i])?(o.type=8,o.stringValue=JSON.stringify(e[i])):"string"==typeof e[i]?(o.type=7,o.stringValue=e[i]):"boolean"==typeof e[i]?(o.type=1,o.varintValue=!0===e[i]?1:0):Number.isInteger(e[i])?(o.type=2,o.varintValue=e[i]):(o.type=6,o.doubleValue=e[i]),r.push(o)}return r}function ce(e){var t,n,r,i=[];if(this.root){var o,c=this.root.lookup("easemob.pb.MessageBody.Content").decode(i);switch(o=!e.group&&"groupchat"!==(null===(t=null==e?void 0:e.chatType)||void 0===t?void 0:t.toLowerCase())||e.roomType?e.group&&e.roomType||"chatroom"===(null===(n=null==e?void 0:e.chatType)||void 0===n?void 0:n.toLowerCase())?"chatRoom":"singleChat":"groupChat",e.type){case"txt":c.type=0,c.text=e.msg;break;case"img":c.type=1,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.size=e.body.size,c.thumbnailDisplayName=e.body.filename):e.file?(c.displayName=e.file.filename,c.remotePath=e.file.url,c.secretKey=e.file.secret,c.fileLength=e.file.file_length,c.size=e.file.size,c.thumbnailDisplayName=e.file.filename):(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.size=e.size,c.thumbnailDisplayName=e.filename),e.isBuildCombinedMsg&&(c.size={height:e.height,width:e.width});break;case"video":c.type=2,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.duration=e.body.length,c.thumbnailDisplayName=e.body.filename):e.isBuildCombinedMsg&&(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.duration=e.length,c.thumbnailDisplayName=e.filename);break;case"loc":c.type=3,c.latitude=e.lat,c.longitude=e.lng,c.address=e.addr,c.buildingName=e.buildingName,c.latitude=e.lat;break;case"audio":c.type=4,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.duration=e.body.length,c.thumbnailDisplayName=e.body.filename):e.isBuildCombinedMsg&&(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.duration=e.length,c.thumbnailDisplayName=e.filename);break;case"file":c.type=5,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.thumbnailDisplayName=e.body.filename):e.isBuildCombinedMsg&&(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.thumbnailDisplayName=e.filename);break;case"cmd":c.type=6,c.action=e.action;break;case"custom":c.type=7,c.customEvent=e.customEvent,c.customExts=ae.call(this,e.customExts);break;case"combine":c.type=0,c.subType=0,c.text=e.compatibleText,c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.title=e.title,c.summary=e.summary,c.combineLevel=e.combineLevel}var u=[];e.ext&&(u=ae.call(this,e.ext));var d=this.root.lookup("easemob.pb.MessageBody"),p=d.decode(i),h=e.from||this.context.jid.name;p.from={name:e.isBuildCombinedMsg?h:this.context.jid.name},p.to={name:e.to},"channel"===e.type?p.type=M.CHANNEL_ACK:"recall"===e.type?(p.type=M.RECALL,p.ackMessageId=e.ackId):"delivery"===e.type?(p.type=M.DELIVER_ACK,p.ackMessageId=e.ackId):"read"===e.type?(p.type=M.READ_ACK,p.ackMessageId=e.ackId,"groupChat"===o&&(p.msgConfig={allowGroupAck:!0},p.ackContent=e.ackContent)):"chatRoom"===o?p.type=M.CHATROOM:"groupChat"===o?(p.type=M.GROUPCHAT,e.msgConfig&&(p.msgConfig={allowGroupAck:!0})):"singleChat"===o&&(p.type=M.SINGLECHAT),e.editMessageId&&(p.type=M.EDIT,p.editMessageId=e.editMessageId),p.contents=[c],p.ext=u;var f=function(e){var t={};return"translations"in e&&(t.translations=e.translations),"isChatThread"in e&&e.isChatThread&&(t.thread={}),Object.keys(t).length>0?JSON.stringify(t):""}(e);f&&(p.meta=f),p=d.encode(p).finish();var m=this.root.lookup("easemob.pb.Meta"),g=m.decode(i);g.id=e.id;var v="easemob.com";if("chatRoom"!==o&&"groupChat"!==o||(v="conference.easemob.com"),g.to={appKey:this.appKey,name:e.to,domain:v},"chatRoom"===o&&(g.ext=ae.call(this,function(e){return{chatroom_msg_tag:"high"===e.priority?0:"low"===e.priority?2:1}}(e))[0]),g.ns=1,g.payload=p,g.routetype=e.deliverOnlineOnly?1:0,"singleChat"!==o&&Array.isArray(e.receiverList)&&(null===(r=e.receiverList)||void 0===r?void 0:r.length)>0&&(g.directedUsers=e.receiverList,g.routetype=2,l.kg.debug("receiverList:",e.receiverList,"thirdMessage",g)),e.isBuildCombinedMsg)return g.timestamp=s().fromValue(e.time),m.encode(g).finish();var y=this.root.lookup("easemob.pb.CommSyncUL"),E=y.decode(i);E.meta=g,E=y.encode(E).finish();var _=this.root.lookup("easemob.pb.MSync"),b=_.decode(i);return b.version=this.version,b.encryptType=this.encryptType,b.command=0,b.payload=E,_.encode(b).finish()}e.fail&&e.fail({type:a.E.WEBIM_CONNCTION_CLIENT_OFFLINE,message:"Not logged in"})}function le(e){var t,n,r=this,i=D({},e);if(e.file)return i.accessToken=this.token,i.appKey=this.appKey,i.apiUrl=this.apiUrl,i.body&&i.body.url?ce.call(this,i):new Promise((function(t,n){var o=i.onFileUploadComplete;i.onFileUploadComplete=function(t){var n,s,a,c;if(t.entities[0]["file-metadata"]){var l=t.entities[0]["file-metadata"]["content-length"];i.file_length=l,i.filetype=t.entities[0]["file-metadata"]["content-type"],l>204800&&(i.thumbnail=!0)}i.body={type:i.type||"file",secret:t.entities[0]["share-secret"],filename:i.file.filename||i.filename,url:(r.isHttpDNS?r.apiUrl+t.uri.substr(t.uri.indexOf("/",9)):t.uri)+"/"+t.entities[0].uuid,length:i.length||0,filetype:i.filetype||i.file.filetype,file_length:(null===(s=null===(n=i.file)||void 0===n?void 0:n.data)||void 0===s?void 0:s.size)||0,size:{width:i.width||0,height:i.height||0}},i.file.url=t.uri,e.secret=t.entities[0]["share-secret"];var u=(r.isHttpDNS?r.apiUrl+t.uri.substr(t.uri.indexOf("/",9)):t.uri)+"/"+t.entities[0].uuid;e.url=u,t.url=u,"img"===i.type&&(e.thumb="".concat(u,"?thumbnail=true"),t.thumb="".concat(u,"?thumbnail=true")),o instanceof Function&&o(t,i.id);var d=ce.call(r,i);O.TJ.size<=O.F3&&O.TJ.set(i.id,{rpt:r.dataReport.geOperateFun({operationName:A.fI.SEND_MSG})}),null===(c=null===(a=r._localCache)||void 0===a?void 0:a.getInstance())||void 0===c||c.storeMessage(e,N.r.INPROGRESS),fe.call(r,d)},v.P6.uploadFile.call(r,i,A.fI.UPLOAD_MSG_ATTACH)}));if("combine"===e.type){i.accessToken=this.token,i.appKey=this.appKey,i.apiUrl=this.apiUrl;var o=i.onFileUploadComplete,s=i.onFileUploadError;return new Promise((function(t,n){var c,u,d,p;if((null===(c=e.messageList)||void 0===c?void 0:c.length)>300||0===(null===(u=e.messageList)||void 0===u?void 0:u.length))return r._msgHash[i.id].reject({type:a.E.MAX_LIMIT,message:"The number of combined messages exceeded the limit."});var h=L([],e.messageList,!0),f=0;if(h.forEach((function(e){(null==e?void 0:e.combineLevel)>f&&(f=null==e?void 0:e.combineLevel)})),i.combineLevel=f+1,i.combineLevel>10)return r._msgHash[i.id].reject({type:a.E.MAX_LIMIT,message:"The level of the merged message exceeded the limit."});var m=ue.call(r,h),g=function(t,n){var s,a,c,l,u,d,p=(r.isHttpDNS?r.apiUrl+t.uri.substr(t.uri.indexOf("/",9)):t.uri)+"/"+t.entities[0].uuid,h=null===(s=t.entities[0])||void 0===s?void 0:s["share-secret"],f=p+"?em-redirect=true";h&&(f="".concat(f,"&share-secret=").concat(h)),o instanceof Function&&o({url:f,secret:h}),e.url=f,e.secret=h,i.url=p,i.secret=t.entities[0]["share-secret"],i.filename=(null===(a=i.file)||void 0===a?void 0:a.filename)||(null==n?void 0:n.fileName),i.file_length=(null===(l=null===(c=i.file)||void 0===c?void 0:c.data)||void 0===l?void 0:l.size)||(null==n?void 0:n.fileLength)||0,null===(d=null===(u=r._localCache)||void 0===u?void 0:u.getInstance())||void 0===d||d.storeMessage(e,N.r.INPROGRESS);var m=ce.call(r,i);fe.call(r,m)},y=v.P6.getEnvInfo();if("web"!==y.platform&&"node"!==y.platform&&"quick_app"!==y.platform&&(null===(p=null===(d=y.global)||void 0===d?void 0:d.canIUse)||void 0===p?void 0:p.call(d,"getFileSystemManager"))){var E=y.global.getFileSystemManager(),_=r.apiUrl+"/"+r.orgName+"/"+r.appName+"/chatfiles";E.writeFile({filePath:"".concat(y.global.env.USER_DATA_PATH,"/combine"),data:m.buffer,encoding:"binary",success:function(e){y.global.uploadFile({url:_,filePath:"".concat(y.global.env.USER_DATA_PATH,"/combine"),name:"file",header:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+i.accessToken},success:function(e){if(200===e.statusCode){l.kg.debug("upload success",e);var t=JSON.parse(e.data);g(t,{fileName:"combine",fileLength:m.length})}else l.kg.debug("upload fail"),i.onFileUploadError instanceof Function&&i.onFileUploadError(e),this._msgHash[i.id].reject({type:a.E.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:e})},fail:function(t){l.kg.debug("upload fail"),i.onFileUploadError instanceof Function&&i.onFileUploadError(e),this._msgHash[i.id].reject({type:a.E.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:t})}})},fail:function(e){l.kg.debug("write file fail",e),this._msgHash[i.id].reject({type:a.E.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:e})}})}else{var b=new File([m],"combine",{type:"application/octet-stream"}),S={url:URL.createObjectURL(b),filename:i.id,data:b};i.file=S,i.onFileUploadComplete=function(e){g(e)},i.onFileUploadError=function(e){s instanceof Function&&s(e),r._msgHash[i.id].reject({type:a.E.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:e})},v.P6.uploadFile.call(r,i,A.fI.UPLOAD_MSG_ATTACH)}}))}"img"===e.type&&(i.body||(i.body=D(D({},i),{size:{width:i.width||0,height:i.height||0}}))),null===(n=null===(t=this._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.storeMessage(e,N.r.INPROGRESS);var c=ce.call(this,i);fe.call(this,c)}function ue(e){for(var t=Uint8Array.from("cm",(function(e){return e.charCodeAt(0)})),n=0;n<e.length;n++){for(var r=e[n],i=D(D({},r),{isBuildCombinedMsg:!0}),o=this.mSync.encodeChatMsg.call(this,i),s=o.length,a=new Uint8Array(4),c=0;c<4;c++)a[c]=s>>8*(3-c)&255;l.kg.debug("message length:",a);var u=new Uint8Array(t.length+a.length+o.length);u.set(t),u.set(a,t.length),u.set(o,t.length+a.length),t=u}var d=new Uint8Array(t.length+1),p=0;for(n=2;n<t.length;n++)n%2==1&&(p^=t[n]);return d.set(t),l.kg.debug("checkResult:",p),d[t.length]=p,d}function de(e,t,n){var r=[],i=this.root.lookup("easemob.pb.MUCBody"),o=i.decode(r);o.mucId={appKey:this.appKey,name:e,domain:"conference.easemob.com"},o.operation="join"===n?2:3,o.from={name:this.context.userId},o.isChatroom=!0,o=i.encode(o).finish();var s=this.root.lookup("easemob.pb.Meta").decode(r);s.id=t,s.from={appKey:this.appKey,name:this.context.userId,domain:"easemob.com",client_resource:this.context.jid.clientResource},s.to={domain:"easemob.com"},s.ns=2,s.payload=o;var a=this.root.lookup("easemob.pb.CommSyncUL"),c=a.decode(r);c.meta=s,c=a.encode(c).finish();var l=this.root.lookup("easemob.pb.MSync"),u=l.decode(r);return u.version=this.version,u.encryptType=this.encryptType,u.command=0,u.payload=c,l.encode(u).finish()}function pe(e,t){var n=v.P6.getUniqueId(),r=de.call(this,e.roomId,n,t);return fe.call(this,D(D({},e),{isHandleChatroom:!0,joinMsg:r,id:n,operation:t}),n)}function he(e){var t=this;return new Promise((function(n,r){var i,o,s,c,l,u;if(t.logOut)return r({type:a.E.WEBIM_CONNECTION_CLOSED,message:"not login"});if(!e.id||"string"!=typeof e.id||""===e.id)return r({type:a.E.MESSAGE_PARAMETER_ERROR,message:'Missing required parameter: "id"'});if(!e.to||"string"!=typeof e.to||""===e.to)return r({type:a.E.MESSAGE_PARAMETER_ERROR,message:'Missing required parameter: "to"'});var d="file"===e.type||"img"===e.type||"audio"===e.type||"video"===e.type,p="delivery"===e.type||"read"===e.type||"channel"===e.type,h="cmd"===e.type,f="recall"===e.type,m=null==e?void 0:e.editMessageId,g=!(p||f||h||m);if(e.id){if(!d&&!p||d&&t.useOwnUploadFun){var v="recall"===e.type?A.fI.SEND_RECALL_MSG:A.fI.SEND_MSG;m&&(v=A.fI.MODIFY_MESSAGE),O.TJ.size<=O.F3&&O.TJ.set(e.id,{rpt:t.dataReport.geOperateFun({operationName:v})})}g&&(null===(o=null===(i=t._localCache)||void 0===i?void 0:i.getInstance())||void 0===o||o.storeMessage(e,N.r.CREATE)),t._msgHash[e.id]=D(D({},e),{resolve:n,reject:r})}if(d||"combine"===e.type)return le.call(t,e);if("txt"===e.type&&(null===(s=e.msgConfig)||void 0===s?void 0:s.languages)&&Array.isArray(null===(c=e.msgConfig)||void 0===c?void 0:c.languages)&&e.msgConfig.languages.length>0){var y=t.translateMessage||t.translation.translateMessage;if(!y)throw new Error("there is no method to translate message");y.call(t,{text:e.msg,languages:e.msgConfig.languages}).then((function(n){var r,i,o,s=null===(r=n.data[0])||void 0===r?void 0:r.translations;s=s.map((function(e){return{code:e.to,text:e.text}})),e.translations=s,t._msgHash[e.id].translations=s,null===(o=null===(i=t._localCache)||void 0===i?void 0:i.getInstance())||void 0===o||o.storeMessage(e,N.r.INPROGRESS);var a=ce.call(t,e);fe.call(t,a,e.id)})).catch((function(e){r(e)}))}else{g&&(null===(u=null===(l=t._localCache)||void 0===l?void 0:l.getInstance())||void 0===u||u.storeMessage(e,N.r.INPROGRESS));var E=ce.call(t,e);fe.call(t,E,e.id)}}))}function fe(e,t){var n,r,i=this;if(e.isHandleChatroom){if(!this.isOpened()){var o={data:"",type:a.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};return Promise.reject(o)}return new Promise((function(n,r){var o;i._msgHash[e.id]=D(D({},e),{resolve:n,reject:r}),o="miniCore"===i.name?e.joinMsg:U.call(i,e.joinMsg,t),i.sock.send(o)}))}if(!this.isOpened())return null===(n=this.unMSyncSendMsgMap)||void 0===n||n.set(t,e),!this.logOut&&this.autoReconnectNumTotal<this.autoReconnectNumMax&&(this.autoReconnectNumTotal<=this.socketHost.length&&this.isHttpDNS||!this.isHttpDNS)&&(l.kg.debug("need to reconnect",this.autoReconnectNumTotal,this.autoReconnectNumMax),this.offLineSendConnecting=!0,this.reconnecting||this.reconnect()),void(this.onError&&this.onError({type:a.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"}));r="miniCore"===this.name?e:U.call(this,e,t),this.sock.send(r)}var me=function(e,t){return e.send=he,e.sendMsg=he,l.kg.debug("init Msync by ".concat(e.name)),{generateProvision:j.bind(e),base64transform:U.bind(e),distributeMeta:F.bind(e),decodeMeta:z.bind(e),decodeUnreadDL:B.bind(e),_rebuild:V.bind(e),_lastsession:W.bind(e),receiveProvision:K.bind(e),isInQueue:te.bind(e),decodeNotice:ne.bind(e),decodeMSync:ie.bind(e),distributeMSync:oe.bind(e),encodeChatMsg:ce.bind(e),upLoadFile:le.bind(e),send:he.bind(e),stopHeartBeat:$.bind(e),handleChatRoom:pe.bind(e)}}},7252:function(e,t){"use strict";var n=function(){function e(e){this.type=e.type,this.message=e.message,this.data=e.data}return e.create=function(t){return new e(t)},e}();t.Z=n},8161:function(e,t,n){"use strict";n(9601),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(7941),n(3710),n(9714),n(9653),n(9554),n(4747),n(8309),n(2772),n(2222);var r=n(3720),i=n.n(r),o=n(4363),s=n(4370),a=n(9335),c=n(9743),l=n(7360),u=n(2449),d=n(7288),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)},h=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},m={0:"TEXT",1:"IMAGE",2:"VIDEO",3:"LOCATION",4:"VOICE",5:"FILE",6:"COMMAND",7:"CUSTOM",8:"COMBINE"};function g(e){for(var t={},n=0;n<e.length;n++)if(8===e[n].type)t[e[n].key]=JSON.parse(e[n].stringValue);else if(7===e[n].type)t[e[n].key]=e[n].stringValue;else if(6===e[n].type)t[e[n].key]=e[n].doubleValue;else if(5===e[n].type)t[e[n].key]=e[n].floatValue;else if(1===e[n].type){var r=e[n].varintValue,o=new(i())(r.low,r.high,r.unsigned).toString();t[e[n].key]=0!==Number(o)}else 2!==e[n].type&&3!==e[n].type&&4!==e[n].type||(r=e[n].varintValue,o=new(i())(r.low,r.high,r.unsigned).toString(),t[e[n].key]=Number(o));return t}function v(e){var t,n,r,i,s,c,u,p,v,y,E,_,b,S,T,I,N,w,C,O,A,R,M,D,k,x,L;return h(this,void 0,void 0,(function(){var h,P,j,U,F,z,B,V,H,G,W,Y,q,K,Q,J,X,Z,$,ee,te,ne,re,ie,oe,se,ae,ce,le,ue,de,pe,he,fe,me,ge,ve,ye,Ee,_e,be,Se,Te,Ie,Ne,we,Ce,Oe;return f(this,(function(f){switch(f.label){case 0:switch(h=e.status,P=e.thirdMessage,j=e.msgBody,U=e.msgId,F=e.type,z=e.from,B=e.to,V=e.time,H=e.onlineState,G=e.chatType,W=e.ignoreCallback,Y=e.priority,q=e.format,K={},Q={},J=h.errorCode>0,X=h.errorCode,Z=h.reason,$={},ee=[],te=[],ne={},re="",ie=0,oe=null,se=null,P.ext&&($=g(P.ext)),P.meta&&"string"==typeof P.meta&&((ce=JSON.parse(P.meta)).reaction&&(ee=ce.reaction).forEach((function(e){e.isAddedBySelf=e.state,delete e.state})),ce.translations&&(te=ce.translations),ce.edit_msg&&(le=ce.edit_msg,ue=le.count,de=le.operator,pe=le.edit_time,he=le.sender,fe=le.send_time,ne={operationTime:pe,operatorId:de,operationCount:ue},re=he,ie=fe),ce.thread&&"{}"!==JSON.stringify(ce.thread)&&(oe={messageId:ce.thread.msg_parent_id,parentId:ce.thread.muc_parent_id,chatThreadName:ce.thread.thread_name}),ce.thread_overview&&"{}"!==JSON.stringify(ce.thread_overview)&&(se={id:ce.thread_overview.id,parentId:ce.thread_overview.muc_parent_id,name:ce.thread_overview.name,lastMessage:ce.thread_overview.last_message&&"{}"!==JSON.stringify(ce.thread_overview.last_message)?(0,o.w)(ce.thread_overview.last_message):null,createTimestamp:ce.thread_overview.create_timestamp,updateTimestamp:ce.thread_overview.update_timestamp,messageCount:ce.thread_overview.message_count||0})),j.type){case 0:return[3,1];case 1:return[3,7];case 2:return[3,10];case 3:return[3,13];case 4:return[3,16];case 5:return[3,19];case 6:return[3,22];case 7:return[3,23];case 8:return[3,26]}return[3,27];case 1:return Object.prototype.hasOwnProperty.call(j,"subType")&&0===j.subType?(ae=(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),me={id:U,type:"combine",chatType:G,to:B,from:z,ext:$,time:Number(V),onlineState:H,title:j.title||"",summary:j.summary||"",url:ae||"",secret:j.secretKey||"",file_length:j.fileLength||0,filename:j.displayName||"",compatibleText:j.text,combineLevel:j.combineLevel||0},K.msgConfig&&(me.msgConfig=K.msgConfig),ee.length>0&&(me.reactions=ee),oe&&(me.chatThread=oe),se&&(me.chatThreadOverview=se),"chatRoom"===G&&(me.priority=Y),Q=me,W?[3,3]:[4,null===(n=null===(t=this._localCache)||void 0===t?void 0:t.getInstance())||void 0===n?void 0:n.storeMessage(me,d.r.SUCCESS)]):[3,4];case 2:f.sent(),null===(r=this.eventHandler)||void 0===r||r.dispatch("onCombineMessage",me),f.label=3;case 3:return[3,28];case 4:return!(K={id:U,type:F,contentsType:m[j.type],from:z,to:B,data:j.text,ext:$,sourceMsg:j.text,time:V,msgConfig:P.msgConfig,onlineState:H}).msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onTextMessage&&this.onTextMessage(K),ge={id:U,type:"txt",chatType:G,msg:j.text,to:B,from:z,ext:$,time:Number(V),onlineState:H},K.msgConfig&&(ge.msgConfig=K.msgConfig),ee.length>0&&(ge.reactions=ee),oe&&(ge.chatThread=oe),se&&(ge.chatThreadOverview=se),te.length>0&&(ge.translations=te),ne.operationCount>0&&(ge.modifiedInfo=ne,P.type===a.g.EDIT&&(ge.from=re,ge.time=ie)),"chatRoom"===G&&(ge.priority=Y),Q=ge,W?[3,6]:[4,null===(s=null===(i=this._localCache)||void 0===i?void 0:i.getInstance())||void 0===s?void 0:s.storeMessage(ge,d.r.SUCCESS)];case 5:f.sent(),null===(c=this.eventHandler)||void 0===c||c.dispatch("onTextMessage",ge),f.label=6;case 6:return[3,28];case 7:return ve=(null===(u=null==j?void 0:j.size)||void 0===u?void 0:u.width)||0,ye=(null===(p=null==j?void 0:j.size)||void 0===p?void 0:p.height)||0,ae=this.useOwnUploadFun?j.remotePath:(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&!this.useOwnUploadFun&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),!(K={id:U,type:F,contentsType:m[j.type],from:z,to:B,url:ae,secret:j.secretKey,filename:j.displayName,thumb:this.useOwnUploadFun?"":"".concat(ae,"&thumbnail=true"),thumb_secret:j.secretKey,file_length:j.fileLength||"",width:ve,height:ye,filetype:j.filetype||"",accessToken:this.token,ext:$,time:V,msgConfig:P.msgConfig,onlineState:H}).delay&&delete K.delay,!K.msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onPictureMessage&&this.onPictureMessage(K),Ee={id:U,type:"img",chatType:G,from:z,to:B,url:ae||"",width:ve,height:ye,secret:j.secretKey||"",thumb:this.useOwnUploadFun?"":"".concat(ae,"&thumbnail=true"),thumb_secret:j.secretKey,file_length:j.fileLength||0,ext:$,time:Number(V),onlineState:H},K.msgConfig&&(Ee.msgConfig=K.msgConfig),ee.length>0&&(Ee.reactions=ee),oe&&(Ee.chatThread=oe),se&&(Ee.chatThreadOverview=se),"chatRoom"===G&&(Ee.priority=Y),Q=Ee,W?[3,9]:[4,null===(y=null===(v=this._localCache)||void 0===v?void 0:v.getInstance())||void 0===y?void 0:y.storeMessage(Ee,d.r.SUCCESS)];case 8:f.sent(),null===(E=this.eventHandler)||void 0===E||E.dispatch("onImageMessage",Ee),f.label=9;case 9:return[3,28];case 10:return ae=this.useOwnUploadFun?j.remotePath:(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&!this.useOwnUploadFun&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),!(K={id:U,type:F,contentsType:m[j.type],from:z,to:B,url:ae,secret:j.secretKey,filename:j.displayName,length:j.duration||"",file_length:j.fileLength||"",filetype:j.filetype||"",accessToken:this.token||"",ext:$,time:V,msgConfig:P.msgConfig,onlineState:H}).delay&&delete K.delay,!K.msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onVideoMessage&&this.onVideoMessage(K),_e={id:U,type:"video",chatType:G,from:z,to:B,url:ae,secret:j.secretKey,filename:j.displayName,length:j.duration||0,file:{},file_length:j.fileLength||0,filetype:j.filetype||"",accessToken:this.token||"",ext:$,time:Number(V),onlineState:H},K.msgConfig&&(_e.msgConfig=K.msgConfig),ee.length>0&&(_e.reactions=ee),oe&&(_e.chatThread=oe),se&&(_e.chatThreadOverview=se),"chatRoom"===G&&(_e.priority=Y),Q=_e,W?[3,12]:[4,null===(b=null===(_=this._localCache)||void 0===_?void 0:_.getInstance())||void 0===b?void 0:b.storeMessage(_e,d.r.SUCCESS)];case 11:f.sent(),null===(S=this.eventHandler)||void 0===S||S.dispatch("onVideoMessage",_e),f.label=12;case 12:return[3,28];case 13:return!(K={id:U,type:F,contentsType:m[j.type],from:z,to:B,addr:j.address,buildingName:j.buildingName,lat:j.latitude,lng:j.longitude,ext:$,time:V,msgConfig:P.msgConfig,onlineState:H}).delay&&delete K.delay,!K.msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onLocationMessage&&this.onLocationMessage(K),be={id:U,type:"loc",chatType:G,from:z,to:B,buildingName:j.buildingName,addr:j.address,lat:j.latitude,lng:j.longitude,ext:$,time:Number(V),onlineState:H},K.msgConfig&&(be.msgConfig=K.msgConfig),ee.length>0&&(be.reactions=ee),oe&&(be.chatThread=oe),se&&(be.chatThreadOverview=se),"chatRoom"===G&&(be.priority=Y),Q=be,W?[3,15]:[4,null===(I=null===(T=this._localCache)||void 0===T?void 0:T.getInstance())||void 0===I?void 0:I.storeMessage(be,d.r.SUCCESS)];case 14:f.sent(),null===(N=this.eventHandler)||void 0===N||N.dispatch("onLocationMessage",be),f.label=15;case 15:return[3,28];case 16:return ae=this.useOwnUploadFun?j.remotePath:(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&!this.useOwnUploadFun&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),!(K={id:U,type:F,contentsType:m[j.type],from:z,to:B,url:ae,secret:j.secretKey,filename:j.displayName,file_length:j.fileLength||"",accessToken:this.token||"",ext:$,length:j.duration,time:V,msgConfig:P.msgConfig,onlineState:H}).delay&&delete K.delay,!K.msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onAudioMessage&&this.onAudioMessage(K),Se={id:U,type:"audio",chatType:G,from:z,to:B,url:ae,secret:j.secretKey,file:{},filename:j.displayName,length:j.duration||0,file_length:j.fileLength||0,filetype:j.filetype||"",accessToken:this.token||"",ext:$,time:Number(V),onlineState:H},K.msgConfig&&(Se.msgConfig=K.msgConfig),ee.length>0&&(Se.reactions=ee),oe&&(Se.chatThread=oe),se&&(Se.chatThreadOverview=se),"chatRoom"===G&&(Se.priority=Y),Q=Se,W?[3,18]:[4,null===(C=null===(w=this._localCache)||void 0===w?void 0:w.getInstance())||void 0===C?void 0:C.storeMessage(Se,d.r.SUCCESS)];case 17:f.sent(),null===(O=this.eventHandler)||void 0===O||O.dispatch("onAudioMessage",Se),f.label=18;case 18:return[3,28];case 19:return ae=this.useOwnUploadFun?j.remotePath:(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&!this.useOwnUploadFun&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),!(K={id:U,type:F,contentsType:m[j.type],from:z,to:B,url:ae,secret:j.secretKey,filename:j.displayName,file_length:j.fileLength,accessToken:this.token||"",ext:$,time:V,msgConfig:P.msgConfig,onlineState:H}).delay&&delete K.delay,!K.msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onFileMessage&&this.onFileMessage(K),Te={id:U,type:"file",chatType:G,from:z,to:B,url:ae,secret:j.secretKey,file:{},filename:j.displayName,length:j.duration||0,file_length:j.fileLength||0,filetype:j.filetype||"",accessToken:this.token||"",ext:$,time:Number(V),onlineState:H},K.msgConfig&&(Te.msgConfig=K.msgConfig),ee.length>0&&(Te.reactions=ee),oe&&(Te.chatThread=oe),se&&(Te.chatThreadOverview=se),"chatRoom"===G&&(Te.priority=Y),Q=Te,W?[3,21]:[4,null===(R=null===(A=this._localCache)||void 0===A?void 0:A.getInstance())||void 0===R?void 0:R.storeMessage(Te,d.r.SUCCESS)];case 20:f.sent(),null===(M=this.eventHandler)||void 0===M||M.dispatch("onFileMessage",Te),f.label=21;case 21:return[3,28];case 22:return!(K={id:U,type:F,contentsType:m[j.type],from:z,to:B,action:j.action,ext:$,time:V,msgConfig:P.msgConfig,onlineState:H}).msgConfig&&delete P.msgConfig,K.error=J,K.errorText=Z,K.errorCode=X,!W&&this.onCmdMessage&&this.onCmdMessage(K),Ie={id:U,type:"cmd",chatType:G,from:z,to:B,action:j.action,ext:$,time:Number(V),onlineState:H},K.msgConfig&&(Ie.msgConfig=K.msgConfig),ee.length>0&&(Ie.reactions=ee),oe&&(Ie.chatThread=oe),se&&(Ie.chatThreadOverview=se),"chatRoom"===G&&(Ie.priority=Y),Q=Ie,W||null===(D=this.eventHandler)||void 0===D||D.dispatch("onCmdMessage",Ie),[3,28];case 23:return Ne={},we={},P.contents[0].customExts&&(Ne=g(P.contents[0].customExts)),P.contents[0].params&&(we=g(P.contents[0].params)),K={id:U,type:F,contentsType:m[j.type],from:z,to:B,customEvent:j.customEvent,params:we,customExts:Ne,ext:$,time:V,onlineState:H},!W&&this.onCustomMessage&&this.onCustomMessage(K),Ce={id:U,type:"custom",chatType:G,from:z,to:B,customEvent:j.customEvent,params:we,customExts:Ne,ext:$,time:Number(V),onlineState:H},K.msgConfig&&(Ce.msgConfig=K.msgConfig),ee.length>0&&(Ce.reactions=ee),oe&&(Ce.chatThread=oe),se&&(Ce.chatThreadOverview=se),"chatRoom"===G&&(Ce.priority=Y),Q=Ce,W?[3,25]:[4,null===(x=null===(k=this._localCache)||void 0===k?void 0:k.getInstance())||void 0===x?void 0:x.storeMessage(Ce,d.r.SUCCESS)];case 24:f.sent(),null===(L=this.eventHandler)||void 0===L||L.dispatch("onCustomMessage",Ce),f.label=25;case 25:return[3,28];case 26:return ae=(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),Oe={id:U,type:"combine",chatType:G,to:B,from:z,ext:$,time:Number(V),onlineState:H,title:j.title||"",summary:j.summary||"",url:ae||"",secret:j.secretKey||"",file_length:j.fileLength||0,filename:j.displayName||"",compatibleText:j.text,combineLevel:j.combineLevel||0},K.msgConfig&&(Oe.msgConfig=K.msgConfig),ee.length>0&&(Oe.reactions=ee),oe&&(Oe.chatThread=oe),se&&(Oe.chatThreadOverview=se),"chatRoom"===G&&(Oe.priority=Y),Q=Oe,!W&&this.eventHandler&&this.eventHandler.dispatch("onCombineMessage",Oe),[3,28];case 27:return l.kg.error("Unknow message type, message:",j),[3,28];case 28:return q?[2,Q]:[2,K]}}))}))}function y(e,t,n){if(this.delivery&&e!==t){var r=this.getUniqueId(),i=new u.Message("delivery",r);i.set({ackId:n,to:e}),l.kg.debug("send delivery ack"),this.send(i.body)}}t.Z=function(e,t,n,r){var o,u,d,m,E,_,b,S,T,I,N,w,C,O,A,R,M,D,k,x;return h(this,void 0,void 0,(function(){var h,L,P,j,U,F,z,B,V,H,G,W,Y,q,K,Q,J,X,Z,$,ee,te,ne,re,ie,oe,se,ae;return f(this,(function(f){switch(f.label){case 0:if(h=new(i())(e.timestamp.low,e.timestamp.high,e.timestamp.unsigned).toString(),L=this.root.lookup("easemob.pb.MessageBody"),P=L.decode(e.payload),j=1,e.meta&&e.meta.length)switch(s.P6.parseNotify(e.meta).is_online){case 0:j=0;break;case 1:j=1;break;default:j=2}else j=3;switch(U=new(i())(e.id.low,e.id.high,e.id.unsigned).toString(),F=P.ackMessageId?new(i())(P.ackMessageId.low,P.ackMessageId.high,P.ackMessageId.unsigned).toString():"",z="",B=P.from&&P.from.name,V=P.to&&P.to.name,l.kg.debug("thirdMessage:",P),P.type){case a.g.SINGLECHAT:return[3,1];case a.g.GROUPCHAT:return[3,2];case a.g.CHATROOM:return[3,3];case a.g.READ_ACK:return[3,4];case a.g.DELIVER_ACK:return[3,5];case a.g.RECALL:return[3,6];case a.g.CHANNEL_ACK:return[3,15];case a.g.EDIT:return[3,16]}return[3,19];case 1:return z="chat","agoraToken"===this.grantType&&(z="singleChat"),this.delivery&&!n&&B!==this.context.userId&&y.call(this,B,V,U),[3,20];case 2:return z="groupchat","agoraToken"===this.grantType&&(z="groupChat"),[3,20];case 3:return z="chatroom","agoraToken"===this.grantType&&(z="chatRoom"),j=1,[3,20];case 4:return z="read_ack",H=void 0,P.ext[0]&&JSON.parse(P.ext[0].stringValue)?(H={id:U,type:"read",from:B,to:V,mid:F,groupReadCount:P.ext[0]&&JSON.parse(P.ext[0].stringValue),ackContent:P.ackContent,onlineState:j},this.onReadMessage&&this.onReadMessage(H),null===(o=this.eventHandler)||void 0===o||o.dispatch("onReadMessage",H),[2]):(H={id:U,type:"read",from:B,to:V,mid:F,onlineState:j},this.onReadMessage&&this.onReadMessage(H),null===(u=this.eventHandler)||void 0===u||u.dispatch("onReadMessage",H),[2]);case 5:return z="deliver_ack",this.onDeliveredMessage&&this.onDeliveredMessage({id:U,type:"delivery",from:B,to:V,mid:F,onlineState:j}),G={id:U,type:"delivery",from:B,to:V,mid:F,onlineState:j},null===(d=this.eventHandler)||void 0===d||d.dispatch("onDeliveredMessage",G),[2];case 6:return z="recall",W={id:U,from:B||"admin",to:V,mid:F,onlineState:j},Y=V===this.user?B:V,[4,null===(E=null===(m=this._localCache)||void 0===m?void 0:m.getInstance())||void 0===E?void 0:E.getMessageByServerMsgId(W.mid)];case 7:return(q=f.sent())?[4,null===(b=null===(_=this._localCache)||void 0===_?void 0:_.getInstance())||void 0===b?void 0:b.removeMsgByServerMsgId(W.mid)]:[3,9];case 8:f.sent(),f.label=9;case 9:return"singleChat"!==(null==q?void 0:q.chatType)&&"groupChat"!==(null==q?void 0:q.chatType)?[3,14]:(K=(null==q?void 0:q.from)===this.user||""===(null==q?void 0:q.from),[4,null===(T=null===(S=this._localCache)||void 0===S?void 0:S.getInstance())||void 0===T?void 0:T.getConversationLastMessage(Y,q.chatType)]);case 10:return Q=f.sent(),[4,null===(N=null===(I=this._localCache)||void 0===I?void 0:I.getInstance())||void 0===N?void 0:N.getConversationBySessionId((0,c.MQ)({conversationId:Y,conversationType:q.chatType}))];case 11:return(J=f.sent())?[4,null===(C=null===(w=this._localCache)||void 0===w?void 0:w.getInstance())||void 0===C?void 0:C.updateLocalConversation((0,c.MQ)({conversationId:Y,conversationType:q.chatType}),{lastMessageId:null==Q?void 0:Q.serverMsgId,unReadCount:(0,c.E7)({conversation:J,isRecallSelfMsg:K,recalledMsgTime:q.time})})]:[3,13];case 12:f.sent(),f.label=13;case 13:f.label=14;case 14:return this.onRecallMessage&&this.onRecallMessage(W),null===(O=this.eventHandler)||void 0===O||O.dispatch("onRecallMessage",W),[2];case 15:return this.onChannelMessage&&this.onChannelMessage({id:U,type:"channel",chatType:"singleChat",from:B,to:V,time:Number(h),onlineState:j}),X={id:U,type:"channel",chatType:"singleChat",from:B,to:V,time:Number(h),onlineState:j},null===(A=this.eventHandler)||void 0===A||A.dispatch("onChannelMessage",X),[2];case 16:return Z={errorCode:0,reason:""},[4,v.call(this,{status:Z,thirdMessage:P,msgBody:P.contents[0],msgId:U,type:z,from:B,to:V,time:h,onlineState:j,ignoreCallback:!0,format:!0})];case 17:return $=f.sent(),ee=!!e.to&&-1!==e.to.domain.indexOf("conference"),$.chatType=ee?"groupChat":"singleChat",te=P.editMessageId&&new(i())(P.editMessageId.low,P.editMessageId.high,P.editMessageId.unsigned).toString(),ne={id:te,type:$.type,chatType:$.chatType,msg:$.msg,to:$.to,from:$.from,time:$.time,modifiedInfo:$.modifiedInfo},$.translations&&(ne.translations=$.translations),[4,null===(M=null===(R=this._localCache)||void 0===R?void 0:R.getInstance())||void 0===M?void 0:M.getMessageByServerMsgId(te)];case 18:return"txt"===(null==(re=f.sent())?void 0:re.type)&&(null===(k=null===(D=this._localCache)||void 0===D?void 0:D.getInstance())||void 0===k||k.putMessageToDB(p(p({},re),{msg:ne.msg,modifiedInfo:ne.modifiedInfo,translations:ne.translations}))),"txt"===$.type&&(null===(x=this.eventHandler)||void 0===x||x.dispatch("onModifiedMessage",ne)),[2];case 19:return l.kg.error("unexpected message type: ".concat(P.type)),[2];case 20:ie="normal","chat"===z.toLowerCase()||"singleChat"===z?oe="singleChat":"groupchat"===z.toLowerCase()||"groupChat"===z?oe="groupChat":(oe="chatRoom",j=1,e.ext&&(se=g([e.ext]),ie=0===se.chatroom_msg_tag?"high":2===se.chatroom_msg_tag?"low":"normal")),ae=0,f.label=21;case 21:return ae<P.contents.length?[4,v.call(this,{status:t,thirdMessage:P,msgBody:P.contents[ae],msgId:U,type:z,from:B,to:V,time:h,onlineState:j,chatType:oe,ignoreCallback:n,priority:ie,format:r})]:[3,24];case 22:return[2,f.sent()];case 23:return ae++,[3,21];case 24:return[2]}}))}))}},4968:function(e,t,n){"use strict";n(8309);var r,i=n(7360),o=n(2071),s=n(1595);!function(e){e[e.Add=2]="Add",e[e.Remove=3]="Remove",e[e.Accept=4]="Accept",e[e.Decline=5]="Decline",e[e.Ban=6]="Ban",e[e.Allow=7]="Allow"}(r||(r={}));var a={operatRoster:function(e,t,n,a){var c=[],l=this.root.lookup("easemob.pb.RosterBody"),u=l.decode(c);switch(t){case"add":u.operation=r.Add;break;case"remove":u.operation=r.Remove;break;case"accept":u.operation=r.Accept;break;case"decline":u.operation=r.Decline;break;case"ban":u.operation=r.Ban;break;case"allow":u.operation=r.Allow;break;default:i.kg.error("operatRoster:",t)}u.from=this.context.jid;var d=[];if("string"==typeof e.to)d.push({appKey:this.appKey||this.context.appKey,name:e.to,domain:"easemob.com"});else if(e.to instanceof Array)for(var p=0;p<e.to.length;p++)d.push({appKey:this.appKey,name:e.to[p],domain:"easemob.com"});u.to=d,u.reason=e.message||"",u=l.encode(u).finish();var h=this.root.lookup("easemob.pb.Meta").decode(c);h.id=e.id||this.getUniqueId();var f=this.dataReport.geOperateFun({operationName:s.fI[t]});o.Nl.size<=o.F3&&o.Nl.set(h.id,{rpt:f,requestName:s.fI[t],resolve:n,reject:a}),h.from=this.context.jid,h.to={domain:"@easemob.com"},h.ns=3,h.payload=u;var m=this.root.lookup("easemob.pb.CommSyncUL"),g=m.decode(c);g.meta=h,g=m.encode(g).finish();var v=this.root.lookup("easemob.pb.MSync"),y=v.decode(c);if(y.version=this.version,y.encryptType=[0],y.command=0,y.guid=this.jid,y.payload=g,y=v.encode(y).finish(),"miniCore"===this.name)this.sock.send(y);else{var E=this.mSync.base64transform(y);this.sock.send(E)}},handleRosterMsg:function(e){var t,n,r,o,s,a,c=this.root.lookup("easemob.pb.RosterBody").decode(e.payload),l={type:"",to:c.to[0].name,from:c.from.name,status:c.reason};switch(c.operation){case 2:l.type="subscribe",this.onContactInvited&&this.onContactInvited(l),null===(t=this.eventHandler)||void 0===t||t.dispatch("onContactInvited",l);break;case 3:l.type="unsubscribed",this.onContactDeleted&&this.onContactDeleted(l),null===(n=this.eventHandler)||void 0===n||n.dispatch("onContactDeleted",l);break;case 4:l.type="subscribed",this.onContactAdded&&this.onContactAdded(l),null===(r=this.eventHandler)||void 0===r||r.dispatch("onContactAdded",l);break;case 5:l.type="unsubscribed",this.onContactRefuse&&this.onContactRefuse(l),null===(o=this.eventHandler)||void 0===o||o.dispatch("onContactRefuse",l);break;case 6:case 7:break;case 8:l.type="subscribed",this.onContactAgreed&&this.onContactAgreed(l),null===(s=this.eventHandler)||void 0===s||s.dispatch("onContactAgreed",l);break;case 9:l.type="unsubscribed",this.onContactRefuse&&this.onContactRefuse(l),null===(a=this.eventHandler)||void 0===a||a.dispatch("onContactRefuse",l);break;default:i.kg.error("handleRosterMsg:",c)}this.onPresence&&l.type&&this.onPresence(l)}};t.Z=a},7288:function(e,t,n){"use strict";var r;n.d(t,{r:function(){return r}}),function(e){e[e.CREATE=0]="CREATE",e[e.FAIL=1]="FAIL",e[e.INPROGRESS=2]="INPROGRESS",e[e.SUCCESS=3]="SUCCESS"}(r||(r={}))},9743:function(e,t,n){"use strict";n.d(t,{E7:function(){return i},MQ:function(){return r},un:function(){return o}}),n(2222);var r=function(e){return"".concat(e.conversationType,"-").concat(e.conversationId)},i=function(e){var t=e.isRecallSelfMsg,n=e.conversation,r=e.recalledMsgTime,i=n.unReadCount,o=void 0===i?0:i,s=n.unreadCountClearTimestamp;return t||(void 0===s?0:s)>r?o:o&&o>0?o-1:0},o=function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}},7360:function(e,t,n){"use strict";function r(){console.log&&(console.log.apply?console.log.apply(console,Array.prototype.slice.call(arguments)):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}n.d(t,{kg:function(){return h}}),n(7042),n(2222),n(8309),n(9600),n(6992),n(1539),n(8783),n(3948),n(285),n(1637),n(4812),n(3710),n(9554),n(2772),n(4916),n(2526),n(1817),n(2165);var i="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var s,a=function(){},c={};!function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));var l=function(){function e(e,t,n){this.name=e||"defaultLogger",this.currentLevel=0,this.useCookiePersist=!1,this.storageLogLevelKey="loglevel",this.levels=s,this.logMethods=["trace","debug","info","warn","error"],this.methodFactory=n||this.defaultMethodFactory;var r=this._getPersistedLevel();null==r&&(r=null===t?"WARN":t),this.logs=[],this.config={useCache:!1,maxCache:3145728,color:"",background:""},this.logBytes=0,this.setLevel(r,!1,"")}return e.prototype.setConfig=function(e){this.config=e},e.prototype.getLevel=function(){return this.currentLevel},e.prototype.setLevel=function(e,t,n){if("string"==typeof e&&(e=s[e]),void 0===e&&(e=0),!("number"==typeof e&&e>=0&&e<=this.levels.SILENT))throw Error("log.setLevel() called with invalid level: "+e);if(this.currentLevel=e,!1!==t&&this._persistLevel(e),this.replaceLoggingMethods(e,n),"undefined"==typeof console&&e<s.SILENT)throw Error("No console available for logging")},e.prototype.setDefaultLevel=function(e){this._getPersistedLevel()||this.setLevel(e,!1,"")},e.prototype.enableAll=function(e){this.setLevel(this.levels.TRACE,!0,"")},e.prototype.disableAll=function(e){this.setLevel(this.levels.SILENT,!0,"")},e.prototype.getLogs=function(){return this.logs},e.prototype.download=function(){if("undefined"!=typeof window&&"undefined"!=typeof document){var e=this.getLogs().join("\n"),t=new Blob([e],{type:"text/plain;charset=UTF-8"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=n,r.setAttribute("download","sdklog"),document.body.appendChild(r),r.click()}},e.prototype._bindMethod=function(e,t,n){var r=this,i=e[t],o=this.getTime();if(n)return this._cacheLog;if("function"==typeof i.bind)return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var s=r.getTime();i.call.apply(i,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e,"".concat(s," IM SDK [").concat("log"===t?"debug":t,"]: ")],n,!1)),r.onLog&&r.onLog({time:s,level:"log"===t?"debug":t,logs:n})};try{return Function.prototype.bind.call(i,e,"".concat(o," IM SDK [").concat("log"===t?"debug":t,"]: "))}catch(t){return function(){return Function.prototype.apply.apply(i,[e,arguments])}}},e.prototype.getTime=function(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()},e.prototype._cacheLog=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(new Date).toLocaleString()+": ",r="";e.forEach((function(e){"object"===o(e)?r+=JSON.stringify(e)+" ":r+=e+" "})),this._cacheLogCall(n+r)},e.prototype._cacheLogCall=function(e){var t=u(e),n=this.logBytes+t,r=this.config.maxCache;if(!(t>=r)){if(n<r)this.logBytes+=t;else for(var i=n-r,o=0;o<i;){var s=this.logs.shift();void 0!==s&&(o+=u(s))}this.logs.push(e)}},e.prototype._getPersistedLevel=function(){var e;if("undefined"==typeof window)return 5;if("undefined"===(e=window&&window.localStorage&&window.localStorage[this.storageLogLevelKey])){var t=window.document.cookie,n=t.indexOf(encodeURIComponent(this.storageLogLevelKey));-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}return e||5},e.prototype._persistLevel=function(e){var t=this.logMethods[e]||"SILENT";"undefined"!=typeof window&&(window.localStorage&&(window.localStorage[this.storageLogLevelKey]=t),this.useCookiePersist&&(window.document.cookie=encodeURIComponent(this.storageLogLevelKey)+"="+t+";"))},e.prototype.replaceLoggingMethods=function(e,t){for(var n=0;n<this.logMethods.length;n++){var r=this.logMethods[n];this[r]=n<e?a:this.methodFactory(r,e,t)}this.log=this.debug},e.prototype.defaultMethodFactory=function(e,t,n){return this.realMethod(e)||this.enableLoggingWhenConsoleArrives.apply(this,[e,t,n])},e.prototype.realMethod=function(e){return"debug"===e&&(e="log"),"undefined"!=typeof console&&("trace"===e&&i?r:void 0!==console[e]?this._bindMethod(console,e,this.config.useCache):void 0!==console.log?this._bindMethod(console,"log",this.config.useCache):a)},e.prototype.enableLoggingWhenConsoleArrives=function(e,t,n){return function(){"undefined"!=typeof console&&(this.replaceLoggingMethods.call(this,t,n),this[e].apply(this,arguments))}.bind(this)},e}();function u(e){for(var t=e.length,n=0;n<e.length;n++)e.charCodeAt(n)>255&&t++;return t}var d=new l;d.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");return this};var p="undefined"!=typeof window?window.log:void 0;d.noConflict=function(){return"undefined"!=typeof window&&window.log===d&&(window.log=p),d},d.getLoggers=function(){return c};var h=d},2449:function(e,t,n){"use strict";n.d(t,{Message:function(){return g}});var r=n(4370),i=function(){function e(e){var t=e.id;this.id=t,this.type=e.type}return e.prototype.set=function(e){this.body={id:this.id,ackId:e.id,type:"read",to:e.to,from:e.from||"",chatType:e.chatType}},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType,ackId:e.id,type:"read",to:e.to,from:e.from||"",ackContent:e.ackContent,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}(),o=function(){function e(e){this.id=e.id,this.type=e.type}return e.prototype.set=function(e){this.body={id:this.id,ackId:e.ackId,type:"delivery",to:e.to,from:e.from||""}},e.create=function(e){return{id:r.P6.getUniqueId(),ackId:e.ackId,type:"delivery",to:e.to,from:e.from||"",isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}(),s=(n(3843),n(3710),function(){function e(e){var t=e.type,n=e.id;this.id=n,this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"channel",to:e.to,from:e.from||"",time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),type:"channel",chatType:e.chatType||"singleChat",to:e.to,from:e.from||"",time:Date.now(),isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}()),a=(n(9753),function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t,this.value=""}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"txt",to:e.to,msg:e.msg,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),isChatThread:e.isChatThread},this.value=e.msg},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){var t,n;return(null===(t=e.msgConfig)||void 0===t?void 0:t.languages)&&Array.isArray(null===(n=e.msgConfig)||void 0===n?void 0:n.languages),{type:"txt",id:r.P6.getUniqueId(),msg:e.msg,to:e.to,from:e.from||"",chatType:e.chatType,ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}()),c=function(){function e(e){var t=e.type,n=e.id;this.id=n||r.P6.getUniqueId(),this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"cmd",to:e.to,action:e.action,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),type:"cmd",to:e.to,from:e.from||"",chatType:e.chatType||"singleChat",action:e.action,time:Date.now(),ext:e.ext,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),l=function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"custom",to:e.to,customEvent:e.customEvent,customExts:e.customExts,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType||"singleChat",type:"custom",to:e.to,customEvent:e.customEvent,customExts:e.customExts,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),u=function(){function e(e){var t=e.type,n=e.id;this.id=n||r.P6.getUniqueId(),this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"loc",to:e.to,addr:e.addr,buildingName:e.buildingName,lat:e.lat,lng:e.lng,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType||"singleChat",type:"loc",to:e.to,addr:e.addr,buildingName:e.buildingName,lat:e.lat,lng:e.lng,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),d=function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&r.P6.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"img",file:e.file,width:e.width,height:e.height,to:e.to,from:e.from||"",roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType,type:"img",url:e.url,width:e.width,height:e.height,file:e.file,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,file_length:e.file_length,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList,thumbnailWidth:e.thumbnailWidth,thumbnailHeight:e.thumbnailHeight}},e}(),p=function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&r.P6.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"audio",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType,type:"audio",filename:e.filename,length:e.length,file:e.file,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,file_length:e.file_length,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),h=function(){function e(e){var t=e.type,n=e.id;this.id=n,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&r.P6.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"video",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),apiUrl:e.apiUrl,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType||"singleChat",type:"video",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),f=function(){function e(e){var t=e.type,n=e.id;this.id=n,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&r.P6.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"file",file:e.file,filename:e.filename,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType||"singleChat",type:"file",file:e.file,filename:e.filename,fileInputId:e.fileInputId,file_length:e.file_length,to:e.to,from:e.from||"",ext:e.ext,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),m=function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t,this.value=""}return e.create=function(e){return{type:"combine",id:r.P6.getUniqueId(),to:e.to,from:e.from||"",chatType:e.chatType,ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList,compatibleText:e.compatibleText,title:e.title,summary:e.summary,messageList:e.messageList,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete}},e}(),g=function(){function e(t,n){return this.type=t,this.id=n||r.P6.getUniqueId(),e.createOldMsg({type:t,id:this.id})}return e.createOldMsg=function(e){switch(e.type){case"read":return new i({type:"read",id:e.id});case"delivery":return new o({type:"delivery",id:e.id});case"channel":return new s({type:"channel",id:e.id});case"txt":return new a({type:"txt",id:e.id});case"cmd":return new c({type:"cmd",id:e.id});case"custom":return new l({type:"custom",id:e.id});case"loc":return new u({type:"loc",id:e.id});case"img":return new d({type:"img",id:e.id});case"audio":return new p({type:"audio",id:e.id});case"video":return new h({type:"video",id:e.id});case"file":return new f({type:"file",id:e.id})}},e.create=function(e){return"txt"!==(t=e).type||"version"in t?function(e){return"img"===e.type&&!("version"in e)}(e)?d.create(e):function(e){return"cmd"===e.type&&!("version"in e)}(e)?c.create(e):function(e){return"file"===e.type&&!("version"in e)}(e)?f.create(e):function(e){return"audio"===e.type&&!("version"in e)}(e)?p.create(e):function(e){return"video"===e.type&&!("version"in e)}(e)?h.create(e):function(e){return"custom"===e.type&&!("version"in e)}(e)?l.create(e):function(e){return"loc"===e.type&&!("version"in e)}(e)?u.create(e):function(e){return"channel"===e.type&&!("version"in e)}(e)?s.create(e):function(e){return"delivery"===e.type&&!("version"in e)}(e)?o.create(e):function(e){return"read"===e.type&&!("version"in e)}(e)?i.create(e):function(e){return"combine"===e.type&&!("version"in e)}(e)?m.create(e):{}:a.create(e);var t},e.prototype.set=function(e){},e}()},5531:function(e,t,n){"use strict";var r;n.d(t,{E:function(){return r}}),function(e){e[e.REQUEST_SUCCESS=0]="REQUEST_SUCCESS",e[e.REQUEST_TIMEOUT=-1]="REQUEST_TIMEOUT",e[e.REQUEST_UNKNOWN=-2]="REQUEST_UNKNOWN",e[e.REQUEST_PARAMETER_ERROR=-3]="REQUEST_PARAMETER_ERROR",e[e.REQUEST_ABORT=-4]="REQUEST_ABORT",e[e.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR=0]="WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_OPEN_ERROR=1]="WEBIM_CONNCTION_OPEN_ERROR",e[e.WEBIM_CONNCTION_AUTH_ERROR=2]="WEBIM_CONNCTION_AUTH_ERROR",e[e.WEBIM_CONNCTION_OPEN_USERGRID_ERROR=3]="WEBIM_CONNCTION_OPEN_USERGRID_ERROR",e[e.WEBIM_CONNCTION_ATTACH_ERROR=4]="WEBIM_CONNCTION_ATTACH_ERROR",e[e.WEBIM_CONNCTION_ATTACH_USERGRID_ERROR=5]="WEBIM_CONNCTION_ATTACH_USERGRID_ERROR",e[e.WEBIM_CONNCTION_REOPEN_ERROR=6]="WEBIM_CONNCTION_REOPEN_ERROR",e[e.WEBIM_CONNCTION_SERVER_CLOSE_ERROR=7]="WEBIM_CONNCTION_SERVER_CLOSE_ERROR",e[e.WEBIM_CONNCTION_SERVER_ERROR=8]="WEBIM_CONNCTION_SERVER_ERROR",e[e.WEBIM_CONNCTION_IQ_ERROR=9]="WEBIM_CONNCTION_IQ_ERROR",e[e.WEBIM_CONNCTION_PING_ERROR=10]="WEBIM_CONNCTION_PING_ERROR",e[e.WEBIM_CONNCTION_NOTIFYVERSION_ERROR=11]="WEBIM_CONNCTION_NOTIFYVERSION_ERROR",e[e.WEBIM_CONNCTION_GETROSTER_ERROR=12]="WEBIM_CONNCTION_GETROSTER_ERROR",e[e.WEBIM_CONNCTION_CROSSDOMAIN_ERROR=13]="WEBIM_CONNCTION_CROSSDOMAIN_ERROR",e[e.WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES=14]="WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES",e[e.WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR=15]="WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR",e[e.WEBIM_CONNCTION_DISCONNECTED=16]="WEBIM_CONNCTION_DISCONNECTED",e[e.WEBIM_CONNCTION_AJAX_ERROR=17]="WEBIM_CONNCTION_AJAX_ERROR",e[e.WEBIM_CONNCTION_JOINROOM_ERROR=18]="WEBIM_CONNCTION_JOINROOM_ERROR",e[e.WEBIM_CONNCTION_GETROOM_ERROR=19]="WEBIM_CONNCTION_GETROOM_ERROR",e[e.WEBIM_CONNCTION_GETROOMINFO_ERROR=20]="WEBIM_CONNCTION_GETROOMINFO_ERROR",e[e.WEBIM_CONNCTION_GETROOMMEMBER_ERROR=21]="WEBIM_CONNCTION_GETROOMMEMBER_ERROR",e[e.WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR=22]="WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR",e[e.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR=23]="WEBIM_CONNCTION_LOAD_CHATROOM_ERROR",e[e.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR=24]="WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR",e[e.WEBIM_CONNCTION_JOINCHATROOM_ERROR=25]="WEBIM_CONNCTION_JOINCHATROOM_ERROR",e[e.WEBIM_CONNCTION_QUITCHATROOM_ERROR=26]="WEBIM_CONNCTION_QUITCHATROOM_ERROR",e[e.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR=27]="WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR=28]="WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR=29]="WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR=30]="WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_CALLBACK_INNER_ERROR=31]="WEBIM_CONNCTION_CALLBACK_INNER_ERROR",e[e.WEBIM_CONNCTION_CLIENT_OFFLINE=32]="WEBIM_CONNCTION_CLIENT_OFFLINE",e[e.WEBIM_CONNCTION_CLIENT_LOGOUT=33]="WEBIM_CONNCTION_CLIENT_LOGOUT",e[e.WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR=34]="WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR",e[e.WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP=35]="WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP",e[e.WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP=36]="WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP",e[e.WEBIM_CONNECTION_ACCEPT_JOIN_GROUP=37]="WEBIM_CONNECTION_ACCEPT_JOIN_GROUP",e[e.WEBIM_CONNECTION_DECLINE_JOIN_GROUP=38]="WEBIM_CONNECTION_DECLINE_JOIN_GROUP",e[e.WEBIM_CONNECTION_CLOSED=39]="WEBIM_CONNECTION_CLOSED",e[e.WEBIM_CONNECTION_ERROR=40]="WEBIM_CONNECTION_ERROR",e[e.MAX_LIMIT=50]="MAX_LIMIT",e[e.MESSAGE_NOT_FOUND=51]="MESSAGE_NOT_FOUND",e[e.NO_PERMISSION=52]="NO_PERMISSION",e[e.OPERATION_UNSUPPORTED=53]="OPERATION_UNSUPPORTED",e[e.OPERATION_NOT_ALLOWED=54]="OPERATION_NOT_ALLOWED",e[e.LOCAL_DB_OPERATION_FAILED=55]="LOCAL_DB_OPERATION_FAILED",e[e.WEBIM_UPLOADFILE_BROWSER_ERROR=100]="WEBIM_UPLOADFILE_BROWSER_ERROR",e[e.WEBIM_UPLOADFILE_ERROR=101]="WEBIM_UPLOADFILE_ERROR",e[e.WEBIM_UPLOADFILE_NO_LOGIN=102]="WEBIM_UPLOADFILE_NO_LOGIN",e[e.WEBIM_UPLOADFILE_NO_FILE=103]="WEBIM_UPLOADFILE_NO_FILE",e[e.WEBIM_DOWNLOADFILE_ERROR=200]="WEBIM_DOWNLOADFILE_ERROR",e[e.WEBIM_DOWNLOADFILE_NO_LOGIN=201]="WEBIM_DOWNLOADFILE_NO_LOGIN",e[e.WEBIM_DOWNLOADFILE_BROWSER_ERROR=202]="WEBIM_DOWNLOADFILE_BROWSER_ERROR",e[e.PARSE_FILE_ERROR=203]="PARSE_FILE_ERROR",e[e.USER_NOT_FOUND=204]="USER_NOT_FOUND",e[e.MESSAGE_PARAMETER_ERROR=205]="MESSAGE_PARAMETER_ERROR",e[e.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE=206]="WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE",e[e.WEBIM_CONNCTION_USER_REMOVED=207]="WEBIM_CONNCTION_USER_REMOVED",e[e.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD=216]="WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD",e[e.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE=217]="WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE",e[e.USER_MUTED_BY_ADMIN=219]="USER_MUTED_BY_ADMIN",e[e.USER_NOT_FRIEND=221]="USER_NOT_FRIEND",e[e.WEBIM_MESSAGE_REC_TEXT=300]="WEBIM_MESSAGE_REC_TEXT",e[e.WEBIM_MESSAGE_REC_TEXT_ERROR=301]="WEBIM_MESSAGE_REC_TEXT_ERROR",e[e.WEBIM_MESSAGE_REC_EMOTION=302]="WEBIM_MESSAGE_REC_EMOTION",e[e.WEBIM_MESSAGE_REC_PHOTO=303]="WEBIM_MESSAGE_REC_PHOTO",e[e.WEBIM_MESSAGE_REC_AUDIO=304]="WEBIM_MESSAGE_REC_AUDIO",e[e.WEBIM_MESSAGE_REC_AUDIO_FILE=305]="WEBIM_MESSAGE_REC_AUDIO_FILE",e[e.WEBIM_MESSAGE_REC_VEDIO=306]="WEBIM_MESSAGE_REC_VEDIO",e[e.WEBIM_MESSAGE_REC_VEDIO_FILE=307]="WEBIM_MESSAGE_REC_VEDIO_FILE",e[e.WEBIM_MESSAGE_REC_FILE=308]="WEBIM_MESSAGE_REC_FILE",e[e.WEBIM_MESSAGE_SED_TEXT=309]="WEBIM_MESSAGE_SED_TEXT",e[e.WEBIM_MESSAGE_SED_EMOTION=310]="WEBIM_MESSAGE_SED_EMOTION",e[e.WEBIM_MESSAGE_SED_PHOTO=311]="WEBIM_MESSAGE_SED_PHOTO",e[e.WEBIM_MESSAGE_SED_AUDIO=312]="WEBIM_MESSAGE_SED_AUDIO",e[e.WEBIM_MESSAGE_SED_AUDIO_FILE=313]="WEBIM_MESSAGE_SED_AUDIO_FILE",e[e.WEBIM_MESSAGE_SED_VEDIO=314]="WEBIM_MESSAGE_SED_VEDIO",e[e.WEBIM_MESSAGE_SED_VEDIO_FILE=315]="WEBIM_MESSAGE_SED_VEDIO_FILE",e[e.WEBIM_MESSAGE_SED_FILE=316]="WEBIM_MESSAGE_SED_FILE",e[e.WEBIM_MESSAGE_SED_ERROR=317]="WEBIM_MESSAGE_SED_ERROR",e[e.STATUS_INIT=400]="STATUS_INIT",e[e.STATUS_DOLOGIN_USERGRID=401]="STATUS_DOLOGIN_USERGRID",e[e.STATUS_DOLOGIN_IM=402]="STATUS_DOLOGIN_IM",e[e.STATUS_OPENED=403]="STATUS_OPENED",e[e.STATUS_CLOSING=404]="STATUS_CLOSING",e[e.STATUS_CLOSED=405]="STATUS_CLOSED",e[e.STATUS_ERROR=406]="STATUS_ERROR",e[e.SERVER_BUSY=500]="SERVER_BUSY",e[e.MESSAGE_INCLUDE_ILLEGAL_CONTENT=501]="MESSAGE_INCLUDE_ILLEGAL_CONTENT",e[e.MESSAGE_EXTERNAL_LOGIC_BLOCKED=502]="MESSAGE_EXTERNAL_LOGIC_BLOCKED",e[e.SERVER_UNKNOWN_ERROR=503]="SERVER_UNKNOWN_ERROR",e[e.MESSAGE_RECALL_TIME_LIMIT=504]="MESSAGE_RECALL_TIME_LIMIT",e[e.SERVICE_NOT_ENABLED=505]="SERVICE_NOT_ENABLED",e[e.SERVICE_NOT_ALLOW_MESSAGING=506]="SERVICE_NOT_ALLOW_MESSAGING",e[e.SERVICE_NOT_ALLOW_MESSAGING_MUTE=507]="SERVICE_NOT_ALLOW_MESSAGING_MUTE",e[e.MESSAGE_MODERATION_BLOCKED=508]="MESSAGE_MODERATION_BLOCKED",e[e.MESSAGE_CURRENT_LIMITING=509]="MESSAGE_CURRENT_LIMITING",e[e.MESSAGE_WEBSOCKET_DISCONNECTED=510]="MESSAGE_WEBSOCKET_DISCONNECTED",e[e.MESSAGE_SIZE_LIMIT=511]="MESSAGE_SIZE_LIMIT",e[e.GROUP_NOT_EXIST=605]="GROUP_NOT_EXIST",e[e.GROUP_NOT_JOINED=602]="GROUP_NOT_JOINED",e[e.GROUP_MEMBERS_FULL=606]="GROUP_MEMBERS_FULL",e[e.PERMISSION_DENIED=603]="PERMISSION_DENIED",e[e.WEBIM_LOAD_MSG_ERROR=604]="WEBIM_LOAD_MSG_ERROR",e[e.GROUP_ALREADY_JOINED=601]="GROUP_ALREADY_JOINED",e[e.GROUP_MEMBERS_LIMIT=607]="GROUP_MEMBERS_LIMIT",e[e.GROUP_IS_DISABLED=608]="GROUP_IS_DISABLED",e[e.GROUP_MEMBER_ATTRIBUTES_SET_FAILED=609]="GROUP_MEMBER_ATTRIBUTES_SET_FAILED",e[e.REST_PARAMS_STATUS=700]="REST_PARAMS_STATUS",e[e.CHATROOM_NOT_JOINED=702]="CHATROOM_NOT_JOINED",e[e.CHATROOM_MEMBERS_FULL=704]="CHATROOM_MEMBERS_FULL",e[e.CHATROOM_NOT_EXIST=705]="CHATROOM_NOT_EXIST",e[e.SDK_RUNTIME_ERROR=999]="SDK_RUNTIME_ERROR",e[e.PRESENCE_PARAM_EXCEED=1100]="PRESENCE_PARAM_EXCEED",e[e.REACTION_ALREADY_ADDED=1101]="REACTION_ALREADY_ADDED",e[e.REACTION_CREATING=1102]="REACTION_CREATING",e[e.REACTION_OPERATION_IS_ILLEGAL=1103]="REACTION_OPERATION_IS_ILLEGAL",e[e.TRANSLATION_NOT_VALID=1200]="TRANSLATION_NOT_VALID",e[e.TRANSLATION_TEXT_TOO_LONG=1201]="TRANSLATION_TEXT_TOO_LONG",e[e.TRANSLATION_FAILED=1204]="TRANSLATION_FAILED",e[e.THREAD_NOT_EXIST=1300]="THREAD_NOT_EXIST",e[e.THREAD_ALREADY_EXIST=1301]="THREAD_ALREADY_EXIST",e[e.MODIFY_MESSAGE_NOT_EXIST=1302]="MODIFY_MESSAGE_NOT_EXIST",e[e.MODIFY_MESSAGE_FORMAT_ERROR=1303]="MODIFY_MESSAGE_FORMAT_ERROR",e[e.MODIFY_MESSAGE_FAILED=1304]="MODIFY_MESSAGE_FAILED",e[e.CONVERSATION_NOT_EXIST=1400]="CONVERSATION_NOT_EXIST"}(r||(r={}))},4370:function(e,t,n){"use strict";n.d(t,{iw:function(){return g},hj:function(){return d},LR:function(){return b},cT:function(){return _},P6:function(){return T}}),n(9601),n(1539),n(8674),n(3710),n(7941),n(6699),n(7042),n(2772),n(9714),n(9653),n(6992),n(8783),n(3948),n(285),n(1637),n(8309),n(4986),n(2023);var r=n(5531),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o=function(e,t,n,o){var s,a,c,l,u,d,p,h,f,m,g,v,y,E,_,b,S,T,I,N,w=e.response;w&&"string"==typeof w&&(w=JSON.parse(w));var C=e.status,O={elapse:o,httpCode:C,errDesc:null==w?void 0:w.error_description};if(400===C){if(40002===w.error_code)return void t({type:r.E.THREAD_ALREADY_EXIST,message:null==w?void 0:w.error_description,extraInfo:O});if(40009===w.error_code)return void t({type:r.E.OPERATION_UNSUPPORTED,message:null==w?void 0:w.error_description,extraInfo:O});if(60005===w.error_code)return void t({type:r.E.GROUP_MEMBER_ATTRIBUTES_SET_FAILED,message:(null==w?void 0:w.desc)||(null==w?void 0:w.error_description),extraInfo:O});if(60010===w.error_code)return void((null==w?void 0:w.error_description.includes("exceeds chatgroup user metadata single value limit"))?t({type:r.E.MAX_LIMIT,message:(null==w?void 0:w.desc)||w.error_description,extraInfo:O}):t({type:r.E.NO_PERMISSION,message:(null==w?void 0:w.desc)||w.error_description,extraInfo:O}));if(60011===w.error_code)return void t({type:r.E.CHATROOM_NOT_JOINED,message:null==w?void 0:w.desc,extraInfo:O});if(60006===w.error_code||60007===w.error_code||60009===w.error_code||60012===w.error_code)return void t({type:r.E.MAX_LIMIT,message:(null==w?void 0:w.desc)||(null==w?void 0:w.error_description),extraInfo:O});if(null===(s=w.error_description)||void 0===s?void 0:s.includes("are not members of this group"))return(null===(a=e.responseURL)||void 0===a?void 0:a.includes("chatgroups"))?t({type:r.E.GROUP_NOT_JOINED,data:e.response||e.responseText,message:w.error_description,extraInfo:O}):t({type:r.E.CHATROOM_NOT_JOINED,data:e.response||e.responseText,message:w.error_description,extraInfo:O}),void n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,message:null==w?void 0:w.error_description,data:e.responseText,extraInfo:O});if("the app not open presence"===(null==w?void 0:w.result))return void t({type:r.E.SERVICE_NOT_ENABLED,message:null==w?void 0:w.result,extraInfo:O});switch(null==w?void 0:w.error_description){case"the user is already operation this message":t({type:r.E.REACTION_ALREADY_ADDED,message:null==w?void 0:w.error_description,extraInfo:O});break;case"The quantity has exceeded the limit!":t({type:r.E.MAX_LIMIT,message:null==w?void 0:w.error_description,extraInfo:O});break;case"The user not in this group!":t({type:r.E.GROUP_NOT_JOINED,message:null==w?void 0:w.error_description,extraInfo:O});break;case"the user operation is illegal!":t({type:r.E.REACTION_OPERATION_IS_ILLEGAL,message:null==w?void 0:w.error_description,extraInfo:O});break;case"this appKey is not open reaction service!":case"this appKey not open message roaming":t({type:r.E.SERVICE_NOT_ENABLED,message:null==w?void 0:w.error_description,extraInfo:O});break;case"this message is creating reaction, please try again.":t({type:r.E.REACTION_CREATING,message:null==w?void 0:w.error_description,extraInfo:O});break;case"groupId can not be null!":t({type:r.E.GROUP_NOT_EXIST,message:null==w?void 0:w.error_description,extraInfo:O});break;case"The input text is too long.":t({type:r.E.TRANSLATION_TEXT_TOO_LONG,message:null==w?void 0:w.error_description,extraInfo:O});break;case"The target language is not valid.":t({type:r.E.TRANSLATION_NOT_VALID,message:null==w?void 0:w.error_description,extraInfo:O});break;case"report failed, get message by id failed":t({type:r.E.MESSAGE_NOT_FOUND,message:null==w?void 0:w.error_description,extraInfo:O});break;case"ext is too big ":t({type:r.E.PRESENCE_PARAM_EXCEED,message:null==w?void 0:w.error_description,extraInfo:O});break;case"Request body not readable.Please check content type is correct!":t({type:r.E.REQUEST_PARAMETER_ERROR,message:null==w?void 0:w.error_description,extraInfo:O});break;default:t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,message:null==w?void 0:w.error_description,data:e.responseText,extraInfo:O}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,message:null==w?void 0:w.error_description,data:e.responseText,extraInfo:O})}}else if(401===C)40001===w.error_code||60001===w.error_code||"Unable to authenticate (OAuth)"===w.error_description?t({type:r.E.NO_PERMISSION,message:null==w?void 0:w.error_description,extraInfo:O}):(n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:O}),t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:O}));else if(403===C)4e4===w.error_code||60004===w.error_code||15002===w.error_code?t({type:r.E.SERVICE_NOT_ENABLED,message:null==w?void 0:w.error_description,extraInfo:O}):40003===w.error_code||40004===w.error_code?t({type:r.E.THREAD_ALREADY_EXIST,message:null==w?void 0:w.error_description,extraInfo:O}):40005===w.error_code||40007===w.error_code||91002===w.error_code?t({type:r.E.MAX_LIMIT,message:null==w?void 0:w.error_description,extraInfo:O}):60002===w.error_code&&t({type:r.E.PERMISSION_DENIED,message:null==w?void 0:w.error_description,extraInfo:O}),"group member list is full!"===w.error_description?(null===(c=e.responseURL)||void 0===c?void 0:c.includes("chatgroups"))?t({type:r.E.GROUP_MEMBERS_FULL,data:e.response||e.responseText,message:w.error_description,extraInfo:O}):t({type:r.E.CHATROOM_MEMBERS_FULL,data:e.response||e.responseText,message:w.error_description,extraInfo:O}):(null===(l=w.error_description)||void 0===l?void 0:l.includes(w.error_description.includes("already in group")))?(null===(u=e.responseURL)||void 0===u?void 0:u.includes("chatgroups"))&&t({type:r.E.GROUP_ALREADY_JOINED,data:e.response||e.responseText,message:w.error_description,extraInfo:O}):(null===(d=w.error_description)||void 0===d?void 0:d.includes("are not members of this group"))?(null===(p=e.responseURL)||void 0===p?void 0:p.includes("chatgroups"))?t({type:r.E.GROUP_NOT_JOINED,data:e.response||e.responseText,message:w.error_description,extraInfo:O}):t({type:r.E.CHATROOM_NOT_JOINED,data:e.response||e.responseText,message:w.error_description,extraInfo:O}):(null===(h=w.error_description)||void 0===h?void 0:h.includes("service not open!"))||(null===(f=w.error_description)||void 0===f?void 0:f.includes("message report not open"))||(null===(m=w.error_description)||void 0===m?void 0:m.includes("messageroaming function not open"))?t({type:r.E.SERVICE_NOT_ENABLED,data:e.response||e.responseText,message:w.error_description,extraInfo:O}):(null===(g=w.error_description)||void 0===g?void 0:g.includes("members size is greater than max user size !"))?t({type:r.E.GROUP_MEMBERS_LIMIT,data:e.response||e.responseText,message:w.error_description,extraInfo:O}):(null===(v=w.error_description)||void 0===v?void 0:v.includes("can not operate this group, reason: group is disabled"))?t({type:r.E.GROUP_IS_DISABLED,data:e.response||e.responseText,message:w.error_description,extraInfo:O}):t({type:r.E.PERMISSION_DENIED,data:e.response||e.responseText,message:"permission denied",extraInfo:i(i({},O),{errDesc:"permission denied"})}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:O});else if(404===C)40011===w.error_code?t({type:r.E.THREAD_NOT_EXIST,message:null==w?void 0:w.error_description,extraInfo:O}):40012===w.error_code?t({type:r.E.NO_PERMISSION,message:null==w?void 0:w.error_description,extraInfo:O}):60003===w.error_code||20004===w.error_code?t({type:r.E.GROUP_NOT_JOINED,message:null==w?void 0:w.error_description,extraInfo:O}):91001===w.error_code&&t({type:r.E.CONVERSATION_NOT_EXIST,message:null==w?void 0:w.error_description,extraInfo:O}),(null===(y=w.error_description)||void 0===y?void 0:y.includes("do not find this group"))||(null===(E=w.error_description)||void 0===E?void 0:E.includes("does not exist"))?(null===(_=e.responseURL)||void 0===_?void 0:_.includes("chatgroups"))?t({type:r.E.GROUP_NOT_EXIST,data:e.response||e.responseText,message:"The chat room dose not exist.",extraInfo:i(i({},O),{errDesc:"The chat room dose not exist."})}):t({type:r.E.CHATROOM_NOT_EXIST,data:e.response||e.responseText,message:"The chat room dose not exist.",extraInfo:i(i({},O),{errDesc:"The chat room dose not exist."})}):(null===(b=w.error_description)||void 0===b?void 0:b.includes("username"))&&(null===(S=w.error_description)||void 0===S?void 0:S.includes("doesn't exist!'"))||(null===(T=w.error_description)||void 0===T?void 0:T.includes("user not found"))?t({type:r.E.USER_NOT_FOUND,data:e.response||e.responseText,message:w.error_description,extraInfo:O}):t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.response||e.responseText,message:e.responseText,extraInfo:O}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.response||e.responseText,message:e.responseText,extraInfo:O});else if(406===C)90004===w.error_code&&t({type:r.E.OPERATION_NOT_ALLOWED,message:null==w?void 0:w.error_description,extraInfo:O});else if(429===C||503===C){if(null===(I=w.error_description)||void 0===I?void 0:I.includes("The request has reached the maximum limit"))return void t({type:r.E.MAX_LIMIT,message:e.responseText,extraInfo:O});t({type:r.E.SERVER_BUSY,data:e.response||e.responseText,message:"Server is busy.",extraInfo:i(i({},O),{errDesc:"Server is busy."})}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"Server is busy.",extraInfo:i(i({},O),{errDesc:"Server is busy."})})}else if(500===C){if(40006===w.error_code||40008===w.error_code||40010===w.error_code)return void t({type:r.E.SERVER_UNKNOWN_ERROR,message:null==w?void 0:w.error_description,extraInfo:O});if(90005===w.error_code||99999===w.error_code)return void t({type:r.E.REQUEST_UNKNOWN,message:null==w?void 0:w.error_description,extraInfo:O});if(null===(N=w.error_description)||void 0===N?void 0:N.includes("translte failed!"))return void t({type:r.E.TRANSLATION_FAILED,message:e.responseText,extraInfo:O});t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"",extraInfo:O}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"",extraInfo:O})}else t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:i(i({},O),{errDesc:"ajax error"})}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:i(i({},O),{errDesc:"ajax error"})})},s=n(1595),a=n(2071),c=n(7360),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)},u=function(){};function d(e,t){var n,i=this;return y().platform===g.WEB?new Promise((function(t,i){var s=e.dataType||"text",a=e.success||u,l=e.error||u,d=new XMLHttpRequest;d.ontimeout=function(){i({type:r.E.REQUEST_TIMEOUT,message:"Request Timeout",errorType:"timeout_error",xhr:d})},d.onerror=function(){i({type:r.E.REQUEST_UNKNOWN,message:"Request Unknow Error",errorType:"onerror",xhr:d})},d.onabort=function(){i({type:r.E.REQUEST_ABORT,message:"Request Abort",errorType:"onabort",xhr:d})},d.onreadystatechange=function(){if(4===d.readyState){var e=(new Date).getTime()-n,u=d.status||0,p={elapse:e,httpCode:u};if(200===u){T.ajaxUnconventionalErrorTimes=0;try{switch(s){case"text":return a(d.responseText),void t(d.responseText);case"json":var h=JSON.parse(d.responseText);return h.extraInfo=p,a(h),void t(h);case"xml":return d.responseXML&&d.responseXML.documentElement?(a(d.responseXML.documentElement),void t(d.responseXML.documentElement)):(l({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:d.responseText,message:"XHR.responseXML is null or XHR.responseXML.documentElement is null"}),void i({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:d.responseText,message:"XHR.responseXML is null or XHR.responseXML.documentElement is null"}));default:l({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:d.responseText,message:"Invalid dataType"}),i({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:d.responseText,message:"Invalid dataType"})}return t(d.response||d.responseText),void a(d.response||d.responseText,d)}catch(e){i(e)}return}[400,401,403,404,429,500,503].includes(u)||(c.kg.debug("rest api request fail status:",u),T.ajaxUnconventionalErrorTimes++),o(d,i,l,e)}0===d.readyState&&(l({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:d.responseText,message:"Request not initialized"}),i({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:d.responseText,message:"Request not initialized"}))},e.responseType&&d.responseType&&(d.responseType=e.responseType),e.mimeType&&d.overrideMimeType(e.mimeType);var p=e.type||"POST",h=e.data||null,f="";if("get"===p.toLowerCase()&&h){for(var m in h)h.hasOwnProperty(m)&&(f+=m+"="+h[m]+"&");f=f?f.slice(0,-1):f,e.url+=(e.url.indexOf("?")>0?"&":"?")+(f?f+"&":f)+"_v="+(new Date).getTime(),h=null,f=""}n=(new Date).getTime(),d.open(p,e.url);var g=e.headers||{};for(var v in g["Content-Type"]||(g["Content-Type"]="application/json"),g)g.hasOwnProperty(v)&&d.setRequestHeader(v,g[v]);d.send(h)})).then((function(n){return i.dataReport&&t&&t!==s.fI.SDK_INTERNAL&&i.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:l({isSuccess:1,requestUrl:e.url,requestName:t,requestMethod:e.type},S(n.extraInfo))}),t!==s.fI.SDK_INTERNAL&&delete n.extraInfo,"Object"===p(n)?l(l({},n),{type:r.E.REQUEST_SUCCESS}):{data:n,type:r.E.REQUEST_SUCCESS}})).catch((function(n){throw i.dataReport&&t&&t!==s.fI.SDK_INTERNAL&&i.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:l({isSuccess:0,requestUrl:e.url,requestName:t,requestMethod:e.type},S(n.extraInfo))}),t!==s.fI.SDK_INTERNAL&&delete n.extraInfo,n})):h.call(this,e,t)}function p(e){return Object.prototype.toString.call(e).slice(8,-1)}function h(e,t){var n=this;return new Promise((function(t,n){var r=e.success||u,i=e.error||u,o=e.type||"POST",s=e.data||null,c="",l=(new Date).getTime(),d=T.getEnvInfo();if("get"===o.toLowerCase()&&s){for(var p in s)s.hasOwnProperty(p)&&(c+=p+"="+s[p]+"&");c=c?c.slice(0,-1):c,e.url+=(e.url.indexOf("?")>0?"&":"?")+(c?c+"&":c)+"_v="+(new Date).getTime(),s=null,c=""}var h={url:e.url,data:e.data,method:o,headers:{},success:function(e){var o,s,a,c,u,d={elapse:(new Date).getTime()-l,httpCode:Number((null===(o=e.statusCode)||void 0===o?void 0:o.toString())||(null===(s=e.status)||void 0===s?void 0:s.toString())),errDesc:(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.error_description)||""};if("200"===(null===(c=e.statusCode)||void 0===c?void 0:c.toString())||"200"===(null===(u=e.status)||void 0===u?void 0:u.toString())){e.data.extraInfo=d;var p=e.data;r(p),t(p)}else e.extraInfo=d,i(p=e),n(p)},complete:function(){},fail:function(e){var t={elapse:(new Date).getTime()-l,httpCode:a.Tp,errDesc:"request:fail"};e.extraInfo=t,e.data={error:"request:fail",error_description:"request:fail"},i(e),n(e)}};if("zfb"===d.platform||"dd"===d.platform?h.headers=e.headers:h.header=e.headers,"dd"===d.platform)return dd.httpRequest(h);d.global.request(h)})).then((function(i){return n.dataReport&&t&&t!==s.fI.SDK_INTERNAL&&n.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:l({isSuccess:1,requestUrl:e.url,requestName:t,requestMethod:e.type},S(i.extraInfo))}),t!==s.fI.SDK_INTERNAL&&delete i.extraInfo,"Object"===p(i)?l(l({},i),{type:r.E.REQUEST_SUCCESS}):{data:i,type:r.E.REQUEST_SUCCESS}})).catch((function(r){throw n.dataReport&&t&&t!==s.fI.SDK_INTERNAL&&n.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:l({isSuccess:0,requestUrl:e.url,requestName:t,requestMethod:e.type},S(r.extraInfo))}),t!==s.fI.SDK_INTERNAL&&delete r.extraInfo,r}))}var f,m,g,v=(f=function(e,t){var n=y();if(n.platform!==g.WEB){var r=n.global,i=function(n){n.isConnected?e():t()};r.offNetworkStatusChange&&r.offNetworkStatusChange(i),r.onNetworkStatusChange&&r.onNetworkStatusChange(i)}else"undefined"!=typeof addEventListener&&(window.addEventListener("online",e),window.addEventListener("offline",t))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!f)return m;m=f.apply(void 0,e),f=null});function y(){return"undefined"!=typeof swan&&E(swan)?{platform:g.BAIDU,global:swan}:"undefined"!=typeof tt&&E(tt)?{platform:g.TT,global:tt}:"undefined"!=typeof dd&&E(dd)?{platform:g.DD,global:dd}:"undefined"!=typeof my&&E(my)?{platform:g.ZFB,global:my}:"undefined"!=typeof wx&&E(wx)?{platform:g.WX,global:wx}:"undefined"!=typeof uni&&E(uni)?{platform:g.UNI,global:uni}:"undefined"!=typeof window&&window.WebSocket?{platform:g.WEB,global:window}:{platform:g.NODE,global:n.g||{}}}function E(e){for(var t=["canIUse","getSystemInfo"],n=0,r=t.length;n<r;n++)if(!e[t[n]])return!1;return!0}function _(e,t){var n,i,o=this,a=(new Date).getTime(),c=e.accessToken;if(c){var l=e.appKey,d=[],p="",h="";if(l&&(p=(d=l.split("#"))[0],h=d[1]),p||h){var f=e.apiUrl,m=e.uploadUrl||f+"/"+p+"/"+h+"/chatfiles";if((null===(i=null===(n=null==e?void 0:e.file)||void 0===n?void 0:n.data)||void 0===i?void 0:i.size)<=0)e.onFileUploadError&&e.onFileUploadError({type:r.E.WEBIM_UPLOADFILE_ERROR,message:"fileSize must be greater than 0"});else{var g=new XMLHttpRequest;g.upload&&g.upload.addEventListener("progress",e.onFileUploadProgress||u,!1),g.addEventListener("abort",e.onFileUploadCanceled||u,!1),g.addEventListener("error",(function(e){y({type:r.E.WEBIM_UPLOADFILE_ERROR,data:g})}),!1),g.addEventListener("load",(function(n){try{var i=JSON.parse(g.responseText);if(400===g.status)return y({type:r.E.WEBIM_UPLOADFILE_ERROR,data:i}),!1;try{!function(n){var r=(new Date).getTime()-a;o.dataReport&&t&&[s.fI.UPLOAD_MSG_ATTACH,s.fI.UPLOAD_CHATROOM_FILE,s.fI.UPLOAD_GROUP_FILE].includes(t)&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:(null==n?void 0:n.error)?0:1,requestMethod:"POST",requestName:t,requestElapse:r,requestUrl:m,code:g.status,codeDesc:(null==n?void 0:n.error_description)||""}}),e.onFileUploadComplete&&e.onFileUploadComplete(n)}(i)}catch(n){y({type:r.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:n})}}catch(n){y({type:r.E.WEBIM_UPLOADFILE_ERROR,data:g.responseText})}}),!1),g.open("POST",m),g.setRequestHeader("restrict-access","true"),g.setRequestHeader("Accept","*/*"),g.setRequestHeader("Authorization","Bearer "+c);var v=new FormData;v.append("file",e.file.data),e.thumbnailWidth&&v.append("thumbnail-width",e.thumbnailWidth+""),e.thumbnailHeight&&v.append("thumbnail-height",e.thumbnailHeight+""),g.send(v)}}else e.onFileUploadError&&e.onFileUploadError({type:r.E.WEBIM_UPLOADFILE_ERROR,message:"AppKey illegal"})}else e.onFileUploadError&&e.onFileUploadError({type:r.E.WEBIM_UPLOADFILE_NO_LOGIN,message:"AccessToken cannot be empty"});function y(n){var r=(new Date).getTime()-a;o.dataReport&&t&&[s.fI.UPLOAD_MSG_ATTACH,s.fI.UPLOAD_CHATROOM_FILE,s.fI.UPLOAD_GROUP_FILE].includes(t)&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:0,requestMethod:"POST",requestName:t,requestElapse:r,requestUrl:m,code:(null==g?void 0:g.status)||0,codeDesc:"upload file error"}}),e.onFileUploadError&&e.onFileUploadError(n)}}function b(e,t){e.onFileDownloadComplete=e.onFileDownloadComplete||u,e.onFileDownloadError=e.onFileDownloadError||u;var n=(new Date).getTime(),i=new XMLHttpRequest,o=this;i.addEventListener("load",(function(r){var a=(new Date).getTime()-n;o.dataReport&&t&&t===s.fI.DOWN_GROUP_FILE&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:200===i.status?1:0,requestMethod:"POST",requestName:t,requestElapse:a,requestUrl:null==e?void 0:e.url,code:i.status,codeDesc:200===i.status?"":"download file error"}}),e.onFileDownloadComplete&&e.onFileDownloadComplete(i.response)}),!1),i.addEventListener("error",(function(a){var c=(new Date).getTime()-n;o.dataReport&&t&&t===s.fI.DOWN_GROUP_FILE&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:0,requestMethod:"POST",requestName:t,requestElapse:c,requestUrl:null==e?void 0:e.url,code:(null==i?void 0:i.status)||0,codeDesc:"download file error"}}),e.onFileDownloadError&&e.onFileDownloadError({type:r.E.WEBIM_DOWNLOADFILE_ERROR,id:e.id,xhr:i})}),!1);var a=e.method||"GET",c=e.responseType||"blob",l=e.mimeType||"text/plain; charset=x-user-defined";i.open(a,e.url),"undefined"!=typeof Blob?i.responseType=c:i.overrideMimeType(l);var d={"X-Requested-With":"XMLHttpRequest",Accept:"application/octet-stream","share-secret":e.secret,Authorization:"Bearer "+this.context.accessToken},p=e.headers||{};for(var h in p)d[h]=p[h];for(var h in d)d[h]&&i.setRequestHeader(h,d[h]);i.send(null)}function S(e){void 0===e&&(e={});var t=e.elapse,n=void 0===t?0:t,r=e.httpCode,i=void 0===r?0:r,o=e.errDesc;return{requestElapse:n,code:i,codeDesc:void 0===o?"":o}}!function(e){e.WEB="web",e.WX="wx",e.ZFB="zfb",e.DD="dd",e.TT="tt",e.BAIDU="baidu",e.QUICK_APP="quick_app",e.UNI="uni",e.NODE="node"}(g||(g={}));var T={autoIncrement:0,ajaxUnconventionalErrorTimes:0,ajax:d,getUniqueId:function(){this.autoIncrement?this.autoIncrement++:this.autoIncrement=1;var e=new Date,t=new Date(2010,1,1);return(e.getTime()-t.getTime()+this.autoIncrement).toString()},getFileUrl:function(e){var t={url:"",filename:"",filetype:"",data:{}},n="string"==typeof e?document.getElementById(e):e;if(window.URL.createObjectURL){if(!n.files)throw Error("this is not HTMLInputElement");var r=n.files;if(r.length>0){var i=r.item(0);t.data=i,t.url=window.URL.createObjectURL(i),t.filename=(null==i?void 0:i.name)||""}}else{if("string"!=typeof e)throw Error("in IE fileInputId must be string");i=document.getElementById(e).value,t.url=i;var o=i.lastIndexOf("/"),s=i.lastIndexOf("\\"),a=Math.max(o,s);t.filename=a<0?i:i.substring(a+1)}var c=t.filename.lastIndexOf(".");return-1!==c&&(t.filetype=t.filename.substring(c+1).toLowerCase()),t},uploadFile:_,flow:function(e){for(var t=e.length,n=t;n--;)if("function"!=typeof e[n])throw new TypeError("Expected a function");return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,o=t?e[i].apply(this,n):n[0];++i<t;)o=e[i].call(this,o);return o}},listenNetwork:v,getEnvInfo:y,wxRequest:h,parseDownloadResponse:function(e){if(!window||!window.URL)throw Error("parseDownloadResponse can be used in broswer only");return e&&e.type&&"application/json"===e.type||0>Object.prototype.toString.call(e).indexOf("Blob")?this.url+"?token=":window.URL.createObjectURL(e)},download:b,parseNotify:function(e){for(var t="",n=0;n<e.length;n++)t+="%"+e[n].toString(16);return JSON.parse(decodeURIComponent(t))},getExtraData:S,Uint8ArrayToString:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}}},9662:function(e,t,n){var r=n(614),i=n(6330),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},9483:function(e,t,n){var r=n(4411),i=n(6330),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a constructor")}},6077:function(e,t,n){var r=n(614),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},1223:function(e,t,n){var r=n(5112),i=n(30),o=n(3070).f,s=r("unscopables"),a=Array.prototype;null==a[s]&&o(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},5787:function(e,t,n){var r=n(7976),i=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw i("Incorrect invocation")}},9670:function(e,t,n){var r=n(111),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},3013:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7556:function(e,t,n){var r=n(7293);e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},260:function(e,t,n){"use strict";var r,i,o,s=n(3013),a=n(9781),c=n(7854),l=n(614),u=n(111),d=n(2597),p=n(648),h=n(6330),f=n(8880),m=n(8052),g=n(7045),v=n(7976),y=n(9518),E=n(7674),_=n(5112),b=n(9711),S=n(9909),T=S.enforce,I=S.get,N=c.Int8Array,w=N&&N.prototype,C=c.Uint8ClampedArray,O=C&&C.prototype,A=N&&y(N),R=w&&y(w),M=Object.prototype,D=c.TypeError,k=_("toStringTag"),x=b("TYPED_ARRAY_TAG"),L="TypedArrayConstructor",P=s&&!!E&&"Opera"!==p(c.opera),j=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},z=function(e){var t=y(e);if(u(t)){var n=I(t);return n&&d(n,L)?n[L]:z(t)}},B=function(e){if(!u(e))return!1;var t=p(e);return d(U,t)||d(F,t)};for(r in U)(o=(i=c[r])&&i.prototype)?T(o)[L]=i:P=!1;for(r in F)(o=(i=c[r])&&i.prototype)&&(T(o)[L]=i);if((!P||!l(A)||A===Function.prototype)&&(A=function(){throw D("Incorrect invocation")},P))for(r in U)c[r]&&E(c[r],A);if((!P||!R||R===M)&&(R=A.prototype,P))for(r in U)c[r]&&E(c[r].prototype,R);if(P&&y(O)!==R&&E(O,R),a&&!d(R,k))for(r in j=!0,g(R,k,{configurable:!0,get:function(){return u(this)?this[x]:void 0}}),U)c[r]&&f(c[r],x,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:j&&x,aTypedArray:function(e){if(B(e))return e;throw D("Target is not a typed array")},aTypedArrayConstructor:function(e){if(l(e)&&(!E||v(A,e)))return e;throw D(h(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(a){if(n)for(var i in U){var o=c[i];if(o&&d(o.prototype,e))try{delete o.prototype[e]}catch(n){try{o.prototype[e]=t}catch(e){}}}R[e]&&!n||m(R,e,n?t:P&&w[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(a){if(E){if(n)for(r in U)if((i=c[r])&&d(i,e))try{delete i[e]}catch(e){}if(A[e]&&!n)return;try{return m(A,e,n?t:P&&A[e]||t)}catch(e){}}for(r in U)!(i=c[r])||i[e]&&!n||m(i,e,t)}},getTypedArrayConstructor:z,isView:function(e){if(!u(e))return!1;var t=p(e);return"DataView"===t||d(U,t)||d(F,t)},isTypedArray:B,TypedArray:A,TypedArrayPrototype:R}},3331:function(e,t,n){"use strict";var r=n(7854),i=n(1702),o=n(9781),s=n(3013),a=n(6530),c=n(8880),l=n(7045),u=n(9190),d=n(7293),p=n(5787),h=n(9303),f=n(7466),m=n(7067),g=n(1179),v=n(9518),y=n(7674),E=n(8006).f,_=n(1285),b=n(1589),S=n(8003),T=n(9909),I=a.PROPER,N=a.CONFIGURABLE,w="ArrayBuffer",C="DataView",O="prototype",A="Wrong index",R=T.getterFor(w),M=T.getterFor(C),D=T.set,k=r[w],x=k,L=x&&x[O],P=r[C],j=P&&P[O],U=Object.prototype,F=r.Array,z=r.RangeError,B=i(_),V=i([].reverse),H=g.pack,G=g.unpack,W=function(e){return[255&e]},Y=function(e){return[255&e,e>>8&255]},q=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},K=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Q=function(e){return H(e,23,4)},J=function(e){return H(e,52,8)},X=function(e,t,n){l(e[O],t,{configurable:!0,get:function(){return n(this)[t]}})},Z=function(e,t,n,r){var i=m(n),o=M(e);if(i+t>o.byteLength)throw z(A);var s=o.bytes,a=i+o.byteOffset,c=b(s,a,a+t);return r?c:V(c)},$=function(e,t,n,r,i,o){var s=m(n),a=M(e);if(s+t>a.byteLength)throw z(A);for(var c=a.bytes,l=s+a.byteOffset,u=r(+i),d=0;d<t;d++)c[l+d]=u[o?d:t-d-1]};if(s){var ee=I&&k.name!==w;if(d((function(){k(1)}))&&d((function(){new k(-1)}))&&!d((function(){return new k,new k(1.5),new k(NaN),1!=k.length||ee&&!N})))ee&&N&&c(k,"name",w);else{(x=function(e){return p(this,L),new k(m(e))})[O]=L;for(var te,ne=E(k),re=0;ne.length>re;)(te=ne[re++])in x||c(x,te,k[te]);L.constructor=x}y&&v(j)!==U&&y(j,U);var ie=new P(new x(2)),oe=i(j.setInt8);ie.setInt8(0,2147483648),ie.setInt8(1,2147483649),!ie.getInt8(0)&&ie.getInt8(1)||u(j,{setInt8:function(e,t){oe(this,e,t<<24>>24)},setUint8:function(e,t){oe(this,e,t<<24>>24)}},{unsafe:!0})}else L=(x=function(e){p(this,L);var t=m(e);D(this,{type:w,bytes:B(F(t),0),byteLength:t}),o||(this.byteLength=t,this.detached=!1)})[O],j=(P=function(e,t,n){p(this,j),p(e,L);var r=R(e),i=r.byteLength,s=h(t);if(s<0||s>i)throw z("Wrong offset");if(s+(n=void 0===n?i-s:f(n))>i)throw z("Wrong length");D(this,{type:C,buffer:e,byteLength:n,byteOffset:s,bytes:r.bytes}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=s)})[O],o&&(X(x,"byteLength",R),X(P,"buffer",M),X(P,"byteLength",M),X(P,"byteOffset",M)),u(j,{getInt8:function(e){return Z(this,1,e)[0]<<24>>24},getUint8:function(e){return Z(this,1,e)[0]},getInt16:function(e){var t=Z(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Z(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return K(Z(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return K(Z(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return G(Z(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return G(Z(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){$(this,1,e,W,t)},setUint8:function(e,t){$(this,1,e,W,t)},setInt16:function(e,t){$(this,2,e,Y,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){$(this,2,e,Y,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){$(this,4,e,q,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){$(this,4,e,q,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){$(this,4,e,Q,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){$(this,8,e,J,t,arguments.length>2?arguments[2]:void 0)}});S(x,w),S(P,C),e.exports={ArrayBuffer:x,DataView:P}},1048:function(e,t,n){"use strict";var r=n(7908),i=n(1400),o=n(6244),s=n(5117),a=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),c=o(n),l=i(e,c),u=i(t,c),d=arguments.length>2?arguments[2]:void 0,p=a((void 0===d?c:i(d,c))-u,c-l),h=1;for(u<l&&l<u+p&&(h=-1,u+=p-1,l+=p-1);p-- >0;)u in n?n[l]=n[u]:s(n,l),l+=h,u+=h;return n}},1285:function(e,t,n){"use strict";var r=n(7908),i=n(1400),o=n(6244);e.exports=function(e){for(var t=r(this),n=o(t),s=arguments.length,a=i(s>1?arguments[1]:void 0,n),c=s>2?arguments[2]:void 0,l=void 0===c?n:i(c,n);l>a;)t[a++]=e;return t}},8533:function(e,t,n){"use strict";var r=n(2092).forEach,i=n(9341)("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},7745:function(e,t,n){var r=n(6244);e.exports=function(e,t){for(var n=0,i=r(t),o=new e(i);i>n;)o[n]=t[n++];return o}},8457:function(e,t,n){"use strict";var r=n(9974),i=n(6916),o=n(7908),s=n(3411),a=n(7659),c=n(4411),l=n(6244),u=n(6135),d=n(4121),p=n(1246),h=Array;e.exports=function(e){var t=o(e),n=c(this),f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m;g&&(m=r(m,f>2?arguments[2]:void 0));var v,y,E,_,b,S,T=p(t),I=0;if(!T||this===h&&a(T))for(v=l(t),y=n?new this(v):h(v);v>I;I++)S=g?m(t[I],I):t[I],u(y,I,S);else for(b=(_=d(t,T)).next,y=n?new this:[];!(E=i(b,_)).done;I++)S=g?s(_,m,[E.value,I],!0):E.value,u(y,I,S);return y.length=I,y}},1318:function(e,t,n){var r=n(5656),i=n(1400),o=n(6244),s=function(e){return function(t,n,s){var a,c=r(t),l=o(c),u=i(s,l);if(e&&n!=n){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},2092:function(e,t,n){var r=n(9974),i=n(1702),o=n(8361),s=n(7908),a=n(6244),c=n(5417),l=i([].push),u=function(e){var t=1==e,n=2==e,i=3==e,u=4==e,d=6==e,p=7==e,h=5==e||d;return function(f,m,g,v){for(var y,E,_=s(f),b=o(_),S=r(m,g),T=a(b),I=0,N=v||c,w=t?N(f,T):n||p?N(f,0):void 0;T>I;I++)if((h||I in b)&&(E=S(y=b[I],I,_),e))if(t)w[I]=E;else if(E)switch(e){case 3:return!0;case 5:return y;case 6:return I;case 2:l(w,y)}else switch(e){case 4:return!1;case 7:l(w,y)}return d?-1:i||u?u:w}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},6583:function(e,t,n){"use strict";var r=n(2104),i=n(5656),o=n(9303),s=n(6244),a=n(9341),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,d=a("lastIndexOf"),p=u||!d;e.exports=p?function(e){if(u)return r(l,this,arguments)||0;var t=i(this),n=s(t),a=n-1;for(arguments.length>1&&(a=c(a,o(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:l},1194:function(e,t,n){var r=n(7293),i=n(5112),o=n(7392),s=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,n){"use strict";var r=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},3671:function(e,t,n){var r=n(9662),i=n(7908),o=n(8361),s=n(6244),a=TypeError,c=function(e){return function(t,n,c,l){r(n);var u=i(t),d=o(u),p=s(u),h=e?p-1:0,f=e?-1:1;if(c<2)for(;;){if(h in d){l=d[h],h+=f;break}if(h+=f,e?h<0:p<=h)throw a("Reduce of empty array with no initial value")}for(;e?h>=0:p>h;h+=f)h in d&&(l=n(l,d[h],h,u));return l}};e.exports={left:c(!1),right:c(!0)}},3658:function(e,t,n){"use strict";var r=n(9781),i=n(3157),o=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(i(e)&&!s(e,"length").writable)throw o("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},1589:function(e,t,n){var r=n(1400),i=n(6244),o=n(6135),s=Array,a=Math.max;e.exports=function(e,t,n){for(var c=i(e),l=r(t,c),u=r(void 0===n?c:n,c),d=s(a(u-l,0)),p=0;l<u;l++,p++)o(d,p,e[l]);return d.length=p,d}},206:function(e,t,n){var r=n(1702);e.exports=r([].slice)},4362:function(e,t,n){var r=n(1589),i=Math.floor,o=function(e,t){var n=e.length,c=i(n/2);return n<8?s(e,t):a(e,o(r(e,0,c),t),o(r(e,c),t),t)},s=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},a=function(e,t,n,r){for(var i=t.length,o=n.length,s=0,a=0;s<i||a<o;)e[s+a]=s<i&&a<o?r(t[s],n[a])<=0?t[s++]:n[a++]:s<i?t[s++]:n[a++];return e};e.exports=o},7475:function(e,t,n){var r=n(3157),i=n(4411),o=n(111),s=n(5112)("species"),a=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===a||r(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?a:t}},5417:function(e,t,n){var r=n(7475);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},3411:function(e,t,n){var r=n(9670),i=n(9212);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},7072:function(e,t,n){var r=n(5112)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},4326:function(e,t,n){var r=n(1702),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},648:function(e,t,n){var r=n(1694),i=n(614),o=n(4326),s=n(5112)("toStringTag"),a=Object,c="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?n:c?o(t):"Object"==(r=o(t))&&i(t.callee)?"Arguments":r}},5631:function(e,t,n){"use strict";var r=n(30),i=n(7045),o=n(9190),s=n(9974),a=n(5787),c=n(8554),l=n(408),u=n(1656),d=n(6178),p=n(6340),h=n(9781),f=n(2423).fastKey,m=n(9909),g=m.set,v=m.getterFor;e.exports={getConstructor:function(e,t,n,u){var d=e((function(e,i){a(e,p),g(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),h||(e.size=0),c(i)||l(i,e[u],{that:e,AS_ENTRIES:n})})),p=d.prototype,m=v(t),y=function(e,t,n){var r,i,o=m(e),s=E(e,t);return s?s.value=n:(o.last=s={index:i=f(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),h?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},E=function(e,t){var n,r=m(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return o(p,{clear:function(){for(var e=m(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,h?e.size=0:this.size=0},delete:function(e){var t=this,n=m(t),r=E(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),h?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=m(this),r=s(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!E(this,e)}}),o(p,n?{get:function(e){var t=E(this,e);return t&&t.value},set:function(e,t){return y(this,0===e?0:e,t)}}:{add:function(e){return y(this,e=0===e?0:e,e)}}),h&&i(p,"size",{configurable:!0,get:function(){return m(this).size}}),d},setStrong:function(e,t,n){var r=t+" Iterator",i=v(t),o=v(r);u(e,t,(function(e,t){g(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?d("keys"==t?n.key:"values"==t?n.value:[n.key,n.value],!1):(e.target=void 0,d(void 0,!0))}),n?"entries":"values",!n,!0),p(t)}}},7710:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(1702),s=n(4705),a=n(8052),c=n(2423),l=n(408),u=n(5787),d=n(614),p=n(8554),h=n(111),f=n(7293),m=n(7072),g=n(8003),v=n(9587);e.exports=function(e,t,n){var y=-1!==e.indexOf("Map"),E=-1!==e.indexOf("Weak"),_=y?"set":"add",b=i[e],S=b&&b.prototype,T=b,I={},N=function(e){var t=o(S[e]);a(S,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(E&&!h(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return E&&!h(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(E&&!h(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(s(e,!d(b)||!(E||S.forEach&&!f((function(){(new b).entries().next()})))))T=n.getConstructor(t,e,y,_),c.enable();else if(s(e,!0)){var w=new T,C=w[_](E?{}:-0,1)!=w,O=f((function(){w.has(1)})),A=m((function(e){new b(e)})),R=!E&&f((function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)}));A||((T=t((function(e,t){u(e,S);var n=v(new b,e,T);return p(t)||l(t,n[_],{that:n,AS_ENTRIES:y}),n}))).prototype=S,S.constructor=T),(O||R)&&(N("delete"),N("has"),y&&N("get")),(R||C)&&N(_),E&&S.clear&&delete S.clear}return I[e]=T,r({global:!0,constructor:!0,forced:T!=b},I),g(T,e),E||n.setStrong(T,e,y),T}},9920:function(e,t,n){var r=n(2597),i=n(3887),o=n(1236),s=n(3070);e.exports=function(e,t,n){for(var a=i(t),c=s.f,l=o.f,u=0;u<a.length;u++){var d=a[u];r(e,d)||n&&r(n,d)||c(e,d,l(t,d))}}},4964:function(e,t,n){var r=n(5112)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},8544:function(e,t,n){var r=n(7293);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},6178:function(e){e.exports=function(e,t){return{value:e,done:t}}},8880:function(e,t,n){var r=n(9781),i=n(3070),o=n(9114);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:function(e,t,n){"use strict";var r=n(4948),i=n(3070),o=n(9114);e.exports=function(e,t,n){var s=r(t);s in e?i.f(e,s,o(0,n)):e[s]=n}},7045:function(e,t,n){var r=n(6339),i=n(3070);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),i.f(e,t,n)}},8052:function(e,t,n){var r=n(614),i=n(3070),o=n(6339),s=n(3072);e.exports=function(e,t,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:t;if(r(n)&&o(n,l,a),a.global)c?e[t]=n:s(t,n);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},9190:function(e,t,n){var r=n(8052);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},3072:function(e,t,n){var r=n(7854),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},5117:function(e,t,n){"use strict";var r=n(6330),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw i("Cannot delete property "+r(t)+" of "+r(e))}},9781:function(e,t,n){var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,n=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},317:function(e,t,n){var r=n(7854),i=n(111),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},7207:function(e){var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},8324:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(e,t,n){var r=n(317)("span").classList,i=r&&r.constructor&&r.constructor.prototype;e.exports=i===Object.prototype?void 0:i},8886:function(e,t,n){var r=n(8113).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},7871:function(e,t,n){var r=n(3823),i=n(5268);e.exports=!r&&!i&&"object"==typeof window&&"object"==typeof document},9363:function(e){e.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},3823:function(e){e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},256:function(e,t,n){var r=n(8113);e.exports=/MSIE|Trident/.test(r)},1528:function(e,t,n){var r=n(8113);e.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},6833:function(e,t,n){var r=n(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:function(e,t,n){var r=n(4326);e.exports="undefined"!=typeof process&&"process"==r(process)},1036:function(e,t,n){var r=n(8113);e.exports=/web0s(?!.*chrome)/i.test(r)},8113:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(e,t,n){var r,i,o=n(7854),s=n(8113),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(i=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},8008:function(e,t,n){var r=n(8113).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(e,t,n){var r=n(7854),i=n(1236).f,o=n(8880),s=n(8052),a=n(3072),c=n(9920),l=n(4705);e.exports=function(e,t){var n,u,d,p,h,f=e.target,m=e.global,g=e.stat;if(n=m?r:g?r[f]||a(f,{}):(r[f]||{}).prototype)for(u in t){if(p=t[u],d=e.dontCallGetSet?(h=i(n,u))&&h.value:n[u],!l(m?u:f+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof p==typeof d)continue;c(p,d)}(e.sham||d&&d.sham)&&o(p,"sham",!0),s(n,u,p,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},6677:function(e,t,n){var r=n(7293);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},2104:function(e,t,n){var r=n(4374),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(o):function(){return s.apply(o,arguments)})},9974:function(e,t,n){var r=n(1470),i=n(9662),o=n(4374),s=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},4374:function(e,t,n){var r=n(7293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},7065:function(e,t,n){"use strict";var r=n(1702),i=n(9662),o=n(111),s=n(2597),a=n(206),c=n(4374),l=Function,u=r([].concat),d=r([].join),p={};e.exports=c?l.bind:function(e){var t=i(this),n=t.prototype,r=a(arguments,1),c=function(){var n=u(r,a(arguments));return this instanceof c?function(e,t,n){if(!s(p,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";p[t]=l("C,a","return new C("+d(r,",")+")")}return p[t](e,n)}(t,n.length,n):t.apply(e,n)};return o(n)&&(c.prototype=n),c}},6916:function(e,t,n){var r=n(4374),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(e,t,n){var r=n(9781),i=n(2597),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},5668:function(e,t,n){var r=n(1702),i=n(9662);e.exports=function(e,t,n){try{return r(i(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},1470:function(e,t,n){var r=n(4326),i=n(1702);e.exports=function(e){if("Function"===r(e))return i(e)}},1702:function(e,t,n){var r=n(4374),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);e.exports=r?s:function(e){return function(){return o.apply(e,arguments)}}},5005:function(e,t,n){var r=n(7854),i=n(614);e.exports=function(e,t){return arguments.length<2?(n=r[e],i(n)?n:void 0):r[e]&&r[e][t];var n}},1246:function(e,t,n){var r=n(648),i=n(8173),o=n(8554),s=n(7497),a=n(5112)("iterator");e.exports=function(e){if(!o(e))return i(e,a)||i(e,"@@iterator")||s[r(e)]}},4121:function(e,t,n){var r=n(6916),i=n(9662),o=n(9670),s=n(6330),a=n(1246),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?a(e):t;if(i(n))return o(r(n,e));throw c(s(e)+" is not iterable")}},8044:function(e,t,n){var r=n(1702),i=n(3157),o=n(614),s=n(4326),a=n(1340),c=r([].push);e.exports=function(e){if(o(e))return e;if(i(e)){for(var t=e.length,n=[],r=0;r<t;r++){var l=e[r];"string"==typeof l?c(n,l):"number"!=typeof l&&"Number"!=s(l)&&"String"!=s(l)||c(n,a(l))}var u=n.length,d=!0;return function(e,t){if(d)return d=!1,t;if(i(this))return t;for(var r=0;r<u;r++)if(n[r]===e)return t}}}},8173:function(e,t,n){var r=n(9662),i=n(8554);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},7854:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(e,t,n){var r=n(1702),i=n(7908),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},3501:function(e){e.exports={}},842:function(e){e.exports=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}}},490:function(e,t,n){var r=n(5005);e.exports=r("document","documentElement")},4664:function(e,t,n){var r=n(9781),i=n(7293),o=n(317);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},1179:function(e){var t=Array,n=Math.abs,r=Math.pow,i=Math.floor,o=Math.log,s=Math.LN2;e.exports={pack:function(e,a,c){var l,u,d,p=t(c),h=8*c-a-1,f=(1<<h)-1,m=f>>1,g=23===a?r(2,-24)-r(2,-77):0,v=e<0||0===e&&1/e<0?1:0,y=0;for((e=n(e))!=e||e===1/0?(u=e!=e?1:0,l=f):(l=i(o(e)/s),e*(d=r(2,-l))<1&&(l--,d*=2),(e+=l+m>=1?g/d:g*r(2,1-m))*d>=2&&(l++,d/=2),l+m>=f?(u=0,l=f):l+m>=1?(u=(e*d-1)*r(2,a),l+=m):(u=e*r(2,m-1)*r(2,a),l=0));a>=8;)p[y++]=255&u,u/=256,a-=8;for(l=l<<a|u,h+=a;h>0;)p[y++]=255&l,l/=256,h-=8;return p[--y]|=128*v,p},unpack:function(e,t){var n,i=e.length,o=8*i-t-1,s=(1<<o)-1,a=s>>1,c=o-7,l=i-1,u=e[l--],d=127&u;for(u>>=7;c>0;)d=256*d+e[l--],c-=8;for(n=d&(1<<-c)-1,d>>=-c,c+=t;c>0;)n=256*n+e[l--],c-=8;if(0===d)d=1-a;else{if(d===s)return n?NaN:u?-1/0:1/0;n+=r(2,t),d-=a}return(u?-1:1)*n*r(2,d-t)}}},8361:function(e,t,n){var r=n(1702),i=n(7293),o=n(4326),s=Object,a=r("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a(e,""):s(e)}:s},9587:function(e,t,n){var r=n(614),i=n(111),o=n(7674);e.exports=function(e,t,n){var s,a;return o&&r(s=t.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(e,a),e}},2788:function(e,t,n){var r=n(1702),i=n(614),o=n(5465),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},2423:function(e,t,n){var r=n(2109),i=n(1702),o=n(3501),s=n(111),a=n(2597),c=n(3070).f,l=n(8006),u=n(1156),d=n(2050),p=n(9711),h=n(6677),f=!1,m=p("meta"),g=0,v=function(e){c(e,m,{value:{objectID:"O"+g++,weakData:{}}})},y=e.exports={enable:function(){y.enable=function(){},f=!0;var e=l.f,t=i([].splice),n={};n[m]=1,e(n).length&&(l.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===m){t(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,m)){if(!d(e))return"F";if(!t)return"E";v(e)}return e[m].objectID},getWeakData:function(e,t){if(!a(e,m)){if(!d(e))return!0;if(!t)return!1;v(e)}return e[m].weakData},onFreeze:function(e){return h&&f&&d(e)&&!a(e,m)&&v(e),e}};o[m]=!0},9909:function(e,t,n){var r,i,o,s=n(4811),a=n(7854),c=n(111),l=n(8880),u=n(2597),d=n(5465),p=n(6200),h=n(3501),f="Object already initialized",m=a.TypeError,g=a.WeakMap;if(s||d.state){var v=d.state||(d.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,r=function(e,t){if(v.has(e))throw m(f);return t.facade=e,v.set(e,t),t},i=function(e){return v.get(e)||{}},o=function(e){return v.has(e)}}else{var y=p("state");h[y]=!0,r=function(e,t){if(u(e,y))throw m(f);return t.facade=e,l(e,y,t),t},i=function(e){return u(e,y)?e[y]:{}},o=function(e){return u(e,y)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}}}},7659:function(e,t,n){var r=n(5112),i=n(7497),o=r("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},3157:function(e,t,n){var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},4067:function(e,t,n){var r=n(648);e.exports=function(e){var t=r(e);return"BigInt64Array"==t||"BigUint64Array"==t}},614:function(e,t,n){var r=n(4154),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},4411:function(e,t,n){var r=n(1702),i=n(7293),o=n(614),s=n(648),a=n(5005),c=n(2788),l=function(){},u=[],d=a("Reflect","construct"),p=/^\s*(?:class|function)\b/,h=r(p.exec),f=!p.exec(l),m=function(e){if(!o(e))return!1;try{return d(l,u,e),!0}catch(e){return!1}},g=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!h(p,c(e))}catch(e){return!0}};g.sham=!0,e.exports=!d||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?g:m},4705:function(e,t,n){var r=n(7293),i=n(614),o=/#|\.prototype\./,s=function(e,t){var n=c[a(e)];return n==u||n!=l&&(i(t)?r(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},5988:function(e,t,n){var r=n(111),i=Math.floor;e.exports=Number.isInteger||function(e){return!r(e)&&isFinite(e)&&i(e)===e}},8554:function(e){e.exports=function(e){return null==e}},111:function(e,t,n){var r=n(614),i=n(4154),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===o}:function(e){return"object"==typeof e?null!==e:r(e)}},1913:function(e){e.exports=!1},7850:function(e,t,n){var r=n(111),i=n(4326),o=n(5112)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},2190:function(e,t,n){var r=n(5005),i=n(614),o=n(7976),s=n(3307),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,a(e))}},408:function(e,t,n){var r=n(9974),i=n(6916),o=n(9670),s=n(6330),a=n(7659),c=n(6244),l=n(7976),u=n(4121),d=n(1246),p=n(9212),h=TypeError,f=function(e,t){this.stopped=e,this.result=t},m=f.prototype;e.exports=function(e,t,n){var g,v,y,E,_,b,S,T=n&&n.that,I=!(!n||!n.AS_ENTRIES),N=!(!n||!n.IS_RECORD),w=!(!n||!n.IS_ITERATOR),C=!(!n||!n.INTERRUPTED),O=r(t,T),A=function(e){return g&&p(g,"normal",e),new f(!0,e)},R=function(e){return I?(o(e),C?O(e[0],e[1],A):O(e[0],e[1])):C?O(e,A):O(e)};if(N)g=e.iterator;else if(w)g=e;else{if(!(v=d(e)))throw h(s(e)+" is not iterable");if(a(v)){for(y=0,E=c(e);E>y;y++)if((_=R(e[y]))&&l(m,_))return _;return new f(!1)}g=u(e,v)}for(b=N?e.next:g.next;!(S=i(b,g)).done;){try{_=R(S.value)}catch(e){p(g,"throw",e)}if("object"==typeof _&&_&&l(m,_))return _}return new f(!1)}},9212:function(e,t,n){var r=n(6916),i=n(9670),o=n(8173);e.exports=function(e,t,n){var s,a;i(e);try{if(!(s=o(e,"return"))){if("throw"===t)throw n;return n}s=r(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw n;if(a)throw s;return i(s),n}},3061:function(e,t,n){"use strict";var r=n(3383).IteratorPrototype,i=n(30),o=n(9114),s=n(8003),a=n(7497),c=function(){return this};e.exports=function(e,t,n,l){var u=t+" Iterator";return e.prototype=i(r,{next:o(+!l,n)}),s(e,u,!1,!0),a[u]=c,e}},1656:function(e,t,n){"use strict";var r=n(2109),i=n(6916),o=n(1913),s=n(6530),a=n(614),c=n(3061),l=n(9518),u=n(7674),d=n(8003),p=n(8880),h=n(8052),f=n(5112),m=n(7497),g=n(3383),v=s.PROPER,y=s.CONFIGURABLE,E=g.IteratorPrototype,_=g.BUGGY_SAFARI_ITERATORS,b=f("iterator"),S="keys",T="values",I="entries",N=function(){return this};e.exports=function(e,t,n,s,f,g,w){c(n,t,s);var C,O,A,R=function(e){if(e===f&&L)return L;if(!_&&e in k)return k[e];switch(e){case S:case T:case I:return function(){return new n(this,e)}}return function(){return new n(this)}},M=t+" Iterator",D=!1,k=e.prototype,x=k[b]||k["@@iterator"]||f&&k[f],L=!_&&x||R(f),P="Array"==t&&k.entries||x;if(P&&(C=l(P.call(new e)))!==Object.prototype&&C.next&&(o||l(C)===E||(u?u(C,E):a(C[b])||h(C,b,N)),d(C,M,!0,!0),o&&(m[M]=N)),v&&f==T&&x&&x.name!==T&&(!o&&y?p(k,"name",T):(D=!0,L=function(){return i(x,this)})),f)if(O={values:R(T),keys:g?L:R(S),entries:R(I)},w)for(A in O)(_||D||!(A in k))&&h(k,A,O[A]);else r({target:t,proto:!0,forced:_||D},O);return o&&!w||k[b]===L||h(k,b,L,{name:f}),m[t]=L,O}},3383:function(e,t,n){"use strict";var r,i,o,s=n(7293),a=n(614),c=n(111),l=n(30),u=n(9518),d=n(8052),p=n(5112),h=n(1913),f=p("iterator"),m=!1;[].keys&&("next"in(o=[].keys())?(i=u(u(o)))!==Object.prototype&&(r=i):m=!0),!c(r)||s((function(){var e={};return r[f].call(e)!==e}))?r={}:h&&(r=l(r)),a(r[f])||d(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},7497:function(e){e.exports={}},6244:function(e,t,n){var r=n(7466);e.exports=function(e){return r(e.length)}},6339:function(e,t,n){var r=n(1702),i=n(7293),o=n(614),s=n(2597),a=n(9781),c=n(6530).CONFIGURABLE,l=n(2788),u=n(9909),d=u.enforce,p=u.get,h=String,f=Object.defineProperty,m=r("".slice),g=r("".replace),v=r([].join),y=a&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),E=String(String).split("String"),_=e.exports=function(e,t,n){"Symbol("===m(h(t),0,7)&&(t="["+g(h(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),y&&n&&s(n,"arity")&&e.length!==n.arity&&f(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=d(e);return s(r,"source")||(r.source=v(E,"string"==typeof t?t:"")),e};Function.prototype.toString=_((function(){return o(this)&&p(this).source||l(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},5948:function(e,t,n){var r,i,o,s,a,c=n(7854),l=n(9974),u=n(1236).f,d=n(261).set,p=n(8572),h=n(6833),f=n(1528),m=n(1036),g=n(5268),v=c.MutationObserver||c.WebKitMutationObserver,y=c.document,E=c.process,_=c.Promise,b=u(c,"queueMicrotask"),S=b&&b.value;if(!S){var T=new p,I=function(){var e,t;for(g&&(e=E.domain)&&e.exit();t=T.get();)try{t()}catch(e){throw T.head&&r(),e}e&&e.enter()};h||g||m||!v||!y?!f&&_&&_.resolve?((s=_.resolve(void 0)).constructor=_,a=l(s.then,s),r=function(){a(I)}):g?r=function(){E.nextTick(I)}:(d=l(d,c),r=function(){d(I)}):(i=!0,o=y.createTextNode(""),new v(I).observe(o,{characterData:!0}),r=function(){o.data=i=!i}),S=function(e){T.head||r(),T.add(e)}}e.exports=S},8523:function(e,t,n){"use strict";var r=n(9662),i=TypeError,o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw i("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new o(e)}},3929:function(e,t,n){var r=n(7850),i=TypeError;e.exports=function(e){if(r(e))throw i("The method doesn't accept regular expressions");return e}},1574:function(e,t,n){"use strict";var r=n(9781),i=n(1702),o=n(6916),s=n(7293),a=n(1956),c=n(5181),l=n(5296),u=n(7908),d=n(8361),p=Object.assign,h=Object.defineProperty,f=i([].concat);e.exports=!p||s((function(){if(r&&1!==p({b:1},p(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=p({},e)[n]||a(p({},t)).join("")!=i}))?function(e,t){for(var n=u(e),i=arguments.length,s=1,p=c.f,h=l.f;i>s;)for(var m,g=d(arguments[s++]),v=p?f(a(g),p(g)):a(g),y=v.length,E=0;y>E;)m=v[E++],r&&!o(h,g,m)||(n[m]=g[m]);return n}:p},30:function(e,t,n){var r,i=n(9670),o=n(6048),s=n(748),a=n(3501),c=n(490),l=n(317),u=n(6200),d="prototype",p="script",h=u("IE_PROTO"),f=function(){},m=function(e){return"<"+p+">"+e+"</"+p+">"},g=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;v="undefined"!=typeof document?document.domain&&r?g(r):(t=l("iframe"),n="java"+p+":",t.style.display="none",c.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F):g(r);for(var i=s.length;i--;)delete v[d][s[i]];return v()};a[h]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f[d]=i(e),n=new f,f[d]=null,n[h]=e):n=v(),void 0===t?n:o.f(n,t)}},6048:function(e,t,n){var r=n(9781),i=n(3353),o=n(3070),s=n(9670),a=n(5656),c=n(1956);t.f=r&&!i?Object.defineProperties:function(e,t){s(e);for(var n,r=a(t),i=c(t),l=i.length,u=0;l>u;)o.f(e,n=i[u++],r[n]);return e}},3070:function(e,t,n){var r=n(9781),i=n(4664),o=n(3353),s=n(9670),a=n(4948),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",p="configurable",h="writable";t.f=r?o?function(e,t,n){if(s(e),t=a(t),s(n),"function"==typeof e&&"prototype"===t&&"value"in n&&h in n&&!n[h]){var r=u(e,t);r&&r[h]&&(e[t]=n.value,n={configurable:p in n?n[p]:r[p],enumerable:d in n?n[d]:r[d],writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(s(e),t=a(t),s(n),i)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var r=n(9781),i=n(6916),o=n(5296),s=n(9114),a=n(5656),c=n(4948),l=n(2597),u=n(4664),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=a(e),t=c(t),u)try{return d(e,t)}catch(e){}if(l(e,t))return s(!i(o.f,e,t),e[t])}},1156:function(e,t,n){var r=n(4326),i=n(5656),o=n(8006).f,s=n(1589),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"==r(e)?function(e){try{return o(e)}catch(e){return s(a)}}(e):o(i(e))}},8006:function(e,t,n){var r=n(6324),i=n(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,n){var r=n(2597),i=n(614),o=n(7908),s=n(6200),a=n(8544),c=s("IE_PROTO"),l=Object,u=l.prototype;e.exports=a?l.getPrototypeOf:function(e){var t=o(e);if(r(t,c))return t[c];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof l?u:null}},2050:function(e,t,n){var r=n(7293),i=n(111),o=n(4326),s=n(7556),a=Object.isExtensible,c=r((function(){a(1)}));e.exports=c||s?function(e){return!!i(e)&&(!s||"ArrayBuffer"!=o(e))&&(!a||a(e))}:a},7976:function(e,t,n){var r=n(1702);e.exports=r({}.isPrototypeOf)},6324:function(e,t,n){var r=n(1702),i=n(2597),o=n(5656),s=n(1318).indexOf,a=n(3501),c=r([].push);e.exports=function(e,t){var n,r=o(e),l=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&c(u,n);for(;t.length>l;)i(r,n=t[l++])&&(~s(u,n)||c(u,n));return u}},1956:function(e,t,n){var r=n(6324),i=n(748);e.exports=Object.keys||function(e){return r(e,i)}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var r=n(5668),i=n(9670),o=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},4699:function(e,t,n){var r=n(9781),i=n(1702),o=n(1956),s=n(5656),a=i(n(5296).f),c=i([].push),l=function(e){return function(t){for(var n,i=s(t),l=o(i),u=l.length,d=0,p=[];u>d;)n=l[d++],r&&!a(i,n)||c(p,e?[n,i[n]]:i[n]);return p}};e.exports={entries:l(!0),values:l(!1)}},288:function(e,t,n){"use strict";var r=n(1694),i=n(648);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},2140:function(e,t,n){var r=n(6916),i=n(614),o=n(111),s=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&i(n=e.toString)&&!o(a=r(n,e)))return a;if(i(n=e.valueOf)&&!o(a=r(n,e)))return a;if("string"!==t&&i(n=e.toString)&&!o(a=r(n,e)))return a;throw s("Can't convert object to primitive value")}},3887:function(e,t,n){var r=n(5005),i=n(1702),o=n(8006),s=n(5181),a=n(9670),c=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=s.f;return n?c(t,n(e)):t}},857:function(e,t,n){var r=n(7854);e.exports=r},2534:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},3702:function(e,t,n){var r=n(7854),i=n(2492),o=n(614),s=n(4705),a=n(2788),c=n(5112),l=n(7871),u=n(3823),d=n(1913),p=n(7392),h=i&&i.prototype,f=c("species"),m=!1,g=o(r.PromiseRejectionEvent),v=s("Promise",(function(){var e=a(i),t=e!==String(i);if(!t&&66===p)return!0;if(d&&(!h.catch||!h.finally))return!0;if(!p||p<51||!/native code/.test(e)){var n=new i((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[f]=r,!(m=n.then((function(){}))instanceof r))return!0}return!t&&(l||u)&&!g}));e.exports={CONSTRUCTOR:v,REJECTION_EVENT:g,SUBCLASSING:m}},2492:function(e,t,n){var r=n(7854);e.exports=r.Promise},9478:function(e,t,n){var r=n(9670),i=n(111),o=n(8523);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},612:function(e,t,n){var r=n(2492),i=n(7072),o=n(3702).CONSTRUCTOR;e.exports=o||!i((function(e){r.all(e).then(void 0,(function(){}))}))},8572:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=t},2261:function(e,t,n){"use strict";var r,i,o=n(6916),s=n(1702),a=n(1340),c=n(7066),l=n(2999),u=n(2309),d=n(30),p=n(9909).get,h=n(9441),f=n(7168),m=u("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,v=g,y=s("".charAt),E=s("".indexOf),_=s("".replace),b=s("".slice),S=(i=/b*/g,o(g,r=/a/,"a"),o(g,i,"a"),0!==r.lastIndex||0!==i.lastIndex),T=l.BROKEN_CARET,I=void 0!==/()??/.exec("")[1];(S||I||T||h||f)&&(v=function(e){var t,n,r,i,s,l,u,h=this,f=p(h),N=a(e),w=f.raw;if(w)return w.lastIndex=h.lastIndex,t=o(v,w,N),h.lastIndex=w.lastIndex,t;var C=f.groups,O=T&&h.sticky,A=o(c,h),R=h.source,M=0,D=N;if(O&&(A=_(A,"y",""),-1===E(A,"g")&&(A+="g"),D=b(N,h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==y(N,h.lastIndex-1))&&(R="(?: "+R+")",D=" "+D,M++),n=new RegExp("^(?:"+R+")",A)),I&&(n=new RegExp("^"+R+"$(?!\\s)",A)),S&&(r=h.lastIndex),i=o(g,O?n:h,D),O?i?(i.input=b(i.input,M),i[0]=b(i[0],M),i.index=h.lastIndex,h.lastIndex+=i[0].length):h.lastIndex=0:S&&i&&(h.lastIndex=h.global?i.index+i[0].length:r),I&&i&&i.length>1&&o(m,i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&C)for(i.groups=l=d(null),s=0;s<C.length;s++)l[(u=C[s])[0]]=i[u[1]];return i}),e.exports=v},7066:function(e,t,n){"use strict";var r=n(9670);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4706:function(e,t,n){var r=n(6916),i=n(2597),o=n(7976),s=n(7066),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||i(e,"flags")||!o(a,e)?t:r(s,e)}},2999:function(e,t,n){var r=n(7293),i=n(7854).RegExp,o=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=o||r((function(){return!i("a","y").sticky})),a=o||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},9441:function(e,t,n){var r=n(7293),i=n(7854).RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:function(e,t,n){var r=n(7293),i=n(7854).RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4488:function(e,t,n){var r=n(8554),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},7152:function(e,t,n){"use strict";var r,i=n(7854),o=n(2104),s=n(614),a=n(9363),c=n(8113),l=n(206),u=n(8053),d=i.Function,p=/MSIE .\./.test(c)||a&&((r=i.Bun.version.split(".")).length<3||0==r[0]&&(r[1]<3||3==r[1]&&0==r[2]));e.exports=function(e,t){var n=t?2:1;return p?function(r,i){var a=u(arguments.length,1)>n,c=s(r)?r:d(r),p=a?l(arguments,n):[],h=a?function(){o(c,this,p)}:c;return t?e(h,i):e(h)}:e}},6340:function(e,t,n){"use strict";var r=n(5005),i=n(7045),o=n(5112),s=n(9781),a=o("species");e.exports=function(e){var t=r(e);s&&t&&!t[a]&&i(t,a,{configurable:!0,get:function(){return this}})}},8003:function(e,t,n){var r=n(3070).f,i=n(2597),o=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,o)&&r(e,o,{configurable:!0,value:t})}},6200:function(e,t,n){var r=n(2309),i=n(9711),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:function(e,t,n){var r=n(7854),i=n(3072),o="__core-js_shared__",s=r[o]||i(o,{});e.exports=s},2309:function(e,t,n){var r=n(1913),i=n(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.30.2",mode:r?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:function(e,t,n){var r=n(9670),i=n(9483),o=n(8554),s=n(5112)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||o(n=r(a)[s])?t:i(n)}},8710:function(e,t,n){var r=n(1702),i=n(9303),o=n(1340),s=n(4488),a=r("".charAt),c=r("".charCodeAt),l=r("".slice),u=function(e){return function(t,n){var r,u,d=o(s(t)),p=i(n),h=d.length;return p<0||p>=h?e?"":void 0:(r=c(d,p))<55296||r>56319||p+1===h||(u=c(d,p+1))<56320||u>57343?e?a(d,p):r:e?l(d,p,p+2):u-56320+(r-55296<<10)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},3197:function(e,t,n){var r=n(1702),i=2147483647,o=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",c=RangeError,l=r(s.exec),u=Math.floor,d=String.fromCharCode,p=r("".charCodeAt),h=r([].join),f=r([].push),m=r("".replace),g=r("".split),v=r("".toLowerCase),y=function(e){return e+22+75*(e<26)},E=function(e,t,n){var r=0;for(e=n?u(e/700):e>>1,e+=u(e/t);e>455;)e=u(e/35),r+=36;return u(r+36*e/(e+38))},_=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=p(e,n++);if(i>=55296&&i<=56319&&n<r){var o=p(e,n++);56320==(64512&o)?f(t,((1023&i)<<10)+(1023&o)+65536):(f(t,i),n--)}else f(t,i)}return t}(e);var n,r,o=e.length,s=128,l=0,m=72;for(n=0;n<e.length;n++)(r=e[n])<128&&f(t,d(r));var g=t.length,v=g;for(g&&f(t,"-");v<o;){var _=i;for(n=0;n<e.length;n++)(r=e[n])>=s&&r<_&&(_=r);var b=v+1;if(_-s>u((i-l)/b))throw c(a);for(l+=(_-s)*b,s=_,n=0;n<e.length;n++){if((r=e[n])<s&&++l>i)throw c(a);if(r==s){for(var S=l,T=36;;){var I=T<=m?1:T>=m+26?26:T-m;if(S<I)break;var N=S-I,w=36-I;f(t,d(y(I+N%w))),S=u(N/w),T+=36}f(t,d(y(S))),m=E(l,b,v==g),l=0,v++}}l++,s++}return h(t,"")};e.exports=function(e){var t,n,r=[],i=g(m(v(e),s,"."),".");for(t=0;t<i.length;t++)n=i[t],f(r,l(o,n)?"xn--"+_(n):n);return h(r,".")}},3111:function(e,t,n){var r=n(1702),i=n(4488),o=n(1340),s=n(1361),a=r("".replace),c=RegExp("^["+s+"]+"),l=RegExp("(^|[^"+s+"])["+s+"]+$"),u=function(e){return function(t){var n=o(i(t));return 1&e&&(n=a(n,c,"")),2&e&&(n=a(n,l,"$1")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},6293:function(e,t,n){var r=n(7392),i=n(7293),o=n(7854).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},6532:function(e,t,n){var r=n(6916),i=n(5005),o=n(5112),s=n(8052);e.exports=function(){var e=i("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,a=o("toPrimitive");t&&!t[a]&&s(t,a,(function(e){return r(n,this)}),{arity:1})}},2015:function(e,t,n){var r=n(6293);e.exports=r&&!!Symbol.for&&!!Symbol.keyFor},261:function(e,t,n){var r,i,o,s,a=n(7854),c=n(2104),l=n(9974),u=n(614),d=n(2597),p=n(7293),h=n(490),f=n(206),m=n(317),g=n(8053),v=n(6833),y=n(5268),E=a.setImmediate,_=a.clearImmediate,b=a.process,S=a.Dispatch,T=a.Function,I=a.MessageChannel,N=a.String,w=0,C={},O="onreadystatechange";p((function(){r=a.location}));var A=function(e){if(d(C,e)){var t=C[e];delete C[e],t()}},R=function(e){return function(){A(e)}},M=function(e){A(e.data)},D=function(e){a.postMessage(N(e),r.protocol+"//"+r.host)};E&&_||(E=function(e){g(arguments.length,1);var t=u(e)?e:T(e),n=f(arguments,1);return C[++w]=function(){c(t,void 0,n)},i(w),w},_=function(e){delete C[e]},y?i=function(e){b.nextTick(R(e))}:S&&S.now?i=function(e){S.now(R(e))}:I&&!v?(s=(o=new I).port2,o.port1.onmessage=M,i=l(s.postMessage,s)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!p(D)?(i=D,a.addEventListener("message",M,!1)):i=O in m("script")?function(e){h.appendChild(m("script"))[O]=function(){h.removeChild(this),A(e)}}:function(e){setTimeout(R(e),0)}),e.exports={set:E,clear:_}},863:function(e,t,n){var r=n(1702);e.exports=r(1..valueOf)},1400:function(e,t,n){var r=n(9303),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},4599:function(e,t,n){var r=n(7593),i=TypeError;e.exports=function(e){var t=r(e,"number");if("number"==typeof t)throw i("Can't convert number to bigint");return BigInt(t)}},7067:function(e,t,n){var r=n(9303),i=n(7466),o=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw o("Wrong length or index");return n}},5656:function(e,t,n){var r=n(8361),i=n(4488);e.exports=function(e){return r(i(e))}},9303:function(e,t,n){var r=n(4758);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},7466:function(e,t,n){var r=n(9303),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},7908:function(e,t,n){var r=n(4488),i=Object;e.exports=function(e){return i(r(e))}},4590:function(e,t,n){var r=n(3002),i=RangeError;e.exports=function(e,t){var n=r(e);if(n%t)throw i("Wrong offset");return n}},3002:function(e,t,n){var r=n(9303),i=RangeError;e.exports=function(e){var t=r(e);if(t<0)throw i("The argument can't be less than 0");return t}},7593:function(e,t,n){var r=n(6916),i=n(111),o=n(2190),s=n(8173),a=n(2140),c=n(5112),l=TypeError,u=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,c=s(e,u);if(c){if(void 0===t&&(t="default"),n=r(c,e,t),!i(n)||o(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:function(e,t,n){var r=n(7593),i=n(2190);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},1694:function(e,t,n){var r={};r[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(r)},1340:function(e,t,n){var r=n(648),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9843:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(6916),s=n(9781),a=n(3832),c=n(260),l=n(3331),u=n(5787),d=n(9114),p=n(8880),h=n(5988),f=n(7466),m=n(7067),g=n(4590),v=n(4948),y=n(2597),E=n(648),_=n(111),b=n(2190),S=n(30),T=n(7976),I=n(7674),N=n(8006).f,w=n(7321),C=n(2092).forEach,O=n(6340),A=n(7045),R=n(3070),M=n(1236),D=n(9909),k=n(9587),x=D.get,L=D.set,P=D.enforce,j=R.f,U=M.f,F=Math.round,z=i.RangeError,B=l.ArrayBuffer,V=B.prototype,H=l.DataView,G=c.NATIVE_ARRAY_BUFFER_VIEWS,W=c.TYPED_ARRAY_TAG,Y=c.TypedArray,q=c.TypedArrayPrototype,K=c.aTypedArrayConstructor,Q=c.isTypedArray,J="BYTES_PER_ELEMENT",X="Wrong length",Z=function(e,t){K(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},$=function(e,t){A(e,t,{configurable:!0,get:function(){return x(this)[t]}})},ee=function(e){var t;return T(V,e)||"ArrayBuffer"==(t=E(e))||"SharedArrayBuffer"==t},te=function(e,t){return Q(e)&&!b(t)&&t in e&&h(+t)&&t>=0},ne=function(e,t){return t=v(t),te(e,t)?d(2,e[t]):U(e,t)},re=function(e,t,n){return t=v(t),!(te(e,t)&&_(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?j(e,t,n):(e[t]=n.value,e)};s?(G||(M.f=ne,R.f=re,$(q,"buffer"),$(q,"byteOffset"),$(q,"byteLength"),$(q,"length")),r({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:ne,defineProperty:re}),e.exports=function(e,t,n){var s=e.match(/\d+/)[0]/8,c=e+(n?"Clamped":"")+"Array",l="get"+e,d="set"+e,h=i[c],v=h,y=v&&v.prototype,E={},b=function(e,t){j(e,t,{get:function(){return function(e,t){var n=x(e);return n.view[l](t*s+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=x(e);n&&(r=(r=F(r))<0?0:r>255?255:255&r),i.view[d](t*s+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};G?a&&(v=t((function(e,t,n,r){return u(e,y),k(_(t)?ee(t)?void 0!==r?new h(t,g(n,s),r):void 0!==n?new h(t,g(n,s)):new h(t):Q(t)?Z(v,t):o(w,v,t):new h(m(t)),e,v)})),I&&I(v,Y),C(N(h),(function(e){e in v||p(v,e,h[e])})),v.prototype=y):(v=t((function(e,t,n,r){u(e,y);var i,a,c,l=0,d=0;if(_(t)){if(!ee(t))return Q(t)?Z(v,t):o(w,v,t);i=t,d=g(n,s);var p=t.byteLength;if(void 0===r){if(p%s)throw z(X);if((a=p-d)<0)throw z(X)}else if((a=f(r)*s)+d>p)throw z(X);c=a/s}else c=m(t),i=new B(a=c*s);for(L(e,{buffer:i,byteOffset:d,byteLength:a,length:c,view:new H(i)});l<c;)b(e,l++)})),I&&I(v,Y),y=v.prototype=S(q)),y.constructor!==v&&p(y,"constructor",v),P(y).TypedArrayConstructor=v,W&&p(y,W,c);var T=v!=h;E[c]=v,r({global:!0,constructor:!0,forced:T,sham:!G},E),J in v||p(v,J,s),J in y||p(y,J,s),O(c)}):e.exports=function(){}},3832:function(e,t,n){var r=n(7854),i=n(7293),o=n(7072),s=n(260).NATIVE_ARRAY_BUFFER_VIEWS,a=r.ArrayBuffer,c=r.Int8Array;e.exports=!s||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new a(2),1,void 0).length}))},3074:function(e,t,n){var r=n(7745),i=n(6304);e.exports=function(e,t){return r(i(e),t)}},7321:function(e,t,n){var r=n(9974),i=n(6916),o=n(9483),s=n(7908),a=n(6244),c=n(4121),l=n(1246),u=n(7659),d=n(4067),p=n(260).aTypedArrayConstructor,h=n(4599);e.exports=function(e){var t,n,f,m,g,v,y,E,_=o(this),b=s(e),S=arguments.length,T=S>1?arguments[1]:void 0,I=void 0!==T,N=l(b);if(N&&!u(N))for(E=(y=c(b,N)).next,b=[];!(v=i(E,y)).done;)b.push(v.value);for(I&&S>2&&(T=r(T,arguments[2])),n=a(b),f=new(p(_))(n),m=d(f),t=0;n>t;t++)g=I?T(b[t],t):b[t],f[t]=m?h(g):+g;return f}},6304:function(e,t,n){var r=n(260),i=n(6707),o=r.aTypedArrayConstructor,s=r.getTypedArrayConstructor;e.exports=function(e){return o(i(e,s(e)))}},9711:function(e,t,n){var r=n(1702),i=0,o=Math.random(),s=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},5143:function(e,t,n){var r=n(7293),i=n(5112),o=n(9781),s=n(1913),a=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),s&&!e.toJSON||!t.size&&(s||!o)||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},3307:function(e,t,n){var r=n(6293);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var r=n(9781),i=n(7293);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},4811:function(e,t,n){var r=n(7854),i=n(614),o=r.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},6800:function(e,t,n){var r=n(857),i=n(2597),o=n(6061),s=n(3070).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||s(t,e,{value:o.f(e)})}},6061:function(e,t,n){var r=n(5112);t.f=r},5112:function(e,t,n){var r=n(7854),i=n(2309),o=n(2597),s=n(9711),a=n(6293),c=n(3307),l=r.Symbol,u=i("wks"),d=c?l.for||l:l&&l.withoutSetter||s;e.exports=function(e){return o(u,e)||(u[e]=a&&o(l,e)?l[e]:d("Symbol."+e)),u[e]}},1361:function(e){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},8264:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(3331),s=n(6340),a="ArrayBuffer",c=o[a];r({global:!0,constructor:!0,forced:i[a]!==c},{ArrayBuffer:c}),s(a)},9575:function(e,t,n){"use strict";var r=n(2109),i=n(1470),o=n(7293),s=n(3331),a=n(9670),c=n(1400),l=n(7466),u=n(6707),d=s.ArrayBuffer,p=s.DataView,h=p.prototype,f=i(d.prototype.slice),m=i(h.getUint8),g=i(h.setUint8);r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new d(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(f&&void 0===t)return f(a(this),e);for(var n=a(this).byteLength,r=c(e,n),i=c(void 0===t?n:t,n),o=new(u(this,d))(l(i-r)),s=new p(this),h=new p(o),v=0;r<i;)g(h,v++,m(s,r++));return o}})},2222:function(e,t,n){"use strict";var r=n(2109),i=n(7293),o=n(3157),s=n(111),a=n(7908),c=n(6244),l=n(7207),u=n(6135),d=n(5417),p=n(1194),h=n(5112),f=n(7392),m=h("isConcatSpreadable"),g=f>=51||!i((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,arity:1,forced:!g||!p("concat")},{concat:function(e){var t,n,r,i,o,s=a(this),p=d(s,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(v(o=-1===t?s:arguments[t]))for(i=c(o),l(h+i),n=0;n<i;n++,h++)n in o&&u(p,h,o[n]);else l(h+1),u(p,h++,o);return p.length=h,p}})},7327:function(e,t,n){"use strict";var r=n(2109),i=n(2092).filter;r({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},9554:function(e,t,n){"use strict";var r=n(2109),i=n(8533);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},1038:function(e,t,n){var r=n(2109),i=n(8457);r({target:"Array",stat:!0,forced:!n(7072)((function(e){Array.from(e)}))},{from:i})},6699:function(e,t,n){"use strict";var r=n(2109),i=n(1318).includes,o=n(7293),s=n(1223);r({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},2772:function(e,t,n){"use strict";var r=n(2109),i=n(1470),o=n(1318).indexOf,s=n(9341),a=i([].indexOf),c=!!a&&1/a([1],1,-0)<0;r({target:"Array",proto:!0,forced:c||!s("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return c?a(this,e,t)||0:o(this,e,t)}})},9753:function(e,t,n){n(2109)({target:"Array",stat:!0},{isArray:n(3157)})},6992:function(e,t,n){"use strict";var r=n(5656),i=n(1223),o=n(7497),s=n(9909),a=n(3070).f,c=n(1656),l=n(6178),u=n(1913),d=n(9781),p="Array Iterator",h=s.set,f=s.getterFor(p);e.exports=c(Array,"Array",(function(e,t){h(this,{type:p,target:r(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,l(void 0,!0)):l("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values");var m=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!u&&d&&"values"!==m.name)try{a(m,"name",{value:"values"})}catch(e){}},9600:function(e,t,n){"use strict";var r=n(2109),i=n(1702),o=n(8361),s=n(5656),a=n(9341),c=i([].join);r({target:"Array",proto:!0,forced:o!=Object||!a("join",",")},{join:function(e){return c(s(this),void 0===e?",":e)}})},4986:function(e,t,n){var r=n(2109),i=n(6583);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},1249:function(e,t,n){"use strict";var r=n(2109),i=n(2092).map;r({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},5827:function(e,t,n){"use strict";var r=n(2109),i=n(3671).left,o=n(9341),s=n(7392);r({target:"Array",proto:!0,forced:!n(5268)&&s>79&&s<83||!o("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},5069:function(e,t,n){"use strict";var r=n(2109),i=n(1702),o=n(3157),s=i([].reverse),a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),s(this)}})},7042:function(e,t,n){"use strict";var r=n(2109),i=n(3157),o=n(4411),s=n(111),a=n(1400),c=n(6244),l=n(5656),u=n(6135),d=n(5112),p=n(1194),h=n(206),f=p("slice"),m=d("species"),g=Array,v=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,r,d,p=l(this),f=c(p),y=a(e,f),E=a(void 0===t?f:t,f);if(i(p)&&(n=p.constructor,(o(n)&&(n===g||i(n.prototype))||s(n)&&null===(n=n[m]))&&(n=void 0),n===g||void 0===n))return h(p,y,E);for(r=new(void 0===n?g:n)(v(E-y,0)),d=0;y<E;y++,d++)y in p&&u(r,d,p[y]);return r.length=d,r}})},5212:function(e,t,n){"use strict";var r=n(2109),i=n(2092).some;r({target:"Array",proto:!0,forced:!n(9341)("some")},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},561:function(e,t,n){"use strict";var r=n(2109),i=n(7908),o=n(1400),s=n(9303),a=n(6244),c=n(3658),l=n(7207),u=n(5417),d=n(6135),p=n(5117),h=n(1194)("splice"),f=Math.max,m=Math.min;r({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var n,r,h,g,v,y,E=i(this),_=a(E),b=o(e,_),S=arguments.length;for(0===S?n=r=0:1===S?(n=0,r=_-b):(n=S-2,r=m(f(s(t),0),_-b)),l(_+n-r),h=u(E,r),g=0;g<r;g++)(v=b+g)in E&&d(h,g,E[v]);if(h.length=r,n<r){for(g=b;g<_-r;g++)y=g+n,(v=g+r)in E?E[y]=E[v]:p(E,y);for(g=_;g>_-r+n;g--)p(E,g-1)}else if(n>r)for(g=_-r;g>b;g--)y=g+n-1,(v=g+r-1)in E?E[y]=E[v]:p(E,y);for(g=0;g<n;g++)E[g+b]=arguments[g+2];return c(E,_-r+n),h}})},3843:function(e,t,n){var r=n(2109),i=n(1702),o=Date,s=i(o.prototype.getTime);r({target:"Date",stat:!0},{now:function(){return s(new o)}})},3710:function(e,t,n){var r=n(1702),i=n(8052),o=Date.prototype,s="Invalid Date",a="toString",c=r(o[a]),l=r(o.getTime);String(new Date(NaN))!=s&&i(o,a,(function(){var e=l(this);return e==e?c(this):s}))},4812:function(e,t,n){var r=n(2109),i=n(7065);r({target:"Function",proto:!0,forced:Function.bind!==i},{bind:i})},8309:function(e,t,n){var r=n(9781),i=n(6530).EXISTS,o=n(1702),s=n(7045),a=Function.prototype,c=o(a.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(l.exec);r&&!i&&s(a,"name",{configurable:!0,get:function(){try{return u(l,c(this))[1]}catch(e){return""}}})},8862:function(e,t,n){var r=n(2109),i=n(5005),o=n(2104),s=n(6916),a=n(1702),c=n(7293),l=n(614),u=n(2190),d=n(206),p=n(8044),h=n(6293),f=String,m=i("JSON","stringify"),g=a(/./.exec),v=a("".charAt),y=a("".charCodeAt),E=a("".replace),_=a(1..toString),b=/[\uD800-\uDFFF]/g,S=/^[\uD800-\uDBFF]$/,T=/^[\uDC00-\uDFFF]$/,I=!h||c((function(){var e=i("Symbol")();return"[null]"!=m([e])||"{}"!=m({a:e})||"{}"!=m(Object(e))})),N=c((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),w=function(e,t){var n=d(arguments),r=p(t);if(l(r)||void 0!==e&&!u(e))return n[1]=function(e,t){if(l(r)&&(t=s(r,this,f(e),t)),!u(t))return t},o(m,null,n)},C=function(e,t,n){var r=v(n,t-1),i=v(n,t+1);return g(S,e)&&!g(T,i)||g(T,e)&&!g(S,r)?"\\u"+_(y(e,0),16):e};m&&r({target:"JSON",stat:!0,arity:3,forced:I||N},{stringify:function(e,t,n){var r=d(arguments),i=o(I?w:m,null,r);return N&&"string"==typeof i?E(i,b,C):i}})},9098:function(e,t,n){"use strict";n(7710)("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(5631))},1532:function(e,t,n){n(9098)},9653:function(e,t,n){"use strict";var r=n(2109),i=n(1913),o=n(9781),s=n(7854),a=n(857),c=n(1702),l=n(4705),u=n(2597),d=n(9587),p=n(7976),h=n(2190),f=n(7593),m=n(7293),g=n(8006).f,v=n(1236).f,y=n(3070).f,E=n(863),_=n(3111).trim,b="Number",S=s[b],T=a[b],I=S.prototype,N=s.TypeError,w=c("".slice),C=c("".charCodeAt),O=l(b,!S(" 0o1")||!S("0b1")||S("+0x1")),A=function(e){var t,n=arguments.length<1?0:S(function(e){var t=f(e,"number");return"bigint"==typeof t?t:function(e){var t,n,r,i,o,s,a,c,l=f(e,"number");if(h(l))throw N("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=_(l),43===(t=C(l,0))||45===t){if(88===(n=C(l,2))||120===n)return NaN}else if(48===t){switch(C(l,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(s=(o=w(l,2)).length,a=0;a<s;a++)if((c=C(o,a))<48||c>i)return NaN;return parseInt(o,r)}return+l}(t)}(e));return p(I,t=this)&&m((function(){E(t)}))?d(Object(n),this,A):n};A.prototype=I,O&&!i&&(I.constructor=A),r({global:!0,constructor:!0,wrap:!0,forced:O},{Number:A});var R=function(e,t){for(var n,r=o?g(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),i=0;r.length>i;i++)u(t,n=r[i])&&!u(e,n)&&y(e,n,v(t,n))};i&&T&&R(a[b],T),(O||i)&&R(a[b],S)},3161:function(e,t,n){n(2109)({target:"Number",stat:!0},{isInteger:n(5988)})},9601:function(e,t,n){var r=n(2109),i=n(1574);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},9070:function(e,t,n){var r=n(2109),i=n(9781),o=n(3070).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!i},{defineProperty:o})},9720:function(e,t,n){var r=n(2109),i=n(4699).entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},9660:function(e,t,n){var r=n(2109),i=n(6293),o=n(7293),s=n(5181),a=n(7908);r({target:"Object",stat:!0,forced:!i||o((function(){s.f(1)}))},{getOwnPropertySymbols:function(e){var t=s.f;return t?t(a(e)):[]}})},7941:function(e,t,n){var r=n(2109),i=n(7908),o=n(1956);r({target:"Object",stat:!0,forced:n(7293)((function(){o(1)}))},{keys:function(e){return o(i(e))}})},1539:function(e,t,n){var r=n(1694),i=n(8052),o=n(288);r||i(Object.prototype,"toString",o,{unsafe:!0})},821:function(e,t,n){"use strict";var r=n(2109),i=n(6916),o=n(9662),s=n(8523),a=n(2534),c=n(408);r({target:"Promise",stat:!0,forced:n(612)},{all:function(e){var t=this,n=s.f(t),r=n.resolve,l=n.reject,u=a((function(){var n=o(t.resolve),s=[],a=0,u=1;c(e,(function(e){var o=a++,c=!1;u++,i(n,t,e).then((function(e){c||(c=!0,s[o]=e,--u||r(s))}),l)})),--u||r(s)}));return u.error&&l(u.value),n.promise}})},4164:function(e,t,n){"use strict";var r=n(2109),i=n(1913),o=n(3702).CONSTRUCTOR,s=n(2492),a=n(5005),c=n(614),l=n(8052),u=s&&s.prototype;if(r({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&c(s)){var d=a("Promise").prototype.catch;u.catch!==d&&l(u,"catch",d,{unsafe:!0})}},3401:function(e,t,n){"use strict";var r,i,o,s=n(2109),a=n(1913),c=n(5268),l=n(7854),u=n(6916),d=n(8052),p=n(7674),h=n(8003),f=n(6340),m=n(9662),g=n(614),v=n(111),y=n(5787),E=n(6707),_=n(261).set,b=n(5948),S=n(842),T=n(2534),I=n(8572),N=n(9909),w=n(2492),C=n(3702),O=n(8523),A="Promise",R=C.CONSTRUCTOR,M=C.REJECTION_EVENT,D=C.SUBCLASSING,k=N.getterFor(A),x=N.set,L=w&&w.prototype,P=w,j=L,U=l.TypeError,F=l.document,z=l.process,B=O.f,V=B,H=!!(F&&F.createEvent&&l.dispatchEvent),G="unhandledrejection",W=function(e){var t;return!(!v(e)||!g(t=e.then))&&t},Y=function(e,t){var n,r,i,o=t.value,s=1==t.state,a=s?e.ok:e.fail,c=e.resolve,l=e.reject,d=e.domain;try{a?(s||(2===t.rejection&&X(t),t.rejection=1),!0===a?n=o:(d&&d.enter(),n=a(o),d&&(d.exit(),i=!0)),n===e.promise?l(U("Promise-chain cycle")):(r=W(n))?u(r,n,c,l):c(n)):l(o)}catch(e){d&&!i&&d.exit(),l(e)}},q=function(e,t){e.notified||(e.notified=!0,b((function(){for(var n,r=e.reactions;n=r.get();)Y(n,e);e.notified=!1,t&&!e.rejection&&Q(e)})))},K=function(e,t,n){var r,i;H?((r=F.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),l.dispatchEvent(r)):r={promise:t,reason:n},!M&&(i=l["on"+e])?i(r):e===G&&S("Unhandled promise rejection",n)},Q=function(e){u(_,l,(function(){var t,n=e.facade,r=e.value;if(J(e)&&(t=T((function(){c?z.emit("unhandledRejection",r,n):K(G,n,r)})),e.rejection=c||J(e)?2:1,t.error))throw t.value}))},J=function(e){return 1!==e.rejection&&!e.parent},X=function(e){u(_,l,(function(){var t=e.facade;c?z.emit("rejectionHandled",t):K("rejectionhandled",t,e.value)}))},Z=function(e,t,n){return function(r){e(t,r,n)}},$=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,q(e,!0))},ee=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw U("Promise can't be resolved itself");var r=W(t);r?b((function(){var n={done:!1};try{u(r,t,Z(ee,n,e),Z($,n,e))}catch(t){$(n,t,e)}})):(e.value=t,e.state=1,q(e,!1))}catch(t){$({done:!1},t,e)}}};if(R&&(j=(P=function(e){y(this,j),m(e),u(r,this);var t=k(this);try{e(Z(ee,t),Z($,t))}catch(e){$(t,e)}}).prototype,(r=function(e){x(this,{type:A,done:!1,notified:!1,parent:!1,reactions:new I,rejection:!1,state:0,value:void 0})}).prototype=d(j,"then",(function(e,t){var n=k(this),r=B(E(this,P));return n.parent=!0,r.ok=!g(e)||e,r.fail=g(t)&&t,r.domain=c?z.domain:void 0,0==n.state?n.reactions.add(r):b((function(){Y(r,n)})),r.promise})),i=function(){var e=new r,t=k(e);this.promise=e,this.resolve=Z(ee,t),this.reject=Z($,t)},O.f=B=function(e){return e===P||void 0===e?new i(e):V(e)},!a&&g(w)&&L!==Object.prototype)){o=L.then,D||d(L,"then",(function(e,t){var n=this;return new P((function(e,t){u(o,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete L.constructor}catch(e){}p&&p(L,j)}s({global:!0,constructor:!0,wrap:!0,forced:R},{Promise:P}),h(P,A,!1,!0),f(A)},8674:function(e,t,n){n(3401),n(821),n(4164),n(6027),n(683),n(6294)},6027:function(e,t,n){"use strict";var r=n(2109),i=n(6916),o=n(9662),s=n(8523),a=n(2534),c=n(408);r({target:"Promise",stat:!0,forced:n(612)},{race:function(e){var t=this,n=s.f(t),r=n.reject,l=a((function(){var s=o(t.resolve);c(e,(function(e){i(s,t,e).then(n.resolve,r)}))}));return l.error&&r(l.value),n.promise}})},683:function(e,t,n){"use strict";var r=n(2109),i=n(6916),o=n(8523);r({target:"Promise",stat:!0,forced:n(3702).CONSTRUCTOR},{reject:function(e){var t=o.f(this);return i(t.reject,void 0,e),t.promise}})},6294:function(e,t,n){"use strict";var r=n(2109),i=n(5005),o=n(1913),s=n(2492),a=n(3702).CONSTRUCTOR,c=n(9478),l=i("Promise"),u=o&&!a;r({target:"Promise",stat:!0,forced:o||a},{resolve:function(e){return c(u&&this===l?s:this,e)}})},4916:function(e,t,n){"use strict";var r=n(2109),i=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},9714:function(e,t,n){"use strict";var r=n(6530).PROPER,i=n(8052),o=n(9670),s=n(1340),a=n(7293),c=n(4706),l="toString",u=RegExp.prototype[l],d=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),p=r&&u.name!=l;(d||p)&&i(RegExp.prototype,l,(function(){var e=o(this);return"/"+s(e.source)+"/"+s(c(e))}),{unsafe:!0})},2023:function(e,t,n){"use strict";var r=n(2109),i=n(1702),o=n(3929),s=n(4488),a=n(1340),c=n(4964),l=i("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~l(a(s(this)),a(o(e)),arguments.length>1?arguments[1]:void 0)}})},8783:function(e,t,n){"use strict";var r=n(8710).charAt,i=n(1340),o=n(9909),s=n(1656),a=n(6178),c="String Iterator",l=o.set,u=o.getterFor(c);s(String,"String",(function(e){l(this,{type:c,string:i(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?a(void 0,!0):(e=r(n,i),t.index+=e.length,a(e,!1))}))},4032:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(6916),s=n(1702),a=n(1913),c=n(9781),l=n(6293),u=n(7293),d=n(2597),p=n(7976),h=n(9670),f=n(5656),m=n(4948),g=n(1340),v=n(9114),y=n(30),E=n(1956),_=n(8006),b=n(1156),S=n(5181),T=n(1236),I=n(3070),N=n(6048),w=n(5296),C=n(8052),O=n(7045),A=n(2309),R=n(6200),M=n(3501),D=n(9711),k=n(5112),x=n(6061),L=n(6800),P=n(6532),j=n(8003),U=n(9909),F=n(2092).forEach,z=R("hidden"),B="Symbol",V="prototype",H=U.set,G=U.getterFor(B),W=Object[V],Y=i.Symbol,q=Y&&Y[V],K=i.TypeError,Q=i.QObject,J=T.f,X=I.f,Z=b.f,$=w.f,ee=s([].push),te=A("symbols"),ne=A("op-symbols"),re=A("wks"),ie=!Q||!Q[V]||!Q[V].findChild,oe=c&&u((function(){return 7!=y(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=J(W,t);r&&delete W[t],X(e,t,n),r&&e!==W&&X(W,t,r)}:X,se=function(e,t){var n=te[e]=y(q);return H(n,{type:B,tag:e,description:t}),c||(n.description=t),n},ae=function(e,t,n){e===W&&ae(ne,t,n),h(e);var r=m(t);return h(n),d(te,r)?(n.enumerable?(d(e,z)&&e[z][r]&&(e[z][r]=!1),n=y(n,{enumerable:v(0,!1)})):(d(e,z)||X(e,z,v(1,{})),e[z][r]=!0),oe(e,r,n)):X(e,r,n)},ce=function(e,t){h(e);var n=f(t),r=E(n).concat(pe(n));return F(r,(function(t){c&&!o(le,n,t)||ae(e,t,n[t])})),e},le=function(e){var t=m(e),n=o($,this,t);return!(this===W&&d(te,t)&&!d(ne,t))&&(!(n||!d(this,t)||!d(te,t)||d(this,z)&&this[z][t])||n)},ue=function(e,t){var n=f(e),r=m(t);if(n!==W||!d(te,r)||d(ne,r)){var i=J(n,r);return!i||!d(te,r)||d(n,z)&&n[z][r]||(i.enumerable=!0),i}},de=function(e){var t=Z(f(e)),n=[];return F(t,(function(e){d(te,e)||d(M,e)||ee(n,e)})),n},pe=function(e){var t=e===W,n=Z(t?ne:f(e)),r=[];return F(n,(function(e){!d(te,e)||t&&!d(W,e)||ee(r,te[e])})),r};l||(Y=function(){if(p(q,this))throw K("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,t=D(e),n=function(e){this===W&&o(n,ne,e),d(this,z)&&d(this[z],t)&&(this[z][t]=!1),oe(this,t,v(1,e))};return c&&ie&&oe(W,t,{configurable:!0,set:n}),se(t,e)},C(q=Y[V],"toString",(function(){return G(this).tag})),C(Y,"withoutSetter",(function(e){return se(D(e),e)})),w.f=le,I.f=ae,N.f=ce,T.f=ue,_.f=b.f=de,S.f=pe,x.f=function(e){return se(k(e),e)},c&&(O(q,"description",{configurable:!0,get:function(){return G(this).description}}),a||C(W,"propertyIsEnumerable",le,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!l,sham:!l},{Symbol:Y}),F(E(re),(function(e){L(e)})),r({target:B,stat:!0,forced:!l},{useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!c},{create:function(e,t){return void 0===t?y(e):ce(y(e),t)},defineProperty:ae,defineProperties:ce,getOwnPropertyDescriptor:ue}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:de}),P(),j(Y,B),M[z]=!0},1817:function(e,t,n){"use strict";var r=n(2109),i=n(9781),o=n(7854),s=n(1702),a=n(2597),c=n(614),l=n(7976),u=n(1340),d=n(7045),p=n(9920),h=o.Symbol,f=h&&h.prototype;if(i&&c(h)&&(!("description"in f)||void 0!==h().description)){var m={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=l(f,this)?new h(e):void 0===e?h():h(e);return""===e&&(m[t]=!0),t};p(g,h),g.prototype=f,f.constructor=g;var v="Symbol(test)"==String(h("test")),y=s(f.valueOf),E=s(f.toString),_=/^Symbol\((.*)\)[^)]+$/,b=s("".replace),S=s("".slice);d(f,"description",{configurable:!0,get:function(){var e=y(this);if(a(m,e))return"";var t=E(e),n=v?S(t,7,-1):b(t,_,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:g})}},763:function(e,t,n){var r=n(2109),i=n(5005),o=n(2597),s=n(1340),a=n(2309),c=n(2015),l=a("string-to-symbol-registry"),u=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=s(e);if(o(l,t))return l[t];var n=i("Symbol")(t);return l[t]=n,u[n]=t,n}})},2165:function(e,t,n){n(6800)("iterator")},2526:function(e,t,n){n(4032),n(763),n(6620),n(8862),n(9660)},6620:function(e,t,n){var r=n(2109),i=n(2597),o=n(2190),s=n(6330),a=n(2309),c=n(2015),l=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{keyFor:function(e){if(!o(e))throw TypeError(s(e)+" is not a symbol");if(i(l,e))return l[e]}})},2990:function(e,t,n){"use strict";var r=n(1702),i=n(260),o=r(n(1048)),s=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(e,t){return o(s(this),e,t,arguments.length>2?arguments[2]:void 0)}))},8927:function(e,t,n){"use strict";var r=n(260),i=n(2092).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},3105:function(e,t,n){"use strict";var r=n(260),i=n(1285),o=n(4599),s=n(648),a=n(6916),c=n(1702),l=n(7293),u=r.aTypedArray,d=r.exportTypedArrayMethod,p=c("".slice);d("fill",(function(e){var t=arguments.length;u(this);var n="Big"===p(s(this),0,3)?o(e):+e;return a(i,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),l((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},5035:function(e,t,n){"use strict";var r=n(260),i=n(2092).filter,o=n(3074),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=i(s(this),e,arguments.length>1?arguments[1]:void 0);return o(this,t)}))},7174:function(e,t,n){"use strict";var r=n(260),i=n(2092).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},4345:function(e,t,n){"use strict";var r=n(260),i=n(2092).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},2846:function(e,t,n){"use strict";var r=n(260),i=n(2092).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},8145:function(e,t,n){"use strict";var r=n(3832);(0,n(260).exportTypedArrayStaticMethod)("from",n(7321),r)},4731:function(e,t,n){"use strict";var r=n(260),i=n(1318).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},7209:function(e,t,n){"use strict";var r=n(260),i=n(1318).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},6319:function(e,t,n){"use strict";var r=n(7854),i=n(7293),o=n(1702),s=n(260),a=n(6992),c=n(5112)("iterator"),l=r.Uint8Array,u=o(a.values),d=o(a.keys),p=o(a.entries),h=s.aTypedArray,f=s.exportTypedArrayMethod,m=l&&l.prototype,g=!i((function(){m[c].call([1])})),v=!!m&&m.values&&m[c]===m.values&&"values"===m.values.name,y=function(){return u(h(this))};f("entries",(function(){return p(h(this))}),g),f("keys",(function(){return d(h(this))}),g),f("values",y,g||!v,{name:"values"}),f(c,y,g||!v,{name:"values"})},8867:function(e,t,n){"use strict";var r=n(260),i=n(1702),o=r.aTypedArray,s=r.exportTypedArrayMethod,a=i([].join);s("join",(function(e){return a(o(this),e)}))},7789:function(e,t,n){"use strict";var r=n(260),i=n(2104),o=n(6583),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return i(o,s(this),t>1?[e,arguments[1]]:[e])}))},3739:function(e,t,n){"use strict";var r=n(260),i=n(2092).map,o=n(6304),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(o(e))(t)}))}))},4483:function(e,t,n){"use strict";var r=n(260),i=n(3671).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},9368:function(e,t,n){"use strict";var r=n(260),i=n(3671).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},2056:function(e,t,n){"use strict";var r=n(260),i=r.aTypedArray,o=r.exportTypedArrayMethod,s=Math.floor;o("reverse",(function(){for(var e,t=this,n=i(t).length,r=s(n/2),o=0;o<r;)e=t[o],t[o++]=t[--n],t[n]=e;return t}))},3462:function(e,t,n){"use strict";var r=n(7854),i=n(6916),o=n(260),s=n(6244),a=n(4590),c=n(7908),l=n(7293),u=r.RangeError,d=r.Int8Array,p=d&&d.prototype,h=p&&p.set,f=o.aTypedArray,m=o.exportTypedArrayMethod,g=!l((function(){var e=new Uint8ClampedArray(2);return i(h,e,{length:1,0:3},1),3!==e[1]})),v=g&&o.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));m("set",(function(e){f(this);var t=a(arguments.length>1?arguments[1]:void 0,1),n=c(e);if(g)return i(h,this,n,t);var r=this.length,o=s(n),l=0;if(o+t>r)throw u("Wrong length");for(;l<o;)this[t+l]=n[l++]}),!g||v)},678:function(e,t,n){"use strict";var r=n(260),i=n(6304),o=n(7293),s=n(206),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("slice",(function(e,t){for(var n=s(a(this),e,t),r=i(this),o=0,c=n.length,l=new r(c);c>o;)l[o]=n[o++];return l}),o((function(){new Int8Array(1).slice()})))},7462:function(e,t,n){"use strict";var r=n(260),i=n(2092).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},3824:function(e,t,n){"use strict";var r=n(7854),i=n(1470),o=n(7293),s=n(9662),a=n(4362),c=n(260),l=n(8886),u=n(256),d=n(7392),p=n(8008),h=c.aTypedArray,f=c.exportTypedArrayMethod,m=r.Uint16Array,g=m&&i(m.prototype.sort),v=!(!g||o((function(){g(new m(2),null)}))&&o((function(){g(new m(2),{})}))),y=!!g&&!o((function(){if(d)return d<74;if(l)return l<67;if(u)return!0;if(p)return p<602;var e,t,n=new m(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(g(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));f("sort",(function(e){return void 0!==e&&s(e),y?g(this,e):a(h(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!y||v)},5021:function(e,t,n){"use strict";var r=n(260),i=n(7466),o=n(1400),s=n(6304),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=a(this),r=n.length,c=o(e,r);return new(s(n))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((void 0===t?r:o(t,r))-c))}))},2974:function(e,t,n){"use strict";var r=n(7854),i=n(2104),o=n(260),s=n(7293),a=n(206),c=r.Int8Array,l=o.aTypedArray,u=o.exportTypedArrayMethod,d=[].toLocaleString,p=!!c&&s((function(){d.call(new c(1))}));u("toLocaleString",(function(){return i(d,p?a(l(this)):l(this),a(arguments))}),s((function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()}))||!s((function(){c.prototype.toLocaleString.call([1,2])})))},5016:function(e,t,n){"use strict";var r=n(260).exportTypedArrayMethod,i=n(7293),o=n(7854),s=n(1702),a=o.Uint8Array,c=a&&a.prototype||{},l=[].toString,u=s([].join);i((function(){l.call({})}))&&(l=function(){return u(this)});var d=c.toString!=l;r("toString",l,d)},2472:function(e,t,n){n(9843)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},4747:function(e,t,n){var r=n(7854),i=n(8324),o=n(8509),s=n(8533),a=n(8880),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var l in i)i[l]&&c(r[l]&&r[l].prototype);c(o)},3948:function(e,t,n){var r=n(7854),i=n(8324),o=n(8509),s=n(6992),a=n(8880),c=n(5112),l=c("iterator"),u=c("toStringTag"),d=s.values,p=function(e,t){if(e){if(e[l]!==d)try{a(e,l,d)}catch(t){e[l]=d}if(e[u]||a(e,u,t),i[t])for(var n in s)if(e[n]!==s[n])try{a(e,n,s[n])}catch(t){e[n]=s[n]}}};for(var h in i)p(r[h]&&r[h].prototype,h);p(o,"DOMTokenList")},6815:function(e,t,n){var r=n(2109),i=n(7854),o=n(7152)(i.setInterval,!0);r({global:!0,bind:!0,forced:i.setInterval!==o},{setInterval:o})},8417:function(e,t,n){var r=n(2109),i=n(7854),o=n(7152)(i.setTimeout,!0);r({global:!0,bind:!0,forced:i.setTimeout!==o},{setTimeout:o})},2564:function(e,t,n){n(6815),n(8417)},5556:function(e,t,n){"use strict";n(6992);var r=n(2109),i=n(7854),o=n(6916),s=n(1702),a=n(9781),c=n(5143),l=n(8052),u=n(7045),d=n(9190),p=n(8003),h=n(3061),f=n(9909),m=n(5787),g=n(614),v=n(2597),y=n(9974),E=n(648),_=n(9670),b=n(111),S=n(1340),T=n(30),I=n(9114),N=n(4121),w=n(1246),C=n(8053),O=n(5112),A=n(4362),R=O("iterator"),M="URLSearchParams",D=M+"Iterator",k=f.set,x=f.getterFor(M),L=f.getterFor(D),P=Object.getOwnPropertyDescriptor,j=function(e){if(!a)return i[e];var t=P(i,e);return t&&t.value},U=j("fetch"),F=j("Request"),z=j("Headers"),B=F&&F.prototype,V=z&&z.prototype,H=i.RegExp,G=i.TypeError,W=i.decodeURIComponent,Y=i.encodeURIComponent,q=s("".charAt),K=s([].join),Q=s([].push),J=s("".replace),X=s([].shift),Z=s([].splice),$=s("".split),ee=s("".slice),te=/\+/g,ne=Array(4),re=function(e){return ne[e-1]||(ne[e-1]=H("((?:%[\\da-f]{2}){"+e+"})","gi"))},ie=function(e){try{return W(e)}catch(t){return e}},oe=function(e){var t=J(e,te," "),n=4;try{return W(t)}catch(e){for(;n;)t=J(t,re(n--),ie);return t}},se=/[!'()~]|%20/g,ae={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ce=function(e){return ae[e]},le=function(e){return J(Y(e),se,ce)},ue=h((function(e,t){k(this,{type:D,iterator:N(x(e).entries),kind:t})}),"Iterator",(function(){var e=L(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),de=function(e){this.entries=[],this.url=null,void 0!==e&&(b(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===q(e,0)?ee(e,1):e:S(e)))};de.prototype={type:M,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,s,a,c,l=w(e);if(l)for(n=(t=N(e,l)).next;!(r=o(n,t)).done;){if(s=(i=N(_(r.value))).next,(a=o(s,i)).done||(c=o(s,i)).done||!o(s,i).done)throw G("Expected sequence with length 2");Q(this.entries,{key:S(a.value),value:S(c.value)})}else for(var u in e)v(e,u)&&Q(this.entries,{key:u,value:S(e[u])})},parseQuery:function(e){if(e)for(var t,n,r=$(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=$(t,"="),Q(this.entries,{key:oe(X(n)),value:oe(K(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],Q(n,le(e.key)+"="+le(e.value));return K(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var pe=function(){m(this,he);var e=k(this,new de(arguments.length>0?arguments[0]:void 0));a||(this.length=e.entries.length)},he=pe.prototype;if(d(he,{append:function(e,t){C(arguments.length,2);var n=x(this);Q(n.entries,{key:S(e),value:S(t)}),a||this.length++,n.updateURL()},delete:function(e){C(arguments.length,1);for(var t=x(this),n=t.entries,r=S(e),i=0;i<n.length;)n[i].key===r?Z(n,i,1):i++;a||(this.length=n.length),t.updateURL()},get:function(e){C(arguments.length,1);for(var t=x(this).entries,n=S(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){C(arguments.length,1);for(var t=x(this).entries,n=S(e),r=[],i=0;i<t.length;i++)t[i].key===n&&Q(r,t[i].value);return r},has:function(e){C(arguments.length,1);for(var t=x(this).entries,n=S(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){C(arguments.length,1);for(var n,r=x(this),i=r.entries,o=!1,s=S(e),c=S(t),l=0;l<i.length;l++)(n=i[l]).key===s&&(o?Z(i,l--,1):(o=!0,n.value=c));o||Q(i,{key:s,value:c}),a||(this.length=i.length),r.updateURL()},sort:function(){var e=x(this);A(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=x(this).entries,r=y(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new ue(this,"keys")},values:function(){return new ue(this,"values")},entries:function(){return new ue(this,"entries")}},{enumerable:!0}),l(he,R,he.entries,{name:"entries"}),l(he,"toString",(function(){return x(this).serialize()}),{enumerable:!0}),a&&u(he,"size",{get:function(){return x(this).entries.length},configurable:!0,enumerable:!0}),p(pe,M),r({global:!0,constructor:!0,forced:!c},{URLSearchParams:pe}),!c&&g(z)){var fe=s(V.has),me=s(V.set),ge=function(e){if(b(e)){var t,n=e.body;if(E(n)===M)return t=e.headers?new z(e.headers):new z,fe(t,"content-type")||me(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),T(e,{body:I(0,S(n)),headers:I(0,t)})}return e};if(g(U)&&r({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return U(e,arguments.length>1?ge(arguments[1]):{})}}),g(F)){var ve=function(e){return m(this,B),new F(e,arguments.length>1?ge(arguments[1]):{})};B.constructor=ve,ve.prototype=B,r({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ve})}}e.exports={URLSearchParams:pe,getState:x}},1637:function(e,t,n){n(5556)},8789:function(e,t,n){"use strict";n(8783);var r,i=n(2109),o=n(9781),s=n(5143),a=n(7854),c=n(9974),l=n(1702),u=n(8052),d=n(7045),p=n(5787),h=n(2597),f=n(1574),m=n(8457),g=n(1589),v=n(8710).codeAt,y=n(3197),E=n(1340),_=n(8003),b=n(8053),S=n(5556),T=n(9909),I=T.set,N=T.getterFor("URL"),w=S.URLSearchParams,C=S.getState,O=a.URL,A=a.TypeError,R=a.parseInt,M=Math.floor,D=Math.pow,k=l("".charAt),x=l(/./.exec),L=l([].join),P=l(1..toString),j=l([].pop),U=l([].push),F=l("".replace),z=l([].shift),B=l("".split),V=l("".slice),H=l("".toLowerCase),G=l([].unshift),W="Invalid scheme",Y="Invalid host",q="Invalid port",K=/[a-z]/i,Q=/[\d+-.a-z]/i,J=/\d/,X=/^0x/i,Z=/^[0-7]+$/,$=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,re=/^[\u0000-\u0020]+/,ie=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,oe=/[\t\n\r]/g,se=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)G(t,e%256),e=M(e/256);return L(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=P(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ae={},ce=f({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),le=f({},ce,{"#":1,"?":1,"{":1,"}":1}),ue=f({},le,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),de=function(e,t){var n=v(e,0);return n>32&&n<127&&!h(t,e)?e:encodeURIComponent(e)},pe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},he=function(e,t){var n;return 2==e.length&&x(K,k(e,0))&&(":"==(n=k(e,1))||!t&&"|"==n)},fe=function(e){var t;return e.length>1&&he(V(e,0,2))&&(2==e.length||"/"===(t=k(e,2))||"\\"===t||"?"===t||"#"===t)},me=function(e){return"."===e||"%2e"===H(e)},ge={},ve={},ye={},Ee={},_e={},be={},Se={},Te={},Ie={},Ne={},we={},Ce={},Oe={},Ae={},Re={},Me={},De={},ke={},xe={},Le={},Pe={},je=function(e,t,n){var r,i,o,s=E(e);if(t){if(i=this.parse(s))throw A(i);this.searchParams=null}else{if(void 0!==n&&(r=new je(n,!0)),i=this.parse(s,null,r))throw A(i);(o=C(new w)).bindURL(this),this.searchParams=o}};je.prototype={type:"URL",parse:function(e,t,n){var i,o,s,a,c,l=this,u=t||ge,d=0,p="",f=!1,v=!1,y=!1;for(e=E(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=F(e,re,""),e=F(e,ie,"$1")),e=F(e,oe,""),i=m(e);d<=i.length;){switch(o=i[d],u){case ge:if(!o||!x(K,o)){if(t)return W;u=ye;continue}p+=H(o),u=ve;break;case ve:if(o&&(x(Q,o)||"+"==o||"-"==o||"."==o))p+=H(o);else{if(":"!=o){if(t)return W;p="",u=ye,d=0;continue}if(t&&(l.isSpecial()!=h(pe,p)||"file"==p&&(l.includesCredentials()||null!==l.port)||"file"==l.scheme&&!l.host))return;if(l.scheme=p,t)return void(l.isSpecial()&&pe[l.scheme]==l.port&&(l.port=null));p="","file"==l.scheme?u=Ae:l.isSpecial()&&n&&n.scheme==l.scheme?u=Ee:l.isSpecial()?u=Te:"/"==i[d+1]?(u=_e,d++):(l.cannotBeABaseURL=!0,U(l.path,""),u=xe)}break;case ye:if(!n||n.cannotBeABaseURL&&"#"!=o)return W;if(n.cannotBeABaseURL&&"#"==o){l.scheme=n.scheme,l.path=g(n.path),l.query=n.query,l.fragment="",l.cannotBeABaseURL=!0,u=Pe;break}u="file"==n.scheme?Ae:be;continue;case Ee:if("/"!=o||"/"!=i[d+1]){u=be;continue}u=Ie,d++;break;case _e:if("/"==o){u=Ne;break}u=ke;continue;case be:if(l.scheme=n.scheme,o==r)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=g(n.path),l.query=n.query;else if("/"==o||"\\"==o&&l.isSpecial())u=Se;else if("?"==o)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=g(n.path),l.query="",u=Le;else{if("#"!=o){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=g(n.path),l.path.length--,u=ke;continue}l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=g(n.path),l.query=n.query,l.fragment="",u=Pe}break;case Se:if(!l.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,u=ke;continue}u=Ne}else u=Ie;break;case Te:if(u=Ie,"/"!=o||"/"!=k(p,d+1))continue;d++;break;case Ie:if("/"!=o&&"\\"!=o){u=Ne;continue}break;case Ne:if("@"==o){f&&(p="%40"+p),f=!0,s=m(p);for(var _=0;_<s.length;_++){var b=s[_];if(":"!=b||y){var S=de(b,ue);y?l.password+=S:l.username+=S}else y=!0}p=""}else if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&l.isSpecial()){if(f&&""==p)return"Invalid authority";d-=m(p).length+1,p="",u=we}else p+=o;break;case we:case Ce:if(t&&"file"==l.scheme){u=Me;continue}if(":"!=o||v){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&l.isSpecial()){if(l.isSpecial()&&""==p)return Y;if(t&&""==p&&(l.includesCredentials()||null!==l.port))return;if(a=l.parseHost(p))return a;if(p="",u=De,t)return;continue}"["==o?v=!0:"]"==o&&(v=!1),p+=o}else{if(""==p)return Y;if(a=l.parseHost(p))return a;if(p="",u=Oe,t==Ce)return}break;case Oe:if(!x(J,o)){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&l.isSpecial()||t){if(""!=p){var T=R(p,10);if(T>65535)return q;l.port=l.isSpecial()&&T===pe[l.scheme]?null:T,p=""}if(t)return;u=De;continue}return q}p+=o;break;case Ae:if(l.scheme="file","/"==o||"\\"==o)u=Re;else{if(!n||"file"!=n.scheme){u=ke;continue}if(o==r)l.host=n.host,l.path=g(n.path),l.query=n.query;else if("?"==o)l.host=n.host,l.path=g(n.path),l.query="",u=Le;else{if("#"!=o){fe(L(g(i,d),""))||(l.host=n.host,l.path=g(n.path),l.shortenPath()),u=ke;continue}l.host=n.host,l.path=g(n.path),l.query=n.query,l.fragment="",u=Pe}}break;case Re:if("/"==o||"\\"==o){u=Me;break}n&&"file"==n.scheme&&!fe(L(g(i,d),""))&&(he(n.path[0],!0)?U(l.path,n.path[0]):l.host=n.host),u=ke;continue;case Me:if(o==r||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&he(p))u=ke;else if(""==p){if(l.host="",t)return;u=De}else{if(a=l.parseHost(p))return a;if("localhost"==l.host&&(l.host=""),t)return;p="",u=De}continue}p+=o;break;case De:if(l.isSpecial()){if(u=ke,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=r&&(u=ke,"/"!=o))continue}else l.fragment="",u=Pe;else l.query="",u=Le;break;case ke:if(o==r||"/"==o||"\\"==o&&l.isSpecial()||!t&&("?"==o||"#"==o)){if(".."===(c=H(c=p))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(l.shortenPath(),"/"==o||"\\"==o&&l.isSpecial()||U(l.path,"")):me(p)?"/"==o||"\\"==o&&l.isSpecial()||U(l.path,""):("file"==l.scheme&&!l.path.length&&he(p)&&(l.host&&(l.host=""),p=k(p,0)+":"),U(l.path,p)),p="","file"==l.scheme&&(o==r||"?"==o||"#"==o))for(;l.path.length>1&&""===l.path[0];)z(l.path);"?"==o?(l.query="",u=Le):"#"==o&&(l.fragment="",u=Pe)}else p+=de(o,le);break;case xe:"?"==o?(l.query="",u=Le):"#"==o?(l.fragment="",u=Pe):o!=r&&(l.path[0]+=de(o,ae));break;case Le:t||"#"!=o?o!=r&&("'"==o&&l.isSpecial()?l.query+="%27":l.query+="#"==o?"%23":de(o,ae)):(l.fragment="",u=Pe);break;case Pe:o!=r&&(l.fragment+=de(o,ce))}d++}},parseHost:function(e){var t,n,r;if("["==k(e,0)){if("]"!=k(e,e.length-1))return Y;if(t=function(e){var t,n,r,i,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,p=function(){return k(e,d)};if(":"==p()){if(":"!=k(e,1))return;d+=2,u=++l}for(;p();){if(8==l)return;if(":"!=p()){for(t=n=0;n<4&&x(ee,p());)t=16*t+R(p(),16),d++,n++;if("."==p()){if(0==n)return;if(d-=n,l>6)return;for(r=0;p();){if(i=null,r>0){if(!("."==p()&&r<4))return;d++}if(!x(J,p()))return;for(;x(J,p());){if(o=R(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}c[l]=256*c[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==p()){if(d++,!p())return}else if(p())return;c[l++]=t}else{if(null!==u)return;d++,u=++l}}if(null!==u)for(s=l-u,l=7;0!=l&&s>0;)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a;else if(8!=l)return;return c}(V(e,1,-1)),!t)return Y;this.host=t}else if(this.isSpecial()){if(e=y(e),x(te,e))return Y;if(t=function(e){var t,n,r,i,o,s,a,c=B(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==k(i,0)&&(o=x(X,i)?16:8,i=V(i,8==o?1:2)),""===i)s=0;else{if(!x(10==o?$:8==o?Z:ee,i))return e;s=R(i,o)}U(n,s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=D(256,5-t))return null}else if(s>255)return null;for(a=j(n),r=0;r<n.length;r++)a+=n[r]*D(256,3-r);return a}(e),null===t)return Y;this.host=t}else{if(x(ne,e))return Y;for(t="",n=m(e),r=0;r<n.length;r++)t+=de(n[r],ae);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return h(pe,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&he(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=se(i),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+L(s,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw A(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new Ue(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+se(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(E(e)+":",ge)},getUsername:function(){return this.username},setUsername:function(e){var t=m(E(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=de(t[n],ue)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(E(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=de(t[n],ue)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?se(e):se(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,we)},getHostname:function(){var e=this.host;return null===e?"":se(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Ce)},getPort:function(){var e=this.port;return null===e?"":E(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=E(e))?this.port=null:this.parse(e,Oe))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+L(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,De))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=E(e))?this.query=null:("?"==k(e,0)&&(e=V(e,1)),this.query="",this.parse(e,Le)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=E(e))?("#"==k(e,0)&&(e=V(e,1)),this.fragment="",this.parse(e,Pe)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ue=function(e){var t=p(this,Fe),n=b(arguments.length,1)>1?arguments[1]:void 0,r=I(t,new je(e,!1,n));o||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Fe=Ue.prototype,ze=function(e,t){return{get:function(){return N(this)[e]()},set:t&&function(e){return N(this)[t](e)},configurable:!0,enumerable:!0}};if(o&&(d(Fe,"href",ze("serialize","setHref")),d(Fe,"origin",ze("getOrigin")),d(Fe,"protocol",ze("getProtocol","setProtocol")),d(Fe,"username",ze("getUsername","setUsername")),d(Fe,"password",ze("getPassword","setPassword")),d(Fe,"host",ze("getHost","setHost")),d(Fe,"hostname",ze("getHostname","setHostname")),d(Fe,"port",ze("getPort","setPort")),d(Fe,"pathname",ze("getPathname","setPathname")),d(Fe,"search",ze("getSearch","setSearch")),d(Fe,"searchParams",ze("getSearchParams")),d(Fe,"hash",ze("getHash","setHash"))),u(Fe,"toJSON",(function(){return N(this).serialize()}),{enumerable:!0}),u(Fe,"toString",(function(){return N(this).serialize()}),{enumerable:!0}),O){var Be=O.createObjectURL,Ve=O.revokeObjectURL;Be&&u(Ue,"createObjectURL",c(Be,O)),Ve&&u(Ue,"revokeObjectURL",c(Ve,O))}_(Ue,"URL"),i({global:!0,constructor:!0,forced:!s,sham:!o},{URL:Ue})},285:function(e,t,n){n(8789)},5717:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},3720:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function s(e,t){var n,r,s;return t?(s=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=c(e,(0|e)<0?-1:0,!0),s&&(o[e]=n),n):(s=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),s&&(i[e]=n),n)}function a(e,t){if(isNaN(e))return t?v:g;if(t){if(e<0)return v;if(e>=h)return S}else{if(e<=-f)return T;if(e+1>=f)return b}return e<0?a(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=s,n.fromNumber=a,n.fromBits=c;var l=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var i=a(l(n,8)),o=g,s=0;s<e.length;s+=8){var c=Math.min(8,e.length-s),d=parseInt(e.substring(s,s+c),n);if(c<8){var p=a(l(n,c));o=o.mul(p).add(a(d))}else o=(o=o.mul(i)).add(a(d))}return o.unsigned=t,o}function d(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?u(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=d;var p=4294967296,h=p*p,f=h/2,m=s(1<<24),g=s(0);n.ZERO=g;var v=s(0,!0);n.UZERO=v;var y=s(1);n.ONE=y;var E=s(1,!0);n.UONE=E;var _=s(-1);n.NEG_ONE=_;var b=c(-1,2147483647,!1);n.MAX_VALUE=b;var S=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=S;var T=c(0,-2147483648,!1);n.MIN_VALUE=T;var I=n.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(T)){var t=a(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=a(l(e,6),this.unsigned),o=this,s="";;){var c=o.div(i),u=(o.sub(c.mul(i)).toInt()>>>0).toString(e);if((o=c).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(y)},I.neg=I.negate,I.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,l=e.low>>>16,u=0,p=0,h=0,f=0;return h+=(f+=o+(65535&e.low))>>>16,p+=(h+=i+l)>>>16,u+=(p+=n+a)>>>16,u+=t+s,c((h&=65535)<<16|(f&=65535),(u&=65535)<<16|(p&=65535),this.unsigned)},I.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=d(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(T))return e.isOdd()?T:g;if(e.eq(T))return this.isOdd()?T:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return a(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,l=e.high>>>16,u=65535&e.high,p=e.low>>>16,h=65535&e.low,f=0,v=0,y=0,E=0;return y+=(E+=s*h)>>>16,v+=(y+=o*h)>>>16,y&=65535,v+=(y+=s*p)>>>16,f+=(v+=i*h)>>>16,v&=65535,f+=(v+=o*p)>>>16,v&=65535,f+=(v+=s*u)>>>16,f+=n*h+i*p+o*u+s*l,c((y&=65535)<<16|(E&=65535),(f&=65535)<<16|(v&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,i,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return E;o=v}else{if(this.eq(T))return e.eq(y)||e.eq(_)?T:e.eq(T)?y:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?y:_:(i=this.sub(e.mul(n)),o=n.add(i.div(e)));if(e.eq(T))return this.unsigned?v:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),u=s<=48?1:l(2,s-48),p=a(n),h=p.mul(e);h.isNegative()||h.gt(i);)h=(p=a(n-=u,this.unsigned)).mul(e);p.isZero()&&(p=y),o=o.add(p),i=i.sub(h)}return o},I.div=I.divide,I.modulo=function(e){return r(e)||(e=d(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return c(~this.low,~this.high,this.unsigned)},I.and=function(e){return r(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return r(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return r(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},3281:function(e,t,n){"use strict";e.exports=n(9050)},2967:function(e){"use strict";e.exports=r;var t,n=/\/|\./;function r(e,t){n.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),r[e]=t}r("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),r("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),r("timestamp",{Timestamp:t}),r("empty",{Empty:{fields:{}}}),r("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),r("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),r("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),r.get=function(e){return r[e]||null}},3996:function(e,t,n){"use strict";var r=t,i=n(7025),o=n(9935);function s(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",r);for(var o=t.resolvedType.values,s=Object.keys(o),a=0;a<s.length;++a)t.repeated&&o[s[a]]===t.typeDefault&&e("default:"),e("case%j:",s[a])("case %i:",o[s[a]])("m%s=%j",r,o[s[a]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function a(e,t,n,r){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r):e("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,o?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,n=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<t.length;++r){var a=t[r].resolve(),c=o.safeProp(a.name);a.map?(n("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),s(n,a,r,c+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),s(n,a,r,c+"[i]")("}")("}")):(a.resolvedType instanceof i||n("if(d%s!=null){",c),s(n,a,r,c),a.resolvedType instanceof i||n("}"))}return n("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var n=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],s=[],c=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?r:t[l].map?s:c).push(t[l]);if(r.length){for(n("if(o.arrays||o.defaults){"),l=0;l<r.length;++l)n("d%s=[]",o.safeProp(r[l].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),l=0;l<s.length;++l)n("d%s={}",o.safeProp(s[l].name));n("}")}if(c.length){for(n("if(o.defaults){"),l=0;l<c.length;++l){var u=c[l],d=o.safeProp(u.name);if(u.resolvedType instanceof i)n("d%s=o.enums===String?%j:%j",d,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var p="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",d,p)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else n("d%s=%j",d,u.typeDefault)}n("}")}var h=!1;for(l=0;l<t.length;++l){u=t[l];var f=e._fieldsArray.indexOf(u);d=o.safeProp(u.name),u.map?(h||(h=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),a(n,u,f,d+"[ks2[j]]")("}")):u.repeated?(n("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),a(n,u,f,d+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",d,u.name),a(n,u,f,d),u.partOf&&n("if(o.oneofs)")("d%s=%j",o.safeProp(u.partOf.name),u.name)),n("}")}return n("return d")}},5305:function(e,t,n){"use strict";e.exports=function(e){var t=o.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var a=e._fieldsArray[n].resolve(),c=a.resolvedType instanceof r?"int32":a.type,l="m"+o.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[a.keyType]?t("k=%j",i.defaults[a.keyType]):t("k=null"),void 0!==i.defaults[c]?t("value=%j",i.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===i.basic[c]?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==i.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',l):t("%s[k]=value",l)):a.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),void 0!==i.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,c)("}else"),void 0===i.basic[c]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,n):t("%s.push(r.%s())",l,c)):void 0===i.basic[c]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,n):t("%s=r.%s()",l,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var u=e._fieldsArray[n];u.required&&t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",s(u))}return t("return m")};var r=n(7025),i=n(7063),o=n(9935);function s(e){return"missing required '"+e.name+"'"}},4928:function(e,t,n){"use strict";e.exports=function(e){for(var t,n=o.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(o.compareFieldsById),c=0;c<a.length;++c){var l=a[c].resolve(),u=e._fieldsArray.indexOf(l),d=l.resolvedType instanceof r?"int32":l.type,p=i.basic[d];t="m"+o.safeProp(l.name),l.map?(n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|i.mapKey[l.keyType],l.keyType),void 0===p?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,t):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|p,d,t),n("}")("}")):l.repeated?(n("if(%s!=null&&%s.length){",t,t),l.packed&&void 0!==i.packed[d]?n("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",d,t)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",t),void 0===p?s(n,l,u,t+"[i]"):n("w.uint32(%i).%s(%s[i])",(l.id<<3|p)>>>0,d,t)),n("}")):(l.optional&&n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,l.name),void 0===p?s(n,l,u,t):n("w.uint32(%i).%s(%s)",(l.id<<3|p)>>>0,d,t))}return n("return w")};var r=n(7025),i=n(7063),o=n(9935);function s(e,t,n,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(t.id<<3|2)>>>0)}},7025:function(e,t,n){"use strict";e.exports=s;var r=n(3243);((s.prototype=Object.create(r.prototype)).constructor=s).className="Enum";var i=n(9313),o=n(9935);function s(e,t,n,i,o){if(r.call(this,e,n),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=o||{},this.reserved=void 0,t)for(var s=Object.keys(t),a=0;a<s.length;++a)"number"==typeof t[s[a]]&&(this.valuesById[this.values[s[a]]=t[s[a]]]=s[a])}s.fromJSON=function(e,t){var n=new s(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},s.prototype.add=function(e,t,n){if(!o.isString(e))throw TypeError("name must be a string");if(!o.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},s.prototype.remove=function(e){if(!o.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},s.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},3548:function(e,t,n){"use strict";e.exports=l;var r=n(3243);((l.prototype=Object.create(r.prototype)).constructor=l).className="Field";var i,o=n(7025),s=n(7063),a=n(9935),c=/^required|optional|repeated$/;function l(e,t,n,i,o,l,u){if(a.isObject(i)?(u=o,l=i,i=o=void 0):a.isObject(o)&&(u=l,l=o,o=void 0),r.call(this,e,l),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(n))throw TypeError("type must be a string");if(void 0!==i&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!a.isString(o))throw TypeError("extend must be a string");"proto3_optional"===i&&(i="optional"),this.rule=i&&"optional"!==i?i:void 0,this.type=n,this.id=t,this.extend=o||void 0,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==s.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=u}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,n)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},l.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=s.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},l.d=function(e,t,n,r){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(i,o){a.decorateType(i.constructor).add(new l(o,e,t,n,{default:r}))}},l._configure=function(e){i=e}},8836:function(e,t,n){"use strict";var r=e.exports=n(9482);r.build="light",r.load=function(e,t,n){return"function"==typeof t?(n=t,t=new r.Root):t||(t=new r.Root),t.load(e,n)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=n(4928),r.decoder=n(5305),r.verifier=n(4497),r.converter=n(3996),r.ReflectionObject=n(3243),r.Namespace=n(9313),r.Root=n(9424),r.Enum=n(7025),r.Type=n(7645),r.Field=n(3548),r.OneOf=n(7598),r.MapField=n(6039),r.Service=n(7513),r.Method=n(4429),r.Message=n(8368),r.wrappers=n(1667),r.types=n(7063),r.util=n(9935),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},9482:function(e,t,n){"use strict";var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(1173),r.BufferWriter=n(3155),r.Reader=n(1408),r.BufferReader=n(593),r.util=n(9693),r.rpc=n(5994),r.roots=n(5054),r.configure=i,i()},9050:function(e,t,n){"use strict";var r=e.exports=n(8836);r.build="full",r.tokenize=n(626),r.parse=n(2228),r.common=n(2967),r.Root._configure(r.Type,r.parse,r.common)},6039:function(e,t,n){"use strict";e.exports=s;var r=n(3548);((s.prototype=Object.create(r.prototype)).constructor=s).className="MapField";var i=n(7063),o=n(9935);function s(e,t,n,i,s,a){if(r.call(this,e,t,i,void 0,void 0,s,a),!o.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},s.d=function(e,t,n){return"function"==typeof n?n=o.decorateType(n).name:n&&"object"==typeof n&&(n=o.decorateEnum(n).name),function(r,i){o.decorateType(r.constructor).add(new s(i,e,t,n))}}},8368:function(e,t,n){"use strict";e.exports=i;var r=n(9693);function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},4429:function(e,t,n){"use strict";e.exports=o;var r=n(3243);((o.prototype=Object.create(r.prototype)).constructor=o).className="Method";var i=n(9935);function o(e,t,n,o,s,a,c,l,u){if(i.isObject(s)?(c=s,s=a=void 0):i.isObject(a)&&(c=a,a=void 0),void 0!==t&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(n))throw TypeError("requestType must be a string");if(!i.isString(o))throw TypeError("responseType must be a string");r.call(this,e,c),this.type=t||"rpc",this.requestType=n,this.requestStream=!!s||void 0,this.responseType=o,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l,this.parsedOptions=u}o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},9313:function(e,t,n){"use strict";e.exports=d;var r=n(3243);((d.prototype=Object.create(r.prototype)).constructor=d).className="Namespace";var i,o,s,a=n(3548),c=n(7598),l=n(9935);function u(e,t){if(e&&e.length){for(var n={},r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}}function d(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null}function p(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=u,d.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},d.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),d.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",u(this.nestedArray,e)])},d.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),r=0;r<n.length;++r)t=e[n[r]],this.add((void 0!==t.fields?i.fromJSON:void 0!==t.values?s.fromJSON:void 0!==t.methods?o.fromJSON:void 0!==t.id?a.fromJSON:d.fromJSON)(n[r],t));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof i||e instanceof s||e instanceof o||e instanceof d||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof d&&e instanceof d)||t instanceof i||t instanceof o)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,r=0;r<n.length;++r)e.add(n[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),p(this)},d.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),p(this)},d.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var r=e.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof d))throw Error("path conflicts with non-namespace objects")}else n.add(n=new d(r))}return t&&n.addJSON(t),n},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof d&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof d&&(r=this._nestedArray[i].lookup(e,t,!0)))return r;return null===this.parent||n?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,n){i=e,o=t,s=n}},3243:function(e,t,n){"use strict";e.exports=o,o.className="ReflectionObject";var r,i=n(9935);function o(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},o.prototype.getOption=function(e){if(this.options)return this.options[e]},o.prototype.setOption=function(e,t,n){return n&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},o.prototype.setParsedOption=function(e,t,n){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(n){var o=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(o){var s=o[e];i.setProperty(s,n,t)}else(o={})[e]=i.setProperty({},n,t),r.push(o)}else{var a={};a[e]=t,r.push(a)}return this},o.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;++r)this.setOption(n[r],e[n[r]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){r=e}},7598:function(e,t,n){"use strict";e.exports=s;var r=n(3243);((s.prototype=Object.create(r.prototype)).constructor=s).className="OneOf";var i=n(3548),o=n(9935);function s(e,t,n,i){if(Array.isArray(t)||(n=t,t=void 0),r.call(this,e,n),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},s.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n))}a(this)},s.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},s.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){o.decorateType(t.constructor).add(new s(n,e)),Object.defineProperty(t,n,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}}},2228:function(e,t,n){"use strict";e.exports=I,I.filename=null,I.defaults={keepCase:!1};var r=n(626),i=n(9424),o=n(7645),s=n(3548),a=n(6039),c=n(7598),l=n(7025),u=n(7513),d=n(4429),p=n(7063),h=n(9935),f=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,v=/^-?0[x][0-9a-fA-F]+$/,y=/^0[0-7]+$/,E=/^-?0[0-7]+$/,_=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,b=/^[a-zA-Z_][a-zA-Z_0-9]*$/,S=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,T=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function I(e,t,n){t instanceof i||(n=t,t=new i),n||(n=I.defaults);var N,w,C,O,A,R=n.preferTrailingComment||!1,M=r(e,n.alternateCommentMode||!1),D=M.next,k=M.push,x=M.peek,L=M.skip,P=M.cmnt,j=!0,U=!1,F=t,z=n.keepCase?function(e){return e}:h.camelCase;function B(e,t,n){var r=I.filename;return n||(I.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(r?r+", ":"")+"line "+M.line+")")}function V(){var e,t=[];do{if('"'!==(e=D())&&"'"!==e)throw B(e);t.push(D()),L(e),e=x()}while('"'===e||"'"===e);return t.join("")}function H(e){var t=D();switch(t){case"'":case'"':return k(t),V();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var n=1;switch("-"===e.charAt(0)&&(n=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return n*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(f.test(e))return n*parseInt(e,10);if(g.test(e))return n*parseInt(e,16);if(y.test(e))return n*parseInt(e,8);if(_.test(e))return n*parseFloat(e);throw B(e,"number",!0)}(t)}catch(n){if(e&&S.test(t))return t;throw B(t,"value")}}function G(e,t){var n,r;do{!t||'"'!==(n=x())&&"'"!==n?e.push([r=W(D()),L("to",!0)?W(D()):r]):e.push(V())}while(L(",",!0));L(";")}function W(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw B(e,"id");if(m.test(e))return parseInt(e,10);if(v.test(e))return parseInt(e,16);if(E.test(e))return parseInt(e,8);throw B(e,"id")}function Y(){if(void 0!==N)throw B("package");if(N=D(),!S.test(N))throw B(N,"name");F=F.define(N),L(";")}function q(){var e,t=x();switch(t){case"weak":e=C||(C=[]),D();break;case"public":D();default:e=w||(w=[])}t=V(),L(";"),e.push(t)}function K(){if(L("="),O=V(),!(U="proto3"===O)&&"proto2"!==O)throw B(O,"syntax");L(";")}function Q(e,t){switch(t){case"option":return Z(e,t),L(";"),!0;case"message":return function(e,t){if(!b.test(t=D()))throw B(t,"type name");var n=new o(t);J(n,(function(e){if(!Q(n,e))switch(e){case"map":!function(e){L("<");var t=D();if(void 0===p.mapKey[t])throw B(t,"type");L(",");var n=D();if(!S.test(n))throw B(n,"type");L(">");var r=D();if(!b.test(r))throw B(r,"name");L("=");var i=new a(z(r),W(D()),t,n);J(i,(function(e){if("option"!==e)throw B(e);Z(i,e),L(";")}),(function(){te(i)})),e.add(i)}(n);break;case"required":case"repeated":X(n,e);break;case"optional":X(n,U?"proto3_optional":"optional");break;case"oneof":!function(e,t){if(!b.test(t=D()))throw B(t,"name");var n=new c(z(t));J(n,(function(e){"option"===e?(Z(n,e),L(";")):(k(e),X(n,"optional"))})),e.add(n)}(n,e);break;case"extensions":G(n.extensions||(n.extensions=[]));break;case"reserved":G(n.reserved||(n.reserved=[]),!0);break;default:if(!U||!S.test(e))throw B(e);k(e),X(n,"optional")}})),e.add(n)}(e,t),!0;case"enum":return function(e,t){if(!b.test(t=D()))throw B(t,"name");var n=new l(t);J(n,(function(e){switch(e){case"option":Z(n,e),L(";");break;case"reserved":G(n.reserved||(n.reserved=[]),!0);break;default:!function(e,t){if(!b.test(t))throw B(t,"name");L("=");var n=W(D(),!0),r={};J(r,(function(e){if("option"!==e)throw B(e);Z(r,e),L(";")}),(function(){te(r)})),e.add(t,n,r.comment)}(n,e)}})),e.add(n)}(e,t),!0;case"service":return function(e,t){if(!b.test(t=D()))throw B(t,"service name");var n=new u(t);J(n,(function(e){if(!Q(n,e)){if("rpc"!==e)throw B(e);!function(e,t){var n=P(),r=t;if(!b.test(t=D()))throw B(t,"name");var i,o,s,a,c=t;if(L("("),L("stream",!0)&&(o=!0),!S.test(t=D()))throw B(t);if(i=t,L(")"),L("returns"),L("("),L("stream",!0)&&(a=!0),!S.test(t=D()))throw B(t);s=t,L(")");var l=new d(c,r,i,s,o,a);l.comment=n,J(l,(function(e){if("option"!==e)throw B(e);Z(l,e),L(";")})),e.add(l)}(n,e)}})),e.add(n)}(e,t),!0;case"extend":return function(e,t){if(!S.test(t=D()))throw B(t,"reference");var n=t;J(null,(function(t){switch(t){case"required":case"repeated":X(e,t,n);break;case"optional":X(e,U?"proto3_optional":"optional",n);break;default:if(!U||!S.test(t))throw B(t);k(t),X(e,"optional",n)}}))}(e,t),!0}return!1}function J(e,t,n){var r=M.line;if(e&&("string"!=typeof e.comment&&(e.comment=P()),e.filename=I.filename),L("{",!0)){for(var i;"}"!==(i=D());)t(i);L(";",!0)}else n&&n(),L(";"),e&&("string"!=typeof e.comment||R)&&(e.comment=P(r)||e.comment)}function X(e,t,n){var r=D();if("group"!==r){if(!S.test(r))throw B(r,"type");var i=D();if(!b.test(i))throw B(i,"name");i=z(i),L("=");var a=new s(i,W(D()),r,t,n);if(J(a,(function(e){if("option"!==e)throw B(e);Z(a,e),L(";")}),(function(){te(a)})),"proto3_optional"===t){var l=new c("_"+i);a.setOption("proto3_optional",!0),l.add(a),e.add(l)}else e.add(a);U||!a.repeated||void 0===p.packed[r]&&void 0!==p.basic[r]||a.setOption("packed",!1,!0)}else!function(e,t){var n=D();if(!b.test(n))throw B(n,"name");var r=h.lcFirst(n);n===r&&(n=h.ucFirst(n)),L("=");var i=W(D()),a=new o(n);a.group=!0;var c=new s(r,i,n,t);c.filename=I.filename,J(a,(function(e){switch(e){case"option":Z(a,e),L(";");break;case"required":case"repeated":X(a,e);break;case"optional":X(a,U?"proto3_optional":"optional");break;default:throw B(e)}})),e.add(a).add(c)}(e,t)}function Z(e,t){var n=L("(",!0);if(!S.test(t=D()))throw B(t,"name");var r,i=t,o=i;n&&(L(")"),o=i="("+i+")",t=x(),T.test(t)&&(r=t.substr(1),i+=t,D())),L("="),function(e,t,n,r){e.setParsedOption&&e.setParsedOption(t,n,r)}(e,o,$(e,i),r)}function $(e,t){if(L("{",!0)){for(var n={};!L("}",!0);){if(!b.test(A=D()))throw B(A,"name");var r,i=A;"{"===x()?r=$(e,t+"."+A):(L(":"),"{"===x()?r=$(e,t+"."+A):(r=H(!0),ee(e,t+"."+A,r)));var o=n[i];o&&(r=[].concat(o).concat(r)),n[i]=r,L(",",!0)}return n}var s=H(!0);return ee(e,t,s),s}function ee(e,t,n){e.setOption&&e.setOption(t,n)}function te(e){if(L("[",!0)){do{Z(e,"option")}while(L(",",!0));L("]")}return e}for(;null!==(A=D());)switch(A){case"package":if(!j)throw B(A);Y();break;case"import":if(!j)throw B(A);q();break;case"syntax":if(!j)throw B(A);K();break;case"option":Z(F,A),L(";");break;default:if(Q(F,A)){j=!1;continue}throw B(A)}return I.filename=null,{package:N,imports:w,weakImports:C,syntax:O,root:t}}},1408:function(e,t,n){"use strict";e.exports=c;var r,i=n(9693),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):u(e)})(e)}:u};function p(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=d(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},593:function(e,t,n){"use strict";e.exports=o;var r=n(1408);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(9693);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},9424:function(e,t,n){"use strict";e.exports=d;var r=n(9313);((d.prototype=Object.create(r.prototype)).constructor=d).className="Root";var i,o,s,a=n(3548),c=n(7025),l=n(7598),u=n(9935);function d(e){r.call(this,"",e),this.deferred=[],this.files=[]}function p(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=u.path.resolve,d.prototype.fetch=u.fetch,d.prototype.load=function e(t,n,r){"function"==typeof n&&(r=n,n=void 0);var i=this;if(!r)return u.asPromise(e,i,t,n);var a=r===p;function c(e,t){if(r){var n=r;if(r=null,a)throw e;n(e,t)}}function l(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var n=e.substring(t);if(n in s)return n}return null}function d(e,t){try{if(u.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),u.isString(t)){o.filename=e;var r,s=o(t,i,n),d=0;if(s.imports)for(;d<s.imports.length;++d)(r=l(s.imports[d])||i.resolvePath(e,s.imports[d]))&&h(r);if(s.weakImports)for(d=0;d<s.weakImports.length;++d)(r=l(s.weakImports[d])||i.resolvePath(e,s.weakImports[d]))&&h(r,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||f||c(null,i)}function h(e,t){if(!(i.files.indexOf(e)>-1))if(i.files.push(e),e in s)a?d(e,s[e]):(++f,setTimeout((function(){--f,d(e,s[e])})));else if(a){var n;try{n=u.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}d(e,n)}else++f,i.fetch(e,(function(n,o){--f,r&&(n?t?f||c(null,i):c(n):d(e,o))}))}var f=0;u.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=i.resolvePath("",t[g]))&&h(m);if(a)return i;f||c(null,i)},d.prototype.loadSync=function(e,t){if(!u.isNode)throw Error("not supported");return this.load(e,t,p)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function f(e,t){var n=t.parent.lookup(t.extend);if(n){var r=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.declaringField=t,t.extensionField=r,n.add(r),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)h.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof i)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);h.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)h.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);h.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,n){i=e,o=t,s=n}},5054:function(e){"use strict";e.exports={}},5994:function(e,t,n){"use strict";t.Service=n(7948)},7948:function(e,t,n){"use strict";e.exports=i;var r=n(9693);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},7513:function(e,t,n){"use strict";e.exports=a;var r=n(9313);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var i=n(4429),o=n(9935),s=n(5994);function a(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var n=new a(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),o=0;o<r.length;++o)n.add(i.fromJSON(r[o],t.methods[r[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},a.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,c(this)):r.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return r.prototype.remove.call(this,e)},a.prototype.create=function(e,t,n){for(var r,i=new s.Service(e,t,n),a=0;a<this.methodsArray.length;++a){var c=o.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[c]=o.codegen(["r","c"],o.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return i}},626:function(e){"use strict";e.exports=d;var t=/[\s{}=;:[\],'"()<>]/g,n=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,r=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,i=/^ *[*/]+ */,o=/^\s*\*?\/*/,s=/\n/g,a=/\s/,c=/\\(.?)/g,l={0:"\0",r:"\r",n:"\n",t:"\t"};function u(e){return e.replace(c,(function(e,t){switch(t){case"\\":case"":return t;default:return l[t]||""}}))}function d(e,c){e=e.toString();var l=0,d=e.length,p=1,h=null,f=null,m=0,g=!1,v=!1,y=[],E=null;function _(e){return Error("illegal "+e+" (line "+p+")")}function b(t){return e.charAt(t)}function S(t,n,r){h=e.charAt(t++),m=p,g=!1,v=r;var a,l=t-(c?2:3);do{if(--l<0||"\n"===(a=e.charAt(l))){g=!0;break}}while(" "===a||"\t"===a);for(var u=e.substring(t,n).split(s),d=0;d<u.length;++d)u[d]=u[d].replace(c?o:i,"").trim();f=u.join("\n").trim()}function T(t){var n=I(t),r=e.substring(t,n);return/^\s*\/{1,2}/.test(r)}function I(e){for(var t=e;t<d&&"\n"!==b(t);)t++;return t}function N(){if(y.length>0)return y.shift();if(E)return function(){var t="'"===E?r:n;t.lastIndex=l-1;var i=t.exec(e);if(!i)throw _("string");return l=t.lastIndex,w(E),E=null,u(i[1])}();var i,o,s,h,f,m=0===l;do{if(l===d)return null;for(i=!1;a.test(s=b(l));)if("\n"===s&&(m=!0,++p),++l===d)return null;if("/"===b(l)){if(++l===d)throw _("comment");if("/"===b(l))if(c){if(h=l,f=!1,T(l)){f=!0;do{if((l=I(l))===d)break;l++}while(T(l))}else l=Math.min(d,I(l)+1);f&&S(h,l,m),p++,i=!0}else{for(f="/"===b(h=l+1);"\n"!==b(++l);)if(l===d)return null;++l,f&&S(h,l-1,m),++p,i=!0}else{if("*"!==(s=b(l)))return"/";h=l+1,f=c||"*"===b(h);do{if("\n"===s&&++p,++l===d)throw _("comment");o=s,s=b(l)}while("*"!==o||"/"!==s);++l,f&&S(h,l-2,m),i=!0}}}while(i);var g=l;if(t.lastIndex=0,!t.test(b(g++)))for(;g<d&&!t.test(b(g));)++g;var v=e.substring(l,l=g);return'"'!==v&&"'"!==v||(E=v),v}function w(e){y.push(e)}function C(){if(!y.length){var e=N();if(null===e)return null;w(e)}return y[0]}return Object.defineProperty({next:N,peek:C,push:w,skip:function(e,t){var n=C();if(n===e)return N(),!0;if(!t)throw _("token '"+n+"', '"+e+"' expected");return!1},cmnt:function(e){var t=null;return void 0===e?m===p-1&&(c||"*"===h||g)&&(t=v?f:null):(m<e&&C(),m!==e||g||!c&&"/"!==h||(t=v?null:f)),t}},"line",{get:function(){return p}})}d.unescape=u},7645:function(e,t,n){"use strict";e.exports=y;var r=n(9313);((y.prototype=Object.create(r.prototype)).constructor=y).className="Type";var i=n(7025),o=n(7598),s=n(3548),a=n(6039),c=n(7513),l=n(8368),u=n(1408),d=n(1173),p=n(9935),h=n(4928),f=n(5305),m=n(4497),g=n(3996),v=n(1667);function y(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function E(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=p.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=p.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=y.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,p.merge(e.prototype,t)),e.$type=e.prototype.$type=this,p.merge(e,l,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:p.oneOfGetter(this._oneofsArray[n].oneof),set:p.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,r)}}}),y.generateConstructor=function(e){for(var t,n=p.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?n("this%s={}",p.safeProp(t.name)):t.repeated&&n("this%s=[]",p.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(e,t){var n=new y(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var l=Object.keys(t.fields),u=0;u<l.length;++u)n.add((void 0!==t.fields[l[u]].keyType?a.fromJSON:s.fromJSON)(l[u],t.fields[l[u]]));if(t.oneofs)for(l=Object.keys(t.oneofs),u=0;u<l.length;++u)n.add(o.fromJSON(l[u],t.oneofs[l[u]]));if(t.nested)for(l=Object.keys(t.nested),u=0;u<l.length;++u){var d=t.nested[l[u]];n.add((void 0!==d.id?s.fromJSON:void 0!==d.fields?y.fromJSON:void 0!==d.values?i.fromJSON:void 0!==d.methods?c.fromJSON:r.fromJSON)(l[u],d))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},y.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return p.toObject(["options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},y.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return r.prototype.resolveAll.call(this)},y.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},y.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof s&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),E(this)}return e instanceof o?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),E(this)):r.prototype.add.call(this,e)},y.prototype.remove=function(e){if(e instanceof s&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),E(this)}if(e instanceof o){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),E(this)}return r.prototype.remove.call(this,e)},y.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},y.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},y.prototype.create=function(e){return new this.ctor(e)},y.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=h(this)({Writer:d,types:t,util:p}),this.decode=f(this)({Reader:u,types:t,util:p}),this.verify=m(this)({types:t,util:p}),this.fromObject=g.fromObject(this)({types:t,util:p}),this.toObject=g.toObject(this)({types:t,util:p});var r=v[e];if(r){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(i),i.toObject=this.toObject,this.toObject=r.toObject.bind(i)}return this},y.prototype.encode=function(e,t){return this.setup().encode(e,t)},y.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},y.prototype.decode=function(e,t){return this.setup().decode(e,t)},y.prototype.decodeDelimited=function(e){return e instanceof u||(e=u.create(e)),this.decode(e,e.uint32())},y.prototype.verify=function(e){return this.setup().verify(e)},y.prototype.fromObject=function(e){return this.setup().fromObject(e)},y.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},y.d=function(e){return function(t){p.decorateType(t,e)}}},7063:function(e,t,n){"use strict";var r=t,i=n(9935),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function s(e,t){var n=0,r={};for(t|=0;n<e.length;)r[o[n+t]]=e[n++];return r}r.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),r.long=s([0,0,0,1,1],7),r.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0])},9935:function(e,t,n){"use strict";var r,i,o=e.exports=n(9693),s=n(5054);o.codegen=n(5124),o.fetch=n(9054),o.path=n(8626),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),r=0;r<t.length;)n[r]=e[t[r++]];return n}return[]},o.toObject=function(e){for(var t={},n=0;n<e.length;){var r=e[n++],i=e[n++];void 0!==i&&(t[r]=i)}return t};var a=/\\/g,c=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,(function(e,t){return t.toUpperCase()}))},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(o.decorateRoot.remove(e.$type),e.$type.name=t,o.decorateRoot.add(e.$type)),e.$type;r||(r=n(7645));var i=new r(t||e.name);return o.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var u=0;o.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=n(7025));var t=new i("Enum"+u++,e);return o.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},o.setProperty=function(e,t,n){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,n,r){var i=n.shift();if("__proto__"===i)return t;if(n.length>0)t[i]=e(t[i]||{},n,r);else{var o=t[i];o&&(r=[].concat(o).concat(r)),t[i]=r}return t}(e,t=t.split("."),n)},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(n(9424)))}})},1945:function(e,t,n){"use strict";e.exports=i;var r=n(9693);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},9693:function(e,t,n){"use strict";var r=t;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(4537),r.base64=n(7419),r.EventEmitter=n(9211),r.float=n(945),r.inquire=n(7199),r.utf8=n(4997),r.pool=n(6662),r.LongBits=n(1945),r.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},4497:function(e,t,n){"use strict";e.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n={};e.oneofsArray.length&&t("var p={}");for(var r=0;r<e.fieldsArray.length;++r){var c=e._fieldsArray[r].resolve(),l="m"+i.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)t("if(!util.isObject(%s))",l)("return%j",o(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),a(t,c,"k[i]"),s(t,c,r,l+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",l)("return%j",o(c,"array"))("for(var i=0;i<%s.length;++i){",l),s(t,c,r,l+"[i]")("}");else{if(c.partOf){var u=i.safeProp(c.partOf.name);1===n[c.partOf.name]&&t("if(p%s===1)",u)("return%j",c.partOf.name+": multiple values"),n[c.partOf.name]=1,t("p%s=1",u)}s(t,c,r,l)}c.optional&&t("}")}return t("return null")};var r=n(7025),i=n(9935);function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",i)("default:")("return%j",o(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",o(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",o(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",o(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",o(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",o(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",o(t,"buffer"))}return e}function a(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",o(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",o(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",o(t,"boolean key"))}return e}},1667:function(e,t,n){"use strict";var r=t,i=n(8368);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),n=this.lookup(t);if(n){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:n.encode(n.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var n="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(r);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var s=e.$type.toObject(e,t);return""===n&&(n="type.googleapis.com/"),r=n+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),s["@type"]=r,s}return this.toObject(e,t)}}},1173:function(e,t,n){"use strict";e.exports=d;var r,i=n(9693),o=i.LongBits,s=i.base64,a=i.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var p=function(){return i.Buffer?function(){return(d.create=function(){return new r})()}:function(){return new d}};function h(e,t,n){t[n]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function g(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}d.create=p(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(m,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(m,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(m,t.length(),t)},d.prototype.bool=function(e){return this._push(h,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var v=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(i.isString(e)){var n=d.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(h,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},d._configure=function(e){r=e,d.create=p(),r._configure()}},3155:function(e,t,n){"use strict";e.exports=o;var r=n(1173);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(9693);function o(){r.call(this)}function s(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},8e3:function(e,t,n){"use strict";var r=n(7581);e.exports=n(3626)(r),"_sockjs_onload"in n.g&&setTimeout(n.g._sockjs_onload,1)},2530:function(e,t,n){"use strict";var r=n(5717),i=n(685);function o(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}r(o,i),e.exports=o},3212:function(e,t,n){"use strict";var r=n(5717),i=n(3184);function o(){i.call(this)}r(o,i),o.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},o.prototype.once=function(e,t){var n=this,r=!1;this.on(e,(function i(){n.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}))},o.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].apply(this,r)}},o.prototype.on=o.prototype.addListener=i.prototype.addEventListener,o.prototype.removeListener=i.prototype.removeEventListener,e.exports.v=o},685:function(e){"use strict";function t(e){this.type=e}t.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},t.prototype.stopPropagation=function(){},t.prototype.preventDefault=function(){},t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,e.exports=t},3184:function(e){"use strict";function t(){this._listeners={}}t.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},t.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);-1===r||(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e])}},t.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],i=0;i<r.length;i++)r[i].apply(this,n)},e.exports=t},3326:function(e,t,n){"use strict";var r=n(5717),i=n(685);function o(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}r(o,i),e.exports=o},691:function(e,t,n){"use strict";var r=n(3683);function i(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}i.prototype._transportClose=function(e,t){r.postMessage("c",JSON.stringify([e,t]))},i.prototype._transportMessage=function(e){r.postMessage("t",e)},i.prototype._send=function(e){this._transport.send(e)},i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=i},551:function(e,t,n){"use strict";var r=n(273),i=n(7705),o=n(691),s=n(6311),a=n(3683),c=n(7486);e.exports=function(e,t){var n,l={};t.forEach((function(e){e.facadeTransport&&(l[e.facadeTransport.transportName]=e.facadeTransport)})),l[s.transportName]=s,e.bootstrap_iframe=function(){var t;a.currentWindowId=c.hash.slice(1),i.attachEvent("message",(function(i){if(i.source===parent&&(void 0===n&&(n=i.origin),i.origin===n)){var s;try{s=JSON.parse(i.data)}catch(e){return void i.data}if(s.windowId===a.currentWindowId)switch(s.type){case"s":var u;try{u=JSON.parse(s.data)}catch(e){s.data;break}var d=u[0],p=u[1],h=u[2],f=u[3];if(d!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+d+'", the iframe: "'+e.version+'".');if(!r.isOriginEqual(h,c.href)||!r.isOriginEqual(f,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+h+", "+f+")");t=new o(new l[p](h,f));break;case"m":t._send(s.data);break;case"c":t&&t._close(),t=null}}})),a.postMessage("s")}}},2550:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),o=n(2217);function s(e,t){r.call(this);var n=this,i=+new Date;this.xo=new t("GET",e),this.xo.once("finish",(function(e,t){var r,s;if(200===e){if(s=+new Date-i,t)try{r=JSON.parse(t)}catch(e){}o.isObject(r)||(r={})}n.emit("finish",r,s),n.removeAllListeners()}))}i(s,r),s.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=s},6311:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v,o=n(3515),s=n(2550);function a(e){var t=this;i.call(this),this.ir=new s(e,o),this.ir.once("finish",(function(e,n){t.ir=null,t.emit("message",JSON.stringify([e,n]))}))}r(a,i),a.transportName="iframe-info-receiver",a.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=a},3616:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),o=n(7705),s=n(5088),a=n(6311);function c(e,t){var i=this;r.call(this);var c=function(){var n=i.ifr=new s(a.transportName,t,e);n.once("message",(function(e){if(e){var t;try{t=JSON.parse(e)}catch(e){return i.emit("finish"),void i.close()}var n=t[0],r=t[1];i.emit("finish",n,r)}i.close()})),n.once("close",(function(){i.emit("finish"),i.close()}))};n.g.document.body?c():o.attachEvent("load",c)}i(c,r),c.enabled=function(){return s.enabled()},c.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=c},5172:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),o=n(273),s=n(6073),a=n(9033),c=n(3515),l=n(7103),u=n(3616),d=n(2550);function p(e,t){var n=this;r.call(this),setTimeout((function(){n.doXhr(e,t)}),0)}i(p,r),p._getReceiver=function(e,t,n){return n.sameOrigin?new d(t,c):a.enabled?new d(t,a):s.enabled&&n.sameScheme?new d(t,s):u.enabled()?new u(e,t):new d(t,l)},p.prototype.doXhr=function(e,t){var n=this,r=o.addPath(e,"/info");this.xo=p._getReceiver(e,r,t),this.timeoutRef=setTimeout((function(){n._cleanup(!1),n.emit("finish")}),p.timeout),this.xo.once("finish",(function(e,t){n._cleanup(!0),n.emit("finish",e,t)}))},p.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},p.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},p.timeout=8e3,e.exports=p},7486:function(e,t,n){"use strict";e.exports=n.g.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},3626:function(e,t,n){"use strict";n(1247);var r,i=n(4564),o=n(5717),s=n(8915),a=n(8028),c=n(273),l=n(7705),u=n(5581),d=n(2217),p=n(8510),h=n(4886),f=n(685),m=n(3184),g=n(7486),v=n(2530),y=n(3326),E=n(5172);function _(e,t,n){if(!(this instanceof _))return new _(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");m.call(this),this.readyState=_.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&h.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if("function"==typeof r)this._generateSessionId=r;else{if("number"!=typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return s.string(r)}}this._server=n.server||s.numberString(1e3);var o=new i(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var a="https:"===o.protocol;if("https:"===g.protocol&&!a&&!c.isLoopbackAddr(o.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var l=t.sort();l.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<l.length-1&&e===l[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var u=c.getOrigin(g.href);this._origin=u?u.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,this.url,this._urlInfo={nullOrigin:!p.hasDomain(),sameOrigin:c.isOriginEqual(this.url,g.href),sameScheme:c.isSchemeEqual(this.url,g.href)},this._ir=new E(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function b(e){return 1e3===e||e>=3e3&&e<=4999}o(_,m),_.prototype.close=function(e,t){if(e&&!b(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");this.readyState!==_.CLOSING&&this.readyState!==_.CLOSED&&this._close(e||1e3,t||"Normal closure",!0)},_.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===_.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===_.OPEN&&this._transport.send(a.quote(e))},_.version=n(2828),_.CONNECTING=0,_.OPEN=1,_.CLOSING=2,_.CLOSED=3,_.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=d.extend(e,this._urlInfo);var n=r.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},_.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.transportName,e.needBody&&(!n.g.document.body||void 0!==n.g.document.readyState&&"complete"!==n.g.document.readyState&&"interactive"!==n.g.document.readyState))return this._transports.unshift(e),void l.attachEvent("load",this._connect.bind(this));var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var r=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),i=this._transportOptions[e.transportName],o=new e(r,this._transUrl,i);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},_.prototype._transportTimeout=function(){this.readyState===_.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},_.prototype._transportMessage=function(e){var t,n=this,r=e.slice(0,1),i=e.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new f("heartbeat")),void this.transport}if(i)try{t=JSON.parse(i)}catch(e){}if(void 0!==t)switch(r){case"a":Array.isArray(t)&&t.forEach((function(e){n.transport,n.dispatchEvent(new y(e))}));break;case"m":this.transport,this.dispatchEvent(new y(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},_.prototype._transportClose=function(e,t){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),b(e)||2e3===e||this.readyState!==_.CONNECTING?this._close(e,t):this._connect()},_.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===_.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=_.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new f("open")),this.transport):this._close(1006,"Server lost session")},_.prototype._close=function(e,t,n){this.transport,this.readyState;var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===_.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=_.CLOSING,setTimeout(function(){this.readyState=_.CLOSED,r&&this.dispatchEvent(new f("error"));var i=new v("close");i.wasClean=n||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},_.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return r=u(e),n(551)(_,e),_}},1247:function(){"use strict";var e,t=Array.prototype,n=Object.prototype,r=Function.prototype,i=String.prototype,o=t.slice,s=n.toString,a=function(e){return"[object Function]"===n.toString.call(e)},c=function(e){return"[object String]"===s.call(e)},l=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();e=l?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)};var u=function(t,r,i){for(var o in r)n.hasOwnProperty.call(r,o)&&e(t,o,r[o],i)},d=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function p(){}u(r,{bind:function(e){var t=this;if(!a(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=o.call(arguments,1),r=Math.max(0,t.length-n.length),i=[],s=0;s<r;s++)i.push("$"+s);var c=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this, arguments); }")((function(){if(this instanceof c){var r=t.apply(this,n.concat(o.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(o.call(arguments)))}));return t.prototype&&(p.prototype=t.prototype,c.prototype=new p,p.prototype=null),c}}),u(Array,{isArray:function(e){return"[object Array]"===s.call(e)}});var h,f,m,g=Object("a"),v="a"!==g[0]||!(0 in g);u(t,{forEach:function(e){var t=d(this),n=v&&c(this)?this.split(""):t,r=arguments[1],i=-1,o=n.length>>>0;if(!a(e))throw new TypeError;for(;++i<o;)i in n&&e.call(r,n[i],i,t)}},(h=t.forEach,f=!0,m=!0,h&&(h.call("foo",(function(e,t,n){"object"!=typeof n&&(f=!1)})),h.call([1],(function(){m="string"==typeof this}),"x")),!(h&&f&&m)));var y=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);u(t,{indexOf:function(e){var t=v&&c(this)?this.split(""):d(this),n=t.length>>>0;if(!n)return-1;var r,i=0;for(arguments.length>1&&((r=+arguments[1])!=r?r=0:0!==r&&r!==1/0&&r!==-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r))),i=r),i=i>=0?i:Math.max(0,n+i);i<n;i++)if(i in t&&t[i]===e)return i;return-1}},y);var E,_=i.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(E=void 0===/()??/.exec("")[1],i.split=function(e,n){var r=this;if(void 0===e&&0===n)return[];if("[object RegExp]"!==s.call(e))return _.call(this,e,n);var i,o,a,c,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),d=0;for(e=new RegExp(e.source,u+"g"),r+="",E||(i=new RegExp("^"+e.source+"$(?!\\s)",u)),n=void 0===n?-1>>>0:n>>>0;(o=e.exec(r))&&!((a=o.index+o[0].length)>d&&(l.push(r.slice(d,o.index)),!E&&o.length>1&&o[0].replace(i,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)})),o.length>1&&o.index<r.length&&t.push.apply(l,o.slice(1)),c=o[0].length,d=a,l.length>=n));)e.lastIndex===o.index&&e.lastIndex++;return d===r.length?!c&&e.test("")||l.push(""):l.push(r.slice(d)),l.length>n?l.slice(0,n):l}):"0".split(void 0,0).length&&(i.split=function(e,t){return void 0===e&&0===t?[]:_.call(this,e,t)});var b=i.substr;u(i,{substr:function(e,t){return b.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},"".substr&&"b"!=="0b".substr(-1))},7581:function(e,t,n){"use strict";e.exports=[n(2412),n(9842),n(4620),n(3004),n(882)(n(3004)),n(5616),n(882)(n(5616)),n(2387),n(9998),n(882)(n(2387)),n(5375)]},2940:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),o=n(7705),s=n(273),a=n.g.XMLHttpRequest;function c(e,t,n,i){var o=this;r.call(this),setTimeout((function(){o._start(e,t,n,i)}),0)}i(c,r),c.prototype._start=function(e,t,n,r){var i=this;try{this.xhr=new a}catch(e){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=s.addQuery(t,"t="+ +new Date),this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i.emit("finish",0,""),i._cleanup(!1)})}catch(e){return this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),r&&r.headers)for(var l in r.headers)this.xhr.setRequestHeader(l,r.headers[l]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,n=i.xhr;switch(n.readyState,n.readyState){case 3:try{t=n.status,e=n.responseText}catch(e){}1223===t&&(t=204),200===t&&e&&e.length>0&&i.emit("chunk",t,e);break;case 4:1223===(t=n.status)&&(t=204),12005!==t&&12029!==t||(t=0),n.responseText,i.emit("finish",t,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(e){i.emit("finish",0,""),i._cleanup(!1)}},c.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!a;var l=["Active"].concat("Object").join("X");!c.enabled&&l in n.g&&(a=function(){try{return new n.g[l]("Microsoft.XMLHTTP")}catch(e){return null}},c.enabled=!!new a);var u=!1;try{u="withCredentials"in new a}catch(e){}c.supportsCORS=u,e.exports=c},3759:function(e,t,n){e.exports=n.g.EventSource},9334:function(e,t,n){"use strict";var r=n.g.WebSocket||n.g.MozWebSocket;e.exports=r?function(e){return new r(e)}:void 0},3004:function(e,t,n){"use strict";var r=n(5717),i=n(9395),o=n(6709),s=n(9033),a=n(3759);function c(e){if(!c.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",o,s)}r(c,i),c.enabled=function(){return!!a},c.transportName="eventsource",c.roundTrips=2,e.exports=c},5616:function(e,t,n){"use strict";var r=n(5717),i=n(3608),o=n(3515),s=n(9395);function a(e){if(!i.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/htmlfile",i,o)}r(a,s),a.enabled=function(e){return i.enabled&&e.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,e.exports=a},5088:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v,o=n(2828),s=n(273),a=n(3683),c=n(7705),l=n(8915);function u(e,t,n){if(!u.enabled())throw new Error("Transport created when disabled");i.call(this);var r=this;this.origin=s.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=l.string(8);var o=s.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=a.createIframe(o,(function(e){r.emit("close",1006,"Unable to load an iframe ("+e+")"),r.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}r(u,i),u.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},u.prototype._message=function(e){if(e.data,!s.isOriginEqual(e.origin,this.origin))return e.origin,void this.origin;var t;try{t=JSON.parse(e.data)}catch(t){return void e.data}if(t.windowId!==this.windowId)return t.windowId,void this.windowId;switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=JSON.parse(t.data)}catch(e){return void t.data}this.emit("close",n[0],n[1]),this.close()}},u.prototype.postMessage=function(e,t){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},u.prototype.send=function(e){this.postMessage("m",e)},u.enabled=function(){return a.iframeEnabled},u.transportName="iframe",u.roundTrips=2,e.exports=u},5375:function(e,t,n){"use strict";var r=n(5717),i=n(8347),o=n(514),s=n(771);function a(e){if(!a.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",s,o)}r(a,i),a.enabled=function(){return!!n.g.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,e.exports=a},9395:function(e,t,n){"use strict";var r=n(5717),i=n(273),o=n(8347);function s(e,t,n,r){o.call(this,e,t,function(e){return function(t,n,r){var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var s=i.addPath(t,"/xhr_send"),a=new e("POST",s,n,o);return a.once("finish",(function(e){if(a=null,200!==e&&204!==e)return r(new Error("http status "+e));r()})),function(){a.close(),a=null;var e=new Error("Aborted");e.code=1e3,r(e)}}}(r),n,r)}r(s,o),e.exports=s},1851:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v;function o(e,t){i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}r(o,i),o.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},o.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){t.sendStop=null,t.sendSchedule()}),25)},o.prototype.sendSchedule=function(){this.sendBuffer.length;var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=o},882:function(e,t,n){"use strict";var r=n(5717),i=n(5088),o=n(2217);e.exports=function(e){function t(t,n){i.call(this,e.transportName,t,n)}return r(t,i),t.enabled=function(t,r){if(!n.g.document)return!1;var s=o.extend({},r);return s.sameOrigin=!0,e.enabled(s)&&i.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=i.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}},1265:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v;function o(e,t,n){i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}r(o,i),o.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){e.emit("message",t)})),t.once("close",(function(n,r){e.pollIsClosing,e.poll=t=null,e.pollIsClosing||("network"===r?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))}))},o.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=o},8347:function(e,t,n){"use strict";var r=n(5717),i=n(273),o=n(1851),s=n(1265);function a(e,t,n,r,a){var c=i.addPath(e,t),l=this;o.call(this,e,n),this.poll=new s(r,c,a),this.poll.on("message",(function(e){l.emit("message",e)})),this.poll.once("close",(function(e,t){l.poll=null,l.emit("close",e,t),l.close()}))}r(a,o),a.prototype.close=function(){o.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=a},6709:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v,o=n(3759);function s(e){i.call(this);var t=this,n=this.es=new o(e);n.onmessage=function(e){e.data,t.emit("message",decodeURI(e.data))},n.onerror=function(e){n.readyState;var r=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(r)}}r(s,i),s.prototype.abort=function(){this._cleanup(),this._close("user")},s.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},s.prototype._close=function(e){var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=s},3608:function(e,t,n){"use strict";var r=n(5717),i=n(3683),o=n(273),s=n(3212).v,a=n(8915);function c(e){s.call(this);var t=this;i.polluteGlobalNamespace(),this.id="a"+a.string(6),e=o.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),c.htmlfileEnabled;var r=c.htmlfileEnabled?i.createHtmlfile:i.createIframe;n.g[i.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(e){t.emit("message",e)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=r(e,(function(){t._cleanup(),t._close("permanent")}))}r(c,s),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete n.g[i.WPrefix][this.id]},c.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},c.htmlfileEnabled=!1;var l=["Active"].concat("Object").join("X");if(l in n.g)try{c.htmlfileEnabled=!!new n.g[l]("htmlfile")}catch(e){}c.enabled=c.htmlfileEnabled||i.iframeEnabled,e.exports=c},514:function(e,t,n){"use strict";var r=n(3683),i=n(8915),o=n(8510),s=n(273),a=n(5717),c=n(3212).v;function l(e){var t=this;c.call(this),r.polluteGlobalNamespace(),this.id="a"+i.string(6);var o=s.addQuery(e,"c="+encodeURIComponent(r.WPrefix+"."+this.id));n.g[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(o),this.timeoutId=setTimeout((function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))}),l.timeout)}a(l,c),l.prototype.abort=function(){if(n.g[r.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},l.timeout=35e3,l.scriptErrorTimeout=1e3,l.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},l.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},l.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete n.g[r.WPrefix][this.id]},l.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),l.scriptErrorTimeout))},l.prototype._createScript=function(e){var t,r=this,s=this.script=n.g.document.createElement("script");if(s.id="a"+i.string(8),s.src=e,s.type="text/javascript",s.charset="UTF-8",s.onerror=this._scriptError.bind(this),s.onload=function(){r._abort(new Error("JSONP script loaded abnormally (onload)"))},s.onreadystatechange=function(){if(s.readyState,/loaded|closed/.test(s.readyState)){if(s&&s.htmlFor&&s.onclick){r.loadedOkay=!0;try{s.onclick()}catch(e){}}s&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===s.async&&n.g.document.attachEvent)if(o.isOpera())(t=this.script2=n.g.document.createElement("script")).text="try{var a = document.getElementById('"+s.id+"'); if(a)a.onerror();}catch(x){};",s.async=t.async=!1;else{try{s.htmlFor=s.id,s.event="onclick"}catch(e){}s.async=!0}void 0!==s.async&&(s.async=!0);var a=n.g.document.getElementsByTagName("head")[0];a.insertBefore(s,a.firstChild),t&&a.insertBefore(t,a.firstChild)},e.exports=l},1044:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v;function o(e,t){i.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){n._chunkHandler(e,t),n.xo=null;var r=200===e?"network":"permanent";n.emit("close",null,r),n._cleanup()}))}r(o,i),o.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var i=r.slice(0,n);i&&this.emit("message",i)}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=o},771:function(e,t,n){"use strict";var r,i,o=n(8915),s=n(273);e.exports=function(e,t,a){r||((r=n.g.document.createElement("form")).style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",(i=n.g.document.createElement("textarea")).name="d",r.appendChild(i),n.g.document.body.appendChild(r));var c="a"+o.string(8);r.target=c,r.action=s.addQuery(s.addPath(e,"/jsonp_send"),"i="+c);var l=function(e){try{return n.g.document.createElement('<iframe name="'+e+'">')}catch(r){var t=n.g.document.createElement("iframe");return t.name=e,t}}(c);l.id=c,l.style.display="none",r.appendChild(l);try{i.value=t}catch(e){}r.submit();var u=function(e){l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,setTimeout((function(){l.parentNode.removeChild(l),l=null}),500),i.value="",a(e))};return l.onerror=function(){u()},l.onload=function(){u()},l.onreadystatechange=function(e){l.readyState,"complete"===l.readyState&&u()},function(){u(new Error("Aborted"))}}},6073:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),o=n(7705),s=n(8510),a=n(273);function c(e,t,n){var i=this;r.call(this),setTimeout((function(){i._start(e,t,n)}),0)}i(c,r),c.prototype._start=function(e,t,r){var i=this,s=new n.g.XDomainRequest;t=a.addQuery(t,"t="+ +new Date),s.onerror=function(){i._error()},s.ontimeout=function(){i._error()},s.onprogress=function(){s.responseText,i.emit("chunk",200,s.responseText)},s.onload=function(){i.emit("finish",200,s.responseText),i._cleanup(!1)},this.xdr=s,this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(e){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!n.g.XDomainRequest||!s.hasDomain()),e.exports=c},9033:function(e,t,n){"use strict";var r=n(5717),i=n(2940);function o(e,t,n,r){i.call(this,e,t,n,r)}r(o,i),o.enabled=i.enabled&&i.supportsCORS,e.exports=o},7103:function(e,t,n){"use strict";var r=n(3212).v;function i(){var e=this;r.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),i.timeout)}n(5717)(i,r),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,e.exports=i},3515:function(e,t,n){"use strict";var r=n(5717),i=n(2940);function o(e,t,n){i.call(this,e,t,n,{noCredentials:!0})}r(o,i),o.enabled=i.enabled,e.exports=o},2412:function(e,t,n){"use strict";var r=n(7705),i=n(273),o=n(5717),s=n(3212).v,a=n(9334);function c(e,t,n){if(!c.enabled())throw new Error("Transport created when disabled");s.call(this);var o=this,l=i.addPath(e,"/websocket");l="https"===l.slice(0,5)?"wss"+l.slice(5):"ws"+l.slice(4),this.url=l,this.ws=new a(this.url,[],n),this.ws.onmessage=function(e){e.data,o.emit("message",e.data)},this.unloadRef=r.unloadAdd((function(){o.ws.close()})),this.ws.onclose=function(e){e.code,e.reason,o.emit("close",e.code,e.reason),o._cleanup()},this.ws.onerror=function(e){o.emit("close",1006,"WebSocket connection broken"),o._cleanup()}}o(c,s),c.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},c.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!a},c.transportName="websocket",c.roundTrips=2,e.exports=c},9998:function(e,t,n){"use strict";var r=n(5717),i=n(9395),o=n(4620),s=n(1044),a=n(6073);function c(e){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",s,a)}r(c,i),c.enabled=o.enabled,c.transportName="xdr-polling",c.roundTrips=2,e.exports=c},4620:function(e,t,n){"use strict";var r=n(5717),i=n(9395),o=n(1044),s=n(6073);function a(e){if(!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,s)}r(a,i),a.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&s.enabled&&e.sameScheme},a.transportName="xdr-streaming",a.roundTrips=2,e.exports=a},2387:function(e,t,n){"use strict";var r=n(5717),i=n(9395),o=n(1044),s=n(9033),a=n(3515);function c(e){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",o,s)}r(c,i),c.enabled=function(e){return!e.nullOrigin&&(!(!a.enabled||!e.sameOrigin)||s.enabled)},c.transportName="xhr-polling",c.roundTrips=2,e.exports=c},9842:function(e,t,n){"use strict";var r=n(5717),i=n(9395),o=n(1044),s=n(9033),a=n(3515),c=n(8510);function l(e){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,s)}r(l,i),l.enabled=function(e){return!e.nullOrigin&&!c.isOpera()&&s.enabled},l.transportName="xhr-streaming",l.roundTrips=2,l.needBody=!!n.g.document,e.exports=l},2017:function(e,t,n){"use strict";n.g.crypto&&n.g.crypto.getRandomValues?e.exports.randomBytes=function(e){var t=new Uint8Array(e);return n.g.crypto.getRandomValues(t),t}:e.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}},8510:function(e,t,n){"use strict";e.exports={isOpera:function(){return n.g.navigator&&/opera/i.test(n.g.navigator.userAgent)},isKonqueror:function(){return n.g.navigator&&/konqueror/i.test(n.g.navigator.userAgent)},hasDomain:function(){if(!n.g.document)return!0;try{return!!n.g.document.domain}catch(e){return!1}}}},8028:function(e){"use strict";var t,n=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var r=JSON.stringify(e);return n.lastIndex=0,n.test(r)?(t||(t=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,(function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,n}(n)),r.replace(n,(function(e){return t[e]}))):r}}},7705:function(e,t,n){"use strict";var r=n(8915),i={},o=!1,s=n.g.chrome&&n.g.chrome.app&&n.g.chrome.app.runtime;e.exports={attachEvent:function(e,t){void 0!==n.g.addEventListener?n.g.addEventListener(e,t,!1):n.g.document&&n.g.attachEvent&&(n.g.document.attachEvent("on"+e,t),n.g.attachEvent("on"+e,t))},detachEvent:function(e,t){void 0!==n.g.addEventListener?n.g.removeEventListener(e,t,!1):n.g.document&&n.g.detachEvent&&(n.g.document.detachEvent("on"+e,t),n.g.detachEvent("on"+e,t))},unloadAdd:function(e){if(s)return null;var t=r.string(8);return i[t]=e,o&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in i&&delete i[e]},triggerUnloadCallbacks:function(){for(var e in i)i[e](),delete i[e]}},s||e.exports.attachEvent("unload",(function(){o||(o=!0,e.exports.triggerUnloadCallbacks())}))},3683:function(e,t,n){"use strict";var r=n(7705),i=n(8510);e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in n.g||(n.g[e.exports.WPrefix]={})},postMessage:function(t,r){n.g.parent!==n.g&&n.g.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:t,data:r||""}),"*")},createIframe:function(e,t){var i,o,s=n.g.document.createElement("iframe"),a=function(){clearTimeout(i);try{s.onload=null}catch(e){}s.onerror=null},c=function(){s&&(a(),setTimeout((function(){s&&s.parentNode.removeChild(s),s=null}),0),r.unloadDel(o))},l=function(e){s&&(c(),t(e))};return s.src=e,s.style.display="none",s.style.position="absolute",s.onerror=function(){l("onerror")},s.onload=function(){clearTimeout(i),i=setTimeout((function(){l("onload timeout")}),2e3)},n.g.document.body.appendChild(s),i=setTimeout((function(){l("timeout")}),15e3),o=r.unloadAdd(c),{post:function(e,t){setTimeout((function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}catch(e){}}),0)},cleanup:c,loaded:a}},createHtmlfile:function(t,i){var o,s,a,c=["Active"].concat("Object").join("X"),l=new n.g[c]("htmlfile"),u=function(){clearTimeout(o),a.onerror=null},d=function(){l&&(u(),r.unloadDel(s),a.parentNode.removeChild(a),a=l=null,CollectGarbage())},p=function(e){l&&(d(),i(e))};l.open(),l.write('<html><script>document.domain="'+n.g.document.domain+'";<\/script></html>'),l.close(),l.parentWindow[e.exports.WPrefix]=n.g[e.exports.WPrefix];var h=l.createElement("div");return l.body.appendChild(h),a=l.createElement("iframe"),h.appendChild(a),a.src=t,a.onerror=function(){p("onerror")},o=setTimeout((function(){p("timeout")}),15e3),s=r.unloadAdd(d),{post:function(e,t){try{setTimeout((function(){a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}),0)}catch(e){}},cleanup:d,loaded:u}}},e.exports.iframeEnabled=!1,n.g.document&&(e.exports.iframeEnabled=("function"==typeof n.g.postMessage||"object"==typeof n.g.postMessage)&&!i.isKonqueror())},4886:function(e,t,n){"use strict";var r={};["log","debug","warn"].forEach((function(e){var t;try{t=n.g.console&&n.g.console[e]&&n.g.console[e].apply}catch(e){}r[e]=t?function(){return n.g.console[e].apply(n.g.console,arguments)}:"log"===e?function(){}:r.log})),e.exports=r},2217:function(e){"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,i=arguments.length;r<i;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}},8915:function(e,t,n){"use strict";var r=n(2017);e.exports={string:function(e){for(var t=r.randomBytes(e),n=[],i=0;i<e;i++)n.push("abcdefghijklmnopqrstuvwxyz012345".substr(t[i]%32,1));return n.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},5581:function(e){"use strict";e.exports=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"===e.transportName&&!1===n.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(n)?(e.transportName,r.main.push(e),e.facadeTransport&&r.facade.push(e.facadeTransport)):e.transportName))})),r}}}},273:function(e,t,n){"use strict";var r=n(4564);e.exports={getOrigin:function(e){if(!e)return null;var t=new r(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){return this.getOrigin(e)===this.getOrigin(t)},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}},2828:function(e){e.exports="1.6.1"},4564:function(e,t,n){"use strict";var r=n(4058),i=n(8188),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(o,"")}var p=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function f(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},i={},o=typeof(e=e||r);if("blob:"===e.protocol)i=new v(unescape(e.pathname),{});else if("string"===o)for(t in i=new v(e,{}),h)delete i[t];else if("object"===o){for(t in e)t in h||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=d(e)).replace(s,""),t=t||{};var n,r=l.exec(e),i=r[1]?r[1].toLowerCase():"",o=!!r[2],a=!!r[3],c=0;return o?a?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):a?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===i?c>=2&&(n=n.slice(2)):m(i)?n=r[4]:i?o&&(n=n.slice(2)):c>=2&&m(t.protocol)&&(n=r[4]),{protocol:i,slashes:o||m(i),slashesCount:c,rest:n}}function v(e,t,n){if(e=(e=d(e)).replace(s,""),!(this instanceof v))return new v(e,t,n);var o,a,c,l,h,y,E=p.slice(),_=typeof t,b=this,S=0;for("object"!==_&&"string"!==_&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),o=!(a=g(e||"",t=f(t))).protocol&&!a.slashes,b.slashes=a.slashes||o&&t.slashes,b.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||u.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!m(b.protocol)))&&(E[3]=[/(.*)/,"pathname"]);S<E.length;S++)"function"!=typeof(l=E[S])?(c=l[0],y=l[1],c!=c?b[y]=e:"string"==typeof c?~(h="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(b[y]=e.slice(0,h),e=e.slice(h+l[2])):(b[y]=e.slice(h),e=e.slice(0,h))):(h=c.exec(e))&&(b[y]=h[1],e=e.slice(0,h.index)),b[y]=b[y]||o&&l[3]&&t[y]||"",l[4]&&(b[y]=b[y].toLowerCase())):e=l(e,b);n&&(b.query=n(b.query)),o&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(b.pathname,t.pathname)),"/"!==b.pathname.charAt(0)&&m(b.protocol)&&(b.pathname="/"+b.pathname),r(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(h=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,h),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(h+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&m(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}v.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,c.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(o.username=t.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<p.length;l++){var u=p[l];u[4]&&(o[u[1]]=o[u[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&m(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var s=o+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):"file:"!==n.protocol&&m(n.protocol)&&!r&&"/"!==n.pathname&&(s+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),s+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(s+=n.hash),s}},v.extractProtocol=g,v.location=f,v.trimLeft=d,v.qs=i,e.exports=v},8188:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,o,s=[];for(o in"string"!=typeof t&&(t="?"),e)if(n.call(e,o)){if((r=e[o])||null!=r&&!isNaN(r)||(r=""),o=i(o),r=i(r),null===o||null===r)continue;s.push(o+"="+r)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var o=r(t[1]),s=r(t[2]);null===o||null===s||o in i||(i[o]=s)}return i}},4058:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}}},__webpack_module_cache__={};function __nested_webpack_require_895763__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__nested_webpack_require_895763__),n.exports}__nested_webpack_require_895763__.amdO={},__nested_webpack_require_895763__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __nested_webpack_require_895763__.d(t,{a:t}),t},__nested_webpack_require_895763__.d=function(e,t){for(var n in t)__nested_webpack_require_895763__.o(t,n)&&!__nested_webpack_require_895763__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__nested_webpack_require_895763__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__nested_webpack_require_895763__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_895763__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__={};return function(){"use strict";__nested_webpack_require_895763__.r(__nested_webpack_exports__),__nested_webpack_require_895763__.d(__nested_webpack_exports__,{default:function(){return ae}});var e=__nested_webpack_require_895763__(8e3),t=__nested_webpack_require_895763__.n(e),n=__nested_webpack_require_895763__(3281),r=__nested_webpack_require_895763__.n(n),i=__nested_webpack_require_895763__(3720),o=__nested_webpack_require_895763__.n(i),s=(__nested_webpack_require_895763__(9601),__nested_webpack_require_895763__(1539),__nested_webpack_require_895763__(8674),__nested_webpack_require_895763__(2526),__nested_webpack_require_895763__(1817),__nested_webpack_require_895763__(2165),__nested_webpack_require_895763__(6992),__nested_webpack_require_895763__(8783),__nested_webpack_require_895763__(3948),__nested_webpack_require_895763__(8309),__nested_webpack_require_895763__(1532),__nested_webpack_require_895763__(4812),__nested_webpack_require_895763__(9070),__nested_webpack_require_895763__(9575),__nested_webpack_require_895763__(2472),__nested_webpack_require_895763__(2990),__nested_webpack_require_895763__(8927),__nested_webpack_require_895763__(3105),__nested_webpack_require_895763__(5035),__nested_webpack_require_895763__(4345),__nested_webpack_require_895763__(7174),__nested_webpack_require_895763__(2846),__nested_webpack_require_895763__(4731),__nested_webpack_require_895763__(7209),__nested_webpack_require_895763__(6319),__nested_webpack_require_895763__(8867),__nested_webpack_require_895763__(7789),__nested_webpack_require_895763__(3739),__nested_webpack_require_895763__(9368),__nested_webpack_require_895763__(4483),__nested_webpack_require_895763__(2056),__nested_webpack_require_895763__(3462),__nested_webpack_require_895763__(678),__nested_webpack_require_895763__(7462),__nested_webpack_require_895763__(3824),__nested_webpack_require_895763__(5021),__nested_webpack_require_895763__(2974),__nested_webpack_require_895763__(5016),__nested_webpack_require_895763__(5827),__nested_webpack_require_895763__(3843),__nested_webpack_require_895763__(3710),__nested_webpack_require_895763__(2564),__nested_webpack_require_895763__(9653),__nested_webpack_require_895763__(7941),__nested_webpack_require_895763__(9554),__nested_webpack_require_895763__(4747),__nested_webpack_require_895763__(1038),__nested_webpack_require_895763__(7327),__nested_webpack_require_895763__(561),__nested_webpack_require_895763__(7252)),a=__nested_webpack_require_895763__(4370),c=__nested_webpack_require_895763__(5531),l=__nested_webpack_require_895763__(9335),u=__nested_webpack_require_895763__(7360),d=function(){function e(e,t,n){this.handlerData={},this.handlerData={},e.addEventHandler=this.addEventHandler.bind(this),e.removeEventHandler=this.removeEventHandler.bind(this)}return e.prototype.addEventHandler=function(e,t){this.handlerData[e]=t},e.prototype.removeEventHandler=function(e){delete this.handlerData[e]},e.prototype.dispatch=function(e,t){for(var n in u.kg.debug("dispatch event: "+e,t||""),this.handlerData){var r=this.handlerData[n][e];r&&r(t)}},e}(),p=function(){};function h(e){this.onOpened=e.onOpened||p,this.onPresence=e.onPresence||p,this.onTextMessage=e.onTextMessage||p,this.onPictureMessage=e.onPictureMessage||p,this.onAudioMessage=e.onAudioMessage||p,this.onVideoMessage=e.onVideoMessage||p,this.onFileMessage=e.onFileMessage||p,this.onLocationMessage=e.onLocationMessage||p,this.onCmdMessage=e.onCmdMessage||p,this.onCustomMessage=e.onCustomMessage||p,this.onReceivedMessage=e.onReceivedMessage||p,this.onDeliveredMessage=e.onDeliveredMessage||p,this.onReadMessage=e.onReadMessage||p,this.onRecallMessage=e.onRecallMessage||p,this.onChannelMessage=e.onChannelMessage||p,this.onError=e.onError||p,this.onOffline=e.onOffline||p,this.onOnline=e.onOnline||p,this.onStatisticMessage=e.onStatisticMessage||p,this.onContactInvited=e.onContactInvited||p,this.onContactAgreed=e.onContactAgreed||p,this.onContactRefuse=e.onContactRefuse||p,this.onContactDeleted=e.onContactDeleted||p,this.onContactAdded=e.onContactAdded||p,this.onTokenWillExpire=e.onTokenWillExpire||p,this.onTokenExpired=e.onTokenExpired||p,this.onClosed=e.onClosed||p,this.onPresenceStatusChange=e.onPresenceStatusChange||p}__nested_webpack_require_895763__(2222),__nested_webpack_require_895763__(2772);var f={biz:"",debug:!1,token:""},m="https://data-reporting.agora.io/report",g="https://data-reporting.sh.agoralab.co/report",v=(__nested_webpack_require_895763__(6699),__nested_webpack_require_895763__(2023),__nested_webpack_require_895763__(2071)),y=__nested_webpack_require_895763__(1595),E=function(e){var t=Number(y.C8[e]);return t===y.C8.USER_LOGIN?"MANUALLOGIN":t===y.C8.MSYNC_SENDMESSAGE?"SENDMESSAGE":t>y.C8.UNKNOWOPERATION&&t<y.C8.REST_OPERATE?"REST":t>y.C8.REST_OPERATE&&t<y.C8.MSYNC_OPERATE?"MESSAGE":t>y.C8.MSYNC_OPERATE&&t<y.C8.ROSTER_OPERATE?"ROSTER":t>y.C8.ROSTER_OPERATE&&t<y.C8.USER_OPERATE?"USER":t>y.C8.USER_OPERATE&&t<y.C8.GROUP_OPERATE?"GROUP":t>y.C8.GROUP_OPERATE&&t<y.C8.CHATROOM_OPERATE?"CHATROOM":"OPERATION"},_=function(){return(new Date).getTime()},b=function(e){return[a.iw.BAIDU,a.iw.WX,a.iw.DD,a.iw.ZFB,a.iw.TT,a.iw.QUICK_APP,a.iw.UNI].includes(e.platform)},S=function(){return e=1,t=99999,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e;var e,t},T={},I=(__nested_webpack_require_895763__(1249),function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}),N=1e3,w=function(){function e(e){this.eventQueue=[],this.stock=N,this.config=e,this.governor()}return e.prototype.add=function(e){this.stock<=0?console.warn("Event Report limit ".concat(N," per minute")):(this.eventQueue.push(e),this.consume(),this.stock-=1)},e.prototype.consume=function(){var e=this;0!==this.eventQueue.length&&(this.timer&&this.eventQueue.length<=10&&clearTimeout(this.timer),this.timer=setTimeout((function(){var t,n=e.eventQueue.splice(0,10),r=n.filter((function(e){return e.appId===n[0].appId})),i=n.filter((function(e){return e.appId!==n[0].appId}));(t=e.eventQueue).unshift.apply(t,i),e.batchSend(r)}),1e3))},e.prototype.governor=function(){var e=this,t=setInterval((function(){e.stock=N}),6e4);"undefined"!=typeof addEventListener&&addEventListener("beforeunload",(function(){clearInterval(t)}))},e.prototype.batchSend=function(e){var t,n;if(void 0===e&&(e=[]),0!==e.length)try{var r=e.map((function(e){e.biz,e.appId;var t=e.eventId,n=I(e,["biz","appId","eventId"]);return{eventId:Number(t),body:n}}));!function(e,t){try{var n=t.biz,r=t.appId,i=t.data,o=t.debug,s=t.onSuccess;if(!n)throw new Error("biz is not defined");T.global||(T=a.P6.getEnvInfo());var c=T;if(b(c)){var l={url:o?g:m,data:i,method:"POST",success:function(){null==s||s()},fail:function(){},complete:function(){}},u={token:e,appid:null!=r?r:"",sendts:"".concat(Math.floor((new Date).getTime()/1e3)),biz:n,debug:"".concat(o)};if("zfb"===c.platform||"dd"===c.platform?l.headers=u:l.header=u,"dd"===c.platform)return c.global.httpRequest(l);c.global.request(l)}else{var d=new XMLHttpRequest;d.onreadystatechange=function(){2===d.readyState&&(null==s||s())},d.open("POST",o?g:m),d.setRequestHeader("Content-Type","application/json"),d.setRequestHeader("token",e),d.setRequestHeader("appid",null!=r?r:""),d.setRequestHeader("sendts","".concat(Math.floor((new Date).getTime()/1e3))),d.setRequestHeader("biz",n),d.setRequestHeader("debug","".concat(o)),d.send(JSON.stringify(i))}}catch(e){console.error(e)}}(this.config.token,{biz:null===(t=e[0])||void 0===t?void 0:t.biz,appId:null===(n=e[0])||void 0===n?void 0:n.appId,data:r,debug:this.config.debug,onSuccess:this.consume.bind(this)})}catch(e){console.error(e)}},e}(),C=function(){return C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},C.apply(this,arguments)},O=new(function(){function e(e){this.inited=!1,this.appId="",this.biz="",this.eventQueue={},this.config=f,e&&this.init(e)}return e.prototype.init=function(e){var t;if(void 0===e&&(e={}),!e.biz||!e.token)throw new Error("Event Report: biz or token is not defined");try{this.appId=null!==(t=e.appId)&&void 0!==t?t:"",this.biz=e.biz,this.config=C(C({},f),e),this.eventQueue=new w(this.config),this.log(e),this.inited=!0}catch(e){console.error(e)}},e.prototype.send=function(e,t,n){var r;if(void 0===t&&(t={}),this.inited){var i=C(C({},t),{eventId:Number(e),biz:this.biz,appId:null!==(r=null==n?void 0:n.appId)&&void 0!==r?r:this.appId});this.eventQueue.add(i),this.log(i)}else console.error("Event Report: init is not called")},e.prototype.log=function(e){try{if(this.config.debug){var t=e.payload,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["payload"]);console.log("%c Event Report: ".concat(this.config.biz," "),"background: #8A97FC; color: #fff"),console.table(n),t&&(console.info("payload:"),console.table(t))}}catch(e){console.error(e)}},e}()),A=function(){return A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},A.apply(this,arguments)},R={requestName:"",subrequestid:"1",requestMethod:"GET",requestUrl:"",requestElapse:0,code:0,codeDesc:"",isLastApi:0,isSuccess:1},M=function(){function e(e){this.platform=a.P6.getEnvInfo(),this.isReportDt=e.isReport||!1,this.isCollectDt=!0,b(this.platform)&&!this.isReportDt&&(this.isCollectDt=!1),this.eventQueue=[],this.accessChannel=v.yK,this.options=function(e,t){t.platform||(t=a.P6.getEnvInfo());var n=e.org,r=e.appkey,i=e.deviceId,o=e.sdkVersion,s=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||"".concat(t.platform,"_mini_program");return{org:n,appkey:r,deviceId:i,sdkServiceId:"sid_".concat(a.P6.getUniqueId(),"_").concat(S()),did:s,sdkVersion:o,os:v.Wc,sdkProduct:y.aC.web}}(e,this.platform),this.sid=this.options.sdkServiceId,this.init(e)}return e.getInstance=function(){return e.instance},e.prototype.getServiceId=function(){return this.sid||"sid_0"},e.prototype.setIsReportDt=function(e){this.isReportDt=e,e&&this.rptEventQueue()},e.prototype.setIsCollectDt=function(e){this.isCollectDt=e,e||(this.eventQueue=[])},e.prototype.rptEventQueue=function(){var e=this;this.eventQueue.length&&this.eventQueue.forEach((function(t,n){O.send(t.eventId,t.dt),n>=e.eventQueue.length-1&&(e.eventQueue=[])}))},e.prototype.init=function(t){e.instance||(e.instance=this,O.init({biz:v.el,token:v.$x,appId:t.appkey,debug:!1}),this.reportInit())},e.prototype.reportInit=function(){if(this.isCollectDt){var e=this.options,t=e.did,n=e.os,r=e.sdkVersion,i=e.deviceId;this.reportData(v.iB.INIT,{did:t,os:n,sdkVersion:r,deviceId:i})}},e.prototype.geOperateFun=function(e){var t=this;if(!this.isCollectDt)return function(){};var n=1,r=0,i="",o=_(),s=e.uid,c=e.operationName;s&&(this.uid=s);var l={uid:this.uid,operationId:"opr_".concat(a.P6.getUniqueId(),"_").concat(S()),requestid:"req_".concat(a.P6.getUniqueId(),"_").concat(S()),operationName:c};return function(e){var s,u,d,p;if(e.data.isSuccess?(r=0,i=""):(0===e.data.code&&(e.data.code=v.Tp),r=null!==(s=e.data.code)&&void 0!==s?s:r,i=null!==(u=e.data.codeDesc)&&void 0!==u?u:i),(null===(d=e.data)||void 0===d?void 0:d.accessChannel)&&(t.accessChannel=null===(p=e.data)||void 0===p?void 0:p.accessChannel),e.isRetry?(n++,e.data.subrequestid="".concat(n)):(l.requestid="req_".concat(a.P6.getUniqueId(),"_").concat(S()),n=1),e.data.isLastApi){var h=_();e.data.requestElapse=h-o,e.data.requestMethod="",e.data.subrequestid="0",e.data.code=200===r?0:r,e.data.codeDesc=i}else e.data.requestName||(e.data.requestName=c);e.data.requestElapse||(e.data.requestElapse=_()-o),t.reportData.call(t,v.iB.API,A(A(A(A({},R),l),e.data),{accessChannel:t.accessChannel,operationType:E(c)})),e.isEndApi&&t.reportData.call(t,v.iB.API,A(A(A({},l),R),{isSuccess:e.data.isSuccess,isLastApi:1,subrequestid:"0",requestMethod:"",code:200===r?0:r,codeDesc:i,requestElapse:e.data.requestElapse,accessChannel:t.accessChannel,operationType:E(c)}))}},e.prototype.reportData=function(e,t){return n=this,i=function(){var n,r,i,o,s,c,l,u;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),n=_(),r=0,e!==v.iB.API?[3,2]:[4,(p=this.platform,new Promise((function(e){var t;p.platform||(p=a.P6.getEnvInfo());var n="";if(p.platform===a.iw.WEB){var r=navigator.connection;(null==r?void 0:r.type)?(null==r||r.type,n=y.td.WIFI):(null==r?void 0:r.effectiveType)&&(n=y.td[r.effectiveType.toLocaleUpperCase()]),e(n)}else p.platform===a.iw.NODE?(n=y.td.UNKNOWN,e(n)):null===(t=p.global)||void 0===t||t.getNetworkType({success:function(t){n=y.td[t.networkType.toLocaleUpperCase()],e(n)}})})))];case 1:r=d.sent(),d.label=2;case 2:return i=this.options,o=i.appkey,s=i.sdkServiceId,c=i.sdkProduct,l=A({lts:n,net:r,appkey:o,sdkServiceId:s,sdkProduct:c},t),this.isReportDt?O.send(e,l):this.isCollectDt&&this.eventQueue.push({eventId:e,dt:l}),[3,4];case 3:return u=d.sent(),console.warn(u),[3,4];case 4:return[2]}var p}))},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{a(i.next(e))}catch(e){t(e)}}function s(e){try{a(i.throw(e))}catch(e){t(e)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}a((i=i.apply(n,[])).next())}));var n,r,i},e}(),D=__nested_webpack_require_895763__(7288),k=__nested_webpack_require_895763__(7479),x=__nested_webpack_require_895763__(2856),L=__nested_webpack_require_895763__(9667),P=__nested_webpack_require_895763__(3770),j=__nested_webpack_require_895763__(1735),U=__nested_webpack_require_895763__(7384),F=__nested_webpack_require_895763__(70),z=__nested_webpack_require_895763__(8161),B=function(){return B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},B.apply(this,arguments)},V=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},H=a.P6.getEnvInfo(),G="web"===H.platform,W=function(){},Y={CLOSED:3,CLOSING:2,CONNECTING:0,OPEN:1},q=function(){function e(t){var n;if(this.name="connection",this.max_cache_length=100,this.isDebug=t.isDebug||!1,this.isReport=!1,this.isHttpDNS=void 0===t.isHttpDNS?G:t.isHttpDNS,this.heartBeatWait=t.heartBeatWait||3e4,this.autoReconnectNumMax=t.autoReconnectNumMax||5,this.refreshDNSIntervals=this.autoReconnectNumMax<5?this.autoReconnectNumMax:5,this.delivery=t.delivery||!1,this.dnsArr=["https://rs.easemob.com","https://rs.chat.agora.io","http://59.110.89.59","http://39.97.193.190","http://39.97.193.187"],this.dnsIndex=0,this.dnsTotal=this.dnsArr.length,this.restHosts=[],this.restTotal=0,this.restIndex=0,this.hostIndex=0,this.socketHost=[],this.hostTotal=0,this.times=1,this.autoReconnectNumTotal=0,this.domain="easemob.com",this.appKey=t.appKey,this.appName="",this.orgName="",this.token="",this.grantType="",this.apiUrl=t.apiUrl||"",this.url=t.url||"",this.https=t.https||"undefined"!=typeof window&&"https:"===(null===(n=window.location)||void 0===n?void 0:n.protocol),this.version="1.2.1",this.deviceId=t.deviceId||"webim",this.osType=16,this.useOwnUploadFun=t.useOwnUploadFun||!1,this.compressType=[0],this.encryptType=[0],this.clientResource="",this.expiresIn=0,this.expirationTime=0,this.logOut=!0,this.context={jid:{appKey:"",clientResource:"",domain:"easemob.com",name:""},userId:"",appKey:"",status:0,restTokenData:"",appName:"",orgName:"",root:{},accessToken:""},this._msgHash={},this._msgPromiseHash={},this._queues=[],this._load_msg_cache=[],this.unMSyncSendMsgMap=new Map,this.mr_cache={},this.closeInfo=null,this.reconnecting=!1,"string"!=typeof this.appKey||2!==this.appKey.split("#").length)throw Error("Illegal appKey: ".concat(this.appKey));var r=this.appKey.split("#");this.orgName=r[0],this.appName=r[1],this.listen=h.bind(this),this.mSync=this.usePlugin(l.Z),this.eventHandler=this.usePlugin(d),Object.assign(e.prototype,k),Object.assign(e.prototype,x),Object.assign(e.prototype,L),Object.assign(e.prototype,P),Object.assign(e.prototype,j),Object.assign(e.prototype,U),Object.assign(e.prototype,F),this.dataReport=new M({appkey:this.appKey,org:this.orgName,sdkVersion:this.version,deviceId:this.deviceId,isReport:this.isReport});var i=0,o=this;Object.defineProperty(a.P6,"ajaxUnconventionalErrorTimes",{set:function(e){0!==e&&(u.kg.debug("rest api request fail times: ".concat(e)),(i=e)%5==0&&this.isHttpDNS&&(u.kg.debug("refresh dns config when rest request fail."),te.call(o,"refresh",{},{})))},get:function(){return i}})}return e.prototype.usePlugin=function(e,t){if(!t)return new e(this);this[t]=new e(this)},e.prototype.listen=function(e){},e.prototype.addEventHandler=function(e,t){},e.prototype.removeEventHandler=function(e){},e.prototype.registerUser=function(e){var t=this;return new Promise((function(n,r){var i=t.dataReport.geOperateFun({uid:e.username,operationName:y.fI.REGISTER});if(t.isHttpDNS){t.dnsIndex=0;var o=B(B({},e),{user:e.username,pwd:e.password,promise:{resolve:n,reject:r}});te.call(t,"signup",o,{rpt:i})}else o=B(B({},e),{promise:{resolve:n,reject:r}}),K.call(t,o,{rpt:i})}))},e.prototype.open=function(e){var t=this;return u.kg.debug("open"),new Promise((function(n,r){if($.call(t,e)){e.accessToken&&(t.token=e.accessToken);var i=B(B({},e),{promise:{resolve:n,reject:r}}),o=t.dataReport.geOperateFun({uid:e.user,operationName:y.fI.LOGIN});t.isHttpDNS?te.call(t,"login",i,{rpt:o}):Q.call(t,i,{rpt:o})}}))},e.prototype.isOpened=function(){return this.sock&&this.sock.readyState===Y.OPEN||!1},e.prototype.close=function(){var e,t,n;this.logOut=!0,this.reconnecting=!1,this.context.status=c.E.STATUS_CLOSING,this.sock&&this.sock.close(),null===(e=this.unMSyncSendMsgMap)||void 0===e||e.clear(),this.stopHeartBeat(),this.rejectMessage(),this.rejectContactsOperate(),this.context.status=c.E.STATUS_CLOSED,this._load_msg_cache=[],this._queues=[],this._msgHash={},this.mr_cache={},this.token="",this.context.accessToken="",null===(n=null===(t=null==this?void 0:this._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.close()},e.prototype.downloadAndParseCombineMessage=function(e){var t=this,n=e.url,r=e.secret;return new Promise((function(e,i){var o,s,l=a.P6.getEnvInfo(),d="web"!==l.platform&&"node"!==l.platform&&"quick_app"!==l.platform&&(null===(s=null===(o=l.global)||void 0===o?void 0:o.canIUse)||void 0===s?void 0:s.call(o,"getFileSystemManager")),p=function(n){var r=function(e){i({type:c.E.PARSE_FILE_ERROR,message:"Read file failed",data:e})},o=function(n){return r=t,s=function(){var t,r,o,s,l,p,h,f,m,g,v,y,E;return V(this,(function(_){switch(_.label){case 0:for(t=d?new Uint8Array(n.data):new Uint8Array(n.target.result),r=0,o=0,s=2,l=t.subarray(r,r+s),p=a.P6.Uint8ArrayToString(l),u.kg.debug("file header:",p),o+=s,h=0,f=2;f<t.length-1;f++)f%2==1&&(h^=t[f]);if(m=t.subarray(t.length-1,t.length),u.kg.debug("checkResult:",h,m[0]===h),m[0]!==h)return[2,i({type:c.E.PARSE_FILE_ERROR,message:"File verification failed"})];if("cm"!==p)return[3,7];_.label=1;case 1:_.trys.push([1,5,,6]),g=[],v=function(){var e,n,i,a;return V(this,(function(c){switch(c.label){case 0:return r+=s,o+=s=4,e=t.subarray(r,r+s),r+=s,s=e.reduce((function(t,n,r){return t+(n<<8*(e.length-r-1))}),0),o+=s,n=t.subarray(r,r+s),i=(i=y.root.lookup("easemob.pb.Meta")).decode(n),[4,z.Z.call(y,i,0,!0,!0)];case 1:return a=c.sent(),g.push(a),[2]}}))},y=this,_.label=2;case 2:return o<t.length-1?[5,v()]:[3,4];case 3:return _.sent(),[3,2];case 4:return[2,e(g)];case 5:return E=_.sent(),i({type:c.E.PARSE_FILE_ERROR,message:"Parse file failed",data:E}),[3,6];case 6:return[3,8];case 7:return[2,i({type:c.E.PARSE_FILE_ERROR,message:"File verification failed"})];case 8:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{a(s.next(e))}catch(e){t(e)}}function i(e){try{a(s.throw(e))}catch(e){t(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,i)}a((s=s.apply(r,[])).next())}));var r,o,s};if(d){var s=l.global.getFileSystemManager(),p=n.tempFilePath;s.readFile({filePath:p,success:o,fail:r})}else if(n instanceof Blob){var h=new FileReader;h.readAsArrayBuffer(n),h.onerror=r,h.onload=o}},h=function(e){i({type:c.E.WEBIM_DOWNLOADFILE_ERROR,message:"Download failed, please try again",data:e})};d?l.global.downloadFile({url:n,success:p,fail:h}):a.P6.download.call(t,{url:n,headers:{Accept:"application/json"},onFileDownloadComplete:p,onFileDownloadError:h,secret:r,accessToken:t.context.accessToken})}))},e.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatID)},e.prototype.clear=function(){this.restTotal=0,this.restIndex=0,this.hostIndex=0,this.hostTotal=0},e.prototype.heartBeat=function(){},e.prototype.renewToken=function(e){var t=this;return this.isOpened()?this.getChatToken(e).then((function(e){var n=Date.now();return t.expirationTime=e.expire_timestamp,t.expiresIn=e.expire_timestamp-n,t.token=e.access_token,t.context.accessToken=e.access_token,t.clearTokenTimeout(),t.tokenExpireTimeCountDown(t.expiresIn),{status:!0,token:e.access_token,expire:e.expire_timestamp}})):Promise.reject({status:!1})},e.prototype.clearTokenTimeout=function(){u.kg.debug("clearTokenTimeout"),this.tokenWillExpireTimer&&clearTimeout(this.tokenWillExpireTimer),this.tokenExpiredTimer&&clearTimeout(this.tokenExpiredTimer)},e.prototype.tokenExpireTimeCountDown=function(e){var t=this;e>Math.pow(2,31)-1&&(e=Math.pow(2,31)-1),this.tokenWillExpireTimer=setTimeout((function(){var n;t.onTokenWillExpire&&t.onTokenWillExpire(),null===(n=t.eventHandler)||void 0===n||n.dispatch("onTokenWillExpire"),u.kg.info("onTokenWillExpire",e)}),e/2),this.tokenExpiredTimer=setTimeout((function(){var n;u.kg.info("onTokenExpired",e),t.onTokenExpired&&t.onTokenExpired(),null===(n=t.eventHandler)||void 0===n||n.dispatch("onTokenExpired"),t.close()}),e)},e.prototype.compareTokenExpireTime=function(e,t){var n,r=Number(t)-Number(e);u.kg.debug("compareTokenExpireTime",r),r<=this.expiresIn/2&&r>0?(this.onTokenWillExpire&&this.onTokenWillExpire(),null===(n=this.eventHandler)||void 0===n||n.dispatch("onTokenWillExpire"),u.kg.info("onTokenWillExpire",r)):r<=0&&(this.closeByTokenExpired(),u.kg.info("closeByTokenExpired",r))},e.prototype.closeByTokenExpired=function(){var e;u.kg.info("closed By TokenExpired"),this.onTokenExpired&&this.onTokenExpired(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onTokenExpired"),this.close()},e.prototype.rejectMessage=function(){var e=this,t=Object.keys(this._msgHash);if(t.length>0){var n=s.Z.create({type:c.E.MESSAGE_WEBSOCKET_DISCONNECTED,message:"websocket disconnected"});t.forEach((function(t){var r,i,o;(null===(r=e.unMSyncSendMsgMap)||void 0===r?void 0:r.has(t))||(e._msgHash[t].reject instanceof Function&&e._msgHash[t].reject(n),null===(o=null===(i=e._localCache)||void 0===i?void 0:i.getInstance())||void 0===o||o.updateLocalMessage(t,{serverMsgId:t,status:D.r.FAIL}),e._msgHash[t].fail instanceof Function&&e._msgHash[t].fail(n),delete e._msgHash[t])}))}},e.prototype.rejectContactsOperate=function(){Array.from(v.Nl.values()).forEach((function(e){null==e||e.reject()})),v.Nl.clear()},e.prototype.resetConnState=function(){this.mSync.stopHeartBeat(),this.times=1,this.autoReconnectNumTotal=0,this.hostIndex=0},e.prototype.reconnect=function(){var e,t=this;this.sock.readyState!==Y.CONNECTING&&this.sock.readyState!==Y.OPEN&&(u.kg.info("reconnect: time",this.times),u.kg.info("reconnect sock.readyState: ",this.sock.readyState),!1===this.reconnecting&&(this.reconnecting=!0),null===(e=this.eventHandler)||void 0===e||e.dispatch("onReconnecting"),this.rejectMessage(),this.rejectContactsOperate(),this.isHttpDNS&&(this.hostIndex<this.socketHost.length-1?this.hostIndex++:this.hostIndex=this.socketHost.length-1),setTimeout((function(){t.sock.readyState!==Y.OPEN&&(u.kg.info("login sock.readyState: ",t.sock.readyState),t.sock.close(),Z.call(t,{access_token:t.context.accessToken}),t.times++)}),500*this.times),this.autoReconnectNumTotal++)},e.prototype.send=function(e){return Promise.resolve(null)},e._getSock=function(){},e}();function K(e,t){var n=this,r=t.rpt,i=t.isRetry,o=e.promise,l=this.apiUrl+"/"+this.orgName+"/"+this.appName+"/users",u={requestName:y.c.RESISTER,requestUrl:l},d=e.error||W;if(!this.orgName&&!this.appName){var p=s.Z.create({type:c.E.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"signup error"});d(p)}var h={headers:{"Content-type":"application/json"},url:l,dataType:"json",data:JSON.stringify({username:e.username,password:e.password,nickname:e.nickname||""}),success:function(t){e.success&&e.success(t);var n=B(B({},t),{type:c.E.REQUEST_SUCCESS});o.resolve&&o.resolve(n);var s=t.extraInfo,a=s.httpCode,l=s.elapse;r({isEndApi:!0,isRetry:i,data:B(B({},{requestElapse:l,isSuccess:1,code:a}),u)})},error:function(t){var s=t.extraInfo,a=s.elapse,c=s.httpCode,l=s.errDesc;return r({isRetry:i,data:B(B({},{requestElapse:a,isSuccess:0,code:c,codeDesc:l}),u)}),n.isHttpDNS&&n.restIndex+1<n.restTotal?(n.restIndex++,ne.call(n),K.call(n,e,{rpt:r,isRetry:i}),Promise.reject(t)):(r({data:{isLastApi:1,isSuccess:0}}),n.clear(),o.reject&&o.reject(t),d(t))}};return a.P6.ajax(h).catch((function(e){o.reject&&o.reject(e)}))}function Q(e,t){var n=this;if($.call(this,e)&&!this.isOpened()){var r=t.rpt,i=t.isRetry;ee.call(this,e),this.user=e.user;var o=e.promise,l=this.context.appName,d=this.context.orgName,p=this.apiUrl+"/"+d+"/"+l+"/token";if(e.agoraToken)this.grantType="agoraToken",this.getChatToken(e.agoraToken).then((function(t){u.kg.info("getChatToken result:",t),n.expirationTime=t.expire_timestamp,n.token=t.access_token,n.context.accessToken=t.access_token,n.context.restTokenData=t.access_token;var i=t.extraInfo,s=i.httpCode,a=i.elapse;o.resolve({accessToken:t.access_token,expireTimestamp:t.expire_timestamp});var c={requestName:y.c.LOGIN_BY_AGORA_TOKEN,requestUrl:p,requestElapse:a,isSuccess:1,code:s};r({data:c}),Z.call(n,B(B({},e),{access_token:t.access_token}),r)})).catch((function(e){var t,i=s.Z.create({type:c.E.WEBIM_CONNCTION_GETROSTER_ERROR,message:"get chat token fail",data:e});o.reject(i),n.onError&&n.onError(i),null===(t=n.eventHandler)||void 0===t||t.dispatch("onError",i);var a=e.extraInfo,l=a.elapse,u=a.httpCode,d=a.errDesc,h={requestName:y.c.LOGIN_BY_AGORA_TOKEN,requestUrl:p,requestElapse:l,isSuccess:0,code:u,codeDesc:d};r({data:h}),r({data:{isLastApi:1,isSuccess:0}})}));else if(e.accessToken)this.grantType="accessToken",this.token=e.accessToken,this.context.accessToken=e.accessToken,this.context.restTokenData=e.accessToken,o.resolve({accessToken:e.accessToken}),Z.call(this,e,r);else{this.grantType="password";var h={grant_type:"password",username:e.user,password:e.pwd,timestamp:+new Date},f=JSON.stringify(h),m={headers:{"Content-type":"application/json"},url:p,dataType:"json",data:f,success:function(t){"function"==typeof e.success&&e.success(t),n.token=t.access_token,n.context.restTokenData=t.access_token,n.context.accessToken=t.access_token,n.expiresIn=t.expires_in,n.clearTokenTimeout(),n.tokenExpireTimeCountDown(1e3*n.expiresIn),o.resolve({accessToken:t.access_token,duration:t.expires_in});var s=t.extraInfo,a=s.httpCode,c=s.elapse,l={requestName:y.c.LOGIN_BY_PWD,requestElapse:c,requestUrl:p,isSuccess:1,code:a};r({isRetry:i,data:l}),Z.call(n,t,r)}||W,error:function(t){var a,l=t.extraInfo,u=l.elapse,d=l.httpCode,h=l.errDesc,f={requestName:y.c.LOGIN_BY_PWD,requestElapse:u,requestUrl:p,isSuccess:0,code:d,codeDesc:h};if(r({isRetry:i,data:f}),n.isHttpDNS&&n.restIndex+1<n.restTotal)return n.restIndex++,ne.call(n),void Q.call(n,e,{rpt:r,isRetry:!0});r({data:{isLastApi:1,isSuccess:0}}),n.clear(),t.error&&t.error_description?(a=s.Z.create({type:c.E.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,message:t.error_description,data:t}),n.onError&&n.onError(a)):(a=s.Z.create({type:c.E.WEBIM_CONNCTION_OPEN_ERROR,message:t.error_description,data:t}),n.onError&&n.onError(a)),"function"==typeof e.error&&e.error(a),o.reject(a)}||W,version:"4.2.0"};a.P6.ajax(m).catch((function(e){console.warn(e)}))}a.P6.listenNetwork(J.bind(this),X.bind(this))}}function J(){var e;u.kg.debug("online"),this.onOnline&&this.onOnline(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onOnline"),this.sock&&1!==this.sock.readyState&&(u.kg.debug("sock.readyState:",this.sock.readyState),this.logOut||this.reconnecting||this.reconnect())}function X(){var e;u.kg.debug("offline"),this.onOffline&&this.onOffline(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onOffline")}function Z(e,t){var n=this,r=this._getSock();this.sock=r;var i=function(){var e;u.kg.debug("websockt onOpen"),t&&t({data:{isLastApi:1,isSuccess:1,accessChannel:null===(e=n.socketHost[n.hostIndex])||void 0===e?void 0:e.channel}});var i=a.P6.flow([n.mSync.generateProvision,n.mSync.base64transform])();try{r.send(i)}catch(e){var o=s.Z.create({type:c.E.SDK_RUNTIME_ERROR,message:"send message error",data:e});n.onError&&n.onError(o)}},o=function(e){setTimeout((function(){var t,r,i,o,s,a,l,d,p,h,f,m;u.kg.debug("websocket onClose"),"zfb"!==H.platform&&"dd"!==H.platform||(n.sock.readyState=Y.CLOSED);var g=401===(null==e?void 0:e.code)||401===(null===(t=n.closeInfo)||void 0===t?void 0:t.code);if(n.logOut)n.clear(),n.resetConnState(),g&&(u.kg.debug("websocket provision error"),n.closeInfo=null),null===(i=null===(r=null==n?void 0:n._localCache)||void 0===r?void 0:r.getInstance())||void 0===i||i.close(),n.onClosed&&n.onClosed(),null===(o=n.eventHandler)||void 0===o||o.dispatch("onDisconnected");else if(g){u.kg.debug("websocket provision error");var v={type:c.E.WEBIM_CONNECTION_ERROR,message:"provision error",data:e};n.closeInfo=null,n.onError&&n.onError(v),null===(s=n.eventHandler)||void 0===s||s.dispatch("onError",v),null===(l=null===(a=null==n?void 0:n._localCache)||void 0===a?void 0:a.getInstance())||void 0===l||l.close(),n.onClosed&&n.onClosed(),null===(d=n.eventHandler)||void 0===d||d.dispatch("onDisconnected"),n.resetConnState()}else if(n.autoReconnectNumTotal<n.autoReconnectNumMax){n.reconnect();var y={type:c.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};n.onError&&n.onError(y),n.autoReconnectNumTotal%n.refreshDNSIntervals==0&&"web"===H.platform&&n.isHttpDNS&&(u.kg.debug("refresh dns config when websocket close"),te.call(n,"refresh",{},{}))}else null===(p=n.unMSyncSendMsgMap)||void 0===p||p.clear(),n.rejectMessage(),y={type:c.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"},n.onError&&n.onError(y),null===(f=null===(h=null==n?void 0:n._localCache)||void 0===h?void 0:h.getInstance())||void 0===f||f.close(),n.onClosed&&n.onClosed(),null===(m=n.eventHandler)||void 0===m||m.dispatch("onDisconnected"),n.resetConnState(),n.reconnecting=!1,u.kg.debug("reconnect fail")}),0)},l=function(e){var t=n.mSync,r=t.decodeMSync,i=t.distributeMSync;a.P6.flow([r,i])(e)};"web"===H.platform?(r.onopen=i,r.onclose=o,r.onmessage=l):(r.onOpen(i),r.onMessage(l),r.onClose(o),"undefined"!=typeof window&&window.WebSocket||r.onError((function(e){var r,i,o,s,a;if(u.kg.debug("mini program sock on error",e),n.onError&&n.onError({type:c.E.WEBIM_CONNECTION_ERROR,message:"on socket error",data:e}),!n.logOut)if(n.autoReconnectNumTotal<n.autoReconnectNumMax)u.kg.debug("sock.onError reconnect",n.autoReconnectNumTotal,n.autoReconnectNumMax),n.reconnect(),n.autoReconnectNumTotal%n.refreshDNSIntervals==0&&"web"===H.platform&&n.isHttpDNS&&(u.kg.debug("refresh dns config when websocket error"),te.call(n,"refresh",{},{}));else{var l={type:c.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};null===(r=n.unMSyncSendMsgMap)||void 0===r||r.clear(),n.rejectMessage(),n.onError&&n.onError(l),null===(o=null===(i=null==n?void 0:n._localCache)||void 0===i?void 0:i.getInstance())||void 0===o||o.close(),n.onClosed&&n.onClosed(),null===(s=n.eventHandler)||void 0===s||s.dispatch("onDisconnected"),n.resetConnState(),n.reconnecting=!1,u.kg.debug("reconnect fail")}t&&t({data:{isLastApi:1,isSuccess:0,accessChannel:null===(a=n.socketHost[n.hostIndex])||void 0===a?void 0:a.channel}})})))}function $(e){if(""===e.user){var t=s.Z.create({type:c.E.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR,message:"the user cannot be empty"});return u.kg.debug("open params error",t),this.onError&&this.onError(t),!1}var n=this.appKey.split("#");return!(2!==n.length||!n[0]||!n[1])||(t=s.Z.create({type:c.E.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"the appKey is illegal"}),u.kg.debug("open params error",t),this.onError&&this.onError(t),!1)}function ee(e){this.context.jid={appKey:this.appKey,name:e.user,domain:this.domain,clientResource:this.clientResource};var t=this.appKey.split("#"),n=t[0],r=t[1];this.context.root=this.root,this.context.userId=e.user,this.context.appKey=this.appKey,this.context.appName=r,this.context.orgName=n}function te(e,t,n){var r=this,i=n.rpt,o=n.isRetry,s=this.dnsArr[this.dnsIndex]+"/easemob/server.json",c={url:s,dataType:"json",type:"GET",data:{app_key:encodeURIComponent(this.appKey)},success:function(n){var a=n.extraInfo,c=a.elapse,l=a.httpCode,d={requestUrl:s,requestName:y.c.GET_DNS,requestElapse:c,isSuccess:1,code:l};"true"===(null==n?void 0:n.enableDataReport)?(r.dataReport.setIsCollectDt(!0),r.dataReport.setIsReportDt(!0)):(r.dataReport.setIsReportDt(!1),r.dataReport.setIsCollectDt(!1)),i&&i({isRetry:o,data:d});var p=n.rest.hosts,h=r.https?"https":"http";if(u.kg.info("httpType: "+h),!p)return Promise.reject(!1);for(var f=p.filter((function(e){if(e.protocol===h)return e})),m=0;m<f.length;m++)if(f[m].protocol===h){var g=f[m];f.splice(m,1),f.unshift(g)}r.restHosts=f,r.restTotal=f.length;var v=n["msync-ws"].hosts;if(!v)return Promise.reject(!1);var E=v.filter((function(e){return e.protocol===h&&e}));r.socketHost=E,r.hostTotal=E.length,ne.call(r),"refresh"!==e&&("login"===e?Q.call(r,t,{rpt:i}):K.call(r,t,{rpt:i}))}||W,error:function(n){var a=n.extraInfo,c=a.elapse,l=a.httpCode,d=a.errDesc,p={requestUrl:s,requestName:y.c.GET_DNS,isSuccess:0,code:l,codeDesc:d,requestElapse:c};i&&i({isRetry:o,data:p}),u.kg.debug("getHttpDNS fail: "+r.dnsIndex),r.dnsIndex++,r.dnsIndex<r.dnsTotal&&te.call(r,e,t,{rpt:i,isRetry:!0})}||W};return a.P6.ajax(c).catch((function(e){console.warn(e)}))}function ne(){var e,t;if(this.restIndex>this.restTotal)return u.kg.debug("restIndex > restTotal"),"";var n="",r=this.restHosts[this.restIndex],i=r.domain,o=r.ip,s=r.port,a=this.https?"https:":"http:";return o&&"undefined"!=typeof window&&"http:"===(null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.protocol)?n=a+"//"+o+":"+s:(n=a+"//"+i,s&&"80"!==s&&"443"!==s&&(n+=":".concat(s)),"undefined"==typeof window||window.location||(n="https://"+i),"undefined"!=typeof window&&window.location&&"file:"===(null===(t=window.location)||void 0===t?void 0:t.protocol)&&(n="https://"+i)),"undefined"==typeof window&&(n=a+"//"+i),this.apiUrl=n,n}var re=__nested_webpack_require_895763__(2449);r().util.Long=o(),r().configure();var ie=r().Root.fromJSON({nested:{easemob:{nested:{pb:{nested:{MessageBody:{fields:{type:{type:"Type",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},contents:{rule:"repeated",type:"Content",id:4},ext:{rule:"repeated",type:"KeyValue",id:5},ackMessageId:{type:"uint64",id:6},msgConfig:{type:"MessageConfig",id:7},ackContent:{type:"string",id:8},meta:{type:"string",id:9},editMessageId:{type:"uint64",id:11}},nested:{Content:{fields:{type:{type:"Type",id:1},text:{type:"string",id:2},latitude:{type:"double",id:3},longitude:{type:"double",id:4},address:{type:"string",id:5},displayName:{type:"string",id:6},remotePath:{type:"string",id:7},secretKey:{type:"string",id:8},fileLength:{type:"int32",id:9},action:{type:"string",id:10},params:{rule:"repeated",type:"KeyValue",id:11},duration:{type:"int32",id:12},size:{type:"Size",id:13},thumbnailRemotePath:{type:"string",id:14},thumbnailSecretKey:{type:"string",id:15},thumbnailDisplayName:{type:"string",id:16},thumbnailFileLength:{type:"int32",id:17},thumbnailSize:{type:"Size",id:18},customEvent:{type:"string",id:19},customExts:{rule:"repeated",type:"KeyValue",id:20},buildingName:{type:"string",id:21},subType:{type:"SubType",id:22},title:{type:"string",id:23},summary:{type:"string",id:24},combineLevel:{type:"int32",id:25}},nested:{Type:{values:{TEXT:0,IMAGE:1,VIDEO:2,LOCATION:3,VOICE:4,FILE:5,COMMAND:6,CUSTOM:7,COMBINE:8}},Size:{fields:{width:{type:"double",id:1},height:{type:"double",id:2}}},SubType:{values:{COMBINE:0}}}},Type:{values:{NORMAL:0,CHAT:1,GROUPCHAT:2,CHATROOM:3,READ_ACK:4,DELIVER_ACK:5,RECALL:6,CHANNEL_ACK:7,EDIT:8}},MessageConfig:{fields:{allowGroupAck:{type:"bool",id:1}}}}},KeyValue:{oneofs:{value:{oneof:["varintValue","floatValue","doubleValue","stringValue"]}},fields:{key:{type:"string",id:1},type:{type:"ValueType",id:2},varintValue:{type:"int64",id:3},floatValue:{type:"float",id:4},doubleValue:{type:"double",id:5},stringValue:{type:"string",id:6}},nested:{ValueType:{values:{BOOL:1,INT:2,UINT:3,LLINT:4,FLOAT:5,DOUBLE:6,STRING:7,JSON_STRING:8}}}},JID:{fields:{appKey:{type:"string",id:1},name:{type:"string",id:2},domain:{type:"string",id:3},clientResource:{type:"string",id:4}}},ConferenceBody:{fields:{sessionId:{type:"string",id:1},operation:{type:"Operation",id:2},conferenceId:{type:"string",id:3},type:{type:"Type",id:4},content:{type:"string",id:5},network:{type:"string",id:6},version:{type:"string",id:7},identity:{type:"Identity",id:8},duration:{type:"string",id:9},peerName:{type:"string",id:10},endReason:{type:"EndReason",id:11},status:{type:"Status",id:12},isDirect:{type:"bool",id:13},controlType:{type:"StreamControlType",id:14},routeFlag:{type:"int32",id:15},routeKey:{type:"string",id:16}},nested:{Status:{fields:{errorCode:{type:"int32",id:1}}},Operation:{values:{JOIN:0,INITIATE:1,ACCEPT_INITIATE:2,ANSWER:3,TERMINATE:4,REMOVE:5,STREAM_CONTROL:6,MEDIA_REQUEST:7}},Type:{values:{VOICE:0,VIDEO:1}},Identity:{values:{CALLER:0,CALLEE:1}},EndReason:{values:{HANGUP:0,NORESPONSE:1,REJECT:2,BUSY:3,FAIL:4,UNSUPPORTED:5,OFFLINE:6}},StreamControlType:{values:{PAUSE_VOICE:0,RESUME_VOICE:1,PAUSE_VIDEO:2,RESUME_VIDEO:3}}}},MSync:{fields:{version:{type:"Version",id:1,options:{default:"MSYNC_V1"}},guid:{type:"JID",id:2},auth:{type:"string",id:3},compressAlgorimth:{type:"uint32",id:4},crypto:{type:"uint32",id:5},userAgent:{type:"string",id:6},pov:{type:"uint64",id:7},command:{type:"Command",id:8},deviceId:{type:"uint32",id:10},encryptType:{rule:"repeated",type:"EncryptType",id:11,options:{packed:!1}},encryptKey:{type:"string",id:12},payload:{type:"bytes",id:9}},nested:{Version:{values:{MSYNC_V1:0,MSYNC_V2:1}},Command:{values:{SYNC:0,UNREAD:1,NOTICE:2,PROVISION:3}}}},EncryptType:{values:{ENCRYPT_NONE:0,ENCRYPT_AES_128_CBC:1,ENCRYPT_AES_256_CBC:2}},CommSyncUL:{fields:{meta:{type:"Meta",id:1},key:{type:"uint64",id:2},queue:{type:"JID",id:3},isRoam:{type:"bool",id:4},lastFullRoamKey:{type:"uint64",id:5}}},CommSyncDL:{fields:{status:{type:"Status",id:1},metaId:{type:"uint64",id:2},serverId:{type:"uint64",id:3},metas:{rule:"repeated",type:"Meta",id:4},nextKey:{type:"uint64",id:5},queue:{type:"JID",id:6},isLast:{type:"bool",id:7},timestamp:{type:"uint64",id:8},isRoam:{type:"bool",id:9}}},CommNotice:{fields:{queue:{type:"JID",id:1}}},CommUnreadUL:{fields:{}},CommUnreadDL:{fields:{status:{type:"Status",id:1},unread:{rule:"repeated",type:"MetaQueue",id:2},timestamp:{type:"uint64",id:3}}},MetaQueue:{fields:{queue:{type:"JID",id:1},n:{type:"uint32",id:2}}},Meta:{fields:{id:{type:"uint64",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},timestamp:{type:"uint64",id:4},ns:{type:"NameSpace",id:5},payload:{type:"bytes",id:6},routetype:{type:"RouteType",id:7},ext:{type:"KeyValue",id:8},meta:{type:"bytes",id:9},directedUsers:{rule:"repeated",type:"string",id:10}},nested:{NameSpace:{values:{STATISTIC:0,CHAT:1,MUC:2,ROSTER:3,CONFERENCE:4,NOTIFY:5,QUERY:6}},RouteType:{values:{ROUTE_ALL:0,ROUTE_ONLINE:1,ROUTE_DIRECT:2}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},reason:{type:"string",id:2},redirectInfo:{rule:"repeated",type:"RedirectInfo",id:3}},nested:{ErrorCode:{values:{OK:0,FAIL:1,UNAUTHORIZED:2,MISSING_PARAMETER:3,WRONG_PARAMETER:4,REDIRECT:5,TOKEN_EXPIRED:6,PERMISSION_DENIED:7,NO_ROUTE:8,UNKNOWN_COMMAND:9,PB_PARSER_ERROR:10,BIND_ANOTHER_DEVICE:11,IM_FORBIDDEN:12,TOO_MANY_DEVICES:13,PLATFORM_LIMIT:14,USER_MUTED:15,ENCRYPT_DISABLE:16,ENCRYPT_ENABLE:17,DECRYPT_FAILURE:18,PERMISSION_DENIED_EXTERNAL:19}}}},RedirectInfo:{fields:{host:{type:"string",id:1},port:{type:"uint32",id:2}}},Provision:{fields:{osType:{type:"OsType",id:1},version:{type:"string",id:2},networkType:{type:"NetworkType",id:3},appSign:{type:"string",id:4},compressType:{rule:"repeated",type:"CompressType",id:5,options:{packed:!1}},encryptType:{rule:"repeated",type:"EncryptType",id:6,options:{packed:!1}},encryptKey:{type:"string",id:7},status:{type:"Status",id:8},deviceUuid:{type:"string",id:9},isManualLogin:{type:"bool",id:10},password:{type:"string",id:11},deviceName:{type:"string",id:12},resource:{type:"string",id:13},auth:{type:"string",id:14},serviceId:{type:"string",id:16},actionVersion:{type:"string",id:17}},nested:{OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}},CompressType:{values:{COMPRESS_NONE:0,COMPRESS_ZLIB:1}}}},MUCBody:{fields:{mucId:{type:"JID",id:1},operation:{type:"Operation",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},setting:{type:"Setting",id:5},reason:{type:"string",id:6},isChatroom:{type:"bool",id:7},status:{type:"Status",id:8},isThread:{type:"bool",id:9},mucParentId:{type:"JID",id:10},mucName:{type:"string",id:11},eventInfo:{type:"EventInfo",id:12}},nested:{Operation:{values:{CREATE:0,DESTROY:1,JOIN:2,LEAVE:3,APPLY:4,APPLY_ACCEPT:5,APPLY_DECLINE:6,INVITE:7,INVITE_ACCEPT:8,INVITE_DECLINE:9,KICK:10,GET_BLACKLIST:11,BAN:12,ALLOW:13,UPDATE:14,BLOCK:15,UNBLOCK:16,PRESENCE:17,ABSENCE:18,DIRECT_JOINED:19,ASSIGN_OWNER:20,ADD_ADMIN:21,REMOVE_ADMIN:22,ADD_MUTE:23,REMOVE_MUTE:24,UPDATE_ANNOUNCEMENT:25,DELETE_ANNOUNCEMENT:26,UPLOAD_FILE:27,DELETE_FILE:28,ADD_USER_WHITE_LIST:29,REMOVE_USER_WHITE_LIST:30,BAN_GROUP:31,REMOVE_BAN_GROUP:32,THREAD_CREATE:33,THREAD_DESTROY:34,THREAD_JOIN:35,THREAD_LEAVE:36,THREAD_KICK:37,THREAD_UPDATE:38,THREAD_PRESENCE:39,THREAD_ABSENCE:40,DISABLE_GROUP:41,ABLE_GROUP:42,SET_METADATA:43,DELETE_METADATA:44,GROUP_MEMBER_METADATA_UPDATE:45}},Setting:{fields:{name:{type:"string",id:1},desc:{type:"string",id:2},type:{type:"Type",id:3},maxUsers:{type:"int32",id:4},owner:{type:"string",id:5}},nested:{Type:{values:{PRIVATE_OWNER_INVITE:0,PRIVATE_MEMBER_INVITE:1,PUBLIC_JOIN_APPROVAL:2,PUBLIC_JOIN_OPEN:3,PUBLIC_ANONYMOUS:4}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,PERMISSION_DENIED:1,WRONG_PARAMETER:2,MUC_NOT_EXIST:3,USER_NOT_EXIST:4,UNKNOWN:5}}}},EventInfo:{fields:{eventType:{type:"EventType",id:1,options:{default:"EVENT_NONE"}},ext:{type:"string",id:2}},nested:{EventType:{values:{EVENT_NONE:0,CIRCLE_CHANNEL:1}}}}}},RosterBody:{fields:{operation:{type:"Operation",id:1},status:{type:"Status",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},reason:{type:"string",id:5},rosterVer:{type:"string",id:6},biDirection:{type:"bool",id:7}},nested:{Operation:{values:{GET_ROSTER:0,GET_BLACKLIST:1,ADD:2,REMOVE:3,ACCEPT:4,DECLINE:5,BAN:6,ALLOW:7,REMOTE_ACCEPT:8,REMOTE_DECLINE:9}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,USER_NOT_EXIST:1,USER_ALREADY_FRIEND:2,USER_ALREADY_BLACKLIST:3}}}}}},StatisticsBody:{fields:{operation:{type:"Operation",id:1},os:{type:"OsType",id:2},version:{type:"string",id:3},network:{type:"NetworkType",id:4},imTime:{type:"uint32",id:5},chatTime:{type:"uint32",id:6},location:{type:"string",id:7}},nested:{Operation:{values:{INFORMATION:0,USER_REMOVED:1,USER_LOGIN_ANOTHER_DEVICE:2,USER_KICKED_BY_CHANGE_PASSWORD:3,USER_KICKED_BY_OTHER_DEVICE:4}},OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}}}}}}}}}});q.prototype.root=ie;var oe=u.kg.getLogger("defaultLogger");oe.setConfig({useCache:!1,maxCache:3145728,color:"",background:""}),oe.enableAll(),q.prototype._getSock=function(){if(this.isHttpDNS){var e=this.socketHost[this.hostIndex];if(!e)throw this.times=1,this.autoReconnectNumTotal=0,this.hostIndex=0,this.onClosed&&this.onClosed(),new Error("No connected domain name when get websocket.");var n=e.domain,r=e.ip,i="",o=e.port;i=n||r,o&&"80"!==o&&"443"!==o&&(i+=":"+o),i&&(this.url="//"+i+"/ws");var s=this.https?"https:":"http:";this.url=s+this.url}return new(t())(this.url)},q.prototype.getUniqueId=a.P6.getUniqueId;var se={connection:q,message:re.Message,utils:a.P6,logger:oe,statusCode:c.E};"undefined"!=typeof window&&(window.WebIM=se);var ae=se}(),__nested_webpack_exports__}()},module.exports=t()},1635:function(e,t,n){e.exports=function(){"use strict";function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i=function(e){try{return!!e()}catch(e){return!0}},o=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),s=o,a=Function.prototype,c=a.call,l=s&&a.bind.bind(c,c),u=s?l:function(e){return function(){return c.apply(e,arguments)}},d=u({}.isPrototypeOf),p=function(e){return e&&e.Math==Math&&e},h=p("object"==typeof globalThis&&globalThis)||p("object"==typeof window&&window)||p("object"==typeof self&&self)||p("object"==typeof t&&t)||function(){return this}()||t||Function("return this")(),f=o,m=Function.prototype,g=m.apply,v=m.call,y="object"==typeof Reflect&&Reflect.apply||(f?v.bind(g):function(){return v.apply(g,arguments)}),E=u,_=E({}.toString),b=E("".slice),S=function(e){return b(_(e),8,-1)},T=S,I=u,N=function(e){if("Function"===T(e))return I(e)},w="object"==typeof document&&document.all,C={all:w,IS_HTMLDDA:void 0===w&&void 0!==w},O=C.all,A=C.IS_HTMLDDA?function(e){return"function"==typeof e||e===O}:function(e){return"function"==typeof e},R={},M=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),D=o,k=Function.prototype.call,x=D?k.bind(k):function(){return k.apply(k,arguments)},L={},P={}.propertyIsEnumerable,j=Object.getOwnPropertyDescriptor,U=j&&!P.call({1:2},1);L.f=U?function(e){var t=j(this,e);return!!t&&t.enumerable}:P;var F,z,B=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},V=i,H=S,G=Object,W=u("".split),Y=V((function(){return!G("z").propertyIsEnumerable(0)}))?function(e){return"String"==H(e)?W(e,""):G(e)}:G,q=function(e){return null==e},K=q,Q=TypeError,J=function(e){if(K(e))throw Q("Can't call method on "+e);return e},X=Y,Z=J,$=function(e){return X(Z(e))},ee=A,te=C.all,ne=C.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:ee(e)||e===te}:function(e){return"object"==typeof e?null!==e:ee(e)},re={},ie=re,oe=h,se=A,ae=function(e){return se(e)?e:void 0},ce=function(e,t){return arguments.length<2?ae(ie[e])||ae(oe[e]):ie[e]&&ie[e][t]||oe[e]&&oe[e][t]},le="undefined"!=typeof navigator&&String(navigator.userAgent)||"",ue=h,de=le,pe=ue.process,he=ue.Deno,fe=pe&&pe.versions||he&&he.version,me=fe&&fe.v8;me&&(z=(F=me.split("."))[0]>0&&F[0]<4?1:+(F[0]+F[1])),!z&&de&&(!(F=de.match(/Edge\/(\d+)/))||F[1]>=74)&&(F=de.match(/Chrome\/(\d+)/))&&(z=+F[1]);var ge=z,ve=ge,ye=i,Ee=h.String,_e=!!Object.getOwnPropertySymbols&&!ye((function(){var e=Symbol();return!Ee(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ve&&ve<41})),be=_e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Se=ce,Te=A,Ie=d,Ne=Object,we=be?function(e){return"symbol"==typeof e}:function(e){var t=Se("Symbol");return Te(t)&&Ie(t.prototype,Ne(e))},Ce=String,Oe=function(e){try{return Ce(e)}catch(e){return"Object"}},Ae=A,Re=Oe,Me=TypeError,De=function(e){if(Ae(e))return e;throw Me(Re(e)+" is not a function")},ke=De,xe=q,Le=function(e,t){var n=e[t];return xe(n)?void 0:ke(n)},Pe=x,je=A,Ue=ne,Fe=TypeError,ze={exports:{}},Be=h,Ve=Object.defineProperty,He=function(e,t){try{Ve(Be,e,{value:t,configurable:!0,writable:!0})}catch(r){Be[e]=t}return t},Ge="__core-js_shared__",We=h[Ge]||He(Ge,{}),Ye=We;(ze.exports=function(e,t){return Ye[e]||(Ye[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var qe=ze.exports,Ke=J,Qe=Object,Je=function(e){return Qe(Ke(e))},Xe=Je,Ze=u({}.hasOwnProperty),$e=Object.hasOwn||function(e,t){return Ze(Xe(e),t)},et=u,tt=0,nt=Math.random(),rt=et(1..toString),it=function(e){return"Symbol("+(void 0===e?"":e)+")_"+rt(++tt+nt,36)},ot=qe,st=$e,at=it,ct=_e,lt=be,ut=h.Symbol,dt=ot("wks"),pt=lt?ut.for||ut:ut&&ut.withoutSetter||at,ht=function(e){return st(dt,e)||(dt[e]=ct&&st(ut,e)?ut[e]:pt("Symbol."+e)),dt[e]},ft=x,mt=ne,gt=we,vt=Le,yt=function(e,t){var n,r;if("string"===t&&je(n=e.toString)&&!Ue(r=Pe(n,e)))return r;if(je(n=e.valueOf)&&!Ue(r=Pe(n,e)))return r;if("string"!==t&&je(n=e.toString)&&!Ue(r=Pe(n,e)))return r;throw Fe("Can't convert object to primitive value")},Et=TypeError,_t=ht("toPrimitive"),bt=function(e,t){if(!mt(e)||gt(e))return e;var n,r=vt(e,_t);if(r){if(void 0===t&&(t="default"),n=ft(r,e,t),!mt(n)||gt(n))return n;throw Et("Can't convert object to primitive value")}return void 0===t&&(t="number"),yt(e,t)},St=we,Tt=function(e){var t=bt(e,"string");return St(t)?t:t+""},It=ne,Nt=h.document,wt=It(Nt)&&It(Nt.createElement),Ct=function(e){return wt?Nt.createElement(e):{}},Ot=Ct,At=!M&&!i((function(){return 7!=Object.defineProperty(Ot("div"),"a",{get:function(){return 7}}).a})),Rt=M,Mt=x,Dt=L,kt=B,xt=$,Lt=Tt,Pt=$e,jt=At,Ut=Object.getOwnPropertyDescriptor;R.f=Rt?Ut:function(e,t){if(e=xt(e),t=Lt(t),jt)try{return Ut(e,t)}catch(e){}if(Pt(e,t))return kt(!Mt(Dt.f,e,t),e[t])};var Ft=i,zt=A,Bt=/#|\.prototype\./,Vt=function(e,t){var n=Gt[Ht(e)];return n==Yt||n!=Wt&&(zt(t)?Ft(t):!!t)},Ht=Vt.normalize=function(e){return String(e).replace(Bt,".").toLowerCase()},Gt=Vt.data={},Wt=Vt.NATIVE="N",Yt=Vt.POLYFILL="P",qt=Vt,Kt=De,Qt=o,Jt=N(N.bind),Xt=function(e,t){return Kt(e),void 0===t?e:Qt?Jt(e,t):function(){return e.apply(t,arguments)}},Zt={},$t=M&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),en=ne,tn=String,nn=TypeError,rn=function(e){if(en(e))return e;throw nn(tn(e)+" is not an object")},on=M,sn=At,an=$t,cn=rn,ln=Tt,un=TypeError,dn=Object.defineProperty,pn=Object.getOwnPropertyDescriptor,hn="enumerable",fn="configurable",mn="writable";Zt.f=on?an?function(e,t,n){if(cn(e),t=ln(t),cn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&mn in n&&!n[mn]){var r=pn(e,t);r&&r[mn]&&(e[t]=n.value,n={configurable:fn in n?n[fn]:r[fn],enumerable:hn in n?n[hn]:r[hn],writable:!1})}return dn(e,t,n)}:dn:function(e,t,n){if(cn(e),t=ln(t),cn(n),sn)try{return dn(e,t,n)}catch(e){}if("get"in n||"set"in n)throw un("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var gn=Zt,vn=B,yn=M?function(e,t,n){return gn.f(e,t,vn(1,n))}:function(e,t,n){return e[t]=n,e},En=h,_n=y,bn=N,Sn=A,Tn=R.f,In=qt,Nn=re,wn=Xt,Cn=yn,On=$e,An=function(e){var t=function(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return _n(e,this,arguments)};return t.prototype=e.prototype,t},Rn=function(e,t){var n,r,i,o,s,a,c,l,u,d=e.target,p=e.global,h=e.stat,f=e.proto,m=p?En:h?En[d]:(En[d]||{}).prototype,g=p?Nn:Nn[d]||Cn(Nn,d,{})[d],v=g.prototype;for(o in t)r=!(n=In(p?o:d+(h?".":"#")+o,e.forced))&&m&&On(m,o),a=g[o],r&&(c=e.dontCallGetSet?(u=Tn(m,o))&&u.value:m[o]),s=r&&c?c:t[o],r&&typeof a==typeof s||(l=e.bind&&r?wn(s,En):e.wrap&&r?An(s):f&&Sn(s)?bn(s):s,(e.sham||s&&s.sham||a&&a.sham)&&Cn(l,"sham",!0),Cn(g,o,l),f&&(On(Nn,i=d+"Prototype")||Cn(Nn,i,{}),Cn(Nn[i],o,s),e.real&&v&&(n||!v[o])&&Cn(v,o,s)))},Mn=Math.ceil,Dn=Math.floor,kn=Math.trunc||function(e){var t=+e;return(t>0?Dn:Mn)(t)},xn=function(e){var t=+e;return t!=t||0===t?0:kn(t)},Ln=xn,Pn=Math.max,jn=Math.min,Un=function(e,t){var n=Ln(e);return n<0?Pn(n+t,0):jn(n,t)},Fn=xn,zn=Math.min,Bn=function(e){return e>0?zn(Fn(e),9007199254740991):0},Vn=function(e){return Bn(e.length)},Hn=$,Gn=Un,Wn=Vn,Yn=function(e){return function(t,n,r){var i,o=Hn(t),s=Wn(o),a=Gn(r,s);if(e&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},qn={includes:Yn(!0),indexOf:Yn(!1)},Kn=qn.includes;Rn({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(e){return Kn(this,e,arguments.length>1?arguments[1]:void 0)}});var Qn=re,Jn=function(e){return Qn[e+"Prototype"]},Xn=Jn("Array").includes,Zn=ne,$n=S,er=ht("match"),tr=function(e){var t;return Zn(e)&&(void 0!==(t=e[er])?!!t:"RegExp"==$n(e))},nr=TypeError,rr={};rr[ht("toStringTag")]="z";var ir="[object z]"===String(rr),or=ir,sr=A,ar=S,cr=ht("toStringTag"),lr=Object,ur="Arguments"==ar(function(){return arguments}()),dr=or?ar:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=lr(e),cr))?n:ur?ar(t):"Object"==(r=ar(t))&&sr(t.callee)?"Arguments":r},pr=dr,hr=String,fr=function(e){if("Symbol"===pr(e))throw TypeError("Cannot convert a Symbol value to a string");return hr(e)},mr=ht("match"),gr=Rn,vr=function(e){if(tr(e))throw nr("The method doesn't accept regular expressions");return e},yr=J,Er=fr,_r=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[mr]=!1,"/./"[e](t)}catch(e){}}return!1},br=u("".indexOf);gr({target:"String",proto:!0,forced:!_r("includes")},{includes:function(e){return!!~br(Er(yr(this)),Er(vr(e)),arguments.length>1?arguments[1]:void 0)}});var Sr=Jn("String").includes,Tr=d,Ir=Xn,Nr=Sr,wr=Array.prototype,Cr=String.prototype,Or=r((function(e){var t=e.includes;return e===wr||Tr(wr,e)&&t===wr.includes?Ir:"string"==typeof e||e===Cr||Tr(Cr,e)&&t===Cr.includes?Nr:t}));let Ar=!0,Rr=!0;function Mr(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Dr(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function kr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Ar=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function xr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Rr=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Lr(){if("object"==typeof window){if(Ar)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Pr(e,t){Rr&&console.warn(e+" is deprecated, please use "+t+" instead.")}function jr(e){return"[object Object]"===Object.prototype.toString.call(e)}function Ur(e){return jr(e)?Object.keys(e).reduce((function(t,n){const r=jr(e[n]),i=r?Ur(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function Fr(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?Fr(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{Fr(e,e.get(t),n)}))})))}function zr(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&Fr(e,n,i)}))})),i}const Br=Lr;function Vr(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let s=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!s&&n.length&&t.includes("back")&&(s=n[n.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=r(e.video),Br("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return Br("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function Hr(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Gr(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Dr(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Wr(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Yr(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])})).then(n,r)}}function qr(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>zr(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Dr(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>zr(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Kr(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function Qr(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Kr(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Jr(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function Xr(e,t){Dr(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var Zr=Object.freeze({__proto__:null,fixNegotiationNeeded:Xr,shimAddTrackRemoveTrack:Qr,shimAddTrackRemoveTrackWithNative:Kr,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:Wr,shimGetStats:Yr,shimGetUserMedia:Vr,shimMediaStream:Hr,shimOnTrack:Gr,shimPeerConnection:Jr,shimSenderReceiverGetStats:qr});function $r(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){Pr("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function ei(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ti(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}function ni(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ri(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Dr(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ii(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){Pr("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function oi(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function si(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function ai(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function ci(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function li(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var ui=Object.freeze({__proto__:null,shimAddTransceiver:si,shimCreateAnswer:li,shimCreateOffer:ci,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:ai,shimGetUserMedia:$r,shimOnTrack:ei,shimPeerConnection:ti,shimRTCDataChannel:oi,shimReceiverGetStats:ri,shimRemoveStream:ii,shimSenderGetStats:ni});function di(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function pi(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function hi(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}function fi(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(mi(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function mi(e){return e&&void 0!==e.video?Object.assign({},e,{video:Ur(e.video)}):e}function gi(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(Pr("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function vi(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function yi(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Ei(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var _i=Object.freeze({__proto__:null,shimAudioContext:Ei,shimCallbacksAPI:hi,shimConstraints:mi,shimCreateOfferLegacy:yi,shimGetUserMedia:fi,shimLocalStreamsAPI:di,shimRTCIceServerUrls:gi,shimRemoteStreamsAPI:pi,shimTrackEventTransceiver:vi}),bi={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let o=3;o<r.length;o++){const i=r[o],s=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){const r=t.parseRtpMap(s),o=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(r.parameters=o.length?t.parseFmtp(o[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{i.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=s.length>0&&s[0].ssrc;let c;const l=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));l.length>0&&l[0].length>1&&l[0][0]===a&&(c=l[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substring(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=u}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){const e=s[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const o=void 0!==n?n:2;return i=e||t.generateSessionId(),"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t}(bi);var Si=bi.exports,Ti=r(Si),Ii=e({__proto__:null,default:Ti},[Si]);function Ni(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=Ti.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Dr(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function wi(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Dr(e,"icecandidate",(e=>{if(e.candidate){const t=Ti.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function Ci(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=Ti.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Ti.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=Ti.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=i(e),n=o(arguments[0],e);let s;s=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const a={};Object.defineProperty(a,"maxMessageSize",{get:()=>s}),this._sctp=a}return s.apply(this,arguments)}}function Oi(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Dr(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Ai(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function Ri(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function Mi(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Di(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}return e.sdp||"offer"!==e.type&&"answer"!==e.type?n.apply(this,[e]):("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}var ki=Object.freeze({__proto__:null,removeExtmapAllowMixed:Ri,shimAddIceCandidateNullOrEmpty:Mi,shimConnectionState:Ai,shimMaxMessageSize:Ci,shimParameterlessSetLocalDescription:Di,shimRTCIceCandidate:Ni,shimRTCIceCandidateRelayProtocol:wi,shimSendThrowTypeError:Oi});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=Lr,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Mr(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Mr(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Mr(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:ki,extractVersion:Mr,disableLog:kr,disableWarnings:xr,sdp:Ii};switch(r.browser){case"chrome":if(!Zr||!Jr||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Zr,Mi(e,r),Di(e),Vr(e,r),Hr(e),Jr(e,r),Gr(e),Qr(e,r),Wr(e),Yr(e),qr(e),Xr(e,r),Ni(e),wi(e),Ai(e),Ci(e,r),Oi(e),Ri(e,r);break;case"firefox":if(!ui||!ti||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=ui,Mi(e,r),Di(e),$r(e,r),ti(e,r),ei(e),ii(e),ni(e),ri(e),oi(e),si(e),ai(e),ci(e),li(e),Ni(e),Ai(e),Ci(e,r),Oi(e);break;case"safari":if(!_i||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=_i,Mi(e,r),Di(e),gi(e),yi(e),hi(e),di(e),pi(e),vi(e),fi(e),Ei(e),Ni(e),wi(e),Ci(e,r),Oi(e),Ri(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var xi={exports:{}},Li=Rn,Pi=M,ji=Zt.f;Li({target:"Object",stat:!0,forced:Object.defineProperty!==ji,sham:!Pi},{defineProperty:ji});var Ui=re.Object,Fi=xi.exports=function(e,t,n){return Ui.defineProperty(e,t,n)};Ui.defineProperty.sham&&(Fi.sham=!0);var zi=r(xi.exports),Bi=S,Vi=Array.isArray||function(e){return"Array"==Bi(e)},Hi=TypeError,Gi=Tt,Wi=Zt,Yi=B,qi=function(e,t,n){var r=Gi(t);r in e?Wi.f(e,r,Yi(0,n)):e[r]=n},Ki=A,Qi=We,Ji=u(Function.toString);Ki(Qi.inspectSource)||(Qi.inspectSource=function(e){return Ji(e)});var Xi=Qi.inspectSource,Zi=u,$i=i,eo=A,to=dr,no=Xi,ro=function(){},io=[],oo=ce("Reflect","construct"),so=/^\s*(?:class|function)\b/,ao=Zi(so.exec),co=!so.exec(ro),lo=function(e){if(!eo(e))return!1;try{return oo(ro,io,e),!0}catch(e){return!1}},uo=function(e){if(!eo(e))return!1;switch(to(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return co||!!ao(so,no(e))}catch(e){return!0}};uo.sham=!0;var po=!oo||$i((function(){var e;return lo(lo.call)||!lo(Object)||!lo((function(){e=!0}))||e}))?uo:lo,ho=Vi,fo=po,mo=ne,go=ht("species"),vo=Array,yo=function(e){var t;return ho(e)&&(t=e.constructor,(fo(t)&&(t===vo||ho(t.prototype))||mo(t)&&null===(t=t[go]))&&(t=void 0)),void 0===t?vo:t},Eo=function(e,t){return new(yo(e))(0===t?0:t)},_o=i,bo=ge,So=ht("species"),To=Rn,Io=i,No=Vi,wo=ne,Co=Je,Oo=Vn,Ao=function(e){if(e>9007199254740991)throw Hi("Maximum allowed index exceeded");return e},Ro=qi,Mo=Eo,Do=function(e){return bo>=51||!_o((function(){var t=[];return(t.constructor={})[So]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},ko=ge,xo=ht("isConcatSpreadable"),Lo=ko>=51||!Io((function(){var e=[];return e[xo]=!1,e.concat()[0]!==e})),Po=function(e){if(!wo(e))return!1;var t=e[xo];return void 0!==t?!!t:No(e)};To({target:"Array",proto:!0,arity:1,forced:!Lo||!Do("concat")},{concat:function(e){var t,n,r,i,o,s=Co(this),a=Mo(s,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(Po(o=-1===t?s:arguments[t]))for(i=Oo(o),Ao(c+i),n=0;n<i;n++,c++)n in o&&Ro(a,c,o[n]);else Ao(c+1),Ro(a,c++,o);return a.length=c,a}});var jo={},Uo={},Fo=$e,zo=$,Bo=qn.indexOf,Vo=Uo,Ho=u([].push),Go=function(e,t){var n,r=zo(e),i=0,o=[];for(n in r)!Fo(Vo,n)&&Fo(r,n)&&Ho(o,n);for(;t.length>i;)Fo(r,n=t[i++])&&(~Bo(o,n)||Ho(o,n));return o},Wo=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Yo=Go,qo=Wo,Ko=Object.keys||function(e){return Yo(e,qo)},Qo=M,Jo=$t,Xo=Zt,Zo=rn,$o=$,es=Ko;jo.f=Qo&&!Jo?Object.defineProperties:function(e,t){Zo(e);for(var n,r=$o(t),i=es(t),o=i.length,s=0;o>s;)Xo.f(e,n=i[s++],r[n]);return e};var ts,ns=ce("document","documentElement"),rs=it,is=qe("keys"),os=function(e){return is[e]||(is[e]=rs(e))},ss=rn,as=jo,cs=Wo,ls=Uo,us=ns,ds=Ct,ps="prototype",hs="script",fs=os("IE_PROTO"),ms=function(){},gs=function(e){return"<"+hs+">"+e+"</"+hs+">"},vs=function(e){e.write(gs("")),e.close();var t=e.parentWindow.Object;return e=null,t},ys=function(){try{ts=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;ys="undefined"!=typeof document?document.domain&&ts?vs(ts):(t=ds("iframe"),n="java"+hs+":",t.style.display="none",us.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(gs("document.F=Object")),e.close(),e.F):vs(ts);for(var r=cs.length;r--;)delete ys[ps][cs[r]];return ys()};ls[fs]=!0;var Es=Object.create||function(e,t){var n;return null!==e?(ms[ps]=ss(e),n=new ms,ms[ps]=null,n[fs]=e):n=ys(),void 0===t?n:as.f(n,t)},_s={},bs=Go,Ss=Wo.concat("length","prototype");_s.f=Object.getOwnPropertyNames||function(e){return bs(e,Ss)};var Ts={},Is=Un,Ns=Vn,ws=qi,Cs=Array,Os=Math.max,As=function(e,t,n){for(var r=Ns(e),i=Is(t,r),o=Is(void 0===n?r:n,r),s=Cs(Os(o-i,0)),a=0;i<o;i++,a++)ws(s,a,e[i]);return s.length=a,s},Rs=S,Ms=$,Ds=_s.f,ks=As,xs="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Ts.f=function(e){return xs&&"Window"==Rs(e)?function(e){try{return Ds(e)}catch(e){return ks(xs)}}(e):Ds(Ms(e))};var Ls={};Ls.f=Object.getOwnPropertySymbols;var Ps=yn,js=function(e,t,n,r){return r&&r.enumerable?e[t]=n:Ps(e,t,n),e},Us=Zt,Fs=function(e,t,n){return Us.f(e,t,n)},zs={},Bs=ht;zs.f=Bs;var Vs,Hs,Gs,Ws=re,Ys=$e,qs=zs,Ks=Zt.f,Qs=function(e){var t=Ws.Symbol||(Ws.Symbol={});Ys(t,e)||Ks(t,e,{value:qs.f(e)})},Js=x,Xs=ce,Zs=ht,$s=js,ea=function(){var e=Xs("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=Zs("toPrimitive");t&&!t[r]&&$s(t,r,(function(e){return Js(n,this)}),{arity:1})},ta=dr,na=ir?{}.toString:function(){return"[object "+ta(this)+"]"},ra=ir,ia=Zt.f,oa=yn,sa=$e,aa=na,ca=ht("toStringTag"),la=function(e,t,n,r){if(e){var i=n?e:e.prototype;sa(i,ca)||ia(i,ca,{configurable:!0,value:t}),r&&!ra&&oa(i,"toString",aa)}},ua=A,da=h.WeakMap,pa=ua(da)&&/native code/.test(String(da)),ha=h,fa=ne,ma=yn,ga=$e,va=We,ya=os,Ea=Uo,_a="Object already initialized",ba=ha.TypeError,Sa=ha.WeakMap;if(pa||va.state){var Ta=va.state||(va.state=new Sa);Ta.get=Ta.get,Ta.has=Ta.has,Ta.set=Ta.set,Vs=function(e,t){if(Ta.has(e))throw ba(_a);return t.facade=e,Ta.set(e,t),t},Hs=function(e){return Ta.get(e)||{}},Gs=function(e){return Ta.has(e)}}else{var Ia=ya("state");Ea[Ia]=!0,Vs=function(e,t){if(ga(e,Ia))throw ba(_a);return t.facade=e,ma(e,Ia,t),t},Hs=function(e){return ga(e,Ia)?e[Ia]:{}},Gs=function(e){return ga(e,Ia)}}var Na={set:Vs,get:Hs,has:Gs,enforce:function(e){return Gs(e)?Hs(e):Vs(e,{})},getterFor:function(e){return function(t){var n;if(!fa(t)||(n=Hs(t)).type!==e)throw ba("Incompatible receiver, "+e+" required");return n}}},wa=Xt,Ca=Y,Oa=Je,Aa=Vn,Ra=Eo,Ma=u([].push),Da=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,l,u,d){for(var p,h,f=Oa(c),m=Ca(f),g=wa(l,u),v=Aa(m),y=0,E=d||Ra,_=t?E(c,v):n||s?E(c,0):void 0;v>y;y++)if((a||y in m)&&(h=g(p=m[y],y,f),e))if(t)_[y]=h;else if(h)switch(e){case 3:return!0;case 5:return p;case 6:return y;case 2:Ma(_,p)}else switch(e){case 4:return!1;case 7:Ma(_,p)}return o?-1:r||i?i:_}},ka={forEach:Da(0),map:Da(1),filter:Da(2),some:Da(3),every:Da(4),find:Da(5),findIndex:Da(6),filterReject:Da(7)},xa=Rn,La=h,Pa=x,ja=u,Ua=M,Fa=_e,za=i,Ba=$e,Va=d,Ha=rn,Ga=$,Wa=Tt,Ya=fr,qa=B,Ka=Es,Qa=Ko,Ja=_s,Xa=Ts,Za=Ls,$a=R,ec=Zt,tc=jo,nc=L,rc=js,ic=Fs,oc=qe,sc=Uo,ac=it,cc=ht,lc=zs,uc=Qs,dc=ea,pc=la,hc=Na,fc=ka.forEach,mc=os("hidden"),gc="Symbol",vc="prototype",yc=hc.set,Ec=hc.getterFor(gc),_c=Object[vc],bc=La.Symbol,Sc=bc&&bc[vc],Tc=La.TypeError,Ic=La.QObject,Nc=$a.f,wc=ec.f,Cc=Xa.f,Oc=nc.f,Ac=ja([].push),Rc=oc("symbols"),Mc=oc("op-symbols"),Dc=oc("wks"),kc=!Ic||!Ic[vc]||!Ic[vc].findChild,xc=Ua&&za((function(){return 7!=Ka(wc({},"a",{get:function(){return wc(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Nc(_c,t);r&&delete _c[t],wc(e,t,n),r&&e!==_c&&wc(_c,t,r)}:wc,Lc=function(e,t){var n=Rc[e]=Ka(Sc);return yc(n,{type:gc,tag:e,description:t}),Ua||(n.description=t),n},Pc=function(e,t,n){e===_c&&Pc(Mc,t,n),Ha(e);var r=Wa(t);return Ha(n),Ba(Rc,r)?(n.enumerable?(Ba(e,mc)&&e[mc][r]&&(e[mc][r]=!1),n=Ka(n,{enumerable:qa(0,!1)})):(Ba(e,mc)||wc(e,mc,qa(1,{})),e[mc][r]=!0),xc(e,r,n)):wc(e,r,n)},jc=function(e,t){Ha(e);var n=Ga(t),r=Qa(n).concat(Bc(n));return fc(r,(function(t){Ua&&!Pa(Uc,n,t)||Pc(e,t,n[t])})),e},Uc=function(e){var t=Wa(e),n=Pa(Oc,this,t);return!(this===_c&&Ba(Rc,t)&&!Ba(Mc,t))&&(!(n||!Ba(this,t)||!Ba(Rc,t)||Ba(this,mc)&&this[mc][t])||n)},Fc=function(e,t){var n=Ga(e),r=Wa(t);if(n!==_c||!Ba(Rc,r)||Ba(Mc,r)){var i=Nc(n,r);return!i||!Ba(Rc,r)||Ba(n,mc)&&n[mc][r]||(i.enumerable=!0),i}},zc=function(e){var t=Cc(Ga(e)),n=[];return fc(t,(function(e){Ba(Rc,e)||Ba(sc,e)||Ac(n,e)})),n},Bc=function(e){var t=e===_c,n=Cc(t?Mc:Ga(e)),r=[];return fc(n,(function(e){!Ba(Rc,e)||t&&!Ba(_c,e)||Ac(r,Rc[e])})),r};Fa||(bc=function(){if(Va(Sc,this))throw Tc("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?Ya(arguments[0]):void 0,t=ac(e),n=function(e){this===_c&&Pa(n,Mc,e),Ba(this,mc)&&Ba(this[mc],t)&&(this[mc][t]=!1),xc(this,t,qa(1,e))};return Ua&&kc&&xc(_c,t,{configurable:!0,set:n}),Lc(t,e)},rc(Sc=bc[vc],"toString",(function(){return Ec(this).tag})),rc(bc,"withoutSetter",(function(e){return Lc(ac(e),e)})),nc.f=Uc,ec.f=Pc,tc.f=jc,$a.f=Fc,Ja.f=Xa.f=zc,Za.f=Bc,lc.f=function(e){return Lc(cc(e),e)},Ua&&ic(Sc,"description",{configurable:!0,get:function(){return Ec(this).description}})),xa({global:!0,constructor:!0,wrap:!0,forced:!Fa,sham:!Fa},{Symbol:bc}),fc(Qa(Dc),(function(e){uc(e)})),xa({target:gc,stat:!0,forced:!Fa},{useSetter:function(){kc=!0},useSimple:function(){kc=!1}}),xa({target:"Object",stat:!0,forced:!Fa,sham:!Ua},{create:function(e,t){return void 0===t?Ka(e):jc(Ka(e),t)},defineProperty:Pc,defineProperties:jc,getOwnPropertyDescriptor:Fc}),xa({target:"Object",stat:!0,forced:!Fa},{getOwnPropertyNames:zc}),dc(),pc(bc,gc),sc[mc]=!0;var Vc=_e&&!!Symbol.for&&!!Symbol.keyFor,Hc=Rn,Gc=ce,Wc=$e,Yc=fr,qc=qe,Kc=Vc,Qc=qc("string-to-symbol-registry"),Jc=qc("symbol-to-string-registry");Hc({target:"Symbol",stat:!0,forced:!Kc},{for:function(e){var t=Yc(e);if(Wc(Qc,t))return Qc[t];var n=Gc("Symbol")(t);return Qc[t]=n,Jc[n]=t,n}});var Xc=Rn,Zc=$e,$c=we,el=Oe,tl=Vc,nl=qe("symbol-to-string-registry");Xc({target:"Symbol",stat:!0,forced:!tl},{keyFor:function(e){if(!$c(e))throw TypeError(el(e)+" is not a symbol");if(Zc(nl,e))return nl[e]}});var rl=u([].slice),il=Vi,ol=A,sl=S,al=fr,cl=u([].push),ll=Rn,ul=ce,dl=y,pl=x,hl=u,fl=i,ml=A,gl=we,vl=rl,yl=function(e){if(ol(e))return e;if(il(e)){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];"string"==typeof i?cl(n,i):"number"!=typeof i&&"Number"!=sl(i)&&"String"!=sl(i)||cl(n,al(i))}var o=n.length,s=!0;return function(e,t){if(s)return s=!1,t;if(il(this))return t;for(var r=0;r<o;r++)if(n[r]===e)return t}}},El=_e,_l=String,bl=ul("JSON","stringify"),Sl=hl(/./.exec),Tl=hl("".charAt),Il=hl("".charCodeAt),Nl=hl("".replace),wl=hl(1..toString),Cl=/[\uD800-\uDFFF]/g,Ol=/^[\uD800-\uDBFF]$/,Al=/^[\uDC00-\uDFFF]$/,Rl=!El||fl((function(){var e=ul("Symbol")();return"[null]"!=bl([e])||"{}"!=bl({a:e})||"{}"!=bl(Object(e))})),Ml=fl((function(){return'"\\udf06\\ud834"'!==bl("\udf06\ud834")||'"\\udead"'!==bl("\udead")})),Dl=function(e,t){var n=vl(arguments),r=yl(t);if(ml(r)||void 0!==e&&!gl(e))return n[1]=function(e,t){if(ml(r)&&(t=pl(r,this,_l(e),t)),!gl(t))return t},dl(bl,null,n)},kl=function(e,t,n){var r=Tl(n,t-1),i=Tl(n,t+1);return Sl(Ol,e)&&!Sl(Al,i)||Sl(Al,e)&&!Sl(Ol,r)?"\\u"+wl(Il(e,0),16):e};bl&&ll({target:"JSON",stat:!0,arity:3,forced:Rl||Ml},{stringify:function(e,t,n){var r=vl(arguments),i=dl(Rl?Dl:bl,null,r);return Ml&&"string"==typeof i?Nl(i,Cl,kl):i}});var xl=Ls,Ll=Je;Rn({target:"Object",stat:!0,forced:!_e||i((function(){xl.f(1)}))},{getOwnPropertySymbols:function(e){var t=xl.f;return t?t(Ll(e)):[]}}),Qs("asyncIterator"),Qs("hasInstance"),Qs("isConcatSpreadable"),Qs("iterator"),Qs("match"),Qs("matchAll"),Qs("replace"),Qs("search"),Qs("species"),Qs("split");var Pl=ea;Qs("toPrimitive"),Pl();var jl=ce,Ul=la;Qs("toStringTag"),Ul(jl("Symbol"),"Symbol"),Qs("unscopables"),la(h.JSON,"JSON",!0);var Fl,zl,Bl,Vl=re.Symbol,Hl={},Gl=M,Wl=$e,Yl=Function.prototype,ql=Gl&&Object.getOwnPropertyDescriptor,Kl=Wl(Yl,"name"),Ql={EXISTS:Kl,PROPER:Kl&&"something"===function(){}.name,CONFIGURABLE:Kl&&(!Gl||Gl&&ql(Yl,"name").configurable)},Jl=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Xl=$e,Zl=A,$l=Je,eu=Jl,tu=os("IE_PROTO"),nu=Object,ru=nu.prototype,iu=eu?nu.getPrototypeOf:function(e){var t=$l(e);if(Xl(t,tu))return t[tu];var n=t.constructor;return Zl(n)&&t instanceof n?n.prototype:t instanceof nu?ru:null},ou=i,su=A,au=ne,cu=Es,lu=iu,uu=js,du=ht("iterator"),pu=!1;[].keys&&("next"in(Bl=[].keys())?(zl=lu(lu(Bl)))!==Object.prototype&&(Fl=zl):pu=!0);var hu=!au(Fl)||ou((function(){var e={};return Fl[du].call(e)!==e}));su((Fl=hu?{}:cu(Fl))[du])||uu(Fl,du,(function(){return this}));var fu={IteratorPrototype:Fl,BUGGY_SAFARI_ITERATORS:pu},mu=fu.IteratorPrototype,gu=Es,vu=B,yu=la,Eu=Hl,_u=function(){return this},bu=function(e,t,n,r){var i=t+" Iterator";return e.prototype=gu(mu,{next:vu(+!r,n)}),yu(e,i,!1,!0),Eu[i]=_u,e},Su=u,Tu=De,Iu=A,Nu=String,wu=TypeError,Cu=function(e,t,n){try{return Su(Tu(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}},Ou=rn,Au=function(e){if("object"==typeof e||Iu(e))return e;throw wu("Can't set "+Nu(e)+" as a prototype")},Ru=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Cu(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Ou(n),Au(r),t?e(n,r):n.__proto__=r,n}}():void 0),Mu=Rn,Du=x,ku=bu,xu=iu,Lu=la,Pu=js,ju=Hl,Uu=fu,Fu=Ql.PROPER,zu=Uu.BUGGY_SAFARI_ITERATORS,Bu=ht("iterator"),Vu="keys",Hu="values",Gu="entries",Wu=function(){return this},Yu=function(e,t,n,r,i,o,s){ku(n,t,r);var a,c,l,u=function(e){if(e===i&&m)return m;if(!zu&&e in h)return h[e];switch(e){case Vu:case Hu:case Gu:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",p=!1,h=e.prototype,f=h[Bu]||h["@@iterator"]||i&&h[i],m=!zu&&f||u(i),g="Array"==t&&h.entries||f;if(g&&(a=xu(g.call(new e)))!==Object.prototype&&a.next&&(Lu(a,d,!0,!0),ju[d]=Wu),Fu&&i==Hu&&f&&f.name!==Hu&&(p=!0,m=function(){return Du(f,this)}),i)if(c={values:u(Hu),keys:o?m:u(Vu),entries:u(Gu)},s)for(l in c)(zu||p||!(l in h))&&Pu(h,l,c[l]);else Mu({target:t,proto:!0,forced:zu||p},c);return s&&h[Bu]!==m&&Pu(h,Bu,m,{name:i}),ju[t]=m,c},qu=function(e,t){return{value:e,done:t}},Ku=$,Qu=Hl,Ju=Na;Zt.f;var Xu=Yu,Zu=qu,$u="Array Iterator",ed=Ju.set,td=Ju.getterFor($u);Xu(Array,"Array",(function(e,t){ed(this,{type:$u,target:Ku(e),index:0,kind:t})}),(function(){var e=td(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,Zu(void 0,!0)):Zu("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),Qu.Arguments=Qu.Array;var nd={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},rd=h,id=dr,od=yn,sd=Hl,ad=ht("toStringTag");for(var cd in nd){var ld=rd[cd],ud=ld&&ld.prototype;ud&&id(ud)!==ad&&od(ud,ad,cd),sd[cd]=sd.Array}var dd=Vl,pd=ht,hd=Zt.f,fd=pd("metadata"),md=Function.prototype;void 0===md[fd]&&hd(md,fd,{value:null}),Qs("dispose"),Qs("metadata");var gd=dd;Qs("asyncDispose");var vd=u,yd=ce("Symbol"),Ed=yd.keyFor,_d=vd(yd.prototype.valueOf),bd=yd.isRegisteredSymbol||function(e){try{return void 0!==Ed(_d(e))}catch(e){return!1}};Rn({target:"Symbol",stat:!0},{isRegisteredSymbol:bd});for(var Sd=qe,Td=ce,Id=u,Nd=we,wd=ht,Cd=Td("Symbol"),Od=Cd.isWellKnownSymbol,Ad=Td("Object","getOwnPropertyNames"),Rd=Id(Cd.prototype.valueOf),Md=Sd("wks"),Dd=0,kd=Ad(Cd),xd=kd.length;Dd<xd;Dd++)try{var Ld=kd[Dd];Nd(Cd[Ld])&&wd(Ld)}catch(e){}var Pd=function(e){if(Od&&Od(e))return!0;try{for(var t=Rd(e),n=0,r=Ad(Md),i=r.length;n<i;n++)if(Md[r[n]]==t)return!0}catch(e){}return!1};Rn({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Pd}),Qs("matcher"),Qs("observable"),Rn({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:bd}),Rn({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Pd}),Qs("metadataKey"),Qs("patternMatch"),Qs("replaceAll");var jd=r(gd),Ud=u,Fd=xn,zd=fr,Bd=J,Vd=Ud("".charAt),Hd=Ud("".charCodeAt),Gd=Ud("".slice),Wd=function(e){return function(t,n){var r,i,o=zd(Bd(t)),s=Fd(n),a=o.length;return s<0||s>=a?e?"":void 0:(r=Hd(o,s))<55296||r>56319||s+1===a||(i=Hd(o,s+1))<56320||i>57343?e?Vd(o,s):r:e?Gd(o,s,s+2):i-56320+(r-55296<<10)+65536}},Yd={codeAt:Wd(!1),charAt:Wd(!0)},qd=Yd.charAt,Kd=fr,Qd=Na,Jd=Yu,Xd=qu,Zd="String Iterator",$d=Qd.set,ep=Qd.getterFor(Zd);Jd(String,"String",(function(e){$d(this,{type:Zd,string:Kd(e),index:0})}),(function(){var e,t=ep(this),n=t.string,r=t.index;return r>=n.length?Xd(void 0,!0):(e=qd(n,r),t.index+=e.length,Xd(e,!1))}));var tp=r(zs.f("iterator"));function np(e){return np="function"==typeof jd&&"symbol"==typeof tp?function(e){return typeof e}:function(e){return e&&"function"==typeof jd&&e.constructor===jd&&e!==jd.prototype?"symbol":typeof e},np(e)}var rp=r(zs.f("toPrimitive"));function ip(e){var t=function(e,t){if("object"!==np(e)||null===e)return e;var n=e[rp];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==np(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===np(t)?t:String(t)}function op(e,t,n){return(t=ip(t))in e?zi(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sp=Jn("Array").keys,ap=dr,cp=$e,lp=d,up=sp,dp=Array.prototype,pp={DOMTokenList:!0,NodeList:!0},hp=r((function(e){var t=e.keys;return e===dp||lp(dp,e)&&t===dp.keys||cp(pp,ap(e))?up:t})),fp=Oe,mp=TypeError,gp=As,vp=Math.floor,yp=function(e,t){var n=e.length,r=vp(n/2);return n<8?Ep(e,t):_p(e,yp(gp(e,0,r),t),yp(gp(e,r),t),t)},Ep=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},_p=function(e,t,n,r){for(var i=t.length,o=n.length,s=0,a=0;s<i||a<o;)e[s+a]=s<i&&a<o?r(t[s],n[a])<=0?t[s++]:n[a++]:s<i?t[s++]:n[a++];return e},bp=yp,Sp=i,Tp=function(e,t){var n=[][e];return!!n&&Sp((function(){n.call(null,t||function(){return 1},1)}))},Ip=le.match(/firefox\/(\d+)/i),Np=!!Ip&&+Ip[1],wp=/MSIE|Trident/.test(le),Cp=le.match(/AppleWebKit\/(\d+)\./),Op=!!Cp&&+Cp[1],Ap=Rn,Rp=u,Mp=De,Dp=Je,kp=Vn,xp=function(e,t){if(!delete e[t])throw mp("Cannot delete property "+fp(t)+" of "+fp(e))},Lp=fr,Pp=i,jp=bp,Up=Tp,Fp=Np,zp=wp,Bp=ge,Vp=Op,Hp=[],Gp=Rp(Hp.sort),Wp=Rp(Hp.push),Yp=Pp((function(){Hp.sort(void 0)})),qp=Pp((function(){Hp.sort(null)})),Kp=Up("sort"),Qp=!Pp((function(){if(Bp)return Bp<70;if(!(Fp&&Fp>3)){if(zp)return!0;if(Vp)return Vp<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Hp.push({k:t+r,v:n})}for(Hp.sort((function(e,t){return t.v-e.v})),r=0;r<Hp.length;r++)t=Hp[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));Ap({target:"Array",proto:!0,forced:Yp||!qp||!Kp||!Qp},{sort:function(e){void 0!==e&&Mp(e);var t=Dp(this);if(Qp)return void 0===e?Gp(t):Gp(t,e);var n,r,i=[],o=kp(t);for(r=0;r<o;r++)r in t&&Wp(i,t[r]);for(jp(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Lp(t)>Lp(n)?1:-1}}(e)),n=kp(i),r=0;r<n;)t[r]=i[r++];for(;r<o;)xp(t,r++);return t}});var Jp=Jn("Array").sort,Xp=d,Zp=Jp,$p=Array.prototype,eh=r((function(e){var t=e.sort;return e===$p||Xp($p,e)&&t===$p.sort?Zp:t})),th=ce,nh=_s,rh=Ls,ih=rn,oh=u([].concat),sh=th("Reflect","ownKeys")||function(e){var t=nh.f(ih(e)),n=rh.f;return n?oh(t,n(e)):t},ah=$e,ch=sh,lh=R,uh=Zt,dh=ne,ph=yn,hh=Error,fh=u("".replace),mh=String(hh("zxcasd").stack),gh=/\n\s*at [^:]*:[^\n]*/,vh=gh.test(mh),yh=B,Eh=!i((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",yh(1,7)),7!==e.stack)})),_h=yn,bh=function(e,t){if(vh&&"string"==typeof e&&!hh.prepareStackTrace)for(;t--;)e=fh(e,gh,"");return e},Sh=Eh,Th=Error.captureStackTrace,Ih=Hl,Nh=ht("iterator"),wh=Array.prototype,Ch=function(e){return void 0!==e&&(Ih.Array===e||wh[Nh]===e)},Oh=dr,Ah=Le,Rh=q,Mh=Hl,Dh=ht("iterator"),kh=function(e){if(!Rh(e))return Ah(e,Dh)||Ah(e,"@@iterator")||Mh[Oh(e)]},xh=x,Lh=De,Ph=rn,jh=Oe,Uh=kh,Fh=TypeError,zh=function(e,t){var n=arguments.length<2?Uh(e):t;if(Lh(n))return Ph(xh(n,e));throw Fh(jh(e)+" is not iterable")},Bh=x,Vh=rn,Hh=Le,Gh=function(e,t,n){var r,i;Vh(e);try{if(!(r=Hh(e,"return"))){if("throw"===t)throw n;return n}r=Bh(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return Vh(r),n},Wh=Xt,Yh=x,qh=rn,Kh=Oe,Qh=Ch,Jh=Vn,Xh=d,Zh=zh,$h=kh,ef=Gh,tf=TypeError,nf=function(e,t){this.stopped=e,this.result=t},rf=nf.prototype,of=function(e,t,n){var r,i,o,s,a,c,l,u=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_RECORD),h=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=Wh(t,u),g=function(e){return r&&ef(r,"normal",e),new nf(!0,e)},v=function(e){return d?(qh(e),f?m(e[0],e[1],g):m(e[0],e[1])):f?m(e,g):m(e)};if(p)r=e.iterator;else if(h)r=e;else{if(!(i=$h(e)))throw tf(Kh(e)+" is not iterable");if(Qh(i)){for(o=0,s=Jh(e);s>o;o++)if((a=v(e[o]))&&Xh(rf,a))return a;return new nf(!1)}r=Zh(e,i)}for(c=p?e.next:r.next;!(l=Yh(c,r)).done;){try{a=v(l.value)}catch(e){ef(r,"throw",e)}if("object"==typeof a&&a&&Xh(rf,a))return a}return new nf(!1)},sf=fr,af=Rn,cf=d,lf=iu,uf=Ru,df=function(e,t,n){for(var r=ch(t),i=uh.f,o=lh.f,s=0;s<r.length;s++){var a=r[s];ah(e,a)||n&&ah(n,a)||i(e,a,o(t,a))}},pf=Es,hf=yn,ff=B,mf=function(e,t){dh(t)&&"cause"in t&&ph(e,"cause",t.cause)},gf=function(e,t,n,r){Sh&&(Th?Th(e,t):_h(e,"stack",bh(n,r)))},vf=of,yf=function(e,t){return void 0===e?arguments.length<2?"":t:sf(e)},Ef=ht("toStringTag"),_f=Error,bf=[].push,Sf=function(e,t){var n,r=cf(Tf,this);uf?n=uf(_f(),r?lf(this):Tf):(n=r?this:pf(Tf),hf(n,Ef,"Error")),void 0!==t&&hf(n,"message",yf(t)),gf(n,Sf,n.stack,1),arguments.length>2&&mf(n,arguments[2]);var i=[];return vf(e,bf,{that:i}),hf(n,"errors",i),n};uf?uf(Sf,_f):df(Sf,_f,{name:!0});var Tf=Sf.prototype=pf(_f.prototype,{constructor:ff(1,Sf),message:ff(1,""),name:ff(1,"AggregateError")});af({global:!0,constructor:!0,arity:2},{AggregateError:Sf});var If,Nf,wf,Cf,Of="undefined"!=typeof process&&"process"==S(process),Af=ce,Rf=Fs,Mf=M,Df=ht("species"),kf=d,xf=TypeError,Lf=function(e,t){if(kf(t,e))return e;throw xf("Incorrect invocation")},Pf=po,jf=Oe,Uf=TypeError,Ff=rn,zf=function(e){if(Pf(e))return e;throw Uf(jf(e)+" is not a constructor")},Bf=q,Vf=ht("species"),Hf=function(e,t){var n,r=Ff(e).constructor;return void 0===r||Bf(n=Ff(r)[Vf])?t:zf(n)},Gf=TypeError,Wf=function(e,t){if(e<t)throw Gf("Not enough arguments");return e},Yf=/(?:ipad|iphone|ipod).*applewebkit/i.test(le),qf=h,Kf=y,Qf=Xt,Jf=A,Xf=$e,Zf=i,$f=ns,em=rl,tm=Ct,nm=Wf,rm=Yf,im=Of,om=qf.setImmediate,sm=qf.clearImmediate,am=qf.process,cm=qf.Dispatch,lm=qf.Function,um=qf.MessageChannel,dm=qf.String,pm=0,hm={},fm="onreadystatechange";Zf((function(){If=qf.location}));var mm=function(e){if(Xf(hm,e)){var t=hm[e];delete hm[e],t()}},gm=function(e){return function(){mm(e)}},vm=function(e){mm(e.data)},ym=function(e){qf.postMessage(dm(e),If.protocol+"//"+If.host)};om&&sm||(om=function(e){nm(arguments.length,1);var t=Jf(e)?e:lm(e),n=em(arguments,1);return hm[++pm]=function(){Kf(t,void 0,n)},Nf(pm),pm},sm=function(e){delete hm[e]},im?Nf=function(e){am.nextTick(gm(e))}:cm&&cm.now?Nf=function(e){cm.now(gm(e))}:um&&!rm?(Cf=(wf=new um).port2,wf.port1.onmessage=vm,Nf=Qf(Cf.postMessage,Cf)):qf.addEventListener&&Jf(qf.postMessage)&&!qf.importScripts&&If&&"file:"!==If.protocol&&!Zf(ym)?(Nf=ym,qf.addEventListener("message",vm,!1)):Nf=fm in tm("script")?function(e){$f.appendChild(tm("script"))[fm]=function(){$f.removeChild(this),mm(e)}}:function(e){setTimeout(gm(e),0)});var Em={set:om,clear:sm},_m=function(){this.head=null,this.tail=null};_m.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var bm,Sm,Tm,Im,Nm,wm=_m,Cm=/ipad|iphone|ipod/i.test(le)&&"undefined"!=typeof Pebble,Om=/web0s(?!.*chrome)/i.test(le),Am=h,Rm=Xt,Mm=R.f,Dm=Em.set,km=wm,xm=Yf,Lm=Cm,Pm=Om,jm=Of,Um=Am.MutationObserver||Am.WebKitMutationObserver,Fm=Am.document,zm=Am.process,Bm=Am.Promise,Vm=Mm(Am,"queueMicrotask"),Hm=Vm&&Vm.value;if(!Hm){var Gm=new km,Wm=function(){var e,t;for(jm&&(e=zm.domain)&&e.exit();t=Gm.get();)try{t()}catch(e){throw Gm.head&&bm(),e}e&&e.enter()};xm||jm||Pm||!Um||!Fm?!Lm&&Bm&&Bm.resolve?((Im=Bm.resolve(void 0)).constructor=Bm,Nm=Rm(Im.then,Im),bm=function(){Nm(Wm)}):jm?bm=function(){zm.nextTick(Wm)}:(Dm=Rm(Dm,Am),bm=function(){Dm(Wm)}):(Sm=!0,Tm=Fm.createTextNode(""),new Um(Wm).observe(Tm,{characterData:!0}),bm=function(){Tm.data=Sm=!Sm}),Hm=function(e){Gm.head||bm(),Gm.add(e)}}var Ym=Hm,qm=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Km=h.Promise,Qm="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Jm=!Qm&&!Of&&"object"==typeof window&&"object"==typeof document,Xm=h,Zm=Km,$m=A,eg=qt,tg=Xi,ng=ht,rg=Jm,ig=Qm,og=ge,sg=Zm&&Zm.prototype,ag=ng("species"),cg=!1,lg=$m(Xm.PromiseRejectionEvent),ug=eg("Promise",(function(){var e=tg(Zm),t=e!==String(Zm);if(!t&&66===og)return!0;if(!sg.catch||!sg.finally)return!0;if(!og||og<51||!/native code/.test(e)){var n=new Zm((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[ag]=r,!(cg=n.then((function(){}))instanceof r))return!0}return!t&&(rg||ig)&&!lg})),dg={CONSTRUCTOR:ug,REJECTION_EVENT:lg,SUBCLASSING:cg},pg={},hg=De,fg=TypeError,mg=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw fg("Bad Promise constructor");t=e,n=r})),this.resolve=hg(t),this.reject=hg(n)};pg.f=function(e){return new mg(e)};var gg,vg,yg=Rn,Eg=Of,_g=h,bg=x,Sg=js,Tg=la,Ig=function(e){var t=Af(e);Mf&&t&&!t[Df]&&Rf(t,Df,{configurable:!0,get:function(){return this}})},Ng=De,wg=A,Cg=ne,Og=Lf,Ag=Hf,Rg=Em.set,Mg=Ym,Dg=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}},kg=qm,xg=wm,Lg=Na,Pg=Km,jg=dg,Ug=pg,Fg="Promise",zg=jg.CONSTRUCTOR,Bg=jg.REJECTION_EVENT,Vg=Lg.getterFor(Fg),Hg=Lg.set,Gg=Pg&&Pg.prototype,Wg=Pg,Yg=Gg,qg=_g.TypeError,Kg=_g.document,Qg=_g.process,Jg=Ug.f,Xg=Jg,Zg=!!(Kg&&Kg.createEvent&&_g.dispatchEvent),$g="unhandledrejection",ev=function(e){var t;return!(!Cg(e)||!wg(t=e.then))&&t},tv=function(e,t){var n,r,i,o=t.value,s=1==t.state,a=s?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{a?(s||(2===t.rejection&&sv(t),t.rejection=1),!0===a?n=o:(u&&u.enter(),n=a(o),u&&(u.exit(),i=!0)),n===e.promise?l(qg("Promise-chain cycle")):(r=ev(n))?bg(r,n,c,l):c(n)):l(o)}catch(e){u&&!i&&u.exit(),l(e)}},nv=function(e,t){e.notified||(e.notified=!0,Mg((function(){for(var n,r=e.reactions;n=r.get();)tv(n,e);e.notified=!1,t&&!e.rejection&&iv(e)})))},rv=function(e,t,n){var r,i;Zg?((r=Kg.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),_g.dispatchEvent(r)):r={promise:t,reason:n},!Bg&&(i=_g["on"+e])?i(r):e===$g&&Dg("Unhandled promise rejection",n)},iv=function(e){bg(Rg,_g,(function(){var t,n=e.facade,r=e.value;if(ov(e)&&(t=kg((function(){Eg?Qg.emit("unhandledRejection",r,n):rv($g,n,r)})),e.rejection=Eg||ov(e)?2:1,t.error))throw t.value}))},ov=function(e){return 1!==e.rejection&&!e.parent},sv=function(e){bg(Rg,_g,(function(){var t=e.facade;Eg?Qg.emit("rejectionHandled",t):rv("rejectionhandled",t,e.value)}))},av=function(e,t,n){return function(r){e(t,r,n)}},cv=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,nv(e,!0))},lv=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw qg("Promise can't be resolved itself");var r=ev(t);r?Mg((function(){var n={done:!1};try{bg(r,t,av(lv,n,e),av(cv,n,e))}catch(t){cv(n,t,e)}})):(e.value=t,e.state=1,nv(e,!1))}catch(t){cv({done:!1},t,e)}}};zg&&(Yg=(Wg=function(e){Og(this,Yg),Ng(e),bg(gg,this);var t=Vg(this);try{e(av(lv,t),av(cv,t))}catch(e){cv(t,e)}}).prototype,(gg=function(e){Hg(this,{type:Fg,done:!1,notified:!1,parent:!1,reactions:new xg,rejection:!1,state:0,value:void 0})}).prototype=Sg(Yg,"then",(function(e,t){var n=Vg(this),r=Jg(Ag(this,Wg));return n.parent=!0,r.ok=!wg(e)||e,r.fail=wg(t)&&t,r.domain=Eg?Qg.domain:void 0,0==n.state?n.reactions.add(r):Mg((function(){tv(r,n)})),r.promise})),vg=function(){var e=new gg,t=Vg(e);this.promise=e,this.resolve=av(lv,t),this.reject=av(cv,t)},Ug.f=Jg=function(e){return e===Wg||void 0===e?new vg(e):Xg(e)}),yg({global:!0,constructor:!0,wrap:!0,forced:zg},{Promise:Wg}),Tg(Wg,Fg,!1,!0),Ig(Fg);var uv=ht("iterator"),dv=!1;try{var pv=0,hv={next:function(){return{done:!!pv++}},return:function(){dv=!0}};hv[uv]=function(){return this},Array.from(hv,(function(){throw 2}))}catch(e){}var fv=Km,mv=function(e,t){if(!t&&!dv)return!1;var n=!1;try{var r={};r[uv]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},gv=dg.CONSTRUCTOR||!mv((function(e){fv.all(e).then(void 0,(function(){}))})),vv=x,yv=De,Ev=pg,_v=qm,bv=of;Rn({target:"Promise",stat:!0,forced:gv},{all:function(e){var t=this,n=Ev.f(t),r=n.resolve,i=n.reject,o=_v((function(){var n=yv(t.resolve),o=[],s=0,a=1;bv(e,(function(e){var c=s++,l=!1;a++,vv(n,t,e).then((function(e){l||(l=!0,o[c]=e,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise}});var Sv=Rn,Tv=dg.CONSTRUCTOR;Km&&Km.prototype,Sv({target:"Promise",proto:!0,forced:Tv,real:!0},{catch:function(e){return this.then(void 0,e)}});var Iv=x,Nv=De,wv=pg,Cv=qm,Ov=of;Rn({target:"Promise",stat:!0,forced:gv},{race:function(e){var t=this,n=wv.f(t),r=n.reject,i=Cv((function(){var i=Nv(t.resolve);Ov(e,(function(e){Iv(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Av=x,Rv=pg;Rn({target:"Promise",stat:!0,forced:dg.CONSTRUCTOR},{reject:function(e){var t=Rv.f(this);return Av(t.reject,void 0,e),t.promise}});var Mv=rn,Dv=ne,kv=pg,xv=function(e,t){if(Mv(e),Dv(t)&&t.constructor===e)return t;var n=kv.f(e);return(0,n.resolve)(t),n.promise},Lv=Rn,Pv=Km,jv=dg.CONSTRUCTOR,Uv=xv,Fv=ce("Promise"),zv=!jv;Lv({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return Uv(zv&&this===Fv?Pv:this,e)}});var Bv=x,Vv=De,Hv=pg,Gv=qm,Wv=of;Rn({target:"Promise",stat:!0,forced:gv},{allSettled:function(e){var t=this,n=Hv.f(t),r=n.resolve,i=n.reject,o=Gv((function(){var n=Vv(t.resolve),i=[],o=0,s=1;Wv(e,(function(e){var a=o++,c=!1;s++,Bv(n,t,e).then((function(e){c||(c=!0,i[a]={status:"fulfilled",value:e},--s||r(i))}),(function(e){c||(c=!0,i[a]={status:"rejected",reason:e},--s||r(i))}))})),--s||r(i)}));return o.error&&i(o.value),n.promise}});var Yv=x,qv=De,Kv=ce,Qv=pg,Jv=qm,Xv=of,Zv="No one promise resolved";Rn({target:"Promise",stat:!0,forced:gv},{any:function(e){var t=this,n=Kv("AggregateError"),r=Qv.f(t),i=r.resolve,o=r.reject,s=Jv((function(){var r=qv(t.resolve),s=[],a=0,c=1,l=!1;Xv(e,(function(e){var u=a++,d=!1;c++,Yv(r,t,e).then((function(e){d||l||(l=!0,i(e))}),(function(e){d||l||(d=!0,s[u]=e,--c||o(new n(s,Zv)))}))})),--c||o(new n(s,Zv))}));return s.error&&o(s.value),r.promise}});var $v=Rn,ey=Km,ty=i,ny=ce,ry=A,iy=Hf,oy=xv,sy=ey&&ey.prototype;$v({target:"Promise",proto:!0,real:!0,forced:!!ey&&ty((function(){sy.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=iy(this,ny("Promise")),n=ry(e);return this.then(n?function(n){return oy(t,e()).then((function(){return n}))}:e,n?function(n){return oy(t,e()).then((function(){throw n}))}:e)}});var ay=re.Promise,cy=r(ay);const ly=()=>{};function uy(){const e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:ly};return e.promise=new cy(((t,n)=>{e.resolve=n=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=t=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,n(t))}})),e}const dy=new Map,py=new Map,hy=new Map;var fy,my;!function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(fy||(fy={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(my||(my={}));var gy={exports:{}};!function(e,n){!function(t,r){var i="function",o="undefined",s="object",a="string",c="major",l="model",u="name",d="type",p="vendor",h="version",f="architecture",m="console",g="mobile",v="tablet",y="smarttv",E="wearable",_="embedded",b="Amazon",S="Apple",T="ASUS",I="BlackBerry",N="Browser",w="Chrome",C="Firefox",O="Google",A="Huawei",R="LG",M="Microsoft",D="Motorola",k="Opera",x="Samsung",L="Sharp",P="Sony",j="Xiaomi",U="Zebra",F="Facebook",z="Chromium OS",B="Mac OS",V=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},H=function(e,t){return typeof e===a&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},W=function(e,t){if(typeof e===a)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,350)},Y=function(e,t){for(var n,o,a,c,l,u,d=0;d<t.length&&!l;){var p=t[d],h=t[d+1];for(n=o=0;n<p.length&&!l&&p[n];)if(l=p[n++].exec(e))for(a=0;a<h.length;a++)u=l[++o],typeof(c=h[a])===s&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,u):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=u?u.replace(c[1],c[2]):r:this[c[0]]=u?c[1].call(this,u,c[2]):r:4===c.length&&(this[c[0]]=u?c[3].call(this,u.replace(c[1],c[2])):r):this[c]=u||r;d+=2}},q=function(e,t){for(var n in t)if(typeof t[n]===s&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(H(t[n][i],e))return"?"===n?r:n}else if(H(t[n],e))return"?"===n?r:n;return e},K={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,h],[/opios[\/ ]+([\w\.]+)/i],[h,[u,k+" Mini"]],[/\bopr\/([\w\.]+)/i],[h,[u,k]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[u,h],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[u,"UC"+N]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[h,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[h,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[u,"IE"]],[/yabrowser\/([\w\.]+)/i],[h,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+N],h],[/\bfocus\/([\w\.]+)/i],[h,[u,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[u,k+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[u,k+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[u,"MIUI "+N]],[/fxios\/([-\w\.]+)/i],[h,[u,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 "+N]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 "+N],h],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[u,h],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,F],h],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[u,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[u,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[u,w+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,w+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[u,"Android "+N]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[h,q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[u,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[u,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[u,h],[/(cobalt)\/([\w\.]+)/i],[u,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,G]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[p,x],[d,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[p,x],[d,g]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[p,S],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[p,S],[d,v]],[/(macintosh);/i],[l,[p,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[p,L],[d,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[p,A],[d,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[p,A],[d,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[p,j],[d,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[p,j],[d,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[p,"OPPO"],[d,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[p,"Vivo"],[d,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[p,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[p,D],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[p,D],[d,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[p,R],[d,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[p,R],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[p,"Lenovo"],[d,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[p,"Nokia"],[d,g]],[/(pixel c)\b/i],[l,[p,O],[d,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[p,O],[d,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[p,P],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[p,P],[d,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[p,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[p,b],[d,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[p,b],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[l,p,[d,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[p,I],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[p,T],[d,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[p,T],[d,g]],[/(nexus 9)/i],[l,[p,"HTC"],[d,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[l,/_/g," "],[d,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[p,"Acer"],[d,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[p,"Meizu"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,l,[d,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,l,[d,v]],[/(surface duo)/i],[l,[p,M],[d,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[p,"Fairphone"],[d,g]],[/(u304aa)/i],[l,[p,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[l,[p,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[l,[p,"RCA"],[d,v]],[/\b(venue[\d ]{2,7}) b/i],[l,[p,"Dell"],[d,v]],[/\b(q(?:mv|ta)\w+) b/i],[l,[p,"Verizon"],[d,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[p,"Barnes & Noble"],[d,v]],[/\b(tm\d{3}\w+) b/i],[l,[p,"NuVision"],[d,v]],[/\b(k88) b/i],[l,[p,"ZTE"],[d,v]],[/\b(nx\d{3}j) b/i],[l,[p,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[l,[p,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[l,[p,"Swiss"],[d,v]],[/\b((zeki)?tb.*\b) b/i],[l,[p,"Zeki"],[d,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],l,[d,v]],[/\b(ns-?\w{0,9}) b/i],[l,[p,"Insignia"],[d,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[p,"NextBook"],[d,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],l,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],l,[d,g]],[/\b(ph-1) /i],[l,[p,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[p,"Envizen"],[d,v]],[/\b(trio[-\w\. ]+) b/i],[l,[p,"MachSpeed"],[d,v]],[/\btu_(1491) b/i],[l,[p,"Rotor"],[d,v]],[/(shield[\w ]+) b/i],[l,[p,"Nvidia"],[d,v]],[/(sprint) (\w+)/i],[p,l,[d,g]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,M],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[p,U],[d,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[p,U],[d,g]],[/smart-tv.+(samsung)/i],[p,[d,y]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[p,x],[d,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,R],[d,y]],[/(apple) ?tv/i],[p,[l,S+" TV"],[d,y]],[/crkey/i],[[l,w+"cast"],[p,O],[d,y]],[/droid.+aft(\w)( bui|\))/i],[l,[p,b],[d,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[p,L],[d,y]],[/(bravia[\w ]+)( bui|\))/i],[l,[p,P],[d,y]],[/(mitv-\w{5}) bui/i],[l,[p,j],[d,y]],[/Hbbtv.*(technisat) (.*);/i],[p,l,[d,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,W],[l,W],[d,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,l,[d,m]],[/droid.+; (shield) bui/i],[l,[p,"Nvidia"],[d,m]],[/(playstation [345portablevi]+)/i],[l,[p,P],[d,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[p,M],[d,m]],[/((pebble))app/i],[p,l,[d,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[p,S],[d,E]],[/droid.+; (glass) \d/i],[l,[p,O],[d,E]],[/droid.+; (wt63?0{2,3})\)/i],[l,[p,U],[d,E]],[/(quest( 2| pro)?)/i],[l,[p,F],[d,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[d,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[d,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[u,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,h],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[u,[h,q,K]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,"Windows"],[h,q,K]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,B],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,h],[/\(bb(10);/i],[h,[u,I]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[u,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[h,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[h,[u,w+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,z],h],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,h],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[u,h]]},J=function(e,n){if(typeof e===s&&(n=e,e=r),!(this instanceof J))return new J(e,n).getResult();var m=typeof t!==o&&t.navigator?t.navigator:r,y=e||(m&&m.userAgent?m.userAgent:""),E=m&&m.userAgentData?m.userAgentData:r,_=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(Q,n):Q;return this.getBrowser=function(){var e={};return e[u]=r,e[h]=r,Y.call(e,y,_.browser),e[c]=function(e){return typeof e===a?e.replace(/[^\d\.]/g,"").split(".")[0]:r}(e[h]),m&&m.brave&&typeof m.brave.isBrave==i&&(e[u]="Brave"),e},this.getCPU=function(){var e={};return e[f]=r,Y.call(e,y,_.cpu),e},this.getDevice=function(){var e={};return e[p]=r,e[l]=r,e[d]=r,Y.call(e,y,_.device),!e[d]&&E&&E.mobile&&(e[d]=g),"Macintosh"==e[l]&&m&&typeof m.standalone!==o&&m.maxTouchPoints&&m.maxTouchPoints>2&&(e[l]="iPad",e[d]=v),e},this.getEngine=function(){var e={};return e[u]=r,e[h]=r,Y.call(e,y,_.engine),e},this.getOS=function(){var e={};return e[u]=r,e[h]=r,Y.call(e,y,_.os),!e[u]&&E&&"Unknown"!=E.platform&&(e[u]=E.platform.replace(/chrome os/i,z).replace(/macos/i,B)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return y},this.setUA=function(e){return y=typeof e===a&&e.length>350?W(e,350):e,this},this.setUA(y),this};J.VERSION="0.7.34",J.BROWSER=V([u,h,c]),J.CPU=V([f]),J.DEVICE=V([l,p,d,m,g,y,v,E,_]),J.ENGINE=J.OS=V([u,h]),e.exports&&(n=e.exports=J),n.UAParser=J;var X=typeof t!==o&&(t.jQuery||t.Zepto);if(X&&!X.ua){var Z=new J;X.ua=Z.getResult(),X.ua.get=function(){return Z.getUA()},X.ua.set=function(e){Z.setUA(e);var t=Z.getResult();for(var n in t)X.ua[n]=t[n]}}}("object"==typeof window?window:t)}(gy,gy.exports);const vy=new(r(gy.exports));let yy=vy.getResult(),Ey=null;function _y(e){if(!Ey){e&&vy.setUA(e),yy=vy.getResult();const t=function(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return my.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return my.CHROME;case"Safari":case"Mobile Safari":return my.SAFARI;case"Edge":return my.EDGE;case"Firefox":return my.FIREFOX;case"QQBrowser":return my.QQ;case"Opera":return my.OPERA;case"WeChat":return my.WECHAT;default:return e.browser.name||""}}(yy),n=function(e){let t;return t="Blink"===e.engine.name?e.engine.version||"":e.browser.version||"",t.split(".")[0]}(yy),r=function(e){return"Windows"===e.os.name?e.os.version?e.os.name+" "+e.os.version:e.os.name:e.os.name||""}(yy),i=yy.os.version;if(!(t&&n&&r&&i))return{name:t,version:n,os:r,osVersion:i};Ey={name:t,version:n,os:r,osVersion:i}}return Ey}function by(){return _y().os}function Sy(){const e=_y();return"".concat(e.os," ").concat(e.osVersion)}function Ty(){const e=_y();return!!("WebKit"===yy.engine.name&&e.os===fy.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==my.SAFARI||Ay()&&e.name!==my.SAFARI)}function Iy(){const e=_y();if(Ty()){if(e.os===fy.MAC_OS)return!0;if(e.os===fy.IOS){const e=yy.os.version&&yy.os.version.split(".");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}function Ny(){return"WebKit"===yy.engine.name}function wy(){return _y().name===my.CHROME}function Cy(){return _y().name===my.SAFARI}function Oy(){return _y().name===my.FIREFOX}function Ay(){return _y().os===fy.IOS}function Ry(e){const t=_y();return!(t.name!==my.CHROME||!t.osVersion)&&Number(t.version)>=e}function My(e){const t=_y();return!(t.name!==my.EDGE||!t.osVersion)&&Number(t.version)>=e}function Dy(e){const t=_y();return!(t.name!==my.OPERA||!t.osVersion)&&Number(t.version)>=e}function ky(){const e=_y();return!(e.name!==my.CHROME||!e.osVersion)&&Number(e.version)<=90}function xy(){const e=_y();if(e.os!==fy.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function Ly(){const e=_y();if(e.os!==fy.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])}function Py(){const e=_y();if(e.os!==fy.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 16===Number(t[0])}function jy(){const e=_y();if(e.os!==fy.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function Uy(){return Cy()&&navigator.maxTouchPoints>0}function Fy(){return _y().name===my.WECHAT}function zy(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function By(){const e=_y();return e.name!==my.EDGE&&e.name!==my.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function Vy(){return by()===fy.ANDROID}function Hy(){const e=_y();return Vy()&&(e.name===my.CHROME||e.name===my.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}var Gy;!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED"}(Gy||(Gy={}));let Wy=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;super(t),op(this,"code",void 0),op(this,"message",void 0),op(this,"data",void 0),op(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=n}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return"error"===e&&(t||console).error(this.toString()),"warning"===e&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function Yy(e,t){if("boolean"!=typeof e)throw new Wy(Gy.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function qy(e,t,n){if(!Or(n).call(n,e))throw new Wy(Gy.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(n)))}function Ky(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<n||e>r||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!function(e){return"number"==typeof e&&e%1==0}(e))throw new Wy(Gy.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}function Qy(e,t){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new Wy(Gy.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));void 0!==e.min&&Ky(e.min,"".concat(t,".min"),0,1/0),void 0!==e.max&&Ky(e.max,"".concat(t,".max"),1,1/0),void 0!==e.exact&&Ky(e.exact,"".concat(t,".exact"),1,1/0),void 0!==e.ideal&&Ky(e.ideal,"".concat(t,".ideal"),1,1/0)}else Ky(e,t,1,1/0)}function Jy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new Wy(Gy.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!$y(e,n,r,i))throw new Wy(Gy.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))}function Xy(e,t){if(!Array.isArray(e))throw new Wy(Gy.INVALID_PARAMS,"".concat(t," should be an array"))}function Zy(e){return null==e}function $y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&e.length<=n&&e.length>=t&&(!r||function(e){if("string"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}(e))}function eE(e,t,n){if("getBigUint64"in DataView.prototype)return e.getBigUint64(t,n);const r=e.getUint32(t,n),i=e.getUint32(t+4,n),o=Number(!!n),s=Number(!n);return BigInt(r*s+i*o)<<BigInt(32)|BigInt(r*o+i*s)}function tE(e,t,n,r){if("setBigUint64"in DataView.prototype)return e.setBigUint64(t,n,r);const i=Number(n>>BigInt(32)),o=Number(n&BigInt(4294967295));r?(e.setUint32(t+4,i,r),e.setUint32(t,o,r)):(e.setUint32(t,i,r),e.setUint32(t+4,o,r))}var nE,rE;!function(e){e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE"}(nE||(nE={})),function(e){e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(rE||(rE={}));const iE=new class{constructor(){op(this,"_clientSize",null),op(this,"getClientWidth",(()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth)),op(this,"getClientHeight",(()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight)),op(this,"getStyle",(e=>window.getComputedStyle(e,null))),op(this,"checkCssVisibleProperty",(e=>{var t;let n=!0;const r=this.getStyle(e),{display:i,visibility:o,opacity:s,filter:a}=r;return("none"===i||Or(t=["hidden","collapse"]).call(t,o)||Number(s)<.1)&&(n=!1),!!n&&(a&&a.split(" ").filter((e=>{var t;const n=e.split("(")[0];return Or(t=["brightness","blur","opacity"]).call(t,n)})).map((e=>{const[t,n]=e.split(/\(|\)/);return[t,Number(n.match(/^[0-9\.]+/))]})).forEach((e=>{const[t,r]=e;switch(t){case"brightness":(r<.1||r>3)&&(n=!1);break;case"blur":r>3&&(n=!1);break;case"opacity":r<.1&&(n=!1)}})),n)})),op(this,"checkPropertyUpToAllParentNodes",((e,t)=>{let n=!0,r=!0;const i=e=>t(e);let o=e;for(;o&&r;)i(o)||(n=!1,r=!1),o=o.parentElement,o||(r=!1);return n})),op(this,"checkActualCssVisibleIncludeInherit",(e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty))),op(this,"getSizeAboutClient",(e=>{const{width:t,height:n,left:r,right:i,top:o,bottom:s}=e.getBoundingClientRect(),a=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:n,left:r,right:i,top:o,bottom:s,clientWidth:a,clientHeight:c,clientMin:Math.min(a,c)}})),op(this,"checkActualSize",(()=>{const{width:e,height:t,clientMin:n}=this._clientSize;return this.checkSizeIsVisible(e,t,n)})),op(this,"elementFromPoint",((e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null)),op(this,"checkCoverForAPoint",((e,t,n)=>{const r=this.elementFromPoint(e,t);return null!==r&&r!==n})),op(this,"getPointPositionList",(()=>{const{width:e,height:t,left:n,top:r}=this._clientSize,i=e/6,o=t/6,s=[],a=10**6;for(let c=0;c<5;c++)for(let e=0;e<5;e++){const t=(n*a+(0===c?.1:4===c?(i*c*a-1e5)/a:i*c)*a)/a,l=(r*a+(0===e?.1:4===e?(o*e*a-1e5)/a:o*e)*a)/a;s.push({x:t,y:l})}return[...s]})),op(this,"checkElementCover",(e=>this.getPointPositionList().map((t=>this.checkCoverForAPoint(t.x,t.y,e))).filter((e=>!!e)).length>6)),op(this,"checkSizeIsVisible",((e,t,n)=>(e>50||n/e<=10)&&(t>50||n/t<=10))),op(this,"checkSizeOfPartInClient",(()=>{const{left:e,right:t,top:n,bottom:r,clientHeight:i,clientWidth:o,clientMin:s}=this._clientSize;let a,c,l,u;if(e<0)a=0;else{if(!(e<o))return!1;a=e}if(t<0)return!1;if(c=t<o?t:o,n<0)l=0;else{if(!(n<i))return!1;l=n}if(r<0)return!1;u=r<i?r:i;const d=c-a,p=u-l;return this.checkSizeIsVisible(d,p,s)})),op(this,"returnHiddenResult",(e=>(this._clientSize=null,{visible:!1,reason:e}))),op(this,"checkOneElementVisible",(e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(nE.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(nE.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(nE.SIZE)}}return this.returnHiddenResult(nE.STYLE)}return this.returnHiddenResult(rE.UNMOUNTED)}return this.returnHiddenResult(rE.INVALID_HTML_ELEMENT)})),op(this,"checkElementIsMountedOnDom",(e=>this.checkPropertyUpToAllParentNodes(e,(e=>"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement))))}};function oE(e){return(new TextEncoder).encode(e)}const sE=function(e,t){const n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n},aE=async e=>{const t=function(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),n=await window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),r=oE(e),i=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r);return function(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}(new Uint8Array(i))},cE=async e=>function(e,t){let n="";return new Uint8Array(e).forEach((e=>{n+=e.toString(t).padStart(2,"0")})),n}(await crypto.subtle.digest("SHA-256",oE(e)),16);class lE{constructor(){op(this,"_events",{}),op(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map((e=>e.listener)):[]}on(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const t=this._events[e].map((e=>e));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(let o=0;o<t.length;o+=1){const n=t[o];n.once&&this.off(e,n.listener),n.listener.apply(this,r||[])}}safeEmit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];[...this._events[e]||[]].forEach((t=>{t.once&&this.off(e,t.listener);try{t.listener.apply(this,n)}catch(t){console.error("safeEmit event:".concat(e," error ").concat(null==t?void 0:t.toString()))}}))}_indexOfListener(e,t){let n=e.length;for(;n--;)if(e[n].listener===t)return n;return-1}}let uE=null;function dE(){if(uE)return uE;if(window.electron)return uE=window.electron;if(!window.require)return null;try{return uE=window.require("electron"),uE}catch(e){return null}}var pE,hE,fE,mE,gE,vE,yE,EE;function _E(e){return Ky(e.timeout,"config.timeout",0,1e5),Ky(e.timeoutFactor,"config.timeoutFactor",0,100,!1),Ky(e.maxRetryCount,"config.maxRetryConfig",0,1/0),Ky(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function bE(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((e=>{if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function SE(e){return Jy(e.turnServerURL,"turnServerURL"),Jy(e.username,"username"),Jy(e.password,"password"),e.udpport&&Ky(e.udpport,"udpport",1,99999,!0),e.forceturn&&Yy(e.forceturn,"forceturn"),e.security&&Yy(e.security,"security"),e.tcpport&&Ky(e.tcpport,"tcpport",1,99999,!0),!0}function TE(e){return void 0!==e.level&&qy(e.level,"level",[1,2,3]),void 0!==e.delay&&Ky(e.delay,"delay",0,3e3,!0),!0}function IE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return 0===e.getListeners(t).length?cy.reject(new Wy(Gy.UNEXPECTED_ERROR,"can not emit promise")):new cy(((n,i)=>{e.emit(t,...r,n,i)}))}function NE(e,t){if(0===e.getListeners(t).length)return cy.resolve();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return IE(e,t,...r)}function wE(e,t){if(0===e.getListeners(t).length)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return CE(e,t,...r)}function CE(e,t){let n=null,r=null;for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];if(e.emit(t,...o,(e=>{n=e}),(e=>{r=e})),null!==r)throw r;if(null===n)throw new Wy(Gy.UNEXPECTED_ERROR,"handler is not sync");return n}!function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.DATACHANNEL_FAILBACK="Client._datachannelFailback",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload"}(pE||(pE={})),function(e){e.TRACER="tracer"}(hE||(hE={})),function(e){e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(fE||(fE={})),function(e){e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.FALLBACK="FALLBACK",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE"}(mE||(mE={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change"}(gE||(gE={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(vE||(vE={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(yE||(yE={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(EE||(EE={}));const OE=new class extends lE{set networkState(e){this.emit(EE.NETWORK_STATE_CHANGE,e,this._networkState),e===yE.ONLINE?this.emit(EE.ONLINE):e===yE.OFFLINE&&(this.onlineWaiter=new cy((e=>{this.once(EE.ONLINE,(()=>{this.onlineWaiter=void 0,e(yE.ONLINE)}))})),this.emit(EE.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===yE.ONLINE}constructor(){super(),op(this,"_moduleName","network-indicator"),op(this,"_networkState",yE.ONLINE),op(this,"onlineWaiter",void 0),window.addEventListener("online",(()=>{this.networkState=yE.ONLINE})),window.addEventListener("offline",(()=>{this.networkState=yE.OFFLINE}))}};var AE=De,RE=Je,ME=Y,DE=Vn,kE=TypeError,xE=function(e){return function(t,n,r,i){AE(n);var o=RE(t),s=ME(o),a=DE(o),c=e?a-1:0,l=e?-1:1;if(r<2)for(;;){if(c in s){i=s[c],c+=l;break}if(c+=l,e?c<0:a<=c)throw kE("Reduce of empty array with no initial value")}for(;e?c>=0:a>c;c+=l)c in s&&(i=n(i,s[c],c,o));return i}},LE=[xE(!1),xE(!0)][0];Rn({target:"Array",proto:!0,forced:!Of&&ge>79&&ge<83||!Tp("reduce")},{reduce:function(e){var t=arguments.length;return LE(this,e,t,t>1?arguments[1]:void 0)}});var PE=Jn("Array").reduce,jE=d,UE=PE,FE=Array.prototype,zE=r((function(e){var t=e.reduce;return e===FE||jE(FE,e)&&t===FE.reduce?UE:t}));function BE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BE(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HE(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}function GE(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),t}function WE(e){void 0!==cy?cy.resolve().then(e):setTimeout(e,0)}function YE(e){return JSON.parse(JSON.stringify(e))}function qE(e){try{return YE(e)}catch(t){return e}}const KE={};function QE(e,t){KE[t]||(KE[t]=!0,e())}function JE(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}function XE(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}function ZE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=zE(t).call(t,((e,t)=>e+t.length),0),i=new Uint8Array(new ArrayBuffer(r));let o=0;return t.forEach((e=>{i.set(e,o),o+=e.length})),i}function $E(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function e_(e){let t=0;return/DingTalk/i.test(navigator.userAgent)&&e.realFormData&&(e=e.realFormData),e.forEach((e=>{t+="string"==typeof e?$E(e):e.size})),t+138}function t_(e){const t=new Wy(Gy.TIMEOUT,"timeout");return new cy(((n,r)=>{window.setTimeout((()=>r(t)),e)}))}function n_(e){return new cy((t=>{window.setTimeout(t,e)}))}function r_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;const n=Math.random().toString(16).substr(2,e).toLowerCase();return n.length===e?"".concat(t).concat(n):"".concat(t).concat(n)+r_(e-n.length,"")}function i_(){return r_(32,"").toUpperCase()}const o_=()=>{},s_=new class{constructor(){op(this,"fnMap",new Map)}throttleByKey(e,t,n,r){for(var i=arguments.length,o=new Array(i>4?i-4:0),s=4;s<i;s++)o[s-4]=arguments[s];if(this.fnMap.has(t)){const i=this.fnMap.get(t);if(i.threshold!==n){i.fn(...i.args),clearTimeout(i.timer);const s=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:s,args:o,skipFn:r})}else i.skipFn&&i.skipFn(...i.args),this.fnMap.set(t,VE(VE({},i),{},{fn:e,args:o,skipFn:r}))}else{const i=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:i,args:o,skipFn:r})}}},a_=s_.throttleByKey.bind(s_);function c_(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}function l_(e,t){if(!c_(e)||!c_(t))return t;if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){const n=[...e];for(let r=0;r<t.length;r++)n[r]=l_(e[r],t[r]);return n}{const n=VE({},e);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)?n[r]=l_(e[r],t[r]):n[r]=t[r]);return n}}function u_(e,t){let n=[0];if(t&&(n=new Array(t).fill(0)),0===e)return n;let r=0;for(;e>0&&(n[r]=255&e,e>>=8,r++,!t||r!==t););return n}let d_=1,p_=console;class h_{static setLogger(e){p_=e}constructor(e){op(this,"lockingPromise",cy.resolve()),op(this,"locks",0),op(this,"name",""),op(this,"lockId",void 0),this.lockId=d_++,e&&(this.name=e),p_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,p_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:""));const n=new cy((n=>{t=()=>{this.locks-=1,p_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:"")),n()}})),r=this.lockingPromise.then((()=>t));return this.lockingPromise=this.lockingPromise.then((()=>n)),r}}function f_(e,t){return function(n,r,i){const o=i.value;if("function"!=typeof o)throw new Error("Cannot use mutex on object property.");return i.value=async function(){const n=this[t];if(!n)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));const i=await n.lock("From ".concat(e,".").concat(r));try{for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return await o.apply(this,a)}finally{i()}},i}}const m_={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function g_(e,t){const n=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,n)}function v_(e,t,n,r){const i=Object.assign({},m_,r);let o=i.timeout;const s=async()=>{await function(e){return new cy((t=>{window.setTimeout(t,e)}))}(o),o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o)};let a=!1;const c=new cy((async(r,o)=>{t=t||(()=>!1),n=n||(()=>!0);for(let c=0;c<i.maxRetryCount;c+=1){if(a)return o(new Wy(Gy.OPERATION_ABORTED));try{const n=await e();if(!t(n,c))return r(n);if(c+1===i.maxRetryCount)return r(n);await s()}catch(e){if(!n(e,c))return o(e);if(c+1===i.maxRetryCount)return o(e);await s()}}}));return c.cancel=()=>a=!0,c}let y_=class{constructor(e){op(this,"input",[]),op(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return 0===this.input.length?0:zE(e=this.input).call(e,((e,t)=>e+t))/this.input.length}};function E_(e,t){return function(){return e.apply(t,arguments)}}const{toString:__}=Object.prototype,{getPrototypeOf:b_}=Object,S_=(T_=Object.create(null),e=>{const t=__.call(e);return T_[t]||(T_[t]=t.slice(8,-1).toLowerCase())});var T_;const I_=e=>(e=e.toLowerCase(),t=>S_(t)===e),N_=e=>t=>typeof t===e,{isArray:w_}=Array,C_=N_("undefined"),O_=I_("ArrayBuffer"),A_=N_("string"),R_=N_("function"),M_=N_("number"),D_=e=>null!==e&&"object"==typeof e,k_=e=>{if("object"!==S_(e))return!1;const t=b_(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},x_=I_("Date"),L_=I_("File"),P_=I_("Blob"),j_=I_("FileList"),U_=I_("URLSearchParams");function F_(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e)if("object"!=typeof e&&(e=[e]),w_(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function z_(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const B_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,V_=e=>!C_(e)&&e!==B_,H_=(G_="undefined"!=typeof Uint8Array&&b_(Uint8Array),e=>G_&&e instanceof G_);var G_;const W_=I_("HTMLFormElement"),Y_=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),q_=I_("RegExp"),K_=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};F_(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},Q_="abcdefghijklmnopqrstuvwxyz",J_="0123456789",X_={DIGIT:J_,ALPHA:Q_,ALPHA_DIGIT:Q_+Q_.toUpperCase()+J_},Z_=I_("AsyncFunction");var $_={isArray:w_,isArrayBuffer:O_,isBuffer:function(e){return null!==e&&!C_(e)&&null!==e.constructor&&!C_(e.constructor)&&R_(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||R_(e.append)&&("formdata"===(t=S_(e))||"object"===t&&R_(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&O_(e.buffer),t},isString:A_,isNumber:M_,isBoolean:e=>!0===e||!1===e,isObject:D_,isPlainObject:k_,isUndefined:C_,isDate:x_,isFile:L_,isBlob:P_,isRegExp:q_,isFunction:R_,isStream:e=>D_(e)&&R_(e.pipe),isURLSearchParams:U_,isTypedArray:H_,isFileList:j_,forEach:F_,merge:function e(){const{caseless:t}=V_(this)&&this||{},n={},r=(r,i)=>{const o=t&&z_(n,i)||i;k_(n[o])&&k_(r)?n[o]=e(n[o],r):k_(r)?n[o]=e({},r):w_(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&F_(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return F_(t,((t,r)=>{n&&R_(t)?e[r]=E_(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&b_(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:S_,kindOfTest:I_,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(w_(e))return e;let t=e.length;if(!M_(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:W_,hasOwnProperty:Y_,hasOwnProp:Y_,reduceDescriptors:K_,freezeMethods:e=>{K_(e,((t,n)=>{if(R_(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];R_(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return w_(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:z_,global:B_,isContextDefined:V_,ALPHABET:X_,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X_.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&R_(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(D_(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=w_(e)?[]:{};return F_(e,((e,t)=>{const o=n(e,r+1);!C_(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:Z_,isThenable:e=>e&&(D_(e)||R_(e))&&R_(e.then)&&R_(e.catch)};function eb(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}$_.inherits(eb,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$_.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const tb=eb.prototype,nb={};function rb(e){return $_.isPlainObject(e)||$_.isArray(e)}function ib(e){return $_.endsWith(e,"[]")?e.slice(0,-2):e}function ob(e,t,n){return e?e.concat(t).map((function(e,t){return e=ib(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{nb[e]={value:e}})),Object.defineProperties(eb,nb),Object.defineProperty(tb,"isAxiosError",{value:!0}),eb.from=(e,t,n,r,i,o)=>{const s=Object.create(tb);return $_.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),eb.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const sb=$_.toFlatObject($_,{},null,(function(e){return/^is[A-Z]/.test(e)}));function ab(e,t,n){if(!$_.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=$_.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!$_.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&$_.isSpecCompliantForm(t);if(!$_.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if($_.isDate(e))return e.toISOString();if(!a&&$_.isBlob(e))throw new eb("Blob is not supported. Use a Buffer instead.");return $_.isArrayBuffer(e)||$_.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"==typeof e)if($_.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if($_.isArray(e)&&function(e){return $_.isArray(e)&&!e.some(rb)}(e)||($_.isFileList(e)||$_.endsWith(n,"[]"))&&(a=$_.toArray(e)))return n=ib(n),a.forEach((function(e,r){!$_.isUndefined(e)&&null!==e&&t.append(!0===s?ob([n],r,o):null===s?n:n+"[]",c(e))})),!1;return!!rb(e)||(t.append(ob(i,n,o),c(e)),!1)}const u=[],d=Object.assign(sb,{defaultVisitor:l,convertValue:c,isVisitable:rb});if(!$_.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!$_.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),$_.forEach(n,(function(n,o){!0===(!($_.isUndefined(n)||null===n)&&i.call(t,n,$_.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),u.pop()}}(e),t}function cb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function lb(e,t){this._pairs=[],e&&ab(e,this,t)}const ub=lb.prototype;function db(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pb(e,t,n){if(!t)return e;const r=n&&n.encode||db,i=n&&n.serialize;let o;if(o=i?i(t,n):$_.isURLSearchParams(t)?t.toString():new lb(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}ub.append=function(e,t){this._pairs.push([e,t])},ub.toString=function(e){const t=e?function(t){return e.call(this,t,cb)}:cb;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var hb=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$_.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},fb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mb={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:lb,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const gb="undefined"!=typeof window&&"undefined"!=typeof document,vb=(yb="undefined"!=typeof navigator&&navigator.product,gb&&["ReactNative","NativeScript","NS"].indexOf(yb)<0);var yb;const Eb="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var _b={...Object.freeze({__proto__:null,hasBrowserEnv:gb,hasStandardBrowserEnv:vb,hasStandardBrowserWebWorkerEnv:Eb}),...mb};function bb(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;return o=!o&&$_.isArray(r)?r.length:o,a?($_.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s):(r[o]&&$_.isObject(r[o])||(r[o]=[]),t(e,n,r[o],i)&&$_.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s)}if($_.isFormData(e)&&$_.isFunction(e.entries)){const n={};return $_.forEachEntry(e,((e,r)=>{t(function(e){return $_.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const Sb={transitional:fb,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=$_.isObject(e);if(i&&$_.isHTMLForm(e)&&(e=new FormData(e)),$_.isFormData(e))return r?JSON.stringify(bb(e)):e;if($_.isArrayBuffer(e)||$_.isBuffer(e)||$_.isStream(e)||$_.isFile(e)||$_.isBlob(e))return e;if($_.isArrayBufferView(e))return e.buffer;if($_.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ab(e,new _b.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return _b.isNode&&$_.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=$_.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ab(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if($_.isString(e))try{return(t||JSON.parse)(e),$_.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Sb.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&$_.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw eb.from(e,eb.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_b.classes.FormData,Blob:_b.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$_.forEach(["delete","get","head","post","put","patch"],(e=>{Sb.headers[e]={}}));var Tb=Sb;const Ib=$_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Nb=Symbol("internals");function wb(e){return e&&String(e).trim().toLowerCase()}function Cb(e){return!1===e||null==e?e:$_.isArray(e)?e.map(Cb):String(e)}function Ob(e,t,n,r,i){return $_.isFunction(r)?r.call(this,t,n):(i&&(t=n),$_.isString(t)?$_.isString(r)?-1!==t.indexOf(r):$_.isRegExp(r)?r.test(t):void 0:void 0)}class Ab{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=wb(t);if(!i)throw new Error("header name must be a non-empty string");const o=$_.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=Cb(e))}const o=(e,t)=>$_.forEach(e,((e,n)=>i(e,n,t)));return $_.isPlainObject(e)||e instanceof this.constructor?o(e,t):$_.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Ib[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=wb(e)){const n=$_.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if($_.isFunction(t))return t.call(this,e,n);if($_.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=wb(e)){const n=$_.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ob(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=wb(e)){const i=$_.findKey(n,e);!i||t&&!Ob(0,n[i],i,t)||(delete n[i],r=!0)}}return $_.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Ob(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return $_.forEach(this,((r,i)=>{const o=$_.findKey(n,i);if(o)return t[o]=Cb(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=Cb(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return $_.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&$_.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Nb]=this[Nb]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=wb(e);t[r]||(function(e,t){const n=$_.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return $_.isArray(e)?e.forEach(r):r(e),this}}Ab.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),$_.reduceDescriptors(Ab.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),$_.freezeMethods(Ab);var Rb=Ab;function Mb(e,t){const n=this||Tb,r=t||n,i=Rb.from(r.headers);let o=r.data;return $_.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function Db(e){return!(!e||!e.__CANCEL__)}function kb(e,t,n){eb.call(this,null==e?"canceled":e,eb.ERR_CANCELED,t,n),this.name="CanceledError"}$_.inherits(kb,eb,{__CANCEL__:!0});var xb=_b.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];$_.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),$_.isString(r)&&s.push("path="+r),$_.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Lb(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Pb=_b.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=$_.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function jb(e,t){let n=0;const r=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[s];i||(i=c),n[o]=a,r[o]=c;let u=s,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-i<t)return;const p=l&&c-l;return p?Math.round(1e3*d/p):void 0}}(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,c=r(a);n=o;const l={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}var Ub="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=Rb.from(e.headers).normalize();let o,s,{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if($_.isFormData(r))if(_b.hasStandardBrowserEnv||_b.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(s=i.getContentType())){const[e,...t]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const d=Lb(e.baseURL,e.url);function p(){if(!u)return;const r=Rb.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new eb("Request failed with status code "+n.status,[eb.ERR_BAD_REQUEST,eb.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),pb(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=p:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(p)},u.onabort=function(){u&&(n(new eb("Request aborted",eb.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new eb("Network Error",eb.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||fb;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new eb(t,r.clarifyTimeoutError?eb.ETIMEDOUT:eb.ECONNABORTED,e,u)),u=null},_b.hasStandardBrowserEnv&&(c&&$_.isFunction(c)&&(c=c(e)),c||!1!==c&&Pb(d))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&xb.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in u&&$_.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),$_.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",jb(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",jb(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{u&&(n(!t||t.type?new kb(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(d);h&&-1===_b.protocols.indexOf(h)?n(new eb("Unsupported protocol "+h+":",eb.ERR_BAD_REQUEST,e)):u.send(r||null)}))};const Fb={http:null,xhr:Ub};$_.forEach(Fb,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const zb=e=>"- ".concat(e),Bb=e=>$_.isFunction(e)||null===e||!1===e;var Vb={getAdapter:e=>{e=$_.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!Bb(n)&&(r=Fb[(t=String(n)).toLowerCase()],void 0===r))throw new eb("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));throw new eb("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(zb).join("\n"):" "+zb(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r},adapters:Fb};function Hb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new kb(null,e)}function Gb(e){return Hb(e),e.headers=Rb.from(e.headers),e.data=Mb.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Vb.getAdapter(e.adapter||Tb.adapter)(e).then((function(t){return Hb(e),t.data=Mb.call(e,e.transformResponse,t),t.headers=Rb.from(t.headers),t}),(function(t){return Db(t)||(Hb(e),t&&t.response&&(t.response.data=Mb.call(e,e.transformResponse,t.response),t.response.headers=Rb.from(t.response.headers))),Promise.reject(t)}))}const Wb=e=>e instanceof Rb?e.toJSON():e;function Yb(e,t){t=t||{};const n={};function r(e,t,n){return $_.isPlainObject(e)&&$_.isPlainObject(t)?$_.merge.call({caseless:n},e,t):$_.isPlainObject(t)?$_.merge({},t):$_.isArray(t)?t.slice():t}function i(e,t,n){return $_.isUndefined(t)?$_.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!$_.isUndefined(t))return r(void 0,t)}function s(e,t){return $_.isUndefined(t)?$_.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(Wb(e),Wb(t),!0)};return $_.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=c[r]||i,s=o(e[r],t[r],r);$_.isUndefined(s)&&o!==a||(n[r]=s)})),n}const qb="1.6.7",Kb={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Kb[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Qb={};Kb.transitional=function(e,t,n){function r(e,t){return"[Axios v"+qb+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new eb(r(i," has been removed"+(t?" in "+t:"")),eb.ERR_DEPRECATED);return t&&!Qb[i]&&(Qb[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var Jb={assertOptions:function(e,t,n){if("object"!=typeof e)throw new eb("options must be an object",eb.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new eb("option "+o+" must be "+n,eb.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new eb("Unknown option "+o,eb.ERR_BAD_OPTION)}},validators:Kb};const Xb=Jb.validators;let Zb=class{constructor(e){this.defaults=e,this.interceptors={request:new hb,response:new hb}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Yb(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Jb.assertOptions(n,{silentJSONParsing:Xb.transitional(Xb.boolean),forcedJSONParsing:Xb.transitional(Xb.boolean),clarifyTimeoutError:Xb.transitional(Xb.boolean)},!1),null!=r&&($_.isFunction(r)?t.paramsSerializer={serialize:r}:Jb.assertOptions(r,{encode:Xb.function,serialize:Xb.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&$_.merge(i.common,i[t.method]);i&&$_.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Rb.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[Gb.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=s.length;let p=t;for(d=0;d<u;){const t=s[d++],n=s[d++];try{p=t(p)}catch(e){n.call(this,e);break}}try{l=Gb.call(this,p)}catch(e){return Promise.reject(e)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return pb(Lb((e=Yb(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};$_.forEach(["delete","get","head","options"],(function(e){Zb.prototype[e]=function(t,n){return this.request(Yb(n||{},{method:e,url:t,data:(n||{}).data}))}})),$_.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Yb(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Zb.prototype[e]=t(),Zb.prototype[e+"Form"]=t(!0)}));var $b=Zb;class eS{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new kb(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new eS((function(t){e=t})),cancel:e}}}var tS=eS;const nS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nS).forEach((e=>{let[t,n]=e;nS[n]=t}));var rS=nS;const iS=function e(t){const n=new $b(t),r=E_($b.prototype.request,n);return $_.extend(r,$b.prototype,n,{allOwnKeys:!0}),$_.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Yb(t,n))},r}(Tb);iS.Axios=$b,iS.CanceledError=kb,iS.CancelToken=tS,iS.isCancel=Db,iS.VERSION=qb,iS.toFormData=ab,iS.AxiosError=eb,iS.Cancel=iS.CanceledError,iS.all=function(e){return Promise.all(e)},iS.spread=function(e){return function(t){return e.apply(null,t)}},iS.isAxiosError=function(e){return $_.isObject(e)&&!0===e.isAxiosError},iS.mergeConfig=Yb,iS.AxiosHeaders=Rb,iS.formToJSON=e=>bb($_.isHTMLForm(e)?new FormData(e):e),iS.getAdapter=Vb.getAdapter,iS.HttpStatusCode=rS,iS.default=iS;var oS=iS;function sS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sS(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let cS,lS=0,uS=0;function dS(e,t,n,r){return new cy(((i,o)=>{t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),lS+=$E(t.data)):n&&(t.data.size?lS+=t.data.size:t.data instanceof FormData?lS+=e_(t.data):lS+=$E(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,oS.request(t).then((e=>{"string"==typeof e.data?uS+=$E(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?uS+=e.data.byteLength:uS+=$E(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((e=>{oS.isCancel(e)?o(new Wy(Gy.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new Wy(Gy.NETWORK_TIMEOUT,e.message)):e.response?o(new Wy(Gy.NETWORK_RESPONSE_ERROR,e.response.status)):o(new Wy(Gy.NETWORK_ERROR,e.message))}))}))}async function pS(e,t){const n=new Blob([t.data],{type:"buffer"});return await dS(e,aS(aS({},t),{},{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}const hS=()=>"HTTPS"===(cS||cS||(cS=(window.location.protocol.split(":")[0]||"").toUpperCase(),cS)),fS=()=>void 0!==window.isSecureContext,mS=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){const e=t[1],n=t[2];return"".concat(e,".").concat(n)}const n=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(n&&n[1]&&n[2]){const e=n[1],t=n[2];return"".concat(e,".").concat(100*(Number(t)+1))}return"4.0.0.999"}("4.20.2"),gS=function(){try{return!0===JSON.parse("true")}catch(e){return!0}}();var vS;!function(e){e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn"}(vS||(vS={}));const yS="v4.20.2-0-g8ae7fdad(3/20/2024, 4:48:46 PM)",ES={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:100,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,DISABLE_FEC:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,ENABLE_DATASTREAM_2:!1,DATASTREAM_MAX_RETRANSMITS:10,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,ENABLE_INSTANT_VIDEO:!1,ENABLE_NTP_REPORT:!1,USE_XR:!1,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],PLUGIN_INFO:[]};function _S(e,t,n){var r,i;Or(r=Object.keys(ES)).call(r,e)&&(!n&&Or(i=Object.keys(SS)).call(i,e)||(ES[e]=t,"ENABLE_VIDEO_SEI"===e&&!0===t&&(ES.ENABLE_ENCODED_TRANSFORM=!0)))}function bS(e){return ES[e]}const SS={};function TS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TS(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var NS,wS,CS;!function(e){e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE"}(NS||(NS={}));class OS{constructor(e,t,n,r){op(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:n,clientId:r,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1,useP2P:!1,p2pTransport:vS.Default}}dispatch(e){this.state=function(e,t){switch(t.type){case NS.SET_SESSION_ID:return IS(IS({},e),{},{sessionId:t.sessionId});case NS.SET_P2P_ID:return IS(IS({},e),{},{p2pId:t.p2pId});case NS.SET_UID:return IS(IS({},e),{},{uid:t.uid});case NS.SET_INT_UID:return IS(IS({},e),{},{intUid:t.intUid});case NS.SET_PUB_ID:return IS(IS({},e),{},{pubId:t.pubId});case NS.KEY_METRIC_CLIENT_CREATED:return IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{clientCreated:t.metric})});case NS.KEY_METRIC_JOIN_START:return IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{joinStart:t.metric})});case NS.AVOID_JOIN_START:return IS(IS({},e),{},{avoidJoinStart:t.avoidJoinStart});case NS.KEY_METRIC_JOIN_END:return IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{joinEnd:t.metric})});case NS.KEY_METRIC_REQUEST_AP_START:return IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{requestAPStart:t.metric})});case NS.KEY_METRIC_REQUEST_AP_END:return IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{requestAPEnd:t.metric})});case NS.KEY_METRIC_JOIN_GATEWAY_START:return IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case NS.KEY_METRIC_JOIN_GATEWAY_END:return IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case NS.KEY_METRIC_PEER_CONNECTION_START:return IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case NS.KEY_METRIC_PEER_CONNECTION_END:return IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case NS.KEY_METRIC_DESCRIPTION_START:return IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{descriptionStart:t.metric})});case NS.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case NS.KEY_METRIC_ICE_CONNECTION_END:return IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case NS.KEY_METRIC_PUBLISH:{const n=e.keyMetrics.publish,r=n.findIndex((e=>e.trackId===t.metric.trackId));return-1!==r?(n[r]=IS(IS({},n[r]),t.metric),IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{publish:[...n]})})):IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{publish:[...e.keyMetrics.publish,t.metric]})})}case NS.KEY_METRIC_SUBSCRIBE:{const n=e.keyMetrics.subscribe,r=n.findIndex((e=>e.userId===t.metric.userId&&e.type===t.metric.type));return-1!==r?(n[r]=IS(IS({},n[r]),t.metric),IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{subscribe:[...n]})})):IS(IS({},e),{},{keyMetrics:IS(IS({},e.keyMetrics),{},{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}case NS.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case NS.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof t.index?e.joinChannelServiceRecords=[...e.joinChannelServiceRecords,t.record]:(e.joinChannelServiceRecords[t.index]=IS(IS({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=[...e.joinChannelServiceRecords]),e;case NS.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case NS.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case NS.SET_USE_DATACHANNEL:return IS(IS({},e),{},{useDataChannel:t.val});case NS.SET_USE_P2P:return IS(IS({},e),{},{useP2P:t.val});case NS.SET_TRANSPORT_TYPE:return IS(IS({},e),{},{p2pTransport:t.val});default:return e}}(this.state,e)}set sessionId(e){this.dispatch({type:NS.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:NS.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:NS.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:NS.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:NS.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:NS.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:NS.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(e){this.dispatch({type:NS.SET_USE_DATACHANNEL,val:e})}get useDataChannel(){return this.state.useDataChannel}set useP2P(e){this.dispatch({type:NS.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:NS.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:NS.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:NS.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:NS.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:NS.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:NS.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:NS.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:NS.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:NS.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:NS.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:NS.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:NS.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:NS.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,n,r){this.dispatch({type:NS.KEY_METRIC_PUBLISH,metric:IS(IS({trackId:e,type:t},n&&{publishStart:n}),r&&{publishEnd:r})})}subscribe(e,t,n,r,i,o,s){this.dispatch({type:NS.KEY_METRIC_SUBSCRIBE,metric:IS(IS(IS(IS(IS({userId:e,type:t},n&&{subscribeStart:n}),r&&{subscribeEnd:r}),i&&{firstFrame:i}),o&&{streamAdded:o}),s&&{firstDecoded:s})})}massSubscribe(e,t,n,r){e.forEach((e=>{this.dispatch({type:NS.KEY_METRIC_SUBSCRIBE,metric:IS(IS(IS({userId:e.userId,type:e.type},t&&{subscribeStart:t}),n&&{subscribeEnd:n}),r&&{firstFrame:r})})}))}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){"gateway"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((e=>e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2"))));try{return"number"!=typeof t?(this.dispatch({type:NS.RECORD_JOIN_CHANNEL_SERVICE,record:IS(IS({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:NS.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:NS.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:NS.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch(e){return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:NS.AVOID_JOIN_START,avoidJoinStart:e})}}!function(e){e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1"}(wS||(wS={})),function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"}(CS||(CS={}));const AS=128,RS=96,MS=1e3,DS=10;let kS=0;const xS=new class extends lE{reportLogUploadError(e){this.emit("REPORT_LOG_UPLOAD",e)}};class LS{constructor(e){op(this,"logger",void 0),op(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}}function PS(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function jS(){const e=new Date,t=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const US={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},FS=Date.now(),zS=e=>{for(const t in US)if(Object.prototype.hasOwnProperty.call(US,t)&&US[t]===e)return t;return"DEFAULT"},BS=new class{constructor(){op(this,"proxyServerURL",void 0),op(this,"logLevel",US.DEBUG),op(this,"uploadState","collecting"),op(this,"uploadLogWaitingList",[]),op(this,"uploadLogUploadingList",[]),op(this,"uploadErrorCount",0),op(this,"currentLogID",0),op(this,"url",void 0),op(this,"extLog",((e,t)=>{this.appendLogToWaitingList(e,...t)}))}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[US.DEBUG].concat(t);this.log.apply(this,r)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[US.INFO].concat(t);this.log.apply(this,r)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[US.WARNING].concat(t);this.log.apply(this,r)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[US.ERROR].concat(t);this.log.apply(this,r)}upload(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[US.DEBUG].concat(t);this.uploadLog.apply(this,r)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){_S("UPLOAD_LOG",!0)}disableLogUpload(){_S("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new LS(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-FS<100)return void setTimeout((()=>{this.log(...t)}),Date.now()-FS);const r=Math.max(0,Math.min(4,t[0]));if(t[0]=PS()+" Agora-SDK [".concat(zS(r),"]:"),this.appendLogToWaitingList(r,...t),r<this.logLevel)return;const i=PS()+" %cAgora-SDK [".concat(zS(r),"]:");let o=[];if(!bS("USE_NEW_LOG"))switch(r){case US.DEBUG:o=[i,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,o);break;case US.INFO:o=[i,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,o);break;case US.WARNING:o=[i,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,o);break;case US.ERROR:o=[i,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,o)}}uploadLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-FS<100)return void setTimeout((()=>{this.uploadLog(...t)}),Date.now()-FS);const r=Math.max(0,Math.min(4,t[0]));t[0]=PS()+" Agora-SDK [".concat(zS(r),"]:"),this.appendLogToWaitingList(r,...t)}appendLogToWaitingList(e){if(!bS("UPLOAD_LOG"))return;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Array.isArray(n[0])?n[0][0]=jS()+" Agora-SDK [".concat(zS(e),"]:"):n[0]=jS()+" Agora-SDK [".concat(zS(e),"]:");let i="";n.forEach((e=>{"object"==typeof e&&(e=JSON.stringify(e)),i+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,t={sdk_version:mS,process_id:bS("PROCESS_ID"),payload:JSON.stringify(e)};return v_((async()=>{const e=await oS.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(bS("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(bS("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if("OK"!==e.data){const t=new Error("unexpected upload log response");throw t.response=e,t}}),(()=>(this.uploadLogUploadingList=[],!1)),(e=>(e.response?xS.reportLogUploadError({status:e.response.status,data:e.response.data,headers:e.response.headers,message:e.message}):e.request?xS.reportLogUploadError({status:e.request.status,message:e.message}):xS.reportLogUploadError({status:-1,message:e.message}),!0)),{timeout:bS("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:bS("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,bS("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then((()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout((()=>this.uploadLogInterval()),bS("UPLOAD_LOG_INTERVAL"))})).catch((e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout((()=>this.uploadLogInterval()),bS("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout((()=>this.uploadLogInterval()),bS("UPLOAD_LOG_RETRY_INTERVAL_V1"))})))}};var VS,HS;function GS(e){return Jy(e.reportId,"params.reportId",0,100,!1),Jy(e.category,"params.category",0,100,!1),Jy(e.event,"params.event",0,100,!1),Jy(e.label,"params.label",0,100,!1),Ky(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}!function(e){e.FREE="free",e.UPLOADING="uploading"}(VS||(VS={})),function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}(HS||(HS={}));const WS={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};var YS,qS,KS,QS;function JS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JS(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities"}(YS||(YS={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities"}(qS||(qS={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(KS||(KS={})),function(e){e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(QS||(QS={}));class ZS{constructor(){op(this,"baseInfoMap",new Map),op(this,"proxyServer",void 0),op(this,"eventUploadTimer",void 0),op(this,"setSessionIdTimer",void 0),op(this,"url",void 0),op(this,"backupUrl",void 0),op(this,"_appId",void 0),op(this,"keyEventUploadPendingItems",[]),op(this,"normalEventUploadPendingItems",[]),op(this,"apiInvokeUploadPendingItems",[]),op(this,"apiInvokeCount",0),op(this,"ltsList",[]),op(this,"lastSendNormalEventTime",Date.now()),op(this,"customReportCounterTimer",void 0),op(this,"customReportCount",0),op(this,"extApiInvoke",(async e=>{for(const t of e){const e=XS(XS({},t),{},{sid:null,invokeId:++this.apiInvokeCount,tag:hE.TRACER});this.sendApiInvoke(e)}})),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),bS("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),bS("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(e){return this.baseInfoMap.get(e)}adjustSessionStartTime(e){if(!this.baseInfoMap.has(e)&&!this.baseInfoMap.get(e))return void BS.error("adjust session ".concat(e," start time, sid is not exist or info is undefined"));const t=this.baseInfoMap.get(e),n=Date.now(),r=t.startTime;t.startTime=n,BS.debug("rewrite session ".concat(e," startTime: ").concat(n," , ").concat(n-r,"ms")),this.baseInfoMap.set(e,t)}setAppId(e){this._appId=e}reportApiInvoke(e,t,n){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const r=Date.now();this.apiInvokeCount+=1;const i=this.apiInvokeCount,o=()=>({tag:t.tag,invokeId:i,sid:e,name:t.name,apiInvokeTime:r,options:t.options,states:t.states||null}),s=!!bS("SHOW_REPORT_INVOKER_LOG");s&&BS.info("".concat(t.name," start"),t.options);let a=!1;n_(t.timeout).then((()=>{a||(this.sendApiInvoke(XS(XS({},o()),{},{error:Gy.API_INVOKE_TIMEOUT,success:!1})),BS.debug("".concat(t.name," timeout")))}));const c=new Wy(Gy.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const r=()=>{if(a)throw c;return a=!0,this.sendApiInvoke(XS(XS({},o()),{},{success:!0},t.reportResult&&{result:e})),s&&BS.info("".concat(t.name," onSuccess")),e};return n?a_(r,t.name+"Success",n,(()=>a=!0)):r()},onError:e=>{const r=()=>{if(a)throw e;a=!0,this.sendApiInvoke(XS(XS({},o()),{},{success:!1,error:e})),s&&BS.info("".concat(t.name," onFailure"),e.toString())};return n?a_(r,t.name+"Error",n,(()=>a=!0)):r()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const n=Date.now(),r=this.createBaseInfo(e,n);r.cname=t.cname;const i=Object.assign({},{willUploadConsoleLog:bS("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:gS?"global":"oversea",areas:bS("AREAS")&&bS("AREAS").join(",")},t.extend),{stringUid:o,channelProfile:s,channelMode:a,isABTestSuccess:c,lsid:l,clientRole:u}=t,d=Date.now(),p=XS(XS({},r),{},{eventType:YS.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:yS,lts:d,elapse:d-n,extend:JSON.stringify(i),mode:t.mode,process:bS("PROCESS_ID"),appType:bS("APP_TYPE"),success:!0,version:mS,stringUid:o,channelProfile:s,channelMode:a,isABTestSuccess:c,lsid:l,clientType:20,clientRole:u,serviceId:bS("PROCESS_ID"),extensionID:bS("PLUGIN_INFO").join(",")||""});this.send({type:qS.SESSION,data:p},!0)}joinChooseServer(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XS(XS({},r),{},{eventType:YS.JOIN_CHOOSE_SERVER,lts:i,eventElapse:i-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:i-n.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3});this.send({type:qS.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XS(XS({},r),{},{eventType:YS.REQ_USER_ACCOUNT,lts:i,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:i-n.startTime,eventElapse:i-t.lts,extend:JSON.stringify(t.extend)});this.send({type:qS.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info;t.vid&&(r.vid=t.vid),r.uid=t.uid,r.cid=t.cid;const i=Date.now(),{firstSuccess:o,avoidJoinStartTime:s,isProxy:a,addr:c}=t,l=i-(o&&s?s:n.startTime),u=XS(XS({},r),{},{eventType:YS.JOIN_GATEWAY,lts:i,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:l,eventElapse:i-t.lts,firstSuccess:o,signalChannel:t.signalChannel}),d=u.success?1:0;if(t.succ&&(n.lastJoinSuccessTime=i),o)this.send({type:qS.JOIN_GATEWAY,data:u},!0);else{let e;if(c)if(a){const t=c.match(/h=(\d{1,3}-){3}\d{1,3}/g),n=c.match(/p=[0-9]{1,6}/g);e={isSuccess:d,gatewayIp:t&&t.length?t[0].split("=")[1].replace(/-/g,"."):"",port:n&&n.length?n[0].split("=")[1]:"",isProxy:a?1:0}}else{const t=c.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),n=c.match(/(:|p=)[0-9]{1,6}/g);e={isSuccess:d,gatewayIp:t&&t.length?t[0].split("//")[1].replace(/-/g,"."):"",port:n&&n.length?n[0].split(/:|p=/g)[1]:"",isProxy:a?1:0}}else e={isSuccess:d,gatewayIp:"",port:"",isProxy:a?1:0};delete u.success,delete u.eventType,delete u.firstSuccess,u.vid=Number(u.vid);const t=Object.assign({},u,e,{eventType:YS.REJOIN_GATEWAY});this.send({type:qS.RE_JOIN_GATEWAY,data:t},!0)}}joinChannelTimeout(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=Date.now(),i=XS(XS({},n.info),{},{lts:r,timeout:t,elapse:r-n.startTime});this.send({type:qS.JOIN_CHANNEL_TIMEOUT,data:i},!0)}publish(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XS(XS({},r),{},{eventType:YS.PUBLISH,lts:i,eventElapse:t.eventElapse,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:qS.PUBLISH,data:o},!0)}subscribe(e,t,n){const r=this.baseInfoMap.get(e);if(!r)return;const i=r.info,o=Date.now(),s=XS(XS({},i),{},{eventType:YS.SUBSCRIBE,lts:o,eventElapse:t.eventElapse,elapse:o-r.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid},n&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof t.peerid?s.peerSuid=t.peerid:s.peer=t.peerid,this.send({type:qS.SUBSCRIBE,data:s},!0)}wsCompressorInit(e){var t;const n=[...hp(t=this.baseInfoMap).call(t)],r=n.length?n[0]:"UnableToGetSid",i=this.baseInfoMap.get(r);if(!i)return;const o=i.info,s=Date.now(),a=XS(XS({},o),{},{eventType:YS.WS_COMPRESSOR_INIT,lts:s,eventElapse:e.eventElapse,elapse:s-i.startTime,status:e.status?1:2});this.send({type:qS.WS_COMPRESSOR_INIT,data:a},!0)}firstRemoteVideoDecode(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Date.now(),a=XS(XS(XS({},o),r),{},{elapse:s-i.startTime,eventType:t,lts:s,firstDecodeFrame:Math.max(s-i.startTime,0),apEnd:Math.max(r.apEnd-i.startTime,0),apStart:Math.max(r.apStart-i.startTime,0),joinGwEnd:Math.max(r.joinGwEnd-i.startTime,0),joinGwStart:Math.max(r.joinGwStart-i.startTime,0),pcEnd:Math.max(r.pcEnd-i.startTime,0),pcStart:Math.max(r.pcStart-i.startTime,0),subscriberEnd:Math.max(r.subscriberEnd-i.startTime,0),subscriberStart:Math.max(r.subscriberStart-i.startTime,0),videoAddNotify:Math.max(r.videoAddNotify-i.startTime,0)});this.send({type:n,data:a},!0)}firstRemoteFrame(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Date.now(),a=XS(XS(XS({},o),r),{},{elapse:s-i.startTime,eventType:t,lts:s});this.send({type:n,data:a},!0)}pcStats(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XS(XS(XS({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),elapse:i-n.startTime,eventType:YS.PC_STATS,lts:i});this.send({type:qS.PC_STATS,data:o},!0)}updateRemoteRTPCapabilities(e,t){if(e){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XS(XS(XS({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),eventType:YS.UPDATE_REMOTE_RTPCAPABILITIES,lts:i});this.send({type:qS.UPDATE_REMOTE_RTPCAPABILITIES,data:o},!0)}}onGatewayStream(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Date.now(),a=XS(XS(XS({},o),r),{},{eventType:t,lts:s});this.send({type:n,data:a},!0)}streamSwitch(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XS(XS({},r),{},{eventType:YS.STREAM_SWITCH,lts:i,isDual:t.isdual,elapse:i-n.startTime,success:t.succ});this.send({type:qS.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XS(XS({},r),{},{eventType:YS.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:qS.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XS(XS({},r),{},{eventType:YS.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:qS.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(e){this.proxyServer=e,e?BS.debug("reportProxyServerurl: ".concat(e)):BS.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XS(XS({},r),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:qS.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=function(e,t,n){const r=e[t];if(!r||"string"!=typeof r)return[e];e[t]="";const i=$E(JSON.stringify(e));let o=0;const s=[];let a=0;for(let c=0;c<r.length;c++)a+=r.charCodeAt(c)<=127?1:3,a<=n-i||(s[s.length]=VE(VE({},e),{},{[t]:r.substring(o,c)}),o=c,a=r.charCodeAt(c)<=127?1:3);return o!==r.length-1&&(s[s.length]=VE(VE({},e),{},{[t]:r.substring(o)})),s}(XS(XS(XS({},r),t),{},{elapse:i-n.startTime,lts:i,productType:"WebRTC"}),"payload",1300);o.forEach((e=>this.send({type:qS.WORKER_EVENT,data:e},!0)))}apworkerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XS(XS(XS({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:qS.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XS(XS(XS({},r),t),{},{elapse:i-n.startTime,lts:i,extend:t.extend||void 0});this.send({type:qS.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=XS(XS(XS({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:qS.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>bS("CUSTOM_REPORT_LIMIT"))throw new Wy(Gy.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3));const n=Date.now(),r=t.map((t=>({type:qS.USER_ANALYTICS,data:XS(XS({sid:e},t),{},{lts:n})})));try{bS("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(r):await this.postDataToStatsCollector(r)}catch(e){throw BS.error("send custom report message failed",e.toString()),new Wy(Gy.CUSTOM_REPORT_SEND_FAILED,e.message)}}sendApiInvoke(e){const t=bS("NOT_REPORT_EVENT");if(e.tag&&Or(t)&&Or(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:r,uid:i,cid:o}=n.info;let s;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof Wy){const{code:t,message:n}=e.error;s=t||n||e.error.toString()}else s=e.error.toString();const a={invokeId:e.invokeId,sid:e.sid,cname:r,cid:o,uid:i,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?s:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:qS.API_INVOKE,data:a},!1),!0}appendSessionId(){ZS.__CLIENT_LIST__.forEach((e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let n=0;n<t;n++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(Object.assign({},t)))}}}))}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>bS("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const n=[],r=[];for(;e.length;){const t=e.shift();n.length<20?n.push(t):r.push(t)}e.push(...r);for(const o of[...n]){var i;-1!==this.ltsList.indexOf(o.data.lts)?(o.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(o.data.lts)):(this.ltsList.push(o.data.lts),eh(i=this.ltsList).call(i,((e,t)=>e-t)))}return t||(this.lastSendNormalEventTime=Date.now()),bS("ENABLE_EVENT_REPORT")?(n.length&&(bS("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((e=>n=>{bS("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(e):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(e),this.normalEventUploadPendingItems.length>bS("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-bS("NORMAL_EVENT_QUEUE_CAPACITY")),BS.warning("report: drop normal events"))))})(n)),e):e}async postDataToStatsCollector2(e){OE.networkState===yE.OFFLINE&&await cy.race([OE.onlineWaiter,n_(2*m_.maxRetryTimeout)]);const t=e=>{let t=new Uint8Array;return e.forEach((e=>{const n=oE(JSON.stringify(e.data)),r=new ArrayBuffer(5),i=(e=>{let t=0;return Object.entries(qS).forEach((n=>{let[r,i]=n;i===e.type&&(t=EventNameToID[r])})),t})(e),o=new DataView(r);o.setUint16(0,n.byteLength,!0),o.setUint8(2,255&i),o.setUint8(3,i>>>8&255),o.setUint8(4,i>>>16&255),t=sE(t,new Uint8Array(r)),t=sE(t,n)})),t},n="event";let r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(bS("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(n):"https://".concat(bS("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(n);for(let i=0;i<2;i+=1){1===i&&(r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(bS("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(n):"https://".concat(bS("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(n));try{await dS(r,{timeout:1e4,data:t(e),headers:XS(XS({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(e){if(1===i)throw e;continue}return}}async postDataToStatsCollector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:e.map((e=>JSON.stringify(e))),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(e[0])};OE.networkState===yE.OFFLINE&&await cy.race([OE.onlineWaiter,n_(2*m_.maxRetryTimeout)]);const r=t?"/events/proto-raws":"/events/messages";let i=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(bS("EVENT_REPORT_DOMAIN"),"&p=").concat(bS("STATS_COLLECTOR_PORT"),"&d=").concat(r):"https://".concat(bS("EVENT_REPORT_DOMAIN"),":").concat(bS("STATS_COLLECTOR_PORT")).concat(r));for(let o=0;o<2;o+=1){1===o&&(i=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(bS("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(bS("STATS_COLLECTOR_PORT"),"&d=").concat(r):"https://".concat(bS("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(bS("STATS_COLLECTOR_PORT")).concat(r)));try{t?await pS(i,{timeout:1e4,data:n}):await dS(i,{timeout:1e4,data:n})}catch(t){if(1===o)throw t;continue}return}}createBaseInfo(e,t){const n=Object.assign({},WS);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}reportResourceTiming(e,t){const n=performance.getEntriesByName(e),r=n[n.length-1];r&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:r,tag:hE.TRACER}).onSuccess()}}function $S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){const i=r.value;if("function"==typeof i){const o=e.className||t.__className__||("AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name);r.value=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];let a=r;if(e.argsMap)try{a=e.argsMap(this,...r)}catch(e){BS.warning(e),a=[]}try{JSON.stringify(a)}catch(e){BS.warning("arguments for method ".concat(o,".").concat(String(n)," not serializable for apiInvoke.")),a=[]}const c=(e.report||eT).reportApiInvoke(this._sessionId||null,{name:"".concat(o,".").concat(String(n)),options:a,tag:hE.TRACER,reportResult:e.reportResult},e.throttleTime);try{const t=i.apply(this,r);return t instanceof cy?t.then((t=>(c.onSuccess(e.reportResult&&t),t))).catch((e=>{throw c.onError(e),e})):(c.onSuccess(e.reportResult&&t),t)}catch(e){throw c.onError(e),e}}}return r}}op(ZS,"__CLIENT_LIST__",[]);const eT=new ZS;xS.on("REPORT_LOG_UPLOAD",(e=>{e.networkState=OE.networkState,eT.reportApiInvoke(null,{name:"logUploadError",options:e,tag:hE.TRACER})}));const tT=["CHINA","GLOBAL"],nT=function(){const e="us".concat("erna","me"),t="pa".concat("sswo","rd"),n=["t","s","t"];n.splice(1,0,"e");const r=n.join(""),i=[];for(let a=0;a<6;a++)i.push("1");const o=i.join(""),s={};return s[e]=r,s[t]=o,Object.assign(s,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=nT,gS||(ES.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],ES.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],ES.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],ES.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ES.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],ES.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],ES.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",ES.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",ES.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",ES.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",ES.AREAS=["NORTH_AMERICA","OVERSEA"]);const rT=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],iT=[];function oT(e,t){return!!t&&iT.some((n=>n.uid===e&&n.channelName===t))}ZS.__CLIENT_LIST__=iT;var sT,aT,cT,lT,uT,dT,pT,hT,fT,mT,gT,vT,yT,ET,_T,bT,ST,TT=Jn("Array").values,IT=dr,NT=$e,wT=d,CT=TT,OT=Array.prototype,AT={DOMTokenList:!0,NodeList:!0},RT=r((function(e){var t=e.values;return e===OT||wT(OT,e)&&t===OT.values||NT(AT,IT(e))?CT:t}));function MT(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function DT(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}!function(e){e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY"}(sT||(sT={})),function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(aT||(aT={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(cT||(cT={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(lT||(lT={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(uT||(uT={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(dT||(dT={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(pT||(pT={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(hT||(hT={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_CONNECTING="datachannel_connecting",e.DATACHANNEL_FAILBACK="datachannel_failback",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream"}(fT||(fT={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag"}(mT||(mT={})),function(e){e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats"}(gT||(gT={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list"}(vT||(vT={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(yT||(yT={})),function(e){e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY"}(ET||(ET={})),function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"}(_T||(_T={}));class kT extends Wy{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2?arguments[2]:void 0),op(this,"name","AgoraRTCException")}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return super.print(e,BS)}throw(){super.throw(BS)}}function xT(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw BS.error("Invalid Channel Name ".concat(e)),new kT(Gy.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function LT(e){if(!("number"==typeof(t=e)&&Math.floor(t)===t&&0<=t&&t<=4294967295||$y(e,1,255)))throw new kT(Gy.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var t;"string"==typeof e&&BS.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}!function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(bT||(bT={})),function(e){e[e.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",e[e.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",e[e.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",e[e.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",e[e.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",e[e.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",e[e.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",e[e.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",e[e.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(ST||(ST={}));const PT={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},jT={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function UT(e,t){Jy(e.url,"".concat(t,".url"),1,1e3,!1),Zy(e.x)||Ky(e.x,"".concat(t,".x"),0,1e4),Zy(e.y)||Ky(e.y,"".concat(t,".y"),0,1e4),Zy(e.width)||Ky(e.width,"".concat(t,".width"),0,1e4),Zy(e.height)||Ky(e.height,"".concat(t,".height"),0,1e4),Zy(e.zOrder)||Ky(e.zOrder,"".concat(t,".zOrder"),0,255),Zy(e.alpha)||Ky(e.alpha,"".concat(t,".alpha"),0,1,!1)}const FT={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},zT={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};var BT,VT,HT,GT,WT,YT,qT,KT,QT,JT,XT,ZT,$T,eI;function tI(e){if(!e.channelName)throw new kT(Gy.INVALID_PARAMS,"invalid channelName in info");if("number"!=typeof e.uid)throw new kT(Gy.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&Jy(e.token,"info.token",1,2047),LT(e.uid),xT(e.channelName),!0}!function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(BT||(BT={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(VT||(VT={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(HT||(HT={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(GT||(GT={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(WT||(WT={})),function(e){e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(YT||(YT={})),function(e){e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(qT||(qT={})),function(e){e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(KT||(KT={})),function(e){e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low"}(QT||(QT={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_FAILBACK="datachannel_failback",e.RESET_SIGNAL="reset-signal"}(JT||(JT={})),function(e){e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON"}(XT||(XT={})),function(e){e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7"}(ZT||(ZT={})),function(e){e[e.websocket=0]="websocket",e[e.datachannel=1]="datachannel"}($T||($T={})),function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS"}(eI||(eI={}));const nI=[eI.AFRICA,eI.ASIA,eI.CHINA,eI.EUROPE,eI.GLOBAL,eI.INDIA,eI.JAPAN,eI.NORTH_AMERICA,eI.OCEANIA,eI.OVERSEA,eI.SOUTH_AMERICA];var rI;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL"}(rI||(rI={}));const iI={CHINA:{},ASIA:{CODE:rI.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:rI.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:rI.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:rI.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:rI.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:rI.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:rI.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:rI.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:rI.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:rI.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:rI.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:rI.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:rI.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};var oI,sI,aI,cI,lI,uI,dI,pI,hI,fI,mI,gI,vI,yI,EI,_I,bI,SI,TI,II,NI,wI,CI,OI;gS&&(iI.CHINA={CODE:rI.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(oI||(oI={}));class AI extends lE{constructor(e,t){super(),op(this,"onICEConnectionStateChange",void 0),op(this,"onConnectionStateChange",void 0),op(this,"onDTLSTransportStateChange",void 0),op(this,"onDTLSTransportError",void 0),op(this,"onICETransportStateChange",void 0),op(this,"onFirstAudioReceived",void 0),op(this,"onFirstVideoReceived",void 0),op(this,"onFirstAudioDecoded",void 0),op(this,"onFirstVideoDecoded",void 0),op(this,"onFirstVideoDecodedTimeout",void 0),op(this,"onSelectedLocalCandidateChanged",void 0),op(this,"onSelectedRemoteCandidateChanged",void 0)}}class RI extends AI{constructor(e,t){super(e,t)}}!function(e){e.SEND="sendonly",e.RECV="recvonly",e.SENDRECV="sendrecv",e.INACTIVE="inactive"}(sI||(sI={})),function(e){e.VIDEO="video",e.AUDIO="audio"}(aI||(aI={})),function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY"}(cI||(cI={})),function(e){e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(lI||(lI={})),function(e){e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack"}(uI||(uI={})),function(e){e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected"}(dI||(dI={})),function(e){e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE"}(pI||(pI={})),function(e){e.MUTE_LOCAL_VIDEO="mute_local_video",e.MUTE_LOCAL_AUDIO="mute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.MUTE_REMOTE_VIDEO="mute_remote_video",e.MUTE_REMOTE_AUDIO="mute_remote_audio",e.UNMUTE_REMOTE_VIDEO="unmute_remote_video",e.UNMUTE_REMOTE_AUDIO="unmute_remote_audio"}(hI||(hI={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(fI||(fI={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(mI||(mI={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(gI||(gI={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(vI||(vI={})),function(e){e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback"}(yI||(yI={})),function(e){e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation"}(EI||(EI={})),function(e){e[e.APP_TYPE_INVALID_VALUE=-1]="APP_TYPE_INVALID_VALUE",e[e.APP_TYPE_NATIVE=0]="APP_TYPE_NATIVE",e[e.APP_TYPE_NATIVE_COCOS=1]="APP_TYPE_NATIVE_COCOS",e[e.APP_TYPE_NATIVE_UNITY=2]="APP_TYPE_NATIVE_UNITY",e[e.APP_TYPE_NATIVE_ELECTRON=3]="APP_TYPE_NATIVE_ELECTRON",e[e.APP_TYPE_NATIVE_FLUTTER=4]="APP_TYPE_NATIVE_FLUTTER",e[e.APP_TYPE_NATIVE_UNREAL=5]="APP_TYPE_NATIVE_UNREAL",e[e.APP_TYPE_NATIVE_XAMARIN=6]="APP_TYPE_NATIVE_XAMARIN",e[e.APP_TYPE_NATIVE_API_CLOUD=7]="APP_TYPE_NATIVE_API_CLOUD",e[e.APP_TYPE_NATIVE_REACT_NATIVE=8]="APP_TYPE_NATIVE_REACT_NATIVE",e[e.APP_TYPE_NATIVE_PYTHON=9]="APP_TYPE_NATIVE_PYTHON",e[e.APP_TYPE_NATIVE_COCOS_CREATOR=10]="APP_TYPE_NATIVE_COCOS_CREATOR",e[e.APP_TYPE_NATIVE_RUST=11]="APP_TYPE_NATIVE_RUST",e[e.APP_TYPE_NATIVE_C_SHARP=12]="APP_TYPE_NATIVE_C_SHARP",e[e.APP_TYPE_NATIVE_CEF=13]="APP_TYPE_NATIVE_CEF",e[e.APP_TYPE_NATIVE_UNI_APP=14]="APP_TYPE_NATIVE_UNI_APP",e[e.APP_TYPE_WEBRTC=1e3]="APP_TYPE_WEBRTC",e[e.APP_TYPE_WEBRTC_REACT=1001]="APP_TYPE_WEBRTC_REACT",e[e.APP_TYPE_WEBRTC_VUE=1002]="APP_TYPE_WEBRTC_VUE",e[e.APP_TYPE_WEBRTC_ANGULAR=1003]="APP_TYPE_WEBRTC_ANGULAR"}(_I||(_I={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(bI||(bI={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(SI||(SI={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(TI||(TI={})),function(e){e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check"}(II||(II={})),function(e){e.ABORT="abort"}(NI||(NI={})),function(e){e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video"}(wI||(wI={})),function(e){e[e.SUCCESS=1]="SUCCESS",e[e.FAILED=0]="FAILED"}(CI||(CI={})),function(e){e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed"}(OI||(OI={}));const MI={[cT.ACCESS_POINT]:{[dT.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[dT.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[dT.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[dT.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[dT.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[dT.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[dT.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[dT.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[dT.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[dT.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[dT.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[dT.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[dT.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[dT.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[dT.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[dT.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[dT.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[dT.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[cT.UNILBS]:{[uT.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[uT.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[uT.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[uT.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[uT.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[uT.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[uT.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[uT.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[uT.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[uT.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[uT.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[uT.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[cT.STRING_UID_ALLOCATOR]:{[lT.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[lT.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[lT.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function DI(e){const t=MI[Math.floor(e/1e4)];if(!t)return{desc:"unkonw error",retry:!1};const n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===cT.ACCESS_POINT){const t=e%1e4;if("1"===t.toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return n}const kI={[pT.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[pT.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[pT.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[pT.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[pT.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[pT.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[pT.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[pT.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[pT.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[pT.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[pT.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[pT.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[pT.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[pT.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[pT.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[pT.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[pT.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[pT.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[pT.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[pT.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[pT.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[pT.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[pT.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[pT.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[pT.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[pT.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[pT.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[pT.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[pT.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[pT.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[pT.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[pT.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[pT.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[pT.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[pT.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[pT.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[pT.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[pT.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[pT.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[pT.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[pT.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[pT.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[pT.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[pT.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[pT.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[pT.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[pT.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[pT.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[pT.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[pT.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[pT.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[pT.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[pT.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[pT.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[pT.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[pT.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[pT.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[pT.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[pT.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[pT.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[pT.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[pT.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[pT.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function xI(e){return kI[e]||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}function LI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LI(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jI(e){return e.every((e=>e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING))}function UI(e,t){if("string"==typeof e)return e;const{proxy:n,host:r,port:i}=e;if(t){const e=bS("JOIN_GATEWAY_FALLBACK_PORT")||443;return 443===e?"wss://".concat(r,"/ws/?p=").concat(Number(i)+150):"wss://".concat(r,":").concat(e,"/ws/?p=").concat(Number(i)+150)}return n?"wss://".concat(n,"/ws/?h=").concat(r,"&p=").concat(i):"wss://".concat(r,":").concat(i)}const FI=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,zI=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,BI=/wss:\/\/(.+):([0-9]+)\/?/,VI=/wss:\/\/(.[^\/]+)\/?/;let HI=0;class GI{constructor(e,t){op(this,"id",0),op(this,"store",void 0),op(this,"recordIndex",void 0),op(this,"websockets",[]),op(this,"try443PortDuration",2e3),op(this,"forceCloseWSDuration",5e3),op(this,"try443PortTimeout",null),op(this,"forceCloseTimeout",null),op(this,"isTry443PortFailed",!1),op(this,"isNormalPortFailed",!1),op(this,"useDoubleDomain",!1),op(this,"useProxy",!1),op(this,"startTime",Date.now()),this.id=++HI,this.try443PortDuration=bS("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach((e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()})),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var e;const t=Date.now()-this.startTime;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];BS.debug("[choose-best-ws ".concat(null===(e=this.store)||void 0===e?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:"),...r)}createWebSocket(e,t,n){this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:n});const r=bS("GATEWAY_DOMAINS"),i=Date.now(),o=[],s=r.find((t=>{var n;return Or(n=e.host).call(n,t)}));s||(this.useDoubleDomain=!1);const a=[];if(this.useDoubleDomain)r.forEach((n=>{a.push(UI(PI(PI({},e),{},{host:e.host.replace(s,n)}),t))}));else{const n=PI({},e);if(t&&s){const e=r.find((e=>e!==s));e&&(n.host=n.host.replace(s,e))}a.push(UI(n,t))}try{a.forEach((e=>{const t=new WebSocket(e);t.binaryType="arraybuffer",o.push(t),this.logger("ws is connecting:",t.url)}))}catch(r){if(this.logger("ws create failed"),o.forEach((e=>e.close())),o.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,n);if(!t&&443!==Number(e.port))return this.createWebSocket(e,!0,n);throw new kT(Gy.WS_ERR,"init websocket failed! Error: ".concat(r.toString()))}const c=uy();return this.store&&this.store.recordJoinChannelService({urls:o.map((e=>e.url)),service:"gateway"},this.recordIndex),o.forEach((e=>{e.onopen=()=>{this.logger("onopen: ws ".concat(e.url," open cost ").concat(Date.now()-i,"ms")),this.websockets.forEach((t=>{t!==e&&(t.onopen=null,t.onclose=null,t.onmessage=null,t.close(),this.logger("close backup websocket: ".concat(t.url)))})),this.websockets.length=0,c.resolve(e)},e.onclose=n=>{this.logger("onclose: ws ".concat(e.url," closed cost ").concat(Date.now()-i,"ms state: ").concat(e.readyState)),t?this.isTry443PortFailed=jI(o):this.isNormalPortFailed=jI(o),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),(t&&this.isTry443PortFailed||!t&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(n.reason)),c.reject({code:n.code,reason:XT.A_ROUND_WS_FAILED}))},e.onmessage=t=>this.logger("".concat(e.url," onmessage: ").concat(t.data))})),this.websockets.push(...o),n||(()=>{const n=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",c.isResolved),this.websockets.forEach((e=>e.readyState!==WebSocket.OPEN&&e.close()))};if(t||this.useProxy)return this.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(n,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout((()=>{if(this.logger("2s timeout, isWebsocket created: ",c.isResolved),c.isResolved)return n();_y().os===fy.MAC_OS&&Oy()&&n(),this.createWebSocket(e,!0,!0).then((e=>c.resolve(e))).catch((e=>{this.isNormalPortFailed&&c.reject(e),this.logger("try 443 port to create ws failed")})),this.forceCloseTimeout=window.setTimeout(n,this.forceCloseWSDuration)}),this.try443PortDuration)})(),c.promise}chooseBestWebsocket(e,t,n,r){return this.useDoubleDomain=!!t,"string"==typeof e&&(e=function(e){let t,n,r;return[,t,n,r]=e.match(FI)||[],t||([,n,r]=e.match(zI)||[]),n&&r||([,n,r]=e.match(BI)||[]),n&&r||([,n]=e.match(VI)||[]),n||BS.warning("un-destructible url: ",e),{proxy:t,host:n,port:r||"443"}}(e)),this.recordIndex=r,this.useProxy=!!e.proxy,n&&this.useProxy&&(BS.warn("cannot use 443 only when use proxy"),n=!1),this.createWebSocket(e,!!n,!1).finally((()=>this.clearTimeout()))}}function WI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class YI extends lE{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Or(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(_T.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(_T.CONNECTED):"closed"===this._state?this.emit(_T.CLOSED):"failed"===this._state&&this.emit(_T.FAILED))}resetReconnectCount(e){BS.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;super(),op(this,"connectionID",0),op(this,"currentURLIndex",0),op(this,"urls",[]),op(this,"_reconnectMode","tryNext"),op(this,"reconnectReason",void 0),op(this,"_initMutex",new h_("websocket")),op(this,"name",void 0),op(this,"_state","closed"),op(this,"reconnectInterrupter",void 0),op(this,"websocket",void 0),op(this,"retryConfig",void 0),op(this,"reconnectCount",0),op(this,"forceCloseTimeout",5e3),op(this,"onlineReconnectListener",void 0),op(this,"useCompress",void 0),op(this,"tryDoubleDomain",!1),op(this,"use443PortOnly",!1),op(this,"wsInflateLength",0),op(this,"wsDeflateLength",0),op(this,"closeEstablishingWs",(()=>{})),op(this,"store",void 0),op(this,"joinGatewayRecordIndex",void 0),this.store=o,this.name=e,this.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WI(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this.useCompress=n,this.tryDoubleDomain=r,this.use443PortOnly=i;const{timeout:s,timeoutFactor:a}=t,c=Math.max(300,Math.floor(3*s/5)),l=Math.max(1.2,Math.floor(8*a)/10);yE.ONLINE&&(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l),OE.on(EE.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===yE.ONLINE?(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l):(this.retryConfig.timeout=s,this.retryConfig.timeoutFactor=a))}))}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=await this._initMutex.lock();this.forceCloseTimeout=t,this.urls=e,this.state="connecting";try{const e=uy(),t=this.urls[this.currentURLIndex];this.createWebSocketConnection(t).then(e.resolve).catch(e.reject),this.once(_T.CLOSED,(()=>{e.reject(new Wy(Gy.WS_DISCONNECT))})),this.once(_T.CONNECTED,e.resolve),await e.promise}catch(e){}finally{n()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?setTimeout((()=>e.close()),500):e.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void BS.warning("[".concat(this.name,"] can not reconnect, no websocket"));void 0!==e&&(this.reconnectMode=e),BS.debug("[".concat(this.name,"] reconnect is triggered initiative")),"number"==typeof this.joinGatewayRecordIndex&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);const n=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),n&&n.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Wy(Gy.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new Wy(Gy.WS_ERR,"send websocket message error"+e.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;const n=uy();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const r=e=>{var t;null===(t=this.store)||void 0===t||t.signalChannelOpen(),BS.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),n.resolve()},i=async e=>{var t;if(BS.debug("[".concat(this.name,"] websocket close ").concat(null===(t=this.websocket)||void 0===t?void 0:t.url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)n.reject(new Wy(Gy.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close();else{"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const t=wE(this,_T.WILL_RECONNECT,this.reconnectMode,e.reason)||this.reconnectMode,r=await this.reconnectWithAction(t);if("closed"===this.state)return void BS.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!r)return n.reject(new Wy(Gy.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),this.close(!0);n.resolve()}},o=e=>{this.emit(_T.ON_MESSAGE,e)},s=e=>{BS.warn("[".concat(this.connectionID,"] ws open error ").concat(e))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),bS("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=bS("GATEWAY_WSS_ADDRESS")),BS.debug("[".concat(this.name,"] start connect, url:"),e);const a=null===(t=this.store)||void 0===t?void 0:t.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var c;const t=await this.chooseBestWebsocketConnection(e);this.websocket=t,r&&r(this.websocket.url),this.websocket.onclose=i,this.websocket.onmessage=o,this.websocket.onerror=s,null===(c=this.store)||void 0===c||c.recordJoinChannelService({endTs:Date.now(),status:"success"},a),this.joinGatewayRecordIndex=a}catch(e){const t="closed"===this.state,r=e instanceof Wy,o=r&&e.code===Gy.WS_ABORT,s=r&&e.code===Gy.WS_ERR,c=r?e.message:e&&(e.reason||e.toString());BS.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(c)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:o?"aborted":"error",errors:[e]},a),t||s?(n.reject(t?new Wy(Gy.WS_DISCONNECT,"websocket is closed: ".concat(c)):new Wy(Gy.WS_ERR,"init websocket failed: ".concat(c))),s&&BS.error("[".concat(this.name,"] init websocket failed: ").concat(c))):i&&i(e)}return n.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(0===this.urls.length)return!1;if("closed"===this.state)return!1;BS.warning("[choose-best-ws] action: =>",e),this.onlineReconnectListener||OE.isOnline||!OE.onlineWaiter||(this.onlineReconnectListener=OE.onlineWaiter.then((()=>{this.onlineReconnectListener=void 0})));let n=!0;if(this.reconnectInterrupter=()=>n=!1,t){const t=g_(this.reconnectCount,this.retryConfig);BS.debug("[".concat(this.name,"] wait ").concat(t,"ms to reconnect websocket, mode: ").concat(e)),await cy.race([n_(t),this.onlineReconnectListener||new cy((()=>{}))])}if("closed"===this._state||!n)return!1;this.reconnectCount+=1;const r=async(e,t)=>{this.emit(_T.RECONNECT_CREATE_CONNECTION,t),await this.createWebSocketConnection(e)};try{if("retry"===e)this.emit(_T.RECONNECT_WAITTING_FINISH,e),await r(this.urls[this.currentURLIndex],e);else if("tryNext"===e){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);BS.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit(_T.RECONNECT_WAITTING_FINISH,e),await r(this.urls[this.currentURLIndex],e)}else"recover"===e&&(BS.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(_T.RECONNECT_WAITTING_FINISH,e),this.urls=await IE(this,_T.REQUEST_NEW_URLS),this.currentURLIndex=0,await r(this.urls[this.currentURLIndex],e))}catch(n){var i;BS.error("[".concat(this.name,"] reconnect failed ").concat(n&&n.toString()));const r=null==n||null===(i=n.data)||void 0===i?void 0:i.desc;return Array.isArray(r)&&Or(r).call(r,"dynamic key expired")?(this.emit(_T.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}}class qI extends YI{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){const n=uy(),r=function(e,t){return new GI(e,t)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{BS.debug("[choose-best-ws] close establishing websockets"),r.closeAllWebsockets(),n.reject(new Wy(Gy.WS_ABORT,"choose best websocket aborted"))};const i=bS("GATEWAY_DOMAINS");return BS.debug("[choose-best-ws] currentDomain: ",e,", domains: ",i,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),r.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(n.resolve).catch(n.reject),n.promise.finally((()=>{this.closeEstablishingWs=void 0}))}}class KI extends YI{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new cy(((n,r)=>{let i=!1;const o=[];this.closeEstablishingWs=()=>{BS.debug("[choose-best-ws] close establishing websockets"),o.forEach((e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),r(new Wy(Gy.WS_ABORT,"choose best websocket aborted"))};const s=bS("GATEWAY_DOMAINS");let a;const c=e.indexOf("?h="),l=s.find((t=>-1!==c?Or(e).call(e,t,c):Or(e).call(e,t)));BS.debug("[choose-best-ws] currentDomain: ",l,", domains: ",s);let u=!this.tryDoubleDomain||!l;if(!u&&l){var d;const p=Date.now();try{s.forEach((t=>{const n=-1===c?e.replace(l,t):e.substr(0,c)+e.substr(c).replace(l,t),r=new WebSocket(n);r.binaryType="arraybuffer",o.push(r),BS.debug("[choose-best-ws] ws is connecting:",r.url)}))}catch(e){for(BS.debug("[choose-best-ws] ws create failed, fallback to single url"),o.forEach((e=>e.close()));o.length;)o.pop();u=!0}null===(d=this.store)||void 0===d||d.recordJoinChannelService({urls:o.map((e=>e.url)),service:"gateway"},t),o.forEach((e=>{e.onopen=()=>{if(i)return;const t=Date.now()-p;BS.debug("[choose-best-ws] ws open cost ".concat(t,"ms")),o.filter((t=>t!==e)).forEach((e=>{BS.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()})),i=!0,n(e)},e.onclose=e=>{a=e,i||o.find((e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)))||(BS.debug("[choose-best-ws] all websocket is closed"),i=!0,r(a))},e.onmessage=t=>{BS.debug("[choose-best-ws]".concat(e.url," onmessage: ").concat(t.data))}})),n_(this.forceCloseTimeout).then((()=>{o.forEach((e=>{e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(u){var p;let i;BS.debug("[choose-best-ws] use single url: ",e),null===(p=this.store)||void 0===p||p.recordJoinChannelService({urls:[e],service:"gateway"},t);try{i=new WebSocket(e),o.push(i),i.binaryType="arraybuffer"}catch(e){const n=new Wy(Gy.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return BS.error("[".concat(this.name,"]").concat(n)),void r(n)}i.onopen=()=>{n(i)},i.onclose=e=>{r(e)},i.onmessage=e=>{BS.debug("[choose-best-ws]".concat(i.url," onmessage: ").concat(e.data))},n_(this.forceCloseTimeout).then((()=>{i&&i.readyState!==WebSocket.OPEN&&i.close()}))}})).then((e=>(this.closeEstablishingWs=void 0,e))).catch((e=>{throw this.closeEstablishingWs=void 0,e}))}}class QI extends lE{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===hT.CONNECTED?this.emit(fT.WS_CONNECTED):e===hT.RECONNECTING?this.emit(fT.WS_RECONNECTING,this._websocketReconnectReason):e===hT.CLOSED&&this.emit(fT.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),op(this,"_disconnectedReason",void 0),op(this,"_websocketReconnectReason",void 0),op(this,"_connectionState",hT.CLOSED),op(this,"reconnectToken",void 0),op(this,"websocket",void 0),op(this,"openConnectionTime",void 0),op(this,"clientId",void 0),op(this,"lastMsgTime",Date.now()),op(this,"uploadCache",[]),op(this,"uploadCacheInterval",void 0),op(this,"rttRolling",new y_(5)),op(this,"pingpongTimer",void 0),op(this,"wsInflateDataTimer",void 0),op(this,"pingpongTimeoutCount",0),op(this,"joinResponse",void 0),op(this,"multiIpOption",void 0),op(this,"initError",void 0),op(this,"spec",void 0),op(this,"store",void 0),op(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(fT.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){if(this.emit(t._type,t._message),t._type===vT.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===vT.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(mE.UID_BANNED);break;case 15:this.close(mE.IP_BANNED);break;case 16:this.close(mE.CHANNEL_BANNED)}if(t._type===vT.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case pT.ERR_LICENSE_MISSING:this.close(mE.LICENSE_MISSING);break;case pT.ERR_LICENSE_EXPIRED:this.close(mE.LICENSE_EXPIRED);break;case pT.ERR_LICENSE_MINUTES_EXCEEDED:this.close(mE.LICENSE_MINUTES_EXCEEDED);break;case pT.ERR_LICENSE_PERIOD_INVALID:this.close(mE.LICENSE_PERIOD_INVALID);break;case pT.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(mE.LICENSE_MULTIPLE_SDK_SERVICE);break;case pT.ERR_LICENSE_ILLEGAL:this.close(mE.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new qI("gateway-".concat(this.clientId),this.spec.retryConfig,!0,bS("JOIN_GATEWAY_USE_DUAL_DOMAIN"),bS("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===hT.CONNECTED&&this.reconnect("retry",vE.OFFLINE)}))}async request(e,t,n,r){const i=r_(6,""),o={_id:i,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new cy(((t,n)=>{if(this.connectionState===hT.CONNECTED)return t();const r=()=>{this.off(fT.WS_CLOSED,i),t()},i=()=>{this.off(fT.WS_CONNECTED,r),n(new kT(Gy.WS_ABORT))};this.once(fT.WS_CONNECTED,r),this.once(fT.WS_CLOSED,i),e!==mT.PUBLISH&&e!==mT.PUBLISH_DATASTREAM&&e!==mT.SUBSCRIBE&&e!==mT.SUBSCRIBE_DATASTREAM&&e!==mT.UNSUBSCRIBE&&e!==mT.UNSUBSCRIBE_DATASTREAM&&e!==mT.UNPUBLISH&&e!==mT.UNPUBLISH_DATASTREAM&&e!==mT.CONTROL&&e!==mT.RESTART_ICE||this.once(fT.DISCONNECT_P2P,(()=>{n(new kT(Gy.DISCONNECT_P2P))})),e!==mT.PUBLISH&&e!==mT.RESTART_ICE||this.once(fT.ABORT_P2P_EXECUTION,(()=>{n(new kT(Gy.DISCONNECT_P2P))}))}));if(this.connectionState!==hT.CONNECTING&&this.connectionState!==hT.RECONNECTING||e===mT.JOIN||e===mT.REJOIN||await a(),this.websocket.sendMessage(o,!0),r)return;const c=new cy(((n,r)=>{let o=!1;const a=(r,i)=>{o=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(fT.WS_CLOSED,c),this.off(fT.WS_RECONNECTING,c),this.emit(fT.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new kT(Gy.WS_ABORT,"type: ".concat(e))),this.off(fT.WS_CLOSED,c),this.off(fT.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(fT.WS_CLOSED,c),this.once(fT.WS_RECONNECTING,c),n_(bS("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==s||o||(BS.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(fT.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===hT.CLOSED||e===mT.LEAVE)throw new kT(Gy.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===mT.JOIN||e===mT.REJOIN?null:(await a(),await this.request(e,t))}if(l.isSuccess)return l.message;const u=Number(l.message.error_code||l.message.code),d=xI(u),p=new kT(Gy.UNEXPECTED_RESPONSE,"".concat(d.desc,": ").concat(l.message.error_str),{code:u,data:l.message});return"success"===d.action?l.message:(BS.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(d.desc,", action: ").concat(d.action)),u===pT.ERR_TOO_MANY_BROADCASTERS?e===mT.JOIN||e===mT.REJOIN?(this.initError=p,this.close(),p.throw()):p.throw():"failed"===d.action?p.throw():"quit"===d.action?(this.initError=p,this.close(),p.throw()):(u===pT.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,BS.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",vE.MULTI_IP)):this.reconnect(d.action,vE.SERVER_ERROR),e===mT.JOIN||e===mT.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new cy((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void BS.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(gT.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=bS("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==hT.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),bS("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new cy(((t,n)=>{this.once(fT.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(fT.WS_CLOSED,(()=>n(this.initError||new kT(Gy.WS_ABORT)))),this.connectionState=hT.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval((()=>{this.handleWsInflateData()}),2e4)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||mE.LEAVE,this.connectionState=hT.CLOSED,BS.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===mE.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new qI("gateway-".concat(this.clientId),this.spec.retryConfig,!0,bS("JOIN_GATEWAY_USE_DUAL_DOMAIN"),bS("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(fT.ABORT_P2P_EXECUTION);const e=await IE(this,fT.REQUEST_JOIN_INFO),t=await this.request(mT.JOIN,e);if(!t)return this.emit(fT.REPORT_JOIN_GATEWAY,XT.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(fT.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=hT.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new kT(Gy.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=CE(this,fT.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(mT.REJOIN,e);return!!t&&(this.connectionState=hT.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(vT.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(vT.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(vT.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(vT.MUTE_AUDIO,{uid:e.uid}):this.emit(vT.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(vT.MUTE_VIDEO,{uid:e.uid}):this.emit(vT.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(vT.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(vT.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(vT.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(vT.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(vT.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){BS.debug("[".concat(this.clientId,"] receive notification: "),e);const t=xI(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(mE.UID_BANNED),void this.close()):void this.reconnect(t.action,vE.SERVER_ERROR);BS.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=bS("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(BS.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>bS("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",vE.TIMEOUT):this.request(mT.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),bS("REPORT_STATS")&&this.send(mT.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(gT.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(_T.RECONNECT_WAITTING_FINISH,(e=>{this.emit(fT.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(_T.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(fT.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(_T.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(_T.CLOSED,(()=>{this.connectionState=hT.CLOSED})),this.websocket.on(_T.FAILED,(()=>{this._disconnectedReason=mE.NETWORK_ERROR,this.connectionState=hT.CLOSED})),this.websocket.on(_T.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===hT.CONNECTED?this.connectionState=hT.RECONNECTING:this.connectionState=hT.CONNECTING})),this.websocket.on(_T.WILL_RECONNECT,((e,t,n)=>{const r=CE(this,fT.IS_P2P_DISCONNECTED),i=r||"retry"!==e;r&&"retry"===e&&(BS.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e="tryNext",t=XT.P2P_DISCONNECTED),i&&(BS.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(e)),this.emit(fT.REPORT_JOIN_GATEWAY,t||XT.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(fT.NEED_RENEW_SESSION),this.emit(fT.DISCONNECT_P2P)),n(e)})),this.websocket.on(_T.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{BS.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",vE.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(fT.REPORT_JOIN_GATEWAY,e.message||e.code||XT.UNKNOWN_REASON,this.url||""),e instanceof kT&&e.code===Gy.UNEXPECTED_RESPONSE&&e.data.code===pT.ERR_NO_AUTHORIZED)return BS.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",vE.SERVER_ERROR);BS.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",vE.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(_T.REQUEST_NEW_URLS,((e,t)=>{IE(this,fT.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(_T.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(vT.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}var JI="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",XI=J,ZI=fr,$I=JI,eN=u("".replace),tN=RegExp("^["+$I+"]+"),nN=RegExp("(^|[^"+$I+"])["+$I+"]+$"),rN=function(e){return function(t){var n=ZI(XI(t));return 1&e&&(n=eN(n,tN,"")),2&e&&(n=eN(n,nN,"$1")),n}},iN={start:rN(1),end:rN(2),trim:rN(3)},oN=Ql.PROPER,sN=i,aN=JI,cN=iN.trim;Rn({target:"String",proto:!0,forced:function(e){return sN((function(){return!!aN[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||oN&&aN[e].name!==e}))}("trim")},{trim:function(){return cN(this)}});var lN,uN,dN=Jn("String").trim,pN=d,hN=dN,fN=String.prototype,mN=r((function(e){var t=e.trim;return"string"==typeof e||e===fN||pN(fN,e)&&t===fN.trim?hN:t}));function gN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gN(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yN(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(bS("TURN_DOMAIN")):(BS.info("Unidentified as ip: ".concat(e,", use as host")),e)}function EN(e,t){e.addresses||(e.addresses=[]);const n=function(e,t){if(bS("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return e.map((e=>{let{ip:t,port:n}=e;return{address:"".concat(t,":").concat(n)}}));const n=bS("GATEWAY_DOMAINS");let r=n[1]&&Or(t).call(t,n[1])?1:0;return e.map((e=>{let{domain_prefix:t,port:i,ip:o}=e;if(t)return{address:"".concat(t,".").concat(n[r++%n.length],":").concat(i)};const s=/^[\.\:\d]+$/.test(o),a=s?"".concat(o.replace(/[^\d]/g,"-"),".").concat(n[r++%n.length],":").concat(i):"".concat(o,":").concat(i);return s||BS.info("Unidentified as ip: ".concat(o,", use as host")),{ip:o,port:i,address:a}}))}(e.addresses,t),r=Array.isArray(e.detail)&&e.detail[18];if(r&&"string"==typeof r){const e=r.split(";");for(let t=0;t<e.length;t++){var i;const r=mN(i=e[t]).call(i);n[t]&&r&&(n[t].ip6=r)}}return{gatewayAddrs:n,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function _N(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function bN(e){const t=e._encoderConfig;if(!t)return{};const n={resolution:t.width&&t.height?"".concat(_N(t.width),"x").concat(_N(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return"number"==typeof t.frameRate?(n.maxFrameRate=t.frameRate,n.minFrameRate=t.frameRate):t.frameRate&&(n.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,n.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),n}function SN(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function TN(e,t){let n,r,i;switch(t){case lN.CHOOSE_SERVER:r=4096,i="choose server";break;case lN.CLOUD_PROXY:r=1048576,i="proxy";break;case lN.CLOUD_PROXY_5:r=4194304,i="proxy5";break;case lN.CLOUD_PROXY_FALLBACK:r=4194310,i="proxy fallback";break;default:throw new kT(Gy.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((t=>{t.buffer&&t.buffer.flag===r&&(n={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((e=>vN(vN({},e),{},{ticket:t.buffer.cert}))),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:vN(vN({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!n)throw new kT(Gy.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return n}async function IN(e,t){return await cy.all(e.addresses.map((async e=>({address:yN(e.ip),tcpport:e.port,udpport:e.port,username:t&&bS("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():nT.username,password:t&&bS("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await cE(t.toString()):nT.password}))))}function NN(e,t){const n=t._videoHeight||t.getMediaStreamTrack(!0).getSettings().height;return n?Math.max(n/_N(e.height),1):(BS.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function wN(e){let{candidateType:t,relayProtocol:n,type:r,address:i,port:o,protocol:s}=e;return"local-candidate"===r?{candidateType:t,relayProtocol:n,protocol:s}:{candidateType:t,relayProtocol:n,address:i,port:o,protocol:s}}function CN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(lN||(lN={}));class ON extends lE{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Or(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(yI.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(yI.CONNECTED):"closed"===this._state?this.emit(yI.CLOSED):"failed"===this._state&&this.emit(yI.FAILED))}constructor(e,t,n,r){super(),op(this,"connectionID",0),op(this,"currentURLIndex",0),op(this,"reconnectReason",void 0),op(this,"_reconnectMode","tryNext"),op(this,"_name",void 0),op(this,"_state","closed"),op(this,"_retryConfig",void 0),op(this,"_reconnectCount",0),op(this,"_forceCloseTimeout",5e3),op(this,"_onlineReconnectListener",void 0),op(this,"_closeEstablishingTransmitter",(()=>{})),op(this,"_store",void 0),op(this,"_joinChannelServiceRecordIndex",void 0),op(this,"_useCompress",void 0),op(this,"_inflateLength",0),op(this,"_deflateLength",0),this._store=r,this._name=e,this._retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CN(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this._useCompress=n}resetReconnectCount(e){BS.debug("".concat(this._name," reset reconnect count, reason: ").concat(e)),this._reconnectCount=0}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const e=this._transmitter;t?setTimeout((()=>e.close()),500):e.close(),this._transmitter=void 0}this.state=e?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(e,t){if(!this._transmitter)return void BS.warning("[".concat(this._name,"] can not reconnect, no websocket"));var n;void 0!==e&&(this.reconnectMode=e),BS.debug("[".concat(this._name,"] reconnect is triggered initiative")),"number"==typeof this._joinChannelServiceRecordIndex&&(null===(n=this._store)||void 0===n||n.recordJoinChannelService({status:"error",errors:[new Error(t)]},this._joinChannelServiceRecordIndex));const r=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),r&&r.bind(this._transmitter)({code:9999,reason:t})}getInflateData(){const e=this._inflateLength,t=this._deflateLength;return this.clearInflateData(),{inflateLength:e,deflateLength:t}}setInflateData(e){this._deflateLength=this._deflateLength+e.originLength,this._inflateLength=this._inflateLength+e.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}!function(e){e[e.Default=0]="Default",e[e.Ack=1]="Ack"}(uN||(uN={}));class AN{constructor(e,t,n){op(this,"version",1),op(this,"initialRTO",void 0),op(this,"maxBatchAckCount",void 0),op(this,"maxRTO",void 0),op(this,"initialRTT",void 0),op(this,"ID",void 0),op(this,"rtt",void 0),op(this,"packetNumber",1),op(this,"rtoRatioMap",new Map),op(this,"timeoutMap",new Map),op(this,"unorderedPacketQueue",[]),op(this,"batchAckPacketQueue",[]),op(this,"lastOrderedPacketNumber",0),op(this,"batchAckTimer",void 0),op(this,"sendImpl",void 0),op(this,"receiveImpl",void 0),this.sendImpl=e,this.receiveImpl=t,this.ID=r_(7,"transmitter-"),this.initialRTO=void 0!==(null==n?void 0:n.initialRTO)?n.initialRTO:bS("TRANSMITTER_INITIAL_RTO"),this.initialRTT=void 0!==(null==n?void 0:n.initialRTT)?n.initialRTT:bS("TRANSMITTER_INITIAL_RTT"),this.rtt=void 0!==(null==n?void 0:n.initialRTT)?n.initialRTT:bS("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=void 0!==(null==n?void 0:n.maxBatchAckCount)?n.maxBatchAckCount:bS("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=void 0!==(null==n?void 0:n.maxRTO)?n.maxRTO:bS("TRANSMITTER_MAX_RTO")}packetize(e,t){return{type:uN.Default,version:this.version,packetNumber:t,payload:e}}serialize(e){switch(e.type){case uN.Default:{let t;t="string"==typeof e.payload?(new TextEncoder).encode(e.payload):e.payload;const n=new ArrayBuffer(t.length+15),r=new DataView(n);return r.setUint16(0,e.version),r.setUint8(2,e.type),r.setUint32(3,e.packetNumber),tE(r,7,BigInt(e.sendTs)),new Uint8Array(r.buffer).set(t,15),n}case uN.Ack:{const t=new ArrayBuffer(16),n=new DataView(t);return n.setUint16(0,e.version),n.setUint8(2,e.type),n.setUint32(3,e.maxAckPacketNumber),n.setUint8(7,e.shift),tE(n,8,BigInt(e.ackSendTs)),t}}}deserialize(e){const t=new DataView(e),n=t.getUint16(0),r=t.getUint8(2);switch(r){case uN.Default:{const i=t.getUint32(3),o=eE(t,7),s=e.slice(15),a=(new TextDecoder).decode(s);return{version:n,type:r,packetNumber:i,sendTs:Number(o),payload:a}}case uN.Ack:{const e=t.getUint32(3),i=t.getUint8(7),o=eE(t,8);return{version:n,type:r,maxAckPacketNumber:e,shift:i,ackSendTs:Number(o)}}default:throw BS.error("[".concat(this.ID,"] Unrecognized packet type ").concat(r)),new Error("Unrecognized packet type ".concat(r))}}sendMessage(e){const t=this.packetize(e,this.packetNumber);this.packetNumber=4294967295===this.packetNumber?1:this.packetNumber+1;const n=this.calculateRTO(t),r=window.setTimeout((()=>{this.resendMessage(t)}),n);this.timeoutMap.set(t.packetNumber,r),this.sendPacket(t)}onData(e){const t=this.deserialize(e);t.type===uN.Default?this.ack(t):t.type===uN.Ack&&(this.updateRTT(t,Math.round(performance.now())),this.clearRTO(t))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach((e=>{let[t,n]=e;window.clearTimeout(n)})),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,void 0!==this.batchAckTimer&&window.clearTimeout(this.batchAckTimer)}resendMessage(e){const t=this.calculateRTO(e),n=window.setTimeout((()=>{this.resendMessage(e)}),t);this.timeoutMap.set(e.packetNumber,n),this.sendPacket(e)}calculateRTO(e){const t=this.rtoRatioMap.get(e.packetNumber);if(void 0===t)return this.rtoRatioMap.set(e.packetNumber,1),this.initialRTO;{const n=9*this.rtt/8*t;return this.rtoRatioMap.set(e.packetNumber,t+1),n>this.maxRTO?this.maxRTO:n}}updateRTT(e,t){const n=e.ackSendTs;this.rtt=this.rtt*(7/8)+(t-n-this.rtt)/8}ack(e){if(e.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(e):(this.batchAckPacketQueue.push(e),this.batchAckTimer=window.setTimeout((()=>{this.batchAck()}),this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(e.payload);;){const e=this.unorderedPacketQueue[0];if(!e){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(e.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(e.packetNumber<=this.lastOrderedPacketNumber){const t={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:uN.Ack,version:this.version};this.sendPacket(t)}else if(e.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[e.packetNumber-this.lastOrderedPacketNumber-2]=e;const t={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:uN.Ack,version:this.version};this.sendPacket(t)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const e={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:uN.Ack,version:this.version};this.sendPacket(e),this.batchAckPacketQueue=[]}sendPacket(e){e.type===uN.Default&&(e.sendTs=Math.round(performance.now()));const t=this.serialize(e);this.sendImpl(t)}clearRTO(e){for(let t=e.maxAckPacketNumber-e.shift;t<=e.maxAckPacketNumber;t++){const e=this.timeoutMap.get(t);void 0!==e&&window.clearTimeout(e),this.timeoutMap.delete(t),this.rtoRatioMap.delete(t)}}}class RN extends ON{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0),op(this,"_initMutex",void 0),op(this,"_reconnectInterrupter",void 0),op(this,"_url",void 0),op(this,"_transmitter",void 0),op(this,"_addresses",void 0),op(this,"_reliableTransmission",void 0),this._initMutex=new h_("datachannel");const{timeout:n,timeoutFactor:r}=t,i=Math.max(300,Math.floor(3*n/5)),o=Math.max(1.2,Math.floor(8*r)/10);yE.ONLINE&&(this._retryConfig.timeout=i,this._retryConfig.timeoutFactor=o),OE.on(EE.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===yE.ONLINE?(this._retryConfig.timeout=i,this._retryConfig.timeoutFactor=o):(this._retryConfig.timeout=n,this._retryConfig.timeoutFactor=r))}))}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;this._forceCloseTimeout=t;const n=(t,n)=>{this._addresses=e,this.currentURLIndex=this._addresses.findIndex((e=>e.fingerprint||bS("FINGERPRINT")));const r=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(r).then(t).catch(n),this.once(yI.CLOSED,(()=>n(new kT(Gy.WS_DISCONNECT)))),this.once(yI.CONNECTED,(()=>t()))};return this._initMutex.lock().then((e=>new cy(((e,t)=>{n(e,t)})).then((()=>{e()})).catch((()=>{e()}))))}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new kT(Gy.WS_ABORT,"datachannel is not ready");try{t||(e=JSON.stringify(e)),this._reliableTransmission.sendMessage(e)}catch(e){throw new kT(Gy.WS_ERR,"send datachannel signal message error"+e.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(e){const t=JSON.stringify(e);return{compressed:t,compressedLength:t.length,origin:e}}sendMessageWithUint8Array(e){return{compressed:e,compressedLength:e.byteLength,origin:e}}createTransmitterConnection(e){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(e.ip,":").concat(e.port),new cy(((t,n)=>{var r;const i=()=>{BS.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),t()},o=async e=>{var r;if(null===(r=this._closeEstablishingTransmitter)||void 0===r||r.call(this),BS.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const r=wE(this,yI.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,i=await this.reconnectWithAction(r);if("closed"===this.state)return void BS.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!i)return n(new kT(Gy.WS_DISCONNECT,"datachannel reconnect failed: ".concat(e.code))),void this.close(!0);t()}else n(new kT(Gy.WS_DISCONNECT,"datachannel close: ".concat(e.code))),this.close()},s=e=>{var t;null===(t=this._reliableTransmission)||void 0===t||t.onData(e.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),BS.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(e)));const a=null===(r=this._store)||void 0===r?void 0:r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),c=Date.now();IE(this,yI.TO_CONNECT_DATACHANNEL,e).then((e=>{var t,n;if(!e)throw new Error("transmissonInfo not exist yet");const{transmitter:r,close:l}=e;this._transmitter=r,null===(t=this._store)||void 0===t||t.signalChannelOpen();const u=Date.now()-c;BS.debug("[choose dc] dc open cost ".concat(u,"ms")),this._reliableTransmission=new AN((e=>{var t;this._transmitter&&"open"===this._transmitter.readyState&&(null===(t=this._transmitter)||void 0===t||t.send(e))}),(e=>{"string"==typeof e&&this.emit(yI.ON_MESSAGE,e)})),this._closeEstablishingTransmitter=()=>{var e;null===(e=this._reliableTransmission)||void 0===e||e.close(),this._reliableTransmission=void 0,l()},i&&i(),r.onclose=o,r.onmessage=s,null===(n=this._store)||void 0===n||n.recordJoinChannelService({endTs:Date.now(),status:"success"},a),this._joinChannelServiceRecordIndex=a})).catch((e=>{var t;if(null===(t=this._store)||void 0===t||t.recordJoinChannelService({endTs:Date.now(),status:e instanceof kT&&e.code===Gy.WS_ABORT?"aborted":"error",errors:[e]},a),"closed"!==this.state){if(e instanceof kT&&e.code===Gy.WS_ERR){const t=new kT(Gy.WS_ERR,"init datachannel failed! Error: ".concat(e.toString()));return BS.error("[".concat(this._name,"]").concat(t)),void n(t)}o&&o(e)}else n(new kT(Gy.WS_DISCONNECT,"datachannel is closed: ".concat(e.toString())))}))}))}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount)return!1;if(!this._addresses)return!1;if("closed"===this.state)return!1;this._onlineReconnectListener||OE.networkState!==yE.OFFLINE||(this._onlineReconnectListener=OE.onlineWaiter&&OE.onlineWaiter.then((()=>{this._onlineReconnectListener=void 0})));let n=!0;if(this._reconnectInterrupter=()=>{n=!1},t){const t=g_(this._reconnectCount,this._retryConfig);BS.debug("[".concat(this._name,"] wait ").concat(t,"ms to reconnect datachannel, mode: ").concat(e)),await cy.race([n_(t),this._onlineReconnectListener||new cy((()=>{}))])}if("closed"===this.state||!n)return!1;this._reconnectCount+=1;const r=async(e,t)=>{this.emit(yI.RECONNECT_CREATE_CONNECTION,t),await this.createTransmitterConnection(e)};try{if("retry"===e){const t=this._addresses[this.currentURLIndex];this.emit(yI.RECONNECT_WAITTING_FINISH,e),await r(t,e)}else if("tryNext"===e){this.currentURLIndex+=1;for(let e=this.currentURLIndex;e<this._addresses.length;e++){if(this._addresses[e].fingerprint||bS("FINGERPRINT")){this.currentURLIndex=e;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return BS.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);BS.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const t=this._addresses[this.currentURLIndex];this.emit(yI.RECONNECT_WAITTING_FINISH,e),await r(t,e)}else"recover"===e&&(BS.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(yI.RECONNECT_WAITTING_FINISH,e),this.emit(yI.FAILBACK));return!0}catch(n){var i,o;return BS.error("[".concat(this._name,"] reconnect failed"),n.toString()),null!=n&&null!==(i=n.data)&&void 0!==i&&i.desc&&Array.isArray(n.data.desc)&&n.data.desc.length&&Or(o=n.data.desc).call(o,"dynamic key expired")?(this.emit(yI.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(e,t)}}}class MN extends lE{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===hT.CONNECTED?this.emit(fT.WS_CONNECTED):e===hT.RECONNECTING?this.emit(fT.WS_RECONNECTING,this._websocketReconnectReason):e===hT.CLOSED&&this.emit(fT.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),op(this,"_disconnectedReason",void 0),op(this,"_websocketReconnectReason",void 0),op(this,"_connectionState",hT.CLOSED),op(this,"reconnectToken",void 0),op(this,"websocket",void 0),op(this,"openConnectionTime",void 0),op(this,"clientId",void 0),op(this,"lastMsgTime",Date.now()),op(this,"uploadCache",[]),op(this,"uploadCacheInterval",void 0),op(this,"rttRolling",new y_(5)),op(this,"pingpongTimer",void 0),op(this,"inflateDataTimer",void 0),op(this,"pingpongTimeoutCount",0),op(this,"joinResponse",void 0),op(this,"multiIpOption",void 0),op(this,"initError",void 0),op(this,"spec",void 0),op(this,"store",void 0),op(this,"onWebsocketMessage",(e=>{if(e instanceof ArrayBuffer)return void this.emit(fT.ON_BINARY_DATA,e);const t=JSON.parse(e);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")&&(this.emit(t._type,t._message),t._type===vT.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===vT.ON_USER_BANNED))switch(t._message.error_code){case 14:this.close(mE.UID_BANNED);break;case 15:this.close(mE.IP_BANNED);break;case 16:this.close(mE.CHANNEL_BANNED)}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new RN("gateway-".concat(this.clientId),this.spec.retryConfig,!0,t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===hT.CONNECTED&&this.reconnect("retry",vI.OFFLINE)}))}async request(e,t,n,r){const i=r_(6,""),o={_id:i,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new cy(((t,n)=>{if(this.connectionState===hT.CONNECTED)return t();const r=()=>{this.off(fT.WS_CLOSED,i),t()},i=()=>{this.off(fT.WS_CONNECTED,r),n(new kT(Gy.WS_ABORT))};this.once(fT.WS_CONNECTED,r),this.once(fT.WS_CLOSED,i),e!==mT.PUBLISH&&e!==mT.SUBSCRIBE&&e!==mT.UNSUBSCRIBE&&e!==mT.UNPUBLISH&&e!==mT.CONTROL&&e!==mT.RESTART_ICE||this.once(fT.DISCONNECT_P2P,(()=>{n(new kT(Gy.DISCONNECT_P2P))})),e!==mT.PUBLISH&&e!==mT.RESTART_ICE||this.once(fT.ABORT_P2P_EXECUTION,(()=>{n(new kT(Gy.DISCONNECT_P2P))}))}));if(this.connectionState!==hT.CONNECTING&&this.connectionState!==hT.RECONNECTING||e===mT.JOIN||e===mT.REJOIN||await a(),e===mT.LEAVE&&(this.websocket.unbindDcCloseEventListener(),r=!0),this.websocket.sendMessage(o,!0,!1),r)return;const c=new cy(((n,r)=>{let o=!1;const a=(r,i)=>{o=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(fT.WS_CLOSED,c),this.off(fT.WS_RECONNECTING,c),this.emit(fT.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new kT(Gy.WS_ABORT,"type: ".concat(e))),this.off(fT.WS_CLOSED,c),this.off(fT.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(fT.WS_CLOSED,c),this.once(fT.WS_RECONNECTING,c),n_(bS("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==s||o||(BS.warning("dc request timeout, type: ".concat(e)),this.emit(fT.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===hT.CLOSED||e===mT.LEAVE)throw new kT(Gy.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===mT.JOIN||e===mT.REJOIN?null:(await a(),await this.request(e,t))}if(l.isSuccess)return l.message;const u=Number(l.message.error_code||l.message.code),d=xI(u),p=new kT(Gy.UNEXPECTED_RESPONSE,"".concat(d.desc,": ").concat(l.message.error_str),{code:u,data:l.message});return"success"===d.action?l.message:(BS.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(d.desc,", action: ").concat(d.action)),u===pT.ERR_TOO_MANY_BROADCASTERS?e===mT.JOIN||e===mT.REJOIN?(this.initError=p,this.close(),p.throw()):p.throw():"failed"===d.action?p.throw():"quit"===d.action?(this.initError=p,this.close(),p.throw()):(u===pT.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,BS.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",vI.MULTI_IP)):this.reconnect(d.action,vI.SERVER_ERROR),e===mT.JOIN||e===mT.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new cy((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void BS.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(gT.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=bS("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==hT.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),bS("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new cy(((n,r)=>{this.once(fT.WS_CONNECTED,(()=>n(this.joinResponse))),this.once(fT.WS_CLOSED,(()=>r(this.initError||new kT(Gy.WS_ABORT)))),this.connectionState=hT.CONNECTING,this.websocket.init(e).catch(r),this.websocket.once(yI.FAILBACK,(()=>{void 0===this.openConnectionTime&&r(new kT(Gy.INIT_DATACHANNEL_TIMEOUT))})),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval((()=>{this.handleInflateData()}),2e4),setTimeout((()=>{t&&void 0===this.openConnectionTime&&(BS.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),r(new kT(Gy.INIT_DATACHANNEL_TIMEOUT)))}),bS("DC_JOIN_WITH_FAILBACK"))}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||mE.LEAVE,this.connectionState=hT.CLOSED,BS.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),e===mE.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new RN("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(fT.ABORT_P2P_EXECUTION);const e=await IE(this,fT.DATACHANNEL_CONNECTING),t=await this.request(mT.JOIN,e);if(!t)return this.emit(fT.REPORT_JOIN_GATEWAY,Gy.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(fT.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=hT.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new kT(Gy.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=CE(this,fT.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(mT.REJOIN,e);return!!t&&(this.connectionState=hT.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(vT.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(vT.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(vT.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(vT.MUTE_AUDIO,{uid:e.uid}):this.emit(vT.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(vT.MUTE_VIDEO,{uid:e.uid}):this.emit(vT.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(vT.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(vT.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(vT.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(vT.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(vT.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){BS.debug("[".concat(this.clientId,"] receive notification: "),e);const t=xI(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(mE.UID_BANNED),void this.close()):void this.reconnect(t.action,vI.SERVER_ERROR);BS.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=bS("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(BS.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>bS("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",vI.TIMEOUT):this.request(mT.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),bS("REPORT_STATS")&&this.send(mT.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleInflateData(){const{inflateLength:e,deflateLength:t}=this.websocket.getInflateData();0!==e&&0!==t&&this.upload(gT.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(yI.RECONNECT_WAITTING_FINISH,(e=>{this.emit(fT.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(yI.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(fT.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(yI.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(yI.CLOSED,(()=>{this.connectionState=hT.CLOSED})),this.websocket.on(yI.FAILED,(()=>{this._disconnectedReason=mE.NETWORK_ERROR,this.connectionState=hT.CLOSED})),this.websocket.on(yI.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===hT.CONNECTED?this.connectionState=hT.RECONNECTING:this.connectionState=hT.CONNECTING})),this.websocket.on(yI.WILL_RECONNECT,((e,t)=>{if(CE(this,fT.IS_P2P_DISCONNECTED)&&"retry"===e)return BS.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(fT.NEED_RENEW_SESSION),this.emit(fT.DISCONNECT_P2P),t("tryNext");"retry"!==e&&(BS.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0,this.emit(fT.NEED_RENEW_SESSION),this.emit(fT.DISCONNECT_P2P)),t(e)})),this.websocket.on(yI.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{BS.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",vI.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(fT.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof kT&&e.code===Gy.UNEXPECTED_RESPONSE&&e.data.code===pT.ERR_NO_AUTHORIZED)return BS.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",vI.SERVER_ERROR);BS.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",vI.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(yI.REQUEST_NEW_URLS,((e,t)=>{IE(this,fT.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(yI.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(vT.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on(yI.TO_CONNECT_DATACHANNEL,(async(e,t,n)=>IE(this,fT.DATACHANNEL_PRECONNECT,e).then(t).catch(n))),this.websocket.on(yI.FAILBACK,(()=>{void 0!==this.openConnectionTime&&this.emit(fT.DATACHANNEL_FAILBACK)}))}}class DN extends lE{constructor(e,t){super(),op(this,"signal",void 0),op(this,"token",void 0),op(this,"tokenTimeout",void 0),op(this,"tokenInterval",void 0),op(this,"_sequence",0),op(this,"userMap",new Map),op(this,"encoder",new TextEncoder),this.signal=e,this.token=t;const n=()=>{this.signal.connectionState===hT.CONNECTED&&this.check(),0===this.userMap.size?this.tokenInterval=window.setTimeout(n,1e3):this.tokenInterval=window.setTimeout(n,3*bS("P2P_TOKEN_INTERVAL"))};n()}async send(e,t,n,r,i){var o,s,a;if(0===this.userMap.size)return;const c=Array.from(RT(o=this.userMap).call(o))[0].token;"string"!=typeof t&&(t=JSON.stringify(t)),r=null!==(s=r)&&void 0!==s?s:r_(6,""),i=null!==(a=i)&&void 0!==a?a:this._sequence++;const l={_id:r,_type:e,_seq:i,_message:t,token:"".concat(this.token,"_").concat(c)};bS("SHOW_P2P_LOG")&&BS.debug("send message",l,"noNeedResponse : ".concat(n)),this.splitMessage(JSON.stringify(l)).forEach((e=>{this.signal.request(mT.DATA_STREAM,{payload:XE(this.encoder.encode(e))})}));const u=new cy(((t,i)=>{const o=window.setTimeout((()=>{this.off("res-@".concat(r,"_ack"),s),this.off("res-@".concat(r),c),this.off(NI.ABORT,a),BS.debug("[external-signal] request timeout, type: ".concat(e,", requestId: ").concat(r)),0===this.userMap.size?i(new Wy(Gy.INVALID_REMOTE_USER)):i(new Wy(Gy.TIMEOUT))}),bS("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),s=()=>{o&&window.clearTimeout(o),this.off(NI.ABORT,a),n&&t()},a=()=>{o&&window.clearTimeout(o),this.off("res-@".concat(r,"_ack"),s),this.off("res-@".concat(r),c),i(new Wy(Gy.EXTERNAL_SIGNAL_ABORT,"type: ".concat(e,", requestId: ").concat(r)))};this.once(NI.ABORT,a),this.once("res-@".concat(r,"_ack"),s);const c=(n,c)=>{u=!0,o&&window.clearTimeout(o),this.off("res-@".concat(r,"_ack"),s),this.off(NI.ABORT,a),"success"===n?t(c):i(new Wy(Gy.P2P_MESSAGE_FAILED,"request ".concat(e," failed, requestId: ").concat(r)))};let u=!1;n||(this.once("res-@".concat(r),c),n_(bS("SIGNAL_REQUEST_TIMEOUT")).then((()=>{u||BS.warning("external_signal request timeout, type: ".concat(e,", requestId: ").concat(r,", ").concat(l))})))}));try{return await u}catch(o){if(o.code===Gy.TIMEOUT)return await this.send(e,t,n,r,i);throw o}}onMessage(e){var t;const{_uid:n}=e;let r,i=this.userMap.get(n);if(i)r=i.splitMessageMap;else{if(this.userMap.size>0||!("_type"in e)||e._type!==II.CHECK)return;const{token:t}=e;r=new Map,i={uid:n,isStart:!0,token:t,splitMessageMap:r,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(n,i),this.signal.emit(vT.ON_USER_ONLINE,{uid:n}),this.handleUserOnline()}if("id"in e&&"total"in e){var o;const{id:t,total:i}=e,s=null!==(o=r.get(t))&&void 0!==o?o:[];if(s.push(e),r.has(t)||r.set(t,s),s.length!==i)return;{const i=eh(s).call(s,((e,t)=>e.index-t.index)).map((e=>e.payload)).join("");r.delete(t),(e=JSON.parse(i))._uid=n}}const{_type:s,token:a}=e;if(Or(t=[II.ACK,II.CHECK]).call(t,s))return s===II.CHECK&&this.handleCheckToken(i,a),void this.receiveMessage(e);a==="".concat(i.token,"_").concat(this.token)?this.handleReceivedMessage(e):BS.debug('Receive unexpected message", '.concat(a,", cur_token: ").concat(i.token,"_").concat(this.token),e)}check(){const e={_id:r_(6,""),token:this.token,_type:II.CHECK};bS("SHOW_P2P_LOG")&&BS.debug("send message",e),this.signal.request(mT.DATA_STREAM,{payload:XE(this.encoder.encode(JSON.stringify(e)))})}ack(e){const t={_id:e,_type:II.ACK,token:this.token};bS("SHOW_P2P_LOG")&&BS.debug("send message",t),this.signal.request(mT.DATA_STREAM,{payload:XE(this.encoder.encode(JSON.stringify(t)))})}response(e,t,n){this.send(II.RESPONSE,JSON.stringify({success:!n,message:t}),!0,e)}handleReceivedMessage(e){const t=()=>{this.userMap.forEach((e=>{const{receivedMessagesMap:t,nextExpectedSequenceNumber:n}=e;for(;t.has(n);){const r=t.get(n);t.delete(n),this.receiveMessage(r),e.nextExpectedSequenceNumber++}}))};if(!e)return void t();const{_uid:n,_seq:r}=e,i=this.userMap.get(n),{receivedMessagesMap:o,isStart:s,nextExpectedSequenceNumber:a}=i;if(r<a)return this.ack(e._id),void BS.debug("[external-signal] receive old message, seq: ".concat(r,", ").concat(e._message));o.set(r,e),s&&r===a&&(this.receiveMessage(e),o.delete(a),i.nextExpectedSequenceNumber++,t())}receiveMessage(e){const{_id:t,_type:n,_message:r,_uid:i}=e;if(bS("SHOW_P2P_LOG")&&BS.debug("receive message",e),t){let o;switch(e._type!==II.ACK&&(r&&(o=JSON.parse(r)),this.ack(e._id)),e._type){case II.CANDIDATE:case II.CONTROL:this.signal.emit(n,o,i);break;case II.PUBLISH:case II.UNPUBLISH:case II.RESTART_ICE:case II.CALL:o.uid=i,IE(this.signal,n,o).then((t=>{this.response(e._id,t)})).catch((()=>{this.response(e._id,void 0,!0)}));break;case II.ACK:this.getListeners("res-@".concat(t,"_ack")).length>0&&this.emit("res-@".concat(t,"_ack"));break;case II.RESPONSE:{const{success:e,message:n}=o;this.emit("res-@".concat(t),e?"success":"failed",n);break}}}}splitMessage(e){if(e.length<DN.MAX_MESSAGE_SIZE)return[e];const t=[],{remoteToken:n}=JSON.parse(e),r=r_(6,"");let i=0,o=800;const s=Math.ceil(e.length/o);for(;e.length>0;){i++;const a={id:r,index:i,total:s,payload:e.slice(0,o),token:"".concat(this.token,"_").concat(n)};JSON.stringify(a).length>DN.MAX_MESSAGE_SIZE?o-=50:(t.push(a),e=e.slice(o))}return t.map((e=>JSON.stringify(e)))}handleCheckToken(e,t){return e.token!==t?(BS.debug("token changed, from ".concat(e.token," to ").concat(t)),this.reset(e.uid,t),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout((()=>{BS.debug("token timeout, ".concat(t)),this.reset(e.uid)}),bS("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const e=await IE(this.signal,II.CALL,void 0),t=await this.send(II.CALL,e);this.signal.emit(fT.P2P_CONNECTION,t,!0)}async reset(e,t){const n=this.userMap.get(e);n&&(this.emit(NI.ABORT),this.signal.emit(vT.ON_USER_OFFLINE,{uid:n.uid,reason:OI.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),t||(BS.debug("change local token from ".concat(t," to ").concat(t)),this.token=r_(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(NI.ABORT)}}op(DN,"MAX_SIZE",1),op(DN,"MAX_MESSAGE_SIZE",1024);class kN extends lE{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===hT.CONNECTED?this.emit(fT.WS_CONNECTED):e===hT.RECONNECTING?this.emit(fT.WS_RECONNECTING,this._websocketReconnectReason):e===hT.CLOSED&&this.emit(fT.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),op(this,"_disconnectedReason",void 0),op(this,"_websocketReconnectReason",void 0),op(this,"_connectionState",hT.CLOSED),op(this,"reconnectToken",void 0),op(this,"p2pToken",void 0),op(this,"websocket",void 0),op(this,"openConnectionTime",void 0),op(this,"clientId",void 0),op(this,"lastMsgTime",Date.now()),op(this,"uploadCache",[]),op(this,"uploadCacheInterval",void 0),op(this,"rttRolling",new y_(5)),op(this,"pingpongTimer",void 0),op(this,"pingpongTimeoutCount",0),op(this,"joinResponse",void 0),op(this,"multiIpOption",void 0),op(this,"initError",void 0),op(this,"spec",void 0),op(this,"store",void 0),op(this,"_external_signal",void 0),op(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(fT.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){switch(t._type){case vT.ON_DATA_STREAM:return void this.handleDataStream(t._message);case vT.MUTE_AUDIO:case vT.MUTE_VIDEO:case vT.ON_P2P_LOST:case vT.ON_USER_ONLINE:return;case vT.ON_USER_OFFLINE:const{uid:e}=t._message;return BS.debug("[".concat(this.clientId,"] user-offline uid: ").concat(e)),void this._external_signal.reset(e)}if(this.emit(t._type,t._message),t._type===vT.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===vT.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(mE.UID_BANNED);break;case 15:this.close(mE.IP_BANNED);break;case 16:this.close(mE.CHANNEL_BANNED)}if(t._type===vT.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case pT.ERR_LICENSE_MISSING:this.close(mE.LICENSE_MISSING);break;case pT.ERR_LICENSE_EXPIRED:this.close(mE.LICENSE_EXPIRED);break;case pT.ERR_LICENSE_MINUTES_EXCEEDED:this.close(mE.LICENSE_MINUTES_EXCEEDED);break;case pT.ERR_LICENSE_PERIOD_INVALID:this.close(mE.LICENSE_PERIOD_INVALID);break;case pT.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(mE.LICENSE_MULTIPLE_SDK_SERVICE);break;case pT.ERR_LICENSE_ILLEGAL:this.close(mE.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new qI("gateway-".concat(this.clientId),this.spec.retryConfig,!0,bS("JOIN_GATEWAY_USE_DUAL_DOMAIN"),bS("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===hT.CONNECTED&&this.reconnect("retry",vE.OFFLINE)})),this.p2pToken=r_(6,""),this._external_signal=new DN(this,this.p2pToken)}async request(e,t,n,r){const i=r_(6,""),o={_id:i,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new cy(((e,t)=>{if(this.connectionState===hT.CONNECTED)return e();const n=()=>{this.off(fT.WS_CLOSED,r),e()},r=()=>{this.off(fT.WS_CONNECTED,n),t(new Wy(Gy.WS_ABORT))};this.once(fT.WS_CONNECTED,n),this.once(fT.WS_CLOSED,r)}));if(this.connectionState!==hT.CONNECTING&&this.connectionState!==hT.RECONNECTING||e===mT.JOIN||e===mT.REJOIN||await a(),this.websocket.sendMessage(o,!0),r)return;const c=new cy(((n,r)=>{let o=!1;const a=(r,i)=>{o=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(fT.WS_CLOSED,c),this.off(fT.WS_RECONNECTING,c),this.emit(fT.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new Wy(Gy.WS_ABORT,"type: ".concat(e))),this.off(fT.WS_CLOSED,c),this.off(fT.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(fT.WS_CLOSED,c),this.once(fT.WS_RECONNECTING,c),n_(bS("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==s||o||(BS.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(fT.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===hT.CLOSED||e===mT.LEAVE)throw new Wy(Gy.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===mT.JOIN||e===mT.REJOIN?null:(await a(),await this.request(e,t))}if(l.isSuccess)return l.message;const u=Number(l.message.error_code||l.message.code),d=xI(u),p=new Wy(Gy.UNEXPECTED_RESPONSE,"".concat(d.desc,": ").concat(l.message.error_str),{code:u,data:l.message});return"success"===d.action?l.message:(BS.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(d.desc,", action: ").concat(d.action)),u===pT.ERR_TOO_MANY_BROADCASTERS?e===mT.JOIN||e===mT.REJOIN?(this.initError=p,this.close(),p.throw()):p.throw():"failed"===d.action?p.throw():"quit"===d.action?(this.initError=p,this.close(),p.throw()):(u===pT.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,BS.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",vE.MULTI_IP)):this.reconnect(d.action,vE.SERVER_ERROR),e===mT.JOIN||e===mT.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new cy((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void BS.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(gT.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=bS("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==hT.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),bS("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}async sendExtensionMessage(e,t,n){return await this._external_signal.send(e,t,n)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new cy(((t,n)=>{this.once(fT.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(fT.WS_CLOSED,(()=>n(this.initError||new Wy(Gy.WS_ABORT)))),this.connectionState=hT.CONNECTING,this.websocket.init(e).catch(n)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||mE.LEAVE,this.connectionState=hT.CLOSED,BS.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===mE.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new qI("gateway-".concat(this.clientId),this.spec.retryConfig,!0,bS("JOIN_GATEWAY_USE_DUAL_DOMAIN"),bS("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents()),this.p2pToken=r_(6,""),this._external_signal.clear(),this._external_signal=new DN(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(fT.ABORT_P2P_EXECUTION);const e=await IE(this,fT.REQUEST_JOIN_INFO),t=await this.request(mT.JOIN,e);if(!t)return this.emit(fT.REPORT_JOIN_GATEWAY,Gy.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(fT.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=hT.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;const n=JE(e.payload),r=(new TextDecoder).decode(n),i=JSON.parse(r);"total"in i&&"id"in i||Or(t=Object.values(II)).call(t,i._type)?(i._uid=e.uid,this._external_signal.onMessage(i)):this.emit(vT.ON_DATA_STREAM,e)}catch(t){this.emit(vT.ON_DATA_STREAM,e)}}handleNotification(e){BS.debug("[".concat(this.clientId,"] receive notification: "),e);const t=xI(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(mE.UID_BANNED),void this.close()):void this.reconnect(t.action,vE.SERVER_ERROR);BS.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=bS("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(BS.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>bS("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",vE.TIMEOUT):this.request(mT.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),bS("REPORT_STATS")&&this.send(mT.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWebsocketEvents(){this.websocket.on(_T.RECONNECT_WAITTING_FINISH,(e=>{this.emit(fT.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(_T.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(fT.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(_T.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(_T.CLOSED,(()=>{this.connectionState=hT.CLOSED})),this.websocket.on(_T.FAILED,(()=>{this._disconnectedReason=mE.NETWORK_ERROR,this.connectionState=hT.CLOSED})),this.websocket.on(_T.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===hT.CONNECTED?this.connectionState=hT.RECONNECTING:this.connectionState=hT.CONNECTING})),this.websocket.on(_T.WILL_RECONNECT,((e,t,n)=>{"retry"!==e?(BS.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0,this.emit(fT.NEED_RENEW_SESSION)):BS.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),n(e)})),this.websocket.on(_T.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.join().catch((e=>{if(this.emit(fT.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof Wy&&e.code===Gy.UNEXPECTED_RESPONSE&&e.data.code===pT.ERR_NO_AUTHORIZED)return BS.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",vE.SERVER_ERROR);BS.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",vE.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(_T.REQUEST_NEW_URLS,((e,t)=>{IE(this,fT.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(_T.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(vT.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}function xN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xN(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const PN=new Map;class jN extends lE{get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(JT.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(JT.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){BS.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),op(this,"store",void 0),op(this,"joinInfo",void 0),op(this,"key",void 0),op(this,"ntpOffset",0),op(this,"signal",void 0),op(this,"role",void 0),op(this,"inChannelInfo",{joinAt:null,duration:0}),op(this,"spec",void 0),op(this,"_state","DISCONNECTED"),op(this,"_statsCollector",void 0),op(this,"_disconnectedReason",void 0),op(this,"isSignalRecover",!1),op(this,"hasChangeBGPAddress",!1),op(this,"trafficStatsInterval",void 0),op(this,"networkQualityInterval",void 0),op(this,"_joinGatewayStartTime",0),op(this,"_signalTimeout",!1),op(this,"_clientRoleOptions",void 0),op(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?new kN(LN(LN({},t),{},{retryConfig:t.websocketRetryConfig}),e):this.store.useDataChannel?new MN(LN(LN({},t),{},{retryConfig:t.websocketRetryConfig}),e):new QI(LN(LN({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,n){if(this.signal instanceof MN){let t=!1;"disabled"!==e.cloudProxyServer?(BS.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(e.cloudProxyServer,")")),t=!0):"".concat(e.apResponse.cid,"_").concat(e.apResponse.cert).length>255||"".concat(e.apResponse.cid,"_").concat(e.apResponse.cert).length<22?(BS.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),t=!0):e.apResponse.addresses.some((e=>e.fingerprint))||bS("FINGERPRINT")||(BS.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),t=!0),t&&this.resetSignal()}this.store.joinGatewayStart(),"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const r=Date.now();let i=PN.get(e.cname);if(i||(i=new Map,PN.set(e.cname,i)),this._isProactiveJoin=!0,i.has(e.uid)){const t=new kT(Gy.UID_CONFLICT);throw eT.joinGateway(e.sid,{lts:r,succ:!1,ec:t.message,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:this.signal instanceof MN?"1":"0"}),this._isProactiveJoin=!1,t}i.set(e.uid,!0),this.joinInfo=e,this.key=t;let o=0;this.joinGatewayStartTime=r;const s=e.proxyServer;try{let t;if(BS.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof MN?"datachannel":"websocket"," join uid ").concat(o)),this.signal instanceof MN)t=await this.signal.init(e.apResponse.addresses,n);else{const r=e.gatewayAddrs.map((t=>{let{address:n}=t;const[r,i]=n.split(":"),o={host:r,port:i};return e.proxyServer&&(o.proxy=e.proxyServer),o}));t=await this.signal.init(r,n)}o=t.uid,BS.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof MN?"datachannel":"websocket"," join uid ").concat(o," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(t){if(t&&t.code===Gy.INIT_WEBSOCKET_TIMEOUT)throw BS.warning("[".concat(this.store.clientId,"] User join failed"),t.toString()),t;if(t&&t.code===Gy.INIT_DATACHANNEL_TIMEOUT)throw BS.warning("[".concat(this.store.clientId,"] User join datachannel failed"),t.toString()),this.resetSignal(),t;throw BS.error("[".concat(this.store.clientId,"] User join failed"),t.toString()),eT.joinGateway(e.sid,{lts:r,succ:!1,ec:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!s,signalChannel:this.signal instanceof MN?"1":"0"}),this._isProactiveJoin=!1,i.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),BS.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((()=>{this.updateTrafficStats().catch((e=>{BS.warning("[".concat(this.store.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(JT.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(JT.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(JT.NETWORK_QUALITY,{uplinkNetworkQuality:SN(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:SN(this._statsCollector.trafficStats.B_dnq)}):this.emit(JT.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),o}async leave(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if("DISCONNECTED"!==this.state){t!==mE.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==hT.CONNECTED||await function(e,t){return t===1/0?e:cy.race([e,t_(t)])}(this.signal.request(mT.LEAVE,void 0,!0),3e3)}catch(e){BS.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e)}this.signal.close(t),t!==mE.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kT(Gy.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const r={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:bS("PUB_EXTEND"),twcc:!!bS("PUBLISH_TWCC"),rtx:!!bS("USE_PUB_RTX")};try{return(await this.signal.request(mT.PUBLISH,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===pT.ERR_PUBLISH_REQUEST_INVALID)return BS.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),r.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw r}}async publishDataChannel(e,t,n){var r;if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kT(Gy.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const i={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:null!==(r=t.maxRetransmits)&&void 0!==r?r:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(mT.PUBLISH_DATASTREAM,i,!0)}catch(r){if(n&&r.data&&r.data.code===pT.ERR_PUBLISH_REQUEST_INVALID)return BS.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),r.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw r}}async unpublish(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kT(Gy.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(mT.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(e){BS.warning("[".concat(this.store.clientId,"] unpublish warning: "),e)}}async unpublishDataChannel(e){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kT(Gy.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await cy.all(e.map((e=>this.signal.request(mT.UNPUBLISH_DATASTREAM,{channel_id:e},!0))))}catch(e){BS.warning("unpublish datachannels warning: ",e)}}async presubscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kT(Gy.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!bS("SUBSCRIBE_TWCC"),rtx:!!bS("USE_SUB_RTX")||void 0,extend:bS("SUB_EXTEND"),svc:Array.isArray(bS("SVC"))&&0!==bS("SVC").length?bS("SVC"):void 0};try{return await this.signal.request(mT.PRE_SUBSCRIBE,r,!0)}catch(r){if(n&&r.data&&r.data.code===pT.ERR_SUBSCRIBE_REQUEST_INVALID)return BS.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),r.toString()),this.presubscribe(e,t,!1);throw r}}async subscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kT(Gy.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!bS("SUBSCRIBE_TWCC"),rtx:!!bS("USE_SUB_RTX"),extend:bS("SUB_EXTEND"),ssrcId:t.ssrcId,svc:Array.isArray(bS("SVC"))&&0!==bS("SVC").length?bS("SVC"):void 0};try{return(await this.signal.request(mT.SUBSCRIBE,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===pT.ERR_SUBSCRIBE_REQUEST_INVALID)return BS.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),r.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw r}}async subscribeDataChannel(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kT(Gy.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const r={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(mT.SUBSCRIBE_DATASTREAM,r,!0)}catch(r){if(n&&r.data&&r.data.code===pT.ERR_SUBSCRIBE_REQUEST_INVALID)return BS.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),r.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw r}}async subscribeAll(e,t){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kT(Gy.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const n={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!bS("USE_SUB_RTX")};try{return await this.signal.request(mT.SUBSCRIBE_STREAMS,n,!0)}catch(n){if(t&&n.data&&n.data.code===pT.ERR_SUBSCRIBE_REQUEST_INVALID)return BS.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),n.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw n}}async setVideoProfile(e){const t=function(e){if(!(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width))return;let t=e.frameRate,n=e.width,r=e.height,i=!0;return"number"!=typeof t&&(t=t.exact||t.ideal||t.max||t.min||0,t||(i=!1)),"number"!=typeof n&&(n=n.exact||n.ideal||n.max||n.min||0,n||(i=!1)),"number"!=typeof r&&(r=r.exact||r.ideal||r.max||r.min||0,t||(i=!1)),i?{stream_type:0,width:n,height:r,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}(e);if(t)return this.signal.request(mT.SET_VIDEO_PROFILE,t);BS.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(mT.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(e){BS.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),e)}}async unsubscribeDataChannel(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new kT(Gy.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await cy.all(e.map((e=>this.signal.request(mT.UNSUBSCRIBE_DATASTREAM,{stream_id:e,uid:t},!0))))}catch(e){BS.warning("unsubscribeDataChannel warning: ",e)}}async massUnsubscribe(e){try{await this.signal.request(mT.UNSUBSCRIBE_STREAMS,e,!0)}catch(e){BS.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),e)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=e;return{gatewayEstablishParams:await this.signal.request(mT.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(mT.GATEWAY_INFO)}async renewToken(e){await this.signal.request(mT.RENEW_TOKEN,e),this.key=e.token}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),"CONNECTED"!==this.state)return void(this.role=e);let n,r=0;"audience"===e?this._clientRoleOptions&&this._clientRoleOptions.delay?(n=this._clientRoleOptions.delay,r=1):r=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:r=0,await this.signal.request(mT.SET_CLIENT_ROLE,{role:e,level:r,delay:n,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(mT.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(mT.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(mT.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(mT.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(mT.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,n){if(this.signal instanceof kN)return this.signal.sendExtensionMessage(e,t,n)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),LN({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(mT.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=PN.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){let t;return t=e.startsWith("dc")?e.match(/(dc\:\/\/)?([^:]+):(\d+)/):e.match(/(wss\:\/\/)?([^:]+):(\d+)/),t?{username:nT.username,password:nT.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(LN(LN({},nT),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if("CONNECTED"!==this.state)return;const e=await this.signal.request(mT.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),null!=e.ntp_offset&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach((e=>{const t=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find((t=>t.peer_uid===e.peer_uid));t&&t.B_st!==e.B_st&&WE((()=>{this.emit(JT.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new kT(Gy.UNEXPECTED_ERROR,"can not generate join message, no join info");const t=Object.assign({},this.joinInfo.apResponse);let n=bS("REPORT_APP_SCENARIO");if("string"!=typeof n)try{n=JSON.stringify(n)}catch(e){n=void 0}n&&n.length>128&&(n=void 0);const r=LN({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:mS,browser:navigator.userAgent,process_id:bS("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:bS("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:n,attributes:{userAttributes:{enablePublishedUserList:bS("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:bS("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:"number"==typeof bS("SUBSCRIBE_AUDIO_FILTER_TOPN")?bS("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:"boolean"==typeof bS("ENABLE_PUBLISH_AUDIO_FILTER")?bS("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:"boolean"==typeof bS("ENABLE_USER_LICENSE_CHECK")?bS("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:!0===bS("USE_PUB_RTX")||!0===bS("USE_SUB_RTX")||void 0,disableFEC:bS("DISABLE_FEC"),enableNTPReport:!!bS("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!bS("ENABLE_INSTANT_VIDEO")||void 0,enableDataStream2:"boolean"==typeof bS("ENABLE_DATASTREAM_2")?bS("ENABLE_DATASTREAM_2"):void 0,rtm2Flag:"number"==typeof this.joinInfo.rtmFlag?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!bS("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:"boolean"==typeof bS("USE_XR")?bS("USE_XR"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(r.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(r.aes_mode=this.joinInfo.aesmode,bS("ENCRYPT_AES")?(r.aes_secret=this.joinInfo.aespassword,r.aes_encrypt=!0):r.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(r.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(r.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(r.default_video_stream=this.joinInfo.defaultVideoStream),r}getRejoinMessage(){if(!this.joinInfo)throw new kT(Gy.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(fT.WS_RECONNECT_WAITTING_FINISH,(e=>{var t;Or(t=["tryNext","recover"]).call(t,e)&&this.joinInfo&&eT.adjustSessionStartTime(this.joinInfo.sid)})),this.signal.on(fT.WS_RECONNECT_CREATE_CONNECTION,(e=>{this.joinGatewayStartTime=Date.now()})),this.signal.on(fT.WS_RECONNECTING,(e=>{this.joinInfo&&eT.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||vE.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",eT.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:"live"===this.spec.mode?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:"audience"===this.role?2:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())})),this.signal.on(fT.WS_CLOSED,(e=>{let t;switch(e){case mE.LEAVE:t=vE.LEAVE;break;case mE.UID_BANNED:case mE.IP_BANNED:case mE.CHANNEL_BANNED:case mE.SERVER_ERROR:t=vE.SERVER_ERROR;break;case mE.FALLBACK:t=vE.FALLBACK;break;case mE.LICENSE_MISSING:case mE.LICENSE_EXPIRED:case mE.LICENSE_MINUTES_EXCEEDED:case mE.LICENSE_PERIOD_INVALID:case mE.LICENSE_MULTIPLE_SDK_SERVICE:case mE.LICENSE_ILLEGAL:case mE.TOKEN_EXPIRE:t=e;break;default:t=vE.NETWORK_ERROR}BS.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(t||"undefined -> "+vE.NETWORK_ERROR)),this.joinInfo&&eT.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===mE.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==mE.FALLBACK&&(this.state="DISCONNECTED"),this.reset()})),this.signal.on(fT.WS_CONNECTED,(()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(BS.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),eT.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof MN?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&1===this.joinInfo.setLocalAPVersion)){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void BS.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));_S("EVENT_REPORT_DOMAIN",e[1]),_S("EVENT_REPORT_BACKUP_DOMAIN",e[1]),_S("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}})),this.signal.on(vT.ON_UPLINK_STATS,(e=>{this._statsCollector.updateUplinkStats(e)})),this.signal.on(fT.REQUEST_RECOVER,((e,t,n)=>{if(!this.joinInfo)return n(new kT(Gy.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,IE(this,JT.REQUEST_NEW_GATEWAY_LIST).then(t).catch(n)})),this.signal.on(fT.REQUEST_JOIN_INFO,(async e=>{var t;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));const{iceParameters:n,dtlsParameters:r,rtpCapabilities:i}=await IE(this,JT.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(t=this.joinInfo)||void 0===t?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:n,dtlsParameters:r,rtpCapabilities:i,version:"2"}}))})),this.signal.on(fT.REQUEST_REJOIN_INFO,(e=>{e(this.getRejoinMessage())})),this.signal.on(fT.REPORT_JOIN_GATEWAY,((e,t)=>{this.joinInfo&&(eT.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:e,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof MN?"1":"0"}),this._isProactiveJoin=!1)})),this.signal.on(fT.IS_P2P_DISCONNECTED,(e=>{e(CE(this,JT.IS_P2P_DISCONNECTED))})),this.signal.on(fT.DISCONNECT_P2P,(()=>{this.emit(JT.DISCONNECT_P2P)})),this.signal.on(fT.NEED_RENEW_SESSION,(()=>{this.emit(JT.NEED_RENEW_SESSION)})),this.signal.on(fT.REQUEST_SUCCESS,(()=>{this._signalTimeout=!1})),this.signal.on(fT.REQUEST_TIMEOUT,(()=>{this._signalTimeout=!0})),this.signal.on(fT.JOIN_RESPONSE,(e=>{const t=this.getCurrentGatewayAddress();this.emit(JT.JOIN_RESPONSE,e,t)})),this.signal.on(fT.DATACHANNEL_PRECONNECT,(async(e,t,n)=>{this.updateTurnConfigFromSignal();const r=this.getCurrentGatewayAddress();return IE(this,JT.DATACHANNEL_PRECONNECT,e,r).then(t).catch(n)})),this.signal.on(fT.DATACHANNEL_CONNECTING,(async e=>{const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=await IE(this,JT.REQUEST_DC_CONNECTION_PARAMS);e(this.getJoinMessage({ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:r,version:"2"}}))})),this.signal.on(fT.DATACHANNEL_FAILBACK,(()=>{BS.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(JT.DATACHANNEL_FAILBACK)}))}async tryUnsubBeforeResub(e,t){try{await this.signal.request(mT.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(e){throw BS.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),e),e}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(mT.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(e){throw BS.warning("unsubscribe datachannel warning",e),e}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(mT.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(e){throw BS.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),e),e}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(mT.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(e){throw BS.warning("unpublish datastream warning: ",e),e}}async tryMassUnsubBeforeResub(e){const t={users:e.map((e=>({stream_id:e.stream_id,stream_type:e.stream_type})))};try{await this.signal.request(mT.UNSUBSCRIBE_STREAMS,t,!0)}catch(e){throw BS.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),e),e}}async muteLocal(e,t){const n={action:e.find((e=>e.stream_type===QT.Audio))?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(mT.CONTROL,n,!0,!0)}catch(e){throw BS.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),e),e}}async unmuteLocal(e,t){const n={action:e.find((e=>e.stream_type===QT.Audio))?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(mT.CONTROL,n,!0,!0)}catch(e){throw BS.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),e),e}}async muteRemote(e,t){const n={action:e===aI.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(mT.CONTROL,n,!0,!0)}catch(e){throw BS.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),e),e}}async unmuteRemote(e,t){const n={action:e===aI.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(mT.CONTROL,n,!0,!0)}catch(e){throw BS.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),e),e}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(mT.RESTART_ICE,t,!0)}catch(e){throw BS.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),e),e}}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,vE.P2P_FAILED)}getCurrentGatewayAddress(){var e;if(!bS("GATEWAY_WSS_ADDRESS"))return null!==(e=this.joinInfo)&&void 0!==e&&e.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(mT.SET_PARAMETER,{enablePublishAudioFilter:e})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(mE.FALLBACK)),this.store.useDataChannel=!1,this.signal=new QI(LN(LN({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(JT.RESET_SIGNAL,$T.websocket)}}let UN=0,FN=0;function zN(e,t,n,r){return new cy(((i,o)=>{t.timeout=t.timeout||bS("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),UN+=$E(t.data)):n&&(t.data.size?UN+=t.data.size:t.data instanceof FormData?UN+=e_(t.data):UN+=$E(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,oS.request(t).then((e=>{"string"==typeof e.data?FN+=$E(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?FN+=e.data.byteLength:FN+=$E(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((e=>{oS.isCancel(e)?o(new kT(Gy.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new kT(Gy.NETWORK_TIMEOUT,e.message)):e.response?o(new kT(Gy.NETWORK_RESPONSE_ERROR,e.response.status)):o(new kT(Gy.NETWORK_ERROR,e.message))}))}))}!function(){var e;function n(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},o=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{var n=o;e=e.split(".");for(var r=0;r<e.length-1;r++){var s=e[r];if(!(s in n))break e;n=n[s]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:n(e)}}if(s("Symbol",(function(e){function t(e,t){this.A=e,i(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),s("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var s=o[t[r]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&i(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(n(this))}})}return e})),"function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var l;e:{var u={};try{u.__proto__={a:!0},l=u.a;break e}catch(e){}l=!1}r=l?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=r;function p(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function h(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function f(e,t){return e.h=3,{value:t}}function m(e){this.g=new p,this.G=e}function g(e,t,n,r){try{var i=t.call(e.g.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.m=!1,i;var o=i.value}catch(t){return e.g.j=null,e.g.s(t),v(e)}return e.g.j=null,r.call(e.g,o),v(e)}function v(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function y(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){h(e.g);var n=e.g.j;return n?g(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),v(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function E(e,t){return t=new y(new m(t)),d&&e.prototype&&d(t,e.prototype),t}if(p.prototype.o=function(e){this.v=e},p.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},p.prototype.return=function(e){this.l={return:e},this.h=this.u},m.prototype.o=function(e){return h(this.g),this.g.j?g(this,this.g.j.next,e,this.g.o):(this.g.o(e),v(this))},m.prototype.s=function(e){return h(this.g),this.g.j?g(this,this.g.j.throw,e,this.g.o):(this.g.s(e),v(this))},s("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var _=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},b=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},S=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},T=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},I="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,N=I.FormData,w=I.XMLHttpRequest&&I.XMLHttpRequest.prototype.send,C=I.Request&&I.fetch,O=I.navigator&&I.navigator.sendBeacon,A=I.Element&&I.Element.prototype,R=I.Symbol&&Symbol.toStringTag;R&&(Blob.prototype[R]||(Blob.prototype[R]="Blob"),"File"in I&&!File.prototype[R]&&(File.prototype[R]="File"));try{new File([],"")}catch(e){I.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),R&&Object.defineProperty(e,R,{value:"File"}),e}}var M=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},D=function(e){this.i=[];var t=this;e&&_(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];_(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?_(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?b(e.value):e.value,t.append(e.name,n))}))};if((e=D.prototype).append=function(e,t,n){T(arguments,2),this.i.push(S(e,t,n))},e.delete=function(e){T(arguments,1);var t=[];e=String(e),_(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},e.entries=function e(){var t,n=this;return E(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=f(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){T(arguments,1);for(var n=c(this),r=n.next();!r.done;r=n.next()){var i=c(r.value);r=i.next().value,i=i.next().value,e.call(t,i,r,this)}},e.get=function(e){T(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},e.getAll=function(e){T(arguments,1);var t=[];return e=String(e),_(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},e.has=function(e){T(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,n,r,i=this;return E(e,(function(e){if(1==e.h&&(t=c(i),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,f(e,c(r).next().value));n=t.next(),e.h=2}))},e.set=function(e,t,n){T(arguments,2),e=String(e);var r=[],i=S(e,t,n),o=!0;_(this.i,(function(t){t[0]===e?o&&(o=!r.push(i)):r.push(t)})),o&&r.push(i),this.i=r},e.values=function e(){var t,n,r,i,o=this;return E(e,(function(e){if(1==e.h&&(t=c(o),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,(i=c(r)).next(),f(e,i.next().value));n=t.next(),e.h=2}))},D.prototype._asNative=function(){for(var e=new N,t=c(this),n=t.next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.append(n,r)}return e},D.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,r){return"string"==typeof e?t.push(n+M(b(r))+'"\r\n\r\n'+b(e)+"\r\n"):t.push(n+M(b(r))+'"; filename="'+M(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},D.prototype[Symbol.iterator]=function(){return this.entries()},D.prototype.toString=function(){return"[object FormData]"},A&&!A.matches&&(A.matches=A.matchesSelector||A.mozMatchesSelector||A.msMatchesSelector||A.oMatchesSelector||A.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),R&&(D.prototype[R]="FormData"),w){var k=I.XMLHttpRequest.prototype.setRequestHeader;I.XMLHttpRequest.prototype.setRequestHeader=function(e,t){k.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},I.XMLHttpRequest.prototype.send=function(e){e instanceof D?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),w.call(this,e)):w.call(this,e)}}C&&(I.fetch=function(e,t){return t&&t.body&&t.body instanceof D&&(t.body=t.body._blob()),C.call(this,e,t)}),O&&(I.navigator.sendBeacon=function(e,t){return t instanceof D&&(t=t._asNative()),O.call(this,e,t)}),I.FormData=D}}();const BN=()=>{const e=bS("AREAS");return 0===e.length&&e.push(eI.GLOBAL),zE(e).call(e,((e,t,n)=>{const r=VN(t);return r?0===n?r:"".concat(e,",").concat(r):e}),"")},VN=e=>e===eI.OVERSEA?"".concat(rI.ASIA,",").concat(rI.EUROPE,",").concat(rI.AFRICA,",").concat(rI.NORTH_AMERICA,",").concat(rI.SOUTH_AMERICA,",").concat(rI.OCEANIA):rI[e],HN=e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((e=>{const n=iI[e],r=Object.keys(n);r&&r.map((e=>{"CODE"!==e&&(t[e]=t[e].concat(n[e]))}))})),t},GN={GLOBAL:{ASIA:[eI.CHINA,eI.JAPAN,eI.INDIA,eI.KOREA,eI.HKMC],EUROPE:[],NORTH_AMERICA:[eI.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},WN=Object.keys(GN[eI.GLOBAL]),YN=[eI.CHINA,eI.NORTH_AMERICA,eI.EUROPE,eI.ASIA,eI.JAPAN,eI.INDIA,eI.OCEANIA,eI.SOUTH_AMERICA,eI.AFRICA,eI.KOREA,eI.HKMC,eI.US],qN=function(e,t){let n=[];if(Or(e).call(e,eI.GLOBAL)){const o=[eI.GLOBAL,eI.OVERSEA],s=Object.keys(iI);if(t===eI.GLOBAL)throw new kT(Gy.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===eI.CHINA)n=[eI.OVERSEA];else if(i=t,Or(WN).call(WN,i)){const e=(r=t,GN[eI.GLOBAL][r]||[]),i=[...o,t,...e];n=s.filter((e=>!Or(i).call(i,e)))}else if(function(e){let t=!1;return WN.forEach((n=>{var r;Or(r=GN[eI.GLOBAL][n]).call(r,e)&&(t=!0)})),t}(t)){const e=function(e){let t;return WN.forEach((n=>{var r;Or(r=GN[eI.GLOBAL][n]).call(r,e)&&(t=n)})),t}(t),r=[...o,e,t];n=s.filter((e=>!Or(r).call(r,e)))}else n=e;n=function(e){const t=[];return YN.forEach((n=>{Or(e).call(e,n)&&t.push(n)})),t.concat(e.filter((e=>!Or(YN).call(YN,e))))}(n)}else n=e;var r,i;return n};function KN(e){var t,n;if(!e&&Or(t=bS("AREAS")).call(t,eI.EXTENSIONS))return BS.debug("update area from ap : reset"),void QN(tT,!0);if(!Or(n=bS("AREAS")).call(n,eI.GLOBAL)||!e)return;let r=iI.EXTENSIONS;r&&(r={CODE:VN(eI.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},BS.debug("update area from ap success: ".concat(e,",config is "),r),_S("AREAS",[eI.EXTENSIONS],!0),Object.keys(r).map((e=>{_S(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?r[e][0]:r[e])})))}function QN(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=eT.reportApiInvoke(null,{name:pE.SET_AREA,options:e,tag:hE.TRACER});try{let r=[];if("string"==typeof e&&(r=[e]),Array.isArray(e)&&(e.forEach((e=>{if(!Or(nI).call(nI,e))throw new kT(Gy.INVALID_PARAMS,"invalid area code")})),r=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:t,excludedArea:n}=e;if(!t)throw new kT(Gy.INVALID_PARAMS,"area code is needed");let i=t;"string"==typeof t&&(i=[t]),r=n?qN(i,n):i}if(!t){if(SS.AREAS){const e=new kT(Gy.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return n.onError(e),void BS.warning("setArea is prohibited because of config-distribute")}if(Or(r).call(r,eI.GLOBAL)&&bS("AREAS")===eI.EXTENSIONS){const e=new kT(Gy.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return n.onError(e),void BS.warning("setArea is prohibited because of ap extensions")}}_S("AREAS",r,t);const i=HN(r);Object.keys(i).map((e=>{_S(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?i[e][0]:i[e])})),BS.debug("set area success:",r.join(","))}catch(e){throw n.onError(e),e}n.onSuccess()}function JN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JN(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let ZN=1;function $N(e,t,n,r,i){ZN+=1;const o={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:ZN,requestId:ZN,version:mS,cname:n.cname},s={service_name:t,json_body:JSON.stringify(o)};let a,c,l=e[0];return v_((async()=>{a=Date.now();const e=await zN(l,{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Date.now()-a,0!==e.code){const t=new kT(Gy.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw BS.error(t.toString()),t}const n=JSON.parse(e.json_body);if(200!==n.code){const e=new kT(Gy.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(n.code,", reason: ").concat(n.reason),{code:n.code,responseTime:c});throw BS.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new kT(Gy.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:n.code,responseTime:c});throw BS.error(e.toString()),e}const i=function(e,t){return{addressList:e.servers.map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(bS("WORKER_DOMAIN"),":").concat(e.wss,"?serviceName=").concat(encodeURIComponent(t)))),workerToken:e.workerToken,vid:e.vid}}(n,t);return bS("LIVE_STREAMING_ADDRESS")&&(i.addressList=bS("LIVE_STREAMING_ADDRESS")instanceof Array?bS("LIVE_STREAMING_ADDRESS"):[bS("LIVE_STREAMING_ADDRESS")]),XN(XN({},i),{},{responseTime:c})}),((r,i)=>(eT.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(r.addressList),firstSuccess:0===i,responseTime:c,serverIp:e[i%e.length]}),!1)),((r,i)=>(eT.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:c,serverIp:e[i%e.length]}),!!(r.code!==Gy.OPERATION_ABORTED&&r.code!==Gy.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(l=e[(i+1)%e.length],!0))),i)}let ew=1;function tw(e,t,n,r){let{url:i,areaCode:o}=e;const s=Date.now();let a;const[c,l]=sw(t,o,[lN.CHOOSE_SERVER]);let u=OE.networkState;return v_((async()=>{u&&OE.networkState===yE.OFFLINE&&OE.onlineWaiter&&await cy.race([OE.onlineWaiter,n_(r&&r.maxRetryTimeout||m_.maxRetryTimeout)]),u=OE.networkState;const{data:e,headers:o}=await zN(i,{data:c,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);a="1"===o.http3?1:-1,eT.reportResourceTiming(i,t.sid),rw(e,i,t,s,[lN.CHOOSE_SERVER],a);const l=TN(e,lN.CHOOSE_SERVER);return iw(l),EN(l,i)}),(e=>(e&&eT.joinChooseServer(t.sid,{lts:s,succ:!0,csAddr:i,opid:l,serverList:e.gatewayAddrs.map((e=>e.address)),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[lN.CHOOSE_SERVER].toString(),isHttp3:a}),!1)),(e=>e.code!==Gy.OPERATION_ABORTED&&(e.code===Gy.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(eT.joinChooseServer(t.sid,{lts:s,succ:!1,csAddr:i,serverList:null,opid:l,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[lN.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:u}),isHttp3:a}),BS.warning("[".concat(t.clientId,"] Choose server network error, retry"),e),!0))),r)}function nw(e,t,n,r){let i,{url:o,areaCode:s,serviceIds:a}=e;const c=Date.now(),[l,u]=sw(t,s,a);let d;return v_((async()=>{d&&OE.networkState===yE.OFFLINE&&OE.onlineWaiter&&await cy.race([OE.onlineWaiter,n_(r&&r.maxRetryTimeout||m_.maxRetryTimeout)]),d=OE.networkState;const{data:e,headers:s}=await zN(o,{data:l,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);i="1"===s.http3?1:-1,eT.reportResourceTiming(o,t.sid),rw(e,o,t,c,a,i);const u=TN(e,lN.CHOOSE_SERVER),p=TN(e,"proxy5"===t.cloudProxyServer?lN.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?lN.CLOUD_PROXY:lN.CLOUD_PROXY_FALLBACK);return iw(u),{gatewayInfo:EN(u,o),proxyInfo:p,url:o}}),(e=>(e.gatewayInfo&&eT.joinChooseServer(t.sid,{lts:c,succ:!0,csAddr:o,serverList:e.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,opid:u,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:a.toString(),isHttp3:i}),e.proxyInfo&&eT.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:o,turnServerAddrList:e.proxyInfo.addresses.map((e=>e.ip)).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:a.toString()}),!1)),(e=>e.code!==Gy.OPERATION_ABORTED&&(e.code===Gy.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(eT.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:a.toString(),extend:JSON.stringify({networkState:d})}),BS.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),e),!0))),r)}const rw=(e,t,n,r,i,o)=>{const s=[],a=s=>{4096===s.flag?eT.joinChooseServer(n.sid,{lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:s.error.message,csIp:s.error.data&&s.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:o}):1048576!==s.flag&&4194304!==s.flag&&4194310!==s.flag||eT.joinWebProxyAP(n.sid,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:s.error.code,eventType:n.cloudProxyServer,unilbsServerIds:i.toString()})};if(e.response_body.forEach((t=>{const n=t.buffer.code;if(23===t.uri&&0===n&&!t.buffer.edges_services)if(4194310===t.buffer.flag)BS.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),t.buffer.edges_services=[];else{const n={error:new kT(Gy.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};s.push(n),a(n)}if(0!==n){const r=DI(n),i={error:new kT(Gy.CAN_NOT_GET_GATEWAY_SERVER,r.desc,{desc:r.desc,retry:r.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?BS.warning(i.error.toString()):s.push(i),a(i)}})),s.length)throw BS.warning("[".concat(n.clientId,"] multi unilbs ").concat(t," failed, ").concat(s.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message,", retry: ").concat(e.error.data.retry))).join(" | "))),new kT(Gy.CAN_NOT_GET_GATEWAY_SERVER,s.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message))).join(" | "),{retry:!!s.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(s.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})},iw=e=>{var t,n,r,i;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new kT(Gy.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(bS("AP_AREA")&&(null!==(r=e.detail)&&void 0!==r&&r[23]&&"string"==typeof(null===(i=e.detail)||void 0===i?void 0:i[23])?KN(e.detail[23].toLowerCase()):KN()),null!==(t=e.detail)&&void 0!==t&&t[19]&&"string"==typeof(null===(n=e.detail)||void 0===n?void 0:n[19])){const t=e.detail[19],n=null==t?void 0:t.split(";");for(let r=0;r<n.length;r++){var o;const t=mN(o=n[r]).call(o);e.addresses[r]&&n&&(e.addresses[r].fingerprint=t)}}if(bS("GATEWAY_ADDRESS")&&bS("GATEWAY_ADDRESS").length>0){BS.debug("assign gateway address to",bS("GATEWAY_ADDRESS"));const t=bS("GATEWAY_ADDRESS").map((t=>{var n,r;const i=null!==(n=null===(r=e.addresses.find((e=>e.ip===t.ip&&e.port===t.port)))||void 0===r?void 0:r.fingerprint)&&void 0!==n?n:"";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:i}}));e.addresses=t}},ow=(e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){const e=DI(t.buffer.code);throw new kT(Gy.UPDATE_TICKET_FAILED,"[".concat(t.buffer.code,"]: ").concat(e.desc),{retry:e.retry})}return t.buffer.ticket}throw BS.debug("update ticket request received ap response without response body:",t),new kT(Gy.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},sw=(e,t,n)=>{const r=Math.floor(Math.random()*10**12),i={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:XN({6:e.stringUid,11:t,12:bS("USE_NEW_TOKEN")?"1":void 0,22:t},e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:n,uid:e.uid||0}}]};i.request_bodies.forEach((t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));const o=new FormData;return o.append("request",JSON.stringify(i)),[o,r]},aw=(e,t)=>{const n=Math.floor(Math.random()*10**12),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((e=>({ip:e.ip,port:e.port})))}}]},i=new FormData;return i.append("request",JSON.stringify(r)),[i,n]};let cw=0;function lw(e){return cy.all(e.map((e=>e.then((e=>{throw e}),(e=>e))))).then((e=>{throw e}),(e=>e))}const uw=async e=>{let{fragementLength:t,referenceList:n,asyncMapHandler:r,allFailedhandler:i,promisesCollector:o}=e,s=0;const a=t;let c,l=0;const u=async()=>{const e=(()=>{const e=s*a,t=e+a;return n.slice(e,t).map(r)})();o&&o.push(...e);try{c=await lw(e)}catch(e){if(l+=a,s++,!(l>=n.length))return void await u();i(e)}e.forEach((e=>e.cancel()))};return await u(),c};async function dw(e,t,n,r){const i=async function(e,t,n,r){let i=null;const o=[],s=async()=>{const i=bS("WEBCS_DOMAIN").slice(0,bS("AJAX_REQUEST_CONCURRENT")).map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:BN()}))),s=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),a=await uw({fragementLength:bS("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(BS.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),tw(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:o});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},s),a},a=async()=>{if(await n_(1e3),null!==i)return i;const s=bS("WEBCS_DOMAIN_BACKUP_LIST").map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:BN()}))),a=r.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:s.map((e=>e.url))}),c=await uw({fragementLength:bS("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:r=>(BS.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),tw(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},a),e[0]},promisesCollector:o});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},a),c};try{return i=await lw([s(),a()]),o.length&&o.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),i}catch(e){throw e[0]}}(e,t,n,r);return{gatewayInfo:await i}}async function pw(e,t,n,r,i){const o=e.cloudProxyServer;if("disabled"===o){if(!r)return;if(e.useLocalAccessPoint)return await dw(e,t,n,i);if(bS("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:r,proxyInfo:o}=await mw(e,t,n,i);if(e.turnServer&&"auto"!==e.turnServer.mode)return{gatewayInfo:r};const a=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||nT.tcpport,udpport:e.udpport||nT.udpport,username:e.username||nT.username,password:e.password||nT.password,forceturn:!1,security:!0})));if(i.useP2P){var s;const t=null!==(s=e.uid)&&void 0!==s?s:r.uid,n="glb:".concat(t.toString()),i=await cE(n),c=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||nT.tcpport,udpport:e.udpport||nT.udpport,username:n,password:i,forceturn:!1,security:!0})));a.push(...c)}return e.turnServer={mode:"manual",servers:a},{gatewayInfo:r}}return await dw(e,t,n,i)}const{proxyInfo:a,gatewayInfo:c}=await mw(e,t,n,i),l={gatewayInfo:c},u=a.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===o?void 0:e.tcpport?e.tcpport:nT.tcpport,udpport:"proxy4"===o?void 0:e.udpport?e.udpport:nT.udpport,username:e.username||nT.username,password:e.password||nT.password,forceturn:"proxy4"!==o,security:"proxy5"===o})));if(i.useP2P){var d;const t=null!==(d=e.uid)&&void 0!==d?d:c.uid,n="glb:".concat(t.toString()),r=await cE(n),i=a.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===o?void 0:e.tcpport||nT.tcpport,udpport:"proxy4"===o?void 0:e.udpport||nT.udpport,username:n,password:r,forceturn:"proxy4"!==o,security:"proxy5"===o})));u.push(...i)}return e.turnServer={mode:"manual",servers:u},BS.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(o)),l}async function hw(e,t,n,r,i){const o=bS("ACCOUNT_REGISTER").slice(0,bS("AJAX_REQUEST_CONCURRENT"));let s=[];s=t.proxyServer?o.map((e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"))):o.map((e=>"https://".concat(e,"/api/v1")));const a=null==i?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:s});try{const o=await async function(e,t,n,r,i){const o=Date.now(),s={sid:n.sid,opid:10,appid:n.appId,string_uid:t};let a=e[0];const c=await v_((()=>zN(a+"".concat(-1===a.indexOf("?")?"?":"&","action=stringuid"),{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})),((n,r)=>{if(0===n.code){if(n.uid<=0||n.uid>=Math.pow(2,32))throw BS.error("Invalid Uint Uid ".concat(t," => ").concat(n.uid),n),eT.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:Gy.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new kT(Gy.INVALID_UINT_UID_FROM_STRING_UID);return eT.reqUserAccount(s.sid,{lts:o,success:!0,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:null,extend:s}),!1}const i=DI(n.code);return i.retry&&(a=e[(r+1)%e.length]),eT.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:i.desc,extend:s}),i.retry}),((t,n)=>t.code!==Gy.OPERATION_ABORTED&&(eT.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:null,errorCode:t.code,extend:s}),a=e[(n+1)%e.length],!0)),i);if(0!==c.code){const e=DI(c.code);throw new kT(Gy.UNEXPECTED_RESPONSE,e.desc)}return c}(s,e,t,n,r);return null==i||i.recordJoinChannelService({status:"success",endTs:Date.now()},a),o.uid}catch(e){throw null==i||i.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[e]},a),e}}async function fw(e,t,n){const r=bS("CDS_AP").slice(0,bS("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1"):"https://".concat(t,"/api/v1?action=config"))),i=r.map((r=>function(e,t,n,r){const i=_y(),o={flag:64,cipher_method:0,features:{device:i.name,system:i.os,system_general:navigator.userAgent,vendor:t.appId,version:mS,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return v_((()=>zN(e,{data:o,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})),void 0,(e=>e.code!==Gy.OPERATION_ABORTED),r)}(r,e,t,n)));let o=null,s=null,a={};try{o=await lw(i)}catch(e){if(e.code===Gy.OPERATION_ABORTED)throw e;s=e}if(i.forEach((e=>e.cancel())),eT.reportApiInvoke(e.sid,{name:pE.REQUEST_CONFIG_DISTRIBUTE,options:{error:s,res:o}}).onSuccess(),o&&o.test_tags)try{a=function(e){if(!e.test_tags)return{};const t=e.test_tags,n=Object.keys(t),r={};return n.forEach((e=>{var n;const i=mN(n=e.slice(4)).call(n),o=JSON.parse(t[e])[1];r[i]=o})),r}(o)}catch(e){}return a}async function mw(e,t,n,r){const i=bS("PROXY_SERVER_TYPE3"),o=(e,t,n)=>{let r=n||i;return Array.isArray(r)&&(r=t%2==0?i[1]:i[0]),"https://".concat(r,"/ap/?url=").concat(e)};let s=null;const a=[],c=async()=>{const i=bS("WEBCS_DOMAIN").slice(0,bS("AJAX_REQUEST_CONCURRENT")).map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:BN(),serviceIds:[lN.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?lN.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?lN.CLOUD_PROXY:lN.CLOUD_PROXY_FALLBACK]}})),s=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),c=await uw({fragementLength:bS("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(BS.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),nw(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:a});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},s),c},l=async()=>{if(await n_(1e3),null!==s)return s;const i=bS("WEBCS_DOMAIN_BACKUP_LIST").map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:BN(),serviceIds:[lN.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?lN.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?lN.CLOUD_PROXY:lN.CLOUD_PROXY_FALLBACK]}})),c=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),l=await uw({fragementLength:bS("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(BS.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),nw(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},c),e[0]},promisesCollector:a});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},c),l};let u,d,p;try{({gatewayInfo:u,proxyInfo:d,url:p}=await lw([c(),l()]))}catch(e){throw e[0]}if(a.length&&a.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),!u||!d)throw new kT(Gy.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=p,"disabled"!==e.cloudProxyServer&&Array.isArray(i)&&p){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(p)[1];Or(i).call(i,t)&&(e.proxyServer=t,BS.setProxyServer(t),eT.setProxyServer(t))}return s={gatewayInfo:u,proxyInfo:await IN(d,u.uid)},s}async function gw(e,t,n,r){const i=bS("UAP_AP").slice(0,bS("AJAX_REQUEST_CONCURRENT")).map((e=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")));return await $N(i,e,t,n,r)}async function vw(e,t,n){const r=bS("UAP_AP").slice(0,bS("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap"))),i=r.map((r=>function(e,t,n,r){const i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:mS,cname:t.cname,uid:t.uid.toString(),requestId:ew,seq:ew};ew+=1;const o={service_name:"tele_channel",json_body:JSON.stringify(i)};return v_((async()=>{const t=await zN(e,{data:o,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==t.code){const e=new kT(Gy.UNEXPECTED_RESPONSE,"cross channel ap error, code"+t.code,{retry:!0});throw BS.error(e.toString()),e}const r=JSON.parse(t.json_body);if(200!==r.code){const e=new kT(Gy.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(r.code,", reason: ").concat(r.reason));throw BS.error(e.toString()),e}if(!r.servers||0===r.servers.length){const e=new kT(Gy.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw BS.error(e.toString()),e}return{vid:r.vid,workerToken:r.workerToken,addressList:(bS("CHANNEL_MEDIA_RELAY_SERVERS")||r.servers).map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(bS("WORKER_DOMAIN"),":").concat(e.wss)))}}),void 0,(e=>!!(e.code!==Gy.OPERATION_ABORTED&&e.code!==Gy.UNEXPECTED_RESPONSE||e.data&&e.data.retry)),r)}(r,e,t,n)));try{const e=await lw(i);return i.forEach((e=>e.cancel())),e}catch(e){throw e[0]}}async function yw(e,t,n){let r=null;const i=[],o=async o=>{const s=bS(o?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2")));return o&&(await n_(1e3),null!==r)?r:await uw({fragementLength:bS("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:r=>(BS.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(o?"backup":""," choose_server:"),r),function(e,t,n,r){const[i]=aw(t,[lN.CHOOSE_SERVER]);let o=OE.networkState;return v_((async()=>{o&&OE.networkState===yE.OFFLINE&&OE.onlineWaiter&&await cy.race([OE.onlineWaiter,n_(r&&r.maxRetryTimeout||m_.maxRetryTimeout)]),o=OE.networkState;const t=await zN(e,{data:i,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);return ow(t,e)}),(()=>!1),(e=>e.code!==Gy.OPERATION_ABORTED&&(e.code===Gy.UPDATE_TICKET_FAILED?e.data.retry:(BS.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0))),r)}(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:i})};try{return r=await lw([o(!1),o(!0)]),i.length&&i.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),r}catch(e){throw e[0]}}function Ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ew(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ew(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class bw extends lE{get isSuccess(){return!!this.configs}constructor(){super(),op(this,"configs",void 0),op(this,"joinInfo",void 0),op(this,"cancelToken",void 0),op(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),op(this,"interval",void 0),op(this,"mutex",new h_("config-distribute")),op(this,"mutableParamsRead",!1)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),bS("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval((()=>{this.updateConfigDistribute()}),bS("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,eT.reportApiInvoke(null,{options:void 0,name:pE.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:hE.TRACER}).onSuccess(JSON.stringify(SS))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void BS.debug("[config-distribute] get config distribute interrupted have no joininfo");let e;const t=await this.mutex.lock();try{e=await fw(this.joinInfo,this.cancelToken,this.retryConfig),BS.debug("[config-distribute] get config distribute",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(e){const t=new kT(Gy.NETWORK_RESPONSE_ERROR,e);BS.warning("[config-distribute] ".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(oI.UPDATE_BITRATE_LIMIT,e):this.emit(oI.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&_w({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;const n=eh(t=Object.keys(e).filter((e=>/^webrtc_ng_global_parameter/.test(e)))).call(t);for(let i=0;i<n.length;i++)for(let t=n.length-1;t>i;t--){const r=n[t];if("number"==typeof e[r].__priority){const i=e[r].__priority,o=n[t-1];if("number"==typeof e[o].__priority){if(!(i>e[o].__priority))continue;{const e=r;n[t]=n[t-1],n[t-1]=e}}else{const e=r;n[t]=n[t-1],n[t-1]=e}}}const r={};n.forEach((t=>{const n=e[t],i=n.__expires;Object.keys(n).forEach((e=>{"__priority"===e||"__expires"===e||Object.prototype.hasOwnProperty.call(r,e)||(r[e]=_w({value:n[e]},i&&{expires:i}))}))}));try{!function(e){try{const t=Date.now();Object.keys(e).forEach((n=>{switch(n){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":if(Object.prototype.hasOwnProperty.call(ES,n)){const{value:r,expires:i}=e[n];if(i&&i<=t)return;SS[n]=r,ES[n]=r,BS.debug("Update global parameters from config distribute",n,r)}}}))}catch(t){BS.error("Error update config immediately: ".concat(e),t.message)}}(r);const e=JSON.stringify(r),t=window.btoa(e);window.localStorage.setItem("websdk_ng_global_parameter",t),BS.debug("Caching global parameters ".concat(e))}catch(e){BS.error("Error caching global parameters:",e.message)}}}const Sw={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1};function Tw(){return Sw}var Iw;function Nw(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function ww(e,t,n,r,i){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:i}}function Cw(e,t,n,r,i){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:i}}function Ow(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}!function(e){e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change"}(Iw||(Iw={}));const Aw={"90p":ww(160,90),"90p_1":ww(160,90),"120p":ww(160,120,15,30,65),"120p_1":ww(160,120,15,30,65),"120p_3":ww(120,120,15,30,50),"120p_4":ww(212,120),"180p":ww(320,180,15,30,140),"180p_1":ww(320,180,15,30,140),"180p_3":ww(180,180,15,30,100),"180p_4":ww(240,180,15,30,120),"240p":ww(320,240,15,40,200),"240p_1":ww(320,240,15,40,200),"240p_3":ww(240,240,15,40,140),"240p_4":ww(424,240,15,40,220),"360p":ww(640,360,15,80,400),"360p_1":ww(640,360,15,80,400),"360p_3":ww(360,360,15,80,260),"360p_4":ww(640,360,30,80,600),"360p_6":ww(360,360,30,80,400),"360p_7":ww(480,360,15,80,320),"360p_8":ww(480,360,30,80,490),"360p_9":ww(640,360,15,80,800),"360p_10":ww(640,360,24,80,800),"360p_11":ww(640,360,24,80,1e3),"480p":ww(640,480,15,100,500),"480p_1":ww(640,480,15,100,500),"480p_2":ww(640,480,30,100,1e3),"480p_3":ww(480,480,15,100,400),"480p_4":ww(640,480,30,100,750),"480p_6":ww(480,480,30,100,600),"480p_8":ww(848,480,15,100,610),"480p_9":ww(848,480,30,100,930),"480p_10":ww(640,480,10,100,400),"720p":ww(1280,720,15,120,1130),"720p_auto":ww(1280,720,30,900,3e3),"720p_1":ww(1280,720,15,120,1130),"720p_2":ww(1280,720,30,120,2e3),"720p_3":ww(1280,720,30,120,1710),"720p_5":ww(960,720,15,120,910),"720p_6":ww(960,720,30,120,1380),"1080p":ww(1920,1080,15,120,2080),"1080p_1":ww(1920,1080,15,120,2080),"1080p_2":ww(1920,1080,30,120,3e3),"1080p_3":ww(1920,1080,30,120,3150),"1080p_5":ww(1920,1080,60,120,4780),"1440p":ww(2560,1440,30,120,4850),"1440p_1":ww(2560,1440,30,120,4850),"1440p_2":ww(2560,1440,60,120,7350),"4k":ww(3840,2160,30,120,8910),"4k_1":ww(3840,2160,30,120,8910),"4k_3":ww(3840,2160,60,120,13500)},Rw=[{scaleResolutionDownBy:2,width:1280,height:720,frameRate:30,bitrateMin:300,bitrateMax:900},{scaleResolutionDownBy:1.333333,width:1280,height:720,frameRate:30,bitrateMin:600,bitrateMax:2e3},{scaleResolutionDownBy:1,width:1280,height:720,frameRate:30,bitrateMin:900,bitrateMax:3e3}],Mw={"480p":Cw(640,480,5),"480p_1":Cw(640,480,5),"480p_2":Cw(640,480,30),"480p_3":Cw(640,480,15),"720p":Cw(1280,720,5),"720p_auto":ww(1280,720,30,900,3e3),"720p_1":Cw(1280,720,5),"720p_2":Cw(1280,720,30),"720p_3":Cw(1280,720,15),"1080p":Cw(1920,1080,5),"1080p_1":Cw(1920,1080,5),"1080p_2":Cw(1920,1080,30),"1080p_3":Cw(1920,1080,15)},Dw={"1SL1TL":Ow(1,1),"3SL3TL":Ow(3,3),"2SL3TL":Ow(2,3)};function kw(e){return e||(e="480p_1"),"string"==typeof e?Object.assign({},Aw[e]):e}function xw(e){return"string"==typeof e?Object.assign({},Mw[e]):e}function Lw(e){return"string"==typeof e?Object.assign({},Dw[e]):e}const Pw={speech_low_quality:Nw(16e3,!1),speech_standard:Nw(32e3,!1,18),music_standard:Nw(48e3,!1),standard_stereo:Nw(48e3,!0,56),high_quality:Nw(48e3,!1,128),high_quality_stereo:Nw(48e3,!0,192)};function jw(e){return"string"==typeof e?Object.assign({},Pw[e]):e}const Uw=[];function Fw(e){return qy(e,"mediaSource",["screen","window","application"]),!0}var zw,Bw,Vw,Hw,Gw,Ww,Yw,qw,Kw,Qw;!function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track"}(zw||(zw={})),function(e){e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream"}(Bw||(Bw={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(Vw||(Vw={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(Hw||(Hw={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY"}(Gw||(Gw={})),function(e){e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received"}(Ww||(Ww={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed"}(Yw||(Yw={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed"}(qw||(qw={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source"}(Kw||(Kw={})),function(e){e.UPDATE_TRACK_SOURCE="update-track-source"}(Qw||(Qw={}));const Jw={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},Xw={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},Zw={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},$w={uplinkNetworkQuality:0,downlinkNetworkQuality:0},eC={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};var tC,nC,rC,iC,oC,sC;!function(e){e.ON_TRACK="on_track",e.ON_NODE="on_node"}(tC||(tC={})),function(e){e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints"}(nC||(nC={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(rC||(rC={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(iC||(iC={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata"}(oC||(oC={})),function(e){e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen"}(sC||(sC={}));const aC={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};var cC;!function(e){e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error"}(cC||(cC={}));class lC extends lE{constructor(e,t){super(),op(this,"_ID",void 0),op(this,"_rtpTransceiver",void 0),op(this,"_lowRtpTransceiver",void 0),op(this,"_hints",[]),op(this,"_isClosed",!1),op(this,"_originMediaStreamTrack",void 0),op(this,"_mediaStreamTrack",void 0),op(this,"_external",{}),this._ID=t||r_(8,"track-"),this._originMediaStreamTrack=e,this._mediaStreamTrack=e,function(e){Or(Uw).call(Uw,e)||Uw.push(e)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){if(!e){const e=eT.reportApiInvoke(null,{name:pE.GET_MEDIA_STREAM_TRACK,options:[],tag:hE.TRACER});this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?e.onSuccess(this._mediaStreamTrack.label):e.onSuccess("")}return this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===Vw.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){const t=Uw.indexOf(e);-1!==t&&Uw.splice(t,1)}(this),this.emit(Yw.CLOSED),this.removeAllListeners(Ww.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===Vw.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(Ww.TRANSCEIVER_UPDATED,e,t)}}class uC extends lC{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),op(this,"_enabled",!0),op(this,"_muted",!1),op(this,"_isExternalTrack",!1),op(this,"_isClosed",!1),op(this,"_enabledMutex",void 0),op(this,"processor",void 0),op(this,"_handleTrackEnded",(()=>{this.onTrackEnded()})),this._enabledMutex=new h_("".concat(this.getTrackId())),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,BS.debug("[".concat(this.getTrackId(),"] close")),this.emit(zw.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isExternalTrack=n,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await NE(this,zw.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){BS.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Yw.TRACK_ENDED)}stateCheck(e,t){if(BS.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),Yy(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new Wy(Gy.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",BS);if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new Wy(Gy.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",BS)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():cy.resolve([])}}function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const pC=window.AudioContext||window.webkitAudioContext;let hC=null;const fC=new class extends lE{constructor(){super(...arguments),op(this,"prevState",void 0),op(this,"curState",void 0),op(this,"currentTime",void 0),op(this,"currentTimeStuckAt",void 0),op(this,"interruptDetectorTrack",void 0),op(this,"onLocalAudioTrackMute",(()=>{BS.info("ios15-interruption-start"),this.emit(Iw.IOS_15_16_INTERRUPTION_START)})),op(this,"onLocalAudioTrackUnmute",(async()=>{BS.info("ios15-interruption-end"),"running"!==this.curState||this.duringInterruption?BS.info("ios15-interruption-end-canceled"):(hC&&await hC.suspend(),this.emit(Iw.IOS_15_16_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){BS.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){BS.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function mC(){if(!pC)return void BS.error("your browser is not support web audio");BS.info("create audio context");const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dC(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},bS("WEBAUDIO_INIT_OPTIONS"));BS.debug("audio context init option:",JSON.stringify(e)),hC=new pC(e),fC.curState=hC.state,hC.onstatechange=()=>{fC.prevState=fC.curState,fC.curState=hC?hC.state:void 0;const{prevState:e,curState:t}=fC,n="running"===t,r="interrupted"===t,i="running"===e,o="suspended"===e,s="interrupted"===e,a=_y().osVersion;(Ay()||Uy())&&i&&r&&(BS.info("ios".concat(a,"-interruption-start")),fC.emit(Iw.IOS_INTERRUPTION_START)),(Ay()||Uy())&&(o||s)&&n&&(BS.info("ios".concat(a,"-interruption-end")),fC.emit(Iw.IOS_INTERRUPTION_END)),e!==t&&fC.emit(Iw.STATE_CHANGE,t,e)},setInterval((()=>{var e;const t=null===(e=hC)||void 0===e?void 0:e.currentTime;fC.currentTime!==t?(fC.currentTimeStuckAt&&(BS.debug("AudioContext current time resume at ".concat(t)),fC.currentTimeStuckAt=void 0),fC.currentTime=t):(t!==fC.currentTimeStuckAt&&(eT.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:t},tag:hE.TRACER}).onSuccess(),BS.warning("AudioContext current time stuck at ".concat(t))),fC.currentTimeStuckAt=t)}),5e3),async function(e){const t=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let n,r=!1,i=!1,o=!1;function s(t){"running"===e.state?a(!1):Ay()||Uy()?"suspended"===e.state&&(a(!0),t&&e.resume().then(l,l)):"closed"!==e.state&&(a(!0),t&&e.resume().then(l,l))}function a(e){if(r!==e){r=e;for(let n=0,r=t;n<r.length;n+=1){const t=r[n];e?window.addEventListener(t,u,{capture:!0,passive:!0}):window.removeEventListener(t,u,{capture:!0,passive:!0})}}}function c(){s(!0)}function l(){s(!1)}function u(){s(!0)}function d(e){if(!o)if(n.paused)if(e){let t;p(!1),o=!0;try{t=n.play(),t?t.then(h,h):(n.addEventListener("playing",h),n.addEventListener("abort",h),n.addEventListener("error",h))}catch(e){h()}}else p(!0);else p(!1)}function p(e){if(i!==e){i=e;for(let n=0,r=t;n<r.length;n++){const t=r[n];e?window.addEventListener(t,f,{capture:!0,passive:!0}):window.removeEventListener(t,f,{capture:!0,passive:!0})}}}function h(){n.removeEventListener("playing",h),n.removeEventListener("abort",h),n.removeEventListener("error",h),o=!1,d(!1)}function f(){d(!0)}if(Ay()){const t=e.createMediaStreamDestination(),r=document.createElement("div");r.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=r.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=t.stream,d(!0)}fC.on(Iw.STATE_CHANGE,c),s(!1)}(hC)}function gC(){if(!hC){if(mC(),!hC)throw new Wy(Gy.NOT_SUPPORTED,"can not create audio context");return hC}return hC}function vC(e){if(function(){if(null!==yC)return yC;const e=gC(),t=e.createBufferSource(),n=e.createGain(),r=e.createGain();t.connect(n),t.connect(r),t.disconnect(n);let i=!1;try{t.disconnect(n)}catch(e){i=!0}return t.disconnect(),yC=i,i}())return;const t=e.connect,n=e.disconnect;e.connect=(n,r,i)=>{var o;return e._inputNodes||(e._inputNodes=[]),Or(o=e._inputNodes).call(o,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,r,i)):t.call(e,n,r)),e},e.disconnect=(r,i,o)=>{n.call(e),r?HE(e._inputNodes,r):e._inputNodes=[];for(const n of e._inputNodes)t.call(e,n)}}let yC=null;function EC(e,t){let n=!1;const r=1/t;if(bS("DISABLE_WEBAUDIO")){const t=window.setInterval((()=>{n?window.clearInterval(t):e(performance.now()/1e3)}),1e3*r)}else{const t=gC();let i=t.createGain();i.gain.value=0,i.connect(t.destination);const o=()=>{if(n)return void(i=null);const s=t.createOscillator();s.onended=o,s.connect(i),s.start(0),s.stop(t.currentTime+r),e(t.currentTime)};o()}return()=>{n=!0}}class _C{constructor(){op(this,"context",void 0),op(this,"analyserNode",void 0),op(this,"sourceNode",void 0),this.context=gC(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode)return 0;if(!this.context||Ay()||Uy()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{const t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(let n=0;n<e.length;++n)e[n]=t[n]/128-1}const t=zE(e).call(e,((e,t)=>e+t*t),0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){BS.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class bC extends lE{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var n;null===(n=this.sourceNode)||void 0===n||n.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),op(this,"outputNode",void 0),op(this,"outputTrack",void 0),op(this,"isPlayed",!1),op(this,"context",void 0),op(this,"audioBufferNode",void 0),op(this,"destNode",void 0),op(this,"audioOutputLevel",0),op(this,"volumeLevelAnalyser",void 0),op(this,"_processedNode",void 0),op(this,"playNode",void 0),op(this,"isDestroyed",!1),op(this,"onNoAudioInput",void 0),op(this,"isNoAudioInput",!1),op(this,"_noAudioInputCount",0),this.context=gC(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),vC(this.outputNode),this.volumeLevelAnalyser=new _C}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(Kw.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const n=e.outputBuffer.getChannelData(t);for(let e=0;e<n.length;e+=1)n[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Tw().webAudioMediaStreamDest)throw new Wy(Gy.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&WE((()=>{fC.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Ay()||Uy()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume();const t=this.volumeLevelAnalyser.getAnalyserNode();let n;t.getFloatTimeDomainData?(n=new Float32Array(t.fftSize),t.getFloatTimeDomainData(n)):(n=new Uint8Array(t.fftSize),t.getByteTimeDomainData(n));let r=!1;for(let i=0;i<n.length;i++)0!==n[i]&&(r=!0);return r?(this.isNoAudioInput=!1,!0):(await n_(200),await this.checkHasAudioInput(e?e+1:1)&&r)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class SC extends bC{get isFreeze(){return!1}constructor(e,t,n){var r;if(super(),op(this,"sourceNode",void 0),op(this,"track",void 0),op(this,"clonedTrack",void 0),op(this,"audioElement",void 0),op(this,"isCurrentTrackCloned",!1),op(this,"isRemoteTrack",!1),op(this,"originVolumeLevelAnalyser",void 0),op(this,"rebuildWebAudio",(async()=>{if(BS.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void BS.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then((()=>BS.info("resume success"))),BS.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),vC(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const n=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(n,this.context.currentTime),vC(this.outputNode),this.emit(Kw.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()})),"audio"!==e.kind)throw new Wy(Gy.UNEXPECTED_ERROR);this.track=e;const i=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(i),vC(this.sourceNode),n){const e=n.clone();e.enabled=!0,this.clonedTrack=e,BS.debug("create an unmuted track ".concat(e.id," from the original track ").concat(n.id," to get the volume"));const t=this.context.createMediaStreamSource(new MediaStream([e]));vC(t),this.originVolumeLevelAnalyser=new _C,this.originVolumeLevelAnalyser.updateSource(t)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=i;const o=_y();t&&o.os===fy.IOS&&Number(null===(r=o.osVersion)||void 0===r?void 0:r.split(".")[0])<15&&(fC.on(Iw.STATE_CHANGE,(()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()})),this.checkHasAudioInput().then((e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)})))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),vC(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Kw.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),fC.off("state-change",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){const t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),BS.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));const n=this.context.createMediaStreamSource(new MediaStream([t]));vC(n),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(n)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function TC(e,t,n){const r=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,i={audio:!!n&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:r(t.height,1080),maxWidth:r(t.width,1920)}}};return t.frameRate&&"number"!=typeof t.frameRate?(i.video.mandatory.maxFrameRate=t.frameRate.max,i.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(i.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(i)}async function IC(e,t){const n=await NC(e.mediaSource),{sourceId:r,audio:i}=await function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new cy(((n,r)=>{const i=document.createElement("div");i.innerText="share screen",i.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const o=document.createElement("div");o.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const s=document.createElement("div");s.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",s.setAttribute("style","height: 12%;");const a=document.createElement("div");a.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const c=document.createElement("div");c.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const l=document.createElement("button");l.innerHTML="cancel",l.setAttribute("style","width: 85px;"),l.onclick=()=>{document.body.removeChild(p);const e=new Error("NotAllowedError");e.name="NotAllowedError",r(e)};let u=t;const d=document.createElement("div");if(t){const e=document.createElement("input");e.setAttribute("type","checkbox");const t=document.createElement("span");e.setAttribute("style","margin-right: 6px;"),t.innerText="Share audio",e.checked=u,e.onchange=()=>{u=e.checked},d.appendChild(e),d.appendChild(t)}c.appendChild(d),c.appendChild(l),o.appendChild(s),o.appendChild(a),o.appendChild(c);const p=document.createElement("div");p.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),p.appendChild(i),p.appendChild(o),document.body.appendChild(p),e.map((e=>{if(e.id){const t=document.createElement("div");t.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let r=e.thumbnail;try{const{width:e}=r.getSize();e>1920&&(r=r.resize({width:1920}))}catch(e){throw e&&e.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),e}t.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",t.onclick=()=>{document.body.removeChild(p),n({sourceId:e.id,audio:u})},a.appendChild(t)}}))}))}(n,t);return await TC(r,e,i)}async function NC(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);const n=dE();if(!n)throw console.error("failed to fetch electron, please mount it to window"),new Wy(Gy.ELECTRON_IS_NULL);let r=null;try{var i;r=(null===(i=n.desktopCapturer)||void 0===i?void 0:i.getSources({types:t}))||n.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch(e){r=null}r&&r.then||(r=new cy(((e,r)=>{n.desktopCapturer.getSources({types:t},((t,n)=>{t?r(t):e(n)}))})));try{return await r}catch(e){throw new Wy(Gy.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}function wC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const CC=new h_("safari");let OC=!1,AC=!1;async function RC(e,t){let n=0,r=null;for(;n<2;)try{r=await MC(e,t,n>0);break}catch(e){if(e instanceof Wy)throw BS.error("[".concat(t,"] ").concat(e.toString())),e;const r=DC(e.name||e.code||e,e.message);if(r.code===Gy.MEDIA_OPTION_INVALID){BS.debug("[".concat(t,"] detect media option invalid, retry")),n+=1,await n_(500);continue}throw BS.error("[".concat(t,"] ").concat(r.toString())),r}if(!r)throw new Wy(Gy.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return r}async function MC(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Wy(Gy.NOT_SUPPORTED,"can not find getUserMedia");n&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const r=Tw(),i=new MediaStream;if(e.audioSource&&i.addTrack(e.audioSource),e.videoSource&&i.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return BS.debug("Using Video Source/ Audio Source"),i;if(e.screen)if(dE())e.screen.sourceId?kC(i,await TC(e.screen.sourceId,e.screen,e.screenAudio)):kC(i,await IC(e.screen,e.screenAudio));else if(wy()&&e.screen.extensionId&&e.screen.mandatory){if(!r.getStreamFromExtension)throw new Wy(Gy.NOT_SUPPORTED,"This browser does not support screen sharing");BS.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));const n=await(s=e.screen.extensionId,a=t,new cy(((e,t)=>{try{chrome.runtime.sendMessage(s,{getStream:!0},(n=>{if(!n||!n.streamId)return BS.error("[".concat(a,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new Wy(Gy.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(e){BS.error("[".concat(a,"] AgoraRTC screensharing plugin is not accessible(").concat(s,")"),e.toString()),t(new Wy(Gy.CHROME_PLUGIN_NOT_INSTALL))}})));e.screen.mandatory.chromeMediaSourceId=n,kC(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(r.getDisplayMedia){var o;e.screen.mediaSource&&Fw(e.screen.mediaSource);const n={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:null!==(o=e.screen.displaySurface)&&void 0!==o?o:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource},{selfBrowserSurface:r,surfaceSwitching:s,systemAudio:a}=e.screen,c={selfBrowserSurface:r,surfaceSwitching:s,systemAudio:a};!r&&delete c.selfBrowserSurface,!s&&delete c.surfaceSwitching,!a&&delete c.systemAudio,BS.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:n,audio:!!e.screenAudio,controls:c}));const l=await navigator.mediaDevices.getDisplayMedia(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wC(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({video:n,audio:!!e.screenAudio},c));kC(i,l)}else{if(!Oy())throw BS.error("[".concat(t,"] This browser does not support screenSharing")),new Wy(Gy.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&Fw(e.screen.mediaSource);const n={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};BS.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(n))),kC(i,await navigator.mediaDevices.getUserMedia(n))}}var s,a;if(!e.video&&!e.audio)return i;let c={video:e.video,audio:e.audio},l=bS("MEDIA_DEVICE_CONSTRAINTS");if(l)try{"string"==typeof l&&(l=JSON.parse(l)),c=l_(c,l)}catch(e){}BS.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(c)),_y();let u,d=null;(Cy()||Ay()||Ty())&&(d=await CC.lock());try{u=await navigator.mediaDevices.getUserMedia(c)}catch(e){throw d&&d(),e}return c.audio&&(OC=!0),c.video&&(AC=!0),kC(i,u),d&&d(),i}function DC(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Wy(Gy.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new Wy(Gy.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new Wy(Gy.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new Wy(Gy.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Wy(Gy.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new Wy(Gy.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return BS.error("getUserMedia unexpected error",e),new Wy(Gy.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function kC(e,t){const n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(r&&e.removeTrack(r),e.addTrack(o)),i&&(n&&e.removeTrack(n),e.addTrack(i))}const xC=new class extends lE{get state(){return this._state}set state(e){e!==this._state&&(this.emit(iC.STATE_CHANGE,e),this._state=e)}constructor(){super(),op(this,"_state",rC.IDLE),op(this,"isAccessMicrophonePermission",!1),op(this,"isAccessCameraPermission",!1),op(this,"lastAccessMicrophonePermission",!1),op(this,"lastAccessCameraPermission",!1),op(this,"checkdeviceMatched",!1),op(this,"deviceInfoMap",new Map),this.init().then((()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval((()=>{(bS("ENUMERATE_DEVICES_INTERVAL")||(Vy()||by()===fy.HARMONY_OS)&&By())&&this.updateDevicesInfo()}),bS("ENUMERATE_DEVICES_INTERVAL_TIME"))})).catch((e=>BS.error(e.toString())))}async enumerateDevices(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new Wy(Gy.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const r=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(r);let o=!this.isAccessMicrophonePermission&&e,s=!this.isAccessCameraPermission&&t;i.audio&&(o=!1),i.video&&(s=!1);let a=null,c=null,l=null;if(!n&&(o||s)){if(CC.isLocked&&(BS.debug("[device manager] wait GUM lock"),(await CC.lock())(),BS.debug("[device manager] GUM unlock")),OC&&(o=!1,this.isAccessMicrophonePermission=!0),AC&&(s=!1,this.isAccessCameraPermission=!0),BS.debug("[device manager] check media device permissions",e,t,o,s),o&&s){try{l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=DC(e.name||e.code||e,e.message);if(t.code===Gy.PERMISSION_DENIED)throw t;BS.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{a=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){const t=DC(e.name||e.code||e,e.message);if(t.code===Gy.PERMISSION_DENIED)throw t;BS.warning("getUserMedia failed in getDevices",t)}this.isAccessMicrophonePermission=!0}else if(s){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){const t=DC(e.name||e.code||e,e.message);if(t.code===Gy.PERMISSION_DENIED)throw t;BS.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0}BS.debug("[device manager] mic permission",e,"cam permission",t)}try{const e=await navigator.mediaDevices.enumerateDevices();return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),l&&l.getTracks().forEach((e=>e.stop())),a=null,c=null,l=null,e}catch(e){return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),l&&l.getTracks().forEach((e=>e.stop())),a=null,c=null,l=null,new Wy(Gy.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audioinput"===e.kind))}async getCamerasDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter((e=>"videoinput"===e.kind))}async getSpeakers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audiooutput"===e.kind))}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach((n=>{n.device.label===e&&(t=n.device.deviceId)})),t}async getDeviceById(e){const t=(await this.enumerateDevices(!0,!0,!0)).find((t=>t.deviceId===e));if(!t)throw new Wy(Gy.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=rC.INITING;try{await this.updateDevicesInfo(),this.state=rC.INITEND}catch(e){throw BS.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=rC.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new Wy(Gy.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),n=[];if(e[0]&&e[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const t=e.find((e=>"audioinput"===e.kind&&"default"===e.deviceId)),n=e.find((e=>"audiooutput"===e.kind&&"default"===e.deviceId));t&&n?n.groupId===t.groupId?BS.debug("[device-check] default input ".concat(t.label," and output ").concat(n.label," is the same group")):BS.warning("[device-check] default input ".concat(t.label," and output ").concat(n.label," is not the same group")):BS.debug("[device-check] default input or output not found")}const r=this.checkMediaDeviceInfoIsOk(e);if(e.forEach((e=>{if(!e.deviceId)return;const r=this.deviceInfoMap.get("".concat(e.kind,"_").concat(e.deviceId));if("ACTIVE"!==(r?r.state:"INACTIVE")){const r={initAt:t,updateAt:t,device:e,state:"ACTIVE"};this.deviceInfoMap.set("".concat(e.kind,"_").concat(e.deviceId),r),n.push(r)}r&&(r.updateAt=t)})),this.deviceInfoMap.forEach(((e,r)=>{"ACTIVE"===e.state&&e.updateAt!==t&&(e.state="INACTIVE",n.push(e))})),this.state!==rC.INITEND)return r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));n.forEach((e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(iC.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(iC.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(iC.PLAYOUT_DEVICE_CHANGED,e)}})),r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=e.filter((e=>"audioinput"===e.kind)),n=e.filter((e=>"videoinput"===e.kind)),r={audio:!1,video:!1};for(const i of t)if(i.label&&i.deviceId){r.audio=!0;break}for(const i of n)if(i.label&&i.deviceId){r.video=!0;break}return r}};let LC=!1;const PC=new class extends lE{constructor(){super(...arguments),op(this,"onAutoplayFailed",void 0),op(this,"onAudioAutoplayFailed",void 0)}};function jC(){if(_y(),!LC){const e=t=>{t.preventDefault(),LC=!1,Hy()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};LC=!0,Hy()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),BS.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),PC.onAutoplayFailed?PC.onAutoplayFailed():PC.onAudioAutoplayFailed?BS.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):BS.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),PC.emit("autoplay-failed")}}function UC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UC(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zC(e,t,n,r){if(!e)return;const i=eT.getBaseInfoBySessionId(e);if(!i)return;const o=i.info,s=Date.now(),a=FC(FC({},o),{},{vid:void 0===o.vid?0:Number(o.vid),lts:s,elapse:s-i.startTime,cbRegistered:PC.onAutoplayFailed||PC.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:r,extend:void 0});eT.send({type:qS.AUTOPLAY_FAILED,data:a},!0)}const BC=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],VC=new class{constructor(){op(this,"onAutoplayFailed",void 0),op(this,"elementMap",new Map),op(this,"elementStateMap",new Map),op(this,"elementsNeedToResume",[]),op(this,"sinkIdMap",new Map),op(this,"autoResumeAfterInterruption",(e=>{Array.from(this.elementMap.entries()).forEach((t=>{let[n,r]=t;const i=this.elementStateMap.get(n),o=r.srcObject.getAudioTracks()[0],s=o&&o.readyState;if(BS.debug("resume after interrupted, ele: ".concat(i," audio: ").concat(s," ").concat(e)),"live"===s){if(e)return r.pause(),void r.play();if("running"===fC.curState)return Ly()?(r.pause(),void r.play()):void(i&&"paused"===i&&r.play())}}))})),op(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{Array.from(this.elementMap.entries()).forEach((e=>{let[t,n]=e;const r=n.srcObject.getAudioTracks()[0];r&&"live"===r.readyState&&(BS.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),n.pause(),n.play())}))})),this.autoResumeAudioElement(),fC.on(Iw.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),fC.on(Iw.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),fC.on(Iw.STATE_CHANGE,(()=>{Ay()&&"suspended"===fC.prevState&&"running"===fC.curState&&this.autoResumeAfterInterruption()}))}async setSinkID(e,t){const n=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),n)try{await n.setSinkId(t)}catch(e){throw new Wy(Gy.PERMISSION_DENIED,"can not set sink id: "+e.toString())}}play(e,t,n,r){if(this.elementMap.has(t))return;const i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,oC.INIT),this.setVolume(t,n);const o=this.sinkIdMap.get(t);if(o)try{i.setSinkId(o).catch((e=>{BS.warning("[".concat(t,"] set sink id failed"),e.toString())}))}catch(e){BS.warning("[".concat(t,"] set sink id failed"),e.toString())}const s=i.play();s&&s.then&&s.catch((e=>{r&&zC(r,"audio",e.message,t),BS.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(BS.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),WE((()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),jC()})))}))}updateTrack(e,t){const n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&"playing"===this.elementStateMap.get(e)}setVolume(e,t){const n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)}stop(e){const t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;const n=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(n,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){BC.forEach((n=>{t.addEventListener(n,(n=>{const r=this.elementStateMap.get(e),i="pause"===n.type?"paused":n.type;if(BS.debug("[".concat(e,"] audio-element-status change ").concat(r," => ").concat(i)),"error"===n.type){const n=null==t?void 0:t.error;n&&BS.error("[".concat(e,"] media error, code: ").concat(n.code,", message: ").concat(n.message))}this.elementStateMap.set(e,i)}))}))}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach((e=>{e.play().then((e=>{BS.debug("Auto resume audio element success")})).catch((e=>{BS.warning("Auto resume audio element failed!",e)}))})),this.elementsNeedToResume=[]};new cy((e=>{document.body?e():window.addEventListener("load",(()=>e()))})).then((()=>{Hy()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))}))}};function HC(){return function(e,t,n){const r=n.value;return"function"==typeof r&&(n.value=function(){this._isClosed&&new Wy(Gy.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",BS);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=r.apply(this,t);return i instanceof cy?new cy(((e,t)=>{i.then(e).catch(t)})):i}),n}}function GC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GC(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class YC extends lE{constructor(e){super(),op(this,"name","VideoProcessorDestination"),op(this,"ID","0"),op(this,"_source",void 0),op(this,"videoContext",void 0),op(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new Wy(Gy.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new Wy(Gy.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(tC.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(tC.ON_TRACK,void 0)}}class qC extends lE{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),op(this,"constraintsMap",new Map),op(this,"statsRegistry",[]),op(this,"usageRegistry",[]),op(this,"trackId",void 0),op(this,"direction",void 0),op(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await IE(this,nC.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var n;return BS.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),NE(this,nC.REQUEST_UPDATE_CONSTRAINTS,Array.from(RT(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return BS.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),NE(this,nC.REQUEST_UPDATE_CONSTRAINTS,Array.from(RT(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:r,cb:i}of this.statsRegistry)try{const o=i();e.push({processorID:t,processorName:n,type:r,stats:o})}catch(e){BS.error(new Wy(Gy.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof cy&&(n=await n),e.push(WC(WC({},n),{},{direction:this.direction}))}catch(e){BS.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class KC extends lE{constructor(e){super(),op(this,"name","AudioProcessorDestination"),op(this,"ID","0"),op(this,"inputTrack",void 0),op(this,"inputNode",void 0),op(this,"audioProcessorContext",void 0),op(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new Wy(Gy.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new Wy(Gy.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(tC.ON_TRACK,void 0),this.emit(tC.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(tC.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(tC.ON_NODE,this.inputNode))}}class QC extends lE{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,n){super(),op(this,"constraintsMap",new Map),op(this,"statsRegistry",[]),op(this,"audioContext",void 0),op(this,"trackId",void 0),op(this,"direction",void 0),op(this,"usageRegistry",[]),op(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=n}async getConstraints(){return IE(this,nC.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var n;return BS.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),NE(this,nC.REQUEST_UPDATE_CONSTRAINTS,Array.from(RT(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),NE(this,nC.REQUEST_UPDATE_CONSTRAINTS,Array.from(RT(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:r,cb:i}of this.statsRegistry)try{const o=i();e.push({processorID:t,processorName:n,type:r,stats:o})}catch(e){BS.error(new Wy(Gy.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof cy&&(n=await n),e.push(WC(WC({},n),{},{direction:this.direction}))}catch(e){BS.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class JC extends lE{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),op(this,"context",void 0),op(this,"processSourceNode",void 0),op(this,"outputTrack",void 0),op(this,"processedNode",void 0),op(this,"clonedTrack",void 0),op(this,"outputNode",void 0),this.outputNode=new XC}setVolume(){}createOutputTrack(){throw new Wy(Gy.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class XC{disconnect(){}connect(){}}function ZC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZC(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class eO extends uC{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?VC.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,n,r){super(e,n),op(this,"trackMediaType","audio"),op(this,"_encoderConfig",void 0),op(this,"_trackSource",void 0),op(this,"_enabled",!0),op(this,"_volume",100),op(this,"_useAudioElement",!0),op(this,"_bypassWebAudio",!1),op(this,"processor",void 0),op(this,"_processorContext",void 0),op(this,"_processorDestination",void 0),op(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!r,this._trackSource=new JC,bS("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),bS("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),Cy()&&!hC?setTimeout((()=>this.initWebAudio())):this.initWebAudio()}setVolume(e){Ky(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&VC.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void BS.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,NE(this,zw.NEED_REPLACE_TRACK,this).then((()=>{BS.debug("[".concat(this.getTrackId(),"] replace web audio track success"))})).catch((e=>{BS.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)})))}catch(e){}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!wy()&&bS("RESTRICTION_SET_PLAYBACK_DEVICE"))throw new Wy(Gy.NOT_SUPPORTED,"your browser does not support setting the audio output device");await VC.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,n){return this._setEnabled(e,t,n)}async _setEnabled(e,t,n){if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(BS.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{n||(this._enabled=!0),await NE(this,zw.NEED_ENABLE_TRACK,this),BS.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(e){throw n||(this._enabled=!1),BS.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}}else{this._originMediaStreamTrack.enabled=!1,n||(this._enabled=!1);try{await NE(this,zw.NEED_DISABLE_TRACK,this)}catch(e){throw n||(this._enabled=!0),BS.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,BS.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await NE(this,zw.NEED_MUTE_TRACK,this):await NE(this,zw.NEED_UNMUTE_TRACK,this))}getStats(){return QE((()=>{BS.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),wE(this,zw.GET_STATS)||$C({},Jw)}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Kw.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Kw.ON_AUDIO_BUFFER),this._source.on(Kw.ON_AUDIO_BUFFER,(t=>e(t)))}play(){BS.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(BS.debug("[".concat(this.getTrackId(),"] start audio playback in element")),VC.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){BS.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?VC.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];BS.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&VC.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await NE(this,zw.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return cy.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new Wy(Gy.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new Wy(Gy.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(tC.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e),await NE(this,zw.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await NE(this,zw.NEED_REPLACE_TRACK,this))})),e.on(tC.ON_NODE,(e=>{this._source.processedNode=e}))}unbindProcessorDestinationEvents(e){e.removeAllListeners(tC.ON_TRACK),e.removeAllListeners(tC.ON_NODE)}bindProcessorContextEvents(e){e.on(nC.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}unbindProcessorContextEvents(e){e.removeAllListeners(nC.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof JC&&(this._trackSource=new SC(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const e=new QC(this._source.context,this.getTrackId(),"local"),t=new KC(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(Kw.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})})),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(VC.stop(this.getTrackId()),this._source.play()),NE(this,zw.NEED_REPLACE_MIXING_TRACK,this).then((()=>{BS.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))})).catch((e=>{BS.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),e)}))),{processorContext:e,processorDestination:t}}}MT([$S({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),DT("design:type",Function),DT("design:paramtypes",[Number]),DT("design:returntype",void 0)],eO.prototype,"setVolume",null),MT([$S({argsMap:(e,t)=>[e.getTrackId(),t]}),HC(),DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],eO.prototype,"setPlaybackDevice",null),MT([f_("LocalAudioTrack","_enabledMutex"),$S({argsMap:(e,t)=>[e.getTrackId(),t]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Boolean,Object,Boolean]),DT("design:returntype",cy)],eO.prototype,"setEnabled",null),MT([f_("LocalAudioTrack","_enabledMutex"),$S({argsMap:(e,t)=>[e.getTrackId(),t]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Boolean]),DT("design:returntype",cy)],eO.prototype,"setMuted",null),MT([HC(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",Object)],eO.prototype,"getStats",null),MT([HC(),DT("design:type",Function),DT("design:paramtypes",[Object,Number]),DT("design:returntype",void 0)],eO.prototype,"setAudioFrameCallback",null),MT([$S({argsMap:e=>[e.getTrackId()]}),HC(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],eO.prototype,"play",null),MT([$S({argsMap:e=>[e.getTrackId()]}),HC(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],eO.prototype,"stop",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],eO.prototype,"close",null),MT([$S({argsMap:(e,t)=>[e.getTrackId(),t.name]}),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",Object)],eO.prototype,"pipe",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],eO.prototype,"unpipe",null);class tO extends eO{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,n,r){super(e,t.encoderConfig?jw(t.encoderConfig):{},r,bS("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),op(this,"_config",void 0),op(this,"_deviceName","default"),op(this,"_constraints",void 0),op(this,"_originalConstraints",void 0),op(this,"_enabled",!0),this._config=t,this._constraints=n,this._originalConstraints=n,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),(Ly()||Py())&&fC.bindInterruptDetectorTrack(this)}async setDevice(e){if(BS.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{const t=await xC.getDeviceById(e),n={};n.audio=$C({},this._constraints),n.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let r=null;try{r=await RC(n,this.getTrackId())}catch(e){throw BS.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await RC({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw BS.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await xC.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw BS.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}BS.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,n){if(t)return BS.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(BS.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){var r;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(r=this._source.clonedTrack)||void 0===r||r.stop(),n||(this._enabled=!1);try{await NE(this,zw.NEED_DISABLE_TRACK,this)}catch(e){throw BS.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),e}return}const i=$C({},this._constraints),o=xC.searchDeviceIdByName(this._deviceName);o&&!i.deviceId&&(i.deviceId=o);try{n||(this._enabled=!0);const e=await RC({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await NE(this,zw.NEED_ENABLE_TRACK,this)}catch(e){throw n||(this._enabled=!1),BS.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}BS.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(Ly()||Py())&&fC.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ay()||Uy())&&this._enabled&&!this._isClosed&&fC.duringInterruption){const e=async()=>{fC.off(Iw.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(BS.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};fC.on(Iw.IOS_INTERRUPTION_END,e)}else BS.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Yw.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=xC.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId=n),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();const e=await RC({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(nC.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}}))}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(nC.REQUEST_UPDATE_CONSTRAINTS)}}MT([$S({argsMap:(e,t)=>[e.getTrackId(),t]}),HC(),DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],tO.prototype,"setDevice",null),MT([f_("MicrophoneAudioTrack","_enabledMutex"),$S({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Boolean,Boolean,Boolean]),DT("design:returntype",cy)],tO.prototype,"setEnabled",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],tO.prototype,"close",null);class nO extends eO{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,n,r){super(t.createOutputTrack(),n,r),op(this,"source",void 0),op(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(Kw.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.safeEmit(Yw.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){Ky(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}MT([$S({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",void 0)],nO.prototype,"startProcessAudioBuffer",null),MT([$S({argsMap:e=>[e.getTrackId()]}),HC(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],nO.prototype,"pauseProcessAudioBuffer",null),MT([$S({argsMap:e=>[e.getTrackId()]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Number]),DT("design:returntype",void 0)],nO.prototype,"seekAudioBuffer",null),MT([$S({argsMap:e=>[e.getTrackId()]}),HC(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],nO.prototype,"resumeProcessAudioBuffer",null),MT([$S({argsMap:e=>[e.getTrackId()]}),HC(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],nO.prototype,"stopProcessAudioBuffer",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],nO.prototype,"close",null),MT([$S({argsMap:e=>[e.getTrackId()]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Number]),DT("design:returntype",void 0)],nO.prototype,"setAudioBufferPlaybackSpeed",null);class rO extends eO{get __className__(){return"MixingAudioTrack"}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}constructor(){const e=gC().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,r_(8,"track-mix-")),op(this,"trackList",void 0),op(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}hasAudioTrack(e){return-1!==this.trackList.indexOf(e)}addAudioTrack(e){-1===this.trackList.indexOf(e)?(BS.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):BS.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){if(-1!==this.trackList.indexOf(e)){BS.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}HE(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){const e={};this.trackList.forEach((t=>{t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}_updateRtpTransceiver(e){this._rtpTransceiver!==e&&(this._rtpTransceiver=e,this.trackList.forEach((t=>{t instanceof rO?t.emit(Ww.TRANSCEIVER_UPDATED,e):t._updateRtpTransceiver(e)})))}}function iO(e){const t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});const n=kw(e.encoderConfig);return null!=n.width&&(t.width=n.width),null!=n.height&&(t.height=n.height),!zy()&&n.frameRate&&(t.frameRate=n.frameRate),_y().name===my.EDGE&&"object"==typeof t.frameRate&&(t.frameRate.max=60),Oy()&&(t.frameRate={ideal:30,max:30}),t}function oO(e){const t={};if(zy()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,wy()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){const n=jw(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),Vy()&&(t.sampleRate=void 0),t}class sO extends bC{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(Kw.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),op(this,"audioBuffer",void 0),op(this,"sourceNode",void 0),op(this,"startPlayTime",0),op(this,"startPlayOffset",0),op(this,"pausePlayTime",0),op(this,"options",void 0),op(this,"currentLoopCount",0),op(this,"currentPlaybackSpeed",100),op(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):BS.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&("playing"===this.currentState&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const aO=new Map;async function cO(e,t){let n=null;if("string"==typeof e){const t=aO.get(e);if(t)return BS.debug("use cached audio resource: ",e),t;try{n=(await v_((()=>oS.get(e,{responseType:"arraybuffer"})),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new Wy(Gy.FETCH_AUDIO_FILE_FAILED,e.toString())}}else{const t=new cy(((t,n)=>{const r=new FileReader;r.onload=e=>{e.target?t(e.target.result):n(new Wy(Gy.READ_LOCAL_AUDIO_FILE_ERROR))},r.onerror=()=>{n(new Wy(Gy.READ_LOCAL_AUDIO_FILE_ERROR))},r.readAsArrayBuffer(e)}));n=await t}const r=await function(e){const t=gC();return new cy(((n,r)=>{t.decodeAudioData(e,(e=>{n(e)}),(e=>{r(new Wy(Gy.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(n);return"string"==typeof e&&t&&aO.set(e,r),r}const lO=e=>{const t=document.createElement("canvas");return t.width=2,t.height=2,new cy(((n,r)=>{t.toBlob((async e=>{if(t.remove(),e){const r=await uO(e);n({buffer:r,width:t.width,height:t.height})}else r(new Wy(Gy.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,1)}))},uO=async e=>{const t=await e.arrayBuffer();return new Uint8Array(t)};function dO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dO(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class hO{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(BS.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(BS.debug("[".concat(this.trackId,"] video-status change ").concat(this._videoState," => ").concat(e)),this._videoState=e,null===(t=this.onVideoStateChanged)||void 0===t||t.call(this,this.videoState))}constructor(e){op(this,"trackId",void 0),op(this,"config",void 0),op(this,"onFirstVideoFrameDecoded",void 0),op(this,"onVideoStateChanged",void 0),op(this,"freezeTimeCounterList",[]),op(this,"renderFreezeAccTime",0),op(this,"isKeepLastFrame",!1),op(this,"timeUpdatedCount",0),op(this,"freezeTime",0),op(this,"playbackTime",0),op(this,"lastTimeUpdatedTime",0),op(this,"autoplayFailed",!1),op(this,"videoTrack",void 0),op(this,"videoElement",void 0),op(this,"cacheVideoElement",void 0),op(this,"_videoState",sC.VideoStateStopped),op(this,"videoElementCheckInterval",void 0),op(this,"videoElementFreezeTimeout",void 0),op(this,"_videoElementStatus",oC.NONE),op(this,"isGettingVideoDimensions",!1),op(this,"startGetVideoDimensions",(()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return BS.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(e,500)};!this.isGettingVideoDimensions&&e()})),op(this,"autoResumeAfterInterruption",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===fC.curState&&(BS.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(Sy())),jy()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),op(this,"handleVideoEvents",(e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=oC.PLAYING;break;case"loadeddata":if(this.videoState=sC.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch(e){}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=oC.CANPLAY;break;case"stalled":this.videoElementStatus=oC.STALLED;break;case"suspend":this.videoElementStatus=oC.SUSPEND;break;case"pause":this.videoElementStatus=oC.PAUSED,Ay()||Uy()||Cy()&&this.autoplayFailed||!this.videoTrack||"live"!==this.videoTrack.readyState||(BS.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=oC.WAITING;break;case"abort":this.videoElementStatus=oC.ABORT;break;case"ended":this.videoElementStatus=oC.ENDED;break;case"emptied":this.videoElementStatus=oC.EMPTIED;break;case"error":{this.videoElementStatus=oC.ERROR;const e=this.videoElement.error;e&&BS.error("[".concat(this.trackId,"] media error, code: ").concat(e.code,", message: ").concat(e.message));break}case"timeupdate":{const e=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime,n=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=e,MO.lastVisibleTime<MO.lastHiddenTime||n<MO.lastHiddenTime||n<MO.lastVisibleTime)return;for(t>bS("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;){this.playbackTime-=6e3;const e=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(e),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}})),op(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&(BS.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(Sy())),jy()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),fC.on(Iw.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),fC.on(Iw.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return null!==(e=this.videoElement.parentElement)&&void 0!==e?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){const t=this.videoElement.play();t&&t.catch&&t.catch((t=>{e&&zC(e,"video",t.message,this.trackId),"NotAllowedError"===t.name?(BS.warning("detected video element autoplay failed",t),this.autoplayFailed=!0,this.handleAutoPlayFailed()):BS.warning("[".concat(this.trackId,"] play warning: "),t)}));const n=_y();if(("Safari"===n.name&&15===Number(n.version)||Ly())&&t&&t.then){const e=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(e).catch(e)}}getCurrentFrame(){const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext("2d");if(!t)return BS.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const n=t.getImageData(0,0,e.width,e.height);return e.remove(),n}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const r=n.getContext("2d");return r?(r.drawImage(this.videoElement,0,0,n.width,n.height),new cy(((r,i)=>{n.toBlob((async e=>{if(n.remove(),e){const t=await uO(e);r({buffer:t,width:n.width,height:n.height})}else i(new Wy(Gy.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,t<0?.1:t>1?1:t)}))):await lO(e)}destroy(){fC.off(Iw.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),fC.off(Iw.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=sC.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=oC.INIT,!this.videoElementCheckInterval&&(fO.forEach((e=>{this.videoElement.addEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((()=>{(function(e){return e!==document.body&&document.body.contains(e)})(this.videoElement)||(this.videoElementStatus=oC.DESTROYED)}),1e3),bS("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let n;const r=()=>{"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",r),this.videoElementFreezeTimeout=window.setTimeout(i,bS("VIDEO_FREEZE_DURATION")))},i=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===sC.VideoStateDecoding&&("visible"===document.visibilityState?this.videoState=sC.VideoStateFrozen:document.addEventListener("visibilitychange",r))},o=(e,t)=>{if(this.videoElementStatus===oC.PLAYING){if(n){const e=t.presentationTime-n.presentationTime;this.videoState===sC.VideoStateStarting&&(this.videoState=sC.VideoStateDecoding),this.videoState===sC.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(i,bS("VIDEO_FREEZE_DURATION"))),e<bS("VIDEO_FREEZE_DURATION")&&this.videoState===sC.VideoStateFrozen&&(this.videoState=sC.VideoStateDecoding),e>bS("VIDEO_FREEZE_DURATION")&&MO.lastVisibleTime>=MO.lastHiddenTime&&n.timestamp>MO.lastVisibleTime&&n.timestamp>MO.lastHiddenTime&&(this.renderFreezeAccTime+=e)}n=pO(pO({},t),{},{timestamp:e})}var r,s;bS("ENABLE_VIDEO_FRAME_CALLBACK")&&(null===(r=(s=this.videoElement).requestVideoFrameCallback)||void 0===r||r.call(s,o))};null===(e=(t=this.videoElement).requestVideoFrameCallback)||void 0===e||e.call(t,o)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),Vy()&&(this.videoElement.poster="noposter");const n=_y();"Safari"===n.name&&15===Number(n.version)||Ly()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Oy()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Oy()&&this.videoElement.load());const r=this.videoElement.play();void 0!==r&&r.catch((e=>{BS.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())}))}resetVideoElement(){fO.forEach((e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=oC.NONE}handleAutoPlayFailed(){const e=t=>{t.preventDefault(),this.videoElement.play().then((()=>{BS.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))})).catch((e=>{BS.error(e)})),this.autoplayFailed=!1,Hy()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};Hy()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),jC()}}const fO=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class mO extends hO{constructor(e){super(e),op(this,"container",void 0),op(this,"slot",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,n):await lO(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",bS("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var e;if(null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=document.createElement("video")}}resetVideoElement(){var e;null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}function gO(e){return new cy(((t,n)=>{let r=!1;const i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);const o=Ay()?"canplay":"playing";i.addEventListener(o,(()=>{const e=i.videoWidth,n=i.videoHeight;!e&&Oy()||(r=!0,i.srcObject=null,i.remove(),t([e,n]))})),i.srcObject=new MediaStream([e]),i.play().catch(o_),setTimeout((()=>{r||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))}),4e3)}))}const vO=async(e,t,n)=>{const r=function(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.slice(n,n+2),16));return Uint8Array.from(t)}(function(e){const t="0123456789abcdef";function n(e){let n,r="";for(n=0;n<=3;n++)r+=t.charAt(e>>8*n+4&15)+t.charAt(e>>8*n&15);return r}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,o,s){return r(function(e,t){return e<<t|e>>>32-t}(r(r(t,e),r(i,s)),o),n)}function o(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function s(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function c(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}const l=function(e){let t;const n=1+(e.length+8>>6),r=new Array(16*n);for(t=0;t<16*n;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<t%4*8;return r[t>>2]|=128<<t%4*8,r[16*n-2]=8*e.length,r}(e);let u,d,p,h,f,m=1732584193,g=-271733879,v=-1732584194,y=271733878;for(u=0;u<l.length;u+=16)d=m,p=g,h=v,f=y,m=o(m,g,v,y,l[u+0],7,-680876936),y=o(y,m,g,v,l[u+1],12,-389564586),v=o(v,y,m,g,l[u+2],17,606105819),g=o(g,v,y,m,l[u+3],22,-1044525330),m=o(m,g,v,y,l[u+4],7,-176418897),y=o(y,m,g,v,l[u+5],12,1200080426),v=o(v,y,m,g,l[u+6],17,-1473231341),g=o(g,v,y,m,l[u+7],22,-45705983),m=o(m,g,v,y,l[u+8],7,1770035416),y=o(y,m,g,v,l[u+9],12,-1958414417),v=o(v,y,m,g,l[u+10],17,-42063),g=o(g,v,y,m,l[u+11],22,-1990404162),m=o(m,g,v,y,l[u+12],7,1804603682),y=o(y,m,g,v,l[u+13],12,-40341101),v=o(v,y,m,g,l[u+14],17,-1502002290),g=o(g,v,y,m,l[u+15],22,1236535329),m=s(m,g,v,y,l[u+1],5,-165796510),y=s(y,m,g,v,l[u+6],9,-1069501632),v=s(v,y,m,g,l[u+11],14,643717713),g=s(g,v,y,m,l[u+0],20,-373897302),m=s(m,g,v,y,l[u+5],5,-701558691),y=s(y,m,g,v,l[u+10],9,38016083),v=s(v,y,m,g,l[u+15],14,-660478335),g=s(g,v,y,m,l[u+4],20,-405537848),m=s(m,g,v,y,l[u+9],5,568446438),y=s(y,m,g,v,l[u+14],9,-1019803690),v=s(v,y,m,g,l[u+3],14,-187363961),g=s(g,v,y,m,l[u+8],20,1163531501),m=s(m,g,v,y,l[u+13],5,-1444681467),y=s(y,m,g,v,l[u+2],9,-51403784),v=s(v,y,m,g,l[u+7],14,1735328473),g=s(g,v,y,m,l[u+12],20,-1926607734),m=a(m,g,v,y,l[u+5],4,-378558),y=a(y,m,g,v,l[u+8],11,-2022574463),v=a(v,y,m,g,l[u+11],16,1839030562),g=a(g,v,y,m,l[u+14],23,-35309556),m=a(m,g,v,y,l[u+1],4,-1530992060),y=a(y,m,g,v,l[u+4],11,1272893353),v=a(v,y,m,g,l[u+7],16,-155497632),g=a(g,v,y,m,l[u+10],23,-1094730640),m=a(m,g,v,y,l[u+13],4,681279174),y=a(y,m,g,v,l[u+0],11,-358537222),v=a(v,y,m,g,l[u+3],16,-722521979),g=a(g,v,y,m,l[u+6],23,76029189),m=a(m,g,v,y,l[u+9],4,-640364487),y=a(y,m,g,v,l[u+12],11,-421815835),v=a(v,y,m,g,l[u+15],16,530742520),g=a(g,v,y,m,l[u+2],23,-995338651),m=c(m,g,v,y,l[u+0],6,-198630844),y=c(y,m,g,v,l[u+7],10,1126891415),v=c(v,y,m,g,l[u+14],15,-1416354905),g=c(g,v,y,m,l[u+5],21,-57434055),m=c(m,g,v,y,l[u+12],6,1700485571),y=c(y,m,g,v,l[u+3],10,-1894986606),v=c(v,y,m,g,l[u+10],15,-1051523),g=c(g,v,y,m,l[u+1],21,-2054922799),m=c(m,g,v,y,l[u+8],6,1873313359),y=c(y,m,g,v,l[u+15],10,-30611744),v=c(v,y,m,g,l[u+6],15,-1560198380),g=c(g,v,y,m,l[u+13],21,1309151649),m=c(m,g,v,y,l[u+4],6,-145523070),y=c(y,m,g,v,l[u+11],10,-1120210379),v=c(v,y,m,g,l[u+2],15,718787259),g=c(g,v,y,m,l[u+9],21,-343485551),m=r(m,d),g=r(g,p),v=r(v,h),y=r(y,f);return n(m)+n(g)+n(v)+n(y)}(""+t+n)).slice(0,16),i=r.slice(0,12),o=await window.crypto.subtle.importKey("raw",r,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},o,e))},yO=async(e,t,n)=>await vO(e.buffer,t,n);function EO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EO(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class bO extends uC{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==oC.PLAYING)}get processorContext(){return this._processorContext}set processorContext(e){this._processorContext=e}get __className__(){return"LocalVideoTrack"}constructor(e,t,n,r,i,o){if(super(e,i),op(this,"trackMediaType","video"),op(this,"_player",void 0),op(this,"isUseScaleResolutionDownBy",!1),op(this,"_videoVisibleTimer",null),op(this,"_statsTimer",null),op(this,"_previousVideoVisibleStatus",void 0),op(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),op(this,"_encoderConfig",void 0),op(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),op(this,"_optimizationMode",void 0),op(this,"_videoHeight",void 0),op(this,"_videoWidth",void 0),op(this,"_forceBitrateLimit",void 0),op(this,"_enabled",!0),op(this,"processorDestination",void 0),op(this,"_processorContext",void 0),Cy()){const{width:t,height:n}=e.getSettings();this._videoWidth=t,this._videoHeight=n}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=t,this._scalabilityMode=n,this._optimizationMode=r,this._hints=o||[],-1===this._hints.indexOf(Bw.SCREEN_TRACK))this.updateBitrateFromProfile();else if(function(e,t,n){const r=_y();return!(r.name!==e||!r.osVersion)&&(n?Number(r.version)>=t&&Number(r.version)<=n:Number(r.version)===t)}(my.CHROME,115)&&-1!==by().indexOf("Windows")){const t=function(e,t){if("VideoFrame"in window&&"TransformStream"in window&&Tw().supportWebRTCInsertableStream){const n=new MediaStreamTrackProcessor(e),r=new MediaStreamTrackGenerator({kind:"video"});let i,o,s=Date.now();const a=()=>{c&&(clearInterval(c),c=void 0),i&&(i.close(),i=void 0),e.stop(),o=void 0,r.removeEventListener("ended",a)};let c=window.setInterval((()=>{if(o&&i&&Date.now()-s>(null!=t?t:1e3))try{"live"===r.readyState?o.enqueue(i.clone()):a()}catch(e){a()}}),null!=t?t:1e3);const l=new TransformStream({transform:(e,t)=>{"live"===r.readyState?(o=t,s=Date.now(),void 0===i?(i=e,t.enqueue(e.clone())):(t.enqueue(i),i=e)):e.close()}});return r.addEventListener("ended",a),n.readable.pipeThrough(l).pipeTo(r.writable),r}}(e);t&&(BS.info("local screen video track begin to inject frame"),this._mediaStreamTrack=t)}t&&-1!==this._hints.indexOf(Bw.CUSTOM_TRACK)&&this.setEncoderConfiguration(t),this._processorContext=new qC(this.getTrackId(),"local"),this.processorDestination=new YC(this.processorContext),this.bindProcessorDestinationEvents()}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(BS.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}BS.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=_O(_O(_O({},this._getDefaultPlayerConfig()),t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new hO(n):this._player=new mO(n),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(Yw.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),bS("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._statsTimer&&(this.isUseScaleResolutionDownBy=!1,window.clearInterval(this._statsTimer),this._statsTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,BS.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(BS.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await NE(this,zw.NEED_DISABLE_TRACK,this)}catch(e){throw BS.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}return t||(this._enabled=!1),void BS.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await NE(this,zw.NEED_ENABLE_TRACK,this)}catch(e){throw BS.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}BS.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,BS.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await NE(this,zw.NEED_MUTE_TRACK,this):await NE(this,zw.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(e,t){if(!this._enabled)throw new Wy(Gy.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if("720p_auto"===e?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),e=kw(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),e.width||e.height||e.frameRate){const t=iO({encoderConfig:e});(Cy()||Ay()||Uy())&&(t.deviceId=void 0),BS.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(t));try{await this._originMediaStreamTrack.applyConstraints(t),this.updateMediaStreamTrackResolution()}catch(e){const t=new Wy(Gy.UNEXPECTED_ERROR,e.toString());throw BS.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}}this._encoderConfig=e,-1===this._hints.indexOf(Bw.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await NE(this,zw.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(BS)}}getStats(){return QE((()=>{BS.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),wE(this,zw.GET_STATS)||_O({},Xw)}async setBeautyEffect(e){BS.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(e,t):await lO(e)}async setBitrateLimit(e){if(BS.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await NE(this,zw.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(BS)}}}async setOptimizationMode(e){if("motion"!==e&&"detail"!==e&&"balanced"!==e)return void BS.error(Gy.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const t=this._optimizationMode;try{this._optimizationMode=e,await NE(this,zw.SET_OPTIMIZATION_MODE,this)}catch(e){throw this._optimizationMode=t,BS.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}BS.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(e,")"))}setScalabiltyMode(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return BS.error(Gy.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=e,BS.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")"))}updateMediaStreamTrackResolution(){gO(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(o_)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(e){if(!this._enabled)throw new Wy(Gy.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");BS.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(e)),e=kw(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),this._encoderConfig=e,-1===this._hints.indexOf(Bw.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await NE(this,zw.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(BS)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:e,height:t,frameRate:n}=this.getMediaStreamTrackSettings();if(!e||!t||!n)return;const{bitrateMax:r,bitrateMin:i}=this._encoderConfig;if(null==i||null==r){const{max:o,min:s}=function(e,t,n,r,i){const o=bS("BITRATE_ADAPTER_TYPE");if("DEFAULT_BITRATE"===o)return{min:r,max:i};if(void 0===i){var s;const a=Math.floor(200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75));i="STANDARD_BITRATE"===o?4*a:2*a,r=null!==(s=r)&&void 0!==s?s:a}else{var a;r=null!==(a=r)&&void 0!==a?a:Math.floor(i/10)}return{min:r,max:i}}(e,t,n,i,r);this._encoderConfig.bitrateMin=s,this._encoderConfig.bitrateMax=o,BS.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(e,", h: ").concat(t,", fps: ").concat(n,"] => [brMax: ").concat(o,", brMin: ").concat(s,"]"))}}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=iE.checkOneElementVisible(i),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=eT.reportApiInvoke(null,{tag:hE.TRACER,name:pE.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new Wy(Gy.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}async renewMediaStreamTrack(e){}pipe(e){if(this.processor===e)return e;if(e._source)throw new Wy(Gy.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._encoderConfig;e&&(n=_O(_O({},n),kw(e))),n=qE(n);const r=r_(8,"track-video-cloned-"),i=new bO(t?this._mediaStreamTrack.clone():this._mediaStreamTrack,n,qE(this._scalabilityMode),this._optimizationMode,r,qE(this._hints));return e&&n&&i.setEncoderConfiguration(n),BS.debug("clone video track from ".concat(this.getTrackId()," to ").concat(r,", clone ").concat(t)),i}async replaceTrack(e,t){if(!(e instanceof MediaStreamTrack))throw new Wy(Gy.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if("video"!==e.kind)throw new Wy(Gy.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(e,t,!0),this.updateMediaStreamTrackResolution()}startMonitorStats(){if(!Cy()&&!Ay())return;this._statsTimer&&window.clearInterval(this._statsTimer);let e=2,t=Rw[e],n=-1,r=Date.now();const i=e=>{e>2||e<0||(r=Date.now(),t=Rw[e],this.setSenderConfiguration(t))};this.isUseScaleResolutionDownBy=!0,this._statsTimer=window.setInterval((()=>{const o=this.getStats(),s=wE(this,zw.GET_RTC_STATS);if(o.sendPackets>0&&s){-1===n&&(n=Date.now());const a=Date.now();if(a-n<1e3||a-r<bS("PROFILE_SWITCH_INTERVAL"))return;const c=o.sendFrameRate,l=.6*t.frameRate,u=.9*t.frameRate;"number"==typeof c&&c>0&&c<l?e>0&&(e--,i(e),BS.debug("[".concat(this.getTrackId(),"] step down for fps ").concat(c,", switchProfile to ").concat(e))):s.OutgoingAvailableBandwidth<t.bitrateMin?e>0&&(e--,i(e),BS.debug("[".concat(this.getTrackId(),"] step down for OutgoingAvailableBandwidth ").concat(s.OutgoingAvailableBandwidth,", bitrateMin ").concat(t.bitrateMin,", switchProfile to ").concat(e))):"number"==typeof c&&c>u&&e<Rw.length-1&&s.OutgoingAvailableBandwidth>1.2*Rw[e+1].bitrateMin&&(e++,i(e),BS.debug("[".concat(this.getTrackId(),"] step up for fps ").concat(c,", OutgoingAvailableBandwidth ").concat(s.OutgoingAvailableBandwidth,", switchProfile to ").concat(e)))}}),bS("CHECK_LOCAL_STATS_INTERVAL"))}sendSeiData(e){if(QE((()=>{eT.reportApiInvoke(null,{name:pE.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:hE.TRACER}).onSuccess("")}),this._mediaStreamTrack.id||this.getTrackId()),!bS("ENABLE_VIDEO_SEI")||!bS("ENABLE_ENCODED_TRANSFORM"))return void BS.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(e instanceof Uint8Array==0)return new Wy(Gy.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const t=this.getRTCRtpTransceiver();if(!t)return void BS.warning("Video track is not published, SEI can not be send");const n=t.sender.getParameters();if(0===n.codecs.length)return;const r=n.codecs[0].mimeType.toLocaleLowerCase();"video/h264"===r?this.safeEmit("sei-to-send",e):BS.warning("SEI is not supported by ".concat(r))}bindProcessorDestinationEvents(){this.processorDestination.on(tC.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(),await NE(this,zw.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await NE(this,zw.NEED_REPLACE_TRACK,this))}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(tC.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(nC.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(nC.REQUEST_CONSTRAINTS)}}MT([$S({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Object,Object]),DT("design:returntype",void 0)],bO.prototype,"play",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],bO.prototype,"stop",null),MT([f_("LocalVideoTrack","_enabledMutex"),$S({argsMap:(e,t)=>[e.getTrackId(),t]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Boolean,Boolean]),DT("design:returntype",cy)],bO.prototype,"setEnabled",null),MT([f_("LocalVideoTrack","_enabledMutex"),$S({argsMap:(e,t)=>[e.getTrackId(),t]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Boolean]),DT("design:returntype",cy)],bO.prototype,"setMuted",null),MT([$S({argsMap:(e,t)=>[e.getTrackId(),t]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Object,Boolean]),DT("design:returntype",cy)],bO.prototype,"setEncoderConfiguration",null),MT([HC(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",Object)],bO.prototype,"getStats",null),MT([$S({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Boolean,Object]),DT("design:returntype",cy)],bO.prototype,"setBeautyEffect",null),MT([HC(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",ImageData)],bO.prototype,"getCurrentFrameData",null),MT([HC(),DT("design:type",Function),DT("design:paramtypes",[String,Number]),DT("design:returntype",cy)],bO.prototype,"getCurrentFrameImage",null),MT([HC(),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],bO.prototype,"setBitrateLimit",null),MT([HC(),DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],bO.prototype,"setOptimizationMode",null),MT([HC(),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",void 0)],bO.prototype,"setScalabiltyMode",null),MT([HC(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],bO.prototype,"updateMediaStreamTrackResolution",null),MT([$S({argsMap:(e,t)=>[e.getTrackId(),t.name]}),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",Object)],bO.prototype,"pipe",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],bO.prototype,"unpipe",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],bO.prototype,"close",null),MT([$S({argsMap:(e,t,n)=>[e.getTrackId(),t.label,n]}),DT("design:type",Function),DT("design:paramtypes",[MediaStreamTrack,Boolean]),DT("design:returntype",cy)],bO.prototype,"replaceTrack",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],bO.prototype,"startMonitorStats",null);class SO extends bO{get __className__(){return"CameraVideoTrack"}constructor(e,t,n,r,i,o){super(e,kw(t.encoderConfig),r,i,o),op(this,"_config",void 0),op(this,"_originalConstraints",void 0),op(this,"_constraints",void 0),op(this,"_enabled",!0),op(this,"_deviceName","default"),op(this,"tryResumeVideoForIOS15_16WeChat",(async()=>{(Ly()||Py())&&!function(){const e=_y();if(e.os!==fy.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=2}()&&Fy()&&this._enabled&&!this._isClosed&&(BS.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())})),this._config=t,this._originalConstraints=n,this._constraints=n,this._deviceName=e.label,this._encoderConfig=kw(this._config.encoderConfig),fC.on(Iw.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),fC.on(Iw.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(e){return"string"==typeof e?this._setDeviceById(e):e.deviceId?this._setDeviceById(e.deviceId):e.facingMode?this._setDeviceByFacingModel(e.facingMode):void 0}async _setDeviceById(e){if(BS.info("[".concat(this.getTrackId(),"] set device to ").concat(e)),this._enabled)try{const t=await xC.getDeviceById(e),n={};n.video=_O({},this._constraints),n.video.deviceId={exact:e},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let r=null;try{r=await RC(n,this.getTrackId())}catch(e){throw BS.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await RC({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw BS.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await xC.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw BS.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}BS.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(e){BS.info("[".concat(this.getTrackId(),"] set facingMode ").concat(e));const t={video:_O(_O({},this._constraints),{},{deviceId:void 0,facingMode:{exact:e}})};if(this._enabled){this._originMediaStreamTrack.stop();let e=null;try{e=await RC(t,this.getTrackId())}catch(t){throw BS.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),t.toString()),e=await RC({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),t}await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=e,this._config.cameraId=void 0,this._constraints=_O({},t.video),BS.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(BS.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const e=await RC({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1)}await NE(this,zw.NEED_ENABLE_TRACK,this)}catch(e){throw BS.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),e}this.updateMediaStreamTrackResolution(),BS.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),t||(this._enabled=!1);try{await NE(this,zw.NEED_DISABLE_TRACK,this)}catch(e){throw BS.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}BS.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(e,t){if(!this._enabled)throw new Wy(Gy.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");"720p_auto"===e?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),e=kw(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin);const n=YE(this._config);n.encoderConfig=e;const r=iO(n);(Cy()||Ay()||Uy())&&(r.deviceId=void 0),BS.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(r));try{await this._originMediaStreamTrack.applyConstraints(r),this.updateMediaStreamTrackResolution()}catch(e){const t=new Wy(Gy.UNEXPECTED_ERROR,e.toString());throw BS.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}this._config=n,this._constraints=r,this._originalConstraints=r,this._encoderConfig=e,-1===this._hints.indexOf(Bw.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await NE(this,zw.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(BS)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ay()||Uy())&&this._enabled&&!this._isClosed&&fC.duringInterruption){const e=async()=>{fC.off(Iw.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(BS.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};fC.on(Iw.IOS_INTERRUPTION_END,e)}else BS.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Yw.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=xC.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId={exact:n}),this._enabled){const e=await RC({video:t},this.getTrackId());this._constraints=t,await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),fC.off(Iw.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),fC.off(Iw.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._encoderConfig;e&&(n=_O(_O({},n),kw(e))),n=qE(n);const r=r_(8,"track-cam-cloned-"),i=new SO(t?this._mediaStreamTrack.clone():this._mediaStreamTrack,qE(_O(_O({},this._config),{},{encoderConfig:n})),qE(this._constraints),qE(this._scalabilityMode),this._optimizationMode,r);return e&&n&&i.setEncoderConfiguration(n),BS.debug("clone track from ".concat(this.getTrackId()," to ").concat(r,", clone ").concat(t)),i}bindProcessorContextEvents(){this.processorContext.on(nC.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}})),this.processorContext.on(nC.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}}function TO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TO(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NO(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=IO(IO({},r),{},{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?BS.debug("[".concat(e,"] set content hint to"),n.optimizationMode):BS.debug("[".concat(e,"] set content hint failed")))):BS.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}function wO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wO(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}MT([$S({argsMap:(e,t)=>[e.getTrackId(),t]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],SO.prototype,"setDevice",null),MT([f_("CameraVideoTrack","_enabledMutex"),$S({argsMap:(e,t)=>[e.getTrackId(),t]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Boolean,Boolean]),DT("design:returntype",cy)],SO.prototype,"setEnabled",null),MT([$S({argsMap:(e,t)=>[e.getTrackId(),t]}),HC(),DT("design:type",Function),DT("design:paramtypes",[Object,Boolean]),DT("design:returntype",cy)],SO.prototype,"setEncoderConfiguration",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],SO.prototype,"close",null);class OO extends lC{getUserId(){return this._userId}constructor(e,t,n,r){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(r.clientId,"_").concat(r_(5,""))),op(this,"_userId",void 0),op(this,"_uintId",void 0),op(this,"_isDestroyed",!1),op(this,"store",void 0),op(this,"processor",void 0),this._userId=t,this._uintId=n,this.store=r}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,BS.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}class AO extends OO{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==oC.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,n,r){super(e,t,n,r),op(this,"_videoVisibleTimer",null),op(this,"_previousVideoVisibleStatus",void 0),op(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),op(this,"trackMediaType","video"),op(this,"_videoWidth",void 0),op(this,"_videoHeight",void 0),op(this,"_player",void 0),op(this,"processorDestination",void 0),op(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new qC(this.getTrackId(),"remote"),this.processorDestination=new YC(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return QE((()=>{BS.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),wE(this,zw.GET_STATS)||CO({},eC)}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(BS.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}BS.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=CO(CO({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new hO(n):this._player=new mO(n),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(qw.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=e=>{this.safeEmit(qw.VIDEO_STATE_CHANGED,e)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(qw.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),bS("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,BS.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){gO(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(o_)}_updatePlayerSource(){BS.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=iE.checkOneElementVisible(i),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=eT.reportApiInvoke(null,{tag:hE.TRACER,name:pE.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new Wy(Gy.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new Wy(Gy.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(tC.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(tC.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(Ww.SEI_RECEIVED,e)}}MT([$S({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),DT("design:type",Function),DT("design:paramtypes",[Object,Object]),DT("design:returntype",void 0)],AO.prototype,"play",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],AO.prototype,"stop",null),MT([$S({argsMap:(e,t)=>[e.getTrackId(),t.name]}),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",Object)],AO.prototype,"pipe",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],AO.prototype,"unpipe",null);class RO extends OO{get isPlaying(){return this._useAudioElement?VC.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,n,r){super(e,t,n,r),op(this,"trackMediaType","audio"),op(this,"_source",void 0),op(this,"_useAudioElement",!0),op(this,"_volume",100),op(this,"processorContext",void 0),op(this,"processorDestination",void 0),op(this,"_played",!1),op(this,"_bypassWebAudio",!1),bS("DISABLE_WEBAUDIO")?(this._source=new JC,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new SC(e,!0),bS("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(Kw.RECEIVE_TRACK_BUFFER,(()=>{this.safeEmit(qw.FIRST_FRAME_DECODED)})),this.processorContext=new QC(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new KC(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Kw.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})}))}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Kw.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Kw.ON_AUDIO_BUFFER),this._source.on(Kw.ON_AUDIO_BUFFER,(t=>e(t)))}setVolume(e){this._volume=e,this._useAudioElement?VC.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!wy()&&bS("RESTRICTION_SET_PLAYBACK_DEVICE"))throw new Wy(Gy.NOT_SUPPORTED,"your browser does not support setting the audio output device");await VC.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return QE((()=>{BS.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),wE(this,zw.GET_STATS)||CO({},Zw)}play(){BS.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(BS.debug("[".concat(this.getTrackId(),"] use audio element to play")),VC.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){BS.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?VC.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];BS.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&VC.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new Wy(Gy.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new Wy(Gy.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new Wy(Gy.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(tC.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})),this.processorDestination.on(tC.ON_NODE,(e=>{this._source.processedNode=e;const t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(tC.ON_TRACK),this.processorDestination.removeAllListeners(tC.ON_NODE)}}MT([$S({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),DT("design:type",Function),DT("design:paramtypes",[Number]),DT("design:returntype",void 0)],RO.prototype,"setVolume",null),MT([$S({argsMap:(e,t)=>[e.getTrackId(),t]}),DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],RO.prototype,"setPlaybackDevice",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],RO.prototype,"play",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],RO.prototype,"stop",null),MT([$S({argsMap:(e,t)=>[e.getTrackId(),t.name]}),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",Object)],RO.prototype,"pipe",null),MT([$S({argsMap:e=>[e.getTrackId()]}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],RO.prototype,"unpipe",null);const MO=new class extends lE{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),op(this,"_lastHiddenTime",0),op(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),BS.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)}))}};function DO(e){let t=e.length;for(;--t>=0;)e[t]=0}const kO=256,xO=286,LO=30,PO=15,jO=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),UO=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),FO=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),zO=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),BO=new Array(576);DO(BO);const VO=new Array(60);DO(VO);const HO=new Array(512);DO(HO);const GO=new Array(256);DO(GO);const WO=new Array(29);DO(WO);const YO=new Array(LO);function qO(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let KO,QO,JO;function XO(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}DO(YO);const ZO=e=>e<256?HO[e]:HO[256+(e>>>7)],$O=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},eA=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,$O(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},tA=(e,t,n)=>{eA(e,n[2*t],n[2*t+1])},nA=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},rA=(e,t,n)=>{const r=new Array(16);let i,o,s=0;for(i=1;i<=PO;i++)s=s+n[i-1]<<1,r[i]=s;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=nA(r[t]++,t))}},iA=e=>{let t;for(t=0;t<xO;t++)e.dyn_ltree[2*t]=0;for(t=0;t<LO;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},oA=e=>{e.bi_valid>8?$O(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},sA=(e,t,n,r)=>{const i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},aA=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&sA(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!sA(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},cA=(e,t,n)=>{let r,i,o,s,a=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+a++],r+=(255&e.pending_buf[e.sym_buf+a++])<<8,i=e.pending_buf[e.sym_buf+a++],0===r?tA(e,i,t):(o=GO[i],tA(e,o+kO+1,t),s=jO[o],0!==s&&(i-=WO[o],eA(e,i,s)),r--,o=ZO(r),tA(e,o,n),s=UO[o],0!==s&&(r-=YO[o],eA(e,r,s)))}while(a<e.sym_next);tA(e,256,t)},lA=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<o;s++)0!==n[2*s]?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[2*c+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)aA(e,n,s);c=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],aA(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[2*c]=n[2*s]+n[2*a],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[2*s+1]=n[2*a+1]=c,e.heap[1]=c++,aA(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,u,d,p,h,f,m=0;for(p=0;p<=PO;p++)e.bl_count[p]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)u=e.heap[l],p=n[2*n[2*u+1]+1]+1,p>c&&(p=c,m++),n[2*u+1]=p,u>r||(e.bl_count[p]++,h=0,u>=a&&(h=s[u-a]),f=n[2*u],e.opt_len+=f*(p+h),o&&(e.static_len+=f*(i[2*u+1]+h)));if(0!==m){do{for(p=c-1;0===e.bl_count[p];)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[c]--,m-=2}while(m>0);for(p=c;0!==p;p--)for(u=e.bl_count[p];0!==u;)d=e.heap[--l],d>r||(n[2*d+1]!==p&&(e.opt_len+=(p-n[2*d+1])*n[2*d],n[2*d+1]=p),u--)}})(e,t),rA(n,l,e.bl_count)},uA=(e,t,n)=>{let r,i,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<c&&i===s||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=i,0===s?(c=138,l=3):i===s?(c=6,l=3):(c=7,l=4))},dA=(e,t,n)=>{let r,i,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<c&&i===s)){if(a<l)do{tA(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(tA(e,i,e.bl_tree),a--),tA(e,16,e.bl_tree),eA(e,a-3,2)):a<=10?(tA(e,17,e.bl_tree),eA(e,a-3,3)):(tA(e,18,e.bl_tree),eA(e,a-11,7));a=0,o=i,0===s?(c=138,l=3):i===s?(c=6,l=3):(c=7,l=4)}};let pA=!1;const hA=(e,t,n,r)=>{eA(e,0+(r?1:0),3),oA(e),$O(e,n),$O(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var fA=e=>{pA||((()=>{let e,t,n,r,i;const o=new Array(16);for(n=0,r=0;r<28;r++)for(WO[r]=n,e=0;e<1<<jO[r];e++)GO[n++]=r;for(GO[n-1]=r,i=0,r=0;r<16;r++)for(YO[r]=i,e=0;e<1<<UO[r];e++)HO[i++]=r;for(i>>=7;r<LO;r++)for(YO[r]=i<<7,e=0;e<1<<UO[r]-7;e++)HO[256+i++]=r;for(t=0;t<=PO;t++)o[t]=0;for(e=0;e<=143;)BO[2*e+1]=8,e++,o[8]++;for(;e<=255;)BO[2*e+1]=9,e++,o[9]++;for(;e<=279;)BO[2*e+1]=7,e++,o[7]++;for(;e<=287;)BO[2*e+1]=8,e++,o[8]++;for(rA(BO,287,o),e=0;e<LO;e++)VO[2*e+1]=5,VO[2*e]=nA(e,5);KO=new qO(BO,jO,257,xO,PO),QO=new qO(VO,UO,0,LO,PO),JO=new qO(new Array(0),FO,0,19,7)})(),pA=!0),e.l_desc=new XO(e.dyn_ltree,KO),e.d_desc=new XO(e.dyn_dtree,QO),e.bl_desc=new XO(e.bl_tree,JO),e.bi_buf=0,e.bi_valid=0,iA(e)},mA=(e,t,n,r)=>{let i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<kO;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),lA(e,e.l_desc),lA(e,e.d_desc),s=(e=>{let t;for(uA(e,e.dyn_ltree,e.l_desc.max_code),uA(e,e.dyn_dtree,e.d_desc.max_code),lA(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*zO[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?hA(e,t,n,r):4===e.strategy||o===i?(eA(e,2+(r?1:0),3),cA(e,BO,VO)):(eA(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(eA(e,t-257,5),eA(e,n-1,5),eA(e,r-4,4),i=0;i<r;i++)eA(e,e.bl_tree[2*zO[i]+1],3);dA(e,e.dyn_ltree,t-1),dA(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),cA(e,e.dyn_ltree,e.dyn_dtree)),iA(e),r&&oA(e)},gA=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(GO[n]+kO+1)]++,e.dyn_dtree[2*ZO(t)]++),e.sym_next===e.sym_end),vA={_tr_init:fA,_tr_stored_block:hA,_tr_flush_block:mA,_tr_tally:gA,_tr_align:e=>{eA(e,2,3),tA(e,256,BO),(e=>{16===e.bi_valid?($O(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},yA=(e,t,n,r)=>{let i=65535&e,o=e>>>16&65535,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{i=i+t[r++]|0,o=o+i|0}while(--s);i%=65521,o%=65521}return i|o<<16};const EA=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var _A=(e,t,n,r)=>{const i=EA,o=r+n;e^=-1;for(let s=r;s<o;s++)e=e>>>8^i[255&(e^t[s])];return~e},bA={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},SA={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:TA,_tr_stored_block:IA,_tr_flush_block:NA,_tr_tally:wA,_tr_align:CA}=vA,{Z_NO_FLUSH:OA,Z_PARTIAL_FLUSH:AA,Z_FULL_FLUSH:RA,Z_FINISH:MA,Z_BLOCK:DA,Z_OK:kA,Z_STREAM_END:xA,Z_STREAM_ERROR:LA,Z_DATA_ERROR:PA,Z_BUF_ERROR:jA,Z_DEFAULT_COMPRESSION:UA,Z_FILTERED:FA,Z_HUFFMAN_ONLY:zA,Z_RLE:BA,Z_FIXED:VA,Z_DEFAULT_STRATEGY:HA,Z_UNKNOWN:GA,Z_DEFLATED:WA}=SA,YA=286,qA=30,KA=19,QA=2*YA+1,JA=15,XA=258,ZA=262,$A=42,eR=113,tR=666,nR=(e,t)=>(e.msg=bA[t],t),rR=e=>2*e-(e>4?9:0),iR=e=>{let t=e.length;for(;--t>=0;)e[t]=0},oR=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let sR=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const aR=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},cR=(e,t)=>{NA(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,aR(e.strm)},lR=(e,t)=>{e.pending_buf[e.pending++]=t},uR=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},dR=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=yA(e.adler,t,i,n):2===e.state.wrap&&(e.adler=_A(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},pR=(e,t)=>{let n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-ZA?e.strstart-(e.w_size-ZA):0,l=e.window,u=e.w_mask,d=e.prev,p=e.strstart+XA;let h=l[o+s-1],f=l[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,l[n+s]===f&&l[n+s-1]===h&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<p);if(r=XA-(p-o),o=p-XA,r>s){if(e.match_start=t,s=r,r>=a)break;h=l[o+s-1],f=l[o+s]}}}while((t=d[t&u])>c&&0!=--i);return s<=e.lookahead?s:e.lookahead},hR=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ZA)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),oR(e),r+=t),0===e.strm.avail_in)break;if(n=dR(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=sR(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=sR(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ZA&&0!==e.strm.avail_in)},fR=(e,t)=>{let n,r,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<o&&(0===n&&t!==MA||t===OA||n!==r+e.strm.avail_in))break;s=t===MA&&n===r+e.strm.avail_in?1:0,IA(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,aR(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(dR(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==OA&&t!==MA&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(dR(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,o=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=o||(r||t===MA)&&t!==OA&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,s=t===MA&&0===e.strm.avail_in&&n===r?1:0,IA(e,e.block_start,n,s),e.block_start+=n,aR(e.strm)),s?3:1)},mR=(e,t)=>{let n,r;for(;;){if(e.lookahead<ZA){if(hR(e),e.lookahead<ZA&&t===OA)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=sR(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ZA&&(e.match_length=pR(e,n)),e.match_length>=3)if(r=wA(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=sR(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=sR(e,e.ins_h,e.window[e.strstart+1]);else r=wA(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(cR(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===MA?(cR(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(cR(e,!1),0===e.strm.avail_out)?1:2},gR=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<ZA){if(hR(e),e.lookahead<ZA&&t===OA)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=sR(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ZA&&(e.match_length=pR(e,n),e.match_length<=5&&(e.strategy===FA||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=wA(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=sR(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(cR(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=wA(e,0,e.window[e.strstart-1]),r&&cR(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=wA(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===MA?(cR(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(cR(e,!1),0===e.strm.avail_out)?1:2};function vR(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const yR=[new vR(0,0,0,0,fR),new vR(4,4,8,4,mR),new vR(4,5,16,8,mR),new vR(4,6,32,32,mR),new vR(4,4,16,16,gR),new vR(8,16,32,32,gR),new vR(8,16,128,128,gR),new vR(8,32,128,256,gR),new vR(32,128,258,1024,gR),new vR(32,258,258,4096,gR)];function ER(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=WA,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*QA),this.dyn_dtree=new Uint16Array(2*(2*qA+1)),this.bl_tree=new Uint16Array(2*(2*KA+1)),iR(this.dyn_ltree),iR(this.dyn_dtree),iR(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(JA+1),this.heap=new Uint16Array(2*YA+1),iR(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*YA+1),iR(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const _R=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==$A&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==eR&&t.status!==tR?1:0},bR=e=>{if(_R(e))return nR(e,LA);e.total_in=e.total_out=0,e.data_type=GA;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?$A:eR,e.adler=2===t.wrap?0:1,t.last_flush=-2,TA(t),kA},SR=e=>{const t=bR(e);var n;return t===kA&&((n=e.state).window_size=2*n.w_size,iR(n.head),n.max_lazy_match=yR[n.level].max_lazy,n.good_match=yR[n.level].good_length,n.nice_match=yR[n.level].nice_length,n.max_chain_length=yR[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},TR=(e,t,n,r,i,o)=>{if(!e)return LA;let s=1;if(t===UA&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||n!==WA||r<8||r>15||t<0||t>9||o<0||o>VA||8===r&&1!==s)return nR(e,LA);8===r&&(r=9);const a=new ER;return e.state=a,a.strm=e,a.status=$A,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=o,a.method=n,SR(e)};var IR=(e,t)=>{if(_R(e)||t>DA||t<0)return e?nR(e,LA):LA;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===tR&&t!==MA)return nR(e,0===e.avail_out?jA:LA);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(aR(e),0===e.avail_out)return n.last_flush=-1,kA}else if(0===e.avail_in&&rR(t)<=rR(r)&&t!==MA)return nR(e,jA);if(n.status===tR&&0!==e.avail_in)return nR(e,jA);if(n.status===$A&&0===n.wrap&&(n.status=eR),n.status===$A){let t=WA+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=zA||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,uR(n,t),0!==n.strstart&&(uR(n,e.adler>>>16),uR(n,65535&e.adler)),e.adler=1,n.status=eR,aR(e),0!==n.pending)return n.last_flush=-1,kA}if(57===n.status)if(e.adler=0,lR(n,31),lR(n,139),lR(n,8),n.gzhead)lR(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),lR(n,255&n.gzhead.time),lR(n,n.gzhead.time>>8&255),lR(n,n.gzhead.time>>16&255),lR(n,n.gzhead.time>>24&255),lR(n,9===n.level?2:n.strategy>=zA||n.level<2?4:0),lR(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(lR(n,255&n.gzhead.extra.length),lR(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=_A(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(lR(n,0),lR(n,0),lR(n,0),lR(n,0),lR(n,0),lR(n,9===n.level?2:n.strategy>=zA||n.level<2?4:0),lR(n,3),n.status=eR,aR(e),0!==n.pending)return n.last_flush=-1,kA;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=_A(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,aR(e),0!==n.pending)return n.last_flush=-1,kA;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=_A(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=_A(e.adler,n.pending_buf,n.pending-r,r)),aR(e),0!==n.pending)return n.last_flush=-1,kA;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,lR(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=_A(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=_A(e.adler,n.pending_buf,n.pending-r,r)),aR(e),0!==n.pending)return n.last_flush=-1,kA;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,lR(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=_A(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(aR(e),0!==n.pending))return n.last_flush=-1,kA;lR(n,255&e.adler),lR(n,e.adler>>8&255),e.adler=0}if(n.status=eR,aR(e),0!==n.pending)return n.last_flush=-1,kA}if(0!==e.avail_in||0!==n.lookahead||t!==OA&&n.status!==tR){let r=0===n.level?fR(n,t):n.strategy===zA?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(hR(e),0===e.lookahead)){if(t===OA)return 1;break}if(e.match_length=0,n=wA(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(cR(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===MA?(cR(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(cR(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===BA?((e,t)=>{let n,r,i,o;const s=e.window;for(;;){if(e.lookahead<=XA){if(hR(e),e.lookahead<=XA&&t===OA)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=e.strstart+XA;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=XA-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=wA(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=wA(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(cR(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===MA?(cR(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(cR(e,!1),0===e.strm.avail_out)?1:2})(n,t):yR[n.level].func(n,t);if(3!==r&&4!==r||(n.status=tR),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),kA;if(2===r&&(t===AA?CA(n):t!==DA&&(IA(n,0,0,!1),t===RA&&(iR(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),aR(e),0===e.avail_out))return n.last_flush=-1,kA}return t!==MA?kA:n.wrap<=0?xA:(2===n.wrap?(lR(n,255&e.adler),lR(n,e.adler>>8&255),lR(n,e.adler>>16&255),lR(n,e.adler>>24&255),lR(n,255&e.total_in),lR(n,e.total_in>>8&255),lR(n,e.total_in>>16&255),lR(n,e.total_in>>24&255)):(uR(n,e.adler>>>16),uR(n,65535&e.adler)),aR(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?kA:xA)},NR=(e,t)=>{let n=t.length;if(_R(e))return LA;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==$A||r.lookahead)return LA;if(1===i&&(e.adler=yA(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(iR(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,hR(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=sR(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,hR(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,r.wrap=i,kA},wR={deflateInit:(e,t)=>TR(e,t,WA,15,8,HA),deflateInit2:TR,deflateReset:SR,deflateResetKeep:bR,deflateSetHeader:(e,t)=>_R(e)||2!==e.state.wrap?LA:(e.state.gzhead=t,kA),deflate:IR,deflateEnd:e=>{if(_R(e))return LA;const t=e.state.status;return e.state=null,t===eR?nR(e,PA):kA},deflateSetDictionary:NR,deflateInfo:"pako deflate (from Nodeca project)"};const CR=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var OR={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)CR(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,o=e.length;r<o;r++){let t=e[r];n.set(t,i),i+=t.length}return n}};let AR=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){AR=!1}const RR=new Uint8Array(256);for(let n=0;n<256;n++)RR[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;RR[254]=RR[254]=1;var MR={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,o,s=e.length,a=0;for(i=0;i<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const o=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){o[i++]=t;continue}let s=RR[t];if(s>4)o[i++]=65533,r+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&r<n;)t=t<<6|63&e[r++],s--;s>1?o[i++]=65533:t<65536?o[i++]=t:(t-=65536,o[i++]=55296|t>>10&1023,o[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&AR)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(o,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+RR[e[n]]>t?n:t}},DR=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const kR=Object.prototype.toString,{Z_NO_FLUSH:xR,Z_SYNC_FLUSH:LR,Z_FULL_FLUSH:PR,Z_FINISH:jR,Z_OK:UR,Z_STREAM_END:FR,Z_DEFAULT_COMPRESSION:zR,Z_DEFAULT_STRATEGY:BR,Z_DEFLATED:VR}=SA;function HR(e){this.options=OR.assign({level:zR,method:VR,chunkSize:16384,windowBits:15,memLevel:8,strategy:BR},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new DR,this.strm.avail_out=0;let n=wR.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==UR)throw new Error(bA[n]);if(t.header&&wR.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?MR.string2buf(t.dictionary):"[object ArrayBuffer]"===kR.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=wR.deflateSetDictionary(this.strm,e),n!==UR)throw new Error(bA[n]);this._dict_set=!0}}function GR(e,t){const n=new HR(t);if(n.push(e,!0),n.err)throw n.msg||bA[n.err];return n.result}HR.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?jR:xR,"string"==typeof e?n.input=MR.string2buf(e):"[object ArrayBuffer]"===kR.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===LR||o===PR)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=wR.deflate(n,o),i===FR)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=wR.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===UR;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},HR.prototype.onData=function(e){this.chunks.push(e)},HR.prototype.onEnd=function(e){e===UR&&(this.result=OR.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var WR={Deflate:HR,deflate:GR,deflateRaw:function(e,t){return(t=t||{}).raw=!0,GR(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,GR(e,t)},constants:SA};const YR=16209;var qR=function(e,t){let n,r,i,o,s,a,c,l,u,d,p,h,f,m,g,v,y,E,_,b,S,T,I,N;const w=e.state;n=e.next_in,I=e.input,r=n+(e.avail_in-5),i=e.next_out,N=e.output,o=i-(t-e.avail_out),s=i+(e.avail_out-257),a=w.dmax,c=w.wsize,l=w.whave,u=w.wnext,d=w.window,p=w.hold,h=w.bits,f=w.lencode,m=w.distcode,g=(1<<w.lenbits)-1,v=(1<<w.distbits)-1;e:do{h<15&&(p+=I[n++]<<h,h+=8,p+=I[n++]<<h,h+=8),y=f[p&g];t:for(;;){if(E=y>>>24,p>>>=E,h-=E,E=y>>>16&255,0===E)N[i++]=65535&y;else{if(!(16&E)){if(0==(64&E)){y=f[(65535&y)+(p&(1<<E)-1)];continue t}if(32&E){w.mode=16191;break e}e.msg="invalid literal/length code",w.mode=YR;break e}_=65535&y,E&=15,E&&(h<E&&(p+=I[n++]<<h,h+=8),_+=p&(1<<E)-1,p>>>=E,h-=E),h<15&&(p+=I[n++]<<h,h+=8,p+=I[n++]<<h,h+=8),y=m[p&v];n:for(;;){if(E=y>>>24,p>>>=E,h-=E,E=y>>>16&255,!(16&E)){if(0==(64&E)){y=m[(65535&y)+(p&(1<<E)-1)];continue n}e.msg="invalid distance code",w.mode=YR;break e}if(b=65535&y,E&=15,h<E&&(p+=I[n++]<<h,h+=8,h<E&&(p+=I[n++]<<h,h+=8)),b+=p&(1<<E)-1,b>a){e.msg="invalid distance too far back",w.mode=YR;break e}if(p>>>=E,h-=E,E=i-o,b>E){if(E=b-E,E>l&&w.sane){e.msg="invalid distance too far back",w.mode=YR;break e}if(S=0,T=d,0===u){if(S+=c-E,E<_){_-=E;do{N[i++]=d[S++]}while(--E);S=i-b,T=N}}else if(u<E){if(S+=c+u-E,E-=u,E<_){_-=E;do{N[i++]=d[S++]}while(--E);if(S=0,u<_){E=u,_-=E;do{N[i++]=d[S++]}while(--E);S=i-b,T=N}}}else if(S+=u-E,E<_){_-=E;do{N[i++]=d[S++]}while(--E);S=i-b,T=N}for(;_>2;)N[i++]=T[S++],N[i++]=T[S++],N[i++]=T[S++],_-=3;_&&(N[i++]=T[S++],_>1&&(N[i++]=T[S++]))}else{S=i-b;do{N[i++]=N[S++],N[i++]=N[S++],N[i++]=N[S++],_-=3}while(_>2);_&&(N[i++]=N[S++],_>1&&(N[i++]=N[S++]))}break}}break}}while(n<r&&i<s);_=h>>3,n-=_,h-=_<<3,p&=(1<<h)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<s?s-i+257:257-(i-s),w.hold=p,w.bits=h};const KR=15,QR=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),JR=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),XR=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ZR=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var $R=(e,t,n,r,i,o,s,a)=>{const c=a.bits;let l,u,d,p,h,f,m=0,g=0,v=0,y=0,E=0,_=0,b=0,S=0,T=0,I=0,N=null;const w=new Uint16Array(16),C=new Uint16Array(16);let O,A,R,M=null;for(m=0;m<=KR;m++)w[m]=0;for(g=0;g<r;g++)w[t[n+g]]++;for(E=c,y=KR;y>=1&&0===w[y];y--);if(E>y&&(E=y),0===y)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(v=1;v<y&&0===w[v];v++);for(E<v&&(E=v),S=1,m=1;m<=KR;m++)if(S<<=1,S-=w[m],S<0)return-1;if(S>0&&(0===e||1!==y))return-1;for(C[1]=0,m=1;m<KR;m++)C[m+1]=C[m]+w[m];for(g=0;g<r;g++)0!==t[n+g]&&(s[C[t[n+g]]++]=g);if(0===e?(N=M=s,f=20):1===e?(N=QR,M=JR,f=257):(N=XR,M=ZR,f=0),I=0,g=0,m=v,h=o,_=E,b=0,d=-1,T=1<<E,p=T-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){O=m-b,s[g]+1<f?(A=0,R=s[g]):s[g]>=f?(A=M[s[g]-f],R=N[s[g]-f]):(A=96,R=0),l=1<<m-b,u=1<<_,v=u;do{u-=l,i[h+(I>>b)+u]=O<<24|A<<16|R}while(0!==u);for(l=1<<m-1;I&l;)l>>=1;if(0!==l?(I&=l-1,I+=l):I=0,g++,0==--w[m]){if(m===y)break;m=t[n+s[g]]}if(m>E&&(I&p)!==d){for(0===b&&(b=E),h+=v,_=m-b,S=1<<_;_+b<y&&(S-=w[_+b],!(S<=0));)_++,S<<=1;if(T+=1<<_,1===e&&T>852||2===e&&T>592)return 1;d=I&p,i[d]=E<<24|_<<16|h-o}}return 0!==I&&(i[h+I]=m-b<<24|64<<16),a.bits=E,0};const{Z_FINISH:eM,Z_BLOCK:tM,Z_TREES:nM,Z_OK:rM,Z_STREAM_END:iM,Z_NEED_DICT:oM,Z_STREAM_ERROR:sM,Z_DATA_ERROR:aM,Z_MEM_ERROR:cM,Z_BUF_ERROR:lM,Z_DEFLATED:uM}=SA,dM=16180,pM=16190,hM=16191,fM=16192,mM=16194,gM=16199,vM=16200,yM=16206,EM=16209,_M=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function bM(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const SM=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<dM||t.mode>16211?1:0},TM=e=>{if(SM(e))return sM;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=dM,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,rM},IM=e=>{if(SM(e))return sM;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,TM(e)},NM=(e,t)=>{let n;if(SM(e))return sM;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?sM:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,IM(e))},wM=(e,t)=>{if(!e)return sM;const n=new bM;e.state=n,n.strm=e,n.window=null,n.mode=dM;const r=NM(e,t);return r!==rM&&(e.state=null),r};let CM,OM,AM=!0;const RM=e=>{if(AM){CM=new Int32Array(512),OM=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for($R(1,e.lens,0,288,CM,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;$R(2,e.lens,0,32,OM,0,e.work,{bits:5}),AM=!1}e.lencode=CM,e.lenbits=9,e.distcode=OM,e.distbits=5},MM=(e,t,n,r)=>{let i;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),(r-=i)?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var DM=(e,t)=>{let n,r,i,o,s,a,c,l,u,d,p,h,f,m,g,v,y,E,_,b,S,T,I=0;const N=new Uint8Array(4);let w,C;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(SM(e)||!e.output||!e.input&&0!==e.avail_in)return sM;n=e.state,n.mode===hM&&(n.mode=fM),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,l=n.hold,u=n.bits,d=a,p=c,T=rM;e:for(;;)switch(n.mode){case dM:if(0===n.wrap){n.mode=fM;break}for(;u<16;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,N[0]=255&l,N[1]=l>>>8&255,n.check=_A(n.check,N,2,0),l=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=EM;break}if((15&l)!==uM){e.msg="unknown compression method",n.mode=EM;break}if(l>>>=4,u-=4,S=8+(15&l),0===n.wbits&&(n.wbits=S),S>15||S>n.wbits){e.msg="invalid window size",n.mode=EM;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:hM,l=0,u=0;break;case 16181:for(;u<16;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(n.flags=l,(255&n.flags)!==uM){e.msg="unknown compression method",n.mode=EM;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=EM;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(N[0]=255&l,N[1]=l>>>8&255,n.check=_A(n.check,N,2,0)),l=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(N[0]=255&l,N[1]=l>>>8&255,N[2]=l>>>16&255,N[3]=l>>>24&255,n.check=_A(n.check,N,4,0)),l=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(N[0]=255&l,N[1]=l>>>8&255,n.check=_A(n.check,N,2,0)),l=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(N[0]=255&l,N[1]=l>>>8&255,n.check=_A(n.check,N,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(h=n.length,h>a&&(h=a),h&&(n.head&&(S=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+h),S)),512&n.flags&&4&n.wrap&&(n.check=_A(n.check,r,h,o)),a-=h,o+=h,n.length-=h),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;h=0;do{S=r[o+h++],n.head&&S&&n.length<65536&&(n.head.name+=String.fromCharCode(S))}while(S&&h<a);if(512&n.flags&&4&n.wrap&&(n.check=_A(n.check,r,h,o)),a-=h,o+=h,S)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;h=0;do{S=r[o+h++],n.head&&S&&n.length<65536&&(n.head.comment+=String.fromCharCode(S))}while(S&&h<a);if(512&n.flags&&4&n.wrap&&(n.check=_A(n.check,r,h,o)),a-=h,o+=h,S)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=EM;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=hM;break;case 16189:for(;u<32;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}e.adler=n.check=_M(l),l=0,u=0,n.mode=pM;case pM:if(0===n.havedict)return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=u,oM;e.adler=n.check=1,n.mode=hM;case hM:if(t===tM||t===nM)break e;case fM:if(n.last){l>>>=7&u,u-=7&u,n.mode=yM;break}for(;u<3;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}switch(n.last=1&l,l>>>=1,u-=1,3&l){case 0:n.mode=16193;break;case 1:if(RM(n),n.mode=gM,t===nM){l>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=EM}l>>>=2,u-=2;break;case 16193:for(l>>>=7&u,u-=7&u;u<32;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=EM;break}if(n.length=65535&l,l=0,u=0,n.mode=mM,t===nM)break e;case mM:n.mode=16195;case 16195:if(h=n.length,h){if(h>a&&(h=a),h>c&&(h=c),0===h)break e;i.set(r.subarray(o,o+h),s),a-=h,o+=h,c-=h,s+=h,n.length-=h;break}n.mode=hM;break;case 16196:for(;u<14;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(n.nlen=257+(31&l),l>>>=5,u-=5,n.ndist=1+(31&l),l>>>=5,u-=5,n.ncode=4+(15&l),l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=EM;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}n.lens[O[n.have++]]=7&l,l>>>=3,u-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,w={bits:n.lenbits},T=$R(0,n.lens,0,19,n.lencode,0,n.work,w),n.lenbits=w.bits,T){e.msg="invalid code lengths set",n.mode=EM;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;I=n.lencode[l&(1<<n.lenbits)-1],g=I>>>24,v=I>>>16&255,y=65535&I,!(g<=u);){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(y<16)l>>>=g,u-=g,n.lens[n.have++]=y;else{if(16===y){for(C=g+2;u<C;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(l>>>=g,u-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=EM;break}S=n.lens[n.have-1],h=3+(3&l),l>>>=2,u-=2}else if(17===y){for(C=g+3;u<C;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}l>>>=g,u-=g,S=0,h=3+(7&l),l>>>=3,u-=3}else{for(C=g+7;u<C;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}l>>>=g,u-=g,S=0,h=11+(127&l),l>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=EM;break}for(;h--;)n.lens[n.have++]=S}}if(n.mode===EM)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=EM;break}if(n.lenbits=9,w={bits:n.lenbits},T=$R(1,n.lens,0,n.nlen,n.lencode,0,n.work,w),n.lenbits=w.bits,T){e.msg="invalid literal/lengths set",n.mode=EM;break}if(n.distbits=6,n.distcode=n.distdyn,w={bits:n.distbits},T=$R(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,w),n.distbits=w.bits,T){e.msg="invalid distances set",n.mode=EM;break}if(n.mode=gM,t===nM)break e;case gM:n.mode=vM;case vM:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=u,qR(e,p),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,l=n.hold,u=n.bits,n.mode===hM&&(n.back=-1);break}for(n.back=0;I=n.lencode[l&(1<<n.lenbits)-1],g=I>>>24,v=I>>>16&255,y=65535&I,!(g<=u);){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(v&&0==(240&v)){for(E=g,_=v,b=y;I=n.lencode[b+((l&(1<<E+_)-1)>>E)],g=I>>>24,v=I>>>16&255,y=65535&I,!(E+g<=u);){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}l>>>=E,u-=E,n.back+=E}if(l>>>=g,u-=g,n.back+=g,n.length=y,0===v){n.mode=16205;break}if(32&v){n.back=-1,n.mode=hM;break}if(64&v){e.msg="invalid literal/length code",n.mode=EM;break}n.extra=15&v,n.mode=16201;case 16201:if(n.extra){for(C=n.extra;u<C;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;I=n.distcode[l&(1<<n.distbits)-1],g=I>>>24,v=I>>>16&255,y=65535&I,!(g<=u);){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(0==(240&v)){for(E=g,_=v,b=y;I=n.distcode[b+((l&(1<<E+_)-1)>>E)],g=I>>>24,v=I>>>16&255,y=65535&I,!(E+g<=u);){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}l>>>=E,u-=E,n.back+=E}if(l>>>=g,u-=g,n.back+=g,64&v){e.msg="invalid distance code",n.mode=EM;break}n.offset=y,n.extra=15&v,n.mode=16203;case 16203:if(n.extra){for(C=n.extra;u<C;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=EM;break}n.mode=16204;case 16204:if(0===c)break e;if(h=p-c,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=EM;break}h>n.wnext?(h-=n.wnext,f=n.wsize-h):f=n.wnext-h,h>n.length&&(h=n.length),m=n.window}else m=i,f=s-n.offset,h=n.length;h>c&&(h=c),c-=h,n.length-=h;do{i[s++]=m[f++]}while(--h);0===n.length&&(n.mode=vM);break;case 16205:if(0===c)break e;i[s++]=n.length,c--,n.mode=vM;break;case yM:if(n.wrap){for(;u<32;){if(0===a)break e;a--,l|=r[o++]<<u,u+=8}if(p-=c,e.total_out+=p,n.total+=p,4&n.wrap&&p&&(e.adler=n.check=n.flags?_A(n.check,i,p,s-p):yA(n.check,i,p,s-p)),p=c,4&n.wrap&&(n.flags?l:_M(l))!==n.check){e.msg="incorrect data check",n.mode=EM;break}l=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=EM;break}l=0,u=0}n.mode=16208;case 16208:T=iM;break e;case EM:T=aM;break e;case 16210:return cM;default:return sM}return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=u,(n.wsize||p!==e.avail_out&&n.mode<EM&&(n.mode<yM||t!==eM))&&MM(e,e.output,e.next_out,p-e.avail_out),d-=e.avail_in,p-=e.avail_out,e.total_in+=d,e.total_out+=p,n.total+=p,4&n.wrap&&p&&(e.adler=n.check=n.flags?_A(n.check,i,p,e.next_out-p):yA(n.check,i,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===hM?128:0)+(n.mode===gM||n.mode===mM?256:0),(0===d&&0===p||t===eM)&&T===rM&&(T=lM),T},kM={inflateReset:IM,inflateReset2:NM,inflateResetKeep:TM,inflateInit:e=>wM(e,15),inflateInit2:wM,inflate:DM,inflateEnd:e=>{if(SM(e))return sM;let t=e.state;return t.window&&(t.window=null),e.state=null,rM},inflateGetHeader:(e,t)=>{if(SM(e))return sM;const n=e.state;return 0==(2&n.wrap)?sM:(n.head=t,t.done=!1,rM)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,o;return SM(e)?sM:(r=e.state,0!==r.wrap&&r.mode!==pM?sM:r.mode===pM&&(i=1,i=yA(i,t,n,0),i!==r.check)?aM:(o=MM(e,t,n,n),o?(r.mode=16210,cM):(r.havedict=1,rM)))},inflateInfo:"pako inflate (from Nodeca project)"},xM=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const LM=Object.prototype.toString,{Z_NO_FLUSH:PM,Z_FINISH:jM,Z_OK:UM,Z_STREAM_END:FM,Z_NEED_DICT:zM,Z_STREAM_ERROR:BM,Z_DATA_ERROR:VM,Z_MEM_ERROR:HM}=SA;function GM(e){this.options=OR.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new DR,this.strm.avail_out=0;let n=kM.inflateInit2(this.strm,t.windowBits);if(n!==UM)throw new Error(bA[n]);if(this.header=new xM,kM.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=MR.string2buf(t.dictionary):"[object ArrayBuffer]"===LM.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=kM.inflateSetDictionary(this.strm,t.dictionary),n!==UM)))throw new Error(bA[n])}function WM(e,t){const n=new GM(t);if(n.push(e),n.err)throw n.msg||bA[n.err];return n.result}GM.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?jM:PM,"[object ArrayBuffer]"===LM.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=kM.inflate(n,s),o===zM&&i&&(o=kM.inflateSetDictionary(n,i),o===UM?o=kM.inflate(n,s):o===VM&&(o=zM));n.avail_in>0&&o===FM&&n.state.wrap>0&&0!==e[n.next_in];)kM.inflateReset(n),o=kM.inflate(n,s);switch(o){case BM:case VM:case zM:case HM:return this.onEnd(o),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||o===FM))if("string"===this.options.to){let e=MR.utf8border(n.output,n.next_out),t=n.next_out-e,i=MR.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==UM||0!==a){if(o===FM)return o=kM.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},GM.prototype.onData=function(e){this.chunks.push(e)},GM.prototype.onEnd=function(e){e===UM&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=OR.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var YM={Inflate:GM,inflate:WM,inflateRaw:function(e,t){return(t=t||{}).raw=!0,WM(e,t)},ungzip:WM,constants:SA};const{Deflate:qM,deflate:KM,deflateRaw:QM,gzip:JM}=WR,{Inflate:XM,inflate:ZM,inflateRaw:$M,ungzip:eD}=YM;var tD,nD=KM,rD=ZM;!function(e){e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE"}(tD||(tD={}));class iD{constructor(){op(this,"_sequence",0),op(this,"_startTime",Date.now()),op(this,"isUseOneByte",!0)}get startTime(){const e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){const t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){const n=new Uint8Array(4);n.set([1,0,0,0]);const r={id:0,length:4,data:n.buffer},i={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[r]};t.commonPacketHeader.extension=1,t.extension=i,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;bS("SHOW_DATASTREAM2_LOG")&&BS.debug("send data header: ".concat(JSON.stringify(t.commonPacketHeader)));const n=new ArrayBuffer(t.commonPacketHeader.length),r=new Uint8Array(n),i=new DataView(n);let o=0;if(i.setUint16(o,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),o+=2,i.setUint32(o,t.commonPacketHeader.sequence,!0),o+=4,i.setUint16(o,t.commonStreamHeader,!0),o+=2,t.extension){const e=this.serializeExtension(t.extension);r.set(new Uint8Array(e),o),o+=e.byteLength}if(r.set(new Uint8Array(t.payload),o),o+=t.payload.byteLength,o!==t.commonPacketHeader.length)throw Error("serialize error!");return n}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);const t=new DataView(e);let n=0;const r=t.getUint16(n,!0);n+=2;const i={length:16383&r,reserved:(16384&r)>>14,extension:(32768&r)>>15,sequence:t.getUint16(n+2,!0)<<16|t.getUint16(n,!0)};let o,s;if(n+=4,bS("SHOW_DATASTREAM2_LOG")&&BS.debug("receive data header: ".concat(JSON.stringify(i))),t.getUint16(n,!0),n+=2,i.extension){s=this.deserializeExtension(e.slice(n)),n+=2+s.length,o=e.slice(n);let t=!1;if(s.datas.length>0){const e=s.datas.find((e=>0===e.id));e&&(t=1==(1&new DataView(e.data).getUint32(0,!0)))}o=t?this.decompress(o):o}else o=e.slice(8);return o}serializeExtension(e){const{profile:t,length:n,datas:r}=e,i=new ArrayBuffer(n+2),o=new Uint8Array(i),s=new DataView(i);let a=0;if(s.setUint8(a++,t),s.setUint8(a++,n),r.forEach((e=>{t?(s.setUint8(a++,e.id),s.setUint8(a++,e.length),o.set(new Uint8Array(e.data),a),a+=e.data.byteLength):(s.setUint8(a++,e.id|e.length<<4),o.set(new Uint8Array(e.data),a),a+=e.data.byteLength)})),a!==n+2)throw Error("serialize extension error, is ".concat(a,"!==").concat(n+2));return i}deserializeExtension(e){const t=new DataView(e);let n=0;const r=t.getUint8(n);n++;const i=t.getUint8(n);n++;const o=r===tD.TWO_BYTE,s=[],a=new DataView(e,2);let c=0;for(;c<i;){let e=0,t=0,n=new ArrayBuffer(0);o?(e=a.getUint8(c),c++,t=a.getUint8(c),c++):(e=15&a.getUint8(c),t=a.getUint8(c)>>4,c++),t>0&&(n=a.buffer.slice(c+2,c+2+t),c+=n.byteLength),s.push({id:e,length:t,data:n})}if(c!==i)throw Error("parse error");return{profile:r,length:i,datas:s}}decompress(e){return rD(new Uint8Array(e))}compress(e){return nD(new Uint8Array(e))}}class oD extends lE{constructor(e,t){super(),op(this,"_version",1),op(this,"_type",3),op(this,"_config",void 0),op(this,"_originDataChannel",void 0),op(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),op(this,"_dataStreamPacketHandler",void 0),op(this,"_datachannelEventMap",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader(),this._dataStreamPacketHandler=new iD}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return bS("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.readyState)&&void 0!==e?e:"connecting"}get _originDataChannelId(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.id)&&void 0!==e?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new cy(((e,t)=>{if(this._originDataChannel){"open"===this._originDataChannel.readyState&&e();const n=setTimeout((()=>{var e;t(new Wy(Gy.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat(null===(e=this._originDataChannel)||void 0===e?void 0:e.id)))}),1e4);this._originDataChannel.onopen=()=>{clearTimeout(n),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(n),new Wy(Gy.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new Wy(Gy.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))}))}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){const e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[cC.OPEN,cC.CLOSE,cC.ERROR].forEach((t=>{const n=()=>{this.emit(t)};this._datachannelEventMap.set(t,n),e.addEventListener(t,n)}))}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach((t=>{let[n,r]=t;e.removeEventListener(n,r)})),this._datachannelEventMap.clear()}}class sD extends oD{constructor(e){super(e),op(this,"_messageListener",void 0),this._messageListener=e=>{if(e.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const t=e.data.slice(0,this._dataStreamPacketHeader.byteLength),n=new DataView(t).getUint8(3);if(n!==this.id)return void(bS("SHOW_DATASTREAM2_LOG")&&BS.debug("invalid datachannel id: ".concat(n," !== ").concat(this.id)));let r=e.data.slice(this._dataStreamPacketHeader.byteLength);r=this._dataStreamPacketHandler.deserialize(r),this.emit(cC.MESSAGE,r)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class aD extends oD{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);const n=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);n.set(new Uint8Array(this._dataStreamPacketHeader),0),n.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(n.buffer)}}}var cD=i,lD=ht("iterator"),uD=!cD((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2"),r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),n.delete("a",2),!e.toJSON||!n.has("a",1)||n.has("a",2)||!t.size&&!0||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[lD]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),dD=js,pD=Rn,hD=h,fD=x,mD=u,gD=M,vD=uD,yD=js,ED=Fs,_D=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:dD(e,r,t[r],n);return e},bD=la,SD=bu,TD=Na,ID=Lf,ND=A,wD=$e,CD=Xt,OD=dr,AD=rn,RD=ne,MD=fr,DD=Es,kD=B,xD=zh,LD=kh,PD=Wf,jD=bp,UD=ht("iterator"),FD="URLSearchParams",zD=FD+"Iterator",BD=TD.set,VD=TD.getterFor(FD),HD=TD.getterFor(zD),GD=Object.getOwnPropertyDescriptor,WD=function(e){if(!gD)return hD[e];var t=GD(hD,e);return t&&t.value},YD=WD("fetch"),qD=WD("Request"),KD=WD("Headers"),QD=qD&&qD.prototype,JD=KD&&KD.prototype,XD=hD.RegExp,ZD=hD.TypeError,$D=hD.decodeURIComponent,ek=hD.encodeURIComponent,tk=mD("".charAt),nk=mD([].join),rk=mD([].push),ik=mD("".replace),ok=mD([].shift),sk=mD([].splice),ak=mD("".split),ck=mD("".slice),lk=/\+/g,uk=Array(4),dk=function(e){return uk[e-1]||(uk[e-1]=XD("((?:%[\\da-f]{2}){"+e+"})","gi"))},pk=function(e){try{return $D(e)}catch(t){return e}},hk=function(e){var t=ik(e,lk," "),n=4;try{return $D(t)}catch(e){for(;n;)t=ik(t,dk(n--),pk);return t}},fk=/[!'()~]|%20/g,mk={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},gk=function(e){return mk[e]},vk=function(e){return ik(ek(e),fk,gk)},yk=SD((function(e,t){BD(this,{type:zD,iterator:xD(VD(e).entries),kind:t})}),"Iterator",(function(){var e=HD(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),Ek=function(e){this.entries=[],this.url=null,void 0!==e&&(RD(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===tk(e,0)?ck(e,1):e:MD(e)))};Ek.prototype={type:FD,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,s,a,c=LD(e);if(c)for(n=(t=xD(e,c)).next;!(r=fD(n,t)).done;){if(o=(i=xD(AD(r.value))).next,(s=fD(o,i)).done||(a=fD(o,i)).done||!fD(o,i).done)throw ZD("Expected sequence with length 2");rk(this.entries,{key:MD(s.value),value:MD(a.value)})}else for(var l in e)wD(e,l)&&rk(this.entries,{key:l,value:MD(e[l])})},parseQuery:function(e){if(e)for(var t,n,r=ak(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=ak(t,"="),rk(this.entries,{key:hk(ok(n)),value:hk(nk(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],rk(n,vk(e.key)+"="+vk(e.value));return nk(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var _k=function(){ID(this,bk);var e=BD(this,new Ek(arguments.length>0?arguments[0]:void 0));gD||(this.size=e.entries.length)},bk=_k.prototype;if(_D(bk,{append:function(e,t){var n=VD(this);PD(arguments.length,2),rk(n.entries,{key:MD(e),value:MD(t)}),gD||this.length++,n.updateURL()},delete:function(e){for(var t=VD(this),n=PD(arguments.length,1),r=t.entries,i=MD(e),o=n<2?void 0:arguments[1],s=void 0===o?o:MD(o),a=0;a<r.length;){var c=r[a];if(c.key!==i||void 0!==s&&c.value!==s)a++;else if(sk(r,a,1),void 0!==s)break}gD||(this.size=r.length),t.updateURL()},get:function(e){var t=VD(this).entries;PD(arguments.length,1);for(var n=MD(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=VD(this).entries;PD(arguments.length,1);for(var n=MD(e),r=[],i=0;i<t.length;i++)t[i].key===n&&rk(r,t[i].value);return r},has:function(e){for(var t=VD(this).entries,n=PD(arguments.length,1),r=MD(e),i=n<2?void 0:arguments[1],o=void 0===i?i:MD(i),s=0;s<t.length;){var a=t[s++];if(a.key===r&&(void 0===o||a.value===o))return!0}return!1},set:function(e,t){var n=VD(this);PD(arguments.length,1);for(var r,i=n.entries,o=!1,s=MD(e),a=MD(t),c=0;c<i.length;c++)(r=i[c]).key===s&&(o?sk(i,c--,1):(o=!0,r.value=a));o||rk(i,{key:s,value:a}),gD||(this.size=i.length),n.updateURL()},sort:function(){var e=VD(this);jD(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=VD(this).entries,r=CD(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new yk(this,"keys")},values:function(){return new yk(this,"values")},entries:function(){return new yk(this,"entries")}},{enumerable:!0}),yD(bk,UD,bk.entries,{name:"entries"}),yD(bk,"toString",(function(){return VD(this).serialize()}),{enumerable:!0}),gD&&ED(bk,"size",{get:function(){return VD(this).entries.length},configurable:!0,enumerable:!0}),bD(_k,FD),pD({global:!0,constructor:!0,forced:!vD},{URLSearchParams:_k}),!vD&&ND(KD)){var Sk=mD(JD.has),Tk=mD(JD.set),Ik=function(e){if(RD(e)){var t,n=e.body;if(OD(n)===FD)return t=e.headers?new KD(e.headers):new KD,Sk(t,"content-type")||Tk(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),DD(e,{body:kD(0,MD(n)),headers:kD(0,t)})}return e};if(ND(YD)&&pD({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return YD(e,arguments.length>1?Ik(arguments[1]):{})}}),ND(qD)){var Nk=function(e){return ID(this,QD),new qD(e,arguments.length>1?Ik(arguments[1]):{})};QD.constructor=Nk,Nk.prototype=QD,pD({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Nk})}}var wk,Ck={URLSearchParams:_k,getState:VD},Ok=M,Ak=u,Rk=x,Mk=i,Dk=Ko,kk=Ls,xk=L,Lk=Je,Pk=Y,jk=Object.assign,Uk=Object.defineProperty,Fk=Ak([].concat),zk=!jk||Mk((function(){if(Ok&&1!==jk({b:1},jk(Uk({},"a",{enumerable:!0,get:function(){Uk(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=jk({},e)[n]||Dk(jk({},t)).join("")!=r}))?function(e,t){for(var n=Lk(e),r=arguments.length,i=1,o=kk.f,s=xk.f;r>i;)for(var a,c=Pk(arguments[i++]),l=o?Fk(Dk(c),o(c)):Dk(c),u=l.length,d=0;u>d;)a=l[d++],Ok&&!Rk(s,c,a)||(n[a]=c[a]);return n}:jk,Bk=rn,Vk=Gh,Hk=Xt,Gk=x,Wk=Je,Yk=function(e,t,n,r){try{return r?t(Bk(n)[0],n[1]):t(n)}catch(t){Vk(e,"throw",t)}},qk=Ch,Kk=po,Qk=Vn,Jk=qi,Xk=zh,Zk=kh,$k=Array,ex=u,tx=2147483647,nx=/[^\0-\u007E]/,rx=/[.\u3002\uFF0E\uFF61]/g,ix="Overflow: input needs wider integers to process",ox=RangeError,sx=ex(rx.exec),ax=Math.floor,cx=String.fromCharCode,lx=ex("".charCodeAt),ux=ex([].join),dx=ex([].push),px=ex("".replace),hx=ex("".split),fx=ex("".toLowerCase),mx=function(e){return e+22+75*(e<26)},gx=function(e,t,n){var r=0;for(e=n?ax(e/700):e>>1,e+=ax(e/t);e>455;)e=ax(e/35),r+=36;return ax(r+36*e/(e+38))},vx=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=lx(e,n++);if(i>=55296&&i<=56319&&n<r){var o=lx(e,n++);56320==(64512&o)?dx(t,((1023&i)<<10)+(1023&o)+65536):(dx(t,i),n--)}else dx(t,i)}return t}(e);var n,r,i=e.length,o=128,s=0,a=72;for(n=0;n<e.length;n++)(r=e[n])<128&&dx(t,cx(r));var c=t.length,l=c;for(c&&dx(t,"-");l<i;){var u=tx;for(n=0;n<e.length;n++)(r=e[n])>=o&&r<u&&(u=r);var d=l+1;if(u-o>ax((tx-s)/d))throw ox(ix);for(s+=(u-o)*d,o=u,n=0;n<e.length;n++){if((r=e[n])<o&&++s>tx)throw ox(ix);if(r==o){for(var p=s,h=36;;){var f=h<=a?1:h>=a+26?26:h-a;if(p<f)break;var m=p-f,g=36-f;dx(t,cx(mx(f+m%g))),p=ax(m/g),h+=36}dx(t,cx(mx(p))),a=gx(s,d,l==c),s=0,l++}}s++,o++}return ux(t,"")},yx=Rn,Ex=M,_x=uD,bx=h,Sx=Xt,Tx=u,Ix=js,Nx=Fs,wx=Lf,Cx=$e,Ox=zk,Ax=function(e){var t=Wk(e),n=Kk(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=Hk(i,r>2?arguments[2]:void 0));var s,a,c,l,u,d,p=Zk(t),h=0;if(!p||this===$k&&qk(p))for(s=Qk(t),a=n?new this(s):$k(s);s>h;h++)d=o?i(t[h],h):t[h],Jk(a,h,d);else for(u=(l=Xk(t,p)).next,a=n?new this:[];!(c=Gk(u,l)).done;h++)d=o?Yk(l,i,[c.value,h],!0):c.value,Jk(a,h,d);return a.length=h,a},Rx=As,Mx=Yd.codeAt,Dx=function(e){var t,n,r=[],i=hx(px(fx(e),rx,"."),".");for(t=0;t<i.length;t++)n=i[t],dx(r,sx(nx,n)?"xn--"+vx(n):n);return ux(r,".")},kx=fr,xx=la,Lx=Wf,Px=Ck,jx=Na,Ux=jx.set,Fx=jx.getterFor("URL"),zx=Px.URLSearchParams,Bx=Px.getState,Vx=bx.URL,Hx=bx.TypeError,Gx=bx.parseInt,Wx=Math.floor,Yx=Math.pow,qx=Tx("".charAt),Kx=Tx(/./.exec),Qx=Tx([].join),Jx=Tx(1..toString),Xx=Tx([].pop),Zx=Tx([].push),$x=Tx("".replace),eL=Tx([].shift),tL=Tx("".split),nL=Tx("".slice),rL=Tx("".toLowerCase),iL=Tx([].unshift),oL="Invalid scheme",sL="Invalid host",aL="Invalid port",cL=/[a-z]/i,lL=/[\d+-.a-z]/i,uL=/\d/,dL=/^0x/i,pL=/^[0-7]+$/,hL=/^\d+$/,fL=/^[\da-f]+$/i,mL=/[\0\t\n\r #%/:<>?@[\\\]^|]/,gL=/[\0\t\n\r #/:<>?@[\\\]^|]/,vL=/^[\u0000-\u0020]+/,yL=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,EL=/[\t\n\r]/g,_L=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)iL(t,e%256),e=Wx(e/256);return Qx(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=Jx(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},bL={},SL=Ox({},bL,{" ":1,'"':1,"<":1,">":1,"`":1}),TL=Ox({},SL,{"#":1,"?":1,"{":1,"}":1}),IL=Ox({},TL,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),NL=function(e,t){var n=Mx(e,0);return n>32&&n<127&&!Cx(t,e)?e:encodeURIComponent(e)},wL={ftp:21,file:null,http:80,https:443,ws:80,wss:443},CL=function(e,t){var n;return 2==e.length&&Kx(cL,qx(e,0))&&(":"==(n=qx(e,1))||!t&&"|"==n)},OL=function(e){var t;return e.length>1&&CL(nL(e,0,2))&&(2==e.length||"/"===(t=qx(e,2))||"\\"===t||"?"===t||"#"===t)},AL=function(e){return"."===e||"%2e"===rL(e)},RL={},ML={},DL={},kL={},xL={},LL={},PL={},jL={},UL={},FL={},zL={},BL={},VL={},HL={},GL={},WL={},YL={},qL={},KL={},QL={},JL={},XL=function(e,t,n){var r,i,o,s=kx(e);if(t){if(i=this.parse(s))throw Hx(i);this.searchParams=null}else{if(void 0!==n&&(r=new XL(n,!0)),i=this.parse(s,null,r))throw Hx(i);(o=Bx(new zx)).bindURL(this),this.searchParams=o}};XL.prototype={type:"URL",parse:function(e,t,n){var r,i,o,s,a,c=this,l=t||RL,u=0,d="",p=!1,h=!1,f=!1;for(e=kx(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=$x(e,vL,""),e=$x(e,yL,"$1")),e=$x(e,EL,""),r=Ax(e);u<=r.length;){switch(i=r[u],l){case RL:if(!i||!Kx(cL,i)){if(t)return oL;l=DL;continue}d+=rL(i),l=ML;break;case ML:if(i&&(Kx(lL,i)||"+"==i||"-"==i||"."==i))d+=rL(i);else{if(":"!=i){if(t)return oL;d="",l=DL,u=0;continue}if(t&&(c.isSpecial()!=Cx(wL,d)||"file"==d&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&wL[c.scheme]==c.port&&(c.port=null));d="","file"==c.scheme?l=HL:c.isSpecial()&&n&&n.scheme==c.scheme?l=kL:c.isSpecial()?l=jL:"/"==r[u+1]?(l=xL,u++):(c.cannotBeABaseURL=!0,Zx(c.path,""),l=KL)}break;case DL:if(!n||n.cannotBeABaseURL&&"#"!=i)return oL;if(n.cannotBeABaseURL&&"#"==i){c.scheme=n.scheme,c.path=Rx(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=JL;break}l="file"==n.scheme?HL:LL;continue;case kL:if("/"!=i||"/"!=r[u+1]){l=LL;continue}l=UL,u++;break;case xL:if("/"==i){l=FL;break}l=qL;continue;case LL:if(c.scheme=n.scheme,i==wk)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Rx(n.path),c.query=n.query;else if("/"==i||"\\"==i&&c.isSpecial())l=PL;else if("?"==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Rx(n.path),c.query="",l=QL;else{if("#"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Rx(n.path),c.path.length--,l=qL;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Rx(n.path),c.query=n.query,c.fragment="",l=JL}break;case PL:if(!c.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=qL;continue}l=FL}else l=UL;break;case jL:if(l=UL,"/"!=i||"/"!=qx(d,u+1))continue;u++;break;case UL:if("/"!=i&&"\\"!=i){l=FL;continue}break;case FL:if("@"==i){p&&(d="%40"+d),p=!0,o=Ax(d);for(var m=0;m<o.length;m++){var g=o[m];if(":"!=g||f){var v=NL(g,IL);f?c.password+=v:c.username+=v}else f=!0}d=""}else if(i==wk||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(p&&""==d)return"Invalid authority";u-=Ax(d).length+1,d="",l=zL}else d+=i;break;case zL:case BL:if(t&&"file"==c.scheme){l=WL;continue}if(":"!=i||h){if(i==wk||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(c.isSpecial()&&""==d)return sL;if(t&&""==d&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(d))return s;if(d="",l=YL,t)return;continue}"["==i?h=!0:"]"==i&&(h=!1),d+=i}else{if(""==d)return sL;if(s=c.parseHost(d))return s;if(d="",l=VL,t==BL)return}break;case VL:if(!Kx(uL,i)){if(i==wk||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()||t){if(""!=d){var y=Gx(d,10);if(y>65535)return aL;c.port=c.isSpecial()&&y===wL[c.scheme]?null:y,d=""}if(t)return;l=YL;continue}return aL}d+=i;break;case HL:if(c.scheme="file","/"==i||"\\"==i)l=GL;else{if(!n||"file"!=n.scheme){l=qL;continue}if(i==wk)c.host=n.host,c.path=Rx(n.path),c.query=n.query;else if("?"==i)c.host=n.host,c.path=Rx(n.path),c.query="",l=QL;else{if("#"!=i){OL(Qx(Rx(r,u),""))||(c.host=n.host,c.path=Rx(n.path),c.shortenPath()),l=qL;continue}c.host=n.host,c.path=Rx(n.path),c.query=n.query,c.fragment="",l=JL}}break;case GL:if("/"==i||"\\"==i){l=WL;break}n&&"file"==n.scheme&&!OL(Qx(Rx(r,u),""))&&(CL(n.path[0],!0)?Zx(c.path,n.path[0]):c.host=n.host),l=qL;continue;case WL:if(i==wk||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&CL(d))l=qL;else if(""==d){if(c.host="",t)return;l=YL}else{if(s=c.parseHost(d))return s;if("localhost"==c.host&&(c.host=""),t)return;d="",l=YL}continue}d+=i;break;case YL:if(c.isSpecial()){if(l=qL,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=wk&&(l=qL,"/"!=i))continue}else c.fragment="",l=JL;else c.query="",l=QL;break;case qL:if(i==wk||"/"==i||"\\"==i&&c.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(a=rL(a=d))||"%2e."===a||".%2e"===a||"%2e%2e"===a?(c.shortenPath(),"/"==i||"\\"==i&&c.isSpecial()||Zx(c.path,"")):AL(d)?"/"==i||"\\"==i&&c.isSpecial()||Zx(c.path,""):("file"==c.scheme&&!c.path.length&&CL(d)&&(c.host&&(c.host=""),d=qx(d,0)+":"),Zx(c.path,d)),d="","file"==c.scheme&&(i==wk||"?"==i||"#"==i))for(;c.path.length>1&&""===c.path[0];)eL(c.path);"?"==i?(c.query="",l=QL):"#"==i&&(c.fragment="",l=JL)}else d+=NL(i,TL);break;case KL:"?"==i?(c.query="",l=QL):"#"==i?(c.fragment="",l=JL):i!=wk&&(c.path[0]+=NL(i,bL));break;case QL:t||"#"!=i?i!=wk&&("'"==i&&c.isSpecial()?c.query+="%27":c.query+="#"==i?"%23":NL(i,bL)):(c.fragment="",l=JL);break;case JL:i!=wk&&(c.fragment+=NL(i,SL))}u++}},parseHost:function(e){var t,n,r;if("["==qx(e,0)){if("]"!=qx(e,e.length-1))return sL;if(t=function(e){var t,n,r,i,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,p=function(){return qx(e,d)};if(":"==p()){if(":"!=qx(e,1))return;d+=2,u=++l}for(;p();){if(8==l)return;if(":"!=p()){for(t=n=0;n<4&&Kx(fL,p());)t=16*t+Gx(p(),16),d++,n++;if("."==p()){if(0==n)return;if(d-=n,l>6)return;for(r=0;p();){if(i=null,r>0){if(!("."==p()&&r<4))return;d++}if(!Kx(uL,p()))return;for(;Kx(uL,p());){if(o=Gx(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}c[l]=256*c[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==p()){if(d++,!p())return}else if(p())return;c[l++]=t}else{if(null!==u)return;d++,u=++l}}if(null!==u)for(s=l-u,l=7;0!=l&&s>0;)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a;else if(8!=l)return;return c}(nL(e,1,-1)),!t)return sL;this.host=t}else if(this.isSpecial()){if(e=Dx(e),Kx(mL,e))return sL;if(t=function(e){var t,n,r,i,o,s,a,c=tL(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==qx(i,0)&&(o=Kx(dL,i)?16:8,i=nL(i,8==o?1:2)),""===i)s=0;else{if(!Kx(10==o?hL:8==o?pL:fL,i))return e;s=Gx(i,o)}Zx(n,s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=Yx(256,5-t))return null}else if(s>255)return null;for(a=Xx(n),r=0;r<n.length;r++)a+=n[r]*Yx(256,3-r);return a}(e),null===t)return sL;this.host=t}else{if(Kx(gL,e))return sL;for(t="",n=Ax(e),r=0;r<n.length;r++)t+=NL(n[r],bL);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return Cx(wL,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&CL(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=_L(i),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+Qx(s,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw Hx(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new ZL(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+_L(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(kx(e)+":",RL)},getUsername:function(){return this.username},setUsername:function(e){var t=Ax(kx(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=NL(t[n],IL)}},getPassword:function(){return this.password},setPassword:function(e){var t=Ax(kx(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=NL(t[n],IL)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?_L(e):_L(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,zL)},getHostname:function(){var e=this.host;return null===e?"":_L(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,BL)},getPort:function(){var e=this.port;return null===e?"":kx(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=kx(e))?this.port=null:this.parse(e,VL))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Qx(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,YL))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=kx(e))?this.query=null:("?"==qx(e,0)&&(e=nL(e,1)),this.query="",this.parse(e,QL)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=kx(e))?("#"==qx(e,0)&&(e=nL(e,1)),this.fragment="",this.parse(e,JL)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var ZL=function(e){var t=wx(this,$L),n=Lx(arguments.length,1)>1?arguments[1]:void 0,r=Ux(t,new XL(e,!1,n));Ex||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},$L=ZL.prototype,eP=function(e,t){return{get:function(){return Fx(this)[e]()},set:t&&function(e){return Fx(this)[t](e)},configurable:!0,enumerable:!0}};if(Ex&&(Nx($L,"href",eP("serialize","setHref")),Nx($L,"origin",eP("getOrigin")),Nx($L,"protocol",eP("getProtocol","setProtocol")),Nx($L,"username",eP("getUsername","setUsername")),Nx($L,"password",eP("getPassword","setPassword")),Nx($L,"host",eP("getHost","setHost")),Nx($L,"hostname",eP("getHostname","setHostname")),Nx($L,"port",eP("getPort","setPort")),Nx($L,"pathname",eP("getPathname","setPathname")),Nx($L,"search",eP("getSearch","setSearch")),Nx($L,"searchParams",eP("getSearchParams")),Nx($L,"hash",eP("getHash","setHash"))),Ix($L,"toJSON",(function(){return Fx(this).serialize()}),{enumerable:!0}),Ix($L,"toString",(function(){return Fx(this).serialize()}),{enumerable:!0}),Vx){var tP=Vx.createObjectURL,nP=Vx.revokeObjectURL;tP&&Ix(ZL,"createObjectURL",Sx(tP,Vx)),nP&&Ix(ZL,"revokeObjectURL",Sx(nP,Vx))}xx(ZL,"URL"),yx({global:!0,constructor:!0,forced:!_x,sham:!Ex},{URL:ZL});var rP=Rn,iP=i,oP=Wf,sP=fr,aP=uD,cP=ce("URL");rP({target:"URL",stat:!0,forced:!(aP&&iP((function(){cP.canParse()})))},{canParse:function(e){var t=oP(arguments.length,1),n=sP(e),r=t<2||void 0===arguments[1]?void 0:sP(arguments[1]);try{return!!new cP(n,r)}catch(e){return!1}}});var lP=r(re.URL);function uP(){const e=new Blob([atob("ZnVuY3Rpb24gZShlKXtjb25zdCB0PW5ldyBEYXRhVmlldyhlLmRhdGEpO2lmKDA9PT10LmdldFVpbnQ4KDApJiYwPT09dC5nZXRVaW50OCgxKSYmMD09PXQuZ2V0VWludDgoMikmJjE9PT10LmdldFVpbnQ4KDMpJiY2PT09dC5nZXRVaW50OCg0KSl7bGV0IG49NixyPTAsbz0wO2Zvcig7MjU1PT09KG89dC5nZXRVaW50OChuKyspKTspcis9MjU1O3IrPW87Y29uc3QgYT1mdW5jdGlvbihlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLG89W10sYT0wO2Zvcig7YTxuOylhKzM8biYmMD09PXJbYV0mJjA9PT1yW2ErMV0mJjM9PT1yW2ErMl0mJigwPT09clthKzNdfHwxPT09clthKzNdfHwyPT09clthKzNdfHwzPT09clthKzNdKT8oby5wdXNoKHJbYV0sclthKzFdLHJbYSszXSksYSs9NCk6KG8ucHVzaChyW2FdKSxhKyspO3JldHVybiBuZXcgVWludDhBcnJheShvKX0oZS5kYXRhLG4scik7cmV0dXJuIG5ldyBVaW50OEFycmF5KGEpfXJldHVybiBudWxsfWZ1bmN0aW9uIHQoZSx0KXtjb25zdCBuPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZS5sZW5ndGg7bGV0IG49W10scj0wO2Zvcig7cjx0OylyKzI8dCYmMD09PWVbcl0mJjA9PT1lW3IrMV0mJigwPT09ZVtyKzJdfHwxPT09ZVtyKzJdfHwyPT09ZVtyKzJdfHwzPT09ZVtyKzJdKT8obi5wdXNoKGVbcl0sZVtyKzFdLDMsZVtyKzJdKSxyKz0zKToobi5wdXNoKGVbcl0pLHIrKyk7cmV0dXJuIG5ldyBVaW50OEFycmF5KG4pfSh0KSxyPW4ubGVuZ3RoLG89TWF0aC5mbG9vcihyLzI1NSksYT1yJTI1NSxzPW5ldyBVaW50OEFycmF5KDYrbysxK3IrZS5ieXRlTGVuZ3RoKTtzWzBdPTAsc1sxXT0wLHNbMl09MCxzWzNdPTEsc1s0XT02LHNbNV09MTAxO2xldCBpPTA7Zm9yKDtpPG87KXNbNitpXT0yNTUsaSsrO3JldHVybiBzWzYraV09YSxpKysscy5zZXQobiw2K2kpLHMuc2V0KG5ldyBVaW50OEFycmF5KGUpLDYraStyKSxzLmJ1ZmZlcn1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlNhZmFyaSIpPi0xJiYtMT09PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiQ2hyb21lIikmJihzZWxmLm9ucnRjdHJhbnNmb3JtPW49Pntjb25zdCByPW4udHJhbnNmb3JtZXI7bGV0IG89W107ci5vcHRpb25zLnBvcnQub25tZXNzYWdlPWU9PntlLmRhdGEuc2VpJiZvLnB1c2goZS5kYXRhLnNlaSl9LHNlbGYucG9zdE1lc3NhZ2UoInN0YXJ0ZWQiKTtjb25zdCBhPXIucmVhZGFibGUuZ2V0UmVhZGVyKCkscz1yLndyaXRhYmxlLmdldFdyaXRlcigpOyJyeCI9PT1yLm9wdGlvbnMubmFtZT9mdW5jdGlvbiB0KG4pe2EucmVhZCgpLnRoZW4oKHI9PntpZighci5kb25lKXtpZihyLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpe2NvbnN0IHQ9ZShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7YS5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1vLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout((()=>lP.revokeObjectURL(e)),0),new Worker(lP.createObjectURL(e))}const dP=new Map,pP=new Map;async function hP(e){if(!Tw().supportWebRTCEncodedTransform)return void BS.warning("browser not support audio encoded transform");if(pP.has(e))return;const t={track:e.track};if(wy()){if(!e.createEncodedStreams)return void BS.warning("browser not support createEncodedStreams() API");let r=null;try{r=e.createEncodedStreams()}catch(e){return void BS.error("create audio-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(r,i){t.controller||(t.controller=i),e.track&&e.track.id!==t.track.id&&(BS.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n)),i.enqueue(r)}});r.readable.pipeThrough(i).pipeTo(r.writable)}else if(Cy()){if("undefined"==typeof RTCRtpScriptTransform)return void BS.warning("browser not support RTCRtpScriptTransform");const r=uP(),i=new MessageChannel;await new cy((e=>r.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(r,{name:"rx",port:i.port2},[i.port2]);e.transform=o,await new cy((e=>r.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=r=>{var i;r.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==t.track.id&&(BS.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n))},t.worker=r}function n(){e.track.removeEventListener("ended",n),function(e){const t=pP.get(e);if(t){pP.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){BS.warning(e&&e.message)}}}(e)}pP.set(e,t),e.track.addEventListener("ended",n)}function fP(e){const t=new DataView(e.data);if(0===t.getUint8(0)&&0===t.getUint8(1)&&0===t.getUint8(2)&&1===t.getUint8(3)&&6===t.getUint8(4)){let n=6,r=0,i=0;for(;255===(i=t.getUint8(n++));)r+=255;r+=i;const o=function(e,t,n){let r=new Uint8Array(e,t,n),i=[],o=0;for(;o<n;)o+3<n&&0===r[o]&&0===r[o+1]&&3===r[o+2]&&(0===r[o+3]||1===r[o+3]||2===r[o+3]||3===r[o+3])?(i.push(r[o],r[o+1],r[o+3]),o+=4):(i.push(r[o]),o++);return new Uint8Array(i)}(e.data,n,r);return new Uint8Array(o)}return null}function mP(e,t){const n=function(e){const t=e.length;let n=[],r=0;for(;r<t;)r+2<t&&0===e[r]&&0===e[r+1]&&(0===e[r+2]||1===e[r+2]||2===e[r+2]||3===e[r+2])?(n.push(e[r],e[r+1],3,e[r+2]),r+=3):(n.push(e[r]),r++);return new Uint8Array(n)}(t),r=n.length,i=Math.floor(r/255),o=r%255,s=new Uint8Array(6+i+1+r+e.byteLength);s[0]=0,s[1]=0,s[2]=0,s[3]=1,s[4]=6,s[5]=101;let a=0;for(;a<i;)s[6+a]=255,a++;return s[6+a]=o,a++,s.set(n,6+a),s.set(new Uint8Array(e),6+a+r),s.buffer}const gP=new Map,vP=new Map;async function yP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Tw().supportWebRTCEncodedTransform)return void BS.warning("browser not support video encoded transform");if(!e.track)return;if(vP.has(e)){const n=vP.get(e);return void(n&&(n.onSei=t.onSei))}const n={track:e.track,onSei:t.onSei};if(wy()){if(!e.createEncodedStreams)return void BS.warning("browser not support createEncodedStreams() API");let t=null;try{t=e.createEncodedStreams()}catch(e){return void BS.error("create video-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(t,i){n.controller||(n.controller=i),e.track&&e.track.id!==n.track.id&&(BS.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const o=fP(t);o&&n.onSei&&n.onSei(o),i.enqueue(t)}});t.readable.pipeThrough(i).pipeTo(t.writable)}else if(Cy()){if("undefined"==typeof RTCRtpScriptTransform)return void BS.warning("browser not support RTCRtpScriptTransform");const t=uP(),i=new MessageChannel;await new cy((e=>t.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(t,{name:"rx",port:i.port2},[i.port2]);e.transform=o,await new cy((e=>t.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id?(BS.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r)):t.data.sei&&n.onSei&&n.onSei(t.data.sei)},n.worker=t}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}!function(e){const t=vP.get(e);if(t){vP.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){BS.warning(e&&e.message)}}}(e)}vP.set(e,n),e.track.addEventListener("ended",r)}!function(){const e=_y();Sw.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),Sw.getStreamFromExtension=e.name===my.CHROME&&Number(e.version)>34,Sw.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),Sw.supportMinBitrate=e.name===my.CHROME||e.name===my.EDGE,Sw.supportSetRtpSenderParameters=function(){const e=_y();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!By()||!(!Cy()&&!Ty())||e.name===my.FIREFOX&&Number(e.version)>=64)}(),e.name===my.SAFARI&&(Number(e.version)>=14?Sw.supportDualStream=!0:Sw.supportDualStream=!1),Sw.webAudioMediaStreamDest=function(){const e=_y();return!(e.name===my.SAFARI&&Number(e.version)<12)}(),Sw.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,Sw.supportWebGL="undefined"!=typeof WebGLRenderingContext,Sw.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,By()||(Sw.webAudioWithAEC=!0),Sw.supportShareAudio=function(){const e=_y();return(e.os===fy.WIN_10||e.os===fy.WIN_81||e.os===fy.WIN_7||e.os===fy.LINUX||e.os===fy.MAC_OS||e.os===fy.CHROMIUM_OS)&&e.name===my.CHROME&&Number(e.version)>=74}(),Sw.supportDataChannel=!!(Ry(76)||function(e){const t=_y();return!(t.name!==my.FIREFOX||!t.osVersion)&&Number(t.version)>=e}(68)||function(e){const t=_y();return!(t.name!==my.SAFARI||!t.osVersion)&&Number(t.version)>=e}(14)),Sw.supportPCSetConfiguration=function(){const e=window.RTCPeerConnection;return!Oy()&&!!e&&e.prototype.setConfiguration instanceof Function}(),Sw.supportWebRTCEncodedTransform=function(){const e=_y();return"Chrome"===e.name&&Number(e.version)>=86||"Safari"===e.name&&Number(e.version)>=15}(),Sw.supportWebRTCInsertableStream=function(){const e=_y();return(e.name===my.CHROME||e.name===my.EDGE)&&Number(e.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),WE((()=>{Sw.supportDualStreamEncoding=function(){const e=_y();return!!bS("DISABLE_WEBAUDIO")||"Safari"===e.name&&Number(e.version)>=14||!!("Chrome"===e.name&&/Windows/i.test(e.os||"")&&Number(e.version)>=100&&bS("CHROME_DUAL_STREAM_USE_ENCODING"))}(),BS.info("browser compatibility",JSON.stringify(Sw),JSON.stringify(e))}))}();class EP extends lE{constructor(){super(...arguments),op(this,"resultStorage",new Map)}setLocalAudioStats(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}setLocalVideoStats(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}setRemoteAudioStats(e,t){const n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))}record(e,t,n){if(bS("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const r=this.resultStorage.get(e);if(r&&(r.result.push(n),r.result.length>=5)){var i;const n=Or(i=r.result).call(i,!0);r.isPrevNormal&&!n&&this.emit("exception",_P[e],e,t),!r.isPrevNormal&&n&&this.emit("exception",_P[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=n,r.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof rO&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=_N(t._encoderConfig.frameRate));const r=e.captureFrameRate;return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof rO&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const _P={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},bP=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}measureFromPublishStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}};function SP(e,t){this.v=e,this.k=t}function TP(e){return new SP(e,0)}var IP=ay,NP=pg;Rn({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var e=NP.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var wP=pg,CP=qm;Rn({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=wP.f(this),n=CP(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var OP=r(IP),AP=zs.f("asyncIterator"),RP=r(AP);function MP(e){var t,n;function r(t,n){try{var o=e[t](n),s=o.value,a=s instanceof SP;OP.resolve(a?s.v:s).then((function(n){if(a){var c="return"===t?"return":"next";if(!s.k||n.done)return r(c,n);n=e[c](n).value}i(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new OP((function(o,s){var a={key:e,arg:i,resolve:o,reject:s,next:null};n?n=n.next=a:(t=n=a,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function DP(e){return function(){return new MP(e.apply(this,arguments))}}MP.prototype["function"==typeof jd&&RP||"@@asyncIterator"]=function(){return this},MP.prototype.next=function(e){return this._invoke("next",e)},MP.prototype.throw=function(e){return this._invoke("throw",e)},MP.prototype.return=function(e){return this._invoke("return",e)};var kP=r(re.Object.getOwnPropertySymbols),xP=Rn,LP=qn.indexOf,PP=Tp,jP=N([].indexOf),UP=!!jP&&1/jP([1],1,-0)<0;xP({target:"Array",proto:!0,forced:UP||!PP("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return UP?jP(this,e,t)||0:LP(this,e,t)}});var FP=Jn("Array").indexOf,zP=d,BP=FP,VP=Array.prototype,HP=r((function(e){var t=e.indexOf;return e===VP||zP(VP,e)&&t===VP.indexOf?BP:t})),GP=Je,WP=Ko;Rn({target:"Object",stat:!0,forced:i((function(){WP(1)}))},{keys:function(e){return WP(GP(e))}});var YP=r(re.Object.keys);function qP(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=YP(e);for(r=0;r<o.length;r++)n=o[r],HP(t).call(t,n)>=0||(i[n]=e[n]);return i}(e,t);if(kP){var o=kP(e);for(r=0;r<o.length;r++)n=o[r],HP(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var KP={exports:{}};!function(e,t){e.exports=(()=>{var e={8:(e,t,n)=>{n.r(t),n.d(t,{Parser:()=>S,Printer:()=>C,parse:()=>M,print:()=>D});const r="\n",i="".concat("\r").concat(r),o=" ";let s;function a(e){return e>="0"&&e<="9"}function c(e){return e>="!"&&e<="~"}function l(e){return c(e)||e>="\x80"&&e<="\xff"}function u(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function d(e){return e>="1"&&e<="9"}function p(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function h(e){return"d"===e||"h"===e||"m"===e||"s"===e}function f(e){return e>"\x01"&&e<"\t"||e>"\v"&&e<"\f"||e>"\x0e"&&e<"\xff"}function m(e){return p(e)||a(e)||"+"===e||"/"===e}function g(e){return a(e)||p(e)||"+"===e||"/"===e||"-"===e||"_"===e}function v(e){return p(e)||a(e)||"+"===e||"/"===e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(s||(s={}));class b{consumeText(e,t){let n=t;for(;n<e.length;){const t=e[n];if("\0"===t||"\r"===t||t===r)break;n+=1}if(n-t==0)throw new Error("Invalid text, at ".concat(e));return n}consumeUnicastAddress(e,t,n){return this.consumeTill(e,t,o)}consumeOneOrMore(e,t,n){let r=t;for(;n(e[r]);)r++;if(r-t==0)throw new Error("Invalid rule at ".concat(t,"."));return r}consumeSpace(e,t){if(e[t]===o)return t+1;throw new Error("Invalid space at ".concat(t,"."))}consumeIP4Address(e,t){let n=t;for(let r=0;r<4;r++)if(n=this.consumeDecimalUChar(e,n),3!==r){if("."!==e[n])throw new Error("Invalid IP4 address.");n++}return n}consumeDecimalUChar(e,t){let n=t;for(let i=0;i<3&&a(e[n]);i++,n++);if(n-t==0)throw new Error("Invalid decimal uchar.");const r=parseInt(e.slice(t,n));if(r>=0&&r<=255)return n;throw new Error("Invalid decimal uchar")}consumeIP6Address(e,t){let n=this.consumeHexpart(e,t);return":"===e[n]?(n+=1,n=this.consumeIP4Address(e,n),n):n}consumeHexpart(e,t){let n=t;if(":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}if(n=this.consumeHexseq(e,n),":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}return n}consumeHexseq(e,t){let n=t;for(;n=this.consumeHex4(e,n),":"===e[n]&&":"!==e[n+1];)n+=1;return n}consumeHex4(e,t){let n=0;for(;n<4;n++)if(!((r=e[t+n])>="0"&&r<="9"||r>="a"&&r<="f"||r>="A"&&r<="F")){if(0===n)throw new Error("Invalid hex 4");break}var r;return t+n}consumeFQDN(e,t){let n=t;for(;a(e[n])||p(e[n])||"-"===e[n]||"."===e[n];)n+=1;if(n-t<4)throw new Error("Invalid FQDN");return n}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,l)}consumeMulticastAddress(e,t,n){switch(n){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(n){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const n=this.consumeHexpart(e,t);return"/"===e[n]?this.consumeInteger(e,n+1):n}consumeIP4MulticastAddress(e,t){let n=t+3;const r=e.slice(t,n),i=parseInt(r);if(i<224||i>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let o=0;o<3;o++){if("."!==e[n])throw new Error("Invalid IP4 multicast address.");n+=1,n=this.consumeDecimalUChar(e,n)}return"/"===e[n]&&(n+=1),n=this.consumeTTL(e,n),"/"===e[n]&&(n=this.consumeInteger(e,n)),n}consumeInteger(e,t){if(!d(e[t]))throw new Error("Invalid integer.");for(t+=1;a(e[t]);)t+=1;return t}consumeTTL(e,t){if("0"===e[t])return t+1;if(!d(e[t]))throw new Error("Invalid TTL.");t+=1;for(let n=0;n<2&&a(e[t]);n++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,u)}consumeTime(e,t){let n=t;if("0"===e[n])return n+1;for(d(e[n])&&(n+=1);a(e[n]);)n++;if(n-t<10)throw new Error("Invalid time");return n}consumeAddress(e,t){return this.consumeTill(e,t,o)}consumeTypedTime(e,t){let n=t;return n=this.consumeOneOrMore(e,n,a),h(e[n])?n+1:n}consumeRepeatInterval(e,t){if(!d(e[t]))throw new Error("Invalid repeat interval");for(t+=1;a(e[t]);)t+=1;return h(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,a)}consume(e,t,n){for(let r=0;r<n.length;r++){if(t+r>=e.length)throw new Error("consume exceeding value length");if(e[t+r]!==n[r])throw new Error("consume ".concat(n," failed at ").concat(r))}return t+n.length}consumeTill(e,t,n){let r=t;for(;r<e.length&&("string"!=typeof n||e[r]!==n)&&("function"!=typeof n||!n(e[r]));)r++;return r}}class S extends b{constructor(){super(),_(this,"records",[]),_(this,"currentLine",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter((e=>!!e.trim())).map(this.parseLine),this.currentLine=0;const n=this.parseVersion(),r=this.parseOrigin(),i=this.parseSessionName(),o=this.parseInformation(),s=this.parseUri(),a=this.parseEmail(),c=this.parsePhone(),l=this.parseConnection(),u=this.parseBandWidth(),d=this.parseTimeFields(),p=this.parseKey(),h=this.parseSessionAttribute(),f=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:n,origin:r,sessionName:i,information:o,uri:s,emails:a,phones:c,connection:l,bandwidths:u,timeFields:d,key:p,attributes:h,mediaDescriptions:f}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===r)return"\r"===e[t-1]?i:r;throw new Error("Invalid newline character.")}parseLine(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const n=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:n,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new I;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(t,(e=>u(e)&&":"!==e)),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,n.attValue=this.extractOneOrMore(t,f)),e.parse(n),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new N(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==s.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(e,(e=>u(e)&&":"!==e)),_cur:0};":"===e.value[e.cur]&&(e.cur+=1,n.attValue=this.extractOneOrMore(e,f)),t.parse(n),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===s.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const e=this.getCurrentRecord();if(e.type===s.ZONE_ADJUSTMENTS){const t=[];for(;;)try{const n=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let r=!1;"-"===e.value[e.cur]&&(r=!0,e.cur+=1);const i=this.extract(e,this.consumeTypedTime);t.push({time:n,typedTime:i,back:r})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.REPEAT)break;{const n=this.extract(t,this.consumeRepeatInterval),r=this.parseTypedTime(t);e.push({repeatInterval:n,typedTimes:r}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:n}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.BANDWIDTH)break;{const n=this.extractOneOrMore(t,u);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;const r=this.extractOneOrMore(t,a);e.push({bwtype:n,bandwidth:r}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==s.VERSION)throw new Error("first sdp record must be version");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,a));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==s.ORIGIN)throw new Error("second line of sdp must be origin");const t=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const o=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:n,sessVersion:r,nettype:i,addrtype:o,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===s.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==s.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===s.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===s.CONNECTION){const t=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const r=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:n,address:r}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let n=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,n+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const r=[];for(r.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,r.push(this.extract(e,this.consumeToken));if(0===r.length)throw new Error("Invalid proto");const i=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:n,protos:r,fmts:i}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===s.TIME;){const t=this.parseTime(),n=this.parseRepeat(),r=this.parseZone();e.push({time:t,repeats:n,zones:r})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.MEDIA;){const t=this.parseMedia(),n=this.parseInformation(),r=this.parseConnections(),i=this.parseBandWidth(),o=this.parseKey(),s=this.parseMediaAttributes(t);e.push({media:t,information:n,connections:r,bandwidths:i,key:o,attributes:s})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t}extract(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=t.call(this,e.value,e.cur,...r),s=e.value.slice(e.cur,o);return e.cur=o,s}extractOneOrMore(e,t){const n=this.consumeOneOrMore(e.value,e.cur,t),r=e.value.slice(e.cur,n);return e.cur=n,r}consumeSpaceForRecord(e){if(e.value[e.cur]!==o)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}class T extends b{constructor(){super(...arguments),_(this,"attributes",void 0),_(this,"digested",!1)}extractOneOrMore(e,t,n){const r=this.consumeOneOrMore(e.attValue,e._cur,t),i=e.attValue.slice(e._cur,r),[o,s]=n||[];if("number"==typeof o&&i.length<o)throw new Error("error in length, should be more or equal than ".concat(o," characters."));if("number"==typeof s&&i.length>s)throw new Error("error in length, should be less or equal than ".concat(s," characters."));return e._cur=r,i}consumeAttributeSpace(e){if(e.attValue[e._cur]!==o)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}extract(e,t){if(!e.attValue)throw new Error("Nothing to extract from attValue.");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=t.call(this,e.attValue,e._cur,...r),s=e.attValue.slice(e._cur,o);return e._cur=o,s}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let n=0;n<t.length;n++)if(t[n]!==e.attValue[e._cur+n])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,m,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,m,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,m));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:n})}parseExtmap(e){const t=this.extractOneOrMore(e,a);let n;"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),n=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeTill,o),i=E(E({entry:parseInt(t,10)},n&&{direction:n}),{},{extensionName:r});this.peekChar(e)===o&&(this.consumeAttributeSpace(e),i.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(i)}parseSetup(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}class I extends T{constructor(){super(...arguments),_(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;)this.consumeAttributeSpace(e),n.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:n})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,g)}parseIdentity(e){const t=this.extractOneOrMore(e,v),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");const r=this.extractOneOrMore(e,(e=>e!==o&&f(e)));n.push({name:t,value:r})}this.attributes.identities.push({assertionValue:t,extensions:n})}parseMsidSemantic(e){this.peekChar(e)===o&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}{const n=this.extract(e,this.consumeTill,o);t.identifierList.push(n)}}this.attributes.msidSemantic=t}}class N extends T{constructor(e){super(),_(this,"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}parseCandidate(e){const t=this.extractOneOrMore(e,m,[1,32]);this.consumeAttributeSpace(e);const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extractOneOrMore(e,a,[1,10]);this.consumeAttributeSpace(e);const s=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const l=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);const u={foundation:t,componentId:n,transport:r,priority:i,connectionAddress:s,port:l,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),u.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),u.relPort=this.extract(e,this.consumePort));this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),u.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(u)}parseRemoteCandidate(e){const t=[];for(;;){const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumePort);t.push({componentId:n,connectionAddress:r,port:i});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");const r={encodingName:n,clockRate:this.extractOneOrMore(e,a)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),r.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const i=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));i?i.rtpMap=r:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:r,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,a);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,":");let r;":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),r=this.extract(e,this.consumeTill));const i=this.attributes.ssrcs.find((e=>e.ssrcId===parseInt(t,10)));i?i.attributes[n]=r:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[n]:r}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,o);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill),r={};n.split(";").forEach((e=>{let[t,n]=e.split("=");t=t.trim();const i="string"==typeof n?n.trim():null;"string"==typeof t&&t.length>0&&(r[t]=i)}));const i=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));i?i.fmtp={parameters:r}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:r}})}parseFmtParameters(e){const t={},n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");for(t[n]=r;";"===e.attValue[e._cur];){const n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");t[n]=r}return t}parseRtcpFb(e){let t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,o),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,o);let r;if("trr-int"===n)r={type:n,interval:this.extract(e,this.consumeTill)};else{const t={type:n};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===o&&(t.additional=this.extract(e,this.consumeTill))),r=t}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(r);else{const e=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));e?e.rtcpFeedbacks.push(r):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[r]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,u),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,u),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,u,[1,64])};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,u,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,(e=>p(e)||a(e)||"_"===e||"-"===e));this.consumeAttributeSpace(e);const n={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===o){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");const t=[];for(;;){const n=this.extract(e,this.consumeToken);t.push(n);try{this.extract(e,this.consume,",")}catch(e){break}}n.payloads=t,this.peekChar(e)===o&&this.extract(e,this.consume,o)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case"depend":{const r={type:t,rids:this.extract(e,this.consume,"=").split(",")};n.params.push(r);break}default:{const r={type:t};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),r.val=this.extract(e,this.consumeTill,";")),n.params.push(r)}}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(n)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,a,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,a,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);n.push(parseInt(t,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:n})}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class C{constructor(){w(this,"eol",i)}print(e,t){let n="";return t&&(this.eol=t),n+=this.printVersion(e.version),n+=this.printOrigin(e.origin),n+=this.printSessionName(e.sessionName),n+=this.printInformation(e.information),n+=this.printUri(e.uri),n+=this.printEmail(e.emails),n+=this.printPhone(e.phones),n+=this.printConnection(e.connection),n+=this.printBandwidth(e.bandwidths),n+=this.printTimeFields(e.timeFields),n+=this.printKey(e.key),n+=this.printSessionAttributes(e.attributes),n+=this.printMediaDescription(e.mediaDescriptions),n}printVersion(e){return"v=".concat(e).concat(this.eol)}printOrigin(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?"s=".concat(e).concat(this.eol):""}printInformation(e){return e?"i=".concat(e).concat(this.eol):""}printUri(e){return e?"u=".concat(e).concat(this.eol):""}printEmail(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printPhone(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printConnection(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}printBandwidth(e){let t="";for(const n of e)t+="b=".concat(n.bwtype,":").concat(n.bandwidth).concat(this.eol);return t}printTimeFields(e){let t="";for(const n of e){t+="t=".concat(n.time.startTime," ").concat(n.time.startTime).concat(this.eol);for(const e of n.repeats)t+="r=".concat(e.repeatInterval," ").concat(e.typedTimes.join(" ")).concat(this.eol);n.zoneAdjustments&&(t+="z=",t+="z=".concat(n.zoneAdjustments.map((e=>"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime))).join(" ")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?"k=".concat(e).concat(this.eol):""}printAttributes(e){let t="";for(const n of e)t+="a=".concat(n.attField).concat(n.attValue?":".concat(n.attValue):"").concat(this.eol);return t}printMediaDescription(e){let t="";for(const n of e)t+=this.printMedia(n.media),t+=this.printInformation(n.information),t+=this.printConnections(n.connections),t+=this.printBandwidth(n.bandwidths),t+=this.printKey(n.key),t+=this.printMediaAttributes(n);return t}printConnections(e){let t="";for(const n of e)t+=this.printConnection(n);return t}printMedia(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}printSessionAttributes(e){return new A(this.eol).print(e)}printMediaAttributes(e){return new R(this.eol).print(e)}}class O{constructor(e){w(this,"eol",void 0),this.eol=e}printIceUfrag(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?"":"a=ice-options:".concat(e.join(o)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map((e=>"a=fingerprint:".concat(e.hashFunction).concat(o).concat(e.fingerprint))).join(this.eol)+this.eol:""}printExtmap(e){return e.map((e=>"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(o).concat(e.extensionName).concat(e.extensionAttributes?"".concat(o).concat(e.extensionAttributes):"").concat(this.eol))).join("")}printSetup(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}printUnrecognized(e){return e.map((e=>"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(this.eol))).join("")}}class A extends O{print(e){let t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t="";return e.length>0&&(t+=e.map((e=>"a=group:".concat(e.semantic).concat(e.identificationTag.map((e=>"".concat(o).concat(e))).join("")).concat(this.eol))).join("")),t}printIceLite(e){return void 0===e?"":"a=ice-lite"+this.eol}printTlsId(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}printIdentity(e){return 0===e.length?"":e.map((e=>"a=identity:".concat(e.assertionValue).concat(e.extensions.map((e=>"".concat(o).concat(e.name).concat(e.value?"=".concat(e.value):"")))))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return"";let t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(o,"*"):e.identifierList.length>0&&(t+=e.identifierList.map((e=>"".concat(o).concat(e)))),t+this.eol}}class R extends O{print(e){const t=e.attributes;let n="";return n+=this.printRTCP(t.rtcp),n+=this.printIceUfrag(t.iceUfrag),n+=this.printIcePwd(t.icePwd),n+=this.printIceOptions(t.iceOptions),n+=this.printCandidates(t.candidates),n+=this.printRemoteCandidatesList(t.remoteCandidatesList),n+=this.printEndOfCandidates(t.endOfCandidates),n+=this.printFingerprints(t.fingerprints),n+=this.printSetup(t.setup),n+=this.printMid(t.mid),n+=this.printExtmap(t.extmaps),n+=this.printRTPRelated(t),n+=this.printPtime(t.ptime),n+=this.printMaxPtime(t.maxPtime),n+=this.printDirection(t.direction),n+=this.printSSRCGroups(t.ssrcGroups),n+=this.printSSRC(t.ssrcs),n+=this.printRTCPMux(t.rtcpMux),n+=this.printRTCPMuxOnly(t.rtcpMuxOnly),n+=this.printRTCPRsize(t.rtcpRsize),n+=this.printMSId(t.msids),n+=this.printImageattr(t.imageattr),n+=this.printRid(t.rids),n+=this.printSimulcast(t.simulcast),n+=this.printSCTPPort(t.sctpPort),n+=this.printMaxMessageSize(t.maxMessageSize),n+=this.printUnrecognized(t.unrecognized),n}printCandidates(e){return e.map((e=>"a=candidate:".concat(e.foundation).concat(o).concat(e.componentId).concat(o).concat(e.transport).concat(o).concat(e.priority).concat(o).concat(e.connectionAddress).concat(o).concat(e.port).concat(o,"typ").concat(o).concat(e.type).concat(e.relAddr?"".concat(o,"raddr").concat(o).concat(e.relAddr):"").concat(e.relPort?"".concat(o,"rport").concat(o).concat(e.relPort):"").concat(Object.keys(e.extension).map((t=>"".concat(o).concat(t).concat(o).concat(e.extension[t]))).join("")).concat(this.eol))).join("")}printRemoteCandidatesList(e){return e.map((e=>"a=remote-candidates:".concat(e.join(o)).concat(this.eol))).join("")}printEndOfCandidates(e){return void 0===e?"":"a=end-of-candidates"+this.eol}printRTPRelated(e){if(!e.payloads)return"";const t=e.payloads;let n="";n+=e.rtcpFeedbackWildcards.map((e=>this.printRTCPFeedback("*",e))).join("");for(const r of t)n+=this.printRtpMap(r.payloadType,r.rtpMap),n+=this.printFmtp(r.payloadType,r.fmtp),n+=r.rtcpFeedbacks.map((e=>this.printRTCPFeedback(r.payloadType,e))).join("");return n}printFmtp(e,t){if(!t)return"";const n=Object.keys(t.parameters);return 1===n.length&&null===t.parameters[n[0]]?"a=fmtp:".concat(e).concat(o).concat(n[0]).concat(this.eol):"a=fmtp:".concat(e).concat(o).concat(Object.keys(t.parameters).map((e=>"".concat(e,"=").concat(t.parameters[e]))).join(";")).concat(this.eol)}printRtpMap(e,t){return t?"a=rtpmap:".concat(e).concat(o).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(e,t){let n="a=rtcp-fb:".concat(e).concat(o),r=t;return"trr-int"===r.type?n+="ttr-int".concat(o).concat(r.interval):(n+="".concat(r.type),r.parameter&&(n+="".concat(o).concat(r.parameter),r.additional&&(n+="".concat(o).concat(r.additional)))),n+this.eol}printPtime(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}printDirection(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}printSSRC(e){return e.map((e=>Object.keys(e.attributes).map((t=>"a=ssrc:".concat(e.ssrcId.toString(10)).concat(o).concat(t).concat(e.attributes[t]?":".concat(e.attributes[t]):"").concat(this.eol))).join(""))).join("")}printRTCPMux(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(e){if(void 0===e)return"";let t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(o).concat(e.netType)),e.addressType&&(t+="".concat(o).concat(e.addressType)),e.address&&(t+="".concat(o).concat(e.address)),t+this.eol}printMSId(e){return e.map((e=>"a=msid:".concat(e.id).concat(e.appdata?"".concat(o).concat(e.appdata):"").concat(this.eol))).join("")}printImageattr(e){return e.map((e=>"a=imageattr:".concat(e).concat(this.eol))).join("")}printRid(e){return e.map((e=>{let t="a=rid:".concat(e.id).concat(o).concat(e.direction);return e.payloads&&(t+="".concat(o,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(t+="".concat(o).concat(e.params.map((e=>"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val))).join(";"))),t+this.eol})).join("")}printSimulcast(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}printSCTPPort(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?"":"a=max-message-size:".concat(e).concat(this.eol)}printMid(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map((e=>"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map((e=>"".concat(o).concat(e.toString(10)))).join("")).concat(this.eol))).join("")}}function M(e){return(new S).parse(e)}function D(e,t){return(new C).print(e,t)}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8)})()}(KP);var QP=KP.exports;function JP(e){if(Array.isArray(e))return e.map((e=>e));if(!XP(e))return e;const t={};for(const n in e){const r=e[n];XP(r)||Array.isArray(r)?t[n]=JP(r):t[n]=r}return t}function XP(e){return!("object"!=typeof e||Array.isArray(e)||!e)}class ZP{constructor(e){op(this,"input",[]),op(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const $P={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},ej={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:$P,remoteCandidate:$P}},tj={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},nj={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},rj={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},ij={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function oj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oj(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class aj{constructor(e,t){op(this,"onFirstVideoReceived",void 0),op(this,"onFirstVideoDecoded",void 0),op(this,"onFirstAudioReceived",void 0),op(this,"onFirstVideoDecodedTimeout",void 0),op(this,"onFirstAudioDecoded",void 0),op(this,"onSelectedLocalCandidateChanged",void 0),op(this,"onSelectedRemoteCandidateChanged",void 0),op(this,"videoIsReady",!1),op(this,"videoIsReady2",{}),op(this,"pc",void 0),op(this,"options",void 0),op(this,"intervalTimer",void 0),op(this,"stats",JP(ej)),op(this,"isFirstVideoReceived",{}),op(this,"isFirstVideoDecoded",{}),op(this,"isFirstAudioReceived",{}),op(this,"isFirstAudioDecoded",{}),op(this,"isFirstVideoDecodedTimeout",{}),op(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval((async()=>{this.updateStats()}),this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new cy((e=>{e({local:sj({},$P),remote:sj({},$P)})}))}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const t=this.lossRateWindowStats.length,n=["videoSend","audioSend","videoRecv","audioRecv"];let r=0,i=0,o=0,s=0;for(const a of n)e[a].forEach(((e,n)=>{if(!this.lossRateWindowStats[t-1][a][n]||!this.lossRateWindowStats[0][a][n])return;const c=this.lossRateWindowStats[t-1][a][n].packets-this.lossRateWindowStats[0][a][n].packets,l=this.lossRateWindowStats[t-1][a][n].packetsLost-this.lossRateWindowStats[0][a][n].packetsLost;"videoSend"===a||"audioSend"===a?(r+=c,o+=l):(i+=c,s+=l),Number.isNaN(c)||Number.isNaN(c)?e.packetLostRate=0:e.packetLostRate=c<=0||l<=0?0:l/(c+l)}));e.sendPacketLossRate=r<=0||o<=0?0:o/(r+o),e.recvPacketLossRate=i<=0||s<=0?0:s/(i+s)}}function cj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cj(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class uj extends aj{constructor(){super(...arguments),op(this,"_stats",ej),op(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=JP(ej);const n=t.filter((e=>"ssrc"===e.type));this.processSSRCStats(n);const r=t.find((e=>"VideoBwe"===e.type));r&&this.processBandwidthStats(r),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach((e=>{var t;const n=Or(t=e.id).call(t,"send");switch("".concat(e.mediaType,"_").concat(n?"send":"recv")){case"video_send":{const t=JP(nj);t.codec=e.googCodecName,t.adaptionChangeReason="none",e.googCpuLimitedResolution&&(t.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(t.adaptionChangeReason="bandwidth"),t.avgEncodeMs=Number(e.googAvgEncodeMs),t.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.firsCount=Number(e.googFirReceived),t.nacksCount=Number(e.googNacksReceived),t.plisCount=Number(e.googPlisReceived),t.frameCount=Number(e.framesEncoded),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.videoSend.push(t),this._stats.rtt=t.rttMs;break}case"video_recv":{const t=JP(tj),n=this.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(t.codec=e.googCodecName,t.targetDelayMs=Number(e.googTargetDelayMs),t.renderDelayMs=Number(e.googRenderDelayMs),t.currentDelayMs=Number(e.googCurrentDelayMs),t.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),t.decodeMs=Number(e.googDecodeMs),t.maxDecodeMs=Number(e.googMaxDecodeMs),t.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},t.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},t.decodeFrameRate=Number(e.googFrameRateDecoded),t.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},t.jitterBufferMs=Number(e.googJitterBufferMs),t.firsCount=Number(e.googFirsSent),t.nacksCount=Number(e.googNacksSent),t.plisCount=Number(e.googPlisSent),t.framesDecodeCount=Number(e.framesDecoded),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,t.decodedFrame.width,t.decodedFrame.height),this.isFirstVideoDecoded[t.ssrc]=!0),n){const r=n.stats,i=Date.now()-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=i,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc,10))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<n.stats.framesDecodeCount&&(t.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:lj({},t),lts:Date.now()}),this._stats.videoRecv.push(t);break}case"audio_recv":{const t=JP(ij);t.codec=e.googCodecName,t.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,t.decodingCNG=Number(e.googDecodingCNG),t.decodingCTN=Number(e.googDecodingCTN),t.decodingCTSG=Number(e.googDecodingCTSG),t.decodingNormal=Number(e.googDecodingNormal),t.decodingPLC=Number(e.googDecodingPLC),t.decodingPLCCNG=Number(e.googDecodingPLCCNG),t.expandRate=Number(e.googExpandRate),t.accelerateRate=Number(e.googAccelerateRate),t.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),t.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),t.speechExpandRate=Number(e.googSpeechExpandRate),t.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),t.jitterBufferMs=Number(e.googJitterBufferMs),t.jitterMs=Number(e.googJitterReceived),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),t.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.decodingNormal>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),this._stats.audioRecv.push(t);break}case"audio_send":{const t=JP(rj);t.codec=e.googCodecName,t.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,t.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),t.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),t.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),t.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.rtt=t.rttMs,this._stats.audioSend.push(t);break}}}))}_getStats(){return new cy(((e,t)=>{this.pc.getStats(e,t)}))}statsResponsesToObjects(e){const t=[];return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t.push(n)})),t}}function dj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dj(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class hj extends aj{constructor(){super(...arguments),op(this,"_stats",ej),op(this,"report",void 0),op(this,"lastDecodeVideoReceiverStats",new Map),op(this,"lastVideoFramesRecv",new Map),op(this,"lastVideoFramesSent",new Map),op(this,"lastVideoFramesDecode",new Map),op(this,"lastVideoJBDelay",new Map),op(this,"lastAudioJBDelay",new Map),op(this,"mediaBytesSent",new Map),op(this,"mediaBytesRetransmit",new Map),op(this,"mediaBytesTargetEncode",new Map),op(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=JP(ej),this.report.forEach((e=>{switch(e.type){case aT.OUTBOUND:case aT.INBOUND:{const t=e.mediaType||e.kind,n=!t&&"frameWidth"in e,r=!t&&!("frameWidth"in e);e.type===aT.OUTBOUND?"audio"===t||r?this.processAudioOutboundStats(e):("video"===t||n)&&this.processVideoOutboundStats(e):e.type===aT.INBOUND&&("audio"===t||r?this.processAudioInboundStats(e):("video"===t||n)&&this.processVideoInboundStats(e));break}case aT.TRANSPORT:{const t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case aT.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const e=await this.pc.getStats(),t={local:pj({},$P),remote:pj({},$P)};return e.forEach((n=>{let r;if(n.type===aT.TRANSPORT&&(r=e.get(n.selectedCandidatePairId)),n.type===aT.CANDIDATE_PAIR&&n.selected&&(r=n),r){const n=(e,t)=>{e.type=t.type,e.id=t.id,t.address&&(e.address=t.address),t.candidateType&&(e.candidateType=t.candidateType),t.port&&(e.port=t.port),t.priority&&(e.priority=t.priority),t.protocol&&(e.protocol=t.protocol),t.relayProtocol&&(e.relayProtocol=t.relayProtocol)};if(r.localCandidateId){const i=e.get(r.localCandidateId);i&&n(t.local,i)}if(r.remoteCandidateId){const i=e.get(r.remoteCandidateId);i&&n(t.remote,i)}}})),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){const t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){const t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===aT.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===aT.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===aT.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(pj({},t),pj({},this.stats.selectedCandidatePair.localCandidate)),e.type===aT.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(pj({},t),pj({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find((t=>t.ssrc===e.ssrc));t||(t=JP(ij),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),"number"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples)}processVideoInboundStats(e){let t=this._stats.videoRecv.find((t=>t.ssrc===e.ssrc));t||(t=JP(tj),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay;const n=this.lastDecodeVideoReceiverStats.get(t.ssrc),r=this.lastVideoFramesDecode.get(t.ssrc),i=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){const e=t.decodedFrame?t.decodedFrame.width:0,n=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,e,n),this.isFirstVideoDecoded[t.ssrc]=!0}if(n){const r=n.stats,o=i-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&o>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=o,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<r.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(n.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-n.qpSum)/(e.framesDecoded-n.stats.framesDecodeCount))}r&&i-r.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-r.count)/((i-r.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:t.decodeFrameRate})):r?t.decodeFrameRate=r.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:pj({},t),lts:n?n.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find((t=>t.ssrc===e.ssrc));t||(t=JP(nj),this._stats.videoSend.push(t));const n=this.mediaBytesSent.get(e.ssrc);if(n)n.add(e.bytesSent);else{const t=new ZP(10);t.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,t)}if(void 0!==e.retransmittedBytesSent){const t=this.mediaBytesRetransmit.get(e.ssrc);if(t)t.add(e.retransmittedBytesSent);else{const t=new ZP(10);t.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,t)}}if(e.totalEncodedBytesTarget){const t=this.mediaBytesTargetEncode.get(e.ssrc);if(t)t.add(e.totalEncodedBytesTarget);else{const t=new ZP(10);t.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,t)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){const n=this.lastEncoderMs.get(e.ssrc);if(!n||n.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{const r=e.framesEncoded-n.lastFrameCount,i=e.totalEncodeTime-n.lastEncoderTime;t.avgEncodeMs=1e3*i/r}}if(e.framesEncoded&&e.qpSum){const n=this.lastEncoderMs.get(e.ssrc);!n||n.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-n.lastQpSum)/(e.framesEncoded-n.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,aT.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find((t=>t.ssrc===e.ssrc));if(t||(t=JP(rj),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,aT.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}findRemoteStatsId(e,t){var n;const r=Array.from(RT(n=this.report).call(n)).find((n=>n.type===t&&n.ssrc===e));return r?r.id:null}processVideoMediaSource(e,t){const n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})}processAudioMediaSource(e,t){const n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)}processVideoTrackSenderStats(e,t,n){var r,i,o,s;const a=t?this.report.get(t):void 0,c=null!==(r=null==a?void 0:a.framesSent)&&void 0!==r?r:e.framesSent;if("number"!=typeof c)return;let l=null!==(i=null==a?void 0:a.frameWidth)&&void 0!==i?i:e.frameWidth,u=null!==(o=null==a?void 0:a.frameHeight)&&void 0!==o?o:e.frameHeight,d=null!==(s=null==a?void 0:a.framesPerSecond)&&void 0!==s?s:e.framesPerSecond;if("number"==typeof l&&"number"==typeof u||(l=0,u=0),null==d){const e=Date.now(),t=this.lastVideoFramesSent.get(n.ssrc);t&&e-t.lts>=800?(d=Math.round((c-t.count)/((e-t.lts)/1e3)),this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:d})):t?d=t.rate:this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:0})}n.sentFrame={width:l,height:u,frameRate:Math.max(0,d)}}processVideoTrackReceiverStats(e,t,n){var r,i,o,s,a;const c=t?this.report.get(t):void 0,l=null!==(r=null==c?void 0:c.framesReceived)&&void 0!==r?r:e.framesReceived,u=null!==(i=null==c?void 0:c.frameWidth)&&void 0!==i?i:e.frameWidth,d=null!==(o=null==c?void 0:c.frameHeight)&&void 0!==o?o:e.frameHeight,p=null!==(s=null==c?void 0:c.jitterBufferDelay)&&void 0!==s?s:e.jitterBufferDelay,h=null!==(a=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount;if("number"==typeof l){const e=this.lastVideoFramesRecv.get(n.ssrc),t=Date.now();n.framesReceivedCount=l;let r=0;e&&t-e.lts>=800?(r=Math.round((l-e.count)/((t-e.lts)/1e3)),this.lastVideoFramesRecv.set(n.ssrc,{count:l,lts:t,rate:r})):e?r=e.rate:this.lastVideoFramesRecv.set(n.ssrc,{count:l,lts:t,rate:0}),n.receivedFrame={width:u||0,height:d||0,frameRate:r||0},n.decodedFrame={width:u||0,height:d||0,frameRate:n.decodeFrameRate||0},n.outputFrame={width:u||0,height:d||0,frameRate:n.decodeFrameRate||0}}if(p&&h){const e=this.lastVideoJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=h-e.jitterBufferEmittedCount;r>0&&(t=1e3*(p-e.jitterBufferDelay)/r),n.jitterBufferMs=t,n.currentDelayMs=Math.round(t),this.lastVideoJBDelay.set(n.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:h,jitterBufferMs:n.currentDelayMs})}}processAudioTrackSenderStats(e,t,n){var r,i,o,s;const a=t?this.report.get(t):void 0,c=null!==(r=null!==(i=null==a?void 0:a.echoReturnLoss)&&void 0!==i?i:e.echoReturnLoss)&&void 0!==r?r:0,l=null!==(o=null!==(s=null==a?void 0:a.echoReturnLossEnhancement)&&void 0!==s?s:e.echoReturnLossEnhancement)&&void 0!==o?o:0;n.aecReturnLoss=c,n.aecReturnLossEnhancement=l}processAudioTrackReceiverStats(e,t,n){var r,i,o,s,a,c,l;const u=t?this.report.get(t):void 0,d=null!==(r=null==u?void 0:u.removedSamplesForAcceleration)&&void 0!==r?r:e.removedSamplesForAcceleration,p=null!==(i=null==u?void 0:u.totalSamplesReceived)&&void 0!==i?i:e.totalSamplesReceived,h=null!==(o=null==u?void 0:u.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,f=null!==(s=null==u?void 0:u.jitterBufferEmittedCount)&&void 0!==s?s:e.jitterBufferEmittedCount,m=null!==(a=null==u?void 0:u.audioLevel)&&void 0!==a?a:null==e?void 0:e.audioLevel,g=null!==(c=null==u?void 0:u.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,v=null!==(l=null==u?void 0:u.concealedSamples)&&void 0!==l?l:e.concealedSamples;if(d&&p&&(n.accelerateRate=d/p),h&&f){const e=this.lastAudioJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=f-e.jitterBufferEmittedCount;r>0&&(t=1e3*(h-e.jitterBufferDelay)/r),n.jitterBufferMs=Math.round(t),this.lastAudioJBDelay.set(n.ssrc,{jitterBufferDelay:h,jitterBufferEmittedCount:f,jitterBufferMs:n.jitterBufferMs})}n.outputLevel=m;let y=1920;g&&p&&(y=p/g/50,n.receivedFrames=Math.round(p/y)),v&&(n.droppedFrames=Math.round(v/y))}processRemoteInboundStats(e,t){const n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime),n.jitter&&(t.jitterMs=1e3*n.jitter),n.timestamp&&(t.timestamp=n.timestamp))}getCodecFromCodecStats(e){const t=this.report.get(e);if(!t)return"";const n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""}updateSendBitrate(){let e=0,t=null,n=null;this.mediaBytesSent.forEach((t=>{e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((e=>{t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((e=>{n=null===n?e.diffMean():n+e.diffMean()}));const r=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*r/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))}}class fj extends aj{updateStats(){return cy.resolve()}}function mj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4;const o=function(){const e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return e&&e[0]?Number(e[0].split("/")[1]):null}();return o?o<76?new uj(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new hj(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):function(e){return!!window.RTCStatsReport&&e.getStats()instanceof cy}(e)?new hj(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new fj(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i})}function gj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gj(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;const{filterRTX:i,filterVideoFec:o,filterAudioFec:s,filterAudioCodec:a,filterVideoCodec:c}=t,{useXR:l}=n;let u=[],d=[],p=[],h=[],f=!1,m=!1;if(QP.parse(e).mediaDescriptions.forEach((e=>{r&&r!==e.attributes.direction||("video"!==e.media.mediaType||f||(d=e.attributes.payloads,h=e.attributes.extmaps,f=!0),"audio"!==e.media.mediaType||m||(u=e.attributes.payloads,p=e.attributes.extmaps,m=!0))})),!h||0===d.length)throw new Error("Cannot get video capabilities from SDP.");if(!p||0===u.length)throw new Error("Cannot get audio capabilities from SDP.");d.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),l&&e.rtcpFeedbacks.push({type:"rrtr"})})),u.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),l&&e.rtcpFeedbacks.push({type:"rrtr"})})),i&&(u=u.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),d=d.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),o&&(d=d.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),s&&(u=u.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),a&&(null==a?void 0:a.length)>0&&(u=u.filter((e=>{var t;return Or(a).call(a,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),c&&(null==c?void 0:c.length)>0&&(d=d.filter((e=>{var t;return Or(c).call(c,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")})));const g=bS("UNSUPPORTED_VIDEO_CODEC");return g&&g.length>0&&(d=d.filter((e=>!(e.rtpMap&&Or(g).call(g,e.rtpMap.encodingName.toLowerCase()))))),{audioCodecs:u,videoCodecs:d,audioExtensions:p,videoExtensions:h}}function Ej(e){const t=QP.parse(e);let n,r;for(const i of t.mediaDescriptions){if(!n){const e=i.attributes.iceUfrag,t=i.attributes.icePwd;if(!e||!t)throw new Error("Cannot get iceUfrag or icePwd from SDP.");n={iceUfrag:e,icePwd:t}}if(!r){const e=i.attributes.fingerprints;e.length>0&&(r={fingerprints:e})}}if(!r&&t.attributes.fingerprints.length>0&&(r={fingerprints:t.attributes.fingerprints}),!r||!n)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:n,dtlsParameters:r}}function _j(e,t){const n=[],r=e.attributes.ssrcGroups.filter((e=>"FID"===e.semantic)),i=e.attributes.ssrcGroups.find((e=>"SIM"===e.semantic)),o=e.attributes.ssrcs;if(i)i.ssrcIds.forEach((e=>{var i;const o=null===(i=r.find((t=>t.ssrcIds[0]===e)))||void 0===i?void 0:i.ssrcIds[1];n.push({ssrcId:e,rtx:t?o:void 0})}));else if(r.length>0){const e=r[0].ssrcIds[0],i=r[0].ssrcIds[1];n.push({ssrcId:e,rtx:t?i:void 0})}else{if(0===o.length)throw new Error("No ssrcs found on local media description.");n.push({ssrcId:o[0].ssrcId})}return n}function bj(e,t){const{cname:n}=e;let r;t&&t.ip&&"number"==typeof t.port?(r=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],BS.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(r.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),BS.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):r=e.iceParameters.candidates.map((e=>({foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}})));const i={fingerprints:e.dtlsParameters.fingerprints.map((e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint})))},o={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let s;switch(e.dtlsParameters.role){case"server":s="passive";break;case"client":s="active";break;case"auto":s="actpass"}return{dtlsParameters:i,iceParameters:o,candidates:r,rtpCapabilities:Dj(e.rtpCapabilities),setup:s,cname:n}}function Sj(e,t,n){const r=[],i=[];return e.forEach((e=>{let{ssrcId:o,rtx:s}=e;const a=r_(8,"track-"),c={ssrcId:o,attributes:vj({label:a,mslabel:n=n||r_(10,""),msid:"".concat(n," ").concat(a)},t&&{cname:t})};if(r.push(c),void 0!==s){const e={ssrcId:s,attributes:vj({label:a,mslabel:n,msid:"".concat(n," ").concat(a)},t&&{cname:t})};r.push(e),i.push({semantic:"FID",ssrcIds:[o,s]})}})),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map((e=>{let{ssrcId:t}=e;return t}))}),{ssrcs:r,ssrcGroups:i}}function Tj(e,t){t instanceof eO&&e.attributes.payloads.forEach((e=>{var n;const r=null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase();if(!r||-1===["opus","pcmu","pcma","g722"].indexOf(r))return;e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";const i=t._encoderConfig;i&&"pcmu"!==r&&"pcma"!==r&&"g722"!==r&&(i.bitrate&&!Oy()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*i.bitrate))),i.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(i.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(i.sampleRate)),i.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))}))}function Ij(e){const t=e.attributes.unrecognized.findIndex((e=>"x-google-flag"===e.attField&&"conference"===e.attValue));-1!==t&&e.attributes.unrecognized.splice(t,1)}function Nj(e,t){var n;if(!(t instanceof bO&&t._encoderConfig&&-1===t._hints.indexOf(Bw.SCREEN_TRACK)))return;const r=t._encoderConfig;Tw().supportMinBitrate&&r.bitrateMin&&e.attributes.payloads.forEach((e=>{var t,n;Or(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(r.bitrateMin))})),Tw().supportMinBitrate&&!Or(n=t._hints).call(n,Bw.LOW_STREAM)&&r.bitrateMax&&e.attributes.payloads.forEach((e=>{var t,n;Or(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(bS("X_GOOGLE_START_BITRATE")||Math.floor(r.bitrateMax)))}))}function wj(e){if("video"!==e.media.mediaType)return;const t=_y();if(t.name!==my.SAFARI&&t.os!==fy.IOS)return;const n=e.attributes.extmaps.findIndex((e=>/video-orientation/g.test(e.extensionName)));-1!==n&&e.attributes.extmaps.splice(n,1)}function Cj(e,t,n){if(!t)return;let r,i;if("video"===e.media.mediaType?(r=n.videoExtensions,i=n.videoCodecs):(r=n.audioExtensions,i=n.audioCodecs),!0===t.twcc){const t=r.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));if(t){e.attributes.extmaps.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"});const n=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))))))}(i,e.attributes.payloads);n.forEach((e=>{e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))||e.rtcpFeedbacks.push({type:"transport-cc"})}))}}else if(!1===t.twcc){const t=e.attributes.extmaps.findIndex((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}if(!0===t.remb){const t=r.find((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName));if(t){e.attributes.extmaps.find((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"});const n=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))))))}(i,e.attributes.payloads);n.forEach((e=>{e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))||e.rtcpFeedbacks.push({type:"goog-remb"})}))}}else if(!1===t.remb){const t=e.attributes.extmaps.findIndex((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"goog-remb"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}function Oj(e,t,n){if(Oy())return;if("video"!==e.media.mediaType)return;if(!(t instanceof bO))return;if("vp9"!==n&&"vp8"!==n)return;if("vp8"===n&&!bS("SIMULCAST"))return;if(void 0===t._scalabilityMode||t._scalabilityMode.numSpatialLayers<=1)return;const r="vp8"===n?2:t._scalabilityMode.numSpatialLayers,i=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find((e=>"FID"===e.semantic&&e.ssrcIds[0]===i.ssrcId)),s={semantic:"SIM",ssrcIds:[i.ssrcId]};for(let a=1;a<r;a++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+a,attributes:YE(i.attributes)}),s.ssrcIds.push(i.ssrcId+a),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+a,attributes:YE(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+a,o.ssrcIds[1]+a]}));e.attributes.ssrcGroups.unshift(s)}async function Aj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new RTCPeerConnection;n.addTransceiver("video",{direction:"sendonly"}),n.addTransceiver("audio",{direction:"sendonly"}),n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"});const r=(await n.createOffer()).sdp,{send:i,recv:o,sendrecv:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=yj(n,e,t,"sendonly"),i=yj(n,e,t,"recvonly"),o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},s={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Mj(r,i,"videoExtensions",o,s,a),Mj(r,i,"videoCodecs",o,s,a),Mj(r,i,"audioExtensions",o,s,a),Mj(r,i,"audioCodecs",o,s,a),bS("RAISE_H264_BASELINE_PRIORITY")){const e=a.videoCodecs.findIndex((e=>{var t,n;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"===(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])}));if(-1!==e){const t=a.videoCodecs.findIndex((e=>{var t;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())}));if(t<e){BS.debug("raising H264 baseline profile priority");const n=a.videoCodecs[e];a.videoCodecs.splice(e,1),a.videoCodecs.splice(t,0,n)}-1!==t&&(s.videoCodecs=s.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))}))),-1!==t&&bS("FILTER_SEND_H264_BASELINE")&&(o.videoCodecs=o.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))})))}}return{send:o,recv:s,sendrecv:a}}(e,t,r);try{n.close()}catch(e){}return{send:i,recv:o,sendrecv:s}}function Rj(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=yj(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"recvonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Mj(e,t,"videoExtensions",n,r,i),Mj(e,t,"videoCodecs",n,r,i),Mj(e,t,"audioExtensions",n,r,i),Mj(e,t,"audioCodecs",n,r,i),bS("RAISE_H264_BASELINE_PRIORITY")){const e=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){BS.debug("raising H264 baseline profile priority");const n=i.videoCodecs[e];i.videoCodecs.splice(e,1),i.videoCodecs.splice(t,0,n)}-1!==t&&(r.videoCodecs=r.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:i}}function Mj(e,t,n,r,i,o){if("videoExtensions"===n||"audioExtensions"===n){const s=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.entry===t.entry&&e.extensionName===t.extensionName)return s.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===s.indexOf(t)&&i[n].push(e)}))}if("videoCodecs"===n||"audioCodecs"===n){const s=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return s.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===s.indexOf(t)&&i[n].push(e)}))}}function Dj(e){const{send:t,recv:n,sendrecv:r}=e;if(!r){if(!t||!n)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:n}}let i,o;return t?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...t.audioCodecs,...r.audioCodecs],i.videoCodecs=[...t.videoCodecs,...r.videoCodecs],i.audioExtensions=[...t.audioExtensions,...r.audioExtensions],i.videoExtensions=[...t.videoExtensions,...r.videoExtensions]):i=r,n?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...n.audioCodecs,...r.audioCodecs],o.videoCodecs=[...n.videoCodecs,...r.videoCodecs],o.audioExtensions=[...n.audioExtensions,...r.audioExtensions],o.videoExtensions=[...n.videoExtensions,...r.videoExtensions]):o=r,{send:i,recv:o}}function kj(e){"audio"===e.media.mediaType&&e.attributes.payloads.filter((e=>{var t;return"opus"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((e=>{e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"}))}function xj(e){e.mediaDescriptions.forEach((e=>{"video"!==e.media.mediaType&&"audio"!==e.media.mediaType||e.attributes.payloads.forEach((e=>{-1===e.rtcpFeedbacks.findIndex((e=>"rrtr"===e.type))&&e.rtcpFeedbacks.push({type:"rrtr"})}))}))}function Lj(e,t,n,r){let i=[];if(e===aI.VIDEO){if(bS("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(i=t.videoCodecs.filter((e=>{var t;return Or(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)&&e&&e.fmtp&&e.fmtp.parameters["profile-level-id"]===bS("H264_PROFILE_LEVEL_ID")}))),!Array.isArray(i)||0===i.length){let e=[];const o=[],s=[];n.videoCodecs.forEach((t=>{var n,i,a;Or(n=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").call(n,r)&&e.push(t),Or(i=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").call(i,"vp8")&&o.push(t),Or(a=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").call(a,"h264")&&s.push(t)})),0===e.length&&(0!==o.length?(e=o,BS.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: vp8"))):0!==s.length&&(e=s,BS.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: h264")))),0!==e.length&&(i=t.videoCodecs.filter((t=>e.some((e=>e.payloadType===t.payloadType)))))}if(bS("USE_PUB_RTX")){const e=i.map((e=>e.payloadType.toString())),n=t.videoCodecs.filter((t=>t.rtpMap&&"rtx"===t.rtpMap.encodingName&&Or(e).call(e,t.fmtp&&t.fmtp.parameters.apt||"")));i=[...i,...n]}0===i.length&&(BS.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),i=t.videoCodecs)}else i=t.audioCodecs.filter((e=>{var t;return Or(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)})),0===i.length&&(BS.warning("codec ".concat(r," not included in rtpCapabilities, fallback to opus")),i=t.audioCodecs.filter((e=>{var t;return Or(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,"opus")})));return i}let Pj=class{get localCapabilities(){return YE(this._localCapabilities)}get rtpCapabilities(){return YE(this._rtpCapabilities)}get candidates(){return YE(this._candidates)}get iceParameters(){return YE(this._iceParameters)}get dtlsParameters(){return YE(this._dtlsParameters)}constructor(e){op(this,"sessionDesc",void 0),op(this,"_localCapabilities",void 0),op(this,"_rtpCapabilities",void 0),op(this,"_candidates",void 0),op(this,"_iceParameters",void 0),op(this,"_dtlsParameters",void 0),op(this,"setup",void 0),op(this,"currentMidIndex",void 0),op(this,"cname","o/i14u9pJrxRKAsu"),op(this,"firefoxSsrcMidMap",new Map),e=YE(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,localCapabilities:o,direction:s,setup:a,videoCodec:c,audioCodec:l}=e;let u;this.setup=a,u=s===ET.RECEIVE_ONLY?QP.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"):QP.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"),this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=o;const d=s===ET.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,p=s===ET.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,h=s===ET.RECEIVE_ONLY?i.send.videoCodecs:Lj(aI.VIDEO,d,p,c),f=s===ET.RECEIVE_ONLY?i.send.audioCodecs:Lj(aI.AUDIO,d,p,l);for(const m of u.mediaDescriptions){if(m.attributes.iceUfrag=t.iceUfrag,m.attributes.icePwd=t.icePwd,m.attributes.fingerprints=n.fingerprints,m.attributes.candidates=r,m.attributes.setup=this.setup,"application"===m.media.mediaType&&(m.attributes.sctpPort="5000"),"video"===m.media.mediaType&&(m.media.fmts=h.map((e=>e.payloadType.toString(10))),m.attributes.payloads=h,m.attributes.extmaps=d.videoExtensions,bS("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Sj([{ssrcId:4e4,rtx:bS("USE_SUB_RTX")?40001:void 0}],this.cname);m.attributes.ssrcs=e,m.attributes.ssrcGroups=t}if("audio"===m.media.mediaType&&(m.media.fmts=f.map((e=>e.payloadType.toString(10))),m.attributes.payloads=f,m.attributes.extmaps=d.audioExtensions,kj(m),bS("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Sj([{ssrcId:2e4}],this.cname);m.attributes.ssrcs=e,m.attributes.ssrcGroups=t}}this.sessionDesc=u,this.currentMidIndex=u.mediaDescriptions.length-1}toString(){return QP.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every((e=>this.hasMid(e))):this.sessionDesc.mediaDescriptions.some((t=>t.attributes.mid===e))}send(e,t,n,r,i){n=n.replace(/ /g,"-");const{ssrcs:o,ssrcGroups:s}=Sj(t,this.cname,bS("SYNC_GROUP")?n:void 0),a=this.findPreloadMediaDesc(o);if(a){if(Oy()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,a.attributes.mid),i&&(i.twcc||i.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(a,i),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,o,r);let n;return-1===t?(n=this.createOrRecycleSendMedia(e,o,s,"sendonly",r,i),this.updateBundleMids()):(n=YE(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=o,n.attributes.ssrcGroups=s,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,i)),Oy()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,n.attributes.mid),{needExchangeSDP:!0,mid:n.attributes.mid}}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{e.attributes.ssrcs=[]})),this.updateBundleMids()}receive(e,t,n){const r=[];return e.forEach((e=>{const i=e._mediaStreamTrack.kind,o=this.findAvailableRecvMediaIndex(i);let s,a=!1;-1===o?(a=!0,s=this.createOrRecycleRecvMedia(e,[],"recvonly",t,n),this.updateBundleMids()):(s=YE(this.sessionDesc.mediaDescriptions[o]),s.attributes.direction="recvonly"),r.push({mid:s.attributes.mid,needCreateTransceiver:a})})),r}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}addRemoteCandidate(e){const{foundation:t,protocol:n,address:r,port:i,type:o,relatedAddress:s,relatedPort:a,priority:c}=new RTCIceCandidate(e),l={foundation:null!=t?t:"",componentId:"1",transport:null!=n?n:"",priority:c?c+"":"",connectionAddress:null!=r?r:"",port:i?i+"":"",type:o?o+"":"",relAddr:null!=s?s:"",relPort:a?a+"":"",extension:{}};this.candidates.some((e=>e.priority===l.priority&&e.connectionAddress===l.connectionAddress&&e.port===l.port))||(this._candidates.push(l),this.sessionDesc.mediaDescriptions.forEach((e=>{e.attributes.candidates=this.candidates})))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,n,r,i){const o=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,a=Lj(o,s,this.localCapabilities.send,o===aI.AUDIO?i:r),c=o===aI.VIDEO?s.videoExtensions:s.audioExtensions,l="".concat(++this.currentMidIndex);let u={media:{mediaType:o,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};u=this.mungRecvMediaDsec(u,e);const d=this.findFirstClosedMedia(o);if(d){const e=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[e]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Or(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Or(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}findAvailableMediaIndex(e,t,n){return this.sessionDesc.mediaDescriptions.findIndex((r=>{const i=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if(Oy()){if(i){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!e||e!==r.attributes.mid)}return!1}return i&&r.attributes.mid===n}))}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex((t=>{const n=t.media.mediaType===e&&"0"!==t.media.port&&("recvonly"===t.attributes.direction||"sendrecv"===t.attributes.direction);return"0"!==t.attributes.mid&&"1"!==t.attributes.mid&&n}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}restartICE(e){e=YE(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}createOrRecycleSendMedia(e,t,n,r,i,o){const s=this.rtpCapabilities.send,a=e===aI.VIDEO?s.videoCodecs:s.audioCodecs,c=e===aI.VIDEO?s.videoExtensions:s.audioExtensions;Oy()&&(i="".concat(++this.currentMidIndex));let l={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:i}};l=this.mungSendMediaDesc(l,o);const u=this.findFirstClosedMedia(e);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}mungRecvMediaDsec(e,t,n){const r=YE(e);return Ij(r),Tj(r,t),Nj(r,t),wj(r),Cj(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=YE(e);return Cj(n,t,this.localCapabilities.recv),kj(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>Oy()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}};const jj=["sdp"];function Uj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uj(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let zj=class e extends AI{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[]}set isInRestartIce(e){this._isInRestartIce=e}get isInRestartIce(){return this._isInRestartIce}constructor(t,n,r){super(t,n),op(this,"direction",void 0),op(this,"name",void 0),op(this,"store",void 0),op(this,"spec",void 0),op(this,"peerConnection",void 0),op(this,"initialOffer",void 0),op(this,"transport",void 0),op(this,"statsFilter",void 0),op(this,"localCandidateCount",0),op(this,"allCandidatesReceived",!1),op(this,"localCandidateAddress",null),op(this,"useXR",bS("USE_XR")),op(this,"filter",{filterRTX:!bS("USE_PUB_RTX")&&!bS("USE_SUB_RTX"),filterVideoFec:bS("FILTER_VIDEO_FEC"),filterAudioFec:bS("FILTER_AUDIO_FEC")}),op(this,"extension",{useXR:this.useXR}),op(this,"_isInRestartIce",!1),op(this,"mutex",new h_("P2PConnection-mutex")),op(this,"onLocalCandidate",void 0),op(this,"remoteSDP",void 0),op(this,"pendingCandidates",[]),op(this,"localCapabilities",void 0),op(this,"isReady",!1),op(this,"restartCnt",0),op(this,"curTurnServerIndex",0),this.store=n,this.spec=t,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t,n.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=null!=r?r:ET.SEND_ONLY,this.name=this.direction===ET.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=mj(this.peerConnection,bS("STATS_UPDATE_INTERVAL"),void 0,Oy()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(e){try{const t=await Aj(this.filter,this.extension);if(this.localCapabilities=Dj(t),e){const{sdp:t}=e,n=qP(e,jj),r=function(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=yj(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"sendonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Mj(t,e,"videoExtensions",n,r,i),Mj(t,e,"videoCodecs",n,r,i),Mj(t,e,"audioExtensions",n,r,i),Mj(t,e,"audioCodecs",n,r,i),bS("RAISE_H264_BASELINE_PRIORITY")){const e=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){BS.debug("raising H264 baseline profile priority");const n=i.videoCodecs[e];i.videoCodecs.splice(e,1),i.videoCodecs.splice(t,0,n)}-1!==t&&bS("FILTER_SEND_H264_BASELINE")&&(n.videoCodecs=n.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:i}}(this.filter,this.extension,t);this.remoteSDP=new Pj({remoteIceParameters:n.iceParameters,remoteDtlsParameters:n.dtlsParameters,candidates:[],remoteRTPCapabilities:r,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const i=await this.peerConnection.createAnswer();if(!i.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const o=Ej(i.sdp);await this.peerConnection.setLocalDescription(i);const s=await Rj(this.filter,this.extension,i.sdp);this.localCapabilities=Dj(s);const a=this.peerConnection.getTransceivers()[0];return null!=a&&a.receiver&&a.receiver.transport&&this.tryBindTransportEvents(a.receiver.transport),Fj(Fj({},o),{},{sdp:i.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=Ej(e.sdp);return this.initialOffer=e,Fj(Fj({},t),{},{sdp:e.sdp})}}catch(e){throw new Wy(Gy.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:t,iceParameters:n,dtlsParameters:r}=e,i=await Rj(this.filter,this.extension,t);this.remoteSDP=new Pj({remoteIceParameters:n,remoteDtlsParameters:r,candidates:[],remoteRTPCapabilities:i,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const o=this.peerConnection.getTransceivers()[0];null!=o&&o.sender&&o.sender.transport&&this.tryBindTransportEvents(o.sender.transport)}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async addRemoteCandidate(e){try{e&&this.pendingCandidates.push(e),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach((e=>{this.peerConnection.addIceCandidate(e)})),this.pendingCandidates=[])}catch(e){throw new Wy(Gy.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(e.toString()))}}send(e,t,n){var r=this;return DP((function*(){const i=yield TP(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const i=[],o=r.remoteSDP.receive(e,t,n);e.forEach(((e,t)=>{if(o[t].needCreateTransceiver){const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});i.push(t),e._updateRtpTransceiver(t)}else{const n=r.peerConnection.getTransceivers().find((e=>e.mid===o[t].mid));if(!n)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(o[t].mid));i.push(n),e._updateRtpTransceiver(n)}})),Oy()&&!0===bS("SIMULCAST")&&(yield TP(r.applySimulcastForFirefox(i,e)));const s=o.map((e=>e.mid)),a=yield TP(r.peerConnection.createOffer()),c=r.mungSendOfferSDP(a.sdp,e,s),l=QP.parse(c),u=s.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return _j(t,bS("USE_PUB_RTX"))})),d=i.map(((e,t)=>{const n=s[t];return{localSSRC:u[t],id:n}}));yield TP(r.peerConnection.setLocalDescription({type:"offer",sdp:c}));try{yield d}catch(e){const n=r.remoteSDP.toString();throw yield TP(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield TP(r.peerConnection.setRemoteDescription({type:"answer",sdp:n})),yield TP(r.stopSending(s,!0)),e}yield TP(r.applySimulcastEncodings(i,e)),yield TP(r.applySendEncodings(i,e));const p=r.remoteSDP.toString(),h=r.logSDPExchange(c,"offer","local","send");return null==h||h(p),yield TP(r.setRemoteDescription({type:"answer",sdp:p})),i.map(((e,t)=>{const n=s[t];return{localSSRC:u[t],id:n}}))}catch(e){throw e instanceof Wy?e:new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length (".concat(t.length,") doesn't match mids' length (").concat(e.length,") when trying to call P2PConnection.stopSending."));t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),BS.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else BS.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."));const s=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!s||null===s.mid)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,mid:s.mid,transceiver:s}}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async mockReceive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),BS.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else BS.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."))}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===vS.Auto&&(this.store.p2pTransport=vS.SdRtn,Tw().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,Tw().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:t}=Ej(e.sdp);return this.store.descriptionStart(),this.direction===ET.SEND_ONLY&&await this.peerConnection.setLocalDescription(e),t}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===ET.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const e=await this.peerConnection.createAnswer();if(!e.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:t}=Ej(e.sdp);return await this.peerConnection.setLocalDescription(e),t}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}close(){var e;this.peerConnection.close(),this.peerConnection.onicecandidate=null,null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?Oy()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:Fj(Fj({},$P),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:Fj(Fj({},$P),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e,t;Or(e=["connected","completed"]).call(e,this.peerConnection.iceConnectionState)&&(this.isReady=!1),null===(t=this.onICEConnectionStateChange)||void 0===t||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;"connected"===this.peerConnection.connectionState&&(this.restartCnt=0),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=e=>{var t;e.candidate?(e.candidate.candidate&&(this.localCandidateAddress=e.candidate.address,null===(t=this.onLocalCandidate)||void 0===t||t.call(this,e.candidate.toJSON())),this.localCandidateCount+=1):(this.allCandidatesReceived=!0,BS.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i={iceServers:[]};var o;return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(bE(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers,n,r)),bS("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway,n,r)),Or(o=[vS.Relay,vS.SdRtn]).call(o,n)&&(i.iceTransportPolicy="relay"),bS("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(i.iceTransportPolicy="relay")})))),bS("ENABLE_ENCODED_TRANSFORM")&&Tw().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),BS.debug("P2PConnection p2pTransport is ".concat(n)),i}static turnServerConfigToIceServers(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[],i=e.filter((e=>e.tcpport));BS.debug("P2PConnection turnServers is ".concat(i,", current index is ").concat(n));const o=i.length>n?i[n]:i[0];switch(t){case vS.SdRtn:const t=e.filter((e=>{var t;return Or(t=e.username).call(t,"glb:")&&e.turnServerURL==e.turnServerURL})),i=t.length>n?t[n]:t[0];i&&(r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turn:".concat(yN(i.turnServerURL),":").concat(i.tcpport,"?transport=udp")}),r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turns:".concat(yN(i.turnServerURL),":").concat(i.tcpport,"?transport=tcp")}));break;case vS.Relay:o&&(r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(o.turnServerURL,":").concat(o.tcpport,"?transport=udp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(yN(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}));break;default:o&&(r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(o.turnServerURL,":").concat(o.tcpport,"?transport=udp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(yN(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"stun:".concat(o.turnServerURL,":").concat(o.tcpport)}))}return r}tryBindTransportEvents(e){if(e){this.transport=e,e.onstatechange=()=>{var t;null!=e&&e.state&&(null===(t=this.onDTLSTransportStateChange)||void 0===t||t.call(this,e.state))},e.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const t=e.iceTransport;t&&(t.onstatechange=()=>{const t=null==e?void 0:e.iceTransport.state;var n;t&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,t))},t.getSelectedCandidatePair&&(t.onselectedcandidatepairchange=()=>{if(t.getSelectedCandidatePair()){const{local:e,remote:n}=t.getSelectedCandidatePair();BS.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))),!t)return BS.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return BS.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!Tw().supportSetRtpSenderParameters)return BS.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const r={},i={};switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(e._encoderConfig){var o;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(i.maxBitrate=1e3*t),Or(o=e._hints).call(o,Bw.LOW_STREAM)&&(n&&(i.maxFramerate=_N(n)),r&&r>=1&&(i.scaleResolutionDownBy=r))}if(bS("DSCP_TYPE")&&By()){var s;const e=bS("DSCP_TYPE");Or(s=["very-low","low","medium","high"]).call(s,e)&&(i.networkPriority=e)}const a=t.getParameters(),c=null===(n=a.encodings)||void 0===n?void 0:n[0];Oy()&&!c&&(r.encodings=[i]),c&&Object.assign(c,i),Object.assign(a,r),BS.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!Tw().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];i instanceof bO&&!this.isVP8Simulcast(i)&&await this.updateRtpSenderEncodings(i,r.sender)}}catch(e){BS.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=QP.parse(e);return t.forEach(((e,t)=>{const i=n[t],o=r.mediaDescriptions.find((e=>e.attributes.mid===i));o&&(Tj(o,e),Oj(o,e,this.store.codec))})),QP.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,o,s;const c=e[a],l=t[a];if(l instanceof bO&&!Or(n=l._hints).call(n,Bw.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=l._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=l._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!Oy()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof bO&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return!!(e instanceof bO&&bS("SIMULCAST")&&"vp8"===this.store.codec&&!Or(t=e._hints).call(t,Bw.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(bS("SDP_LOGGING"))return BS.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async e=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}async getRemoteSSRC(e,t){var n,r;if(t=null!==(n=t)&&void 0!==n?n:null===(r=this.currentRemoteDescription)||void 0===r?void 0:r.sdp){var i;const n=null===(i=QP.parse(t).mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===i?void 0:i.attributes.ssrcs;return null==n?void 0:n[0].ssrcId}}async setRemoteDescription(e){var t;await this.peerConnection.setRemoteDescription(e),Or(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(e,t,n){const r=QP.parse(e),i=r.mediaDescriptions.find((e=>e.attributes.mid===t));return i&&(n===aI.AUDIO&&"audio"===i.media.mediaType&&kj(i),this.useXR&&xj(r)),QP.print(r)}};function Bj(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function Vj(e,t){let n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=_N(t.width),r.height=_N(t.height);const i=_N(t.framerate||15);document.body.append(n),document.body.append(r);let o=e._mediaStreamTrack;n.srcObject=new MediaStream([o]),n.play();const s=r.getContext("2d");if(!s)throw new kT(Gy.UNEXPECTED_ERROR,"can not get canvas context");const a=Tw(),c=r.captureStream(a.supportRequestFrame?0:i).getVideoTracks()[0];c.canvas||(c.canvas=r),r.startCapture=()=>{if(!n)return r.stopCapture&&r.stopCapture();if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){const e=n.videoWidth,t=n.videoHeight/e,i=r.width*t;Math.abs(i-r.height)>=2&&(BS.debug("adjust low stream resolution","".concat(r.width,"x").concat(r.height," -> ").concat(r.width,"x").concat(i)),r.height=i)}s.drawImage(n,0,0,r.width,r.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,n.srcObject=new MediaStream([o]))},r.stopCapture=EC((()=>r.startCapture&&r.startCapture()),i);const l=c.stop;return c.stop=()=>{l.call(c),n&&(n.remove(),n.srcObject=null,n=null),r&&(r.width=0,r.remove(),r.stopCapture&&r.stopCapture(),r.startCapture=void 0,r.stopCapture=void 0,r=null),BS.debug("clean low stream renderer")},c}var Hj,Gj,Wj,Yj,qj,Kj,Qj,Jj,Xj,Zj,$j;MT([Bj,DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],zj.prototype,"establish",null),MT([Bj,DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],zj.prototype,"connect",null),MT([Bj,DT("design:type",Function),DT("design:paramtypes",[String,Array,String,String]),DT("design:returntype",cy)],zj.prototype,"receive",null),MT([Bj,DT("design:type",Function),DT("design:paramtypes",[String,Array,String,String]),DT("design:returntype",cy)],zj.prototype,"mockReceive",null),MT([Bj,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],zj.prototype,"stopReceiving",null),MT([Bj,DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],zj.prototype,"restartICE",null),MT([Bj,DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],zj.prototype,"close",null),MT([Bj,DT("design:type",Function),DT("design:paramtypes",[String,uC]),DT("design:returntype",cy)],zj.prototype,"updateEncoderConfig",null),MT([Bj,DT("design:type",Function),DT("design:paramtypes",[String,uC]),DT("design:returntype",cy)],zj.prototype,"updateSendParameters",null),MT([Bj,DT("design:type",Function),DT("design:paramtypes",[uC,String]),DT("design:returntype",cy)],zj.prototype,"replaceTrack",null),MT([Bj,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],zj.prototype,"muteLocal",null),MT([Bj,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],zj.prototype,"unmuteLocal",null),function(e){e[e.HEIGHT=2033]="HEIGHT",e[e.FRAME_RATE=2034]="FRAME_RATE",e[e.WIDTH=2035]="WIDTH"}(Hj||(Hj={})),function(e){e[e.HEIGHT=2072]="HEIGHT",e[e.FRAME_RATE=2074]="FRAME_RATE",e[e.WIDTH=2076]="WIDTH"}(Gj||(Gj={})),function(e){e[e.FRAME_RATE=2002]="FRAME_RATE",e[e.WIDTH=2003]="WIDTH",e[e.HEIGHT=2004]="HEIGHT",e[e.PACKAGE_LOST=2005]="PACKAGE_LOST",e[e.AVG_ENCODE=2007]="AVG_ENCODE",e[e.NACKS=2009]="NACKS",e[e.PLIS=2010]="PLIS",e[e.FIRS=2011]="FIRS",e[e.BITRATE=2012]="BITRATE",e[e.PACKAGE_RATE=2031]="PACKAGE_RATE",e[e.ADAPTATION=2032]="ADAPTATION",e[e.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",e[e.BANDWIDTH=2061]="BANDWIDTH",e[e.RETRANSMIT=2062]="RETRANSMIT",e[e.TARGET_ENCODED=2064]="TARGET_ENCODED",e[e.TRANSMIT=2066]="TRANSMIT",e[e.FREEZE=2082]="FREEZE",e[e.DISABLED=2095]="DISABLED",e[e.PLAYER_STATUS=2128]="PLAYER_STATUS",e[e.QP_SUM=2143]="QP_SUM"}(Wj||(Wj={})),function(e){e[e.BITRATE=2069]="BITRATE",e[e.PACKAGE_LOST=2070]="PACKAGE_LOST",e[e.PACKAGE_RATE=2071]="PACKAGE_RATE",e[e.HEIGHT=2073]="HEIGHT",e[e.FRAME_RATE=2075]="FRAME_RATE",e[e.WIDTH=2077]="WIDTH"}(Yj||(Yj={})),function(e){e[e.JITTER=-1]="JITTER",e[e.PACKAGE_LOST=2014]="PACKAGE_LOST",e[e.WIDTH=2018]="WIDTH",e[e.HEIGHT=2019]="HEIGHT",e[e.FRAME_RATE=2020]="FRAME_RATE",e[e.JITTER_BUFFER=2023]="JITTER_BUFFER",e[e.CURRENT_DELAY=2024]="CURRENT_DELAY",e[e.NACKS=2026]="NACKS",e[e.PLIS=2027]="PLIS",e[e.FIRS=2028]="FIRS",e[e.BITRATE=2029]="BITRATE",e[e.PACKAGE_RATE=2078]="PACKAGE_RATE",e[e.FREEZE=2084]="FREEZE",e[e.DISABLED=2101]="DISABLED",e[e.PLAYER_STATUS=2129]="PLAYER_STATUS",e[e.QP_SUM=2144]="QP_SUM",e[e.I_FRAME_DELAY=2149]="I_FRAME_DELAY"}(qj||(qj={})),function(e){e[e.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",e[e.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",e[e.FREEZE_TIME=2109]="FREEZE_TIME",e[e.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER"}(Kj||(Kj={})),function(e){e[e.PCM_LEVEL=2104]="PCM_LEVEL"}(Qj||(Qj={})),function(e){e[e.PACKAGE_LOST=-1]="PACKAGE_LOST",e[e.LEVEL=2038]="LEVEL",e[e.BITRATE=2039]="BITRATE",e[e.PACKAGE_RATE=2040]="PACKAGE_RATE",e[e.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",e[e.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",e[e.FREEZE=2081]="FREEZE",e[e.DISABLED=2096]="DISABLED"}(Jj||(Jj={})),function(e){e[e.BITRATE=2044]="BITRATE",e[e.PACKAGE_LOST=2045]="PACKAGE_LOST",e[e.PACKAGE_RATE=2046]="PACKAGE_RATE",e[e.CURRENT_DELAY=2047]="CURRENT_DELAY",e[e.JITTER_BUFFER=2054]="JITTER_BUFFER",e[e.JITTER=2055]="JITTER",e[e.FREEZE=2083]="FREEZE",e[e.DISABLED=2102]="DISABLED",e[e.PCM_LEVEL=2105]="PCM_LEVEL",e[e.PLAYER_STATUS=2130]="PLAYER_STATUS",e[e.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES"}(Xj||(Xj={})),function(e){e[e.FREEZE_TIME=-1]="FREEZE_TIME",e[e.LEVEL=2043]="LEVEL"}(Zj||(Zj={})),function(e){e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE"}($j||($j={}));const eU=1e3,tU=3;function nU(e,t,n){null!=n&&Number.isFinite(n)&&(e[t]=Math.round(Math.max(0,n)))}function rU(e){const t={[$j.CONN_TYPE]:0,[$j.RTT]:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{const n=e.selectedCandidatePair.localCandidate.relayProtocol;"udp"===n&&(t[$j.CONN_TYPE]=1),"tcp"===n&&(t[$j.CONN_TYPE]=3),"tls"===n&&(t[$j.CONN_TYPE]=4);break}case"srflx":t[$j.CONN_TYPE]=2}return t}class iU extends lE{constructor(e){super(),op(this,"store",void 0),op(this,"uploadWRTCStatsTimer",void 0),op(this,"uploadOutboundDenoiserStatsTimer",void 0),op(this,"uploadExtStatsTimer",void 0),op(this,"uploadExtUsageStatsTimer",void 0),op(this,"uploadInboundExtStatsTimer",void 0),op(this,"requestStats",void 0),op(this,"requestTransportStats",void 0),op(this,"requestLocalMedia",void 0),op(this,"requestRemoteMedia",void 0),op(this,"requestAllTracks",void 0),op(this,"requestVideoIsReady",void 0),op(this,"requestUploadStats",void 0),op(this,"requestUpload",void 0),op(this,"uploadOutboundStarted",!1),op(this,"uploadInboundStarted",!1),op(this,"uploadTransportStarted",!1),op(this,"uploadExtensionUsageStarted",!1),op(this,"lastRecvStats",void 0),op(this,"lastSendStats",void 0),op(this,"lastFullRecvStats",void 0),op(this,"lastFullSendStats",void 0),op(this,"needUploadRenderFreezeTime",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;let t,n;if(this.uploadTransportStarted&&(t=this.requestStats(),this.store.useP2P&&(n=this.requestStats(!0))),!t&&this.uploadOutboundStarted&&(t=this.requestStats()),!n&&this.uploadInboundStarted&&(n=this.requestStats(!0)),t||n){const r={};if(this.uploadTransportStarted&&t){const i=this.getTransportStats(t,n,e);i&&(r.misc=[i])}if(this.uploadOutboundStarted&&t){const n=this.getOutboundStats(t,e?this.lastSendStats:this.lastFullSendStats,e);n&&(r.outbound=[n])}if(this.uploadInboundStarted&&n){const t=this.getInboundStats(n,e?this.lastRecvStats:this.lastFullRecvStats,e);t&&(r.inbound=t)}this.requestUploadStats(r)}this.lastRecvStats=n,this.lastSendStats=t,e||(this.lastFullRecvStats=n,this.lastFullSendStats=t)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let e=1;this.uploadWRTCStatsTimer=window.setInterval((()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(e!==tU),++e===tU+1&&(e=1)}),eU)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,n){if(!this.requestStats)return;if(n)return null==e.rtt?void 0:{addition:{[$j.RTT]:e.rtt,[$j.CONN_TYPE]:void 0}};const r=rU(e);if(this.store.useP2P){if(t){const e=rU(t);r[$j.CONN_TYPE]+=e[$j.CONN_TYPE]<<3}r[$j.CONN_TYPE]+=110}else r[$j.CONN_TYPE]+=100;return{addition:r}}getOutboundStats(e,t,n){if(!this.requestUploadStats||!this.requestLocalMedia)return;const r=this.requestLocalMedia();if(!r||0===r.length)return;let i,o,s;return r.forEach((r=>{let[a,{track:c,ssrcs:l}]=r;switch(a){case uI.LocalVideoLowTrack:case uI.LocalVideoTrack:if(a===uI.LocalVideoTrack){const r=function(e,t,n,r,i){const o=t.videoSend.find((t=>t.ssrc===e));if(!o)return;const s={},{sentFrame:a,inputFrame:c}=o;if(c&&a){const e=c.frameRate,t=a.frameRate;s[Wj.FREEZE]=function(e,t){let n=!0;return n=!(e<=5)&&(e<=10?t<3:e<=20?t<4:t<5),n}(e,t)?1:0}if(nU(s,Wj.QP_SUM,o.qpSumPerFrame),i)return s;switch(a&&(nU(s,Wj.HEIGHT,a.height),nU(s,Wj.WIDTH,a.width),nU(s,Wj.FRAME_RATE,a.frameRate)),s[Wj.DISABLED]=r._originMediaStreamTrack&&!r._originMediaStreamTrack.enabled||r._mediaStreamTrack&&!r._mediaStreamTrack.enabled?1:0,o.adaptionChangeReason){case"none":s[Wj.ADAPTATION]=0;break;case"cpu":s[Wj.ADAPTATION]=1;break;case"bandwidth":s[Wj.ADAPTATION]=2;break;case"other":s[Wj.ADAPTATION]=3}s[Wj.PLAYER_STATUS]=aC[r._player?r._player.videoElementStatus:"uninit"],nU(s,Wj.NACKS,o.nacksCount),nU(s,Wj.PLIS,o.plisCount),nU(s,Wj.FIRS,o.firsCount),nU(s,Wj.AVG_ENCODE,o.avgEncodeMs);const l=n&&n.videoSend.find((t=>t.ssrc===e));if(l){let e=i?eU:eU*tU;l.timestamp&&o.timestamp&&(e=o.timestamp-l.timestamp),null!=l.packets&&null!=o.packets&&nU(s,Wj.PACKAGE_RATE,1e3*(o.packets-l.packets)/e),null!=o.packetsLost&&null!=l.packetsLost&&nU(s,Wj.PACKAGE_LOST,o.packetsLost-l.packetsLost),null!=l.bytes&&null!=o.bytes&&nU(s,Wj.BITRATE,8*(o.bytes-l.bytes)/e)}return s}(l[0].ssrcId,e,t,c,n),i=n?null:function(e,t,n){const r=t.videoSend.find((t=>t.ssrc===e));if(!r)return null;const i={},o=r.inputFrame,s=o&&o.height||n&&n._videoHeight||0,a=o&&o.width||n&&n._videoWidth||0,c=o&&o.frameRate||0;return nU(i,Hj.HEIGHT,s),nU(i,Hj.WIDTH,a),nU(i,Hj.FRAME_RATE,c),i}(l[0].ssrcId,e,c),s=n?null:function(e){const t={};return nU(t,Wj.RETRANSMIT,e.bitrate.retransmit),nU(t,Wj.TARGET_ENCODED,e.bitrate.targetEncoded),nU(t,Wj.ACTUAL_ENCODED,e.bitrate.actualEncoded),nU(t,Wj.TRANSMIT,e.bitrate.transmit),nU(t,Wj.BANDWIDTH,e.sendBandwidth),t}(e);o=Object.assign({},r,i,s)}else s=n?void 0:function(e,t,n){const r=t.videoSend.find((t=>t.ssrc===e));if(!r)return;const i={},o=r.sentFrame;if(o&&(nU(i,Yj.HEIGHT,o.height),nU(i,Yj.WIDTH,o.width),nU(i,Yj.FRAME_RATE,o.frameRate)),n){const t=n.videoSend.find((t=>t.ssrc===e));if(t){let e=eU*tU;t.timestamp&&r.timestamp&&(e=r.timestamp-t.timestamp),null!=t.packets&&null!=r.packets&&nU(i,Yj.PACKAGE_RATE,1e3*(r.packets-t.packets)/e),null!=r.packetsLost&&null!=t.packetsLost&&nU(i,Yj.PACKAGE_LOST,r.packetsLost-t.packetsLost),null!=t.bytes&&null!=r.bytes&&nU(i,Yj.BITRATE,8*(r.bytes-t.bytes)/e)}}return i}(l[0].ssrcId,e,t);break;case uI.LocalAudioTrack:i=n?void 0:function(e,t,n,r){const i=t.audioSend.find((t=>t.ssrc===e));if(!i)return;const o={};o[Jj.DISABLED]=r._originMediaStreamTrack&&!r._originMediaStreamTrack.enabled||r._mediaStreamTrack&&!r._mediaStreamTrack.enabled?1:0;const s=r._source.getAccurateVolumeLevel(),a=i.inputLevel;nU(o,Jj.LEVEL,100*(null==a?s:a)),nU(o,Qj.PCM_LEVEL,100*s),nU(o,Jj.AEC_RETURN_LOSS,i.aecReturnLoss),nU(o,Jj.AEC_RETURN_LOSS_ENH,i.aecReturnLossEnhancement),o[Jj.FREEZE]=0;const c=n&&n.audioSend.find((t=>t.ssrc===e));if(c){let e=eU*tU;c.timestamp&&i.timestamp&&(e=i.timestamp-c.timestamp),null!=c.bytes&&null!=i.bytes&&nU(o,Jj.BITRATE,8*(i.bytes-c.bytes)/e),null!=c.packets&&null!=i.packets&&nU(o,Jj.PACKAGE_RATE,1e3*(i.packets-c.packets)/e)}return o}(l[0].ssrcId,e,t,c)}})),{high:o,low:s,audio:i}}getInboundStats(e,t,n){if(!this.requestRemoteMedia)return;const r=this.requestRemoteMedia()||[],i=[];return r.forEach((r=>{let[o,s]=r;const a={peer:o.uid};if(s.has(aI.VIDEO)&&o.videoTrack){const r=o._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(o._videoSSRC)||!1,i=o.videoTrack?function(e,t,n,r,i,o,s){const a=t.videoRecv.find((t=>t.ssrc===e));if(!a)return;const c={},{receivedFrame:l,outputFrame:u,decodeFrameRate:d}=a,p=n&&n.videoRecv.find((t=>t.ssrc===e));if(c[qj.FREEZE]=i&&gU.isRemoteVideoFreeze(r,a,p)?1:0,nU(c,Kj.FRAME_RATE_DECODE,d),nU(c,qj.QP_SUM,a.qpSumPerFrame),a.framesRateFirefox&&nU(c,qj.FRAME_RATE,a.framesRateFirefox),l&&nU(c,qj.FRAME_RATE,l.frameRate),p){const e=t.timestamp-n.timestamp||(s?eU:tU*eU);null!=a.packetsLost&&null!=p.packetsLost&&nU(c,qj.PACKAGE_LOST,a.packetsLost-p.packetsLost),null!=p.bytes&&null!=a.bytes&&nU(c,qj.BITRATE,8*(a.bytes-p.bytes)/e),null!=p.packets&&null!=a.packets&&nU(c,qj.PACKAGE_RATE,1e3*(a.packets-p.packets)/e)}if(s)return c;if(l?(nU(c,qj.HEIGHT,l.height),nU(c,qj.WIDTH,l.width)):r&&(nU(c,qj.HEIGHT,r._videoHeight||0),nU(c,qj.WIDTH,r._videoWidth||0)),u&&nU(c,Kj.FRAME_RATE_RENDER,u.frameRate),nU(c,qj.JITTER_BUFFER,a.jitterBufferMs),nU(c,qj.CURRENT_DELAY,a.currentDelayMs),nU(c,qj.FIRS,a.firsCount),nU(c,qj.NACKS,a.nacksCount),nU(c,qj.PLIS,a.plisCount),r){c[qj.DISABLED]=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?0:1;const e=r._player;if(e){const{freezeTimeCounterList:t,renderFreezeAccTime:n}=e;if(t&&t.length>0&&nU(c,Kj.FREEZE_TIME,t.splice(0,1)[0]),o&&"visible"===MO.visibility){const t=Math.min(6e3,n);e.renderFreezeAccTime=Math.max(0,n-t),nU(c,Kj.FREEZE_TIME_RENDER,t)}}}if(c[qj.PLAYER_STATUS]=aC[r._player?r._player.videoElementStatus:"uninit"],p&&void 0!==a.totalInterFrameDelay&&void 0!==a.totalSquaredInterFrameDelay&&void 0!==p.totalInterFrameDelay&&void 0!==p.totalSquaredInterFrameDelay){const e=a.totalInterFrameDelay-p.totalInterFrameDelay,t=a.totalSquaredInterFrameDelay-p.totalSquaredInterFrameDelay,n=a.framesDecodeCount-p.framesDecodeCount,r=e/n*1e3,i=Math.round(1e3*Math.sqrt((t-Math.pow(e,2)/n)/n));!isNaN(i)&&r+i>Math.max(3*r,r+150)&&(c[qj.I_FRAME_DELAY]=i)}return c}(o._videoSSRC,e,t,o.videoTrack,!0===r,this.needUploadRenderFreezeTime,n):void 0;i&&(a.video=i)}if(s.has(aI.AUDIO)&&o.audioTrack){const r=o.audioTrack?function(e,t,n,r,i){const o=t.audioRecv.find((t=>t.ssrc===e));if(!o)return;const s={},a=n&&n.audioRecv.find((t=>t.ssrc===e)),{receivedFrames:c,droppedFrames:l}=o;var u;if(nU(s,Xj.JITTER,o.jitterMs),null!=c&&null!=l&&(s[Xj.FREEZE]=0===(u=c)||100*l/u>20?1:0),a){const e=t.timestamp-n.timestamp||(i?eU:eU*tU);null!=o.packets&&null!=a.packets&&nU(s,Xj.PACKAGE_RATE,1e3*(o.packets-a.packets)/e),null!=a.bytes&&null!=o.bytes&&nU(s,Xj.BITRATE,8*(o.bytes-a.bytes)/e),null!=o.packetsLost&&null!=a.packetsLost&&nU(s,Xj.PACKAGE_LOST,o.packetsLost-a.packetsLost)}if(i)return s;const d=r._source.getAccurateVolumeLevel(),p=o.outputLevel;if(nU(s,Zj.LEVEL,100*(null==p?d:p)),nU(s,Xj.PCM_LEVEL,100*d),r&&(s[Xj.DISABLED]=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?0:1),nU(s,Xj.JITTER_BUFFER,o.jitterBufferMs),nU(s,Xj.CURRENT_DELAY,o.jitterBufferMs),s[Xj.PLAYER_STATUS]=aC[VC.getPlayerState(r.getTrackId())],a){const e=o.concealedSamples-a.concealedSamples;e>0&&nU(s,Xj.CONCEALED_SAMPLES,e)}return s}(o._audioSSRC,e,t,o.audioTrack,n):void 0;r&&(a.audio=r)}(a.video||a.audio)&&i.push(a)})),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,i}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval((()=>{if(!this.requestAllTracks||!this.requestUpload)return;const e=(this.requestAllTracks()||[]).find((e=>e instanceof tO));if(e&&e._external.getDenoiserStats){const t=e._external.getDenoiserStats();t&&this.requestUpload(gT.DENOISER_STATS,t)}}),2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval((()=>{this.requestAllTracks&&this.requestUpload&&this.requestAllTracks().forEach((e=>{e.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval((()=>{this.requestUpload&&this.requestRemoteMedia&&(this.requestRemoteMedia()||[]).forEach((e=>{let[t,n]=e;n.has(aI.VIDEO)&&t.videoTrack&&t.videoTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)})),n.has(aI.AUDIO)&&t.audioTrack&&t.audioTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const e=new Map;this.uploadExtUsageStatsTimer=window.setInterval((async()=>{const t=Date.now(),n={connectionInterval:bS("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:t};let r=[];const i=this.requestAllTracks&&this.requestAllTracks()||[];for(const e of i)!e.muted&&e.enabled&&(r=r.concat(await e.getProcessorUsage()));const o=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[e,c]of o)c.has(aI.VIDEO)&&e.videoTrack&&(r=r.concat(await e.videoTrack.getProcessorUsage())),c.has(aI.AUDIO)&&e.audioTrack&&(r=r.concat(await e.audioTrack.getProcessorUsage()));if(0===r.length)return;n.details=function(e,t){const n={};for(const{id:s,value:a,level:c,direction:l}of e){var r;const e=null!==(r=t.get(s))&&void 0!==r?r:0,u=2===a?e+bS("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:e;var i,o;t.set(s,u),n[s]?(2===a&&(n[s].value=a),c>n[s].level&&(n[s].level=c),"remote"===l&&(n[s].remoteUidCount+=1),n[s].totalTs=null!==(i=t.get(s))&&void 0!==i?i:0):n[s]={value:a,level:c,remoteUidCount:"local"===l?0:1,totalTs:null!==(o=t.get(s))&&void 0!==o?o:0}}return Object.keys(n).map((e=>{const{level:t,value:r,totalTs:i}=n[e];return{id:e,level:t,value:r,totalTs:i}}))}(r,e);const s=Date.now(),a=s>t?s:t+1;this.requestUpload&&this.requestUpload(gT.EXTENSION_USAGE_STATS,{usageStats:n,sendTs:a})}),bS("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}}class oU{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){op(this,"uid",void 0),op(this,"_uintid",void 0),op(this,"_trust_in_room_",!0),op(this,"_trust_audio_enabled_state_",!0),op(this,"_trust_video_enabled_state_",!0),op(this,"_trust_audio_mute_state_",!0),op(this,"_trust_video_mute_state_",!0),op(this,"_audio_muted_",!1),op(this,"_video_muted_",!1),op(this,"_audio_enabled_",!0),op(this,"_video_enabled_",!0),op(this,"_audio_added_",!1),op(this,"_video_added_",!1),op(this,"_is_pre_created",!1),op(this,"_video_pre_subscribed",!1),op(this,"_audio_pre_subscribed",!1),op(this,"_trust_video_stream_added_state_",!0),op(this,"_trust_audio_stream_added_state_",!0),op(this,"_audioTrack",void 0),op(this,"_videoTrack",void 0),op(this,"_dataChannels",[]),op(this,"_audioSSRC",void 0),op(this,"_videoSSRC",void 0),op(this,"_audioOrtc",void 0),op(this,"_videoOrtc",void 0),op(this,"_cname",void 0),op(this,"_rtxSsrcId",void 0),op(this,"_videoMid",void 0),op(this,"_audioMid",void 0),this.uid=e,this._uintid=t}}var sU;function aU(e,t){var n;let r;switch(t){case uI.LocalAudioTrack:r=QT.Audio;break;case uI.LocalVideoTrack:r=Or(n=e._hints).call(n,Bw.SCREEN_TRACK)?QT.Screen:QT.High;break;case uI.LocalVideoLowTrack:r=QT.Low}return r}function cU(e){const t=Tw();if(e.some((e=>e._bypassWebAudio)))throw new Wy(Gy.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new Wy(Gy.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function lU(e,t){cU(e);const n=t||new rO;return e.forEach((e=>n.addAudioTrack(e))),n}function uU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uU(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY"}(sU||(sU={}));class pU extends lE{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(pI.StateChange,t,this._state)}constructor(e,t){super(),op(this,"store",void 0),op(this,"statsUploader",void 0),op(this,"sendConnection",void 0),op(this,"recvConnection",void 0),op(this,"localTrackMap",new Map),op(this,"remoteUserMap",new Map),op(this,"localDataChannels",[]),op(this,"pendingLocalTracks",[]),op(this,"pendingRemoteTracks",[]),op(this,"statsCollector",void 0),op(this,"dtlsFailedCount",0),op(this,"sendMutex",new h_("P2PChannel2-send-mutex")),op(this,"recvMutex",new h_("P2PChannel2-recv-mutex")),op(this,"_state",dI.Disconnected),op(this,"_restartStates",["disconnected","failed"]),op(this,"reconnectInterval",void 0),op(this,"uploadUnplinkStarted",!1),op(this,"uploadDownlinkStarted",!1),op(this,"uplinkStateUploadInterval",void 0),op(this,"downlinkStatsUploadInterval",void 0),op(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==dI.Connected)return void n(new Wy(Gy.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const s=r.find((e=>"videoLowTrack"===e[0]));s&&s[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));let a=!1;var i,o;a="video"===e.trackMediaType?!(null===(i=this.localTrackMap.get(uI.LocalAudioTrack))||void 0===i||!i.track._muted):void 0===(null===(o=this.localTrackMap.get(uI.LocalVideoTrack))||void 0===o?void 0:o.id);const c=this.createMuteMessage(r);await NE(this,pI.RequestMuteLocal,c);const l="video"===e.trackMediaType?wI.MUTE_LOCAL_VIDEO:wI.MUTE_LOCAL_AUDIO;await NE(this,pI.RequestP2PMuteLocal,{action:l,message:c,isMuteAll:a}),t()}catch(e){n(e)}finally{r()}})),op(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==dI.Connected)return void n(new Wy(Gy.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();await this.sendConnection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const i=this.createUnmuteMessage(r),o="video"===e.trackMediaType?wI.UNMUTE_LOCAL_VIDEO:wI.UNMUTE_LOCAL_AUDIO;await NE(this,pI.RequestP2PMuteLocal,{action:o,message:i}),t()}catch(e){n(e)}finally{r()}})),op(this,"handleUpdateVideoEncoder",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{const n=this.localTrackMap.get(uI.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==dI.Connected)return void t();const{id:r,track:i}=n;r&&(await this.sendConnection.updateSendParameters(r,i),await this.sendConnection.updateEncoderConfig(r,i),this.emit(pI.UpdateVideoEncoder,i)),t()}catch(e){n(e)}finally{r()}})),op(this,"handleSetOptimizationMode",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleSetOptimizationMode");try{const n=this.localTrackMap.get(uI.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==dI.Connected)return;const{id:r,track:i}=n;r&&await this.sendConnection.updateSendParameters(r,i),t()}catch(e){n(e)}finally{r()}})),op(this,"handleReplaceTrack",(async(e,t,n,r)=>{let i;BS.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var o;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.sendConnection||!n||void 0===n[1].id||this.state!==dI.Connected)return void t();if(await(null===(o=this.sendConnection)||void 0===o?void 0:o.replaceTrack(e,n[1].id)),n[0]===uI.LocalVideoTrack&&Tw().supportDualStreamEncoding){const t=this.localTrackMap.get(uI.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new cy(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var s;null===(s=i)||void 0===s||s()}})),op(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),op(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),op(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),op(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new iU(e),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval((()=>{[this.sendConnection,this.recvConnection].forEach((e=>{e&&("disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))}))}),bS("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new Wy(Gy.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e,t,n,r,i,o){throw new Wy(Gy.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let n;try{if(t){this.recvConnection&&(BS.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),n=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new zj(e,this.store,ET.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const r=await this.recvConnection.establish(t);return{iceParameters:r.iceParameters,dtlsParameters:r.dtlsParameters,sdp:r.sdp}}{this.state=dI.New,this.sendConnection&&(BS.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),n=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new zj(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const t=await this.sendConnection.establish();return{iceParameters:t.iceParameters,dtlsParameters:t.dtlsParameters,sdp:t.sdp}}}finally{n&&n()}}async p2pConnect(e){if(!this.sendConnection)throw new Wy(Gy.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=dI.Connected}async addRemoteCandidate(e,t){if(t===ET.RECEIVE_ONLY){if(!this.sendConnection)throw new Wy(Gy.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new Wy(Gy.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,n){var r=this;return DP((function*(){const i=yield TP(r.sendMutex.lock("From P2PChannel.publish"));try{if(!r.sendConnection||r.state!==dI.Connected){r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(t))}r.store.pubId=r.store.pubId+1,bP.markPublishStart(r.store.clientId,r.store.pubId);const i=r.filterTobePublishedTracks(e,t,n);if(0===i.length)return void(yield TP(r.tryToUnmuteAudio(e)));i.forEach((e=>{let{track:t,type:n}=e;const i=Date.now();r.store.publish(t.getTrackId(),n===uI.LocalAudioTrack?"audio":"video",i)})),r.bindLocalTrackEvents(i);const o=yield TP(r.sendConnection.send(i.map((e=>{let{track:t}=e;return t})),r.store.codec,r.store.audioCodec)),s=(yield TP(o.next())).value,a=r.createGatewayPublishMessage(i,s);try{yield a}catch(e){throw o.throw(e),(null==e?void 0:e.code)===Gy.WS_ABORT&&i.forEach((e=>{let{track:t}=e;-1===r.pendingLocalTracks.indexOf(t)&&r.pendingLocalTracks.push(t)})),r.unbindLocalTrackEvents(i),e}yield TP(o.next()),i.forEach((e=>{let{type:t}=e;r.statsCollector.addLocalStats(t)})),r.statsUploader.startUploadOutboundStats(),r.assignLocalTracks(i,s),i.forEach((e=>{let{track:t,type:n}=e;const i=Date.now();r.store.publish(t.getTrackId(),n===uI.LocalAudioTrack?"audio":"video",void 0,i)})),r.startUploadUplinkState()}finally{i()}}))()}async unpublish(e){if(!this.sendConnection||this.state!==dI.Connected)return void(0===e.length?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter((t=>!Or(e).call(e,t))));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));n&&n[1].track.close();const r=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===dI.Connected)return n&&n[1].track.close(),r;e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}))}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const e=()=>{const e=[],t=[];Array.from(this.localTrackMap.entries()).forEach((n=>{let[r,{track:i,ssrcs:o}]=n;const s={stream_type:aU(i,r),ssrcs:o};i._muted||!i._enabled?e.push(s):t.push(s)})),e.length>0&&e.forEach((e=>{NE(this,pI.RequestMuteLocal,[e])})),t.length>0&&t.forEach((e=>{NE(this,pI.RequestUnmuteLocal,[e])}))};e(),this.uplinkStateUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return DP((function*(){throw new Wy(Gy.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")}))()}async republish(){this.pendingLocalTracks.length>0&&(BS.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await IE(this,pI.RequestRePublish,this.pendingLocalTracks),this.emit(pI.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new Wy(Gy.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,n,r){var i;if(!this.recvConnection)throw new Wy(Gy.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if(null!==(i=this.remoteUserMap.get(e))&&void 0!==i&&i.has(t))return;const{track:o,mid:s,transceiver:a}=await this.recvConnection.receive(t,[{ssrcId:n}],String(e.uid),r);t===aI.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new RO(o,e.uid,e._uintid,this.store),BS.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),a&&e._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=n,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new AO(o,e.uid,e._uintid,this.store),BS.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),a&&e._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._videoTrack));const c=this.remoteUserMap.get(e);c?c.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const l=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:i}=n;return r.uid===e.uid&&t===i}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(pI.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,n,r){if(!this.recvConnection)throw new Wy(Gy.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:n}],String(e.uid),r)}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:i}=n;return void 0!==t?r.uid===e.uid&&t===i:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.recvConnection||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===aI.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===aI.VIDEO){var i;null===(i=e._videoTrack)||void 0===i||i._destroy(),e._videoTrack=void 0}})),!this.recvConnection)return;const i=this.filterTobeUnSubscribedTracks(e,t);0!==i.length&&(await this.recvConnection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),i.forEach((e=>{let[t,{kind:r}]=e;var i,o;if(r===aI.VIDEO&&t._videoSSRC&&(null===(i=this.recvConnection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===aI.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(r===aI.AUDIO){var s;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0)}})),i.forEach((e=>{let[,{kind:t}]=e;NE(this,pI.RequestP2PMuteRemote,t)})))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const e=()=>Array.from(this.remoteUserMap.entries()).forEach((e=>{let[,t]=e;[aI.VIDEO,aI.AUDIO].forEach((e=>{t.has(e)?NE(this,pI.RequestP2PUnmuteRemote,e):NE(this,pI.RequestP2PMuteRemote,e)}))}));e(),this.downlinkStatsUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new Wy(Gy.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new Wy(Gy.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new Wy(Gy.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new Wy(Gy.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);if(!n)return void BS.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void BS.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===aI.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.recvConnection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||BS.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):BS.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(uI.LocalAudioTrack);if((null==t?void 0:t.track)instanceof rO){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==uI.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===uI.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===uI.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}reportPublishEvent(e,t,n,r,i){if(e){const n=this.localTrackMap.get(uI.LocalAudioTrack),o=r?this.localTrackMap.get(uI.LocalVideoLowTrack):this.localTrackMap.get(uI.LocalVideoTrack);eT.publish(this.store.sessionId,{eventElapse:bP.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(Bw.SCREEN_TRACK)),audio:!!n,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;n||(n=[]);const s=n.find((e=>e instanceof eO)),a=r?null===(o=this.localTrackMap.get(uI.LocalVideoTrack))||void 0===o?void 0:o.track:n.find((e=>e instanceof bO));eT.publish(this.store.sessionId,{eventElapse:bP.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(Bw.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===aI.VIDEO?n._videoSSRC:n._audioSSRC;i&&eT.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===aI.VIDEO,audio:r===aI.AUDIO,peerid:n.uid,subscribeRequestid:r===aI.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:bP.measureFromSubscribeStart(this.store.clientId,i)})}reset(){BS.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new h_("P2PChannel2-send-mutex"),this.sendMutex=new h_("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(uI.LocalAudioTrack);if((null==e?void 0:e.track)instanceof rO){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=dI.Disconnected}getStats(e){var t,n;return e?null===(n=this.recvConnection)||void 0===n?void 0:n.getStats():null===(t=this.sendConnection)||void 0===t?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.recvConnection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(uI.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(uI.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof bO||t&&t.track instanceof eO?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(hp(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(uI.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=eh(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(BS.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=dI.Reconnecting,bS("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case uI.LocalVideoTrack:Or(t=r._hints).call(t,Bw.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case uI.LocalAudioTrack:r instanceof rO?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case uI.LocalVideoLowTrack:}})),this.emit(pI.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(hp(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(pI.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),BS.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof oU?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let n,r;if(e===ET.SEND_ONLY){if(!this.sendConnection)throw new Wy(Gy.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");n=await this.sendMutex.lock("From P2PChannel.restartICE"),r=this.sendConnection}else{if(!this.recvConnection)throw new Wy(Gy.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");n=await this.recvMutex.lock("From P2PChannel.restartICE"),r=this.recvConnection}try{if(t){const e=await r.restartICE(t);return r.isInRestartIce=!1,e}{const e=await r.restartICE();if(e){const t=await IE(this,pI.RequestP2PRestartICE,{direction:ET.RECEIVE_ONLY,iceParameter:e});await r.restartICE(t),r.isInRestartIce=!1}}}finally{n()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const e=this.sendConnection.getStats(),t=this.localTrackMap.get(uI.LocalVideoTrack),n=this.localTrackMap.get(uI.LocalAudioTrack),r=e.videoSend.find((e=>{var n;return e.ssrc===(null==t||null===(n=t.ssrcs)||void 0===n?void 0:n[0].ssrcId)})),i=e.audioSend.find((e=>{var t;return e.ssrc===(null==n||null===(t=n.ssrcs)||void 0===t?void 0:t[0].ssrcId)}));if(!r||!i)return 1;const o=wE(this,pI.NeedSignalRTT),s=r?r.rttMs:void 0,a=i?i.rttMs:void 0,c=s&&a?(s+a)/2:s||a,l=(c&&o?(c+o)/2:c||o)||0,u=100*e.sendPacketLossRate*.7/50+.3*l/1500,d=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,p=null==t?void 0:t.track;if(p&&p._encoderConfig&&-1===p._hints.indexOf(Bw.SCREEN_TRACK)){const t=p._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return rT[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][d]}}return d}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const e=this.recvConnection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const i=r._audioSSRC,o=r._videoSSRC,s=e.audioRecv.find((e=>e.ssrc===i)),a=e.videoRecv.find((e=>e.ssrc===o));if(!s&&!a)return void(t+=1);const c=wE(this,pI.NeedSignalRTT),l=e.rtt,u=(l&&c?(l+c)/2:l||c)||0,d=s?s.jitterMs:void 0,p=e.recvPacketLossRate;let h=.7*p*100/50+.3*u/1500;d&&(h=.6*p*100/50+.2*u/1500+.2*d/400),t+=h<.1?1:h<.17?2:h<.36?3:h<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new cy(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}filterTobePublishedTracks(e,t,n){const r=[],i=Tw(),o=this.getAllTracks();e=GE(e=e.filter((e=>-1===o.indexOf(e))));let s=!1,a=!1;for(const c of e){if(c instanceof bO&&(this.localTrackMap.has(uI.LocalVideoTrack)||s?new Wy(Gy.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:uI.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:uI.LocalVideoLowTrack})}if(c instanceof eO){const e=this.localTrackMap.get(uI.LocalAudioTrack);if(e){if(!(e.track instanceof rO))throw new Wy(Gy.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new Wy(Gy.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0)}else if(a){const e=r.find((e=>{let{type:t}=e;return t===uI.LocalAudioTrack}));if(!(e.track instanceof rO))throw new Wy(Gy.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new Wy(Gy.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c)}else{if(!i.webAudioMediaStreamDest||c instanceof rO||c._bypassWebAudio)r.push({track:c,type:uI.LocalAudioTrack});else{const e=new rO;e.addAudioTrack(c),r.push({track:e,type:uI.LocalAudioTrack})}a=!0}}}return r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=GE(e=e.filter((e=>-1!==n.indexOf(e))));for(const r of e){if(r instanceof eO){const e=this.localTrackMap.get(uI.LocalAudioTrack);if(!e)continue;e.track instanceof rO?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([uI.LocalAudioTrack,e]),e.track.close())):t.push([uI.LocalAudioTrack,e])}if(r instanceof bO){const e=this.localTrackMap.get(uI.LocalVideoTrack);if(!e)continue;t.push([uI.LocalVideoTrack,e]);const n=this.localTrackMap.get(uI.LocalVideoLowTrack);n&&t.push([uI.LocalVideoLowTrack,n])}}return t}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case uI.LocalVideoTrack:t.addListener(zw.GET_STATS,this.handleGetLocalVideoStats),t.addListener(zw.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(zw.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(zw.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(zw.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.addListener(zw.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(zw.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(zw.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case uI.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case uI.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof rO?e.trackList.forEach((e=>{e.addListener(zw.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(zw.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(zw.GET_STATS,this.handleGetLocalAudioStats),e.addListener(zw.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(zw.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(zw.GET_STATS,this.handleGetLocalAudioStats),e.addListener(zw.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(zw.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(zw.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(zw.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(zw.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case uI.LocalVideoTrack:t.off(zw.GET_STATS,this.handleGetLocalVideoStats),t.off(zw.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(zw.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(zw.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(zw.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.off(zw.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(zw.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(zw.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case uI.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case uI.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof rO?e.trackList.forEach((e=>{e.off(zw.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(zw.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(zw.GET_STATS,this.handleGetLocalAudioStats),e.off(zw.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(zw.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(zw.GET_STATS,this.handleGetLocalAudioStats),e.off(zw.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(zw.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(zw.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(zw.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(zw.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof AO&&t.addListener(zw.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof RO&&t.addListener(zw.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(zw.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(aI.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(aI.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let i,{track:o,type:s}=e;switch(s){case uI.LocalAudioTrack:i=QT.Audio;break;case uI.LocalVideoTrack:i=Or(r=o._hints).call(r,Bw.SCREEN_TRACK)?QT.Screen:QT.High;break;case uI.LocalVideoLowTrack:i=QT.Low}return{kind:s===uI.LocalAudioTrack?aI.AUDIO:aI.VIDEO,stream_type:i,mid:t[n].id,ssrcs:t[n].localSSRC,isMuted:o.muted||!o.enabled}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case uI.LocalVideoTrack:n=Or(t=i._hints).call(t,Bw.SCREEN_TRACK)?QT.Screen:QT.High;break;case uI.LocalAudioTrack:n=QT.Audio;break;case uI.LocalVideoLowTrack:n=QT.Low}return{stream_type:n,ssrcs:o,mid:s}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:i}=e;this.localTrackMap.set(i,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var n;BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(pI.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(e.isInRestartIce=!1),Or(n=this._restartStates).call(n,t)&&!e.isInRestartIce&&("disconnected"===t&&await n_(800),"disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),eT.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:hE.TRACER}).onSuccess(),this.emit(pI.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(hp(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(qw.FIRST_FRAME_DECODED),eT.firstRemoteFrame(this.store.sessionId,YS.FIRST_AUDIO_DECODE,qS.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:bP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(hp(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&eT.firstRemoteFrame(this.store.sessionId,YS.FIRST_AUDIO_RECEIVED,qS.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:bP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(hp(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&eT.firstRemoteFrame(this.store.sessionId,YS.FIRST_VIDEO_RECEIVED,qS.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:bP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(pI.ConnectionTypeChange,n),BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(wN(t))," -> ").concat(JSON.stringify(wN(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(wN(t))," -> ").concat(JSON.stringify(wN(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(pI.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){const t=e===ET.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,BS.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===ET.SEND_ONLY?this.restartICE(e):IE(this,pI.RequestP2PRestartICE,{direction:ET.SEND_ONLY}))}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(uI.LocalAudioTrack);if(e instanceof eO&&(null==n?void 0:n.track)instanceof rO)return n.track.isActive||t.push([uI.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===uI.LocalVideoTrack)){const e=this.localTrackMap.get(uI.LocalVideoLowTrack);e&&t.push([uI.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(uI.LocalAudioTrack);if(e instanceof eO&&(null==n?void 0:n.track)instanceof rO)return n.track.isActive&&t.push([uI.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===uI.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(uI.LocalVideoLowTrack);e&&t.push([uI.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case uI.LocalAudioTrack:n=QT.Audio;break;case uI.LocalVideoTrack:n=Or(t=i._hints).call(t,Bw.SCREEN_TRACK)?QT.Screen:QT.High;break;case uI.LocalVideoLowTrack:n=QT.Low}return{stream_type:n,ssrcs:o,mid:s}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case uI.LocalAudioTrack:n=QT.Audio;break;case uI.LocalVideoTrack:n=Or(t=i._hints).call(t,Bw.SCREEN_TRACK)?QT.Screen:QT.High;break;case uI.LocalVideoLowTrack:n=QT.Low}return{stream_type:n,ssrcs:o,mid:s}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((t=>{let[r,i]=t;n.push([e,{kind:r,id:i}])}));return n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:i}]=e;switch(r){case aI.VIDEO:return void(n._videoSSRC&&t.push({stream_type:aI.VIDEO,ssrcId:n._videoSSRC}));case aI.AUDIO:return void(n._audioSSRC&&t.push({stream_type:aI.AUDIO,ssrcId:n._audioSSRC}))}})),t}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(uI.LocalVideoTrack),n=this.localTrackMap.get(uI.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return"connected"!==e&&"connected"!==t}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof eO){const n=this.filterTobeUnmutedTracks(e[t]);if(0===n.length)continue;const r=this.createUnmuteMessage(n);return void await NE(this,pI.RequestUnmuteLocal,r)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter((e=>{let[,{ssrcs:t}]=e;return!!t})),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.recvConnection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(pI.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(pI.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await n_(g_(this.dtlsFailedCount,m_)),this.emit(pI.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(uI.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof bO))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof bO)).length>1)throw new Wy(Gy.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof eO)).length>1&&(e.some((e=>e instanceof eO&&e._bypassWebAudio))||!Tw().webAudioMediaStreamDest))throw new Wy(Gy.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof bO&&this.pendingLocalTracks.some((e=>e instanceof bO)))throw new Wy(Gy.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof eO&&this.pendingLocalTracks.some((e=>e instanceof eO))&&(!Tw().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof eO&&e._bypassWebAudio))))throw new Wy(Gy.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!bS("DISABLE_DUAL_STREAM_USE_ENCODING")&&Tw().supportDualStreamEncoding,r=dU(dU({},{width:160,height:120,framerate:15,bitrate:50}),t);let i;i=n?e._mediaStreamTrack.clone():Vj(e,r);const o=r_(8,"track-low-"),s=new bO(i,dU(dU({},n&&{scaleResolutionDownBy:NN(r,e)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}),void 0,void 0,o);return s.on(Ww.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,Vw.LOW_STREAM)})),s._hints.push(Bw.LOW_STREAM),e.addListener(zw.NEED_CLOSE,(()=>{s.close()})),s}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,n,r){var i;const o=Array.from(hp(i=this.remoteUserMap).call(i)).find((t=>t._videoSSRC===e));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const i=this.store.keyMetrics,s=i.subscribe.find((e=>e.userId===o.uid&&"video"===e.type));eT.firstRemoteVideoDecode(this.store.sessionId,YS.FIRST_VIDEO_DECODE,qS.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:bP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:i.requestAPEnd||0,apStart:i.requestAPStart||0,joinGwEnd:i.joinGatewayEnd||0,joinGwStart:i.joinGatewayStart||0,pcEnd:i.peerConnectionEnd||0,pcStart:i.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:r?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.recvConnection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const o=await this.recvConnection.getRemoteSSRC(i);return void 0!==o&&o!==n}resetConnection(e){BS.debug("[".concat(this.store.clientId,"] [P2PChannel2] reset connection to ").concat(e)),this.state===dI.Connected?(BS.debug("[".concat(this.store.clientId,"] [P2PChannel2] fallback to websocket but P2PChannel2 state still connected, disconnect first")),this.disconnectForReconnect()):(this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0))}async publishDataChannel(e){throw new Wy(Gy.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new Wy(Gy.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new Wy(Gy.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new Wy(Gy.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new Wy(Gy.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new Wy(Gy.NOT_SUPPORTED)}async preConnect(e,t,n,r,i,o){throw new Wy(Gy.NOT_SUPPORTED)}getEstablishParams(){throw new Wy(Gy.NOT_SUPPORTED)}async reSubscribe(e){throw new Wy(Gy.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new Wy(Gy.NOT_SUPPORTED)}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===uI.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,Vw.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}}function hU(e){return function(t,n,r){const i=t[n];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return r.value=async function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];switch(e){case sU.SEND_ONLY:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e()}}case sU.RECEIVE_ONLY:{const e=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e()}}default:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n)),t=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e(),t()}}}},r}}function fU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fU(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}MT([hU(sU.SEND_ONLY),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],pU.prototype,"p2pConnect",null),MT([hU(sU.SEND_ONLY),DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],pU.prototype,"unpublish",null),MT([hU(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",cy)],pU.prototype,"unpublishLowStream",null),MT([hU(sU.RECEIVE_ONLY),DT("design:type",Function),DT("design:paramtypes",[oU,String,Number,String]),DT("design:returntype",cy)],pU.prototype,"subscribe",null),MT([hU(sU.RECEIVE_ONLY),DT("design:type",Function),DT("design:paramtypes",[oU,String,Number,String]),DT("design:returntype",cy)],pU.prototype,"mockSubscribe",null),MT([hU(sU.RECEIVE_ONLY),DT("design:type",Function),DT("design:paramtypes",[oU,String,Boolean]),DT("design:returntype",cy)],pU.prototype,"unsubscribe",null),MT([hU(sU.RECEIVE_ONLY),DT("design:type",Function),DT("design:paramtypes",[oU,String]),DT("design:returntype",cy)],pU.prototype,"muteRemote",null),MT([hU(sU.RECEIVE_ONLY),DT("design:type",Function),DT("design:paramtypes",[oU,String]),DT("design:returntype",cy)],pU.prototype,"unmuteRemote",null),MT([hU(sU.RECEIVE_ONLY),DT("design:type",Function),DT("design:paramtypes",[oU,String]),DT("design:returntype",cy)],pU.prototype,"hasRemoteMediaWithLock",null),MT([hU(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",cy)],pU.prototype,"disconnectForReconnect",null),MT([hU(sU.RECEIVE_ONLY),DT("design:type",Function),DT("design:paramtypes",[oU,String,Number]),DT("design:returntype",cy)],pU.prototype,"remoteMediaSsrcChanged",null);class gU{constructor(e){op(this,"store",void 0),op(this,"onStatsException",void 0),op(this,"onUploadPublishDuration",void 0),op(this,"onStatsChanged",void 0),op(this,"localStats",new Map),op(this,"remoteStats",new Map),op(this,"updateStatsInterval",void 0),op(this,"trafficStats",void 0),op(this,"trafficStatsPeerList",[]),op(this,"uplinkStats",void 0),op(this,"exceptionMonitor",void 0),op(this,"p2pChannel",void 0),op(this,"scalabilityMode",sT.L1T1),op(this,"updateStats",(()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))})),this.store=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new EP,this.exceptionMonitor.on("exception",((e,t,n)=>{this.onStatsException&&this.onStatsException(e,t,n)}))}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(uI.LocalAudioTrack)||mU({},Jw)}getLocalVideoTrackStats(){return this.localStats.get(uI.LocalVideoTrack)||mU({},Xw)}getRemoteAudioTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppad+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.audioStats;i&&(n[e]=t(e,i))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{audioStats:i}]=e;i&&(n[r]=t(r,i))}));return n}getRemoteNetworkQualityStats(e){const t={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.networkStats;r&&(t[e]=r)}else Array.from(this.remoteStats.entries()).forEach((e=>{let[n,{networkStats:r}]=e;r&&(t[n]=r)}));return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppvd+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.videoStats;i&&(n[e]=t(e,i))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{videoStats:i}]=e;i&&(n[r]=t(r,i))}));return n}getRTCStats(){let e=0,t=0,n=0,r=0;const i=this.localStats.get(uI.LocalAudioTrack);i&&(e+=i.sendBytes,t+=i.sendBitrate);const o=this.localStats.get(uI.LocalVideoTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate);const s=this.localStats.get(uI.LocalVideoLowTrack);s&&(e+=s.sendBytes,t+=s.sendBitrate),this.remoteStats.forEach((e=>{let{audioStats:t,videoStats:i}=e;t&&(n+=t.receiveBytes,r+=t.receiveBitrate),i&&(n+=i.receiveBytes,r+=i.receiveBitrate)}));let a=1;return this.trafficStats&&(a+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:a,SendBitrate:t,SendBytes:e,RecvBytes:n,RecvBitrate:r,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){e.peer_delay=e.peer_delay.filter((e=>void 0!==e.B_ppad||void 0!==e.B_ppvd)),e.peer_delay.filter((e=>-1===this.trafficStatsPeerList.indexOf(e.peer_uid))).forEach((e=>{var t;const n=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),r=null!=n&&n.videoSSRC?bP.measureFromSubscribeStart(this.store.clientId,n.videoSSRC):0,i=null!=n&&n.audioSSRC?bP.measureFromSubscribeStart(this.store.clientId,n.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,r>i?r:i),this.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}updateUplinkStats(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&BS.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,n){if(!e)return!1;const r=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,i=!n||t.framesDecodeCount>n.framesDecodeCount;return r||!i}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}updateLocalStats(e){Array.from(this.localStats.entries()).forEach((t=>{let[n,r]=t;switch(n){case uI.LocalVideoTrack:case uI.LocalVideoLowTrack:{const t=r,o=mU({},Xw),s=e.getStats(),a=e.getLocalMedia(n);if(s){const n=s.videoSend.find((e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId)));if(n){const r=e.getLocalVideoSize(),i=e.getEncoderConfig(uI.LocalVideoTrack);"H264"!==n.codec&&"H265"!==n.codec&&"VP8"!==n.codec&&"VP9"!==n.codec&&"AV1X"!==n.codec&&"AV1"!==n.codec||(o.codecType=n.codec),o.sendBytes=n.bytes,o.sendBitrate=t?8*Math.max(0,o.sendBytes-t.sendBytes):0,n.inputFrame?(o.captureFrameRate=n.inputFrame.frameRate,o.captureResolutionHeight=n.inputFrame.height,o.captureResolutionWidth=n.inputFrame.width):r&&(o.captureResolutionWidth=r.width,o.captureResolutionHeight=r.height),n.sentFrame?(o.sendFrameRate=n.sentFrame.frameRate,o.sendResolutionHeight=n.sentFrame.height,o.sendResolutionWidth=n.sentFrame.width):r&&(o.sendResolutionWidth=r.width,o.sendResolutionHeight=r.height),n.avgEncodeMs&&(o.encodeDelay=n.avgEncodeMs),i&&i.bitrateMax&&(o.targetSendBitrate=1e3*i.bitrateMax),o.sendPackets=n.packets,o.sendPacketsLost=n.packetsLost,o.sendJitterMs=n.jitterMs,o.sendRttMs=n.rttMs,o.totalDuration=t?t.totalDuration+1:1,o.totalFreezeTime=t?t.totalFreezeTime:0,this.isLocalVideoFreeze(n)&&(o.totalFreezeTime+=1),n.scalabilityMode&&this.scalabilityMode!==n.scalabilityMode&&(BS.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(n.scalabilityMode)),this.scalabilityMode=n.scalabilityMode)}this.trafficStats&&(o.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var i;this.localStats.set(n,o),((null==t?void 0:t.sendResolutionWidth)!==o.sendResolutionWidth||(null==t?void 0:t.sendResolutionHeight)!==o.sendResolutionHeight)&&(null===(i=this.onStatsChanged)||void 0===i||i.call(this,"resolution",{width:o.sendResolutionWidth,height:o.sendResolutionHeight})),o&&a&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,a.track,o);break}case uI.LocalAudioTrack:{const t=r,i=mU({},Jw),o=e.getStats(),s=e.getLocalMedia(n);if(o){const n=o.audioSend.find((e=>e.ssrc===(null==s?void 0:s.ssrcs[0].ssrcId)));if(n){if("opus"!==n.codec&&"aac"!==n.codec&&"PCMU"!==n.codec&&"PCMA"!==n.codec&&"G722"!==n.codec||(i.codecType=n.codec),n.inputLevel)i.sendVolumeLevel=Math.round(32767*n.inputLevel);else{const t=e.getLocalAudioVolume();t&&(i.sendVolumeLevel=Math.round(32767*t))}i.sendBytes=n.bytes,i.sendPackets=n.packets,i.sendPacketsLost=n.packetsLost,i.sendJitterMs=n.jitterMs,i.sendRttMs=n.rttMs,i.sendBitrate=t?8*Math.max(0,i.sendBytes-t.sendBytes):0}}this.trafficStats&&(i.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(uI.LocalAudioTrack,i),i&&s&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,s.track,i);break}}}))}updateRemoteStats(e){Array.from(this.remoteStats.entries()).forEach((t=>{var n,r;let[i,{videoStats:o,audioStats:s,videoPcStats:a}]=t;const c=s,l=o,u=a,d=mU({},Zw),p=mU({},eC),h=mU({},$w),{audioTrack:f,videoTrack:m,audioSSRC:g,videoSSRC:v}=e.getRemoteMedia(i);let y;y=e instanceof pU?e.getStats(!0):e.getStats();const E=null===(n=y)||void 0===n?void 0:n.audioRecv.find((e=>e.ssrc===g)),_=null===(r=y)||void 0===r?void 0:r.videoRecv.find((e=>e.ssrc===v)),b=this.trafficStats&&this.trafficStats.peer_delay.find((e=>e.peer_uid===i));if(E&&("opus"!==E.codec&&"aac"!==E.codec&&"PCMU"!==E.codec&&"PCMA"!==E.codec&&"G722"!==E.codec||(d.codecType=E.codec),E.outputLevel?d.receiveLevel=Math.round(32767*E.outputLevel):f&&(d.receiveLevel=Math.round(32767*f.getVolumeLevel())),d.receiveBytes=E.bytes,d.receivePackets=E.packets,d.receivePacketsLost=E.packetsLost,d.packetLossRate=d.receivePacketsLost/(d.receivePackets+d.receivePacketsLost),d.receiveBitrate=c?8*Math.max(0,d.receiveBytes-c.receiveBytes):0,d.totalDuration=c?c.totalDuration+1:1,d.totalFreezeTime=c?c.totalFreezeTime:0,d.freezeRate=d.totalFreezeTime/d.totalDuration,d.receiveDelay=E.jitterBufferMs,d.totalDuration>10&&gU.isRemoteAudioFreeze(f)&&(d.totalFreezeTime+=1)),_){"H264"!==_.codec&&"H265"!==_.codec&&"VP8"!==_.codec&&"VP9"!==_.codec&&"AV1X"!==_.codec&&"AV1"!==_.codec||(p.codecType=_.codec),p.receiveBytes=_.bytes,p.receiveBitrate=l?8*Math.max(0,p.receiveBytes-l.receiveBytes):0,p.decodeFrameRate=_.decodeFrameRate<0?0:_.decodeFrameRate,p.renderFrameRate=_.decodeFrameRate<0?0:_.decodeFrameRate,_.outputFrame&&(p.renderFrameRate=_.outputFrame.frameRate),_.receivedFrame?(p.receiveFrameRate=_.receivedFrame.frameRate,p.receiveResolutionHeight=_.receivedFrame.height,p.receiveResolutionWidth=_.receivedFrame.width):m&&(p.receiveResolutionHeight=m._videoHeight||0,p.receiveResolutionWidth=m._videoWidth||0),void 0!==_.framesRateFirefox&&(p.receiveFrameRate=Math.round(_.framesRateFirefox)),p.receivePackets=_.packets,p.receivePacketsLost=_.packetsLost,p.packetLossRate=p.receivePacketsLost/(p.receivePackets+p.receivePacketsLost),p.totalDuration=l?l.totalDuration+1:1,p.totalFreezeTime=l?l.totalFreezeTime:0,p.receiveDelay=_.jitterBufferMs||0;const t=!!v&&e.getRemoteVideoIsReady(v);m&&t&&gU.isRemoteVideoFreeze(m,_,u)&&(p.totalFreezeTime+=1),p.freezeRate=p.totalFreezeTime/p.totalDuration}b&&(d.end2EndDelay=b.B_ad,p.end2EndDelay=b.B_vd,d.transportDelay=b.B_ed,p.transportDelay=b.B_ed,d.currentPacketLossRate=b.B_ealr4/100,p.currentPacketLossRate=b.B_evlr4/100,h.uplinkNetworkQuality=b.B_punq?b.B_punq:0,h.downlinkNetworkQuality=b.B_pdnq?b.B_pdnq:0),this.remoteStats.set(i,{audioStats:d,videoStats:p,videoPcStats:_,networkStats:h}),f&&this.exceptionMonitor.setRemoteAudioStats(f,d),m&&this.exceptionMonitor.setRemoteVideoStats(m,p)}))}}function vU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vU(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class EU extends lE{constructor(e,t,n,r){super(),op(this,"spec",void 0),op(this,"token",void 0),op(this,"websocket",void 0),op(this,"pingpongTimer",void 0),op(this,"reconnectMode","retry"),op(this,"serviceMode",void 0),op(this,"reqId",0),op(this,"commandReqId",0),op(this,"handleWebSocketOpen",(()=>{this.reconnectMode="retry",this.startPingPong()})),op(this,"handleWebSocketMessage",(e=>{if(!e.data)return;const t=JSON.parse(e.data);t.requestId?this.emit("@".concat(t.requestId,"-").concat(t.sid),t):this.serviceMode===bT.INJECT?this.emit(BT.INJECT_STREAM_STATUS,t):(eT.workerEvent(this.spec.sid,{actionType:"status",serverCode:t.code,workerType:this.serviceMode===bT.TRANSCODE?1:2}),this.emit(BT.PUBLISH_STREAM_STATUS,t))})),this.spec=t,this.token=e,this.serviceMode=r,this.websocket=new KI("live-streaming",n),this.websocket.on(_T.CONNECTED,this.handleWebSocketOpen),this.websocket.on(_T.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(_T.REQUEST_NEW_URLS,((e,t)=>{IE(this,BT.REQUEST_NEW_ADDRESS).then(e).catch(t)})),this.websocket.on(_T.RECONNECTING,(()=>{this.websocket.reconnectMode=this.reconnectMode}))}init(e){return this.websocket.init(e)}async request(e,t,n,r){this.reqId+=1,"request"===e&&(this.commandReqId+=1);const i=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new kT(Gy.UNEXPECTED_ERROR);const s=yU({command:e,sdkVersion:"4.20.2"===mS?"0.0.1":mS,seq:o,requestId:o,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if("closed"===this.websocket.state)throw new kT(Gy.WS_DISCONNECT);const a=()=>new cy(((e,t)=>{this.websocket.once(_T.CLOSED,(()=>t(new kT(Gy.WS_ABORT)))),this.websocket.once(_T.CONNECTED,e)}));"connected"!==this.websocket.state&&await a(),s.clientRequest&&(s.clientRequest.workerToken=this.token);const c=new cy(((e,t)=>{const n=()=>{t(new kT(Gy.WS_ABORT))};this.websocket.once(_T.RECONNECTING,n),this.websocket.once(_T.CLOSED,n),this.once("@".concat(o,"-").concat(this.spec.sid),(t=>{e(t)}))}));r&&eT.workerEvent(this.spec.sid,yU(yU({},r),{},{requestId:i,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));const l=Date.now();this.websocket.sendMessage(s);let u=null;try{u=await c}catch(r){if("closed"===this.websocket.state)throw r;return await a(),await this.request(e,t,n)}return r&&eT.workerEvent(this.spec.sid,yU(yU({},r),{},{requestId:i,actionType:"response",payload:JSON.stringify(u.serverResponse),serverCode:u.code,success:200===u.code,responseTime:Date.now()-l})),200!==u.code&&this.handleResponseError(u),u}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const e="4.20.2"===mS?"0.0.1":mS;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case HT.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void BS.warning("live stream response already exists stream");case HT.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case HT.LIVE_STREAM_RESPONSE_BAD_STREAM:case HT.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new kT(Gy.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case HT.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new kT(Gy.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case HT.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new kT(Gy.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case HT.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new kT(Gy.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(BT.WARNING,t,e.serverResponse.url)}case HT.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new kT(Gy.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(BT.WARNING,t,e.serverResponse.url)}case HT.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new kT(Gy.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case HT.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new kT(Gy.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case HT.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new kT(Gy.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(BT.WARNING,t,e.serverResponse.url)}case HT.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new kT(Gy.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case HT.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new kT(Gy.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case HT.LIVE_STREAM_RESPONSE_WORKER_LOST:case HT.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new kT(Gy.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case HT.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new kT(Gy.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new kT(Gy.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case HT.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case HT.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case HT.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case HT.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new kT(Gy.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(o_)}),6e3)}}function _U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_U(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class SU extends lE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m_,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m_;super(),op(this,"onLiveStreamWarning",void 0),op(this,"onLiveStreamError",void 0),op(this,"onInjectStatusChange",void 0),op(this,"spec",void 0),op(this,"retryTimeout",1e4),op(this,"connection",void 0),op(this,"httpRetryConfig",void 0),op(this,"wsRetryConfig",void 0),op(this,"streamingTasks",new Map),op(this,"isStartingStreamingTask",!1),op(this,"taskMutex",new h_("live-streaming")),op(this,"cancelToken",oS.CancelToken.source()),op(this,"transcodingConfig",void 0),op(this,"injectConfig",bU({},zT)),op(this,"injectLoopTimes",0),op(this,"uapResponse",void 0),op(this,"lastTaskId",1),op(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=n,this.wsRetryConfig=t}async setTranscodingConfig(e){const t=bU(bU({},FT),e);66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(BS.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((e=>bU(bU(bU({},PT),e),{},{zOrder:e.zOrder?e.zOrder+1:1})))),function(e){Zy(e.width)||Ky(e.width,"config.width",0,1e4),Zy(e.height)||Ky(e.height,"config.height",0,1e4),Zy(e.videoBitrate)||Ky(e.videoBitrate,"config.videoBitrate",1,1e6),Zy(e.videoFrameRate)||Ky(e.videoFrameRate,"config.videoFrameRate"),Zy(e.lowLatency)||Yy(e.lowLatency,"config.lowLatency"),Zy(e.audioSampleRate)||qy(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Zy(e.audioBitrate)||Ky(e.audioBitrate,"config.audioBitrate",1,128),Zy(e.audioChannels)||qy(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),Zy(e.videoGop)||Ky(e.videoGop,"config.videoGop"),Zy(e.videoCodecProfile)||qy(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Zy(e.userCount)||Ky(e.userCount,"config.userCount",0,17),Zy(e.backgroundColor)||Ky(e.backgroundColor,"config.backgroundColor",0,16777215),Zy(e.userConfigExtraInfo)||Jy(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!Zy(e.transcodingUsers)&&(Xy(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach(((e,t)=>{LT(e.uid),Zy(e.x)||Ky(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),Zy(e.y)||Ky(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),Zy(e.width)||Ky(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),Zy(e.height)||Ky(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),Zy(e.zOrder)||Ky(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),Zy(e.alpha)||Ky(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),Zy(e.watermark)||UT(e.watermark,"watermark"),Zy(e.backgroundImage)||UT(e.backgroundImage,"backgroundImage"),e.images&&!Zy(e.images)&&(Xy(e.images,"config.images"),e.images.forEach(((e,t)=>{UT(e,"images[".concat(t,"]"))})))}(t);const n=[];t.images&&n.push(...t.images.map((e=>bU(bU(bU({},jT),e),{},{zOrder:255})))),t.backgroundImage&&(n.push(bU(bU(bU({},jT),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(n.push(bU(bU(bU({},jT),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=n,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((e=>bU({},e))),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);const r=(t.userConfigs||[]).map((e=>"number"==typeof e.uid?cy.resolve(e.uid):hw(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig)));if((await cy.all(r)).forEach(((e,n)=>{t.userConfigs&&t.userConfigs[n]&&(t.userConfigs[n].uid=e)})),this.transcodingConfig=t,this.connection)try{var i;const e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(RT(i=this.streamingTasks).call(i)).map((e=>e.taskId)).join("#")});BS.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(e.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(e){if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((t=>{BS.warning("[".concat(this.spec.clientId,"] live streaming receive error"),e.toString(),"try to republish",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then((()=>{BS.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(t.url," success"))})).catch((e=>{BS.error("[".concat(this.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)}))}))}}setInjectStreamConfig(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t}async startLiveStreamingTask(e,t,n){var r;if(Array.from(RT(r=this.streamingTasks).call(r)).find((e=>e.mode===bT.INJECT))&&t===bT.INJECT)return new kT(Gy.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&t===bT.TRANSCODE)throw new kT(Gy.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let i={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};BS.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));const o=await this.taskMutex.lock();if(!this.connection&&n)return void o();if(this.streamingTasks.get(e)&&!n)return o(),new kT(Gy.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw o(),e}switch(t){case bT.TRANSCODE:i.transcodingConfig=bU({},this.transcodingConfig);break;case bT.RAW:break;case bT.INJECT:i={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(i.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const s=this.lastTaskId++;try{const r=new cy(((t,r)=>{n_(this.retryTimeout).then((()=>{if(n)return r(n);const t=this.statusError.get(e);return t?(this.statusError.delete(e),r(t)):void 0}))})),a=await cy.race([this.connection.request("request",{clientRequest:i},!0,{url:e,command:"PublishStream",workerType:t===bT.TRANSCODE?1:2,requestByUser:!n,tid:s.toString()}),r]);this.isStartingStreamingTask=!1,BS.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(a.code)),this.streamingTasks.set(e,{clientRequest:i,mode:t,url:e,taskId:s}),o()}catch(r){if(o(),this.isStartingStreamingTask=!1,!r.data||!r.data.retry||n)throw r;return r.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,r)):await this.startLiveStreamingTask(e,t,r)}}stopLiveStreamingTask(e){return new cy(((t,n)=>{const r=this.streamingTasks.get(e);if(!r||!this.connection)return new kT(Gy.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const i=r.mode;r.abortTask=()=>{BS.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:i===bT.INJECT?"UninjectStream":"UnpublishStream",url:r.url}},!1,{url:e,command:"UnPublishStream",workerType:i===bT.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then((n=>{BS.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(n.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&i!==bT.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),t(),i===bT.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(ST.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,e)})).catch(n)}))}async controlInjectStream(e,t,n,r){const i=this.streamingTasks.get(e);if(!i||!this.connection||i.mode!==bT.INJECT)throw new kT(Gy.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:n,position:r}})).serverResponse}resetAllTask(){var e;const t=Array.from(RT(e=this.streamingTasks).call(e));this.terminate();for(const n of t)this.startLiveStreamingTask(n.url,n.mode).catch((e=>{this.onLiveStreamError&&this.onLiveStreamError(n.url,e)}))}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=oS.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new kT(Gy.UNEXPECTED_ERROR,"live streaming connection has already connected");const t=await IE(this,VT.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new EU(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(BT.WARNING,((e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e))),this.connection.on(BT.PUBLISH_STREAM_STATUS,(e=>this.handlePublishStreamServer(e))),this.connection.on(BT.INJECT_STREAM_STATUS,(e=>this.handleInjectStreamServerStatus(e))),this.connection.on(BT.REQUEST_NEW_ADDRESS,((t,n)=>{if(!this.connection)return n(new kT(Gy.UNEXPECTED_ERROR,"can not get new live streaming address list"));IE(this,VT.REQUEST_WORKER_MANAGER_LIST,e).then((e=>{this.uapResponse=e,t(e.addressList)})).catch(n)})),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||"empty_url",n=this.streamingTasks.get(t),r=e.reason;switch(e.code){case HT.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case HT.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case HT.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case HT.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const r=new kT(Gy.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(n)return BS.error(r.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,r);if(!this.isStartingStreamingTask)return;this.statusError.set(t,r)}case HT.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new kT(Gy.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,r);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case HT.LIVE_STREAM_RESPONSE_WORKER_LOST:case HT.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var i;if(!this.connection)return;this.connection.tryNextAddress();const t=Array.from(RT(i=this.streamingTasks).call(i));for(const n of t)n.abortTask?n.abortTask():(BS.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),this.startLiveStreamingTask(n.url,n.mode,new kT(Gy.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((()=>{BS.debug("[".concat(this.spec.clientId,"] republish live stream success"),n.url)})).catch((e=>{BS.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(n.url,e)})));return}}}handleInjectStreamServerStatus(e){const t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(ST.INJECT_STREAM_STATUS_START_SUCCESS,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(ST.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(ST.INJECT_STREAM_STATUS_START_UNAUTHORIZED,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(ST.INJECT_STREAM_STATUS_BROKEN,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(ST.INJECT_STREAM_STATUS_START_TIMEOUT,t,n),void this.streamingTasks.delete(n);default:return void BS.debug("inject stream server status",e)}}hasUrl(e){return this.streamingTasks.has(e)}}class TU{constructor(){op(this,"destChannelMediaInfos",new Map),op(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){tI(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){tI(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){xT(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function IU(e){if(!(e instanceof TU))return new kT(Gy.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();return t?0===n.size?new kT(Gy.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new kT(Gy.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class NU extends lE{constructor(e,t,n){super(),op(this,"ws",void 0),op(this,"requestId",1),op(this,"heartBeatTimer",void 0),op(this,"joinInfo",void 0),op(this,"clientId",void 0),op(this,"onOpen",(()=>{this.emit("open"),this.startHeartBeatCheck()})),op(this,"onClose",(e=>{this.emit("close"),this.dispose()})),op(this,"onMessage",(e=>{const t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit("status",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit("req_".concat(t.requestId),t)})),this.joinInfo=e,this.clientId=t,this.ws=new KI("cross-channel-".concat(this.clientId),n),this.ws.on(_T.RECONNECTING,(()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")})),this.ws.on(_T.CONNECTED,this.onOpen),this.ws.on(_T.ON_MESSAGE,this.onMessage),this.ws.on(_T.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new cy(((t,n)=>{const r=window.setTimeout((()=>{n(new kT(Gy.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);this.once(e,(i=>{window.clearTimeout(r),i.state&&0!==i.state?n(new kT(Gy.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)})),this.once("dispose",(()=>{window.clearTimeout(r),n(new kT(Gy.WS_ABORT))}))}))}async request(e){if("closed"===this.ws.state)throw new kT(Gy.WS_DISCONNECT);const t=()=>new cy(((e,t)=>{this.ws.once(_T.CLOSED,(()=>t(new kT(Gy.WS_ABORT)))),this.ws.once(_T.CONNECTED,e)}));"connected"!==this.ws.state&&await t();const n=this.sendMessage(e),r=new cy(((e,t)=>{const r=()=>{t(new kT(Gy.WS_ABORT))};this.ws.once(_T.RECONNECTING,r),this.ws.once(_T.CLOSED,r),this.once("req_".concat(n),e),n_(3e3).then((()=>{this.removeAllListeners("req_".concat(n)),this.ws.off(_T.RECONNECTING,r),this.ws.off(_T.CLOSED,r),t(new kT(Gy.TIMEOUT,"cross channel ws request timeout"))}))})),i=await r;if(!i||200!==i.code)throw new kT(Gy.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(i)));return i}async connect(e){this.ws.removeAllListeners(_T.REQUEST_NEW_URLS),this.ws.on(_T.REQUEST_NEW_URLS,(t=>{t(e)})),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class wU extends lE{set state(e){e!==this._state&&(e!==qT.RELAY_STATE_FAILURE&&(this.errorCode=KT.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,n,r,i){super(),op(this,"joinInfo",void 0),op(this,"sid",void 0),op(this,"clientId",void 0),op(this,"cancelToken",oS.CancelToken.source()),op(this,"workerToken",void 0),op(this,"requestId",0),op(this,"signal",void 0),op(this,"prevChannelMediaConfig",void 0),op(this,"httpRetryConfig",void 0),op(this,"_resolution",void 0),op(this,"_state",qT.RELAY_STATE_IDLE),op(this,"errorCode",KT.RELAY_OK),op(this,"onStatus",(e=>{BS.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event",YT.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&this.emit("event",YT.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode=KT.SRC_TOKEN_EXPIRED,this.state=qT.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode=KT.DEST_TOKEN_EXPIRED,this.state=qT.RELAY_STATE_FAILURE))})),op(this,"onReconnect",(async()=>{BS.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",YT.NETWORK_DISCONNECTED),this.state=qT.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch((e=>{this.state!==qT.RELAY_STATE_IDLE&&(BS.error("auto restart channel media relay failed",e.toString()),this.errorCode=KT.SERVER_CONNECTION_LOST,this.state=qT.RELAY_STATE_FAILURE)}))})),this.joinInfo=e,this.clientId=t,this.sid=i_(),this.signal=new NU(this.joinInfo,this.clientId,n),this.httpRetryConfig=r,this._resolution=i}async startChannelMediaRelay(e){if(this.state!==qT.RELAY_STATE_IDLE)throw new kT(Gy.INVALID_OPERATION);this.state=qT.RELAY_STATE_CONNECTING,await this.connect(),BS.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&"SetSourceChannel"===e.data.serverResponse.command)throw new kT(Gy.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&"SetDestChannelStatus"===e.serverResponse.command)throw new kT(Gy.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&"StartPacketTransfer"===e.serverResponse.command)throw new kT(Gy.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==qT.RELAY_STATE_RUNNING)throw new kT(Gy.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==qT.RELAY_STATE_RUNNING)throw new kT(Gy.INVALID_OPERATION);const t=this.genMessage(WT.SetVideoProfile);await this.signal.request(t),BS.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),BS.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=qT.RELAY_STATE_IDLE,this.dispose()}dispose(){BS.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=oS.CancelToken.source(),this.state=qT.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await vw(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",YT.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(WT.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),BS.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const n=this.genMessage(WT.SetSdkProfile,e);await this.signal.request(n),BS.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const r=this.genMessage(WT.SetSourceChannel,e);await this.signal.request(r),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",YT.PACKET_JOINED_SRC_CHANNEL),BS.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const i=this.genMessage(WT.SetSourceUserId,e);await this.signal.request(i),BS.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const o=this.genMessage(WT.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",YT.PACKET_JOINED_DEST_CHANNEL),BS.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const s=this.genMessage(WT.StartPacketTransfer,e);await this.signal.request(s),this.emit("event",YT.PACKET_SENT_TO_DEST_CHANNEL),this.state=qT.RELAY_STATE_RUNNING,BS.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){const t=this.genMessage(WT.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",YT.PACKET_UPDATE_DEST_CHANNEL),BS.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const e=this.genMessage(WT.StopPacketTransfer);await this.signal.request(e),BS.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){const n=[],r=[],i=[];this.requestId+=1;const o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:mS,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.20.2"===o.sdkVersion&&(o.sdkVersion="0.0.1");let s=null,a=null;switch(e){case WT.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case WT.SetSourceChannel:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new kT(Gy.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceChannel",uid:"0",channelName:a.channelName,token:a.token||this.joinInfo.appId},o;case WT.SetSourceUserId:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new kT(Gy.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceUserId",uid:a.uid+""},o;case WT.SetDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new kT(Gy.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:"SetDestChannel",channelName:n,uid:r,token:i},o;case WT.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case WT.Reconnect:return o.clientRequest={command:"Reconnect"},o;case WT.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case WT.UpdateDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new kT(Gy.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:"UpdateDestChannel",channelName:n,uid:r,token:i},o;case WT.SetVideoProfile:o.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return o}}function CU(e){var t={},n=!1;function r(t,r){return n=!0,{done:!1,value:new SP(r=new OP((function(n){n(e[t](r))})),1)}}return t[void 0!==jd&&tp||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}var OU=r(AP);function AU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AU(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function MU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MU(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class kU extends RI{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Or(t=Object.keys(wS)).call(t,e)})))]}constructor(e,t){super(e,t),op(this,"store",void 0),op(this,"peerConnection",void 0),op(this,"remoteSDP",void 0),op(this,"initialOffer",void 0),op(this,"statsFilter",void 0),op(this,"useRTX",!1),op(this,"localCapabilities",void 0),op(this,"localCandidateCount",0),op(this,"allCandidatesReceived",!1),op(this,"establishPromise",void 0),op(this,"mutex",new h_("P2PConnection-mutex")),this.store=t,this.peerConnection=new RTCPeerConnection(kU.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=mj(this.peerConnection,bS("STATS_UPDATE_INTERVAL"),void 0,Oy()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=Ej(e.sdp),n=yj(e.sdp,{filterRTX:!this.useRTX,filterVideoFec:bS("FILTER_VIDEO_FEC"),filterAudioFec:bS("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=n,this.initialOffer=e,DU(DU({},t),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:n},offerSDP:e.sdp})}catch(e){throw new Wy(Gy.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,r,i,o){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(e){op(this,"sessionDesc",void 0),op(this,"localCapabilities",void 0),op(this,"rtpCapabilities",void 0),op(this,"candidates",void 0),op(this,"iceParameters",void 0),op(this,"dtlsParameters",void 0),op(this,"setup",void 0),op(this,"currentMidIndex",void 0),op(this,"cname",void 0),e=YE(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:s,sdkCodec:a,cname:c}=e,l=QP.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=i,this.candidates=r,this.iceParameters=t,this.dtlsParameters=n,this.setup=o,this.localCapabilities=s,this.cname=c;for(let u=0;u<l.mediaDescriptions.length;u++){const e=l.mediaDescriptions[u];if(e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=n.fingerprints,e.attributes.candidates=r,e.attributes.setup=o,"video"===e.media.mediaType){e.media.fmts=i.videoCodecs.map((e=>e.payloadType.toString(10)));let t=i.videoCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Or(n=t.encodingName.toLowerCase()).call(n,a)}));0===t.length&&(t=i.videoCodecs),e.attributes.payloads=t,e.attributes.extmaps=i.videoExtensions}"audio"===e.media.mediaType&&(e.media.fmts=i.audioCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=i.audioCodecs,e.attributes.extmaps=i.audioExtensions),l.mediaDescriptions[u]=this.mungMediaDesc(e)}this.sessionDesc=l,this.currentMidIndex=l.mediaDescriptions.length-1}toString(){return QP.print(this.sessionDesc)}send(e,t,n){const{ssrcs:r,ssrcGroups:i}=Sj(t,this.cname),o=this.sessionDesc.mediaDescriptions.find((t=>e===aI.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType)),s=r[0].attributes.label,a=r[0].attributes.mslabel;return o.attributes.ssrcs=o.attributes.ssrcs.concat(r),o.attributes.ssrcGroups=o.attributes.ssrcGroups.concat(i),{id:s,mslabel:a}}batchSend(e){return e.map((e=>{let{kind:t,ssrcMsg:n}=e;return this.send(t,n,void 0)}))}stopSending(e){this.sessionDesc.mediaDescriptions.forEach((t=>{const n=[],r=[],i=[];t.attributes.ssrcs.forEach((t=>{Or(e).call(e,t.attributes.label||"")?i.push(t):n.push(t)})),t.attributes.ssrcGroups.forEach((e=>{var t;Or(t=i.map((e=>e.ssrcId))).call(t,e.ssrcIds[0])||r.push(e)})),t.attributes.ssrcs=n,t.attributes.ssrcGroups=r}))}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}receive(e,t,n){e.forEach(((e,t)=>{const n=e._mediaStreamTrack,r=this.sessionDesc.mediaDescriptions.findIndex((e=>e.attributes.mid===n.kind)),i=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],e);this.sessionDesc.mediaDescriptions[r]=i}))}stopReceiving(e){}updateCandidates(e){e===cI.TCP?this.candidates.forEach((e=>{-1===this.candidates.findIndex((t=>"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port))&&this.candidates.push(RU(RU({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this.candidates=this.candidates.filter((e=>"tcp"!==e.transport));for(const t of this.sessionDesc.mediaDescriptions)t.attributes.candidates=this.candidates}restartICE(e){e=YE(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}mungRecvMediaDsec(e,t){const n=YE(e);return Tj(n,t),Nj(n,t),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,n){const r=this.sessionDesc.mediaDescriptions.find((t=>e===aI.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid));if(r){const e=r.attributes.ssrcs.find((e=>e.attributes.label===t));var i;e&&(e.attributes.label=n,null===(i=e.attributes.msid)||void 0===i||i.replace(t,n))}}mungMediaDesc(e){const t=YE(e);return Ij(t),function(e){const t=e.attributes.extmaps.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t}getSSRC(e){for(const t of this.sessionDesc.mediaDescriptions)for(const n of t.attributes.ssrcs)if(n.attributes.label===e)return[n]}}({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:r.send,remoteSetup:i,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:o});const s=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s})}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){throw new Wy(Gy.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}send(e,t){var n=this;return DP((function*(){const r=yield TP(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const r=e.map((e=>n.peerConnection.addTrack(e._mediaStreamTrack))),i=yield TP(n.peerConnection.createOffer()),o=QP.parse(i.sdp),s=e.map((e=>{const t=e._mediaStreamTrack,r=o.mediaDescriptions.find((e=>e.attributes.mid===t.kind));if(!r)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,n){const r=e.attributes.ssrcs.filter((e=>e.attributes.label===t)),i=e.attributes.ssrcGroups;if(0===r.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(i&&r.length>1){const e=i.find((e=>-1!==e.ssrcIds.indexOf(r[0].ssrcId)));return e?[{ssrcId:e.ssrcIds[0],rtx:n?e.ssrcIds[1]:void 0}]:[{ssrcId:r[0].ssrcId}]}return[{ssrcId:r[0].ssrcId}]}(r,t.id,n.useRTX)}));let a;try{a=yield s}catch(e){throw r.forEach((e=>{Cy()&&e.replaceTrack(null),n.peerConnection.removeTrack(e)})),e}const c=n.mungSendOfferSDP(i.sdp,e);n.remoteSDP.receive(e,t,a);const l=n.remoteSDP.toString();return yield TP(n.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield TP(n.applySendEncodings(r,e)),yield TP(n.peerConnection.setRemoteDescription({type:"answer",sdp:l})),e.map(((e,t)=>{const n=e._mediaStreamTrack.id;return{localSSRC:s[t],id:n}}))}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async stopSending(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{Cy()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{id:n,mslabel:i}=this.remoteSDP.send(e,t,r),o=new cy(((t,r)=>{const o=setTimeout((()=>{r(new Error("Cannot receive track, id: ".concat(n)))}),1e4),s=r=>{const a=_y();if(("Safari"===a.name&&11===Number(a.version)||Ay())&&r.track.id!==n&&r.streams[0].id===i){var c;const i=r.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,n,r.track.id),this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(i)}if(r.track.id===n)return this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(r.track)};this.peerConnection.addEventListener("track",s)})),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const a=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(a),{track:await o,id:n}}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("sender' length doesn't match mids' length.");t.map((e=>{if(Cy()&&e.track)e.track.enabled=!1;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!1)),e.setParameters(t)}}))}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Senders' length doesn't match mids' length.");t.map((async e=>{if(Cy()&&e.track)e.track.enabled=!0;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!0)),await e.setParameters(t)}}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return DP((function*(){const n=yield TP(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Tw().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===cI.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(BS.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===cI.RELAY)return;e!==cI.RELAY&&t.remoteSDP.updateCandidates(e);const n=yield TP(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=Ej(n.sdp),{remoteIceParameters:i}=yield r.iceParameters;t.remoteSDP.restartICE(i);const o=t.remoteSDP.toString();yield TP(t.peerConnection.setLocalDescription(n)),yield TP(t.peerConnection.setRemoteDescription({type:"answer",sdp:o}))}catch(e){BS.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const e=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const r=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getSenders().filter((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e}));1===n.length&&await this.applySendEncodings(n,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getSenders().find((e=>{var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t}));n&&await n.replaceTrack(e._mediaStreamTrack)}createDataChannels(e,t){throw new Wy(Gy.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(e){throw new Wy(Gy.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,BS.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,BS.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),bS("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[],sdpSemantics:"plan-b"};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(bE(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...kU.turnServerConfigToIceServers(e.turnServer.servers)),bS("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...kU.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e._mediaStreamTrack.id}))),!t)return BS.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(!Tw().supportSetRtpSenderParameters)return BS.warn("Browser not support set rtp-sender parameters");const r={},i={};if(e instanceof bO)switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(bS("DSCP_TYPE")&&By()){var o;const e=bS("DSCP_TYPE");Or(o=["very-low","low","medium","high"]).call(o,e)&&(i.networkPriority=e)}const s=t.getParameters(),a=null===(n=s.encodings)||void 0===n?void 0:n[0];a&&Object.assign(a,i),Object.assign(s,r),BS.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(s.encodings))),await t.setParameters(s)}async applySendEncodings(e,t){try{if(!Tw().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];r&&i&&await this.updateRtpSenderEncodings(i,r)}}catch(e){BS.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t){const n=QP.parse(e);return t.forEach(((e,t)=>{const r=e._mediaStreamTrack,i=n.mediaDescriptions.find((e=>e.attributes.mid===r.kind));i&&Tj(i,e)})),QP.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const t=this.remoteSDP.batchSend(e).map(((t,n)=>{let{id:r,mslabel:i}=t;const{kind:o}=e[n];return new cy(((e,t)=>{const n=setTimeout((()=>{t(new Error("Cannot receive track, id: ".concat(r)))}),1e4),s=t=>{const a=_y();if("Safari"===a.name&&11===Number(a.version)&&t.track.id!==r&&t.streams[0].id===i){var c;const i=t.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(o,r,t.track.id),this.peerConnection.removeEventListener("track",s),clearTimeout(n),void e({track:i,id:r})}if(t.track.id===r)return this.peerConnection.removeEventListener("track",s),clearTimeout(n),void e({track:t.track,id:r})};this.peerConnection.addEventListener("track",s)}))})),n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const r=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(r),await cy.all(t)}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(e){if(Tw().supportPCSetConfiguration){const t=kU.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}function xU(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("Locking from P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function LU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LU(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}MT([xU,DT("design:type",Function),DT("design:paramtypes",[Object,Object,Array,Object,String,String]),DT("design:returntype",cy)],kU.prototype,"connect",null),MT([xU,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],kU.prototype,"stopSending",null),MT([xU,DT("design:type",Function),DT("design:paramtypes",[String,Array,String,Object]),DT("design:returntype",cy)],kU.prototype,"receive",null),MT([xU,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],kU.prototype,"stopReceiving",null),MT([xU,DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],kU.prototype,"muteRemote",null),MT([xU,DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],kU.prototype,"unmuteRemote",null),MT([xU,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],kU.prototype,"muteLocal",null),MT([xU,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],kU.prototype,"unmuteLocal",null),MT([xU,DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],kU.prototype,"close",null),MT([xU,DT("design:type",Function),DT("design:paramtypes",[String,uC]),DT("design:returntype",cy)],kU.prototype,"updateEncoderConfig",null),MT([xU,DT("design:type",Function),DT("design:paramtypes",[String,uC]),DT("design:returntype",cy)],kU.prototype,"updateSendParameters",null),MT([xU,DT("design:type",Function),DT("design:paramtypes",[uC,String]),DT("design:returntype",cy)],kU.prototype,"replaceTrack",null),MT([xU,DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],kU.prototype,"getRemoteSSRC",null);const jU="9",UU=4e4;function FU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FU(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class BU extends RI{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Or(t=Object.keys(wS)).call(t,e)})))]}constructor(e,t){super(e,t),op(this,"store",void 0),op(this,"peerConnection",void 0),op(this,"remoteSDP",void 0),op(this,"initialOffer",void 0),op(this,"transportEventReceiver",void 0),op(this,"statsFilter",void 0),op(this,"useXR",bS("USE_XR")),op(this,"localCapabilities",void 0),op(this,"remoteCodecs",void 0),op(this,"localCandidateCount",0),op(this,"allCandidatesReceived",!1),op(this,"dataStreamChannelMap",new Map),op(this,"establishPromise",void 0),op(this,"recoveredDataChannelIds",[]),op(this,"currentDataChannelId",1),op(this,"mutex",new h_("P2PConnection-mutex")),this.store=t,this.peerConnection=new RTCPeerConnection(BU.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=mj(this.peerConnection,bS("STATS_UPDATE_INTERVAL"),void 0,Oy()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,this.remoteSDP)if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(e);const n=this.remoteSDP.toString();null==t||t(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}else BS.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");else BS.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(t))}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=Ej(e.sdp),n=await Aj({filterRTX:!bS("USE_PUB_RTX")&&!bS("USE_SUB_RTX"),filterVideoFec:bS("FILTER_VIDEO_FEC"),filterAudioFec:bS("FILTER_AUDIO_FEC"),filterVideoCodec:bS("FILTER_VIDEO_CODEC")},{useXR:this.useXR});return this.localCapabilities=Dj(n),this.initialOffer=e,zU(zU({},t),{},{rtpCapabilities:n,offerSDP:e.sdp})}catch(e){throw new Wy(Gy.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,r,i,o){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{get localCapabilities(){return YE(this._localCapabilities)}get rtpCapabilities(){return YE(this._rtpCapabilities)}get candidates(){return YE(this._candidates)}get iceParameters(){return YE(this._iceParameters)}get dtlsParameters(){return YE(this._dtlsParameters)}constructor(e){op(this,"sessionDesc",void 0),op(this,"_localCapabilities",void 0),op(this,"_rtpCapabilities",void 0),op(this,"_candidates",void 0),op(this,"_iceParameters",void 0),op(this,"_dtlsParameters",void 0),op(this,"setup",void 0),op(this,"currentMidIndex",void 0),op(this,"cname",void 0),op(this,"firefoxSsrcMidMap",new Map),e=YE(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:s,cname:a}=e,c=QP.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=s,this.setup=o,this.cname=a;const l=this.rtpCapabilities.send;for(const u of c.mediaDescriptions){if(u.attributes.iceUfrag=t.iceUfrag,u.attributes.icePwd=t.icePwd,u.attributes.fingerprints=n.fingerprints,u.attributes.candidates=r,u.attributes.setup=o,"video"===u.media.mediaType&&(u.media.fmts=l.videoCodecs.map((e=>e.payloadType.toString(10))),u.attributes.payloads=l.videoCodecs,u.attributes.extmaps=l.videoExtensions,bS("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Sj([{ssrcId:UU,rtx:bS("USE_SUB_RTX")?40001:void 0}],this.cname);u.attributes.ssrcs=e,u.attributes.ssrcGroups=t}if("audio"===u.media.mediaType&&(u.media.fmts=l.audioCodecs.map((e=>e.payloadType.toString(10))),u.attributes.payloads=l.audioCodecs,u.attributes.extmaps=l.audioExtensions,kj(u),bS("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Sj([{ssrcId:2e4}],this.cname);u.attributes.ssrcs=e,u.attributes.ssrcGroups=t}}this.sessionDesc=c,this.currentMidIndex=c.mediaDescriptions.length-1}preloadRemoteMedia(){const e=bS("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send;for(let o=1;o<e;o++){const e=2*o+2e4,s=2*o+UU,{ssrcs:a,ssrcGroups:c}=Sj([{ssrcId:e}],this.cname),{ssrcs:l,ssrcGroups:u}=Sj([{ssrcId:s,rtx:bS("USE_SUB_RTX")?s+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:jU,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:jU,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:a,ssrcGroups:c,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return QP.print(this.sessionDesc)}send(e,t,n,r){const{ssrcs:i,ssrcGroups:o}=Sj(t,this.cname,bS("SYNC_GROUP")?n:void 0),s=this.findPreloadMediaDesc(i);if(s){if(Oy()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,s.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,i);let n;return-1===t||1===t&&(Cy()||ky())||0===t&&bS("USE_SUB_RTX")||xy()?(n=this.createOrRecycleSendMedia(e,i,o,"sendonly",r),this.updateBundleMids()):(n=YE(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=i,n.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,r)),Oy()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,n.attributes.mid),{mid:n.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:n,mslabel:r}=e;return this.send(t,n,r)})),n=[];let r=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:i}=e;i&&(r=!0),n.push(t)})),{mids:n,needExchangeSDP:r}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{"0"===e.attributes.mid||Oy()||xy()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Or(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Or(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}receive(e,t,n,r){e.forEach(((e,i)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[i])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}updateCandidates(e){const t=this._candidates.filter((e=>"udp"===e.transport));if(e===cI.TCP){if(0===t.length)return;if(bS("TCP_CANDIDATE_ONLY")){const e=this._candidates.filter((e=>"tcp"===e.transport));t.forEach((t=>{-1===e.findIndex((e=>e.connectionAddress===t.connectionAddress))&&e.push(PU(PU({},t),{},{foundation:"tcpcandidate",priority:Number(t.priority)-1+"",transport:"tcp",port:Number(t.port)+90+""}))})),this._candidates=e}else{const e=[];t.forEach((t=>{e.push(PU(PU({},t),{},{foundation:"tcpcandidate",priority:Number(t.priority)-1+"",transport:"tcp",port:Number(t.port)+90+""}))})),this._candidates=[...t,...e]}}else if(e===cI.RELAY){if(0!==t.length)return;{const e=this._candidates.filter((e=>"tcp"===e.transport));e.forEach((e=>{t.push(PU(PU({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=[...t,...e]}}else 0===t.length?(this._candidates.filter((e=>"tcp"===e.transport)).forEach((e=>{t.push(PU(PU({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=t):this._candidates=this._candidates.filter((e=>"tcp"!==e.transport));for(const n of this.sessionDesc.mediaDescriptions)n.attributes.candidates=this.candidates}restartICE(e){e=YE(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const r=n.media.mediaType===e&&"0"!==n.media.port&&("sendonly"===n.attributes.direction||"sendrecv"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(Oy()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==n.attributes.mid&&"1"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return r}))}createOrRecycleDataChannel(){for(const n of this.sessionDesc.mediaDescriptions)if("application"===n.media.mediaType)return{mediaDesc:n,needExchangeSDP:!1};this.currentMidIndex+=1;const e="".concat(this.currentMidIndex),t={media:{mediaType:"application",port:jU,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(e),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,n,r,i,o){const s=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=Lj(s,a,this.localCapabilities.send,s===aI.VIDEO?r:i),l=s===aI.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const u="".concat(this.currentMidIndex);let d={media:{mediaType:s,port:jU,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(u)}};d=this.mungRecvMediaDsec(d,e,o);const p=this.findFirstClosedMedia(s);if(p){const e=this.sessionDesc.mediaDescriptions.indexOf(p);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}updateRemoteCodec(e,t,n){const r=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Or(t=Object.keys(wS)).call(t,e)})))],i=new Set(t);if(r.every((e=>i.has(e))))return BS.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;const o=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var n;return Or(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))));if(0===o.length)return BS.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(r," codecs: ").concat(t)),!1;const s=[...new Set(o.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")))];let a;if(BS.debug("updateRemoteCodec, from ".concat(r," to ").concat(s)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((e=>"video"===e.media.mediaType&&"recvonly"===e.attributes.direction));else if(a=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Or(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction)),a.length!==e.length)return BS.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;this._rtpCapabilities.recv.videoCodecs=o;const c=this.localCapabilities.send,l=this.rtpCapabilities.recv,u=Lj(aI.VIDEO,l,c,n);return a.forEach((e=>{const t=u.map((e=>e.payloadType.toString(10)));BS.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from ").concat(e.attributes.payloads," to ").concat(u)),e.attributes.payloads=u,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,n,r,i){const o=this.rtpCapabilities.send,s=e===aI.VIDEO?o.videoCodecs:o.audioCodecs,a=e===aI.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let l={media:{mediaType:e,port:jU,protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};l=this.mungSendMediaDesc(l,i);const u=this.findFirstClosedMedia(e);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,n){const r=YE(e);return Ij(r),Tj(r,t),Nj(r,t),wj(r),Cj(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=YE(e);return Cj(n,t,this.localCapabilities.recv),kj(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>Oy()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:r,remoteSetup:i,localCapabilities:this.localCapabilities,cname:o}),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const s=this.remoteSDP.toString(),a=QP.parse(this.initialOffer.sdp),c=a.mediaDescriptions.find((e=>"audio"===e.media.mediaType));c&&kj(c),this.useXR&&xj(a);const l=QP.print(a),u=this.logSDPExchange(l||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),null==u||u(s),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s});const d=this.peerConnection.getTransceivers()[0];if(null!=d&&d.receiver&&this.tryBindTransportEvents(d.receiver),bS("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}send(e,t,n){var r=this;return DP((function*(){const i=yield TP(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const o=[];e.forEach((e=>{const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});o.push(t),e._updateRtpTransceiver(t)})),Oy()&&!0===bS("SIMULCAST")&&(yield TP(r.applySimulcastForFirefox(o,e)));const s=yield TP(r.peerConnection.createOffer()),a=r.remoteSDP.predictReceivingMids(e.length),c=r.mungSendOfferSDP(s.sdp,e,a),l=QP.parse(c),u=a.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return _j(t,bS("USE_PUB_RTX"))}));let d;try{d=yield u}catch(i){d=[],r.remoteSDP.receive(e,t,n,d);const o=r.remoteSDP.toString();throw yield TP(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield TP(r.peerConnection.setRemoteDescription({type:"answer",sdp:o})),yield TP(r.stopSending(a,!0)),i}r.remoteSDP.receive(e,t,n,d);const p=r.remoteSDP.toString(),h=r.logSDPExchange(c,"offer","local","send");return yield TP(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield TP(r.applySimulcastEncodings(o,e)),yield TP(r.applySendEncodings(o,e)),null==h||h(p),yield TP(r.peerConnection.setRemoteDescription({type:"answer",sdp:p})),o.map(((e,t)=>{const n=a[t];return{localSSRC:u[t],id:n,transceiver:e}}))}catch(e){throw e instanceof Wy?e:new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(e);if(n&&"open"===n.readyState)BS.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const t=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if("number"!=typeof t)throw new Error("create DataChannel error, because cannot get dc id");n=this.peerConnection.createDataChannel("datastream-channel",{id:t,negotiated:!0,ordered:!1,maxRetransmits:bS("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(e,n)}t.forEach((e=>{e._updateOriginDataChannel(n)}));const{needExchangeSDP:r}=this.remoteSDP.sendDataChannel();if(r){const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),BS.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else BS.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(e){throw e instanceof Wy?e:new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return t&&(t.id&&this.recoveredDataChannelIds.push(t.id),t.close()),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof Wy?e:new Wy(Gy.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(e.toString()))}}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),BS.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else BS.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."));const s=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:i,transceiver:s}}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:n}=this.remoteSDP.batchSend(e);if(n){const e=this.remoteSDP.toString(),t=this.logSDPExchange(e,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const n=await this.peerConnection.createAnswer();null==t||t(n.sdp||""),await this.peerConnection.setLocalDescription(n),BS.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))}else BS.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));return t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e,transceiver:t}}))}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async(e,t)=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return DP((function*(){const n=yield TP(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Tw().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===cI.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(BS.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===cI.RELAY)return;t.remoteSDP.updateCandidates(e);const n=yield TP(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=Ej(n.sdp),{remoteIceParameters:i}=yield r.iceParameters;t.remoteSDP.restartICE(i);const o=t.remoteSDP.toString(),s=t.logSDPExchange(n.sdp||"","offer","local","restartICE");t.store.descriptionStart(),yield TP(t.peerConnection.setLocalDescription(n)),null==s||s(o),yield TP(t.peerConnection.setRemoteDescription({type:"answer",sdp:o}))}catch(e){BS.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new Wy(Gy.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?Oy()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:zU(zU({},$P),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:zU(zU({},$P),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,BS.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,BS.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),bS("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[]};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(bE(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...BU.turnServerConfigToIceServers(e.turnServer.servers)),bS("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...BU.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),bS("FORCE_TURN_TCP")?t.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),bS("ENABLE_ENCODED_TRANSFORM")&&Tw().supportWebRTCEncodedTransform&&(t.encodedInsertableStreams=!0),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(yN(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!bS("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}tryBindTransportEvents(e){const t=e.transport;if(t){this.transportEventReceiver=e,t.onstatechange=()=>{var e;null!=t&&t.state&&(null===(e=this.onDTLSTransportStateChange)||void 0===e||e.call(this,t.state))},t.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const n=t.iceTransport;n&&(n.onstatechange=()=>{const e=null==t?void 0:t.iceTransport.state;var n;e&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,e))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){const{local:e,remote:t}=n.getSelectedCandidatePair();BS.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:t.type,protocol:t.protocol,address:t.address,port:t.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))),!t)return BS.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return BS.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!Tw().supportSetRtpSenderParameters)return BS.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const r={},i={};switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(e._encoderConfig){var o;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(i.maxBitrate=1e3*t),(Or(o=e._hints).call(o,Bw.LOW_STREAM)||e.isUseScaleResolutionDownBy)&&(n&&(i.maxFramerate=_N(n)),r&&r>=1&&(i.scaleResolutionDownBy=r))}if(bS("DSCP_TYPE")&&By()){var s;const e=bS("DSCP_TYPE");Or(s=["very-low","low","medium","high"]).call(s,e)&&(i.networkPriority=e)}const a=t.getParameters(),c=null===(n=a.encodings)||void 0===n?void 0:n[0];Oy()&&!c&&(r.encodings=[i]),c&&Object.assign(c,i),Object.assign(a,r),BS.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!Tw().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];i instanceof bO&&!this.isVP8Simulcast(i)&&await this.updateRtpSenderEncodings(i,r.sender)}}catch(e){BS.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=QP.parse(e);return t.forEach(((e,t)=>{const i=n[t],o=r.mediaDescriptions.find((e=>e.attributes.mid===i));o&&(Tj(o,e),Oj(o,e,this.store.codec))})),QP.print(r)}mungReceiveAnswerSDP(e,t,n){const r=QP.parse(e),i=r.mediaDescriptions.find((e=>e.attributes.mid===t));return i&&(n===aI.AUDIO&&"audio"===i.media.mediaType&&kj(i),this.useXR&&xj(r)),QP.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,o,s;const c=e[a],l=t[a];if(l instanceof bO&&!Or(n=l._hints).call(n,Bw.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=l._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=l._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!Oy()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof bO&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return!!(e instanceof bO&&bS("SIMULCAST")&&"vp8"===this.store.codec&&!Or(t=e._hints).call(t,Bw.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(bS("SDP_LOGGING"))return BS.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(e){if(Tw().supportPCSetConfiguration){const t=BU.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}function VU(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function HU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HU(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}MT([VU,DT("design:type",Function),DT("design:paramtypes",[Array,Array]),DT("design:returntype",cy)],BU.prototype,"updateRemoteRTPCapabilities",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[Object,Object,Array,Object,String,String]),DT("design:returntype",cy)],BU.prototype,"connect",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[Object,Array]),DT("design:returntype",cy)],BU.prototype,"createDataChannels",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[String,Array,String,Object]),DT("design:returntype",cy)],BU.prototype,"receive",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],BU.prototype,"batchReceive",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],BU.prototype,"stopReceiving",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],BU.prototype,"muteRemote",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],BU.prototype,"unmuteRemote",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],BU.prototype,"muteLocal",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],BU.prototype,"unmuteLocal",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],BU.prototype,"close",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[String,uC]),DT("design:returntype",cy)],BU.prototype,"updateEncoderConfig",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[String,uC]),DT("design:returntype",cy)],BU.prototype,"updateSendParameters",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[uC,String]),DT("design:returntype",cy)],BU.prototype,"replaceTrack",null),MT([VU,DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],BU.prototype,"getRemoteSSRC",null);const WU="v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0\na=msid-semantic: WMS\na=ice-lite\nm=application 9 UDP/DTLS/SCTP webrtc-datachannel\nc=IN IP4 127.0.0.1\na=mid:0\n",YU="9",qU=2e4,KU=4e4;class QU{get localCapabilities(){return YE(this._localCapabilities)}get rtpCapabilities(){return YE(this._rtpCapabilities)}get candidates(){return YE(this._candidates)}get iceParameters(){return YE(this._iceParameters)}get dtlsParameters(){return YE(this._dtlsParameters)}constructor(e){op(this,"sessionDesc",void 0),op(this,"_localCapabilities",void 0),op(this,"_rtpCapabilities",void 0),op(this,"_candidates",void 0),op(this,"_iceParameters",void 0),op(this,"_dtlsParameters",void 0),op(this,"setup",void 0),op(this,"currentMidIndex",void 0),op(this,"cname",void 0),op(this,"firefoxSsrcMidMap",new Map),e=YE(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:s,cname:a}=e,c=QP.parse(WU);this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=s,this.setup=o,this.cname=a;const l=this.rtpCapabilities.send;for(const u of c.mediaDescriptions){if(u.attributes.iceUfrag=t.iceUfrag,u.attributes.icePwd=t.icePwd,u.attributes.fingerprints=n.fingerprints,u.attributes.candidates=r,u.attributes.setup=o,"application"===u.media.mediaType&&(u.attributes.sctpPort="5000"),"video"===u.media.mediaType&&(u.media.fmts=l.videoCodecs.map((e=>e.payloadType.toString(10))),u.attributes.payloads=l.videoCodecs,u.attributes.extmaps=l.videoExtensions,bS("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Sj([{ssrcId:KU,rtx:bS("USE_SUB_RTX")?40001:void 0}],this.cname);u.attributes.ssrcs=e,u.attributes.ssrcGroups=t}if("audio"===u.media.mediaType&&(u.media.fmts=l.audioCodecs.map((e=>e.payloadType.toString(10))),u.attributes.payloads=l.audioCodecs,u.attributes.extmaps=l.audioExtensions,kj(u),bS("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Sj([{ssrcId:qU}],this.cname);u.attributes.ssrcs=e,u.attributes.ssrcGroups=t}}this.sessionDesc=c,this.currentMidIndex=c.mediaDescriptions.length-1}updateRemoteRTPCapabilities(e){const t=QP.parse(WU);this._rtpCapabilities=e;const n=this.rtpCapabilities.send;for(const r of t.mediaDescriptions){if(r.attributes.iceUfrag=this._iceParameters.iceUfrag,r.attributes.icePwd=this._iceParameters.icePwd,r.attributes.fingerprints=this._dtlsParameters.fingerprints,r.attributes.candidates=this._candidates,r.attributes.setup=this.setup,"application"===r.media.mediaType&&(r.attributes.sctpPort="5000"),"video"===r.media.mediaType&&(r.media.fmts=n.videoCodecs.map((e=>e.payloadType.toString(10))),r.attributes.payloads=n.videoCodecs,r.attributes.extmaps=n.videoExtensions,bS("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Sj([{ssrcId:KU,rtx:bS("USE_SUB_RTX")?40001:void 0}],this.cname);r.attributes.ssrcs=e,r.attributes.ssrcGroups=t}if("audio"===r.media.mediaType&&(r.media.fmts=n.audioCodecs.map((e=>e.payloadType.toString(10))),r.attributes.payloads=n.audioCodecs,r.attributes.extmaps=n.audioExtensions,bS("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Sj([{ssrcId:qU}],this.cname);r.attributes.ssrcs=e,r.attributes.ssrcGroups=t}}this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1}preloadRemoteMedia(e){this.rtpCapabilities;const t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send;for(let o=1;o<e;o++){const e=2*o+qU,s=2*o+KU,{ssrcs:a,ssrcGroups:c}=Sj([{ssrcId:e}],this.cname),{ssrcs:l,ssrcGroups:u}=Sj([{ssrcId:s,rtx:bS("USE_SUB_RTX")?s+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:YU,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:YU,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:a,ssrcGroups:c,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return QP.print(this.sessionDesc)}send(e,t,n,r){const{ssrcs:i,ssrcGroups:o}=Sj(t,this.cname,bS("SYNC_GROUP")?n:void 0),s=this.findPreloadMediaDesc(i);if(s){if(Oy()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,s.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,i);let n;return-1===t||Cy()||Ay()||ky()||0===t&&bS("USE_SUB_RTX")?(n=this.createOrRecycleSendMedia(e,i,o,"sendonly",r),this.updateBundleMids()):(n=YE(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=i,n.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,r)),Oy()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,n.attributes.mid),{mid:n.attributes.mid,needExchangeSDP:!0}}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:n,mslabel:r}=e;return this.send(t,n,r)})),n=[];let r=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:i}=e;i&&(r=!0),n.push(t)})),{mids:n,needExchangeSDP:r}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{"0"===e.attributes.mid||Oy()||Cy()||Ay()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Or(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Or(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}receive(e,t,n,r){e.forEach(((e,i)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[i])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}updateCandidates(e){e===cI.TCP?this._candidates.forEach((e=>{-1===this._candidates.findIndex((t=>"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port))&&this._candidates.push(GU(GU({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this._candidates=this._candidates.filter((e=>"tcp"!==e.transport));for(const t of this.sessionDesc.mediaDescriptions)t.attributes.candidates=this.candidates}restartICE(e){e=YE(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const r=n.media.mediaType===e&&"0"!==n.media.port&&("sendonly"===n.attributes.direction||"sendrecv"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(Oy()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==n.attributes.mid&&"1"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return r}))}createOrRecycleRecvMedia(e,t,n,r,i,o){const s=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=Lj(s,a,this.localCapabilities.send,s===aI.VIDEO?r:i),l=s===aI.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const u="".concat(this.currentMidIndex);let d={media:{mediaType:s,port:YU,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(u)}};d=this.mungRecvMediaDsec(d,e,o);const p=this.findFirstClosedMedia(s);if(p){const e=this.sessionDesc.mediaDescriptions.indexOf(p);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}updateRemoteCodec(e,t,n){const r=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Or(t=Object.keys(wS)).call(t,e)})))],i=new Set(t);if(r.every((e=>i.has(e))))return BS.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;const o=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var n;return Or(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))));if(0===o.length)return BS.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(r," codecs: ").concat(t)),!1;const s=[...new Set(o.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")))];let a;if(BS.debug("updateRemoteCodec, from ".concat(r," to ").concat(s)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((e=>"video"===e.media.mediaType&&"recvonly"===e.attributes.direction));else if(a=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Or(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction)),a.length!==e.length)return BS.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;this._rtpCapabilities.recv.videoCodecs=o;const c=this.localCapabilities.send,l=this.rtpCapabilities.recv,u=Lj(aI.VIDEO,l,c,n);return a.forEach((e=>{const t=u.map((e=>e.payloadType.toString(10)));BS.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from ").concat(e.attributes.payloads," to ").concat(u)),e.attributes.payloads=u,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,n,r,i){const o=this.rtpCapabilities.send,s=e===aI.VIDEO?o.videoCodecs:o.audioCodecs,a=e===aI.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let l={media:{mediaType:e,port:YU,protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};l=this.mungSendMediaDesc(l,i);const u=this.findFirstClosedMedia(e);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,n){const r=YE(e);return Ij(r),Tj(r,t),Nj(r,t),wj(r),Cj(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=YE(e);return Cj(n,t,this.localCapabilities.recv),kj(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>Oy()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}function JU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JU(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class ZU extends RI{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get localCodecs(){let e;return this.localCapabilities&&(e=Dj(this.localCapabilities)),[...new Set(e&&e.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Or(t=Object.keys(wS)).call(t,e)})))]}constructor(e,t,n){super(e,t),op(this,"store",void 0),op(this,"peerConnection",void 0),op(this,"remoteSDP",void 0),op(this,"initialOffer",void 0),op(this,"transportEventReceiver",void 0),op(this,"statsFilter",void 0),op(this,"useXR",bS("USE_XR")),op(this,"localCapabilities",void 0),op(this,"localCandidateCount",0),op(this,"allCandidatesReceived",!1),op(this,"remoteCodecs",void 0),op(this,"dataStreamChannelMap",new Map),op(this,"establishPromise",void 0),op(this,"mutex",new h_("NVExtentionsConnection-mutex")),op(this,"rtcMedia",void 0),this.store=t,this.peerConnection=n,this.statsFilter=mj(this.peerConnection,bS("STATS_UPDATE_INTERVAL"),void 0,Oy()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(e){try{const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=Ej(e.sdp),n=await Aj({filterRTX:!bS("USE_PUB_RTX")&&!bS("USE_SUB_RTX"),filterVideoFec:bS("FILTER_VIDEO_FEC"),filterAudioFec:bS("FILTER_AUDIO_FEC"),filterVideoCodec:bS("FILTER_VIDEO_CODEC")},{useXR:this.useXR});return this.localCapabilities=n,this.initialOffer=e,XU(XU({},t),{},{rtpCapabilities:n,offerSDP:e.sdp})}catch(e){throw new kT(Gy.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,r,i,o){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new QU({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:r,remoteSetup:i,localCapabilities:Dj(this.localCapabilities),cname:o});const s=this.remoteSDP.toString(),a=QP.parse(this.initialOffer.sdp),c=a.mediaDescriptions.find((e=>"audio"===e.media.mediaType));c&&kj(c),this.useXR&&xj(a);const l=QP.print(a),u=this.logSDPExchange(l||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),null==u||u(s),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s})}catch(e){throw new kT(Gy.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,this.remoteSDP)if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(e);const n=this.remoteSDP.toString();null==t||t(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}else BS.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");else BS.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(t))}async updateRemoteConnect(e){var t,n,r,i;null===(t=this.remoteSDP)||void 0===t||t.updateRemoteRTPCapabilities(e),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&(null===(i=this.remoteSDP)||void 0===i||i.updateRemoteCodec([],this.remoteCodecs,this.store.codec)),null===(n=this.remoteSDP)||void 0===n||n.preloadRemoteMedia(2);const o=null===(r=this.remoteSDP)||void 0===r?void 0:r.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const s=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(s),BS.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(e,t,n){var r=this;return DP((function*(){const i=yield TP(r.mutex.lock("From NVExtentionsConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const o=[];e.forEach((e=>{const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});o.push(t)})),Oy()&&!0===bS("SIMULCAST")&&(yield TP(r.applySimulcastForFirefox(o,e)));const s=yield TP(r.peerConnection.createOffer()),a=r.remoteSDP.predictReceivingMids(e.length),c=r.mungSendOfferSDP(s.sdp,e,a),l=QP.parse(c),u=a.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return _j(t,bS("USE_PUB_RTX"))}));let d;try{d=yield u}catch(i){d=[],r.remoteSDP.receive(e,t,n,d);const o=r.remoteSDP.toString();throw yield TP(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield TP(r.peerConnection.setRemoteDescription({type:"answer",sdp:o})),yield TP(r.stopSending(a,!0)),i}r.remoteSDP.receive(e,t,n,d);const p=r.remoteSDP.toString(),h=r.logSDPExchange(c,"offer","local","send");return yield TP(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield TP(r.applySimulcastEncodings(o,e)),yield TP(r.applySendEncodings(o,e)),null==h||h(p),yield TP(r.peerConnection.setRemoteDescription({type:"answer",sdp:p})),o.map(((e,t)=>{const n=a[t];return{localSSRC:u[t],id:n,transceiver:e}}))}catch(e){throw e instanceof kT?e:new kT(Gy.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new kT(Gy.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(e);return n&&"open"===n.readyState?BS.debug("[P2PConnection] Channels are already available and can be reused directly."):(n=this.peerConnection.createDataChannel("datastream-channel",{ordered:!1,maxRetransmits:bS("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(e,n)),void t.forEach((e=>{e._updateOriginDataChannel(n)}))}catch(e){throw e instanceof kT?e:new kT(Gy.DATACHANNEL_FAILED,"NVExtentionsConnection.createDataChannels failed; ".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return null==t||t.close(),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof kT?e:new kT(Gy.DATACHANNEL_FAILED,"NVExtentionsConnection.stopDataChannels failed; ".concat(e.toString()))}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),BS.debug("[NVExtentionsConnection] receive ".concat(e," by exchanging SDP."))}else BS.debug("[NVExtentionsConnection] receive ".concat(e," no need to exchange SDP."));const s=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:i}}catch(e){throw new kT(Gy.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:n}=this.remoteSDP.batchSend(e);if(n){const e=this.remoteSDP.toString(),t=this.logSDPExchange(e,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const n=await this.peerConnection.createAnswer();null==t||t(n.sdp||""),await this.peerConnection.setLocalDescription(n),BS.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else BS.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e}}))}catch(e){throw new kT(Gy.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new kT(Gy.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new kT(Gy.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new kT(Gy.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new kT(Gy.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async(e,t)=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new kT(Gy.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return DP((function*(){const n=yield TP(t.mutex.lock("From NVExtentionsConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Tw().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===cI.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(BS.debug("restartICE change iceTransportPolicy from [".concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===cI.RELAY)return;e!==cI.RELAY&&t.remoteSDP.updateCandidates(e);const n=yield TP(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=Ej(n.sdp),{remoteIceParameters:i}=yield r.iceParameters;t.remoteSDP.restartICE(i);const o=t.remoteSDP.toString(),s=t.logSDPExchange(n.sdp||"","offer","local","restartICE");yield TP(t.peerConnection.setLocalDescription(n)),null==s||s(o),yield TP(t.peerConnection.setRemoteDescription({type:"answer",sdp:o}))}catch(e){BS.warning("restart ICE failed, abort operation",e)}finally{n()}}))()}close(){var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new kT(Gy.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?Oy()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}getP2PConnectionParams(){var e;if(null===(e=this.peerConnection.currentLocalDescription)||void 0===e||!e.sdp||!this.localCapabilities)throw new Error;return XU(XU({},Ej(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,BS.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,BS.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),bS("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[]};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(bE(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...ZU.turnServerConfigToIceServers(e.turnServer.servers)),bS("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...ZU.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),bS("FORCE_TURN_TCP")?t.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(yN(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!bS("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}async applySendEncodings(e,t){try{if(!Tw().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let u=0;u<e.length;u++){const d=e[u],p=t[u];if(p&&p instanceof bO){var n,r,i;if(this.isVP8Simulcast(p))continue;const e={},t={};switch(p._optimizationMode){case"motion":e.degradationPreference="maintain-framerate";break;case"detail":e.degradationPreference="maintain-resolution";break;default:e.degradationPreference="balanced"}var o,s,a,c;if(null!==(n=p._encoderConfig)&&void 0!==n&&n.bitrateMax&&(t.maxBitrate=1e3*(null===(o=p._encoderConfig)||void 0===o?void 0:o.bitrateMax)),Or(r=p._hints).call(r,Bw.LOW_STREAM)&&(null!==(s=p._encoderConfig)&&void 0!==s&&s.frameRate&&(t.maxFramerate=_N(p._encoderConfig.frameRate)),null!==(a=p._encoderConfig)&&void 0!==a&&a.scaleResolutionDownBy&&(null===(c=p._encoderConfig)||void 0===c?void 0:c.scaleResolutionDownBy)>1&&(t.scaleResolutionDownBy=p._encoderConfig.scaleResolutionDownBy)),bS("DSCP_TYPE")&&By()){var l;const e=bS("DSCP_TYPE");Or(l=["very-low","low","medium","high"]).call(l,e)&&(t.networkPriority=e)}const u=d.sender.getParameters(),h=null===(i=u.encodings)||void 0===i?void 0:i[0];Oy()&&!h&&(e.encodings=[t]),h&&Object.assign(h,t),Object.assign(u,e),await d.sender.setParameters(u)}}}catch(e){BS.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,t,n){const r=QP.parse(e);return t.forEach(((e,t)=>{const i=n[t],o=r.mediaDescriptions.find((e=>e.attributes.mid===i));o&&(Tj(o,e),Oj(o,e,this.store.codec))})),QP.print(r)}mungReceiveAnswerSDP(e,t,n){const r=QP.parse(e),i=r.mediaDescriptions.find((e=>e.attributes.mid===t));return i&&n===aI.AUDIO&&"audio"===i.media.mediaType&&kj(i),this.useXR&&xj(r),QP.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,o,s;const c=e[a],l=t[a];if(l instanceof bO&&!Or(n=l._hints).call(n,Bw.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=l._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=l._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!Oy()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof bO&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return!!(e instanceof bO&&bS("SIMULCAST")&&"vp8"===this.store.codec&&!Or(t=e._hints).call(t,Bw.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(bS("SDP_LOGGING"))return BS.upload("exchanging ".concat(n," ").concat(t," SDP during NVExtentionsConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(e){if(Tw().supportPCSetConfiguration){const t=ZU.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}function $U(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From NVExtentionsConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function eF(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=OU,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new tF(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function tF(e){function t(e){if(Object(e)!==e)return cy.reject(new TypeError(e+" is not an object."));var t=e.done;return cy.resolve(e.value).then((function(e){return{value:e,done:t}}))}return tF=function(e){this.s=e,this.n=e.next},tF.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?cy.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?cy.reject(e):t(n.apply(this.s,arguments))}},new tF(e)}MT([$U,DT("design:type",Function),DT("design:paramtypes",[Object,Object,Array,Object,String,String]),DT("design:returntype",cy)],ZU.prototype,"connect",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[Array,Array]),DT("design:returntype",cy)],ZU.prototype,"updateRemoteRTPCapabilities",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],ZU.prototype,"updateRemoteConnect",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[Object,Array]),DT("design:returntype",cy)],ZU.prototype,"createDataChannels",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[String,Array,String,Object]),DT("design:returntype",cy)],ZU.prototype,"receive",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],ZU.prototype,"batchReceive",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],ZU.prototype,"stopReceiving",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],ZU.prototype,"muteRemote",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],ZU.prototype,"unmuteRemote",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],ZU.prototype,"muteLocal",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],ZU.prototype,"unmuteLocal",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],ZU.prototype,"close",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[String,uC]),DT("design:returntype",cy)],ZU.prototype,"updateEncoderConfig",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[String,uC]),DT("design:returntype",cy)],ZU.prototype,"updateSendParameters",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[uC,String]),DT("design:returntype",cy)],ZU.prototype,"replaceTrack",null),MT([$U,DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],ZU.prototype,"getRemoteSSRC",null);class nF extends RI{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get localCodecs(){return this._p2pConnection.localCodecs}constructor(e,t){super(e,t),op(this,"store",void 0),op(this,"peerConnection",void 0),op(this,"cname",void 0),op(this,"mutex",new h_("DataChannelConnection-mutex")),op(this,"dataChannel",void 0),op(this,"_p2pConnection",void 0),op(this,"establishPromise",void 0),op(this,"_nvMedia",void 0),this.store=t,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(nF.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new ZU(e,t,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var e;const t=null===(e=this._nvMedia)||void 0===e?void 0:e.getLocalRtpCapabilities();return await this._p2pConnection.establish(t)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(e,t,n,r,i,o){return this.cname=o,await this._p2pConnection.connect(e,t,n,r,i,o),await new cy(((e,t)=>{const r=setTimeout((()=>{this.closeSignal(),t(new kT(Gy.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(n))))}),2e3);this.dataChannel.onopen=()=>{if("open"===this.dataChannel.readyState)return clearTimeout(r),void e()},this.dataChannel.onerror=e=>{this.closeSignal(),t(e)}})),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}async updateRemoteRTPCapabilities(e,t){return this._p2pConnection.updateRemoteRTPCapabilities(e,t)}send(e,t,n){var r=this;return DP((function*(){const i=yield TP(r.mutex.lock("From DataChannelConnection.send"));try{return yield*CU(eF(r._p2pConnection.send(e,t,n)))}finally{i()}}))()}async stopSending(e,t){return this._p2pConnection.stopSending(e,t)}async createDataChannels(e,t){return this._p2pConnection.createDataChannels(e,t)}async stopDataChannels(e){return this._p2pConnection.stopDataChannels(e)}async receive(e,t,n,r){return this._nvMedia?(BS.debug("[DataChannelConnection] receive ".concat(e," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(e,t,this.cname)):(BS.debug("[DataChannelConnection] receive ".concat(e," by WebRTC.")),await this._p2pConnection.receive(e,t,n,r))}async batchReceive(e){return[...await this._p2pConnection.batchReceive(e)]}async stopReceiving(e){return await this._p2pConnection.stopReceiving(e)}async muteRemote(e){return await this._p2pConnection.muteRemote(e)}async unmuteRemote(e){return await this._p2pConnection.unmuteRemote(e)}async muteLocal(e){return await this._p2pConnection.muteLocal(e)}async unmuteLocal(e){return await this._p2pConnection.unmuteLocal(e)}restartICE(e){var t=this;return DP((function*(){return yield*CU(eF(t._p2pConnection.restartICE(e)))}))()}close(){var e;null===(e=this._nvMedia)||void 0===e||e.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(e){return this._p2pConnection.getRemoteVideoIsReady(e)}updateRemoteConnect(e){var t;null===(t=this._nvMedia)||void 0===t||t.setRemoteRtpCapabilities(e),this._p2pConnection.updateRemoteConnect(e)}async updateEncoderConfig(e,t){return await this._p2pConnection.updateEncoderConfig(e,t)}async updateSendParameters(e,t){return await this._p2pConnection.updateSendParameters(e,t)}setStatsRemoteVideoIsReady(e,t){this._p2pConnection.setStatsRemoteVideoIsReady(e,t)}async replaceTrack(e,t){return await this._p2pConnection.replaceTrack(e,t)}async getRemoteSSRC(e){return this._p2pConnection.getRemoteSSRC(e)}logSDPExchange(e,t,n,r){if(bS("SDP_LOGGING"))return BS.upload("exchanging ".concat(n," ").concat(t," SDP during DataChannelConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}static resolvePCConfiguration(e){const t={iceServers:[]};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(bE(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...nF.turnServerConfigToIceServers(e.turnServer.servers)),bS("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...nF.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),bS("FORCE_TURN_TCP")?t.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(yN(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!bS("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=e=>{var t;return null===(t=this.onICEConnectionStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onConnectionStateChange=e=>{var t;return null===(t=this.onConnectionStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onDTLSTransportStateChange=e=>{var t;return null===(t=this.onDTLSTransportStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onDTLSTransportError=e=>{var t;return null===(t=this.onDTLSTransportError)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onICETransportStateChange=e=>{var t;return null===(t=this.onICETransportStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstAudioReceived=e=>{var t;return null===(t=this.onFirstAudioReceived)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstVideoReceived=e=>{var t;return null===(t=this.onFirstVideoReceived)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstAudioDecoded=e=>{var t;return null===(t=this.onFirstAudioDecoded)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstVideoDecoded=(e,t,n)=>{var r;return null===(r=this.onFirstVideoDecoded)||void 0===r?void 0:r.call(this,e,t,n)},this._p2pConnection.onFirstVideoDecodedTimeout=e=>{var t;return null===(t=this.onFirstVideoDecodedTimeout)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onSelectedLocalCandidateChanged=(e,t)=>{var n;return null===(n=this.onSelectedLocalCandidateChanged)||void 0===n?void 0:n.call(this,e,t)},this._p2pConnection.onSelectedRemoteCandidateChanged=(e,t)=>{var n;return null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n?void 0:n.call(this,e,t)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}setConfiguration(e){this._p2pConnection.setConfiguration(e)}}function rF(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From DataChannelConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function iF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iF(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sF(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=OU,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new aF(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function aF(e){function t(e){if(Object(e)!==e)return cy.reject(new TypeError(e+" is not an object."));var t=e.done;return cy.resolve(e.value).then((function(e){return{value:e,done:t}}))}return aF=function(e){this.s=e,this.n=e.next},aF.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?cy.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?cy.reject(e):t(n.apply(this.s,arguments))}},new aF(e)}MT([rF,DT("design:type",Function),DT("design:paramtypes",[Object,Object,Array,Object,String,String]),DT("design:returntype",cy)],nF.prototype,"connect",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[Array,Array]),DT("design:returntype",cy)],nF.prototype,"updateRemoteRTPCapabilities",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[Object,Array]),DT("design:returntype",cy)],nF.prototype,"createDataChannels",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[String,Array,String,Object]),DT("design:returntype",cy)],nF.prototype,"receive",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],nF.prototype,"stopReceiving",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],nF.prototype,"muteRemote",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],nF.prototype,"unmuteRemote",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],nF.prototype,"muteLocal",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],nF.prototype,"unmuteLocal",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],nF.prototype,"close",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[String,uC]),DT("design:returntype",cy)],nF.prototype,"updateEncoderConfig",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[String,uC]),DT("design:returntype",cy)],nF.prototype,"updateSendParameters",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[uC,String]),DT("design:returntype",cy)],nF.prototype,"replaceTrack",null),MT([rF,DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],nF.prototype,"getRemoteSSRC",null);class cF extends lE{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(pI.StateChange,t,this._state)}constructor(e,t){super(),op(this,"store",void 0),op(this,"statsUploader",void 0),op(this,"connection",void 0),op(this,"localTrackMap",new Map),op(this,"remoteUserMap",new Map),op(this,"localDataChannels",[]),op(this,"remoteDataChannelMap",new Map),op(this,"pendingLocalTracks",[]),op(this,"pendingRemoteTracks",[]),op(this,"pendingLocalDataChannels",[]),op(this,"pendingRemoteDataChannels",[]),op(this,"statsCollector",void 0),op(this,"isPlanB",!1),op(this,"shouldForwardP2PCreation",void 0),op(this,"iceFailedCount",0),op(this,"dtlsFailedCount",0),op(this,"mutex",new h_("P2PChannel-mutex")),op(this,"_state",dI.Disconnected),op(this,"_pcStatsUploadType",bS("NEW_ICE_RESTART")?lI.FIRST_CONNECTION:lI.OLD_FIRST_CONNECTION),op(this,"_isInRestartIce",!1),op(this,"_isStartRestartIce",!1),op(this,"_restartStates",["disconnected","failed"]),op(this,"_restartTimer",void 0),op(this,"_isFirstConnected",!0),op(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==dI.Connected)return void n(new Wy(Gy.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const i=r.find((e=>"videoLowTrack"===e[0]));i&&i[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createMuteMessage(r);await NE(this,pI.RequestMuteLocal,o),t()}catch(e){n(e)}finally{r()}})),op(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==dI.Connected)return void n(new Wy(Gy.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();const i=r.find((e=>"videoLowTrack"===e[0]));if(i){const t=i[1];if(t.track._originMediaStreamTrack.stop(),!bS("DISABLE_DUAL_STREAM_USE_ENCODING")&&Tw().supportDualStreamEncoding){const n=e._mediaStreamTrack.clone();t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}else{const n=Vj(e,CE(this,pI.RequestLowStreamParameter));t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}await new cy(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}await this.connection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnmuteMessage(r);await NE(this,pI.RequestUnmuteLocal,o),t()}catch(e){n(e)}finally{r()}})),op(this,"handleUpdateVideoEncoder",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const n=this.localTrackMap.get(uI.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==dI.Connected)return void t();const{id:r,track:i}=n;await this.connection.updateSendParameters(r,i),await this.connection.updateEncoderConfig(r,i),this.emit(pI.UpdateVideoEncoder,i),t()}catch(e){n(e)}finally{r()}})),op(this,"handleSetOptimizationMode",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const n=this.localTrackMap.get(uI.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==dI.Connected)return;const{id:r,track:i}=n;await this.connection.updateSendParameters(r,i),t()}catch(e){n(e)}finally{r()}})),op(this,"handleReplaceMixingTrack",(async(e,t,n,r)=>{if(!this.connection||this.state!==dI.Connected)return void t();const i=lU([e]);let o;BS.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(i.getTrackId(),"]")),"boolean"==typeof r&&r||(o=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(e,i),t()}catch(e){n(e)}finally{var s;null===(s=o)||void 0===s||s()}})),op(this,"handleReplaceTrack",(async(e,t,n,r)=>{let i;BS.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var o;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.connection||!n||this.state!==dI.Connected)return void t();if(await(null===(o=this.connection)||void 0===o?void 0:o.replaceTrack(e,n[1].id)),this.isPlanB){const t=n[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(n[0],t)}if(n[0]===uI.LocalVideoTrack&&!bS("DISABLE_DUAL_STREAM_USE_ENCODING")&&Tw().supportDualStreamEncoding){const t=this.localTrackMap.get(uI.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new cy(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var s;null===(s=i)||void 0===s||s()}})),op(this,"handleGetRTCStats",(e=>{e(this.statsCollector.getRTCStats())})),op(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),op(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),op(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),op(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new iU(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!Tw().supportUnifiedPlan||bS("CHROME_FORCE_PLAN_B")&&By(),this.shouldForwardP2PCreation=bS("FORWARD_P2P_CREATION")&&Tw().supportPCSetConfiguration&&function(){const e=by();return e===fy.ANDROID||e===fy.IOS||e===fy.HARMONY_OS}(),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new nF({},this.store):this.isPlanB?new kU({},this.store):new BU({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e,t){var n;this.state=dI.New;const r=this.shouldForwardP2PCreation&&"closed"===(null===(n=this.connection)||void 0===n?void 0:n.peerConnectionState);if(this.shouldForwardP2PCreation&&!r||(r&&this.connection&&(BS.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new nF(e,this.store):this.isPlanB?new kU(e,this.store):new BU(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new Wy(Gy.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=bS("NEW_ICE_RESTART")?lI.FIRST_CONNECTION:lI.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e,t,n,r,i,o){if(!this.connection)throw new Wy(Gy.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof nF?this.connection.updateRemoteConnect(r):(this.store.peerConnectionStart(),await this.connection.connect(e,t,n,r,i,o),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=dI.Connected)}updateRemoteRTPCapabilities(e){const t=Array.from(this.localTrackMap.entries()).filter((e=>{var t;let[n]=e;return Or(t=[uI.LocalVideoLowTrack,uI.LocalVideoTrack]).call(t,n)})),n=t.map((e=>{let[,{id:t}]=e;return t})),r=t.map((e=>{let[t]=e;return t}));if(this.connection instanceof BU){if(eT.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(r),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!Or(e).call(e,this.store.codec)){const t=["vp8","h264"].find((t=>Or(e).call(e,t)));t&&(this.store.codec=t,BS.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(t,".")))}this.connection.updateRemoteRTPCapabilities(n,e)}}async preConnect(e,t,n,r,i,o){if(!this.connection)throw new Wy(Gy.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const s=await this.connection.connect(e,t,n,r,i,o);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=dI.Connected,s}getEstablishParams(){if(this.connection instanceof nF)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}async publishDataChannel(e){if(!this.connection||this.state!==dI.Connected){if(this.state===dI.Disconnected)throw new Wy(Gy.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return void e.forEach((e=>{var t;Or(t=this.pendingLocalDataChannels).call(t,e)||this.pendingLocalDataChannels.push(e)}))}const t=this.filterTobePublishedDataChannels(e);0!==t.length&&(t.forEach((e=>{const t=Date.now();this.store.publish(e.id.toString(),"datachannel",t)})),await this.connection.createDataChannels(this.store.uid,t),t.forEach((e=>{this.localDataChannels.push(e);const t=Date.now();this.store.publish(e.id+"","datachannel",void 0,t)})))}publish(e,t,n){var r=this;return DP((function*(){const i=yield TP(r.mutex.lock("From P2PChannel.publish"));try{if(!r.connection||r.state!==dI.Connected){if(r.state===dI.Disconnected)throw new Wy(Gy.UNEXPECTED_ERROR,"PeerConnection already disconnected.");r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(t))}r.store.pubId=r.store.pubId+1,bP.markPublishStart(r.store.clientId,r.store.pubId);const i=r.filterTobePublishedTracks(e,t,n);if(0===i.length)return void(yield TP(r.tryToUnmuteAudio(e)));yield*CU(sF(r.doPublish(r.connection,i)))}finally{i()}}))()}doPublish(e,t){var n=this;return DP((function*(){t.forEach((e=>{let{track:t,type:r}=e;const i=Date.now();n.store.publish(t.getTrackId(),r===uI.LocalAudioTrack?"audio":"video",i)})),n.bindLocalTrackEvents(t);const r=t.map((e=>{let{track:t}=e;return t})),i=yield TP(e.send(t.map((e=>{let{track:t}=e;return t})),n.store.codec,n.store.audioCodec)),o=(yield TP(i.next())).value,s=n.createGatewayPublishMessage(t,o);let a;try{a=yield s}catch(e){throw i.throw(e),(null==e?void 0:e.code)===Gy.WS_ABORT&&t.forEach((e=>{let{track:t}=e;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(t),e}const c=n.mapPubResToRemoteConfig(s,a),l=(yield TP(i.next(c))).value,u=bS("ENABLE_VIDEO_SEI");r.forEach((async e=>{const t=e.getRTCRtpTransceiver();t&&u&&(e.trackMediaType===aI.VIDEO?await async function(e,t){if(!Tw().supportWebRTCEncodedTransform)return void BS.warning("browser not support video encoded transform");if(gP.has(e))return;if(!e.track)return;const n={track:e.track};if(wy()){if(!e.createEncodedStreams)return void BS.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(e){return void BS.error("create video-encoded-streams error",e&&e.message)}let o=[];t.on("sei-to-send",(e=>{o.push(e)}));const s=new TransformStream({transform(t,i){n.controller||(n.controller=i),e.track&&e.track.id!==n.track.id&&(BS.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const s=o.shift();s&&(t.data=mP(t.data,s)),i.enqueue(t)}});i.readable.pipeThrough(s).pipeTo(i.writable)}else{if(!Cy())return;{if("undefined"==typeof RTCRtpScriptTransform)return void BS.warning("browser not support RTCRtpScriptTransform");const i=uP(),o=new MessageChannel;await new cy((e=>i.onmessage=t=>{"registered"===t.data&&e(void 0)}));const s=new RTCRtpScriptTransform(i,{name:"tx",port:o.port2},[o.port2]);e.transform=s,await new cy((e=>i.onmessage=t=>{"started"===t.data&&e(void 0)})),t.on("sei-to-send",(e=>{o.port1.postMessage({sei:e})})),o.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id&&(BS.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r))},n.worker=i}}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}const t=gP.get(e);if(t){gP.delete(e);try{var n,i;null===(n=t.controller)||void 0===n||n.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){BS.warning(e&&e.message)}}}gP.set(e,n),e.track.addEventListener("ended",r)}(t.sender,e):e.trackMediaType===aI.AUDIO&&await async function(e){if(!Tw().supportWebRTCEncodedTransform)return void BS.warning("browser not support audio encoded transform");if(dP.has(e))return;if(!e.track)return;const t={track:e.track};if(wy()){if(!e.createEncodedStreams)return void BS.warning("browser not support createEncodedStreams() API");let r=null;try{r=e.createEncodedStreams()}catch(e){return void BS.error("create audio-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(r,i){t.controller||(t.controller=i),e.track&&e.track.id!==t.track.id&&(BS.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n)),i.enqueue(r)}});r.readable.pipeThrough(i).pipeTo(r.writable)}else if(Cy()){if("undefined"==typeof RTCRtpScriptTransform)return void BS.warning("browser not support RTCRtpScriptTransform");const r=uP(),i=new MessageChannel;await new cy((e=>r.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(r,{name:"tx",port:i.port2},[i.port2]);e.transform=o,await new cy((e=>r.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=r=>{var i;r.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==t.track.id&&(BS.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n))},t.worker=r}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",n)}const t=dP.get(e);if(t){dP.delete(e);try{var r,i;null===(r=t.controller)||void 0===r||r.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){BS.warning(e&&e.message)}}}dP.set(e,t),e.track.addEventListener("ended",n)}(t.sender))})),t.forEach((e=>{let{type:t}=e;n.statsCollector.addLocalStats(t)})),n.assignLocalTracks(t,l),n.statsUploader.startUploadOutboundStats(),t.forEach((e=>{let{track:t,type:r}=e;const i=Date.now();n.store.publish(t.getTrackId(),r===uI.LocalAudioTrack?"audio":"video",void 0,i)}))}))()}async updateVideoStreamParameter(e,t){const n=this.localTrackMap.get(t);if(!n)return;if(!(n.track instanceof bO))return BS.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof BU||this.connection instanceof kU))return BS.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");const{track:r}=n,i=function(e,t){const n={};return e.height&&e.width&&(n.scaleResolutionDownBy=NN(e,t)),n.maxFramerate=e.framerate?_N(e.framerate):void 0,n.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,n}(e,r);if(r._encoderConfig||(r._encoderConfig={}),t!==uI.LocalVideoLowTrack||!bS("DISABLE_DUAL_STREAM_USE_ENCODING")&&Tw().supportDualStreamEncoding)null!=i.scaleResolutionDownBy&&(r._encoderConfig.scaleResolutionDownBy=i.scaleResolutionDownBy);else{const t=r._originMediaStreamTrack;if(!t.canvas)return BS.warn("[".concat(r.getTrackId(),"] no canvas on track"));!function(e,t){const n=e.canvas;t.width&&(n.width=_N(t.width)),t.height&&(n.height=_N(t.height)),t.framerate&&(n.stopCapture&&n.stopCapture(),n.stopCapture=EC((()=>{!n.startCapture&&n.stopCapture&&n.stopCapture(),n.startCapture&&n.startCapture()}),_N(t.framerate)))}(t,e)}null!=i.maxBitrate&&(r._encoderConfig.bitrateMax=i.maxBitrate/1e3),null!=i.maxFramerate&&(r._encoderConfig.frameRate&&"object"==typeof r._encoderConfig.frameRate?r._encoderConfig.frameRate.max=i.maxFramerate:r._encoderConfig.frameRate={max:i.maxFramerate}),BS.debug("[".concat(r.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(r._encoderConfig))),await this.connection.updateRtpSenderEncodings(r)}publishLowStream(e){var t=this;return DP((function*(){if(!t.connection||t.state!==dI.Connected)return;const n=yield TP(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const n=t.localTrackMap.get(uI.LocalVideoTrack);if(!n)throw new Wy(Gy.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(uI.LocalVideoLowTrack))throw new Wy(Gy.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));const i=[{track:t.getLowVideoTrack(n.track,e),type:uI.LocalVideoLowTrack}];if(yield*CU(sF(t.doPublish(t.connection,i))),n.track.muted||!n.track.enabled){var r;const e=null===(r=t.localTrackMap.get(uI.LocalVideoLowTrack))||void 0===r?void 0:r.id;void 0!==e&&(yield TP(t.connection.muteLocal([e])))}}finally{n()}}))()}async republish(){this.pendingLocalTracks.length>0&&(BS.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await IE(this,pI.RequestRePublish,this.pendingLocalTracks),this.emit(pI.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(BS.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await IE(this,pI.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let t=this.pendingRemoteTracks.length-1;t>=0;t--){const{user:e,kind:n}=this.pendingRemoteTracks[t];(n!==aI.AUDIO||e._audio_added_&&e._audioSSRC)&&(n!==aI.VIDEO||e._video_added_&&e._videoSSRC)||this.pendingRemoteTracks.splice(t,1)}if(e)await IE(this,pI.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:t,kind:n}of this.pendingRemoteTracks)await this.subscribe(t,n,n===aI.VIDEO?t._videoSSRC:t._audioSSRC);this.pendingRemoteTracks.forEach((e=>{let{user:t}=e;this.emit(pI.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==dI.Connected)return void e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));return n&&n[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==dI.Connected)return void e.forEach((e=>{const t=this.pendingLocalDataChannels.indexOf(e);-1!==t&&this.pendingLocalDataChannels.splice(t,1)}));const t=this.filterTobeUnpublishedDataChannels(e);return 0!==t.length?(t.forEach((e=>{const t=this.localDataChannels.indexOf(e);-1!==t&&this.localDataChannels.splice(t,1)})),0===this.localDataChannels.length&&await this.connection.stopDataChannels(this.store.uid),t.map((e=>e.id))):void 0}async unpublishLowStream(){if(!this.connection||this.state!==dI.Connected)return;const e=this.localTrackMap.get(uI.LocalVideoLowTrack);if(!e)return;e.track.close();const t=[[uI.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const n=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadOutboundStats(),n}async subscribeDataChannel(e,t){if(!this.connection||this.state!==dI.Connected)throw new Wy(Gy.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const n=t.filter((t=>{var n;return!(null!==(n=this.remoteDataChannelMap.get(e))&&void 0!==n&&n.get(t.id))}));if(0!==n.length)return await this.connection.createDataChannels(e.uid,n),n.forEach((t=>{var n;this.remoteDataChannelMap.has(e)?null===(n=this.remoteDataChannelMap.get(e))||void 0===n||n.set(t.id,t):this.remoteDataChannelMap.set(e,new Map([[t.id,t]]));const r=this.pendingRemoteDataChannels.findIndex((n=>{let{user:r,id:i}=n;return r.uid===e.uid&&i===t.id}));-1!==r&&this.pendingRemoteDataChannels.splice(r,1)})),n.map((e=>e.id))}async subscribe(e,t,n,r,i){var o;if(!this.connection||this.state!==dI.Connected)throw new Wy(Gy.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(null!==(o=this.remoteUserMap.get(e))&&void 0!==o&&o.has(t))return;let s,a,c;if(i){const n=i.find((e=>{let{stream_type:n}=e;return n===t}));if(!n)throw new Wy(Gy.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));const r=await this.connection.receive(t,n.ssrcs,String(e._uintid),n.attributes);this.connection instanceof BU&&(c=r.transceiver),s=r.track,a=r.id}else{const i=await this.connection.receive(t,[{ssrcId:n,rtx:r}],String(e._uintid),void 0);this.connection instanceof BU&&(c=i.transceiver),s=i.track,a=i.id}t===aI.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(s):(e._audioTrack=new RO(s,e.uid,e._uintid,this.store),BS.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(s):(e._videoTrack=new AO(s,e.uid,e._uintid,this.store),BS.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),bS("ENABLE_VIDEO_SEI")&&c&&(t==aI.VIDEO?await yP(c.receiver,{onSei:t=>{var n;null===(n=e._videoTrack)||void 0===n||n._onSei(t)}}):t==aI.AUDIO&&await hP(c.receiver));const l=this.remoteUserMap.get(e);l?l.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();const u=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:i}=n;return r.uid===e.uid&&t===i}));-1!==u&&(this.pendingRemoteTracks.splice(u,1),this.emit(pI.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==dI.Connected)throw new Wy(Gy.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter((e=>{var t;let{user:n,mediaType:r}=e;return!(null!==(t=this.remoteUserMap.get(n))&&void 0!==t&&t.has(r))}));const t=await this.connection.batchReceive(e.map((e=>{let{user:t,mediaType:n,ssrcId:r,rtxSsrcId:i}=e;return{kind:n,ssrcMsg:[{ssrcId:r,rtx:i}],mslabel:String(t._uintid)}})));e.forEach(((e,n)=>{let{user:r,mediaType:i}=e;const{track:o,id:s,transceiver:a}=t[n];i===aI.AUDIO?(r._audioTrack?r._audioTrack._updateOriginMediaStreamTrack(o):(r._audioTrack=new RO(o,r.uid,r._uintid,this.store),BS.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(r._audioTrack.getTrackId()))),a&&r._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(r,r._audioTrack)):(r._videoTrack?r._videoTrack._updateOriginMediaStreamTrack(o):(r._videoTrack=new AO(o,r.uid,r._uintid,this.store),BS.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(r._videoTrack.getTrackId()))),a&&r._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(r,r._videoTrack));const c=this.remoteUserMap.get(r);c?c.set(i,s):this.remoteUserMap.set(r,new Map([[i,s]])),this.statsCollector.addRemoteStats(r.uid),this.statsUploader.startUploadInboundStats();const l=this.pendingRemoteTracks.findIndex((e=>{let{user:t,kind:n}=e;return t.uid===r.uid&&i===n}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(pI.MediaReconnectEnd,r.uid))}))}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:i}=n;return void 0!==t?r.uid===e.uid&&t===i:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===dI.Connected||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===aI.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===aI.VIDEO){var i;null===(i=e._videoTrack)||void 0===i||i._destroy(),e._videoTrack=void 0}})),!this.connection||this.state!==dI.Connected)return;const i=this.filterTobeUnSubscribedTracks(e,t);if(0===i.length)return;await this.connection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnsubscribeMessage(i);return this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),i.forEach((e=>{let[t,{kind:r}]=e;var i,o;if(r===aI.VIDEO&&t._videoSSRC&&(null===(i=this.connection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===aI.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(r===aI.AUDIO){var s;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0)}})),o}async unsubscribeDataChannel(e,t){if(t.forEach((e=>{const t=this.pendingRemoteDataChannels.findIndex((t=>t.id===e.id));-1!==t&&this.pendingRemoteDataChannels.splice(t,1)})),!this.connection)return;const n=this.filterTobeUnSubscribedDataChannels(e,t);if(0===n.length)return;t.forEach((e=>{e._close()}));const r=this.remoteDataChannelMap.get(e);return n.forEach((e=>{r&&r.delete(e.id)})),r&&0===r.size&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),n.map((e=>e.id))}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(const{user:i,mediaType:o}of e){const e=this.pendingRemoteTracks.filter((e=>{let{user:t,kind:n}=e;return void 0!==o?t.uid===i.uid&&o===n:t.uid===i.uid}));e.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),t=t.concat(e)}if(!this.connection||this.state!==dI.Connected)return void t.forEach((e=>{let{user:t,kind:n}=e;var r;if(n===aI.AUDIO)null===(r=t._audioTrack)||void 0===r||r._destroy(),t._audioTrack=void 0;else if(n===aI.VIDEO){var i;null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0}}));const n=zE(e).call(e,((e,t)=>{let{user:n,mediaType:r}=t;const i=this.filterTobeUnSubscribedTracks(n,r);return e.concat(i)}),[]);if(0===n.length)return;await this.connection.stopReceiving(n.map((e=>{let[,{id:t}]=e;return t})));const r=this.createUnsubscribeAllMessage(n);return this.withdrawRemoteTracks(n),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),n.forEach((e=>{let[t,{kind:n}]=e;var r,i;if(n===aI.VIDEO&&t._videoSSRC&&(null===(r=this.connection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),n===aI.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0;else if(n===aI.AUDIO){var o;this.unbindRemoteTrackEvents(t._audioTrack),null===(o=t._audioTrack)||void 0===o||o._destroy(),t._audioTrack=void 0}})),r}async muteRemote(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);if(!n)return void BS.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void BS.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===aI.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.connection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||BS.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):BS.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(uI.LocalAudioTrack);if((null==t?void 0:t.track)instanceof rO){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==uI.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===uI.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===uI.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,n,r,i){if(e){const n=this.localTrackMap.get(uI.LocalAudioTrack),o=r?this.localTrackMap.get(uI.LocalVideoLowTrack):this.localTrackMap.get(uI.LocalVideoTrack);eT.publish(this.store.sessionId,{eventElapse:bP.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(Bw.SCREEN_TRACK)),audio:!!n,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;n||(n=[]);const s=n.find((e=>e instanceof eO)),a=r?null===(o=this.localTrackMap.get(uI.LocalVideoTrack))||void 0===o?void 0:o.track:n.find((e=>e instanceof bO));eT.publish(this.store.sessionId,{eventElapse:bP.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(Bw.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===aI.VIDEO?n._videoSSRC:n._audioSSRC;i&&eT.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===aI.VIDEO,audio:r===aI.AUDIO,peerid:n.uid,subscribeRequestid:r===aI.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:bP.measureFromSubscribeStart(this.store.clientId,i)})}reset(){BS.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new h_("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new nF({},this.store):this.isPlanB?new kU({},this.store):new BU({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(uI.LocalAudioTrack);if((null==e?void 0:e.track)instanceof rO){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=dI.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(uI.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(uI.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof bO||t&&t.track instanceof eO?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(hp(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(uI.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=eh(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.connection&&(BS.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=dI.Reconnecting,bS("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new nF({},this.store):this.isPlanB?new kU({},this.store):new BU({},this.store),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case uI.LocalVideoTrack:Or(t=r._hints).call(t,Bw.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case uI.LocalAudioTrack:r instanceof rO?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case uI.LocalVideoLowTrack:}})),this.emit(pI.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(hp(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(pI.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),0!==this.localDataChannels.length&&(this.localDataChannels.forEach((e=>{this.pendingLocalDataChannels.push(e)})),this.localDataChannels.length=0),0!==this.remoteDataChannelMap.size&&(Array.from(this.remoteDataChannelMap.entries()).forEach((e=>{let[t,n]=e;Array.from(hp(n).call(n)).forEach((e=>{this.setPendingRemoteDataChannel(t,e)}))})),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),BS.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(const n of this.pendingRemoteDataChannels){const{user:r,id:i}=n;if((e instanceof oU?e.uid:e)===r.uid&&i===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof oU?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return DP((function*(){if(!t.connection||t.state!==dI.Connected||t.connection instanceof nF)return;const n=yield TP(t.mutex.lock("From P2PChannel.restartICE"));let r;try{r=yield TP(t.connection.restartICE(e));const n=yield TP(r.next());if(n.done)return;const i=n.value,o=yield i;switch(t.reportPCDisconnectedOrFailed(e),e){case cI.TCP:t._pcStatsUploadType=lI.TCP_RESTART;break;case cI.RELAY:t._pcStatsUploadType=lI.RELAY_RESTART;break;default:t._pcStatsUploadType=lI.OLD_RESTART}t._isInRestartIce=!0,r.next(o)}catch(e){var i;null===(i=r)||void 0===i||i.throw(e)}finally{n()}}))()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),t=this.localTrackMap.get(uI.LocalVideoTrack),n=this.localTrackMap.get(uI.LocalAudioTrack),r=e.videoSend.find((e=>e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId))),i=e.audioSend.find((e=>e.ssrc===(null==n?void 0:n.ssrcs[0].ssrcId)));if(!r||!i)return 1;const o=wE(this,pI.NeedSignalRTT),s=r?r.rttMs:void 0,a=i?i.rttMs:void 0,c=s&&a?(s+a)/2:s||a,l=(c&&o?(c+o)/2:c||o)||0,u=100*e.sendPacketLossRate*.7/50+.3*l/1500,d=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,p=null==t?void 0:t.track;if(p&&p._encoderConfig&&-1===p._hints.indexOf(Bw.SCREEN_TRACK)){const t=p._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return rT[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][d]}}return d}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const i=r._audioSSRC,o=r._videoSSRC,s=e.audioRecv.find((e=>e.ssrc===i)),a=e.videoRecv.find((e=>e.ssrc===o));if(!s&&!a)return void(t+=1);const c=wE(this,pI.NeedSignalRTT),l=e.rtt,u=(l&&c?(l+c)/2:l||c)||0,d=s?s.jitterMs:void 0,p=e.recvPacketLossRate;let h=.7*p*100/50+.3*u/1500;d&&(h=.6*p*100/50+.2*u/1500+.2*d/400),t+=h<.1?1:h<.17?2:h<.36?3:h<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new cy(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}async replaceTrack(e,t){var n;if(BS.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==dI.Connected)return;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!r)return;const i=r[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:i}]),this.bindLocalTrackEvents([{track:t,type:i}]),r[1].track=t),await(null===(n=this.connection)||void 0===n?void 0:n.replaceTrack(t,r[1].id)),this.isPlanB){const e=r[1];e.id=t._mediaStreamTrack.id,this.localTrackMap.set(i,e)}if(i===uI.LocalVideoTrack&&!bS("DISABLE_DUAL_STREAM_USE_ENCODING")&&Tw().supportDualStreamEncoding){const t=this.localTrackMap.get(uI.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new cy(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}}filterTobePublishedTracks(e,t,n){const r=[],i=this.getAllTracks();e=GE(e=e.filter((e=>-1===i.indexOf(e))));let o,s=!1;const a=this.localTrackMap.get(uI.LocalAudioTrack);for(const c of e){if(c instanceof bO&&(this.localTrackMap.has(uI.LocalVideoTrack)||s?new Wy(Gy.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:uI.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:uI.LocalVideoLowTrack})}if(c instanceof eO)if(a){const e=a.track;if(e instanceof rO)cU([c]),e.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0);else{const t=lU([e,c]);BS.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(t.getTrackId(),"]")),this.replaceTrack(e,t)}}else o instanceof rO?(cU([c]),o.addAudioTrack(c)):o=o||!c._useAudioElement&&Tw().webAudioMediaStreamDest&&!c._bypassWebAudio?lU(o?[c,o]:[c]):c}return o&&(BS.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(o.getTrackId(),"]")),r.push({track:o,type:uI.LocalAudioTrack})),r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=GE(e=e.filter((e=>-1!==n.indexOf(e))));for(const r of e){if(r instanceof eO){const e=this.localTrackMap.get(uI.LocalAudioTrack);if(!e)continue;e.track instanceof rO?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([uI.LocalAudioTrack,e]),e.track.close())):t.push([uI.LocalAudioTrack,e])}if(r instanceof bO){const e=this.localTrackMap.get(uI.LocalVideoTrack);if(!e)continue;t.push([uI.LocalVideoTrack,e]);const n=this.localTrackMap.get(uI.LocalVideoLowTrack);n&&t.push([uI.LocalVideoLowTrack,n])}}return t}filterTobePublishedDataChannels(e){return(e=GE(e)).filter((e=>-1===this.localDataChannels.findIndex((t=>t.id===e.id))))}filterTobeUnpublishedDataChannels(e){return(e=(e=GE(e)).filter((e=>-1!==this.localDataChannels.indexOf(e)))).filter((e=>e._originDataChannel))}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case uI.LocalVideoTrack:t.addListener(zw.GET_STATS,this.handleGetLocalVideoStats),t.addListener(zw.GET_RTC_STATS,this.handleGetRTCStats),t.addListener(zw.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(zw.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(zw.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(zw.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.addListener(zw.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(zw.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(zw.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case uI.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case uI.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof rO?e.trackList.forEach((e=>{e.addListener(zw.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(zw.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(zw.GET_STATS,this.handleGetLocalAudioStats),e.addListener(zw.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(zw.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(zw.GET_STATS,this.handleGetLocalAudioStats),e.addListener(zw.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(zw.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(zw.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(zw.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(zw.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(zw.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case uI.LocalVideoTrack:t.off(zw.GET_STATS,this.handleGetLocalVideoStats),t.off(zw.GET_RTC_STATS,this.handleGetRTCStats),t.off(zw.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(zw.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(zw.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(zw.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.off(zw.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(zw.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(zw.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case uI.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case uI.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof rO?e.trackList.forEach((e=>{e.off(zw.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(zw.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(zw.GET_STATS,this.handleGetLocalAudioStats),e.off(zw.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(zw.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(zw.GET_STATS,this.handleGetLocalAudioStats),e.off(zw.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(zw.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(zw.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(zw.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(zw.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(zw.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof AO&&t.addListener(zw.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof RO&&t.addListener(zw.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(zw.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(aI.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(aI.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let i,o,{track:s,type:a}=e;switch(a){case uI.LocalAudioTrack:i=QT.Audio,o={dtx:s instanceof tO&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case uI.LocalVideoTrack:i=Or(r=s._hints).call(r,Bw.SCREEN_TRACK)?QT.Screen:QT.High,o=oF(oF({},bN(s)),{},{codec:this.store.codec});break;case uI.LocalVideoLowTrack:i=QT.Low,o=oF(oF({},bN(s)),{},{codec:this.store.codec})}return{stream_type:i,attributes:o,ssrcs:t[n]}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case uI.LocalVideoTrack:n=Or(t=i._hints).call(t,Bw.SCREEN_TRACK)?QT.Screen:QT.High;break;case uI.LocalAudioTrack:n=QT.Audio;break;case uI.LocalVideoLowTrack:n=QT.Low}return{stream_type:n,ssrcs:o,mid:s}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:i}=e;this.localTrackMap.set(i,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(pI.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),bS("NEW_ICE_RESTART")){var n;if(Or(n=this._restartStates).call(n,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const t=t=>{"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(BS.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(t)),"CONNECTED"===wE(this,pI.QueryClientConnectionState)&&this.emit(pI.RequestRestartICE,t))},n=()=>{"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),BS.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout((()=>this.emit(pI.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())},r=bS("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout((()=>{if(bS("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&Tw().supportPCSetConfiguration)t(cI.RELAY),this._restartTimer=window.setTimeout(n,r);else if(Oy())t(cI.UDP),this._restartTimer=window.setTimeout(n,4e3);else{if(t(cI.TCP),Tw().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout((()=>{t(cI.RELAY),this._restartTimer=window.setTimeout(n,r)}),r));this._restartTimer=window.setTimeout(n,r)}}),800))}}else{if("disconnected"===t&&"disconnected"===e.iceConnectionState)return setTimeout((()=>{"disconnected"===e.iceConnectionState&&bS("ICE_RESTART")&&"CONNECTED"===wE(this,pI.QueryClientConnectionState)&&this.emit(pI.RequestRestartICE)}),800),void setTimeout((()=>{"disconnected"===e.peerConnectionState&&(BS.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout((()=>this.emit(pI.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())}),4e3);"failed"===t&&(BS.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout((()=>this.emit(pI.P2PLost)),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),eT.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:hE.TRACER}).onSuccess(),this.emit(pI.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(hp(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(qw.FIRST_FRAME_DECODED),eT.firstRemoteFrame(this.store.sessionId,YS.FIRST_AUDIO_DECODE,qS.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:bP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(hp(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&eT.firstRemoteFrame(this.store.sessionId,YS.FIRST_AUDIO_RECEIVED,qS.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:bP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(hp(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&eT.firstRemoteFrame(this.store.sessionId,YS.FIRST_VIDEO_RECEIVED,qS.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:bP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(pI.ConnectionTypeChange,n),BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(wN(t))," -> ").concat(JSON.stringify(wN(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{BS.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(wN(t))," -> ").concat(JSON.stringify(wN(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(uI.LocalAudioTrack);if(e instanceof eO&&(null==n?void 0:n.track)instanceof rO)return n.track.isActive||t.push([uI.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===uI.LocalVideoTrack)){const e=this.localTrackMap.get(uI.LocalVideoLowTrack);e&&t.push([uI.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(uI.LocalAudioTrack);if(e instanceof eO&&(null==n?void 0:n.track)instanceof rO)return n.track.isActive&&t.push([uI.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===uI.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(uI.LocalVideoLowTrack);e&&t.push([uI.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case uI.LocalAudioTrack:n=QT.Audio;break;case uI.LocalVideoTrack:n=Or(t=i._hints).call(t,Bw.SCREEN_TRACK)?QT.Screen:QT.High;break;case uI.LocalVideoLowTrack:n=QT.Low}return{stream_type:n,ssrcs:o,mid:s}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case uI.LocalAudioTrack:n=QT.Audio;break;case uI.LocalVideoTrack:n=Or(t=i._hints).call(t,Bw.SCREEN_TRACK)?QT.Screen:QT.High;break;case uI.LocalVideoLowTrack:n=QT.Low}return{stream_type:n,ssrcs:o,mid:s}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((t=>{let[r,i]=t;n.push([e,{kind:r,id:i}])}));return n}filterTobeUnSubscribedDataChannels(e,t){const n=[];return t.forEach((t=>{var r;null!==(r=this.remoteDataChannelMap.get(e))&&void 0!==r&&r.has(t.id)&&n.push(t)})),n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:i}]=e;switch(r){case aI.VIDEO:return void(n._videoSSRC&&t.push({stream_type:aI.VIDEO,ssrcId:n._videoSSRC}));case aI.AUDIO:return void(n._audioSSRC&&t.push({stream_type:aI.AUDIO,ssrcId:n._audioSSRC}))}})),t}createUnsubscribeAllMessage(e){const t=new Map;return e.forEach((e=>{let[n,{kind:r}]=e;if(t.has(n)){let e=t.get(n);r===aI.VIDEO?e|=ZT.Video:e|=ZT.Audio,t.set(n,e)}else r===aI.VIDEO?t.set(n,ZT.Video):t.set(n,ZT.Audio)})),{users:Array.from(t.entries()).map((e=>{let[t,n]=e;return{stream_id:t.uid,stream_type:n}}))}}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(uI.LocalVideoTrack),n=this.localTrackMap.get(uI.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(e,t){return e.map(((e,n)=>{var r;let{stream_type:i}=e;return null===(r=t.find((e=>{let{stream_type:t}=e;return i===t})))||void 0===r?void 0:r.attributes}))}async tryToUnmuteAudio(e){for(let n=0;n<e.length;n++)if(e[n]instanceof eO){var t;const r=this.filterTobeUnmutedTracks(e[n]);if(0===r.length)continue;await(null===(t=this.connection)||void 0===t?void 0:t.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t}))));const i=this.createUnmuteMessage(r);return void await NE(this,pI.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(pI.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(pI.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await n_(g_(this.dtlsFailedCount,m_)),this.emit(pI.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await IE(this,pI.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(pI.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(uI.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof bO))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof bO)).length>1)throw new Wy(Gy.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof eO)).length>1&&(e.some((e=>e instanceof eO&&e._bypassWebAudio))||!Tw().webAudioMediaStreamDest))throw new Wy(Gy.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof bO&&this.pendingLocalTracks.some((e=>e instanceof bO)))throw new Wy(Gy.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof eO&&this.pendingLocalTracks.some((e=>e instanceof eO))&&(!Tw().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof eO&&e._bypassWebAudio))))throw new Wy(Gy.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!bS("DISABLE_DUAL_STREAM_USE_ENCODING")&&Tw().supportDualStreamEncoding,r=oF(oF({},{width:160,height:120,framerate:15,bitrate:50}),t);let i;i=n?e._mediaStreamTrack.clone():Vj(e,r);const o=r_(8,"track-low-"),s=new bO(i,oF(oF({},n&&{scaleResolutionDownBy:NN(r,e)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}),void 0,void 0,o);return s.on(Ww.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,Vw.LOW_STREAM)})),s._hints.push(Bw.LOW_STREAM),e.on("sei-to-send",(e=>{s.emit("sei-to-send",e)})),e.addListener(zw.NEED_CLOSE,(()=>{s.close()})),s}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.connection&&this.connection instanceof BU){var i,o,s,a;const c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:l,dtlsTransportState:u,peerConnectionState:d}=this.connection,{local:p,remote:h}=await this.connection.getSelectedCandidatePair();eT.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:l,dtlsstate:u,connectionstate:d,intSucc:t?1:2,error:r,selectedLocalCandidateProtocol:null!==(i=null==p?void 0:p.protocol)&&void 0!==i?i:"",selectedLocalCandidateType:null!==(o=p.candidateType)&&void 0!==o?o:"",selectedLocalCandidateAddress:"".concat(p.address,":").concat(p.port),selectedRemoteCandidateProtocol:null!==(s=h.protocol)&&void 0!==s?s:"",selectedRemoteCandidateType:null!==(a=h.candidateType)&&void 0!==a?a:"",selectedRemoteCandidateAddress:"".concat(h.address,":").concat(h.port),restartCnt:n})}}reportVideoFirstFrameDecoded(e,t,n,r){var i;const o=Array.from(hp(i=this.remoteUserMap).call(i)).find((t=>t._videoSSRC===e));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const i=this.store.keyMetrics,s=i.subscribe.find((e=>e.userId===o.uid&&"video"===e.type));eT.firstRemoteVideoDecode(this.store.sessionId,YS.FIRST_VIDEO_DECODE,qS.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:bP.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:i.requestAPEnd||0,apStart:i.requestAPStart||0,joinGwEnd:i.joinGatewayEnd||0,joinGwStart:i.joinGatewayStart||0,pcEnd:i.peerConnectionEnd||0,pcStart:i.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:r?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.connection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const o=await this.connection.getRemoteSSRC(i);return void 0!==o&&o!==n}resetConnection(e){BS.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(e)),this.state===dI.Connected?(BS.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=e===$T.datachannel?new nF({},this.store):this.isPlanB?new kU({},this.store):new BU({},this.store),this.bindConnectionEvents(this.connection)))}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===uI.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,Vw.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof BU&&("disconnected"!==this.connection.iceConnectionState&&"checking"!==this.connection.iceConnectionState&&"failed"!==this.connection.iceConnectionState||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===lI.TCP_RESTART&&e===cI.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,lI.DISCONNECTED_OR_FAILED)))}}function lF(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PChannel.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function uF(e){let t=bF();return function(e,t){let n=e.appId;void 0!==n&&(LF(t,10),OF(t,n));let r=e.cid;void 0!==r&&(LF(t,16),LF(t,r));let i=e.cname;void 0!==i&&(LF(t,26),OF(t,i));let o=e.deviceId;void 0!==o&&(LF(t,34),OF(t,o));let s=e.elapse;void 0!==s&&(LF(t,40),PF(t,s));let a=e.fileSize;void 0!==a&&(LF(t,48),PF(t,EF(a)));let c=e.height;void 0!==c&&(LF(t,56),PF(t,EF(c)));let l=e.jpg;void 0!==l&&(LF(t,66),LF(t,l.length),function(e,t){let n=NF(e,t.length);e.bytes.set(t,n)}(t,l));let u=e.networkType;void 0!==u&&(LF(t,72),PF(t,EF(u)));let d=e.osType;void 0!==d&&(LF(t,80),PF(t,EF(d)));let p=e.requestId;void 0!==p&&(LF(t,90),OF(t,p));let h=e.sdkVersion;void 0!==h&&(LF(t,98),OF(t,h));let f=e.sequence;void 0!==f&&(LF(t,104),PF(t,EF(f)));let m=e.sid;void 0!==m&&(LF(t,114),OF(t,m));let g=e.timestamp;void 0!==g&&(LF(t,120),PF(t,g));let v=e.uid;void 0!==v&&(LF(t,128),LF(t,v));let y=e.vid;void 0!==y&&(LF(t,136),LF(t,y));let E=e.width;void 0!==E&&(LF(t,144),PF(t,EF(E)));let _=e.service;void 0!==_&&(LF(t,152),LF(t,_));let b=e.callbackData;void 0!==b&&(LF(t,162),OF(t,b));let S=e.jpgEncryption;void 0!==S&&(LF(t,168),LF(t,S));let T=e.requestType;void 0!==T&&(LF(t,176),LF(t,T));let I=e.scorePorn;void 0!==I&&(LF(t,185),kF(t,I));let N=e.scoreSexy;void 0!==N&&(LF(t,193),kF(t,N));let w=e.scoreNeutral;void 0!==w&&(LF(t,201),kF(t,w));let C=e.scene;void 0!==C&&(LF(t,208),LF(t,C));let O=e.ossFilePrefix;void 0!==O&&(LF(t,218),OF(t,O));let A=e.serviceVendor;if(void 0!==A)for(let R of A){LF(t,226);let e=bF();hF(R,e),LF(t,e.limit),AF(t,e),SF(e)}}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function dF(e){return function(e){let t={};e:for(;!IF(e);){let n=xF(e);switch(n>>>3){case 0:break e;case 1:t.code=xF(e);break;case 2:t.msg=CF(e,xF(e));break;case 3:{let n=fF(e);t.data=pF(e),e.limit=n;break}default:mF(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function pF(e){let t={};e:for(;!IF(e);){let n=xF(e);switch(n>>>3){case 0:break e;case 1:t.requestId=CF(e,xF(e));break;case 2:t.requestType=xF(e)>>>0;break;case 3:t.scorePorn=DF(e);break;case 4:t.scoreSexy=DF(e);break;case 5:t.scoreNeutral=DF(e);break;case 6:t.requestScene=xF(e)>>>0;break;case 7:t.scene=xF(e)>>>0;break;default:mF(e,7&n)}}return t}function hF(e,t){let n=e.service;void 0!==n&&(LF(t,8),LF(t,n));let r=e.vendor;void 0!==r&&(LF(t,16),LF(t,r));let i=e.token;void 0!==i&&(LF(t,26),OF(t,i));let o=e.callbackUrl;void 0!==o&&(LF(t,34),OF(t,o))}function fF(e){let t=xF(e),n=e.limit;return e.limit=e.offset+t,n}function mF(e,t){switch(t){case 0:for(;128&RF(e););break;case 2:TF(e,xF(e));break;case 5:TF(e,4);break;case 1:TF(e,8);break;default:throw new Error("Unimplemented type: "+t)}}MT([lF,DT("design:type",Function),DT("design:paramtypes",[Object,Boolean]),DT("design:returntype",cy)],cF.prototype,"startP2PConnection",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[Object,Object,Array,Object,String,String]),DT("design:returntype",cy)],cF.prototype,"connect",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",void 0)],cF.prototype,"updateRemoteRTPCapabilities",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[Object,Object,Array,Object,String,String]),DT("design:returntype",cy)],cF.prototype,"preConnect",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],cF.prototype,"publishDataChannel",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],cF.prototype,"unpublish",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],cF.prototype,"unpublishDataChannel",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",cy)],cF.prototype,"unpublishLowStream",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[oU,Array]),DT("design:returntype",cy)],cF.prototype,"subscribeDataChannel",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[oU,String,Number,Number,Array]),DT("design:returntype",cy)],cF.prototype,"subscribe",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],cF.prototype,"massSubscribe",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[oU,String,Boolean]),DT("design:returntype",cy)],cF.prototype,"unsubscribe",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[oU,Array]),DT("design:returntype",cy)],cF.prototype,"unsubscribeDataChannel",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],cF.prototype,"massUnsubscribe",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[oU,String]),DT("design:returntype",cy)],cF.prototype,"muteRemote",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[oU,String]),DT("design:returntype",cy)],cF.prototype,"unmuteRemote",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[oU,String]),DT("design:returntype",cy)],cF.prototype,"hasRemoteMediaWithLock",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",cy)],cF.prototype,"disconnectForReconnect",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],cF.prototype,"updateBitrateLimit",null),MT([lF,DT("design:type",Function),DT("design:paramtypes",[oU,String,Number]),DT("design:returntype",cy)],cF.prototype,"remoteMediaSsrcChanged",null);let gF=new Float32Array(1);new Uint8Array(gF.buffer);let vF=new Float64Array(1),yF=new Uint8Array(vF.buffer);function EF(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let _F=[];function bF(){const e=_F.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function SF(e){_F.push(e)}function TF(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function IF(e){return e.offset>=e.limit}function NF(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let t=new Uint8Array(2*o);t.set(n),e.bytes=t}return e.offset=o,o>i&&(e.limit=o),r}function wF(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function CF(e,t){let n=wF(e,t),r=String.fromCharCode,i=e.bytes,o="\ufffd",s="";for(let a=0;a<t;a++){let e,c,l,u,d=i[a+n];0==(128&d)?s+=r(d):192==(224&d)?a+1>=t?s+=o:(e=i[a+n+1],128!=(192&e)?s+=o:(u=(31&d)<<6|63&e,u<128?s+=o:(s+=r(u),a++))):224==(240&d)?a+2>=t?s+=o:(e=i[a+n+1],c=i[a+n+2],32896!=(49344&(e|c<<8))?s+=o:(u=(15&d)<<12|(63&e)<<6|63&c,u<2048||u>=55296&&u<=57343?s+=o:(s+=r(u),a+=2))):240==(248&d)?a+3>=t?s+=o:(e=i[a+n+1],c=i[a+n+2],l=i[a+n+3],8421504!=(12632256&(e|c<<8|l<<16))?s+=o:(u=(7&d)<<18|(63&e)<<12|(63&c)<<6|63&l,u<65536||u>1114111?s+=o:(u-=65536,s+=r(55296+(u>>10),56320+(1023&u)),a+=3))):s+=o}return s}function OF(e,t){let n=t.length,r=0;for(let s=0;s<n;s++){let e=t.charCodeAt(s);e>=55296&&e<=56319&&s+1<n&&(e=(e<<10)+t.charCodeAt(++s)-56613888),r+=e<128?1:e<2048?2:e<65536?3:4}LF(e,r);let i=NF(e,r),o=e.bytes;for(let s=0;s<n;s++){let e=t.charCodeAt(s);e>=55296&&e<=56319&&s+1<n&&(e=(e<<10)+t.charCodeAt(++s)-56613888),e<128?o[i++]=e:(e<2048?o[i++]=e>>6&31|192:(e<65536?o[i++]=e>>12&15|224:(o[i++]=e>>18&7|240,o[i++]=e>>12&63|128),o[i++]=e>>6&63|128),o[i++]=63&e|128)}}function AF(e,t){let n=NF(e,t.limit),r=e.bytes,i=t.bytes;for(let o=0,s=t.limit;o<s;o++)r[o+n]=i[o]}function RF(e){return e.bytes[wF(e,1)]}function MF(e,t){let n=NF(e,1);e.bytes[n]=t}function DF(e){let t=wF(e,8),n=e.bytes;return yF[0]=n[t++],yF[1]=n[t++],yF[2]=n[t++],yF[3]=n[t++],yF[4]=n[t++],yF[5]=n[t++],yF[6]=n[t++],yF[7]=n[t++],vF[0]}function kF(e,t){let n=NF(e,8),r=e.bytes;vF[0]=t,r[n++]=yF[0],r[n++]=yF[1],r[n++]=yF[2],r[n++]=yF[3],r[n++]=yF[4],r[n++]=yF[5],r[n++]=yF[6],r[n++]=yF[7]}function xF(e){let t,n=0,r=0;do{t=RF(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function LF(e,t){for(t>>>=0;t>=128;)MF(e,127&t|128),t>>>=7;MF(e,t)}function PF(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,s=NF(e,o),a=e.bytes;switch(o){case 10:a[s+9]=i>>>7&1;case 9:a[s+8]=9!==o?128|i:127&i;case 8:a[s+7]=8!==o?r>>>21|128:r>>>21&127;case 7:a[s+6]=7!==o?r>>>14|128:r>>>14&127;case 6:a[s+5]=6!==o?r>>>7|128:r>>>7&127;case 5:a[s+4]=5!==o?128|r:127&r;case 4:a[s+3]=4!==o?n>>>21|128:n>>>21&127;case 3:a[s+2]=3!==o?n>>>14|128:n>>>14&127;case 2:a[s+1]=2!==o?n>>>7|128:n>>>7&127;case 1:a[s]=1!==o?128|n:127&n}}function jF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const UF=new Map([["moderation",1],["supervise",2]]);class FF extends lE{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(gI.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=zE(t=e.map((e=>UF.get(e)||0))).call(t,((e,t)=>e+t)),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this.qualityRatio}),6e4))}constructor(e){super(),op(this,"name","AgoraRTCVideoContentInspect"),op(this,"_connectionState",fI.CONNECTING),op(this,"_innerConnectionState",void 0),op(this,"sequence",0),op(this,"inspectStartTime",void 0),op(this,"workerManagerConnection",void 0),op(this,"workerConnection",void 0),op(this,"workerMessageLengthLimit",void 0),op(this,"inspectIntervalMinimum",void 0),op(this,"qualityRatio",void 0),op(this,"_connectInfo",void 0),op(this,"_cancelTokenSource",oS.CancelToken.source()),op(this,"_retryConfig",void 0),op(this,"wmSequence",0),op(this,"inspectInterval",void 0),op(this,"inspectTimer",null),op(this,"ossFilePrefix",void 0),op(this,"extraInfo",void 0),op(this,"_inspectType",void 0),op(this,"_inspectMode",void 0),op(this,"_quality",1),op(this,"qualityTimer",null),op(this,"_inspectId",void 0),op(this,"_needWorkUrlOnly",!1),op(this,"inspectImage",(()=>{if(this.connectionState!==fI.CONNECTED)throw new kT(Gy.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval((()=>{this.connectionState===fI.CONNECTED?this.requestToInspectImage():BS.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)}),this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()})),this._inspectId=r_(5,"inspect-"),this.workerMessageLengthLimit=bS("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=bS("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=bS("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new KI("worker-manager-"+this._inspectId,m_),this.on(gI.STATE_CHANGE,((e,t)=>{this._innerConnectionState=e,BS.debug("[".concat(this._inspectId,"] Inspect operation :").concat(mI[e]," ").concat(t||""))})),this.handleWorkerManagerEvents(),this.workerConnection=new KI("worker-"+this._inspectId,m_),this.handleWorkerEvents()}async init(e,t){this.emit(gI.STATE_CHANGE,mI.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new cy(((r,i)=>{this.on(gI.CONNECTION_STATE_CHANGE,((e,t)=>{t===fI.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorkerManager(e)})).catch((e=>{i(e)}))}))}async requestAP(e,t,n){const r=bS("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),i=await function(e,t,n,r){let{appId:i,areaCode:o,cname:s,sid:a,token:c,uid:l}=t;cw++;const u="image_moderation_api",d={service_name:u,json_body:JSON.stringify({appId:i,areaCode:o,cname:s,command:"allocateEdge",requestId:cw,seq:cw,sid:a,token:c,ts:Date.now(),uid:l+""})};let p,h,f=e[0];return v_((async()=>{p=Date.now();const e=await zN(f,{data:d,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(h=Date.now()-p,0!==e.code){const t=new kT(Gy.UNEXPECTED_RESPONSE,"image inspect ap error, code"+e.code,{retry:!0,responseTime:h});throw BS.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new kT(Gy.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:h});throw BS.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new kT(Gy.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:t.code,responseTime:h});throw BS.error(e.toString()),e}const r=bS("VIDEO_INSPECT_WORKER_MANAGER_HOST"),i=bS("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(i||n)})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,responseTime:h}}),((t,n)=>(eT.apworkerEvent(a,{success:!0,sc:200,serviceName:u,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:h,serverIp:e[n%e.length]}),!1)),((t,n)=>(eT.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:u,responseTime:h,serverIp:e[n%e.length]}),!!(t.code!==Gy.OPERATION_ABORTED&&t.code!==Gy.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(f=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(gI.STATE_CHANGE,mI.AP_CONNECTED);const{addressList:o}=i;return this.wmSequence++,o}async connectWorkerManager(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._needWorkUrlOnly=t,this.emit(gI.STATE_CHANGE,mI.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(_T.CONNECTED,(async()=>{this.emit(gI.STATE_CHANGE,mI.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.20.2",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(_T.CLOSED,(()=>{this._innerConnectionState<mI.GET_WORKER_MANAGER_RESPONSE&&BS.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))})),this.workerManagerConnection.on(_T.FAILED,(()=>{this._innerConnectionState<mI.GET_WORKER_MANAGER_RESPONSE&&BS.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))})),this.workerManagerConnection.on(_T.RECONNECTING,(()=>{this._innerConnectionState<mI.GET_WORKER_MANAGER_RESPONSE&&BS.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))})),this.workerManagerConnection.on(_T.ON_MESSAGE,(async e=>{this.emit(gI.STATE_CHANGE,mI.GET_WORKER_MANAGER_RESPONSE);const t=this.workerManagerConnection.url;this.workerManagerConnection.close();const n=JSON.parse(e.data);if(200!==n.code)throw BS.error("[".concat(this._inspectId,"] Unexpected code ").concat(n.code," from worker manager")),new kT(Gy.UNEXPECTED_RESPONSE,"response code of worker is unexpected",n);if(!(n.serverResponse&&n.serverResponse.portWss&&t))throw BS.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(n))),new kT(Gy.UNEXPECTED_RESPONSE,"response content of worker is unexpected",n);{const e=bS("VIDEO_INSPECT_WORKER_PORT")||n.serverResponse.portWss,r=t.replace(/:\d+\/?$/,":".concat(e));this.emit(gI.STATE_CHANGE,mI.CONNECT_WORKER,r),this._needWorkUrlOnly?this.emit(gI.REQUEST_NEW_WORKER_URL,r):await this.connectWorker(r)}})),this.workerManagerConnection.on(_T.WILL_RECONNECT,((e,t,n)=>{n(e)})),this.workerManagerConnection.on(_T.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}handleWorkerEvents(){this.workerConnection.on(_T.CONNECTED,(async()=>{this.emit(gI.STATE_CHANGE,mI.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=fI.CONNECTED})),this.workerConnection.on(_T.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const n=dF(new Uint8Array(e.data));if(bS("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&BS.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(n)),200===n.code){if(Array.isArray(this.inspectType)&&1===this.inspectType.length&&"supervise"===this.inspectType[0])return void this.emit(gI.INSPECT_RESULT,void 0,void 0);if(n.data&&n.data.scorePorn&&n.data.scoreSexy&&n.data.scoreNeutral){var t;const e={porn:n.data.scorePorn,sexy:n.data.scoreSexy,neutral:n.data.scoreNeutral},r=zE(t=Object.keys(e)).call(t,((t,n)=>e[t]>e[n]?t:n),"porn"),i=Object.keys(e).find((e=>e===r));this.emit(gI.INSPECT_RESULT,i)}else this.emit(gI.INSPECT_RESULT,void 0,new kT(Gy.UNEXPECTED_RESPONSE,n.code+"","There is an unexpected data on message"))}else this.emit(gI.INSPECT_RESULT,void 0,new kT(Gy.UNEXPECTED_RESPONSE,n.code+"",n.msg))}else BS.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(gI.INSPECT_RESULT,void 0,new kT(Gy.UNEXPECTED_RESPONSE,"invalid worker message type"))})),this.workerConnection.on(_T.CLOSED,(()=>{this.connectionState=fI.CLOSED})),this.workerConnection.on(_T.FAILED,(()=>{this.connectionState=fI.CLOSED})),this.workerConnection.on(_T.RECONNECTING,(()=>{this.connectionState=this.connectionState===fI.CONNECTED?fI.RECONNECTING:fI.CONNECTING})),this.workerConnection.on(_T.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this.workerConnection.on(_T.REQUEST_NEW_URLS,((e,t)=>{this.workerManagerConnection.close(),this.once(gI.REQUEST_NEW_WORKER_URL,(t=>{e([t])})),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then((e=>{this.connectWorkerManager(e,!0)})).catch((e=>{t(e)}))}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){this.sequence++;const e=wE(this,gI.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(gI.INSPECT_RESULT,void 0,new kT(Gy.INVALID_OPERATION,"Only the track being played can be inspected"));const n=await this.generateRequestData(e,t);this.workerConnection.sendMessage(n,!0,!0)}else this.emit(gI.INSPECT_RESULT,void 0,new kT(Gy.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a}=t;const c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),u=await yO(l,n,r),d=this.sequence+"-"+i+"-"+a+"-"+c+"-"+r_(12,""),p={appId:n,cid:i,cname:r,deviceId:"",elapse:FF.intToLong(Number(c-this.inspectStartTime)),fileSize:u.byteLength,jpgEncryption:2,height:l.height,width:l.width,jpg:u,networkType:6,osType:7,requestId:d,sdkVersion:"4.20.2",sequence:this.sequence,sid:s,timestamp:FF.intToLong(c),uid:a,vid:o,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};void 0===this.extraInfo&&delete p.callbackData,void 0===this.ossFilePrefix&&delete p.ossFilePrefix;const h=uF(p);if(h.byteLength<this.workerMessageLengthLimit){if(bS("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jF(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},p);delete e.jpg,BS.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(e))}return h}{const t=this.quality*this.qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=oS.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=fI.CLOSED,this.emit(gI.STATE_CHANGE,mI.CLOSED)}}function zF(e){let t=function(){const e=GF.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(e,t){let n=e.appId;void 0!==n&&(tz(t,10),XF(t,n));let r=e.cid;void 0!==r&&(tz(t,16),tz(t,r));let i=e.cname;void 0!==i&&(tz(t,26),XF(t,i));let o=e.deviceId;void 0!==o&&(tz(t,34),XF(t,o));let s=e.elapse;void 0!==s&&(tz(t,40),rz(t,s));let a=e.fileSize;void 0!==a&&(tz(t,48),rz(t,HF(a)));let c=e.height;void 0!==c&&(tz(t,56),rz(t,HF(c)));let l=e.jpg;void 0!==l&&(tz(t,66),tz(t,l.length),QF(t,l));let u=e.networkType;void 0!==u&&(tz(t,72),rz(t,HF(u)));let d=e.osType;void 0!==d&&(tz(t,80),rz(t,HF(d)));let p=e.requestId;void 0!==p&&(tz(t,90),XF(t,p));let h=e.sdkVersion;void 0!==h&&(tz(t,98),XF(t,h));let f=e.sequence;void 0!==f&&(tz(t,104),rz(t,HF(f)));let m=e.sid;void 0!==m&&(tz(t,114),XF(t,m));let g=e.timestamp;void 0!==g&&(tz(t,120),rz(t,g));let v=e.uid;void 0!==v&&(tz(t,128),tz(t,v));let y=e.vid;void 0!==y&&(tz(t,136),tz(t,y));let E=e.width;void 0!==E&&(tz(t,144),rz(t,HF(E)));let _=e.service;void 0!==_&&(tz(t,152),tz(t,_));let b=e.callbackData;void 0!==b&&(tz(t,162),tz(t,b.length),QF(t,b));let S=e.ticket;void 0!==S&&(tz(t,170),XF(t,S));let T=e.vendorConfigs;void 0!==T&&(tz(t,178),XF(t,T))}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function BF(e){return function(e){let t={};e:for(;!YF(e);){let n=ez(e);switch(n>>>3){case 0:break e;case 1:t.code=ez(e);break;case 2:t.msg=JF(e,ez(e));break;case 3:t.requestId=JF(e,ez(e));break;case 4:t.timestamp=nz(e,!1);break;default:VF(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function VF(e,t){switch(t){case 0:for(;128&ZF(e););break;case 2:WF(e,ez(e));break;case 5:WF(e,4);break;case 1:WF(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function HF(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let GF=[];function WF(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function YF(e){return e.offset>=e.limit}function qF(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let t=new Uint8Array(2*o);t.set(n),e.bytes=t}return e.offset=o,o>i&&(e.limit=o),r}function KF(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function QF(e,t){let n=qF(e,t.length);e.bytes.set(t,n)}function JF(e,t){let n=KF(e,t),r=String.fromCharCode,i=e.bytes,o="\ufffd",s="";for(let a=0;a<t;a++){let e,c,l,u,d=i[a+n];0==(128&d)?s+=r(d):192==(224&d)?a+1>=t?s+=o:(e=i[a+n+1],128!=(192&e)?s+=o:(u=(31&d)<<6|63&e,u<128?s+=o:(s+=r(u),a++))):224==(240&d)?a+2>=t?s+=o:(e=i[a+n+1],c=i[a+n+2],32896!=(49344&(e|c<<8))?s+=o:(u=(15&d)<<12|(63&e)<<6|63&c,u<2048||u>=55296&&u<=57343?s+=o:(s+=r(u),a+=2))):240==(248&d)?a+3>=t?s+=o:(e=i[a+n+1],c=i[a+n+2],l=i[a+n+3],8421504!=(12632256&(e|c<<8|l<<16))?s+=o:(u=(7&d)<<18|(63&e)<<12|(63&c)<<6|63&l,u<65536||u>1114111?s+=o:(u-=65536,s+=r(55296+(u>>10),56320+(1023&u)),a+=3))):s+=o}return s}function XF(e,t){let n=t.length,r=0;for(let s=0;s<n;s++){let e=t.charCodeAt(s);e>=55296&&e<=56319&&s+1<n&&(e=(e<<10)+t.charCodeAt(++s)-56613888),r+=e<128?1:e<2048?2:e<65536?3:4}tz(e,r);let i=qF(e,r),o=e.bytes;for(let s=0;s<n;s++){let e=t.charCodeAt(s);e>=55296&&e<=56319&&s+1<n&&(e=(e<<10)+t.charCodeAt(++s)-56613888),e<128?o[i++]=e:(e<2048?o[i++]=e>>6&31|192:(e<65536?o[i++]=e>>12&15|224:(o[i++]=e>>18&7|240,o[i++]=e>>12&63|128),o[i++]=e>>6&63|128),o[i++]=63&e|128)}}function ZF(e){return e.bytes[KF(e,1)]}function $F(e,t){let n=qF(e,1);e.bytes[n]=t}function ez(e){let t,n=0,r=0;do{t=ZF(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function tz(e,t){for(t>>>=0;t>=128;)$F(e,127&t|128),t>>>=7;$F(e,t)}function nz(e,t){let n,r=0,i=0,o=0;return n=ZF(e),r=127&n,128&n&&(n=ZF(e),r|=(127&n)<<7,128&n&&(n=ZF(e),r|=(127&n)<<14,128&n&&(n=ZF(e),r|=(127&n)<<21,128&n&&(n=ZF(e),i=127&n,128&n&&(n=ZF(e),i|=(127&n)<<7,128&n&&(n=ZF(e),i|=(127&n)<<14,128&n&&(n=ZF(e),i|=(127&n)<<21,128&n&&(n=ZF(e),o=127&n,128&n&&(n=ZF(e),o|=(127&n)<<7))))))))),{low:r|i<<28,high:i>>>4|o<<24,unsigned:t}}function rz(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,s=qF(e,o),a=e.bytes;switch(o){case 10:a[s+9]=i>>>7&1;case 9:a[s+8]=9!==o?128|i:127&i;case 8:a[s+7]=8!==o?r>>>21|128:r>>>21&127;case 7:a[s+6]=7!==o?r>>>14|128:r>>>14&127;case 6:a[s+5]=6!==o?r>>>7|128:r>>>7&127;case 5:a[s+4]=5!==o?128|r:127&r;case 4:a[s+3]=4!==o?n>>>21|128:n>>>21&127;case 3:a[s+2]=3!==o?n>>>14|128:n>>>14&127;case 2:a[s+1]=2!==o?n>>>7|128:n>>>7&127;case 1:a[s]=1!==o?128|n:127&n}}const iz={},oz={},sz=4294967296,az=sz*sz,cz=az/2,lz=fz(0,!0),uz=fz(0),dz=mz(0,-2147483648,!1),pz=mz(-1,2147483647,!1),hz=mz(-1,-1,!0);function fz(e,t){let n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=oz[e],r)?r:(n=mz(e,0,!0),i&&(oz[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=iz[e],r)?r:(n=mz(e,e<0?-1:0,!1),i&&(iz[e]=n),n)}function mz(e,t,n){return{low:0|e,high:0|t,unsigned:!!n}}function gz(e,t){if(isNaN(e))return t?lz:uz;if(t){if(e<0)return lz;if(e>=az)return hz}else{if(e<=-cz)return dz;if(e+1>=cz)return pz}return e<0?t?lz:uz:mz(e%sz|0,e/sz|0,t)}function vz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class yz extends lE{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(SI.CONNECTION_STATE_CHANGE,e,t)}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this._qualityRatio}),6e4))}constructor(e){var t;super(),op(this,"name","AgoraRTCImageModeration"),op(this,"_connectionState",bI.CONNECTING),op(this,"_sequence",0),op(this,"_moderationStartTime",void 0),op(this,"_workerConnection",void 0),op(this,"_workerMessageLengthLimit",void 0),op(this,"_qualityRatio",void 0),op(this,"_connectInfo",void 0),op(this,"_cancelTokenSource",oS.CancelToken.source()),op(this,"_retryConfig",void 0),op(this,"_moderationInterval",void 0),op(this,"_moderationTimer",null),op(this,"_moderationMode",1),op(this,"_quality",1),op(this,"_qualityTimer",null),op(this,"_ticket",void 0),op(this,"_moderationIntervalMinimum",void 0),op(this,"_uploadFailedNum",0),op(this,"_uploadNum",0),op(this,"_uploadTimer",null),op(this,"_extraInfo",void 0),op(this,"_vendor",""),op(this,"_encoder",new TextEncoder),op(this,"_moderationId",void 0),op(this,"inspectImage",(()=>{if(this.connectionState!==bI.CONNECTED)throw new kT(Gy.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval((()=>{this.connectionState===bI.CONNECTED?this.requestToInspectImage():BS.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)}),this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()})),this._moderationId=r_(5,"image-moderation-"),this._workerMessageLengthLimit=bS("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=bS("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),this._qualityRatio=bS("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new KI("worker-"+this._moderationId,m_),this.on(SI.STATE_CHANGE,((e,t)=>{BS.debug("[".concat(this._moderationId,"] Moderation operation :").concat(TI[e]," ").concat(t||""))})),this.handleWorkerEvents()}async init(e,t){this.emit(SI.STATE_CHANGE,TI.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new cy(((r,i)=>{this.on(SI.CONNECTION_STATE_CHANGE,((e,t)=>{e===bI.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorker(e)})).catch((e=>{i(e)}))}))}updateConfig(e){var t;this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),BS.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(e))),this.connectionState===bI.CONNECTED&&this.inspectImage()}async requestAP(e,t,n){const r=bS("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),i=await function(e,t,n,r){let{appId:i,areaCode:o,cname:s,sid:a,token:c,uid:l}=t;cw++;const u="moderation_plugin",d={service_name:u,json_body:JSON.stringify({appId:i,areaCode:o,cname:s,command:"allocateEdge",requestId:cw,seq:cw,sid:a,appToken:c,ts:Date.now(),uid:l+""})};let p,h,f=e[0];return v_((async()=>{p=Date.now();const e=await zN(f,{data:d,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(h=Date.now()-p,0!==e.code){const t=new kT(Gy.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+e.code,{retry:!0,responseTime:h});throw BS.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new kT(Gy.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:h});throw BS.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new kT(Gy.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:t.code,responseTime:h});throw BS.error(e.toString()),e}if(!t.servers.some((e=>!!e.wss))){const e=new kT(Gy.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:t.code,responseTime:h});throw BS.error(e.toString()),e}const r=bS("IMAGE_MODERATION_WORKER_HOST");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(n,"/moderation")})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,ticket:t.appTicket,responseTime:h}}),((t,n)=>(eT.apworkerEvent(a,{success:!0,sc:200,serviceName:u,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:h,serverIp:e[n%e.length]}),!1)),((t,n)=>(eT.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:u,responseTime:h,serverIp:e[n%e.length]}),!!(t.code!==Gy.OPERATION_ABORTED&&t.code!==Gy.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(f=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(SI.STATE_CHANGE,TI.AP_CONNECTED);const{addressList:o,ticket:s}=i;return this._ticket=s,o}async connectWorker(e){this.emit(SI.STATE_CHANGE,TI.CONNECT_WORKER),await this._workerConnection.init(e,1e4)}handleWorkerEvents(){this._workerConnection.on(_T.CONNECTED,(async()=>{this.emit(SI.STATE_CHANGE,TI.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=bI.CONNECTED})),this._workerConnection.on(_T.CLOSED,(()=>{this.connectionState=bI.CLOSED})),this._workerConnection.on(_T.FAILED,(()=>{this.connectionState=bI.CLOSED})),this._workerConnection.on(_T.RECONNECTING,(()=>{this.connectionState=this.connectionState===bI.CONNECTED?bI.RECONNECTING:bI.CONNECTING})),this._workerConnection.on(_T.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const t=BF(new Uint8Array(e.data));bS("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&BS.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(t)),this._uploadNum++,void 0===t.code||0===t.code||(this._uploadFailedNum++,BS.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(t.code,", msg is ").concat(t.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout((()=>{eT.reportApiInvoke(this._connectInfo.sid||null,{name:pE.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,t.code],tag:hE.TRACER}).onError(new kT(Gy.IMAGE_MODERATION_UPLOAD_FAILED,t.msg)),this._uploadTimer=null}),bS("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else BS.error("[".concat(this._moderationId,"] Unexpected message type from worker"))})),this._workerConnection.on(_T.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this._workerConnection.on(_T.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){const e=wE(this,SI.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void(bS("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&BS.debug("Only the track being played can be inspected"));this._sequence++;const n=await this.generateRequestData(e,t);this._workerConnection.sendMessage(n,!0,!0)}else bS("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&BS.debug("Only the track being published can be inspected")}async generateRequestData(e,t){let{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a}=t;const c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),u=await yO(l,n,r),d=this._sequence+"-"+i+"-"+a+"-"+c+"-"+r_(12,""),p={appId:n,cid:i,cname:r,deviceId:"",elapse:yz.intToLong(Number(c-this._moderationStartTime)),fileSize:l.buffer.byteLength,height:l.height,width:l.width,jpg:u,networkType:6,osType:7,requestId:d,sdkVersion:"4.20.2",sequence:this._sequence,sid:s,timestamp:gz(c),uid:a,vid:o,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};void 0===this._extraInfo&&delete p.callbackData;const h=zF(p);if(h.byteLength<this._workerMessageLengthLimit){if(bS("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vz(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},p);delete e.jpg,BS.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(e))}return h}{const t=this.quality*this._qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=oS.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=bI.CLOSED,this.emit(SI.STATE_CHANGE,TI.CLOSED)}}function Ez(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ez(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ez(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const bz=Date.now(),Sz=20,Tz=new Map,Iz=new Map;async function Nz(e){const t=Tz.get(e),n=Array.isArray(t)&&t[t.length-1],r=Iz.get(e);if(!n)return void(r.isSyncing=!1);const i={uid:n.uid,payload:n.payload};0===r.firstRecvTs&&(r.firstRecvTs=n.recvTs,r.firstSendTs=n.sendTs);const o=n.sendTs-r.firstSendTs,s=o-(Date.now()-r.firstRecvTs);s>0&&(r.firstRecvTs=Date.now()-o);let a=n.mediaDelay+s;a<=0?(t.pop(),wz(n.context,i),a=0):a=Math.min(a,Sz),setTimeout((()=>t.length&&Nz(e)),a)}function wz(e,t){e.safeEmit(gE.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function Cz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return wz(n,{uid:e.uid,payload:e.payload});const r="".concat(n.id,"-").concat(e.uid),i=Tz.get(r)||[],o=i.findIndex((t=>e.sendTs>=t.sendTs)),s=_z(_z({},e),{},{context:n,mediaDelay:t,recvTs:Date.now()});-1===o?i.push(s):i.splice(o,0,s),Tz.set(r,i);let a=!1;var c;Iz.has(r)?a=!(null===(c=Iz.get(r))||void 0===c||!c.isSyncing):Iz.set(r,{isSyncing:a,firstRecvTs:0,firstSendTs:0}),a||Nz(r)}const Oz=_y().name;function Az(){return!function(e,t,n){const r=_y();if(r.os!==fy.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}(16,0,!0)&&!function(e,t,n){const r=_y();if(r.name!==my.SAFARI||!r.osVersion)return!1;const i=r.version.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}(16,0,!0)}function Rz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rz(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}h_.setLogger(BS);class Dz extends lE{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return(null===(e=this._config)||void 0===e?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e){let t;if(super(),op(this,"store",void 0),op(this,"_uid",void 0),op(this,"_channelName",void 0),op(this,"_uintUid",void 0),op(this,"_users",[]),op(this,"_config",void 0),op(this,"_clientId",void 0),op(this,"_appId",void 0),op(this,"_sessionId",null),op(this,"_key",void 0),op(this,"_rtmConfig",{}),op(this,"_joinInfo",void 0),op(this,"_gateway",void 0),op(this,"_statsCollector",void 0),op(this,"_configDistribute",void 0),op(this,"_leaveMutex",new h_("client-leave")),op(this,"_publishMutex",new h_("client-publish")),op(this,"_renewTokenMutex",new h_("client-renewtoken")),op(this,"_subscribeMutex",new h_("client-subscribe")),op(this,"_encryptionMode","none"),op(this,"_encryptionSecret",null),op(this,"_encryptionSalt",null),op(this,"_encryptDataStream",!1),op(this,"_encryptDataStreamKey",null),op(this,"_encryptDataStreamIv",null),op(this,"_proxyServer",void 0),op(this,"_turnServer",{servers:[],mode:"auto"}),op(this,"_cloudProxyServerMode","disabled"),op(this,"_isDualStreamEnabled",!1),op(this,"_defaultStreamFallbackType",void 0),op(this,"_lowStreamParameter",void 0),op(this,"_streamFallbackTypeCacheMap",new Map),op(this,"_remoteStreamTypeCacheMap",new Map),op(this,"_axiosCancelSource",oS.CancelToken.source()),op(this,"_audioVolumeIndicationInterval",void 0),op(this,"_networkQualityInterval",void 0),op(this,"_userOfflineTimeout",void 0),op(this,"_streamRemovedTimeout",void 0),op(this,"_injectStreamingClient",void 0),op(this,"_liveTranscodeStreamingClient",void 0),op(this,"_liveRawStreamingClient",void 0),op(this,"_channelMediaRelayClient",void 0),op(this,"_networkQualitySensitivity","normal"),op(this,"_p2pChannel",void 0),op(this,"_useLocalAccessPoint",!1),op(this,"_setLocalAPVersion",void 0),op(this,"_joinAndNotLeaveYet",!1),op(this,"_numberOfJoinCount",0),op(this,"_remoteDefaultVideoStreamType",void 0),op(this,"_inspect",void 0),op(this,"_moderation",void 0),op(this,"_license",void 0),op(this,"_pendingPublishedUsers",[]),op(this,"ntpAlignErrorCount",0),op(this,"remoteInboundOffset",0),op(this,"_handleLocalTrackEnable",((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),op(this,"_handleLocalTrackDisable",((e,t,n)=>{this.unpublish(e).then(t).catch(n)})),op(this,"_handleUserOnline",(e=>{if(bS("BLOCK_LOCAL_CLIENT")&&oT(e.uid,this.channelName))return void BS.debug("[".concat(e.uid,"] will be ignored in local"));this.isStringUID&&"string"!=typeof e.uid&&BS.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const t=this._users.find((t=>t.uid===e.uid));if(t)t._trust_in_room_=!0,t._is_pre_created&&(t._is_pre_created=!1,this.safeEmit(gE.USER_JOINED,t));else{const t=new oU(e.uid,e.uint_id||e.uid);this._users.push(t),BS.debug("[".concat(this._clientId,"] user online"),e.uid),this.safeEmit(gE.USER_JOINED,t)}})),op(this,"_handleUserOffline",(e=>{if(bS("BLOCK_LOCAL_CLIENT")&&oT(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));t&&(this._handleRemoveStream(e),this._handleRemoveDataChannels(e),t._audio_pre_subscribed||t._video_pre_subscribed?t._is_pre_created=!0:HE(this._users,t),this._remoteStreamTypeCacheMap.delete(t.uid),this._streamFallbackTypeCacheMap.delete(t.uid),BS.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.safeEmit(gE.USER_LEAVED,t,e.reason))})),op(this,"_handleAddAudioOrVideoStream",((e,t,n,r,i,o,s)=>{if(bS("BLOCK_LOCAL_CLIENT")&&oT(t,this.channelName))return;const a=this._users.find((e=>e.uid===t));if(!a)return void BS.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));BS.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(a.uid,e,void 0,void 0,void 0,Date.now());const c="audio"===e?a.hasAudio:a.hasVideo;a._uintid||(a._uintid=i||t),"audio"===e?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,"audio"===e?(a._audio_added_=!0,void 0!==n&&(a._audioSSRC=n),void 0!==r&&(a._cname=r),o&&(a._audioOrtc=o)):(a._video_added_=!0,void 0!==n&&(a._videoSSRC=n),void 0!==r&&(a._cname=r),void 0!==s&&(a._rtxSsrcId=s),o&&(a._videoOrtc=o)),("audio"===e?a.hasAudio:a.hasVideo)&&!c&&(BS.info("[".concat(this._clientId,"] remote user ").concat(a.uid," published ").concat(e)),this.safeEmit(gE.USER_PUBLISHED,a,e)),"video"===e?eT.onGatewayStream(this._sessionId,YS.ON_ADD_VIDEO_STREAM,qS.ON_ADD_VIDEO_STREAM,{peer:i||t,ssrc:a._videoSSRC}):eT.onGatewayStream(this._sessionId,YS.ON_ADD_AUDIO_STREAM,qS.ON_ADD_AUDIO_STREAM,{peer:i||t,ssrc:a._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(a,e,n).then((t=>{if(t&&(BS.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof cF))return this._p2pChannel.unsubscribe(a,e,!0).then((()=>this._subscribe(a,e,!0).catch((e=>{BS.error("[".concat(this._clientId,"] resubscribe error"),e.toString())}))))})),this._p2pChannel.hasPendingRemoteMedia(a,e)&&(BS.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after reconnect.")),this._subscribe(a,e,!0).catch((e=>{BS.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),op(this,"_handleRemoveStream",(e=>{if(bS("BLOCK_LOCAL_CLIENT")&&oT(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));if(!t)return void BS.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));BS.debug("[".concat(this._clientId,"] stream removed with uid ").concat(e.uid));let n=()=>{};t.hasAudio&&t.hasVideo?n=()=>{BS.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(gE.USER_UNPUBLISHED,t,"audio"),BS.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(gE.USER_UNPUBLISHED,t,"video")}:t.hasVideo?n=()=>{BS.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(gE.USER_UNPUBLISHED,t,"video")}:t.hasAudio&&(n=()=>{BS.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(gE.USER_UNPUBLISHED,t,"audio")}),t._video_pre_subscribed||t._audio_pre_subscribed||(t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,this._p2pChannel instanceof cF&&this._p2pChannel.unsubscribe(t).then((e=>{if(e)return this._gateway.unsubscribe(e,t.uid)})),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0),eT.onGatewayStream(this._sessionId,YS.ON_REMOVE_STREAM,qS.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),n()})),op(this,"_handleSetStreamLocalEnable",((e,t,n)=>{if(bS("BLOCK_LOCAL_CLIENT")&&oT(t,this.channelName))return;const r=this._users.find((e=>e.uid===t));if(!r)return void BS.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));BS.debug("[".concat(this._clientId,"] local ").concat(e," ").concat(n?"enabled":"disabled"," with uid ").concat(t));const i="audio"===e?r.hasAudio:r.hasVideo;if("audio"===e){r._trust_audio_enabled_state_=!0;const e=r._audio_enabled_;if(r._audio_enabled_=n,r._audio_enabled_===e)return;{const e=r._audio_enabled_?"enable-local-audio":"disable-local-audio";BS.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(gE.USER_INFO_UPDATED,t,e)}}else{r._trust_video_enabled_state_=!0;const e=r._video_enabled_;if(r._video_enabled_=n,r._video_enabled_===e)return;{const e=r._video_enabled_?"enable-local-video":"disable-local-video";BS.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(gE.USER_INFO_UPDATED,t,e)}}const o="audio"===e?r.hasAudio:r.hasVideo;return i!==o?!i&&o?(BS.info("[".concat(this._clientId,"] remote user ").concat(t," published ").concat(e)),void this.safeEmit(gE.USER_PUBLISHED,r,e)):("video"===e&&r._videoTrack&&r._videoTrack._destroy(),"audio"===e&&r._audioTrack,this._p2pChannel.muteRemote(r,e),BS.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished ").concat(e)),void this.safeEmit(gE.USER_UNPUBLISHED,r,e)):void 0})),op(this,"_handleMuteStream",((e,t,n)=>{if(bS("BLOCK_LOCAL_CLIENT")&&oT(e,this.channelName))return;BS.debug("[".concat(this._clientId,"] receive mute message"),e,t,n);const r=this._users.find((t=>t.uid===e));if(!r)return void BS.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(e));const i="audio"===t?r.hasAudio:r.hasVideo;if("audio"===t){r._trust_audio_mute_state_=!0;const t=r._audio_muted_;if(r._audio_muted_=n,r._audio_muted_===t)return;{const t=r._audio_muted_?"mute-audio":"unmute-audio";BS.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(gE.USER_INFO_UPDATED,e,t)}}else{r._trust_video_mute_state_=!0;const t=r._video_muted_;if(r._video_muted_=n,r._video_muted_===t)return;{const t=r._video_muted_?"mute-video":"unmute-video";BS.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(gE.USER_INFO_UPDATED,e,t)}}const o="audio"===t?r.hasAudio:r.hasVideo;if(i!==o){if(!i&&o)return("audio"===t?r._audioSSRC:r._videoSSRC)?(BS.info("[".concat(this._clientId,"] remote user ").concat(e," published ").concat(t)),void this.safeEmit(gE.USER_PUBLISHED,r,t)):void BS.warning("[".concat(this._clientId,"] remote user ").concat(e," receive ").concat(t," unmute message  before add stream message, ").concat(t," SSRC doesn't exist yet."));"video"===t&&r._videoTrack&&!r._video_pre_subscribed&&r._videoTrack._destroy(),"audio"===t&&r._audioTrack,this._p2pChannel.muteRemote(r,t),BS.info("[".concat(this._clientId,"] remote user ").concat(e," unpublished ").concat(t)),this.safeEmit(gE.USER_UNPUBLISHED,r,t)}})),op(this,"_handleP2PLost",(async e=>{BS.debug("[".concat(this._clientId,"] receive p2p lost"),e),parseInt(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():BS.warning("[".concat(this._clientId,"] P2PLost stream not found"),e)})),op(this,"_handleTokenWillExpire",(()=>{BS.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(gE.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),op(this,"_handleBeforeUnload",(e=>{"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),BS.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))})),op(this,"_handleUpdateNetworkQuality",(()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.safeEmit(gE.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(gE.NETWORK_QUALITY,e)})),op(this,"_handleP2PAddAudioOrVideoStream",((e,t,n,r)=>{const i=this._users.find((e=>e.uid===t));if(!i)return void BS.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));BS.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(i.uid,e,void 0,void 0,void 0,Date.now());const o="audio"===e?i.hasAudio:i.hasVideo;"audio"===e?i._trust_audio_stream_added_state_=!0:i._trust_video_stream_added_state_=!0,"audio"===e?(i._audio_added_=!0,void 0!==n&&(i._audioSSRC=n),void 0!==r&&(i._audioMid=r)):(i._video_added_=!0,void 0!==n&&(i._videoSSRC=n),void 0!==r&&(i._videoMid=r)),("audio"===e?i.hasAudio:i.hasVideo)&&!o&&(BS.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published ").concat(e)),this.safeEmit(gE.USER_PUBLISHED,i,e)),this._p2pChannel.hasPendingRemoteMedia(i,e)&&(BS.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(i.uid," after reconnect.")),this._subscribe(i,e,!0).catch((e=>{BS.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),this._config=e,this._clientId=r_(5,"client-"),this.store=new OS(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),BS.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(mS," build: ").concat(yS,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{TE(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(e){BS.warning("[".concat(this._clientId,"] ").concat(e.toString()))}this._statsCollector=new gU(this.store),this._statsCollector.onStatsException=(e,t,n)=>{BS.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(e,", msg: ").concat(t,", uid: ").concat(n)),this.safeEmit(gE.EXCEPTION,{code:e,msg:t,uid:n})},this._statsCollector.onUploadPublishDuration=(e,t,n,r)=>{const i=this._users.find((t=>t.uid===e));i&&eT.peerPublishStatus(this._sessionId,{subscribeElapse:r,audioPublishDuration:t,videoPublishDuration:n,peer:i._uintid})},this.store.useDataChannel=Tw().supportDataChannel&&bS("SIGNAL_CHANNEL"),this.store.useP2P="p2p"===e.mode,this._gateway=new jN(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||m_,httpRetryConfig:e.httpRetryConfig||m_,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._configDistribute=new bw,this.store.useP2P?(this._p2pChannel=new pU(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new cF(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,n,r,i){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];_S("JOIN_GATEWAY_USE_443PORT_ONLY",o),_S("JOIN_GATEWAY_USE_DUAL_DOMAIN",s);const a=this._gateway.signal.websocket;return a instanceof qI&&(a.use443PortOnly=o,a.tryDoubleDomain=s),async function(e,t,n){dy.get(e)||dy.set(e,[]),py.get(e)||py.set(e,t),hy.get(e)||hy.set(e,0);const r=dy.get(e),i=py.get(e);if(!r||!i)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(hy.get(e)===i){const e=uy();r.push(e),await e.promise}hy.set(e,hy.get(e)+1);for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];const c=await n(...s);return hy.set(e,hy.get(e)-1),hy.get(e)===i-1&&r.length>0&&(r[0].resolve(),r.shift()),0===hy.get(e)&&(dy.set(e,[]),py.set(e,0),hy.set(e,0)),c}("client.join",bS("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,n,r,i)}async join(e,t,n,r,i){const o=++this._numberOfJoinCount;this.store.joinStart(),r&&(this.store.uid=r);const s=hS(),a=fS()?window.isSecureContext:"Browser Not Support";if(!fS()&&!s||!window.isSecureContext){const e="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";BS.warning(e)}const c=i_();"DISCONNECTED"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),BS.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const l=eT.reportApiInvoke(c,{name:pE.JOIN,options:[e,t,n,r],states:{isHttps:s,isSecureContext:a},tag:hE.TRACER});eT.setAppId(e);try{if(!n&&null!==n)throw new kT(Gy.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&Jy(n,"token",1,2047),Jy(e,"appid",1,2047),xT(t),r&&LT(r),i&&Jy(i,"optionalInfo",1,2047)}catch(e){throw l.onError(e),e}if(BS.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(o)),this._leaveMutex.isLocked&&(BS.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),BS.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,"DISCONNECTED"!==this.connectionState){const e=new kT(Gy.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw l.onError(e),e}this._sessionId||(this._sessionId=c,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const u=Mz(Mz({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof r?r:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(u.setLocalAPVersion=this._setLocalAPVersion),"string"==typeof r&&(u.stringUid=r,this._uintUid?(u.uid=this._uintUid,this._uintUid=void 0):u.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret){if(u.aesmode=this._encryptionMode,u.aespassword=await aE(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new kT(Gy.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(u.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&("aes-128-gcm2"===this._encryptionMode||"aes-256-gcm2"===this._encryptionMode))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const e=new TextEncoder,t=bS("USE_PURE_ENCRYPTION_MASTER_KEY")?e.encode(u.appId+this._encryptionSecret+this._encryptionSecret):e.encode(u.appId+u.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),i="aes-128-gcm2"===e?128:256,o=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:MS,hash:"SHA-256",salt:n},r,i+RS);return new Uint8Array(o).subarray(i/8)}(this._encryptionMode,t,JE(this._encryptionSalt)),this._encryptDataStreamKey=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),i="aes-128-gcm2"===e?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:MS,hash:"SHA-256",salt:n},r,{name:"AES-GCM",length:i},!0,["encrypt","decrypt"])}(this._encryptionMode,t,JE(this._encryptionSalt))}else a?BS.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):BS.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,BS.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:u.stringUid});const d=this._sessionId;setTimeout((()=>{"CONNECTING"===this.connectionState&&d===this._sessionId&&eT.joinChannelTimeout(this._sessionId,5)}),5e3);try{var p;let r;const i=u.cloudProxyServer;if(Or(p=["proxy3","proxy4","proxy5"]).call(p,i)){const e=bS("PROXY_SERVER_TYPE3");Array.isArray(e)?u.proxyServer=e[0]:u.proxyServer=e}if(eT.setProxyServer(u.proxyServer),BS.setProxyServer(u.proxyServer),this.store.requestAPStart(),u.stringUid&&!u.uid){let e;[e,r]=await cy.all([hw(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||m_,this.store),pw(u,this._axiosCancelSource.token,this._config.httpRetryConfig||m_,!0,this.store)]),BS.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(u.stringUid," => ").concat(e)),u.uid=e,r.gatewayInfo.uid=e,r.gatewayInfo.res.uid=e}else r=await pw(u,this._axiosCancelSource.token,this._config.httpRetryConfig||m_,!0,this.store);if(!this._joinAndNotLeaveYet)throw new kT(Gy.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout((()=>{this._configDistribute.startGetConfigDistribute(u,this._axiosCancelSource.token),this._configDistribute.on(oI.UPDATE_BITRATE_LIMIT,(e=>{this._p2pChannel.updateBitrateLimit(e)}))}),0),this._key=n||e;const o=r.gatewayInfo,s=u.uid?u.uid:o.uid;this._joinInfo=Mz(Mz({},u),{},{cid:o.cid,uid:s,vid:o.vid,apResponse:o.res,uni_lbs_ip:o.uni_lbs_ip,gatewayAddrs:o.gatewayAddrs}),this.store.intUid=s;const a=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new kT(Gy.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));l.onSuccess(a),this._appId=e,this._channelName=u.cname,this._uid=a,this.store.uid=a,setTimeout((()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Cy()?"beforeunload":"pagehide",this._handleBeforeUnload)}),0);const c=u.stringUid?"string uid: ".concat(u.stringUid,",uid: ").concat(u.uid):"uid: ".concat(this._uid);return BS.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(c)),setTimeout((()=>{BS.startUpload()}),5e3),this.store.joinEnd(),h=this,Or(iT).call(iT,h)||iT.push(h),a}catch(e){const t=Array.isArray(e)?e[0]:e;throw t&&t.code===Gy.OPERATION_ABORTED?BS.warning("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),t):BS.error("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),t),t.code!==Gy.OPERATION_ABORTED&&this._numberOfJoinCount===o&&(this._gateway.state="DISCONNECTED",this._reset()),l.onError(t),t}var h}_joinGateway(){if(!this._joinInfo||!this._key)throw new kT(Gy.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!bS("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then((e=>e)).catch((e=>{if(e.code===Gy.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,mE.FALLBACK),e;if(e.code===Gy.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,mE.FALLBACK),e;throw e})).then((e=>{if(e instanceof kT){if(e.code===Gy.INIT_WEBSOCKET_TIMEOUT){if(BS.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new kT(Gy.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const e=bS("PROXY_SERVER_TYPE3");if(Array.isArray(e))if(this._joinInfo.apUrl){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),n=t.slice(t.length-2).join(".");e.forEach((e=>{this._joinInfo&&Or(e).call(e,n)&&(this._joinInfo.proxyServer=e)})),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=e[0])}else this._joinInfo.proxyServer=e[0];else this._joinInfo.proxyServer=e;const t=bS("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return t&&t[1]&&"443"!==t[1]&&BS.setProxyServer(this._joinInfo.proxyServer),"443"!==bS("STATS_COLLECTOR_PORT").toString()&&eT.setProxyServer(this._joinInfo.proxyServer),eT.reportApiInvoke(this._sessionId,{name:pE.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:hE.TRACER}).onSuccess(),this.safeEmit(gE.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),bS("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach((e=>{"forceturn"in e&&(e.forceturn=!0)})),this._gateway.join(this._joinInfo,this._key)}if(BS.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new kT(Gy.INVALID_OPERATION);return eT.reportApiInvoke(this._sessionId,{name:pE.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:hE.TRACER}).onSuccess(),this._joinGateway()}return e})).then((e=>e))}async leave(){BS.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Cy()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(e){const t=iT.indexOf(e);-1!==t&&iT.splice(t,1)}(this);const e=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return BS.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave("CONNECTED"!==this.connectionState),BS.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(e)){if(!(e instanceof uC))return this._publishDataChannel(e);e=[e]}if(0===e.length)throw new kT(Gy.INVALID_PARAMS,"param list is empty");const n=e;if("audience"===this._gateway.role)throw new kT(Gy.INVALID_OPERATION,"audience can not publish stream");for(const i of n){if(!(i instanceof uC))throw new kT(Gy.INVALID_PARAMS,"parameter is not local track");if(!i._enabled&&t)throw new kT(Gy.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()))}BS.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))));const r=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&n.forEach((e=>{const t=this._configDistribute.getBitrateLimit();e instanceof bO&&t&&e.setBitrateLimit(t.uplink)}));try{await this._publishHighStream(n),BS.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))))}catch(e){throw BS.error("[".concat(this._clientId,"] publish error"),e.toString()),e}finally{r()}}async _publishDataChannel(e){Ky(e.id,"id",0,65535,!0),Yy(e.ordered,"ordered"),Jy(e.metadata,"metadata",0,512),BS.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));const t=await this._publishMutex.lock();try{if(-1!==this._p2pChannel.getAllDataChannels().findIndex((t=>t.id===e.id)))throw new kT(Gy.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||void 0===this._uid)throw new kT(Gy.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&bS("FORCE_TURN")&&!bS("TURN_ENABLE_TCP")&&!bS("TURN_ENABLE_UDP"))throw new kT(Gy.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const t=new aD(e);if(await this._p2pChannel.publishDataChannel([t]),!this._p2pChannel.isP2PDisconnected()){if("number"!=typeof t._originDataChannelId)throw BS.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new kT(Gy.CREATE_DATACHANNEL_ERROR);try{const n={streamId:e.id,ordered:e.ordered,maxRetransmits:bS("DATASTREAM_MAX_RETRANSMITS"),metadata:e.metadata,channelId:t._originDataChannelId};await this._gateway.publishDataChannel(this._uid,n,!0),await t._waitTillOpen()}catch(e){if(e.code!==Gy.DISCONNECT_P2P)throw e}}return BS.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(t.id)),t}catch(e){throw BS.error("[".concat(this._clientId,"] publish datachannels error"),e.toString()),e}finally{t()}}async unpublish(e){if(!this._joinInfo||void 0===this._uid)throw new kT(Gy.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof uC))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);BS.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map((e=>"".concat(e.getTrackId()," ")))," "));const n=await this._publishMutex.lock();try{if(this._p2pChannel instanceof pU){const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.sendExtensionMessage(II.UNPUBLISH,{unpubMsg:e},!0)}else{const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.unpublish(e,this._uid),BS.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map((e=>"".concat(e.getTrackId())))))}}catch(e){throw BS.error("[".concat(this._clientId,"] unpublish error"),e.toString()),e}finally{n&&n()}}async _unpublishDataChannel(e){void 0!==e&&0!==e.length||(e=this._p2pChannel.getAllDataChannels()),BS.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map((e=>"".concat(e.id," ")))," "));const t=await this._publishMutex.lock();try{const t=await this._p2pChannel.unpublishDataChannel(e);t&&await this._gateway.unpublishDataChannel(t),BS.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map((e=>"".concat(e.id)))))}catch(e){throw BS.error("[".concat(this._clientId,"] unpublish dataChannel error"),e.toString()),e}finally{t&&t()}}async subscribe(e,t,n){return"datachannel"===t?this._subscribeDataChannel(e,n):this._subscribe(e,t)}async presubscribe(e,t){if(qy(t,"mediaType",["audio","video"]),this._p2pChannel instanceof pU)throw new kT(Gy.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"can't presub when not join");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const n=t===aI.AUDIO,r=t===aI.VIDEO,i=await this._subscribeMutex.lock();try{const{ssrcId:i,ortc:o,rtxSsrcId:s,cname:a,uint_id:c}=await this._gateway.presubscribe(e,t,!0);if(null==i)throw new kT(Gy.UNEXPECTED_RESPONSE,"no ssrc id");let l=this._users.find((t=>t.uid===e));l||(l=new oU(e,c||e),l._is_pre_created=!0,this._users.push(l)),a&&(l._cname=a),l._uintid||(l._uintid=c||e),n&&(l._audioSSRC=i,l._audio_pre_subscribed=!0,o&&(l._audioOrtc=o)),r&&(l._videoSSRC=i,l._video_pre_subscribed=!0,o&&(l._videoOrtc=o),null!=s&&(l._rtxSsrcId=s)),BS.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(i)),await this._p2pChannel.subscribe(l,t,i,s,o);const u=n?l._audioTrack:l._videoTrack;if(!u)throw new kT(Gy.UNEXPECTED_ERROR,"can not find remote track in user");return n&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0),r&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0),u}catch(t){throw BS.error("[".concat(this._clientId,"] presub user ").concat(e," error"),t),t}finally{i()}}async _subscribeDataChannel(e,t){var n;if(Ky(t,"channelId",0,65535,!0),!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e)))throw BS.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new kT(Gy.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&0===e._dataChannels.length)throw BS.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new kT(Gy.INVALID_REMOTE_USER,"user is not published");const r=null===(n=e._dataChannels)||void 0===n?void 0:n.find((e=>e.id===t));if(!r)throw BS.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new kT(Gy.REMOTE_USER_IS_NOT_PUBLISHED);const i=await this._subscribeMutex.lock();BS.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{const n=await this._p2pChannel.subscribeDataChannel(e,[r]);if(n&&Or(n).call(n,r.id))try{var o;if("number"!=typeof r._originDataChannelId)throw BS.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new kT(Gy.CREATE_DATACHANNEL_ERROR);const t={id:r.id,datachannelId:r._originDataChannelId,ordered:r.ordered,maxRetransmits:r.maxRetransmits,metadata:null!==(o=r.metadata)&&void 0!==o?o:""};await this._gateway.subscribeDataChannel(e.uid,t,!0),await r._waitTillOpen()}catch(t){if((null==t?void 0:t.code)!==Gy.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[r]),t;await this._p2pChannel.unsubscribeDataChannel(e,[r]),this._p2pChannel.setPendingRemoteDataChannel(e,r.id)}return BS.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),r}finally{i()}}async _p2pSubscribe(e,t,n){if(qy(t,"mediaType",["audio","video"]),!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e))){const t=new kT(Gy.INVALID_REMOTE_USER,"user is not in the channel");throw BS.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new kT(Gy.INVALID_REMOTE_USER,"user is not published");throw BS.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!n&&("audio"===t&&!e.hasAudio||"video"===t&&!e.hasVideo)){const n=new kT(Gy.REMOTE_USER_IS_NOT_PUBLISHED);throw BS.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}const r=await this._subscribeMutex.lock();BS.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const n="audio"===t?e._audioSSRC:e._videoSSRC,r="audio"===t?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof pU&&await this._p2pChannel.subscribe(e,t,n,r)}catch(e){throw e}BS.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{BS.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const n="audio"===t?e._audioTrack:e._videoTrack;if(!n)throw new kT(Gy.UNEXPECTED_ERROR,"can not find remote track in user object");return n}catch(t){throw BS.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{r()}}async _subscribe(e,t,n){if(this._p2pChannel instanceof pU)return this._p2pSubscribe(e,t);if(qy(t,"mediaType",["audio","video"]),!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e))){const t=new kT(Gy.INVALID_REMOTE_USER,"user is not in the channel");throw BS.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new kT(Gy.INVALID_REMOTE_USER,"user is not published");throw BS.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!(n||("audio"!==t||e.hasAudio&&void 0!==e._audioSSRC)&&("video"!==t||e.hasVideo&&void 0!==e._videoSSRC))){const n=new kT(Gy.REMOTE_USER_IS_NOT_PUBLISHED);throw BS.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}let r="audio"===t?e._audioSSRC:e._videoSSRC,i="audio"===t?e._audioOrtc:e._videoOrtc,o="video"===t?e._rtxSsrcId:void 0,s={stream_type:"audio"===t?aI.AUDIO:aI.VIDEO,ssrcId:r};const a=await this._subscribeMutex.lock();BS.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const a="audio"===t?e._audioSSRC:e._videoSSRC;void 0!==a&&a!==r&&(r=a,i="audio"===t?e._audioOrtc:e._videoOrtc,o="video"===t?e._rtxSsrcId:void 0,s={stream_type:"audio"===t?aI.AUDIO:aI.VIDEO,ssrcId:r}),bP.markSubscribeStart(this.store.clientId,r),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,r,o,i);try{await this._gateway.subscribe(e.uid,s,!0)}catch(n){if((null==n?void 0:n.code)!==Gy.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),n;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(n){throw this._p2pChannel.reportSubscribeEvent(!1,null==n?void 0:n.code,e,t),n}BS.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{BS.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const a="audio"===t?e._audioTrack:e._videoTrack;if(!a)throw new kT(Gy.UNEXPECTED_ERROR,"can not find remote track in user object");return a}catch(t){throw BS.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{a()}}async massSubscribe(e){if(Xy(e,"subscribeList"),!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const t=Date.now(),n=new Map,r=await this._subscribeMutex.lock();BS.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; ")));const i=(e=[...e]).map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n}})),o=await this._p2pChannel.globalLock();try{var s;for(let t=e.length-1;t>=0;t--){const r=e[t],{user:o,mediaType:s}=r;if(qy(s,"mediaType",["audio","video"]),!o){const e=new kT(Gy.INVALID_PARAMS,"user property does not exist in subscribeList item");throw BS.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),e}if(!this._users.find((e=>e===o))){const n=new kT(Gy.INVALID_REMOTE_USER,"user is not in the channel");BS.error("[".concat(this._clientId,"] can not massSubscribe ").concat(o.uid,", this user is not in the channel")),i[t].error=n,e.splice(t,1);continue}if("audio"===s&&(!o.hasAudio||void 0===o._audioSSRC)||"video"===s&&(!o.hasVideo||void 0===o._videoSSRC)){const n=new kT(Gy.REMOTE_USER_IS_NOT_PUBLISHED);BS.error("[".concat(this._clientId,"] can not subscribe ").concat(o.uid," with mediaType ").concat(s,", remote user is not published")),i[t].error=n,e.splice(t,1);continue}const a=ZT.Video|ZT.LwoVideo,c=n.get(o);if(c){if("video"===s?c&a:c&ZT.Audio){e.splice(t,1),BS.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(o.uid,", mediaType:").concat(s," twice"));continue}n.set(o,c|("video"===s?a:ZT.Audio))}else n.set(o,"video"===s?a:ZT.Audio)}for(let t=e.length-1;t>=0;t--){const r=e[t],{user:i,mediaType:o}=r,s=ZT.Video|ZT.LwoVideo;if(this._p2pChannel.hasRemoteMedia(i,o)){await this._p2pChannel.unmuteRemoteNoLock(i,o);const r=n.get(i);n.set(i,"video"===o?r^s:r^ZT.Audio),e.splice(t,1)}}this.store.massSubscribe(e.map((e=>({userId:e.user.uid,type:e.mediaType}))),t);const r=zE(s=Array.from(n.entries())).call(s,((e,t)=>{let[n,r]=t;if(0===r)return e;const i={stream_id:n.uid,stream_type:r};return r&ZT.Audio&&(i.audio_ssrc=n._audioSSRC),r&ZT.Video&&(i.video_ssrc=n._videoSSRC),e.push(i),e}),[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n,ssrcId:n===aI.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:n===aI.VIDEO?t._rtxSsrcId:void 0}})));const n=new Map;if(r.length>0){const e=await this._gateway.subscribeAll(r,!0);((null==e?void 0:e.users)||[]).forEach((e=>{let{stream_id:t,video_error_code:r,audio_error_code:i,error_code:o}=e;(r||i||o)&&n.set(t,{video_error_code:r,audio_error_code:i,error_code:o})}))}if(Array.from(n.entries()).length>0){const e=[];Array.from(n.entries()).forEach((t=>{let[n,r]=t;const i=this.remoteUsers.find((e=>e.uid===n));if(i){let t;r.error_code||r.video_error_code&&r.audio_error_code?t=void 0:r.video_error_code?t=aI.VIDEO:r.audio_error_code&&(t=aI.AUDIO),e.push({user:i,mediaType:t})}})),e.length>0&&await this._p2pChannel.massUnsubscribeNoLock(e)}for(const e of i){const t=n.get(e.user.uid);if(t){const n=t.error_code||"audio"===e.mediaType&&t.audio_error_code||"video"===e.mediaType&&t.video_error_code;if(n){const t=xI(n);BS.error("user:".concat(e.user.uid," mediaType:").concat(e.mediaType," has massSubscribe error ").concat(t.desc)),e.error=new kT(Gy.SUBSCRIBE_FAILED,"code ".concat(n,": ").concat(t.desc))}}e.error||("video"===e.mediaType?e.track=e.user.videoTrack:e.track=e.user.audioTrack)}return this.store.massSubscribe(i.filter((e=>!e.error)).map((e=>({userId:e.user.uid,type:e.mediaType}))),void 0,Date.now()),i.forEach((e=>{var n;eT.subscribe(this.store.sessionId,{succ:!!e.error,ec:(null===(n=e.error)||void 0===n?void 0:n.code)||null,video:e.mediaType===aI.VIDEO,audio:e.mediaType===aI.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===aI.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t)},!0)})),BS.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),i}catch(t){throw await this._p2pChannel.massUnsubscribeNoLock(e),t}}finally{o(),r()}}async unsubscribe(e,t,n){if(t||this.store.useP2P){if("datachannel"===t)return this._unsubscribeDataChannel(e,n)}else await this._unsubscribeDataChannel(e,n);if(t&&qy(t,"mediaType",["audio","video"]),!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find((t=>t===e))){const t=new kT(Gy.INVALID_REMOTE_USER,"user is not in the channel");throw BS.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}BS.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));const r=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof pU)await this._p2pChannel.unsubscribe(e,t);else{const n=await this._p2pChannel.unsubscribe(e,t);n&&await this._gateway.unsubscribe(n,e.uid),t&&"audio"!==t||(e._audio_pre_subscribed=!1),t&&"video"!==t||(e._video_pre_subscribed=!1),e._is_pre_created&&HE(this._users,e),BS.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(t){if(t.code===Gy.DISCONNECT_P2P)return void BS.warning("disconnecting p2p, abort unsubscribe request.");throw BS.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}finally{r()}}async _unsubscribeDataChannel(e,t){if(t&&Ky(t,"id",0,65535,!0),!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find((t=>t===e))){const t=new kT(Gy.INVALID_REMOTE_USER,"user is not in the channel");throw BS.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}let n;if("number"==typeof t){const r=e._dataChannels.find((e=>e.id===t));r&&(n=[r])}else n=e._dataChannels;if(void 0===n){const n=new kT(Gy.REMOTE_USER_IS_NOT_PUBLISHED);throw BS.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),n}BS.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(n.map((e=>e.id))));try{const t=await this._p2pChannel.unsubscribeDataChannel(e,n);t&&await this._gateway.unsubscribeDataChannel(t,e.uid),BS.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(t))}catch(t){if(t.code===Gy.DISCONNECT_P2P)return void BS.warning("disconnecting p2p, abort unsubscribe request.");throw BS.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}}async massUnsubscribe(e){if(Xy(e,"unsubscribeList"),!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");BS.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),e=[...e];const t=new Map;for(let n=e.length-1;n>=0;n--){const{user:r,mediaType:i}=e[n];if(!r){const e=new kT(Gy.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw BS.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),e}if(qy(i,"mediaType",["video","audio",void 0]),!this._users.find((e=>e===r))){BS.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(r.uid,", user is not in the channel")),e.splice(n,1);continue}const o=ZT.Video|ZT.LwoVideo;if(t.has(r)){const s=t.get(r);let a;switch(i){case"video":a=s&o;break;case"audio":a=s&ZT.Audio;break;default:a=s&(ZT.Audio|o)}if(a){BS.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(r.uid,",mediaType:").concat(i," twice.")),e.splice(n,1);continue}i?"audio"===i?t.set(r,s|ZT.Audio):"video"===i&&t.set(r,s|o):t.set(r,s|ZT.Audio|o)}else i?"audio"===i?t.set(r,ZT.Audio):"video"===i&&t.set(r,o):t.set(r,ZT.Audio|o)}try{const t=await this._p2pChannel.massUnsubscribe(e);t&&await this._gateway.massUnsubscribe(t),BS.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join()))}catch(e){if(e.code===Gy.DISCONNECT_P2P)return void BS.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw BS.error("[".concat(this._clientId,"] massUnsubscribe error"),e.toString()),e}}async setLowStreamParameter(e){!function(e){if(!e)throw new Wy(Gy.INVALID_PARAMS);Zy(e.width)||Qy(e.width,"streamParameter.width"),Zy(e.height)||Qy(e.height,"streamParameter.height"),Zy(e.framerate)||Qy(e.framerate,"streamParameter.framerate"),Zy(e.bitrate)||Ky(e.bitrate,"streamParameter.bitrate")}(e),(!e.width&&e.height||e.width&&!e.height)&&BS.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),BS.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));const t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,uI.LocalVideoLowTrack)}async enableDualStream(){if(!Tw().supportDualStream)throw eT.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new kT(Gy.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new kT(Gy.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw eT.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,eT.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),BS.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(uI.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw eT.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,eT.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),BS.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(e){qy(e,"role",["audience","host"])}(e),t&&TE(t),"rtc"===this.mode||"p2p"===this.mode)throw BS.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new kT(Gy.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&"host"===e)throw new kT(Gy.INVALID_OPERATION,"host mode can not set audience latency level");if("audience"===e&&this._p2pChannel.hasLocalMedia())throw new kT(Gy.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(e,t),this._config.role=e,BS.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}getRemoteInboundOffset(){var e;const t=null===(e=this._p2pChannel.getStats())||void 0===e?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;const n=t.timestamp-Date.now();return Math.abs(n)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?n:0}getNtpWallTimeInMs(){return"visible"===document.visibilityState&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(Jy(e,"proxyServer"),!t){if("DISCONNECTED"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new kT(Gy.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,eT.setProxyServer(this._proxyServer),BS.setProxyServer(this._proxyServer),BS.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if("DISCONNECTED"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new kT(Gy.INVALID_OPERATION,"You have already set the proxy")}if(bE(e))return this._turnServer={servers:e,mode:"original-manual"},void BS.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map((e=>e.urls)).join(","),"."));e.forEach((e=>SE(e))),this._turnServer={servers:e,mode:"manual"},BS.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if("DISCONNECTED"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"you should set license before join channel");if(Jy(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new kT(Gy.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,BS.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if("DISCONNECTED"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw new kT(Gy.INVALID_OPERATION,"You have already set the proxy");const t=[3,4,5];let n;switch(void 0===e&&(e=3),e){case 1:case 2:throw new kT(Gy.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:n="proxy3";break;case 4:n="proxy4";break;case 5:n="proxy5";break;default:throw new kT(Gy.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=n,this.store.cloudProxyServerMode=n,BS.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if("DISCONNECTED"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"Stop proxy server after leave channel");eT.setProxyServer(),BS.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",BS.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new kT(Gy.INVALID_PARAMS,"accessPoints is required.");Xy(e.accessPoints.serverList,"accessPoints.serverList"),Jy(e.accessPoints.domain,"accessPoints.domain");const t=(e,t)=>{Ky(e,t,0,65535,!0)};let n=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),n=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new kT(Gy.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");bS("CLOSE_AFB_FOR_LOCAL_AP")&&(_S("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),_S("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const r=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,o=e.accessPoints.serverList.map((e=>r.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(i):e)),s=o.map((e=>"".concat(e,":").concat(n)));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,_S("WEBCS_DOMAIN",s),_S("WEBCS_DOMAIN_BACKUP_LIST",s),_S("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(Xy(e.report.hostname,"report.hostname"),_S("EVENT_REPORT_DOMAIN",e.report.hostname[0]),_S("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(_S("EVENT_REPORT_DOMAIN",o[0]),_S("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));let a=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),a=e.report.port),_S("STATS_COLLECTOR_PORT",a),e.report?_S("ENABLE_EVENT_REPORT",!0):_S("ENABLE_EVENT_REPORT",!1);let c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(Xy(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=o[0];let l=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),l=e.log.port),_S("LOG_UPLOAD_SERVER","".concat(c,":").concat(l));let u=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(Xy(e.cds.hostname,"cds.hostname"),u=e.cds.hostname):u=o;let d=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),d=e.cds.port),_S("CDS_AP",u.map((e=>"".concat(e,":").concat(d)))),e.cds?_S("ENABLE_CONFIG_DISTRIBUTE",!0):_S("ENABLE_CONFIG_DISTRIBUTE",!1),BS.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(Xy(e,"serverList"),Jy(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new kT(Gy.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map((e=>n.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(t):e)),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,_S("WEBCS_DOMAIN",e),_S("WEBCS_DOMAIN_BACKUP_LIST",e),_S("GATEWAY_DOMAINS",[t]),_S("EVENT_REPORT_DOMAIN",e[0]),_S("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),_S("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),BS.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(qy(e,"streamType",[0,1]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(e){throw BS.error("[".concat(this._clientId,"] set default remote video stream type error"),e.toString()),e}else BS.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){qy(t,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout((()=>{const t=this._users.find((t=>t.uid===e));t&&t.videoTrack&&t.videoTrack.updateMediaStreamTrackResolution()}),2e3)}catch(e){throw BS.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}BS.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){qy(t,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw BS.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}BS.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,n,r){!function(e){qy(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),Jy(t,"secret");const i=["aes-128-gcm2","aes-256-gcm2"];if(Or(i).call(i,e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new kT(Gy.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new kT(Gy.INVALID_PARAMS,"current encrypt mode does not need salt");if(r){if(Yy(r,"encryptDataStream"),!Or(i).call(i,e))throw new kT(Gy.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||BS.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=XE(n))}async renewToken(e){if(Jy(e,"token",1,2047),!this._key||!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"renewToken should not be called before user join");const t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const n=await this._renewTokenMutex.lock();try{if(bS("USE_NEW_TOKEN")){BS.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const t=await yw(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||m_);BS.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:t})}else BS.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});BS.debug("[".concat(this._clientId,"] renewToken success"))}catch(e){throw this._key=t,this._joinInfo.token=t,BS.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}finally{n()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?BS.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval((()=>{const e=this._p2pChannel.getAudioLevels();this.safeEmit(gE.VOLUME_INDICATOR,e)}),bS("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if("h264"!==this.codec)throw new kT(Gy.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new kT(Gy.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new kT(Gy.LIVE_STREAMING_TASK_CONFLICT);const n=t?bT.TRANSCODE:bT.RAW;return this._createLiveStreamingClient(n).startLiveStreamingTask(e,n)}setLiveTranscoding(e){return this._createLiveStreamingClient(bT.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((t=>t&&t.hasUrl(e)));if(!t.length)throw new kT(Gy.INVALID_PARAMS,"can not find live streaming url to stop");await cy.all(t.map((t=>t&&t.stopLiveStreamingTask(e))))}async addInjectStreamUrl(e,t){if(!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const n=this._createLiveStreamingClient(bT.INJECT);n.setInjectStreamConfig(t,0),await n.startLiveStreamingTask(e,bT.INJECT)}async removeInjectStreamUrl(){var e;const t=this._createLiveStreamingClient(bT.INJECT),n=Array.from(RT(e=t.streamingTasks).call(e)).find((e=>e.mode===bT.INJECT));if(!this._joinInfo||!n)throw new kT(Gy.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await t.stopLiveStreamingTask(n.url)}async startChannelMediaRelay(e){IU(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}async updateChannelMediaRelay(e){IU(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}async stopChannelMediaRelay(){const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"can not send data stream, not joined");if(("string"==typeof e||e instanceof Uint8Array)&&(e={payload:e}),"string"==typeof e.payload){const t=new TextEncoder;e.payload=t.encode(e.payload)}let r=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Or(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(r=!0,e.payload=await async function(e,t,n){var r;const i=zE(r=Array.from(n)).call(r,((e,t)=>e+t),0),o={serverTs:0,seq:kS++,length:n.length,checkSum:i},s=new Uint8Array(u_(i,2)),a=new ArrayBuffer(DS),c=new DataView(a);c.setUint32(0,o.serverTs),c.setUint16(4,o.seq),c.setUint16(6,o.length),c.setUint16(8,o.checkSum);const l=16-n.length%16;n=ZE(n,new Uint8Array(l));const u=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:e,tagLength:AS,additionalData:s},t,n);return ZE(new Uint8Array(a),new Uint8Array(u))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new kT(Gy.INVALID_PARAMS,r?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(mT.DATA_STREAM,{payload:XE(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-bz},!n)}sendMetadata(e){if(!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new kT(Gy.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(mT.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:XE(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(GS),!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"can not send custom report, not joined");await eT.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){qy(t.spatialLayer,"spatialLayer",[0,1,2,3]),qy(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw BS.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}async setRTMConfig(e){const{apRTM:t=!1,rtmFlag:n}=e;if(Yy(t,"apRTM"),Ky(n,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=n,BS.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState)&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=n,this._gateway.setRTM2Flag(n)}_reset(){if(BS.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=oS.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach((e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach((e=>e._close())),e._dataChannels.length=0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new h_("client-publish"),this._subscribeMutex=new h_("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(e){}if(this._moderation)try{this.setImageModeration(!1)}catch(e){}}_startSession(e,t){var n;const r=e||i_();e?BS.debug("[".concat(this._clientId,"] new Session ").concat(r)):BS.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(r));const i=e?"":this._sessionId||"";this._sessionId=r,this.store.sessionId=r;const o={lts:(new Date).getTime(),mode:this.mode,stringUid:(null==t?void 0:t.stringUid)||(null===(n=this._joinInfo)||void 0===n?void 0:n.stringUid),channelProfile:"live"===this.mode?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:i,clientRole:"audience"===this.role?2:1};t?eT.sessionInit(this._sessionId,Mz({cname:t.channel,appid:t.appId},o)):this._joinInfo?eT.sessionInit(this._sessionId,Mz({cname:this._joinInfo.cname,appid:this._joinInfo.appId},o)):this._gateway.joinInfo&&eT.sessionInit(this._sessionId,Mz({cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId},o)),this._joinInfo&&(this._joinInfo.sid=r),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=r)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new kT(Gy.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&bS("FORCE_TURN")&&!bS("TURN_ENABLE_TCP")&&!bS("TURN_ENABLE_UDP"))throw new kT(Gy.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");BS.debug("[".concat(this._clientId,"] publish high stream"));try{const n=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof pU){const t=(await n.next()).value;if(t){try{await this._gateway.sendExtensionMessage(II.PUBLISH,t,!0)}catch(e){throw n.throw(e),e}await n.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const r=(await n.next()).value;if(r){var t;let i;try{i=await this._gateway.publish(this._uid,r,!0)}catch(e){if(e.code!==Gy.DISCONNECT_P2P)throw n.throw(e),e}await n.next((null===(t=i)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t instanceof bO&&t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig),!t.muted&&t.enabled||await this._p2pChannel.muteLocalTrack(t)}}catch(t){if(this._p2pChannel.reportPublishEvent(!1,null==t?void 0:t.code,e),(null==t?void 0:t.code)===Gy.WS_ABORT)return;throw t}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new kT(Gy.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new kT(Gy.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));BS.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),n=(await e.next()).value;if(n){var t;let r;try{r=await this._gateway.publish(this._uid,n,!0)}catch(t){if(t.code!==Gy.DISCONNECT_P2P)throw e.throw(t),t}e.next((null===(t=r)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(e){if(this._p2pChannel.reportPublishEvent(!1,null==e?void 0:e.code,void 0,!0),(null==e?void 0:e.code)===Gy.WS_ABORT)return;throw e}}_createLiveStreamingClient(e){if(!this._joinInfo||!this._appId)return new kT(Gy.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const t=()=>new SU(this._joinInfo,this._config.websocketRetryConfig||m_,this._config.httpRetryConfig||m_),n=e=>{e.onLiveStreamError=(e,t)=>{eT.reportApiInvoke(this._sessionId,{name:pE.ON_LIVE_STREAM_ERROR,options:[e,t],tag:hE.TRACER}).onSuccess(),this.safeEmit(gE.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{eT.reportApiInvoke(this._sessionId,{name:pE.ON_LIVE_STREAM_WARNING,options:[e,t],tag:hE.TRACER}).onSuccess(),this.safeEmit(gE.LIVE_STREAMING_WARNING,e,t)},e.on(VT.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new kT(Gy.INVALID_OPERATION,"can not find join info to get worker manager"));gw(e,this._joinInfo,this._axiosCancelSource.token,m_).then(t).catch(n)}))};switch(e){case bT.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=t(),n(this._liveRawStreamingClient)),this._liveRawStreamingClient;case bT.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=t(),n(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case bT.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=t(),this._injectStreamingClient.on(VT.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new kT(Gy.INVALID_OPERATION,"can not find join info to get worker manager"));gw(e,this._joinInfo,this._axiosCancelSource.token,m_).then(t).catch(n)})),this._injectStreamingClient.onInjectStatusChange=(e,t,n)=>{this.safeEmit(gE.INJECT_STREAM_STATUS,e,t,n)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo)return new kT(Gy.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:e,sendResolutionHeight:t}=this.getLocalVideoStats(),n={width:e,height:t};this._channelMediaRelayClient=new wU(this._joinInfo,this._clientId,this._config.websocketRetryConfig||m_,this._config.httpRetryConfig||m_,n),this._channelMediaRelayClient.on("state",(e=>{e===qT.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.safeEmit(gE.CHANNEL_MEDIA_RELAY_STATE,e)})),this._channelMediaRelayClient.on("event",(e=>{this.safeEmit(gE.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._statsCollector.onStatsChanged=(e,t)=>{var n;"resolution"===e&&(null===(n=this._channelMediaRelayClient)||void 0===n||n.setVideoProfile(t))}}return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){const{added:n,deleted:r}=e,i=[];Array.isArray(n)&&n.length>0&&n.forEach((e=>{const{uid:n,stream_id:r,ordered:o,max_retrans_times:s,metadata:a}=e,c=this._users.find((e=>e._uintid===n));if(c){if(BS.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(n)),Or(i).call(i,c)||i.push(c),c._uintid||(c._uintid=n),-1===c._dataChannels.findIndex((t=>t.id===e.stream_id))){const e={id:r,ordered:!!o,maxRetransmits:s,metadata:a},n=new sD(e);c._dataChannels.push(n),BS.info("[".concat(this._clientId,"] remote user ").concat(c.uid," published datachannel")),t||this.safeEmit(gE.USER_PUBLISHED,c,"datachannel",e)}this._p2pChannel.hasPendingRemoteDataChannel(c,e.stream_id)&&(BS.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(c.uid," after reconnect.")),this._subscribeDataChannel(c,e.stream_id).catch((e=>{BS.error("[".concat(this._clientId,"] resubscribe datachannel error"),e.toString())})))}else BS.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"))})),t&&(this.safeEmit(gE.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(r)&&r.length>0&&r.forEach((e=>{const{uid:t,stream_id:n}=e,r=this._users.find((e=>e._uintid===t));if(!r)return void BS.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const i=r._dataChannels.find((t=>t.id===e.stream_id));i&&(BS.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(t)),this._p2pChannel.unsubscribeDataChannel(r,[i]).then((e=>{if(r._dataChannels=r._dataChannels.filter((e=>e!==i)),e)return this._gateway.unsubscribeDataChannel(e,r.uid)})),BS.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished datachannel ,id:").concat(i.id)),this.safeEmit(gE.USER_UNPUBLISHED,r,"datachannel",i._config))}))}_handleRemoveDataChannels(e){const t=this._users.find((t=>t.uid===e.uid));if(t){if(void 0!==t._dataChannels&&t._dataChannels.length>0){BS.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));const n=()=>{BS.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach((e=>{this.safeEmit(gE.USER_UNPUBLISHED,t,"datachannel",e._config)}))};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then((e=>{if(e)return this._gateway.unsubscribeDataChannel(e,t.uid)})),n()}}else BS.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(JT.DISCONNECT_P2P,(async()=>{await this._p2pChannel.disconnectForReconnect()})),this._gateway.on(JT.CONNECTION_STATE_CHANGE,((e,t,n)=>{var r;if(n===mE.FALLBACK)return;const i=()=>{this.safeEmit(gE.CONNECTION_STATE_CHANGE,e,t,n)};if(eT.reportApiInvoke(this._sessionId||(null===(r=this._gateway.joinInfo)||void 0===r?void 0:r.sid)||null,{name:pE.CONNECTION_STATE_CHANGE,options:[e,t,n],tag:hE.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:n})),BS.info("[".concat(this._clientId,"] connection state change: ").concat(t," -> ").concat(e)),"DISCONNECTED"===e)return this._reset(),void i();if("RECONNECTING"===e)this._users.forEach((e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._is_pre_created||(e._audio_pre_subscribed||(e._audioSSRC=void 0,e._audioOrtc=void 0),e._video_pre_subscribed||(e._videoSSRC=void 0,e._videoOrtc=void 0,e._rtxSsrcId=void 0),e._cname=void 0)})),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var o;this._streamFallbackTypeCacheMap.forEach(((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch((e=>{BS.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e)}))})),this._remoteStreamTypeCacheMap.forEach(((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch((e=>{BS.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e)}))})),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(o=this._joinInfo)||void 0===o?void 0:o.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then((()=>{BS.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))})).catch((e=>{BS.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(e))})),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter((e=>!e._trust_in_room_)).forEach((e=>{BS.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(e.uid)),this._handleUserOffline({uid:e.uid})})))}),3e3),this._streamRemovedTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach((e=>{e._trust_audio_mute_state_||(BS.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,aI.AUDIO,!1)),e._trust_video_mute_state_||(BS.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,aI.VIDEO,!1)),e._trust_audio_enabled_state_||(BS.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),e._trust_video_enabled_state_||(BS.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_video_stream_added_state_||(BS.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(e.uid)),this._handleResetAddStream(e,"video")),e._trust_audio_stream_added_state_||(BS.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(e.uid)),this._handleResetAddStream(e,"audio")),e._video_added_||e._audio_added_||(BS.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))})))}),1e3))}i()})),this._gateway.on(JT.REQUEST_NEW_GATEWAY_LIST,((e,t)=>{if(!this._joinInfo)return t(new kT(Gy.UNEXPECTED_ERROR,"can not recover, no join info"));dw(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||m_,this.store).then((t=>{this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res,this._joinInfo.gatewayAddrs=t.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=t.gatewayInfo.uni_lbs_ip);const n=[];t.gatewayInfo.gatewayAddrs.forEach((e=>{let{address:t}=e;const[r,i]=t.split(":");this._joinInfo&&this._joinInfo.proxyServer?n.push({proxy:this._joinInfo.proxyServer,host:r,port:i}):n.push({host:r,port:i})})),e(n)})).catch(t)})),this._gateway.on(JT.NETWORK_QUALITY,(e=>{"normal"===this._networkQualitySensitivity&&this.safeEmit(gE.NETWORK_QUALITY,e)})),this._gateway.on(JT.STREAM_TYPE_CHANGE,((e,t)=>{this.safeEmit(gE.STREAM_TYPE_CHANGED,e,t),eT.reportApiInvoke(this._sessionId,{name:pE.STREAM_TYPE_CHANGE,options:[e,t],tag:hE.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))})),this._gateway.on(JT.IS_P2P_DISCONNECTED,(e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)})),this._gateway.on(JT.NEED_RENEW_SESSION,(()=>{this._startSession()})),this._gateway.on(JT.REQUEST_P2P_CONNECTION_PARAMS,(async(e,t,n)=>{try{t(await this._p2pChannel.startP2PConnection(e))}catch(e){n(e)}})),this._gateway.on(JT.JOIN_RESPONSE,((e,t)=>{if(this.store.useP2P)return;const{dtlsParameters:n,iceParameters:r,candidates:i,rtpCapabilities:o,setup:s,cname:a}=bj(e.ortc,t);this._p2pChannel.connect(r,n,i,o,s,a)})),this._gateway.on(JT.REQUEST_DC_CONNECTION_PARAMS,(e=>{e(this._p2pChannel.getEstablishParams())})),this._gateway.on(JT.RESET_SIGNAL,(e=>{this._p2pChannel.resetConnection(e),this._handleGatewaySignalEvents()})),this._gateway.on(JT.DATACHANNEL_FAILBACK,(()=>{this._joinGateway()})),this._gateway.on(JT.DATACHANNEL_PRECONNECT,(async(e,t,n,r)=>{var i,o,s,a,c,l;await this._p2pChannel.startP2PConnection({turnServer:null===(i=this._joinInfo)||void 0===i?void 0:i.turnServer},!0);const u=function(e,t){let n;return t&&t.ip&&"number"==typeof t.port?(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],BS.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),BS.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],n}(e,t);return this._p2pChannel.preConnect({iceUfrag:"".concat(null===(o=this._joinInfo)||void 0===o?void 0:o.apResponse.cid,"_").concat(null===(s=this._joinInfo)||void 0===s?void 0:s.apResponse.cert),icePwd:"".concat(null===(a=this._joinInfo)||void 0===a?void 0:a.apResponse.cid,"_").concat(null===(c=this._joinInfo)||void 0===c?void 0:c.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(l=bS("FINGERPRINT"))&&void 0!==l?l:e.fingerprint}]},u,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(n).catch(r)}))}_handleGatewaySignalEvents(){this._gateway.signal.on(vT.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(vT.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(vT.ON_ADD_AUDIO_STREAM,(e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc))),this._gateway.signal.on(vT.ON_ADD_VIDEO_STREAM,(e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId))),this._gateway.signal.on(vT.ON_REMOTE_DATASTREAM_UPDATE,(e=>{this._handleUpdateDataChannel(e)})),this._gateway.signal.on(vT.ON_REMOTE_FULL_DATASTREAM_INFO,(e=>{this._handleUpdateDataChannel({added:e.datastreams,deleted:[]},!0)})),this._gateway.signal.on(vT.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(vT.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(vT.MUTE_AUDIO,(e=>this._handleMuteStream(e.uid,aI.AUDIO,!0))),this._gateway.signal.on(vT.UNMUTE_AUDIO,(e=>this._handleMuteStream(e.uid,aI.AUDIO,!1))),this._gateway.signal.on(vT.MUTE_VIDEO,(e=>this._handleMuteStream(e.uid,aI.VIDEO,!0))),this._gateway.signal.on(vT.UNMUTE_VIDEO,(e=>this._handleMuteStream(e.uid,aI.VIDEO,!1))),this._gateway.signal.on(vT.RECEIVE_METADATA,(e=>{const t=JE(e.metadata);this.safeEmit(gE.RECEIVE_METADATA,e.uid,t)})),this._gateway.signal.on(vT.ON_DATA_STREAM,(async e=>{var t;if(!e)return;let n=JE(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Or(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<DS)throw new kT(Gy.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(DS));const t=await async function(e,t,n){const r=n.subarray(0,DS),i=r.slice(8,DS),o=(i[0]<<8)+i[1],s=(r[6]<<8)+r[7],a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:e,tagLength:AS,additionalData:new Uint8Array(u_(o,2))},t,n.subarray(DS));return new Uint8Array(a).subarray(0,s)}(this._encryptDataStreamIv,this._encryptDataStreamKey,n);n=t}let r=0;if(e.ordered||e.syncWithAudio){const t=this._p2pChannel.getStats(),n=this.remoteUsers.find((t=>t.uid===e.uid)),i=null==t?void 0:t.audioRecv.find((e=>e.ssrc===(null==n?void 0:n._audioSSRC)));r=null==i?void 0:i.jitterBufferMs}null==r&&(r=0),Cz(Mz(Mz({},e),{},{payload:n}),r,{id:this._clientId,onStreamMessage:"function"==typeof this.onStreamMessage?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})})),this._gateway.signal.on(vT.ON_CRYPT_ERROR,(()=>{QE((()=>{BS.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(gE.CRYPT_ERROR)}),this._sessionId)})),this._gateway.signal.on(vT.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(vT.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{BS.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,mE.TOKEN_EXPIRE),this.safeEmit(gE.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()})),this._gateway.signal.on(vT.ON_STREAM_FALLBACK_UPDATE,(e=>{BS.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(gE.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")})),this._gateway.signal.on(vT.ON_PUBLISH_STREAM,(e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),BS.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))})),this._gateway.signal.on(vT.ENABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)})),this._gateway.signal.on(vT.DISABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)})),this._gateway.signal.on(fT.REQUEST_TIMEOUT,((e,t)=>{if(this._joinInfo)switch(e){case mT.PUBLISH:{if(!t)return;const e=t.ortc;if(e){var n,r;const i=e.some((e=>{let{stream_type:t}=e;return t===QT.Audio})),o=e.some((e=>{let{stream_type:t}=e;return t!==QT.Audio})),s=e.some((e=>{let{stream_type:t}=e;return t===QT.Screen||t===QT.ScreenLow}));"offer"===t.state&&eT.publish(this._joinInfo.sid,{eventElapse:bP.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:Gy.TIMEOUT,audio:i,video:o,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:s,audioName:i?null===(n=e.find((e=>{let{stream_type:t}=e;return t===QT.Audio})))||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId.toString():void 0,videoName:o?null===(r=e.find((e=>{let{stream_type:t}=e;return t!==QT.Audio})))||void 0===r||null===(r=r.ssrcs[0])||void 0===r?void 0:r.ssrcId.toString():void 0})}break}case mT.SUBSCRIBE:t&&eT.subscribe(this._joinInfo.sid,{succ:!1,ec:Gy.TIMEOUT,audio:t.stream_type===aI.AUDIO,video:t.stream_type===aI.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:bP.measureFromSubscribeStart(this.store.clientId,t.ssrcId)})}})),this._gateway.signal.on(vT.ON_P2P_OK,(e=>{this.uid,this._uid})),this._gateway.signal.on(vT.ON_PUBLISHED_USER_LIST,(e=>{if(null==e||!e.users)return;bS("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter((e=>!oT(e.string_id||e.stream_id,this.channelName))));const t=[],n=[];for(const r of e.users){let e=this._users.find((e=>e._uintid===r.stream_id));e?e._trust_in_room_=!0:(e=new oU(r.string_id||r.stream_id,r.stream_id),this._users.push(e),0===this.getListeners(gE.PUBLISHED_USER_LIST).length&&(BS.debug("[".concat(this._clientId,"] user online"),r.stream_id),this.safeEmit(gE.USER_JOINED,e)));const i=ZT.Audio&r.stream_type,o=(ZT.Video|ZT.LwoVideo)&r.stream_type,s=0!=(65280&r.stream_type),a=i&&e.hasAudio,c=o&&e.hasVideo;o&&(e._trust_video_stream_added_state_=!0,e._video_added_=!0,e._videoSSRC=r.video_ssrc,e._rtxSsrcId=r.video_rtx),i&&(e._trust_audio_stream_added_state_=!0,e._audio_added_=!0,e._audioSSRC=r.audio_ssrc),i&&!a&&0===this.getListeners(gE.PUBLISHED_USER_LIST).length&&(BS.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published audio")),this.safeEmit(gE.USER_PUBLISHED,e,"audio")),o&&!c&&0===this.getListeners(gE.PUBLISHED_USER_LIST).length&&(BS.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published video")),this.safeEmit(gE.USER_PUBLISHED,e,"video")),(i&&!a||o&&!c||s)&&t.push(e),o&&this._p2pChannel.hasPendingRemoteMedia(e,"video")&&n.push({user:e,mediaType:"video"}),i&&this._p2pChannel.hasPendingRemoteMedia(e,"audio")&&n.push({user:e,mediaType:"audio"})}n.length>0&&(BS.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(n.map((e=>"user: ".concat(e.user.uid,", mediaType: ").concat(e.mediaType))).join("; ")," ")),this.massSubscribe(n).catch((e=>{BS.error("[".concat(this._clientId,"] mass resubscribe error"),e.toString())}))),this.getListeners(gE.PUBLISHED_USER_LIST).length>0?bS("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(BS.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map((e=>e.uid)).join(", "))),this.safeEmit(gE.PUBLISHED_USER_LIST,t)):BS.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map((e=>e.uid)).join(", ")))})),this._gateway.signal.on(vT.ON_RTP_CAPABILITY_CHANGE,(e=>{const{video_codec:t}=e;this._p2pChannel instanceof cF&&this._p2pChannel.updateRemoteRTPCapabilities(t.map((e=>e.toLowerCase())).filter((e=>{var t;return Or(t=Object.keys(wS)).call(t,e)})))}))}_handleP2PEvents(){this._gateway.signal.on(vT.ON_USER_OFFLINE,(()=>{this._p2pChannel.disconnectForReconnect()})),this._gateway.signal.on(II.PUBLISH,((e,t,n)=>{const{uid:r}=e;e.forEach((e=>{const{kind:i,ssrcs:o,mid:s,isMuted:a}=e;this._handleP2PAddAudioOrVideoStream(i,r,o[0].ssrcId,s);const c=this._users.find((e=>e.uid===r));return c&&this._p2pChannel instanceof pU?this._p2pChannel.mockSubscribe(c,i,o[0].ssrcId,s).then((()=>{t()})).catch(n):t(),this._handleMuteStream(r,i,!!a)}))})),this._gateway.signal.on(II.CALL,(async(e,t,n)=>{if(this._p2pChannel instanceof pU)try{var r;t(await this._p2pChannel.startP2P({turnServer:null===(r=this._joinInfo)||void 0===r?void 0:r.turnServer},e))}catch(e){n(e)}})),this._gateway.signal.on(fT.P2P_CONNECTION,(async e=>{this._p2pChannel instanceof pU&&await this._p2pChannel.p2pConnect(e)})),this._gateway.signal.on(II.UNPUBLISH,(async(e,t,n)=>{if(this._p2pChannel instanceof pU){const{unpubMsg:r,uid:i}=e,o=this._users.find((e=>e.uid===i));if(!o)return BS.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i)),void t();try{r.forEach((async e=>{let{stream_type:t}=e;const n=t===QT.Audio?aI.AUDIO:aI.VIDEO;await this._p2pChannel.unsubscribe(o,n),this._handleMuteStream(i,n,!0)})),t()}catch(e){n(e)}}})),this._gateway.signal.on(II.CONTROL,(async(e,t)=>{const{action:n}=e;switch(n){case wI.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,aI.VIDEO,!0);break;case wI.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,aI.AUDIO,!0);break;case wI.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,aI.VIDEO,!1);break;case wI.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,aI.AUDIO,!1)}})),this._gateway.signal.on(II.RESTART_ICE,(async(e,t,n)=>{if(this._p2pChannel instanceof pU)try{const{direction:n,iceParameter:r}=e;n!==ET.SEND_ONLY||r?t(await this._p2pChannel.restartICE(n,r)):(this._p2pChannel.handleDisconnect(n),t())}catch(e){n(e)}})),this._gateway.signal.on(II.CANDIDATE,(e=>{if(this._p2pChannel instanceof pU){const{candidate:t,direction:n}=e;this._p2pChannel.addRemoteCandidate(t,n)}})),this._p2pChannel.on(pI.RequestP2PRestartICE,(async(e,t,n)=>{try{const{direction:n}=e;t(await this._gateway.sendExtensionMessage(II.RESTART_ICE,e,n===ET.SEND_ONLY))}catch(e){n(e)}})),this._p2pChannel.on(pI.LocalCandidate,(e=>{this._gateway.sendExtensionMessage(II.CANDIDATE,JSON.stringify(e),!0)})),this._p2pChannel.on(pI.RequestP2PMuteLocal,(async(e,t,n)=>{try{await this._gateway.sendExtensionMessage(II.CONTROL,e,!0),t()}catch(e){n(e)}})),this._p2pChannel.on(pI.RequestP2PUnmuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===Gy.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(pI.RequestP2PMuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===Gy.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(pI.StateChange,((e,t)=>{t===dI.Connected&&this._p2pChannel.republish()}))}_handleP2PChannelEvents(){this._p2pChannel.on(pI.RequestMuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===Gy.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(pI.RequestUnmuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===Gy.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(pI.RequestRePublish,((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),this._p2pChannel.on(pI.RequestRePublishDataChannel,((e,t,n)=>{cy.all(e.map((async e=>{await this._p2pChannel.publishDataChannel([e]);const t={streamId:e.id,ordered:e.ordered,maxRetransmits:e.maxRetransmits,metadata:e.metadata,channelId:e._originDataChannelId};try{await this._gateway.publishDataChannel(this._uid,t,!0)}catch(e){if(e.code!==Gy.DISCONNECT_P2P)throw e}}))).then(t).catch(n)})),this._p2pChannel.on(pI.RequestReSubscribe,(async(e,t,n)=>{try{for(const{user:t,kind:n}of e)n===aI.VIDEO?await this.subscribe(t,"video"):await this.subscribe(t,"audio");t()}catch(e){n(e)}})),this._p2pChannel.on(pI.RequestUpload,((e,t)=>{this._gateway.upload(e,t)})),this._p2pChannel.on(pI.RequestUploadStats,(e=>{this._gateway.uploadWRTCStats(e)})),this._p2pChannel.on(pI.MediaReconnectStart,(e=>{this.safeEmit(gE.MEDIA_RECONNECT_START,e)})),this._p2pChannel.on(pI.MediaReconnectEnd,(e=>{this.safeEmit(gE.MEDIA_RECONNECT_END,e)})),this._p2pChannel.on(pI.NeedSignalRTT,(e=>{e(this._gateway.getSignalRTT())})),this._p2pChannel.on(pI.RequestRestartICE,(async e=>{if(this._p2pChannel instanceof pU)return;const t=await this._p2pChannel.restartICE(e),n=await t.next();if(n.done)return;const r=n.value;let i;try{i=await this._gateway.restartICE({iceParameters:r})}catch(e){return void t.throw(e)}const{iceParameters:o}=function(e){const t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(i);await t.next({remoteIceParameters:o})})),this._p2pChannel.on(pI.RequestReconnect,(async()=>{this._gateway.reconnect()})),this._p2pChannel.on(pI.RequestReconnectPC,(async()=>{var e;const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:i,gatewayAddress:o}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:n,rtpCapabilities:r}),{dtlsParameters:s,iceParameters:a,candidates:c,rtpCapabilities:l,setup:u,cname:d}=bj(i,o);await this._p2pChannel.connect(a,s,c,l,u,d),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()})),this._p2pChannel.on(pI.RequestUnpublishForReconnectPC,(async(e,t,n)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):n()})),this._p2pChannel.on(pI.P2PLost,(()=>{this.safeEmit(gE.P2P_LOST,this.store.uid)})),this._p2pChannel.on(pI.UpdateVideoEncoder,(e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)})),this._p2pChannel.on(pI.ConnectionTypeChange,(e=>{this.safeEmit(gE.IS_USING_CLOUD_PROXY,e)})),this._p2pChannel.on(pI.RequestLowStreamParameter,(e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(pI.QueryClientConnectionState,(e=>{e(this.connectionState)}))}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if("CONNECTED"!==this.connectionState||!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new kT(Gy.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!e)throw new kT(Gy.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!e.inspectType||!Array.isArray(e.inspectType))throw new kT(Gy.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const t=[...new Set(e.inspectType)];t.forEach((e=>{var t;if(!Or(t=["supervise","moderation"]).call(t,e))throw new kT(Gy.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(e," is not a valid inspect type."))})),e.inspectType=t}if(e&&e.extraInfo&&e.extraInfo.length>1024)throw new kT(Gy.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const t=new FF(e);this._inspect=t,this.handleVideoInspectEvents(this._inspect),await t.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},m_)}catch(e){throw Array.isArray(e)?e[0]:e}}async disableContentInspect(){if(!this._inspect)throw new kT(Gy.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(Yy(e,"enabled"),e){if(!t)throw new kT(Gy.INVALID_PARAMS,"[".concat(this._clientId,"] config is necessary"));if(Ky(t.interval,"interval",1e3,1/0),t&&t.extraInfo&&t.extraInfo.length>1024)throw new kT(Gy.INVALID_PARAMS,"[".concat(this._clientId,"] config.extraInfo length cannot exceed 1024 bytes"));if(t&&t.vendor&&t.vendor.length>1024)throw new kT(Gy.INVALID_PARAMS,"[".concat(this._clientId,"] config.vendor length cannot exceed 1024 bytes"));if("CONNECTED"!==this.connectionState||!this._joinInfo)throw new kT(Gy.INVALID_OPERATION,"[".concat(this._clientId,'] can not enable image moderation, not joined"'));try{if(this._moderation)return void this._moderation.updateConfig(t);const e=new yz(t);this._moderation=e,this.handleImageModerationEvents(this._moderation),await e.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},m_)}catch(e){throw Array.isArray(e)?e[0]:e}}else{if(!this._moderation)throw new kT(Gy.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}}setP2PTransport(e){if(function(e){qy(e,"transport",["default","auto","relay","sd-rtn"])}(e),"p2p"!==this.mode)throw new kT(Gy.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,BS.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}handleImageModerationEvents(e){e.on(SI.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(gE.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,n),t===bI.CONNECTED){if("CONNECTED"!==this.connectionState)throw this.setImageModeration(!1),new kT(Gy.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}})),e.on(SI.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}handleVideoInspectEvents(e){e.on(gI.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(gE.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,n),n===fI.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.safeEmit(gE.CONTENT_INSPECT_ERROR,new kT(Gy.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}})),e.on(gI.INSPECT_RESULT,((e,t)=>{var n;if((null==t?void 0:t.code)===Gy.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return BS.debug("Stop inspect content because that has left channel"),null==this||null===(n=this._inspect)||void 0===n||n.close(),void(this._inspect=void 0);this.safeEmit(gE.CONTENT_INSPECT_RESULT,e,t)})),e.on(gI.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}getJoinChannelServiceRecords(){return BS.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){Yy(e,"enabled"),_S("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}}MT([$S(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",cy)],Dz.prototype,"leave",null),MT([$S({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof uC))return[t];t=[t]}return t.map((e=>e?Object(e).toString():"null"))}}),DT("design:type",Function),DT("design:paramtypes",[Object,Boolean]),DT("design:returntype",cy)],Dz.prototype,"publish",null),MT([$S({argsMap:(e,t)=>(t||(t=[]),t instanceof aD?[t.getChannelId()]:(Array.isArray(t)||(t=[t]),t.map((e=>e.getTrackId()))))}),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],Dz.prototype,"unpublish",null),MT([$S({argsMap:(e,t,n,r)=>[t.uid,n,r]}),DT("design:type",Function),DT("design:paramtypes",[oU,String,Number]),DT("design:returntype",cy)],Dz.prototype,"subscribe",null),MT([$S({argsMap:(e,t,n)=>[t,n]}),DT("design:type",Function),DT("design:paramtypes",[Object,String]),DT("design:returntype",cy)],Dz.prototype,"presubscribe",null),MT([$S({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return[null==t?void 0:t.uid,n]}))}),DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],Dz.prototype,"massSubscribe",null),MT([$S({argsMap:(e,t,n,r)=>[t.uid,n,r]}),DT("design:type",Function),DT("design:paramtypes",[oU,String,Number]),DT("design:returntype",cy)],Dz.prototype,"unsubscribe",null),MT([$S({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return{uid:null==t?void 0:t.uid,mediaType:n}}))}),DT("design:type",Function),DT("design:paramtypes",[Array]),DT("design:returntype",cy)],Dz.prototype,"massUnsubscribe",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],Dz.prototype,"setLowStreamParameter",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",cy)],Dz.prototype,"enableDualStream",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",cy)],Dz.prototype,"disableDualStream",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[String,Object]),DT("design:returntype",cy)],Dz.prototype,"setClientRole",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[String,Boolean]),DT("design:returntype",void 0)],Dz.prototype,"setProxyServer",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Object,Boolean]),DT("design:returntype",void 0)],Dz.prototype,"setTurnServer",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",void 0)],Dz.prototype,"setLicense",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Number]),DT("design:returntype",void 0)],Dz.prototype,"startProxyServer",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],Dz.prototype,"stopProxyServer",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",void 0)],Dz.prototype,"setLocalAccessPointsV2",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Array,String]),DT("design:returntype",void 0)],Dz.prototype,"setLocalAccessPoints",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Number]),DT("design:returntype",cy)],Dz.prototype,"setRemoteDefaultVideoStreamType",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Object,Number]),DT("design:returntype",cy)],Dz.prototype,"setRemoteVideoStreamType",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Object,Number]),DT("design:returntype",cy)],Dz.prototype,"setStreamFallbackOption",null),MT([$S({argsMap:(e,t)=>[t]}),DT("design:type",Function),DT("design:paramtypes",[String,String,Uint8Array,Boolean]),DT("design:returntype",void 0)],Dz.prototype,"setEncryptionConfig",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],Dz.prototype,"renewToken",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",void 0)],Dz.prototype,"enableAudioVolumeIndicator",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[String,Boolean]),DT("design:returntype",cy)],Dz.prototype,"startLiveStreaming",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],Dz.prototype,"setLiveTranscoding",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",cy)],Dz.prototype,"stopLiveStreaming",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[String,Object]),DT("design:returntype",cy)],Dz.prototype,"addInjectStreamUrl",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",cy)],Dz.prototype,"removeInjectStreamUrl",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[TU]),DT("design:returntype",cy)],Dz.prototype,"startChannelMediaRelay",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[TU]),DT("design:returntype",cy)],Dz.prototype,"updateChannelMediaRelay",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",cy)],Dz.prototype,"stopChannelMediaRelay",null),MT([$S({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],Dz.prototype,"sendCustomReportMessage",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Object,Object]),DT("design:returntype",cy)],Dz.prototype,"pickSVCLayer",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],Dz.prototype,"setRTMConfig",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Object]),DT("design:returntype",cy)],Dz.prototype,"enableContentInspect",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",cy)],Dz.prototype,"disableContentInspect",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Boolean,Object]),DT("design:returntype",cy)],Dz.prototype,"setImageModeration",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[String]),DT("design:returntype",void 0)],Dz.prototype,"setP2PTransport",null),MT([$S({reportResult:!0}),DT("design:type",Function),DT("design:paramtypes",[]),DT("design:returntype",Array)],Dz.prototype,"getJoinChannelServiceRecords",null),MT([$S(),DT("design:type",Function),DT("design:paramtypes",[Boolean]),DT("design:returntype",cy)],Dz.prototype,"setPublishAudioFilterEnabled",null);class kz{constructor(e,t){op(this,"id",0),op(this,"element",void 0),op(this,"peerPair",void 0),op(this,"context",void 0),op(this,"audioPlayerElement",void 0),op(this,"audioTrack",void 0),kz.count+=1,this.id=kz.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const n="offer"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(n),"complete"===e.iceGatheringState?e.localDescription:new cy((t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}}))},t=async(e,t)=>await e.setRemoteDescription(t);try{const n=await e(this.peerPair[0],"offer");await t(this.peerPair[1],n);const r=await e(this.peerPair[1],"answer");await t(this.peerPair[0],r)}catch(e){throw new kT(Gy.LOCAL_AEC_ERROR,e.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(t)}catch(e){throw new kT(Gy.LOCAL_AEC_ERROR,e.toString()).print()}if(!t)throw new kT(Gy.LOCAL_AEC_ERROR,"no dest node when local aec").print();const n=t.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){BS.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((e=>{e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0}}op(kz,"count",0);const xz=window.AudioContext||window.webkitAudioContext;class Lz{constructor(){op(this,"units",[]),op(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return BS.debug("the system does not need to process local aec"),-1;this.context||(this.context=new xz);let t=this.units.find((t=>t&&t.getElement()===e));return t||(t=new kz(e,this.context),this.units.push(t)),t.startEchoCancellation(),BS.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return _y().name!==my.SAFARI}}MT([$S({report:eT}),DT("design:type",Function),DT("design:paramtypes",[HTMLAudioElement]),DT("design:returntype",Number)],Lz.prototype,"processExternalMediaAEC",null);const Pz=new Lz;function jz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jz(Object(n),!0).forEach((function(t){op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Fz=window||document;function zz(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Fz)return;const n=Vz._cspEventHandlerPointer;if(n&&t)return void console.error(n,t);const r=e=>{if(!(e&&e.blockedURI&&(Vz.onSecurityPolicyViolation||Vz.getListeners(EI.SECURITY_POLICY_VIOLATION).length>0)))return;const t=e.blockedURI;bS("CSP_DETECTED_HOSTNAME_LIST").some((e=>Or(t).call(t,e)))&&(Vz.onSecurityPolicyViolation&&"function"==typeof Vz.onSecurityPolicyViolation&&Vz.onSecurityPolicyViolation(e),Vz.getListeners(EI.SECURITY_POLICY_VIOLATION).length>0&&Vz.safeEmit(EI.SECURITY_POLICY_VIOLATION,e))};n&&Fz.removeEventListener("securitypolicyviolation",n),(t||e&&"function"==typeof e||Vz.getListeners(EI.SECURITY_POLICY_VIOLATION).length>0)&&Fz.addEventListener("securitypolicyviolation",r),Vz._cspEventHandlerPointer=r}_S("PROCESS_ID","process-".concat(r_(8,""),"-").concat(r_(4,""),"-").concat(r_(4,""),"-").concat(r_(4,""),"-").concat(r_(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void BS.error("Error loading sdk config",e.message)}if(e)try{const t=JSON.parse(window.atob(e)),n=Date.now();BS.debug("Loading global parameters from cache",t),Object.keys(t).forEach((e=>{if(Object.prototype.hasOwnProperty.call(ES,e)){const{value:r,expires:i}=t[e];if(i&&i<=n)return;SS[e]=r,ES[e]=r}}))}catch(t){BS.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(SS.AREAS)&&SS.AREAS.length>0&&QN(SS.AREAS,!0);const Bz=(e,t,n)=>{BS.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),_S(e,t,n)},Vz=function(e){const t=new lE,n=e,r={getListeners:t.getListeners.bind(t),on:(e,n)=>(function(e,t){e===EI.SECURITY_POLICY_VIOLATION&&zz(t,!0)}(e,n),t.on.bind(t)(e,n)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return Uz(Uz({},n),r)}({__TRACK_LIST__:Uw,VERSION:mS,BUILD:yS,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:Bz,getParameter:bS,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;t.addTransceiver("video",{direction:"recvonly"}),t.addTransceiver("audio",{direction:"recvonly"});const n=(await t.createOffer()).sdp;if(!n)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ H265/i)&&t.video.push("H265"),e.match(/ opus/i)&&t.audio.push("OPUS"),e.match(/ PCMU/i)&&t.audio.push("PCMU"),e.match(/ PCMA/i)&&t.audio.push("PCMA"),e.match(/ G722/i)&&t.audio.push("G722"),t}(n)}catch(e){throw new kT(Gy.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return e},checkSystemRequirements:function(){const e=eT.reportApiInvoke(null,{name:pE.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:hE.TRACER});let t=!1;try{const e=window.RTCPeerConnection,n=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket;t=!!(e&&n&&r)}catch(e){return BS.error("check system requirement failed: ",e),!1}let n=!1;const r=_y();r.name===my.CHROME&&Number(r.version)>=58&&(!Ny()||Iy())&&(n=!0),r.name===my.FIREFOX&&Number(r.version)>=56&&(n=!0),r.name===my.OPERA&&Number(r.version)>=45&&(n=!0),r.name===my.SAFARI&&Number(r.version)>=11&&(n=!0),(Fy()||_y().name===my.QQ)&&(n=!0),BS.debug("checkSystemRequirements, api:",t,"browser",n);const i=t&&n;return e.onSuccess(i),i},getDevices:function(e){return xC.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return xC.getRecordingDevices(e)},getCameras:function(e){return xC.getCamerasDevices(e)},getElectronScreenSources:NC,getPlaybackDevices:function(e){return xC.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const n=eT.reportApiInvoke(null,{name:pE.CREATE_CLIENT,options:[t],tag:hE.TRACER});try{!function(e){qy(e.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),qy(e.mode,"config.mode",["rtc","live","p2p"]),void 0!==e.audioCodec&&qy(e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==e.proxyServer&&Jy(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&SE(e.turnServer),void 0!==e.httpRetryConfig&&_E(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&_E(e.websocketRetryConfig)}(t)}catch(e){throw n.onError(e),e}return Az()||("vp9"===t.codec&&(t.codec="vp8",BS.debug("browser not support vp9, force use vp8")),_S("UNSUPPORTED_VIDEO_CODEC",["vp9"])),void 0===t.audioCodec&&(t.audioCodec="opus"),n.onSuccess(),new Dz(Mz(Mz({forceWaitGatewayResponse:!0},t),{},{role:Or(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=eT.reportApiInvoke(null,{tag:hE.TRACER,name:pE.CREATE_CAM_VIDEO_TRACK,options:[IO({},e)]}),n=iO(e),r=r_(8,"track-cam-");let i=null;const o="720p_auto"===e.encoderConfig;BS.info("start create camera video track with config",JSON.stringify(e),"trackId",r);try{i=(await RC({video:n},r)).getVideoTracks()[0]||null}catch(e){throw t.onError(e),e}if(!i){const e=new Wy(Gy.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw(BS)}e.optimizationMode&&NO(r,i,e,kw(e.encoderConfig));const s=new SO(i,e,n,e.scalabiltyMode?Lw(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r);return o&&s.startMonitorStats(),t.onSuccess(s.getTrackId()),BS.info("create camera video success, trackId:",r),s},createCustomVideoTrack:function(e){const t=eT.reportApiInvoke(null,{tag:hE.TRACER,name:pE.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new bO(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?Lw(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r_(8,"track-cus-"),[Bw.CUSTOM_TRACK]);return t.onSuccess(n.getTrackId()),BS.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const n=eT.reportApiInvoke(null,{tag:hE.TRACER,name:pE.CREATE_SCREEN_VIDEO_TRACK,options:[IO({},e),t]}),r="720p_auto"===e.encoderConfig;e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const i=function(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&wy()&&(t.extensionId=e.extensionId);const{displaySurface:n,selfBrowserSurface:r,surfaceSwitching:i,systemAudio:o}=e;(Ry(107)||My(107)||Dy(93))&&(n&&(qy(n,"displaySurface",["browser","window","monitor"]),t.displaySurface=n),r?(qy(r,"selfBrowserSurface",["exclude","include"]),t.selfBrowserSurface=r):t.selfBrowserSurface="include",i&&(qy(i,"surfaceSwitching",["exclude","include"]),t.surfaceSwitching=i)),(Ry(105)||My(105)||Dy(91))&&o&&(qy(o,"systemAudio",["exclude","include"]),t.systemAudio=o),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const s=e.encoderConfig?xw(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:s?s.width:void 0,maxHeight:s?s.height:void 0},s&&(s.frameRate&&("number"==typeof s.frameRate?(t.mandatory.maxFrameRate=s.frameRate,t.mandatory.minFrameRate=s.frameRate):(t.mandatory.maxFrameRate=s.frameRate.max||s.frameRate.ideal||s.frameRate.exact||void 0,t.mandatory.minFrameRate=s.frameRate.min||s.frameRate.ideal||s.frameRate.exact||void 0),t.frameRate=s.frameRate),s.width&&(t.width=s.width),s.height&&(t.height=s.height)),t}(e),o=r_(8,"track-scr-v-");let s=null,a=null;const c=Tw();if(!c.supportShareAudio&&"enable"===t){const e=new Wy(Gy.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return n.onError(e),e.throw(BS)}BS.info("start create screen video track with config",e,"withAudio",t,"trackId",o);try{const e=await RC({screen:i,screenAudio:"auto"===t?c.supportShareAudio:"enable"===t},o);s=e.getVideoTracks()[0]||null,a=e.getAudioTracks()[0]||null}catch(e){throw n.onError(e),e}if(!s){const e=new Wy(Gy.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(e),e.throw(BS)}if(!a&&"enable"===t){s&&s.stop();const e=new Wy(Gy.SHARE_AUDIO_NOT_ALLOWED);return n.onError(e),e.throw(BS)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(NO(o,s,e,e.encoderConfig&&xw(e.encoderConfig)||void 0),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const l=new bO(s,e.encoderConfig?xw(e.encoderConfig):{},e.scalabiltyMode?Lw(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,o,[Bw.SCREEN_TRACK]);if(r&&l.startMonitorStats(),!a)return n.onSuccess(l.getTrackId()),BS.info("create screen video track success","video:",l.getTrackId()),l;const u=new eO(a,void 0,r_(8,"track-scr-a-"),!1);return n.onSuccess([l.getTrackId(),u.getTrackId()]),BS.info("create screen video track success","video:",l.getTrackId(),"audio:",u.getTrackId()),[l,u]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=eT.reportApiInvoke(null,{tag:hE.TRACER,name:pE.CREATE_MIC_AND_CAM_TRACKS,options:[e,t]}),r="720p_auto"===t.encoderConfig,i=iO(t),o=oO(e),s=r_(8,"track-mic-"),a=r_(8,"track-cam-");let c=null,l=null;BS.info("start create camera video track(".concat(a,") and microphone audio track(").concat(s,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{const e=await RC({audio:o,video:i},"".concat(s,"-").concat(a));c=e.getAudioTracks()[0],l=e.getVideoTracks()[0]}catch(e){throw n.onError(e),e}if(!c||!l){const e=new Wy(Gy.UNEXPECTED_ERROR,"can not find tracks in media stream");return n.onError(e),e.throw(BS)}t.optimizationMode&&NO(a,l,t,kw(t.encoderConfig));const u=new tO(c,e,o,s),d=new SO(l,t,i,t.scalabiltyMode?Lw(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,a);return r&&d.startMonitorStats(),n.onSuccess([u.getTrackId(),d.getTrackId()]),BS.info("create camera video track(".concat(a,") and microphone audio track(").concat(s,") success")),[u,d]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=eT.reportApiInvoke(null,{tag:hE.TRACER,name:pE.CREATE_MIC_AUDIO_TRACK,options:[e]}),n=oO(e),r=r_(8,"track-mic-");let i=null;BS.info("start create microphone audio track with config",JSON.stringify(e),"trackId",r);try{i=(await RC({audio:n},r)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}if(!i){const e=new Wy(Gy.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw(BS)}const o=new tO(i,e,n,r);return t.onSuccess(o.getTrackId()),BS.info("create microphone audio track success, trackId:",r),o},createCustomAudioTrack:function(e){const t=eT.reportApiInvoke(null,{tag:hE.TRACER,name:pE.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new eO(e.mediaStreamTrack,e.encoderConfig?jw(e.encoderConfig):{},r_(8,"track-cus-"),!1);return BS.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:async function(e){var t;const{cacheOnlineFile:n,encoderConfig:r}=e;let{source:i}=e;const o={source:i instanceof AudioBuffer?"AudioBuffer":i instanceof File?null!==(t=File.name)&&void 0!==t?t:"File":i,cacheOnlineFile:n,encoderConfig:r},s=eT.reportApiInvoke(null,{tag:hE.TRACER,name:pE.CREATE_BUFFER_AUDIO_TRACK,options:[o]});if(bS("DISABLE_WEBAUDIO"))throw new Wy(Gy.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const a=r_(8,"track-buf-");BS.info("start create buffer source audio track with config",JSON.stringify(o),"trackId",a);const c=i;if(!(i instanceof AudioBuffer))try{i=await cO(i,n)}catch(e){return s.onError(e),e.throw(BS)}const l=new sO(i),u=new nO(c,l,r?jw(r):{},a);return BS.info("create buffer source audio track success, trackId:",a),s.onSuccess(u.getTrackId()),u},setAppType:function(e){if(BS.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw BS.debug("Invalid appType"),new kT(Gy.INVALID_PARAMS,"invalid app type",e);_S("APP_TYPE",Math.floor(e))},setLogLevel:function(e){BS.setLogLevel(e)},enableLogUpload:function(){bS("USE_NEW_LOG")?_S("UPLOAD_LOG",!0):BS.enableLogUpload()},disableLogUpload:function(){bS("USE_NEW_LOG")?_S("UPLOAD_LOG",!1):BS.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new TU},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=eT.reportApiInvoke(null,{tag:hE.TRACER,name:pE.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof eO||e instanceof RO)){const e=new kT(Gy.INVALID_TRACK,"the parameter is not a audio track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof eO?e.getTrackLabel():"remote_track",i=e.getVolumeLevel();let o=i,s=i;const a=Date.now();return new cy((i=>{const c=setInterval((()=>{const l=e.getVolumeLevel();o=l>o?l:o,s=l<s?l:s;const u=o-s>1e-4,d=Date.now()-a;if(u||d>t){clearInterval(c);const t=u,s={duration:d,deviceLabel:r,maxVolumeLevel:o,result:t};BS.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(s))),n.onSuccess(s),i(t)}}),200)}))},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=eT.reportApiInvoke(null,{tag:hE.TRACER,name:pE.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof bO||e instanceof AO)){const e=new kT(Gy.INVALID_TRACK,"the parameter is not a video track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof bO?e.getTrackLabel():"remote_track",i=e.getMediaStreamTrack(!0),o=document.createElement("video");o.style.width="1px",o.style.height="1px",o.setAttribute("muted",""),o.muted=!0,o.setAttribute("playsinline",""),o.controls=!1,(Cy()||Ty())&&(o.style.opacity="0.01",o.style.position="fixed",o.style.left="0",o.style.top="0",document.body.appendChild(o)),o.srcObject=new MediaStream([i]),o.play();const s=document.createElement("canvas");s.width=160,s.height=120;let a=0,c=0;try{const e=Date.now();a=await function(e,t,n,r){let i,o=0,s=null;return new cy(((a,c)=>{function l(){o>r&&i&&(i(),a(o));const t=n.getContext("2d");if(!t){const e=new kT(Gy.UNEXPECTED_ERROR,"can not get canvas 2d context.");return BS.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const l=t.getImageData(0,0,n.width,n.height),u=Math.floor(l.data.length/3);if(s){for(let e=0;e<u;e+=3)if(l.data[e]!==s[e])return o+=1,void(s=l.data);s=l.data}else s=l.data}setTimeout((()=>{i&&(i(),a(o))}),t),i=EC((()=>{l()}),30)}))}(o,t,s,4),c=Date.now()-e}catch(e){throw n.onError(e),e}Oz===my.SAFARI&&(o.pause(),o.remove()),o.srcObject=null;const l=a>4,u={duration:c,changedPicNum:a,deviceLabel:r,result:l};return BS.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(u))),n.onSuccess(u),l},setArea:QN,audioElementPlayCenter:VC,resumeAudioContext:function(){VC.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){Pz.processExternalMediaAEC(e)},registerExtensions:function(e){const t=bS("PLUGIN_INFO")||[];e.forEach((e=>{"name"in e&&!Or(t).call(t,e.name)&&t.push(e.name);const n=e;n.__registered__=!0,n.logger.hookLog=BS.extLog,n.reporter.hookApiInvoke=eT.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach((e=>{n.parameters[e]=bS(e)}))})),Bz("PLUGIN_INFO",t)},ChannelMediaRelayError:KT,ChannelMediaRelayEvent:YT,ChannelMediaRelayState:qT,RemoteStreamFallbackType:Gw,RemoteStreamType:Hw,ConnectionDisconnectedReason:mE,AudienceLatencyLevelType:fE,AREAS:eI});return Object.defineProperties(Vz,{onAudioAutoplayFailed:{get:()=>PC.onAudioAutoplayFailed,set:e=>{PC.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>PC.onAutoplayFailed,set:e=>{PC.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>Vz._onSecurityPolicyViolation,set(e){Vz._onSecurityPolicyViolation=e,zz(e)}},__CLIENT_LIST__:{get:()=>bS("SHOW_GLOBAL_CLIENT_LIST")?iT:[]}}),xC.on(iC.CAMERA_DEVICE_CHANGED,(e=>{BS.info("camera device changed",JSON.stringify(e)),Vz.onCameraChanged&&Vz.onCameraChanged(e),Vz.safeEmit(EI.CAMERA_CHANGED,e)})),xC.on(iC.RECORDING_DEVICE_CHANGED,(e=>{BS.info("microphone device changed",JSON.stringify(e)),Vz.onMicrophoneChanged&&Vz.onMicrophoneChanged(e),Vz.safeEmit(EI.MICROPHONE_CHANGED,e)})),xC.on(iC.PLAYOUT_DEVICE_CHANGED,(e=>{BS.debug("playout device changed",JSON.stringify(e)),Vz.onPlaybackDeviceChanged&&Vz.onPlaybackDeviceChanged(e),Vz.safeEmit(EI.PLAYBACK_DEVICE_CHANGED,e)})),VC.onAutoplayFailed=()=>{BS.info("detect audio element autoplay failed"),PC.onAudioAutoplayFailed&&PC.onAudioAutoplayFailed()},fC.on("autoplay-failed",(()=>{BS.info("detect webaudio autoplay failed"),PC.onAudioAutoplayFailed&&PC.onAudioAutoplayFailed(),Vz.safeEmit(EI.AUTOPLAY_FAILED)})),fC.on(Iw.STATE_CHANGE,((e,t)=>{BS.info("audio context state changed: ".concat(t," => ").concat(e)),Vz.onAudioContextStateChanged&&Vz.onAudioContextStateChanged(e,t),Vz.safeEmit(EI.AUDIO_CONTEXT_STATE_CHANGED,e,t)})),OE.on(EE.NETWORK_STATE_CHANGE,((e,t)=>{BS.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))})),window&&(window.__ARTC__=Vz),Vz}()},1604:module=>{var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=96)}([function(e,t,n){"use strict";n.r(t);var r,i=n(11),o=n.n(i),s=n(14),a=n(2),c=n(1),l=n(48),u=n.n(l),d=n(49),p=n.n(d),h=new Array(32).fill(void 0);function f(e){return h[e]}h.push(void 0,null,!0,!1);var m=h.length;function g(e){var t=f(e);return function(e){e<36||(h[e]=m,m=e)}(e),t}var v=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});v.decode();var y=null;function E(){return null!==y&&y.buffer===r.memory.buffer||(y=new Uint8Array(r.memory.buffer)),y}function _(e,t){return v.decode(E().subarray(e,e+t))}function b(e){m===h.length&&h.push(h.length+1);var t=m;return m=h[t],h[t]=e,t}var S=0,T=new TextEncoder("utf-8"),I="function"==typeof T.encodeInto?function(e,t){return T.encodeInto(e,t)}:function(e,t){var n=T.encode(e);return t.set(n),{read:e.length,written:n.length}},N=null;function w(){return null!==N&&N.buffer===r.memory.buffer||(N=new Int32Array(r.memory.buffer)),N}var C,O=function(){function e(){u()(this,e)}return p()(e,[{key:"free",value:function(){var e=this.ptr;this.ptr=0,r.__wbg_signmanager_free(e)}},{key:"get_digest",value:function(e){return g(r.signmanager_get_digest(this.ptr,b(e)))}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}},{key:"new",value:function(){var t=r.signmanager_new();return e.__wrap(t)}}]),e}(),A=!1,R=null,M=0,D="free",k=[],x=[],L=0;(R?Promise.resolve(R):new Promise((function(e){A||r||function e(){var t={wbg:{}};t.wbg.__wbindgen_object_drop_ref=function(e){g(e)},t.wbg.__wbindgen_string_new=function(e,t){return b(_(e,t))},t.wbg.__wbindgen_string_get=function(e,t){var n=f(t),i="string"==typeof n?n:void 0,o=null==i?0:function(e,t,n){if(void 0===n){var r=T.encode(e),i=t(r.length);return E().subarray(i,i+r.length).set(r),S=r.length,i}for(var o=e.length,s=(i=t(o),E()),a=0;a<o;a++){var c=e.charCodeAt(a);if(c>127)break;s[i+a]=c}if(a!==o){0!==a&&(e=e.slice(a)),i=n(i,o,o=a+3*e.length);var l=E().subarray(i+a,i+o);a+=I(e,l).written}return S=a,i}(i,r.__wbindgen_malloc,r.__wbindgen_realloc),s=S;w()[e/4+1]=s,w()[e/4+0]=o},t.wbg.__wbindgen_throw=function(e,t){throw new Error(_(e,t))};for(var n=Uint8Array.from(atob("55ZBgM/2Bzm2JGhNn//ljJsSorhWUYE66a1Hf8O7pfQGR2zfol8qRP6CDhsi3iG7nFZu9stSyPq/qu2Rr2w8QkTGP6Gm2cg3J5qsQgq5bcHA9mDpGv/b24uEwsixZVl1eGkdV4SB/6ayw2v48hLmNA+w5UlnTCiWwerzESQPidpSUMbamXL3pU815EQm12GhhZ9aWzo568gdZvXevBc/WHfFKQSuTgWva4e4eSmW7UxpH8sY4HlDsCTMu0WwEB8B95XsZwOp3GLgfOQmJBw036DgIKU+XGn4KpIEq77WE/h6R7sZKsFUp+u+2cDnW7IPNe7xfd9areFo0EUh0/9K9CqxUkLqMB5hlgS1fwQHRzKPhQ7gALyc6HwMCPooS0M1NrzjdfH3vUn0PeQ1GBlnrnXgiu8TunfHg5TcbBfPEbxbyiiow1Np+VEBlHNh00PiAWyu024NHaPbDGfMtzu4WF02fgkh8Pxb7bCSpCZndjTytQgAzfZxk2bbe6NoHHFnsviqYzHVpxoPEk7icHRWcZC28d2muthq673KCMQay1fJcPqSTuYhWUZS5eylIguT33lP+TBbOWQI8KtCzBN5FzqILfKzRkzrJ3L192BUF8SILdwmriv10HU9ZlQAyQA1VdegnzOl/dYk2GGsB3724y7w/7aJLHJzEfwrfIzFd5CoAft7ct+zQW2G4Wm2kpoz6uJfgrNyykQgwCO6pkPy1ADrBUuJon9ySjhgcFru6AKa99wTlIhzBw3FKFt9Aa1/1KWWy7W1wAIGzRTs/7rLXRkKFjNqGVXBdoVNTpHFtfEFsuX0X98ISr0Bennlx0h2Yl/CGNb5Kc7i3bio1XJHX24avcMsEAwfdfskCki4/dkStn7QC97YJC3z+7gD84IiEEeGcnn7gHJyeALr0ssbqDUcKqxEyheyFs9FToJziLB+eYw6nMQLmYTrQyrg3b+3YBdgx7pzNEDSyz3tmaPaikwcLSyB/Igo6U/oP/fS2TZLtmN03m4iS76YrDJAgI+2W1GboabuixVcLdxm6SQ4CzUnHSPl1knhcGhW/+OcKa53tB5j5C4wEpiENv6T9PUu4K0YwtEAqFbd/eN2wVAYCKn/nlVA8uiESxCfgs0411mRFk4i1pixJLPP5AFPG9QFZnj6X19TqmhmIhl8D6Q1rOvPCqPZV/z04HjayX4qPzPzP/5NVilN/sHhQe7ulriGmU/3rj5QEuiOymsL7EdCQMc/4mXDPdVrDBfbt6dnv11oLYGmqOP1oSBj02FtsmYrMn9pRg7HJoCh86jAnzuOYn4tGnQ4gw/89sb64NAXcoIbTIjyiHBAQCCK2Yn4I/fNF10rkQlvSvkpqLG2eYpJmpWrcouNDEUtJFR607oNraLdmUKyLc1g7SNpS+ofp1FL6rua/HFSrb5kTF2Vcy2gl+6MACbFRChKoP/un7IbYJuOima/JWFZcs/MXokIx+ijuqjMtVKaYRTzNI5ncPa2y/EXTNdUUFpMhbE7sa39Uoh6Hci/viXy2KFTNbiw+BkWOPnyOr04LjIYKlJ8ud/KvjuvNUGQOHJvj6tpZJxj97tr0OrgZCAxSHGU5JQfqEd/U0QfzGM8Wh3zdsnd9LhoIIRJAtyA2PmjwJk4zTxeYlgwPqAVTU3+9bA1QD+jLZZ3Ffk3MRq+Ar2RT8YN6ASR4bItt3omBj0LJe0zeGY3OzfhljL6LA1m4+IUp+CzeWo0aEjnvRk3iCJeajgdC+NUGB5qh8PWKtBeC58woavnRjvRNphXS4b9M7Aymcfq26B2YY2lS+wLf763OnGJlVdV/srgyAUJJZjarxom4zrYy23kLFB8zFzWuwSMue5Xm1YWape91JGDuRLIctrJWU47/XfLm6Zgei4xOwq1RcjikGuaZtDwcFg9aKtO+JOGJsCjy9AiPnmt+rmdX83GsT3KtTETnLv6ZQcnGtmt4H8AjFgGYePdQc40cj8VAOV8NCLspyW5w63b3g37GXJrzjm9Fym3fh27psjo5RuTs7XCSrNENxKm9jCcXPqWxyuXJSn6dhdWnw5SAnUjixXviWS4HsnYjw4Xt4cSwkqCB9naLstVXt5D2HgG4fzHFNHvnETft0mrhU81IBDTSyNFdDvFEX8cifoc6FcNq7pzXlotl2ZS1FIzNXddZrdXpBNYZPV52gtCok6ePpUR/Y8jyJpE9P3q8dmFVivVGgmKTcBKMDDbzeOfl4MpOGBtBX/Lab/kzqG42sTyOyGUyOoFXYGMUWJ33GPI2KNa/mW8zVl+imshfbj7PiK1qRUn74KjAkH4wjKnu50AONYUaiveSdwnEc1zCjZSJ3dmBKSxhWAcO2PdHBg5m9+JCiPGCVfK9dzoM8Bm7xx9noJiqt4hNiVa5di1Fd1JRN4rnd1DbKglKpAVSoqvJPxmuyH56TFE4BQjhfKbDMZezQJqx+KXDiW1JWGeDYaPVBWPYeZX6STIzC/DjS7UFlqoKgGGAGP17x8wmMRE6O/axG5jDzloCGxCmrymT0ZGCh4g54O1iDYUtmJr7Bo1d+H9RQj2Y10BxcMkLFTIZVjm9e3vtIbeRx0OdXE1Ou37J/WeJZyPXn1fszvp/KonCqVnt862LrxfoB/0sF5gk4Y/f6LVneU5hun9/V1OVre9XrnDBhcVaQa9Ye6gs8sHW9HCNchaFbkUpxSiyxVEFZIlbejbjSPFlkYOLhtQHduwZWRHWA9akqykJNG3PKvOZAaJG5nWQq8+e4K0JF/AXTKIIr4J7zDt8ZR4xb9T2gxjl1nfqzidMRIY5B4rkw0oetta+j8rqkFpTEGA+hU/tw7bDtpkPYvCguwncnCjwULNFT9I9jXx3H4Ws3WWMCit29F7kGq2Ka+rU/MjnuP0lsXkoB1rr8LawHH5gaf8rajq/BhKrGTIfjDiZG5qz+L7SZBZsMSZZ9pM1QhKju+GTD9iC+9HlhfXMtj94gz8U4h7eGXziEO7lo7LwLL6/DVMrGbkv68JYUYhGz2yBm/8cbQEh5vhakbhmpv1K6XYM9rzdsd9bwYcYt3cfKE3m+/NrUa42+RpJBdFg7cAmxsZ7/0TMyVw6Aqu2gzldb2ag4iLrPNEyW1ywaJ2DXMgPi/sjnDzhuo+vIUrc86j4ZLhT4GAN6uqwbnXq5UDzX7TfuB48oMvvE1sK5q6owkdWfklgnC6pSBpK7wl+e3kuvaYnGRGJJMBQuVgWL1awHrVtfOTsSE1vc0ZdG+a/Jbza6pHbyfi5L7FXJAGdQTk0EP3VT54+F7RZ/MJ9fj56aMxzhJRwQJ6df3cM26qSc5bW/zP3PFXypTOBwzCvVtwGQzkGvDW7XGwgLbTNHDpQXOd2BQ5Zd9bjQqGg+S+kIqWZVZCqVLfyFPF9bEOHfPepL6nRDJUD2l5uRnXqeTvidaSIoqS1Fbc6mLPtYnbp6uuts6Qo8TbMzFuI7NuaPuKnQIyVu7vUGJ8jg1uVOjlMNKdVtLPr9/ZEKVZVj7lsFA+nm3zRjjr1DRKhr/wY1CI1iXKVTeQZ0i2PSnN99j4iVTSwNAYQLWWD+KyZ/xRLVxmZQPuSkLeKBRAkavxjWnIFQb1dn72wMSUdcB9cNCNJNdyTkrl44MRR+pUuiVrTAnTlzL33X32eEYwT+vn564yxFJLUDyIMNjJ0nx+GreKSOglI2et0kAwRHKYFclH9GVTiVlB0TWeUJGD+7JYogF7BizjTGyPOUEWQCguIEmtC4fHD5461T80Z3Mp7rhNTI+Cswuknr9hrIZmpRyFSrSrP8R4S1Cf34Tu4RNrDxpofVK9nGTklZPsYM6eiP29Lx264fsX9oLdYhq7vCwcrRMJ1a5d0QHXUYRV5IqTFBoUSpxkQ6IHHL8ckM4NCzwk8K0CA3pj5Jp2a9wZjfKq7R/eukzQFuhMxV2qgHf2E3t7/SA8N7sMvsmF0p3J96QRE3rA85ekH1q8nrBVujlIqahmL0Qto3+JxdqAfnKMCblQGSKVWZgWLMm82MG/9pjhdkMzG7C2GRLGMty2y8NhX1pZWHNbLOmvaC424LNz/Nl5tkPv7fVbCT2ItB+/dx3ZhVhmgSLd1zL+2PsNFmj7VGBruTttezlo1mDKErjY27nTswjf2fY/Uq8lPcVAgRpJM+m7jS/8dk8cdl7fkY7Tuj4TfiSe0tiNSoJgZwom4+9haoBQ65AifaB7pUiTc0MAXCvG+nDydkRIbKx5fL6gAlyMAnBbQf+Qh1naLfzzwLVTP0EEyoenW2W1zKqfMql5rwGlyCB9mSa2s25yHf4SDSBlgEVMJtplpRgegZvDakpWDKgx3UR4W7yKW+RD7bd7rEa/GQmA/q0RYAOIaXfO/2CgEUPtNhPS2uqy29lBYFPPv5SHQ0t/jRxQLBpe09ateAWKypt9TWS7Z5gynOePS5M2NC16AhF0Xz6s7DUjtI0xNho9Y6GK16J5V8HqHypV/OAz7+VBzTaiR57XGH4r62GoAiJqfWOM7okzKCeeSBnOIKPHtwgM0SQbvCvv7rmS6ZAacu4BbXZ5R9gOhdR9H3bi7lWLBNnqqLPIy0k6m4XBhtl40B6z/5AcJxjtKfwvIExl7VsQRqbW8gpPMsmJZfSp3uC35g1AkP+BJlju3RVoFZNo3JR18A5uc60NGD4zvzIdGTAOth4ZAZx0ZGQItHuNcLz/0CiavJdkjD65h4avf1vf7LFZ1uogJz6vLK3uDisXIBIGkXOlIpxTdjjjTQt6Khy50bYbXsG9JBrSUGhsBWpeRUnq2cZWOifhfueY95gFIDAu37oKR3FQ1YxGMg3UMq+L2VN2rtqodelSHof8SyYZVQWs7L0bjtgolId1tAAjHI7J1/+JIRXeUBjjaGGQAU+az9XFfiqn+VRAGG8JDdP/WmEqjhYpcy00LIBIBzCF9I9mbXCv8IX9fhPlI5NqWGO/v0ikpfn+hb5U16FcPYsx+xLb4la6nSbvrTDP5MthPyeLIIY7ZE/rNU4ajgPmI0/3RvD7WtEbo8UGPjnev55N2ELuFpEPzkNu9MzXqq8K0cWxk4lT2DQPi3rDO8x8i5jX7wWQi8e0neCMb0SUO67zRfaekZONGfaFl47LByciUuy5dhqxMPokhTE2WbzxqCyt/s2TqG66R0ocYHmzv9f7tJ+TES8NFyzL3fhNoZoW5IxWNE+stYWutd3LPwa7HKhhRAbl5uCEbEGjrUzTXwbzG0qvpmNtpnYnmKjzTaSAFNCxfw9edcjaxCiRKKIDd6GS/eDsGBgTvJexDfwGmVWm9jadZhee9jRFiZFtL6m7sY1oQa8F9ycxSuPANXCqWkApcaEfQLkt1yyfeRs5yC5O/6XGJ4TEtJmCTPJFRr95au20STIPgkoEF1mzZ+5ZRtWKUYuWJVZDwcA/lTy6oYp0/d0LGPRUXnXRm0qtIXQVdnoVhKZPeWACt9rujRL57MEDi2kHtfV/ucu+k03bN0fQlbalUJ0faY99GC6L8MO8MXTSmqDAxNSpqpIFPhgHgAg0YK/GZhlQjbQXE4tMDEDO9obNfp4W6m8fdznMesSSRINBG5FDf//DkT9pSRQsIdSg4VK7W7j2d2jsQUIyjJmbd/2zCTaqh0Yq0cH6mS/5g/cq3eGOiJbaCNo6oVwGURzXVAeVaGIfJFhd2A59sVp+rVfe1f8B6bVbCLIKgGUgpUokO0vTg6ouAxXGQKtveMhhBT83ukPIRZ02+qF1kvM+nNCVy8uzrB0+W9QIKbMio2m/7zW78xd5Tf9itocpLbRuNC5cuS/GyRGXw6fzFzjM1UITlQ5dlvoyYxuvb7ol4S1MyhkfMNZbif6/xic0wB3uSScez3oFTRbCHBd0cbJL3cLwfQjCBpGBrRVC7174qW4XWnw0eYGSSzTVSEDOlMaTUIGJO+s7/z8JxaZprcEsoB4+vt9/+uwtM/iyqLVPidu8ZTh+F1rsEWKwZhDAg/giVc6VzRq+DJCrhn81b/LYlLJOdgoAjID2VnwgU+mQhCL6KhgIqqiVraD25UIYEqxMcZ1aRcZvHa8x5gh5onPtsVcl53Xek9BOYqkyj64acX921zwqoY0lmNA81NE7BzVts3cwWDZ4Dk6uuzwtfJuJc7vVS+fdVDEg3ATwC9oG5/Vb1swTyzTsl2V4m+93bSQo5STFG5AruTDWTym6Lxtt4OrAeIVgdoyTJL+keHiHTNiL0/nO5oYwftSQK1aYBuA0e12t/FVN+LsCk0L/hfCCcke89LuP4d46qnFo3NLpHb+NFrvekXVT4GiZgMW2H0orIY0TpS15wlxVUaGCUo7YSN0yWDRU5+p41dCOs5/vXq1do7K+Byjj35/mPlQ+VEDqqF7OIBQrXfHgCXYPy8ye3Ih3io+tYA6nK0/2clIERrpA0AMHKLTGEO7q/IzIcOCwYN9W/ISH4v4uk9MhzNu7Fg2IPCq5CQF1GLuzQu+wNv2h94NIA2UJydawv5X2bHkZjv+kB/WQCYjxUNEU8ssUdxDZstpv2qNAHmI6BMD84olxMiwFdK5J80zc9x7de/cz3ZNIkkGIpMCZJqKKkaLVo1MLnR/h/hQeUvfqJmvkPeIre3EjnliNkKJKL0KNaupHzY7Eoztaj0cNOhJ5dxIRB2is3kLcSK1FZswRJR0B5OXX+Q4UlFIrhR10lIge3Fg5DnaGoZoOyFaaHztrdF251JubDsCZRDSWA0y6ysykO+h4jhXtuWF7D5Wp7B4Hx3EQvKsmPPZYcLevowjlWghHbRBEhwPI3bzjhNWXlqtym5ObYAeYxuHyvyYue2X4651f7Om3+m8KT7Y/JqLWXwgayCdzxHuJidti1ITuf/oXzeCfTRbG5ytXlDk/epX061W6BO074jI7nV518OkYtRJDnPqdDFAf0uWcATfk0h17+gP7GHjy0Rc0Ive9XmvA6gCkoMjNjMEA7GQ3xy7e12DzfNpIfND7GKKojMifTrvkDXrfa3o4wNYktY6/VlBdHtrcH9F7uMWICej/BjZXVX83WFGcVHx3nOXxSL59kE9bSmHc3Xp8iDbPuSG5GIRp3fTFHnmTzzGedl6al2gUbGFKtkC0jFNtKTk2rr8LEObiGgfCoSpTWknvAYDQBoj93s0KiRNPOqgY++Xka2cQiDwqUsLl8/i57YC/V6sy5/NvhViRRZgCzcyjNHGzZsYA5YMtUntyfC1gNFP7cL3AwVA+326NJI7MQJoxTqcHL/YhntsnYTR5R6GVVvFYIlW8Nv9qn3daoGXMz0MoAsXpCzbiHZ0XWkfw2qlJkmZjgQtMAEhHXNgokGRPfOprmtlvNZaNlGB1EjQTVX1Y4tCyJFZhdhID4CowB23uQF16NifyxH+DGnQrnxeklnG7UQV2BRVdr6ZEKZYv7Gj+PbpojzAskvbdtaFsataqPrLDoejjc6ZfPA5zA0iYcCvcNjzuy9SuT0uG8NWMTLv2OsImL++PQV1sifUENAwi4O3yBvzTy4J77B7mMBpjCYGXAyjFGFZL4eAazSmvZ8thJ0FFW+keLHL+ft1dQBKmXY6JatelGebcIC/PyLBHdfX9bRcauGg4xEO7mMl8AjlcPMczkPniNQpiQFqcDJYrFGoxMV2hskxMn0bRQT8Ajc6w6sQYkGl0CQUImPrGfie9dsk4mrCLMIFOqcm0WT8O8AiREEGmooBTO7WI0qk506NsV7ffvc0rVJERJKcyRyCmFZdTSn/SrBfjV7SXT3pQlgluoY4FBUCDDkzwBgjkrE1oFUA3ls+xVP10w5jjBIMwKBSQqRVAEDXw+Dyj+jH3ila8czULWsCKhWd4qGsMFN7++OGBAz9eXHjAO9m++mTXF6qiyG35Q+61yjYQKsBrjR4NNexrwVGqBwAZA6cr5mp8AhoyzPomJ6TLfWEJjEeRI3QsX5oQkNuyF7u650QFka+VjFeNRY6ALklleTW9I0v4ABKDCXTGkjv80vqVNk+FTL0bJK7ndSjjMJD7OBFIEywBPJFrxTdyzocmxEgG0zu1VDgsQuXITYCx1RRty89A/F+CdSAlbMlIkptCC0GrF/jFS8PAU+6TNV1eBqJrCr9BgH1mth8FtdfE7druR+xyZKn5idfUKzGW6ACGF4M61IRoSs9o6xmaj3dnAVQvFWUsMcR6MI3xTKJNyMxkhXhhvT0IxialnG7i/BBzXfMXYh5jl4BXzCSNlxU4+aboEgIDr48/+pfj8J3WcNccFfzV6eiX05qkNktmafoBcxrEsrM8WQV0VVSRybQyXPOqJ1yndwBI6BOGO9oGxGDAd+HcKaZlptCMJsR1Cp3m7F9HpBFSu/NYVj+WSDY7jWSFBlTBSCFyyPEUn8S9NmBVa+mwGVsz0Q+fxe23w1w6wVO7sVnZqRpmXJeXg72QFkl7Qda1lBzn/FW+rRwLvFxCsuad67Wmzab1RJdzPGsuq8AzW6tL+JiwW/VPUSBbBmV1+EjqQ28x1u9W5Eoy7zhsU8NT87CtNbZ0lPEpsoWMewxC80kPanfWPrQXmixWDXXz7uf1kBTr1J/iYuls7fUsyAChXjKcKOaCF4ySqkhMTGmjNqYiG5joBUi/SZpWvgxk28pyIPhf28YULINiqmbWPBKuTCLFruV7JfRgGM87XfNEFc7tgnYx503k/0UXJfpmjx6wKbKcvV5fqrctx+OrIn++TxRxSKlTScEIwd2vG5mg/p5wsQDpiD+X91XbkReKLB25Jvp/IJaJh715RXqBzwCwlY3URonyy+oZoTD8Ym8XMMv/dMllh0LCFZkZFn2gYcLG9iO+I5S/GyxwjajQLQtwH7o+n50vimC+ES8ePOpPDwlu4oG8KhS7NL/OTdIWPIHbSa6/9DfjOq9W66EpaK57R78PpEzVNLkTP2L6lllqDT6SDhIDIvQS3SQbxG96khXgvW/rME+tiXFXi+BC0udi9keyGlc3sLBN3CP3QXzswhBGTxvz2LmRMkU3rLuSkYR1Gzr7vj1VxTN1y1iciA0DswsPZ38eB6X10Uzk6HZqjzBK+EJ5osJJJ/s3b0MFRIWYlM15TPm1uzeOk1zQ96quClQLEZbpxmV/eAduIotXUYQZjWAkTulBJt7kw9uEnLo7OpZrf8k+0ZQP0agcOTLbfrekHji86Mxr7rTwve82mePKoAkkEthE45VI+f1VqpyWNW1kbBbVVfuatKt6MEKqyTUyxSFGHk81kY7CxkgMNexiikN0+IeiUNsfuktjfOAiMfDhbTe4rtxSEPvO4CCUGaktA58TGnSO8rHdCicmGkNrwWsnXgUWjhp8bllNcnQN10TbwxYPAwQKW/JJiYQadr4THXO+vWudiq3I47vqmEM/Ab3Dlq11Q7RmRWntYOEyESbTI8PZYwbtsmjcSwBtTAIHQ5h3I633h3FpOkT2c0PlMjzj0Q/OuqaTVt639fowVppqvSlNcK5KupBnrxfKHQK+SoKSuaO8PNMkYkbcEAc9F0I4uzPfRVP/q5QkvJVsVoJ8BEWW/q1+kivHEMQfb+J2NfJjSTG+WhjHjL8eqi7FgfVewxwmqG9IOnTkwDjAHUaJMIyhVkadW/+GQjLyNP4zyHcLAdWcB5zQ2kc/blAx2RKfG+ON3RfC+iQ5Th7V2i5abkoy0pjfyOwTjIvaq9slSCtoNGBZggBDOiWwau0CX4NAIThFyqu9VWCLr8TsqhQZvQP+xrywovGs6A079U7YBjhEXyQw4Q3rbQY1EQnxTPXNlHfn9vQnuhsJnzx6PZrCqry8fidPz2U1scmAMVPHxa/injIf+hDziEU02xWm9ou67OgebktON9V6wwVotoNOzVNJhiDBlHbktBwOjX1BlJHybLox5y/7NhR7uc8f85O6xdxueabhwtJjYcBzac56v6RbuI9IRvPzOnNbltj8Hh0ftwwhWyHAyiEat0oDSEVZ925jmxJKAqTo4/uHnkozgMDsnkzXPXBDJ1sDTawXy23mXuTJOYV6ZVWrervMaGGGQpgQjAnfP7KPZro+OKt/MpnoM0NeGQgIFAiH7dU7Nl1QbcMiwO6/5nIosJtrFB8w1kpqb6OjI9BgZHG1nzTMGA++HNrl4WQNcq3SajD4C9utQYAu/fETPFMMJeCDwHRCnPuRAlqJ5t0E5h3Wlh1Nw57LQ36kDjC3lS9w0a89eI8ym6BzEA25Cdz3LQAyz94Fvjqp7MyHrpm3PzmsV/tbSLF9NJBjFmzWPQ8Tfgvj3fi8dg78tXvEatqtUhLxsNp2VCU6IzSqafxWw93+Wk47skJv5qxM+tv7CrpYKvWLEylJNEXlh7GHm9UenNf2/szZOl+54P4ZWksh1r6+rphL68QYhmqW7DqKVrc2rjzPYcvFDmKtCGL/F62i3riMV9z+LoLnuVaMn4dtpNNFmQEQ4uEhDfLYU4x8G2OHCz7gnxLCa4zE4CFo9m/+ECmdzziVumHM/P00/BESH2rxUYMBL8/9NRG5fiskFJr4AO0qNUKUCgTRgEiFsTbGXtP4DTTzc8ZAmfNJuJQE5Kp7W7U7QZnBXKepfSHkYTEqgOhqo95Jw9i56kYGt4BWwX50mC27CCW92SVMl4tbUEhBDSB36zgztz5Zts0563Kjc34B+6ZUnMIk+BiQNvqSkZHnk3rHNSaYthO72IWLIxij0hcv7n228yc82FsQLK9jmptjY6estDfH3OSMaAj+poCLKwRFXvXWb6jwM9mG4nu1yug0Cc4L89w4EYek6dnV17VBfIxB2dmFFQdp0kqx3BM9gdMAr0KS7WLOSf3cn5eDItDLP2UW7MWaIR+GJ0EGcEL3ejBdu0to6vDh04JcRMNU55usmSn3jp74myzWE3azMIT96wr39F62c3G/ldGskbqTIMTk3gMg61vNBQ0cJSIxVdcgNb3xFDowwVyIqYz54F8Rqg0uQE4FIiUGZxJhND/AWhkukqIqLLZEpxj07kPBN6Zb2pWht/X5JrC8yJzPlvFhfJndQ4jcgjFyhvymr/a17uxTKHpKNWDEoL4nNa9/Prf7TYRw6Gyo6vcwYcUHk17SMb9aEdVnx24msNCDEKbj0OVzRaA3gFJeXZPObqJKvWqFlavGpxXnP+4ZYTl0Dmcri6vMdwX687ApG+ygiGHZDwNzU68F4JMPQ9JB45vLkCsE2w50QNP1kJZlI56dVGzfK1MyRqP4J6VshesfOT4hzR6MYq373IoONlLvENdYXN6pTxo5eRzQkwk2tZ1zmZqczCytqTEhpweKcBCCZ/FhizgLm8/x5ScBlO0wEXHZm90mpmL1gR/J2CUnz3wDU99YFFKqm01AZ8q2S5Fnh81CbD687c7K2OjWlZgdvEJA9M0JT3eKdIRd9GCx6g1TO5PWTE8OOphUDKdazyYnmMqFhFxfJ//cWJTsgYbol2a7Ob/Q69Fy3kb9K7aZLzH+Kl/uCzWnqTOrQonVL7LTFPr7wbTaepfAl5zSgMInjrGXY+Gspw+fCNgEU1zyC0Suum6VFyHBjdKWft7strrOXqOSQwxsYXp4F013mN9gZyu4Hc84A4dzIHN5UNXmxNn+vPjS82JM6klySWB9pLCzLBUgXiMDllaG6fT2PSBv/b+yaruyWBVcpsOKuEaQ37W3A3t9YFRcgB5rFMDjwOn3c0lfsg+5V+dBX2EmWLTSelNZkeq67CFnxaKtnlsAJRPBqYvoWVZcJKn0zSelrO2TwnailO7zgAHaMRmQYbXo9beBs16JWf7V8LjYGS/DYUKTTE1zKECC/pK1EKf6mxIgmV+mJ+Mc8h04qep+okIIEXaN351J3N0VUk7cEEaOLE1rFF3W4vqRcodPfbLqINF6QtTsfny1+O46J5ahlamZEyxglZtpjEkKd9yKDsgwnzqoAPN5o76IsI+FRaBc8u1qLBWxpKU615chTVegNFR5V4o1T2JGwVkueD6CjAhOplPnRyv8sauMnMy2wEMARR6AmCQ8S5ebL0nCEqjSztMoUyAEjQ6FDYqkGweu48DkBR5HjwlBloKVawYcDezxKBH8WWnMpJKZj1Ol+OHMmg5iq9xDswLx0iTNkujgatOkeRU0c/GmSSH+7GTTMLQJdj51l3EkojjEwWOjw8XBOm88GqC4bWPEE+U/5XYtZNJG/X4FYjgIvVd69RYVbMEMfPSKJ825e3XQ6RBesp/G+lkMk4VIxRakyUBPLO1u0UYnNG9ExAnPdOO0OfFvcPOL9rBJO8bR+q9Lp9/i+fH32KkaNR2WgoxQY3FY+rS2NUvtCOgZAaF9vny16WG/3zeUtRP9V28PcGivAHAwwCcRk0D0iohjAfgL/EKXJkr8gIFqbNq7lXUFRKqMbpBa182ol77SqJq1M5setGUJuSBKqYBYKdDZv3XdT/u6J5aKKkLvA5ez6PuWX0RT7kELSKDKfg9w9nwSmMmJHjbnr0blM2WvpiirR/nLid6SRN9+5KoLUb+pLw3QzD8JlS3X2q0m4BNRxfltr5KWqryOuuGDt6IOHSE8/zqGXMiTqgrUOfDH58NoWe0te4mFc1GxswvhZXWJZmaWaMJo2SBnuXa7+jIfFbnhNH74Z6jygwcqXsldYfI/Zh8BZbqTh2I7Hu44dilfbX8Uh18NVB3phRnTwpUonKquUs/iZXRnDFjtEmKg2YRQm2CP1FWRb/B92HqJlHT7Hs/Tpl3RrlxvkoskpNlW53/6Ujse0fkHLNeUm97TlDsaRXpfZkR1uWMTwhPv4oYM2Bv941R+c7nQ0yBdFNVQpZRkpejmIfjFrdQUA7DPwR69aq6Pzmk3IXarIMKG6R4MBdkB3j3HWxohnZLWpaNy/BMxS+84e4vPPfO/7+nLWVZsdpUY/nGDkQts0NGnRpZK/lW60tmncMoTepY5fMbow1GyKhqSXLbOZkz59l8DG9v9ZHPwA1roKz3MW/j2tN/U+lPQVYXTa6h1ePQkSWR2bp9OHmCCvT6s8v9PVG2ufK7dkbpY500gNx7fdArzH3yCjY33Fa5TbOuybLNdW8juJyJtikDn+5jMnMzIWP/+v12XkaXj195xk6eOKuvA5zeKk1i1PrSnmWA46Ca2ldgNqJ0rvLqM9X2EPn/QuMjLnLg0iVJ4H4r5S2PgpGdSdfVoiX/rBAq6yVDc30v8DOUae4oquSM0YDCIafLQ+hvEmB5b/f+QsTFtAR0zIVWeLyYbmrx3g9gHhVRfelCz9/exh19AGsyXcwuSaBiCzQIoctYvyhhkdCsC/cdZDce/1Fav35JQt+RJFAjiMRQhCdE4eS3SmfsREHe9LZa0ElOLhxxvs5uS/SnMYssyK9FxiucRjjOqfaIp2N8CmuNJqg3WvtMk+MlbAYeji9K94rx6U7nj9L1TGhVcAyz+Gb4sib21AW94HRzWbTrRKEkx5+KLE69Vc+8Cj1Vu2GkZ1AA2E4kaJ2aTjsEL2C0srAINXRAjnxwI3p5ED0NRYn9sT1iY9GPBJwhhd6WXEJ/Z44D0rufaDOA8dUj1SIqywRs2b7SjYcCYS8eefkwdWlpN0DvnecdwHVc3TqyCcUy7K2PMS2l2KZHzZfLCTCPaPq/NVc/Nlc5hVJoFvnNUpKWZcTsxVeHfH1mnELREECq9YES9v6FcvONCxXLQmf0k3S2dyNmsxbvlXM0u7lSqkx81md0rad3E33PPuPpDGM9UiBhSeJn3Sejmx+LdLCiZYcVxow59nCqrUmXGAbsR4O7wVQzyHdL6DX5s8k5BjHXlONz0PaIqS89xMhkYetMw6w7JZ5c/oJBH2jdZPbS6KbR0RpEe16BATLzU4QiHybxArrjBM8MKKP8Zz6MVbg/d8yb76U8nQzCK4Eqa5ombBm7/6xo2dR9O/ByfcU6qDu+efdLFAP4LiCr6C3aihDPjigUYuy0voLuX3Flevl7xXRtRZ4Vc48j2tgA7tK0wqv4OjLwCzZJn9lYIQuScQBEFMBjA6Vj8FTp4h3OphB6g0uA13nTnVLmKQ+zfELl+6znWX5nCWvbwak0t3q4qwWK3MAPKE2vqDEeCsFKvmJ2Ws+VOqnrA+ekCk9jaszBsZd71InADWijT4SHnyVmc55dv5ivXl1fED4vwNrxbiZHWeGinS3ImcoDAT1vGiLpP/D3NaiIPq9A2h5DT5SgaCVCh0JKu7DKsHjW9ZAACRxHgTSo5jrVWUJfGKweg2auQuittVidB+JaCdwYd0x9oJ4jyI5UygrB9Nzi2gbLVcCnpu+1ytsiWCbJb1Xxas8FhG/EX86taG6flZZauhaGnpRyfBB5ojGdsdPBVHEtb8R951oaNTvKXK7CddSeWaeOi2FIDPEhWhAk19RzuR9wSKEwvvi8nQFz649+fUlBMuDL7VmUBSsC1ExWwqY+uSdNKowEkpsBb+/KpWl6oGxymyR/e4uKjipBJrVPXg0nE2j6HL2JbCHNh01lV+/+6FUglhV8GTypzdvdfhYc7t0ZYtkyH/17wDakU7r1GAdUIXXmtxamhK2FdelBa4BPryblCC9gJG9htJue9LMrNS7mM6gbRA1xSFnWNsziDuGZeS3Dcu4bjsWaIebrgNnxpl/pLGxV5EtkFwDeh8fPyfPU8CZAM/Ljk3+Vi7jUtNZmZM8+f7d4wlUIkTHiAULRUKu0ODFIeyk20BiqLB7vvAT342SIDP+z5FPaa6Tjyqh/AsX2jFhbeIXKxDMb8fid0jHAWk6JKhswbtvtP6bDz+lYjvXIPwV1Y+nyft2uM8c1aUxmDHAUmZnJBvZXT43mxjXDHP05R1/dKfoExcgcYzv3wO5mazi7ugS01z6oUmByKtfQ6fA2+MQynPCoDHcp1eDtag/E3HQpHMWAgGkNh9wWR5Y48YG0W4CgvOrngI111j/x+MIuH5xFlVkxqptSjW+hnVbt9qxtXndEH5RtnxWfd9eP+kli/x3LU1WGsZVAkVElXD274LBGK0bMveEUbj/6EpnocEnvRSlglpE4GiAO5S4JdYb4uYd6oeK8vuZvTQaWMS3dEIJ2ssCxWz8DqYmc/b38ynz0DWCCeF1gCyipaLG2Kq9wqfHz3S6m7CS+H42nmDYAz2dYcx77M8purGOS5tQ4aykJXIDQBwHjIGSU+52M+1OV53rp4B3JbIXecQWEjfk9gkVoz8T6HJbIhFgm3quNMk+cIyRHlj/BdURXY8o7H7dBQfsdpLJhAsxS/1JtMkY8JoP4YdyOxzJY5x/+A9scOTXvPVoQAMqgmP899s6GvRtzNFGXLX7VHSnUj7VPO8K1qxaS/a/6v/YhRlUtNgnqnth3Jo/DKbdhdPn6HgB9YjU5GuN1uPyUXZJDZYfFwMfdqNPVoI8d1csoHMK5tquGoK060mIwBHMk3pFGqBosajr9g/5kBPrrtuIIEPFZnaAKSCQqLdeQq2B6Bs8WxD8+DfzGJ2nu0Xeb58spPoiHZAVV+I5lRUseUE0IA4E844UzFYADNYcLBW3zsP7aWzLnUZoQPuIDR3FX3bkM5mCunvXaPSi4PRkKnItEv8/OYiq8RSKQcaTwxX9YgdNbgPuXLwb5ARofv0Zj3WpHhNnlTq2Qu/lwvM3PUaqv8L7kpFqQR9aRaXfFanbLgbyxJ2kAx9oA1kRMyH3JXI06oQhRiZQ1LtWz+QKKxme0zAgI2q6/dmYApsA7WGeBae5+Y3eqkqDjXyS7Q+LzYgrM3EiqGHsibaKZKgFecxpGiMLXY5+kkuDKBdMkj2Bd8uTKI+aTWpu97gNp78fm891zYuT68sIEzE5JggpWjlWFSpzYayxvnOxJ3JYK/q8WbCy14KhtCFhdLOxCEAvyqXN3K+oP52ZzdxHiCAac5LX2TO5CTmkxp6zCT5JZDIBgnnmQU8GBowEvogfPni17fE1sljd55P2C4mWCNDr8l3hMH+4zpyZqp3iFbJx20nGtU+9LJozl0OxNrk/c0C9chEe+k4vUECnUaXbS8JqdnymqbZ1SCI+4+1BYMW4nzYKDLaqL3Nm08C/Ug7zNg2BuwhWepXrkqaRX58LCWLPDQyUzn369E1drtekeuNcI4SgdmyQZ/7xhXZ6sOKg9G/HEiJQsriRQThvHz4BhaFaXic4nlrz4LhUthGBLbnnB6tufJizYx4c6b2rY1E63pLDA8QdZsTOD7euNMku1a0T2nNQ9rOPBYPDyksaP+EmKTvqcgRycKMtzhHh37mAqVERuzIIMs/zXE9jGBpJBBWb8KCPZne6Sxw0+UFlY6/VeXJUHunHXY1csfc40Tw95XrkpLzxqX/LrsaYM7Y0UQ/Qe6PTjMQUXDseSMhYwHTXCohySQ+1fIjz/yjZWRFI1/a4d9eQzWLoGjz8O8ldPhzhpWFwwlaR0T1gpMP3VeHvDOx4RJocHJOSRQ+H4/nHJsiuXWDKowYZZW8Jk9vUiw2jExedn7glAsC/bgN1NrgIp1y+y3tmLd2V9x7yKVC+QK6MOFq19dlQflj350qUavBULMCTn0BvCRQY4q6VjniU6XHISUsaApCVoQeevAOuCUFcnwWfK+44XDo1qSpPF1wcnbH7N9aO+AzD212PgFlGkXlaQ3Gbfz9XIUMjulgGUREelr6IX+tR2K9H/yep959z5WLXlZ81Z8HCIV8CyU0JKYzkIeFqf6o2ywb2O73oRi7i8F6Vcn2zU1VWZpLfSXgTNkRtqM7r5s13UimLWtAVZs97rLcMRlwXzYp98ZnKvQLj/dpKn8nfNnU9V2Bp90frlQedeKt6zd4mPR53FKQ1J4r95n1G8ph0XG37DC9b185sWbnoyC4Q1iUvyy5IOxBrIqbqn/JSUWzdrlOiZGDJrU5IGuzUl5TaupUTIgFeLfT6uh0gIEJ5nZQ/8XjB0mmEZxTvocrU/BFoOaUvV/N48W3W/aQu5nR3KwsSByfSDAEq6qBqTVTkZtkaAd/1Rie2jkdRlZvxFMu0MGnLc0SHPII8eOz/bjfIhSQhAb38dSRcFmfRb+fpDrDHeazED6EHNayy0kESoRG+XFbJa6xWB6OlbwHVDwdO9Ka7bIOqLRHpZjwXmv/2DR9nu+2xwxE39cBHq/7Vv99HcvH8ZJeGmgHr8mBKQmOCTkvLkxf5k4FrqZuNpaRNhCB3puFuF5d2nnQbhgAaANLMCYAiGsJhX2bFM/r3BGhR/dkGPXeBQUJ4tTARQnVqA07mW/42Dv2k7Wa7hWU/wv7FTIWLwWyHX0Vqdg4BHrlJ7zh+b+T6fH+W3d53LS5rkXK5GIctMIttK+osfGYIvOD0BkkXBJR0EYUmteToIxpoaMVKZmCRC2BbmBLdUTIZiI1kVYKYnq9Q5xMGODu+6vCT2ofvYE0pmGbQ9Ln6wnBDYZUD/BL9rmiPn3n28Zs33OsHUQcLp2vjUEV5sOBLO2ScyescGu0N58y1q1NSNJuXCzI4fu4RWJtSIn3P3+9eAsMo/2NupFeaf70/usLGd2Z0F27EjLoIj+nmJ4/Q5edPFhVNpPURQrUzPALNNzEvx3e82rDtPpbZjugv7Abm2q2vMGwz5W+hGH0hkCzXdZhPFbLk0sR5vVhScLgAPdZIVZIjTuzwIKVuWmvpMr7Gwxgiglpy8ecfOAZcCpXRzG6lNuRB64D4G9AWD9vQi/crWV4Xq5VjJnRjQc3g4bJe+MmksjEctghn27n5i5PHZvW/gM0BsXzo8Pou6yOLnp49dGXpK/oLAbOdOel9h+kDqEtZunvsXa9EFomdl0QbDvk+H58SjszCVqVOXSgDpOdZjXWfZpFL6S/fd1Lq8FQS3LklgiNhdvE5GzgSO8uq3gtj8I2o+JzucnrUSrtoxa6IejmVQLGzF3rSCy3fdhBPhZnDdgctC89dRJ+PTfW4ga5WWAyaWspzFg5251FoByB8LUbD3AxhvV6M1ARNXRJ4NhPe2j9WOlu5I2KmCMGvGP5CbHAyZk3YhiuIdtDgOvre9Cz0yOWvHH5FpZQzqzyHE5XkTTFMU2JhG1nvne9SCi9zNvPnGj9h/bQXgpue78rpogXJl8oDSfMwz9fp4ocyOxEV1JCEslSsRvodEzPbUsMUYWDERNzR6f45Ku6EmW3qdD48dcFQtc9rr2wF3o85edZ/2SY0BSkOdQX1ahwPVBP554Q1Z4lbd0d/vrRCO5k3QBWOb3iML0vI4MRkiKwqt735Q2fkq0Xl1pI3nk4ll51cSEHOrFTctkxwLOiQl6HJh2q3iqHFmtOCSo0A4YLl+mllolm7FLpe/79gMoe7A5cbFPCbX9Z3GhI43FgBbWoq8pwaIoDlklRimVauOx355pv7v26P0MLrgiqWTOxJaIGO/UhHf7GSOm0r1O5m1sPYYn1bathmEkYfrQLiEWQ2/3IjunsIxgAmi6t4JsxalYxE4YyvD59EpzvswOjZUvSgkHwPZonVtaiMTLXnV3p0dKpCSSz38Kv8QbNFzqLbwbBBRUHw/nHSxNipNm5vtjfkuf06jWRwkctgu8wZqKwS/7IcGnFtmwnbJFPhpGcyV9GVFzCCG+TOeNgAWxOUPgmtLdD8JawVVDV+e3iR8kHuaZXIknncI/3uFnblTd2P/OdWvxl+9CXbqJb1CS8osg2fg/qaA9KvM3FQoZQ79JRZC/Upm90ABPCGzksTWJ7Xy9VHpnPZCgGzAVbJhmurq8tm24BjBvnm1GOKfotvCqXyIXFE1bYTRS1WtzgZrGWgR/oOUDnNgDPXqUfTmyFPfNCD9MX22hvuBans/Kl1DustiTunl9Kravj0NG1Ds5nkTqlQSYOfhgvRIowimmWAYWma55eqvaQL9GvHmuH/hIVB/tiN6s7yOW2iahReL8dNddIbMJ6BLVguJ4n1dnquV3ZNqi6V0H/Vn00j0cE80ERsZTgsHPJ0eUjxYik+eDtaEHnyAsYeR2AjRcGw=="),(function(e){return e.charCodeAt(0)})),i=new Uint8Array([177,156,215,89,13,111,230,1]),o=new Uint8Array(n.length),s=new Uint8Array(256),a=0;a<256;a++)s[a]=a;var c,l=0;for(a=0;a<256;a++){var u=[s[l=(l+s[a]+i[a%i.length])%256],s[a]];s[a]=u[0],s[l]=u[1]}a=0,l=0;for(var d=0;d<0+n.length;d++){var p=[s[l=(l+s[a=(a+1)%256])%256],s[a]];s[a]=p[0],s[l]=p[1],c=s[(s[a]+s[l])%256],d>=0&&(o[d-0]=n[d-0]^c)}return A=!0,new Promise((function(n){(function(e,t){return WebAssembly.instantiate(e,t)})(o.buffer,t).then((function(t){A=!1,r=t.instance.exports,e.__wbindgen_wasm_module=t.module,n()}))}))}().then((function(){R=O.new(),e(R)}))}))).then((function(e){C=e}));var P=!0;setInterval((function(){Object(a.getParameter)("UPLOAD_LOG")&&j.info("console log upload")}),9e5);var j=function(){var e,t,n,r,i,l,u=null,d=["DEBUG","INFO","WARNING","ERROR","NONE"],p=0,h=function(e,t){if(Object(a.getParameter)("UPLOAD_LOG"))try{t=Array.prototype.slice.call(t);var n="";if(t.forEach((function(e){"object"===o()(e)&&(e=JSON.stringify(e)),n=n+e+" "})),k.push({payload:n,log_level:e}),P)return;"free"===D&&function e(t){D="uploading",setTimeout((function(){!function(e,t,n){var r={};Array.isArray(e)||(e=[e]),e=e.map((function(e){return{log_item_id:M++,log_level:e.log_level,payload_str:e.payload}})),r={timestamp:Date.now(),sdk_version:a.VERSION,process_id:Object(c.getProcessId)(),payload:JSON.stringify(e)},C?r.hash=C.get_digest("".concat(r.payload).concat(r.process_id).concat(r.timestamp)):n&&n();try{var i=u,o=u||"https://".concat(Object(a.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2");Object(s.post)(o,r,(function(e){"OK"===e?t&&t(e):n&&n(e)}),(function(e){n&&n(e)}),i?{withCredentials:!0}:{withCredentials:!0,"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})}catch(e){n&&n(e)}}(t,(function(){L=0,0!==k.length?(x=k.length<10?k.splice(0,k.length):k.splice(0,10),e(x)):D="free"}),(function(){setTimeout((function(){e(x)}),L++<2?200:1e4)}))}),3e3)}(x=k.length<10?k.splice(0,k.length):k.splice(0,10))}catch(e){}};t=function(){for(var t=[0],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},n=function(){for(var t=[1],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},r=function(){for(var t=[2],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},i=function(){for(var t=[3],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)};var f={};return l=function(e){f[e]||(r.apply(void 0,arguments),f[e]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,stopWaitJoin:function(){P=!1},enableLogUpload:function(){Object(a.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(a.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(e){u=e?"https://".concat(e,"/ls/?h=").concat(Object(a.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v2"):"https://".concat(Object(a.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2")},setLogLevel:function(e){e>4?e=4:e<0&&(e=0),p=e},log:e=function(){var e=arguments[0],t=arguments;if(t[0]=function(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}()+" Agora-SDK ["+(d[e]||"DEFAULT")+"]:",h(e,t),!(e<p))switch(e){case 0:case 1:case 3:console.log.apply(console,t);break;case 2:console.warn.apply(console,t);break;default:return void console.log.apply(console,t)}},debug:t,info:n,warning:r,deprecate:l,error:i}}();t.default=j},function(e,t,n){"use strict";n.r(t),n.d(t,"report",(function(){return w})),n.d(t,"SESSION_INIT",(function(){return v})),n.d(t,"JOIN_CHOOSE_SERVER",(function(){return y})),n.d(t,"JOIN_GATEWAY",(function(){return E})),n.d(t,"PUBLISH",(function(){return _})),n.d(t,"SUBSCRIBE",(function(){return b})),n.d(t,"getProcessId",(function(){return N}));var r=n(46),i=n.n(r),o=n(7),s=n.n(o),a=n(2),c=n(0),l=n(14),u=n(28),d=n.n(u),p=n(47);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m,g,v="session_init",y="join_choose_server",E="join_gateway",_="publish",b="subscribe",S=new(n.n(p).a),T={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},I=null,N=function(){return I||(I="process-"+d()(),c.default.info("processId: "+I)),I},w=(g=0,(m={list:{},setProxyServer:function(e){S.setProxy(e),m.proxyServerURL=e},getUrl:function(){return m.proxyServerURL?"https://".concat(m.proxyServerURL,"/rs/?h=").concat(Object(a.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(a.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message")},getBackUrl:function(){return m.proxyServerURL?"https://".concat(m.proxyServerURL,"/rs/?h=").concat(Object(a.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(a.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message")},getSessionStartTime:function(e){return m.list[e]?m.list[e].startTime:(c.default.DEBUG("[getSessionStartTime]: session ".concat(e," no exit")),0)},sessionInit:function(e,t){var n=s()({},T);n.startTime=+new Date,n.sid=e,n.cname=t.cname,m.list[e]=n;var r=s()({},{willUploadConsoleLog:Object(a.getParameter)("UPLOAD_LOG"),areaVersion:"global"},t.extend),i=s()({},n);i.eventType=v,i.appid=t.appid,i.browser=navigator.userAgent,i.build=a.BUILD,i.lts=+new Date,i.elapse=i.lts-i.startTime,i.extend=JSON.stringify(r),i.mode=t.mode,i.process=N(),i.success=t.succ,i.version=a.VERSION,delete i.startTime,m.send({type:"Session",data:i}),m._flushInvokeReport(e)},joinChooseServer2:function(e,t,n){if(m.list[e]){m.list[e].uid||(t.uid&&(m.list[e].uid=parseInt(t.uid)),t.cid&&(m.list[e].cid=parseInt(t.cid)),t.vid&&(m.list[e].vid=parseInt(t.vid)));var r=s()({},m.list[e]);r.eventType=y;var i=t.lts;r.lts=Date.now(),r.eventElapse=r.lts-i,r.chooseServerAddr=t.csAddr,r.errorCode=t.ec,r.elapse=r.lts-r.startTime,r.success=t.succ,r.chooseServerIp=t.chooseServerIp||"",r.chooseServerAddrList=JSON.stringify(t.serverList),delete r.startTime,m.send({type:"JoinChooseServer",data:r})}},joinChooseServer:function(e,t,n){if(m.list[e]){n&&(t.uid&&(m.list[e].uid=parseInt(t.uid)),t.cid&&(m.list[e].cid=parseInt(t.cid)),t.vid&&(m.list[e].vid=parseInt(t.vid)));var r=s()({},m.list[e]);r.eventType=y;var i=t.lts;r.lts=Date.now(),r.eventElapse=r.lts-i,r.chooseServerAddr=t.csAddr,r.errorCode=t.ec,r.elapse=r.lts-r.startTime,r.success=t.succ,r.chooseServerIp=t.chooseServerIp||"",r.chooseServerAddrList=JSON.stringify(t.serverList),delete r.startTime,m.send({type:"JoinChooseServer",data:r})}},reqUserAccount:function(e,t){t.vid&&(m.list[e].vid=parseInt(t.vid));var n=s()({},m.list[e]),r=t.lts;n.eventType="req_user_account",n.lts=Date.now(),n.success=t.success,n.serverAddress=t.serverAddress,n.stringUid=t.stringUid,n.uid=t.uid,n.errorCode=t.errorCode,n.elapse=n.lts-n.startTime,n.eventElapse=n.lts-r,n.extend="string"==typeof t.extend?t.extend:JSON.stringify(t.extend),delete n.startTime,m.send({type:"ReqUserAccount",data:n})},joinGateway:function(e,t){t.vid&&(m.list[e].vid=parseInt(t.vid)),t.uid&&(m.list[e].uid=parseInt(t.uid));var n=s()({},m.list[e]),r=t.lts;n.eventType=E,n.firstSuccess=t.firstSuccess,n.lts=Date.now(),n.gatewayAddr=t.addr,n.success=t.succ,n.errorCode=t.ec,n.elapse=n.lts-n.startTime,n.eventElapse=n.lts-r,delete n.startTime,m.send({type:"JoinGateway",data:n})},publish:function(e,t){var n=s()({},m.list[e]);n.eventType=_;var r=t.lts;n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.success=t.succ,n.errorCode=t.ec,n.audio=t.audio,n.video=t.video,n.screenshare=t.screenshare,n.publishRequestid=t.publishRequestid,n.p2pid=t.p2pid,t.videoName&&(n.videoName=t.videoName),t.audioName&&(n.audioName=t.audioName),t.screenName&&(n.screenName=t.screenName),delete n.startTime,m.send({type:"Publish",data:n}),m._flushInvokeReport(e)},subscribe:function(e,t){var n=s()({},m.list[e]);n.eventType=b;var r=t.lts;n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.errorCode=t.ec,n.success=t.succ,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,isFinite(t.peerid)?n.peer=t.peerid:n.peerSuid=""+t.peerid,"boolean"==typeof t.video&&(n.video=t.video),"boolean"==typeof t.audio&&(n.audio=t.audio),delete n.startTime,m.send({type:"Subscribe",data:n}),m._flushInvokeReport(e)},firstRemoteFrame:function(e,t){var n=s()({},m.list[e]);n.eventType="first_remote_frame";var r=t.lts;n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.width=t.width,n.height=t.height,n.success=t.succ,n.errorCode=t.ec,isFinite(t.peerid)?n.peer=t.peerid:n.peerSuid=""+t.peerid,delete n.startTime,m.send({type:"FirstFrame",data:n})},firstVideoReceived:function(e,t){var n=s()({},m.list[e]);n.eventType="first_video_received",n.lts=Date.now(),n.peer=t.peerid,n.uid=t.uid,n.elapse=t.elapse,n.subscribeElapse=t.subscribeElapse,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,m.send({type:"FirstVideoReceived",data:n})},firstAudioReceived:function(e,t){var n=s()({},m.list[e]);n.eventType="first_audio_received",n.lts=Date.now(),n.peer=t.peerid,n.uid=t.uid,n.elapse=t.elapse,n.subscribeElapse=t.subscribeElapse,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,m.send({type:"FirstAudioReceived",data:n})},firstVideoDecode:function(e,t){var n=s()({},m.list[e]);n.eventType="first_video_decode",n.lts=Date.now(),n.peer=t.peerid,n.uid=t.uid,n.elapse=t.elapse,n.videowidth=t.width,n.videoheight=t.height,n.subscribeElapse=t.subscribeElapse,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,m.send({type:"FirstVideoDecode",data:n})},firstAudioDecode:function(e,t){var n=s()({},m.list[e]);n.eventType="first_audio_decode",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,n.elapse=t.elapse,n.subscribeElapse=t.subscribeElapse,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,m.send({type:"FirstAudioDecode",data:n})},onAddAudioStream:function(e,t){var n=s()({},m.list[e]);n.eventType="on_add_audio_stream",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,m.send({type:"OnAddAudioStream",data:n})},onAddVideoStream:function(e,t){var n=s()({},m.list[e]);n.eventType="on_add_video_stream",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,m.send({type:"OnAddVideoStream",data:n})},onUpdateStream:function(e,t){var n=s()({},m.list[e]);n.eventType="on_update_stream",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,n.audio=t.audio,n.video=t.video,m.send({type:"OnUpdateStream",data:n})},onRemoveStream:function(e,t){var n=s()({},m.list[e]);n.eventType="on_remove_stream",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,m.send({type:"OnRemoveStream",data:n})},streamSwitch:function(e,t){var n=s()({},m.list[e]);n.eventType="stream_switch",n.lts=Date.now(),n.isDual=t.isdual,n.elapse=n.lts-n.startTime,n.success=n.succ,delete n.startTime,m.send({type:"StreamSwitch",data:n})},audioSendingStopped:function(e,t){var n=s()({},m.list[e]);n.eventType="audio_sending_stopped",n.lts=Date.now(),n.elapse=n.lts-n.startTime,n.reason=t.reason,n.success=t.succ,delete n.startTime,m.send({type:"AudioSendingStopped",data:n})},videoSendingStopped:function(e,t){var n=s()({},m.list[e]);n.eventType="video_sending_stopped",n.lts=Date.now(),n.elapse=n.lts-n.startTime,n.reson=t.reason,n.success=t.succ,delete n.startTime,m.send({type:"VideoSendingStopped",data:n})},requestProxyAppCenter:function(e,t){var n=s()({},m.list[e]),r=t.lts;n.eventType="request_proxy_appcenter",n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.extend=t.extend+"",n.APAddr=t.APAddr,n.workerManagerList=t.workerManagerList,n.response=t.response,n.errorCode=t.ec,n.success=t.succ,delete n.startTime,m.send({type:"RequestProxyAppCenter",data:n})},requestProxyWorkerManager:function(e,t){var n=s()({},m.list[e]),r=t.lts;n.eventType="request_proxy_worker_manager",n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.extend=t.extend,n.workerManagerAddr=t.workerManagerAddr,n.response=t.response,n.errorCode=t.ec,n.success=t.succ,delete n.startTime,m.send({type:"RequestProxyWorkerManager",data:n})},requestWorkerEvent:function(e,t){var n=s()({},m.list[e]),r=n.startTime,i=Date.now();delete(n=f({},n,{},t,{elapse:i-r,lts:i,productType:"WebRTC"})).startTime,m.send({type:"WorkerEvent",data:n})},requestApWorkerEvent:function(e,t){var n=s()({},m.list[e]),r=n.startTime,i=Date.now();n=f({},n,{},t,{elapse:i-r,lts:i}),m.send({type:"APWorkerEvent",data:n})},sendCustomReportMessage:function(e,t,n){var r={type:"UserAnalytics",data:f({sid:e},t)},i=m.getUrl(),o=!!m.proxyServerURL;Object(l.post)(i,r,(function(e){n&&n()}),(function(e){var t=m.getBackUrl();Object(l.post)(t,r,(function(e){n&&n()}),(function(e){n&&n("Failed")}),o?{timeout:Object(a.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(a.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})}),o?{timeout:Object(a.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(a.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},joinChannelTimeOut:function(e){m.send({type:"JoinChannelTimeout",data:f({},e)})},peerPublishStatus:function(e){m.send({type:"PeerPublishStatus",data:f({},e)})},joinWebProxyAP:function(e){m.send({type:"JoinWebProxyAP",data:f({},e)})},webSocketQuit:function(e){m.send({type:"WebSocketQuit",data:f({},e)})}}).reportApiInvoke=function(e,t){var n=t.tag,r=t.name,i=t.getStates,o=t.options,s=t.timeout,l=void 0===s?6e4:s,u=t.callback,d=t.reportResult,p=void 0===d||d,h=Date.now(),m=0,v=g++,y=function(){return f({tag:n,invokeId:v,sid:e,name:r,apiInvokeTime:h,options:o},i&&{states:(t=i(),Object.keys(t).reduce((function(e,n){var r=e;return null!=t[n]&&(r[n]=t[n]),r}),{}))});var t},E=!!Object(a.getParameter)("SHOW_REPORT_INVOKER_LOG");E&&c.default.info("".concat(r," start"));var _=setTimeout((function(){w._sendApiInvoke(f({},y(),{error:"API_INVOKE_TIMEOUT",success:!1}))}),l);return function(e,t){if(clearTimeout(_),++m>1&&(e="EXECUTOR_INVOKE_".concat(m)),e)return w._sendApiInvoke(f({},y(),{success:!1,error:e},i&&{states:i()})),E&&c.default.info("".concat(r," onFailure"),e),u&&u(e);w._sendApiInvoke(f({},y(),{success:!0},p&&{result:t},{},i&&{states:i()})),E&&c.default.info("".concat(r," onSuccess")),u&&u(null,t)}},m._cachedItems=[],m._cacheInvokeReport=function(e){e.lts||(e.lts=Date.now()),m._cachedItems.push(e),m._cachedItems.length>50&&m._cachedItems.shift()},m._flushInvokeReport=function(e){if(m._cachedItems.length){var t=m._cachedItems;m._cachedItems=[],c.default.debug("Flush cached event reporting:",t.length),t.forEach((function(t,n){t.sid=e,setTimeout((function(){m._sendApiInvoke(t)}),5e3+500*n)}))}},m._sendApiInvoke=function(e){var t=e.tag,n=e.invokeId,r=e.sid,i=e.name,o=e.result,s=e.states,c=e.options,l=e.error,u=e.success,d=e.apiInvokeTime,p=e.lts,h=Object(a.getParameter)("NOT_REPORT_EVENT");if(!(t&&h instanceof Array&&-1!==h.indexOf(t)))if(m.list[r]){var g=m.list[r],v=g.startTime,y=g.cname,E=g.uid,_=g.cid,b=(p=p||Date.now())-v,S=p-d,T="";if(c)try{T=JSON.stringify(c)}catch(e){T=c.toString()}var I=f({invokeId:n,sid:r,cname:y,cid:_,lts:p,uid:E,success:u,elapse:b,apiName:i,execElapse:S},void 0!==c&&{options:T},{},void 0!==s&&{execStates:JSON.stringify(s)},{},void 0!==l&&{errorCode:JSON.stringify(l)},{},void 0!==o&&{execResult:JSON.stringify(o)});m.send({type:"ApiInvoke",data:I})}else m._cacheInvokeReport(arguments[0])},m.sendCache=[],m.sendTimer=null,m.send=function(e){if(e.data){var t=e.data;m._lastLts&&m._lastLts>=t.lts&&(t.lts=m._lastLts+1),m._lastLts=t.lts}if(m.sendCache.push(e),null===m.sendTimer)return function e(){m.sendTimer=setTimeout((function(){if(0!==m.sendCache.length){var t=m.sendCache.length<10?m.sendCache.splice(0,m.sendCache.length):m.sendCache.splice(0,10),n=m.list[t[0].data.sid].vid;return S.sendReportList(t,n),e()}m.sendTimer=null}),Object(a.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()},m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BUILD="v3.6.11-0-gbdacc5f-dirty",t.VERSION="3.6.11";var r=0*Date.now()+11499+86604+5615+6547+846;t.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,100,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]},t.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var i={AREA_SETTING:["NORTH_AMERICA","OVERSEA"],WEBCS_DOMAIN:["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],LOG_UPLOAD_SERVER:"logservice-oversea.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1-oversea.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"statscollector-2-oversea.agora.io",ENABLE_LIVE_SERVER_LIST:!1,LIVE_SERVER_LIST:[],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,GATEWAY_DOMAINS:["edge.agora.io"],WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e7,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,LIVE_STREAMING_TIMEOUT:12e4,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",CHROME_NEW_STATS:!1,AP_BACKOFF_MAX_TIME:8,SET_DEFAULT_TURNSERVER:!0,TURN_SERVER_PASSWORD:r.toString(),PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",NGINX:"webrtc-cloud-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CR:!0,CRL:10,CRI:6,CUSTOMER_REPORT_TIMEOUT:5e3,LIVE_STREAMING_ADDRESS:"",CHOOSE_SERVER_FRAGEMENT_LENGTH:4,PLAN:"plan-b"};i.AREA_SETTING=["CHINA","GLOBAL"],i.WEBCS_DOMAIN=["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],i.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],i.PROXY_CS=["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],i.CDS_AP=["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],i.ACCOUNT_REGISTER=["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],i.UAP_AP=["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],i.LOG_UPLOAD_SERVER="logservice.agora.io",i.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",i.EVENT_REPORT_BACKUP_DOMAIN="web-3.statscollector.sd-rtn.com",i.GATEWAY_DOMAINS=["edge.agora.io","edge.sd-rtn.com"],i.NGINX="webrtc-cloud-proxy.sd-rtn.com",i.PROXY_SERVER_TYPE3=["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],t.setParameter=function(e,t){return void 0!==i[e]&&(i[e]=t,!0)},t.getParameter=function(e){return void 0!==i[e]?i[e]:null}},function(e,t,n){"use strict";n.r(t),n.d(t,"checkValidObject",(function(){return c})),n.d(t,"checkValidString",(function(){return l})),n.d(t,"checkValidNumber",(function(){return u})),n.d(t,"checkValidArray",(function(){return d})),n.d(t,"checkValidFloatNumber",(function(){return p})),n.d(t,"checkValidBoolean",(function(){return h})),n.d(t,"checkValidEnum",(function(){return a})),n.d(t,"checkValidUID",(function(){return f})),n.d(t,"isValidString",(function(){return m})),n.d(t,"isValidNumber",(function(){return g})),n.d(t,"isValidBoolean",(function(){return y})),n.d(t,"isASCII",(function(){return b})),n.d(t,"isInteger",(function(){return S})),n.d(t,"isNumber",(function(){return T})),n.d(t,"isString",(function(){return I})),n.d(t,"isArray",(function(){return N})),n.d(t,"isEmpty",(function(){return w})),n.d(t,"isValidToken",(function(){return E})),n.d(t,"isValidChannelName",(function(){return _}));var r=n(11),i=n.n(r),o=n(10),s=n(0),a=function(e,t,n){for(var r=0;r<n.length;r++)if(e===n[r])return!0;throw new Error("".concat(t," can only be set as ").concat(JSON.stringify(n)))},c=function(e,t){if(!e)throw new Error("Invalid param: ".concat(t||"param"," cannot be empty"));if("object"!==i()(e))throw new Error("".concat(t||"This paramter"," is of the object type"));return!0},l=function(e,t,n,r,i){if(w(n)&&(n=1),r=r||255,w(i)&&(i=!0),w(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!m(e,n,r,i))throw new Error("Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))},u=function(e,t,n,r){if(w(n)&&(n=1),r=r||1e4,w(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!g(e,n,r))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(n,",").concat(r,"]. integer only"))},d=function(e,t){if(!Array.isArray(e))throw new Error("".concat(t," should be an array"))},p=function(e,t,n,r){if(null==e)throw new Error("".concat(t||"param"," cannot be null"));if(w(n)&&(n=0),r=r||1e4,w(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!v(e,n,r))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(n,",").concat(r,"]."))},h=function(e,t){if(w(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!y(e))throw new Error("Invalid ".concat(t||"boolean param",": The value is of the boolean type."))},f=function(e){if(!Object(o.is32Uint)(e)&&!m(e,1,255))throw s.default.error("Invalid UID ".concat(e," ").concat(i()(e))),new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")},m=function(e,t,n,r){return t||(t=0),n||(n=Number.MAX_SAFE_INTEGER),w(r)&&(r=!0),I(e)&&(!r||b(e))&&e.length>=t&&e.length<=n},g=function(e,t,n){return S(e)&&e>=t&&e<=n},v=function(e,t,n){return T(e)&&e>=t&&e<=n},y=function(e){return"boolean"==typeof e},E=function(e){return m(e,1,2047)},_=function(e){return I(e)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e)},b=function(e){if("string"==typeof e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}},S=function(e){return"number"==typeof e&&e%1==0},T=function(e){return"number"==typeof e},I=function(e){return"string"==typeof e},N=function(e){return e instanceof Array},w=function(e){return null==e}},function(e,t,n){"use strict";n.r(t),n.d(t,"getBrowserInfo",(function(){return y})),n.d(t,"getBrowserVersion",(function(){return p})),n.d(t,"getBrowserOS",(function(){return h})),n.d(t,"isChrome",(function(){return r})),n.d(t,"isSafari",(function(){return i})),n.d(t,"isFireFox",(function(){return s})),n.d(t,"isOpera",(function(){return a})),n.d(t,"isEdge",(function(){return o})),n.d(t,"isQQBrowser",(function(){return c})),n.d(t,"isWeChatBrowser",(function(){return l})),n.d(t,"isLegacyChrome",(function(){return m})),n.d(t,"isSupportedPC",(function(){return u})),n.d(t,"isSupportedMobile",(function(){return d})),n.d(t,"getChromeKernelVersion",(function(){return v})),n.d(t,"isChromeKernel",(function(){return f}));var r=function(){var e=y();return e.name&&"Chrome"===e.name},i=function(){var e=y();return e.name&&"Safari"===e.name},o=function(){var e=y();return e.name&&"Edge"===e.name},s=function(){var e=y();return e.name&&"Firefox"===e.name},a=function(){var e=y();return e.name&&"OPR"===e.name},c=function(){var e=y();return e.name&&"QQBrowser"===e.name},l=function(){var e=y();return e.name&&"MicroMessenger"===e.name},u=function(){var e=h();return"Linux"===e||"Mac OS X"===e||"Mac OS"===e||-1!==e.indexOf("Windows")},d=function(){var e=h();return"Android"===e||"iOS"===e},p=function(){return y().version},h=function(){return y().os},f=function(){return!!navigator.userAgent.match(/chrome\/[\d]+/i)};function m(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var g,v=function(){var e=navigator.userAgent.match(/chrome\/[\d]+/i);return e&&e[0]&&e[0].split("/")[1]},y=(g=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===n[1]&&null!=(e=t.match(/(OPR(?=\/))\/?(\d+)/i))&&(n=e),"Safari"===n[1]&&null!=(e=t.match(/version\/(\d+)/i))&&(n[2]=e[1]),~t.toLowerCase().indexOf("qqbrowser")&&null!=(e=t.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("micromessenger")&&null!=(e=t.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("edge")&&null!=(e=t.match(/(edge(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("trident")&&null!=(e=/\brv[ :]+(\d+)/g.exec(t)||[])&&(n=[null,"IE",e[1]]);var r=void 0,i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var o in i){var s=i[o];if(s.r.test(navigator.userAgent)){r=s.s;break}}return{name:n[1],version:n[2],os:r}}(),function(){return g})},function(e,t,n){"use strict";n.r(t),n.d(t,"APErrorCode",(function(){return r})),n.d(t,"GatewayErrorCode",(function(){return i})),n.d(t,"StringUidErrorCode",(function(){return o})),n.d(t,"JOIN_GS_TRYNEXT_LIST",(function(){return s})),n.d(t,"JOIN_CS_RETRY_LIST",(function(){return a})),n.d(t,"JOIN_PROXY_RETRY_LIST",(function(){return c})),n.d(t,"INJECT_STREAM_STATUS",(function(){return l})),n.d(t,"WEBSOCKET_CLOSE_REASON",(function(){return u}));var r={1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY",2010016:"USER_OVERLOAD",2010018:"FORBIDDEN_REGION",2010019:"CANNOT_MEET_AREA_DEMAND"},i={2e3:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",2028:"ILLEGAL_AES_PASSWORD",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},o={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},s=["ERR_NO_VOCS_AVAILABLE","ERR_NO_VOS_AVAILABLE","ERR_JOIN_CHANNEL_TIMEOUT","WARN_LOOKUP_CHANNEL_TIMEOUT","WARN_OPEN_CHANNEL_TIMEOUT","ERR_VOM_SERVICE_UNAVAILABLE","ERR_TOO_MANY_USERS","ERR_MASTER_VOCS_UNAVAILABLE","ERR_INTERNAL_ERROR"],a=["NO_SERVICE_AVAILABLE"],c=["NO_SERVICE_AVAILABLE","REQUEST_PROXY_SERVER_FAILED","REQUEST_PROXY_SERVER_TIME_OUT"],l={INJECT_STREAM_STATUS_START_SUCCESS:0,INJECT_STREAM_STATUS_START_ALREADY_EXISTS:1,INJECT_STREAM_STATUS_START_UNAUTHORIZED:2,INJECT_STREAM_STATUS_START_TIMEDOUT:3,INJECT_STREAM_STATUS_START_FAILED:4,INJECT_STREAM_STATUS_STOP_SUCCESS:5,INJECT_STREAM_STATUS_STOP_NOT_FOUND:6,INJECT_STREAM_STATUS_STOP_UNAUTHORIZED:7,INJECT_STREAM_STATUS_STOP_TIMEDOUT:8,INJECT_STREAM_STATUS_STOP_FAILED:9,INJECT_STREAM_STATUS_BROKEN:10},u={WS_DISCONNECT:"WS_DISCONNECT"};t.default={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",NO_TRACK_IN_STREAM:"NO_TRACK_IN_STREAM",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n(0);var r=function(e,t,n){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight","VideoPublishDuration","AudioPublishDuration"].indexOf(t)>-1&&("string"==typeof n||isFinite(n)))return e[t]=""+n},i=function(e){var t={};return e.forEach((function(e){e.id&&e.type&&(-1===e.id.indexOf("send")&&-1===e.type.toLowerCase().indexOf("outbound")&&-1===e.id.indexOf("outbound_rtp")&&-1===e.id.indexOf("OutboundRTP")||("audio"===e.mediaType?(r(t,"audioSendBytes",e.bytesSent),r(t,"audioSendPackets",e.packetsSent),r(t,"audioSendPacketsLost",e.packetsLost)):(r(t,"videoSendBytes",e.bytesSent),r(t,"videoSendPackets",e.packetsSent),r(t,"videoSendPacketsLost",e.packetsLost),r(t,"videoSendFrameRate",e.googFrameRateSent),r(t,"videoSendResolutionWidth",e.googFrameWidthSent),r(t,"videoSendResolutionHeight",e.googFrameHeightSent))))})),t},o=function(e){var t={};return e.forEach((function(e){e.id&&e.type&&(-1===e.id.indexOf("recv")&&-1===e.type.toLowerCase().indexOf("inbound")&&-1===e.id.indexOf("inbound_rtp")&&-1===e.id.indexOf("inbound-rtp")&&-1===e.id.indexOf("InboundRTP")||("audio"===e.mediaType?(r(t,"audioReceiveBytes",e.bytesReceived),r(t,"audioReceivePackets",e.packetsReceived),r(t,"audioReceivePacketsLost",e.packetsLost)):(r(t,"videoReceiveBytes",e.bytesReceived),r(t,"videoReceivePacketsLost",e.packetsLost),r(t,"videoReceivePackets",e.packetsReceived),r(t,"videoReceiveFrameRate",e.googFrameRateReceived),r(t,"videoReceiveDecodeFrameRate",e.googFrameRateDecoded),r(t,"videoReceiveResolutionWidth",e.googFrameWidthReceived),r(t,"videoReceiveResolutionHeight",e.googFrameHeightReceived))))})),t}},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n(0),i=function(){var e={dispatcher:{}};return e.dispatcher.eventListeners={},e.addEventListener=function(t,n){void 0===e.dispatcher.eventListeners[t]&&(e.dispatcher.eventListeners[t]=[]),e.dispatcher.eventListeners[t].push(n)},e.hasListeners=function(t){return!(!e.dispatcher.eventListeners[t]||!e.dispatcher.eventListeners[t].length)},e.on=e.addEventListener,e.removeEventListener=function(t,n){var r;e.dispatcher.eventListeners[t]&&-1!==(r=e.dispatcher.eventListeners[t].indexOf(n))&&e.dispatcher.eventListeners[t].splice(r,1)},e.dispatchEvent=function(t){var n;for(n in e.dispatcher.eventListeners[t.type])if(e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(n)&&"function"==typeof e.dispatcher.eventListeners[t.type][n])try{e.dispatcher.eventListeners[t.type][n](t)}catch(n){r.default.debug("[".concat(e.clientId,"] Error in ").concat(t.type," event"),n)}},e.dispatchSocketEvent=function(t){var n;for(n in e.dispatcher.eventListeners[t.type])e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(n)&&"function"==typeof e.dispatcher.eventListeners[t.type][n]&&e.dispatcher.eventListeners[t.type][n](t.msg)},e},o=function(e){var t={};return t.type=e.type,t},s=function(e){var t=o(e);return t.stream=e.stream,t.reason=e.reason,t.msg=e.msg,t},a=function(e){var t=o(e);return t.uid=e.uid,t.attr=e.attr,t.stream=e.stream,t},c=function(e){var t=o(e);return t.msg=e.msg,t},l=function(e){var t=o(e);return t.url=e.url,t.uid=e.uid,t.status=e.status,t.reason=e.reason,t}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=a(n(69)),l=n(2),u=a(n(0)),d=n(3),p=n(14),h=n(10),f=function(e){function t(t,n){var r=e.call(this)||this;return r._state=E.RELAY_STATE_IDLE,r._onStatus=function(e){u.default.debug("["+r.clientId+"] ChannelMediaStatus: "+JSON.stringify(e)),e&&e.command&&("onAudioPacketReceived"===e.command&&r.emit("event",y.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&r.emit("event",y.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(r._state=E.RELAY_STATE_FAILURE,r.emit("state",E.RELAY_STATE_FAILURE,_.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===e.command&&(r._state=E.RELAY_STATE_FAILURE,r.emit("state",E.RELAY_STATE_FAILURE,_.DEST_TOKEN_EXPIRED,e.channelName?{came:e.channelName}:null)))},r._onClose=function(){return o(r,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:if(u.default.debug("["+this.clientId+"] ChannelMediaSocket onClose"),this.emit("event",y.NETWORK_DISCONNECTED),this.state=E.RELAY_STATE_IDLE,!this._prevChannelMediaConfig)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startChannelMediaRelay(this._prevChannelMediaConfig)];case 2:return t.sent(),[3,4];case 3:return(e=t.sent())instanceof S&&(e.message===g.WS_ABORT||e.message===g.AP_REQUEST_ABORT)?[2]:(this.emit("state",E.RELAY_STATE_FAILURE,_.SERVER_CONNECTION_LOST),[3,4]);case 4:return[2]}}))}))},r.token=t.appId,r.appId=t.appId,r.cname=t.cname,r.uid=t.uid,r.sid=t.sid,r.clientId=n,r}return i(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){var t=this._state;this._state=e,t!==e&&this.emit("state",e)},enumerable:!0,configurable:!0}),t.prototype.startChannelMediaRelay=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:if(this.state!==E.RELAY_STATE_IDLE)throw new S(g.BAD_STATE);return this.state=E.RELAY_STATE_CONNECTING,[4,this._connect()];case 1:return t.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: connect success"),[4,this._sendStartRelayMessage(e)];case 2:return t.sent(),this._prevChannelMediaConfig=e,[2]}}))}))},t.prototype.updateChannelMediaRelay=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:if(this.state!==E.RELAY_STATE_RUNNING)throw new S(g.BAD_STATE);return[4,this._sendUpdateMessage(e)];case 1:return t.sent(),this._prevChannelMediaConfig=e,[2]}}))}))},t.prototype.stopChannelMediaRelay=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._sendStopRelayMessage()];case 1:return e.sent(),u.default.debug("["+this.clientId+"] stopChannelMediaRelay: send stop message success"),this.state=E.RELAY_STATE_IDLE,this.dispose(),[2]}}))}))},t.prototype.dispose=function(){u.default.debug("["+this.clientId+"] disposeChannelMediaRelay"),this.state=E.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()},t.prototype._requestOneAP=function(e){var t=this;return new Promise((function(n,r){var i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:"",ts:+new Date,version:l.VERSION,cname:t.cname,uid:t.uid+"",seq:1,requestId:1},o={service_name:"tele_channel",json_body:JSON.stringify(i)},s="https://"+e;p.post(s,o,(function(e){var t=null,i=null;try{t=JSON.parse(e)}catch(e){r(new S(g.AP_JSON_PARSE_ERROR,e))}0!==t.code&&r(new S(g.AP_REQUEST_ERROR,t));try{i=JSON.parse(t.json_body)}catch(e){r(new S(g.AP_JSON_PARSE_ERROR,e))}200!==i.code&&r(new S(g.AP_REQUEST_ERROR,i)),i.servers?n(i.servers):r(new S(g.AP_JSON_PARSE_ERROR,i))}),(function(e){return r(e)}),{"X-Packet-Service-Type":0,"X-Packet-URI":61})}))},t.prototype._requestAP=function(){var e=this,t=l.getParameter("UAP_AP");return new Promise((function(n,r){setTimeout((function(){r(new S(g.AP_REQUEST_TIMEOUT))}),5e3),e.on("dispose",(function(){r(new S(g.AP_REQUEST_ABORT))})),t.forEach((function(t){t+="/api/v1",e._requestOneAP(t).then((function(r){u.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" success: "+JSON.stringify(r));var i=r[0],o="wss://"+i.address.replace(/\./g,"-")+".edge.agora.io:"+i.wss;n(o)})).catch((function(n){u.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" failed: "+JSON.stringify(n))}))}))}))},t.prototype._connectWebsocket=function(e){return this._signal=new b(this.appId,this.cname,this.uid,this.sid),this._signal.connect(e)},t.prototype._connect=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,this._requestAP()];case 1:return e=t.sent(),[4,this._connectWebsocket(e)];case 2:return t.sent(),this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",y.NETWORK_CONNECTED),[2]}}))}))},t.prototype._sendStartRelayMessage=function(e){return o(this,void 0,void 0,(function(){var t,n,r,i,o,a;return s(this,(function(s){switch(s.label){case 0:return this._checkSignal(),t=this._genMessage(v.StopPacketTransfer),[4,this._signal.request(t)];case 1:return s.sent(),[4,this._signal.waitStatus("Normal Quit")];case 2:return s.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: StopPacketTransfer success"),n=this._genMessage(v.SetSdkProfile,e),[4,this._signal.request(n)];case 3:return s.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSdkProfile success"),r=this._genMessage(v.SetSourceChannel,e),[4,this._signal.request(r)];case 4:return s.sent(),[4,this._signal.waitStatus("SetSourceChannelStatus")];case 5:return s.sent(),this.emit("event",y.PACKET_JOINED_SRC_CHANNEL),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceChannel success"),i=this._genMessage(v.SetSourceUserId,e),[4,this._signal.request(i)];case 6:return s.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceUserId success"),o=this._genMessage(v.SetDestChannel,e),[4,this._signal.request(o)];case 7:return s.sent(),[4,this._signal.waitStatus("SetDestChannelStatus")];case 8:return s.sent(),this.emit("event",y.PACKET_JOINED_DEST_CHANNEL),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetDestChannel success"),a=this._genMessage(v.StartPacketTransfer,e),[4,this._signal.request(a)];case 9:return s.sent(),this.emit("event",y.PACKET_SENT_TO_DEST_CHANNEL),this.state=E.RELAY_STATE_RUNNING,u.default.debug("["+this.clientId+"] startChannelMediaRelay: StartPacketTransfer success"),[2]}}))}))},t.prototype._sendReconnectMessage=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return this._checkSignal(),t=this._genMessage(v.Reconnect,e),[4,this._signal.request(t)];case 1:return n.sent(),[2]}}))}))},t.prototype._sendUpdateMessage=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return this._checkSignal(),t=this._genMessage(v.UpdateDestChannel,e),[4,this._signal.request(t)];case 1:return n.sent(),this.emit("event",y.PACKET_UPDATE_DEST_CHANNEL),u.default.debug("["+this.clientId+"] sendUpdateMessage: UpdateDestChannel success"),[2]}}))}))},t.prototype._sendStopRelayMessage=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return this._checkSignal(),e=this._genMessage(v.StopPacketTransfer),[4,this._signal.request(e)];case 1:return t.sent(),u.default.debug("["+this.clientId+"] sendStopRelayMessage: StopPacketTransfer success"),[2]}}))}))},t.prototype._genMessage=function(e,t){var n=this,r=[],i=[],o=[],s={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:l.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},a=null;switch(e){case v.SetSdkProfile:return s.clientRequest={command:"SetSdkProfile",type:"multi_channel"},s;case v.SetSourceChannel:return a=t.getSrcChannelMediaInfo(),s.clientRequest={command:"SetSourceChannel",uid:a.uid+"",channelName:a.channelName,token:a.token||this.appId},s;case v.SetSourceUserId:return a=t.getSrcChannelMediaInfo(),s.clientRequest={command:"SetSourceUserId",uid:this.uid+""},s;case v.SetDestChannel:return t.getDestChannelMediaInfos().forEach((function(e){r.push(e.channelName),i.push(e.uid+""),o.push(e.token||n.appId)})),s.clientRequest={command:"SetDestChannel",channelName:r,uid:i,token:o},s;case v.StartPacketTransfer:return s.clientRequest={command:"StartPacketTransfer"},s;case v.Reconnect:return s.clientRequest={command:"Reconnect"},s;case v.StopPacketTransfer:return s.clientRequest={command:"StopPacketTransfer"},s;case v.UpdateDestChannel:return t.getDestChannelMediaInfos().forEach((function(e){r.push(e.channelName),i.push(e.uid+""),o.push(e.token||n.appId)})),s.clientRequest={command:"UpdateDestChannel",channelName:r,uid:i,token:o},s}},t.prototype._checkSignal=function(){if(!this._signal||!this._signal.isConnect())throw new S(g.WS_DISCONNECTED)},t}(c.default);t.default=f;var m=function(){function e(){this.destChannelMediaInfos=new Map}return e.prototype.setSrcChannelInfo=function(e){d.checkValidObject(e,"srcInfo");var t=e.uid,n=e.channelName,r=e.token;if(r&&!d.isValidToken(r))throw new Error("Invalid token in SrcChannelInfo");if(!d.isValidChannelName(n))throw new Error("Invalid channelName in SrcChannelInfo");if(!h.is32Uint(t))throw new Error("Invalid uid in SrcChannelInfo");this.srcChannelMediaInfo=e},e.prototype.setDestChannelInfo=function(e,t){if(!d.isValidChannelName(e))throw new Error("Invalid channelName in DestChannelInfo");d.checkValidObject(t,"destInfo");var n=t.uid,r=t.token,i=t.channelName;if(r&&!d.isValidToken(r))throw new Error("Invalid token in DestChannelInfo");if(!d.isValidChannelName(i))throw new Error("Invalid channelName in DestChannelInfo");if(!h.is32Uint(n))throw new Error("Invalid uid in DestChannelInfo");this.destChannelMediaInfos.set(e,t)},e.prototype.removeDestChannelInfo=function(e){if(!d.isValidChannelName(e))throw new Error("Invalid channelName when invoke removeDestChannelInfo");this.destChannelMediaInfos.delete(e)},e.prototype.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},e.prototype.getDestChannelMediaInfos=function(){return this.destChannelMediaInfos},e}();t.ChannelMediaRelayConfiguration=m;var g,v,y,E,_,b=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o._onOpen=function(){o.emit("open")},o._onClose=function(e){o.emit("close"),o.dispose()},o._onMessage=function(e){var t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(o.emit("status",t.serverStatus),void o.emit(t.serverStatus.command,t.serverStatus)):void 0;o.emit("req_"+t.requestId,t)},o._requestId=1,o.appId=t,o.cname=n,o.uid=r,o.sid=i,o}return i(t,e),t.prototype.isConnect=function(){return this._ws&&this._ws.readyState===WebSocket.OPEN},t.prototype.sendMessage=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new S(g.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,e.seq=t,this._ws.send(JSON.stringify(e)),t},t.prototype.waitStatus=function(e){var t=this;return new Promise((function(n,r){var i=window.setTimeout((function(){r(new S(g.WAIT_STATUS_TIMEOUT,e))}),5e3);t.once(e,(function(t){clearTimeout(i),t.state&&0!==t.state?r(new S(g.WAIT_STATUS_ERROR,e)):n()})),t.once("dispose",(function(){clearTimeout(i),r(new S(g.WS_ABORT))}))}))},t.prototype.request=function(e){var t=this;return new Promise((function(n,r){var i=t.sendMessage(e),o=window.setTimeout((function(){t.removeAllListeners("req_"+i),r(new S(g.REQUEST_TIMEOUT))}),3e3);t.once("req_"+i,(function(e){clearTimeout(o),e&&200===e.code?n(e):r(new S(g.REQUEST_FAILED,e))})),t.once("dispose",(function(){clearTimeout(o),r(new S(g.WS_ABORT))}))}))},t.prototype.connect=function(e){var t=this;return new Promise((function(n,r){t._ws=new WebSocket(e),t._ws.onopen=function(){t._onOpen(),t._prvUrl=e,t._ws.onmessage=t._onMessage,t._ws.onclose=t._onClose,t._startHeartBeatCheck(),n()},t._ws.onclose=function(e){t._ws=null,r(new S(g.CONNECT_FAILED,"websocket error code: "+e.code))},setTimeout((function(){t._ws&&t._ws.readyState!==WebSocket.OPEN&&(t._ws.onopen=null,t._ws.onclose=null,t._ws.close(),t._ws=null,r(new S(g.CONNECT_TIMEOUT)))}),5e3),t.once("dispose",(function(){r(new S(g.WS_ABORT))}))}))},t.prototype.dispose=function(){this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.close()),this._ws=null},t.prototype._sendPing=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new S(g.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,this._ws.send(JSON.stringify(e)),t},t.prototype._startHeartBeatCheck=function(){var e=this;this._heartBeatTimer=window.setInterval((function(){e._sendPing({command:"ping",appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid,ts:+new Date,requestId:0})}),3e3)},t.prototype._clearHeartBeatCheck=function(){window.clearInterval(this._heartBeatTimer)},t}(c.default),S=function(e,t,n){void 0===e&&(e=""),this.code=n,this.data=t,this.message=e};t.ChannelMediaError=S,function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(g=t.CHANNEL_MEDIA_ERROR||(t.CHANNEL_MEDIA_ERROR={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(v||(v={})),function(e){e[e.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",e[e.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",e[e.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",e[e.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",e[e.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",e[e.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",e[e.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",e[e.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",e[e.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e[e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(y=t.CHANNEL_MEDIA_RELAY_EVENT||(t.CHANNEL_MEDIA_RELAY_EVENT={})),function(e){e[e.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",e[e.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",e[e.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",e[e.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(E=t.CHANNEL_MEDIA_RELAY_STATE||(t.CHANNEL_MEDIA_RELAY_STATE={})),function(e){e[e.RELAY_OK=0]="RELAY_OK",e[e.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",e[e.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",e[e.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",e[e.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",e[e.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",e[e.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",e[e.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",e[e.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",e[e.INTERNAL_ERROR=9]="INTERNAL_ERROR",e[e.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",e[e.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",e[e.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",e[e.RELAY_NOT_START=13]="RELAY_NOT_START",e[e.OPERATION_ABORT=14]="OPERATION_ABORT"}(_=t.CHANNEL_MEDIA_RELAY_ERROR||(t.CHANNEL_MEDIA_RELAY_ERROR={}))},function(e,t,n){"use strict";n.r(t),n.d(t,"isLiveTranscodingValid",(function(){return _})),n.d(t,"generateSessionId",(function(){return v})),n.d(t,"audioLevelHelper",(function(){return f})),n.d(t,"vsResHack",(function(){return y})),n.d(t,"is32Uint",(function(){return E})),n.d(t,"safeCall",(function(){return d})),n.d(t,"random",(function(){return S})),n.d(t,"popBanTip",(function(){return N})),n.d(t,"lengthInUtf8Bytes",(function(){return T})),n.d(t,"audioTimerLoop",(function(){return I})),n.d(t,"generateId",(function(){return g})),n.d(t,"uint8ArrayToBase64",(function(){return p})),n.d(t,"base64ToUint8Array",(function(){return h}));var r=n(11),i=n.n(r),o=n(4),s=n(0),a=n(28),c=n.n(a),l=n(25),u=n(15),d=function(){var e=arguments[0];if("function"==typeof e){var t=Array.prototype.slice.call(arguments,1);e.apply(null,t)}},p=function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)},h=function(e){for(var t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length)),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n},f=function(e){return this.audioContext=Object(l.a)(),this.sourceNode=e.otWebkitAudioSource||this.audioContext.createMediaStreamSource(e),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var e=0,t=0;t<this.timeDomainData.length;t++)e=Math.max(e,Math.abs(this.timeDomainData[t]-128));return e/128}return s.default.warning("can't find analyser in audioLevelHelper"),0},this},m=1e4;function g(){return++m}function v(){return c()().replace(/-/g,"").toUpperCase()}var y=function(e,t,n){try{s.default.debug("start vsResHack",e);var r=document.createElement("video");r.setAttribute("autoplay",""),r.setAttribute("muted",""),r.muted=!0,r.setAttribute("playsinline",""),r.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(r);var i=!1;r.addEventListener("playing",(function(n){o.isFireFox()?r.videoWidth&&(i=!0,s.default.debug("[vsResHack] get stream resolution: ","".concat(r.videoWidth," x ").concat(r.videoHeight),e),t(r.videoWidth,r.videoHeight),r.srcObject=null,r.remove()):(i=!0,s.default.debug("[vsResHack] get stream resolution: ","".concat(r.videoWidth," x ").concat(r.videoHeight),e),t(r.videoWidth,r.videoHeight),r.srcObject=null,r.remove())})),Object(u.setSrcObject)(r,e),r.play().catch((function(){})),setTimeout((function(){!i&&r&&(t(r.videoWidth,r.videoHeight),r.srcObject=null,r.remove())}),4e3)}catch(e){n(e)}},E=function(e){return"number"==typeof e&&0<=e&&e<=4294967295},_=function(e){var t=["lowLatency","userConfigExtraInfo","transcodingUsers"];for(var n in e)if("lowLatency"===n&&"boolean"!=typeof e[n]||"userConfigExtraInfo"===n&&"object"!==i()(e[n])||"transcodingUsers"===n&&!b(e[n])||!~t.indexOf(n)&&"number"!=typeof e[n])throw new Error("Param ["+n+"] is inValid");return!0},b=function(e){for(var t=0;t<e.length;t++)for(var n in e[t])if("number"!=typeof e[t][n])throw new Error("Param user["+t+"] - ["+n+"] is inValid");return!0},S=function(e){isNaN(e)&&(e=1e3);var t=+new Date,n=(t=(9301*t+49297)%233280)/233280;return Math.ceil(n*e)},T=function(e){var t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)},I=function(e,t){var n=1/t,r=Object(l.a)(),i=r.createGain();i.gain.value=0,i.connect(r.destination);var o=!1;return function t(){var s=r.createOscillator();s.onended=t,s.connect(i),s.start(0),s.stop(r.currentTime+n),e(r.currentTime),o&&(s.onended=function(){})}(),function(){o=!0}},N=function(){if(!document.getElementById("agora-ban-tip")){var e=document.createElement("div");e.id="agora-ban-tip",e.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(e);var t=document.createElement("div");t.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",e.append(t);var n=document.createElement("div");n.style="height: 76px; display: flex; justify-content: center; align-items: center;";var r=document.createElement("span");r.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",r.innerText="!";var i=document.createElement("span");i.innerText="This browser does not support webRTC",n.append(r),n.append(i);var o=document.createElement("div");o.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",o.innerText="OK",t.append(n),t.append(o),o.onclick=function(){var e=document.getElementById("agora-ban-tip");e.parentNode.removeChild(e)}}}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){e.exports=n(64)},function(t,n,r){"use strict";var i=r(12),o=r.n(i),s=r(17),a=r.n(s),c=r(11),l=r.n(c),u=r(32),d=r.n(u),p=r(7),h=r.n(p),f=r(22),m=r(8),g=function(e){e&&e.apply(this,[].slice.call(arguments,1))},v=r(0),y=r(1),E=r(10),_=r(14),b=r(2),S=function(e){var t=Object(m.b)(e);t.needReconnect=!0,t.isTimeout=!1,t.isInit=!0,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),t.lastMsgTime=null,t.clientId=e.clientId,t.hostIndex=0,t.requestID=0,e.host instanceof Array?t.host=e.host:t.host=[e.host],t.getSendBytes=function(){return t.sendbytes},t.getRecvBytes=function(){return t.recvbytes},t.getDuration=function(){return Math.ceil((Date.now()-t.startTime)/1e3)},t.getURL=function(){return t.connection.url},t.reconnect=function(){t.isInit=!0,t.creatConnection()},t.connectNext=function(){t.isInit=!0,++t.hostIndex,v.default.debug("["+t.clientId+"] Gateway length:"+t.host.length+" current index:"+t.hostIndex),t.hostIndex>=t.host.length?t.dispatchEvent(Object(m.d)({type:"recover"})):t.creatConnection()},t.replaceHost=function(e){t.host=e||t.host,t.hostIndex=0,t.creatConnection()},t.creatConnection=function(){t.needReconnect=!0,t.lts=(new Date).getTime(),t.connection=new WebSocket("wss://"+t.host[t.hostIndex]),t.connection.binaryType="arraybuffer",t.turnConfig={};var n=e.proxyServerType;if(t.connection.url&&3!==n&&4!==n&&5!==n){var r=t.connection.url.match(/wss\:\/\/([^:]+):(\d+)/),i=t.host[t.hostIndex].split(":"),o=t.connection.url.match(/h=([^:]+)&p=(\d+)/);r?(t.turnConfig.url=r[1],Object(b.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(r[2])+30),Object(b.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(r[2])+30)):o?(t.turnConfig.url=o[1],Object(b.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(o[2])+30),Object(b.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(o[2])+30)):i&&(t.turnConfig.url=i[0],Object(b.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(i[1])+30),Object(b.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(i[1])+30))}t.connection.onopen=function(e){t.needReconnect=!0,t.isTimeout=!1,t.isInit=!1,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),Object(_.resetHTTPByetsCount)(),clearTimeout(t.timeoutCheck),t.dispatchEvent(Object(m.d)({type:"onopen",event:e,socket:t}))},t.connection.onmessage=function(e){if(e.data instanceof ArrayBuffer)t.dispatchEvent({type:"onBinaryData",data:e.data});else{t.recvbytes+=Object(E.lengthInUtf8Bytes)(e.data);var n=JSON.parse(e.data);t.lastMsgTime=Date.now(),n.hasOwnProperty("_id")?t.dispatchEvent(Object(m.d)({type:n._id,msg:n})):n.hasOwnProperty("_type")&&t.dispatchSocketEvent(Object(m.d)({type:n._type,msg:n._message}))}},t.connection.onclose=function(n){t.needReconnect?t.isTimeout||t.isInit?(v.default.debug("["+t.clientId+"] websockect connect timeout"),y.report.joinGateway(e.sid,{lts:t.lts,succ:!1,ec:"timeout",addr:t.connection.url}),t.connectNext()):(t.dispatchEvent(Object(m.d)({type:"disconnect",event:n})),t.requests&&t.requests instanceof Array&&(t.requests.map((function(e){e.callback("REQUEST_ABORT")})),t.requests=[])):(v.default.debug("["+t.clientId+"] websockect closeed"),g(e.onFailure,n),clearTimeout(t.timeoutCheck),t.dispatchEvent(Object(m.d)({type:"close",event:n})),t.connection.onopen=void 0,t.connection.onclose=void 0,t.connection.onerror=void 0,t.connection.onmessage=void 0,t.connection=void 0)},t.connection.onerror=function(e){},setTimeout((function(){t.connection&&t.connection.readyState!=WebSocket.OPEN&&(t.isTimeout=!0,t.connection.close())}),5e3)},t.creatConnection(),t.sendMessage=function(e,n){if(t.connection&&t.connection.readyState==WebSocket.OPEN){var r=JSON.stringify(e);t.sendbytes+=Object(E.lengthInUtf8Bytes)(r),t.connection.send(r)}else n({error:"Gateway not connected"})},t.disconnect=function(){t.needReconnect=!0,t.connection.close()},t.close=function(){t.needReconnect=!1,t.connection.onclose=void 0,t.connection.close(),clearInterval(t.requestTimer),t.requests&&t.requests instanceof Array&&(t.requests.map((function(e){e.callback("REQUEST_ABORT")})),t.requests=[])},t.sendSignalCommand=function(e,n){e._id="_request_"+t.requestID,t.requestID+=1,"publish_stats"!==e._type&&"subscribe_stats"!==e._type&&"publish_stats_low"!==e._type&&t.on(e._id,(function(r){r.msg&&n&&n(r.msg._result,r.msg.message),delete t.dispatcher.eventListeners[e._id]})),t.sendMessage(e,(function(e){e.reason="NOT_CONNECTED",n&&n(e.reason,e)}))},t.requests=[];var n=function(e){var n=t.requests.findIndex((function(t){return t.id===e.type}));if(n>=0)var r=t.requests.splice(n,1)[0];r&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.msg&&r.callback&&r.callback(e.msg._result,e.msg._message)):v.default.warning("Detached Response",e.type,e.msg)},r=function(e){var n=this,r=t.requests.findIndex((function(e){return e.id===n.id}));r>=0&&(n=t.requests.splice(r,1)[0]),n&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.reason="NOT_CONNECTED",n.callback&&n.callback(e.reason,e)):v.default.warning("handleSendError",n)};return t.sendRequest=function(e,i){e=h()({_id:"_request_"+t.requestID},e),t.requestID+=1;var o={id:e._id,timeoutCounter:0,stalledAt:Date.now(),message:e,callback:i};t.requests.push(o),t.addEventListener(e._id,n),t.sendMessage(e,r.bind(o))},t.checkRequestTimeout=function(){for(var e=Math.ceil(Object(b.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(b.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),n=t.requests.length-1;n>=0;n--){var r=t.requests[n];r.timeoutCounter>=e?(t.requests.splice(n,1),v.default.error("Request Timeout",r.timeoutCounter,r.message),r.callback&&r.callback("TIMEOUT")):r.timeoutCounter++}},clearInterval(t.requestTimer),t.requestTimer=setInterval(t.checkRequestTimeout,Object(b.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),t.sendReport=function(e){t.sendMessage(e,(function(){}))},t},T=function(e,t){var n={connect:function(){t.host=e,n.signal=S(t),n.on=n.signal.on,n.dispatchEvent=n.signal.dispatchEvent,n.signal.on("onopen",(function(e){n.signal.onEvent=function(e){n.dispatchEvent(Object(m.d)({type:e.event,msg:e}))},n.dispatchEvent(Object(m.d)({type:"connect",msg:e}))})),n.signal.on("onError",(function(e){var t=e.msg;onError(t.code,"error")}))},getLastMsgTime:function(){return n.signal&&n.signal.lastMsgTime},getSendBytes:function(){return n.signal.getSendBytes()},getRecvBytes:function(){return n.signal.getRecvBytes()},getDuration:function(){return n.signal.getDuration()},disconnect:function(){n.signal.disconnect()},close:function(){n.signal.close()},getURL:function(){return n.signal.getURL()},reconnect:function(){n.signal.reconnect()},connectNext:function(){n.signal.connectNext()},replaceHost:function(e){n.signal.replaceHost(e)},emitSimpleMessage:function(e,t){n.signal.sendSignalCommand(e,t)},emitRequest:function(e,t){n.signal.sendRequest(e,t)},emitReport:function(e){n.signal.sendReport(e)}};return n.connect(),n},I=r(23),N=r(5),w=r(20),C=r(4),O={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"tryNext",K_SERVICE_TOO_HEAVY:"tryNext",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},A={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",period_fir:"B_fir",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb",peer_publish_audio_duration:"B_ppad",peer_publish_video_duration:"B_ppvd"},R={};for(var M in A){var D=A[M];R[D]&&v.default.error("Key Conflict: ".concat(D,": ").concat(A[D],"| ").concat(M)),R[D]=M}var k=function(e){return A[e]||e},x=function(e){return R[e]||e},L=r(9),P=r.n(L),j=r(54),U=function t(n){var r=!1,i=function(e){return{_type:"control",_message:e}},s=function(e,t){var n={};return Object.keys(t).forEach((function(e){Object(b.getParameter)("STATS_FILTER")[e]||(n[k(e)]=t[e])})),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:e,stats:n}}},c=function(e){return{_type:"publish",_message:e}},u=function(e,t){var n={};return Object.keys(t).forEach((function(e){Object(b.getParameter)("STATS_FILTER")[e]||(n[k(e)]=t[e])})),{_type:"subscribe_stats",_message:{stream_id:e,stats:n}}},p=t.DISCONNECTED,_=t.CONNECTING,S=t.CONNECTED,A=t.DISCONNECTING,R=p,M=Object(m.b)(n);Object.defineProperty(M,"state",{set:function(e){var n=R;R=e,Object(w._setClientConnectionStateRecord)(M.clientId,e),e!==t.CONNECTED&&e!==t.DISCONNECTING&&(M.hasJoined=!1),n!==e&&M.dispatchEvent({type:"connection-state-change",prevState:t.connetionStateMap[n],curState:t.connetionStateMap[e]})},get:function(){return R}}),M.socket=void 0,M.state=p,M.mode=n.mode,M.role=n.role,M.codec=n.codec,M.config={},M.timers={},M.timer_counter={},M.localStreams={},M.remoteStreams={},M.remoteMuteState={},M.attemps=1,M.p2p_attemps=1,M.audioLevel={},M.activeSpeaker=void 0,M.reconnectMode="tryNext",M.rejoinAttempt=0,M.hasChangeBGPAddress=!1,M.traffic_stats={},M.clientId=n.clientId,M.pingpongCounter=0,M.hasInvokeLeave=!1,M.p2ps=new Map,M.liveStreams=new Map,M.injectLiveStreams=new Map,M.remoteStreamsInChannel=new Set,M.subscribeRequestId=new Map,M.publishRequestId=0,M.hasJoined=!1,M.isFirstSuccess=!0,M.peerPublishDurationMap=new Map,function(e){var t=g;e.makeRequest=function(n,r,i){if(void 0===e.socket)return v.default.debug("[".concat(e.clientId,"] No socket available")),void t(i,N.default.INVALID_OPERATION);try{e.socket.emitRequest(n,(function(e,t){var n;"success"===e?"function"==typeof r&&r(t):"function"==typeof i&&(n=t&&t.error_code&&N.GatewayErrorCode[t.error_code]?N.GatewayErrorCode[t.error_code]:t&&t.error_str?t.error_str:t&&t.error_code?"UNKNOW_ERROR_".concat(t.error_code):e,i(n,t))}))}catch(r){v.default.debug("[".concat(e.clientId,"] Socket emit message failed ").concat(JSON.stringify(n))),v.default.debug("[".concat(e.clientId,"] "),r),t(i,N.default.SOCKET_ERROR)}},e.makeReport=function(t){void 0===e.socket&&v.default.debug("[".concat(e.clientId,"] No socket available"));try{e.socket.emitReport(t)}catch(n){v.default.debug("[".concat(e.clientId,"] Socket emit report failed ").concat(JSON.stringify(t)))}}}(M),M.inChannelInfo={joinAt:null,duration:0},M._sendMessage=function(e,t){switch(e){case"SubscribeStats":M.makeReport(u.apply(void 0,d()(t)));break;case"SubscribeRelatedStats":M.makeReport(s.apply(void 0,d()(t)))}};var D=g;M.p2pCounter=Object(E.random)(1e5),M.generateP2PId=function(){return++M.p2pCounter},M.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},M.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},M.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},M.configPublisher=function(e){M.config=e},M.getGatewayInfo=function(e,t){M.makeRequest({_type:"gateway_info"},e,t)},M.setClientRole=function(e,t){v.default.debug("[".concat(M.clientId,"] setClientRole to ").concat(e));var n=y.report.reportApiInvoke(M.joinInfo.sid,{name:"_setClientRole",callback:t});M.makeRequest({_type:"set_client_role",_message:{role:e}},(function(){M.role=e,M.dispatchEvent({type:"client-role-changed",role:e}),n&&n(null,{role:e})}),(function(t,r){if(r&&r.code&&(t=N.GatewayErrorCode[r.code]||"UNKNOW_ERROR_"+r.code),"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE"===t)return n&&n(null);v.default.error("set Client role error to "+e+": "+t),n&&n(t)}))},M.join=function(e,t,r,i){M.hasInvokeLeave=!1,e.useProxyServer&&(M.hasChangeBGPAddress=!0);var o=(new Date).getTime(),s=e.uid;if(M.inChannelInfo.joinAt&&(M.inChannelInfo.duration+=o-M.inChannelInfo.joinAt),M.inChannelInfo.joinAt=o,M.state!==_)return v.default.error("[".concat(M.clientId,"] GatewayClient.join Failed: state "),M.state),i&&i(N.default.INVALID_OPERATION),void y.report.joinGateway(e.sid,{lts:o,succ:!1,ec:N.default.INVALID_OPERATION,addr:null});if(null!=s&&parseInt(s)!==s)return v.default.error("[".concat(M.clientId,"] Input uid is invalid")),M.state=p,i&&i(N.default.INVALID_PARAMETER),void y.report.joinGateway(e.sid,{lts:o,succ:!1,ec:N.default.INVALID_PARAMETER,addr:null});var a=F.register(M,{uid:s,cname:e&&e.cname});if(a)return M.state=p,i&&i(a),void y.report.joinGateway(e.sid,{lts:o,succ:!1,ec:a,addr:null});M.joinInfo=h()({},e),M.uid=s,M.key=t,M.pingpongCounter=0,V(e,(function(t){if(e.useLocalAccessPoint)try{var a=M.socket.signal.connection.url.match(/wss\:\/\/([^:]+):(\d+)/)[1];Object(b.setParameter)("EVENT_REPORT_DOMAIN",a),Object(b.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",a),Object(b.setParameter)("LOG_UPLOAD_SERVER","".concat(a,":6444"))}catch(e){v.default.debug("[".concat(M.clientId,"] LocalAccessPoint error: ").concat(e))}if(M.state===A||M.state===p)return i&&i("LEAVE_BEFORE_JOIN_SUCCESS");M.state=S,v.default.debug("[".concat(M.clientId,"] Connected to gateway server")),clearInterval(M.pingTimer),M.pingTimer=setInterval((function(){var e=Object(b.getParameter)("PING_PONG_TIME_OUT");if(++M.pingpongCounter>=e){var t=Date.now();M.socket&&v.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-M.socket.getLastMsgTime(),"ms")),M.socket&&M.socket.getLastMsgTime()&&t-M.socket.getLastMsgTime()>Object(b.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(M.pingpongCounter=0,M.socket.close(),M.socket.dispatchEvent(Object(m.d)({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var n=Date.now();M.makeRequest({_type:"ping"},(function(){M.pingpongCounter=0;var e=Date.now()-n;Object(b.getParameter)("REPORT_STATS")&&M.makeRequest({_type:"ping_back",_message:{pingpongElapse:e}})}),(function(e,t){"TIMEOUT"!==e&&(v.default.error("Ping Error ".concat(e," ").concat(JSON.stringify(t))),t&&t.error_code&&M.socket&&M.socket.signal&&M.socket.signal.connection&&M.socket.signal.connection.readyState===WebSocket.OPEN&&(v.default.info("Disconnecting websocket connection"),M.socket.signal.connection.close()))}))}),3e3),function(e,t){var r=e.role,i=h()({},M.joinInfo.apResponse),o={session_id:M.joinInfo.sid,app_id:n.appId,channel_key:M.key,channel_name:M.joinInfo.cname,sdk_version:b.VERSION,browser:navigator.userAgent,process_id:Object(y.getProcessId)(),mode:M.mode,codec:M.codec,role:r,has_changed_gateway:Object(b.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||M.hasChangeBGPAddress,ap_response:i,optionalInfo:M.joinInfo.optionalInfo,extend:Object(b.getParameter)("JOIN_EXTEND"),details:{}};if(M.joinInfo.hasOwnProperty("stringUid")&&(o.string_uid=M.joinInfo.stringUid),M.socket&&M.socket.signal&&M.socket.signal&&(i.addresses&&i.addresses[M.socket.signal.hostIndex]&&(o.ap_response.ticket=i.addresses[M.socket.signal.hostIndex].ticket,delete i.addresses),Object(b.getParameter)("SET_DEFAULT_TURNSERVER")&&M.socket.signal.turnConfig)){var s={username:M.joinInfo.uid.toString(),credential:M.joinInfo.token,forceturn:Object(b.getParameter)("FORCE_TURN")};s.url=M.socket.signal.turnConfig.url,M.socket.signal.turnConfig.tcpport&&(s.tcpport=""+M.socket.signal.turnConfig.tcpport),M.socket.signal.turnConfig.udpport&&(s.udpport=""+M.socket.signal.turnConfig.udpport),M.joinInfo.turnServers.find((function(e){if(e.url===s.url)return!0}))||M.joinInfo.turnServers.push(s)}3===M.joinInfo.proxyServerType&&(o.plugin="web_cloud_proxy",o.details.cservice_map="1"),M.joinInfo.aesmode&&M.joinInfo.aespassword?(o.aes_mode=M.joinInfo.aesmode,o.aes_encrypt=!0,M.joinInfo.aes_salt&&(o.aes_salt=M.joinInfo.aes_salt),Object(j.encryptRSA)(M.joinInfo.aespassword).then((function(e){o.aes_secret=e,M.dispatchEvent({type:"join-message-hook",joinMessage:o}),t(null,{_type:"join",_message:o})})).catch((function(e){v.default.error("[".concat(M.clientId,"] encrypt password failed "),e),t("ENCRYPT_PASSWORD_FAILED")}))):(M.dispatchEvent({type:"join-message-hook",joinMessage:o}),t(null,{_type:"join",_message:o}))}({role:M.role},(function(t,n){if(t)return i&&i(t);M.makeRequest(n,(function(t){if(y.report.joinGateway(e.sid,{lts:o,succ:!0,ec:null,vid:e.vid,uid:e.uid,addr:M.socket.getURL(),firstSuccess:M.isFirstSuccess}),M.joinSuccessLts=Date.now(),M.isFirstSuccess=!1,M.rejoinAttempt=0,M.hasJoined=!0,r&&r(t.uid),!0===t.return_vosip||!0===Object(b.getParameter)("ENABLE_LIVE_SERVER_LIST")){var n=null;try{n=M.socket.signal.connection.url}catch(e){v.default.debug("[".concat(M.clientId,"] Can not get gateway ip: ").concat(e))}n?Object(b.setParameter)("LIVE_SERVER_LIST",[n]):Object(b.setParameter)("LIVE_SERVER_LIST",[])}M.dispatchEvent({type:"join"}),clearInterval(M.timers.trafficStats),M.timers.trafficStats=setInterval((function(){M.makeRequest({_type:"traffic_stats"},(function(e){var t={};for(var n in e)t[x(n)]=e[n];if(t.peer_delay&&t.peer_delay.length){var r=[];t.peer_delay.forEach((function(e){var t={};for(var n in e)t[x(n)]=e[n];r.push(t)})),t.peer_delay=r}M.traffic_stats=t,M.traffic_stats.timestamp=Date.now();var i=M.joinInfo.stringUid,o=M.localStreams[s]||M.localStreams[i];o&&(o.traffic_stats={access_delay:t.access_delay}),t.peer_delay&&t.peer_delay.forEach((function(e){var n=M.remoteStreams[e.peer_uid];n&&(n.traffic_stats={access_delay:t.access_delay,e2e_delay:e.e2e_delay,audio_delay:e.audio_delay,video_delay:e.video_delay})})),M.dispatchEvent({type:"after-getTrafficStats",trafficStats:t})}))}),3e3)}),(function(t,n){if(v.default.error("[".concat(M.clientId,"] User join failed [").concat(t,"]")),"ERR_JOIN_BY_MULTI_IP"===t){try{y.report.joinGateway(e.sid,{lts:o,succ:!1,ec:"ERR_JOIN_BY_MULTI_IP",addr:M.socket.getURL()})}catch(e){}return M.dispatchEvent({type:"onMultiIP",option:n.option})}O[t]&&M.rejoinAttempt<4?M._doWithAction(O[t],r,i):i&&i(t),y.report.joinGateway(e.sid,{lts:o,succ:!1,ec:t,addr:M.socket&&M.socket.getURL()})}))}))}),(function(t){v.default.error("[".concat(M.clientId,"] User join failed [").concat(t,"]")),i&&i(t),y.report.joinGateway(e.sid,{lts:o,succ:!1,ec:t,addr:M.socket.getURL()})})),this.remoteMuteState={},M.resetAudioVolumeIndication()},M.leave=function(e,t){var n=F.unregister(M);switch(n&&v.default.debug("[".concat(M.clientId,"] "),n),M.p2ps.clear(),M.state){case p:return v.default.debug("[".concat(M.clientId,"] Client Already in DISCONNECTED status")),void D(e);case A:return v.default.debug("[".concat(M.clientId,"] Client Already in DISCONNECTING status")),void D(t,N.default.INVALID_OPERATION);case _:return M.socket&&M.socket.close(),M.socket=void 0,v.default.info("[".concat(M.clientId,"] Client connecting, Leave channel success")),M.state=p,e&&e()}for(var r in M.state=A,M.channelMediaConfig&&(M.channelMediaRelayController&&M.channelMediaRelayController.dispose(),M.channelMediaConfig,M.channelMediaRelayController=null),clearInterval(M.pingTimer),M.timers)M.timers.hasOwnProperty(r)&&clearInterval(M.timers[r]);for(var r in M.inChannelInfo.joinAt&&(M.inChannelInfo.duration+=Date.now()-M.inChannelInfo.joinAt,M.inChannelInfo.joinAt=null),M.hasJoined?M.makeRequest({_type:"leave"},(function(t){M.socket.close(),M.socket=void 0,v.default.info("[".concat(M.clientId,"] Leave channel success")),M.state=p,e&&e(t)}),(function(e){"TIMEOUT"!==e&&"REQUEST_ABORT"!==e&&(v.default.error("[".concat(M.clientId,"] Leave Channel Failed"),e),M.state=S,t&&t(e))})):(M.socket&&(M.socket.close(),M.socket=void 0),v.default.info("[".concat(M.clientId,"] Leave channel before joined")),M.state=p,e&&e()),M.localStreams)if(M.localStreams.hasOwnProperty(r)){var i=M.localStreams[r];delete M.localStreams[r],void 0!==i.pc&&(i.pc.close(),i.pc=void 0)}W()},M.publish=function(e,t,n,r){var o=(new Date).getTime(),s=!1;if(e.publishLTS=o,"object"!==l()(e)||null===e)return v.default.error("[".concat(M.clientId,"] Invalid local stream")),r&&r(N.default.INVALID_LOCAL_STREAM),void y.report.publish(M.joinInfo.sid,{lts:o,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:N.default.INVALID_LOCAL_STREAM});if(!e.stream&&void 0===e.url)return v.default.error("[".concat(M.clientId,"] Invalid local media stream")),r&&r(N.default.INVALID_LOCAL_STREAM),void y.report.publish(M.joinInfo.sid,{lts:o,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:N.default.INVALID_LOCAL_STREAM});if(M.state!==S)return v.default.error("[".concat(M.clientId,"] User is not in the session")),r&&r(N.default.INVALID_OPERATION),void y.report.publish(M.joinInfo.sid,{lts:o,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:N.default.INVALID_OPERATION});var a=e.getAttributes()||{};if(e.local&&void 0===M.localStreams[e.getId()]&&(e.hasAudio()||e.hasVideo()||e.hasScreen())){var u=M.generateP2PId();if(M.p2ps.set(u,e),e.p2pId=u,void 0!==e.url)H(c({state:"url",audio:e.hasAudio(),video:e.hasVideo(),attributes:e.getAttributes()},e.url),(function(t,n){"success"===t?(e.getUserId()!==n&&e.setUserId(n),M.localStreams[n]=e,e.onClose=function(){M.unpublish(e)}):v.default.error("[".concat(M.clientId,"] Publish local stream failed"),t)}));else{M.localStreams[e.getId()]=e,e.connectionSpec={callback:function(a){a||r&&r("CANNOT_GET_OFFER"),"motion"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-framerate"),"detail"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-resolution"),M.makeRequest(c({state:"offer",stream_type:1==t.streamType?"low":"high",p2p_id:u,sdp:a,audio:e.audio||e.screenAudio,video:e.screen||e.video,screen:e.screen,attributes:e.getAttributes(),dtx:e.DTX,hq:e.highQuality,lq:e.lowQuality,stereo:e.stereo,speech:e.speech,codec:M.codec,extend:Object(b.getParameter)("PUB_EXTEND")}),(function(t){e.getUserId()!==t.uid&&e.setUserId(t.uid),v.default.info("[".concat(M.clientId,"] Local stream published with uid"),t.uid),e.onClose=function(){M.unpublish(e)},e._onAudioUnmute=function(){M.makeReport(i({action:"unmute_local_audio",stream_id:e.getId()}))},e._onVideoUnmute=function(){M.makeReport(i({action:"unmute_local_video",stream_id:e.getId()}))},e._onAudioMute=function(){M.makeReport(i({action:"mute_local_audio",stream_id:e.getId()}))},e._onVideoMute=function(){M.makeReport(i({action:"mute_local_video",stream_id:e.getId()}))},e.getId()===e.getUserId()&&(e.isAudioOn()||e.hasAudio()&&(v.default.debug("[".concat(M.clientId,"] local stream audio mute")),e._onAudioMute()),e.isVideoOn()||(e.hasVideo()||e.hasScreen())&&(v.default.debug("[".concat(M.clientId,"] local stream video mute")),e._onVideoMute())),e.pc.oniceconnectionstatechange=function(t){if("failed"===t){if(null!=M.timers[e.getId()]&&(clearInterval(M.timers[e.getId()]),clearInterval(M.timers[e.getId()]+"_RelatedStats")),v.default.error("[".concat(M.clientId,"] Publisher connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(u)),M.p2ps.delete(u),v.default.debug("[".concat(M.clientId,"] publish p2p failed: "),M.p2ps),!s)return s=!0,y.report.publish(M.joinInfo.sid,{lts:o,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:N.default.PEERCONNECTION_FAILED,publishRequestid:M.publishRequestId||0,p2pid:u}),M.dispatchEvent(Object(m.a)({type:"pubP2PLost",stream:e})),r&&r(N.default.PEERCONNECTION_FAILED);M.dispatchEvent(Object(m.a)({type:"pubP2PLost",stream:e}))}else if("connected"===t&&(v.default.debug("[".concat(M.clientId,"] publish p2p connected: "),M.p2ps),e.getId()===e.getUserId()&&(e._isAudioMuted()?M.makeReport(i({action:"mute_local_audio",stream_id:e.getId()})):M.makeReport(i({action:"unmute_local_audio",stream_id:e.getId()})),e._isVideoMuted()?M.makeReport(i({action:"mute_local_video",stream_id:e.getId()})):M.makeReport(i({action:"unmute_local_video",stream_id:e.getId()}))),!s))return s=!0,y.report.publish(M.joinInfo.sid,{lts:o,succ:!0,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:null,publishRequestid:M.publishRequestId||0,p2pid:u}),n&&n()},e.pc.processSignalingMessage(t.sdp)}),(function(t,n){v.default.error("Publish Failed: ".concat(t)),y.report.publish(M.joinInfo.sid,{lts:o,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:t,publishRequestid:M.publishRequestId||0,p2pid:u}),"TIMEOUT"!=t&&(M.processPublishFailure(e),r&&r(t))}))},audio:e.hasAudio(),video:e.hasVideo(),screen:e.hasScreen(),optimizationMode:e.optimizationMode,isSubscriber:!1,stunServerUrl:M.stunServerUrl,turnServers:M.joinInfo.turnServers,maxAudioBW:a.maxAudioBW,minVideoBW:a.minVideoBW,maxVideoBW:a.maxVideoBW,mode:M.mode,codec:M.codec,isVideoMute:e.userMuteVideo||e.peerMuteVideo,isAudioMute:e.userMuteAudio||e.peerMuteAudio,maxFrameRate:e.attributes.maxFrameRate,agoraStream:e,clientId:M.clientId,isCloudProxy3:3===M.joinInfo.proxyServerType,onNoIceCandidate:function(){M.dispatchEvent({type:"no_ice_candidate",stream:e})}},e.pc=Object(I.a)(e.connectionSpec),e.pc.addStream(e.stream),v.default.debug("[".concat(M.clientId,"] PeerConnection add stream :"),e.stream),e.pc.onnegotiationneeded=function(n){"motion"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-framerate"),"detail"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-resolution");var r={state:"negotiation",stream_type:1===t.streamType?"low":"high",p2p_id:u,sdp:n};M.makeRequest(c(r),(function(t){v.default.debug("Negotating Stream ".concat(e.getId())),e.pc.processSignalingMessage(t.sdp)}),(function(e,t){v.default.error("Negotiation failed ".concat(e),t,r)}))},clearInterval(M.timers[e.getId()]),M.timers[e.getId()]=setInterval((function(){if(Object(b.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate((function(n){n.forEach((function(n){if(n&&n.id&&!(/_recv$/.test(n.id)||/^time$/.test(n.id)||~n.type.toLowerCase().indexOf("inbound"))&&e.getUserId()){if(-1===n.id.indexOf("outbound_rtp")&&-1===n.id.indexOf("OutboundRTP")&&-1===n.type.toLowerCase().indexOf("outbound")||"video"!==n.mediaType||(n.googFrameWidthSent=e.videoWidth+"",n.googFrameHeightSent=e.videoHeight+""),"video"===n.mediaType)try{var r=e.stream.getVideoTracks()[0];n.A_vstd=r.enabled?"0":"1"}catch(e){}if("audio"===n.mediaType)try{var i=e.stream.getAudioTracks()[0];n.A_astd=i.enabled?"0":"1"}catch(e){}if(e.getId()==e.getUserId()){var o=200*t;t++,setTimeout((function(){var e=M.socket&&M.socket.getLastMsgTime()&&Date.now()-M.socket.getLastMsgTime();e>Object(b.getParameter)("REPORT_STATS_TIMEOUT")?v.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(e)):M.makeReport(function(e){var t={};return Object.keys(e).forEach((function(n){Object(b.getParameter)("STATS_FILTER")[n]||(t[k(n)]=e[n])})),{_type:"publish_stats",_message:{stream_type:"high",stats:t}}}(n))}),o)}else o=200*t,t++,setTimeout((function(){var e=M.socket&&M.socket.getLastMsgTime()&&Date.now()-M.socket.getLastMsgTime();e>Object(b.getParameter)("REPORT_STATS_TIMEOUT")?v.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(e)):M.makeReport(function(e){var t={};return Object.keys(e).forEach((function(n){Object(b.getParameter)("STATS_FILTER")[n]||(t[k(n)]=e[n])})),{_type:"publish_stats",_message:{stream_type:"low",stats:t}}}(n))}),o)}}))}))}}),3e3);var d=function(){Object(b.getParameter)("REPORT_STATS")&&e&&e.pc&&e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats((function(t){var n,r,i=M.socket&&M.socket.getLastMsgTime()&&Date.now()-M.socket.getLastMsgTime();i>Object(b.getParameter)("REPORT_STATS_TIMEOUT")?v.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(i)):e.getId()===e.getUserId()?M.makeReport((n=t,r={},Object.keys(n).forEach((function(e){Object(b.getParameter)("STATS_FILTER")[e]||(r[k(e)]=n[e])})),{_type:"publish_related_stats",_message:{stream_type:"high",stats:r}})):M.makeReport(function(e){var t={};return Object.keys(e).forEach((function(n){Object(b.getParameter)("STATS_FILTER")[n]||(t[k(n)]=e[n])})),{_type:"publish_related_stats",_message:{stream_type:"low",stats:t}}}(t))}))};d(),clearInterval(M.timers[e.getId()+"_RelatedStats"]),M.timers[e.getId()+"_RelatedStats"]=setInterval(d,1e3)}}},M.unpublish=function(e,t,n,r){if("object"!==l()(e)||null===e)return v.default.error("[".concat(M.clientId,"] Invalid local stream")),void D(r,N.default.INVALID_LOCAL_STREAM);if(M.state!==S)return v.default.error("[".concat(M.clientId,"] User not in the session")),void D(r,N.default.INVALID_OPERATION);if(null!=M.timers[e.getId()]&&(clearInterval(M.timers[e.getId()]),clearInterval(M.timers[e.getId()+"_RelatedStats"])),void 0!==M.socket)if(e.local&&void 0!==M.localStreams[e.getId()]){delete M.localStreams[e.getId()];var i={stream_id:e.getUserId(),stream_type:1===t.streamType?"low":"high"};M.makeRequest({_type:"unpublish",_message:i}),(e.hasAudio()||e.hasVideo()||e.hasScreen())&&void 0===e.url&&void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,M.p2ps.delete(e.p2pId),n&&n()}else v.default.error("[".concat(M.clientId,"] Invalid local stream")),D(r,N.default.INVALID_LOCAL_STREAM);else v.default.error("[".concat(M.clientId,"] User not in the session")),D(r,N.default.INVALID_OPERATION)},M.subscribe=function(e,t,n){var r=(new Date).getTime();e.subscribeLTS=r;var o=!1;if(v.default.info("[".concat(M.clientId,"] Gatewayclient ").concat(M.uid," Subscribe ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),"object"!==l()(e)||null===e)return v.default.error("[".concat(M.clientId,"] Invalid remote stream")),n&&n(N.default.INVALID_REMOTE_STREAM),void y.report.subscribe(M.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:N.default.INVALID_REMOTE_STREAM});if(M.state!==S&&(v.default.error("[".concat(M.clientId,"] User is not in the session")),!o))return o=!0,y.report.subscribe(M.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:N.default.INVALID_OPERATION}),n&&n(N.default.INVALID_OPERATION);if(!e.local&&M.remoteStreams.hasOwnProperty(e.getId()))if(e.hasAudio()||e.hasVideo()||e.hasScreen()){var a=M.generateP2PId();M.p2ps.set(a,e),e.p2pId=a,e.pc=Object(I.a)({callback:function(t){t||n&&n("CANNOT_GET_OFFER");var i={stream_id:e.getId(),audio:!e.subscribeOptions||e.subscribeOptions.audio,video:!e.subscribeOptions||e.subscribeOptions.video,codec:M.codec,p2p_id:a,sdp:t,tcc:Object(b.getParameter)("SUBSCRIBE_TCC"),extend:Object(b.getParameter)("SUB_EXTEND")};M.makeRequest({_type:"subscribe",_message:i},(function(t){e.pc.processSignalingMessage(t.sdp)}),(function(t,i){v.default.error("[".concat(M.clientId,"] Subscribe remote stream Failed: ").concat(t,", closing stream "),e.getId(),i),y.report.subscribe(M.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:t}),"TIMEOUT"!=t&&(M.processSubscribeFailure(e),n&&n(t))}))},nop2p:!0,audio:!0,video:!0,screen:e.hasScreen(),isSubscriber:!0,stunServerUrl:M.stunServerUrl,turnServers:M.joinInfo.turnServers,isVideoMute:e.userMuteVideo,isAudioMute:e.userMuteAudio,uid:e.getId(),agoraStream:e,clientId:M.clientId}),e.pc.onaddstream=function(t,n){if(e._onAudioUnmute=function(){M.makeReport(i({action:"unmute_remote_audio",stream_id:e.getId()}),(function(){}),(function(){}))},e._onAudioMute=function(){M.makeReport(i({action:"mute_remote_audio",stream_id:e.getId()}),(function(){}),(function(){}))},e._onVideoUnmute=function(){M.makeReport(i({action:"unmute_remote_video",stream_id:e.getId()}),(function(){}),(function(){}))},e._onVideoMute=function(){M.makeReport(i({action:"mute_remote_video",stream_id:e.getId()}),(function(){}),(function(){}))},"ontrack"===n&&"video"===t.track.kind||"onaddstream"===n){v.default.info("[".concat(M.clientId,"] Remote stream subscribed with uid "),e.getId());var r=M.remoteStreams[e.getId()];if(M.remoteStreams[e.getId()].stream="onaddstream"===n?t.stream:t.streams[0],M.remoteStreams[e.getId()].hasVideo()){if(Object(C.isFireFox)()||Object(C.isSafari)()){var o=M.remoteStreams[e.getId()].stream;Object(E.vsResHack)(o,(function(t,n){e.videoWidth=t,e.videoHeight=n}),(function(e){return v.default.warning("[".concat(M.clientId,"] vsResHack failed: ")+e)}))}}else{var s=M.remoteStreams[e.getId()];s.peerMuteVideo=!0,M._adjustPCMuteStatus(s)}r&&r.isPlaying()&&r.elementID&&(v.default.debug("[".concat(M.clientId,"] Reload Player ").concat(r.elementID," StreamId ").concat(r.getId())),e.audioOutput=r.audioOutput,r.stop(),e.play(r.elementID,r.playOptions)),delete e.audioLevelHelper;var a=Object(m.e)({type:"stream-subscribed",stream:M.remoteStreams[e.getId()]});M.dispatchEvent(a)}},clearInterval(M.timers[e.getId()]),M.timers[e.getId()]=setInterval((function(){if(Object(b.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate((function(n){n.forEach((function(n){if(n&&n.id){if(/_send$/.test(n.id)||/^time$/.test(n.id)||/^bweforvideo$/.test(n.id))return;-1===n.id.indexOf("inbound_rtp")&&-1===n.id.indexOf("inbound-rtp")&&-1===n.type.toLowerCase().indexOf("inbound")||"video"!==n.mediaType||(n.googFrameWidthReceived=e.videoWidth+"",n.googFrameHeightReceived=e.videoHeight+"");var r=200*t;t++;var i=e.getId();setTimeout((function(){var t=M.socket&&M.socket.getLastMsgTime()&&Date.now()-M.socket.getLastMsgTime();if(t>Object(b.getParameter)("REPORT_STATS_TIMEOUT"))v.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));else{if("video"===n.mediaType)try{var r=e.stream.getVideoTracks()[0];n.A_vrtd=r.enabled?"0":"1",e.player&&e.player.freezeTimeCounterList.length>0&&(n.A_vrft=e.player.freezeTimeCounterList.splice(0,1)[0].toString())}catch(e){}if("audio"===n.mediaType)try{var o=e.stream.getAudioTracks()[0];n.A_artd=o.enabled?"0":"1"}catch(e){}M.makeReport(u(i,n))}}),r)}}))}))}}),3e3),clearInterval(M.timers[e.getId()+"_RelatedStats"]),M.timers[e.getId()+"_RelatedStats"]=setInterval((function(){if(Object(b.getParameter)("REPORT_STATS")&&e&&e.pc){var t=M.socket&&M.socket.getLastMsgTime()&&Date.now()-M.socket.getLastMsgTime();if(t>Object(b.getParameter)("REPORT_STATS_TIMEOUT"))return void v.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats((function(t){e.player&&(e.hasVideo()&&!e.peerMuteVideo&&(t.isFreeze=e.player.freezeCount>e.player.lastFreezeCount),e.player.lastFreezeCount=e.player.freezeCount),M.makeReport(s(e.getId(),t))})),e.pc.getAudioRelatedStats&&e.pc.getAudioRelatedStats((function(t){M.makeReport(s(e.getId(),t))}))}}),1e3),M.audioLevel[e.getId()]=0,clearInterval(M.timers[e.getId()+"audio"]),M.timers[e.getId()+"audio"]=setInterval((function(){M.hasListeners("active-speaker")&&e&&e.pc&&"established"===e.pc.state&&e.pc.getStats&&e.pc.getStats((function(t){t.forEach((function(t){if("audio"===t.mediaType){if(t.audioOutputLevel>5e3)for(var n in M.audioLevel[e.getId()]<20&&(M.audioLevel[e.getId()]+=1),M.audioLevel)n!==""+e.getId()&&M.audioLevel[n]>0&&(M.audioLevel[n]-=1);var r=Object.keys(M.audioLevel).sort((function(e,t){return M.audioLevel[t]-M.audioLevel[e]}));if(M.activeSpeaker!==r[0]){var i=Object(m.a)({type:"active-speaker",uid:r[0]});M.dispatchEvent(i),M.activeSpeaker=r[0],v.default.debug("[".concat(M.clientId,"] Update active speaker: ").concat(M.activeSpeaker))}}}))}),50)}),50),e.pc.oniceconnectionstatechange=function(i){if("failed"===i)null!=M.timers[e.getId()]&&(clearInterval(M.timers[e.getId()]),clearInterval(M.timers[e.getId()]+"audio")),v.default.error("[".concat(M.clientId,"] Subscriber connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(a)),v.default.debug("[".concat(M.clientId,"] subscribe p2p failed: "),M.p2ps),o||(o=!0,n&&n(N.default.PEERCONNECTION_FAILED),y.report.subscribe(M.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:N.default.PEERCONNECTION_FAILED,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:a})),M.remoteStreams[e.getId()]&&M.p2ps.has(a)&&(M.p2ps.delete(a),M.dispatchEvent(Object(m.a)({type:"subP2PLost",stream:e})));else if("connected"===i&&(v.default.debug("[".concat(M.clientId,"] subscribe p2p connected: "),M.p2ps),!o)){o=!0,y.report.subscribe(M.joinInfo.sid,{lts:r,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:a}),M._adjustPCMuteStatus(e);var s=!1,c=!1,l=!1,u=setInterval((function(){s&&c||(e.pc?e.pc.getStats((function(t){t.forEach((function(t){if((-1!==t.id.indexOf("recv")||t.type&&-1!==t.type.toLowerCase().indexOf("inbound")||-1!==t.id.indexOf("inbound_rtp")||-1!==t.id.indexOf("inbound-rtp")||-1!==t.id.indexOf("InboundRTP"))&&"audio"===t.mediaType){if((t.googDecodingNormal>0||t.audioOutputLevel>0)&&!s){s=!0,M.dispatchEvent({type:"first-audio-frame-decode",stream:e}),s&&c&&clearInterval(u);var n=Date.now(),r=y.report.getSessionStartTime(M.joinInfo.sid);y.report.firstAudioDecode(M.joinInfo.sid,{peerid:e.uintId,uid:M.uid,elapse:n-r,subscribeElapse:n-e.subscribeLTS,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:a})}parseInt(t.packetsReceived)>0&&!c&&(c=!0,M.dispatchEvent({type:"first-audio-packet-received",stream:e}),s&&c&&clearInterval(u),n=Date.now(),r=y.report.getSessionStartTime(M.joinInfo.sid),y.report.firstAudioReceived(M.joinInfo.sid,{peerid:e.uintId,uid:M.uid,elapse:n-r,subscribeElapse:n-e.subscribeLTS,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:a}))}}))}),100):clearInterval(u))}),100),d=!1,p=!1,h=setInterval((function(){d&&p||(e.pc?e.pc.getStats((function(t){t.forEach((function(t){if((-1!==t.id.indexOf("recv")||t.type&&-1!==t.type.toLowerCase().indexOf("inbound")||-1!==t.id.indexOf("inbound_rtp")||-1!==t.id.indexOf("inbound-rtp")||-1!==t.id.indexOf("InboundRTP"))&&"video"===t.mediaType){if((t.framesDecoded>0||t.googFramesDecoded>0)&&!d){d=!0,M.dispatchEvent({type:"first-video-frame-decode",stream:e}),d&&p&&clearInterval(h);var n=Date.now(),r=y.report.getSessionStartTime(M.joinInfo.sid);e.firstFrameTime=(new Date).getTime()-e.subscribeLTS,y.report.firstVideoDecode(M.joinInfo.sid,{peerid:e.uintId,width:parseInt(t.googFrameWidthReceived)||0,height:parseInt(t.googFrameHeightReceived)||0,uid:M.uid,elapse:n-r,subscribeElapse:n-e.subscribeLTS,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:a})}t.packetsReceived>0&&!p&&(p=!0,M.dispatchEvent({type:"first-video-packet-received",stream:e}),d&&p&&clearInterval(h),n=Date.now(),r=y.report.getSessionStartTime(M.joinInfo.sid),y.report.firstVideoReceived(M.joinInfo.sid,{peerid:e.uintId,uid:M.uid,elapse:n-r,subscribeElapse:n-e.subscribeLTS,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:a}))}}))}),100):clearInterval(h))}),100),f=setInterval((function(){if(!l){var t=e.getId(),n=M.traffic_stats;if(n&&n.peer_delay){var r=n.peer_delay.find((function(e){return e.peer_uid==t}));if(r){if(l=!0,M.peerPublishDurationMap.get(e.getId()))return void clearInterval(f);var i=r.peer_publish_audio_duration,o=r.peer_publish_video_duration;if(void 0===i||void 0===o)return;M.peerPublishDurationMap.set(e.getId(),!0);var s=y.report.getSessionStartTime(M.joinInfo.sid),a=(i||o)+(Date.now()-n.timestamp),c=Date.now();y.report.peerPublishStatus({audiotag:i?1:-1,videotag:o?1:-1,lts:c,sid:M.joinInfo.sid,cname:M.joinInfo.cname,cid:M.joinInfo.cid,uid:M.joinInfo.uid,elapse:c-s,peer:e.uintId,peerPublishDuration:a,joinChannelSuccessElapse:c-M.joinSuccessLts,subscribeElapse:c-e.subscribeLTS}),clearInterval(f)}}}}),1e3);return e.sid=M.joinInfo.sid,t&&t()}}}else v.default.error("[".concat(M.clientId,"] Invalid remote stream")),o||(o=!0,n&&n(N.default.INVALID_REMOTE_STREAM),y.report.subscribe(M.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:N.default.INVALID_REMOTE_STREAM}));else v.default.error("[".concat(M.clientId,"] No such remote stream")),o||(o=!0,n&&n(N.default.NO_SUCH_REMOTE_STREAM),y.report.subscribe(M.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:N.default.NO_SUCH_REMOTE_STREAM}))},M.subscribeChange=function(e,t,n){var r=Date.now();v.default.info("[".concat(M.clientId,"] Gatewayclient ").concat(M.uid," SubscribeChange ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),M._adjustPCMuteStatus(e);var i={stream_id:e.getId(),audio:e.subscribeOptions.audio,video:e.subscribeOptions.video};M.makeRequest({_type:"subscribe_change",_message:i},(function(n){var i=Object(m.e)({type:"stream-subscribe-changed",stream:M.remoteStreams[e.getId()]});y.report.subscribe(M.joinInfo.sid,{lts:r,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null,subscribeRequestid:M.subscribeRequestId.get(e.getId())||0,p2pid:M.p2ps.get(e.getId())}),M.dispatchEvent(i),t&&t()}),(function(t,r){v.default.error("[".concat(M.clientId,"] Subscribe Change Failed ").concat(e.getId()),t,r),n&&n(t,r)}))},M.processPublishFailure=function(e){e.publishLTS=null,e.p2pId&&M.p2ps.get(e.p2pId)===e&&M.p2ps.delete(e.p2pId),M.localStreams[e.getUserId()]===e&&delete M.localStreams[e.getUserId()],M.localStreams[e.getId()]===e&&delete M.localStreams[e.getId()],e.pc&&(e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},M.processSubscribeFailure=function(e){e.p2pId&&M.p2ps.get(e.p2pId)===e&&M.p2ps.delete(e.p2pId),e.pc&&(e.pc.onaddstream=function(){},e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},M._adjustPCMuteStatus=function(e){v.default.debug("[".concat(M.clientId,"]: use _adjustPCMuteStatus: ").concat(e.getId())),v.default.debug("[".concat(M.clientId,"]: video: ").concat(e.video,", audio: ").concat(e.audio,", suboption: ").concat(JSON.stringify(e.subscribeOptions),",userMuteVideo: ").concat(e.userMuteVideo,", peerMuteVideo: ").concat(e.peerMuteVideo,", userMuteAudio: ").concat(e.userMuteAudio,", peerMuteAudio: ").concat(e.peerMuteAudio)),!e.local&&e.pc&&e.pc.peerConnection.getReceivers&&e.pc.peerConnection.getReceivers().forEach((function(t){if(t&&t.track&&"audio"===t.track.kind){var n=!e.userMuteAudio&&!e.peerMuteAudio;e.subscribeOptions&&!e.subscribeOptions.audio&&(n=!1),v.default.debug("[".concat(M.clientId,"]: set receiver audio track: ").concat(n)),t.track.enabled=!!n}else if(t&&t.track&&"video"===t.track.kind){var r=!e.userMuteVideo&&!e.peerMuteVideo;e.subscribeOptions&&!e.subscribeOptions.video&&(r=!1),v.default.debug("[".concat(M.clientId,"]: set receiver video track: ").concat(r)),t.track.enabled=!!r}}))},M.unsubscribe=function(e,t,n){if("object"!==l()(e)||null===e)return v.default.error("[".concat(M.clientId,"] Invalid remote stream")),void D(n,N.default.INVALID_REMOTE_STREAM);if(M.state!==S)return v.default.error("[".concat(M.clientId,"] User is not in the session")),void D(n,N.default.INVALID_OPERATION);if(null!=M.timers[e.getId()]&&(clearInterval(M.timers[e.getId()]),clearInterval(M.timers[e.getId()]+"audio")),null!=M.audioLevel[e.getId()]&&delete M.audioLevel[e.getId()],null!=M.timer_counter[e.getId()]&&delete M.timer_counter[e.getId()],M.remoteStreams.hasOwnProperty(e.getId())){if(!M.socket)return v.default.error("[".concat(M.clientId,"] User is not in the session")),void D(n,N.default.INVALID_OPERATION);if(e.local)return v.default.error("[".concat(M.clientId,"] Invalid remote stream")),void D(n,N.default.INVALID_REMOTE_STREAM);e.close(),e.stop();var r={stream_id:e.getId()};M.makeRequest({_type:"unsubscribe",_message:r}),void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,delete e.subscribeOptions,M.p2ps.delete(e.p2pId),v.default.info("[".concat(M.clientId,"] Unsubscribe stream success")),t&&t()}else D(n,N.default.NO_SUCH_REMOTE_STREAM)},M.setRemoteVideoStreamType=function(e,t){if(v.default.debug("[".concat(M.clientId,"] Switching remote video stream ").concat(e.getId()," to ").concat(t)),"object"===l()(e)&&null!==e)if(M.state===S){if(!e.local){switch(t){case M.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case M.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case M.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var n={stream_id:e.getId(),stream_type:t};M.makeRequest({_type:"switch_video_stream",_message:n},(function(){v.default.debug("SwitchVideoStream Success ".concat(n.stream_id," ").concat(n.stream_type))}),(function(e,t){v.default.error("SwitchVideoStream Error ".concat(e," ").concat(n.stream_id," ").concat(n.stream_type),t)}))}}else v.default.error("[".concat(M.clientId,"] User is not in the session"));else v.default.error("[".concat(M.clientId,"] Invalid remote stream"))},M.renewToken=function(e,t,n){e?M.key?M.state!==S?(v.default.debug("[".concat(M.clientId,"] Client is not connected. Trying to rejoin")),M.key=e,M.rejoin(),t&&t()):(v.default.debug("[".concat(M.clientId,"] renewToken from ").concat(M.key," to ").concat(e)),M.key=e,M.makeRequest({_type:"renew_token",_message:{token:e}},t,n)):(v.default.error("[".concat(M.clientId,"] Client is previously joined without token")),n&&n(N.default.INVALID_PARAMETER)):(v.default.error("[".concat(M.clientId,"] Invalid Token ").concat(e)),n&&n(N.default.INVALID_PARAMETER))},M.setStreamFallbackOption=function(e,t){if(v.default.debug("[".concat(M.clientId,"] Set stream fallback option ").concat(e.getId()," to ").concat(t)),"object"===l()(e)&&null!==e)if(M.state===S){if(!e.local){switch(t){case M.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case M.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case M.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var n={stream_id:e.getId(),fallback_type:t};M.makeRequest({_type:"set_fallback_option",_message:n},(function(){v.default.debug("SetStreamFallbackOption success ".concat(n.stream_id," ").concat(t))}),(function(e,r){v.default.error("Failed to SetStreamFallbackOption ".concat(n.stream_id," ").concat(t," ").concat(e),r)}))}}else v.default.error("[".concat(M.clientId,"] User is not in the session"));else v.default.error("[".concat(M.clientId,"] Invalid remote stream"))},M.enableAudioVolumeIndicator=function(e,t){M.audioVolumeIndication.enabled=!0,M.audioVolumeIndication.interval=e,M.audioVolumeIndication.smooth=t,M.resetAudioVolumeIndication()},M.resetAudioVolumeIndication=function(){if(clearInterval(M.timers.audioVolumeIndication),clearInterval(M.timers.audioVolumeSampling),M.audioVolumeIndication.enabled&&M.audioVolumeIndication.interval){var e=Math.floor(1e3*M.audioVolumeIndication.smooth/100);clearInterval(M.timers.audioVolumeSampling),M.timers.audioVolumeSampling=setInterval((function(){M.audioVolumeSampling||(M.audioVolumeSampling={});var t={};for(var n in M.remoteStreams){var r=M.remoteStreams[n];if(r.stream&&r.hasAudio()){var i=r.getAudioLevel();i>0&&i<1&&(i*=100);var o=M.audioVolumeSampling[n]||[];for(o.push(i);o.length>e;)o.shift();t[n]=o}}M.audioVolumeSampling=t}),100),clearInterval(M.timers.audioVolumeIndication),M.timers.audioVolumeIndication=setInterval((function(){if(M.socket&&M.socket.signal&&M.socket.signal.connection&&M.socket.signal.connection.readyState===WebSocket.OPEN){var e=[];for(var t in M.remoteStreams)if(M.audioVolumeSampling&&M.audioVolumeSampling[t]){var n=M.audioVolumeSampling[t],r=0;n.forEach((function(e){r+=e}));var i={uid:t,level:Math.floor(r/n.length)};i.level&&e.push(i)}var o=e.sort((function(e,t){return e.level-t.level}));v.default.debug("[".concat(M.clientId,"] volume-indicator "),JSON.stringify(o)),M.audioVolumeIndication.sortedAudioVolumes=o;var s=Object(m.a)({type:"volume-indicator",attr:o});M.dispatchEvent(s)}}),M.audioVolumeIndication.interval)}},M.closeGateway=function(){v.default.debug("[".concat(M.clientId,"] close gateway")),M.state=p,M.socket.close(),z()},M.startChannelMediaRelay=function(){var e=a()(o.a.mark((function e(t){var n,r,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M.channelMediaRelayController){e.next=2;break}throw new L.ChannelMediaError("RELAY_ALREADY_START","",L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return n=function(e){M.dispatchEvent({type:"channel-media-relay-event",code:e})},r=function(e,t,n){e===L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&t===L.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(M.channelMediaRelayController.dispose(),M.channelMediaRelayController=null),M.dispatchEvent({type:"channel-media-relay-state",state:e,code:t,data:n})},M.channelMediaRelayController=new P.a(M.joinInfo,M.clientId),M.channelMediaRelayController.on("event",n),M.channelMediaRelayController.on("state",r),e.prev=7,e.next=10,M.channelMediaRelayController.startChannelMediaRelay(t);case 10:e.next=22;break;case 12:throw e.prev=12,e.t0=e.catch(7),v.default.debug("[".concat(M.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(e.t0))),i=L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,s=e.t0 instanceof L.ChannelMediaError?"SetSourceChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetSourceChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetDestChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_DEST":e.t0.data&&e.t0.data.serverResponse&&"StartPacketTransfer"===e.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":e.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":e.t0.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||e.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",M.dispatchEvent({type:"channel-media-relay-state",state:i,code:L.CHANNEL_MEDIA_RELAY_ERROR[s]}),M.channelMediaRelayController&&(M.channelMediaRelayController.dispose(),M.channelMediaConfig=null,M.channelMediaRelayController=null),M.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(s,null,L.CHANNEL_MEDIA_RELAY_ERROR[s]);case 22:M.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),M.channelMediaConfig=t;case 24:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t){return e.apply(this,arguments)}}(),M.updateChannelMediaRelay=function(){var t=a()(o.a.mark((function t(n){var r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M.channelMediaRelayController){t.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,M.channelMediaRelayController.updateChannelMediaRelay(n);case 5:t.next=18;break;case 7:throw t.prev=7,t.t0=t.catch(2),v.default.debug("[".concat(M.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e))),r=L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,i=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||e.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",M.dispatchEvent({type:"channel-media-relay-event",code:L.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),M.dispatchEvent({type:"channel-media-relay-state",state:r,code:L.CHANNEL_MEDIA_RELAY_ERROR[i]}),M.channelMediaRelayController&&(M.channelMediaRelayController.dispose(),M.channelMediaConfig=null,M.channelMediaRelayController=null),M.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(i,null,L.CHANNEL_MEDIA_RELAY_ERROR[i]);case 18:M.channelMediaConfig=n;case 19:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),M.stopChannelMediaRelay=a()(o.a.mark((function t(){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M.channelMediaRelayController){t.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,M.channelMediaRelayController.stopChannelMediaRelay();case 5:t.next=17;break;case 7:throw t.prev=7,t.t0=t.catch(2),v.default.debug("[".concat(M.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e))),n=L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,r=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",M.dispatchEvent({type:"channel-media-relay-state",state:n,code:L.CHANNEL_MEDIA_RELAY_ERROR[r]}),M.channelMediaRelayController&&(M.channelMediaRelayController.dispose(),M.channelMediaConfig=null,M.channelMediaRelayController=null),M.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(r,null,L.CHANNEL_MEDIA_RELAY_ERROR[r]);case 17:M.channelMediaConfig=null,M.channelMediaRelayController=null;case 19:case"end":return t.stop()}}),t,null,[[2,7]])}))),M.sendMetadata=function(e,t){M.makeRequest(function(e){return{_type:"send_metadata",_message:{session_id:M.joinInfo.sid,metadata:window.btoa(unescape(encodeURIComponent(e)))}}}(e),(function(){v.default.debug("[".concat(M.clientId,'] send metadata "').concat(e,'" success')),t&&t(null)}),(function(n){v.default.error("[".concat(M.clientId,'] send metadata "').concat(e,'" failed'),n),t&&t(n)}))},M._reportWebsocketCloseEvent=function(e,t){try{var n=y.report.getSessionStartTime(M.joinInfo.sid),r=Date.now();y.report.webSocketQuit({lts:r,sid:M.joinInfo.sid,cname:M.joinInfo.cname,cid:M.joinInfo.cid,uid:M.joinInfo.uid,elapse:r-n,succ:e,errorCode:t,ip:null})}catch(e){v.default.debug("[".concat(M.clientId,"]: _reportWebsocketCloseEvent exception, ").concat(e))}};var U=function(){v.default.debug("[".concat(M.clientId,"] Reconnect gateway")),M.state=p,M.socket.close(),z(),M.reconnectMode="recover",M.state=_,B()};M.recover=U;var z=function(){for(var e in M.dispatchEvent({type:"before-clear-connection"}),M.timers)M.timers.hasOwnProperty(e)&&clearInterval(M.timers[e]);for(var e in M.remoteStreams)if(M.remoteStreams.hasOwnProperty(e)){var t=M.remoteStreams[e],n=Object(m.a)({type:"stream-removed",uid:t.getId(),stream:t});M.dispatchEvent(n)}M.p2ps.clear(),W(),G(),clearInterval(M.pingTimer)};M.rejoin=function(){M.socket&&(clearInterval(M.pingTimer),M.socket.close(),M.socket=void 0),M.state=_,B()};var B=function(e,t){M.dispatchEvent(Object(m.a)({type:"rejoin-start"})),e=e||function(e){v.default.info("[".concat(M.clientId,"] User ").concat(e," is re-joined to ").concat(M.joinInfo.cname)),M.dispatchEvent(Object(m.a)({type:"rejoin"})),M.channelMediaConfig&&M.startChannelMediaRelay(M.channelMediaConfig).then((function(){v.default.debug("[".concat(M.clientId,"] restartChannelMediaRelay success"))})).catch((function(e){v.default.debug("[".concat(M.clientId,"] restartChannelMediaRelay failed: ").concat(JSON.stringify(e)))})),M.liveStreams&&M.liveStreams.size&&M.liveStreams.forEach((function(e,t){e&&M.setLiveTranscoding(M.transcoding),M.startLiveStreaming(t,e)})),M.injectLiveStreams&&M.injectLiveStreams.size&&M.injectLiveStreams.forEach((function(e,t){M.addInjectStreamUrl(t,e)}))},t=t||function(e){v.default.error("[".concat(M.clientId,"] Re-join to channel failed "),e),M.dispatchEvent(Object(m.e)({type:"error",reason:e}))},M.key?(++M.rejoinAttempt,M.join(M.joinInfo,M.key,e,t)):v.default.error("[".concat(M.clientId,"] Connection recover failed [Invalid channel key]"))},V=function(e,t,n){if(M.onConnect=t,M.socket){if(M.dispatchEvent({type:"reconnect"}),"retry"===M.reconnectMode)v.default.debug("[".concat(M.clientId,"] Retry current gateway")),M.socket.reconnect();else if("tryNext"===M.reconnectMode)v.default.debug("[".concat(M.clientId,"] Try next gateway")),M.socket.connectNext();else if("recover"===M.reconnectMode){v.default.debug("[".concat(M.clientId,"] Recover gateway")),v.default.debug("[".concat(M.clientId,"] Try to reconnect choose server and get gateway list again ")),M.reconnectingCS=!0;var i=M.joinInfo&&M.joinInfo.sid;Object(w.getGatewayList)(M.joinInfo,(function(e){v.default.debug("[".concat(M.clientId,"] session:  ").concat(i," get gateway list success")),M.joinInfo.apResponse=e.res,M.reconnectingCS?M.socket.replaceHost(e.gateway_addr):v.default.debug("[".concat(M.clientId,"] session:  ").concat(i," already leave"))}))}}else o=e.gatewayAddr,M.socket=T(o,{sid:M.joinInfo.sid,clientId:M.clientId,proxyServerType:M.joinInfo.proxyServerType}),M.socket.on("start-connection",(function(e){M.ticket=e&&e.msg&&e.msg.ticket})),M.socket.on("on_uplink_stats",(function(e){var t={};for(var n in e)t[x(n)]=e[n];if(M.OutgoingAvailableBandwidth=t.uplink_available_bandwidth,M.localStreams[M.uid]){var r=M.localStreams[M.uid].uplinkStats;r&&r.period_fir===t.period_fir||v.default.debug("[".concat(M.clientId,"]: Period fir change to: ").concat(t.period_fir)),M.localStreams[M.uid].uplinkStats=t}})),M.socket.on("connect",(function(){M.dispatchEvent({type:"connected"}),M.attemps=1,M.onConnect()})),M.socket.on("recover",(function(){M.state=_,v.default.debug("[".concat(M.clientId,"] Try to reconnect choose server and get gateway list again ")),M.reconnectingCS=!0;var e=M.joinInfo&&M.joinInfo.sid;Object(w.getGatewayList)(M.joinInfo,(function(t){v.default.debug("[".concat(M.clientId,"] session:  ").concat(e," get gateway list success")),M.reconnectingCS?M.socket.replaceHost(t.gateway_addr):v.default.debug("[".concat(M.clientId,"] session:  ").concat(e," already leave"))}))})),M.socket.on("disconnect",(function(e){if(v.default.debug("[".concat(M.clientId,"] Receive disconnect message")),M.state!==p){M.state=p,M._reportWebsocketCloseEvent(-1,N.WEBSOCKET_CLOSE_REASON.WS_DISCONNECT);var t=Object(m.e)({type:"error",reason:N.default.SOCKET_DISCONNECTED});if(M.dispatchEvent(t),0===M.p2ps.size?M.reconnectMode="tryNext":M.reconnectMode="retry",z(),M.channelMediaRelayController&&M.channelMediaRelayController.dispose(),M.channelMediaRelayController=null,1!=r){var n,i=(n=M.attemps,1e3*Math.min(30,Math.pow(2,n)-1));if(v.default.error("[".concat(M.clientId,"] Disconnect from server [").concat(JSON.stringify(e),"], attempt to recover [#").concat(M.attemps,"] after ").concat(i/1e3," seconds")),M.hasInvokeLeave)return v.default.debug("[".concat(M.clientId,"] No reconnection because Client.leave has been invoked")),void(M.hasInvokeLeave=!1);setTimeout((function(){M.attemps++,M.state=_,M.inChannelInfo&&Date.now()-M.inChannelInfo.joinAt>Object(b.getParameter)("TICKET_RENEW_TIMEOUT")?(v.default.debug("Recovering to renew ticket"),U()):B()}),i)}else{var o=F.unregister(M);o&&v.default.debug("[".concat(M.clientId,"] "),o)}}})),M.socket.on("on_add_audio_stream",(function(e){if(v.default.info("[".concat(M.clientId,"] Newly added audio stream with uid ").concat(e.uid)),M.joinInfo.stringUid&&"string"!=typeof e.uid&&v.default.error("StringUID is Mixed with UintUID"),M.remoteStreamsInChannel.has(e.uid)||M.remoteStreamsInChannel.add(e.uid),void 0===M.remoteStreams[e.uid]){var t=Object(f.a)({streamID:e.uid,local:!1,audio:e.audio,video:e.video,uintUID:e.uint_id||e.uid});t.peerMuteVideo=!0,M.remoteStreams[e.uid]=t;var n=Object(m.e)({type:"stream-added",stream:t});M.dispatchEvent(n);var r=M.remoteMuteState[e.uid];r&&r.audio&&(n=Object(m.a)({type:"mute-audio",uid:e.uid}),M.dispatchEvent(n)),r&&r.video&&(n=Object(m.a)({type:"mute-video",uid:e.uid}),M.dispatchEvent(n))}y.report.onAddAudioStream(M.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:M.uid})})),M.socket.on("on_update_stream",(function(e){v.default.info("[".concat(M.clientId,"] on_update_stream:"),e);var t=M.remoteStreams[e.uid];if(M.joinInfo.stringUid&&"string"!=typeof e.uid&&v.default.error("StringUID is Mixed with UintUID"),t){t.audio=e.audio,t.video=e.video,t.screen=e.screen,t.pc&&M._adjustPCMuteStatus(t);var n=Object(m.e)({type:"stream-updated",stream:t});M.dispatchEvent(n)}else v.default.debug("[".concat(M.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(e.uid));y.report.onUpdateStream(M.joinInfo.sid,{peerid:e.uint_id||e.uid,audio:e.audio,video:e.video,uid:M.uid})})),M.socket.on("on_add_video_stream",(function(e){if(v.default.info("[".concat(M.clientId,"] Newly added remote stream with uid ").concat(e.uid,".")),M.joinInfo.stringUid&&"string"!=typeof e.uid&&v.default.error("StringUID is Mixed with UintUID"),M.remoteStreamsInChannel.has(e.uid)||M.remoteStreamsInChannel.add(e.uid),void 0===M.remoteStreams[e.uid]){var t=Object(f.a)({streamID:e.uid,local:!1,audio:e.audio,video:e.video,uintUID:e.uint_id||e.uid});M.remoteStreams[e.uid]=t;var n=Object(m.e)({type:"stream-added",stream:t});M.dispatchEvent(n);var r=M.remoteMuteState[e.uid];r&&r.audio&&(n=Object(m.a)({type:"mute-audio",uid:e.uid}),M.dispatchEvent(n)),r&&r.video&&(n=Object(m.a)({type:"mute-video",uid:e.uid}),M.dispatchEvent(n))}else{var i=M.remoteStreams[e.uid];if(i.video=!0,i.peerMuteVideo=!1,i.pc&&M._adjustPCMuteStatus(i),v.default.info("[".concat(M.clientId,"] Stream changed: enable video ").concat(e.uid)),void 0!==i.stream&&i.isPlaying()){var o=i.player.elementID;i.stop(),i.play(o,i.playOptions)}}y.report.onAddVideoStream(M.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:M.uid})})),M.socket.on("on_remove_stream",(function(e){v.default.info("[".concat(M.clientId,"] on_remove_stream:"),e),M.remoteStreamsInChannel.has(e.uid)&&M.remoteStreamsInChannel.delete(e.uid);var t=M.remoteStreams[e.uid];if(t){delete M.remoteStreams[e.uid],delete M.remoteMuteState[e.uid];var n=Object(m.e)({type:"stream-removed",stream:t});M.dispatchEvent(n),t.close(),void 0!==t.pc&&(t.pc.close(),t.pc=void 0,M.p2ps.delete(t.p2pId)),y.report.onRemoveStream(M.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:M.uid})}else v.default.error("ERROR stream ",e.uid," not found onRemoveStream ",e)})),M.socket.on("on_publish_stream",(function(e){v.default.info("[".concat(M.clientId,"] on_publish_stream:"),e);var t=M.localStreams[e.uid];M.dispatchEvent({type:"streamPublished",stream:t,proxy:e.proxy}),y.report.reportApiInvoke(M.joinInfo.sid,{name:"on_publish_stream",options:{proxy:e.proxy}})()})),M.socket.on("mute_audio",(function(e){v.default.info("[".concat(M.clientId,"] rcv peer mute audio: ").concat(e.uid)),M.remoteMuteState[e.uid]=M.remoteMuteState[e.uid]||{audio:!1,video:!1},M.remoteMuteState[e.uid].audio=!0;var t=Object(m.a)({type:"mute-audio",uid:e.uid}),n=M.remoteStreams[e.uid];n?(n.peerMuteAudio=!0,n.pc&&M._adjustPCMuteStatus(n),M.dispatchEvent(t)):v.default.debug("Ignoring event ".concat(e.type),e)})),M.socket.on("unmute_audio",(function(e){v.default.info("[".concat(M.clientId,"] rcv peer unmute audio: ").concat(e.uid)),M.remoteMuteState[e.uid]=M.remoteMuteState[e.uid]||{audio:!1,video:!1},M.remoteMuteState[e.uid].audio=!1;var t=Object(m.a)({type:"unmute-audio",uid:e.uid}),n=M.remoteStreams[e.uid];n?(n.peerMuteAudio=!1,n.pc&&M._adjustPCMuteStatus(n),M.dispatchEvent(t)):v.default.debug("Ignoring event ".concat(e.type),e)})),M.socket.on("mute_video",(function(e){v.default.info("[".concat(M.clientId,"] rcv peer mute video: ").concat(e.uid)),M.remoteMuteState[e.uid]=M.remoteMuteState[e.uid]||{audio:!1,video:!1},M.remoteMuteState[e.uid].video=!0;var t=Object(m.a)({type:"mute-video",uid:e.uid}),n=M.remoteStreams[e.uid];n?(n.peerMuteVideo=!0,n.player&&(n.player.peerVideoReady=!1),n.pc&&M._adjustPCMuteStatus(n),M.dispatchEvent(t)):v.default.debug("Ignoring event ".concat(e.type),e)})),M.socket.on("unmute_video",(function(e){v.default.info("[".concat(M.clientId,"] rcv peer unmute video: ").concat(e.uid)),M.remoteMuteState[e.uid]=M.remoteMuteState[e.uid]||{audio:!1,video:!1},M.remoteMuteState[e.uid].video=!1;var t=Object(m.a)({type:"unmute-video",uid:e.uid}),n=M.remoteStreams[e.uid];n?(n.peerMuteVideo=!1,n.pc&&M._adjustPCMuteStatus(n),M.dispatchEvent(t)):v.default.debug("Ignoring event ".concat(e.type),e)})),M.socket.on("on_crypt_error",(function(e){v.default.warning("[".concat(M.clientId,"] stream crypt error"));var t=Object(m.a)({type:"crypt-error",cryptType:e.crypt_type});M.dispatchEvent(t)})),M.socket.on("on_user_banned",(function(e){v.default.info("[".concat(M.clientId,"] user banned uid: ").concat(e.uid," error: ").concat(e.error_code));var t=Object(m.a)({type:"client-banned",uid:e.uid,attr:e.error_code});M.dispatchEvent(t),r=!0})),M.socket.on("on_stream_fallback_update",(function(e){v.default.info("[".concat(M.clientId,"] stream fallback peerId: ").concat(e.stream_id," type: ").concat(e.stream_type));var t=Object(m.a)({type:"stream-fallback",uid:e.stream_id,stream:e.stream_id,attr:e.stream_type});M.dispatchEvent(t)})),M.socket.on("stream_recover",(function(e){v.default.info("[".concat(M.clientId,"] stream recover uid: ").concat(e.id," peerId: ").concat(e.peerid," type: ").concat(e.type));var t=Object(m.a)({type:"stream-recover",uid:e.id,stream:e.peerid,attr:e.type});M.dispatchEvent(t)})),M.socket.on("on_p2p_lost",(function(e){v.default.debug("[".concat(M.clientId,"] p2plost: "),e,"p2ps:",M.p2ps);var t,n="DTLS failed";(t=M.localStreams[e.uid]||M.remoteStreams[e.uid])?(t.pc&&t.pc.offerCandidates&&0===t.pc.offerCandidates.length&&(n="NO_CANDIDATES_IN_OFFER"),"publish"===e.event&&y.report.publish(M.joinInfo.sid,{lts:t.publishLTS,succ:!1,audio:t.hasAudio(),video:t.hasVideo(),screenshare:t.hasScreen(),audioName:t.hasAudio()&&t.audioName,videoName:t.hasVideo()&&t.videoName,screenName:t.hasScreen()&&t.screenName,ec:n,publishRequestid:M.publishRequestId||0,p2pid:M.p2ps.get(t.getId())}),"subscribe"===e.event&&y.report.subscribe(M.joinInfo.sid,{lts:t.subscribeLTS,succ:!1,video:t.subscribeOptions&&t.subscribeOptions.video,audio:t.subscribeOptions&&t.subscribeOptions.audio,peerid:e.uid+"",ec:n,subscribeRequestid:M.subscribeRequestId.get(t.getId())||0,p2pid:M.p2ps.get(t.getId())})):v.default.warning("P2PLost Stream Not found",e),v.default.debug("[".concat(M.clientId,"] p2plost:"),e.p2pid),(t=M.p2ps.get(e.p2pid))&&(M.p2ps.delete(e.p2pid),t.local?M.dispatchEvent(Object(m.a)({type:"pubP2PLost",stream:t,attr:n})):M.remoteStreams[t.getId()]&&M.dispatchEvent(Object(m.a)({type:"subP2PLost",stream:t,attr:n})))})),M.socket.on("on_token_privilege_will_expire",(function(e){v.default.debug("[".concat(M.clientId,"] Received Message onTokenPrivilegeWillExpire")),M.dispatchEvent(Object(m.a)({type:"onTokenPrivilegeWillExpire"}))})),M.socket.on("on_token_privilege_did_expire",(function(){v.default.warning("[".concat(M.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),M.closeGateway(),M.dispatchEvent(Object(m.a)({type:"onTokenPrivilegeDidExpire"}))})),M.socket.on("enable_local_video",(function(e){v.default.info("[".concat(M.clientId,"] enable_local_video:"),e),M.dispatchEvent(Object(m.a)({type:"enable-local-video",uid:e.uid}))})),M.socket.on("disable_local_video",(function(e){v.default.info("[".concat(M.clientId,"] disable_local_video:"),e),M.dispatchEvent(Object(m.a)({type:"disable-local-video",uid:e.uid}))})),M._doWithAction=function(e,t,n){"tryNext"===e?function(e,t){v.default.debug("[".concat(M.clientId,"] Connect next gateway")),M.state=p,M.socket.close(),z(),M.reconnectMode="tryNext",M.state=_,B(e,t)}(t,n):"retry"===e?function(e,t){v.default.debug("[".concat(M.clientId,"] Reconnect gateway")),M.state=p,M.socket.close(),z(),M.reconnectMode="retry",M.state=_,B(e,t)}(t,n):"quit"===e?(v.default.debug("[".concat(M.clientId,"] quit gateway")),M.state=p,M.socket.close(),z()):"recover"===e&&U()},M.socket.on("on_notification",(function(e){if(v.default.debug("[".concat(M.clientId,"] Receive notification: "),e),"ERR_JOIN_BY_MULTI_IP"===N.GatewayErrorCode[e.code])return M.dispatchEvent({type:"onMultiIP",option:e.option});e.detail?M._doWithAction(O[N.GatewayErrorCode[e.code]]):e.action&&M._doWithAction(e.action)})),M.socket.on("on_user_offline",(function(e){v.default.info("[".concat(M.clientId,"] on_user_offline:"),e);var t=Object(m.a)({type:"peer-leave",uid:e.uid});if(M.remoteStreamsInChannel.has(e.uid)&&M.remoteStreamsInChannel.delete(e.uid),M.remoteStreams.hasOwnProperty(e.uid)&&(t.stream=M.remoteStreams[e.uid]),t.reason=e.reason,M.dispatchEvent(t),v.default.info("[".concat(M.clientId,"] remove remoteMuteState "),e.uid),delete M.remoteMuteState[e.uid],M.remoteStreams.hasOwnProperty(e.uid)){v.default.info("[".concat(M.clientId,"] closing stream on peer leave"),e.uid);var n=M.remoteStreams[e.uid];n.close(),delete M.remoteStreams[e.uid],y.report.onRemoveStream(M.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:M.uid}),void 0!==n.pc&&(n.pc.close(),n.pc=void 0,M.p2ps.delete(n.p2pId))}M.timers.hasOwnProperty(e.uid)&&(clearInterval(M.timers[e.uid]),clearInterval(M.timers[e.uid]+"_RelatedStats"),delete M.timers[e.uid]),null!=M.audioLevel[e.uid]&&delete M.audioLevel[e.uid],null!=M.timer_counter[e.uid]&&delete M.timer_counter[e.uid]})),M.socket.on("onUplinkStats",(function(e){})),M.socket.on("liveStreamingStarted",(function(e){var t=Object(m.c)({type:"liveStreamingStarted",url:e.url});M.dispatchEvent(t)})),M.socket.on("liveStreamingFailed",(function(e){var t=Object(m.c)({type:"liveStreamingFailed",url:e.url});M.dispatchEvent(t)})),M.socket.on("liveStreamingStopped",(function(e){var t=Object(m.c)({type:"liveStreamingStopped",url:e.url});M.dispatchEvent(t)})),M.socket.on("liveTranscodingUpdated",(function(e){var t=Object(m.c)({type:"liveTranscodingUpdated",reason:e.reason});M.dispatchEvent(t)})),M.socket.on("streamInjectedStatus",(function(e){var t=Object(m.c)({type:"streamInjectedStatus",url:e.url,uid:e.uid,status:e.status});M.dispatchEvent(t)})),M.socket.on("on_user_online",(function(e){M.joinInfo.stringUid&&"string"!=typeof e.uid&&v.default.error("StringUID is Mixed with UintUID"),M.dispatchEvent({type:"peer-online",uid:e.uid})})),M.socket.on("receive_metadata",(function(e){M.joinInfo.stringUid&&"string"!=typeof e.uid&&v.default.error("StringUID is Mixed with UintUID");var t=decodeURIComponent(escape(window.atob(e.metadata)));v.default.debug("[".concat(M.clientId,"] received ").concat(e.uid," metadata: ").concat(t)),M.dispatchEvent({type:"receive-metadata",uid:e.uid,metadata:t})}));var o},H=function(e,t){if(void 0!==M.socket)try{M.socket.emitSimpleMessage(e,(function(e,n){t&&t(e,n)}))}catch(e){v.default.error("[".concat(M.clientId,"] Error in sendSimpleSdp [").concat(e,"]"))}else v.default.error("[".concat(M.clientId,"] Error in sendSimpleSdp [socket not ready]"))},G=function(){for(var e in M.localStreams)if(void 0!==M.localStreams[e]){var t=M.localStreams[e];delete M.localStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}},W=function(){for(var e in M.remoteStreamsInChannel.clear(),M.remoteStreams)if(M.remoteStreams.hasOwnProperty(e)){var t=M.remoteStreams[e];t.isPlaying()&&t.stop(),t.close(),delete M.remoteStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}};return M},F={_gatewayClients:{},register:function(e,t){if(!t.uid){var n="NO_UID_PROVIDED";return v.default.error("[".concat(e.clientId,"] "),n,t),n}return t.cname?this._gatewayClients[t.cname]&&this._gatewayClients[t.cname][t.uid]&&this._gatewayClients[t.cname][t.uid]!==e?(n="UID_CONFLICT",v.default.error("[".concat(e.clientId,"] "),n,t),n):(v.default.debug("[".concat(e.clientId,"] register client Channel"),t.cname,"Uid",t.uid),this._gatewayClients[t.cname]||(this._gatewayClients[t.cname]={}),this._gatewayClients[t.cname][t.uid]=e,null):(n="NO_CHANNEL_PROVIDED",v.default.error("[".concat(e.clientId,"] "),n,t),n)},unregister:function(e){var t=e&&e.uid,n=e.joinInfo&&e.joinInfo.cname;if(!t||!n){var r="INVALID_GATEWAYCLIENT";return v.default.error("[".concat(e.clientId,"] "),r),r}if(this._gatewayClients[n]&&this._gatewayClients[n][t])return this._gatewayClients[n][t]!==e?(r="GATEWAYCLIENT_UID_CONFLICT",v.default.error("[".concat(e.clientId,"] "),r),r):(v.default.debug("[".concat(e.clientId,"] unregister client "),e.uid),delete this._gatewayClients[n][t],null);r="GATEWEAY_CLIENT_UNREGISTERED",v.default.error("[".concat(e.clientId,"] "),r)}};U.DISCONNECTED=0,U.CONNECTING=1,U.CONNECTED=2,U.DISCONNECTING=3,U.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"},n.a=U},function(e,t,n){"use strict";n.r(t),n.d(t,"post",(function(){return d})),n.d(t,"postFormData",(function(){return u})),n.d(t,"shouldUseHttps",(function(){return p})),n.d(t,"getHTTPSendBytes",(function(){return a})),n.d(t,"getHTTPRecvBytes",(function(){return c})),n.d(t,"resetHTTPByetsCount",(function(){return l}));var r=n(2),i=n(10),o=0,s=0,a=function(){return o},c=function(){return s},l=function(){o=0,s=0},u=function(e,t,n,a,c){var l=new XMLHttpRequest;if(l.timeout=t.timeout||Object(r.getParameter)("HTTP_CONNECT_TIMEOUT"),l.open("POST",e,!0),c)for(var u in c)"withCredentials"==u?l.withCredentials=!0:l.setRequestHeader(u,c[u]);l.onload=function(t){s+=Object(i.lengthInUtf8Bytes)(l.responseText),200!==l.status?a&&a({httpErrorCode:"httpcode-xhr.status"},e):n&&n(l.responseText)},l.onerror=function(t){a&&a(t,e)},l.ontimeout=function(t){a&&a(t,e)};var d=JSON.stringify(t);o+=Object(i.lengthInUtf8Bytes)(d);var p=new FormData;p.append("request",d),l.send(p)},d=function(e,t,n,a,c){var l=new XMLHttpRequest;if(l.timeout=t.timeout||Object(r.getParameter)("HTTP_CONNECT_TIMEOUT"),l.open("POST",e,!0),l.setRequestHeader("Content-type","application/json; charset=utf-8"),c)for(var u in c)"withCredentials"==u?l.withCredentials=!0:l.setRequestHeader(u,c[u]);l.onload=function(t){s+=Object(i.lengthInUtf8Bytes)(l.responseText),200!==l.status?a&&a({httpErrorCode:"httpcode-xhr.status"},e):n&&n(l.responseText)},l.onerror=function(t){a&&a(t,e)},l.ontimeout=function(t){a&&a(t,e)};var d=JSON.stringify(t);o+=Object(i.lengthInUtf8Bytes)(d),l.send(d)},p=function(){return"https:"==document.location.protocol}},function(e,t,n){"use strict";n.r(t),n.d(t,"RTCPeerConnection",(function(){return T})),n.d(t,"getUserMedia",(function(){return s})),n.d(t,"attachMediaStream",(function(){return a})),n.d(t,"reattachMediaStream",(function(){return c})),n.d(t,"setSrcObject",(function(){return h})),n.d(t,"getSrcObject",(function(){return f})),n.d(t,"webrtcDetectedBrowser",(function(){return l})),n.d(t,"webrtcDetectedVersion",(function(){return u})),n.d(t,"webrtcMinimumVersion",(function(){return d})),n.d(t,"webrtcTesting",(function(){return I})),n.d(t,"webrtcUtils",(function(){return v}));var r=n(11),i=n.n(r),o=n(4),s=null,a=null,c=null,l=null,u=null,d=null,p=null,h=null,f=null,m=null,g={addStream:null},v={log:function(){},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n])}};if("object"==("undefined"==typeof window?"undefined":i()(window))?(window.HTMLMediaElement&&!("srcObject"in window.HTMLMediaElement.prototype)?(h=function(e,t){"mozSrcObject"in e?e.mozSrcObject=t:(e._srcObject=t,e.src=t?URL.createObjectURL(t):null)},f=function(e){return"mozSrcObject"in e?e.mozSrcObject:e._srcObject}):(h=function(e,t){e.srcObject=t},f=function(e){return e.srcObject}),s=window.navigator&&window.navigator.getUserMedia):(h=function(e,t){e.srcObject=t},f=function(e){return e.srcObject}),a=function(e,t){h(e,t)},c=function(e,t){h(e,f(t))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var y in v.log("This appears to be Firefox"),l="firefox",u=v.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),d=31,m=mozRTCPeerConnection,g)g[y]=m.prototype[y];if(p=function(e,t){if(u<38&&e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var i=e.iceServers[r];if(i.hasOwnProperty("urls"))for(var o=0;o<i.urls.length;o++){var s={url:i.urls[o]};0===i.urls[o].indexOf("turn")&&(s.username=i.username,s.credential=i.credential),n.push(s)}else n.push(e.iceServers[r])}e.iceServers=n}var a=new m(e,t);for(var c in g)a[c]=g[c];return a},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),s=function(e,t,n){var r=function(e){if("object"!==i()(e)||e.require)return e;var t=[];return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"===i()(e[n])?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof r.ideal?o[n]={min:r.ideal,max:r.ideal}:o[n]=r.ideal,e.advanced.push(o),delete r.ideal,Object.keys(r).length||delete e[n]}}})),t.length&&(e.require=t),e};return u<38&&(v.log("spec: "+JSON.stringify(e)),e.audio&&(e.audio=r(e.audio)),e.video&&(e.video=r(e.video)),v.log("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,n)},navigator.getUserMedia=s,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:S,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise((function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])}))},u<41){var E=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return E().then(void 0,(function(e){if("NotFoundError"===e.name)return[];throw e}))}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var y in v.log("This appears to be Chrome"),l="chrome",u=v.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),d=38,m=webkitRTCPeerConnection,g)g[y]=m.prototype[y];p=function(e,t){e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new m(e,t);for(var r in g)n[r]=g[r];var i=n.getStats.bind(n);return n.getStats=function(e,t,n){var r=arguments;return r.length>0&&"function"==typeof e&&(t?(n=t,t=e,r=[e=null,t,n]):(t=e,r=[e=null,t])),r.length>=2?i.apply(this,[function(e){r[1](function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t}(e))},r[0]]):i()},n},["createOffer","createAnswer"].forEach((function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===i()(arguments[0])){var n=1===arguments.length?arguments[0]:void 0;return new Promise((function(r,i){t.apply(e,[r,i,n])}))}return t.apply(this,arguments)}})),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this;return new Promise((function(r,i){t.apply(n,[e[0],function(){r(),e.length>=2&&e[1].apply(null,[])},function(t){i(t),e.length>=3&&e[2].apply(null,[t])}])}))}}));var _=function(e){if("object"!==i()(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===i()(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var s={};"number"==typeof r.ideal?(s[o("min",n)]=r.ideal,t.optional.push(s),(s={})[o("max",n)]=r.ideal,t.optional.push(s)):(s[o("",n)]=r.ideal,t.optional.push(s))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};if(s=function(e,t,n){return e.audio&&(e.audio=_(e.audio)),e.video&&(e.video=_(e.video)),v.log("chrome: "+JSON.stringify(e)),navigator.webkitGetUserMedia(e,t,n)},navigator.getUserMedia=s,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:S,enumerateDevices:function(){return new Promise((function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources((function(n){e(n.map((function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}})))}))}))}}),navigator.mediaDevices.getUserMedia){if((Object(o.getBrowserVersion)()?Number(Object(o.getBrowserVersion)().split(".")[0]):void 0)<46){var b=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return v.log("spec:   "+JSON.stringify(e)),e.audio=_(e.audio),e.video=_(e.video),v.log("chrome: "+JSON.stringify(e)),b(e)}}}else navigator.mediaDevices.getUserMedia=function(e){return S(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){v.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){v.log("Dummy mediaDevices.removeEventListener called.")}),a=function(e,t){u>=43?h(e,t):void 0!==e.src?e.src=t?URL.createObjectURL(t):null:v.log("Error attaching stream to element.")},c=function(e,t){u>=43?h(e,f(t)):e.src=t.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(v.log("This appears to be Edge"),l="edge",u=v.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),d=12):v.log("Browser does not appear to be WebRTC-capable");else v.log("This does not appear to be a browser"),l="not a browser";function S(e){return new Promise((function(t,n){s(e,t,n)}))}var T,I={};try{Object.defineProperty(I,"version",{set:function(e){u=e}})}catch(e){}p?T=p:"undefined"!=typeof window&&(T=window.RTCPeerConnection)},function(e,t,n){"use strict";var r=n(12),i=n.n(r),o=n(17),s=n.n(o),a=n(51),c=n.n(a),l=n(4),u=n(1),d=n(3),p=n(0),h=(n(25),n(2),n(5),n(52)),f=n.n(h),m=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function g(e){for(var t=new Uint8Array([99,114,121,112,116,105,105]),n=t.length,r=e,i=r.length,o=new Uint8Array(i),s=new Uint8Array(256),a=0;a<256;a++)s[a]=a;for(var c=0,l=0;l<256;l++){var u=[s[c=(c+s[l]+t[l%n])%256],s[l]];s[l]=u[0],s[c]=u[1]}var d,p=0;c=0;for(var h=0;h<0+i;h++){var f=[s[c=(c+s[p=(p+1)%256])%256],s[p]];s[p]=f[0],s[c]=f[1],d=s[(s[p]+s[c])%256],h>=0&&(o[h-0]=r[h-0]^d)}var m=String.fromCharCode.apply(null,o);return Function("var winSize = 5; return `"+m+"`")()}function v(e,t){var n=g(t),r=f.a.createProgramFromSources(e,[g(m),n]),i=e.getAttribLocation(r,"a_position"),o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(i);var s=2,a=e.FLOAT,c=!1,l=0,u=0;e.vertexAttribPointer(i,s,a,c,l,u);var d=e.getAttribLocation(r,"a_texCoord"),p=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,p),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(d),s=2,a=e.FLOAT,c=!1,l=0,u=0,e.vertexAttribPointer(d,s,a,c,l,u),r}var y=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];function E(e,t,n){var r=e.gl;this.program=v(r,y),this.setUniforms=function(){r.getUniformLocation(this.program,"u_image");var e=r.getUniformLocation(this.program,"u_flipY");r.uniform1f(e,1)}}var _=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];function b(e,t,n){var r=e.gl,i=1/t,o=1/n,s=5;this.program=v(r,_),this.setUniforms=function(){r.getUniformLocation(this.program,"u_image");var e=r.getUniformLocation(this.program,"u_flipY"),t=r.getUniformLocation(this.program,"u_singleStepOffset"),n=r.getUniformLocation(this.program,"u_denoiseLevel");r.uniform2f(t,i,o),r.uniform1f(n,s),r.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(s=e.denoiseLevel)},this.setSize=function(e,t){i=1/e,o=1/t}}var S=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];function T(e,t,n){var r=e.gl,i=1/t,o=1/n,s=5;this.program=v(r,S),this.setUniforms=function(){r.getUniformLocation(this.program,"u_image");var e=r.getUniformLocation(this.program,"u_flipY"),t=r.getUniformLocation(this.program,"u_singleStepOffset"),n=r.getUniformLocation(this.program,"u_denoiseLevel");r.uniform2f(t,i,o),r.uniform1f(n,s),r.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(s=e.denoiseLevel)},this.setSize=function(e,t){i=1/e,o=1/t}}var I=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];function N(e,t,n){var r=e.gl,i=1/t,o=1/n,s=5;this.program=v(r,I),this.setUniforms=function(){r.getUniformLocation(this.program,"u_image");var e=r.getUniformLocation(this.program,"u_flipY"),t=r.getUniformLocation(this.program,"u_singleStepOffset"),n=r.getUniformLocation(this.program,"u_denoiseLevel");r.uniform2f(t,i,o),r.uniform1f(n,s),r.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(s=e.denoiseLevel)},this.setSize=function(e,t){i=1/e,o=1/t}}var w=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144];function C(e,t,n){var r=e.gl,i=5,o=.1,s=.5,a=175/180*3.141593,c=115/180*3.141593,l=173/180*3.141593,u=116/180*3.141593,d=2.04203545,p=0,h=0,f=0,m=[],g=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],E=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];this.program=v(r,w),this.setUniforms=function(){var t=r.getUniformLocation(this.program,"u_flipY"),n=r.getUniformLocation(this.program,"u_denoiseLevel");r.uniform1f(n,i),r.uniform1f(t,1);var g=r.getUniformLocation(this.program,"light");r.uniform1f(g,o);var v=r.getUniformLocation(this.program,"redness");r.uniform1f(v,s);var y=r.getUniformLocation(this.program,"skin_he_max"),E=r.getUniformLocation(this.program,"skin_he_min"),_=r.getUniformLocation(this.program,"skin_hc_max"),b=r.getUniformLocation(this.program,"skin_hc_min"),S=r.getUniformLocation(this.program,"skin_hc_axis"),T=r.getUniformLocation(this.program,"facts_rotate_c"),I=r.getUniformLocation(this.program,"facts_rotate_le"),N=r.getUniformLocation(this.program,"facts_rotate_ge");r.uniform1f(y,a),r.uniform1f(E,c),r.uniform1f(_,l),r.uniform1f(b,u),r.uniform1f(S,d),r.uniform1f(T,p),r.uniform1f(I,h),r.uniform1f(N,f);var w=r.getUniformLocation(this.program,"u_originImage");r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,e.inputTexture),r.uniform1i(w,2);for(var C=["lighten_lut"],O=[r.TEXTURE3],A=0;A<C.length;A++){var R=r.getUniformLocation(this.program,C[A]);r.activeTexture(O[A]),r.bindTexture(r.TEXTURE_2D,m[A]),r.uniform1i(R,A+3)}},this.setParameters=function(e){void 0!==e.denoiseLevel&&(i=e.denoiseLevel),void 0!==e.lightLevel&&(o=e.lightLevel),void 0!==e.rednessLevel&&(s=e.rednessLevel,this._updateRedness(s)),void 0!==e.lighteningContrastLevel&&this._updateLut(e.lighteningContrastLevel)},this._updateRedness=function(e){var t,n,r=3.141593,i=e,o=i;i>1&&(i=1),i<0&&(i=0),o>1&&(o=1),o<0&&(o=0),p=.8*i,o<.8&&(o=0),(d=(117-4*o)/180*r)<(u=(116-4*o)/180*r)&&(d=u),u<r/2&&(u=r/2),d<r/2&&(d=r/2),(c=(115-4*o)/180*r)<r/2&&(c=r/2),(l=173/180*r)>r&&(l=r),d>r&&(d=r),(a=175/180*r)>r&&(a=r),n=l-d,f=(t=a-l)>.01?p*n/t:p,n=d-u,h=(t=u-c)>.01?p*n/t:p},this._updateLut=function(e){var t=null;0==e&&(t=y),1==e&&(t=E),2==e&&(t=g);for(var n=[new Uint8Array(t)],i=[256],o=[1],s=0;s<n.length;s++)r.bindTexture(r.TEXTURE_2D,m[s]),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,i[s],o[s],0,r.LUMINANCE,r.UNSIGNED_BYTE,n[s])},this._init=function(){for(var e=[new Uint8Array(y)],t=[256],n=[1],i=0;i<e.length;i++){var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,t[i],n[i],0,r.LUMINANCE,r.UNSIGNED_BYTE,e[i]),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),m.push(o)}},this._init()}var O=!1;function A(){this.programs=[];var e=this,t=null,n=null;e.gl=null,e.inputTexture=null;var r=[],i=[],o=0,s=0;e._initGl=function(n,a){e.inputTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);for(var c=0;c<4;c++){var l=t.createTexture();t.bindTexture(t.TEXTURE_2D,l),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),c<2?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,a,n,0,t.RGBA,t.UNSIGNED_BYTE,null);var u=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,u),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,l,0),r.push(l),i.push(u)}t.viewport(0,0,n,a),o=n,s=a},e.render=function(a){if(t){var c=0;s==a.videoWidth&&o===a.videoHeight&&(c=2),t.viewport(0,0,a.videoWidth,a.videoHeight),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a);for(var l=O?e.programs.length-1:0,u=0;u<=l;u++){var d=e.programs[u].program;t.useProgram(d);var p=t.getUniformLocation(d,"u_image");e.programs[u].setUniforms(),t.bindFramebuffer(t.FRAMEBUFFER,i[c+u%2]),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r[c+u%2]),t.uniform1i(p,0)}t.useProgram(n);var h=t.getUniformLocation(n,"u_flipY");t.uniform1f(h,-1),t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6)}},e.setEnableBeauty=function(e){O=e},e.init=function(r,i,o){if("undefined"==typeof WebGLRenderingContext)throw new Error("NOT_SUPPORT");t=o.getContext("webgl"),e.gl=t,e._initGl(r,i),e.programs.push(new E(this,r,i)),e.programs.push(new b(this,r,i)),e.programs.push(new T(this,r,i)),e.programs.push(new N(this,r,i)),e.programs.push(new C(this,r,i)),n=e.programs[0].program},e.release=function(){e.gl=null,t=null,n=null,e.inputTexture=null,e.programs=[],r=[],i=[]},e.setDenoiseLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({denoiseLevel:t})}))},e.setLightLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({lightLevel:t})}))},e.setRednessLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({rednessLevel:t})}))},e.setContrastLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({lighteningContrastLevel:t})}))},e.setSize=function(t,n){e.programs.forEach((function(e){e.setSize&&e.setSize(t,n)}))}}A._instance=null,A.getInstance=function(){return A._instance||(A._instance=new A),A._instance},t.a={addVideoEffectCapability:function(e){e.videoEffect={canvas:null,video:null,fps:30,stopChromeBackgroundLoop:null,enableBeauty:!1,denoiseLevel:5,lightLevel:.35,rednessLevel:.5,lighteningContrastLevel:1,videoContextInited:!1,originVideoTrack:null,canvasVideoTrack:null,ctx:null},e._initVideoContext=function(){if(e.videoEffect.videoContextInited)throw new Error("Failed to init video context. Already inited");if(!e.stream)throw new Error("Failed to init video context. Local Stream not initialized");e.videoEffect.originVideoTrack=e.stream.getVideoTracks()[0],e.attributes&&e.attributes.maxFrameRate&&(e.videoEffect.fps=e.attributes.maxFrameRate),e.videoEffect.videoContextInited=!0},e._renderWithWebGL=function(t){return new Promise((function(n){e.videoEffect.canvas||(e.videoEffect.canvas=document.createElement("canvas")),e.videoEffect.video||(e.videoEffect.video=document.createElement("video")),e.videoEffect.video.setAttribute("autoplay",""),e.videoEffect.video.setAttribute("muted",""),e.videoEffect.video.muted=!0,e.videoEffect.video.setAttribute("playsinline",""),e.videoEffect.video.setAttribute("style","display:none"),e.videoEffect.video.srcObject=t;var r=t.getVideoTracks()[0].getSettings(),i=r.width,o=r.height;e.videoEffect.canvas.setAttribute("width",i),e.videoEffect.canvas.setAttribute("height",o),e.videoEffect.video.setAttribute("width",i),e.videoEffect.video.setAttribute("height",o);var s=A.getInstance();s.init(e.videoEffect.video.width,e.videoEffect.video.height,e.videoEffect.canvas),s.setDenoiseLevel(e.videoEffect.denoiseLevel),s.setLightLevel(e.videoEffect.lightLevel),s.setRednessLevel(e.videoEffect.rednessLevel),s.setContrastLevel(e.videoEffect.lighteningContrastLevel),e.videoEffect.video.addEventListener("playing",(function t(){var r=e.videoEffect.canvas.captureStream(e.videoEffect.fps);e.videoEffect.video.removeEventListener("playing",t,!0),n([r.getVideoTracks()[0],e.videoEffect.video])}),!0),e.videoEffect.video.play()}))},e._disableEffect=function(){e.videoEffect.videoContextInited||e._initVideoContext();var t=e.videoEffect.originVideoTrack;if(!t)return p.default.warning("Video track is null, fail to disable video effect!"),Promise.resolve();if(e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var n=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"video"==e.track.kind}));if(n&&n.replaceTrack&&t)return n.replaceTrack(t)}return Promise.resolve()},e._releaseEffect=function(){var t;return t=e.videoEffect.enableBeauty?e._disableEffect():Promise.resolve(),A.getInstance().release(),e.videoEffect.videoContextInited=!1,e.videoEffect.canvasVideoTrack=null,t},e._enableEffect=function(){return e.videoEffect.videoContextInited||e._initVideoContext(),e.videoEffect.originVideoTrack?e.videoEffect.canvasVideoTrack?(e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()):e._renderWithWebGL(e.stream).then((function(t){var n=c()(t,2),r=n[0],i=n[1];e.videoEffect.canvasVideoTrack=r;var o=A.getInstance();return requestAnimationFrame((function t(){e.videoEffect.enableBeauty&&o.render(i),e.videoEffect.videoContextInited&&requestAnimationFrame(t)})),l.isChrome()&&document.addEventListener("visibilitychange",(function(){document.hidden,document.hidden?e.videoEffect.stopChromeBackgroundLoop=function(e,t){var n=1/t,r=new AudioContext,i=r.createGain();i.gain.value=0,i.connect(r.destination),function t(){var s=r.createOscillator();s.onended=t,s.connect(i),s.start(0),s.stop(r.currentTime+n),e(r.currentTime),o&&(s.onended=function(){r.close()})}();var o=!1;return function(){o=!0}}((function(){e.videoEffect.enableBeauty&&o.render(i)}),e.videoEffect.fps):e.videoEffect.stopChromeBackgroundLoop&&(e.videoEffect.stopChromeBackgroundLoop(),e.videoEffect.stopChromeBackgroundLoop=null)}),!1),e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()})):(p.default.warning("Video track is null, fail to enable video effect!"),Promise.resolve())},e._showEffectInLocalPlayer=function(){if(e.player){var t=e.player.div.children[0];if("none"!==t.style.display&&(e.player.div.appendChild(e.videoEffect.canvas),"video"===t.tagName.toLowerCase())){var n=t.getAttribute("style");e.videoEffect.canvas.setAttribute("style",n),"none"!==t.style.display&&(t.style.display="none")}}},e._removeEffectFromLocalPlayer=function(){if(e.player&&e.player.div&&e.videoEffect.enableBeauty&&e.videoEffect.canvas){e.player.div.removeChild(e.videoEffect.canvas);var t=e.player.div.children[0];"video"===t.tagName.toLowerCase()&&(e.videoEffect.canvas.style.display="none",t.style.display="block")}},e._replaceWithCanvasTrack=function(){var t=null;return e.pc&&e.pc.peerConnection&&e.pc.peerConnection&&(t=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"video"==e.track.kind}))),t&&t.replaceTrack&&e.videoEffect.canvasVideoTrack?t.replaceTrack(e.videoEffect.canvasVideoTrack):Promise.resolve()},e.setBeautyEffectOptions=function(){var t=s()(i.a.mark((function t(n,r){var o,s=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(d.checkValidBoolean)(n,"enabled"),o=A.getInstance(),e.videoEffect.enableBeauty==n){t.next=14;break}if(o.setEnableBeauty(n),!n){t.next=9;break}return t.next=7,e._enableEffect();case 7:t.next=12;break;case 9:return e._removeEffectFromLocalPlayer(),t.next=12,e._releaseEffect();case 12:e.videoEffect.enableBeauty=n,u.report.reportApiInvoke(e.sid,{callback:null,options:s,name:"Stream.setBeautyEffectOptions",tag:"tracer"});case 14:if(n){t.next=16;break}return t.abrupt("return");case 16:if(!r){t.next=20;break}Object(d.checkValidObject)(r,"options"),t.next=21;break;case 20:return t.abrupt("return");case 21:if(void 0!==r.smoothnessLevel&&(Object(d.checkValidFloatNumber)(r.smoothnessLevel,"smoothnessLevel",0,1),e.videoEffect.denoiseLevel=10*r.smoothnessLevel,e.videoEffect.denoiseLevel<.1&&(e.videoEffect.denoiseLevel=.1),o.setDenoiseLevel(e.videoEffect.denoiseLevel)),void 0!==r.lighteningLevel&&(Object(d.checkValidFloatNumber)(r.lighteningLevel,"lighteningLevel",0,1),e.videoEffect.lightLevel=r.lighteningLevel/2,e.videoEffect.lightLevel<.01&&(e.videoEffect.lightLevel=.01),o.setLightLevel(e.videoEffect.lightLevel)),void 0!==r.rednessLevel&&(Object(d.checkValidFloatNumber)(r.rednessLevel,"rednessLevel",0,1),e.videoEffect.rednessLevel=r.rednessLevel,e.videoEffect.rednessLevel<.01&&(e.videoEffect.rednessLevel=.01),o.setRednessLevel(e.videoEffect.rednessLevel)),void 0===r.lighteningContrastLevel){t.next=29;break}if(0===r.lighteningContrastLevel||1===r.lighteningContrastLevel||2===r.lighteningContrastLevel){t.next=27;break}throw new Error("Invalid lighteningContrastLevel: The value should be 0, 1 or 2.");case 27:e.videoEffect.lighteningContrastLevel=parseFloat(r.lighteningContrastLevel),o.setContrastLevel(e.videoEffect.lighteningContrastLevel);case 29:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},restoreVideoEffect:function(e){return e.videoEffect.enableBeauty?e._enableEffect():Promise.resolve()},disableVideoEffect:function(e){return e._releaseEffect?e._releaseEffect():Promise.resolve()},applyEffectInPlayer:function(e){e.videoEffect.enableBeauty&&e.videoEffect.canvas&&e._showEffectInLocalPlayer()},removeEffectFromLocalPlayer:function(e){e._removeEffectFromLocalPlayer()},replaceWithCanvasTrack:function(e){return e.videoEffect.enableBeauty?e._replaceWithCanvasTrack():Promise.resolve()},checkVideoEffectEnabled:function(e){return!!(e.videoEffect.enableBeauty&&e.videoEffect&&e.videoEffect.videoContextInited)&&(p.default.error("Operation not permitted: ".concat("VIDEO_EFFECT_ENABLED")),"VIDEO_EFFECT_ENABLED")}}},function(e,t){function n(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,c,"next",e)}function c(e){n(s,i,o,a,c,"throw",e)}a(void 0)}))}}},function(e,t,n){"use strict";var r=n(38),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),i=n.n(r),o=n(8),s=n(0),a=n(5);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=new function(){var e=Object(o.b)();return e.devicesHistory={},e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},e.deviceReloadTimer=null,e._init=function(t,n){e.state=e.states.INITING,e.devicesHistory={},e._reloadDevicesInfo((function(){e.state=e.states.INITED,e.dispatchEvent({type:"inited"}),t&&t()}),(function(t){s.default.warning("Device Detection functionality cannot start properly."),e.state=e.states.UNINIT,n&&n(t)}))},e._enumerateDevices=function(e,t){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return s.default.warning("enumerateDevices() not supported."),t&&t("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then((function(t){e&&setTimeout((function(){e(t)}),0)})).catch((function(e){t&&t(e)}))},e._reloadDevicesInfo=function(t,n){var r=[];e._enumerateDevices((function(n){var o=Date.now();for(var a in n.forEach((function(t){var n=e.devicesHistory[t.deviceId];if((n?n.state:e.deviceStates.INACTIVE)!=e.deviceStates.ACTIVE){var i=n||{initAt:o};i.device=t,i.state=e.deviceStates.ACTIVE,r.push(i),e.devicesHistory[t.deviceId]=i}e.devicesHistory[t.deviceId].lastReloadAt=o})),e.devicesHistory){var c=e.devicesHistory[a];c&&c.state==e.deviceStates.ACTIVE&&c.lastReloadAt!==o&&(c.state=e.deviceStates.INACTIVE,r.push(c)),c.lastReloadAt=o}e.state==e.states.INITED&&r.forEach((function(t){var n=i()({},t);switch(t.device.kind){case"audioinput":n.type="recordingDeviceChanged";break;case"audiooutput":n.type="playoutDeviceChanged";break;case"videoinput":n.type="cameraChanged";break;default:s.default.warning("Unknown device change",n),n.type="unknownDeviceChanged"}e.dispatchEvent(n)})),t&&t()}),n)},e.getDeviceById=function(t,n,r){e.getDevices((function(e){for(var i=0;i<e.length;i++){var o=e[i];if(o&&o.deviceId===t)return n&&n(o)}return r&&r()}))},e.searchDeviceNameById=function(t){var n=e.devicesHistory[t];return n?n.device.label||n.device.deviceId:null},e.getDevices=function(t,n){e._enumerateDevices(t,(function(e){n&&n(e.name+": "+e.message)}))},e.getVideoCameraIdByLabel=function(t,n,r){e.getCameras((function(e){var i,o=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(e);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.label===t)return n&&n(s.deviceId)}}catch(e){o.e(e)}finally{o.f()}return r&&r(a.default.NOT_FIND_DEVICE_BY_LABEL)}),r)},e.getRecordingDevices=function(t,n){return e._enumerateDevices((function(e){var n=e.filter((function(e){return"audioinput"==e.kind}));t&&t(n)}),(function(e){n&&n(e)}))},e.getPlayoutDevices=function(t,n){return e._enumerateDevices((function(e){var n=e.filter((function(e){return"audiooutput"==e.kind}));t&&t(n)}),(function(e){n&&n(e)}))},e.getCameras=function(t,n){return e._enumerateDevices((function(e){var n=e.filter((function(e){return"videoinput"==e.kind}));t&&t(n)}),(function(e){n&&n(e)}))},e._init((function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",(function(){e._reloadDevicesInfo()})),e.deviceReloadTimer=setInterval(e._reloadDevicesInfo,5e3)})),e}},function(e,t,n){"use strict";n.r(t),n.d(t,"_getReconnectCSTimer",(function(){return w})),n.d(t,"_setClientConnectionStateRecord",(function(){return C})),n.d(t,"getGatewayList",(function(){return A})),n.d(t,"getUserAccount",(function(){return M}));var r=n(11),i=n.n(r),o=n(12),s=n.n(o),a=n(17),c=n.n(a),l=n(2),u=(n(4),n(0)),d=n(14),p=n(1),h=n(5),f=function(e,t){var n=!1,r=0,i=Object(l.getParameter)("PROXY_CS"),o=Object(l.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),s=0,a={command:"convergeAllocateEdge",sid:e.sid,appId:e.appId,token:e.token,uid:e.uid,cname:e.cname,ts:Math.floor(Date.now()/1e3),version:l.VERSION,seq:0,requestId:1},c=function(c){var l=(new Date).getTime();m("https://"+c+"/api/v1",a,(function(a,h){if(a)return u.default.debug("["+e.clientId+"] Request proxy server failed: ",a),r++,p.report.requestProxyAppCenter(e.sid,{lts:l,succ:!1,APAddr:c,workerManagerList:null,ec:JSON.stringify(a),response:JSON.stringify({err:a,res:h})}),r>=i.length&&t&&t("Get proxy server failed: request all failed"),void(!(r%o)&&r<i.length&&(s++,d()));if(!n)if((h=JSON.parse(h)).json_body){var f=JSON.parse(h.json_body);if(u.default.debug("["+e.clientId+"] App return:",f.servers),200!==f.code)a="Get proxy server failed: response code ["+f.code+"], reason [ "+f.reason+"]",r++,u.default.debug("["+e.clientId+"] "+a),p.report.requestProxyAppCenter(e.sid,{lts:l,succ:!1,APAddr:c,workerManagerList:null,ec:a,response:JSON.stringify({err:a,res:h})}),r>=i.length&&t&&t(a),!(r%o)&&r<i.length&&(s++,d());else{n=!0;var m=v(f.servers);p.report.requestProxyAppCenter(e.sid,{lts:l,succ:!0,APAddr:c,workerManagerList:JSON.stringify(m),ec:null,response:JSON.stringify({res:h})}),t&&t(null,m)}}else u.default.debug("["+e.clientId+"] Get proxy server failed: no json_body"),p.report.requestProxyAppCenter(e.sid,{lts:l,succ:!1,APAddr:c,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:h})})}))},d=function(){for(var e=s*o,t=e;t<Math.min(i.length,e+o);t++){var n=i[t];c(n)}};d()},m=function(e,t,n){var r={service_name:"webrtc_proxy",json_body:JSON.stringify(t)};Object(d.post)(e,r,(function(e){n&&n(null,e)}),(function(e){n&&n(e)}),{"X-Packet-Service-Type":0,"X-Packet-URI":61})},g=function(e,t,n){var r=!1,i=0,o={command:"request",gatewayType:"http",appId:e.appId,cname:e.cname,uid:e.uid+"",sdkVersion:"2.3.1",sid:e.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid}};t.map((function(s){var a=(new Date).getTime();!function(e,t,n){Object(d.post)(e,t,(function(e){n&&n(null,e)}),(function(e){n&&n(e)}))}("https://"+s+":4000/v2/machine",o,(function(o,c){if(o)return u.default.debug("["+e.clientId+"] Request worker manager failed: ",o),i++,p.report.requestProxyWorkerManager(e.sid,{lts:a,succ:!1,workerManagerAddr:s,ec:JSON.stringify(o),response:JSON.stringify({res:c})}),void(i>=t.length&&n&&n("requeet worker manager server failed: request failed"));if(!r){if(!(c=JSON.parse(c)).serverResponse)return n&&n("requeet worker manager server failed: serverResponse is undefined");r=!0,p.report.requestProxyWorkerManager(e.sid,{lts:a,succ:!0,workerManagerAddr:s,ec:JSON.stringify(o),response:JSON.stringify({res:c})}),n&&n(null,{address:s,serverResponse:c.serverResponse})}}))}))},v=function(e){if(!e||[]instanceof Array==0)return[];var t=[];return e.forEach((function(e){var n;e.address&&e.tcp?(e.address.match(/^[\.\:\d]+$/)?n="".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(u.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),n="".concat(e.address,":").concat(e.tcp)),t.push(n)):u.default.error("["+joinInfo.clientId+"] Invalid address format ",e)})),t},y=n(21),E=function(e,t,n,r){var i=Object(l.getParameter)("WEBCS_DOMAIN").concat(Object(l.getParameter)("WEBCS_DOMAIN_BACKUP_LIST")),o=Object(l.getParameter)("PROXY_SERVER_TYPE3");i=i.map((function(e,t){return"".concat(o[(t+1)%o.length],"/ap/?url=").concat(e)}));var s,a=0,c=!0,f=Object(l.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),m=0,g=function(g){!function(e,t,n,r,i){var o=Date.now(),s=function(e,r){try{p.report.joinChooseServer2(n.sid,{lts:o,succ:!e,csAddr:t,serverList:r&&r.gateway_addr,cid:r&&r.cid+"",uid:r&&r.uid+"",ec:e,chooseServerIp:r&&r.detail&&r.detail[502]})}catch(e){}},a=function(r,i){var s=Date.now();try{p.report.joinWebProxyAP({lts:s,sid:n.sid,cname:n.cname,cid:n.cid,uid:n.uid,sucess:r?-1:1,elapse:s-o,eventType:e,apServerAddr:t,turnServerAddrList:JSON.stringify(i),errorCode:r||"0"})}catch(e){}},c=Object(l.getParameter)("AREA_SETTING").reduce((function(e,t,n){var r=Object(y.getAreaCodeByArea)(t);return r?0===n?r:"".concat(e,",").concat(r):e}),""),f={appid:n.token,client_ts:Date.now(),opid:133,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{11:c,6:n.stringUid},key:n.token,service_ids:[11,i?20:18],uid:n.uid||0}}]};t="https://".concat(t,"/api/v2/transpond/webrtc?v=2"),Object(d.postFormData)(t,f,(function(e){var o=function(e){return new RegExp(/10102\d{2}$/).test(e)?"NO_SERVICE_AVAILABLE":h.APErrorCode[e]||e};try{var c,d,p=JSON.parse(e);if(30===(p=p.response_body)[0].uri&&0!==p[0].buffer.code){var f=o(p[0].buffer.code);return a(f,p),r(f)}if(4096===p[0].buffer.flag?(d=p[0].buffer,c=p[1].buffer):(d=p[1].buffer,c=p[0].buffer),0!==c.code)return f=o(c.code),u.default.error("[".concat(n.clientId,"] requestProxyServer failed: ").concat(f)),a(f,c),r(f);if(!c.edges_services||!c.edges_services instanceof Array)return a("UNEXPECTED_ERROR",c),r("UNEXPECTED_ERROR");var m=Object(l.getParameter)("GATEWAY_DOMAINS"),g=0;if(t.indexOf(m[1])>-1&&(g=1),0===c.edges_services.length)return a("EMPTY_PROXY_LIST",c),r("EMPTY_PROXY_LIST");var v=c.edges_services.map((function(e){if(e.ip)return e.ip=i?"".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(m[g++%m.length]):"".concat(e.ip),e}));if(a(null,v),0!==d.code)return f=o(d.code),u.default.error("[".concat(n.clientId,"] requestChooseServer failed: ").concat(f)),s(f),r(f);var y=[];if(m=Object(l.getParameter)("GATEWAY_DOMAINS"),g=0,t.indexOf(m[1])>-1&&(g=1),d.edges_services.forEach((function(e){var r;if(e.ip&&e.port){if(!e.ip.match(/^[\.\:\d]+$/))return u.default.info("["+n.clientId+"] "+"Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),void s("UNEXPECTED_IP");r="".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(m[g++%m.length]);var i=Object(l.getParameter)("PROXY_SERVER_TYPE3");r=/sd-rtn/.test(t)?"".concat(i[0],"/ws/?h=").concat(r,"&p=").concat(e.port):"".concat(i[1],"/ws/?h=").concat(r,"&p=").concat(e.port),y.push(r)}else u.default.error("["+n.clientId+"] Invalid address format ",e)})),!y.length)return u.default.error("["+n.clientId+"] Empty Address response",p),s("EMPTY_ADDRESS_RESPONSE"),r("EMPTY_ADDRESS_RESPONSE");d.ticket=d.cert;var E={gateway_addr:y,uid:d.uid,cid:d.cid,vid:d.detail&&d.detail[8],res:d,detail:p.detail};s(null,E),r(null,{gatewayServers:E,turnServers:v})}catch(e){return u.default.error("[".concat(n.clientId,"] requestProxyServer failed with unexpected body "),e),a("UNEXPECTED_ERROR"),r("UNEXPECTED_ERROR")}}),(function(e,t){"timeout"===e.type?(a("REQUEST_PROXY_SERVER_TIME_OUT"),r("REQUEST_PROXY_SERVER_TIME_OUT")):(a("REQUEST_PROXY_SERVER_FAILED"),r("REQUEST_PROXY_SERVER_FAILED"))}))}(e,g,t,(function(e,r){e?(a++,u.default.error("[".concat(t.clientId,"] request ").concat(g," failed: ").concat(e)),e&&-1===h.JOIN_PROXY_RETRY_LIST.indexOf(e)&&(s=e),a===i.length&&(s||(s="RETRYABLE_ERROR"),n(s)),!(a%f)&&a<i.length&&(m++,v())):c&&(/sd-rtn/.test(r.gatewayServers.gateway_addr[0])?Object(l.setParameter)("NGINX",o[0]):Object(l.setParameter)("NGINX",o[1]),c=!1,n(null,r))}),r)},v=function(){for(var e=m*f,t=e;t<Math.min(i.length,e+f);t++){var n=i[t];g(n)}};v()},_=n(13),b=n(29),S=n.n(b),T=n(30),I={},N={},w=function(e){return I[e]},C=function(e,t){N[e]=t},O=function(e,t,n,r,i,o){var s=(new Date).getTime(),a=t,c="";t.multiIP&&t.multiIP.gateway_ip&&(c={vocs_ip:[t.multiIP.uni_lbs_ip],vos_ip:[t.multiIP.gateway_ip]});var f=Object(l.getParameter)("AREA_SETTING").reduce((function(e,t,n){var r=Object(y.getAreaCodeByArea)(t);return r?0===n?r:"".concat(e,",").concat(r):e}),""),m={appid:t.token,opid:133,client_ts:+new Date,sid:t.sid,request_bodies:[{uri:22,buffer:{cname:t.cname,detail:{5:c?JSON.stringify(c):void 0,6:t.stringUid,11:f},key:t.token,service_ids:[11],uid:t.uid||0}}]};Object(d.postFormData)(e,m,(function(i){try{var c=JSON.parse(i),d=(c=c.response_body[0].buffer).code}catch(e){var f="requestChooseServer failed with unexpected body "+i;return u.default.error("["+a.clientId+"]",f),r(f,void 0,void 0,o)}if(d)return y=new RegExp(/10102\d{2}$/).test(d)?"NO_SERVICE_AVAILABLE":h.APErrorCode[c.code]||d,p.report.joinChooseServer(t.sid,{lts:s,succ:!1,csAddr:e,serverList:null,ec:y,chooseServerIp:c&&c.detail&&c.detail[502]}),r("Get server node failed ["+y+"]",e,y,o);var m=[],g=Object(l.getParameter)("GATEWAY_DOMAINS"),v=0;if(e.indexOf(g[1])>-1&&(v=1),c.edges_services.forEach((function(e){var t;e.ip&&e.port?(e.ip.match(/^[\.\:\d]+$/)?t="".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(g[v++%g.length],":").concat(e.port):(u.default.info("["+a.clientId+"] "+"Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),t="".concat(e.ip,":").concat(e.port)),m.push(t)):u.default.error("["+a.clientId+"] Invalid address format ",e)})),!m.length){u.default.error("["+a.clientId+"] Empty Address response",c);var y="EMPTY_ADDRESS_RESPONSE";return p.report.joinChooseServer(t.sid,{lts:s,succ:!1,csAddr:e,serverList:null,ec:y,chooseServerIp:c&&c.detail&&c.detail[502]}),r("Get server node failed ["+y+"]",e,y,o)}c.ticket=c.cert;var E={gateway_addr:m,uid:c.uid,cid:c.cid,vid:c.detail&&c.detail[8],res:c,uni_lbs_ip:c.detail};return n(E,e)}),(function(e,n){"timeout"===e.type?(p.report.joinChooseServer(t.sid,{lts:s,succ:!1,csAddr:n,serverList:null,ec:"timeout"}),r("Connect choose server timeout",n,void 0,o)):(p.report.joinChooseServer(t.sid,{lts:s,succ:!1,csAddr:n,serverList:null,ec:e.httpErrorCode||"server_wrong"}),r("Connect choose server error",n,void 0,o))}))},A=function(e,t,n){var r=!1,i=null,o=1,s=1,a=e.clientId,c=function t(s,c){if(!r){var d=[];!function(e,t,n){var r,i=(new Date).getTime(),o=!1,s=0,a=0,c=Object(l.getParameter)("WEBCS_DOMAIN"),d=c.length,f=Object(l.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),m=f.length,g=Object(l.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),v=0,E=0,_=function(n,r){var s;try{s=n.res.detail[8]}catch(t){u.default.debug("["+e.clientId+"] get vid failed",t)}if(o)p.report.joinChooseServer(e.sid,{lts:i,succ:!0,csAddr:r,serverList:n.gateway_addr,cid:n.cid+"",uid:n.uid+"",ec:null,vid:s,chooseServerIp:n.res&&n.res.detail&&n.res.detail[502]},!1);else{if(clearTimeout(I),o=!0,e.proxyServer)for(var a=n.gateway_addr,c=0;c<a.length;c++){var l=a[c].split(":");n.gateway_addr[c]=e.proxyServer+"/ws/?h="+l[0]+"&p="+l[1]}t(n),p.report.joinChooseServer(e.sid,{lts:i,succ:!0,csAddr:r,serverList:n.gateway_addr,cid:n.cid+"",uid:n.uid+"",ec:null,vid:s,chooseServerIp:n.res&&n.res.detail&&n.res.detail[502]},!0)}},b=function(t,i,o,c){"domain"===c&&s++,"backup"===c&&a++,u.default.error("["+e.clientId+"]",t,i,o),o&&-1===h.JOIN_CS_RETRY_LIST.indexOf(o)&&(r=o),s===d&&a===m&&n(r),"domain"===c&&!(s%g)&&s<d&&(v++,S()),"backup"===c&&!(a%g)&&a<m&&(E++,T())},S=function t(){for(var n=v*g,r=n;r<Math.min(d,n+g);++r){var i;if("string"==typeof c[r]){var o=c[r];i=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(o+"/api/v2/transpond/webrtc?v=2"):"https://".concat(o,"/api/v2/transpond/webrtc?v=2");var a=Object(y.getAreaCodeByWebCS)(o);u.default.debug("["+e.clientId+"] "+"Connect to choose_server: ".concat(i,", ").concat(a)),O(i,e,_,b,0,"domain")}else s++,u.default.error("["+e.clientId+"] Invalid Host",c[r]),r===n+g-1&&r<d-1-1&&(v++,t())}};S();var T=function t(){if(!o)for(var n=E*g,r=n;r<Math.min(m,n+g);r++){var i;if("string"==typeof f[r]){var s=f[r];i=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(s+"/api/v2/transpond/webrtc?v=2"):"https://".concat(s,"/api/v2/transpond/webrtc?v=2");var c=Object(y.getAreaCodeByWebCS)(s);u.default.debug("["+e.clientId+"] "+"Connect to backup_choose_server: ".concat(i,", ").concat(c)),O(i,e,_,b,0,"backup")}else a++,u.default.error("["+e.clientId+"] Invalid Host",f[r]),r===n+g-1&&r<f-1-1&&(v++,t())}},I=setTimeout(T,1e3)}(e,(function(t){r=!0,d=t,clearTimeout(i),N[a]!==_.a.DISCONNECTED&&N[a]!==_.a.DISCONNECTING?c&&c(d,null):u.default.debug("[".concat(e.clientId,"] Request gateway list success when connection state is ").concat(N[a]))}),(function(r){if(r)return u.default.info("["+e.clientId+"] Join failed: "+r),void(n&&n(r));if(N[a]===_.a.DISCONNECTED||N[a]===_.a.DISCONNECTING)return u.default.debug("[".concat(e.clientId,"] Request gateway list falied when connection state is ").concat(N[a])),void(n&&n("OPERATION_ABORT"));u.default.debug("["+e.clientId+"] Request gateway list will be restart in "+o+"s"),i=setTimeout((function(){t(s,c)}),1e3*o),I[a]=i;var d=Object(l.getParameter)("AP_BACKOFF_MAX_TIME");o=o>=d?d:2*o}))}},d=function n(){!function(e,t){f(e,(function(n,r){if(n)return t&&t(n);u.default.debug("["+e.clientId+"] getProxyServerList: ",r),g(e,r,t)}))}(e,(function(r,o){if(r){u.default.debug("["+e.clientId+"]",r),u.default.debug("["+e.clientId+"] Request proxy will be restart in "+s+"s"),i=setTimeout((function(){n()}),1e3*s),I[a]=i;var d=Object(l.getParameter)("AP_BACKOFF_MAX_TIME");s=s>=d?d:2*s}else{clearTimeout(i);var h=o.address;e.proxyServer=h;var f={mode:"manual",url:o.address,tcpport:o.serverResponse.tcpport||"3433",udpport:o.serverResponse.udpport||"3478",username:o.serverResponse.username||"test",credential:o.serverResponse.password||Object(l.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!0};f.tcpport+="",f.udpport+="",e.turnServers=[],e.turnServers.push(f),p.report.setProxyServer(h),u.default.setProxyServer(h),c(h,t)}}))};e.useProxyServer?1==e.proxyServerType?d():2==e.proxyServerType?function n(){!function(e,t){f(e,(function(n,r){return n?t&&t(n):(u.default.debug("["+e.clientId+"] getProxyServerList: ",r),t&&t(null,{address:r[0],serverResponse:{tcpport:"443",udpport:"3478",username:"test",password:"111111"}}))}))}(e,(function(r,o){if(r)return u.default.debug("["+e.clientId+"]",r),u.default.debug("["+e.clientId+"] Request proxy will be restart in "+s+"s"),i=setTimeout((function(){n()}),1e3*s),I[a]=i,void(s=s>=3600?3600:2*s);clearTimeout(i);var d=Object(l.getParameter)("PROXY_SERVER_TYPE2");e.proxyServer=d;var h={mode:"manual",url:o.address,tcpport:o.serverResponse.tcpport||"3433",udpport:o.serverResponse.udpport||"3478",username:o.serverResponse.username||"test",credential:o.serverResponse.password||"111111",forceturn:!0};h.tcpport+="",h.udpport+="",e.turnServers=[],e.turnServers.push(h),p.report.setProxyServer(d),u.default.setProxyServer(d),c(d,t)}))}():3==e.proxyServerType?function r(){E("proxy3",e,(function(o,c){if(o)return"RETRYABLE_ERROR"!==o?n&&n(o):(u.default.debug("["+e.clientId+"]",o),u.default.debug("["+e.clientId+"] Request proxy will be restart in "+s+"s"),i=setTimeout((function(){r()}),1e3*s),I[a]=i,void(s=s>=3600?3600:2*s));var d=c.gatewayServers,h=c.turnServers;clearTimeout(i);var f=Object(l.getParameter)("NGINX");e.proxyServer=f,e.turnServers=[];var m=Object(T.randomString)();h.map((function(t){var n={mode:"manual",url:t.ip,tcpport:"",udpport:t.port||"3478",username:t.username||m,credential:t.password||S()(m).toString(),forceturn:!0};n.tcpport+="",n.udpport+="",e.turnServers.push(n)})),p.report.setProxyServer(f),u.default.setProxyServer(f),t(d)}))}():4==e.proxyServerType?function r(){E("proxy4",e,(function(o,c){if(o)return"RETRYABLE_ERROR"!==o?n&&n(o):(u.default.debug("["+e.clientId+"]",o),u.default.debug("["+e.clientId+"] Request proxy will be restart in "+s+"s"),i=setTimeout((function(){r()}),1e3*s),I[a]=i,void(s=s>=3600?3600:2*s));var d=c.gatewayServers,h=c.turnServers;clearTimeout(i);var f=Object(l.getParameter)("NGINX");e.proxyServer=f,e.turnServers=[];var m=Object(T.randomString)();h.map((function(t){var n={mode:"manual",url:t.ip,tcpport:t.port||"443",udpport:"",username:t.username||m,credential:t.password||S()(m).toString(),forceturn:!1};n.tcpport+="",n.udpport+="",e.turnServers.push(n)})),p.report.setProxyServer(f),u.default.setProxyServer(f),t(d)}))}():5==e.proxyServerType?function r(){E("proxy5",e,(function(o,c){if(o)return"RETRYABLE_ERROR"!==o?n&&n(o):(u.default.debug("["+e.clientId+"]",o),u.default.debug("["+e.clientId+"] Request proxy will be restart in "+s+"s"),i=setTimeout((function(){r()}),1e3*s),I[a]=i,void(s=s>=3600?3600:2*s));var d=c.gatewayServers,h=c.turnServers;clearTimeout(i);var f=Object(l.getParameter)("NGINX");e.proxyServer=f,e.turnServers=[];var m=Object(T.randomString)();h.map((function(t){var n={mode:"manual",url:t.ip,tcpport:t.port||"443",udpport:"",username:t.username||m,credential:t.password||S()(m).toString(),forceturn:!1,useTurns:!0};n.tcpport+="",n.udpport+="",e.turnServers.push(n)})),p.report.setProxyServer(f),u.default.setProxyServer(f),t(d)}),!0)}():d():c(null,t)},R=function(e,t,n,r,i){var o=Date.now();r=r||t.stringUid;var s={sid:t.sid,opid:10,appid:t.appId,string_uid:r};return new Promise((function(i,a){Object(d.post)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=stringuid"),s,(function(c){try{var l=JSON.parse(c),d=l.code}catch(i){var f="requestUserAccount failed with unexpected body "+c;return u.default.error("["+t.clientId+"]",f),a({retryable:!0,info:f,url:e,error:"UNEXPECTED_ERROR"}),n&&n.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void p.report.reqUserAccount(s.sid,{lts:o,success:!1,serverAddress:e,stringUid:r,uid:null,extend:c,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(d){var m=!1;return"INTERNAL_SERVER_ERROR"===(v=h.StringUidErrorCode[l.code%1e4]||"REQ_ACCOUNT_ERR_".concat(d))&&(m=!0),n&&n.dispatchEvent({type:"error",reason:v}),p.report.reqUserAccount(s.sid,{lts:o,success:!1,serverAddress:e,stringUid:r,uid:null,errorCode:v,extend:s}),a({retryable:m,info:f="Get String Uid Failed ["+v+"]",url:e,error:v})}var g=l.uid;if(!(g>0&&g<Math.pow(2,32))){u.default.error("["+t.clientId+"] "+"Invalid Uint Uid ".concat(r," => ").concat(g),l);var v="INVALID_UINT_UID_".concat(g);return n&&n.dispatchEvent({type:"error",reason:v}),p.report.reqUserAccount(s.sid,{lts:o,success:!1,serverAddress:e,stringUid:r,uid:null,errorCode:v,extend:s}),a({retryable:!0,error:v,info:"Get String Uid failed ["+v+"]",url:e})}i({uid:g,url:e}),p.report.reqUserAccount(s.sid,{lts:o,success:!0,serverAddress:e,stringUid:r,uid:g,errorCode:null,extend:s})}),(function(e,t){if("timeout"===e.type){var i="USER_ACCOUNT_TIMEOUT";n&&n.dispatchEvent({type:"error",reason:i}),p.report.reqUserAccount(s.sid,{lts:o,success:!1,serverAddress:t,stringUid:r,uid:null,errorCode:i,extend:s}),a({retryable:!0,info:i,url:t,error:i})}else{var c="USER_ACCOUNT_SERVER_WRONG_".concat(e.type);n&&n.dispatchEvent({type:"error",reason:c}),p.report.reqUserAccount(s.sid,{lts:o,success:!1,serverAddress:t,stringUid:r,uid:null,errorCode:c,extend:s}),a({retryable:!0,info:c,url:t,error:c})}}),{"X-Packet-Service-Type":0,"X-Packet-URI":72})}))},M=function(e,t,n){Date.now();var r,o=Object(l.getParameter)("ACCOUNT_REGISTER"),a=!1,d=Object(l.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),p=null,h=null,f=new Promise(function(){var f=c()(s.a.mark((function c(f,m){var g,v,y;return s.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:p=f,h=m,r=0;case 3:if(!(r<Object(l.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){c.next=33;break}if(!a){c.next=6;break}return c.abrupt("return");case 6:return g=o[r%o.length],v=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(g+"/api/v1"):"https://".concat(g,"/api/v1"),c.prev=8,c.delegateYield(s.a.mark((function r(){var i;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.proxyServer,r.next=3,R(v,e,t,n);case 3:if(i=r.sent,!a){r.next=6;break}return r.abrupt("return",{v:void 0});case 6:a=!0,setTimeout((function(){u.default.debug("Get UserAccount Successfully",i),p(i)}),0);case 8:case"end":return r.stop()}}),r)}))(),"t0",10);case 10:if(y=c.t0,"object"!==i()(y)){c.next=13;break}return c.abrupt("return",y.v);case 13:c.next=30;break;case 15:if(c.prev=15,c.t1=c.catch(8),!a){c.next=19;break}return c.abrupt("return");case 19:if(!c.t1.retryable){c.next=27;break}return(d=Math.ceil(d*Object(l.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(l.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(d=Object(l.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),u.default.error("".concat(c.t1.info," ").concat(c.t1.url," Will Fetch User Account in ").concat(d/1e3," seconds")),c.next=25,new Promise((function(e){setTimeout(e,d)}));case 25:c.next=30;break;case 27:u.default.error("Get UserAccount Error: ".concat(c.t1.info," ").concat(c.t1.url),c.t1.error),a=!0,h(c.t1.error);case 30:r++,c.next=3;break;case 33:case"end":return c.stop()}}),c,null,[[8,15]])})));return function(e,t){return f.apply(this,arguments)}}());return f.cancel=function(){a||(a=!0,h({info:"Request Cancelled",retryable:!1}))},f.isFinished=function(){return a},f}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,s,a=i(n(0));!function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(o||(o={})),t.AREAS=o,function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(s||(s={}));var c={ASIA:{CODE:s.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:s.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:s.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:s.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:s.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:s.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],NGINX:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:s.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],NGINX:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:s.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:s.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:s.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};t.AREA_DOMAIN_MAP=c;var l={GLOBAL:{ASIA:[o.CHINA,o.JAPAN,o.INDIA],EUROPE:[],NORTH_AMERICA:[],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},u=Object.keys(l[o.GLOBAL]),d=[o.CHINA,o.NORTH_AMERICA,o.EUROPE,o.ASIA,o.JAPAN,o.INDIA,o.OCEANIA,o.SOUTH_AMERICA,o.AFRICA];t.getAreaCodeByConfig=function(e){var t=e.areaCode,n=e.excludedArea;return n?function(e,t){var n,i=[];if("string"==typeof e&&(e=[e]),t&&!e.includes(o.GLOBAL)&&(i=e),t||(i=e),t&&e.includes(o.GLOBAL)){var s=[o.GLOBAL,o.OVERSEA],a=Object.keys(c);if(t===o.GLOBAL)throw new Error("Can not set excludedArea to 'GLOBAL'");if(t===o.CHINA)i=[o.OVERSEA];else if(n=t,u.includes(n)){var p=function(e){return void 0===e&&(e=""),l[o.GLOBAL][e]||[]}(t),h=r(s,[t],p);i=a.filter((function(e){return!h.includes(e)}))}else if(function(e){var t=!1;return u.forEach((function(n){l.GLOBAL[n].includes(e)&&(t=!0)})),t}(t)){var f=function(e){void 0===e&&(e="");var t="";return u.forEach((function(n){l.GLOBAL[n].includes(e)&&(t=n)})),t}(t),m=r(s,[f,t]);i=a.filter((function(e){return!m.includes(e)}))}else i=e;i=function(e){var t=[];return d.forEach((function(n){e.includes(n)&&t.push(n)})),t.concat(e.filter((function(e){return!d.includes(e)})))}(i)}return i}(t,n):t},c.CHINA={CODE:s.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]},t.getAreaCodeByWebCS=function(e){for(var t=Object.keys(c),n=0;n<t.length;n++){var r=t[n],i=c[r];if(i.WEBCS_DOMAIN.includes(e)||i.WEBCS_DOMAIN_BACKUP_LIST.includes(e))return i.CODE===s.OVERSEA?s.ASIA+","+s.EUROPE+","+s.AFRICA+","+s.NORTH_AMERICA+","+s.SOUTH_AMERICA+","+s.OCEANIA:i.CODE}},t.getAreaCodeByArea=function(e){return e===o.OVERSEA?s.ASIA+","+s.EUROPE+","+s.AFRICA+","+s.NORTH_AMERICA+","+s.SOUTH_AMERICA+","+s.OCEANIA:s[e]},t.getAreaDomainConfig=function(e){var t={WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],NGINX:[]};return e.map((function(e){var n=c[e];if(n){var r=Object.keys(n);r?r.map((function(e){"CODE"!==e&&(t[e]=t[e].concat(n[e]))})):a.default.info(e+" is not exist")}else a.default.info(e+" is not exist")})),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return w}));var r=n(7),i=n.n(r),o=n(4),s=n(8),a=function(e){var t=Object(s.b)(e);return t.url=".",t},c=n(0),l=n(15),u=n(5),d=n(2),p=n(1),h=0,f=function(e){var t=a({});t.id=e.id,t.playerId=h++,t.destroyed=!1,t.fit=e.options&&e.options.fit,"contain"!==t.fit&&"cover"!==t.fit&&(t.fit=null),t.url=e.url,t.stream=e.stream.stream,t.peerVideoReady=!1,t.isFreeze=!1,t.freezeTimeCounterList=[],t.freezeCount=0,t.lastFreezeCount=0,t.lastTimeupdateTime=0,t.elementID=e.elementID,t.setAudioOutput=function(e,n,r){var i=t.video||t.audio;return i?i.setSinkId?void i.setSinkId(e).then((function(){return c.default.debug("["+t.id+"] "+"video ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),i==t.video&&t.audio?t.audio.setSinkId(e):Promise.resolve()})).then((function(){return c.default.debug("["+t.id+"] "+"audio ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),n&&n()})).catch((function(e){return c.default.error("["+t.id+"] VideoPlayer.setAudioOutput",e),r&&r(e)})):(c.default.error("["+t.id+"] ",u.default.WEB_API_NOT_SUPPORTED),r&&r(u.default.WEB_API_NOT_SUPPORTED)):(c.default.error("["+t.id+"] ",u.default.PLAYER_NOT_FOUND),r&&r(u.default.PLAYER_NOT_FOUND))},t.destroy=function(){c.default.debug("[".concat(t.id,"] destroy ").concat(e.stream.local?"local":"remote"," Player ").concat(t.id)),Object(l.setSrcObject)(t.video,null),Object(l.setSrcObject)(t.audio,null),t.video.load(),t.audio.load(),t.video.pause(),t.video.remove(),t.audio.remove(),t.freezeCheckInterval&&clearInterval(t.freezeCheckInterval),t.destroyed=!0,delete t.resizer,document.getElementById(t.div.id)&&t.parentNode.contains(t.div)&&t.div.remove()&&t.parentNode.removeChild(t.div),["video","audio"].forEach((function(n){t[n];var r=s[n];clearTimeout(r.playDeferTimeout),r.formerMediaState=null;var i={playerId:t.playerId,stateId:r.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};s[n]=i;var o={type:"player-status-change",playerId:t.playerId,mediaType:n,status:i.status,reason:i.reason,isErrorState:!1,streamId:t.id};c.default.debug("[".concat(t.id,"] Media Player Status Change Triggered by destroy()"),o),e.stream.dispatchEvent(o),p.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:o,tag:"tracer"})()}))},t.div=document.createElement("div"),t.div.setAttribute("id","player_"+t.id),e.stream.video?t.div.setAttribute("style","width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;"):t.div.setAttribute("style","width: 100%; height: 100%; position: relative; overflow: hidden;"),t.video=document.createElement("video"),t.video.setAttribute("id","video"+t.id),e.stream.local&&!e.stream.screen?e.stream.mirror?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(t.fit||"cover",";")):t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";")):e.stream.video?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";")):e.stream.screen?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"contain")):t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(t.fit||"cover"));var n={autoplay:!0,muted:!!e.stream.local||!(!o.isSafari()&&"iOS"!==o.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!1,volume:null},r=i()({},n,e.options);!0!==r.muted||r.volume||(r.volume=0),t.video.setAttribute("autoplay",""),t.video.setAttribute("muted",""),t.video.muted=!0,t.video.autoplay=!0,r.playsinline&&t.video.setAttribute("playsinline",""),r.controls&&t.video.setAttribute("controls",""),r.contains&&(t.video.controls=!0),Number.isFinite(r.volume)&&(t.video.volume=r.volume),t.audio=document.createElement("audio"),t.audio.setAttribute("id","audio"+t.id),!0===r.muted&&t.audio.setAttribute("muted",""),!0===r.muted&&(t.audio.muted=!0),r.playsinline&&t.audio.setAttribute("playsinline",""),Number.isFinite(r.volume)&&(t.audio.volume=r.volume),void 0!==t.elementID?(document.getElementById(t.elementID).appendChild(t.div),t.container=document.getElementById(t.elementID)):(document.body.appendChild(t.div),t.container=document.body),t.parentNode=t.div.parentNode;var s={video:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};t.mediaElemExists=function(e){for(var t=e,n=0;n<Object(d.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&t;n++)t=t.parentNode;return!!t};var f=function(e){return t.mediaElemExists(e)?e.paused?"paused":"play":"aborted"},m=function(e,t,n){var r=f(e),i=!0;return"paused"===r?("audio"===t&&!0===n.muted&&(i=!1),n.autoplay||(i=!1)):"play"===r?"video"===t?i=!1:!0===n.muted?e.muted&&(i=!1):e.muted||(i=!1):"aborted"===r&&(i=!1),i},g=function(n){var i,o=this;if(o===t.video?i="video":o===t.audio&&(i="audio"),i){if(n.type||c.default.error("[".concat(t.id,"] Unexpected evt"),n),"video"===i&&o.muted&&o.paused)return c.default.debug("[".concat(t.id,"] auto resume video element")),void o.play();var a=f(o);clearTimeout(s[i].playDeferTimeout),s[i].playDeferTimeout=setTimeout((function(){s[i].playDeferTimeout=null;var l=s[i],u=f(o);if(a===u){var d={playerId:t.playerId,stateId:l.stateId+1,playDeferTimeout:null,error:m(o,i,r),status:f(o),reason:n.type,updatedAt:Date.now()};if(l.status!==d.status){s[i]=d;var h={type:"player-status-change",playerId:t.playerId,mediaType:i,status:d.status,reason:d.reason,isErrorState:d.error,streamId:t.id};c.default.debug("[".concat(t.id,"] Media Player Status Change"),h),e.stream.dispatchEvent(h),p.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:h,tag:"tracer"})()}}else c.default.debug("[".concat(t.id,"] Status Change after event Triggered.")+"Stream ".concat(t.id," PlayerId ").concat(t.playerId," mediaType ").concat(i," Status ").concat(a,"=>").concat(u))}),Object(d.getParameter)("PLAYER_STATE_DEFER"))}else c.default.error("[".concat(t.id,"] Unknown media element"),o)};t.video.addEventListener("playing",(function(e){!function e(){t.video.videoWidth*t.video.videoHeight>4?c.default.debug("["+t.id+"] video dimensions:",t.video.videoWidth,t.video.videoHeight):setTimeout(e,50)}()}));var v=0,y=0,E=0;t.freezeCheckInterval=setInterval((function(){Date.now()-t.lastTimeupdateTime>500&&t.peerVideoReady?(t.isFreeze=!0,t.freezeCount+=1):t.isFreeze=!1}),500),t.video.addEventListener("playing",g),t.video.addEventListener("canplay",g),t.video.addEventListener("abort",g),t.video.addEventListener("onerror",g),t.video.addEventListener("suspend",g),t.video.addEventListener("stalled",g),t.video.addEventListener("pause",g),t.audio.addEventListener("playing",g),t.audio.addEventListener("canplay",g),t.audio.addEventListener("abort",g),t.audio.addEventListener("onerror",g),t.audio.addEventListener("suspend",g),t.audio.addEventListener("stalled",g),t.audio.addEventListener("pause",g);var _=t.audio,b="audio";if(e.stream.hasVideo()||e.stream.hasScreen())t.div.appendChild(t.video),t.div.appendChild(t.audio),o.isEdge()?t.video.srcObject=e.stream.stream:(Object(l.attachMediaStream)(t.video,e.stream.stream),Object(l.attachMediaStream)(t.audio,e.stream.stream)),t.video.addEventListener("timeupdate",(function(){var e=Date.now();if((v+=1)<10)t.lastTimeupdateTime=e;else for(e-t.lastTimeupdateTime>500&&(t.peerVideoReady?y+=e-t.lastTimeupdateTime:t.peerVideoReady=!0),E+=e-t.lastTimeupdateTime,t.lastTimeupdateTime=e;E>=6e3;)E-=6e3,t.freezeTimeCounterList.push(Math.min(6e3,y)),y-=6e3,y=Math.max(y,0)}));else{!1!==r.muted&&"video_element_muted"!==r.muted||(t.video.removeAttribute("muted"),t.video.muted=!1),t.video.removeAttribute("autoplay"),t.video.autoplay=!1,t.div.appendChild(t.video),_=t.video,b="video";var S=s.audio,T={playerId:t.playerId,stateId:S.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"audioonly",updatedAt:Date.now()};s.audio=T;var I={type:"player-status-change",playerId:t.playerId,mediaType:"audio",status:T.status,reason:T.reason,isErrorState:T.error,streamId:t.id};if(c.default.debug("[".concat(t.id,"] Media Player Status Change"),I),Promise.resolve().then((function(){return e.stream.dispatchEvent(I)})),p.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:I,tag:"tracer"})(),window.MediaStream&&(o.isSafari()||"iOS"===o.getBrowserOS())){var N=new MediaStream(e.stream.stream.getAudioTracks());Object(l.setSrcObject)(t.video,N)}else Object(l.setSrcObject)(t.video,e.stream.stream)}if(r.autoplay&&_){var w=_.play();w&&w.catch&&w.catch((function(n){if(!t.destroyed&&_){var i=s[b],o={playerId:t.playerId,stateId:i.stateId+1,playDeferTimeout:null,error:m(_,b,r),status:f(_),reason:"error",updatedAt:Date.now()};if(i.status!==o.status){c.default.debug("[".concat(t.id,"] Player ").concat(t.playerId," Status Changed Detected by promise error: ").concat(i.status,"=>").concat(o.status),n),s[b]=o;var a={type:"player-status-change",playerId:t.playerId,mediaType:b,status:o.status,reason:o.reason,isErrorState:o.error,streamId:t.id};c.default.debug("[".concat(t.id,"] Media Player Status Change"),a),e.stream.dispatchEvent(a),p.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:a,tag:"tracer"})()}}}))}return t.setAudioVolume=function(e){var n=parseInt(e)/100;isFinite(n)&&(n<0?n=0:n>1&&(n=1),t.video&&(t.video.volume=n),t.audio&&(t.audio.volume=n))},t},m=n(23),g=n(10),v=n(6),y=n(19),E=n(3),_=n(25),b=n(16),S=n(11),T=n.n(S),I=function(e){Object(E.checkValidString)(e,"profileName"),-1===(e=e.toLowerCase()).indexOf("_")&&(e+="_1"),Object(E.checkValidEnum)(e,"profileName",Object.keys(d.SUPPORT_RESOLUTION_LIST));var t=d.SUPPORT_RESOLUTION_LIST[e];t||(e=Object(d.getParameter)("DEFAULT_PROFILE"),t=d.SUPPORT_RESOLUTION_LIST[e]);var n={profileName:e,video:{width:t[0],height:t[1]},attributes:{resolution:"".concat(t[0],"x").concat(t[1]),minFrameRate:t[2],maxFrameRate:t[3],minVideoBW:t[4],maxVideoBW:t[5]}};return t[2]&&(n.video.frameRate=t[2]),t[6]&&t[7]&&(n.screen={width:t[0],height:t[1],frameRate:{min:t[6],max:t[7]}}),n},N=function(e){var t=Object(s.b)();if(t.params=i()({},e),t.stream=e.stream,t.url=e.url,t.onClose=void 0,t.local=!1,t.videoSource=e.videoSource,t.audioSource=e.audioSource,e.video=!(!e.videoSource&&!e.video),t.video=e.video,e.audio=!(!e.audioSource&&!e.audio),t.audio=e.audio,t.screen=!!e.screen,t.screenAudio=!!e.screenAudio,t.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},t.videoSize=e.videoSize,t.player=void 0,t.audioLevelHelper=null,e.attributes=e.attributes||{},t.attributes=e.attributes,t.microphoneId=e.microphoneId,t.cameraId=e.cameraId,t.facingMode=e.facingMode,t.inSwitchDevice=!1,t.userMuteVideo=!1,t.userMuteAudio=!1,t.peerMuteVideo=!1,t.peerMuteAudio=!1,t.lowStream=null,t.videoWidth=0,t.videoHeight=0,t.streamId=e.streamID,t.userId=null,t.uintId=e.uintUID||null,t.mirror=!1!==e.mirror,t.DTX=e.audioProcessing&&e.audioProcessing.DTX,t.audioProcessing=e.audioProcessing,t.optimizationMode=e.optimizationMode,t.highQuality=!1,t.stereo=!1,t.speech=!1,t.screen||delete t.screen,!(void 0===t.videoSize||t.videoSize instanceof Array&&4===t.videoSize.length))throw Error("Invalid Video Size");function n(){var e={};t.getVideoTrack()===this?(c.default.debug("Video Track Ended"),e.type="videoTrackEnded",e.track=this):t.getAudioTrack()===this?(c.default.debug("Audio Track Ended"),e.type="audioTrackEnded",e.track=this):c.default.debug("Detached Track ended",this.kind,this.label,this),e.type&&t.dispatchEvent(e)}return t.videoSize=[640,480,640,480],void 0!==e.local&&!0!==e.local||(t.local=!0),t.initialized=!t.local,t._streamInitID=null,function(e){e.audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},e._initSoundIfNotExists=function(t,n){e.audioMixing.sounds[t]||(e.audioMixing.sounds[t]={soundId:t,state:"IDLE",muted:e.userMuteAudio,filePath:n,volume:e.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},e._initSoundIfNotExists(-1),e.loadAudioBuffer=function(t,n,r){var i=p.report.reportApiInvoke(e.sid,{callback:r,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});Object(E.checkValidString)(n,"url",1,1024,!1),Object(E.checkValidString)(t,"id",1,1024,!1);var o=function(t){c.default.error("[".concat(e.streamId,"] loadAudioBuffer Failed: ")+t),i(u.default.LOAD_AUDIO_FAILED)},s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType="arraybuffer",s.onload=function(){if(s.status>400)o("".concat(s.status," ").concat(s.statusText));else{var n=s.response;e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.ctx.decodeAudioData(n,(function(n){e.audioMixing.buffer[t]=n,i(null)}),(function(t){c.default.error("[".concat(e.streamId,"] decodeAudioData Failed: "),t),i(t)}))}},s.onerror=function(){return o("load error")},s.ontimeout=function(){return o("timeout")},s.send()},e.createAudioBufferSource=function(t){var n=p.report.reportApiInvoke(e.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(e.audioMixing.buffer[t.id]){var r=e.audioMixing.buffer[t.id],i=e.audioMixing.ctx.createBufferSource();i.buffer=r;var s=e.audioMixing.ctx.createGain();if(i.connect(s),s.connect(e.audioMixing.mediaStreamDest),i.gainNode=s,t.loop)i.loop=!0,i.start(0,t.playTime/1e3);else if(t.cycle>1)if(Object(o.isChrome)()){i.loop=!0;var a=t.cycle*r.duration*1e3-(t.playTime||0);i.start(0,t.playTime/1e3,a/1e3)}else c.default.warning("[".concat(e.streamId,"] Cycle Param is ignored by current browser")),i.start(0,t.playTime/1e3);else i.start(0,t.playTime/1e3);var l=e.audioMixing.sounds[t.soundId];return l.source=i,e._flushAudioMixingMuteStatus(),i.addEventListener("ended",(function(){i===l.source&&e.dispatchEvent({type:"audioSourceEnded",soundId:t.soundId,source:i,sound:l})})),n(),i}return c.default.error("[".concat(e.streamId,"] "),"AUDIOBUFFER_NOT_FOUND",t.id),n(!1),!1},e.on("audioSourceEnded",(function(t){var n=t.source,r=t.sound;r&&r.state===e.audioMixing.states.BUSY&&!r.pauseAt&&(r.state=e.audioMixing.states.IDLE,r.startAt=null,r.startOffset=null,r.resumeAt=null,r.resumeOffset=null,n.gainNode&&n.gainNode.disconnect&&n.gainNode.disconnect(),n.buffer=null,e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest))})),e.clearAudioBufferSource=function(){e.audioBufferSource.forEach((function(e){e.stop()}))},e._isSoundExists=function(t){return!!e.audioMixing.sounds[t.soundId]||(c.default.error("SoundId not exists. #".concat(t.soundId)),!1)},e._initAudioContext=function(){if(e.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!e.stream)throw new Error("Failed to init audio context. Local Stream not initialized");e.audioMixing.ctx=Object(_.a)(),e.audioMixing.mediaStreamSource=e.audioMixing.ctx.createMediaStreamSource(e.stream),e.audioMixing.mediaStreamDest=e.audioMixing.ctx.createMediaStreamDestination(),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest);var t=e.stream.getVideoTracks()[0];if(t&&e.audioMixing.mediaStreamDest.stream.addTrack(t),e._originStream=e.stream,e._isAudioMuted()?(e._unmuteAudio(),e.stream=e.audioMixing.mediaStreamDest.stream,e._muteAudio()):e.stream=e.audioMixing.mediaStreamDest.stream,e.audioLevelHelper=null,e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var n=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"audio"==e.track.kind})),r=e.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];n&&n.replaceTrack&&r&&n.replaceTrack(r)}e.audioMixing.audioContextInited=!0},e._cleanupAudioMixing=function(){if(e.audioMixing.audioContextInited){for(var t in e.audioMixing.sounds){var n=e.audioMixing.sounds[t];n.state!==e.audioMixing.states.BUSY&&n.state!==e.audioMixing.states.PAUSED||e._stopOneEffect({soundId:t})}e.audioLevelHelper=null,e.audioMixing.audioContextInited=!1}},e._reloadInEarMonitoringMode=function(t){if(t){if(!e.audioMixing.inEarMonitoringModes[t])return c.default.error("[".concat(e.streamId,"] Invalid InEarMonitoringMode ").concat(t));e.audioMixing.inEarMonitoring=t}switch(e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.FILE:e.audioMixing.mediaStreamSource.connectedToDestination&&(e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!1);case e.audioMixing.inEarMonitoringModes.ALL:for(var n in e.audioMixing.sounds){var r=e.audioMixing.sounds[n];r&&r.source&&!r.source.connectedToDestination&&(r.source.gainNode.connect(e.audioMixing.ctx.destination),r.source.connectedToDestination=!0)}}switch(e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.MICROPHONE:e.audioMixing.source.forEach((function(t){t.connectedToDestination&&(t.gainNode.disconnect(e.audioMixing.ctx.destination),t.connectedToDestination=!1)}));case e.audioMixing.inEarMonitoringModes.ALL:e.audioMixing.mediaStreamSource.connectedToDestination||(e.audioMixing.mediaStreamSource.connect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!0)}},e._startAudioMixingBufferSource=function(t){e.audioMixing.audioContextInited||e._initAudioContext();var n={soundId:t.soundId,id:t.filePath,loop:t.loop,cycle:t.cycle,playTime:t.playTime||0},r=t.replace,i=e.createAudioBufferSource(n);return i.sound=e.audioMixing.sounds[t.soundId],i?(i.addEventListener("ended",e._audioMixingFinishedListener,{once:!0}),e._reloadInEarMonitoringMode(),r&&e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.mediaStreamDest),i):null},e._stopAudioMixingBufferSource=function(t){var n=e.audioMixing.sounds[t.soundId].source;return n?(n.removeEventListener("ended",e._audioMixingFinishedListener),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest),n.stop(),n.gainNode&&n.gainNode.disconnect&&n.gainNode.disconnect(),n.buffer=null,n):null},e._flushAudioMixingMuteStatus=function(t){for(var n in e.audioMixing.sounds){var r=e.audioMixing.sounds[n];r&&(void 0!==t&&(r.muted=!!t),r.source&&(r.muted?r.source.gainNode.gain.value=0:r.source.gainNode.gain.value=r.volume/100))}},e._handleAudioMixingInvalidStateError=function(t,n,r){var i=e.audioMixing.sounds[n.soundId],o=-1===n.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";c.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(o,", state is ").concat(i.state)),r&&r(o)},e._handleAudioMixingNoSourceError=function(t,n,r){e.audioMixing.sounds[n.soundId].state=e.audioMixing.states.IDLE;var i=-1===n.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";c.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(i)),r&&r(i)},e._getOneEffectStates=function(t){var n=e.audioMixing.sounds[t.soundId];return function(){return n?{state:n.state,startAt:n.startAt,resumeAt:n.resumeAt,pauseOffset:n.pauseOffset,pauseAt:n.pauseAt,resumeOffset:n.resumeOffset,stopAt:n.stopAt,duration:e._getOneEffectDuration(t),position:e._getOneEffectCurrentPosition(t)}:{}}},e._audioMixingFinishedListener=function(){var t=this.sound;t.state===e.audioMixing.states.IDLE&&e.audioMixing.buffer[t.options.filePath]&&!t.options.cacheResource&&(c.default.debug("Recycled buffer ".concat(t.options.filePath)),delete e.audioMixing.buffer[t.options.filePath]),-1===t.soundId&&e.dispatchEvent({type:"audioMixingFinished"})},e._playOneEffect=function(t,n){Object(E.checkValidObject)(t,"options");var r=t.soundId,i=(t.filePath,t.cacheResource);if(t.cycle,t.loop,t.playTime,t.replace,Object(o.isSafari)()&&Object(o.getBrowserVersion)()<12){var s="BROWSER_NOT_SUPPORT";return c.default.error("[".concat(e.streamId,"] Cannot _playOneEffect: "),s),n(s)}e.audioMixing.audioContextInited||e._initAudioContext(),e._initSoundIfNotExists(r);var a=e.audioMixing.sounds[r];if(a.state===e.audioMixing.states.IDLE){if(void 0!==t.cycle&&!t.cycle>0)return s="Invalid Parmeter cycle: "+t.cycle,c.default.error("[".concat(e.streamId,"] ").concat(r),s),n(s);if(Object(E.isEmpty)(i)&&(t.cacheResource=!0),a.state=e.audioMixing.states.STARTING,a.options=t,e.audioMixing.buffer[t.filePath]){var l=e._startAudioMixingBufferSource(t);if(l)return a.source=l,a.startAt=Date.now(),a.resumeAt=null,a.pauseOffset=null,a.pauseAt=null,a.resumeOffset=null,a.stopAt=null,a.startOffset=t.playTime||0,a.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),n(null);a.state=e.audioMixing.states.IDLE;var u="CREATE_BUFFERSOURCE_FAILED";if(n)return n(u);c.default.error("[".concat(e.streamId,"] "),u)}else e.loadAudioBuffer(t.filePath,t.filePath,(function(r){if(r)a.state=e.audioMixing.states.IDLE,n?n(r):c.default.error("[".concat(e.streamId,"] "),r);else{var i=e._startAudioMixingBufferSource(t);if(i)return a.source=i,a.startAt=Date.now(),a.resumeAt=null,a.pauseOffset=null,a.pauseAt=null,a.resumeOffset=null,a.stopAt=null,a.startOffset=t.playTime||0,a.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),n(null);if(a.state=e.audioMixing.states.IDLE,r="CREATE_BUFFERSOURCE_FAILED",n)return n(r);c.default.error("[".concat(e.streamId,"] "),r)}}))}else e._handleAudioMixingInvalidStateError("_playEffect",t,n)},e._stopOneEffect=function(t,n){var r=e.audioMixing.sounds[t.soundId];return e._isSoundExists(t)?r.state===e.audioMixing.states.BUSY||r.state===e.audioMixing.states.PAUSED?(e._stopAudioMixingBufferSource(t),r.stopAt=Date.now(),r.state=e.audioMixing.states.IDLE,e.audioMixing.buffer[r.options.filePath]&&!r.options.cacheResource&&(c.default.debug("Recycled buffer ".concat(r.options.filePath)),delete e.audioMixing.buffer[r.options.filePath]),void(n&&n(null))):void e._handleAudioMixingInvalidStateError("_stopOneEffect",t,n):n("SOUND_NOT_EXISTS")},e._pauseOneEffect=function(t,n){var r=e.audioMixing.sounds[t.soundId];if(r.state===e.audioMixing.states.BUSY)return e._stopAudioMixingBufferSource(t)?(r.pauseAt=Date.now(),r.state=e.audioMixing.states.PAUSED,r.resumeAt?r.pauseOffset=r.pauseAt-r.resumeAt+r.resumeOffset:r.pauseOffset=r.pauseAt-r.startAt+r.startOffset,n&&n(null)):void e._handleAudioMixingNoSourceError("_pauseOneEffect",t,n);e._handleAudioMixingInvalidStateError("_pauseOneEffect",t,n)},e._resumeOneEffect=function(t,n){var r=e.audioMixing.sounds[t.soundId];if(r.state===e.audioMixing.states.PAUSED){var i={soundId:t.soundId,filePath:r.options.filePath,cycle:r.options.cycle,loop:r.options.loop,playTime:r.pauseOffset,replace:r.options.replace},o=e._startAudioMixingBufferSource(i);if(!o){var s="CREATE_BUFFERSOURCE_FAILED";return n(s),void c.default.error("[".concat(e.streamId,"] "),s)}r.source=o,r.resumeAt=Date.now(),r.resumeOffset=r.pauseOffset,r.state=e.audioMixing.states.BUSY,r.pauseAt=null,r.pauseOffset=null,n(null)}else e._handleAudioMixingInvalidStateError("_resumeOneEffect",t,n)},e._getOneEffectDuration=function(t){var n=e.audioMixing.sounds[t.soundId];return n.options&&n.options.filePath&&e.audioMixing.buffer[n.options.filePath]?1e3*e.audioMixing.buffer[n.options.filePath].duration:null},e._getOneEffectCurrentPosition=function(t,n){var r=e.audioMixing.sounds[t.soundId];return r.state===e.audioMixing.states.PAUSED?r.pauseOffset%e._getOneEffectDuration(t):r.state===e.audioMixing.states.BUSY?r.resumeAt?(Date.now()-r.resumeAt+r.resumeOffset)%e._getOneEffectDuration(t):(Date.now()-r.startAt+r.startOffset)%e._getOneEffectDuration(t):void(n&&e._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",t))},e._setOneEffectPosition=function(t,n,r){var i=e.audioMixing.sounds[t.soundId];if(i.state===e.audioMixing.states.BUSY){if(!e._stopAudioMixingBufferSource(t))return void e._handleAudioMixingNoSourceError("_setOneEffectPosition",t,r);var o={soundId:t.soundId,filePath:i.options.filePath,loop:i.options.loop,cycle:i.options.cycle,playTime:n},s=e._startAudioMixingBufferSource(o);if(!s){var a="CREATE_BUFFERSOURCE_FAILED";return r&&r(a),void c.default.error("[".concat(e.streamId,"] "),a)}i.source=s,i.startAt=Date.now(),i.startOffset=n,i.resumeAt=null,i.resumeOffset=null,i.pauseOffset=null,i.pauseAt=null}else{if(i.state!==e.audioMixing.states.PAUSED)return void e._handleAudioMixingInvalidStateError("_setOneEffectPosition",t,r);i.pauseOffset=n}r&&r(null)},e.startAudioMixing=function(t,n){var r=p.report.reportApiInvoke(e.sid,{callback:function(t){if(t)return n&&n(t);e.dispatchEvent({type:"audioMixingPlayed"}),n&&n(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:t});Object(E.checkValidObject)(t,"options");var o=t.filePath,s=t.cacheResource,a=t.cycle,c=t.loop,l=t.playTime,u=t.replace;Object(E.checkValidString)(o,"filePath",1,Object(d.getParameter)("FILEPATH_LENMAX"),!1),Object(E.checkValidNumber)(l,"playTime",0,1e8),!Object(E.isEmpty)(a)&&Object(E.checkValidNumber)(a,"cycle"),!Object(E.isEmpty)(c)&&Object(E.checkValidBoolean)(c,"loop"),!Object(E.isEmpty)(u)&&Object(E.checkValidBoolean)(u,"replace"),!Object(E.isEmpty)(s)&&Object(E.checkValidBoolean)(s,"cacheResource");var h=i()({soundId:-1},t);e._playOneEffect(h,r)},e.stopAudioMixing=function(t){var n=p.report.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});e._stopOneEffect({soundId:-1},n)},e.pauseAudioMixing=function(t){var n=p.report.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return e._pauseOneEffect({soundId:-1},n)},e.resumeAudioMixing=function(t){var n=p.report.reportApiInvoke(e.sid,{callback:function(n,r){if(n)return t&&t(n);e.dispatchEvent({type:"audioMixingPlayed"}),t&&t(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});e._resumeOneEffect({soundId:-1},n)},e.adjustAudioMixingVolume=function(t){var n=p.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});Object(E.checkValidNumber)(t,"volume",0,100),e.audioMixing.sounds[-1].volume=t,e._flushAudioMixingMuteStatus(),n()},e.getAudioMixingDuration=function(){var t=p.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),n=e._getOneEffectDuration({soundId:-1});return t(null,n),n},e.getAudioMixingCurrentPosition=function(){var t=p.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),n=e._getOneEffectCurrentPosition({soundId:-1},!0);return t(null,n),n},e.setAudioMixingPosition=function(t,n){var r=p.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});Object(E.checkValidNumber)(t,"position",0,1e8),e._setOneEffectPosition({soundId:-1},t,r)},e.playEffect=function(t,n){var r=p.report.reportApiInvoke(e.sid,{callback:function(t){if(t)return n&&n(t);e.dispatchEvent({type:"effectPlayed"}),n&&n(null)},name:"Stream.playEffect",options:t});Object(E.checkValidObject)(t,"options");var i=t.soundId,o=t.filePath,s=t.cycle;Object(E.checkValidNumber)(i,"soundId",1,1e4),Object(E.checkValidString)(o,"filePath",0,Object(d.getParameter)("FILEPATH_LENMAX"),!1),!Object(E.isEmpty)(s)&&Object(E.checkValidNumber)(s,"cycle"),e._playOneEffect(t,r)},e.stopEffect=function(t,n){var r=p.report.reportApiInvoke(e.sid,{callback:n,getStates:e._getOneEffectStates({soundId:t}),name:"Stream.stopEffect"});Object(E.checkValidNumber)(t,"soundId",1,1e4),e._stopOneEffect({soundId:t},r)},e.stopAllEffects=function(t){var n=p.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.stopAllEffect"}),r=!1,i=0,o=0,s=function(e){r||(e?(n(e),r=!0):i+=1,i===o&&(n(null),r=!0))};for(var a in e.audioMixing.sounds){var c=e.audioMixing.sounds[a];-1!==c.soundId&&(c.state!==e.audioMixing.states.BUSY&&c.state!==e.audioMixing.states.PAUSED||(o++,e._stopOneEffect({soundId:a},s)))}o||n(null)},e.preloadEffect=function(t,n,r){var i=p.report.reportApiInvoke(e.sid,{callback:r,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});Object(E.checkValidNumber)(t,"soundId",1,1e4),Object(E.checkValidString)(n,"filePath",1,Object(d.getParameter)("FILEPATH_LENMAX"),!1),e._initSoundIfNotExists(t,n),e.audioMixing.buffer[n]?i(null):e.loadAudioBuffer(n,n,i)},e.unloadEffect=function(t,n){var r=p.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});Object(E.checkValidNumber)(t,"soundId",1,1e4);var i=e.audioMixing.sounds[t];if(!i){var o="SOUND_NOT_EXISTS";return c.default.error(o,t),void r(o)}var s=i.options?i.options.filePath:i.filePath;if(s)delete e.audioMixing.buffer[s],delete e.audioMixing.sounds[t],r(null);else{var a="SOUND_BUFFER_NOT_FOUND";c.default.error(a,t),r(a)}},e.pauseEffect=function(t,n){var r=p.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return e._pauseOneEffect({soundId:t},r)},e.pauseAllEffects=function(t){var n=p.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.pauseAllEffects"}),r=!1,i=0,o=0,s=function(e){r||(e?(n(e),r=!0):i+=1,i===o&&(n(null),r=!0))};for(var a in e.audioMixing.sounds)"-1"!==a&&e.audioMixing.sounds[a].state===e.audioMixing.states.BUSY&&(o++,e._pauseOneEffect({soundId:a},s));o||n(null)},e.resumeEffect=function(t,n){Object(E.checkValidNumber)(t,"soundId",1,1e4);var r=p.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return e._resumeOneEffect({soundId:t},r)},e.resumeAllEffects=function(t){var n=p.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.resumeAllEffects"}),r=!1,i=0,o=0,s=function(e){r||(e?(n(e),r=!0):i+=1,i===o&&(n(null),r=!0))};for(var a in e.audioMixing.sounds)"-1"!==a&&e.audioMixing.sounds[a].state===e.audioMixing.states.PAUSED&&(o++,e._resumeOneEffect({soundId:a},s));o||n(null)},e.getEffectsVolume=function(){var t=[];for(var n in e.audioMixing.sounds){var r=e.audioMixing.sounds[n];r&&"-1"!==n&&t.push({soundId:parseInt(n),volume:r.volume})}return t},e.setEffectsVolume=function(t,n){var r=p.report.reportApiInvoke(e.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:n});for(var i in Object(E.checkValidNumber)(t,"volume",0,100),e.audioMixing.defaultVolume=t,e.audioMixing.sounds){var o=e.audioMixing.sounds[i];"-1"!==i&&(o.volume=t)}e._flushAudioMixingMuteStatus(),r(null)},e.setVolumeOfEffect=function(t,n,r){var i=p.report.reportApiInvoke(e.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:r});Object(E.checkValidNumber)(t,"soundId",0,1e4),Object(E.checkValidNumber)(n,"volume",0,100),e._initSoundIfNotExists(t),e.audioMixing.sounds[t].volume=n,e._flushAudioMixingMuteStatus(),i(null)}}(t),b.a.addVideoEffectCapability(t),function(e,t){e.videoConstraint={},t.cameraId&&(e.videoConstraint.deviceId={exact:t.cameraId}),t.facingMode&&(e.videoConstraint.facingMode=t.facingMode),e.videoSize&&(e.videoConstraint.width=e.videoSize[0],e.videoConstraint.height=e.videoSize[1]),Object(o.isLegacyChrome)()||(e.videoConstraint.frameRate=30),e.audioConstraint={},t.microphoneId&&(e.audioConstraint.deviceId={exact:t.microphoneId}),Object(o.isLegacyChrome)()||e.audioProcessing&&(void 0!==e.audioProcessing.AGC&&(Object(o.isFireFox)()?e.audioConstraint.autoGainControl=e.audioProcessing.AGC:Object(o.isChrome)()&&(e.audioConstraint.googAutoGainControl=e.audioProcessing.AGC,e.audioConstraint.googAutoGainControl2=e.audioProcessing.AGC)),void 0!==e.audioProcessing.AEC&&(e.audioConstraint.echoCancellation=e.audioProcessing.AEC),void 0!==e.audioProcessing.ANS&&(Object(o.isFireFox)()?e.audioConstraint.noiseSuppression=e.audioProcessing.ANS:Object(o.isChrome)()&&(e.audioConstraint.googNoiseSuppression=e.audioProcessing.ANS))),e.screenConstraint={},t.sourceId&&(e.screenConstraint.sourceId=t.sourceId),t.extensionId&&Object(o.isChrome)()?(e.screenConstraint.extensionId=t.extensionId,e.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:e.screenAttributes.width,maxHeight:e.screenAttributes.height,maxFrameRate:e.screenAttributes.maxFr,minFrameRate:e.screenAttributes.minFr}):(e.screenConstraint.mediaSource="screen",e.screenConstraint.width=e.screenAttributes.width,e.screenConstraint.height=e.screenAttributes.height,e.screenConstraint.frameRate={ideal:e.screenAttributes.maxFr,max:e.screenAttributes.maxFr}),t.mediaSource&&(e.screenConstraint.mediaSource=t.mediaSource),e.setVideoResolution=function(n){var r=p.report.reportApiInvoke(e.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(n instanceof Array)){var o=I(n+="");return o&&o.video?(e.videoConstraint=i()(e.videoConstraint,{width:{ideal:o.video.width},height:{ideal:o.video.height}}),t.attributes.resolution=o.attributes.resolution,(s=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&s.applyConstraints?(c.default.debug("setVideoResolution applyConstraints",e.videoConstraint),s.applyConstraints(e.videoConstraint).then(r).catch(r)):r(),!0):(r("NO_PROFILE_".concat(n)),!1)}var s,a=n[0],l=n[1];e.videoConstraint=i()(e.videoConstraint,{width:{ideal:a},height:{ideal:l}}),t.attributes.resolution="".concat(a,"x").concat(l),(s=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&s.applyConstraints?(c.default.debug("setVideoResolution applyConstraints",e.videoConstraint),b.a.disableVideoEffect(e).then((function(){return s.applyConstraints(e.videoConstraint).then(r).catch(r)})).then((function(){return b.a.restoreVideoEffect(e)}))):r()},e.setVideoFrameRate=function(t){var n=p.report.reportApiInvoke(e.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(o.isFireFox)())return n("FIREFOX_NOT_SUPPORTED"),!1;if("object"===T()(t)&&t instanceof Array&&t.length>1){e.videoConstraint=i()(e.videoConstraint,{frameRate:t[0]}),e.attributes.minFrameRate=t[0],e.attributes.maxFrameRate=t[1];var r=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return r&&r.applyConstraints?(c.default.debug("setVideoFrameRate applyConstraints",e.videoConstraint),r.applyConstraints(e.videoConstraint).then(n).catch(n)):n(),!0}return n("INVALID_PARAM_".concat(JSON.stringify(t))),!1},e.setVideoBitRate=function(n){var r=p.report.reportApiInvoke(e.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===T()(n)&&n instanceof Array&&n.length>1?(t.attributes.minVideoBW=n[0],t.attributes.maxVideoBW=n[1],e.connectionSpec&&(e.connectionSpec.minVideoBW=n[0],e.connectionSpec.maxVideoBW=n[1]),e.pc&&e.pc.renegotiate&&e.pc.renegotiate(),r(),!0):(r("INVALID_PARAM_".concat(JSON.stringify(n))),!1)},e.setScreenBitRate=function(t){var n=p.report.reportApiInvoke(e.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===T()(t)&&t instanceof Array&&t.length>1?(e.screenAttributes.minVideoBW=t[0],e.screenAttributes.maxVideoBW=t[1],n(),!0):(n("INVALID_PARAM_".concat(JSON.stringify(t))),!1)},e.setScreenProfile=function(t){var n=p.report.reportApiInvoke(e.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});Object(E.checkValidEnum)(t,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var r=I(t);return r&&r.screen?(e.screenConstraint.mandatory?(e.screenConstraint.mandatory.maxWidth=r.screen.width,e.screenConstraint.mandatory.maxHeight=r.screen.height,r.screen.frameRate&&r.screen.frameRate.min&&r.screen.frameRate.max&&(e.screenConstraint.mandatory.minFrameRate=r.screen.frameRate.min,e.screenConstraint.mandatory.maxFrameRate=r.screen.frameRate.max)):e.screenConstraint=i()(e.screenConstraint,r.screen),e.screenAttributes.width=r.screen.width,e.screenAttributes.height=r.screen.height,e.screenAttributes.minFr=r.screen.frameRate.min,e.screenAttributes.maxFr=r.screen.frameRate.max,n(),!0):(n("NO_SCREEN_PROFILE_".concat(JSON.stringify(t))),!1)},e.setVideoProfileCustom=function(t){var n=p.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution(t[0]),e.setVideoFrameRate([t[1],t[1]]),e.setVideoBitRate([t[2],t[2]]),n()},e.setVideoProfileCustomPlus=function(n){var r=p.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution([n.width,n.height]),t.attributes.resolution="".concat(n.width,"x").concat(n.height),e.setVideoFrameRate([n.framerate,n.framerate]),e.setVideoBitRate([n.bitrate,n.bitrate]),r()},e.setVideoProfile=function(n){var r=p.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),s=I(n);if(!s){var a="Invalid Profile ".concat(n);throw new Error(a)}if(e.profile=n,s&&s.video){e.profile=s.profileName,e.videoConstraint=i()(e.videoConstraint,s.video),e.connectionSpec&&s.attributes.maxVideoBW&&(e.connectionSpec.minVideoBW=s.attributes.minVideoBW,e.connectionSpec.maxVideoBW=s.attributes.maxVideoBW),Object(o.isEdge)()&&(e.videoConstraint.frameRate.max=60),Object(o.isFireFox)()&&(e.videoConstraint.frameRate=30),t.attributes=i()(t.attributes,s.attributes),e.pc&&e.pc.renegotiate&&e.pc.renegotiate();var l=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return l&&l.applyConstraints?(c.default.debug("setVideoProfile applyConstraints",e.videoConstraint),b.a.disableVideoEffect(e).then((function(){return l.applyConstraints(e.videoConstraint)})).then((function(){return b.a.restoreVideoEffect(e)})).then((function(t){return new Promise((function(n,i){r(t),setTimeout((function(){Object(g.vsResHack)(e.stream,(function(t,r){e.videoWidth=t,e.videoHeight=r,n()}),(function(t){c.default.warning("[".concat(e.streamId,"] vsResHack failed: "),t),i()}))}),2500)}))})).catch(r)):r(),!0}return r("INVALID_VIDEO_PROFILE_".concat(n)),!1},e.setAudioProfile=function(t){var n=p.report.reportApiInvoke(e.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});Object(E.checkValidEnum)(t,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),e.audioProfile=t;var r=function(e){var t=d.AUDIO_PROFILE_SETTINGS[e]||d.AUDIO_PROFILE_SETTINGS.default;return{highQuality:t[0],stereo:t[1],speech:t[2],lowQuality:t[3]}}(t);return e.highQuality=r.highQuality,e.stereo=r.stereo,e.speech=r.speech,e.lowQuality=r.lowQuality,e.stereo&&Object(o.isChrome)()&&(e.audioConstraint.googAutoGainControl=!1,e.audioConstraint.googAutoGainControl2=!1,e.audioConstraint.echoCancellation=!1,e.audioConstraint.googNoiseSuppression=!1),n(),!0},e.setVideoEncoderConfiguration=function(t){Object(E.checkValidObject)(t,"config");var n=p.report.reportApiInvoke(e.sid,{name:"Stream.setVideoEncoderConfiguration",options:t,tag:"tracer"});t.resolution&&(Object(E.checkValidNumber)(t.resolution.width,"config.resolution.width"),Object(E.checkValidNumber)(t.resolution.height,"config.resolution.height"),e.setVideoResolution([t.resolution.width,t.resolution.height])),t.frameRate&&(Object(E.checkValidNumber)(t.frameRate.min,"config.frameRate.min"),Object(E.checkValidNumber)(t.frameRate.max,"config.frameRate.max"),e.setVideoFrameRate([t.frameRate.min,t.frameRate.max])),t.bitrate&&(Object(E.checkValidNumber)(t.bitrate.min,"config.bitrate.min",1,1e7),Object(E.checkValidNumber)(t.bitrate.max,"config.bitrate.max",1,1e7),e.setVideoBitRate([t.bitrate.min,t.bitrate.max])),n()},e.getSupportedProfile=function(t){var n=p.report.reportApiInvoke(e.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:t});if(!e.local){var r="ONLY_LOCAL_STREAM_SUPPORTED";return c.default.error(r),n(r)}if(!e.stream)return r="STREAM_NOT_INIT",c.default.error(r),n(r);if(!e.stream.getVideoTracks)return r="TRACK_NOT_SUPPORT",c.default.error(r),n(r);var i=e.stream.getVideoTracks()[0];if(!i)return r="NO_VIDEO_TRACK_FOUND",c.default.error(r),n(r);if(!i.getCapabilities)return r="GETCAPABILITY_NOT_SUPPORT",c.default.error(r),n(r);var o=function(e){return Object.keys(d.SUPPORT_RESOLUTION_LIST).filter((function(t){var n=d.SUPPORT_RESOLUTION_LIST[t],r=["width","height","frameRate"];for(var i in r){var o=r[i];if(e[o]&&n[i]){if("number"==typeof e[o].max&&e[o].max<n[i])return!1;if("number"==typeof e[o].min&&e[o].min>n[i])return!1}}return!0})).reverse()}(i.getCapabilities());return n(null,o)}}(t,e),t.getId=function(){return t.streamId},t.getUserId=function(){return t.userId},t.checkDualStreamEnabled=function(){return!(!Object(d.getParameter)("DUALSTREAM_OPERATION_CHECK")||!t.isDualStream)&&(c.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED")},t.setUserId=function(e){var n=p.report.reportApiInvoke(t.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});t.userId&&c.default.warning("[".concat(t.streamId,"] Stream.userId ").concat(t.userId," => ").concat(e)),t.userId=e,n()},t.getAttributes=function(){return e.screen?t.screenAttributes:e.attributes},t.hasAudio=function(){return!!t.audio},t.hasVideo=function(){return!!t.video},t.hasScreen=function(){return!!t.screen},t.hasScreenAudio=function(){return!!t.screenAudio},t.isVideoOn=function(){return(t.hasVideo()||t.hasScreen())&&!t.userMuteVideo},t.isAudioOn=function(){return t.hasAudio()&&!t.userMuteAudio},t.init=function(r,i){var o=p.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Stream.init",options:arguments,tag:"tracer"}),s=((new Date).getTime(),arguments[2]);if(void 0===s&&(s=2),!0===t.initialized)return o({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==t.local)return o({type:"warning",msg:"STREAM_NOT_LOCAL"});var a=Math.random().toString().slice(3);t._streamInitID=a,t.videoSource?t.videoName="videoSource":t.video&&(t.videoName=y.a.searchDeviceNameById(e.cameraId)||"default"),t.audioSource?t.audioName="audioSource":t.audio&&(t.audioName=y.a.searchDeviceNameById(e.microphoneId)||"default"),t.screen&&(t.screenName=e.extensionId||"default");try{if(e.audio||e.video||e.screen||e.screenAudio||e.videoSource||e.audioSource){c.default.debug("[".concat(t.streamId,"] Requested access to local media"));var l={streamId:t.streamId};e.videoSource?l.videoSource=e.videoSource:e.screen?l.screen=t.screenConstraint:e.video&&(l.video=t.videoConstraint),e.audioSource?l.audioSource=e.audioSource:e.screenAudio?l.screenAudio=e.screenAudio:e.audio&&(l.audio=t.audioConstraint),Object(m.b)(l,(function(r){if(l.screenAudio&&!r.getAudioTracks()[0]&&c.default.warning("[".concat(t.streamId,"] Audio sharing is not selected")),l.screen&&c.default.debug("[".concat(t.streamId,"] User has granted access to screen sharing")),(l.video||l.audio)&&c.default.debug("[".concat(t.streamId,"] User has granted access to local media")),null===t._streamInitID){r.getTracks().forEach((function(e){e.stop()}));var i={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return c.default.error(t.streamId,i.info),void o(i)}if(t._streamInitID!==a)return r.getTracks().forEach((function(e){e.stop()})),i={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"},c.default.error(t.streamId,i.info),void o(i);t.dispatchEvent({type:"accessAllowed"}),t.stream=r,t.initialized=!0,t.reloadDeviceName(),t.hasVideo()&&Object(g.vsResHack)(r,(function(e,n){t.videoWidth=e,t.videoHeight=n}),(function(e){c.default.warning("[".concat(t.streamId,"] vsResHack failed: "),e)})),e.screen&&t.stream&&t.stream.getVideoTracks()[0]&&(t.stream.getVideoTracks()[0].onended=function(){t.dispatchEvent({type:"stopScreenSharing"})}),t.stream&&t.stream.getTracks&&t.stream.getTracks().forEach((function(r){r&&!r.onended&&(r.onended=n),"video"===r.kind&&e.optimizationMode&&(r.contentHint=e.optimizationMode,r.contentHint===e.optimizationMode&&c.default.debug("[".concat(t.streamId,"] set content hint to"),e.optimizationMode))})),o()}),(function(e){var n={type:"error",info:null};switch(e&&(n.msg=e.name||e.code||e,e.message&&(n.info=e.message),e.code&&(n.info?n.info+=". "+e.code:n.info=" "+e.code),e.constraint&&(n.info?n.info+=". Constraint: "+e.constraint:n.info="constraint: "+e.constraint)),n.msg){case"Starting video failed":case"TrackStartError":if(t.videoConstraint&&(delete t.videoConstraint.width,delete t.videoConstraint.height),s>0)return void setTimeout((function(){t.init((function(e){return o(e)}),o,s-1)}),1);n.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":n.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":n.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":n.msg="PERMISSION_DENIED",t.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":t.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":n.msg="CONSTRAINT_NOT_SATISFIED";break;default:n.msg||(n.msg="UNDEFINED")}var r="Media access ".concat(n.msg).concat(n.info?": "+n.info:"");c.default.error("[".concat(t.streamId,"] "),r),o(n)}))}else o({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(e){c.default.error("[".concat(t.streamId,"] Stream init: "),e),o({type:"error",msg:e.message||e})}},t.reloadDeviceName=function(){if(t.stream){if(t.stream.getVideoTracks){var e=t.stream.getVideoTracks()[0];e&&e.label&&(t.videoName=e.label)}if(t.stream.getAudioTracks){var n=t.stream.getAudioTracks()[0];n&&n.label&&(t.audioName=n.label)}}},t.close=function(){var e=p.report.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(c.default.debug("[".concat(t.streamId,"] Close stream with id"),t.streamId),t._originStream)try{t._originStream.getTracks().map((function(e){return e.stop()}))}catch(e){}if(void 0!==t.stream){var n=t.stream.getTracks();for(var r in n)n.hasOwnProperty(r)&&(n[r].stop(),n[r].onended=null);!t.isLowStream&&t.local?b.a.disableVideoEffect(t).then((function(){t.stream=void 0})):(t.stream&&t.stream.clean&&t.stream.clean(),t.stream=void 0)}if(t._originStream){for(var r in n=t._originStream.getTracks())n.hasOwnProperty(r)&&(n[r].stop(),n[r].onended=null);!t.isLowStream&&t.local?b.a.disableVideoEffect(t).then((function(){t._originStream=void 0})):(t._originStream&&t._originStream.clean&&t._originStream.clean(),t._originStream=void 0)}Object(o.isSafari)()&&t.pc&&t.pc.peerConnection&&t.pc.peerConnection.removeTrack&&t.pc.peerConnection.getSenders&&t.pc.peerConnection.getSenders().forEach((function(e){e&&(c.default.debug("[".concat(t.streamId,"] Remove Track"),e),t.pc.peerConnection.removeTrack(e))})),t.local&&(t.initialized=!1),t._streamInitID=null,t._onAudioMute=void 0,t._onAudioUnmute=void 0,t._onVideoMute=void 0,t._onVideoUnmute=void 0,t.lowStream&&t.lowStream.close(),t.player&&t.player.video&&t.player.video.srcObject&&(t.player.video.srcObject=null),t.player&&t.player.audio&&t.player.audio.srcObject&&(t.player.audio.srcObject=null),e()},t.enableAudio=function(){var e,n=p.report.reportApiInvoke(t.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return c.default.deprecate("[".concat(t.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),t.userMuteAudio||c.default.warning("[".concat(t.streamId,"] User already enableAudio")),t.userMuteAudio=!1,n(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.disableAudio=function(){var e=p.report.reportApiInvoke(t.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});c.default.deprecate("[".concat(t.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),t.userMuteAudio&&c.default.warning("[".concat(t.streamId,"] User already disableAudio")),t.userMuteAudio=!0;var n=t._muteAudio();return e(null,n),n},t.enableVideo=function(){var e,n=p.report.reportApiInvoke(t.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return c.default.deprecate("[".concat(t.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),t.userMuteVideo||c.default.warning("[".concat(t.streamId,"] User already enableVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),n(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.disableVideo=function(){var e=p.report.reportApiInvoke(t.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});c.default.deprecate("[".concat(t.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),t.userMuteVideo&&c.default.warning("[".concat(t.streamId,"] User already disableVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var n=t._muteVideo();return e(null,n),n},t.unmuteAudio=function(){var e,n=p.report.reportApiInvoke(t.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return t.userMuteAudio||c.default.warning("[".concat(t.streamId,"] User already unmuteAudio")),t.userMuteAudio=!1,n(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.muteAudio=function(){var e=p.report.reportApiInvoke(t.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});t.userMuteAudio&&c.default.warning("[".concat(t.streamId,"] User already muteAudio")),t.userMuteAudio=!0;var n=t._muteAudio();return e(null,n),n},t.unmuteVideo=function(){var e,n=p.report.reportApiInvoke(t.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return t.userMuteVideo||c.default.warning("[".concat(t.streamId,"] User already unmuteVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),n(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.muteVideo=function(){var e=p.report.reportApiInvoke(t.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});t.userMuteVideo&&c.default.warning("[".concat(t.streamId,"] User already muteVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var n=t._muteVideo();return e(null,n),n},t._unmuteAudio=function(){return c.default.debug("[".concat(t.streamId,"] Unmuted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!1),!(!t.hasAudio()||!t.initialized||void 0===t.stream||!0===t.stream.getAudioTracks()[0].enabled)&&(t._onAudioUnmute&&t._onAudioUnmute(),t.pc&&(t.pc.isAudioMute=!1),t.stream.getAudioTracks()[0].enabled=!0,!0)},t._isAudioMuted=function(){if(t.stream&&t.hasAudio()){var e=t.stream.getAudioTracks();return e.length>0&&!e[0].enabled}return!1},t._isVideoMuted=function(){if(t.stream&&t.hasVideo()){var e=t.stream.getVideoTracks();return e.length>0&&!e[0].enabled}return!1},t._muteAudio=function(){return c.default.debug("[".concat(t.streamId,"] Muted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!0),!!(t.hasAudio()&&t.initialized&&void 0!==t.stream&&t.stream.getAudioTracks()[0].enabled)&&(t._onAudioMute&&t._onAudioMute(),t.pc&&(t.pc.isAudioMute=!0),t.stream.getAudioTracks()[0].enabled=!1,t.sid&&p.report.audioSendingStopped(t.sid,{succ:!0,reason:"muteAudio"}),!0)},t._unmuteVideo=function(){return c.default.debug("[".concat(t.streamId,"] Unmuted video stream with id"),t.streamId),!(!t.initialized||void 0===t.stream||!t.stream.getVideoTracks().length||!0===t.stream.getVideoTracks()[0].enabled)&&(t._onVideoUnmute&&t._onVideoUnmute(),t.pc&&(t.pc.isVideoMute=!1),t.stream.getVideoTracks()[0].enabled=!0,t.lowStream&&t.lowStream._unmuteVideo(),!0)},t._muteVideo=function(){return c.default.debug("[".concat(t.streamId,"] Muted video stream with id"),t.streamId),!!(t.initialized&&void 0!==t.stream&&t.stream.getVideoTracks().length&&t.stream.getVideoTracks()[0].enabled)&&(t._onVideoMute&&t._onVideoMute(),t.pc&&(t.pc.isVideoMute=!0),t.stream.getVideoTracks()[0].enabled=!1,t.lowStream&&t.lowStream._muteVideo(),t.sid&&p.report.videoSendingStopped(t.sid,{succ:!0,reason:"muteVideo"}),!0)},t.addTrack=function(r){if(t.audio&&"audio"===r.kind)c.default.warning("already added audio track");else if(t.video&&"video"===r.kind)c.default.warning("already added video track");else{var i=p.report.reportApiInvoke(t.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"});if(t.pc&&t.pc.addTrack(r,t.stream),"audio"==r.kind){t._cleanupAudioMixing();var o=new MediaStream;t.userMuteAudio&&(r.enabled=!1),o.addTrack(r);var s=t.stream.getVideoTracks()[0];s&&o.addTrack(s),t.audio=!0,e.audio=!0,t.stream=o,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream)}else t.userMuteVideo&&(r.enabled=!1),t.stream.addTrack(r),t.video=!0,e.video=!0;r.onended||(r.onended=n),i()}},t.removeTrack=function(n){if(n)if(t.audio||"audio"!==n.kind)if(t.video||"video"!==n.kind){var r=p.report.reportApiInvoke(t.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"});t.pc&&t.pc.removeTrack(n,t.stream),t.stream.removeTrack(n),t._cleanupAudioMixing(),"audio"===n.kind?(t.audio=!1,e.audio=!1):(t.video=!1,e.video=!1),t.audioLevelHelper=null,"live"==n.readyState&&(n.stop(),c.default.debug("[".concat(t.streamId,"] Track ").concat(n.kind," Stopped"))),r()}else c.default.warning("already removed video track");else c.default.warning("already removed audio track");else c.default.warning("track doesn't exist.")},t.setAudioOutput=function(e,n,r){var i=p.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return Object(E.isValidString)(e,1,255)?(t.audioOutput=e,t.player?void t.player.setAudioOutput(e,(function(){return i()}),i):i()):(c.default.error("[".concat(t.streamId,"] setAudioOutput Invalid Parameter"),e),i(u.default.INVALID_PARAMETER))},t.play=function(e,n,r){"function"==typeof n&&(r=n,n=null),c.default.debug("[".concat(t.streamId,"] play()."),e,n);var i=p.report.reportApiInvoke(t.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:r});if(Object(E.checkValidString)(e,"elementID"),Object(E.isEmpty)(n)||(Object(E.isEmpty)(n.fit)||Object(E.checkValidEnum)(n.fit,"fit",["cover","contain"]),Object(E.isEmpty)(n.muted)||Object(E.checkValidBoolean)(n.muted,"muted")),t.player)c.default.warning("[".concat(t.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),t.resume().then((function(){i(null)})).catch(i);else{t.elementID=e,t.playOptions=n,!t.local||t.video||t.screen?(t.player=new f({id:t.getId(),stream:t,elementID:e,options:n}),t.local&&b.a.applyEffectInPlayer(t)):t.hasAudio()&&(t.player=new f({id:t.getId(),stream:t,elementID:e,options:n}));var o={video:null,audio:null};t.on("player-status-change",(function e(n){if(o[n.mediaType]=n,o.video&&o.audio)if(t.removeEventListener("player-status-change",e),o.video.isErrorState||o.audio.isErrorState){var r=o.video.isErrorState?o.video:o.audio;i({isErrorState:!0,status:r.status,reason:r.reason,video:o.video,audio:o.audio})}else"aborted"===o.video.status&&"aborted"===o.audio.status?i({status:"aborted",reason:"stop",video:o.video,audio:o.audio}):i(null)})),t.audioOutput&&t.player.setAudioOutput(t.audioOutput),void 0!==t.audioLevel&&t.player.setAudioVolume(t.audioLevel),t._flushAudioMixingMuteStatus(!1)}},t.stop=function(){var e=p.report.reportApiInvoke(t.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});c.default.debug("[".concat(t.streamId,"] Stop stream player with id "),t.streamId),t.player?(b.a.removeEffectFromLocalPlayer(t),t.player.destroy(),delete t.player):c.default.error("[".concat(t.streamId,"] Stream.stop(): Stream is not playing")),t._flushAudioMixingMuteStatus(!0),e()},t.isPlaying=function(){return!!t.player},t.isPaused=function(){return!!t.player&&(!!(t.player.video&&t.player.video.paused&&t.player.mediaElemExists(t.player.video))||!!(t.player.audio&&t.player.audio.paused&&t.player.mediaElemExists(t.player.audio)))},t.resume=function(){var e,n;return t.player?(t.player.video&&t.player.video.play&&(e=t.player.video.play()),e=e||Promise.resolve(),t.player.audio&&t.player.audio.play&&(n=t.player.audio.play()),n=n||Promise.resolve(),Promise.all([e,n])):Promise.reject("NO_PLAYER_FOUND")},t.getVideoTrack=function(){var e=p.report.reportApiInvoke(t.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getVideoTracks){var n=t.stream.getVideoTracks()[0];if(n)return c.default.info("[".concat(t.streamId,"] getVideoTrack"),n),e(),n}c.default.info("[".concat(t.streamId,"] getVideoTrack None")),e(null,"getVideoTrack None")},t.getAudioTrack=function(){var e=p.report.reportApiInvoke(t.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getAudioTracks){var n=t.stream.getAudioTracks()[0];if(n)return c.default.info("[".concat(t.streamId,"] getAudioTracks"),n),e(),n}c.default.info("[".concat(t.streamId,"] getAudioTracks None")),e(null,"getAudioTracks None")},t._hasVideoTracks=function(){return!!(t.stream&&t.stream.getVideoTracks&&t.stream.getVideoTracks()[0])},t._hasAudioTracks=function(){return!!(t.stream&&t.stream.getAudioTracks&&t.stream.getAudioTracks()[0])},t._replaceMediaStreamTrack=function(e,n,r){if(t.stream){if("video"==e.kind){if(o=t.stream.getVideoTracks()[0])return t.userMuteVideo&&(e.enabled=!1),t.stream.removeTrack(o),t.stream.addTrack(e),c.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(e.kind," SUCCESS")),"live"==o.readyState&&(o.stop(),c.default.debug("[".concat(t.streamId,"] Track ").concat(o.kind," Stopped"))),n&&n();var i="MEDIASTREAM_TRACK_NOT_FOUND";return c.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),r(i)}if("audio"==e.kind){var o;if(o=t.stream.getAudioTracks()[0]){t.userMuteAudio&&(e.enabled=!1);var s=new MediaStream;s.addTrack(e);var a=t.stream&&t.stream.getVideoTracks()[0];return a&&s.addTrack(a),t.stream=s,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream),c.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==o.readyState&&(o.stop(),c.default.debug("[".concat(t.streamId,"] Track ").concat(o.kind," Stopped"))),n&&n()}return i="MEDIASTREAM_TRACK_NOT_FOUND",c.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),r(i)}return i="INVALID_TRACK_TYPE",c.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(i," ").concat(e.kind)),r&&r(i)}return i="NO_STREAM_FOUND",c.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(i)),r&&r(i)},t.replaceTrack=function(e,r,i){var o=p.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});return e&&e.kind?(t._cleanupAudioMixing(),e.onended||(e.onended=n),t.pc&&t.pc.hasSender&&t.pc.hasSender(e.kind)?void t.pc.replaceTrack(e,(function(){return c.default.debug("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," SUCCESS")),t._replaceMediaStreamTrack(e,(function(e){return o(null,e)}),o)}),(function(n){return c.default.error("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," Failed ").concat(n)),o(n)})):t._replaceMediaStreamTrack(e,(function(e){return o(null,e)}),o)):o("INVALID_TRACK")},t.setAudioVolume=function(e){var n=p.report.reportApiInvoke(t.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});Object(E.checkValidNumber)(e,"level",0,100),t.audioLevel=e,t.player&&t.player.setAudioVolume(e),n()},t.getStats=function(e,n,r){var s=[];s.push(t._getPCStats(r)),s.push(new Promise((function(e){var n={};t.pc&&t.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(Object(v.b)(n,"videoReceiveResolutionHeight",t.videoHeight),Object(v.b)(n,"videoReceiveResolutionWidth",t.videoWidth)):t.pc&&!t.pc.isSubscriber&&((Object(o.isSafari)()||Object(o.isFireFox)())&&(Object(v.b)(n,"videoSendResolutionHeight",t.videoHeight),Object(v.b)(n,"videoSendResolutionWidth",t.videoWidth)),(Object(o.isSafari)()||Object(o.isFireFox)())&&t.uplinkStats&&Object(v.b)(n,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),e(n)}))),s.push(new Promise((function(e){var n={};return t.traffic_stats&&t.pc&&t.pc.isSubscriber?(Object(v.b)(n,"accessDelay",t.traffic_stats.access_delay),Object(v.b)(n,"endToEndDelay",t.traffic_stats.e2e_delay),Object(v.b)(n,"videoReceiveDelay",t.traffic_stats.video_delay),Object(v.b)(n,"audioReceiveDelay",t.traffic_stats.audio_delay)):t.traffic_stats&&t.pc&&!t.pc.isSubscriber&&Object(v.b)(n,"accessDelay",t.traffic_stats.access_delay),e(n)}))),Promise.all(s).then((function(n){for(var r={},o=n.length-1;o>=0;o--){var s=n[o];i()(r,s)}e&&setTimeout(e.bind(t,r),0)})).catch((function(e){n&&setTimeout(n.bind(t,e),0)}))},t._getPCStats=function(e){return new Promise((function(n,r){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return r("PEER_CONNECTION_NOT_ESTABLISHED");t.pc.getStats((function(e){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return r("PEER_CONNECTION_STATE_CHANGE");var i=t.pc.isSubscriber?Object(v.c)(e):Object(v.a)(e);return n(i)}),e)})).then((function(e){return t.pc.isSubscriber?(Object(o.isFireFox)()||Object(o.isSafari)())&&(e.videoReceiveResolutionHeight&&"0"!==e.videoReceiveResolutionHeight||e.videoReceiveResolutionWidth&&"0"!==e.videoReceiveResolutionWidth||(Object(v.b)(e,"videoReceiveResolutionHeight",t.videoHeight),Object(v.b)(e,"videoReceiveResolutionWidth",t.videoWidth))):((Object(o.isSafari)()||Object(o.isFireFox)())&&(e.videoSendResolutionHeight&&"0"!==e.videoSendResolutionHeight||e.videoSendResolutionWidth&&"0"!==e.videoSendResolutionWidth||(Object(v.b)(e,"videoSendResolutionHeight",t.videoHeight),Object(v.b)(e,"videoSendResolutionWidth",t.videoWidth))),(Object(o.isSafari)()||Object(o.isFireFox)())&&t.uplinkStats&&Object(v.b)(e,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),Promise.resolve(e)}))},t.getAudioLevel=function(){if(t.audioLevelHelper)return t.audioLevelHelper.getAudioLevel();if(t.stream){if(0!==t.stream.getAudioTracks().length)return t.audioLevelHelper=new g.audioLevelHelper(t.stream),t.audioLevelHelper.getAudioLevel();c.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else c.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no stream exist"))},t.setVideoProfile("480p_1"),t._switchVideoDevice=function(e,n,r){if(e===t.cameraId)return n&&n();var o={video:i()({},t.videoConstraint,{deviceId:{exact:e}}),audio:!1};c.default.debug("[".concat(t.streamId,"] ").concat(o)),Object(m.b)(o,(function(i){try{var o=function(){t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.cameraId=e,t.videoConstraint.deviceId={exact:e},t.userMuteVideo&&(t.stream.getVideoTracks()[0].enabled=!1),b.a.restoreVideoEffect(t).then((function(){n&&n()}))};b.a.disableVideoEffect(t).then((function(){var e=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(e=!0),e?t.replaceTrack(i.getVideoTracks()[0],o,r):(t.removeTrack(t.stream.getVideoTracks()[0]),t.addTrack(i.getVideoTracks()[0]),o())}))}catch(e){return r&&r(e)}}),(function(e){return r&&r(e)}))},t._switchAudioDevice=function(e,n,r){if(e===t.microphoneId)return n&&n();var o={video:!1,audio:i()({},t.audioConstraint,{deviceId:{exact:e}})};c.default.debug("[".concat(t.streamId,"] "),o);var s=t.stream.getAudioTracks()[0];s&&s.stop(),Object(m.b)(o,(function(i){var o=function(){t._cleanupAudioMixing(),t.userMuteAudio&&(t.stream.getAudioTracks()[0].enabled=!1),t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.microphoneId=e,t.audioConstraint.deviceId={exact:e},n&&n()};try{var s=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(s=!0),s?t.replaceTrack(i.getAudioTracks()[0],o,r):(t.removeTrack(t.stream.getAudioTracks()[0]),t.addTrack(i.getAudioTracks()[0]),o())}catch(e){return r&&r(e)}}),(function(e){return r&&r(e)}))},t.switchDevice=function(e,n,r,i){var o=p.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});Object(E.checkValidString)(n,"deviceId");var s=function(){return t.inSwitchDevice=!1,o()},a=function(e){t.inSwitchDevice=!1,c.default.error("[".concat(t.streamId,"] "),e),o(e)};if(t.inSwitchDevice)return o("Device switch is in process.");if(t.inSwitchDevice=!0,!t.local)return a("Only the local stream can switch the device.");if(t.screen&&"video"===e)return a("The device cannot be switched during screen-sharing.");if(!t.video&&"video"===e)return a("Video track not exist.");if(!t.audio&&"audio"===e)return a("Audio track not exist.");if(t.videoSource||t.audioSource)return a("The device cannot be switched when using videoSource or audioSource.");var l=!1;for(var u in t.audioMixing.sounds)if(t.audioMixing.sounds[u].state!==t.audioMixing.states.IDLE){l=!0;break}if(t.audioMixing.audioContextInited&&l)return a("The device cannot be switched when using audio Mixing.");y.a.getDeviceById(n,(function(){if("video"===e)t._switchVideoDevice(n,s,a);else{if("audio"!==e)return a("Invalid type.");t._switchAudioDevice(n,s,a)}}),(function(){return a("The device does not exist.")}))},t},w=function(e){var t=p.report.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer",getStates:function(){return{audioTrackEnable:e&&e.audioSource?e.audioSource.enabled:null,videoTrackEnable:e&&e.videoSource?e.videoSource.enabled:null}}});Object(E.checkValidObject)(e,"StreamSpec");var n=e.streamID,r=e.audio,i=e.video,o=e.screen,s=e.screenAudio,a=(e.audioSource,e.videoSource,e.cameraId),l=e.facingMode,u=e.microphoneId,d=e.mirror,h=e.extensionId,f=e.mediaSource,m=e.audioProcessing,v=e.optimizationMode;if(!Object(E.isEmpty)(n)&&!Object(g.is32Uint)(n)&&!Object(E.isValidString)(n,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(Object(E.checkValidBoolean)(r,"audio"),Object(E.checkValidBoolean)(i,"video"),Object(E.isEmpty)(o)||Object(E.checkValidBoolean)(o,"screen"),Object(E.isEmpty)(s)||Object(E.checkValidBoolean)(s,"screenAudio"),Object(E.isEmpty)(a)||Object(E.checkValidString)(a,"cameraId",0,255,!1),Object(E.isEmpty)(l)||Object(E.checkValidEnum)(l,"facingMode",["user","environment","left","right"]),Object(E.isEmpty)(u)||Object(E.checkValidString)(u,"microphoneId",0,255,!1),Object(E.isEmpty)(h)||Object(E.checkValidString)(h,"extensionId"),Object(E.isEmpty)(f)||Object(E.checkValidEnum)(f,"mediaSource",["screen","application","window"]),Object(E.isEmpty)(d)||Object(E.checkValidBoolean)(d,"mirror"),!Object(E.isEmpty)(m)){var y=m.AGC,_=m.AEC,b=m.ANS;Object(E.isEmpty)(y)||Object(E.checkValidBoolean)(y,"AGC"),Object(E.isEmpty)(_)||Object(E.checkValidBoolean)(_,"AEC"),Object(E.isEmpty)(b)||Object(E.checkValidBoolean)(b,"ANS")}Object(E.isEmpty)(v)||Object(E.checkValidEnum)(v,"optimizationMode",["detail","motion"]),c.default.debug("Create stream"),!0===s&&!0===r&&c.default.warning("Do not set both 'screenAudio' and 'audio' to true at the same time"),e.screen&&!v&&(e.optimizationMode="detail");var S=N(e);return t(),S}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return S}));var r=n(4),i=n(7),o=n.n(i),s=n(12),a=n.n(s),c=n(17),l=n.n(c),u=n(0),d=n(15),p=n(2);function h(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=n(50),y=n.n(v),E=n(26),_=(n(5),103),b=function(e){var t={};if(t.clientId=e.clientId,e.session_id=_+=1,"undefined"==typeof window||!window.navigator)throw u.default.error("["+t.streamId+"]["+t.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(t.browser="mozilla",t=function(e){var t={},n=(mozRTCPeerConnection,mozRTCSessionDescription),r=!1;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[]},e.iceServers instanceof Array?e.iceServers.map((function(e){0===e.url.indexOf("stun:")&&t.pc_config.iceServers.push({url:e.url})})):(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):u.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={offerToReceiveAudio:e.audio,offerToReceiveVideo:e.video,mozDontOfferDataChannel:!0},t.roapSessionId=103,t.peerConnection=new d.RTCPeerConnection(t.pc_config),t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,u.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(p.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,r,i,o;r=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),i=n.match(/a=candidate:.+typ\shost.+\r\n/),o=n.match(/a=candidate:.+typ\srelay.+\r\n/),null===r&&null===i&&null===o||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1},t.checkMLineReverseInSDP=function(e){return!(!~e.indexOf("m=audio")||!~e.indexOf("m=video"))&&e.indexOf("m=audio")>e.indexOf("m=video")},t.reverseMLineInSDP=function(e){var t=e.split("m=audio"),n=t[1].split("m=video"),r="m=video"+n[1],i="m=audio"+n[0];return t[0]+r+i},t.processSignalingMessage=function(r){var i,o=JSON.parse(r);t.incomingMessage=o,"new"===t.state?"OFFER"===o.messageType?(o.sdp=v(o.sdp),i={sdp:o.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new n(i),(function(){u.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){u.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===o.messageType?(o.sdp=v(o.sdp),o.sdp=o.sdp.replace(/ generation 0/g,""),o.sdp=o.sdp.replace(/ udp /g," UDP "),-1!==o.sdp.indexOf("a=group:BUNDLE")?(o.sdp=o.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),o.sdp=o.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),o.sdp=o.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(o.sdp=o.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),o.sdp=o.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),i={sdp:o.sdp,type:"answer"},e.screen&&"detail"===e.optimizationMode&&(u.default.debug("[".concat(t.client,"] remove screen share abs ext")),o.sdp=y(i.sdp)),t.peerConnection.setRemoteDescription(new n(i),(function(){u.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){u.default.info("["+t.clientId+"]setRemoteDescription failed: "+e)})),t.state="established"):"pr-answer"===o.messageType?(i={sdp:o.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new n(i),(function(){u.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){u.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)}))):"offer"===o.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===o.messageType?(i={sdp:o.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new n(i),(function(){u.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){u.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=l()(a.a.mark((function e(n){var r,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.peerConnection.getSenders(),i=r.find((function(e){return"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(o=i.getParameters()).degradationPreference=n,e.prev=6,u.default.debug("[".concat(t.clientId,"] setParameters"),o),e.next=10,i.setParameters(o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),u.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var i={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},o={id:"",type:"",mediaType:"",googCodecName:e.codec?e.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},s={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},c={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},h=0,f=0,g=0;t.getVideoRelatedStats=function(e){t.peerConnection.getStats().then((function(n){var r,i=m(n.values());try{for(i.s();!(r=i.n()).done;){var o=r.value;if(t.isSubscriber){if(("inbound-rtp"===o.type||"inboundrtp"===o.type)&&"video"===o.mediaType){if(!t.lastReport)return void(t.lastReport=o);e&&e({browser:"firefox",mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:Math.round(o.framerateMean)+"",frameRateDecoded:o.framesDecoded-t.lastReport.framesDecoded+"",bytesReceived:o.bytesReceived+"",packetsReceived:o.packetsReceived+"",packetsLost:o.packetsLost+""}),t.lastReport=o}}else if(("outbound-rtp"===o.type||"outboundrtp"===o.type)&&"video"===o.mediaType){if(!t.lastReport)return void(t.lastReport=o);e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:Math.round(o.framerateMean)+"",frameRateSent:o.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=o}}}catch(e){i.e(e)}finally{i.f()}}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then((function(n){var r,i=m(n.values());try{for(i.s();!(r=i.n()).done;){var o=r.value;t.isSubscriber&&("inbound-rtp"!==o.type&&"inboundrtp"!==o.type||"audio"!==o.mediaType||e&&e({browser:"firefox",mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:o.packetsLost+"",frameReceived:o.packetsReceived+"",googJitterReceived:o.jitter+"",bytesReceived:o.bytesReceived+"",packetsReceived:o.packetsReceived+"",packetsLost:o.packetsLost+""}))}}catch(e){i.e(e)}finally{i.f()}}))},t.getStatsRate=function(e){t.getStats((function(t){t.forEach((function(e){})),e(t)}))},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(n,r){t.filterStatsCache=n,t.originStatsCache=r,t.lastTimeGetStats=Date.now(),e&&e(n,r)}))},t._getStats=function(n){t.peerConnection.getStats().then((function(r){var a,l=[],u=m(r.values());try{for(u.s();!(a=u.n()).done;){var d=a.value;l.push(d),"outbound-rtp"!==d.type&&"outboundrtp"!==d.type||"video"!==d.mediaType||-1!==d.id.indexOf("rtcp")||(o.id=d.id,o.type=d.type,o.mediaType=d.mediaType,o.bytesSent=d.bytesSent?d.bytesSent+"":"0",o.packetsSent=d.packetsSent?d.packetsSent+"":"0",o.googPlisReceived=d.pliCount?d.pliCount+"":"0",o.googNacksReceived=d.nackCount?d.nackCount+"":"0",o.googFirsReceived=d.firCount?d.firCount+"":"0",o.googFrameRateSent=d.framerateMean?Math.round(d.framerateMean)+"":"0"),"outbound-rtp"!==d.type&&"outboundrtp"!==d.type||"audio"!==d.mediaType||-1!==d.id.indexOf("rtcp")||(i.id=d.id,i.type=d.type,i.mediaType=d.mediaType,i.bytesSent=d.bytesSent?d.bytesSent+"":"0",i.packetsSent=d.packetsSent?d.packetsSent+"":"0",e.agoraStream.local&&(i.audioInputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==d.type&&"inboundrtp"!==d.type||"audio"!==d.mediaType||d.isRemote||-1!==d.id.indexOf("rtcp")||(s.id=d.id,s.type=d.type,s.mediaType=d.mediaType,s.bytesReceived=d.bytesReceived?d.bytesReceived+"":"0",s.packetsLost=d.packetsLost?d.packetsLost+"":"0",s.packetsReceived=d.packetsReceived?d.packetsReceived+"":"0",s.googJitterReceived=d.jitter?d.jitter+"":"0",e.agoraStream.local||(s.audioOutputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==d.type&&"inboundrtp"!==d.type||"video"!==d.mediaType||d.isRemote||-1!==d.id.indexOf("rtcp")||(c.id=d.id,c.type=d.type,c.mediaType=d.mediaType,c.bytesReceived=d.bytesReceived?d.bytesReceived+"":"0",c.googFrameRateReceived=d.framerateMean?Math.round(d.framerateMean)+"":"0",c.googFramesDecoded=d.framesDecoded?d.framesDecoded+"":"0",Date.now()-g>=1e3?(c.googFrameRateDecoded=(d.framesDecoded-h)/((Date.now()-g)/1e3),c.googFrameRateDecoded=Math.round(Math.max(0,c.googFrameRateDecoded)),g=Date.now(),f=c.googFrameRateDecoded,h=d.framesDecoded,c.googFrameRateDecoded=c.googFrameRateDecoded.toString()):c.googFrameRateDecoded=f.toString(),c.packetsLost=d.packetsLost?d.packetsLost+"":"0",c.packetsReceived=d.packetsReceived?d.packetsReceived+"":"0",c.googJitterBufferMs=d.jitter?d.jitter+"":"0",c.googNacksSent=d.nackCount?d.nackCount+"":"0",c.googPlisSent=d.pliCount?d.pliCount+"":"0",c.googFirsSent=d.firCount?d.firCount+"":"0"),-1!==d.id.indexOf("outbound_rtcp_video")&&(o.packetsLost=d.packetsLost?d.packetsLost+"":"0")}}catch(e){u.e(e)}finally{u.f()}var p=[o,i,s,c];p.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),n(p,l)}),(function(e){u.default.error("["+t.clientId+"]"+e)}))},t.addStream=function(e){r=!0,t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){if(t.actionNeeded){if("new"===t.state||"established"===t.state)r&&(t.mediaConstraints=void 0),t.peerConnection.createOffer((function(e){if(e.sdp=v(e.sdp),e.sdp=e.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),e.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(e),t.state="preparing-offer",void t.markActionNeeded();u.default.debug("["+t.clientId+"]Not sending a new offer")}),(function(e){u.default.debug("["+t.clientId+"]Ups! create offer failed ",e)}),t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(e.isCloudProxy3&&e.onNoIceCandidate&&e.onNoIceCandidate(),u.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(p.getParameter)("SHIM_CANDIDATE")?(u.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):u.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;u.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(){u.default.debug("["+t.clientId+"]Ups! Something went wrong")}));else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;var n=t.peerConnection.localDescription.sdp;t.sendMessage("ANSWER",n),t.state="established"}else t.debug("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var r={};r.messageType=e,r.sdp=n,"OFFER"===e?(r.offererSessionId=t.sessionId,r.answererSessionId=t.otherSessionId,r.seq=t.sequenceNumber+=1,r.tiebreaker=Math.floor(429496723*Math.random()+1)):(r.offererSessionId=t.incomingMessage.offererSessionId,r.answererSessionId=t.sessionId,r.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(r))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,r){var i=t._getSender(e.kind);if(!i)return r("NO_SENDER_FOUND");try{i.replaceTrack(e)}catch(e){return r&&r(e)}setTimeout((function(){return n&&n()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)};var v=function(t){var n;if(e.video&&e.maxVideoBW&&(null==(n=t.match(/m=video.*\r\n/))&&(n=t.match(/m=video.*\n/)),n&&n.length>0)){var r=n[0]+"b=TIAS:"+1e3*e.maxVideoBW+"\r\n";t=t.replace(n[0],r)}return e.audio&&e.maxAudioBW&&(null==(n=t.match(/m=audio.*\r\n/))&&(n=t.match(/m=audio.*\n/)),n&&n.length>0)&&(r=n[0]+"b=TIAS:"+1e3*e.maxAudioBW+"\r\n",t=t.replace(n[0],r)),t},y=function(e){return(e=e.replace(/a=.*abs-send-time\r\n/g,"")).replace(/a=.*goog-remb\r\n/g,"")};return t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t}(e)):"iOS"===r.getBrowserOS()||r.isSafari()?(u.default.debug("["+t.streamId+"]["+t.clientId+"]Safari"),(t=function(e){var t={},n=d.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[],bundlePolicy:"max-bundle"},t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):u.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics=Object(p.getParameter)("PLAN"),t.peerConnection=new n(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new n(t.pc_config,t.con)}t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(p.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,r,i,o;r=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),i=n.match(/a=candidate:.+typ\shost.+\r\n/),o=n.match(/a=candidate:.+typ\srelay.+\r\n/),0===t.iceCandidateCount&&(t.timeout=setTimeout((function(){t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),1e3)),null===r&&null===i&&null===o||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var r=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},i=function(n){var r,i;return(r=n.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW&&(i=r[0]+"b=AS:"+e.maxVideoBW+"\r\n",n=n.replace(r[0],i),u.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)),(r=n.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(i=r[0]+"b=AS:"+e.maxAudioBW+"\r\n",n=n.replace(r[0],i)),n};t.processSignalingMessage=function(n){var o,s=JSON.parse(n);t.incomingMessage=s,"new"===t.state?"OFFER"===s.messageType?(o={sdp:s.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(o)),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+s.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===s.messageType?((o={sdp:s.sdp,type:"answer"}).sdp=r(o.sdp),o.sdp=i(o.sdp),o.sdp=o.sdp.replace(/a=x-google-flag:conference\r\n/g,""),e.screen&&"detail"===e.optimizationMode&&(u.default.debug("[".concat(t.client,"] remove screen share abs ext")),o.sdp=o.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),t.peerConnection.setRemoteDescription(new RTCSessionDescription(o)),t.state="established"):"pr-answer"===s.messageType?(o={sdp:s.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(o))):"offer"===s.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+s.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===s.messageType?(o={sdp:s.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(o)),t.state="offer-received",t.markActionNeeded()):"ANSWER"===s.messageType?((o={sdp:s.sdp,type:"answer"}).sdp=r(o.sdp),o.sdp=i(o.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(o))):t.error("Illegal message for this state: "+s.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=l()(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.degradation=n;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t._setRtpSenderParameters=function(){var e=l()(a.a.mark((function e(n){var r,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.peerConnection.getSenders(),i=r.find((function(e){return e&&e.track&&"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(o=i.getParameters()).degradationPreference=n,e.prev=6,u.default.debug("[".concat(t.clientId,"] setParameters"),o),e.next=10,i.setParameters(o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),u.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var o={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},s={id:"",type:"",mediaType:"",googCodecName:e.codec?e.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},c={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},h={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},f={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},m=0,g=0,v=0;return t.isRemoteVideoStats=function(e){return!!(e.frameHeight&&e.frameWidth&&e.remoteSource)},t.getVideoRelatedStats=function(n){t.peerConnection.getStats().then((function(r){r.forEach((function(r){if(t.isSubscriber){var i={peerId:t.uid,mediaType:"video",isVideoMute:t.isVideoMute};if("track"===r.type&&(~r.id.indexOf("video")||~r.trackIdentifier.indexOf("v")||t.isRemoteVideoStats(r))){if(!t.lastReport)return void(t.lastReport=r);i.frameRateReceived=r.framesReceived-t.lastReport.framesReceived+"",i.frameRateDecoded=r.framesDecoded-t.lastReport.framesDecoded+"",t.lastReport=r}"inbound-rtp"===r.type&&~r.id.indexOf("Video")&&(i.bytesReceived=r.bytesReceived+"",i.packetsReceived=r.packetsReceived+"",i.packetsLost=r.packetsLost+""),n&&n(i)}else if("outbound-rtp"===r.type&&~r.id.indexOf("Video")){if(!t.lastReport)return void(t.lastReport=r);n&&n({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:e.maxFrameRate+"",frameRateSent:r.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=r}}))}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then((function(n){n.forEach((function(n){t.isSubscriber&&"inbound-rtp"===n.type&&~n.id.indexOf("Audio")&&e&&e({peerId:t.uid,mediaType:"audio",isAudioMute:t.isAudioMute,frameDropped:n.packetsLost+"",frameReceived:n.packetsReceived+"",googJitterReceived:n.jitter+"",bytesReceived:n.bytesReceived+"",packetsReceived:n.packetsReceived+"",packetsLost:n.packetsLost+""})}))}))},t.getStatsRate=function(e){t.getStats((function(t){t.forEach((function(e){"outbound-rtp"===e.type&&"video"===e.mediaType&&e.googFramesEncoded&&(e.googFrameRateSent=Math.ceil((e.googFramesEncoded-m)/3).toString(),m=e.googFramesEncoded),"inbound-rtp"===e.type&&-1!=e.id.indexOf("55543")&&(e.googFrameRateReceived&&(e.googFrameRateReceived=Math.ceil((e.googFrameReceived-v)/3).toString(),v=e.googFrameReceived),e.googFrameRateDecoded&&(e.googFrameRateDecoded=Math.ceil((e.googFramesDecoded-g)/3).toString(),g=e.googFramesDecoded))})),e(t)}))},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(n,r){t.filterStatsCache=n,t.originStatsCache=r,t.lastTimeGetStats=Date.now(),e&&e(n,r)}))},t._getStats=function(n){var r=[];t.peerConnection.getStats().then((function(i){i.forEach((function(t){var n;r.push(t),"outbound-rtp"===t.type&&"audio"===t.mediaType&&(o.id=t.id,o.type=t.type,o.mediaType=t.mediaType,o.bytesSent=t.bytesSent?t.bytesSent+"":"0",o.packetsSent=t.packetsSent?t.packetsSent+"":"0",e.agoraStream.local&&(o.audioInputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"outbound-rtp"===t.type&&"video"===t.mediaType&&(s.id=t.id,s.type=t.type,s.mediaType=t.mediaType,s.bytesSent=t.bytesSent?t.bytesSent+"":"0",s.packetsSent=t.packetsSent?t.packetsSent+"":"0",s.googPlisReceived=t.pliCount?t.pliCount+"":"0",s.googNacksReceived=t.nackCount?t.nackCount+"":"0",s.googFirsReceived=t.firCount?t.firCount+"":"0",s.googFramesEncoded=t.framesEncoded?t.framesEncoded+"":"0",(n=i.get(t.trackId))&&(s.googFrameHeightSent=n.frameHeight&&n.frameHeight.toString(),s.googFrameWidthSent=n.frameWidth&&n.frameWidth.toString())),"inbound-rtp"!==t.type||-1==t.id.indexOf("44444")&&"audio"!==t.mediaType||(c.id=t.id,c.type=t.type,c.mediaType="audio",c.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",c.bytesReceived=t.bytesReceived?t.bytesReceived+"":"0",c.packetsLost=t.packetsLost?t.packetsLost+"":"0",c.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",c.googJitterReceived=t.jitter?t.jitter+"":"0",(n=i.get(t.trackId))&&(c.audioOutputLevel=n.audioLevel&&Math.round(32767*n.audioLevel).toString()),e.agoraStream.local||c.audioOutputLevel||(c.audioOutputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==t.type||-1==t.id.indexOf("55543")&&"video"!==t.mediaType||(h.id=t.id,h.type=t.type,h.mediaType="video",h.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",h.bytesReceived=t.bytesReceived?t.bytesReceived+"":"0",h.packetsLost=t.packetsLost?t.packetsLost+"":"0",h.googJitterBufferMs=t.jitter?t.jitter+"":"0",h.googNacksSent=t.nackCount?t.nackCount+"":"0",h.googPlisSent=t.pliCount?t.pliCount+"":"0",h.googFirsSent=t.firCount?t.firCount+"":"0",(n=i.get(t.trackId))&&(h.googFrameHeightReceived=n.frameHeight&&n.frameHeight.toString(),h.googFrameWidthReceived=n.frameWidth&&n.frameWidth.toString(),h.googFrameReceived=n.framesReceived&&n.framesReceived.toString(),h.googFramesDecoded=n.framesDecoded&&n.framesDecoded.toString())),"candidate-pair"===t.type&&(0==t.availableIncomingBitrate?f.googAvailableSendBandwidth=t.availableOutgoingBitrate+"":f.googAvailableReceiveBandwidth=t.availableIncomingBitrate+"")}));var a=[f,o,s,c,h];a.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),n(a,r)})).catch((function(e){u.default.error("["+t.clientId+"] ",e)}))},t.addTrack=function(e,n){t.peerConnection.addTrack(e,n)},t.removeTrack=function(e,n){var r=t.peerConnection.getSenders().find((function(t){return t.track==e}));r.replaceTrack(null),t.peerConnection.removeTrack(r)},t.addStream=function(e){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?e.getTracks().forEach((function(n){return t.peerConnection.addTrack(n,e)})):t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){var n;if(t.actionNeeded){if("new"===t.state||"established"===t.state)e.isSubscriber&&(t.peerConnection.addTransceiver("audio",{direction:"recvonly"}),t.peerConnection.addTransceiver("video",{direction:"recvonly"})),t.peerConnection.createOffer(t.mediaConstraints).then((function(n){if(n.sdp=i(n.sdp),e.isSubscriber||(n.sdp=n.sdp.replace(/a=.*video-orientation\r\n/g,"")),n.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(n),t.state="preparing-offer",void t.markActionNeeded();u.default.debug("["+t.clientId+"]Not sending a new offer")})).catch((function(e){u.default.debug("["+t.clientId+"]peer connection create offer failed ",e)}));else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(u.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),e.isCloudProxy3&&e.onNoIceCandidate&&e.onNoIceCandidate(),Object(p.getParameter)("SHIM_CANDIDATE")?(u.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):u.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;u.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(e){u.default.debug("["+t.clientId+"]peer connection create answer failed ",e)}),t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;n=t.peerConnection.localDescription.sdp,t.sendMessage("ANSWER",n),t.state="established"}else t.debug("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var r={};r.messageType=e,r.sdp=n,"OFFER"===e?(r.offererSessionId=t.sessionId,r.answererSessionId=t.otherSessionId,r.seq=t.sequenceNumber+=1,r.tiebreaker=Math.floor(429496723*Math.random()+1)):(r.offererSessionId=t.incomingMessage.offererSessionId,r.answererSessionId=t.sessionId,r.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(r))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,r){var i=t._getSender(e.kind);if(!i)return r("NO_SENDER_FOUND");try{i.replaceTrack(e)}catch(e){return r&&r(e)}setTimeout((function(){return n&&n()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date,t._setRtpSenderParameters(t.degradation)),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){t.isSubscriber||(u.default.debug("[".concat(t.uid,"]"),"renegotiating"),void 0!==t.prevOffer&&t.peerConnection.createOffer().then((function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=r(e.sdp),e.sdp=i(e.sdp),t.peerConnection.setLocalDescription(e)})).then((function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)})).catch((function(e){u.default.error("createOffer error: ",e)})))},t.isSubscriber||(t.peerConnection.onnegotiationneeded=t.renegotiate),t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t}(e)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?t=new y.a(e):(t=function(e){var t={},n=d.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[]};var i={id:"outbound_audio_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},s={id:"outbound_video_ssrc_send",type:"ssrc",mediaType:"",googCodecName:e.codec?e.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},c={id:"inbound_audio_ssrc_recv",type:"ssrc",mediaType:"",googCodecName:"opus",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},f={id:"inbound_video_ssrc_recv",type:"ssrc",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesReceived:"0",googFramesDecoded:"0"},m={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"};t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):u.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints=r.isChromeKernel()&&r.getChromeKernelVersion()<103?{mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}}:{offerToReceiveVideo:e.video,offerToReceiveAudio:e.audio},t.roapSessionId=103;try{t.pc_config.sdpSemantics=Object(p.getParameter)("PLAN"),t.peerConnection=new n(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new n(t.pc_config,t.con);var g=t.peerConnection.getConfiguration();g.sdpSemantics&&Object(p.setParameter)("PLAN",g.sdpSemantics)}t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,u.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(p.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,r,i,o;r=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),i=n.match(/a=candidate:.+typ\shost.+\r\n/),o=n.match(/a=candidate:.+typ\srelay.+\r\n/),null===r&&null===i&&null===o||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var v=function(e){return e.replace("a=x-google-flag:conference\r\n","")},y=function(n){var r,i;if((r=n.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW){i=r[0]+"b=AS:"+e.maxVideoBW+"\r\n";var o=0,s=0;"h264"===e.codec?(o=n.search(/a=rtpmap:(\d+) H264\/90000\r\n/),s=n.search(/H264\/90000\r\n/)):"vp8"===e.codec?(o=n.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),s=n.search(/VP8\/90000\r\n/)):"vp9"===e.codec&&(o=n.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),s=n.search(/VP9\/90000\r\n/)),-1!==o&&-1!==s&&s-o>10&&(i=i+"a=fmtp:"+n.slice(o+9,s-1)+" x-google-min-bitrate="+e.minVideoBW+"\r\n"),n=(n=(n=n.replace(r[0],i)).replace("a=fmtp:102 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f","a=fmtp:102 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f")).replace("a=fmtp:125 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f","a=fmtp:125 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"),u.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)}return(r=n.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(i=r[0]+"b=AS:"+e.maxAudioBW+"\r\n",n=n.replace(r[0],i)),n};t.processSignalingMessage=function(n){var r,i=JSON.parse(n);t.incomingMessage=i,"new"===t.state?"OFFER"===i.messageType?(r={sdp:i.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===i.messageType?((r={sdp:i.sdp,type:"answer"}).sdp=v(r.sdp),r.sdp=y(r.sdp),e.screen&&"detail"===e.optimizationMode&&(u.default.debug("[".concat(t.client,"] remove screen share abs ext")),r.sdp=r.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),e.isSubscriber&&(r.sdp=r.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){})),t.state="established"):"pr-answer"===i.messageType?(r={sdp:i.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){}))):"offer"===i.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===i.messageType?(r={sdp:i.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){})),t.state="offer-received",t.markActionNeeded()):"ANSWER"===i.messageType?((r={sdp:i.sdp,type:"answer"}).sdp=v(r.sdp),r.sdp=y(r.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){}))):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=l()(a.a.mark((function e(n){var r,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.peerConnection.getSenders(),i=r.find((function(e){return"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(o=i.getParameters()).degradationPreference=n,e.prev=6,u.default.debug("[".concat(t.clientId,"] setParameters"),o),e.next=10,i.setParameters(o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),u.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var E=0,_=0;return t.getVideoRelatedStats=function(e){t.getStats((function(n){n.forEach((function(n){if(t.isSubscriber){if("video"===n.mediaType&&n.id&&~n.id.indexOf("recv")){if(r.isChromeKernel()&&+r.getBrowserVersion()>=76){var i=+n.googFramesReceived-E,o=+n.googFramesDecoded-_;t._setStat(f,"googFrameRateReceived",i),t._setStat(f,"googFrameRateDecoded",o),t._setStat(f,"googFrameRateOutput",o),E=+n.googFramesReceived,_=+n.googFramesDecoded}e&&e({mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:n.googFrameRateReceived,frameRateDecoded:n.googFrameRateDecoded,bytesReceived:n.bytesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost})}}else"video"===n.mediaType&&n.id&&~n.id.indexOf("send")&&e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:n.googFrameRateInput,frameRateSent:n.googFrameRateSent,googRtt:n.googRtt})}))}))},t.getAudioRelatedStats=function(e){t.getStats((function(n){n.forEach((function(n){t.isSubscriber&&"audio"===n.mediaType&&n.id&&~n.id.indexOf("recv")&&e&&e({mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:parseInt(n.googDecodingPLC)+parseInt(n.googDecodingPLCCNG)+"",frameReceived:n.googDecodingCTN,googJitterReceived:n.googJitterReceived,bytesReceived:n.bytesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost})}))}))},t.getStatsRate=function(e){t.getStats((function(t){e(t)}))},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):(t.lastTimeGetStats=Date.now(),this._getStats((function(n,r){t.filterStatsCache=n,t.originStatsCache=r,e&&e(n,r)})))},t._setStat=function(e,t,n){e.hasOwnProperty(t)&&(null!=n&&n!==1/0&&n==n||(n=0),e[t]=n+"")},t._processGetStatsAfterChrome76=function(e){var n=this;t.lastStats||(t.lastStats=new Map),t.peerConnection.getStats().then((function(r){var a,l=[],u=[],d=new Map,p=new Date,g=h(r.values());try{for(g.s();!(a=g.n()).done;){var v=a.value;"codec"!=v.type?"candidate-pair"!=v.type?("inbound-rtp"===v.type&&"video"===v.mediaType&&d.set("inbound-video",v),"inbound-rtp"===v.type&&"audio"===v.mediaType&&d.set("inbound-audio",v),"outbound-rtp"===v.type&&"audio"===v.mediaType&&d.set("outbound-audio",v),"outbound-rtp"===v.type&&"video"===v.mediaType&&d.set("outbound-video",v),"track"===v.type&&"video"===v.kind&&v.remoteSource&&d.set("remote-video-track",v),"track"===v.type&&"audio"===v.kind&&v.remoteSource&&d.set("remote-audio-track",v),"remote-inbound-rtp"===v.type&&"video"===v.mediaType&&d.set("remote-inbound-video",v),"remote-inbound-rtp"===v.type&&"audio"===v.mediaType&&d.set("remote-inbound-audio",v),"track"!==v.type||"video"!==v.kind||v.remoteSource||d.set("local-video-track",v),"track"!==v.type||"audio"!==v.kind||v.remoteSource||d.set("local-audio-track",v),"media-source"===v.type&&"video"===v.kind&&d.set("media-source-video",v),"media-source"===v.type&&"audio"===v.kind&&d.set("media-source-audio",v)):u.push(v):l.push(v)}}catch(e){g.e(e)}finally{g.f()}d.set("codec",l),d.set("candidatePairs",u),d.set("timestamp",+p);var y=null,E=null;if(f.timestamp=p,c.timestamp=p,i.timestamp=p,i.timestamp=p,m.timestamp=p,n.isSubscriber)(y=d.get("inbound-video"))&&(t._setStat(f,"id","inbound_video_ssrc_recv"),t._setStat(f,"mediaType",y.mediaType),t._setStat(f,"packetsLost",y.packetsLost),t._setStat(f,"googDecodeMs",null),t._setStat(f,"googMaxDecodeMs",null),t._setStat(f,"googRenderDelayMs",null),t._setStat(f,"googMinPlayoutDelayMs",null),t._setStat(f,"googNacksSent",y.nackCount),t._setStat(f,"googPlisSent",y.pliCount),t._setStat(f,"googFirsSent",y.firCount),t._setStat(f,"bytesReceived",y.bytesReceived),t._setStat(f,"packetsReceived",y.packetsReceived)),(y=d.get("inbound-audio"))&&(t._setStat(c,"id","inbound_audio_ssrc_recv"),t._setStat(c,"mediaType",y.mediaType),t._setStat(c,"bytesReceived",y.bytesReceived),t._setStat(c,"packetsLost",y.packetsLost),t._setStat(c,"packetsReceived",y.packetsReceived),t._setStat(c,"googAccelerateRate",y.removedSamplesForAcceleration),t._setStat(c,"googCurrentDelayMs",y.jitterBufferDelay),t._setStat(c,"googDecodingCNG",null),t._setStat(c,"googDecodingCTN",null),t._setStat(c,"googDecodingCTSG",null),t._setStat(c,"googDecodingNormal",null),t._setStat(c,"googDecodingPLC",null),t._setStat(c,"googDecodingPLCCNG",null),t._setStat(c,"googJitterReceived",y.jitter),t._setStat(c,"googPreferredJitterBufferMs",null),t._setStat(c,"googSecondaryDecodedRate",null)),(y=d.get("remote-video-track"))&&(t._setStat(f,"googTargetDelayMs",y.jitterBufferDelay),t._setStat(f,"googFrameWidthReceived",y.frameWidth),t._setStat(f,"googFrameHeightReceived",y.frameHeight),t._setStat(f,"googJitterBufferMs",y.jitterBufferDelay/y.jitterBufferEmittedCount*1e3),t._setStat(f,"googCurrentDelayMs",y.jitterBufferDelay),t._setStat(f,"googFramesDecoded",y.framesDecoded),t._setStat(f,"googFramesReceived",y.framesReceived)),(y=d.get("remote-audio-track"))&&(t._setStat(c,"audioOutputLevel",32767*y.audioLevel),t._setStat(c,"googJitterBufferMs",y.jitterBufferDelay/y.jitterBufferEmittedCount*1e3),t._setStat(c,"googExpandRate",y.concealedSamples),t._setStat(c,"googPreemptiveExpandRate",y.insertedSamplesForDeceleration),t._setStat(c,"googSpeechExpandRate",y.silentConcealedSamples));else{var _=t.lastStats.get("timestamp"),b=t.lastStats.get("outbound-video");if((y=d.get("outbound-audio"))&&(t._setStat(i,"id","outbound_audio_ssrc_send"),t._setStat(i,"mediaType",y.mediaType),t._setStat(i,"aecDivergentFilterFraction",null),t._setStat(i,"bytesSent",y.bytesSent),t._setStat(i,"packetsSent",y.packetsSent),E=y.transportId),y=d.get("outbound-video")){if(t._setStat(s,"id","outbound_video_ssrc_send"),t._setStat(s,"mediaType",y.mediaType),t._setStat(s,"bytesSent",y.bytesSent),t._setStat(s,"packetsSent",y.packetsSent),t._setStat(s,"googAdaptationChanges",y.qualityLimitationDurations),t._setStat(s,"googAvgEncodeMs",null),t._setStat(s,"googEncodeUsagePercent",null),E=y.transportId,y.totalEncodedBytesTarget&&b&&b.totalEncodedBytesTarget){var S=(y.totalEncodedBytesTarget-b.totalEncodedBytesTarget)/(+new Date-_);t._setStat(m,"googTargetEncBitrate",Math.floor(8*S*1e3))}if(y.retransmittedBytesSent&&b&&b.retransmittedBytesSent){var T=(y.retransmittedBytesSent-b.retransmittedBytesSent)/(+new Date-_);t._setStat(m,"googRetransmitBitrate",Math.floor(8*T*1e3))}if(y.bytesSent&&b&&b.bytesSent){var I=(y.bytesSent-b.bytesSent)/(+new Date-_);t._setStat(m,"googTransmitBitrate",Math.floor(8*I*1e3)),t._setStat(m,"googActualEncBitrate",Math.floor(8*I*1e3))}if(y.totalPacketSendDelay&&b&&b.totalPacketSendDelay){var N=(y.totalPacketSendDelay-b.totalPacketSendDelay)/(+new Date-_);t._setStat(m,"googBucketDelay",Math.floor(1e3*N))}}if((y=d.get("remote-inbound-video"))&&(t._setStat(s,"packetsLost",y.packetsLost),t._setStat(s,"googRtt",y.roundTripTime)),(y=d.get("local-video-track"))&&(t._setStat(s,"googFrameHeightSent",y.frameHeight),t._setStat(s,"googFrameWidthSent",y.frameWidth),void 0!==y.framesPerSecond&&t._setStat(s,"googFrameRateSent",y.framesPerSecond)),(y=d.get("local-audio-track"))&&(t._setStat(i,"googEchoCancellationReturnLoss",y.echoReturnLoss),t._setStat(i,"googEchoCancellationReturnLossEnhancement",y.echoReturnLossEnhancement)),(y=d.get("media-source-video"))&&(t._setStat(s,"googFrameHeightInput",y.height),t._setStat(s,"googFrameWidthInput",y.width),t._setStat(s,"googFrameRateInput",y.framesPerSecond)),(y=d.get("media-source-audio"))&&t._setStat(i,"audioInputLevel",32767*y.totalAudioEnergy),(y=d.get("inbound-video"))&&(t._setStat(s,"googFirsReceived",y.firCount),t._setStat(s,"googNacksReceived",y.nackCount),t._setStat(s,"googPlisReceived",y.pliCount)),E)d.get("candidatePairs").map((function(e){E==e.transportId&&t._setStat(m,"googAvailableSendBandwidth",e.availableOutgoingBitrate)}));else{var w=d.get("candidatePairs")[0];w&&t._setStat(m,"googAvailableSendBandwidth",w.availableOutgoingBitrate)}}t.lastStats=d;var C=[o()({},s),o()({},i),o()({},f),o()({},c),o()({},m)];C.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(C)}))},t._processGetStatsBeforeChrome76=function(e){t.peerConnection.getStats((function(n){var r=[],a=[],l=null;Object.keys(n).forEach((function(e){var t=n[e];t&&(a.push(t),l=t.timestamp,"VideoBwe"===t.type?m=t:t.id.indexOf("_send")>-1&&"video"===t.mediaType?s=t:t.id.indexOf("_send")>-1&&"audio"===t.mediaType?i=t:t.id.indexOf("_recv")>-1&&"video"===t.mediaType?f=t:t.id.indexOf("_recv")>-1&&"audio"===t.mediaType&&(c=t))})),(r=[o()({},s),o()({},i),o()({},f),o()({},c),o()({},m)]).push({id:"time",startTime:t.connectedTime,timestamp:l||new Date}),e(r,a)}))},t._getStats=function(e){Object(p.getParameter)("CHROME_NEW_STATS")&&r.isChromeKernel()&&+r.getBrowserVersion()>=76?t._processGetStatsAfterChrome76(e):t._processGetStatsBeforeChrome76(e)},t.addTrack=function(e,n){if("unified-plan"===Object(p.getParameter)("PLAN")){var r="audio"===e.kind?t._audioSender:t._videoSender;if(r){var i=t.peerConnection.getTransceivers().find((function(e){return e.sender===r}));r.replaceTrack(e).then((function(){i.direction="sendrecv",t.renegotiate()}))}else r=t.peerConnection.addTrack(e,n),"audio"===e.kind?t._audioSender=r:t._videoSender=r}else t.peerConnection.addTrack(e,n)},t.removeTrack=function(e,n){if("unified-plan"===Object(p.getParameter)("PLAN")){var r=t.peerConnection.getTransceivers().find((function(t){return t.sender.track===e}));r&&(r.direction="inactive",t.peerConnection.removeTrack(r.sender))}else t.peerConnection.removeTrack(t.peerConnection.getSenders().find((function(t){return t.track==e})))},t.addStream=function(e){"unified-plan"===Object(p.getParameter)("PLAN")?e.getTracks().forEach((function(n){var r=t.peerConnection.addTrack(n,e);"audio"===n.kind?t._audioSender=r:t._videoSender=r})):(t.peerConnection.addStream(e),t.markActionNeeded())},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){var n;if(t.actionNeeded){if("new"===t.state||"established"===t.state)t.peerConnection.createOffer(t.mediaConstraints).then((function(n){return n?n.sdp!==t.prevOffer?(e.isSubscriber&&(n.sdp=n.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),t.peerConnection.setLocalDescription(n),t.state="preparing-offer",void t.markActionNeeded()):void u.default.debug("["+t.clientId+"]Not sending a new offer"):(u.default.debug("["+t.clientId+"]sessionDescription is null"),void t.onsignalingmessage(null))})).catch((function(e){u.default.debug("["+t.clientId+"]peer connection create offer failed ",e)}));else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(e.isCloudProxy3&&e.onNoIceCandidate&&e.onNoIceCandidate(),u.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(p.getParameter)("SHIM_CANDIDATE")?(u.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):u.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;u.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(e){u.default.debug("["+t.clientId+"]peer connection create answer failed ",e)}),t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;n=t.peerConnection.localDescription.sdp,t.sendMessage("ANSWER",n),t.state="established"}else u.default.debug("[".concat(t.clientId,"] Dazed and confused in state ").concat(t.state,", stopping here'"));t.actionNeeded=!1}},t.sendMessage=function(e,n){var r={};r.messageType=e,r.sdp=n,"OFFER"===e?(r.offererSessionId=t.sessionId,r.answererSessionId=t.otherSessionId,r.seq=t.sequenceNumber+=1,r.tiebreaker=Math.floor(429496723*Math.random()+1)):(r.offererSessionId=t.incomingMessage.offererSessionId,r.answererSessionId=t.sessionId,r.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(r))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,r){var i=t._getSender(e.kind);if(!i)return r("NO_SENDER_FOUND");try{i.replaceTrack(e)}catch(e){return r&&r(e)}setTimeout((function(){return n&&n()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&(t.onaddstream(e,"ontrack"),t.peerConnection.onaddstream=null)},t.peerConnection.onaddstream=function(e){t.onaddstream&&(t.onaddstream(e,"onaddstream"),t.peerConnection.ontrack=null)},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){u.default.debug(t.peerConnection.iceConnectionState),"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then((function(e){return"unified-plan"!==Object(p.getParameter)("PLAN")&&(e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n")),e.sdp=v(e.sdp),e.sdp=y(e.sdp),t.peerConnection.setLocalDescription(e)})).then((function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)})).catch((function(e){u.default.error("createOffer error: ",e.message||e)}))},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.onnegotiationneeded=null,t.state="new",t.markActionNeeded(),t}(e)).browser="chrome-stable",t},S=function(e,t,n){var i={};i.config=e,i.streamId=e.streamId,delete e.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var o=0,s=1,a=!1,c=null,l=function(e){if(o++,c)if(c===e)u.default.debug("Using Video Source/ Audio Source");else{var n=c.getVideoTracks()[0],r=c.getAudioTracks()[0],i=e.getVideoTracks()[0],l=e.getAudioTracks()[0];i&&(n&&c.removeTrack(n),c.addTrack(i)),l&&(r&&c.removeTrack(r),c.addTrack(l))}else c=e;o!==s||a||(a=!0,setTimeout((function(){t(c)}),0))},d=function(e){u.default.error("Failed to GetUserMedia",e.name,e.code,e.message,e),o++,a||(a=!0,setTimeout((function(){n&&n(e)}),0))},p=function(){var t={video:e.video,audio:e.audio};if(u.default.debug("GetUserMedia",JSON.stringify(t)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(t).then(l).catch(d);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(e,l,d);else{var r={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};u.default.error("["+i.streamId+"]"+r.message),n&&n(r)}};if((e.videoSource||e.audioSource)&&(c=new MediaStream,e.videoSource&&c.addTrack(e.videoSource),e.audioSource&&c.addTrack(e.audioSource)),e.video||e.audio||e.screen||e.screenAudio){if(!e.screen&&e.screenAudio)return n&&n({code:"Set screen to true before sharing the audio"});if(e.screen){if(E.a.isElectron())return e.screen.sourceId?E.a.getScreenStream(e.screen.sourceId,e.screen,(function(t,n){t?d(t):(e.audio&&(s++,p()),l(n))})):E.a.shareScreen(e.screen,(function(t,n){t?d(t):(e.audio&&(s++,p()),l(n))}));if(r.isFireFox()){if(u.default.debug("["+i.streamId+"]Screen access requested"),!~["screen","window","application"].indexOf(e.screen.mediaSource))return n&&n({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:e.screen},(function(t){e.audio&&(s++,p()),l(t)}),d)}else if(r.isChromeKernel()&&e.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void n({code:"This browser does not support screen sharing"});u.default.debug("["+i.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(e.screen.extensionId,{getStream:!0},(function(t){void 0===t?(u.default.error("["+i.streamId+"]No response from Chrome Plugin. Plugin not installed properly"),d({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})):(e.screen.mandatory.chromeMediaSourceId=t.streamId,navigator.getMedia({video:e.screen},(function(t){e.audio&&(s++,p()),l(t)}),d))}))}catch(e){return u.default.debug("["+i.streamId+"]AgoraRTC screensharing plugin is not accessible"),void n({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var h={};return"number"==typeof e.screen.width&&"number"==typeof e.screen.height?h.video={width:{ideal:e.screen.width},height:{ideal:e.screen.height}}:h.video={width:e.screen.width,height:e.screen.height},e.screen.frameRate&&e.screen.frameRate.min?h.video.frameRate={ideal:e.screen.frameRate.max,max:e.screen.frameRate.max}:h.video.frameRate=e.screen.frameRate,e.screenAudio&&(h.audio=e.screenAudio),u.default.debug("use getDisplayMedia, constraints:",h),window.navigator.mediaDevices.getDisplayMedia(h).then((function(t){!e.screenAudio&&e.audio&&(s++,p()),l(t)})).catch(d)}u.default.error("["+i.streamId+"]This browser does not support screenSharing"),n({code:"This browser does not support screen sharing"})}}else p()}else l(c)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),o=function(){function e(e,t,n){void 0===t&&(t=""),this.name="AgoraRTCException",this.code=e,this.message="AgoraRTCError "+this.code+": "+t,this.data=n}return e.prototype.toString=function(){return this.data?this.message+" data: "+JSON.stringify(this.data):this.message},e.prototype.throw=function(){throw i.default.error(this.toString()),this},e}();t.AgoraRTCError=o,function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_SUPPORT="NOT_SUPPORT",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORT="OPERATION_ABORT",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.STREAM_ALREADY_INITIALIZED="STREAM_ALREADY_INITIALIZED",e.STREAM_IS_CLOSED="STREAM_IS_CLOSED",e.ABORT_OTHER_INIT="ABORT_OTHER_INIT",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.CAN_NOT_AUTOPLAY="CAN_NOT_AUTOPLAY",e.HIGH_STREAM_NO_VIDEO_TRACK="HIGH_STREAM_NO_VIDEO_TRACK",e.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM="SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.TOKEN_GENERATOR_FUNCTION_ERROR="TOKEN_GENERATOR_FUNCTION_ERROR",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.UID_CONFLICT="UID_CONFLICT",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.SUBSCRIPTION_IS_IN_PROGRESS="SUBSCRIPTION_IS_IN_PROGRESS",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.EFFECT_ID_CONFLICTED="EFFECT_ID_CONFLICTED",e.EFFECT_SOUND_ID_NOT_FOUND="EFFECT_SOUND_ID_NOT_FOUND",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER="CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT="LIVE_STREAMING_TRANSCODING_NOT_SUPPORT",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"}(t.AgoraRTCErrorCode||(t.AgoraRTCErrorCode={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),i=window.AudioContext||window.webkitAudioContext,o=n(2),s=o.getParameter,a=o.setParameter,c=function(){return s("AUDIO_CONTEXT")||a("AUDIO_CONTEXT",function(){if(i){var e=new i;return window.ctx=e,new Promise((function(e){document.body?e():window.addEventListener("load",e)})).then((function(){var t=function t(){"suspended"==e.state?(r.default.debug("AudioContext is suspended, auto resume"),e.resume().then((function(){r.default.debug("AudioContext resume success"),document.body.removeEventListener("touchend",t,!0),document.body.removeEventListener("mousedown",t,!0)}))):(r.default.debug("AudioContext is running"),document.body.removeEventListener("touchend",t,!0),document.body.removeEventListener("mousedown",t,!0))};document.body.addEventListener("touchend",t,!0),document.body.addEventListener("mousedown",t,!0)})),e}throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}()),s("AUDIO_CONTEXT")};c()},function(e,t,n){"use strict";var r=n(1),i=null,o=function(){try{i=window.require("electron")}catch(e){}return i},s=function(e){var t=r.report.reportApiInvoke(null,{callback:e,name:"getScreenSources",options:arguments,tag:"tracer"}),n=o();if(!n)return t&&t("electron is null");try{var i=n.desktopCapturer.getSources({types:["window","screen"]})}catch(e){console.log(e)}i instanceof Promise?i.then((function(e){return t&&t(null,e)})).catch((function(e){return t&&t(e)})):i=n.desktopCapturer.getSources({types:["window","screen"]},(function(e,n){t&&t(null,n)}))},a=function(e,t,n){var r=t.width;t={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:t.height,maxWidth:r,maxFrameRate:t.frameRate&&t.frameRate.max,minFrameRate:t.frameRate&&t.frameRate.min}}},navigator.webkitGetUserMedia(t,(function(e){n&&n(null,e)}),(function(e){n&&n(e)}))};t.a={isElectron:function(){return!!o()},getElectronInstance:o,getScreenSources:s,getScreenStream:a,shareScreen:function(e,t){s((function(n,r){if(n)return t&&t(n);!function(e,t){var n=document.createElement("div");n.innerText="share screen",n.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var r=document.createElement("div");r.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var i=document.createElement("div");i.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",i.setAttribute("style","height: 12%;");var o=document.createElement("div");o.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var s=document.createElement("div");s.setAttribute("style","text-align: right; padding: 16px 0;");var a=document.createElement("button");a.innerHTML="cancel",a.setAttribute("style","width: 85px;"),a.onclick=function(){document.body.removeChild(c),t&&t("NotAllowedError")},s.appendChild(a),r.appendChild(i),r.appendChild(o),r.appendChild(s);var c=document.createElement("div");c.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),c.appendChild(n),c.appendChild(r),document.body.appendChild(c),e.map((function(e){if(e.id){var n=document.createElement("div");n.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");var r=e.thumbnail;r.getSize().width>1920&&(r=r.resize({width:1920})),n.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",n.onclick=function(){document.body.removeChild(c),t&&t(null,e.id)},o.appendChild(n)}}))}(r,(function(n,r){if(n)return t&&t(n);a(r,e,t)}))}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);!function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(t.LiveStreamingServiceMode||(t.LiveStreamingServiceMode={})),t.DEFAULT_LIVE_STREAMING_TRANSCODING_USER={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},t.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK={x:0,y:0,width:160,height:160,zOrder:255,alpha:1},t.isLiveStreamingTranscodingConfig=function(e){return r.isEmpty(e.width)||r.checkValidNumber(e.width,"config.width",0),r.isEmpty(e.height)||r.checkValidNumber(e.height,"config.height",0),r.isEmpty(e.videoBitrate)||r.checkValidNumber(e.videoBitrate,"config.videoBitrate",1,1e6),r.isEmpty(e.videoFramerate)||r.checkValidNumber(e.videoFramerate,"config.videoFramerate"),r.isEmpty(e.lowLatency)||r.checkValidBoolean(e.lowLatency,"config.lowLatency"),r.isEmpty(e.audioSampleRate)||r.checkValidEnum(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),r.isEmpty(e.audioBitrate)||r.checkValidNumber(e.audioBitrate,"config.audioBitrate",1,128),r.isEmpty(e.audioChannels)||r.checkValidEnum(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),r.isEmpty(e.videoGop)||r.checkValidNumber(e.videoGop,"config.videoGop"),r.isEmpty(e.videoCodecProfile)||r.checkValidEnum(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),r.isEmpty(e.userCount)||r.checkValidNumber(e.userCount,"config.userCount",0,17),r.isEmpty(e.backgroundColor)||r.checkValidNumber(e.backgroundColor,"config.backgroundColor",0,16777215),e.transcodingUsers&&!r.isEmpty(e.transcodingUsers)&&(r.checkValidArray(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach((function(e,t){r.checkValidUID(e.uid),r.isEmpty(e.x)||r.checkValidNumber(e.x,"transcodingUser["+t+"].x",0,1e4),r.isEmpty(e.y)||r.checkValidNumber(e.y,"transcodingUser["+t+"].y",0,1e4),r.isEmpty(e.width)||r.checkValidNumber(e.width,"transcodingUser["+t+"].width",0,1e4),r.isEmpty(e.height)||r.checkValidNumber(e.height,"transcodingUser["+t+"].height",0,1e4),r.isEmpty(e.zOrder)||r.checkValidNumber(e.zOrder-1,"transcodingUser["+t+"].zOrder",0,100),r.isEmpty(e.alpha)||r.checkValidFloatNumber(e.alpha,"transcodingUser["+t+"].alpha",0,1)}))),e.images&&!r.isEmpty(e.images)&&(r.checkValidArray(e.images,"config.images"),e.images.forEach((function(e,t){r.checkValidString(e.url,"images["+t+"].url",1,1e3,!1),r.isEmpty(e.x)||r.checkValidNumber(e.x,"images["+t+"].x",0,1e4),r.isEmpty(e.y)||r.checkValidNumber(e.y,"images["+t+"].y",0,1e4),r.isEmpty(e.width)||r.checkValidNumber(e.width,"images["+t+"].width",0,1e4),r.isEmpty(e.height)||r.checkValidNumber(e.height,"images["+t+"].height",0,1e4),r.isEmpty(e.zOrder)||r.checkValidNumber(e.zOrder,"images["+t+"].zOrder",0,255),r.isEmpty(e.alpha)||r.checkValidFloatNumber(e.alpha,"images["+t+"].alpha",0,1)}))),!0},t.DEFAULT_TRANSCODING_CONFIG={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},t.isInjectStreamConfig=function(e){return r.isEmpty(e.audioVolume)||r.checkValidNumber(e.audioVolume,"config.audioVolume",0,1e3),r.isEmpty(e.audioBitrate)||r.checkValidNumber(e.audioBitrate,"config.audioBitrate",1,1e4),r.isEmpty(e.audioChannels)||r.checkValidEnum(e.audioChannels,"config.audioChannels",[1,2]),r.isEmpty(e.audioSampleRate)||r.checkValidEnum(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),r.isEmpty(e.width)||r.checkValidNumber(e.width,"config.width",0,1e4),r.isEmpty(e.height)||r.checkValidNumber(e.height,"config.height",0,1e4),r.isEmpty(e.videoBitrate)||r.checkValidNumber(e.videoBitrate,"config.videoBitrate",1,1e4),r.isEmpty(e.videoFramerate)||r.checkValidNumber(e.videoFramerate,"config.videoFramerate",1,1e4),r.isEmpty(e.videoGop)||r.checkValidNumber(e.videoGop,"config.videoGop",1,1e4),!0},t.DEFAULT_INJECT_CONFIG={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30},function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(t.LiveStreamingUapSignalEvents||(t.LiveStreamingUapSignalEvents={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(t.LiveStreamingInternalEvents||(t.LiveStreamingInternalEvents={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE=505]="LIVE_STREAM_RESPONSE_INGNORE_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(t.LIVE_STREAM_ERROR_CODE||(t.LIVE_STREAM_ERROR_CODE={})),function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls"}(t.WebSocketManagerEvents||(t.WebSocketManagerEvents={}))},function(e,t,n){var r=n(57),i=n(58);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){var r;e.exports=(r=n(73),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var l=[],u=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],d=n[6],p=n[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var f=l[h-15],m=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,g=l[h-2],v=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[h]=m+l[h-7]+v+l[h-16]}var y=r&i^r&o^i&o,E=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=p+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&d)+c[h]+l[h];p=d,d=u,u=a,a=s+_|0,s=o,o=i,i=r,r=_+(E+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(u),t.HmacSHA256=o._createHmacHelper(u)}(Math),r.SHA256)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomString=function(e){void 0===e&&(e=8);for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(48*Math.random()));return n}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),c=s(n(37)),l=n(24),u=s(n(0)),d=n(1);function p(e){return new Promise((function(t){window.setTimeout(t,e)}))}function h(e,t){return new Promise((function(n,r){t.timeout=t.timeout||a.getParameter("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&(t.data=JSON.stringify(t.data)),t.headers=t.headers||{},t.headers["Content-Type"]="application/json",t.method="POST",t.url=e,c.default.request(t).then((function(e){n(e.data)})).catch((function(e){c.default.isCancel(e)?r(new l.AgoraRTCError(l.AgoraRTCErrorCode.OPERATION_ABORT,"cancel token canceled")):"ECONNABORTED"===e.code?r(new l.AgoraRTCError(l.AgoraRTCErrorCode.NETWORK_TIMEOUT,e.message)):e.response?r(new l.AgoraRTCError(l.AgoraRTCErrorCode.NETWORK_RESPONSE_ERROR,e.response.status)):r(new l.AgoraRTCError(l.AgoraRTCErrorCode.NETWORK_ERROR,e.message))}))}))}function f(e,n,r,s){var a=this,c=Object.assign({},t.DEFAULT_RETRY_CONFIG,s),u=c.timeout,d=function(){return i(a,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,p(u)];case 1:return e.sent(),u*=c.timeoutFactor,u=Math.min(c.maxRetryTimeout,u),[2]}}))}))},h=!1,f=new Promise((function(t,s){return i(a,void 0,void 0,(function(){var i,a,u;return o(this,(function(o){switch(o.label){case 0:n=n||function(){return!1},r=r||function(){return!0},i=0,o.label=1;case 1:if(!(i<c.maxRetryCount))return[3,12];if(h)return[2,s(new l.AgoraRTCError(l.AgoraRTCErrorCode.OPERATION_ABORT))];o.label=2;case 2:return o.trys.push([2,7,,11]),[4,e()];case 3:return a=o.sent(),n(a,i)?i+1===c.maxRetryCount?[2,t(a)]:[4,d()]:[3,5];case 4:return o.sent(),[3,6];case 5:return[2,t(a)];case 6:return[3,11];case 7:return u=o.sent(),r(u,i)?i+1===c.maxRetryCount?[2,s(u)]:[4,d()]:[3,9];case 8:return o.sent(),[3,10];case 9:return[2,s(u)];case 10:return[3,11];case 11:return i+=1,[3,1];case 12:return[2]}}))}))}));return f.cancel=function(){return h=!0},f}function m(e,t){return{addressList:e.servers.map((function(e,n){return"wss://"+e.address.replace(/\./g,"-")+".edge.agora.io:"+e.wss+"?serviceName="+encodeURIComponent(t)})),workerToken:e.workerToken,vid:e.vid}}t.wait=p,t.post=h,t.DEFAULT_RETRY_CONFIG={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4},t.getRetryWaitTime=function(e,t){var n=t.timeout*Math.pow(t.timeoutFactor,e);return Math.min(t.maxRetryTimeout,n)},t.retryable=f,t.liveStreamingServerResponseToResult=m;var g=1;function v(e,n,s,c,p){var v=this;void 0===p&&(p=t.DEFAULT_RETRY_CONFIG),g+=1;var y,E,_={sid:s.sid,command:"convergeAllocateEdge",uid:"666",appId:s.appId,ts:Math.floor(Date.now()/1e3),seq:g,requestId:g,version:a.VERSION,cname:s.cname},b={service_name:n,json_body:JSON.stringify(_)},S=e[0];return f((function(){return i(v,void 0,void 0,(function(){var e,t,i,s,d;return o(this,(function(o){switch(o.label){case 0:return y=Date.now(),[4,h(S,{data:b,cancelToken:c,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}})];case 1:if(e=o.sent(),E=Date.now()-y,0!==e.code)throw i=new l.AgoraRTCError(l.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0}),u.default.error(i.toString()),i;if(200!==(t=JSON.parse(e.json_body)).code)throw i=new l.AgoraRTCError(l.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center error, code: "+t.code+", reason: "+t.reason),u.default.error(i.toString()),i;if(!t.servers||0===t.servers.length)throw i=new l.AgoraRTCError(l.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center empty server"),u.default.error(i.toString()),i;if(s=m(t,n),a.getParameter("LIVE_STREAMING_ADDRESS"))try{d=JSON.parse(a.getParameter("LIVE_STREAMING_ADDRESS")),s.addressList=d}catch(e){s.addressList=[a.getParameter("LIVE_STREAMING_ADDRESS")]}return[2,r(r({},s),{responseTime:E})]}}))}))}),(function(t,r){return d.report.requestApWorkerEvent(s.sid,{success:!0,sc:200,serviceName:n,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===r,responseTime:E,serverIp:e[r%e.length]}),!1}),(function(t,r){return d.report.requestApWorkerEvent(s.sid,{success:!1,sc:t.data&&t.data.code||200,serviceName:n,responseTime:E,serverIp:e[r%e.length]}),!!(t.code!==l.AgoraRTCErrorCode.OPERATION_ABORT&&t.code!==l.AgoraRTCErrorCode.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(S=e[(r+1)%e.length],!0)}),p)}t.requestLiveStreamingWorkerManager=v,t.getLiveStreamingWorkerMangerResult=function(e,t,n){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:r=a.getParameter("UAP_AP").map((function(e){return t.proxyServer?"https://"+t.proxyServer+"/ap/?url="+e+"/api/v1?action=uap":"https://"+e+"/api/v1?action=uap"})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,v(r,e,t,n)];case 2:return[2,o.sent()];case 3:throw i=o.sent(),d.report.requestApWorkerEvent(t.sid,{success:!1,sc:i.data&&i.data.code||200,serviceName:e,responseTime:i.data&&i.data.responseTime}),i;case 4:return[2]}}))}))}},function(e,t,n){var r=n(70),i=n(71),o=n(34),s=n(72);e.exports=function(e){return r(e)||i(e)||o(e)||s()}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(35);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),o=function(){function e(){this._events={},this.addListener=this.on}return e.prototype.getListeners=function(e){return this._events[e]?this._events[e].map((function(e){return e.listener})):[]},e.prototype.on=function(e,t){this._events[e]||(this._events[e]=[]);var n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})},e.prototype.once=function(e,t){this._events[e]||(this._events[e]=[]);var n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})},e.prototype.off=function(e,t){if(this._events[e]){var n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}},e.prototype.removeAllListeners=function(e){e?delete this._events[e]:this._events={}},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._events[e]||(this._events[e]=[]);for(var r=this._events[e].map((function(e){return e})),i=0;i<r.length;i+=1){var o=r[i];o.once&&this.off(e,o.listener),o.listener.apply(this,t||[])}},e.prototype._indexOfListener=function(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1},e}();function s(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var s=null,a=null;if(e.emit.apply(e,r([t],n,[function(e){s=e},function(e){a=e}])),null!==a)throw a;if(null===s)throw new i.AgoraRTCError(i.AgoraRTCErrorCode.UNEXPECTED_ERROR,"handler is not sync");return s}t.EventEmitter=o,t.emitAsPromise=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return 0===e.getListeners(t).length?Promise.reject(new i.AgoraRTCError(i.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not emit promise")):new Promise((function(i,o){e.emit.apply(e,r([t],n,[i,o]))}))},t.emitAsInvokerNoResponse=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return 0===e.getListeners(t).length?null:s.apply(void 0,r([e,t],n))},t.emitAsInvoker=s},function(e,t,n){e.exports=n(78)},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(18);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(18),i=n(84),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(a=n(42)),a),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(o)})),e.exports=c}).call(this,n(83))},function(e,t,n){"use strict";var r=n(18),i=n(85),o=n(39),s=n(87),a=n(90),c=n(91),l=n(43);e.exports=function(e){return new Promise((function(t,u){var d=e.data,p=e.headers;r.isFormData(d)&&delete p["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",m=e.auth.password||"";p.Authorization="Basic "+btoa(f+":"+m)}var g=s(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:e,request:h};i(t,u,r),h=null}},h.onabort=function(){h&&(u(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){u(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),u(l(t,e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var v=n(92),y=(e.withCredentials||c(g))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;y&&(p[e.xsrfHeaderName]=y)}if("setRequestHeader"in h&&r.forEach(p,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),u(e),h=null)})),void 0===d&&(d=null),h.send(d)}))}},function(e,t,n){"use strict";var r=n(86);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t){t=t||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(o,(function(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),r.forEach(s,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var a=i.concat(o).concat(s),c=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return r.forEach(c,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(59)),c=s(n(62)),l=s(n(63)),u=o(n(0)),d=n(2),p=a.default.Root.fromJSON(l),h=function(){function e(){this.requestArray=[],this.retryBackoffCount=0,this.state=0}return e.prototype.setProxy=function(e){this.proxyServer=e},e.prototype.sendReportList=function(e,t){var n=this,r=this._dataConvert("ProtoRaws",{vid:t,sendTs:Math.round(Date.now()/1e3),payloads:e.map((function(e){return{id:c[e.type],msg:n._dataConvert(e.type,e.data)}}))});this.send(r)},e.prototype._dataConvert=function(e,t){var n;try{n=p.lookupType("protobuf."+e)}catch(t){u.default.error("[send-proto] invalid proto name "+e)}var r=n.create(t);return n.encode(r).finish()},e.prototype.send=function(e){0==this.state?this._send(e):this.requestArray.push(e)},e.prototype._send=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),this.state=1,[4,this.request(e)];case 1:return t.sent(),this.retryBackoffCount=0,0!==this.requestArray.length?this._send(this.requestArray.shift()):this.state=0,[3,4];case 2:return t.sent(),[4,f(this.retryBackoffCount++<2?200:1e4)];case 3:return t.sent(),this._send(e),[3,4];case 4:return[2]}}))}))},e.prototype.request=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t=this._getAddress(),n=this._getBackupAddress(),r.label=1;case 1:return r.trys.push([1,3,,5]),[4,this._request(t,e)];case 2:return r.sent(),[3,5];case 3:return r.sent(),[4,this._request(n,e)];case 4:return r.sent(),[3,5];case 5:return[2]}}))}))},e.prototype._request=function(e,t){return this._post(e,t)},e.prototype._post=function(e,t){var n=this;return new Promise((function(r,i){var o=new XMLHttpRequest;o.timeout=d.getParameter("HTTP_CONNECT_TIMEOUT"),o.open("POST",e,!0),o.setRequestHeader("Content-type","application/octet-stream"),n.proxyServer||(o.setRequestHeader("Cache-Control","no-cache, no-store"),o.setRequestHeader("Pragma","no-cache"),o.setRequestHeader("Expires","0")),o.onload=function(e){r(o.responseText)},o.onerror=function(e){i(e)},o.ontimeout=function(e){i(e)},o.send(t)}))},e.prototype._getAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+d.getParameter("EVENT_REPORT_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+d.getParameter("EVENT_REPORT_DOMAIN")+":6443/events/proto-raws"},e.prototype._getBackupAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+d.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+d.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+":6443/events/proto-raws"},e}();t.default=h;var f=function(e){return new Promise((function(t){window.setTimeout(t,e)}))}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(n(0)),c=n(15);!function(e){e.NEW="new",e.PREPARING_OFFER="preparing-offer",e.OFFER_SENT="offer-sent",e.ESTABLISHED="established",e.CLOSED="closed"}(s||(s={}));var l=function(){function e(e){this.candidate=null,this.state=s.NEW,this.config=e,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(e),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:this.config.codec.toUpperCase(),bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return e.prototype.addStream=function(e){this.peerConnection.addStream(e)},e.prototype.setRtpSenderParameters=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))},e.prototype.setAnswer=function(e){var t=JSON.parse(e);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:t.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},e.prototype.close=function(){this.peerConnection.close()},e.prototype.getStats=function(e,t){if(void 0===t&&(t=500),t=t>500?500:t,Date.now()-this.lastTimeGetStats<t){var n=[];this.config.isSubscriber?(n.push(this.receiveVideoStats),n.push(this.receiveAudioStats)):(n.push(this.sendAudioStats),n.push(this.sendVideoStats)),n.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),e&&e(n)}else this._getStats(e)},e.prototype._getStats=function(e){var t=this,n=[];this.peerConnection.getStats(null).then((function(r){t.lastTimeGetStats=Date.now(),Object.keys(r).map((function(e){var n=r[e];t.config.isSubscriber?n.type&&"inboundrtp"===n.type&&n.mediaType&&"audio"===n.mediaType?(t.receiveAudioStats.id=n.id+"recv",t.receiveAudioStats.type=n.type+"",t.receiveAudioStats.mediaType=n.mediaType+"",t.receiveAudioStats.packetsReceived=n.packetsReceived+"",t.receiveAudioStats.bytesReceived=n.bytesReceived+"",t.receiveAudioStats.packetsLost=n.packetsLost+"",t.receiveAudioStats.googJitterReceived=n.jitter+""):n.type&&"inboundrtp"===n.type&&n.mediaType&&"video"===n.mediaType?(t.receiveVideoStats.id=n.id+"recv",t.receiveVideoStats.type=n.type+"",t.receiveVideoStats.mediaType=n.mediaType+"",t.receiveVideoStats.packetsReceived=n.packetsReceived+"",t.receiveVideoStats.bytesReceived=n.bytesReceived+"",t.receiveVideoStats.packetsLost=n.packetsLost+"",t.receiveVideoStats.googJitterBufferMs=n.jitter+"",t.receiveVideoStats.googPlisSent=n.pliCount+"",t.receiveVideoStats.googFirsSent=n.firCount+"",t.receiveVideoStats.googNacksSent=n.nackCount+""):n.remoteSource&&n.type&&"track"===n.type&&n.trackIdentifier&&-1!==n.trackIdentifier.indexOf("v")?(t.receiveVideoStats.googFrameHeightReceived=n.frameHeight+"",t.receiveVideoStats.googFrameWidthReceived=n.frameWidth+"",t.receiveVideoStats.googFrameRateDecoded=n.framesPerSecond+"",t.receiveVideoStats.googFrameRateOutput=n.framesPerSecond+"",t.receiveVideoStats.googFrameRateReceived=n.framesPerSecond+"",t.receiveVideoStats.googFramesDecoded=n.framesDecoded+"",t.receiveVideoStats.googFrameReceived=n.framesReceived+""):n.remoteSource&&n.type&&"track"===n.type&&n.trackIdentifier&&-1!==n.trackIdentifier.indexOf("a")&&(t.receiveAudioStats.audioOutputLevel=n.audioLevel+""):!n.isRemote&&n.type&&"outboundrtp"===n.type&&n.mediaType&&"audio"===n.mediaType?(t.sendAudioStats.id=n.id+"send",t.sendAudioStats.type=n.type+"",t.sendAudioStats.mediaType=n.mediaType+"",t.sendAudioStats.packetsSent=n.packetsSent+"",t.sendAudioStats.bytesSent=n.bytesSent+""):!n.isRemote&&n.type&&"outboundrtp"===n.type&&n.mediaType&&"video"===n.mediaType?(t.sendVideoStats.id=n.id+"send",t.sendVideoStats.type=n.type+"",t.sendVideoStats.mediaType=n.mediaType+"",t.sendVideoStats.packetsSent=n.packetsSent+"",t.sendVideoStats.bytesSent=n.bytesSent+"",t.sendVideoStats.googRtt=n.roundTripTime+"",t.sendVideoStats.googPlisReceived=n.pliCount+"",t.sendVideoStats.googFirsReceived=n.firCount+"",t.sendVideoStats.googNacksReceived=n.nackCount+""):!n.remoteSource&&n.type&&"track"===n.type&&n.framesSent&&0!==n.framesSent&&(t.sendVideoStats.googFrameHeightSent=n.frameHeight+"",t.sendVideoStats.googFrameHeightInput=n.frameHeight+"",t.sendVideoStats.googFrameWidthSent=n.frameWidth+"",t.sendVideoStats.googFrameWidthInput=n.frameWidth+"",t.sendVideoStats.googFramesEncoded=n.framesSent+"",t.sendVideoStats.googFrameRateSent=n.framesPerSecond+"")})),t.config.isSubscriber?(n.push(t.receiveVideoStats),n.push(t.receiveAudioStats)):(n.push(t.sendAudioStats),n.push(t.sendVideoStats)),n.push({id:"time",startTime:t.connectedTime,timestamp:Date.now()}),e&&e(n)}))},e.prototype.getStatsRate=function(e){this.getStats(e)},e.prototype.initPeecConnection=function(e){var t=e.stunServerUrl,n=e.turnServer,r=e.iceServers;return this.pcConfig={iceServers:[]},r instanceof Array?this.pcConfig.iceServers=e.iceServers:t&&(t instanceof Array?t.map((function(e){"string"==typeof e&&""!==e&&this.pcConfig.iceServers.push({urls:e})})):"string"==typeof t&&""!==t&&this.pcConfig.iceServers.push({urls:t})),n&&(n instanceof Array?n.map((function(e){"string"==typeof e.url&&""!==e.url&&this.pcConfig.iceServers.push({username:e.username,credential:e.credential,url:e.url})})):"auto"!==n.mode&&"manual"!==n.mode||(n.udpport&&this.pcConfig.iceServers.push({username:n.username,credential:n.credential,credentialType:"password",urls:"turn:"+n.url+":"+n.udpport+"?transport=udp"}),"string"==typeof n.tcpport&&""!==n.tcpport&&this.pcConfig.iceServers.push({username:n.username,credential:n.credential,credentialType:"password",urls:"turn:"+n.url+":"+n.tcpport+"?transport=tcp"}),!0===n.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new c.RTCPeerConnection(this.pcConfig)},e.prototype._ontrack=function(e){this.onaddstream&&this.onaddstream(e,"ontrack")},e.prototype._onaddstream=function(e){this.onaddstream&&this.onaddstream(e,"onaddstream")},e.prototype._oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(this.state=s.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},e.prototype._onicecandidate=function(e){!this.candidate&&e&&(this.candidate=e.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},e.prototype.setLocalSDP=function(e){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:e.sdp,type:"offer"})),this.state=s.PREPARING_OFFER,e},e.prototype.editLocalSDP=function(e){return e.sdp=this.setBandWidth(e.sdp),e.sdp=this.reviseOpus(e.sdp),e.sdp=this.addCandidate(e.sdp),e},e.prototype.setSendRecv=function(e){return(e=(e=e.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},e.prototype.setBandWidth=function(e){var t,n,r=this.config,i=r.codec,o=r.minVideoBW,s=r.maxVideoBW,c=r.maxAudioBW,l=r.clientId;if((t=e.match(/m=video.*\r\n/))&&o&&s){n=t[0]+"b=AS:"+s+"\r\n";var u=0,d=0;"h264"===i?(u=e.search(/a=rtpmap:(\d+) H264\/90000\r\n/),d=e.search(/H264\/90000\r\n/)):"vp8"===i?(u=e.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),d=e.search(/VP8\/90000\r\n/)):"vp9"===i&&(u=e.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),d=e.search(/VP9\/90000\r\n/)),-1!==u&&-1!==d&&d-u>10&&(n=n+"a=fmtp:"+e.slice(u+9,d-1)+" x-google-min-bitrate="+o+"\r\n"),e=e.replace(t[0],n),a.default.debug("["+l+"]Set Video Bitrate - min:"+o+" max:"+s)}return(t=e.match(/m=audio.*\r\n/))&&c&&(n=t[0]+"b=AS:"+c+"\r\n",e=e.replace(t[0],n)),e},e.prototype.reviseOpus=function(e){return(e=e.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},e.prototype.addCandidate=function(e){return e+"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},e.prototype.sendOffer=function(e){this.config.callback(JSON.stringify({sdp:e.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=s.OFFER_SENT},e}();t.default=l},function(e,t,n){var r=n(65),i=n(66),o=n(34),s=n(67);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||s()}},function(e,t,n){var r,i,o;i=this,o=function(){"use strict";var e,t=this;function n(e){t.console&&(t.console.error?t.console.error(e):t.console.log&&t.console.log(e))}function r(e,t,r,i){var o=i||n,s=e.createShader(r);return e.shaderSource(s,t),e.compileShader(s),e.getShaderParameter(s,e.COMPILE_STATUS)?s:(o("*** Error compiling shader '"+s+"':"+e.getShaderInfoLog(s)),e.deleteShader(s),null)}function i(e,t,r,i,o){var s=o||n,a=e.createProgram();return t.forEach((function(t){e.attachShader(a,t)})),r&&r.forEach((function(t,n){e.bindAttribLocation(a,i?i[n]:n,t)})),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)?a:(s("Error in program linking:"+e.getProgramInfoLog(a)),e.deleteProgram(a),null)}(e=e||t)===e.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var o,s=["VERTEX_SHADER","FRAGMENT_SHADER"];return!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(o=HTMLCanvasElement.prototype.getContext,function(){var e=arguments;return"webgl"===e[0]&&((e=[].slice.call(arguments))[0]="experimental-webgl"),o.apply(this,e)})),{createProgram:i,createProgramFromSources:function(e,t,n,o,a){for(var c=[],l=0;l<t.length;++l)c.push(r(e,t[l],e[s[l]],a));return i(e,c,n,o,a)}}},void 0===(r=function(){return o.call(i)}.apply(t,[]))||(e.exports=r)},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(68),a=n(4),c=o(n(0));t.getSupportedCodec=function(e){return r(void 0,void 0,void 0,(function(){var t,n,r,o,u;return i(this,(function(i){switch(i.label){case 0:return t={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(c.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{n=s.createRTCPeerConnection({iceServers:[]})}catch(e){return c.default.error("Failed to init RTCPeerConnection",e),[2,Promise.reject(e)]}return n?[3,2]:(c.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(t)]);case 2:return e&&e.stream?[3,7]:(r={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},o=void 0,(a.isSafari()||a.isFireFox()||a.isWeChatBrowser())&&n.addTransceiver?(n.addTransceiver("audio"),n.addTransceiver("video"),[4,n.createOffer()]):[3,4]);case 3:return o=i.sent(),[3,6];case 4:return[4,new Promise((function(e,t){var i=setTimeout((function(){t("CREATEOFFER_TIMEOUT")}),3e3);n.createOffer((function(t){clearTimeout(i),e(t)}),(function(e){clearTimeout(i),t(e)}),r)}))];case 5:o=i.sent(),i.label=6;case 6:return n.close(),u=o.sdp,[2,l(u)];case 7:return e.stream.getTracks&&n.addTrack?e.stream.getTracks().forEach((function(t){n.addTrack(t,e.stream)})):n.addStream(e.stream),o=void 0,a.isSafari()||a.isFireFox()?[4,n.createOffer()]:[3,9];case 8:return o=i.sent(),[3,11];case 9:return[4,new Promise((function(e,t){n.createOffer(e,t)}))];case 10:o=i.sent(),i.label=11;case 11:return n.close(),u=o.sdp,[2,l(u)]}}))}))};var l=function(e){var t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),Promise.resolve(t)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(10);function s(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}t.encryptRSA=function(e){return r(void 0,void 0,void 0,(function(){var t,n,r,a;return i(this,(function(i){switch(i.label){case 0:return t=o.base64ToUint8Array("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),[4,window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])];case 1:return n=i.sent(),c=e,r=(new TextEncoder).encode(c),[4,window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r)];case 2:return a=i.sent(),[2,s(new Uint8Array(a))]}var c}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),a=n(75),c=n(24),l=n(1),u=n(27);t.addLiveStreamingCapability=function(e,t){var n=this,o=function(t){var n=t.type;if(!e.joinInfo)return new c.AgoraRTCError(c.AgoraRTCErrorCode.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();switch(n){case u.LiveStreamingServiceMode.INJECT:return e._injectStreamingClient||(e._injectStreamingClient=new a.AgoraRTCLiveStreamingClient(e.joinInfo),e._injectStreamingClient.onInjectStatusChange=function(t,n,r){e.gatewayClient.dispatchEvent({type:"streamInjectedStatus",url:r,status:t})}),e._injectStreamingClient;case u.LiveStreamingServiceMode.RAW:return e._liveRawStreamingClient||(e._liveRawStreamingClient=new a.AgoraRTCLiveStreamingClient(e.joinInfo),e._liveRawStreamingClient.setGatewayConnectionState(e.getConnectionState()),e.on("connection-state-change",(function(t){e._liveRawStreamingClient.setGatewayConnectionState(t.curState),"CONNECTING"===t.prevState&&"CONNECTED"===t.curState&&e._liveRawStreamingClient&&e._liveRawStreamingClient.resetAllTask()})),e._liveRawStreamingClient.onLiveStreamError=function(t,n){s.default.error("LIVE_STREAMING_ERROR",n.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:t,reason:n.code})},e._liveRawStreamingClient.onLiveStreamWarning=function(t,n){s.default.warning("LIVE_STREAMING_WARNING",n.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:t,reason:n.code})}),e._liveRawStreamingClient;case u.LiveStreamingServiceMode.TRANSCODE:return e._liveTranscodeStreamingClient||(e._liveTranscodeStreamingClient=new a.AgoraRTCLiveStreamingClient(e.joinInfo),e._liveTranscodeStreamingClient.setGatewayConnectionState(e.getConnectionState()),e.on("connection-state-change",(function(t){e._liveTranscodeStreamingClient.setGatewayConnectionState(t.curState),"CONNECTING"===t.prevState&&"CONNECTED"===t.curState&&e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.resetAllTask()})),e._liveTranscodeStreamingClient.onLiveStreamError=function(t,n){s.default.error("LIVE_STREAMING_ERROR",n.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:t,reason:n.code})},e._liveTranscodeStreamingClient.onLiveStreamWarning=function(t,n){s.default.warning("LIVE_STREAMING_WARNING",n.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:t,reason:n})}),e._liveTranscodeStreamingClient}};e.gatewayClient.addEventListener("join",(function(t){e._injectStreamingClient&&e._injectStreamingClient.resetAllTask()})),e.gatewayClient.addEventListener("stream-unpublished",(function(t){t.options&&0===t.options.streamType&&(e._liveRawStreamingClient&&e._liveRawStreamingClient.resetAllTask(),e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.resetAllTask())})),e.gatewayClient.addEventListener("stream-published",(function(e){})),e.startLiveStreaming=function(n,r){s.default.debug("startLiveStreaming");var i=l.report.reportApiInvoke(t.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(e.gatewayClient&&"audience"===e.gatewayClient.role){var o={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw i(o),o}var a=e._startLiveStreaming(n,r);return a.then((function(e){i(null,e)})).catch((function(t){s.default.error("LIVE_STREAMING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:n,reason:t.code}),i(t)})),a},e._startLiveStreaming=function(a,l){return r(n,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return l||("vp8"===t.codec&&s.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"vp9"===t.codec&&s.default.warning("VP9 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===t.mode&&s.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer")),(e._liveRawStreamingClient&&e._liveRawStreamingClient.haveUrl(a)||e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.haveUrl(a))&&new c.AgoraRTCError(c.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw(),n=l?u.LiveStreamingServiceMode.TRANSCODE:u.LiveStreamingServiceMode.RAW,[4,o({type:n}).startLiveStreamingTask(a,n)];case 1:return r.sent(),e.gatewayClient.dispatchEvent({type:"liveStreamingStarted",url:a}),[2]}}))}))},e.setLiveTranscoding=function(n){s.default.debug("setLiveTranscoding: "+JSON.stringify(n));var r=l.report.reportApiInvoke(t.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"});return o({type:u.LiveStreamingServiceMode.TRANSCODE}).setTranscodingConfig(n).then((function(){e.gatewayClient.dispatchEvent({type:"liveTranscodingUpdated"}),r(null)})).catch((function(t){s.default.error("SET_LIVE_TRANSCODING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",reason:t.code}),r(t)}))},e.stopLiveStreaming=function(n){var r=l.report.reportApiInvoke(t.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),i=e._stopLiveStreaming(n);return i.then((function(e){r(null,e)})).catch((function(t){s.default.error("STOP_LIVE_STREAMING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:n,reason:t.code}),r(t)})),i},e._stopLiveStreaming=function(t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return s.default.debug("stopLiveStreaming: "+JSON.stringify(t)),n=[e._liveRawStreamingClient,e._liveTranscodeStreamingClient],[4,Promise.all(n.map((function(e){return e&&e.haveUrl(t)&&e.stopLiveStreamingTask(t)})))];case 1:return r.sent(),s.default.debug("stopLiveStreaming sucess: "+JSON.stringify(t)),e.gatewayClient.dispatchEvent({type:"liveStreamingStopped",url:t}),[2]}}))}))},e.addInjectStreamUrl=function(n,r){var i=l.report.reportApiInvoke(t.sessionId,{name:"Client.addInjectStreamUrl",options:[n,r],tag:"tracer"});if("audience"===e.gatewayClient.role){var o={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw i(o),o}var a=e._addInjectStreamUrl(n,r);return a.then((function(e){i(null,e)})).catch((function(e){s.default.error("ADD_INJECT_STREAM_ERROR",e.toString()),i(e)})),a},e._addInjectStreamUrl=function(e,t){return r(n,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return(n=o({type:u.LiveStreamingServiceMode.INJECT})).setInjectStreamConfig(t,0),[4,n.startLiveStreamingTask(e,u.LiveStreamingServiceMode.INJECT)];case 1:return r.sent(),[2]}}))}))},e.removeInjectStreamUrl=function(n){return r(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){return r=l.report.reportApiInvoke(t.sessionId,{name:"Client.removeInjectStreamUrl",options:[n],tag:"tracer"}),(o=e._removeInjectStreamUrl(n)).then((function(e){r(null,e)})).catch((function(e){s.default.error("REMOVE_INJECT_STREAM_ERROR",e.toString()),r(e)})),[2,o]}))}))},e._removeInjectStreamUrl=function(e){return r(n,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o({type:u.LiveStreamingServiceMode.INJECT}).stopLiveStreamingTask(e)];case 1:return t.sent(),[2]}}))}))},e._terminateLiveStreaming=function(){return r(n,void 0,void 0,(function(){return i(this,(function(t){return[e._injectStreamingClient,e._liveRawStreamingClient,e._liveTranscodeStreamingClient].forEach((function(e){e&&e.terminate()})),[2]}))}))}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(5)),o=r(n(0)),s=n(10);t.default=function(e,t){void 0===t&&(t={width:160,height:120,framerate:15});var n=t.width,r=t.height,a=t.framerate,c=e.stream;if(!c)throw i.default.INVALID_LOCAL_STREAM;if(!c.getVideoTracks()[0])throw i.default.HIGH_STREAM_NOT_VIDEO_TRACE;var l=c.getVideoTracks()[0];o.default.debug("Start getLowStream");var u=document.createElement("video"),d=document.createElement("canvas");u.setAttribute("style","display:none"),u.setAttribute("muted",""),u.muted=!0,u.setAttribute("autoplay",""),u.autoplay=!0,u.setAttribute("playsinline",""),d.setAttribute("style","display:none"),d.setAttribute("width",n.toString()),d.setAttribute("height",r.toString());var p=d.getContext("2d");if(!p)throw new Error("not get canvas context");u.srcObject=c,document.body.append(u),document.body.append(d),u.play(),o.default.debug("Start render lowStream");var h=s.audioTimerLoop((function(){return function(){if(u.paused&&u.play(),u.videoHeight>2&&u.videoWidth>2){var t=u.videoWidth,n=u.videoHeight/t,r=d.width*n;Math.abs(r-d.height)>=2&&(o.default.debug("adjust low stream resolution",d.width+"x"+d.height+" -> "+d.width+"x"+r),d.height=r)}p.drawImage(u,0,0,d.width,d.height);var i=e.stream;if(i){var s=i.getVideoTracks()[0];l!==s&&(o.default.debug("adjust low stream track"),u.srcObject=i,l=s)}}()}),a),f=d.captureStream(a),m=f.getVideoTracks()[0];return m.requestFrame&&m.requestFrame(),f.clean=function(){o.default.debug("Start clean lowStream"),h(),(u||u.parentNode||u.parentNode.removeChild)&&u.parentNode.removeChild(u),(d||d.parentNode||d.parentNode.removeChild)&&d.parentNode.removeChild(d),o.default.debug("Clean lowStream")},f}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(module,exports,__nested_webpack_require_657211__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(undefined){"use strict";!function(e,t,n){var r=function n(r){var i=t[r];return i||e[r][0].call(i=t[r]={exports:{}},n,i,i.exports),i.exports}(16);r.util.global.protobuf=r,__WEBPACK_AMD_DEFINE_ARRAY__=[__nested_webpack_require_657211__(61)],(__WEBPACK_AMD_DEFINE_RESULT__=function(e){return e&&e.isLong&&(r.util.Long=e,r.configure()),r}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=r)}({1:[function(e,t,n){t.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))}},{}],2:[function(e,t,n){var r=n;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,n){for(var r,o=null,s=[],a=0,c=0;t<n;){var l=e[t++];switch(c){case 0:s[a++]=i[l>>2],r=(3&l)<<4,c=1;break;case 1:s[a++]=i[r|l>>4],r=(15&l)<<2,c=2;break;case 2:s[a++]=i[r|l>>6],s[a++]=i[63&l],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=i[r],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))},r.decode=function(e,t,n){for(var r,i=n,s=0,a=0;a<e.length;){var c=e.charCodeAt(a++);if(61===c&&s>1)break;if((c=o[c])===undefined)throw Error("invalid encoding");switch(s){case 0:r=c,s=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,s=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,s=3;break;case 3:t[n++]=(3&r)<<6|c,s=0}}if(1===s)throw Error("invalid encoding");return n-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],3:[function(e,t,n){function r(e,t){"string"==typeof e&&(t=e,e=undefined);var n=[];function i(e){if("string"!=typeof e){var t=o();if(r.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var s=Object.keys(e),a=new Array(s.length+1),c=new Array(s.length),l=0;l<s.length;)a[l]=s[l],c[l]=e[s[l++]];return a[l]=t,Function.apply(null,a).apply(null,c)}return Function(t)()}for(var u=new Array(arguments.length-1),d=0;d<u.length;)u[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var n=u[d++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),d!==u.length)throw Error("parameter count mismatch");return n.push(e),i}function o(r){return"function "+(r||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=o,i}t.exports=r,r.verbose=!1},{}],4:[function(e,t,n){function r(){this._listeners={}}t.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},{}],5:[function(e,t,n){t.exports=o;var r=e(1),i=e(7)("fs");function o(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&i&&i.readFile?i.readFile(e,(function(r,i){return r&&"undefined"!=typeof XMLHttpRequest?o.xhr(e,t,n):r?n(r):n(null,t.binary?i:i.toString("utf8"))})):o.xhr(e,t,n):r(o,this,e,t)}o.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4!==r.readyState)return undefined;if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var i=0;i<r.responseText.length;++i)e.push(255&r.responseText.charCodeAt(i))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},{1:1,7:7}],6:[function(e,t,n){function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,s),e.readFloatBE=n.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,i,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function n(e,t,n,r,i){var o=e(r,i+t),s=e(r,i+n),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,a,4,0)}(),e}function i(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=r(r)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],8:[function(e,t,n){var r=n,i=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},o=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=i(e),r="";n&&(r=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return r+t.join("/")};r.resolve=function(e,t,n){return n||(t=o(t)),i(t)?t:(n||(e=o(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?o(e+"/"+t):t)}},{}],9:[function(e,t,n){t.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return e(n);s+n>r&&(o=e(r),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},{}],10:[function(e,t,n){var r=n;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],s=0;t<n;)(r=e[t++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},{}],11:[function(e,t,n){var r=n,i=e(14),o=e(33);function s(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",r);for(var o=t.resolvedType.values,s=Object.keys(o),a=0;a<s.length;++a)t.repeated&&o[s[a]]===t.typeDefault&&e("default:"),e("case%j:",s[a])("case %i:",o[s[a]])("m%s=%j",r,o[s[a]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function a(e,t,n,r){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r):e("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,o?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,n=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<t.length;++r){var a=t[r].resolve(),c=o.safeProp(a.name);a.map?(n("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),s(n,a,r,c+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),s(n,a,r,c+"[i]")("}")("}")):(a.resolvedType instanceof i||n("if(d%s!=null){",c),s(n,a,r,c),a.resolvedType instanceof i||n("}"))}return n("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var n=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],s=[],c=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?r:t[l].map?s:c).push(t[l]);if(r.length){for(n("if(o.arrays||o.defaults){"),l=0;l<r.length;++l)n("d%s=[]",o.safeProp(r[l].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),l=0;l<s.length;++l)n("d%s={}",o.safeProp(s[l].name));n("}")}if(c.length){for(n("if(o.defaults){"),l=0;l<c.length;++l){var u=c[l],d=o.safeProp(u.name);if(u.resolvedType instanceof i)n("d%s=o.enums===String?%j:%j",d,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var p="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",d,p)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else n("d%s=%j",d,u.typeDefault)}n("}")}var h=!1;for(l=0;l<t.length;++l){u=t[l];var f=e._fieldsArray.indexOf(u);d=o.safeProp(u.name),u.map?(h||(h=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),a(n,u,f,d+"[ks2[j]]")("}")):u.repeated?(n("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),a(n,u,f,d+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",d,u.name),a(n,u,f,d),u.partOf&&n("if(o.oneofs)")("d%s=%j",o.safeProp(u.partOf.name),u.name)),n("}")}return n("return d")}},{14:14,33:33}],12:[function(e,t,n){t.exports=function(e){var t=o.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var a=e._fieldsArray[n].resolve(),c=a.resolvedType instanceof r?"int32":a.type,l="m"+o.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),i.defaults[a.keyType]!==undefined?t("k=%j",i.defaults[a.keyType]):t("k=null"),i.defaults[c]!==undefined?t("value=%j",i.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),i.basic[c]===undefined?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),i.long[a.keyType]!==undefined?t('%s[typeof k==="object"?util.longToHash(k):k]=value',l):t("%s[k]=value",l)):a.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),i.packed[c]!==undefined&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,c)("}else"),i.basic[c]===undefined?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,n):t("%s.push(r.%s())",l,c)):i.basic[c]===undefined?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,n):t("%s=r.%s()",l,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var u=e._fieldsArray[n];u.required&&t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",s(u))}return t("return m")};var r=e(14),i=e(32),o=e(33);function s(e){return"missing required '"+e.name+"'"}},{14:14,32:32,33:33}],13:[function(e,t,n){t.exports=function(e){for(var t,n=o.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(o.compareFieldsById),c=0;c<a.length;++c){var l=a[c].resolve(),u=e._fieldsArray.indexOf(l),d=l.resolvedType instanceof r?"int32":l.type,p=i.basic[d];t="m"+o.safeProp(l.name),l.map?(n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|i.mapKey[l.keyType],l.keyType),p===undefined?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,t):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|p,d,t),n("}")("}")):l.repeated?(n("if(%s!=null&&%s.length){",t,t),l.packed&&i.packed[d]!==undefined?n("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",d,t)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",t),p===undefined?s(n,l,u,t+"[i]"):n("w.uint32(%i).%s(%s[i])",(l.id<<3|p)>>>0,d,t)),n("}")):(l.optional&&n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,l.name),p===undefined?s(n,l,u,t):n("w.uint32(%i).%s(%s)",(l.id<<3|p)>>>0,d,t))}return n("return w")};var r=e(14),i=e(32),o=e(33);function s(e,t,n,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(t.id<<3|2)>>>0)}},{14:14,32:32,33:33}],14:[function(e,t,n){t.exports=s;var r=e(22);((s.prototype=Object.create(r.prototype)).constructor=s).className="Enum";var i=e(21),o=e(33);function s(e,t,n,i,o){if(r.call(this,e,n),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=o||{},this.reserved=undefined,t)for(var s=Object.keys(t),a=0;a<s.length;++a)"number"==typeof t[s[a]]&&(this.valuesById[this.values[s[a]]=t[s[a]]]=s[a])}s.fromJSON=function(e,t){var n=new s(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])},s.prototype.add=function(e,t,n){if(!o.isString(e))throw TypeError("name must be a string");if(!o.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},s.prototype.remove=function(e){if(!o.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},s.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},{21:21,22:22,33:33}],15:[function(e,t,n){t.exports=l;var r=e(22);((l.prototype=Object.create(r.prototype)).constructor=l).className="Field";var i,o=e(14),s=e(32),a=e(33),c=/^required|optional|repeated$/;function l(e,t,n,i,o,l,u){if(a.isObject(i)?(u=o,l=i,i=o=undefined):a.isObject(o)&&(u=l,l=o,o=undefined),r.call(this,e,l),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(n))throw TypeError("type must be a string");if(i!==undefined&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(o!==undefined&&!a.isString(o))throw TypeError("extend must be a string");this.rule=i&&"optional"!==i?i:undefined,this.type=n,this.id=t,this.extend=o||undefined,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&s.long[n]!==undefined,this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=u}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,n)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},l.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=s.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},l.d=function(e,t,n,r){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(i,o){a.decorateType(i.constructor).add(new l(o,e,t,n,{default:r}))}},l._configure=function(e){i=e}},{14:14,22:22,32:32,33:33}],16:[function(e,t,n){var r=t.exports=e(17);r.build="light",r.load=function(e,t,n){return"function"==typeof t?(n=t,t=new r.Root):t||(t=new r.Root),t.load(e,n)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=e(13),r.decoder=e(12),r.verifier=e(36),r.converter=e(11),r.ReflectionObject=e(22),r.Namespace=e(21),r.Root=e(26),r.Enum=e(14),r.Type=e(31),r.Field=e(15),r.OneOf=e(23),r.MapField=e(18),r.Service=e(30),r.Method=e(20),r.Message=e(19),r.wrappers=e(37),r.types=e(32),r.util=e(33),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},{11:11,12:12,13:13,14:14,15:15,17:17,18:18,19:19,20:20,21:21,22:22,23:23,26:26,30:30,31:31,32:32,33:33,36:36,37:37}],17:[function(e,t,n){var r=n;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=e(38),r.BufferWriter=e(39),r.Reader=e(24),r.BufferReader=e(25),r.util=e(35),r.rpc=e(28),r.roots=e(27),r.configure=i,i()},{24:24,25:25,27:27,28:28,35:35,38:38,39:39}],18:[function(e,t,n){t.exports=s;var r=e(15);((s.prototype=Object.create(r.prototype)).constructor=s).className="MapField";var i=e(32),o=e(33);function s(e,t,n,i,s,a){if(r.call(this,e,t,i,undefined,undefined,s,a),!o.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},s.prototype.resolve=function(){if(this.resolved)return this;if(i.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},s.d=function(e,t,n){return"function"==typeof n?n=o.decorateType(n).name:n&&"object"==typeof n&&(n=o.decorateEnum(n).name),function(r,i){o.decorateType(r.constructor).add(new s(i,e,t,n))}}},{15:15,32:32,33:33}],19:[function(e,t,n){t.exports=i;var r=e(35);function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},{35:35}],20:[function(e,t,n){t.exports=o;var r=e(22);((o.prototype=Object.create(r.prototype)).constructor=o).className="Method";var i=e(33);function o(e,t,n,o,s,a,c,l){if(i.isObject(s)?(c=s,s=a=undefined):i.isObject(a)&&(c=a,a=undefined),t!==undefined&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(n))throw TypeError("requestType must be a string");if(!i.isString(o))throw TypeError("responseType must be a string");r.call(this,e,c),this.type=t||"rpc",this.requestType=n,this.requestStream=!!s||undefined,this.responseType=o,this.responseStream=!!a||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l}o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},{22:22,33:33}],21:[function(e,t,n){t.exports=u;var r=e(22);((u.prototype=Object.create(r.prototype)).constructor=u).className="Namespace";var i,o,s,a=e(15),c=e(33);function l(e,t){if(!e||!e.length)return undefined;for(var n={},r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}function u(e,t){r.call(this,e,t),this.nested=undefined,this._nestedArray=null}function d(e){return e._nestedArray=null,e}u.fromJSON=function(e,t){return new u(e,t.options).addJSON(t.nested)},u.arrayToJSON=l,u.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},u.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(u.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),u.prototype.toJSON=function(e){return c.toObject(["options",this.options,"nested",l(this.nestedArray,e)])},u.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),r=0;r<n.length;++r)t=e[n[r]],this.add((t.fields!==undefined?i.fromJSON:t.values!==undefined?s.fromJSON:t.methods!==undefined?o.fromJSON:t.id!==undefined?a.fromJSON:u.fromJSON)(n[r],t));return this},u.prototype.get=function(e){return this.nested&&this.nested[e]||null},u.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},u.prototype.add=function(e){if(!(e instanceof a&&e.extend!==undefined||e instanceof i||e instanceof s||e instanceof o||e instanceof u))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof u&&e instanceof u)||t instanceof i||t instanceof o)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,r=0;r<n.length;++r)e.add(n[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),d(this)},u.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=undefined),e.onRemove(this),d(this)},u.prototype.define=function(e,t){if(c.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var r=e.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof u))throw Error("path conflicts with non-namespace objects")}else n.add(n=new u(r))}return t&&n.addJSON(t),n},u.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof u?e[t++].resolveAll():e[t++].resolve();return this.resolve()},u.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=undefined):t&&!Array.isArray(t)&&(t=[t]),c.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof u&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof u&&(r=this._nestedArray[i].lookup(e,t,!0)))return r;return null===this.parent||n?null:this.parent.lookup(e,t)},u.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},u.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},u.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},u.prototype.lookupService=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},u._configure=function(e,t,n){i=e,o=t,s=n}},{15:15,22:22,33:33}],22:[function(e,t,n){t.exports=o,o.className="ReflectionObject";var r,i=e(33);function o(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},o.prototype.getOption=function(e){return this.options?this.options[e]:undefined},o.prototype.setOption=function(e,t,n){return n&&this.options&&this.options[e]!==undefined||((this.options||(this.options={}))[e]=t),this},o.prototype.setParsedOption=function(e,t,n){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(n){var o=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(o){var s=o[e];i.setProperty(s,n,t)}else(o={})[e]=i.setProperty({},n,t),r.push(o)}else{var a={};a[e]=t,r.push(a)}return this},o.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;++r)this.setOption(n[r],e[n[r]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){r=e}},{33:33}],23:[function(e,t,n){t.exports=s;var r=e(22);((s.prototype=Object.create(r.prototype)).constructor=s).className="OneOf";var i=e(15),o=e(33);function s(e,t,n,i){if(Array.isArray(t)||(n=t,t=undefined),r.call(this,e,n),t!==undefined&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])},s.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},s.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n))}a(this)},s.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},s.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){o.decorateType(t.constructor).add(new s(n,e)),Object.defineProperty(t,n,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}}},{15:15,22:22,33:33}],24:[function(e,t,n){t.exports=c;var r,i=e(35),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):u(e)})(e)}:u};function p(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=d(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},{35:35}],25:[function(e,t,n){t.exports=o;var r=e(24);(o.prototype=Object.create(r.prototype)).constructor=o;var i=e(35);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},{24:24,35:35}],26:[function(e,t,n){t.exports=d;var r=e(21);((d.prototype=Object.create(r.prototype)).constructor=d).className="Root";var i,o,s,a=e(15),c=e(14),l=e(23),u=e(33);function d(e){r.call(this,"",e),this.deferred=[],this.files=[]}function p(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=u.path.resolve,d.prototype.fetch=u.fetch,d.prototype.load=function e(t,n,r){"function"==typeof n&&(r=n,n=undefined);var i=this;if(!r)return u.asPromise(e,i,t,n);var a=r===p;function c(e,t){if(r){var n=r;if(r=null,a)throw e;n(e,t)}}function l(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var n=e.substring(t);if(n in s)return n}return null}function d(e,t){try{if(u.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),u.isString(t)){o.filename=e;var r,s=o(t,i,n),d=0;if(s.imports)for(;d<s.imports.length;++d)(r=l(s.imports[d])||i.resolvePath(e,s.imports[d]))&&h(r);if(s.weakImports)for(d=0;d<s.weakImports.length;++d)(r=l(s.weakImports[d])||i.resolvePath(e,s.weakImports[d]))&&h(r,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||f||c(null,i)}function h(e,t){if(!(i.files.indexOf(e)>-1))if(i.files.push(e),e in s)a?d(e,s[e]):(++f,setTimeout((function(){--f,d(e,s[e])})));else if(a){var n;try{n=u.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}d(e,n)}else++f,i.fetch(e,(function(n,o){--f,r&&(n?t?f||c(null,i):c(n):d(e,o))}))}var f=0;u.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=i.resolvePath("",t[g]))&&h(m);return a?i:(f||c(null,i),undefined)},d.prototype.loadSync=function(e,t){if(!u.isNode)throw Error("not supported");return this.load(e,t,p)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function f(e,t){var n=t.parent.lookup(t.extend);if(n){var r=new a(t.fullName,t.id,t.type,t.rule,undefined,t.options);return r.declaringField=t,t.extensionField=r,n.add(r),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof a)e.extend===undefined||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)h.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof i)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);h.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof a){if(e.extend!==undefined)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)h.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);h.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,n){i=e,o=t,s=n}},{14:14,15:15,21:21,23:23,33:33}],27:[function(e,t,n){t.exports={}},{}],28:[function(e,t,n){n.Service=e(29)},{29:29}],29:[function(e,t,n){t.exports=i;var r=e(35);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,i,o);if(!a.rpcImpl)return setTimeout((function(){s(Error("already ended"))}),0),undefined;try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null===n)return a.end(!0),undefined;if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}))}catch(e){return a.emit("error",e,t),setTimeout((function(){s(e)}),0),undefined}},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{35:35}],30:[function(e,t,n){t.exports=a;var r=e(21);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var i=e(20),o=e(33),s=e(28);function a(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var n=new a(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),o=0;o<r.length;++o)n.add(i.fromJSON(r[o],t.methods[r[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},a.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||undefined,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",n?this.comment:undefined])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,c(this)):r.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return r.prototype.remove.call(this,e)},a.prototype.create=function(e,t,n){for(var r,i=new s.Service(e,t,n),a=0;a<this.methodsArray.length;++a){var c=o.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[c]=o.codegen(["r","c"],o.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return i}},{20:20,21:21,28:28,33:33}],31:[function(e,t,n){t.exports=y;var r=e(21);((y.prototype=Object.create(r.prototype)).constructor=y).className="Type";var i=e(14),o=e(23),s=e(15),a=e(18),c=e(30),l=e(19),u=e(24),d=e(38),p=e(33),h=e(13),f=e(12),m=e(36),g=e(11),v=e(37);function y(e,t){r.call(this,e,t),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function E(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=p.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=p.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=y.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,p.merge(e.prototype,t)),e.$type=e.prototype.$type=this,p.merge(e,l,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:p.oneOfGetter(this._oneofsArray[n].oneof),set:p.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,r)}}}),y.generateConstructor=function(e){for(var t,n=p.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?n("this%s={}",p.safeProp(t.name)):t.repeated&&n("this%s=[]",p.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(e,t){var n=new y(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var l=Object.keys(t.fields),u=0;u<l.length;++u)n.add((void 0!==t.fields[l[u]].keyType?a.fromJSON:s.fromJSON)(l[u],t.fields[l[u]]));if(t.oneofs)for(l=Object.keys(t.oneofs),u=0;u<l.length;++u)n.add(o.fromJSON(l[u],t.oneofs[l[u]]));if(t.nested)for(l=Object.keys(t.nested),u=0;u<l.length;++u){var d=t.nested[l[u]];n.add((d.id!==undefined?s.fromJSON:d.fields!==undefined?y.fromJSON:d.values!==undefined?i.fromJSON:d.methods!==undefined?c.fromJSON:r.fromJSON)(l[u],d))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},y.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return p.toObject(["options",t&&t.options||undefined,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",n?this.comment:undefined])},y.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return r.prototype.resolveAll.call(this)},y.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},y.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof s&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),E(this)}return e instanceof o?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),E(this)):r.prototype.add.call(this,e)},y.prototype.remove=function(e){if(e instanceof s&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),E(this)}if(e instanceof o){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),E(this)}return r.prototype.remove.call(this,e)},y.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},y.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},y.prototype.create=function(e){return new this.ctor(e)},y.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=h(this)({Writer:d,types:t,util:p}),this.decode=f(this)({Reader:u,types:t,util:p}),this.verify=m(this)({types:t,util:p}),this.fromObject=g.fromObject(this)({types:t,util:p}),this.toObject=g.toObject(this)({types:t,util:p});var r=v[e];if(r){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(i),i.toObject=this.toObject,this.toObject=r.toObject.bind(i)}return this},y.prototype.encode=function(e,t){return this.setup().encode(e,t)},y.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},y.prototype.decode=function(e,t){return this.setup().decode(e,t)},y.prototype.decodeDelimited=function(e){return e instanceof u||(e=u.create(e)),this.decode(e,e.uint32())},y.prototype.verify=function(e){return this.setup().verify(e)},y.prototype.fromObject=function(e){return this.setup().fromObject(e)},y.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},y.d=function(e){return function(t){p.decorateType(t,e)}}},{11:11,12:12,13:13,14:14,15:15,18:18,19:19,21:21,23:23,24:24,30:30,33:33,36:36,37:37,38:38}],32:[function(e,t,n){var r=n,i=e(33),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function s(e,t){var n=0,r={};for(t|=0;n<e.length;)r[o[n+t]]=e[n++];return r}r.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),r.long=s([0,0,0,1,1],7),r.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0])},{33:33}],33:[function(e,t,n){var r,i,o=t.exports=e(35),s=e(27);o.codegen=e(3),o.fetch=e(5),o.path=e(8),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),r=0;r<t.length;)n[r]=e[t[r++]];return n}return[]},o.toObject=function(e){for(var t={},n=0;n<e.length;){var r=e[n++],i=e[n++];i!==undefined&&(t[r]=i)}return t};var a=/\\/g,c=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,(function(e,t){return t.toUpperCase()}))},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(t,n){if(t.$type)return n&&t.$type.name!==n&&(o.decorateRoot.remove(t.$type),t.$type.name=n,o.decorateRoot.add(t.$type)),t.$type;r||(r=e(31));var i=new r(n||t.name);return o.decorateRoot.add(i),i.ctor=t,Object.defineProperty(t,"$type",{value:i,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:i,enumerable:!1}),i};var u=0;o.decorateEnum=function(t){if(t.$type)return t.$type;i||(i=e(14));var n=new i("Enum"+u++,t);return o.decorateRoot.add(n),Object.defineProperty(t,"$type",{value:n,enumerable:!1}),n},o.setProperty=function(e,t,n){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,n,r){var i=n.shift();if(n.length>0)t[i]=e(t[i]||{},n,r);else{var o=t[i];o&&(r=[].concat(o).concat(r)),t[i]=r}return t}(e,t=t.split("."),n)},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(e(26)))}})},{14:14,26:26,27:27,3:3,31:31,35:35,5:5,8:8}],34:[function(e,t,n){t.exports=i;var r=e(35);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},{35:35}],35:[function(e,t,n){var r=n;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)e[r[i]]!==undefined&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=e(1),r.base64=e(2),r.EventEmitter=e(4),r.float=e(6),r.inquire=e(7),r.utf8=e(10),r.pool=e(9),r.LongBits=e(34),r.isNode=Boolean(void 0!==global&&global&&global.process&&global.process.versions&&global.process.versions.node),r.global=r.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&this[e[n]]!==undefined&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,34:34,4:4,6:6,7:7,9:9}],36:[function(e,t,n){t.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n={};e.oneofsArray.length&&t("var p={}");for(var r=0;r<e.fieldsArray.length;++r){var c=e._fieldsArray[r].resolve(),l="m"+i.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)t("if(!util.isObject(%s))",l)("return%j",o(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),a(t,c,"k[i]"),s(t,c,r,l+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",l)("return%j",o(c,"array"))("for(var i=0;i<%s.length;++i){",l),s(t,c,r,l+"[i]")("}");else{if(c.partOf){var u=i.safeProp(c.partOf.name);1===n[c.partOf.name]&&t("if(p%s===1)",u)("return%j",c.partOf.name+": multiple values"),n[c.partOf.name]=1,t("p%s=1",u)}s(t,c,r,l)}c.optional&&t("}")}return t("return null")};var r=e(14),i=e(33);function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",i)("default:")("return%j",o(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",o(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",o(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",o(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",o(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",o(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",o(t,"buffer"))}return e}function a(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",o(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",o(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",o(t,"boolean key"))}return e}},{14:14,33:33}],37:[function(e,t,n){var r=n,i=e(19);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),n=this.lookup(t);if(n){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:n.encode(n.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var n="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(r);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var s=e.$type.toObject(e,t);return""===n&&(n="type.googleapis.com/"),r=n+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),s["@type"]=r,s}return this.toObject(e,t)}}},{19:19}],38:[function(e,t,n){t.exports=d;var r,i=e(35),o=i.LongBits,s=i.base64,a=i.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=undefined,this.val=n}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var p=function(){return i.Buffer?function(){return(d.create=function(){return new r})()}:function(){return new d}};function h(e,t,n){t[n]=255&e}function f(e,t){this.len=e,this.next=undefined,this.val=t}function m(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function g(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}d.create=p(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(m,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(m,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(m,t.length(),t)},d.prototype.bool=function(e){return this._push(h,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var v=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(i.isString(e)){var n=d.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(h,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},d._configure=function(e){r=e,d.create=p(),r._configure()}},{35:35}],39:[function(e,t,n){t.exports=o;var r=e(38);(o.prototype=Object.create(r.prototype)).constructor=o;var i=e(35);function o(){r.call(this)}function s(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},{35:35,38:38}]},{})}()}).call(this,__nested_webpack_require_657211__(33),__nested_webpack_require_657211__(60)(module))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function i(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var o={},s={};function a(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=l(e,(0|e)<0?-1:0,!0),i&&(s[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=l(e,e<0?-1:0,!1),i&&(o[e]=n),n)}function c(e,t){if(isNaN(e))return t?y:v;if(t){if(e<0)return y;if(e>=f)return T}else{if(e<=-m)return I;if(e+1>=m)return S}return e<0?c(-e,t).neg():l(e%h|0,e/h|0,t)}function l(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=c,r.fromBits=l;var u=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(e.substring(1),t,n).neg();for(var i=c(u(n,8)),o=v,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),n);if(a<8){var p=c(u(n,a));o=o.mul(p).add(c(l))}else o=(o=o.mul(i)).add(c(l))}return o.unsigned=t,o}function p(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?d(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=p;var h=4294967296,f=h*h,m=f/2,g=a(1<<24),v=a(0);r.ZERO=v;var y=a(0,!0);r.UZERO=y;var E=a(1);r.ONE=E;var _=a(1,!0);r.UONE=_;var b=a(-1);r.NEG_ONE=b;var S=l(-1,2147483647,!1);r.MAX_VALUE=S;var T=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=T;var I=l(0,-2147483648,!1);r.MIN_VALUE=I;var N=r.prototype;N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},N.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(I)){var t=c(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=c(u(e,6),this.unsigned),o=this,s="";;){var a=o.div(i),l=(o.sub(a.mul(i)).toInt()>>>0).toString(e);if((o=a).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},N.isZero=function(){return 0===this.high&&0===this.low},N.eqz=N.isZero,N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||this.high>=0},N.isOdd=function(){return 1==(1&this.low)},N.isEven=function(){return 0==(1&this.low)},N.equals=function(e){return i(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},N.eq=N.equals,N.notEquals=function(e){return!this.eq(e)},N.neq=N.notEquals,N.ne=N.notEquals,N.lessThan=function(e){return this.comp(e)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(e){return this.comp(e)<=0},N.lte=N.lessThanOrEqual,N.le=N.lessThanOrEqual,N.greaterThan=function(e){return this.comp(e)>0},N.gt=N.greaterThan,N.greaterThanOrEqual=function(e){return this.comp(e)>=0},N.gte=N.greaterThanOrEqual,N.ge=N.greaterThanOrEqual,N.compare=function(e){if(i(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(E)},N.neg=N.negate,N.add=function(e){i(e)||(e=p(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,u=0,d=0,h=0,f=0;return h+=(f+=o+(65535&e.low))>>>16,d+=(h+=r+c)>>>16,u+=(d+=n+a)>>>16,u+=t+s,l((h&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},N.subtract=function(e){return i(e)||(e=p(e)),this.add(e.neg())},N.sub=N.subtract,N.multiply=function(e){if(this.isZero())return v;if(i(e)||(e=p(e)),n)return l(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(I))return e.isOdd()?I:v;if(e.eq(I))return this.isOdd()?I:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,a=e.high>>>16,u=65535&e.high,d=e.low>>>16,h=65535&e.low,f=0,m=0,y=0,E=0;return y+=(E+=s*h)>>>16,m+=(y+=o*h)>>>16,y&=65535,m+=(y+=s*d)>>>16,f+=(m+=r*h)>>>16,m&=65535,f+=(m+=o*d)>>>16,m&=65535,f+=(m+=s*u)>>>16,f+=t*h+r*d+o*u+s*a,l((y&=65535)<<16|(E&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},N.mul=N.multiply,N.divide=function(e){if(i(e)||(e=p(e)),e.isZero())throw Error("division by zero");var t,r,o;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:v;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return _;o=y}else{if(this.eq(I))return e.eq(E)||e.eq(b)?I:e.eq(I)?E:(t=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?E:b:(r=this.sub(e.mul(t)),o=t.add(r.div(e)));if(e.eq(I))return this.unsigned?y:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=v}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),a=s<=48?1:u(2,s-48),d=c(t),h=d.mul(e);h.isNegative()||h.gt(r);)h=(d=c(t-=a,this.unsigned)).mul(e);d.isZero()&&(d=E),o=o.add(d),r=r.sub(h)}return o},N.div=N.divide,N.modulo=function(e){return i(e)||(e=p(e)),n?l((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},N.mod=N.modulo,N.rem=N.modulo,N.not=function(){return l(~this.low,~this.high,this.unsigned)},N.and=function(e){return i(e)||(e=p(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},N.or=function(e){return i(e)||(e=p(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},N.xor=function(e){return i(e)||(e=p(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},N.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.shr_u=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},N.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},N.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},N.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e){e.exports=JSON.parse('{"PeerPublishStatus":408,"JoinChannelTimeout":407,"OnUpdateStream":356,"OnRemoveStream":355,"OnAddVideoStream":353,"OnAddAudioStream":352,"FirstAudioDecode":351,"FirstVideoDecode":350,"FirstAudioReceived":349,"FirstVideoReceived":348,"ReqUserAccount":196,"ApiInvoke":41,"RequestProxyWorkerManager":36,"RequestProxyAppCenter":35,"VideoSendingStopped":34,"AudioSendingStopped":33,"StreamSwitch":32,"FirstFrame":31,"Publish":30,"Subscribe":29,"JoinGateway":28,"JoinChooseServer":27,"Session":26,"APWorkerEvent":160,"WorkerEvent":156,"JoinWebProxyAP":700,"WebSocketQuit":671}')},function(e){e.exports=JSON.parse('{"nested":{"protobuf":{"nested":{"Session":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"version":{"type":"string","id":11},"browser":{"type":"string","id":12},"appid":{"type":"string","id":13},"mode":{"type":"string","id":14},"extend":{"type":"string","id":15},"process":{"type":"string","id":16},"build":{"type":"string","id":17},"ipv6":{"type":"string","id":18},"sourceHost":{"type":"string","id":19},"sourcePath":{"type":"string","id":20},"collectorHost":{"type":"string","id":21},"collectorName":{"type":"string","id":22}}},"JoinChooseServer":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"chooseServerAddr":{"type":"string","id":11},"chooseServerAddrList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"chooseServerIp":{"type":"string","id":15}}},"JoinGateway":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"gatewayAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"firstSuccess":{"type":"bool","id":14}}},"Subscribe":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"video":{"type":"bool","id":16},"audio":{"type":"bool","id":17},"subscribeRequestid":{"type":"int32","id":18},"p2pid":{"type":"int32","id":19}}},"Publish":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"videoName":{"type":"string","id":16},"audioName":{"type":"string","id":17},"screenName":{"type":"string","id":18},"video":{"type":"bool","id":19},"audio":{"type":"bool","id":20},"publishRequestid":{"type":"int32","id":21},"p2pid":{"type":"int32","id":22},"screenshare":{"type":"bool","id":23}}},"FirstFrame":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"extend":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"width":{"type":"int64","id":13},"height":{"type":"int64","id":14}}},"StreamSwitch":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"isDual":{"type":"bool","id":11}}},"AudioSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"VideoSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"RequestProxyAppCenter":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"APAddr":{"type":"string","id":11},"workerManagerList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"extend":{"type":"string","id":15},"response":{"type":"string","id":16}}},"RequestProxyWorkerManager":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"workerManagerAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"extend":{"type":"string","id":14},"response":{"type":"string","id":15}}},"ApiInvoke":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"apiName":{"type":"string","id":9},"errorCode":{"type":"string","id":10},"options":{"type":"string","id":11},"execElapse":{"type":"int64","id":12},"execStates":{"type":"string","id":13},"execResult":{"type":"string","id":14},"invokeId":{"type":"int64","id":15}}},"ReqUserAccount":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"serverAddress":{"type":"string","id":10},"stringUid":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"extend":{"type":"string","id":13}}},"FirstVideoReceived":{"fields":{"lts":{"type":"int64","id":1},"peer":{"type":"int64","id":2},"elapse":{"type":"int64","id":3},"sid":{"type":"string","id":4},"cname":{"type":"string","id":5},"cid":{"type":"int64","id":6},"uid":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstAudioReceived":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstVideoDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"videowidth":{"type":"int32","id":9},"videoheight":{"type":"int32","id":10},"subscribeRequestid":{"type":"int32","id":11},"p2pid":{"type":"int32","id":12},"subscribeElapse":{"type":"int64","id":13}}},"FirstAudioDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"OnAddAudioStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnAddVideoStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnRemoveStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnUpdateStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"audio":{"type":"bool","id":8},"video":{"type":"bool","id":9}}},"JoinChannelTimeout":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"timeout":{"type":"int32","id":7}}},"PeerPublishStatus":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"peer":{"type":"int64","id":6},"elapse":{"type":"int64","id":7},"peerPublishDuration":{"type":"int64","id":8},"joinChannelSuccessElapse":{"type":"int64","id":9},"subscribeElapse":{"type":"int64","id":10},"audiotag":{"type":"int32","id":11},"videotag":{"type":"int32","id":12},"screensharetag":{"type":"int32","id":13},"firsttimetag":{"type":"int32","id":14}}},"WebSocketQuit":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"succ":{"type":"int32","id":7},"errorCode":{"type":"string","id":8},"ip":{"type":"string","id":9}}},"Message":{"fields":{"id":{"type":"int64","id":1},"msg":{"type":"bytes","id":2}}},"ProtoRaws":{"fields":{"sendTs":{"type":"int64","id":1},"payloads":{"rule":"repeated","type":"Message","id":2},"vid":{"type":"int32","id":3}}},"APWorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"ec":{"type":"int32","id":10},"sc":{"type":"int32","id":11},"serverIp":{"type":"string","id":12},"firstSuccess":{"type":"bool","id":13},"responseTime":{"type":"int32","id":14},"serviceName":{"type":"string","id":15},"responseDetail":{"type":"string","id":16}}},"WorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"command":{"type":"string","id":10},"actionType":{"type":"string","id":11},"url":{"type":"string","id":12},"payload":{"type":"string","id":13},"serverCode":{"type":"int32","id":14},"code":{"type":"int32","id":15},"traceId":{"type":"string","id":16},"workerType":{"type":"int32","id":17},"responseTime":{"type":"int32","id":18},"requestId":{"type":"int64","id":19},"packIndex":{"type":"int32","id":20},"requestByUser":{"type":"bool","id":21},"tid":{"type":"string","id":22}}},"JoinWebProxyAP":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"sucess":{"type":"int32","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"apServerAddr":{"type":"string","id":10},"turnServerAddrList":{"type":"string","id":11},"errorCode":{"type":"string","id":12}}}}}}}')},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(e,t,n,r){var i=t&&t.prototype instanceof u?t:u,o=Object.create(i.prototype),s=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=E(s,n);if(a){if(a===l)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,s),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=a;var l={};function u(){}function d(){}function p(){}var h={};h[i]=function(){return this};var f=Object.getPrototypeOf,m=f&&f(f(T([])));m&&m!==t&&n.call(m,i)&&(h=m);var g=p.prototype=u.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var r;this._invoke=function(i,o){function s(){return new t((function(r,s){!function r(i,o,s,a){var l=c(e[i],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(l.arg)}(i,o,r,s)}))}return r=r?r.then(s,s):s()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=g.constructor=p,p.constructor=d,p[s]=d.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(y.prototype),y.prototype[o]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new y(a(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},v(g),g[s]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;b(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="object"==typeof window&&window.RTCPeerConnection,i="object"==typeof window&&window.webkitRTCPeerConnection,o="object"==typeof window&&window.mozRTCPeerConnection;t.createRTCPeerConnection=function(e){var t=r||i||o;return t?new t(e):null}},function(e,t,n){var r;!function(t){"use strict";function i(){}var o=i.prototype,s=t.EventEmitter;function a(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}o.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},o.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),i="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===a(r[n],t)&&r[n].push(i?t:{listener:t,once:!1});return this},o.on=c("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=c("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&-1!==(n=a(i[r],t))&&i[r].splice(n,1);return this},o.off=c("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var r,i,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)o.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?o.call(this,r,i):s.call(this,r,i));return this},o.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},o.removeAllListeners=c("removeEvent"),o.emitEvent=function(e,t){var n,r,i,o,s=this.getListenersAsObject(e);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},o.trigger=c("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=s,i},void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof window?window:this||{})},function(e,t,n){var r=n(35);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){(function(t){var r;e.exports=(r=r||function(e,r){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==t&&t.crypto&&(i=t.crypto),!i)try{i=n(74)}catch(e){}var o=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},c=a.lib={},l=c.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=c.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||p).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new u.init(t,e)}}),d=a.enc={},p=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},h=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},f=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},m=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*c,o);if(c){for(var d=0;d<c;d+=s)this._doProcessBlock(i,d);n=i.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(c.Hasher=m.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math),r)}).call(this,n(33))},function(e,t){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(76),c=n(27),l=n(95),u=n(20),d=n(24),p=n(31),h=s(n(0)),f=s(n(37)),m=function(){function e(e){this.retryTimeout=1e4,this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.taskMutex=new l.PromiseMutex("LS"),this.cancelToken=f.default.CancelToken.source(),this.injectConfig=r({},c.DEFAULT_INJECT_CONFIG),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new Map,this.spec=e}return Object.defineProperty(e.prototype,"isNeedReset",{get:function(){for(var e=this,t=0,n=Array.from(this.streamingTasks.values());t<n.length;t++){var r=n[t];if(r.mode===c.LiveStreamingServiceMode.INJECT)return!0;if(r.mode===c.LiveStreamingServiceMode.TRANSCODE&&(this.transcodingConfig&&(this.transcodingConfig.userConfigs||this.transcodingConfig.transcodingUsers)||[]).find((function(t){return t.uid===e.spec.uid})))return!0}return!1},enumerable:!0,configurable:!0}),e.prototype.setTranscodingConfig=function(e){return i(this,void 0,void 0,(function(){var t,n,i,s,a,l=this;return o(this,(function(o){switch(o.label){case 0:(t=r(r({},c.DEFAULT_TRANSCODING_CONFIG),e)).transcodingUsers||(t.transcodingUsers=t.userConfigs),66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(h.default.debug("["+this.spec.clientId+"] set transcoding config, fix video codec profile: "+t.videoCodecProfile+" -> 100"),t.videoCodecProfile=100),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((function(e){return r(r(r({},c.DEFAULT_LIVE_STREAMING_TRANSCODING_USER),e),{zOrder:e.zOrder?e.zOrder+1:1})}))),t.images&&(t.images=t.images.map((function(e){return r(r({},c.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK),e)})));try{c.isLiveStreamingTranscodingConfig(t)}catch(e){throw e}return t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((function(e){return r({},e)})),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers),n=(t.userConfigs||[]).map((function(e){return"number"==typeof e.uid?Promise.resolve(e.uid):u.getUserAccount(l.spec,null,e.uid)})),[4,this.taskMutex.lock()];case 1:return i=o.sent(),[4,Promise.all(n)];case 2:if(o.sent().forEach((function(e,n){t.userConfigs&&t.userConfigs[n]&&(t.userConfigs[n].uid=e&&e.uid||e)})),this.transcodingConfig=t,!this.connection)return i(),[2];o.label=3;case 3:return o.trys.push([3,5,,6]),[4,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(this.streamingTasks.values()).map((function(e){return e.taskId})).join("#")})];case 4:return s=o.sent(),i(),h.default.debug("["+this.spec.clientId+"] update live transcoding config success, code: "+s.code+", config:",JSON.stringify(this.transcodingConfig)),[3,6];case 5:if(a=o.sent(),i(),!a.data||!a.data.retry)throw a;return a.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((function(e){h.default.warning("["+l.spec.clientId+"] live streaming receive error",a.toString(),"try to republish",e.url),l.startLiveStreamingTask(e.url,e.mode,a).then((function(){h.default.debug("["+l.spec.clientId+"] live streaming republish "+e.url+" success")})).catch((function(t){h.default.error("["+l.spec.clientId+"] live streaming republish failed",e.url,t.toString()),l.onLiveStreamError&&l.onLiveStreamError(e.url,t)}))})),[3,6];case 6:return[2]}}))}))},e.prototype.setInjectStreamConfig=function(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t},e.prototype.startLiveStreamingTask=function(e,t,n){return i(this,void 0,void 0,(function(){var i,s,a,l,u,f,m,g,v=this;return o(this,(function(o){switch(o.label){case 0:return Array.from(this.streamingTasks.values()).find((function(e){return e.mode===c.LiveStreamingServiceMode.INJECT}))&&t===c.LiveStreamingServiceMode.INJECT?[2,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw()]:(i={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:30},h.default.debug("["+this.spec.clientId+"] start live streaming "+e+", mode: "+t),[4,this.taskMutex.lock()]);case 1:if(s=o.sent(),!this.transcodingConfig&&t===c.LiveStreamingServiceMode.TRANSCODE)throw s(),new d.AgoraRTCError(d.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");if(!this.connection&&n)return s(),[2];if(this.streamingTasks.get(e)&&!n)return s(),[2,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw()];if(!this.transcodingConfig&&t===c.LiveStreamingServiceMode.TRANSCODE)throw s(),new d.AgoraRTCError(d.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");o.label=2;case 2:return o.trys.push([2,5,,6]),this.connection?[3,4]:(a=this,[4,this.connect(t)]);case 3:a.connection=o.sent(),o.label=4;case 4:return[3,6];case 5:throw l=o.sent(),s(),l;case 6:switch(t){case c.LiveStreamingServiceMode.TRANSCODE:i.transcodingConfig=r({},this.transcodingConfig);break;case c.LiveStreamingServiceMode.RAW:break;case c.LiveStreamingServiceMode.INJECT:i={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(i.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,u=this.lastTaskId++,o.label=7;case 7:return o.trys.push([7,9,,14]),f=new Promise((function(t,r){p.wait(v.retryTimeout).then((function(){if(n)return r(n);var t=v.statusError.get(e);return t?(v.statusError.delete(e),r(t)):void 0}))})),[4,Promise.race([this.connection.request("request",{clientRequest:i},!0,{url:e,command:"PublishStream",workerType:t===c.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!n,tid:u.toString()}),f])];case 8:return m=o.sent(),this.isStartingStreamingTask=!1,h.default.debug("["+this.spec.clientId+"] live streaming started, code: "+m.code),this.streamingTasks.set(e,{clientRequest:i,mode:t,url:e,taskId:u}),s(),[3,14];case 9:if(g=o.sent(),s(),this.isStartingStreamingTask=!1,!g.data||!g.data.retry||n)throw g;return g.data.changeAddress?[3,11]:[4,this.startLiveStreamingTask(e,t,g)];case 10:return[2,o.sent()];case 11:return this.connection.tryNextAddress(),[4,this.startLiveStreamingTask(e,t,g)];case 12:return[2,o.sent()];case 13:return[3,14];case 14:return[2]}}))}))},e.prototype.stopLiveStreamingTask=function(e){var t=this;return new Promise((function(n,r){var i=t.streamingTasks.get(e);if(!i||!t.connection)return new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var o=i.mode;i.abortTask=function(){h.default.debug("["+t.spec.clientId+"] stop live streaming success(worker exception)"),t.streamingTasks.delete(e),n()},h.default.debug("stop live streaming task request: "+JSON.stringify(e)),t.connection.request("request",{clientRequest:{command:o===c.LiveStreamingServiceMode.INJECT?"UninjectStream":"UnpublishStream",url:i.url}},!1,{url:e,command:"UnPublishStream",workerType:o===c.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!0,tid:(t.lastTaskId++).toString()}).then((function(r){h.default.debug("["+t.spec.clientId+"] stop live streaming success, code: "+r.code),t.streamingTasks.delete(e),0===t.streamingTasks.size&&o!==c.LiveStreamingServiceMode.INJECT&&(t.connection.close(),t.connection=void 0),n()})).catch(r)}))},e.prototype.controlInjectStream=function(e,t,n,r){return i(this,void 0,void 0,(function(){var i;return o(this,(function(o){switch(o.label){case 0:if(!(i=this.streamingTasks.get(e))||!this.connection||i.mode!==c.LiveStreamingServiceMode.INJECT)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.INVALID_OPERATION,"can not find inject stream task to control");return[4,this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:n,position:r}})];case 1:return[2,o.sent().serverResponse]}}))}))},e.prototype.resetAllTask=function(){var e=this,t=Array.from(this.streamingTasks.values());this.terminate();for(var n=function(t){r.startLiveStreamingTask(t.url,t.mode).catch((function(n){e.onLiveStreamError&&e.onLiveStreamError(t.url,n)}))},r=this,i=0,o=t;i<o.length;i++)n(o[i])},e.prototype.setGatewayConnectionState=function(e){this.connection&&(this.connection.gatewayConnectionState=e)},e.prototype.terminate=function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=f.default.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0},e.prototype.connect=function(e){return i(this,void 0,void 0,(function(){var t,n=this;return o(this,(function(r){switch(r.label){case 0:if(this.connection)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_ERROR,"live streaming connection has already connected");return[4,p.getLiveStreamingWorkerMangerResult(e,this.spec,this.cancelToken.token)];case 1:return t=r.sent(),this.uapResponse=t,this.connection=new a.AgoraLiveStreamingUapSignal(t.workerToken,this.spec,e),this.connection.on(c.LiveStreamingUapSignalEvents.WARNING,(function(e,t){return n.onLiveStreamWarning&&n.onLiveStreamWarning(t,e)})),this.connection.on(c.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,(function(e){return n.handlePublishStreamServer(e)})),this.connection.on(c.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,(function(e){return n.handleInjectStreamServerStatus(e)})),this.connection.on(c.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS,(function(t,r){if(!n.connection)return r(new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not get new live streaming address list"));p.getLiveStreamingWorkerMangerResult(e,n.spec,n.cancelToken.token).then((function(e){n.uapResponse=e,t(e.addressList)})).catch(r)})),[4,this.connection.init(t.addressList)];case 2:return r.sent(),[2,this.connection]}}))}))},e.prototype.handlePublishStreamServer=function(e){var t=this,n=e.serverStatus&&e.serverStatus.url;if(!n)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"empty url",{code:e.code});var r=this.streamingTasks.get(n);switch(e.code){case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var i=new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(r)return h.default.error(i.toString()),this.onLiveStreamError&&this.onLiveStreamError(n,i);if(!this.isStartingStreamingTask)return;this.statusError.set(n,i);case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(!this.connection||0===this.streamingTasks.size)return;this.connection.tryNextAddress();for(var o=Array.from(this.streamingTasks.values()),s=function(n){if(n.abortTask)return n.abortTask(),"continue";h.default.warning("["+a.spec.clientId+"] publish stream status code",e.code,"try to republish",n.url),a.startLiveStreamingTask(n.url,n.mode,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((function(){h.default.debug("["+t.spec.clientId+"] republish live stream success",n.url)})).catch((function(e){h.default.error(e.toString()),t.onLiveStreamError&&t.onLiveStreamError(n.url,e)}))},a=this,l=0,u=o;l<u.length;l++)s(u[l]);return}},e.prototype.handleInjectStreamServerStatus=function(e){var t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,t,n),void this.streamingTasks.delete(n);default:return void h.default.debug("inject stream server status",e)}},e.prototype.haveUrl=function(e){return this.streamingTasks.has(e)||void 0},e}();t.AgoraRTCLiveStreamingClient=m},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(27),u=n(77),d=n(36),p=n(24),h=n(2),f=c(n(0)),m=n(1),g=n(31),v=function(e){function t(t,n,r){var i=e.call(this)||this;return i._gatewayConnectionState="CONNECTED",i.reconnectMode="retry",i.reqId=0,i.commandReqId=0,i.waitingResponseList=[],i.handleWebSocketOpen=function(){i.reconnectMode="retry",i.startPingPong()},i.handleWebSocketMessage=function(e){if(e.data){var t=JSON.parse(e.data);if(t.requestId)i.emit("@"+t.requestId,t);else if(i.serviceMode===l.LiveStreamingServiceMode.INJECT)i.emit(l.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,t);else{m.report.requestWorkerEvent(i.spec.sid,{actionType:"status",serverCode:t.code,workerType:i.serviceMode===l.LiveStreamingServiceMode.TRANSCODE?1:2});var n=t.serverStatus&&t.serverStatus.url;n&&i.waitingResponseList.includes(n)&&200===t.code&&i.emit(n),i.emit(l.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,t)}}},i.spec=n,i.token=t,i.serviceMode=r,i.websocket=new u.AgoraWebSocketManager("live-streaming"),i.websocket.on(l.WebSocketManagerEvents.CONNECTED,i.handleWebSocketOpen),i.websocket.on(l.WebSocketManagerEvents.ON_MESSAGE,i.handleWebSocketMessage),i.websocket.on(l.WebSocketManagerEvents.REQUEST_NEW_URLS,(function(e,t){d.emitAsPromise(i,l.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS).then(e).catch(t)})),i.websocket.on(l.WebSocketManagerEvents.RECONNECTING,(function(){i.websocket.reconnectMode=i.reconnectMode})),i}return i(t,e),Object.defineProperty(t.prototype,"gatewayConnectionState",{get:function(){return this._gatewayConnectionState},set:function(e){this._gatewayConnectionState=e,"CONNECTED"===e&&this.emit("gateway-connected",e)},enumerable:!0,configurable:!0}),t.prototype.init=function(e){return this.websocket.init(e)},t.prototype.request=function(e,t,n,r){return s(this,void 0,void 0,(function(){var i,s,c,u,d,f,v,y,E,_,b=this;return a(this,(function(a){switch(a.label){case 0:if(this.reqId+=1,i=this.reqId,"request"===e&&(this.commandReqId+=1),s=this.commandReqId,!i||!this.websocket)throw new p.AgoraRTCError(p.AgoraRTCErrorCode.UNEXPECTED_ERROR);if(c=h.VERSION,"closed"===this.websocket.state)throw new p.AgoraRTCError(p.AgoraRTCErrorCode.WS_DISCONNECT);return u=function(){return new Promise((function(e,t){var n=function(){"CONNECTED"===b.gatewayConnectionState&&"connected"===b.websocket.state&&(b.off("gateway-connected",n),b.websocket.off(l.WebSocketManagerEvents.CONNECTED,n),e(void 0))};b.on("gateway-connected",n),b.websocket.once(l.WebSocketManagerEvents.CLOSED,(function(){return t(new p.AgoraRTCError(p.AgoraRTCErrorCode.WS_ABORT))})),b.websocket.on(l.WebSocketManagerEvents.CONNECTED,n)}))},"connected"===this.websocket.state&&"CONNECTED"===this.gatewayConnectionState?[3,2]:[4,u()];case 1:a.sent(),a.label=2;case 2:d=Promise.race([new Promise((function(e,t){var n=function(){t(new p.AgoraRTCError(p.AgoraRTCErrorCode.WS_ABORT))};b.websocket.once(l.WebSocketManagerEvents.RECONNECTING,n),b.websocket.once(l.WebSocketManagerEvents.CLOSED,n),b.once("@"+i,(function(t){e(t)}))})),g.wait(h.getParameter("LIVE_STREAMING_TIMEOUT")).then((function(){return!1}))]),(f=o({command:e,sdkVersion:c,seq:i,requestId:i,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t)).clientRequest&&(f.clientRequest.workerToken=this.token),r&&m.report.requestWorkerEvent(this.spec.sid,o(o({},r),{requestId:s,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0})),v=Date.now(),this.websocket.sendMessage(f),y=null,a.label=3;case 3:return a.trys.push([3,5,,8]),[4,d];case 4:return y=a.sent(),[3,8];case 5:if(E=a.sent(),"closed"===this.websocket.state)throw E;return[4,u()];case 6:return a.sent(),[4,this.request(e,t,n,r)];case 7:return[2,a.sent()];case 8:if(!1===y)throw _=new p.AgoraRTCError(p.AgoraRTCErrorCode.NETWORK_TIMEOUT,(t&&t.clientRequest&&t.clientRequest.command)+" timeout",{changeAddress:!0,retry:!0}),this.emit(l.LiveStreamingUapSignalEvents.WARNING,_,r&&r.url||"unknown url"),r&&m.report.requestWorkerEvent(this.spec.sid,o(o({},r),{requestId:s,actionType:"response",payload:"TIMEOUT",serverCode:0,success:0,responseTime:Date.now()-v})),_;return r&&m.report.requestWorkerEvent(this.spec.sid,o(o({},r),{requestId:s,actionType:"response",payload:JSON.stringify(y.serverResponse),serverCode:y.code,success:200===y.code,responseTime:Date.now()-v})),200===y.code?[3,10]:[4,this.handleResponseError(y)];case 9:a.sent(),a.label=10;case 10:return[2,y]}}))}))},t.prototype.tryNextAddress=function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")},t.prototype.close=function(){var e="__VERSION__"===h.VERSION?"0.0.1":h.VERSION;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)},t.prototype.handleResponseError=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,o=this;return a(this,(function(s){switch(f.default.debug("[live-streaming] receive response error "+e.code),e.code){case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return f.default.warning("live stream response already exists stream"),t=e.serverResponse.url,this.emit(l.LiveStreamingUapSignalEvents.WARNING,"live stream response already exists stream, code 454",t),this.waitingResponseList.includes(t)||this.waitingResponseList.push(t),[2,new Promise((function(n,r){o.once(t,(function(){o.waitingResponseList.splice(o.waitingResponseList.indexOf(t),1),n()})),setTimeout((function(){o.waitingResponseList.splice(o.waitingResponseList.indexOf(t),1),r(new p.AgoraRTCError(p.AgoraRTCErrorCode.TIMEOUT,"live stream timeout waiting 454",{code:e.code}))}),1e4)}))];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_BAD_STREAM:case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return[2,new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw()];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE:throw new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{retry:!0,changeAddress:!0});case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return[2];throw new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return[2,new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw()];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:return n=new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE),[2,this.emit(l.LiveStreamingUapSignalEvents.WARNING,n,e.serverResponse.url)];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:return n=new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FREQUENT_REQUEST),[2,this.emit(l.LiveStreamingUapSignalEvents.WARNING,n,e.serverResponse.url)];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return[2,new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT,"",{code:e.code}).throw()];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:return n=new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT),[2,this.emit(l.LiveStreamingUapSignalEvents.WARNING,n,e.serverResponse.url)];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return[2,new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw()];case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return[2];throw new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case l.LIVE_STREAM_ERROR_CODE.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return[2];if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return[2,new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw()];throw new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return r=e.serverResponse.url,this.waitingResponseList.includes(r)||this.waitingResponseList.push(r),i=new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}),this.emit(l.LiveStreamingUapSignalEvents.WARNING,i,r),[2,new Promise((function(e,t){o.once(r,(function(){o.waitingResponseList.splice(o.waitingResponseList.indexOf(r),1),e()})),setTimeout((function(){o.waitingResponseList.splice(o.waitingResponseList.indexOf(r),1),t(i)}),1e4)}))]}return[2]}))}))},t.prototype.startPingPong=function(){var e=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((function(){"connected"===e.websocket.state&&e.request("ping",{}).catch((function(){}))}),6e3)},t}(d.EventEmitter);t.AgoraLiveStreamingUapSignal=v},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=n(24),l=n(36),u=n(31),d=n(27),p=a(n(0)),h=function(e){function t(t){var n=e.call(this)||this;return n.connectionID=0,n.currentURLIndex=0,n.reconnectMode="tryNext",n._state="closed",n.retryConfig=u.DEFAULT_RETRY_CONFIG,n.reconnectCount=0,n.name=t,n}return i(t,e),Object.defineProperty(t.prototype,"url",{get:function(){return this.websocket?this.websocket.url:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(d.WebSocketManagerEvents.RECONNECTING,this.reconnectMode):"connected"===this._state?this.emit(d.WebSocketManagerEvents.CONNECTED):"closed"===this._state?this.emit(d.WebSocketManagerEvents.CLOSED):"failed"===this._state&&this.emit(d.WebSocketManagerEvents.FAILED))},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t=this;return new Promise((function(n,r){t.urls=e;var i=t.urls[t.currentURLIndex];t.state="connecting",t.createWebSocketConnection(i).then(n).catch(r),t.once(d.WebSocketManagerEvents.CLOSED,(function(){return r(new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_DISCONNECT))})),t.once(d.WebSocketManagerEvents.CONNECTED,(function(){return n()}))}))},t.prototype.close=function(e,t){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var n=this.websocket;t?setTimeout((function(){return n.close()}),500):n.close(),this.websocket=void 0}this.state=e?"failed":"closed"},t.prototype.reconnect=function(e){if(this.websocket){void 0!==e&&(this.reconnectMode=e);var t=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),t&&t.bind(this.websocket)({code:9999})}else p.default.warning("["+this.name+"] can not reconnect, no websocket")},t.prototype.sendMessage=function(e){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_ABORT,"websocket is not ready");var t=JSON.stringify(e);try{this.websocket.send(t)}catch(e){throw new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_ERR,"send websocket message error"+e.toString())}},t.prototype.createWebSocketConnection=function(e){return o(this,void 0,void 0,(function(){var t,n=this;return s(this,(function(r){return this.connectionID+=1,t=this.connectionID,[2,new Promise((function(r,i){n.websocket&&(n.websocket.onclose=null,n.websocket.close()),p.default.debug("["+n.name+"] start connect, url: "+e);try{n.websocket=new WebSocket(e),n.websocket.binaryType="arraybuffer"}catch(e){var a=new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_ERR,"init websocket failed! Error: "+e.toString());return p.default.error("["+n.name+"]"+a),void i(a)}u.wait(5e3).then((function(){t===n.connectionID&&n.websocket&&n.websocket.readyState!==WebSocket.OPEN&&n.websocket&&n.websocket.close()})),n.websocket.onopen=function(){p.default.debug("["+n.name+"] websockect opened:",e),n.reconnectMode="retry",n.state="connected",n.reconnectCount=0,r()},n.websocket.onclose=function(e){return o(n,void 0,void 0,(function(){var t,n;return s(this,(function(o){switch(o.label){case 0:return p.default.debug("["+this.name+"] websocket close "+(this.websocket&&this.websocket.url)+", code: "+e.code+", reason: "+e.reason+", current mode: "+this.reconnectMode),this.reconnectCount<this.retryConfig.maxRetryCount?("connected"===this.state&&(this.state="reconnecting"),t=l.emitAsInvokerNoResponse(this,d.WebSocketManagerEvents.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,[4,this.reconnectWithAction(t)]):[3,2];case 1:return n=o.sent(),"closed"===this.state?(p.default.debug("["+this.connectionID+"] ws is closed, no need to reconnect"),[2]):n?(r(),[3,3]):(i(new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_DISCONNECT,"websocket reconnect failed: "+e.code)),this.close(!0),[2]);case 2:i(new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_DISCONNECT,"websocket close: "+e.code)),this.close(),o.label=3;case 3:return[2]}}))}))},n.websocket.onmessage=function(e){n.emit(d.WebSocketManagerEvents.ON_MESSAGE,e)}}))]}))}))},t.prototype.reconnectWithAction=function(e,t){return o(this,void 0,void 0,(function(){var n,r,i,o;return s(this,(function(s){switch(s.label){case 0:return!t&&this.reconnectCount>=this.retryConfig.maxRetryCount?[2,!1]:this.urls?"closed"===this.state?[2,!1]:(n=u.getRetryWaitTime(this.reconnectCount,this.retryConfig),p.default.debug("["+this.name+"] wait "+n+"ms to reconnect websocket, mode: "+e),[4,u.wait(n)]):[2,!1];case 1:if(s.sent(),"closed"===this.state)return[2,!1];this.reconnectCount+=1,s.label=2;case 2:return s.trys.push([2,12,,14]),"retry"!==e?[3,4]:(i=this.urls[this.currentURLIndex],[4,this.createWebSocketConnection(i)]);case 3:return s.sent(),[3,11];case 4:return"tryNext"!==e?[3,8]:(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length?[4,this.reconnectWithAction("recover")]:[3,6]);case 5:return[2,s.sent()];case 6:return p.default.debug("["+this.name+"] websocket url length: "+this.urls.length+" current index: "+this.currentURLIndex),i=this.urls[this.currentURLIndex],[4,this.createWebSocketConnection(i)];case 7:return s.sent(),[3,11];case 8:return"recover"!==e?[3,11]:(p.default.debug("["+this.name+"] request new urls"),r=this,[4,l.emitAsPromise(this,d.WebSocketManagerEvents.REQUEST_NEW_URLS)]);case 9:return r.urls=s.sent(),this.currentURLIndex=0,i=this.urls[this.currentURLIndex],[4,this.createWebSocketConnection(i)];case 10:s.sent(),s.label=11;case 11:return[2,!0];case 12:return o=s.sent(),p.default.error("["+this.name+"] reconnect failed",o.toString()),[4,this.reconnectWithAction(e)];case 13:return[2,s.sent()];case 14:return[2]}}))}))},t}(l.EventEmitter);t.AgoraWebSocketManager=h},function(e,t,n){"use strict";var r=n(18),i=n(38),o=n(79),s=n(44);function a(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var c=a(n(41));c.Axios=o,c.create=function(e){return a(s(c.defaults,e))},c.Cancel=n(45),c.CancelToken=n(93),c.isCancel=n(40),c.all=function(e){return Promise.all(e)},c.spread=n(94),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var r=n(18),i=n(39),o=n(80),s=n(81),a=n(44);function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,i){return this.request(r.merge(i||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var r=n(18);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(18),i=n(82),o=n(40),s=n(41);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,l=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&h())}function h(){if(!u){var e=a(p);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(43);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(88),i=n(89);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(18),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(18);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(18);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(45);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),o=1,s=function(){function e(e){this.lockingPromise=Promise.resolve(),this.locks=0,this.name="",this.lockId=o++,e&&(this.name=e),i.default.debug("[lock-"+this.name+"-"+this.lockId+"] is created.")}return Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.locks>0},enumerable:!0,configurable:!0}),e.prototype.lock=function(){var e,t=this;this.locks+=1,i.default.debug("[lock-"+this.name+"-"+this.lockId+"] is locked, current queue "+this.locks+".");var n=new Promise((function(n){e=function(){t.locks-=1,i.default.debug("[lock-"+t.name+"-"+t.lockId+"] is not locked, current queue "+t.locks+"."),n()}})),r=this.lockingPromise.then((function(){return e}));return this.lockingPromise=this.lockingPromise.then((function(){return n})),r},e}();t.PromiseMutex=s},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(0),o=n(1),s=n(8),a=n(4),c=function(){};c.prototype.set=function(e,t){["BatteryLevel"].indexOf(e)>-1&&(this[e]=t)};var l=function(){var e=o.report.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket,i=!!t&&!!n&&!!r,s=!1;a.isChrome()&&a.getBrowserVersion()>=58&&"iOS"!==a.getBrowserOS()&&(s=!0),a.isFireFox()&&a.getBrowserVersion()>=56&&(s=!0),a.isOpera()&&a.getBrowserVersion()>=45&&(s=!0),a.isSafari()&&a.getBrowserVersion()>=11&&(s=!0),a.isEdge()&&(s=!0),(a.isWeChatBrowser()||a.isQQBrowser())&&"iOS"!==a.getBrowserOS()&&(s=!0),a.isSupportedPC()||a.isSupportedMobile()||(s=!1);var c=i&&s;return e(null,c),c},u=new function(){var e=Object(s.b)();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.batteryManager=null,e._init=function(t,n){e.state=e.states.INITING,navigator.getBattery?navigator.getBattery().then((function(n){e.batteryManager=n,t&&setTimeout((function(){t()}),0)})).catch((function(e){i.default.debug("navigator.getBattery is disabled",e),t&&t()})):(e.state=e.states.INITED,t&&t())},e._getBatteryStats=function(){var t={};return e.batteryManager&&e.batteryManager.level?t.BatteryLevel=Math.floor(100*e.batteryManager.level):t.BatteryLevel="UNSUPPORTED",t},e.getStats=function(t,n){var r=new c,i=e._getBatteryStats();i&&i.BatteryLevel&&r.set("BatteryLevel",i.BatteryLevel),t&&t(r)},e._init(),e},d=n(22),p=n(19),h=n(26),f=n(53),m=n(9),g=["live","rtc","web","interop","h264_interop","web-only"],v=["vp8","vp9","h264"],y=["aes-128-gcm","aes-256-gcm","aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-256-gcm2","aes-128-gcm2"],E=n(11),_=n.n(E),b=n(7),S=n.n(b),T=n(13),I=n(5),N=n(10),w=n(20),C=n(6),O=n(14),A={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},R={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},M=function(e){var t={remoteStreamStorage:{},localStreamStorage:{}};return t.gatewayClient=e,t.checkAudioOutputLevel=function(e){return!(e&&parseInt(e.audioRecvBytesDelta)>0&&parseInt(e.audioDecodingNormalDelta)>0&&0===parseInt(e.audioOutputLevel))},t.checkAudioIntputLevel=function(e){return!e||0!==parseInt(e.audioInputLevel)},t.checkFramerateInput=function(e,t){if(!e||!t.attributes)return!0;var n=parseInt(t.attributes.maxFrameRate),r=parseInt(e.googFrameRateInput);return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)},t.checkFramerateSent=function(e){return!(e&&parseInt(e.googFrameRateInput)>5&&parseInt(e.googFrameRateSent)<=1)},t.checkSendVideoBitrate=function(e){return!e||0!==parseInt(e.videoSendBytesDelta)},t.checkSendAudioBitrate=function(e){return!e||0!==parseInt(e.audioSendBytesDelta)},t.checkVideoDecode=function(e){return!e||0===parseInt(e.videoRecvBytesDelta)||0!==parseInt(e.googFrameRateDecoded)},t.checkAudioDecode=function(e){return!e||0===parseInt(e.audioRecvBytesDelta)||0!==parseInt(e.audioDecodingNormalDelta)},t.record=function(e,n,r,i,o){r[e]||(r[e]={isPrevNormal:!0,record:[]});var s=r[e],a=t["check"+e](n,o);if(s.record.push(a),s.record.length>=5){s.isCurNormal=-1!==s.record.indexOf(!0);var c=R[e];s.isPrevNormal&&!s.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:c,msg:A[c],uid:i}),!s.isPrevNormal&&s.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:c+2e3,msg:A[c+2e3],uid:i}),s.isPrevNormal=s.isCurNormal,s.record=[]}},t.setLocalStats=function(e){var n={};Object.keys(e).map((function(r){var i=e[r],o=t.gatewayClient.localStreams[parseInt(r)],s=t.localStreamStorage[r]||{};o&&o.hasVideo()&&(t.record("SendVideoBitrate",i.videoStats,s,r),t.record("FramerateInput",i.videoStats,s,r,o),t.record("FramerateSent",i.videoStats,s,r)),o&&o.hasAudio()&&(t.record("AudioIntputLevel",i.audioStats,s,r),t.record("SendAudioBitrate",i.audioStats,s,r)),n[r]=s})),t.localStreamStorage=n},t.setRemoteStats=function(n){var r={};Object.keys(n).map((function(i){var o=n[i],s=e.remoteStreams[i],a=t.remoteStreamStorage[i]||{};s&&s.hasVideo()&&s.isPlaying()&&t.record("VideoDecode",o.videoStats,a,i),s&&s.hasAudio()&&s.isPlaying()&&(t.record("AudioOutputLevel",o.audioStats,a,i),t.record("AudioDecode",o.audioStats,a,i)),r[i]=a})),t.remoteStreamStorage=r},t};function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k,x=n(3),L=new function(){var e=Object(s.b)();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.type=null,e.lastConnectedAt=null,e.lastDisconnectedAt=null,e.lastTypeChangedAt=null,e.networkChangeTimer=null,e._init=function(t,n){if(e.state=e.states.INITING,navigator.connection&&navigator.connection.addEventListener){var r=e._getNetworkInfo();e.type=r&&r.type,e.state=e.states.INITED,t&&t()}else e.state=e.states.UNINIT,n&&n("DO_NOT_SUPPORT")},e._getNetworkInfo=function(){return navigator.connection},e._reloadNetworkInfo=function(){var t=e._getNetworkInfo(),n=t&&t.type||"UNSUPPORTED",r=Date.now();if(n!==e.type){e.lastTypeChangedAt=r,"none"==n?e.lastDisconnectedAt=r:"none"==e.type&&(e.lastConnectedAt=r),e.type=n;var i={type:"networkTypeChanged",networkType:n};e.dispatchEvent(i)}},e.getStats=function(t,n){var r={},i=e._getNetworkInfo();i&&(r.NetworkType=i.type||"UNSUPPORTED"),setTimeout((function(){t(r)}),0)},e._init((function(){navigator.connection.addEventListener("change",(function(){e._reloadNetworkInfo()})),e.networkChangeTimer=setInterval((function(){e._reloadNetworkInfo()}),5e3)}),(function(e){})),e},P=n(55),j=n(16),U=n(56),F=n.n(U),z=n(21),B=function(){return void 0!==window.isSecureContext},V="host",H=function(e){var t={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null,turnServers:[],useProxyServer:!1,useLocalAccessPoint:!1};if(t.mode=e.mode,t.codec=e.codec,t.clientId=Object(N.generateSessionId)().slice(0,5),t.uintUid=null,t.customReportCount=0,e=S()({},e),t.aespassword=null,t.aesmode="none",t.hasPublished=!1,t.getSessionId=function(){return e.sessionId},t.startChannelMediaRelay=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return r&&r(e);r&&r()},name:"Client.startChannelMediaRelay",options:arguments,tag:"tracer"});if(!(n instanceof m.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var s=n.getSrcChannelMediaInfo(),a=n.getDestChannelMediaInfos();if(Object(x.isEmpty)(s))throw"srcChannelMediaInfo should not be empty";if(Object(x.isEmpty)(a)||0===a.length)throw"destChannelMediaInfos should not be empty";if(!Object(N.is32Uint)(s.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(x.isValidChannelName)(s.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(s.token&&!Object(x.isValidToken)(s.token))throw"Invalid token in srcChannelMediaInfo";if(a.forEach((function(e){if(!Object(N.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(x.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(x.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"})),t.gatewayClient.state!==T.a.CONNECTED)throw"startChannelMediaRelay should be used after join";t.gatewayClient.startChannelMediaRelay(n).then((function(){i&&i()})).catch((function(e){i&&i(e)}))},t.updateChannelMediaRelay=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return r&&r(e);r&&r()},name:"Client.updateChannelMediaRelay",options:arguments,tag:"tracer"});if(!(n instanceof m.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var s=n.getSrcChannelMediaInfo(),a=n.getDestChannelMediaInfos();if(Object(x.isEmpty)(s))throw"srcChannelMediaInfo should not be empty";if(Object(x.isEmpty)(a)||0===a.length)throw"destChannelMediaInfos should not be empty";if(!Object(N.is32Uint)(s.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(x.isValidChannelName)(s.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(s.token&&!Object(x.isValidToken)(s.token))throw"Invalid token in srcChannelMediaInfo";if(a.forEach((function(e){if(!Object(N.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(x.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(x.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"})),t.gatewayClient.state!==T.a.CONNECTED)throw"updateChannelMediaRelay should be used after join";t.gatewayClient.updateChannelMediaRelay(n).then((function(){i&&i()})).catch((function(e){i&&i(e)}))},t.stopChannelMediaRelay=function(n){var r=o.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return n&&n(e);n&&n()},name:"Client.stopChannelMediaRelay",options:arguments,tag:"tracer"});t.gatewayClient.stopChannelMediaRelay().then((function(){r&&r()})).catch((function(e){r&&r(e)}))},t.getConnectionState=function(){var n=o.report.reportApiInvoke(e.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),r=T.a.connetionStateMap[t.gatewayClient.state];return n(),r},t.setClientRole=function(n,r){var s=o.report.reportApiInvoke(e.sessionId,{callback:r,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(Object(x.checkValidEnum)(n,"setClientRole",[V,"audience"]),"rtc"===t.mode){var a="RTC mode can not use setClientRole";return i.default.warning("[".concat(t.clientId,"] ").concat(a)),s&&s(a)}t.gatewayClient&&t.gatewayClient.state===T.a.CONNECTED?("audience"===n&&(0===this.highStreamState?this._unpublish(this.highStream,(function(){s&&s(null,{role:n})}),(function(e){s&&s(e)})):t.gatewayClient.setClientRole("audience",s)),n===V&&t.gatewayClient.setClientRole(V,s)):(t.gatewayClient.role=n,s&&s(null,{role:n}))},t.getGatewayInfo=function(e){if(t.gatewayClient.state!==T.a.CONNECTED){var n="Client is not in connected state";return i.default.error("[".concat(t.clientId,"] ").concat(n)),void e(n)}t.gatewayClient.getGatewayInfo((function(t){e(null,t)}),e)},t.renewToken=function(n,r,s){var a=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i.default.error("Failed to renew token ".concat(e),t),s&&s(e);r&&r(t)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!Object(x.isValidToken)(n))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return t.gatewayClient?t.key?(t.key=n,void t.gatewayClient.renewToken(n,(function(e){return a(null,e)}),a)):(i.default.error("[".concat(t.clientId,"] renewToken should not be called before user join")),a(I.default.INVALID_OPERATION)):(i.default.error("[".concat(t.clientId,"] renewToken Failed. GatewayClient not Exist")),a(I.default.INVALID_OPERATION))},t.setLowStreamParameter=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});Object(x.checkValidObject)(n,"param");var s=n.width,a=n.height,c=n.framerate,l=n.bitrate;Object(x.isEmpty)(s)||Object(x.checkValidNumber)(s,"width"),Object(x.isEmpty)(a)||Object(x.checkValidNumber)(a,"height"),Object(x.isEmpty)(c)||Object(x.checkValidNumber)(c,"framerate"),Object(x.isEmpty)(l)||Object(x.checkValidNumber)(l,"bitrate",1,1e7),(!s&&a||s&&!a)&&i.default.warning("[".concat(t.clientId,"] The width and height parameters take effect only when both are set")),t.lowStreamParameter=n,r()},t.init=function(t,n,r){var i=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Client.init",options:arguments,tag:"tracer"});Object(x.checkValidString)(t),Object(a.isChromeKernel)()&&Object(a.getChromeKernelVersion)()<=48?r?i(I.default.BAD_ENVIRONMENT):Object(N.popBanTip)():(e.appId=t,e.sessionId=Object(N.generateSessionId)(),i())},t.setTurnServer=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==T.a.DISCONNECTED)throw new Error("Set turn server before join channel");if(t.useProxyServer)throw new Error("You have already set the proxy");if(t.useLocalAccessPoint)throw new Error("You have already set the local proxy");n instanceof Array||(n=[n]);var s=[];n.map((function(e,n){Object(x.checkValidObject)(e,"turnServer");var r=e.turnServerURL,o=e.username,a=e.password,c=e.udpport,l=e.forceturn,u=e.tcpport;if(Object(x.checkValidString)(r,"turnServerURL"),Object(x.checkValidString)(o,"username"),Object(x.checkValidString)(a,"password"),Object(x.checkValidString)(c,"udpport"),0===parseInt(c))throw new Error("udpport should not be ".concat(c));Object(x.isEmpty)(l)||Object(x.checkValidBoolean)(l,"forceturn");var d={mode:"manual"};if(d.url=r,d.udpport=c,d.username=o,d.credential=a,d.forceturn=l||!1,!Object(x.isEmpty)(u)){if(Object(x.checkValidString)(u,"tcpport"),0===parseInt(u))throw new Error("tcpport should not be ".concat(u));d.tcpport=u,i.default.info("[".concat(t.clientId,"] Set turnserver[").concat(n,"] tcpurl. ").concat(d.url,":").concat(d.tcpport))}i.default.info("[".concat(t.clientId,"] Set turnserver[").concat(n,"] udpurl. ").concat(d.url,":").concat(d.udpport,",username: ").concat(d.username)),s.push(d)})),t.turnServers=s,r()},t.setProxyServer=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==T.a.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!n)throw new Error("Do not set the proxyServer parameter as empty");if(t.useProxyServer)throw new Error("You have already set the proxy");if(t.useLocalAccessPoint)throw new Error("You have already set the local proxy");Object(x.checkValidString)(n,"proxyServer"),t.proxyServer=n,o.report.setProxyServer(n),i.default.setProxyServer(n),r()},t.startProxyServer=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==T.a.DISCONNECTED)throw new Error("Start proxy server before join channel");if(t.proxyServer)throw new Error("You have already set the proxy");if(t.useLocalAccessPoint)throw new Error("You have already set the local proxy");t.useProxyServer=!0,t.proxyServerType=n||1,r()},t.stopProxyServer=function(){var n=o.report.reportApiInvoke(e.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==T.a.DISCONNECTED)throw new Error("Stop proxy server after leave channel");o.report.setProxyServer(),i.default.setProxyServer(),t.turnServers=[],t.proxyServer=null,t.useProxyServer=!1,t.proxyServerType=null,n()},t.setEncryptionSecret=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});Object(x.checkValidString)(n,"password"),new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(n)||i.default.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer,\n      "),t.aespassword=n,r()},t.setEncryptionMode=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(Object(x.checkValidString)(n,"encryptionMode"),-1===y.indexOf(n))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb" | "sm4-128-ecb" | "aes-128-gcm" | "aes-256-gcm" | "aes-128-gcm2" | "aes-256-gcm2"');if(-1!==["aes-128-gcm2","aes-256-gcm2"].indexOf(n)){if(!r||!(r instanceof Uint8Array&&32===r.length))throw Error("salt must be an Uint8Array and exactly equal to 32 bytes")}else if(r)throw new Error("Only ".concat("aes-128-gcm2"," and ").concat("aes-256-gcm2"," support use salt"));r&&(t.aesSalt=Object(N.uint8ArrayToBase64)(r)),t.aesmode=n,i()},t.configPublisher=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});Object(x.checkValidObject)(n,"config");var i=n.width,s=n.height,a=n.framerate,c=n.bitrate,l=n.publisherUrl;Object(x.checkValidNumber)(i,"width"),Object(x.checkValidNumber)(s,"height"),Object(x.checkValidNumber)(a,"framerate"),Object(x.checkValidNumber)(c,"bitrate",1,1e7),l&&Object(x.checkValidString)(l,"publisherUrl"),t.gatewayClient.configPublisher(n),r()},t.enableDualStream=function(n,r){var s=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(a.getBrowserOS)()?(o.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),s(I.default.IOS_NOT_SUPPORT)):Object(a.isWeChatBrowser)()?(o.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),s(I.default.WECHAT_NOT_SUPPORT)):(o.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),t.isDualStream=!0,t.highStream&&(t.highStream.isDualStream=!0),void(0===t.highStreamState?t._publishLowStream((function(e){return s(null,e)}),(function(e){i.default.warning("[".concat(t.clientId,"]"),e),s(I.default.ENABLE_DUALSTREAM_FAILED)})):1===t.highStreamState?s(I.default.STILL_ON_PUBLISHING):s(null)))},t.disableDualStream=function(n,r){var s=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});o.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),t.isDualStream=!1,t.highStream&&(t.highStream.isDualStream=!1),0===t.highStreamState?t._unpublishLowStream((function(){t.highStream.lowStream=null,s()}),(function(e){i.default.warning("[".concat(t.clientId,"]"),e),s(I.default.DISABLE_DUALSTREAM_FAILED)})):1===t.highStreamState?s(I.default.STILL_ON_PUBLISHING):s()},t._getLowStream=function(e,n){t.lowStream?e(t.lowStream):t._createLowStream((function(n){t.lowStream=n,e(t.lowStream)}),n)},t._createLowStream=function(e,n){if(t.highStream&&t.highStream.stream){var r=S()({},t.highStream.params);if(r.streamID+=1,r.audio=!1,r.video)if(t.highStream.stream.getVideoTracks()[0]){var i=new d.a(r);i.isLowStream=!0,i.streamId=t.highStream.getId()+1;var o={};t.lowStreamParameter&&(o=S()({},t.lowStreamParameter)),o.width&&o.height||(o.width=160,o.height=120),o.framerate=o.framerate||15,o.bitrate=o.bitrate||50,i.setVideoProfileCustomPlus(o);try{var s=F()(t.highStream,{width:i.videoConstraint.width.ideal,height:i.videoConstraint.height.ideal,framerate:i.videoConstraint.frameRate});return i.stream=s,t.highStream.lowStream=i,t.highStream.userMuteVideo&&i.muteVideo(),e&&e(i)}catch(e){return n&&n(e)}}else n&&n(I.default.HIGH_STREAM_NOT_VIDEO_TRACE);else n&&n(I.default.HIGH_STREAM_NOT_VIDEO_TRACE)}else n&&n(I.default.HIGH_STREAM_NOT_VIDEO_TRACE)},t._publishLowStream=function(e,n){return 2!==t.lowStreamState?n&&n(I.default.LOW_STREAM_ALREADY_PUBLISHED):t.highStream&&t.highStream.hasScreen()?n&&n(I.default.SHARING_SCREEN_NOT_SUPPORT):void t._getLowStream((function(r){t.lowStreamState=1,t.gatewayClient.publish(r,{streamType:1},(function(){t.lowStreamState=0,e&&e()}),(function(e){1===t.lowStreamState&&(t.lowStreamState=2),i.default.debug("[".concat(t.clientId,"] publish low stream failed")),n&&n(e)}))}),n)},t._unpublishLowStream=function(e,n){if(0!==t.lowStreamState)return n&&n(I.default.LOW_STREAM_NOT_YET_PUBLISHED);t.lowStream&&(t.gatewayClient.unpublish(t.lowStream,{streamType:1},(function(){}),(function(e){i.default.debug("[".concat(t.clientId,"] unpublish low stream failed")),n&&n(e)})),t.lowStream.close(),t.lowStream=null,t.lowStreamState=2,e&&e())},t.join=function(n,r,s,c,u,d){c&&"function"==typeof c&&(d=u,u=c,c=null);var p=l(),h=Object(a.getBrowserInfo)();i.default.debug(h,",Support: "+p);var f="HTTPS"===(k||k||(k=(window.location.protocol.split(":")[0]||"").toUpperCase())),m=B()?window.isSecureContext:"Browser Not Support",g=function(){i.default.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser")};B()?window.isSecureContext||g():f||g();var v=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return d&&d(e);u&&u(t)},name:"Client.join",options:arguments,getStates:function(){return{isHttps:f,isSecureContext:m}},tag:"tracer"});if(n&&!Object(x.isValidToken)(n))return i.default.warning("[".concat(t.clientId,"] Param channelKey should be string")),v(I.default.INVALID_PARAMETER);if(!Object(x.isValidChannelName)(r))return i.default.error("Invalid Channel Name ".concat(r)),i.default.warning("[".concat(t.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),v(I.default.INVALID_PARAMETER);if("string"==typeof r&&""===r)return i.default.warning("[".concat(t.clientId,"] Param channel should not be empty")),v(I.default.INVALID_PARAMETER);if(c&&!Object(x.isValidString)(c))return i.default.warning("[".concat(t.clientId,"] optionalInfo should be string")),v(I.default.INVALID_PARAMETER);if(s&&!Object(N.is32Uint)(s)&&!Object(x.isValidString)(s,1,255))return i.default.error("Invalid UID ".concat(s," ").concat(_()(s))),i.default.warning("[".concat(t.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is 32Uint")),v(I.default.INVALID_PARAMETER);if("string"==typeof s&&0==s.length)return i.default.warning("[".concat(t.clientId,"] String uid should not be empty")),v(I.default.INVALID_PARAMETER);if("string"==typeof s&&s.length>256)return i.default.warning("[".concat(t.clientId,"] Length of string uid should be less than 255")),v(I.default.INVALID_PARAMETER);i.default.stopWaitJoin(),t.highStream=null,t.lowStream=null,t.lowStreamParameter=null,t.isDualStream=!1,t.highStreamState=2,t.lowStreamState=2;var y=Date.now(),E=setTimeout((function(){if(1!=t.gatewayClient.hasJoined){i.default.debug("[".concat(t.clientId,"] The time to join the channel is greater than 5 seconds "));var n=Date.now();o.report.joinChannelTimeOut({lts:n,sid:e.sessionId,cname:r,cid:b&&b.cid,uid:b.uid||("string"==typeof s?void 0:s),elapse:n-y,timeout:5})}}),5e3),b={clientId:t.clientId,appId:e.appId,sid:e.sessionId,cname:r,uid:s,turnServers:t.turnServers.concat(),proxyServer:t.proxyServer,token:n||e.appId,useProxyServer:t.useProxyServer,useLocalAccessPoint:t.useLocalAccessPoint,proxyServerType:t.proxyServerType,optionalInfo:c};if("string"==typeof s&&(b.stringUid=s,t.uintUid?(b.uid=t.uintUid,delete t.uintUid):b.uid=0),t.aespassword&&"none"!==t.aesmode&&S()(b,{aespassword:t.aespassword,aesmode:t.aesmode}),t.aesSalt&&(b.aes_salt=t.aesSalt),o.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),cname:r,appid:e.appId,mode:e.mode,succ:!0}),t.onSuccess=function(e){clearTimeout(E),t.rtcStatsCollector.startNetworkQualityTimer(),t.onSuccess=null,v(null,e)},t.onFailure=function(e){return v(e)},t.channel=r,t.gatewayClient.state!==T.a.DISCONNECTED)return i.default.error("[".concat(t.clientId,"] Client already in connecting/connected state")),v(I.default.INVALID_OPERATION),void o.report.joinGateway(e.sessionId,{lts:Date.now(),succ:!1,ec:I.default.INVALID_OPERATION,addr:null});t.gatewayClient.state=T.a.CONNECTING;var C=function(o,s){i.default.info("[".concat(t.clientId,"] Joining channel: ").concat(r)),t.gatewayClient.dispatchEvent({type:"config-distribute",config:s,joinInfo:b}),t.key=n||e.appId,b.cid=o.cid,b.uid||(b.uid=o.uid),b.vid=o.vid,b.clientId=t.clientId,b.apResponse=o.res,o.uni_lbs_ip&&o.uni_lbs_ip[1]&&(b.uni_lbs_ip=o.uni_lbs_ip[1]),b.gatewayAddr=o.gateway_addr,t.joinInfo=b,t.gatewayClient.join(b,t.key,(function(e){i.default.info("[".concat(t.clientId,"] Join channel ").concat(r," success, join with uid: ").concat(e,".")),t.onSuccess=null,t.rtcStatsCollector.startNetworkQualityTimer(),v(null,e)}),(function(e){return v(e)}))};b.stringUid&&!b.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=Object(w.getUserAccount)(b,t.gatewayClient),t.userAccountReq.then((function(e){i.default.debug("getUserAccount Success ".concat(e.url," ").concat(b.stringUid," => ").concat(e.uid)),b.uid=e.uid,Object(w.getGatewayList)(b,C,(function(e){return v(e)}))})).catch((function(e){i.default.error("getUserAccount rejected",e),v(e)}))):Object(w.getGatewayList)(b,C,(function(e){return v(e)}))},t.renewChannelKey=function(n,r,s){var a=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return s&&s(e);r&&r(t)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});Object(x.checkValidString)(n,"key",1,2047),void 0===t.key?(i.default.error("[".concat(t.clientId,"] renewChannelKey should not be called before user join")),a(I.default.INVALID_OPERATION)):(t.key=n,t.gatewayClient.joinInfo.token=n,t.gatewayClient.key=n,t.gatewayClient.recover(),a())},t.leave=function(n,s){t.gatewayClient.isFirstSuccess=!0,t.gatewayClient.hasInvokeLeave=!0;var a=!1,c=o.report.reportApiInvoke(e.sessionId,{callback:function(e,r){if(e)return s&&s(e);t.gatewayClient.reconnectingCS=!1,t.gatewayClient.state=T.a.DISCONNECTED,clearTimeout(Object(w._getReconnectCSTimer)(t.clientId)),t._renewSession(),t.rtcStatsCollector.clearNetworkQualityTimer(),n&&n(r)},name:"Client.leave",options:arguments,tag:"tracer"});i.default.info("[".concat(t.clientId,"] Leaving channel")),t.userAccountReq&&!t.userAccountReq.isFinished()&&(t.userAccountReq.cancel(),t.gatewayClient.state===T.a.CONNECTING&&(t.gatewayClient.state=T.a.DISCONNECTED)),t._terminateLiveStreaming(),t.gatewayClient.leave((function(e){a=!0,c(null,e)}),c),setTimeout((function(){a||(t.gatewayClient.socket&&(t.gatewayClient.socket.close(),t.gatewayClient.socket=null),t.gatewayClient.state=T.a.DISCONNECTED,c(null,"LEAVE_MSG_TIMEOUT"))}),Object(r.getParameter)("LEAVE_MSG_TIMEOUT"))},t._renewSession=function(){var n=Object(N.generateSessionId)();if(i.default.debug("renewSession ".concat(e.sessionId," => ").concat(n)),e.sessionId=n,t.gatewayClient.peerPublishDurationMap.clear(),t.joinInfo&&(t.joinInfo.sid=n),t.gatewayClient&&(t.gatewayClient.joinInfo&&(t.gatewayClient.joinInfo.sid=n),t.gatewayClient.localStreams))for(var r in t.gatewayClient.localStreams){var o=t.gatewayClient.localStreams[r];o&&(o.sid=n)}},t._publish=function(n,o,s,a){if(2!==t.highStreamState)return i.default.warning("[".concat(t.clientId,"] Can't publish stream when stream already publish ").concat(n.getId())),s&&s(I.default.STREAM_ALREADY_PUBLISHED);if(0===t.turnServers.length&&Object(r.getParameter)("FORCE_TURN")&&!Object(r.getParameter)("TURN_ENABLE_TCP")&&!Object(r.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");i.default.info("[".concat(t.clientId,"] Publishing stream, uid ").concat(n.getId())),t.highStream=n,t.highStreamState=1,t.highStream.streamId=t.joinInfo.stringUid||t.joinInfo.uid,t.hasPublished=!1;var c=function(n,r,o){t.gatewayClient.publish(n,{streamType:0},(function(){n.sid=e.sessionId,t.highStreamState=0,i.default.info("[".concat(t.clientId,"] Publish success, uid: ").concat(n.getId())),t.highStream&&(t.highStream.isDualStream=t.isDualStream),t.isDualStream?t._publishLowStream((function(){r&&r()}),(function(e){i.default.warning("[".concat(t.clientId,"] "),e),j.a.replaceWithCanvasTrack(n).then((function(){r&&r()}))})):j.a.replaceWithCanvasTrack(n).then((function(){r&&r()}))}),o)};"audience"!==t.gatewayClient.role||"live"!==t.mode||a?c(n,o,s):t.gatewayClient.setClientRole(V,(function(e){if(e)return s&&s(e);c(n,o,s)}))},t._unpublish=function(e,n,r,o){if(0!==t.highStreamState)return i.default.warning("[".concat(t.clientId,"] Can't unpublish stream when stream not publish")),r&&r(I.default.STREAM_NOT_YET_PUBLISHED);i.default.info("[".concat(t.clientId,"] Unpublish stream, uid ").concat(e.getId()));var s=function(e,n,r){t.isDualStream&&t.lowStream&&t._unpublishLowStream(null,r),t.gatewayClient.unpublish(e,{streamType:0},(function(){t.highStreamState=2,i.default.info("[".concat(t.clientId,"] Unpublish stream success, uid: ").concat(e.getId())),t.gatewayClient.dispatchEvent({type:"stream-unpublished",stream:e}),n&&n()}),(function(n){i.default.info("[".concat(t.clientId,"] Unpublish stream fail, uid: ").concat(e.getId())),r&&r(n)}))};t.gatewayClient.role!==V||"live"!==t.mode||o?s(e,n,r):t.gatewayClient.setClientRole("audience",(function(t){if(t)return r&&r(t);s(e,n,r)}))},t.publish=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{callback:function(e,n){if(e)return 1===t.highStreamState&&"REQUEST_ABORT"!==e&&(t.highStreamState=2),r&&r(e)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!r}});2===t.highStreamState?n._hasVideoTracks()||n._hasAudioTracks()?(t.gatewayClient.publishRequestId=Object(N.generateId)(),t._publish(n,(function(e){return i(null,e)}),(function(e){return i(e)}))):i(I.default.NO_TRACK_IN_STREAM):i(I.default.STREAM_ALREADY_PUBLISHED)},t.unpublish=function(n,r,i){var s=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);i&&i(t)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!r}});0===t.highStreamState?(t.gatewayClient.publishRequestId=null,t._unpublish(n,(function(e){return s(null,e)}),(function(e){return s(e)}))):s(I.default.STREAM_NOT_YET_PUBLISHED)},t.subscribe=function(n,r,s){var c=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return s&&s(e)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:r,onFailure:!!s}});"function"==typeof r&&(s=r,r=null),Object(x.checkValidObject)(n,"stream"),Object(x.isEmpty)(r)||(Object(x.checkValidObject)(r,"options"),Object(x.isEmpty)(r.video)||Object(x.checkValidBoolean)(r.video,"options.video"),Object(x.isEmpty)(r.audio)||Object(x.checkValidBoolean)(r.audio,"options.audio"));var l={video:!0,audio:!0};if(!Object(x.isEmpty)(r)){if(Object(a.isSafari)()&&(!r.video||!r.audio)){var u="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return i.default.error("[".concat(t.clientId,"] "),u),void c(u)}if(!Object(x.isEmpty)(r.video)&&!Object(x.isValidBoolean)(r.video)||!Object(x.isEmpty)(r.audio)&&!Object(x.isValidBoolean)(r.audio)||!1===r.audio&&!1===r.video)return u="INVALID_PARAMETER ".concat(JSON.stringify(r)),i.default.error("[".concat(t.clientId,"] "),u),void c(u)}n.subscribeOptions?(S()(n.subscribeOptions,l,r),t.gatewayClient.subscribeChange(n,(function(e){return c(null,e)}),c)):(t.gatewayClient.subscribeRequestId.set(n.getId(),Object(N.generateId)()),n.subscribeOptions=S()({},l,r),t.gatewayClient.subscribe(n,(function(e){return c(null,e)}),c))},t.unsubscribe=function(n,r){var s=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!r}});i.default.info("[".concat(t.clientId,"] Unsubscribe stream, uid: ").concat(n.getId())),t.gatewayClient.subscribeRequestId.delete(n.getId()),t.gatewayClient.unsubscribe(n,(function(e){return s(null,e)}),s)},t.setRemoteVideoStreamType=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:r}});Object(x.checkValidEnum)(r,"streamType",[0,1]),t.gatewayClient.setRemoteVideoStreamType(n,r),i()},t.setStreamFallbackOption=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:r}});Object(x.checkValidEnum)(r,"fallbackType",[0,1,2]),t.gatewayClient.setStreamFallbackOption(n,r),i()},t.enableAudioVolumeIndicator=function(n,r){var s=o.report.reportApiInvoke(e.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});n=n||2e3,r=r||3,Object(x.checkValidNumber)(r,"smooth",1,100),Object(x.checkValidNumber)(n,"interval",50,1e5),t.audioVolumeIndication=t.audioVolumeIndication||{enabled:!0},t.audioVolumeIndication.interval=n,t.audioVolumeIndication.smooth=r,t.audioVolumeIndication={interval:n,smooth:r},i.default.info("[".concat(t.clientId,"] enableAudioVolumeIndicator interval ").concat(n," smooth ").concat(r)),t.gatewayClient.enableAudioVolumeIndicator(n,r),s()},t.getNetworkStats=function(e,n){return i.default.deprecate("[".concat(t.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),L.getStats(e,n)},t.getSystemStats=function(e,t){return u.getStats(e,t)},t.getRecordingDevices=function(e,t){return p.a.getRecordingDevices(e,t)},t.getPlayoutDevices=function(e,t){return p.a.getPlayoutDevices(e,t)},t.getCameras=function(e,t){return p.a.getCameras(e,t)},t.getRemoteAudioStats=function(e,n){return t.rtcStatsCollector.getRemoteAudioStats(e,n)},t.getLocalAudioStats=function(e,n){return t.rtcStatsCollector.getLocalAudioStats(e,n)},t.getRemoteVideoStats=function(e,n){return t.rtcStatsCollector.getRemoteVideoStats(e,n)},t.getLocalVideoStats=function(e,n){return t.rtcStatsCollector.getLocalVideoStats(e,n)},t._getRemoteVideoQualityStats=function(e,n){return t.rtcStatsCollector.getRemoteVideoQualityStats(e,n)},t._getRemoteAudioQualityStats=function(e,n){return t.rtcStatsCollector.getRemoteAudioQualityStats(e,n)},t.getTransportStats=function(e,n){return t.rtcStatsCollector.getTransportStats((function(t){return L.getStats((function(n){var r=S()({},t,n);e&&e(r)}),n)}),n)},t.getSessionStats=function(e,n){return t.rtcStatsCollector.getSessionStats(e,n)},t.onNetworkQuality=function(){return t.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},t.sendMetadata=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{name:"Client.sendMetadata",tag:"tracer",callback:function(e){if(e)return r&&r(e);r&&r()}});t.gatewayClient.sendMetadata(n,i)},t.sendCustomReportMessage=function(n,s,a,c,l,u){Object(r.getParameter)("CR")?t.customReportCount>Object(r.getParameter)("CRL")?u&&u("REPORT_LIMITED"):(t.gatewayClient.hasJoined||(i.default.WARNING("Should invoke Client.sendCustomReportMessage after join"),u&&u("REPORT_BEFORE_JOINED")),t.customReportTimer||(t.customReportTimer=setInterval((function(){t.customReportCount=0}),Object(r.getParameter)("CRI"))),Object(x.checkValidString)(n,"reportId",0,100,!1),Object(x.checkValidString)(s,"category",0,100,!1),Object(x.checkValidString)(a,"event",0,100,!1),Object(x.checkValidString)(c,"label",0,100,!1),Object(x.checkValidNumber)(l,"value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),t.customReportCount++,o.report.sendCustomReportMessage(e.sessionId,{reportId:n,category:s,event:a,label:c,value:l,lts:Date.now()},(function(e){e?u&&u("REPORT_FAILED"):u&&u()}))):u&&u("REPORT_FORBIDDEN")},t.setLocalAccessPoints=function(n,i){var s=o.report.reportApiInvoke(e.sessionId,{name:"Client.setLocalAccessPoints",tag:"tracer"});if(Object(x.checkValidArray)(n,"serverList"),Object(x.checkValidString)(i,"domain"),t.useProxyServer)throw new Error("You have already set the proxy");var a=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map((function(e){return a.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(i):e})),t.useLocalAccessPoint=!0,Object(r.setParameter)("WEBCS_DOMAIN",n),Object(r.setParameter)("WEBCS_DOMAIN_BACKUP_LIST",n),Object(r.setParameter)("GATEWAY_DOMAINS",[i]),Object(r.setParameter)("EVENT_REPORT_DOMAIN",n[Math.floor(Math.random()*n.length)]),Object(r.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",n[Math.floor(Math.random()*n.length)]),Object(r.setParameter)("LOG_UPLOAD_SERVER","".concat(n[Math.floor(Math.random()*n.length)],":6444")),s()},e.clientId=t.clientId,t.gatewayClient=Object(T.a)(e),t.listenerLoggerTimer=null,t.listenerLoggerCache=[],t.on=function(e,n){t.gatewayClient.on(e,n),t.listenerLoggerCache.push("".concat(e).concat(n.name?":"+n.name:"")),t.listenerLoggerTimer?clearTimeout(t.listenerLoggerTimer):i.default.info("[".concat(t.clientId,"] Adding event handler on ").concat(e)),t.listenerLoggerTimer=setTimeout((function(){t.listenerLoggerCache.length&&(t.listenerLoggerTimer=null,i.default.info("[".concat(t.clientId,"] Added event handler on ").concat(t.listenerLoggerCache.join(", "))),t.listenerLoggerCache=[])}),0)},t.off=function(e,n){i.default.info("remove event handler from [".concat(e,"]")),t.gatewayClient.removeEventListener(e,n)},t.rtcStatsCollector=function(e){var t=Object(s.b)();return t.gatewayClient=e,t.exceptionMonitor=new M(e),t.localStats={},t.remoteStats={},t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},t.getRemoteAudioStats=function(e){var n=t.gatewayClient.traffic_stats,r={};for(var i in t.remoteStats){var o={},s=t.remoteStats[i];if(Object(C.b)(o,"End2EndDelay",s.peer_delay&&s.peer_delay.audio_delay),Object(C.b)(o,"TransportDelay",s.peer_delay&&s.peer_delay.e2e_delay),Object(C.b)(o,"PacketLossRate",s.peer_delay&&s.peer_delay.e2e_audio_lost_ratio_400ms),Object(C.b)(o,"RecvLevel",s.audioStats&&s.audioStats.audioOutputLevel),Object(C.b)(o,"RecvBitrate",s.audioRecvBitrate),Object(C.b)(o,"CodecType",s.audioStats&&s.audioStats.googCodecName),Object(C.b)(o,"MuteState",s.audioDisabled),Object(C.b)(o,"TotalFreezeTime",s.audioStats&&s.audioStats.audioTotalFreezeTime),Object(C.b)(o,"TotalPlayDuration",s.audioStats&&s.audioStats.audioTotalPlayDuration),n&&n.peer_delay){var a=n.peer_delay.find((function(e){return e.peer_uid==i}));if(a){var c=a.peer_publish_audio_duration+(Date.now()-n.timestamp);Object(C.b)(o,"AudioPublishDuration",c)}else Object(C.b)(o,"AudioPublishDuration",-1)}r[i]=o}e&&e(r)},t.getLocalAudioStats=function(e){var n={};for(var r in t.localStats){var i={},o=t.localStats[r];Object(C.b)(i,"RecordingLevel",o.audioStats&&o.audioStats.audioInputLevel),Object(C.b)(i,"SendLevel",o.audioStats&&o.audioStats.totalAudioEnergy),Object(C.b)(i,"SamplingRate",o.audioStats&&o.audioStats.totalSamplesDuration),Object(C.b)(i,"SendBitrate",o.audioSendBitrate),Object(C.b)(i,"CodecType",o.audioStats&&o.audioStats.googCodecName),Object(C.b)(i,"MuteState",o.audioDisabled),Object(C.b)(i,"audioSendPacketsLost",o.audioStats&&o.audioStats.packetsLost);var s=t.gatewayClient.localStreams[r];s&&s.isPlaying()&&Object(C.b)(i,"MuteState",s.userMuteAudio?"1":"0"),n[r]=i}e&&e(n)},t.getRemoteVideoStats=function(e){var n=t.gatewayClient.traffic_stats,r={};for(var i in t.remoteStats){var o={},s=t.remoteStats[i];if(Object(C.b)(o,"End2EndDelay",s.peer_delay&&s.peer_delay.video_delay),Object(C.b)(o,"TransportDelay",s.peer_delay&&s.peer_delay.e2e_delay),Object(C.b)(o,"PacketLossRate",s.peer_delay&&s.peer_delay.e2e_video_lost_ratio_400ms),Object(C.b)(o,"RecvBitrate",s.videoRecvBitrate),Object(C.b)(o,"RecvResolutionWidth",s.videoStats&&s.videoStats.googFrameWidthReceived),Object(C.b)(o,"RecvResolutionHeight",s.videoStats&&s.videoStats.googFrameHeightReceived),Object(C.b)(o,"RenderResolutionWidth",s.videoStats&&s.videoStats.renderRemoteWidth),Object(C.b)(o,"RenderResolutionHeight",s.videoStats&&s.videoStats.renderRemoteHeight),Object(C.b)(o,"RenderFrameRate",s.videoStats&&s.videoStats.googFrameRateOutput),Object(C.b)(o,"MuteState",s.videoDisabled),Object(C.b)(o,"TotalFreezeTime",s.videoStats&&s.videoStats.videoTotalFreezeTime),Object(C.b)(o,"TotalPlayDuration",s.videoStats&&s.videoStats.videoTotalPlayDuration),n&&n.peer_delay){var a=n.peer_delay.find((function(e){return e.peer_uid==i}));if(a){var c=a.peer_publish_video_duration+(Date.now()-n.timestamp);Object(C.b)(o,"VideoPublishDuration",c)}else Object(C.b)(o,"VideoPublishDuration",-1)}r[i]=o}e&&e(r)},t.getLocalVideoStats=function(e){var n={};for(var r in t.localStats){var i={},o=t.localStats[r];Object(C.b)(i,"TargetSendBitrate",o.videoTargetSendBitrate),Object(C.b)(i,"SendFrameRate",o.videoStats&&o.videoStats.googFrameRateSent),Object(C.b)(i,"SendBitrate",o.videoSendBitrate),Object(C.b)(i,"SendResolutionWidth",o.videoStats&&o.videoStats.googFrameWidthSent),Object(C.b)(i,"SendResolutionHeight",o.videoStats&&o.videoStats.googFrameHeightSent),Object(C.b)(i,"CaptureResolutionWidth",o.videoStats&&o.videoStats.googFrameWidthInput),Object(C.b)(i,"CaptureResolutionHeight",o.videoStats&&o.videoStats.googFrameHeightInput),Object(C.b)(i,"EncodeDelay",o.videoStats&&o.videoStats.googAvgEncodeMs),Object(C.b)(i,"MuteState",o.videoDisabled),Object(C.b)(i,"TotalFreezeTime",o.videoStats&&o.videoStats.videoTotalFreezeTime),Object(C.b)(i,"TotalDuration",o.videoStats&&o.videoStats.videoTotalPlayDuration),Object(C.b)(i,"CaptureFrameRate",o.videoStats&&o.videoStats.googFrameRateSent),Object(C.b)(i,"videoSendPacketsLost",o.videoStats&&o.videoStats.packetsLost),o.videoStats&&!o.videoStats.googFrameWidthInput&&Object(C.b)(i,"CaptureResolutionWidth",o.videoStats&&o.videoStats.renderLocalWidth),o.videoStats&&!o.videoStats.googFrameHeightInput&&Object(C.b)(i,"CaptureResolutionHeight",o.videoStats&&o.videoStats.renderLocalHeight),n[r]=i}e&&e(n)},t.getRemoteVideoQualityStats=function(e){var n={};for(var r in t.remoteStats){var i={},o=t.remoteStats[r];Object(C.b)(i,"videoReceiveDelay",o.videoStats&&o.videoStats.googCurrentDelayMs),Object(C.b)(i,"VideoFreezeRate",o.videoStats&&o.videoStats.videoFreezeRate),Object(C.b)(i,"FirstFrameTime",o.firstFrameTime),n[r]=i}e&&e(n)},t.getRemoteAudioQualityStats=function(e){var n={};for(var r in t.remoteStats){var i={},o=t.remoteStats[r];Object(C.b)(i,"audioReceiveDelay",o.audioStats&&o.audioStats.googCurrentDelayMs),Object(C.b)(i,"AudioFreezeRate",o.videoStats&&o.videoStats.videoFreezeRate),n[r]=i}e&&e(n)},t.getTransportStats=function(e){var n={},r={},i=t.gatewayClient.traffic_stats,o=i.peer_delay;if(Object(C.b)(n,"OutgoingAvailableBandwidth",t.gatewayClient.OutgoingAvailableBandwidth/1e3),Object(C.b)(n,"RTT",i&&2*i.access_delay),o){var s,a=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(o);try{for(a.s();!(s=a.n()).done;){var c=s.value;c.downlink_estimate_bandwidth&&(r[c.peer_uid]=c.downlink_estimate_bandwidth/1e3+"")}}catch(e){a.e(e)}finally{a.f()}}n.IncomingAvailableBandwidth=r,e&&e(n)},t.getSessionStats=function(e){var n={},r=t.gatewayClient.traffic_stats,i=t.gatewayClient.socket,o=0,s=0;for(var a in t.remoteStats)(c=t.remoteStats[a])&&c.videoStats&&c.videoStats.videoRecvBytesDelta&&(s+=parseInt(c.videoStats.videoRecvBytesDelta)),c&&c.audioStats&&c.audioStats.audioRecvBytesDelta&&(s+=parseInt(c.audioStats.audioRecvBytesDelta));for(var a in t.localStats){var c;(c=t.localStats[a])&&c.videoStats&&c.videoStats.videoSendBytesDelta&&(o+=parseInt(c.videoStats.videoSendBytesDelta)),c&&c.audioStats&&c.audioStats.audioSendBytesDelta&&(o+=parseInt(c.audioStats.audioSendBytesDelta))}var l=o+t.session.WSSendBytesDelta+t.session.HTTPSendBytesDelta,u=s+t.session.WSRecvBytesDelta+t.session.HTTPRecvBytesDelta,d=t.session.sendBytes+Object(O.getHTTPSendBytes)(),p=t.session.recvBytes+Object(O.getHTTPRecvBytes)();t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED&&(d+=i.getSendBytes(),p+=i.getRecvBytes());var h=1;r.peer_delay&&(h=r.peer_delay.length,h+=1),i?Object(C.b)(n,"Duration",i.getDuration()):Object(C.b)(n,"Duration",0),Object(C.b)(n,"UserCount",h),Object(C.b)(n,"SendBytes",d),Object(C.b)(n,"RecvBytes",p),Object(C.b)(n,"SendBitrate",8*l/1e3),Object(C.b)(n,"RecvBitrate",8*u/1e3),e&&e(n)},t.isLocalVideoFreeze=function(e,t){var n=0,r=0;if(!e||!t)return!1;if(Object(a.isChrome)()||Object(a.isOpera)())n=e.googFrameRateInput,r=e.googFrameRateSent;else if(Object(a.isSafari)())n=parseInt(e.framerateMean),r=parseInt(e.framesEncoded)-parseInt(t.framesEncoded);else{if(!Object(a.isFireFox)())return!1;n=parseInt(e.framerateMean),r=parseInt(e.framesEncoded)-parseInt(t.framesEncoded)}return n>5&&r<3},t.isRemoteVideoFreeze=function(e,t){var n=0,r=0;if(!e||!t)return!1;if(Object(a.isChrome)()||Object(a.isOpera)())n=e.googFrameRateReceived,r=e.googFrameRateDecoded;else if(Object(a.isSafari)())n=e.framerateMean,r=parseInt(e.framesDecoded)-parseInt(t.framesDecoded);else{if(!Object(a.isFireFox)())return!1;n=parseInt(e.framesReceived)-parseInt(t.framesReceived),r=parseInt(e.framesDecoded)-parseInt(t.framesDecoded)}return n>5&&n<10&&r<3||n>10&&n<20&&r<4||n>20&&r<5},t.isAudioFreeze=function(e){if(Object(a.isChrome)()&&e){if(e.googDecodingPLC&&e.googDecodingPLCCNG&&e.googDecodingCTN)return(parseInt(e.googDecodingPLC)+parseInt(e.googDecodingPLCCNG))/parseInt(e.googDecodingCTN)>.2}else if((Object(a.isSafari)()||Object(a.isFireFox)())&&e.packetsLost&&e.packetsReceived)return parseInt(e.packetsLost)/(parseInt(e.packetsLost)+parseInt(e.packetsReceived))>.2;return!1},t.isAudioDecodeFailed=function(e){return!!((Object(a.isChrome)()||Object(a.isOpera)())&&e&&parseInt(e.bytesReceived)>0&&0===parseInt(e.googDecodingNormal))},t.startNetworkQualityTimer=function(){t.clearNetworkQualityTimer(),t.networkQualityTimer=setInterval((function(){if(t.gatewayClient.state===T.a.CONNECTED&&navigator.onLine){var e=t.gatewayClient.traffic_stats;t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:t.networkQualityTrans(e.uplink_network_quality),downlinkNetworkQuality:t.networkQualityTrans(e.downlink_network_quality)})}else t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3)},t.clearNetworkQualityTimer=function(){t.networkQualityTimer&&clearInterval(t.networkQualityTimer)},t.networkQualityTrans=function(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0},t.getStatsTimer=setInterval((function(){var e=t.gatewayClient.traffic_stats,n=Date.now();t.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(t.localStats).length&&t.exceptionMonitor.setLocalStats(t.localStats),Object.keys(t.remoteStats).length&&t.exceptionMonitor.setRemoteStats(t.remoteStats);var r={};Object.keys(t.gatewayClient.remoteStreams).forEach((function(i){var o=t.gatewayClient.remoteStreams[i],s=t.remoteStats[i],a={id:i,updatedAt:n};r[i]=a,a.firstFrameTime=o.firstFrameTime,s?(a.audioTotalPlayDuration=s.audioTotalPlayDuration+1,a.audioTotalFreezeTime=s.audioTotalFreezeTime,a.isAudioFreeze=!1,a.isAudioDecodeFailed=!1,a.videoTotalPlayDuration=s.videoTotalPlayDuration+1,a.videoTotalFreezeTime=s.videoTotalFreezeTime,a.isVideoFreeze=!1):(a.audioTotalPlayDuration=1,a.audioTotalFreezeTime=0,a.videoTotalPlayDuration=1,a.videoTotalFreezeTime=0);var c=e&&e.peer_delay&&e.peer_delay.find((function(e){return e.peer_uid==i}));c&&(a.peer_delay=c),o&&(o.isPlaying()&&(a.audioDisabled=o.userMuteAudio||o.peerMuteAudio?"1":"0",a.videoDisabled=o.userMuteVideo||o.peerMuteVideo?"1":"0"),s&&s.peer_delay&&c&&s.peer_delay.stream_type!==c.stream_type&&t.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:i,streamType:c.stream_type}),o.pc&&"established"==o.pc.state&&o.pc.getStats((function(e){if(a.pcStats=e,a.audioStats=e.find((function(e){return"audio"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)})),a.videoStats=e.find((function(e){return"video"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)})),s&&s.audioStats&&a.audioStats){var n=parseInt(a.audioStats.bytesReceived)-parseInt(s.audioStats.bytesReceived),r=parseInt(a.audioStats.googDecodingNormal)-parseInt(s.audioStats.googDecodingNormal);if(a.audioStats.audioRecvBytesDelta=n,a.audioStats.audioDecodingNormalDelta=r,t.session.recvBytes+=n,isFinite(n)&&a.audioStats.timestamp){var i=a.audioStats.timestamp.getTime()-s.audioStats.timestamp.getTime();a.audioRecvBitrate=Math.floor(8*n/i)}t.isAudioFreeze(a.audioStats)&&a.audioTotalPlayDuration>10&&(a.audioTotalFreezeTime++,a.isAudioFreeze=!0),t.isAudioDecodeFailed(a.audioStats)&&a.audioTotalPlayDuration>10&&(a.isAudioDecodeFailed=!0),a.audioStats.audioTotalFreezeTime=a.audioTotalFreezeTime,a.audioStats.audioTotalPlayDuration=a.audioTotalPlayDuration,a.audioStats.audioFreezeRate=Math.ceil(100*a.audioTotalFreezeTime/a.audioTotalPlayDuration)}if(s&&s.videoStats&&a.videoStats){var c=parseInt(a.videoStats.bytesReceived)-parseInt(s.videoStats.bytesReceived);a.videoStats.videoRecvBytesDelta=c,t.session.recvBytes+=c,isFinite(c)&&a.videoStats.timestamp&&(i=a.videoStats.timestamp.getTime()-s.videoStats.timestamp.getTime(),a.videoRecvBitrate=Math.floor(8*c/i)),t.isRemoteVideoFreeze(a.videoStats,s.videoStats)&&(a.videoTotalFreezeTime++,a.isVideoFreeze=!0),a.videoStats.videoTotalFreezeTime=a.videoTotalFreezeTime,a.videoStats.videoTotalPlayDuration=a.videoTotalPlayDuration,a.videoStats.videoFreezeRate=Math.ceil(100*a.videoTotalFreezeTime/a.videoTotalPlayDuration),o.player&&o.player.video&&o.player.video.videoWidth&&o.player.video.videoHeight?(a.videoStats.renderRemoteWidth=o.player.video.videoWidth,a.videoStats.renderRemoteHeight=o.player.video.videoHeight):(a.videoStats.renderRemoteWidth=o.videoWidth||a.videoStats.googFrameWidthReceived,a.videoStats.renderRemoteHeight=o.videoHeight||a.videoStats.googFrameHeightReceived)}})))})),t.remoteStats=r;var i={};if(Object.keys(t.gatewayClient.localStreams).forEach((function(e){var r=t.gatewayClient.localStreams[e],o=t.localStats[e],s={id:e,updatedAt:n};i[e]=s,o?(s.videoTotalPlayDuration=o.videoTotalPlayDuration+1,s.videoTotalFreezeTime=o.videoTotalFreezeTime,s.isVideoFreeze=!1):(s.videoTotalPlayDuration=1,s.videoTotalFreezeTime=0),r&&(r.isPlaying()&&(s.audioDisabled=r.userMuteAudio?"1":"0",s.videoDisabled=r.userMuteVideo?"1":"0"),r.video&&r.attributes.maxVideoBW?s.videoTargetSendBitrate=r.attributes.maxVideoBW:r.video&&r.screenAttributes&&(s.videoTargetSendBitrate=r.screenAttributes.maxVideoBW),r.pc&&"established"==r.pc.state&&r.pc.getStats((function(e){if(s.pcStats=e.reverse(),s.audioStats=e.find((function(e){return"audio"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)})),s.videoStats=e.find((function(e){return"video"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)})),s.audioStats&&o&&o.audioStats){var n=parseInt(s.audioStats.bytesSent)-parseInt(o.audioStats.bytesSent);if(s.audioStats.audioSendBytesDelta=n,t.session.sendBytes+=n,isFinite(n)&&s.audioStats.timestamp){var i=s.audioStats.timestamp.getTime()-o.audioStats.timestamp.getTime();s.audioSendBitrate=Math.floor(8*n/i)}}if(s.videoStats&&o&&o.videoStats){var a=parseInt(s.videoStats.bytesSent)-parseInt(o.videoStats.bytesSent);s.videoStats.videoSendBytesDelta=a,t.session.sendBytes+=a,isFinite(a)&&s.videoStats.timestamp&&(i=s.videoStats.timestamp.getTime()-o.videoStats.timestamp.getTime(),s.videoSendBitrate=Math.floor(8*a/i)),t.isLocalVideoFreeze(s.videoStats,o.videoStats)&&(s.videoTotalFreezeTime++,s.isVideoFreeze=!0),s.videoStats.videoTotalFreezeTime=s.videoTotalFreezeTime,s.videoStats.videoTotalPlayDuration=s.videoTotalPlayDuration,s.videoStats.videoFreezeRate=Math.ceil(100*s.videoTotalFreezeTime/s.videoTotalPlayDuration),s.videoStats.renderLocalWidth=r.videoWidth||s.videoStats.googFrameWidthSent,s.videoStats.renderLocalHeight=r.videoHeight||s.videoStats.googFrameHeightSent}})))})),t.localStats=i,t.session.HTTPSendBytesDelta=Object(O.getHTTPSendBytes)()-t.session.HTTPSendBytes,t.session.HTTPSendBytes=Object(O.getHTTPSendBytes)(),t.session.HTTPRecvBytesDelta=Object(O.getHTTPRecvBytes)()-t.session.HTTPRecvBytes,t.session.HTTPRecvBytes=Object(O.getHTTPRecvBytes)(),t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED){var o=t.gatewayClient.socket;t.session.WSSendBytesDelta=o.getSendBytes()-t.session.WSSendBytes,t.session.WSSendBytes=o.getSendBytes(),t.session.WSRecvBytesDelta=o.getRecvBytes()-t.session.WSRecvBytes,t.session.WSRecvBytes=o.getRecvBytes()}}),1e3),t.gatewayClient.on("join",(function(){t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}})),t}(t.gatewayClient),t.configDistributManager=function(e){var t={};return t.client=e,t.client.gatewayClient&&t.client.gatewayClient.on("config-distribute",(function(n){var s=n.joinInfo,a=n.config;if(a){Object(x.isEmpty)(a.uploadLog)||(Object(r.setParameter)("UPLOAD_LOG",a.uploadLog),o.report.reportApiInvoke(s.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:a.uploadLog}})()),Object(x.isEmpty)(a.dualStream)||(e.isDualStream=a.dualStream,o.report.reportApiInvoke(s.sid,{name:"_configDistribute",options:{feature:"dualStream",value:a.dualStream}})()),Object(x.isEmpty)(a.streamFallbackOption)||t.client.gatewayClient&&t.client.gatewayClient.on("stream-subscribed",(function(e){var n=e.stream;n?(t.client.gatewayClient.setStreamFallbackOption(n,a.streamFallbackOption),o.report.reportApiInvoke(s.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:a.streamFallbackOption,streamId:n.getId()}})()):o.report.reportApiInvoke(s.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:a.streamFallbackOption,streamId:n.getId(),err:"invalid stream"}})()}));try{i.default.debug("[".concat(e.clientId,"] setParameter in distribution: ").concat(JSON.stringify(a))),Object.keys(a).map((function(e){return Object(r.setParameter)(e,a[e])}))}catch(t){i.default.debug("[".concat(e.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(a)))}}})),t}(t),Object(P.addLiveStreamingCapability)(t,e),e.areaCode){var n=e,c=n.areaCode,h=n.excludedArea,f=Object(z.getAreaCodeByConfig)({areaCode:c,excludedArea:h});Object(r.setParameter)("AREA_SETTING",f);var g=Object(z.getAreaDomainConfig)(f);Object.keys(g).map((function(e){var t=g[e];"LOG_UPLOAD_SERVER"==e||"EVENT_REPORT_DOMAIN"==e||"EVENT_REPORT_BACKUP_DOMAIN"==e||"NGINX"==e?Object(r.setParameter)(e,t[0]):Object(r.setParameter)(e,t)}))}return Object(x.isEmpty)(e.turnServer)||t.setTurnServer(e.turnServer),Object(x.isEmpty)(e.proxyServer)||t.setProxyServer(e.proxyServer),"live"===t.mode&&(t.gatewayClient.role="audience"),"rtc"===t.mode&&(t.gatewayClient.role=V),t.gatewayClient.on("onMultiIP",(function(e){t.gatewayClient.closeGateway(),t.gatewayClient.socket=void 0,t.gatewayClient.hasChangeBGPAddress=!0,t.joinInfo.multiIP=e.option,t.gatewayClient.state=T.a.CONNECTING;var n=function(e){i.default.info("[".concat(t.clientId,"] Joining channel: ").concat(t.channel)),t.joinInfo.cid=e.cid,t.joinInfo.uid||(t.joinInfo.uid=e.uid),t.joinInfo.uni_lbs_ip=e.uni_lbs_ip,t.joinInfo.gatewayAddr=e.gateway_addr,t.onSuccess?t.gatewayClient.join(t.joinInfo,t.key,(function(e){i.default.info("[".concat(t.clientId,"] Join channel ").concat(t.channel," success"));var n=t.onSuccess;t.onSuccess=null,t.onFailure=null,n(e)}),t.onFailure):(t.gatewayClient.joinInfo=S()({},t.joinInfo),t.gatewayClient.rejoin())};t.joinInfo.stringUid&&!t.joinInfo.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=Object(w.getUserAccount)(joinInfo,t.gatewayClient),t.userAccountReq.then((function(e){i.default.error("getUserAccount Success ".concat(e.url," ").concat(joinInfo.stringUid," => ").concat(e.uid)),t.joinInfo.uid=e.uid,Object(w.getGatewayList)(t.joinInfo,n,t.onFailure)})).catch((function(e){i.default.error("getUserAccount rejected",e),t.onFailure(e)}))):Object(w.getGatewayList)(t.joinInfo,n,t.onFailure)})),t.gatewayClient.on("rejoin-start",(function(){t._renewSession(),o.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})})),t.gatewayClient.on("recover",(function(){t._renewSession(),i.default.debug("[".concat(t.clientId,"]"),"recover",e.sessionId),o.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})})),t.gatewayClient.on("rejoin",(function(){var e=t.highStreamState;if(i.default.debug("[".concat(t.clientId,"] Client local stream preState: ").concat(e)),t.onSuccess){var n=t.onSuccess;t.onSuccess=null,t.onFailure=null,n(t.joinInfo.uid)}!t.highStream||0!==e&&1!==e||(i.default.info("[".concat(t.clientId,"] publish after rejoin")),t.highStreamState=2,t.lowStreamState=2,t.publish(t.highStream,(function(e){e&&i.default.info("[".concat(t.clientId,"] "),e)})))})),t.gatewayClient.on("streamPublished",(function(e){t.hasPublished||(t.hasPublished=!0,t.gatewayClient.dispatchEvent({type:"stream-published",stream:e.stream,proxy:e.proxy}))})),t.gatewayClient.on("pubP2PLost",(function(e){i.default.debug("[".concat(t.clientId,"] Start reconnect local peerConnection: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:t.highStream.getId()}),1===t.highStreamState&&(t.highStreamState=0,t.lowStreamState=0),t._unpublish(t.highStream,(function(){t._publish(t.highStream,(function(){i.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection success: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!0,reason:""})}),(function(e){i.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})}),!0)}),(function(e){i.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})}),!0)})),t.gatewayClient.on("subP2PLost",(function(e){i.default.debug("[".concat(t.clientId,"] Start reconnect remote peerConnection: ").concat(e.stream.getId()," ").concat(e.stream.subscribeOptions)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:e.stream.getId()});var n=e.stream.subscribeOptions;i.default.debug("[".concat(t.clientId,"]"),"Re-subscribe stream",JSON.stringify(n)),t.gatewayClient.unsubscribe(e.stream,(function(){e.stream.subscribeOptions=n,t.gatewayClient.subscribe(e.stream,(function(){i.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection success: ").concat(e.stream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!0,reason:""})}),(function(n){i.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),n),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:n})}))}),(function(n){i.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),n),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:n})}))})),L.on("networkTypeChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"network-type-changed"});t.gatewayClient.dispatchEvent(n)})),p.a.on("recordingDeviceChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"recording-device-changed"});t.gatewayClient.dispatchEvent(n)})),p.a.on("playoutDeviceChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"playout-device-changed"});t.gatewayClient.dispatchEvent(n)})),p.a.on("cameraChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"camera-changed"});t.gatewayClient.dispatchEvent(n)})),t.gatewayClient.on("streamTypeChange",(function(n){var r=S()({},n,{type:"stream-type-changed"});t.gatewayClient.dispatchEvent(r),o.report.reportApiInvoke(e.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(n))})),t},G=p.a.getDevices,W=h.a.getScreenSources,Y=JSON.parse(JSON.stringify(r.SUPPORT_RESOLUTION_LIST));t.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:{width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},createClient:function(e){var t=o.report.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});(e=S()({},e||{})).codec||(e.codec=function(e){return"h264_interop"===e?"h264":"vp8"}(e.mode));var n=function(e){return-1===g.indexOf(e.mode)?I.default.INVALID_CLIENT_MODE:-1===v.indexOf(e.codec)?I.default.INVALID_CLIENT_CODEC:"h264_interop"==e.mode&&"h264"!==e.codec&&I.default.CLIENT_MODE_CODEC_MISMATCH}(e);if(n)throw i.default.error("Invalid parameter setting MODE: ".concat(e.mode," CODEC: ").concat(e.codec," ERROR ").concat(n)),t(n),new Error(n);return i.default.info("Creating client, MODE: ".concat(e.mode," CODEC: ").concat(e.codec)),function(e){switch(e.mode){case"interop":case"h264_interop":e.mode="live";break;case"web-only":e.mode="rtc"}}(e),t(null,e),H(e)},createStream:d.b,Logger:i.default,report:o.report,getDevices:G,getScreenSources:W,getParameter:r.getParameter,setParameter:r.setParameter,checkSystemRequirements:l,getSupportedCodec:f.getSupportedCodec,ChannelMediaRelayConfiguration:m.ChannelMediaRelayConfiguration,VERSION:r.VERSION,BUILD:r.BUILD,PROFILE_TABLE:Y,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2,AREAS:z.AREAS,AREA_VERSION:"global"}}]).default},module.exports=t()},8885:function(e){e.exports=function(){"use strict";const e=new Map,t={set(t,n,r){e.has(t)||e.set(t,new Map);const i=e.get(t);i.has(n)||0===i.size?i.set(n,r):console.error("Bootstrap doesn't allow more than one instance per element. Bound instance: ".concat(Array.from(i.keys())[0],"."))},get:(t,n)=>e.has(t)&&e.get(t).get(n)||null,remove(t,n){if(!e.has(t))return;const r=e.get(t);r.delete(n),0===r.size&&e.delete(t)}},n="transitionend",r=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,((e,t)=>"#".concat(CSS.escape(t))))),e),i=e=>{e.dispatchEvent(new Event(n))},o=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),s=e=>o(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(r(e)):null,a=e=>{if(!o(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const t=e.closest("summary");if(t&&t.parentNode!==n)return!1;if(null===t)return!1}return t},c=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),l=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?l(e.parentNode):null},u=()=>{},d=e=>{e.offsetHeight},p=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,h=[],f=()=>"rtl"===document.documentElement.dir,m=e=>{var t;t=()=>{const t=p();if(t){const n=e.NAME,r=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=r,e.jQueryInterface)}},"loading"===document.readyState?(h.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of h)e()})),h.push(t)):t()},g=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return"function"==typeof e?e(...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]):t},v=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&!arguments[2])return void g(e);const r=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const r=Number.parseFloat(t),i=Number.parseFloat(n);return r||i?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(t)+5;let o=!1;const s=r=>{let{target:i}=r;i===t&&(o=!0,t.removeEventListener(n,s),g(e))};t.addEventListener(n,s),setTimeout((()=>{o||i(t)}),r)},y=(e,t,n,r)=>{const i=e.length;let o=e.indexOf(t);return-1===o?!n&&r?e[i-1]:e[0]:(o+=n?1:-1,r&&(o=(o+i)%i),e[Math.max(0,Math.min(o,i-1))])},E=/[^.]*(?=\..*)\.|.*/,_=/\..*/,b=/::\d+$/,S={};let T=1;const I={mouseenter:"mouseover",mouseleave:"mouseout"},N=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function w(e,t){return t&&"".concat(t,"::").concat(T++)||e.uidEvent||T++}function C(e){const t=w(e);return e.uidEvent=t,S[t]=S[t]||{},S[t]}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===n))}function A(e,t,n){const r="string"==typeof t,i=r?n:t||n;let o=k(e);return N.has(o)||(o=e),[r,i,o]}function R(e,t,n,r,i){if("string"!=typeof t||!e)return;let[o,s,a]=A(t,n,r);if(t in I){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};s=e(s)}const c=C(e),l=c[a]||(c[a]={}),u=O(l,s,o?n:null);if(u)return void(u.oneOff=u.oneOff&&i);const d=w(s,t.replace(E,"")),p=o?function(e,t,n){return function r(i){const o=e.querySelectorAll(t);for(let{target:s}=i;s&&s!==this;s=s.parentNode)for(const a of o)if(a===s)return L(i,{delegateTarget:s}),r.oneOff&&x.off(e,i.type,t,n),n.apply(s,[i])}}(e,n,s):function(e,t){return function n(r){return L(r,{delegateTarget:e}),n.oneOff&&x.off(e,r.type,t),t.apply(e,[r])}}(e,s);p.delegationSelector=o?n:null,p.callable=s,p.oneOff=i,p.uidEvent=d,l[d]=p,e.addEventListener(a,p,o)}function M(e,t,n,r,i){const o=O(t[n],r,i);o&&(e.removeEventListener(n,o,Boolean(i)),delete t[n][o.uidEvent])}function D(e,t,n,r){const i=t[n]||{};for(const[o,s]of Object.entries(i))o.includes(r)&&M(e,t,n,s.callable,s.delegationSelector)}function k(e){return e=e.replace(_,""),I[e]||e}const x={on(e,t,n,r){R(e,t,n,r,!1)},one(e,t,n,r){R(e,t,n,r,!0)},off(e,t,n,r){if("string"!=typeof t||!e)return;const[i,o,s]=A(t,n,r),a=s!==t,c=C(e),l=c[s]||{},u=t.startsWith(".");if(void 0===o){if(u)for(const n of Object.keys(c))D(e,c,n,t.slice(1));for(const[n,r]of Object.entries(l)){const i=n.replace(b,"");a&&!t.includes(i)||M(e,c,s,r.callable,r.delegationSelector)}}else{if(!Object.keys(l).length)return;M(e,c,s,o,i?n:null)}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const r=p();let i=null,o=!0,s=!0,a=!1;t!==k(t)&&r&&(i=r.Event(t,n),r(e).trigger(i),o=!i.isPropagationStopped(),s=!i.isImmediatePropagationStopped(),a=i.isDefaultPrevented());const c=L(new Event(t,{bubbles:o,cancelable:!0}),n);return a&&c.preventDefault(),s&&e.dispatchEvent(c),c.defaultPrevented&&i&&i.preventDefault(),c}};function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const[n,r]of Object.entries(t))try{e[n]=r}catch(t){Object.defineProperty(e,n,{configurable:!0,get:()=>r})}return e}function P(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function j(e){return e.replace(/[A-Z]/g,(e=>"-".concat(e.toLowerCase())))}const U={setDataAttribute(e,t,n){e.setAttribute("data-bs-".concat(j(t)),n)},removeDataAttribute(e,t){e.removeAttribute("data-bs-".concat(j(t)))},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const r of n){let n=r.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=P(e.dataset[r])}return t},getDataAttribute:(e,t)=>P(e.getAttribute("data-bs-".concat(j(t))))};class F{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const n=o(t)?U.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...o(t)?U.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.DefaultType;for(const[r,i]of Object.entries(t)){const t=e[r],s=o(t)?"element":null==(n=t)?"".concat(n):Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(s))throw new TypeError("".concat(this.constructor.NAME.toUpperCase(),': Option "').concat(r,'" provided type "').concat(s,'" but expected type "').concat(i,'".'))}var n}}class z extends F{constructor(e,n){super(),(e=s(e))&&(this._element=e,this._config=this._getConfig(n),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),x.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t){v(e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return t.get(s(e),this.DATA_KEY)}static getOrCreateInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return"bs.".concat(this.NAME)}static get EVENT_KEY(){return".".concat(this.DATA_KEY)}static eventName(e){return"".concat(e).concat(this.EVENT_KEY)}}const B=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n="#".concat(n.split("#")[1])),t=n&&"#"!==n?n.trim():null}return t?t.split(",").map((e=>r(e))).join(","):null},V={find:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(t,e)},children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const n=[];let r=e.parentNode.closest(t);for(;r;)n.push(r),r=r.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>"".concat(e,':not([tabindex^="-"])'))).join(",");return this.find(t,e).filter((e=>!c(e)&&a(e)))},getSelectorFromElement(e){const t=B(e);return t&&V.findOne(t)?t:null},getElementFromSelector(e){const t=B(e);return t?V.findOne(t):null},getMultipleElementsFromSelector(e){const t=B(e);return t?V.find(t):[]}},H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";const n="click.dismiss".concat(e.EVENT_KEY),r=e.NAME;x.on(document,n,'[data-bs-dismiss="'.concat(r,'"]'),(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),c(this))return;const i=V.getElementFromSelector(this)||this.closest(".".concat(r));e.getOrCreateInstance(i)[t]()}))},G=".bs.alert",W="close".concat(G),Y="closed".concat(G);class q extends z{static get NAME(){return"alert"}close(){if(x.trigger(this._element,W).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),x.trigger(this._element,Y),this.dispose()}static jQueryInterface(e){return this.each((function(){const t=q.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}H(q,"close"),m(q);const K='[data-bs-toggle="button"]';class Q extends z{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each((function(){const t=Q.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}x.on(document,"click.bs.button.data-api",K,(e=>{e.preventDefault();const t=e.target.closest(K);Q.getOrCreateInstance(t).toggle()})),m(Q);const J=".bs.swipe",X="touchstart".concat(J),Z="touchmove".concat(J),$="touchend".concat(J),ee="pointerdown".concat(J),te="pointerup".concat(J),ne={endCallback:null,leftCallback:null,rightCallback:null},re={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ie extends F{constructor(e,t){super(),this._element=e,e&&ie.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ne}static get DefaultType(){return re}static get NAME(){return"swipe"}dispose(){x.off(this._element,J)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),g(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&g(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(x.on(this._element,ee,(e=>this._start(e))),x.on(this._element,te,(e=>this._end(e))),this._element.classList.add("pointer-event")):(x.on(this._element,X,(e=>this._start(e))),x.on(this._element,Z,(e=>this._move(e))),x.on(this._element,$,(e=>this._end(e))))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const oe=".bs.carousel",se=".data-api",ae="next",ce="prev",le="left",ue="right",de="slide".concat(oe),pe="slid".concat(oe),he="keydown".concat(oe),fe="mouseenter".concat(oe),me="mouseleave".concat(oe),ge="dragstart".concat(oe),ve="load".concat(oe).concat(se),ye="click".concat(oe).concat(se),Ee="carousel",_e="active",be=".active",Se=".carousel-item",Te=be+Se,Ie={ArrowLeft:ue,ArrowRight:le},Ne={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},we={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ce extends z{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=V.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ee&&this.cycle()}static get Default(){return Ne}static get DefaultType(){return we}static get NAME(){return"carousel"}next(){this._slide(ae)}nextWhenVisible(){!document.hidden&&a(this._element)&&this.next()}prev(){this._slide(ce)}pause(){this._isSliding&&i(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?x.one(this._element,pe,(()=>this.cycle())):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void x.one(this._element,pe,(()=>this.to(e)));const n=this._getItemIndex(this._getActive());if(n===e)return;const r=e>n?ae:ce;this._slide(r,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&x.on(this._element,he,(e=>this._keydown(e))),"hover"===this._config.pause&&(x.on(this._element,fe,(()=>this.pause())),x.on(this._element,me,(()=>this._maybeEnableCycle()))),this._config.touch&&ie.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of V.find(".carousel-item img",this._element))x.on(t,ge,(e=>e.preventDefault()));const e={leftCallback:()=>this._slide(this._directionToOrder(le)),rightCallback:()=>this._slide(this._directionToOrder(ue)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new ie(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Ie[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=V.findOne(be,this._indicatorsElement);t.classList.remove(_e),t.removeAttribute("aria-current");const n=V.findOne('[data-bs-slide-to="'.concat(e,'"]'),this._indicatorsElement);n&&(n.classList.add(_e),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._isSliding)return;const n=this._getActive(),r=e===ae,i=t||y(this._getItems(),n,r,this._config.wrap);if(i===n)return;const o=this._getItemIndex(i),s=t=>x.trigger(this._element,t,{relatedTarget:i,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:o});if(s(de).defaultPrevented)return;if(!n||!i)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=i;const c=r?"carousel-item-start":"carousel-item-end",l=r?"carousel-item-next":"carousel-item-prev";i.classList.add(l),d(i),n.classList.add(c),i.classList.add(c),this._queueCallback((()=>{i.classList.remove(c,l),i.classList.add(_e),n.classList.remove(_e,l,c),this._isSliding=!1,s(pe)}),n,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return V.findOne(Te,this._element)}_getItems(){return V.find(Se,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return f()?e===le?ce:ae:e===le?ae:ce}_orderToDirection(e){return f()?e===ce?le:ue:e===ce?ue:le}static jQueryInterface(e){return this.each((function(){const t=Ce.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}else t.to(e)}))}}x.on(document,ye,"[data-bs-slide], [data-bs-slide-to]",(function(e){const t=V.getElementFromSelector(this);if(!t||!t.classList.contains(Ee))return;e.preventDefault();const n=Ce.getOrCreateInstance(t),r=this.getAttribute("data-bs-slide-to");return r?(n.to(r),void n._maybeEnableCycle()):"next"===U.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),x.on(window,ve,(()=>{const e=V.find('[data-bs-ride="carousel"]');for(const t of e)Ce.getOrCreateInstance(t)})),m(Ce);const Oe=".bs.collapse",Ae="show".concat(Oe),Re="shown".concat(Oe),Me="hide".concat(Oe),De="hidden".concat(Oe),ke="click".concat(Oe,".data-api"),xe="show",Le="collapse",Pe="collapsing",je=":scope .".concat(Le," .").concat(Le),Ue='[data-bs-toggle="collapse"]',Fe={parent:null,toggle:!0},ze={parent:"(null|element)",toggle:"boolean"};class Be extends z{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const n=V.find(Ue);for(const r of n){const e=V.getSelectorFromElement(r),t=V.find(e).filter((e=>e===this._element));null!==e&&t.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Fe}static get DefaultType(){return ze}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((e=>e!==this._element)).map((e=>Be.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;if(x.trigger(this._element,Ae).defaultPrevented)return;for(const r of e)r.hide();const t=this._getDimension();this._element.classList.remove(Le),this._element.classList.add(Pe),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n="scroll".concat(t[0].toUpperCase()+t.slice(1));this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Pe),this._element.classList.add(Le,xe),this._element.style[t]="",x.trigger(this._element,Re)}),this._element,!0),this._element.style[t]="".concat(this._element[n],"px")}hide(){if(this._isTransitioning||!this._isShown())return;if(x.trigger(this._element,Me).defaultPrevented)return;const e=this._getDimension();this._element.style[e]="".concat(this._element.getBoundingClientRect()[e],"px"),d(this._element),this._element.classList.add(Pe),this._element.classList.remove(Le,xe);for(const t of this._triggerArray){const e=V.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Pe),this._element.classList.add(Le),x.trigger(this._element,De)}),this._element,!0)}_isShown(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains(xe)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=s(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Ue);for(const t of e){const e=V.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=V.find(je,this._config.parent);return V.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const n of e)n.classList.toggle("collapsed",!t),n.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const n=Be.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e]()}}))}}x.on(document,ke,Ue,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const t of V.getMultipleElementsFromSelector(this))Be.getOrCreateInstance(t,{toggle:!1}).toggle()})),m(Be);var Ve="top",He="bottom",Ge="right",We="left",Ye="auto",qe=[Ve,He,Ge,We],Ke="start",Qe="end",Je="clippingParents",Xe="viewport",Ze="popper",$e="reference",et=qe.reduce((function(e,t){return e.concat([t+"-"+Ke,t+"-"+Qe])}),[]),tt=[].concat(qe,[Ye]).reduce((function(e,t){return e.concat([t,t+"-"+Ke,t+"-"+Qe])}),[]),nt="beforeRead",rt="read",it="afterRead",ot="beforeMain",st="main",at="afterMain",ct="beforeWrite",lt="write",ut="afterWrite",dt=[nt,rt,it,ot,st,at,ct,lt,ut];function pt(e){return e?(e.nodeName||"").toLowerCase():null}function ht(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ft(e){return e instanceof ht(e).Element||e instanceof Element}function mt(e){return e instanceof ht(e).HTMLElement||e instanceof HTMLElement}function gt(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ht(e).ShadowRoot||e instanceof ShadowRoot)}const vt={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];mt(i)&&pt(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});mt(r)&&pt(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};function yt(e){return e.split("-")[0]}var Et=Math.max,_t=Math.min,bt=Math.round;function St(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Tt(){return!/^((?!chrome|android).)*safari/i.test(St())}function It(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&mt(e)&&(i=e.offsetWidth>0&&bt(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&bt(r.height)/e.offsetHeight||1);var s=(ft(e)?ht(e):window).visualViewport,a=!Tt()&&n,c=(r.left+(a&&s?s.offsetLeft:0))/i,l=(r.top+(a&&s?s.offsetTop:0))/o,u=r.width/i,d=r.height/o;return{width:u,height:d,top:l,right:c+u,bottom:l+d,left:c,x:c,y:l}}function Nt(e){var t=It(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function wt(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&gt(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ct(e){return ht(e).getComputedStyle(e)}function Ot(e){return["table","td","th"].indexOf(pt(e))>=0}function At(e){return((ft(e)?e.ownerDocument:e.document)||window.document).documentElement}function Rt(e){return"html"===pt(e)?e:e.assignedSlot||e.parentNode||(gt(e)?e.host:null)||At(e)}function Mt(e){return mt(e)&&"fixed"!==Ct(e).position?e.offsetParent:null}function Dt(e){for(var t=ht(e),n=Mt(e);n&&Ot(n)&&"static"===Ct(n).position;)n=Mt(n);return n&&("html"===pt(n)||"body"===pt(n)&&"static"===Ct(n).position)?t:n||function(e){var t=/firefox/i.test(St());if(/Trident/i.test(St())&&mt(e)&&"fixed"===Ct(e).position)return null;var n=Rt(e);for(gt(n)&&(n=n.host);mt(n)&&["html","body"].indexOf(pt(n))<0;){var r=Ct(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function kt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function xt(e,t,n){return Et(e,_t(t,n))}function Lt(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Pt(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}const jt={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=yt(n.placement),c=kt(a),l=[We,Ge].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(e,t){return Lt("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Pt(e,qe))}(i.padding,n),d=Nt(o),p="y"===c?Ve:We,h="y"===c?He:Ge,f=n.rects.reference[l]+n.rects.reference[c]-s[c]-n.rects.popper[l],m=s[c]-n.rects.reference[c],g=Dt(o),v=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,y=f/2-m/2,E=u[p],_=v-d[l]-u[h],b=v/2-d[l]/2+y,S=xt(E,b,_),T=c;n.modifiersData[r]=((t={})[T]=S,t.centerOffset=S-b,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&wt(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ut(e){return e.split("-")[1]}var Ft={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zt(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,c=e.gpuAcceleration,l=e.adaptive,u=e.roundOffsets,d=e.isFixed,p=s.x,h=void 0===p?0:p,f=s.y,m=void 0===f?0:f,g="function"==typeof u?u({x:h,y:m}):{x:h,y:m};h=g.x,m=g.y;var v=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),E=We,_=Ve,b=window;if(l){var S=Dt(n),T="clientHeight",I="clientWidth";S===ht(n)&&"static"!==Ct(S=At(n)).position&&"absolute"===a&&(T="scrollHeight",I="scrollWidth"),(i===Ve||(i===We||i===Ge)&&o===Qe)&&(_=He,m-=(d&&S===b&&b.visualViewport?b.visualViewport.height:S[T])-r.height,m*=c?1:-1),i!==We&&(i!==Ve&&i!==He||o!==Qe)||(E=Ge,h-=(d&&S===b&&b.visualViewport?b.visualViewport.width:S[I])-r.width,h*=c?1:-1)}var N,w=Object.assign({position:a},l&&Ft),C=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:bt(n*i)/i||0,y:bt(r*i)/i||0}}({x:h,y:m},ht(n)):{x:h,y:m};return h=C.x,m=C.y,c?Object.assign({},w,((N={})[_]=y?"0":"",N[E]=v?"0":"",N.transform=(b.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",N)):Object.assign({},w,((t={})[_]=y?m+"px":"",t[E]=v?h+"px":"",t.transform="",t))}const Bt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,c=void 0===a||a,l={placement:yt(t.placement),variation:Ut(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,zt(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,zt(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Vt={passive:!0};const Ht={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,c=ht(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&l.forEach((function(e){e.addEventListener("scroll",n.update,Vt)})),a&&c.addEventListener("resize",n.update,Vt),function(){o&&l.forEach((function(e){e.removeEventListener("scroll",n.update,Vt)})),a&&c.removeEventListener("resize",n.update,Vt)}},data:{}};var Gt={left:"right",right:"left",bottom:"top",top:"bottom"};function Wt(e){return e.replace(/left|right|bottom|top/g,(function(e){return Gt[e]}))}var Yt={start:"end",end:"start"};function qt(e){return e.replace(/start|end/g,(function(e){return Yt[e]}))}function Kt(e){var t=ht(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Qt(e){return It(At(e)).left+Kt(e).scrollLeft}function Jt(e){var t=Ct(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Xt(e){return["html","body","#document"].indexOf(pt(e))>=0?e.ownerDocument.body:mt(e)&&Jt(e)?e:Xt(Rt(e))}function Zt(e,t){var n;void 0===t&&(t=[]);var r=Xt(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=ht(r),s=i?[o].concat(o.visualViewport||[],Jt(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(Zt(Rt(s)))}function $t(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function en(e,t,n){return t===Xe?$t(function(e,t){var n=ht(e),r=At(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;var l=Tt();(l||!l&&"fixed"===t)&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a+Qt(e),y:c}}(e,n)):ft(t)?function(e,t){var n=It(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):$t(function(e){var t,n=At(e),r=Kt(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=Et(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Et(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Qt(e),c=-r.scrollTop;return"rtl"===Ct(i||n).direction&&(a+=Et(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}(At(e)))}function tn(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?yt(i):null,s=i?Ut(i):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(o){case Ve:t={x:a,y:n.y-r.height};break;case He:t={x:a,y:n.y+n.height};break;case Ge:t={x:n.x+n.width,y:c};break;case We:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var l=o?kt(o):null;if(null!=l){var u="y"===l?"height":"width";switch(s){case Ke:t[l]=t[l]-(n[u]/2-r[u]/2);break;case Qe:t[l]=t[l]+(n[u]/2-r[u]/2)}}return t}function nn(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,s=void 0===o?e.strategy:o,a=n.boundary,c=void 0===a?Je:a,l=n.rootBoundary,u=void 0===l?Xe:l,d=n.elementContext,p=void 0===d?Ze:d,h=n.altBoundary,f=void 0!==h&&h,m=n.padding,g=void 0===m?0:m,v=Lt("number"!=typeof g?g:Pt(g,qe)),y=p===Ze?$e:Ze,E=e.rects.popper,_=e.elements[f?y:p],b=function(e,t,n,r){var i="clippingParents"===t?function(e){var t=Zt(Rt(e)),n=["absolute","fixed"].indexOf(Ct(e).position)>=0&&mt(e)?Dt(e):e;return ft(n)?t.filter((function(e){return ft(e)&&wt(e,n)&&"body"!==pt(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(t,n){var i=en(e,n,r);return t.top=Et(i.top,t.top),t.right=_t(i.right,t.right),t.bottom=_t(i.bottom,t.bottom),t.left=Et(i.left,t.left),t}),en(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(ft(_)?_:_.contextElement||At(e.elements.popper),c,u,s),S=It(e.elements.reference),T=tn({reference:S,element:E,strategy:"absolute",placement:i}),I=$t(Object.assign({},E,T)),N=p===Ze?I:S,w={top:b.top-N.top+v.top,bottom:N.bottom-b.bottom+v.bottom,left:b.left-N.left+v.left,right:N.right-b.right+v.right},C=e.modifiersData.offset;if(p===Ze&&C){var O=C[i];Object.keys(w).forEach((function(e){var t=[Ge,He].indexOf(e)>=0?1:-1,n=[Ve,He].indexOf(e)>=0?"y":"x";w[e]+=O[n]*t}))}return w}function rn(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?tt:c,u=Ut(r),d=u?a?et:et.filter((function(e){return Ut(e)===u})):qe,p=d.filter((function(e){return l.indexOf(e)>=0}));0===p.length&&(p=d);var h=p.reduce((function(t,n){return t[n]=nn(e,{placement:n,boundary:i,rootBoundary:o,padding:s})[yt(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}const on={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,c=n.fallbackPlacements,l=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,f=void 0===h||h,m=n.allowedAutoPlacements,g=t.options.placement,v=yt(g),y=c||(v!==g&&f?function(e){if(yt(e)===Ye)return[];var t=Wt(e);return[qt(e),t,qt(t)]}(g):[Wt(g)]),E=[g].concat(y).reduce((function(e,n){return e.concat(yt(n)===Ye?rn(t,{placement:n,boundary:u,rootBoundary:d,padding:l,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),_=t.rects.reference,b=t.rects.popper,S=new Map,T=!0,I=E[0],N=0;N<E.length;N++){var w=E[N],C=yt(w),O=Ut(w)===Ke,A=[Ve,He].indexOf(C)>=0,R=A?"width":"height",M=nn(t,{placement:w,boundary:u,rootBoundary:d,altBoundary:p,padding:l}),D=A?O?Ge:We:O?He:Ve;_[R]>b[R]&&(D=Wt(D));var k=Wt(D),x=[];if(o&&x.push(M[C]<=0),a&&x.push(M[D]<=0,M[k]<=0),x.every((function(e){return e}))){I=w,T=!1;break}S.set(w,x)}if(T)for(var L=function(e){var t=E.find((function(t){var n=S.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return I=t,"break"},P=f?3:1;P>0&&"break"!==L(P);P--);t.placement!==I&&(t.modifiersData[r]._skip=!0,t.placement=I,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function sn(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function an(e){return[Ve,Ge,He,We].some((function(t){return e[t]>=0}))}const cn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=nn(t,{elementContext:"reference"}),a=nn(t,{altBoundary:!0}),c=sn(s,r),l=sn(a,i,o),u=an(c),d=an(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}},ln={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,s=tt.reduce((function(e,n){return e[n]=function(e,t,n){var r=yt(e),i=[We,Ve].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[We,Ge].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=s}},un={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=tn({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},dn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,d=n.padding,p=n.tether,h=void 0===p||p,f=n.tetherOffset,m=void 0===f?0:f,g=nn(t,{boundary:c,rootBoundary:l,padding:d,altBoundary:u}),v=yt(t.placement),y=Ut(t.placement),E=!y,_=kt(v),b="x"===_?"y":"x",S=t.modifiersData.popperOffsets,T=t.rects.reference,I=t.rects.popper,N="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,w="number"==typeof N?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(S){if(o){var A,R="y"===_?Ve:We,M="y"===_?He:Ge,D="y"===_?"height":"width",k=S[_],x=k+g[R],L=k-g[M],P=h?-I[D]/2:0,j=y===Ke?T[D]:I[D],U=y===Ke?-I[D]:-T[D],F=t.elements.arrow,z=h&&F?Nt(F):{width:0,height:0},B=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=B[R],H=B[M],G=xt(0,T[D],z[D]),W=E?T[D]/2-P-G-V-w.mainAxis:j-G-V-w.mainAxis,Y=E?-T[D]/2+P+G+H+w.mainAxis:U+G+H+w.mainAxis,q=t.elements.arrow&&Dt(t.elements.arrow),K=q?"y"===_?q.clientTop||0:q.clientLeft||0:0,Q=null!=(A=null==C?void 0:C[_])?A:0,J=k+Y-Q,X=xt(h?_t(x,k+W-Q-K):x,k,h?Et(L,J):L);S[_]=X,O[_]=X-k}if(a){var Z,$="x"===_?Ve:We,ee="x"===_?He:Ge,te=S[b],ne="y"===b?"height":"width",re=te+g[$],ie=te-g[ee],oe=-1!==[Ve,We].indexOf(v),se=null!=(Z=null==C?void 0:C[b])?Z:0,ae=oe?re:te-T[ne]-I[ne]-se+w.altAxis,ce=oe?te+T[ne]+I[ne]-se-w.altAxis:ie,le=h&&oe?function(e,t,n){var r=xt(e,t,n);return r>n?n:r}(ae,te,ce):xt(h?ae:re,te,h?ce:ie);S[b]=le,O[b]=le-te}t.modifiersData[r]=O}},requiresIfExists:["offset"]};function pn(e,t,n){void 0===n&&(n=!1);var r,i,o=mt(t),s=mt(t)&&function(e){var t=e.getBoundingClientRect(),n=bt(t.width)/e.offsetWidth||1,r=bt(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=At(t),c=It(e,s,n),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(o||!o&&!n)&&(("body"!==pt(t)||Jt(a))&&(l=(r=t)!==ht(r)&&mt(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:Kt(r)),mt(t)?((u=It(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):a&&(u.x=Qt(a))),{x:c.left+l.scrollLeft-u.x,y:c.top+l.scrollTop-u.y,width:c.width,height:c.height}}function hn(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}var fn={placement:"bottom",modifiers:[],strategy:"absolute"};function mn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function gn(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?fn:i;return function(e,t,n){void 0===n&&(n=o);var i,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},fn,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],l=!1,u={state:a,setOptions:function(n){var i="function"==typeof n?n(a.options):n;d(),a.options=Object.assign({},o,a.options,i),a.scrollParents={reference:ft(e)?Zt(e):e.contextElement?Zt(e.contextElement):[],popper:Zt(t)};var s,l,p=function(e){var t=hn(e);return dt.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((s=[].concat(r,a.options.modifiers),l=s.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(l).map((function(e){return l[e]}))));return a.orderedModifiers=p.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var o=i({state:a,name:t,instance:u,options:r});c.push(o||function(){})}})),u.update()},forceUpdate:function(){if(!l){var e=a.elements,t=e.reference,n=e.popper;if(mn(t,n)){a.rects={reference:pn(t,Dt(n),"fixed"===a.options.strategy),popper:Nt(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var i=a.orderedModifiers[r],o=i.fn,s=i.options,c=void 0===s?{}:s,d=i.name;"function"==typeof o&&(a=o({state:a,options:c,name:d,instance:u})||a)}else a.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){u.forceUpdate(),e(a)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(i())}))}))),s}),destroy:function(){d(),l=!0}};if(!mn(e,t))return u;function d(){c.forEach((function(e){return e()})),c=[]}return u.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var vn=gn(),yn=gn({defaultModifiers:[Ht,un,Bt,vt]}),En=gn({defaultModifiers:[Ht,un,Bt,vt,ln,on,dn,jt,cn]});const _n=Object.freeze(Object.defineProperty({__proto__:null,afterMain:at,afterRead:it,afterWrite:ut,applyStyles:vt,arrow:jt,auto:Ye,basePlacements:qe,beforeMain:ot,beforeRead:nt,beforeWrite:ct,bottom:He,clippingParents:Je,computeStyles:Bt,createPopper:En,createPopperBase:vn,createPopperLite:yn,detectOverflow:nn,end:Qe,eventListeners:Ht,flip:on,hide:cn,left:We,main:st,modifierPhases:dt,offset:ln,placements:tt,popper:Ze,popperGenerator:gn,popperOffsets:un,preventOverflow:dn,read:rt,reference:$e,right:Ge,start:Ke,top:Ve,variationPlacements:et,viewport:Xe,write:lt},Symbol.toStringTag,{value:"Module"})),bn="dropdown",Sn=".bs.dropdown",Tn=".data-api",In="ArrowUp",Nn="ArrowDown",wn="hide".concat(Sn),Cn="hidden".concat(Sn),On="show".concat(Sn),An="shown".concat(Sn),Rn="click".concat(Sn).concat(Tn),Mn="keydown".concat(Sn).concat(Tn),Dn="keyup".concat(Sn).concat(Tn),kn="show",xn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ln="".concat(xn,".").concat(kn),Pn=".dropdown-menu",jn=f()?"top-end":"top-start",Un=f()?"top-start":"top-end",Fn=f()?"bottom-end":"bottom-start",zn=f()?"bottom-start":"bottom-end",Bn=f()?"left-start":"right-start",Vn=f()?"right-start":"left-start",Hn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Gn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Wn extends z{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=V.next(this._element,Pn)[0]||V.prev(this._element,Pn)[0]||V.findOne(Pn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Hn}static get DefaultType(){return Gn}static get NAME(){return bn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(c(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!x.trigger(this._element,On,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))x.on(e,"mouseover",u);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(kn),this._element.classList.add(kn),x.trigger(this._element,An,e)}}hide(){if(c(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!x.trigger(this._element,wn,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))x.off(e,"mouseover",u);this._popper&&this._popper.destroy(),this._menu.classList.remove(kn),this._element.classList.remove(kn),this._element.setAttribute("aria-expanded","false"),U.removeDataAttribute(this._menu,"popper"),x.trigger(this._element,Cn,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!o(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError("".concat(bn.toUpperCase(),': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'));return e}_createPopper(){if(void 0===_n)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:o(this._config.reference)?e=s(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=En(e,this._menu,t)}_isShown(){return this._menu.classList.contains(kn)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Bn;if(e.classList.contains("dropstart"))return Vn;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Un:jn:t?zn:Fn}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(U.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...g(this._config.popperConfig,[e])}}_selectMenuItem(e){let{key:t,target:n}=e;const r=V.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((e=>a(e)));r.length&&y(r,n,t===Nn,!r.includes(n)).focus()}static jQueryInterface(e){return this.each((function(){const t=Wn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=V.find(Ln);for(const n of t){const t=Wn.getInstance(n);if(!t||!1===t._config.autoClose)continue;const r=e.composedPath(),i=r.includes(t._menu);if(r.includes(t._element)||"inside"===t._config.autoClose&&!i||"outside"===t._config.autoClose&&i)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const o={relatedTarget:t._element};"click"===e.type&&(o.clickEvent=e),t._completeHide(o)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),n="Escape"===e.key,r=[In,Nn].includes(e.key);if(!r&&!n)return;if(t&&!n)return;e.preventDefault();const i=this.matches(xn)?this:V.prev(this,xn)[0]||V.next(this,xn)[0]||V.findOne(xn,e.delegateTarget.parentNode),o=Wn.getOrCreateInstance(i);if(r)return e.stopPropagation(),o.show(),void o._selectMenuItem(e);o._isShown()&&(e.stopPropagation(),o.hide(),i.focus())}}x.on(document,Mn,xn,Wn.dataApiKeydownHandler),x.on(document,Mn,Pn,Wn.dataApiKeydownHandler),x.on(document,Rn,Wn.clearMenus),x.on(document,Dn,Wn.clearMenus),x.on(document,Rn,xn,(function(e){e.preventDefault(),Wn.getOrCreateInstance(this).toggle()})),m(Wn);const Yn="backdrop",qn="show",Kn="mousedown.bs.".concat(Yn),Qn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Jn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Xn extends F{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Qn}static get DefaultType(){return Jn}static get NAME(){return Yn}show(e){if(!this._config.isVisible)return void g(e);this._append();const t=this._getElement();this._config.isAnimated&&d(t),t.classList.add(qn),this._emulateAnimation((()=>{g(e)}))}hide(e){this._config.isVisible?(this._getElement().classList.remove(qn),this._emulateAnimation((()=>{this.dispose(),g(e)}))):g(e)}dispose(){this._isAppended&&(x.off(this._element,Kn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=s(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),x.on(e,Kn,(()=>{g(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(e){v(e,this._getElement(),this._config.isAnimated)}}const Zn=".bs.focustrap",$n="focusin".concat(Zn),er="keydown.tab".concat(Zn),tr="backward",nr={autofocus:!0,trapElement:null},rr={autofocus:"boolean",trapElement:"element"};class ir extends F{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return nr}static get DefaultType(){return rr}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),x.off(document,Zn),x.on(document,$n,(e=>this._handleFocusin(e))),x.on(document,er,(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,x.off(document,Zn))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const n=V.focusableChildren(t);0===n.length?t.focus():this._lastTabNavDirection===tr?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?tr:"forward")}}const or=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",sr=".sticky-top",ar="padding-right",cr="margin-right";class lr{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ar,(t=>t+e)),this._setElementAttributes(or,ar,(t=>t+e)),this._setElementAttributes(sr,cr,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ar),this._resetElementAttributes(or,ar),this._resetElementAttributes(sr,cr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const r=this.getWidth();this._applyManipulationCallback(e,(e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+r)return;this._saveInitialAttribute(e,t);const i=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,"".concat(n(Number.parseFloat(i)),"px"))}))}_saveInitialAttribute(e,t){const n=e.style.getPropertyValue(t);n&&U.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,(e=>{const n=U.getDataAttribute(e,t);null!==n?(U.removeDataAttribute(e,t),e.style.setProperty(t,n)):e.style.removeProperty(t)}))}_applyManipulationCallback(e,t){if(o(e))t(e);else for(const n of V.find(e,this._element))t(n)}}const ur=".bs.modal",dr="hide".concat(ur),pr="hidePrevented".concat(ur),hr="hidden".concat(ur),fr="show".concat(ur),mr="shown".concat(ur),gr="resize".concat(ur),vr="click.dismiss".concat(ur),yr="mousedown.dismiss".concat(ur),Er="keydown.dismiss".concat(ur),_r="click".concat(ur,".data-api"),br="modal-open",Sr="show",Tr="modal-static",Ir={backdrop:!0,focus:!0,keyboard:!0},Nr={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class wr extends z{constructor(e,t){super(e,t),this._dialog=V.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new lr,this._addEventListeners()}static get Default(){return Ir}static get DefaultType(){return Nr}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||x.trigger(this._element,fr,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(br),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){this._isShown&&!this._isTransitioning&&(x.trigger(this._element,dr).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Sr),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){x.off(window,ur),x.off(this._dialog,ur),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Xn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ir({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=V.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),d(this._element),this._element.classList.add(Sr),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,x.trigger(this._element,mr,{relatedTarget:e})}),this._dialog,this._isAnimated())}_addEventListeners(){x.on(this._element,Er,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),x.on(window,gr,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),x.on(this._element,yr,(e=>{x.one(this._element,vr,(t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(br),this._resetAdjustments(),this._scrollBar.reset(),x.trigger(this._element,hr)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(x.trigger(this._element,pr).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(Tr)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Tr),this._queueCallback((()=>{this._element.classList.remove(Tr),this._queueCallback((()=>{this._element.style.overflowY=t}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=t>0;if(n&&!e){const e=f()?"paddingLeft":"paddingRight";this._element.style[e]="".concat(t,"px")}if(!n&&e){const e=f()?"paddingRight":"paddingLeft";this._element.style[e]="".concat(t,"px")}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const n=wr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e](t)}}))}}x.on(document,_r,'[data-bs-toggle="modal"]',(function(e){const t=V.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),x.one(t,fr,(e=>{e.defaultPrevented||x.one(t,hr,(()=>{a(this)&&this.focus()}))}));const n=V.findOne(".modal.show");n&&wr.getInstance(n).hide(),wr.getOrCreateInstance(t).toggle(this)})),H(wr),m(wr);const Cr=".bs.offcanvas",Or=".data-api",Ar="load".concat(Cr).concat(Or),Rr="show",Mr="showing",Dr="hiding",kr=".offcanvas.show",xr="show".concat(Cr),Lr="shown".concat(Cr),Pr="hide".concat(Cr),jr="hidePrevented".concat(Cr),Ur="hidden".concat(Cr),Fr="resize".concat(Cr),zr="click".concat(Cr).concat(Or),Br="keydown.dismiss".concat(Cr),Vr={backdrop:!0,keyboard:!0,scroll:!1},Hr={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Gr extends z{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Vr}static get DefaultType(){return Hr}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||x.trigger(this._element,xr,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new lr).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Mr),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Rr),this._element.classList.remove(Mr),x.trigger(this._element,Lr,{relatedTarget:e})}),this._element,!0))}hide(){this._isShown&&(x.trigger(this._element,Pr).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Dr),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(Rr,Dr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new lr).reset(),x.trigger(this._element,Ur)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Xn({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():x.trigger(this._element,jr)}:null})}_initializeFocusTrap(){return new ir({trapElement:this._element})}_addEventListeners(){x.on(this._element,Br,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():x.trigger(this._element,jr))}))}static jQueryInterface(e){return this.each((function(){const t=Gr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}x.on(document,zr,'[data-bs-toggle="offcanvas"]',(function(e){const t=V.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this))return;x.one(t,Ur,(()=>{a(this)&&this.focus()}));const n=V.findOne(kr);n&&n!==t&&Gr.getInstance(n).hide(),Gr.getOrCreateInstance(t).toggle(this)})),x.on(window,Ar,(()=>{for(const e of V.find(kr))Gr.getOrCreateInstance(e).show()})),x.on(window,Fr,(()=>{for(const e of V.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Gr.getOrCreateInstance(e).hide()})),H(Gr),m(Gr);const Wr={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Yr=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),qr=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Kr=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?!Yr.has(n)||Boolean(qr.test(e.nodeValue)):t.filter((e=>e instanceof RegExp)).some((e=>e.test(n)))},Qr={allowList:Wr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Jr={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Xr={entry:"(string|element|function|null)",selector:"(string|element)"};class Zr extends F{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Qr}static get DefaultType(){return Jr}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((e=>this._resolvePossibleFunction(e))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,i]of Object.entries(this._config.content))this._setContent(e,i,r);const t=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&t.classList.add(...n.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,n]of Object.entries(e))super._typeCheckConfig({selector:t,entry:n},Xr)}_setContent(e,t,n){const r=V.findOne(n,e);r&&((t=this._resolvePossibleFunction(t))?o(t)?this._putElementInTemplate(s(t),r):this._config.html?r.innerHTML=this._maybeSanitize(t):r.textContent=t:r.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);const r=(new window.DOMParser).parseFromString(e,"text/html"),i=[].concat(...r.body.querySelectorAll("*"));for(const o of i){const e=o.nodeName.toLowerCase();if(!Object.keys(t).includes(e)){o.remove();continue}const n=[].concat(...o.attributes),r=[].concat(t["*"]||[],t[e]||[]);for(const t of n)Kr(t,r)||o.removeAttribute(t.nodeName)}return r.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return g(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const $r=new Set(["sanitize","allowList","sanitizeFn"]),ei="fade",ti="show",ni=".modal",ri="hide.bs.modal",ii="hover",oi="focus",si={AUTO:"auto",TOP:"top",RIGHT:f()?"left":"right",BOTTOM:"bottom",LEFT:f()?"right":"left"},ai={allowList:Wr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},ci={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class li extends z{constructor(e,t){if(void 0===_n)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ai}static get DefaultType(){return ci}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),x.off(this._element.closest(ni),ri,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=x.trigger(this._element,this.constructor.eventName("show")),t=(l(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(n),x.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(ti),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))x.on(i,"mouseover",u);this._queueCallback((()=>{x.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!x.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ti),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))x.off(e,"mouseover",u);this._activeTrigger.click=!1,this._activeTrigger[oi]=!1,this._activeTrigger[ii]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),x.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(ei,ti),t.classList.add("bs-".concat(this.constructor.NAME,"-auto"));const n=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",n),this._isAnimated()&&t.classList.add(ei),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Zr({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ei)}_isShown(){return this.tip&&this.tip.classList.contains(ti)}_createPopper(e){const t=g(this._config.placement,[this,e,this._element]),n=si[t.toUpperCase()];return En(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return g(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...g(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)x.on(this._element,this.constructor.eventName("click"),this._config.selector,(e=>{this._initializeOnDelegatedTarget(e).toggle()}));else if("manual"!==t){const e=t===ii?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=t===ii?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");x.on(this._element,e,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?oi:ii]=!0,t._enter()})),x.on(this._element,n,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?oi:ii]=t._element.contains(e.relatedTarget),t._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},x.on(this._element.closest(ni),ri,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=U.getDataAttributes(this._element);for(const n of Object.keys(t))$r.has(n)&&delete t[n];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:s(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,n]of Object.entries(this._config))this.constructor.Default[t]!==n&&(e[t]=n);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each((function(){const t=li.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}m(li);const ui={...li.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},di={...li.DefaultType,content:"(null|string|element|function)"};class pi extends li{static get Default(){return ui}static get DefaultType(){return di}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each((function(){const t=pi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}m(pi);const hi=".bs.scrollspy",fi="activate".concat(hi),mi="click".concat(hi),gi="load".concat(hi,".data-api"),vi="active",yi="[href]",Ei=".nav-link",_i="".concat(Ei,", .nav-item > ").concat(Ei,", .list-group-item"),bi={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Si={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ti extends z{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return bi}static get DefaultType(){return Si}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=s(e.target)||document.body,e.rootMargin=e.offset?"".concat(e.offset,"px 0px -30%"):e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map((e=>Number.parseFloat(e)))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(x.off(this._config.target,mi),x.on(this._config.target,mi,yi,(e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const n=this._rootElement||window,r=t.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:r,behavior:"smooth"});n.scrollTop=r}})))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((e=>this._observerCallback(e)),e)}_observerCallback(e){const t=e=>this._targetLinks.get("#".concat(e.target.id)),n=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},r=(this._rootElement||document.documentElement).scrollTop,i=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(o));continue}const e=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&e){if(n(o),!r)return}else i||e||n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=V.find(yi,this._config.target);for(const t of e){if(!t.hash||c(t))continue;const e=V.findOne(decodeURI(t.hash),this._element);a(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(vi),this._activateParents(e),x.trigger(this._element,fi,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))V.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(vi);else for(const t of V.parents(e,".nav, .list-group"))for(const e of V.prev(t,_i))e.classList.add(vi)}_clearActiveClass(e){e.classList.remove(vi);const t=V.find("".concat(yi,".").concat(vi),e);for(const n of t)n.classList.remove(vi)}static jQueryInterface(e){return this.each((function(){const t=Ti.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}x.on(window,gi,(()=>{for(const e of V.find('[data-bs-spy="scroll"]'))Ti.getOrCreateInstance(e)})),m(Ti);const Ii=".bs.tab",Ni="hide".concat(Ii),wi="hidden".concat(Ii),Ci="show".concat(Ii),Oi="shown".concat(Ii),Ai="click".concat(Ii),Ri="keydown".concat(Ii),Mi="load".concat(Ii),Di="ArrowLeft",ki="ArrowRight",xi="ArrowUp",Li="ArrowDown",Pi="Home",ji="End",Ui="active",Fi="fade",zi="show",Bi=".dropdown-toggle",Vi=":not(".concat(Bi,")"),Hi='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Gi=".nav-link".concat(Vi,", .list-group-item").concat(Vi,', [role="tab"]').concat(Vi,", ").concat(Hi),Wi=".".concat(Ui,'[data-bs-toggle="tab"], .').concat(Ui,'[data-bs-toggle="pill"], .').concat(Ui,'[data-bs-toggle="list"]');class Yi extends z{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),x.on(this._element,Ri,(e=>this._keydown(e))))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),n=t?x.trigger(t,Ni,{relatedTarget:e}):null;x.trigger(e,Ci,{relatedTarget:t}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Ui),this._activate(V.getElementFromSelector(e)),this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),x.trigger(e,Oi,{relatedTarget:t})):e.classList.add(zi)}),e,e.classList.contains(Fi)))}_deactivate(e,t){e&&(e.classList.remove(Ui),e.blur(),this._deactivate(V.getElementFromSelector(e)),this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),x.trigger(e,wi,{relatedTarget:t})):e.classList.remove(zi)}),e,e.classList.contains(Fi)))}_keydown(e){if(![Di,ki,xi,Li,Pi,ji].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter((e=>!c(e)));let n;if([Pi,ji].includes(e.key))n=t[e.key===Pi?0:t.length-1];else{const r=[ki,Li].includes(e.key);n=y(t,e.target,r,!0)}n&&(n.focus({preventScroll:!0}),Yi.getOrCreateInstance(n).show())}_getChildren(){return V.find(Gi,this._parent)}_getActiveElem(){return this._getChildren().find((e=>this._elemIsActive(e)))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const n of t)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",t),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=V.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby","".concat(e.id)))}_toggleDropDown(e,t){const n=this._getOuterElement(e);if(!n.classList.contains("dropdown"))return;const r=(e,r)=>{const i=V.findOne(e,n);i&&i.classList.toggle(r,t)};r(Bi,Ui),r(".dropdown-menu",zi),n.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}_elemIsActive(e){return e.classList.contains(Ui)}_getInnerElement(e){return e.matches(Gi)?e:V.findOne(Gi,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each((function(){const t=Yi.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}x.on(document,Ai,Hi,(function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this)||Yi.getOrCreateInstance(this).show()})),x.on(window,Mi,(()=>{for(const e of V.find(Wi))Yi.getOrCreateInstance(e)})),m(Yi);const qi=".bs.toast",Ki="mouseover".concat(qi),Qi="mouseout".concat(qi),Ji="focusin".concat(qi),Xi="focusout".concat(qi),Zi="hide".concat(qi),$i="hidden".concat(qi),eo="show".concat(qi),to="shown".concat(qi),no="hide",ro="show",io="showing",oo={animation:"boolean",autohide:"boolean",delay:"number"},so={animation:!0,autohide:!0,delay:5e3};class ao extends z{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return so}static get DefaultType(){return oo}static get NAME(){return"toast"}show(){x.trigger(this._element,eo).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(no),d(this._element),this._element.classList.add(ro,io),this._queueCallback((()=>{this._element.classList.remove(io),x.trigger(this._element,to),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(x.trigger(this._element,Zi).defaultPrevented||(this._element.classList.add(io),this._queueCallback((()=>{this._element.classList.add(no),this._element.classList.remove(io,ro),x.trigger(this._element,$i)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ro),super.dispose()}isShown(){return this._element.classList.contains(ro)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){x.on(this._element,Ki,(e=>this._onInteraction(e,!0))),x.on(this._element,Qi,(e=>this._onInteraction(e,!1))),x.on(this._element,Ji,(e=>this._onInteraction(e,!0))),x.on(this._element,Xi,(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=ao.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}return H(ao),m(ao),{Alert:q,Button:Q,Carousel:Ce,Collapse:Be,Dropdown:Wn,Modal:wr,Offcanvas:Gr,Popover:pi,ScrollSpy:Ti,Tab:Yi,Toast:ao,Tooltip:li}}()},2949:e=>{function t(e){var n,r,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(n=0;n<o;n++)e[n]&&(r=t(e[n]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function n(){for(var e,n,r=0,i="",o=arguments.length;r<o;r++)(e=arguments[r])&&(n=t(e))&&(i&&(i+=" "),i+=n);return i}e.exports=n,e.exports.clsx=n},427:(e,t)=>{"use strict";t.addLeadingZeros=function(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}},2222:(e,t,n)=>{"use strict";Object.defineProperty(t,"defaultLocale",{enumerable:!0,get:function(){return r.enUS}});var r=n(8757)},6868:(e,t)=>{"use strict";t.getDefaultOptions=function(){return n},t.setDefaultOptions=function(e){n=e};let n={}},4578:(e,t,n)=>{"use strict";t.formatters=void 0;var r=n(5440),i=n(9871),o=n(8890),s=n(2252),a=n(7941),c=n(427),l=n(7630);const u="midnight",d="noon",p="morning",h="afternoon",f="evening",m="night";t.formatters={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return l.lightFormatters.y(e,t)},Y:function(e,t,n,r){const i=(0,a.getWeekYear)(e,r),o=i>0?i:1-i;if("YY"===t){const e=o%100;return(0,c.addLeadingZeros)(e,2)}return"Yo"===t?n.ordinalNumber(o,{unit:"year"}):(0,c.addLeadingZeros)(o,t.length)},R:function(e,t){const n=(0,o.getISOWeekYear)(e);return(0,c.addLeadingZeros)(n,t.length)},u:function(e,t){const n=e.getFullYear();return(0,c.addLeadingZeros)(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return(0,c.addLeadingZeros)(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return(0,c.addLeadingZeros)(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return l.lightFormatters.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return(0,c.addLeadingZeros)(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=(0,s.getWeek)(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):(0,c.addLeadingZeros)(i,t.length)},I:function(e,t,n){const r=(0,i.getISOWeek)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):(0,c.addLeadingZeros)(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):l.lightFormatters.d(e,t)},D:function(e,t,n){const i=(0,r.getDayOfYear)(e);return"Do"===t?n.ordinalNumber(i,{unit:"dayOfYear"}):(0,c.addLeadingZeros)(i,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return(0,c.addLeadingZeros)(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return(0,c.addLeadingZeros)(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return(0,c.addLeadingZeros)(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?d:0===r?u:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?f:r>=12?h:r>=4?p:m,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return l.lightFormatters.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):l.lightFormatters.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):(0,c.addLeadingZeros)(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):(0,c.addLeadingZeros)(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):l.lightFormatters.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):l.lightFormatters.s(e,t)},S:function(e,t){return l.lightFormatters.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return v(r);case"XXXX":case"XX":return y(r);default:return y(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return v(r);case"xxxx":case"xx":return y(r);default:return y(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+g(r,":");default:return"GMT"+y(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+g(r,":");default:return"GMT"+y(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return(0,c.addLeadingZeros)(r,t.length)},T:function(e,t,n){const r=e.getTime();return(0,c.addLeadingZeros)(r,t.length)}};function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),o=r%60;return 0===o?n+String(i):n+String(i)+t+(0,c.addLeadingZeros)(o,2)}function v(e,t){if(e%60===0){return(e>0?"-":"+")+(0,c.addLeadingZeros)(Math.abs(e)/60,2)}return y(e,t)}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+(0,c.addLeadingZeros)(Math.trunc(r/60),2)+t+(0,c.addLeadingZeros)(r%60,2)}},7630:(e,t,n)=>{"use strict";t.lightFormatters=void 0;var r=n(427);t.lightFormatters={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return(0,r.addLeadingZeros)("yy"===t?i%100:i,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):(0,r.addLeadingZeros)(n+1,2)},d:(e,t)=>(0,r.addLeadingZeros)(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>(0,r.addLeadingZeros)(e.getHours()%12||12,t.length),H:(e,t)=>(0,r.addLeadingZeros)(e.getHours(),t.length),m:(e,t)=>(0,r.addLeadingZeros)(e.getMinutes(),t.length),s:(e,t)=>(0,r.addLeadingZeros)(e.getSeconds(),t.length),S(e,t){const n=t.length,i=e.getMilliseconds(),o=Math.trunc(i*Math.pow(10,n-3));return(0,r.addLeadingZeros)(o,t.length)}}},5916:(e,t)=>{"use strict";t.longFormatters=void 0;const n=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},r=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};t.longFormatters={p:r,P:(e,t)=>{const i=e.match(/(P+)(p+)?/)||[],o=i[1],s=i[2];if(!s)return n(e,t);let a;switch(o){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",n(o,t)).replace("{{time}}",r(s,t))}}},3300:(e,t,n)=>{"use strict";t.getTimezoneOffsetInMilliseconds=function(e){const t=(0,r.toDate)(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n};var r=n(5551)},8913:(e,t)=>{"use strict";t.isProtectedDayOfYearToken=function(e){return n.test(e)},t.isProtectedWeekYearToken=function(e){return r.test(e)},t.warnOrThrowProtectedError=function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),i.includes(e))throw new RangeError(r)};const n=/^D+$/,r=/^Y+$/,i=["D","DD","YY","YYYY"]},8620:(e,t,n)=>{"use strict";t.addDays=function(e,t){const n=(0,r.toDate)(e);if(isNaN(t))return(0,i.constructFrom)(e,NaN);if(!t)return n;return n.setDate(n.getDate()+t),n};var r=n(5551),i=n(4161)},5608:(e,t,n)=>{"use strict";t.addHours=function(e,t){return(0,r.addMilliseconds)(e,t*i.millisecondsInHour)};var r=n(3773),i=n(9757)},3773:(e,t,n)=>{"use strict";t.addMilliseconds=function(e,t){const n=+(0,r.toDate)(e);return(0,i.constructFrom)(e,n+t)};var r=n(5551),i=n(4161)},86:(e,t,n)=>{"use strict";t.addMinutes=function(e,t){return(0,r.addMilliseconds)(e,t*i.millisecondsInMinute)};var r=n(3773),i=n(9757)},4640:(e,t,n)=>{"use strict";t.addMonths=function(e,t){const n=(0,r.toDate)(e);if(isNaN(t))return(0,i.constructFrom)(e,NaN);if(!t)return n;const o=n.getDate(),s=(0,i.constructFrom)(e,n.getTime());s.setMonth(n.getMonth()+t+1,0);const a=s.getDate();return o>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),o),n)};var r=n(5551),i=n(4161)},1634:(e,t,n)=>{"use strict";t.addQuarters=function(e,t){const n=3*t;return(0,r.addMonths)(e,n)};var r=n(4640)},9994:(e,t,n)=>{"use strict";t.addWeeks=function(e,t){const n=7*t;return(0,r.addDays)(e,n)};var r=n(8620)},709:(e,t,n)=>{"use strict";t.addYears=function(e,t){return(0,r.addMonths)(e,12*t)};var r=n(4640)},9757:(e,t)=>{"use strict";t.secondsInYear=t.secondsInWeek=t.secondsInQuarter=t.secondsInMonth=t.secondsInMinute=t.secondsInHour=t.secondsInDay=t.quartersInYear=t.monthsInYear=t.monthsInQuarter=t.minutesInYear=t.minutesInMonth=t.minutesInHour=t.minutesInDay=t.minTime=t.millisecondsInWeek=t.millisecondsInSecond=t.millisecondsInMinute=t.millisecondsInHour=t.millisecondsInDay=t.maxTime=t.daysInYear=t.daysInWeek=void 0;t.daysInWeek=7;const n=t.daysInYear=365.2425,r=t.maxTime=24*Math.pow(10,8)*60*60*1e3,i=(t.minTime=-r,t.millisecondsInWeek=6048e5,t.millisecondsInDay=864e5,t.millisecondsInMinute=6e4,t.millisecondsInHour=36e5,t.millisecondsInSecond=1e3,t.minutesInYear=525600,t.minutesInMonth=43200,t.minutesInDay=1440,t.minutesInHour=60,t.monthsInQuarter=3,t.monthsInYear=12,t.quartersInYear=4,t.secondsInHour=3600),o=(t.secondsInMinute=60,t.secondsInDay=24*i),s=(t.secondsInWeek=7*o,t.secondsInYear=o*n),a=t.secondsInMonth=s/12;t.secondsInQuarter=3*a},4161:(e,t)=>{"use strict";t.constructFrom=function(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}},3439:(e,t,n)=>{"use strict";t.differenceInCalendarDays=function(e,t){const n=(0,i.startOfDay)(e),s=(0,i.startOfDay)(t),a=+n-(0,o.getTimezoneOffsetInMilliseconds)(n),c=+s-(0,o.getTimezoneOffsetInMilliseconds)(s);return Math.round((a-c)/r.millisecondsInDay)};var r=n(9757),i=n(6191),o=n(3300)},5575:(e,t,n)=>{"use strict";t.differenceInCalendarMonths=function(e,t){const n=(0,r.toDate)(e),i=(0,r.toDate)(t),o=n.getFullYear()-i.getFullYear(),s=n.getMonth()-i.getMonth();return 12*o+s};var r=n(5551)},9840:(e,t,n)=>{"use strict";t.differenceInCalendarYears=function(e,t){const n=(0,r.toDate)(e),i=(0,r.toDate)(t);return n.getFullYear()-i.getFullYear()};var r=n(5551)},2412:(e,t,n)=>{"use strict";t.endOfDay=function(e){const t=(0,r.toDate)(e);return t.setHours(23,59,59,999),t};var r=n(5551)},8268:(e,t,n)=>{"use strict";t.endOfMonth=function(e){const t=(0,r.toDate)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t};var r=n(5551)},4016:(e,t,n)=>{"use strict";t.endOfWeek=function(e,t){var n,o,s,a,c,l;const u=(0,i.getDefaultOptions)(),d=null!==(n=null!==(o=null!==(s=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(c=t.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==s?s:u.weekStartsOn)&&void 0!==o?o:null===(l=u.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==n?n:0,p=(0,r.toDate)(e),h=p.getDay(),f=6+(h<d?-7:0)-(h-d);return p.setDate(p.getDate()+f),p.setHours(23,59,59,999),p};var r=n(5551),i=n(6868)},4889:(e,t,n)=>{"use strict";t.endOfYear=function(e){const t=(0,r.toDate)(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t};var r=n(5551)},4333:(e,t,n)=>{"use strict";t.format=t.formatDate=function(e,t,n){var p,h,g,v,y,E,_,b,S,T,I,N,w,C;const O=(0,i.getDefaultOptions)(),A=null!==(p=null!==(h=null===n||void 0===n?void 0:n.locale)&&void 0!==h?h:O.locale)&&void 0!==p?p:r.defaultLocale,R=null!==(g=null!==(v=null!==(y=null!==(E=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==E?E:null===n||void 0===n||null===(_=n.locale)||void 0===_||null===(_=_.options)||void 0===_?void 0:_.firstWeekContainsDate)&&void 0!==y?y:O.firstWeekContainsDate)&&void 0!==v?v:null===(b=O.locale)||void 0===b||null===(b=b.options)||void 0===b?void 0:b.firstWeekContainsDate)&&void 0!==g?g:1,M=null!==(S=null!==(T=null!==(I=null!==(N=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==N?N:null===n||void 0===n||null===(w=n.locale)||void 0===w||null===(w=w.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==I?I:O.weekStartsOn)&&void 0!==T?T:null===(C=O.locale)||void 0===C||null===(C=C.options)||void 0===C?void 0:C.weekStartsOn)&&void 0!==S?S:0,D=(0,l.toDate)(e);if(!(0,c.isValid)(D))throw new RangeError("Invalid time value");let k=t.match(d).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,s.longFormatters[t])(e,A.formatLong)}return e})).join("").match(u).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:m(e)};if(o.formatters[t])return{isToken:!0,value:e};if(t.match(f))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));A.localize.preprocessor&&(k=A.localize.preprocessor(D,k));const x={firstWeekContainsDate:R,weekStartsOn:M,locale:A};return k.map((r=>{if(!r.isToken)return r.value;const i=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!(0,a.isProtectedWeekYearToken)(i))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!(0,a.isProtectedDayOfYearToken)(i))||(0,a.warnOrThrowProtectedError)(i,t,String(e));return(0,o.formatters[i[0]])(D,i,A.localize,x)})).join("")},Object.defineProperty(t,"formatters",{enumerable:!0,get:function(){return o.formatters}}),Object.defineProperty(t,"longFormatters",{enumerable:!0,get:function(){return s.longFormatters}});var r=n(2222),i=n(6868),o=n(4578),s=n(5916),a=n(8913),c=n(9858),l=n(5551);const u=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,d=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,p=/^'([^]*?)'?$/,h=/''/g,f=/[a-zA-Z]/;function m(e){const t=e.match(p);return t?t[1].replace(h,"'"):e}},5528:(e,t,n)=>{"use strict";t.getDate=function(e){const t=(0,r.toDate)(e);return t.getDate()};var r=n(5551)},7600:(e,t,n)=>{"use strict";t.getDay=function(e){const t=(0,r.toDate)(e);return t.getDay()};var r=n(5551)},5440:(e,t,n)=>{"use strict";t.getDayOfYear=function(e){const t=(0,o.toDate)(e),n=(0,r.differenceInCalendarDays)(t,(0,i.startOfYear)(t));return n+1};var r=n(3439),i=n(7332),o=n(5551)},272:(e,t,n)=>{"use strict";t.getDaysInMonth=function(e){const t=(0,r.toDate)(e),n=t.getFullYear(),o=t.getMonth(),s=(0,i.constructFrom)(e,0);return s.setFullYear(n,o+1,0),s.setHours(0,0,0,0),s.getDate()};var r=n(5551),i=n(4161)},7153:(e,t,n)=>{"use strict";t.getDefaultOptions=function(){return Object.assign({},(0,r.getDefaultOptions)())};var r=n(6868)},5857:(e,t,n)=>{"use strict";t.getHours=function(e){const t=(0,r.toDate)(e);return t.getHours()};var r=n(5551)},8601:(e,t,n)=>{"use strict";t.getISODay=function(e){let t=(0,r.toDate)(e).getDay();0===t&&(t=7);return t};var r=n(5551)},9871:(e,t,n)=>{"use strict";t.getISOWeek=function(e){const t=(0,s.toDate)(e),n=+(0,i.startOfISOWeek)(t)-+(0,o.startOfISOWeekYear)(t);return Math.round(n/r.millisecondsInWeek)+1};var r=n(9757),i=n(1048),o=n(2329),s=n(5551)},8890:(e,t,n)=>{"use strict";t.getISOWeekYear=function(e){const t=(0,o.toDate)(e),n=t.getFullYear(),s=(0,r.constructFrom)(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=(0,i.startOfISOWeek)(s),c=(0,r.constructFrom)(e,0);c.setFullYear(n,0,4),c.setHours(0,0,0,0);const l=(0,i.startOfISOWeek)(c);return t.getTime()>=a.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1};var r=n(4161),i=n(1048),o=n(5551)},8667:(e,t,n)=>{"use strict";t.getMinutes=function(e){const t=(0,r.toDate)(e);return t.getMinutes()};var r=n(5551)},8920:(e,t,n)=>{"use strict";t.getMonth=function(e){const t=(0,r.toDate)(e);return t.getMonth()};var r=n(5551)},2918:(e,t,n)=>{"use strict";t.getQuarter=function(e){const t=(0,r.toDate)(e);return Math.trunc(t.getMonth()/3)+1};var r=n(5551)},2808:(e,t,n)=>{"use strict";t.getSeconds=function(e){const t=(0,r.toDate)(e);return t.getSeconds()};var r=n(5551)},7025:(e,t,n)=>{"use strict";t.getTime=function(e){const t=(0,r.toDate)(e);return t.getTime()};var r=n(5551)},2252:(e,t,n)=>{"use strict";t.getWeek=function(e,t){const n=(0,s.toDate)(e),a=+(0,i.startOfWeek)(n,t)-+(0,o.startOfWeekYear)(n,t);return Math.round(a/r.millisecondsInWeek)+1};var r=n(9757),i=n(9249),o=n(568),s=n(5551)},7941:(e,t,n)=>{"use strict";t.getWeekYear=function(e,t){var n,a,c,l,u,d;const p=(0,o.toDate)(e),h=p.getFullYear(),f=(0,s.getDefaultOptions)(),m=null!==(n=null!==(a=null!==(c=null!==(l=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==l?l:null===t||void 0===t||null===(u=t.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==c?c:f.firstWeekContainsDate)&&void 0!==a?a:null===(d=f.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1,g=(0,r.constructFrom)(e,0);g.setFullYear(h+1,0,m),g.setHours(0,0,0,0);const v=(0,i.startOfWeek)(g,t),y=(0,r.constructFrom)(e,0);y.setFullYear(h,0,m),y.setHours(0,0,0,0);const E=(0,i.startOfWeek)(y,t);return p.getTime()>=v.getTime()?h+1:p.getTime()>=E.getTime()?h:h-1};var r=n(4161),i=n(9249),o=n(5551),s=n(6868)},309:(e,t,n)=>{"use strict";t.getYear=function(e){return(0,r.toDate)(e).getFullYear()};var r=n(5551)},1882:(e,t,n)=>{"use strict";t.isAfter=function(e,t){const n=(0,r.toDate)(e),i=(0,r.toDate)(t);return n.getTime()>i.getTime()};var r=n(5551)},4593:(e,t,n)=>{"use strict";t.isBefore=function(e,t){const n=(0,r.toDate)(e),i=(0,r.toDate)(t);return+n<+i};var r=n(5551)},1890:(e,t)=>{"use strict";t.isDate=function(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}},6500:(e,t,n)=>{"use strict";t.isEqual=function(e,t){const n=(0,r.toDate)(e),i=(0,r.toDate)(t);return+n===+i};var r=n(5551)},8444:(e,t,n)=>{"use strict";t.isSameDay=function(e,t){const n=(0,r.startOfDay)(e),i=(0,r.startOfDay)(t);return+n===+i};var r=n(6191)},8060:(e,t,n)=>{"use strict";t.isSameMonth=function(e,t){const n=(0,r.toDate)(e),i=(0,r.toDate)(t);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()};var r=n(5551)},8322:(e,t,n)=>{"use strict";t.isSameQuarter=function(e,t){const n=(0,r.startOfQuarter)(e),i=(0,r.startOfQuarter)(t);return+n===+i};var r=n(1125)},4265:(e,t,n)=>{"use strict";t.isSameYear=function(e,t){const n=(0,r.toDate)(e),i=(0,r.toDate)(t);return n.getFullYear()===i.getFullYear()};var r=n(5551)},9858:(e,t,n)=>{"use strict";t.isValid=function(e){if(!(0,r.isDate)(e)&&"number"!==typeof e)return!1;const t=(0,i.toDate)(e);return!isNaN(Number(t))};var r=n(1890),i=n(5551)},4148:(e,t,n)=>{"use strict";t.isWithinInterval=function(e,t){const n=+(0,r.toDate)(e),[i,o]=[+(0,r.toDate)(t.start),+(0,r.toDate)(t.end)].sort(((e,t)=>e-t));return n>=i&&n<=o};var r=n(5551)},3997:(e,t)=>{"use strict";t.buildFormatLongFn=function(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}},9555:(e,t)=>{"use strict";t.buildLocalizeFn=function(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}},9387:(e,t)=>{"use strict";t.buildMatchFn=function(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;const s=o[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(a)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(a,(e=>e.test(s))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(a,(e=>e.test(s)));let l;l=e.valueCallback?e.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l;return{value:l,rest:t.slice(s.length)}}}},4273:(e,t)=>{"use strict";t.buildMatchPatternFn=function(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],o=t.match(e.parsePattern);if(!o)return null;let s=e.valueCallback?e.valueCallback(o[0]):o[0];s=n.valueCallback?n.valueCallback(s):s;return{value:s,rest:t.slice(i.length)}}}},8757:(e,t,n)=>{"use strict";t.enUS=void 0;var r=n(8203),i=n(342),o=n(9104),s=n(6608),a=n(4986);t.enUS={code:"en-US",formatDistance:r.formatDistance,formatLong:i.formatLong,formatRelative:o.formatRelative,localize:s.localize,match:a.match,options:{weekStartsOn:0,firstWeekContainsDate:1}}},8203:(e,t)=>{"use strict";t.formatDistance=void 0;const n={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};t.formatDistance=(e,t,r)=>{let i;const o=n[e];return i="string"===typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!==r&&void 0!==r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i}},342:(e,t,n)=>{"use strict";t.formatLong=void 0;var r=n(3997);t.formatLong={date:(0,r.buildFormatLongFn)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,r.buildFormatLongFn)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,r.buildFormatLongFn)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})}},9104:(e,t)=>{"use strict";t.formatRelative=void 0;const n={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};t.formatRelative=(e,t,r,i)=>n[e]},6608:(e,t,n)=>{"use strict";t.localize=void 0;var r=n(9555);t.localize={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,r.buildLocalizeFn)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,r.buildLocalizeFn)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:(0,r.buildLocalizeFn)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,r.buildLocalizeFn)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,r.buildLocalizeFn)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})}},4986:(e,t,n)=>{"use strict";t.match=void 0;var r=n(9387),i=n(4273);t.match={ordinalNumber:(0,i.buildMatchPatternFn)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:(0,r.buildMatchFn)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,r.buildMatchFn)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:(0,r.buildMatchFn)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,r.buildMatchFn)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,r.buildMatchFn)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})}},8442:(e,t,n)=>{"use strict";t.max=function(e){let t;return e.forEach((function(e){const n=(0,r.toDate)(e);(void 0===t||t<n||isNaN(Number(n)))&&(t=n)})),t||new Date(NaN)};var r=n(5551)},1972:(e,t,n)=>{"use strict";t.min=function(e){let t;return e.forEach((e=>{const n=(0,r.toDate)(e);(!t||t>n||isNaN(+n))&&(t=n)})),t||new Date(NaN)};var r=n(5551)},4251:(e,t,n)=>{"use strict";Object.defineProperty(t,"longFormatters",{enumerable:!0,get:function(){return a.longFormatters}}),t.parse=function(e,t,n,v){var y,E,_,b,S,T,I,N,w,C,O,A,R,M;const D=(0,i.getDefaultOptions)(),k=null!==(y=null!==(E=null===v||void 0===v?void 0:v.locale)&&void 0!==E?E:D.locale)&&void 0!==y?y:o.defaultLocale,x=null!==(_=null!==(b=null!==(S=null!==(T=null===v||void 0===v?void 0:v.firstWeekContainsDate)&&void 0!==T?T:null===v||void 0===v||null===(I=v.locale)||void 0===I||null===(I=I.options)||void 0===I?void 0:I.firstWeekContainsDate)&&void 0!==S?S:D.firstWeekContainsDate)&&void 0!==b?b:null===(N=D.locale)||void 0===N||null===(N=N.options)||void 0===N?void 0:N.firstWeekContainsDate)&&void 0!==_?_:1,L=null!==(w=null!==(C=null!==(O=null!==(A=null===v||void 0===v?void 0:v.weekStartsOn)&&void 0!==A?A:null===v||void 0===v||null===(R=v.locale)||void 0===R||null===(R=R.options)||void 0===R?void 0:R.weekStartsOn)&&void 0!==O?O:D.weekStartsOn)&&void 0!==C?C:null===(M=D.locale)||void 0===M||null===(M=M.options)||void 0===M?void 0:M.weekStartsOn)&&void 0!==w?w:0;if(""===t)return""===e?(0,s.toDate)(n):(0,r.constructFrom)(n,NaN);const P={firstWeekContainsDate:x,weekStartsOn:L,locale:k},j=[new u.DateToSystemTimezoneSetter],U=t.match(p).map((e=>{const t=e[0];if(t in a.longFormatters){return(0,a.longFormatters[t])(e,k.formatLong)}return e})).join("").match(d),F=[];for(let i of U){null!==v&&void 0!==v&&v.useAdditionalWeekYearTokens||!(0,c.isProtectedWeekYearToken)(i)||(0,c.warnOrThrowProtectedError)(i,t,e),null!==v&&void 0!==v&&v.useAdditionalDayOfYearTokens||!(0,c.isProtectedDayOfYearToken)(i)||(0,c.warnOrThrowProtectedError)(i,t,e);const o=i[0],s=l.parsers[o];if(s){const{incompatibleTokens:t}=s;if(Array.isArray(t)){const e=F.find((e=>t.includes(e.token)||e.token===o));if(e)throw new RangeError("The format string mustn't contain `".concat(e.fullToken,"` and `").concat(i,"` at the same time"))}else if("*"===s.incompatibleTokens&&F.length>0)throw new RangeError("The format string mustn't contain `".concat(i,"` and any other token at the same time"));F.push({token:o,fullToken:i});const a=s.run(e,i,k.match,P);if(!a)return(0,r.constructFrom)(n,NaN);j.push(a.setter),e=a.rest}else{if(o.match(g))throw new RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");if("''"===i?i="'":"'"===o&&(i=i.match(h)[1].replace(f,"'")),0!==e.indexOf(i))return(0,r.constructFrom)(n,NaN);e=e.slice(i.length)}}if(e.length>0&&m.test(e))return(0,r.constructFrom)(n,NaN);const z=j.map((e=>e.priority)).sort(((e,t)=>t-e)).filter(((e,t,n)=>n.indexOf(e)===t)).map((e=>j.filter((t=>t.priority===e)).sort(((e,t)=>t.subPriority-e.subPriority)))).map((e=>e[0]));let B=(0,s.toDate)(n);if(isNaN(B.getTime()))return(0,r.constructFrom)(n,NaN);const V={};for(const i of z){if(!i.validate(B,P))return(0,r.constructFrom)(n,NaN);const e=i.set(B,V,P);Array.isArray(e)?(B=e[0],Object.assign(V,e[1])):B=e}return(0,r.constructFrom)(n,B)},Object.defineProperty(t,"parsers",{enumerable:!0,get:function(){return l.parsers}});var r=n(4161),i=n(7153),o=n(2222),s=n(5551),a=n(5916),c=n(8913),l=n(7109),u=n(7318);const d=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,p=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,h=/^'([^]*?)'?$/,f=/''/g,m=/\S/,g=/[a-zA-Z]/},3458:(e,t,n)=>{"use strict";t.parseISO=function(e,t){var n;const p=null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2,h=function(e){const t={},n=e.split(i.dateTimeDelimiter);let r;if(n.length>2)return t;/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],i.timeZoneDelimiter.test(t.date)&&(t.date=e.split(i.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length)));if(r){const e=i.timezone.exec(r);e?(t.time=r.replace(e[1],""),t.timezone=e[1]):t.time=r}return t}(e);let f;if(h.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?i:100*o,restDateString:e.slice((r[1]||r[2]).length)}}(h.date,p);f=function(e,t){if(null===t)return new Date(NaN);const n=e.match(o);if(!n)return new Date(NaN);const r=!!n[4],i=c(n[1]),s=c(n[2])-1,a=c(n[3]),l=c(n[4]),p=c(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,l,p)?function(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,o=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}(t,l,p):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(u[t]||(d(e)?29:28))}(t,s,a)&&function(e,t){return t>=1&&t<=(d(e)?366:365)}(t,i)?(e.setUTCFullYear(t,s,Math.max(i,a)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!f||isNaN(f.getTime()))return new Date(NaN);const m=f.getTime();let g,v=0;if(h.time&&(v=function(e){const t=e.match(s);if(!t)return NaN;const n=l(t[1]),i=l(t[2]),o=l(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,i,o))return NaN;return n*r.millisecondsInHour+i*r.millisecondsInMinute+1e3*o}(h.time),isNaN(v)))return new Date(NaN);if(!h.timezone){const e=new Date(m+v),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}if(g=function(e){if("Z"===e)return 0;const t=e.match(a);if(!t)return 0;const n="+"===t[1]?-1:1,i=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,o))return NaN;return n*(i*r.millisecondsInHour+o*r.millisecondsInMinute)}(h.timezone),isNaN(g))return new Date(NaN);return new Date(m+v+g)};var r=n(9757);const i={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},o=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,s=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,a=/^([+-])(\d{2})(?::?(\d{2}))?$/;function c(e){return e?parseInt(e):1}function l(e){return e&&parseFloat(e.replace(",","."))||0}const u=[31,null,31,30,31,30,31,31,30,31,30,31];function d(e){return e%400===0||e%4===0&&e%100!==0}},9758:(e,t,n)=>{"use strict";t.Parser=void 0;var r=n(7318);t.Parser=class{run(e,t,n,i){const o=this.parse(e,t,n,i);return o?{setter:new r.ValueSetter(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(e,t,n){return!0}}},7318:(e,t,n)=>{"use strict";var r=n(3693).default;t.ValueSetter=t.Setter=t.DateToSystemTimezoneSetter=void 0;var i=n(3583),o=n(4161);class s{constructor(){r(this,"subPriority",0)}validate(e,t){return!0}}t.Setter=s;t.ValueSetter=class extends s{constructor(e,t,n,r,i){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}};t.DateToSystemTimezoneSetter=class extends s{constructor(){super(...arguments),r(this,"priority",10),r(this,"subPriority",-1)}set(e,t){return t.timestampIsSet?e:(0,o.constructFrom)(e,(0,i.transpose)(e,Date))}}},3704:(e,t)=>{"use strict";t.timezonePatterns=t.numericPatterns=void 0;t.numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},t.timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/}},7109:(e,t,n)=>{"use strict";t.parsers=void 0;var r=n(7615),i=n(8550),o=n(9967),s=n(5065),a=n(2403),c=n(3245),l=n(96),u=n(8403),d=n(4818),p=n(3118),h=n(5428),f=n(6099),m=n(1931),g=n(1755),v=n(4227),y=n(3023),E=n(610),_=n(6282),b=n(9766),S=n(3438),T=n(4690),I=n(8829),N=n(5640),w=n(9495),C=n(9271),O=n(7223),A=n(7804),R=n(2135),M=n(7271),D=n(6990),k=n(3883);t.parsers={G:new r.EraParser,y:new i.YearParser,Y:new o.LocalWeekYearParser,R:new s.ISOWeekYearParser,u:new a.ExtendedYearParser,Q:new c.QuarterParser,q:new l.StandAloneQuarterParser,M:new u.MonthParser,L:new d.StandAloneMonthParser,w:new p.LocalWeekParser,I:new h.ISOWeekParser,d:new f.DateParser,D:new m.DayOfYearParser,E:new g.DayParser,e:new v.LocalDayParser,c:new y.StandAloneLocalDayParser,i:new E.ISODayParser,a:new _.AMPMParser,b:new b.AMPMMidnightParser,B:new S.DayPeriodParser,h:new T.Hour1to12Parser,H:new I.Hour0to23Parser,K:new N.Hour0To11Parser,k:new w.Hour1To24Parser,m:new C.MinuteParser,s:new O.SecondParser,S:new A.FractionOfSecondParser,X:new R.ISOTimezoneWithZParser,x:new M.ISOTimezoneParser,t:new D.TimestampSecondsParser,T:new k.TimestampMillisecondsParser}},9766:(e,t,n)=>{"use strict";var r=n(3693).default;t.AMPMMidnightParser=void 0;var i=n(9758),o=n(4636);class s extends i.Parser{constructor(){super(...arguments),r(this,"priority",80),r(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours((0,o.dayPeriodEnumToHours)(n),0,0,0),e}}t.AMPMMidnightParser=s},6282:(e,t,n)=>{"use strict";var r=n(3693).default;t.AMPMParser=void 0;var i=n(9758),o=n(4636);class s extends i.Parser{constructor(){super(...arguments),r(this,"priority",80),r(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours((0,o.dayPeriodEnumToHours)(n),0,0,0),e}}t.AMPMParser=s},6099:(e,t,n)=>{"use strict";var r=n(3693).default;t.DateParser=void 0;var i=n(3704),o=n(9758),s=n(4636);const a=[31,28,31,30,31,30,31,31,30,31,30,31],c=[31,29,31,30,31,30,31,31,30,31,30,31];class l extends o.Parser{constructor(){super(...arguments),r(this,"priority",90),r(this,"subPriority",1),r(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"d":return(0,s.parseNumericPattern)(i.numericPatterns.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return(0,s.parseNDigits)(t.length,e)}}validate(e,t){const n=e.getFullYear(),r=(0,s.isLeapYearIndex)(n),i=e.getMonth();return r?t>=1&&t<=c[i]:t>=1&&t<=a[i]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}}t.DateParser=l},1931:(e,t,n)=>{"use strict";var r=n(3693).default;t.DayOfYearParser=void 0;var i=n(3704),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",90),r(this,"subpriority",1),r(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,n){switch(t){case"D":case"DD":return(0,s.parseNumericPattern)(i.numericPatterns.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return(0,s.parseNDigits)(t.length,e)}}validate(e,t){const n=e.getFullYear();return(0,s.isLeapYearIndex)(n)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}}t.DayOfYearParser=a},1755:(e,t,n)=>{"use strict";var r=n(3693).default;t.DayParser=void 0;var i=n(8844),o=n(9758);class s extends o.Parser{constructor(){super(...arguments),r(this,"priority",90),r(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=(0,i.setDay)(e,n,r)).setHours(0,0,0,0),e}}t.DayParser=s},3438:(e,t,n)=>{"use strict";var r=n(3693).default;t.DayPeriodParser=void 0;var i=n(9758),o=n(4636);class s extends i.Parser{constructor(){super(...arguments),r(this,"priority",80),r(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours((0,o.dayPeriodEnumToHours)(n),0,0,0),e}}t.DayPeriodParser=s},7615:(e,t,n)=>{"use strict";var r=n(3693).default;t.EraParser=void 0;var i=n(9758);class o extends i.Parser{constructor(){super(...arguments),r(this,"priority",140),r(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}}t.EraParser=o},2403:(e,t,n)=>{"use strict";var r=n(3693).default;t.ExtendedYearParser=void 0;var i=n(9758),o=n(4636);class s extends i.Parser{constructor(){super(...arguments),r(this,"priority",130),r(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return"u"===t?(0,o.parseNDigitsSigned)(4,e):(0,o.parseNDigitsSigned)(t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}}t.ExtendedYearParser=s},7804:(e,t,n)=>{"use strict";var r=n(3693).default;t.FractionOfSecondParser=void 0;var i=n(9758),o=n(4636);class s extends i.Parser{constructor(){super(...arguments),r(this,"priority",30),r(this,"incompatibleTokens",["t","T"])}parse(e,t){return(0,o.mapValue)((0,o.parseNDigits)(t.length,e),(e=>Math.trunc(e*Math.pow(10,3-t.length))))}set(e,t,n){return e.setMilliseconds(n),e}}t.FractionOfSecondParser=s},5640:(e,t,n)=>{"use strict";var r=n(3693).default;t.Hour0To11Parser=void 0;var i=n(3704),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",70),r(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,n){switch(t){case"K":return(0,s.parseNumericPattern)(i.numericPatterns.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return(0,s.parseNDigits)(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}}t.Hour0To11Parser=a},8829:(e,t,n)=>{"use strict";var r=n(3693).default;t.Hour0to23Parser=void 0;var i=n(3704),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",70),r(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,n){switch(t){case"H":return(0,s.parseNumericPattern)(i.numericPatterns.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return(0,s.parseNDigits)(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}}t.Hour0to23Parser=a},9495:(e,t,n)=>{"use strict";var r=n(3693).default;t.Hour1To24Parser=void 0;var i=n(3704),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",70),r(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,n){switch(t){case"k":return(0,s.parseNumericPattern)(i.numericPatterns.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return(0,s.parseNDigits)(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const r=n<=24?n%24:n;return e.setHours(r,0,0,0),e}}t.Hour1To24Parser=a},4690:(e,t,n)=>{"use strict";var r=n(3693).default;t.Hour1to12Parser=void 0;var i=n(3704),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",70),r(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,n){switch(t){case"h":return(0,s.parseNumericPattern)(i.numericPatterns.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return(0,s.parseNDigits)(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const r=e.getHours()>=12;return r&&n<12?e.setHours(n+12,0,0,0):r||12!==n?e.setHours(n,0,0,0):e.setHours(0,0,0,0),e}}t.Hour1to12Parser=a},610:(e,t,n)=>{"use strict";var r=n(3693).default;t.ISODayParser=void 0;var i=n(261),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",90),r(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,n){const r=e=>0===e?7:e;switch(t){case"i":case"ii":return(0,s.parseNDigits)(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return(0,s.mapValue)(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return(0,s.mapValue)(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return(0,s.mapValue)(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return(0,s.mapValue)(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return(e=(0,i.setISODay)(e,n)).setHours(0,0,0,0),e}}t.ISODayParser=a},7271:(e,t,n)=>{"use strict";var r=n(3693).default;t.ISOTimezoneParser=void 0;var i=n(4161),o=n(3300),s=n(3704),a=n(9758),c=n(4636);class l extends a.Parser{constructor(){super(...arguments),r(this,"priority",10),r(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return(0,c.parseTimezonePattern)(s.timezonePatterns.basicOptionalMinutes,e);case"xx":return(0,c.parseTimezonePattern)(s.timezonePatterns.basic,e);case"xxxx":return(0,c.parseTimezonePattern)(s.timezonePatterns.basicOptionalSeconds,e);case"xxxxx":return(0,c.parseTimezonePattern)(s.timezonePatterns.extendedOptionalSeconds,e);default:return(0,c.parseTimezonePattern)(s.timezonePatterns.extended,e)}}set(e,t,n){return t.timestampIsSet?e:(0,i.constructFrom)(e,e.getTime()-(0,o.getTimezoneOffsetInMilliseconds)(e)-n)}}t.ISOTimezoneParser=l},2135:(e,t,n)=>{"use strict";var r=n(3693).default;t.ISOTimezoneWithZParser=void 0;var i=n(4161),o=n(3300),s=n(3704),a=n(9758),c=n(4636);class l extends a.Parser{constructor(){super(...arguments),r(this,"priority",10),r(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return(0,c.parseTimezonePattern)(s.timezonePatterns.basicOptionalMinutes,e);case"XX":return(0,c.parseTimezonePattern)(s.timezonePatterns.basic,e);case"XXXX":return(0,c.parseTimezonePattern)(s.timezonePatterns.basicOptionalSeconds,e);case"XXXXX":return(0,c.parseTimezonePattern)(s.timezonePatterns.extendedOptionalSeconds,e);default:return(0,c.parseTimezonePattern)(s.timezonePatterns.extended,e)}}set(e,t,n){return t.timestampIsSet?e:(0,i.constructFrom)(e,e.getTime()-(0,o.getTimezoneOffsetInMilliseconds)(e)-n)}}t.ISOTimezoneWithZParser=l},5428:(e,t,n)=>{"use strict";var r=n(3693).default;t.ISOWeekParser=void 0;var i=n(5267),o=n(1048),s=n(3704),a=n(9758),c=n(4636);class l extends a.Parser{constructor(){super(...arguments),r(this,"priority",100),r(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,n){switch(t){case"I":return(0,c.parseNumericPattern)(s.numericPatterns.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return(0,c.parseNDigits)(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return(0,o.startOfISOWeek)((0,i.setISOWeek)(e,n))}}t.ISOWeekParser=l},5065:(e,t,n)=>{"use strict";var r=n(3693).default;t.ISOWeekYearParser=void 0;var i=n(1048),o=n(4161),s=n(9758),a=n(4636);class c extends s.Parser{constructor(){super(...arguments),r(this,"priority",130),r(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return"R"===t?(0,a.parseNDigitsSigned)(4,e):(0,a.parseNDigitsSigned)(t.length,e)}set(e,t,n){const r=(0,o.constructFrom)(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),(0,i.startOfISOWeek)(r)}}t.ISOWeekYearParser=c},4227:(e,t,n)=>{"use strict";var r=n(3693).default;t.LocalDayParser=void 0;var i=n(8844),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",90),r(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,n,r){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return(0,s.mapValue)((0,s.parseNDigits)(t.length,e),i);case"eo":return(0,s.mapValue)(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=(0,i.setDay)(e,n,r)).setHours(0,0,0,0),e}}t.LocalDayParser=a},3118:(e,t,n)=>{"use strict";var r=n(3693).default;t.LocalWeekParser=void 0;var i=n(5056),o=n(9249),s=n(3704),a=n(9758),c=n(4636);class l extends a.Parser{constructor(){super(...arguments),r(this,"priority",100),r(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,n){switch(t){case"w":return(0,c.parseNumericPattern)(s.numericPatterns.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return(0,c.parseNDigits)(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return(0,o.startOfWeek)((0,i.setWeek)(e,n,r),r)}}t.LocalWeekParser=l},9967:(e,t,n)=>{"use strict";var r=n(3693).default;t.LocalWeekYearParser=void 0;var i=n(7941),o=n(9249),s=n(9758),a=n(4636);class c extends s.Parser{constructor(){super(...arguments),r(this,"priority",130),r(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return(0,a.mapValue)((0,a.parseNDigits)(4,e),r);case"Yo":return(0,a.mapValue)(n.ordinalNumber(e,{unit:"year"}),r);default:return(0,a.mapValue)((0,a.parseNDigits)(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){const s=(0,i.getWeekYear)(e,r);if(n.isTwoDigitYear){const t=(0,a.normalizeTwoDigitYear)(n.year,s);return e.setFullYear(t,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),(0,o.startOfWeek)(e,r)}const c="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(c,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),(0,o.startOfWeek)(e,r)}}t.LocalWeekYearParser=c},9271:(e,t,n)=>{"use strict";var r=n(3693).default;t.MinuteParser=void 0;var i=n(3704),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",60),r(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"m":return(0,s.parseNumericPattern)(i.numericPatterns.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return(0,s.parseNDigits)(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}}t.MinuteParser=a},8403:(e,t,n)=>{"use strict";var r=n(3693).default;t.MonthParser=void 0;var i=n(3704),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),r(this,"priority",110)}parse(e,t,n){const r=e=>e-1;switch(t){case"M":return(0,s.mapValue)((0,s.parseNumericPattern)(i.numericPatterns.month,e),r);case"MM":return(0,s.mapValue)((0,s.parseNDigits)(2,e),r);case"Mo":return(0,s.mapValue)(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}t.MonthParser=a},3245:(e,t,n)=>{"use strict";var r=n(3693).default;t.QuarterParser=void 0;var i=n(9758),o=n(4636);class s extends i.Parser{constructor(){super(...arguments),r(this,"priority",120),r(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"Q":case"QQ":return(0,o.parseNDigits)(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}}t.QuarterParser=s},7223:(e,t,n)=>{"use strict";var r=n(3693).default;t.SecondParser=void 0;var i=n(3704),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",50),r(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"s":return(0,s.parseNumericPattern)(i.numericPatterns.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return(0,s.parseNDigits)(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}}t.SecondParser=a},3023:(e,t,n)=>{"use strict";var r=n(3693).default;t.StandAloneLocalDayParser=void 0;var i=n(8844),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",90),r(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,n,r){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return(0,s.mapValue)((0,s.parseNDigits)(t.length,e),i);case"co":return(0,s.mapValue)(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=(0,i.setDay)(e,n,r)).setHours(0,0,0,0),e}}t.StandAloneLocalDayParser=a},4818:(e,t,n)=>{"use strict";var r=n(3693).default;t.StandAloneMonthParser=void 0;var i=n(3704),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",110),r(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,n){const r=e=>e-1;switch(t){case"L":return(0,s.mapValue)((0,s.parseNumericPattern)(i.numericPatterns.month,e),r);case"LL":return(0,s.mapValue)((0,s.parseNDigits)(2,e),r);case"Lo":return(0,s.mapValue)(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}t.StandAloneMonthParser=a},96:(e,t,n)=>{"use strict";var r=n(3693).default;t.StandAloneQuarterParser=void 0;var i=n(9758),o=n(4636);class s extends i.Parser{constructor(){super(...arguments),r(this,"priority",120),r(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"q":case"qq":return(0,o.parseNDigits)(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}}t.StandAloneQuarterParser=s},3883:(e,t,n)=>{"use strict";var r=n(3693).default;t.TimestampMillisecondsParser=void 0;var i=n(4161),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",20),r(this,"incompatibleTokens","*")}parse(e){return(0,s.parseAnyDigitsSigned)(e)}set(e,t,n){return[(0,i.constructFrom)(e,n),{timestampIsSet:!0}]}}t.TimestampMillisecondsParser=a},6990:(e,t,n)=>{"use strict";var r=n(3693).default;t.TimestampSecondsParser=void 0;var i=n(4161),o=n(9758),s=n(4636);class a extends o.Parser{constructor(){super(...arguments),r(this,"priority",40),r(this,"incompatibleTokens","*")}parse(e){return(0,s.parseAnyDigitsSigned)(e)}set(e,t,n){return[(0,i.constructFrom)(e,1e3*n),{timestampIsSet:!0}]}}t.TimestampSecondsParser=a},8550:(e,t,n)=>{"use strict";var r=n(3693).default;t.YearParser=void 0;var i=n(9758),o=n(4636);class s extends i.Parser{constructor(){super(...arguments),r(this,"priority",130),r(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return(0,o.mapValue)((0,o.parseNDigits)(4,e),r);case"yo":return(0,o.mapValue)(n.ordinalNumber(e,{unit:"year"}),r);default:return(0,o.mapValue)((0,o.parseNDigits)(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const r=e.getFullYear();if(n.isTwoDigitYear){const t=(0,o.normalizeTwoDigitYear)(n.year,r);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const i="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}t.YearParser=s},4636:(e,t,n)=>{"use strict";t.dayPeriodEnumToHours=function(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}},t.isLeapYearIndex=function(e){return e%400===0||e%4===0&&e%100!==0},t.mapValue=function(e,t){if(!e)return e;return{value:t(e.value),rest:e.rest}},t.normalizeTwoDigitYear=function(e,t){const n=t>0,r=n?t:1-t;let i;if(r<=50)i=e||100;else{const t=r+50;i=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return n?i:1-i},t.parseAnyDigitsSigned=function(e){return o(i.numericPatterns.anyDigitsSigned,e)},t.parseNDigits=function(e,t){switch(e){case 1:return o(i.numericPatterns.singleDigit,t);case 2:return o(i.numericPatterns.twoDigits,t);case 3:return o(i.numericPatterns.threeDigits,t);case 4:return o(i.numericPatterns.fourDigits,t);default:return o(new RegExp("^\\d{1,"+e+"}"),t)}},t.parseNDigitsSigned=function(e,t){switch(e){case 1:return o(i.numericPatterns.singleDigitSigned,t);case 2:return o(i.numericPatterns.twoDigitsSigned,t);case 3:return o(i.numericPatterns.threeDigitsSigned,t);case 4:return o(i.numericPatterns.fourDigitsSigned,t);default:return o(new RegExp("^-?\\d{1,"+e+"}"),t)}},t.parseNumericPattern=o,t.parseTimezonePattern=function(e,t){const n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};const i="+"===n[1]?1:-1,o=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:i*(o*r.millisecondsInHour+s*r.millisecondsInMinute+a*r.millisecondsInSecond),rest:t.slice(n[0].length)}};var r=n(9757),i=n(3704);function o(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}},3848:(e,t,n)=>{"use strict";t.set=function(e,t){let n=(0,o.toDate)(e);if(isNaN(+n))return(0,r.constructFrom)(e,NaN);null!=t.year&&n.setFullYear(t.year);null!=t.month&&(n=(0,i.setMonth)(n,t.month));null!=t.date&&n.setDate(t.date);null!=t.hours&&n.setHours(t.hours);null!=t.minutes&&n.setMinutes(t.minutes);null!=t.seconds&&n.setSeconds(t.seconds);null!=t.milliseconds&&n.setMilliseconds(t.milliseconds);return n};var r=n(4161),i=n(2844),o=n(5551)},8844:(e,t,n)=>{"use strict";t.setDay=function(e,t,n){var s,a,c,l,u,d;const p=(0,o.getDefaultOptions)(),h=null!==(s=null!==(a=null!==(c=null!==(l=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==l?l:null===n||void 0===n||null===(u=n.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==c?c:p.weekStartsOn)&&void 0!==a?a:null===(d=p.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==s?s:0,f=(0,i.toDate)(e),m=f.getDay(),g=(t%7+7)%7,v=7-h,y=t<0||t>6?t-(m+v)%7:(g+v)%7-(m+v)%7;return(0,r.addDays)(f,y)};var r=n(8620),i=n(5551),o=n(6868)},3525:(e,t,n)=>{"use strict";t.setHours=function(e,t){const n=(0,r.toDate)(e);return n.setHours(t),n};var r=n(5551)},261:(e,t,n)=>{"use strict";t.setISODay=function(e,t){const n=(0,o.toDate)(e),s=(0,i.getISODay)(n),a=t-s;return(0,r.addDays)(n,a)};var r=n(8620),i=n(8601),o=n(5551)},5267:(e,t,n)=>{"use strict";t.setISOWeek=function(e,t){const n=(0,i.toDate)(e),o=(0,r.getISOWeek)(n)-t;return n.setDate(n.getDate()-7*o),n};var r=n(9871),i=n(5551)},4503:(e,t,n)=>{"use strict";t.setMinutes=function(e,t){const n=(0,r.toDate)(e);return n.setMinutes(t),n};var r=n(5551)},2844:(e,t,n)=>{"use strict";t.setMonth=function(e,t){const n=(0,o.toDate)(e),s=n.getFullYear(),a=n.getDate(),c=(0,r.constructFrom)(e,0);c.setFullYear(s,t,15),c.setHours(0,0,0,0);const l=(0,i.getDaysInMonth)(c);return n.setMonth(t,Math.min(a,l)),n};var r=n(4161),i=n(272),o=n(5551)},3410:(e,t,n)=>{"use strict";t.setQuarter=function(e,t){const n=(0,i.toDate)(e),o=Math.trunc(n.getMonth()/3)+1,s=t-o;return(0,r.setMonth)(n,n.getMonth()+3*s)};var r=n(2844),i=n(5551)},671:(e,t,n)=>{"use strict";t.setSeconds=function(e,t){const n=(0,r.toDate)(e);return n.setSeconds(t),n};var r=n(5551)},5056:(e,t,n)=>{"use strict";t.setWeek=function(e,t,n){const o=(0,i.toDate)(e),s=(0,r.getWeek)(o,n)-t;return o.setDate(o.getDate()-7*s),o};var r=n(2252),i=n(5551)},4521:(e,t,n)=>{"use strict";t.setYear=function(e,t){const n=(0,i.toDate)(e);if(isNaN(+n))return(0,r.constructFrom)(e,NaN);return n.setFullYear(t),n};var r=n(4161),i=n(5551)},6191:(e,t,n)=>{"use strict";t.startOfDay=function(e){const t=(0,r.toDate)(e);return t.setHours(0,0,0,0),t};var r=n(5551)},1048:(e,t,n)=>{"use strict";t.startOfISOWeek=function(e){return(0,r.startOfWeek)(e,{weekStartsOn:1})};var r=n(9249)},2329:(e,t,n)=>{"use strict";t.startOfISOWeekYear=function(e){const t=(0,r.getISOWeekYear)(e),n=(0,o.constructFrom)(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),(0,i.startOfISOWeek)(n)};var r=n(8890),i=n(1048),o=n(4161)},1619:(e,t,n)=>{"use strict";t.startOfMonth=function(e){const t=(0,r.toDate)(e);return t.setDate(1),t.setHours(0,0,0,0),t};var r=n(5551)},1125:(e,t,n)=>{"use strict";t.startOfQuarter=function(e){const t=(0,r.toDate)(e),n=t.getMonth(),i=n-n%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t};var r=n(5551)},9249:(e,t,n)=>{"use strict";t.startOfWeek=function(e,t){var n,o,s,a,c,l;const u=(0,i.getDefaultOptions)(),d=null!==(n=null!==(o=null!==(s=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(c=t.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==s?s:u.weekStartsOn)&&void 0!==o?o:null===(l=u.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==n?n:0,p=(0,r.toDate)(e),h=p.getDay(),f=(h<d?7:0)+h-d;return p.setDate(p.getDate()-f),p.setHours(0,0,0,0),p};var r=n(5551),i=n(6868)},568:(e,t,n)=>{"use strict";t.startOfWeekYear=function(e,t){var n,a,c,l,u,d;const p=(0,s.getDefaultOptions)(),h=null!==(n=null!==(a=null!==(c=null!==(l=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==l?l:null===t||void 0===t||null===(u=t.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==c?c:p.firstWeekContainsDate)&&void 0!==a?a:null===(d=p.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1,f=(0,i.getWeekYear)(e,t),m=(0,r.constructFrom)(e,0);m.setFullYear(f,0,h),m.setHours(0,0,0,0);return(0,o.startOfWeek)(m,t)};var r=n(4161),i=n(7941),o=n(9249),s=n(6868)},7332:(e,t,n)=>{"use strict";t.startOfYear=function(e){const t=(0,r.toDate)(e),n=(0,i.constructFrom)(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n};var r=n(5551),i=n(4161)},3613:(e,t,n)=>{"use strict";t.subDays=function(e,t){return(0,r.addDays)(e,-t)};var r=n(8620)},6221:(e,t,n)=>{"use strict";t.subMonths=function(e,t){return(0,r.addMonths)(e,-t)};var r=n(4640)},899:(e,t,n)=>{"use strict";t.subQuarters=function(e,t){return(0,r.addQuarters)(e,-t)};var r=n(1634)},4357:(e,t,n)=>{"use strict";t.subWeeks=function(e,t){return(0,r.addWeeks)(e,-t)};var r=n(9994)},6198:(e,t,n)=>{"use strict";t.subYears=function(e,t){return(0,r.addYears)(e,-t)};var r=n(709)},5551:(e,t)=>{"use strict";t.toDate=function(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}},3583:(e,t,n)=>{"use strict";t.transpose=function(e,t){const n=t instanceof Date?(0,r.constructFrom)(t,0):new t(0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n};var r=n(4161)},219:(t,n,r)=>{"use strict";var i=r(3763),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};function l(e){return i.isMemo(e)?a:c[e.$$typeof]||o}c[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},c[i.Memo]=a;var u=Object.defineProperty,d=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,m=Object.prototype;t.exports=function t(n,r,i){if("string"!==typeof r){if(m){var o=f(r);o&&o!==m&&t(n,o,i)}var a=d(r);p&&(a=a.concat(p(r)));for(var c=l(n),g=l(r),v=0;v<a.length;++v){var y=a[v];if(!s[y]&&(!i||!i[y])&&(!g||!g[y])&&(!c||!c[y])){var E=h(r,y);try{u(n,y,E)}catch(e){}}}}return n}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,E=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case a:case s:case h:return e;default:switch(e=e&&e.$$typeof){case l:case p:case g:case m:case c:return e;default:return t}}case i:return t}}}function S(e){return b(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=p,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=h,t.isAsyncMode=function(e){return S(e)||b(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return b(e)===l},t.isContextProvider=function(e){return b(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===p},t.isFragment=function(e){return b(e)===o},t.isLazy=function(e){return b(e)===g},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===a},t.isStrictMode=function(e){return b(e)===s},t.isSuspense=function(e){return b(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===a||e===s||e===h||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p||e.$$typeof===y||e.$$typeof===E||e.$$typeof===_||e.$$typeof===v)},t.typeOf=b},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},2740:e=>{"use strict";e.exports=function(e,t,n,r,i,o,s,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,s,a],u=0;(c=new Error(t.replace(/%s/g,(function(){return l[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},7685:(e,t,n)=>{var r=n(7937)(n(6552),"DataView");e.exports=r},8724:(e,t,n)=>{var r=n(9996),i=n(5051),o=n(2154),s=n(8734),a=n(2662);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},7160:(e,t,n)=>{var r=n(7563),i=n(9935),o=n(4190),s=n(1946),a=n(1714);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},5204:(e,t,n)=>{var r=n(7937)(n(6552),"Map");e.exports=r},4816:(e,t,n)=>{var r=n(9632),i=n(7159),o=n(438),s=n(9394),a=n(6874);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},5387:(e,t,n)=>{var r=n(7937)(n(6552),"Promise");e.exports=r},2070:(e,t,n)=>{var r=n(7937)(n(6552),"Set");e.exports=r},8902:(e,t,n)=>{var r=n(4816),i=n(6179),o=n(6704);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,e.exports=s},5538:(e,t,n)=>{var r=n(7160),i=n(4545),o=n(793),s=n(7760),a=n(3892),c=n(6788);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=s,l.prototype.has=a,l.prototype.set=c,e.exports=l},9812:(e,t,n)=>{var r=n(6552).Symbol;e.exports=r},2929:(e,t,n)=>{var r=n(6552).Uint8Array;e.exports=r},6600:(e,t,n)=>{var r=n(7937)(n(6552),"WeakMap");e.exports=r},7529:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}},3204:(e,t,n)=>{var r=n(3343),i=n(2777),o=n(4052),s=n(4543),a=n(9194),c=n(1268),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),d=!n&&!u&&s(e),p=!n&&!u&&!d&&c(e),h=n||u||d||p,f=h?r(e.length,String):[],m=f.length;for(var g in e)!t&&!l.call(e,g)||h&&("length"==g||d&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||f.push(g);return f}},8895:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},2587:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},1340:(e,t,n)=>{var r=n(3211);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},4262:(e,t,n)=>{var r=n(8895),i=n(4052);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},6913:(e,t,n)=>{var r=n(9812),i=n(4552),o=n(6095),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},5193:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},6989:(e,t,n)=>{var r=n(6399),i=n(2761);e.exports=function e(t,n,o,s,a){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,s,e,a))}},6399:(e,t,n)=>{var r=n(5538),i=n(3668),o=n(9987),s=n(5752),a=n(6924),c=n(4052),l=n(4543),u=n(1268),d="[object Arguments]",p="[object Array]",h="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,v){var y=c(e),E=c(t),_=y?p:a(e),b=E?p:a(t),S=(_=_==d?h:_)==h,T=(b=b==d?h:b)==h,I=_==b;if(I&&l(e)){if(!l(t))return!1;y=!0,S=!1}if(I&&!S)return v||(v=new r),y||u(e)?i(e,t,n,m,g,v):o(e,t,_,n,m,g,v);if(!(1&n)){var N=S&&f.call(e,"__wrapped__"),w=T&&f.call(t,"__wrapped__");if(N||w){var C=N?e.value():e,O=w?t.value():t;return v||(v=new r),g(C,O,n,m,v)}}return!!I&&(v||(v=new r),s(e,t,n,m,g,v))}},6954:(e,t,n)=>{var r=n(1629),i=n(7857),o=n(6686),s=n(6996),a=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?p:a).test(s(e))}},3047:(e,t,n)=>{var r=n(6913),i=n(6173),o=n(2761),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},3713:(e,t,n)=>{var r=n(6140),i=n(1143),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},3343:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},8114:e=>{e.exports=function(e,t){return e.has(t)}},3440:(e,t,n)=>{var r=n(6552)["__core-js_shared__"];e.exports=r},3668:(e,t,n)=>{var r=n(8902),i=n(2587),o=n(8114);e.exports=function(e,t,n,s,a,c){var l=1&n,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var p=c.get(e),h=c.get(t);if(p&&h)return p==t&&h==e;var f=-1,m=!0,g=2&n?new r:void 0;for(c.set(e,t),c.set(t,e);++f<u;){var v=e[f],y=t[f];if(s)var E=l?s(y,v,f,t,e,c):s(v,y,f,e,t,c);if(void 0!==E){if(E)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(v===e||a(v,e,n,s,c)))return g.push(t)}))){m=!1;break}}else if(v!==y&&!a(v,y,n,s,c)){m=!1;break}}return c.delete(e),c.delete(t),m}},9987:(e,t,n)=>{var r=n(9812),i=n(2929),o=n(3211),s=n(3668),a=n(4160),c=n(2074),l=r?r.prototype:void 0,u=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,d,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=a;case"[object Set]":var f=1&r;if(h||(h=c),e.size!=t.size&&!f)return!1;var m=p.get(e);if(m)return m==t;r|=2,p.set(e,t);var g=s(h(e),h(t),r,l,d,p);return p.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},5752:(e,t,n)=>{var r=n(9395),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,s,a){var c=1&n,l=r(e),u=l.length;if(u!=r(t).length&&!c)return!1;for(var d=u;d--;){var p=l[d];if(!(c?p in t:i.call(t,p)))return!1}var h=a.get(e),f=a.get(t);if(h&&f)return h==t&&f==e;var m=!0;a.set(e,t),a.set(t,e);for(var g=c;++d<u;){var v=e[p=l[d]],y=t[p];if(o)var E=c?o(y,v,p,t,e,a):o(v,y,p,e,t,a);if(!(void 0===E?v===y||s(v,y,n,o,a):E)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var _=e.constructor,b=t.constructor;_==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(m=!1)}return a.delete(e),a.delete(t),m}},7105:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},9395:(e,t,n)=>{var r=n(4262),i=n(9621),o=n(8673);e.exports=function(e){return r(e,o,i)}},2622:(e,t,n)=>{var r=n(705);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},7937:(e,t,n)=>{var r=n(6954),i=n(4657);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},4552:(t,n,r)=>{var i=r(9812),o=Object.prototype,s=o.hasOwnProperty,a=o.toString,c=i?i.toStringTag:void 0;t.exports=function(t){var n=s.call(t,c),r=t[c];try{t[c]=void 0;var i=!0}catch(e){}var o=a.call(t);return i&&(n?t[c]=r:delete t[c]),o}},9621:(e,t,n)=>{var r=n(7529),i=n(7828),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return o.call(e,t)})))}:i;e.exports=a},6924:(e,t,n)=>{var r=n(7685),i=n(5204),o=n(5387),s=n(2070),a=n(6600),c=n(6913),l=n(6996),u="[object Map]",d="[object Promise]",p="[object Set]",h="[object WeakMap]",f="[object DataView]",m=l(r),g=l(i),v=l(o),y=l(s),E=l(a),_=c;(r&&_(new r(new ArrayBuffer(1)))!=f||i&&_(new i)!=u||o&&_(o.resolve())!=d||s&&_(new s)!=p||a&&_(new a)!=h)&&(_=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case m:return f;case g:return u;case v:return d;case y:return p;case E:return h}return t}),e.exports=_},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},9996:(e,t,n)=>{var r=n(7956);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},2154:(e,t,n)=>{var r=n(7956),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},8734:(e,t,n)=>{var r=n(7956),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},2662:(e,t,n)=>{var r=n(7956);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7857:(e,t,n)=>{var r=n(3440),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},6140:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},9935:(e,t,n)=>{var r=n(1340),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},4190:(e,t,n)=>{var r=n(1340);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},1946:(e,t,n)=>{var r=n(1340);e.exports=function(e){return r(this.__data__,e)>-1}},1714:(e,t,n)=>{var r=n(1340);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},9632:(e,t,n)=>{var r=n(8724),i=n(7160),o=n(5204);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7159:(e,t,n)=>{var r=n(2622);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},438:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).get(e)}},9394:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).has(e)}},6874:(e,t,n)=>{var r=n(2622);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},4160:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},7956:(e,t,n)=>{var r=n(7937)(Object,"create");e.exports=r},1143:(e,t,n)=>{var r=n(3028)(Object.keys,Object);e.exports=r},6832:(t,n,r)=>{t=r.nmd(t);var i=r(7105),o=n&&!n.nodeType&&n,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o&&i.process,c=function(){try{var t=s&&s.require&&s.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=c},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},3028:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},6552:(e,t,n)=>{var r=n(7105),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},2074:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},4545:(e,t,n)=>{var r=n(7160);e.exports=function(){this.__data__=new r,this.size=0}},793:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},6788:(e,t,n)=>{var r=n(7160),i=n(5204),o=n(4816);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},6996:t=>{var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},2777:(e,t,n)=>{var r=n(5193),i=n(2761),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},4052:e=>{var t=Array.isArray;e.exports=t},6571:(e,t,n)=>{var r=n(1629),i=n(6173);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},4543:(e,t,n)=>{e=n.nmd(e);var r=n(6552),i=n(14),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||i;e.exports=c},9853:(e,t,n)=>{var r=n(6989);e.exports=function(e,t){return r(e,t)}},1629:(e,t,n)=>{var r=n(6913),i=n(6686);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},1268:(e,t,n)=>{var r=n(3047),i=n(7574),o=n(6832),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},8673:(e,t,n)=>{var r=n(3204),i=n(3713),o=n(6571);e.exports=function(e){return o(e)?r(e):i(e)}},7828:e=>{e.exports=function(){return[]}},14:e=>{e.exports=function(){return!1}},9197:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(3534),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},3534:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,o,s){var a=i||"<<anonymous>>",c=s||r;if(null==n[r])return t?new Error("Required "+o+" `"+c+"` was not specified in `"+a+"`."):null;for(var l=arguments.length,u=Array(l>6?l-6:0),d=6;d<l;d++)u[d-6]=arguments[d];return e.apply(void 0,[n,r,a,o,c].concat(u))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4175:function(t){var n;"undefined"!==typeof self&&self,n=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=109)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(18),o=n(19),s=n(45),a=n(46),c=n(47),l=n(48),u=n(49),d=n(12),p=n(32),h=n(33),f=n(31),m=n(1),g={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:r.default,Format:i.default,Leaf:o.default,Embed:l.default,Scroll:s.default,Block:c.default,Inline:a.default,Text:u.default,Attributor:{Attribute:d.default,Class:p.default,Style:h.default,Store:f.default}};t.default=g},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=this;return t="[Parchment] "+t,(n=e.call(this,t)||this).message=t,n.name=n.constructor.name,n}return r(t,e),t}(Error);t.ParchmentError=i;var o,s={},a={},c={},l={};function u(e,t){var n;if(void 0===t&&(t=o.ANY),"string"===typeof e)n=l[e]||s[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)n=l.text;else if("number"===typeof e)e&o.LEVEL&o.BLOCK?n=l.block:e&o.LEVEL&o.INLINE&&(n=l.inline);else if(e instanceof HTMLElement){var r=(e.getAttribute("class")||"").split(/\s+/);for(var i in r)if(n=a[r[i]])break;n=n||c[e.tagName]}return null==n?null:t&o.LEVEL&n.scope&&t&o.TYPE&n.scope?n:null}t.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(o=t.Scope||(t.Scope={})),t.create=function(e,t){var n=u(e);if(null==n)throw new i("Unable to create "+e+" blot");var r=n,o=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:r.create(t);return new r(o,t)},t.find=function e(n,r){return void 0===r&&(r=!1),null==n?null:null!=n[t.DATA_KEY]?n[t.DATA_KEY].blot:r?e(n.parentNode,r):null},t.query=u,t.register=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length>1)return t.map((function(t){return e(t)}));var r=t[0];if("string"!==typeof r.blotName&&"string"!==typeof r.attrName)throw new i("Invalid definition");if("abstract"===r.blotName)throw new i("Cannot register abstract class");return l[r.blotName||r.attrName]=r,"string"===typeof r.keyName?s[r.keyName]=r:(null!=r.className&&(a[r.className]=r),null!=r.tagName&&(Array.isArray(r.tagName)?r.tagName=r.tagName.map((function(e){return e.toUpperCase()})):r.tagName=r.tagName.toUpperCase(),(Array.isArray(r.tagName)?r.tagName:[r.tagName]).forEach((function(e){null!=c[e]&&null!=r.className||(c[e]=r)})))),r}},function(e,t,n){var r=n(51),i=n(11),o=n(3),s=n(20),a=String.fromCharCode(0),c=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};c.prototype.insert=function(e,t){var n={};return 0===e.length?this:(n.insert=e,null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))},c.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},c.prototype.retain=function(e,t){if(e<=0)return this;var n={retain:e};return null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)},c.prototype.push=function(e){var t=this.ops.length,n=this.ops[t-1];if(e=o(!0,{},e),"object"===typeof n){if("number"===typeof e.delete&&"number"===typeof n.delete)return this.ops[t-1]={delete:n.delete+e.delete},this;if("number"===typeof n.delete&&null!=e.insert&&(t-=1,"object"!==typeof(n=this.ops[t-1])))return this.ops.unshift(e),this;if(i(e.attributes,n.attributes)){if("string"===typeof e.insert&&"string"===typeof n.insert)return this.ops[t-1]={insert:n.insert+e.insert},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"===typeof e.retain&&"number"===typeof n.retain)return this.ops[t-1]={retain:n.retain+e.retain},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},c.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},c.prototype.filter=function(e){return this.ops.filter(e)},c.prototype.forEach=function(e){this.ops.forEach(e)},c.prototype.map=function(e){return this.ops.map(e)},c.prototype.partition=function(e){var t=[],n=[];return this.forEach((function(r){(e(r)?t:n).push(r)})),[t,n]},c.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},c.prototype.changeLength=function(){return this.reduce((function(e,t){return t.insert?e+s.length(t):t.delete?e-t.delete:e}),0)},c.prototype.length=function(){return this.reduce((function(e,t){return e+s.length(t)}),0)},c.prototype.slice=function(e,t){e=e||0,"number"!==typeof t&&(t=1/0);for(var n=[],r=s.iterator(this.ops),i=0;i<t&&r.hasNext();){var o;i<e?o=r.next(e-i):(o=r.next(t-i),n.push(o)),i+=s.length(o)}return new c(n)},c.prototype.compose=function(e){var t=s.iterator(this.ops),n=s.iterator(e.ops),r=[],o=n.peek();if(null!=o&&"number"===typeof o.retain&&null==o.attributes){for(var a=o.retain;"insert"===t.peekType()&&t.peekLength()<=a;)a-=t.peekLength(),r.push(t.next());o.retain-a>0&&n.next(o.retain-a)}for(var l=new c(r);t.hasNext()||n.hasNext();)if("insert"===n.peekType())l.push(n.next());else if("delete"===t.peekType())l.push(t.next());else{var u=Math.min(t.peekLength(),n.peekLength()),d=t.next(u),p=n.next(u);if("number"===typeof p.retain){var h={};"number"===typeof d.retain?h.retain=u:h.insert=d.insert;var f=s.attributes.compose(d.attributes,p.attributes,"number"===typeof d.retain);if(f&&(h.attributes=f),l.push(h),!n.hasNext()&&i(l.ops[l.ops.length-1],h)){var m=new c(t.rest());return l.concat(m).chop()}}else"number"===typeof p.delete&&"number"===typeof d.retain&&l.push(p)}return l.chop()},c.prototype.concat=function(e){var t=new c(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},c.prototype.diff=function(e,t){if(this.ops===e.ops)return new c;var n=[this,e].map((function(t){return t.map((function(n){if(null!=n.insert)return"string"===typeof n.insert?n.insert:a;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join("")})),o=new c,l=r(n[0],n[1],t),u=s.iterator(this.ops),d=s.iterator(e.ops);return l.forEach((function(e){for(var t=e[1].length;t>0;){var n=0;switch(e[0]){case r.INSERT:n=Math.min(d.peekLength(),t),o.push(d.next(n));break;case r.DELETE:n=Math.min(t,u.peekLength()),u.next(n),o.delete(n);break;case r.EQUAL:n=Math.min(u.peekLength(),d.peekLength(),t);var a=u.next(n),c=d.next(n);i(a.insert,c.insert)?o.retain(n,s.attributes.diff(a.attributes,c.attributes)):o.push(c).delete(n)}t-=n}})),o.chop()},c.prototype.eachLine=function(e,t){t=t||"\n";for(var n=s.iterator(this.ops),r=new c,i=0;n.hasNext();){if("insert"!==n.peekType())return;var o=n.peek(),a=s.length(o)-n.peekLength(),l="string"===typeof o.insert?o.insert.indexOf(t,a)-a:-1;if(l<0)r.push(n.next());else if(l>0)r.push(n.next(l));else{if(!1===e(r,n.next(1).attributes||{},i))return;i+=1,r=new c}}r.length()>0&&e(r,{},i)},c.prototype.transform=function(e,t){if(t=!!t,"number"===typeof e)return this.transformPosition(e,t);for(var n=s.iterator(this.ops),r=s.iterator(e.ops),i=new c;n.hasNext()||r.hasNext();)if("insert"!==n.peekType()||!t&&"insert"===r.peekType())if("insert"===r.peekType())i.push(r.next());else{var o=Math.min(n.peekLength(),r.peekLength()),a=n.next(o),l=r.next(o);if(a.delete)continue;l.delete?i.push(l):i.retain(o,s.attributes.transform(a.attributes,l.attributes,t))}else i.retain(s.length(n.next()));return i.chop()},c.prototype.transformPosition=function(e,t){t=!!t;for(var n=s.iterator(this.ops),r=0;n.hasNext()&&r<=e;){var i=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(r<e||!t)&&(e+=i),r+=i):e-=Math.min(i,e-r)}return e},e.exports=c},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===r.call(e)},a=function(e){if(!e||"[object Object]"!==r.call(e))return!1;var t,i=n.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!o)return!1;for(t in e);return"undefined"===typeof t||n.call(e,t)},c=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,t){if("__proto__"===t){if(!n.call(e,t))return;if(o)return o(e,t).value}return e[t]};e.exports=function e(){var t,n,r,i,o,u,d=arguments[0],p=1,h=arguments.length,f=!1;for("boolean"===typeof d&&(f=d,d=arguments[1]||{},p=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});p<h;++p)if(null!=(t=arguments[p]))for(n in t)r=l(d,n),d!==(i=l(t,n))&&(f&&i&&(a(i)||(o=s(i)))?(o?(o=!1,u=r&&s(r)?r:[]):u=r&&a(r)?r:{},c(d,{name:n,newValue:e(f,u,i)})):"undefined"!==typeof i&&c(d,{name:n,newValue:i}));return d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=d(n(3)),s=d(n(2)),a=d(n(0)),c=d(n(16)),l=d(n(6)),u=d(n(7));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),r(t,[{key:"attach",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new a.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new s.default).insert(this.value(),(0,o.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var n=a.default.query(e,a.default.Scope.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,t)}},{key:"formatAt",value:function(e,t,n,r){this.format(n,r)}},{key:"insertAt",value:function(e,n,r){if("string"===typeof n&&n.endsWith("\n")){var o=a.default.create(g.blotName);this.parent.insertBefore(o,0===e?this:this.next),o.insertAt(0,n.slice(0,-1))}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,r)}}]),t}(a.default.Embed);m.scope=a.default.Scope.BLOCK_BLOT;var g=function(e){function t(e){p(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cache={},n}return f(t,e),r(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(a.default.Leaf).reduce((function(e,t){return 0===t.length()?e:e.insert(t.value(),v(t))}),new s.default).insert("\n",v(this))),this.cache.delta}},{key:"deleteAt",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),this.cache={}}},{key:"formatAt",value:function(e,n,r,o){n<=0||(a.default.query(r,a.default.Scope.BLOCK)?e+n===this.length()&&this.format(r,o):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(n,this.length()-e-1),r,o),this.cache={})}},{key:"insertAt",value:function(e,n,r){if(null!=r)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,r);if(0!==n.length){var o=n.split("\n"),s=o.shift();s.length>0&&(e<this.length()-1||null==this.children.tail?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),s):this.children.tail.insertAt(this.children.tail.length(),s),this.cache={});var a=this;o.reduce((function(e,t){return(a=a.split(e,!0)).insertAt(0,t),t.length}),e+s.length)}}},{key:"insertBefore",value:function(e,n){var r=this.children.head;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n),r instanceof c.default&&r.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,n),this.cache={}}},{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(0===e||e>=this.length()-1)){var r=this.clone();return 0===e?(this.parent.insertBefore(r,this),this):(this.parent.insertBefore(r,this.next),r)}var o=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,n);return this.cache={},o}}]),t}(a.default.Block);function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"===typeof e.formats&&(t=(0,o.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:v(e.parent,t))}g.blotName="block",g.tagName="P",g.defaultChild="break",g.allowedChildren=[l.default,a.default.Embed,u.default],t.bubbleFormats=v,t.BlockEmbed=m,t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(50);var s=g(n(2)),a=g(n(14)),c=g(n(8)),l=g(n(9)),u=g(n(0)),d=n(15),p=g(d),h=g(n(3)),f=g(n(10)),m=g(n(34));function g(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=(0,f.default)("quill"),E=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=_(t,r),this.container=this.options.container,null==this.container)return y.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new c.default,this.scroll=u.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new a.default(this.scroll),this.selection=new p.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(c.default.events.EDITOR_CHANGE,(function(e){e===c.default.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())})),this.emitter.on(c.default.events.SCROLL_UPDATE,(function(e,t){var r=n.selection.lastRange,i=r&&0===r.length?r.index:void 0;b.call(n,(function(){return n.editor.update(null,t,i)}),e)}));var o=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+i+"<p><br></p></div>");this.setContents(o),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),f.default.level(e)}},{key:"find",value:function(e){return e.__quill||u.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&y.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!==typeof e){var i=e.attrName||e.blotName;"string"===typeof i?this.register("formats/"+i,e,t):Object.keys(e).forEach((function(r){n.register(r,e[r],t)}))}else null==this.imports[e]||r||y.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?u.default.register(t):e.startsWith("modules")&&"function"===typeof t.register&&t.register()}}]),o(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"===typeof e){var n=e;(e=document.createElement("div")).classList.add(n)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,n){var r=this,o=S(e,t,n),s=i(o,4);return e=s[0],t=s[1],n=s[3],b.call(this,(function(){return r.editor.deleteText(e,t)}),n,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;return b.call(this,(function(){var r=n.getSelection(!0),i=new s.default;if(null==r)return i;if(u.default.query(e,u.default.Scope.BLOCK))i=n.editor.formatLine(r.index,r.length,v({},e,t));else{if(0===r.length)return n.selection.format(e,t),i;i=n.editor.formatText(r.index,r.length,v({},e,t))}return n.setSelection(r,c.default.sources.SILENT),i}),r)}},{key:"formatLine",value:function(e,t,n,r,o){var s,a=this,c=S(e,t,n,r,o),l=i(c,4);return e=l[0],t=l[1],s=l[2],o=l[3],b.call(this,(function(){return a.editor.formatLine(e,t,s)}),o,e,0)}},{key:"formatText",value:function(e,t,n,r,o){var s,a=this,c=S(e,t,n,r,o),l=i(c,4);return e=l[0],t=l[1],s=l[2],o=l[3],b.call(this,(function(){return a.editor.formatText(e,t,s)}),o,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=void 0;n="number"===typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var r=this.container.getBoundingClientRect();return{bottom:n.bottom-r.top,height:n.height,left:n.left-r.left,right:n.right-r.left,top:n.top-r.top,width:n.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=S(e,t),r=i(n,2);return e=r[0],t=r[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"===typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!==typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=S(e,t),r=i(n,2);return e=r[0],t=r[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return b.call(this,(function(){return i.editor.insertEmbed(t,n,r)}),o,t)}},{key:"insertText",value:function(e,t,n,r,o){var s,a=this,c=S(e,0,n,r,o),l=i(c,4);return e=l[0],s=l[2],o=l[3],b.call(this,(function(){return a.editor.insertText(e,t,s)}),o,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,n){this.clipboard.dangerouslyPasteHTML(e,t,n)}},{key:"removeFormat",value:function(e,t,n){var r=this,o=S(e,t,n),s=i(o,4);return e=s[0],t=s[1],n=s[3],b.call(this,(function(){return r.editor.removeFormat(e,t)}),n,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default.sources.API;return b.call(this,(function(){e=new s.default(e);var n=t.getLength(),r=t.editor.deleteText(0,n),i=t.editor.applyDelta(e),o=i.ops[i.ops.length-1];return null!=o&&"string"===typeof o.insert&&"\n"===o.insert[o.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),i.delete(1)),r.compose(i)}),n)}},{key:"setSelection",value:function(t,n,r){if(null==t)this.selection.setRange(null,n||e.sources.API);else{var o=S(t,n,r),s=i(o,4);t=s[0],n=s[1],r=s[3],this.selection.setRange(new d.Range(t,n),r),r!==c.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default.sources.API,n=(new s.default).insert(e);return this.setContents(n,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default.sources.API;return b.call(this,(function(){return e=new s.default(e),t.editor.applyDelta(e,n)}),n,!0)}}]),e}();function _(e,t){if((t=(0,h.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==E.DEFAULTS.theme){if(t.theme=E.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=m.default;var n=(0,h.default)(!0,{},t.theme.DEFAULTS);[n,t].forEach((function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach((function(t){!0===e.modules[t]&&(e.modules[t]={})}))}));var r=Object.keys(n.modules).concat(Object.keys(t.modules)).reduce((function(e,t){var n=E.import("modules/"+t);return null==n?y.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=n.DEFAULTS||{},e}),{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,h.default)(!0,{},E.DEFAULTS,{modules:r},n,t),["bounds","container","scrollingContainer"].forEach((function(e){"string"===typeof t[e]&&(t[e]=document.querySelector(t[e]))})),t.modules=Object.keys(t.modules).reduce((function(e,n){return t.modules[n]&&(e[n]=t.modules[n]),e}),{}),t}function b(e,t,n,r){if(this.options.strict&&!this.isEnabled()&&t===c.default.sources.USER)return new s.default;var i=null==n?null:this.getSelection(),o=this.editor.delta,a=e();if(null!=i&&(!0===n&&(n=i.index),null==r?i=T(i,a,t):0!==r&&(i=T(i,n,r,t)),this.setSelection(i,c.default.sources.SILENT)),a.length()>0){var l,u,d=[c.default.events.TEXT_CHANGE,a,o,t];(l=this.emitter).emit.apply(l,[c.default.events.EDITOR_CHANGE].concat(d)),t!==c.default.sources.SILENT&&(u=this.emitter).emit.apply(u,d)}return a}function S(e,t,n,i,o){var s={};return"number"===typeof e.index&&"number"===typeof e.length?"number"!==typeof t?(o=i,i=n,n=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!==typeof t&&(o=i,i=n,n=t,t=0),"object"===("undefined"===typeof n?"undefined":r(n))?(s=n,o=i):"string"===typeof n&&(null!=i?s[n]=i:o=n),[e,t,s,o=o||c.default.sources.API]}function T(e,t,n,r){if(null==e)return null;var o=void 0,a=void 0;if(t instanceof s.default){var l=[e.index,e.index+e.length].map((function(e){return t.transformPosition(e,r!==c.default.sources.USER)})),u=i(l,2);o=u[0],a=u[1]}else{var p=[e.index,e.index+e.length].map((function(e){return e<t||e===t&&r===c.default.sources.USER?e:n>=0?e+n:Math.max(t,e+n)})),h=i(p,2);o=h[0],a=h[1]}return new d.Range(o,a-o)}E.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},E.events=c.default.events,E.sources=c.default.sources,E.version="1.3.7",E.imports={delta:s.default,parchment:u.default,"core/module":l.default,"core/theme":m.default},t.expandConfig=_,t.overload=S,t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=a(n(7)),s=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"formatAt",value:function(e,n,r,o){if(t.compare(this.statics.blotName,r)<0&&s.default.query(r,s.default.Scope.BLOT)){var a=this.isolate(e,n);o&&a.wrap(r,o)}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,n,r,o)}},{key:"optimize",value:function(e){if(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}],[{key:"compare",value:function(e,n){var r=t.order.indexOf(e),i=t.order.indexOf(n);return r>=0||i>=0?r-i:e===n?0:e<n?-1:1}}]),t}(s.default.Inline);c.allowedChildren=[c,s.default.Embed,o.default],c.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default.Text);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=s(n(54));function s(e){return e&&e.__esModule?e:{default:e}}var a=(0,s(n(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(e){document.addEventListener(e,(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(e){var n;e.__quill&&e.__quill.emitter&&(n=e.__quill.emitter).handleDOM.apply(n,t)}))}))}));var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",a.error),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"emit",value:function(){a.log.apply(a,arguments),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(this.listeners[e.type]||[]).forEach((function(t){var r=t.node,i=t.handler;(e.target===r||r.contains(e.target))&&i.apply(void 0,[e].concat(n))}))}},{key:"listenDOM",value:function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:n})}}]),t}(o.default);c.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},c.sources={API:"api",SILENT:"silent",USER:"user"},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=n};r.DEFAULTS={},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["error","warn","log","info"],i="warn";function o(e){if(r.indexOf(e)<=r.indexOf(i)){for(var t,n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];(t=console)[e].apply(t,o)}}function s(e){return r.reduce((function(t,n){return t[n]=o.bind(console,n,e),t}),{})}o.level=s.level=function(e){i=e},t.default=s},function(t,n,r){var i=Array.prototype.slice,o=r(52),s=r(53),a=t.exports=function(t,n,r){return r||(r={}),t===n||(t instanceof Date&&n instanceof Date?t.getTime()===n.getTime():!t||!n||"object"!=typeof t&&"object"!=typeof n?r.strict?t===n:t==n:function(t,n,r){var u,d;if(c(t)||c(n))return!1;if(t.prototype!==n.prototype)return!1;if(s(t))return!!s(n)&&(t=i.call(t),n=i.call(n),a(t,n,r));if(l(t)){if(!l(n))return!1;if(t.length!==n.length)return!1;for(u=0;u<t.length;u++)if(t[u]!==n[u])return!1;return!0}try{var p=o(t),h=o(n)}catch(e){return!1}if(p.length!=h.length)return!1;for(p.sort(),h.sort(),u=p.length-1;u>=0;u--)if(p[u]!=h[u])return!1;for(u=p.length-1;u>=0;u--)if(d=p[u],!a(t[d],n[d],r))return!1;return typeof t===typeof n}(t,n,r))};function c(e){return null===e||void 0===e}function l(e){return!(!e||"object"!==typeof e||"number"!==typeof e.length)&&"function"===typeof e.copy&&"function"===typeof e.slice&&!(e.length>0&&"number"!==typeof e[0])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function e(e,t,n){void 0===n&&(n={}),this.attrName=e,this.keyName=t;var i=r.Scope.TYPE&r.Scope.ATTRIBUTE;null!=n.scope?this.scope=n.scope&r.Scope.LEVEL|i:this.scope=r.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,(function(e){return e.name}))},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=r.query(e,r.Scope.BLOT&(this.scope|r.Scope.TYPE))&&(null==this.whitelist||("string"===typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=d(n(2)),a=d(n(0)),c=d(n(4)),l=d(n(6)),u=d(n(7));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),t}(l.default);m.blotName="code",m.tagName="CODE";var g=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),i(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce((function(t,n){return t.insert(n).insert("\n",e.formats())}),new s.default)}},{key:"format",value:function(e,n){if(e!==this.statics.blotName||!n){var i=this.descendant(u.default,this.length()-1),s=r(i,1)[0];null!=s&&s.deleteAt(s.length()-1,1),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}},{key:"formatAt",value:function(e,n,r,i){if(0!==n&&null!=a.default.query(r,a.default.Scope.BLOCK)&&(r!==this.statics.blotName||i!==this.statics.formats(this.domNode))){var o=this.newlineIndex(e);if(!(o<0||o>=e+n)){var s=this.newlineIndex(e,!0)+1,c=o-s+1,l=this.isolate(s,c),u=l.next;l.format(r,i),u instanceof t&&u.formatAt(0,e-s+n-c,r,i)}}}},{key:"insertAt",value:function(e,t,n){if(null==n){var i=this.descendant(u.default,e),o=r(i,2),s=o[0],a=o[1];s.insertAt(a,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(a.default.create("text","\n")),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===n.statics.formats(n.domNode)&&(n.optimize(e),n.moveChildren(this),n.remove())}},{key:"replace",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(e){var t=a.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof a.default.Embed?t.remove():t.unwrap()}))}}],[{key:"create",value:function(e){var n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return n.setAttribute("spellcheck",!1),n}},{key:"formats",value:function(){return!0}}]),t}(c.default);g.blotName="code-block",g.tagName="PRE",g.TAB="  ",t.Code=m,t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=v(n(2)),a=v(n(20)),c=v(n(0)),l=v(n(13)),u=v(n(24)),d=n(4),p=v(d),h=v(n(16)),f=v(n(21)),m=v(n(11)),g=v(n(3));function v(e){return e&&e.__esModule?e:{default:e}}var y=/^[ -~]*$/,E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return o(e,[{key:"applyDelta",value:function(e){var t=this,n=!1;this.scroll.update();var o=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce((function(e,t){if(1===t.insert){var n=(0,f.default)(t.attributes);return delete n.image,e.insert({image:t.attributes.image},n)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,f.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"===typeof t.insert){var r=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(r,t.attributes)}return e.push(t)}),new s.default)}(e)).reduce((function(e,s){var l=s.retain||s.delete||s.insert.length||1,u=s.attributes||{};if(null!=s.insert){if("string"===typeof s.insert){var h=s.insert;h.endsWith("\n")&&n&&(n=!1,h=h.slice(0,-1)),e>=o&&!h.endsWith("\n")&&(n=!0),t.scroll.insertAt(e,h);var f=t.scroll.line(e),m=i(f,2),v=m[0],y=m[1],E=(0,g.default)({},(0,d.bubbleFormats)(v));if(v instanceof p.default){var _=v.descendant(c.default.Leaf,y),b=i(_,1)[0];E=(0,g.default)(E,(0,d.bubbleFormats)(b))}u=a.default.attributes.diff(E,u)||{}}else if("object"===r(s.insert)){var S=Object.keys(s.insert)[0];if(null==S)return e;t.scroll.insertAt(e,S,s.insert[S])}o+=l}return Object.keys(u).forEach((function(n){t.scroll.formatAt(e,l,n,u[n])})),e+l}),0),e.reduce((function(e,n){return"number"===typeof n.delete?(t.scroll.deleteAt(e,n.delete),e):e+(n.retain||n.insert.length||1)}),0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new s.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(r).forEach((function(i){if(null==n.scroll.whitelist||n.scroll.whitelist[i]){var o=n.scroll.lines(e,Math.max(t,1)),s=t;o.forEach((function(t){var o=t.length();if(t instanceof l.default){var a=e-t.offset(n.scroll),c=t.newlineIndex(a+s)-a+1;t.formatAt(a,c,i,r[i])}else t.format(i,r[i]);s-=o}))}})),this.scroll.optimize(),this.update((new s.default).retain(e).retain(t,(0,f.default)(r)))}},{key:"formatText",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(r).forEach((function(i){n.scroll.formatAt(e,t,i,r[i])})),this.update((new s.default).retain(e).retain(t,(0,f.default)(r)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(e,t){return e.concat(t.delta())}),new s.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=[];0===t?this.scroll.path(e).forEach((function(e){var t=i(e,1)[0];t instanceof p.default?n.push(t):t instanceof c.default.Leaf&&r.push(t)})):(n=this.scroll.lines(e,t),r=this.scroll.descendants(c.default.Leaf,e,t));var o=[n,r].map((function(e){if(0===e.length)return{};for(var t=(0,d.bubbleFormats)(e.shift());Object.keys(t).length>0;){var n=e.shift();if(null==n)return t;t=_((0,d.bubbleFormats)(n),t)}return t}));return g.default.apply(g.default,o)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter((function(e){return"string"===typeof e.insert})).map((function(e){return e.insert})).join("")}},{key:"insertEmbed",value:function(e,t,n){return this.scroll.insertAt(e,t,n),this.update((new s.default).retain(e).insert(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n)))}},{key:"insertText",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(r).forEach((function(i){n.scroll.formatAt(e,t.length,i,r[i])})),this.update((new s.default).retain(e).insert(t,(0,f.default)(r)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===p.default.blotName&&!(e.children.length>1)&&e.children.head instanceof h.default}},{key:"removeFormat",value:function(e,t){var n=this.getText(e,t),r=this.scroll.line(e+t),o=i(r,2),a=o[0],c=o[1],u=0,d=new s.default;null!=a&&(u=a instanceof l.default?a.newlineIndex(c)-c+1:a.length()-c,d=a.delta().slice(c,c+u-1).insert("\n"));var p=this.getContents(e,t+u).diff((new s.default).insert(n).concat(d)),h=(new s.default).retain(e).concat(p);return this.applyDelta(h)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(y)&&c.default.find(t[0].target)){var i=c.default.find(t[0].target),o=(0,d.bubbleFormats)(i),a=i.offset(this.scroll),l=t[0].oldValue.replace(u.default.CONTENTS,""),p=(new s.default).insert(l),h=(new s.default).insert(i.value());e=(new s.default).retain(a).concat(p.diff(h,n)).reduce((function(e,t){return t.insert?e.insert(t.insert,o):e.push(t)}),new s.default),this.delta=r.compose(e)}else this.delta=this.getDelta(),e&&(0,m.default)(r.compose(e),this.delta)||(e=r.diff(this.delta,n));return e}}]),e}();function _(e,t){return Object.keys(t).reduce((function(n,r){return null==e[r]||(t[r]===e[r]?n[r]=t[r]:Array.isArray(t[r])?t[r].indexOf(e[r])<0&&(n[r]=t[r].concat([e[r]])):n[r]=[t[r],e[r]]),n}),{})}t.default=E},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=u(r(0)),a=u(r(21)),c=u(r(11)),l=u(r(8));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=(0,u(r(10)).default)("quill:selection"),f=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p(this,e),this.index=t,this.length=n},m=function(){function e(t,n){var r=this;p(this,e),this.emitter=n,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=s.default.create("cursor",this),this.lastRange=this.savedRange=new f(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){r.mouseDown||setTimeout(r.update.bind(r,l.default.sources.USER),1)})),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&r.update(l.default.sources.SILENT)})),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,(function(){if(r.hasFocus()){var e=r.getNativeRange();null!=e&&e.start.node!==r.cursor.textNode&&r.emitter.once(l.default.events.SCROLL_UPDATE,(function(){try{r.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(t){}}))}})),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,(function(e,t){if(t.range){var n=t.range,i=n.startNode,o=n.startOffset,s=n.endNode,a=n.endOffset;r.setNativeRange(i,o,s,a)}})),this.update(l.default.sources.SILENT)}return o(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",(function(){e.composing=!0})),this.root.addEventListener("compositionend",(function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout((function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,(function(){e.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){e.mouseDown=!1,e.update(l.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!s.default.query(e,s.default.Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var r=s.default.find(n.start.node,!1);if(null==r)return;if(r instanceof s.default.Leaf){var i=r.split(n.start.offset);r.parent.insertBefore(this.cursor,i)}else r.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();e=Math.min(e,n-1),t=Math.min(e+t,n-1)-e;var r=void 0,o=this.scroll.leaf(e),s=i(o,2),a=s[0],c=s[1];if(null==a)return null;var l=a.position(c,!0),u=i(l,2);r=u[0],c=u[1];var d=document.createRange();if(t>0){d.setStart(r,c);var p=this.scroll.leaf(e+t),h=i(p,2);if(a=h[0],c=h[1],null==a)return null;var f=a.position(c,!0),m=i(f,2);return r=m[0],c=m[1],d.setEnd(r,c),d.getBoundingClientRect()}var g="left",v=void 0;return r instanceof Text?(c<r.data.length?(d.setStart(r,c),d.setEnd(r,c+1)):(d.setStart(r,c-1),d.setEnd(r,c),g="right"),v=d.getBoundingClientRect()):(v=a.domNode.getBoundingClientRect(),c>0&&(g="right")),{bottom:v.top+v.height,height:v.height,left:v[g],right:v[g],top:v.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var n=this.normalizeNative(t);return h.info("getNativeRange",n),n}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);var r=n.map((function(e){var n=i(e,2),r=n[0],o=n[1],a=s.default.find(r,!0),c=a.offset(t.scroll);return 0===o?c:a instanceof s.default.Container?c+a.length():c+a.index(r,o)})),o=Math.min(Math.max.apply(Math,d(r)),this.scroll.length()-1),a=Math.min.apply(Math,[o].concat(d(r)));return new f(a,o-a)}},{key:"normalizeNative",value:function(e){if(!g(this.root,e.startContainer)||!e.collapsed&&!g(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach((function(e){for(var t=e.node,n=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>n)t=t.childNodes[n],n=0;else{if(t.childNodes.length!==n)break;n=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=n})),t}},{key:"rangeToNative",value:function(e){var t=this,n=e.collapsed?[e.index]:[e.index,e.index+e.length],r=[],o=this.scroll.length();return n.forEach((function(e,n){e=Math.min(o-1,e);var s,a=t.scroll.leaf(e),c=i(a,2),l=c[0],u=c[1],d=l.position(u,0!==n),p=i(d,2);s=p[0],u=p[1],r.push(s,u)})),r.length<2&&(r=r.concat(r)),r}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var n=this.getBounds(t.index,t.length);if(null!=n){var r=this.scroll.length()-1,o=this.scroll.line(Math.min(t.index,r)),s=i(o,1)[0],a=s;if(t.length>0){var c=this.scroll.line(Math.min(t.index+t.length,r));a=i(c,1)[0]}if(null!=s&&null!=a){var l=e.getBoundingClientRect();n.top<l.top?e.scrollTop-=l.top-n.top:n.bottom>l.bottom&&(e.scrollTop+=n.bottom-l.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(h.info("setNativeRange",e,t,n,r),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=n.parentNode){var o=document.getSelection();if(null!=o)if(null!=e){this.hasFocus()||this.root.focus();var s=(this.getNativeRange()||{}).native;if(null==s||i||e!==s.startContainer||t!==s.startOffset||n!==s.endContainer||r!==s.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==n.tagName&&(r=[].indexOf.call(n.parentNode.childNodes,n),n=n.parentNode);var a=document.createRange();a.setStart(e,t),a.setEnd(n,r),o.removeAllRanges(),o.addRange(a)}}else o.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"===typeof t&&(n=t,t=!1),h.info("setRange",e),null!=e){var r=this.rangeToNative(e);this.setNativeRange.apply(this,d(r).concat([t]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,n=this.getRange(),r=i(n,2),o=r[0],s=r[1];if(this.lastRange=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,c.default)(t,this.lastRange)){var u;!this.composing&&null!=s&&s.native.collapsed&&s.start.node!==this.cursor.textNode&&this.cursor.restore();var d,p=[l.default.events.SELECTION_CHANGE,(0,a.default)(this.lastRange),(0,a.default)(t),e];(u=this.emitter).emit.apply(u,[l.default.events.EDITOR_CHANGE].concat(p)),e!==l.default.sources.SILENT&&(d=this.emitter).emit.apply(d,p)}}}]),e}();function g(t,n){try{n.parentNode}catch(e){return!1}return n instanceof Text&&(n=n.parentNode),t.contains(n)}n.Range=f,n.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"insertInto",value:function(e,n){0===e.children.length?o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,n):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default.Embed);a.blotName="break",a.tagName="BR",t.default=a},function(t,n,r){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(44),s=r(30),a=r(1),c=function(e){function t(t){var n=e.call(this,t)||this;return n.build(),n}return i(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach((function(e){e.attach()}))},t.prototype.build=function(){var e=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(t){try{var n=l(t);e.insertBefore(n,e.children.head||void 0)}catch(r){if(r instanceof a.ParchmentError)return;throw r}}))},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(function(e,t,n){e.deleteAt(t,n)}))},t.prototype.descendant=function(e,n){var r=this.children.find(n),i=r[0],o=r[1];return null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e?[i,o]:i instanceof t?i.descendant(e,o):[null,-1]},t.prototype.descendants=function(e,n,r){void 0===n&&(n=0),void 0===r&&(r=Number.MAX_VALUE);var i=[],o=r;return this.children.forEachAt(n,r,(function(n,r,s){(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&i.push(n),n instanceof t&&(i=i.concat(n.descendants(e,r,o))),o-=s})),i},t.prototype.detach=function(){this.children.forEach((function(e){e.detach()})),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,n,r){this.children.forEachAt(e,t,(function(e,t,i){e.formatAt(t,i,n,r)}))},t.prototype.insertAt=function(e,t,n){var r=this.children.find(e),i=r[0],o=r[1];if(i)i.insertAt(o,t,n);else{var s=null==n?a.create("text",t):a.create(t,n);this.appendChild(s)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t})))throw new a.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce((function(e,t){return e+t.length()}),0)},t.prototype.moveChildren=function(e,t){this.children.forEach((function(n){e.insertBefore(n,t)}))},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var n=a.create(this.statics.defaultChild);this.appendChild(n),n.optimize(t)}else this.remove()},t.prototype.path=function(e,n){void 0===n&&(n=!1);var r=this.children.find(e,n),i=r[0],o=r[1],s=[[this,e]];return i instanceof t?s.concat(i.path(o,n)):(null!=i&&s.push([i,o]),s)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(n){n instanceof t&&n.moveChildren(this),e.prototype.replace.call(this,n)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(e,this.length(),(function(e,r,i){e=e.split(r,t),n.appendChild(e)})),n},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var n=this,r=[],i=[];e.forEach((function(e){e.target===n.domNode&&"childList"===e.type&&(r.push.apply(r,e.addedNodes),i.push.apply(i,e.removedNodes))})),i.forEach((function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=a.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==n.domNode||t.detach())}})),r.filter((function(e){return e.parentNode==n.domNode})).sort((function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(e){var t=null;null!=e.nextSibling&&(t=a.find(e.nextSibling));var r=l(e);r.next==t&&null!=r.next||(null!=r.parent&&r.parent.removeChild(n),n.insertBefore(r,t||void 0))}))},t}(s.default);function l(t){var n=a.find(t);if(null==n)try{n=a.create(t)}catch(e){n=a.create(a.Scope.INLINE),[].slice.call(t.childNodes).forEach((function(e){n.domNode.appendChild(e)})),t.parentNode&&t.parentNode.replaceChild(n.domNode,t),n.attach()}return n}n.default=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),o=n(31),s=n(17),a=n(1),c=function(e){function t(t){var n=e.call(this,t)||this;return n.attributes=new o.default(n.domNode),n}return r(t,e),t.formats=function(e){return"string"===typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var n=a.query(e);n instanceof i.default?this.attributes.attribute(n,t):t&&(null==n||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,n){var r=e.prototype.replaceWith.call(this,t,n);return this.attributes.copy(r),r},t.prototype.update=function(t,n){var r=this;e.prototype.update.call(this,t,n),t.some((function(e){return e.target===r.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.prototype.wrap=function(n,r){var i=e.prototype.wrap.call(this,n,r);return i instanceof t&&i.statics.scope===this.statics.scope&&this.attributes.move(i),i},t}(s.default);t.default=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),o=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(n+=1),[this.parent.domNode,n]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=o.Scope.INLINE_BLOT,t}(i.default);t.default=s},function(e,t,n){var r=n(11),i=n(3),o={attributes:{compose:function(e,t,n){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var r=i(!0,{},t);for(var o in n||(r=Object.keys(r).reduce((function(e,t){return null!=r[t]&&(e[t]=r[t]),e}),{})),e)void 0!==e[o]&&void 0===t[o]&&(r[o]=e[o]);return Object.keys(r).length>0?r:void 0},diff:function(e,t){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var n=Object.keys(e).concat(Object.keys(t)).reduce((function(n,i){return r(e[i],t[i])||(n[i]=void 0===t[i]?null:t[i]),n}),{});return Object.keys(n).length>0?n:void 0},transform:function(e,t,n){if("object"!==typeof e)return t;if("object"===typeof t){if(!n)return t;var r=Object.keys(t).reduce((function(n,r){return void 0===e[r]&&(n[r]=t[r]),n}),{});return Object.keys(r).length>0?r:void 0}}},iterator:function(e){return new s(e)},length:function(e){return"number"===typeof e.delete?e.delete:"number"===typeof e.retain?e.retain:"string"===typeof e.insert?e.insert.length:1}};function s(e){this.ops=e,this.index=0,this.offset=0}s.prototype.hasNext=function(){return this.peekLength()<1/0},s.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var n=this.offset,r=o.length(t);if(e>=r-n?(e=r-n,this.index+=1,this.offset=0):this.offset+=e,"number"===typeof t.delete)return{delete:e};var i={};return t.attributes&&(i.attributes=t.attributes),"number"===typeof t.retain?i.retain=e:"string"===typeof t.insert?i.insert=t.insert.substr(n,e):i.insert=t.insert,i}return{retain:1/0}},s.prototype.peek=function(){return this.ops[this.index]},s.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},s.prototype.peekType=function(){return this.ops[this.index]?"number"===typeof this.ops[this.index].delete?"delete":"number"===typeof this.ops[this.index].retain?"retain":"insert":"retain"},s.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=e,this.index=t,[n].concat(r)}return[]},e.exports=o},function(e,t){var n=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(a){t=function(){}}try{n=Set}catch(a){n=function(){}}try{r=Promise}catch(a){r=function(){}}function i(o,a,c,l,u){"object"===typeof a&&(c=a.depth,l=a.prototype,u=a.includeNonEnumerable,a=a.circular);var d=[],p=[],h="undefined"!=typeof Buffer;return"undefined"==typeof a&&(a=!0),"undefined"==typeof c&&(c=1/0),function o(c,f){if(null===c)return null;if(0===f)return c;var m,g;if("object"!=typeof c)return c;if(e(c,t))m=new t;else if(e(c,n))m=new n;else if(e(c,r))m=new r((function(e,t){c.then((function(t){e(o(t,f-1))}),(function(e){t(o(e,f-1))}))}));else if(i.__isArray(c))m=[];else if(i.__isRegExp(c))m=new RegExp(c.source,s(c)),c.lastIndex&&(m.lastIndex=c.lastIndex);else if(i.__isDate(c))m=new Date(c.getTime());else{if(h&&Buffer.isBuffer(c))return m=Buffer.allocUnsafe?Buffer.allocUnsafe(c.length):new Buffer(c.length),c.copy(m),m;e(c,Error)?m=Object.create(c):"undefined"==typeof l?(g=Object.getPrototypeOf(c),m=Object.create(g)):(m=Object.create(l),g=l)}if(a){var v=d.indexOf(c);if(-1!=v)return p[v];d.push(c),p.push(m)}for(var y in e(c,t)&&c.forEach((function(e,t){var n=o(t,f-1),r=o(e,f-1);m.set(n,r)})),e(c,n)&&c.forEach((function(e){var t=o(e,f-1);m.add(t)})),c){var E;g&&(E=Object.getOwnPropertyDescriptor(g,y)),E&&null==E.set||(m[y]=o(c[y],f-1))}if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(c);for(y=0;y<_.length;y++){var b=_[y];(!(T=Object.getOwnPropertyDescriptor(c,b))||T.enumerable||u)&&(m[b]=o(c[b],f-1),T.enumerable||Object.defineProperty(m,b,{enumerable:!1}))}}if(u){var S=Object.getOwnPropertyNames(c);for(y=0;y<S.length;y++){var T,I=S[y];(T=Object.getOwnPropertyDescriptor(c,I))&&T.enumerable||(m[I]=o(c[I],f-1),Object.defineProperty(m,I,{enumerable:!1}))}}return m}(o,c)}function o(e){return Object.prototype.toString.call(e)}function s(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=o,i.__isDate=function(e){return"object"===typeof e&&"[object Date]"===o(e)},i.__isArray=function(e){return"object"===typeof e&&"[object Array]"===o(e)},i.__isRegExp=function(e){return"object"===typeof e&&"[object RegExp]"===o(e)},i.__getRegExpFlags=s,i}();"object"===typeof e&&e.exports&&(e.exports=n)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=h(n(0)),a=h(n(8)),c=n(4),l=h(c),u=h(n(16)),d=h(n(13)),p=h(n(25));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){return e instanceof l.default||e instanceof c.BlockEmbed}var m=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.emitter=n.emitter,Array.isArray(n.whitelist)&&(r.whitelist=n.whitelist.reduce((function(e,t){return e[t]=!0,e}),{})),r.domNode.addEventListener("DOMNodeInserted",(function(){})),r.optimize(),r.enable(),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,n){var i=this.line(e),s=r(i,2),a=s[0],l=s[1],p=this.line(e+n),h=r(p,1)[0];if(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),null!=h&&a!==h&&l>0){if(a instanceof c.BlockEmbed||h instanceof c.BlockEmbed)return void this.optimize();if(a instanceof d.default){var f=a.newlineIndex(a.length(),!0);if(f>-1&&(a=a.split(f+1))===h)return void this.optimize()}else if(h instanceof d.default){var m=h.newlineIndex(0);m>-1&&h.split(m+1)}var g=h.children.head instanceof u.default?null:h.children.head;a.moveChildren(h,g),a.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,n,r,i){(null==this.whitelist||this.whitelist[r])&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,n,r,i),this.optimize())}},{key:"insertAt",value:function(e,n,r){if(null==r||null==this.whitelist||this.whitelist[n]){if(e>=this.length())if(null==r||null==s.default.query(n,s.default.Scope.BLOCK)){var i=s.default.create(this.statics.defaultChild);this.appendChild(i),null==r&&n.endsWith("\n")&&(n=n.slice(0,-1)),i.insertAt(0,n,r)}else{var a=s.default.create(n,r);this.appendChild(a)}else o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,r);this.optimize()}}},{key:"insertBefore",value:function(e,n){if(e.statics.scope===s.default.Scope.INLINE_BLOT){var r=s.default.create(this.statics.defaultChild);r.appendChild(e),e=r}o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(f,e)}},{key:"lines",value:function(){return function e(t,n,r){var i=[],o=r;return t.children.forEachAt(n,r,(function(t,n,r){f(t)?i.push(t):t instanceof s.default.Container&&(i=i.concat(e(t,n,o))),o-=r})),i}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,n),e.length>0&&this.emitter.emit(a.default.events.SCROLL_OPTIMIZE,e,n))}},{key:"path",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var n=a.default.sources.USER;"string"===typeof e&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(a.default.events.SCROLL_BEFORE_UPDATE,n,e),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(a.default.events.SCROLL_UPDATE,n,e)}}}]),t}(s.default.Scroll);m.blotName="scroll",m.className="ql-editor",m.tagName="DIV",m.defaultChild="block",m.allowedChildren=[l.default,c.BlockEmbed,p.default],t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=m(n(21)),a=m(n(11)),c=m(n(3)),l=m(n(2)),u=m(n(20)),d=m(n(0)),p=m(n(5)),h=m(n(10)),f=m(n(9));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,h.default)("quill:keyboard"),y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",E=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.bindings={},Object.keys(r.options.bindings).forEach((function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&r.options.bindings[t]&&r.addBinding(r.options.bindings[t])})),r.addBinding({key:t.keys.ENTER,shiftKey:null},I),r.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(r.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},b),r.addBinding({key:t.keys.DELETE},{collapsed:!0},S)):(r.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},b),r.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},S)),r.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},T),r.addBinding({key:t.keys.DELETE},{collapsed:!1},T),r.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},b),r.listen(),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"match",value:function(e,t){return t=C(t),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!t[n]!==e[n]&&null!==t[n]}))&&t.key===(e.which||e.keyCode)}}]),o(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=C(e);if(null==r||null==r.key)return v.warn("Attempted to add invalid keyboard binding",r);"function"===typeof t&&(t={handler:t}),"function"===typeof n&&(n={handler:n}),r=(0,c.default)(r,t,n),this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",(function(n){if(!n.defaultPrevented){var o=n.which||n.keyCode,s=(e.bindings[o]||[]).filter((function(e){return t.match(n,e)}));if(0!==s.length){var c=e.quill.getSelection();if(null!=c&&e.quill.hasFocus()){var l=e.quill.getLine(c.index),u=i(l,2),p=u[0],h=u[1],f=e.quill.getLeaf(c.index),m=i(f,2),g=m[0],v=m[1],y=0===c.length?[g,v]:e.quill.getLeaf(c.index+c.length),E=i(y,2),_=E[0],b=E[1],S=g instanceof d.default.Text?g.value().slice(0,v):"",T=_ instanceof d.default.Text?_.value().slice(b):"",I={collapsed:0===c.length,empty:0===c.length&&p.length()<=1,format:e.quill.getFormat(c),offset:h,prefix:S,suffix:T};s.some((function(t){if(null!=t.collapsed&&t.collapsed!==I.collapsed)return!1;if(null!=t.empty&&t.empty!==I.empty)return!1;if(null!=t.offset&&t.offset!==I.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((function(e){return null==I.format[e]})))return!1}else if("object"===r(t.format)&&!Object.keys(t.format).every((function(e){return!0===t.format[e]?null!=I.format[e]:!1===t.format[e]?null==I.format[e]:(0,a.default)(t.format[e],I.format[e])})))return!1;return!(null!=t.prefix&&!t.prefix.test(I.prefix))&&!(null!=t.suffix&&!t.suffix.test(I.suffix))&&!0!==t.handler.call(e,c,I)}))&&n.preventDefault()}}}}))}}]),t}(f.default);function _(e,t){var n,r=e===E.keys.LEFT?"prefix":"suffix";return g(n={key:e,shiftKey:t,altKey:null},r,/^$/),g(n,"handler",(function(n){var r=n.index;e===E.keys.RIGHT&&(r+=n.length+1);var o=this.quill.getLeaf(r);return!(i(o,1)[0]instanceof d.default.Embed)||(e===E.keys.LEFT?t?this.quill.setSelection(n.index-1,n.length+1,p.default.sources.USER):this.quill.setSelection(n.index-1,p.default.sources.USER):t?this.quill.setSelection(n.index,n.length+1,p.default.sources.USER):this.quill.setSelection(n.index+n.length+1,p.default.sources.USER),!1)})),n}function b(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var n=this.quill.getLine(e.index),r=i(n,1)[0],o={};if(0===t.offset){var s=this.quill.getLine(e.index-1),a=i(s,1)[0];if(null!=a&&a.length()>1){var c=r.formats(),l=this.quill.getFormat(e.index-1,1);o=u.default.attributes.diff(c,l)||{}}}var d=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-d,d,p.default.sources.USER),Object.keys(o).length>0&&this.quill.formatLine(e.index-d,d,o,p.default.sources.USER),this.quill.focus()}}function S(e,t){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-n)){var r={},o=0,s=this.quill.getLine(e.index),a=i(s,1)[0];if(t.offset>=a.length()-1){var c=this.quill.getLine(e.index+1),l=i(c,1)[0];if(l){var d=a.formats(),h=this.quill.getFormat(e.index,1);r=u.default.attributes.diff(d,h)||{},o=l.length()}}this.quill.deleteText(e.index,n,p.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index+o-1,n,r,p.default.sources.USER)}}function T(e){var t=this.quill.getLines(e),n={};if(t.length>1){var r=t[0].formats(),i=t[t.length-1].formats();n=u.default.attributes.diff(i,r)||{}}this.quill.deleteText(e,p.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index,1,n,p.default.sources.USER),this.quill.setSelection(e.index,p.default.sources.SILENT),this.quill.focus()}function I(e,t){var n=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var r=Object.keys(t.format).reduce((function(e,n){return d.default.query(n,d.default.Scope.BLOCK)&&!Array.isArray(t.format[n])&&(e[n]=t.format[n]),e}),{});this.quill.insertText(e.index,"\n",r,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach((function(e){null==r[e]&&(Array.isArray(t.format[e])||"link"!==e&&n.quill.format(e,t.format[e],p.default.sources.USER))}))}function N(e){return{key:E.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var n=d.default.query("code-block"),r=t.index,o=t.length,s=this.quill.scroll.descendant(n,r),a=i(s,2),c=a[0],l=a[1];if(null!=c){var u=this.quill.getIndex(c),h=c.newlineIndex(l,!0)+1,f=c.newlineIndex(u+l+o),m=c.domNode.textContent.slice(h,f).split("\n");l=0,m.forEach((function(t,i){e?(c.insertAt(h+l,n.TAB),l+=n.TAB.length,0===i?r+=n.TAB.length:o+=n.TAB.length):t.startsWith(n.TAB)&&(c.deleteAt(h+l,n.TAB.length),l-=n.TAB.length,0===i?r-=n.TAB.length:o-=n.TAB.length),l+=t.length+1})),this.quill.update(p.default.sources.USER),this.quill.setSelection(r,o,p.default.sources.SILENT)}}}}function w(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,n){this.quill.format(e,!n.format[e],p.default.sources.USER)}}}function C(e){if("string"===typeof e||"number"===typeof e)return C({key:e});if("object"===("undefined"===typeof e?"undefined":r(e))&&(e=(0,s.default)(e,!1)),"string"===typeof e.key)if(null!=E.keys[e.key.toUpperCase()])e.key=E.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[y]=e.shortKey,delete e.shortKey),e}E.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},E.DEFAULTS={bindings:{bold:w("bold"),italic:w("italic"),underline:w("underline"),indent:{key:E.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",p.default.sources.USER)}},outdent:{key:E.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",p.default.sources.USER)}},"outdent backspace":{key:E.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",p.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,p.default.sources.USER)}},"indent code-block":N(!0),"outdent code-block":N(!1),"remove tab":{key:E.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,p.default.sources.USER)}},tab:{key:E.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new l.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,p.default.sources.SILENT)}},"list empty enter":{key:E.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,p.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,p.default.sources.USER)}},"checklist enter":{key:E.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),n=i(t,2),r=n[0],o=n[1],s=(0,c.default)({},r.formats(),{list:"checked"}),a=(new l.default).retain(e.index).insert("\n",s).retain(r.length()-o-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:E.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var n=this.quill.getLine(e.index),r=i(n,2),o=r[0],s=r[1],a=(new l.default).retain(e.index).insert("\n",t.format).retain(o.length()-s-1).retain(1,{header:null});this.quill.updateContents(a,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var n=t.prefix.length,r=this.quill.getLine(e.index),o=i(r,2),s=o[0],a=o[1];if(a>n)return!0;var c=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":c="unchecked";break;case"[x]":c="checked";break;case"-":case"*":c="bullet";break;default:c="ordered"}this.quill.insertText(e.index," ",p.default.sources.USER),this.quill.history.cutoff();var u=(new l.default).retain(e.index-a).delete(n+1).retain(s.length()-2-a).retain(1,{list:c});this.quill.updateContents(u,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-n,p.default.sources.SILENT)}},"code exit":{key:E.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),n=i(t,2),r=n[0],o=n[1],s=(new l.default).retain(e.index+r.length()-o-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(s,p.default.sources.USER)}},"embed left":_(E.keys.LEFT,!1),"embed left shift":_(E.keys.LEFT,!0),"embed right":_(E.keys.RIGHT,!1),"embed right shift":_(E.keys.RIGHT,!0)}},t.default=E,t.SHORTKEY=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=c(n(0)),a=c(n(7));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.selection=n,r.textNode=document.createTextNode(t.CONTENTS),r.domNode.appendChild(r.textNode),r._length=0,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"value",value:function(){}}]),o(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,n){if(0!==this._length)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n);for(var r=this,o=0;null!=r&&r.statics.scope!==s.default.Scope.BLOCK_BLOT;)o+=r.offset(r.parent),r=r.parent;null!=r&&(this._length=t.CONTENTS.length,r.optimize(),r.formatAt(o,t.CONTENTS.length,e,n),this._length=0)}},{key:"index",value:function(e,n){return e===this.textNode?0:i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,n)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,n=this.selection.getNativeRange(),i=void 0,o=void 0,c=void 0;if(null!=n&&n.start.node===e&&n.end.node===e){var l=[e,n.start.offset,n.end.offset];i=l[0],o=l[1],c=l[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var u=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof a.default?(i=this.next.domNode,this.next.insertAt(0,u),this.textNode.data=t.CONTENTS):(this.textNode.data=u,this.parent.insertBefore(s.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=o){var d=[o,c].map((function(e){return Math.max(0,Math.min(i.data.length,e-1))})),p=r(d,2);return o=p[0],c=p[1],{startNode:i,startOffset:o,endNode:i,endOffset:c}}}}},{key:"update",value:function(e,t){var n=this;if(e.some((function(e){return"characterData"===e.type&&e.target===n.textNode}))){var r=this.restore();r&&(t.range=r)}}},{key:"value",value:function(){return""}}]),t}(s.default.Embed);l.blotName="cursor",l.className="ql-cursor",l.tagName="span",l.CONTENTS="\ufeff",t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=n(4),o=s(i);function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default.Container);a.allowedChildren=[o.default,i.BlockEmbed,a],t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),a=(r=s)&&r.__esModule?r:{default:r},c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"value",value:function(e){var n=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+n.split(",").map((function(e){return("00"+parseInt(e).toString(16)).slice(-2)})).join("")):n}}]),t}(a.default.Attributor.Style),l=new a.default.Attributor.Class("color","ql-color",{scope:a.default.Scope.INLINE}),u=new c("color","color",{scope:a.default.Scope.INLINE});t.ColorAttributor=c,t.ColorClass=l,t.ColorStyle=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(6),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"format",value:function(e,n){if(e!==this.statics.blotName||!n)return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n);n=this.constructor.sanitize(n),this.domNode.setAttribute("href",n)}}],[{key:"create",value:function(e){var n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),n.setAttribute("href",e),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return c(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);function c(e,t){var n=document.createElement("a");n.href=e;var r=n.href.slice(0,n.href.indexOf(":"));return t.indexOf(r)>-1}a.blotName="link",a.tagName="A",a.SANITIZED_URL="about:blank",a.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=a,t.sanitize=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(23)),s=a(n(107));function a(e){return e&&e.__esModule?e:{default:e}}var c=0;function l(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){n.togglePicker()})),this.label.addEventListener("keydown",(function(e){switch(e.keyCode){case o.default.keys.ENTER:n.togglePicker();break;case o.default.keys.ESCAPE:n.escape(),e.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return i(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),l(this.label,"aria-expanded"),l(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,n=document.createElement("span");return n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item"),e.hasAttribute("value")&&n.setAttribute("data-value",e.getAttribute("value")),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",(function(){t.selectItem(n,!0)})),n.addEventListener("keydown",(function(e){switch(e.keyCode){case o.default.keys.ENTER:t.selectItem(n,!0),e.preventDefault();break;case o.default.keys.ESCAPE:t.escape(),e.preventDefault()}})),n}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=s.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+c,c+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach((function(n){var r=e.buildItem(n);t.appendChild(r),!0===n.selected&&e.selectItem(r)})),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach((function(t){e.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout((function(){return e.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.container.querySelector(".ql-selected");if(e!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"===typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"===typeof Event?"undefined":r(Event))){var i=document.createEvent("Event");i.initEvent("change",!0,!0),this.select.dispatchEvent(i)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var n=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=v(n(0)),i=v(n(5)),o=n(4),s=v(o),a=v(n(16)),c=v(n(25)),l=v(n(24)),u=v(n(35)),d=v(n(6)),p=v(n(22)),h=v(n(7)),f=v(n(55)),m=v(n(42)),g=v(n(23));function v(e){return e&&e.__esModule?e:{default:e}}i.default.register({"blots/block":s.default,"blots/block/embed":o.BlockEmbed,"blots/break":a.default,"blots/container":c.default,"blots/cursor":l.default,"blots/embed":u.default,"blots/inline":d.default,"blots/scroll":p.default,"blots/text":h.default,"modules/clipboard":f.default,"modules/history":m.default,"modules/keyboard":g.default}),r.default.register(s.default,a.default,l.default,d.default,p.default,h.default),t.default=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function e(e){this.domNode=e,this.domNode[r.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new r.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"===typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"===typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return r.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[r.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,n,i){var o=this.isolate(e,t);if(null!=r.query(n,r.Scope.BLOT)&&i)o.wrap(n,i);else if(null!=r.query(n,r.Scope.ATTRIBUTE)){var s=r.create(this.statics.scope);o.wrap(s),s.format(n,i)}},e.prototype.insertAt=function(e,t,n){var i=null==n?r.create("text",t):r.create(t,n),o=this.split(e);this.parent.insertBefore(i,o)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var n=null;e.children.insertBefore(this,t),null!=t&&(n=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==n||e.domNode.insertBefore(this.domNode,n),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var n=this.split(e);return n.split(t),n},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[r.DATA_KEY]&&delete this.domNode[r.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var n="string"===typeof e?r.create(e,t):e;return n.replace(this),n},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var n="string"===typeof e?r.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(n,this.next),n.appendChild(this),n},e.blotName="abstract",e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=n(32),o=n(33),s=n(1),a=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=r.default.keys(this.domNode),n=i.default.keys(this.domNode),a=o.default.keys(this.domNode);t.concat(n).concat(a).forEach((function(t){var n=s.query(t,s.Scope.ATTRIBUTE);n instanceof r.default&&(e.attributes[n.attrName]=n)}))},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach((function(n){var r=t.attributes[n].value(t.domNode);e.format(n,r)}))},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach((function(e){t.attributes[e].remove(t.domNode)})),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce((function(t,n){return t[n]=e.attributes[n].value(e.domNode),t}),{})},e}();t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function i(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return 0===e.indexOf(t+"-")}))}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map((function(e){return e.split("-").slice(0,-1).join("-")}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){i(e,this.keyName).forEach((function(t){e.classList.remove(t)})),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(i(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(n(12).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function i(e){var t=e.split("-"),n=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+n}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map((function(e){return e.split(":")[0].trim()}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[i(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[i(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[i(this.keyName)];return this.canAdd(e,t)?t:""},t}(n(12).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=n,this.modules={}}return r(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach((function(t){null==e.modules[t]&&e.addModule(t)}))}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();i.DEFAULTS={modules:{}},i.themes={default:i},t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=a(n(0)),s=a(n(7));function a(e){return e&&e.__esModule?e:{default:e}}var c="\ufeff",l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.contentNode=document.createElement("span"),n.contentNode.setAttribute("contenteditable",!1),[].slice.call(n.domNode.childNodes).forEach((function(e){n.contentNode.appendChild(e)})),n.leftGuard=document.createTextNode(c),n.rightGuard=document.createTextNode(c),n.domNode.appendChild(n.leftGuard),n.domNode.appendChild(n.contentNode),n.domNode.appendChild(n.rightGuard),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"index",value:function(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,n)}},{key:"restore",value:function(e){var t=void 0,n=void 0,r=e.data.split(c).join("");if(e===this.leftGuard)if(this.prev instanceof s.default){var i=this.prev.length();this.prev.insertAt(i,r),t={startNode:this.prev.domNode,startOffset:i+r.length}}else n=document.createTextNode(r),this.parent.insertBefore(o.default.create(n),this),t={startNode:n,startOffset:r.length};else e===this.rightGuard&&(this.next instanceof s.default?(this.next.insertAt(0,r),t={startNode:this.next.domNode,startOffset:r.length}):(n=document.createTextNode(r),this.parent.insertBefore(o.default.create(n),this.next),t={startNode:n,startOffset:r.length}));return e.data=c,t}},{key:"update",value:function(e,t){var n=this;e.forEach((function(e){if("characterData"===e.type&&(e.target===n.leftGuard||e.target===n.rightGuard)){var r=n.restore(e.target);r&&(t.range=r)}}))}}]),t}(o.default.Embed);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var r,i=n(0),o=(r=i)&&r.__esModule?r:{default:r},s={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},a=new o.default.Attributor.Attribute("align","align",s),c=new o.default.Attributor.Class("align","ql-align",s),l=new o.default.Attributor.Style("align","text-align",s);t.AlignAttribute=a,t.AlignClass=c,t.AlignStyle=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var r,i=n(0),o=(r=i)&&r.__esModule?r:{default:r},s=n(26),a=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),c=new s.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});t.BackgroundClass=a,t.BackgroundStyle=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var r,i=n(0),o=(r=i)&&r.__esModule?r:{default:r},s={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},a=new o.default.Attributor.Attribute("direction","dir",s),c=new o.default.Attributor.Class("direction","ql-direction",s),l=new o.default.Attributor.Style("direction","direction",s);t.DirectionAttribute=a,t.DirectionClass=c,t.DirectionStyle=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),a=(r=s)&&r.__esModule?r:{default:r},c={scope:a.default.Scope.INLINE,whitelist:["serif","monospace"]},l=new a.default.Attributor.Class("font","ql-font",c),u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"value",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(a.default.Attributor.Style),d=new u("font","font-family",c);t.FontStyle=d,t.FontClass=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var r,i=n(0),o=(r=i)&&r.__esModule?r:{default:r},s=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),a=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=s,t.SizeStyle=a},function(e,t,n){"use strict";e.exports={align:{"":n(76),center:n(77),right:n(78),justify:n(79)},background:n(80),blockquote:n(81),bold:n(82),clean:n(83),code:n(58),"code-block":n(58),color:n(84),direction:{"":n(85),rtl:n(86)},float:{center:n(87),full:n(88),left:n(89),right:n(90)},formula:n(91),header:{1:n(92),2:n(93)},italic:n(94),image:n(95),indent:{"+1":n(96),"-1":n(97)},link:n(98),list:{ordered:n(99),bullet:n(100),check:n(101)},script:{sub:n(102),super:n(103)},strike:n(104),underline:n(105),video:n(106)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(0)),o=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.lastRecorded=0,r.ignoreChange=!1,r.clear(),r.quill.on(o.default.events.EDITOR_CHANGE,(function(e,t,n,i){e!==o.default.events.TEXT_CHANGE||r.ignoreChange||(r.options.userOnly&&i!==o.default.sources.USER?r.transform(t):r.record(t,n))})),r.quill.keyboard.addBinding({key:"Z",shortKey:!0},r.undo.bind(r)),r.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},r.redo.bind(r)),/Win/i.test(navigator.platform)&&r.quill.keyboard.addBinding({key:"Y",shortKey:!0},r.redo.bind(r)),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var n=this.stack[e].pop();this.stack[t].push(n),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[e],o.default.sources.USER),this.ignoreChange=!1;var r=c(n[e]);this.quill.setSelection(r)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var n=this.quill.getContents().diff(t),r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){var i=this.stack.undo.pop();n=n.compose(i.undo),e=i.redo.compose(e)}else this.lastRecorded=r;this.stack.undo.push({redo:e,undo:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})),this.stack.redo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(s(n(9)).default);function c(e){var t=e.reduce((function(e,t){return e+=t.delete||0}),0),n=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"===typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some((function(e){return null!=i.default.query(e,i.default.Scope.BLOCK)})))}(e)&&(n-=1),n}a.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=a,t.getLastChangeIndex=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=f(n(3)),s=f(n(2)),a=f(n(8)),c=f(n(23)),l=f(n(34)),u=f(n(59)),d=f(n(60)),p=f(n(28)),h=f(n(61));function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=[!1,"center","right","justify"],E=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],_=[!1,"serif","monospace"],b=["1","2","3",!1],S=["small",!1,"large","huge"],T=function(e){function t(e,n){m(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return e.emitter.listenDOM("click",document.body,(function t(n){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==r.tooltip||r.tooltip.root.contains(n.target)||document.activeElement===r.tooltip.textbox||r.quill.hasFocus()||r.tooltip.hide(),null!=r.pickers&&r.pickers.forEach((function(e){e.container.contains(n.target)||e.close()}))})),r}return v(t,e),r(t,[{key:"addModule",value:function(e){var n=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(n),n}},{key:"buildButtons",value:function(e,t){e.forEach((function(e){(e.getAttribute("class")||"").split(/\s+/).forEach((function(n){if(n.startsWith("ql-")&&(n=n.slice(3),null!=t[n]))if("direction"===n)e.innerHTML=t[n][""]+t[n].rtl;else if("string"===typeof t[n])e.innerHTML=t[n];else{var r=e.value||"";null!=r&&t[n][r]&&(e.innerHTML=t[n][r])}}))}))}},{key:"buildPickers",value:function(e,t){var n=this;this.pickers=e.map((function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&N(e,y),new d.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var n=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&N(e,E,"background"===n?"#ffffff":"#000000"),new u.default(e,t[n])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?N(e,_):e.classList.contains("ql-header")?N(e,b):e.classList.contains("ql-size")&&N(e,S)),new p.default(e)})),this.quill.on(a.default.events.EDITOR_CHANGE,(function(){n.pickers.forEach((function(e){e.update()}))}))}}]),t}(l.default);T.DEFAULTS=(0,o.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",(function(){if(null!=t.files&&null!=t.files[0]){var n=new FileReader;n.onload=function(n){var r=e.quill.getSelection(!0);e.quill.updateContents((new s.default).retain(r.index).delete(r.length).insert({image:n.target.result}),a.default.sources.USER),e.quill.setSelection(r.index+1,a.default.sources.SILENT),t.value=""},n.readAsDataURL(t.files[0])}})),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var I=function(e){function t(e,n){m(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.textbox=r.root.querySelector('input[type="text"]'),r.listen(),r}return v(t,e),r(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",(function(t){c.default.match(t,"enter")?(e.save(),t.preventDefault()):c.default.match(t,"escape")&&(e.cancel(),t.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var t=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,a.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,a.default.sources.USER)),this.quill.root.scrollTop=t;break;case"video":e=function(e){var t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e}(e);case"formula":if(!e)break;var n=this.quill.getSelection(!0);if(null!=n){var r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,a.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(r+1," ",a.default.sources.USER),this.quill.setSelection(r+2,a.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(h.default);function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var r=document.createElement("option");t===n?r.setAttribute("selected","selected"):r.setAttribute("value",t),e.appendChild(r)}))}t.BaseTooltip=I,t.default=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,n=this.iterator();t=n();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,n=this.head;null!=n;){if(n===e)return t;t+=n.length(),n=n.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var n,r=this.iterator();n=r();){var i=n.length();if(e<i||t&&e===i&&(null==n.next||0!==n.next.length()))return[n,e];e-=i}return[null,0]},e.prototype.forEach=function(e){for(var t,n=this.iterator();t=n();)e(t)},e.prototype.forEachAt=function(e,t,n){if(!(t<=0))for(var r,i=this.find(e),o=i[0],s=e-i[1],a=this.iterator(o);(r=a())&&s<e+t;){var c=r.length();e>s?n(r,e-s,Math.min(t,s+c-e)):n(r,0,Math.min(c,e+t-s)),s+=c}},e.prototype.map=function(e){return this.reduce((function(t,n){return t.push(e(n)),t}),[])},e.prototype.reduce=function(e,t){for(var n,r=this.iterator();n=r();)t=e(t,n);return t},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),o=n(1),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},a=function(e){function t(t){var n=e.call(this,t)||this;return n.scroll=n,n.observer=new MutationObserver((function(e){n.update(e)})),n.observer.observe(n.domNode,s),n.attach(),n}return r(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,n){this.update(),0===t&&n===this.length()?this.children.forEach((function(e){e.remove()})):e.prototype.deleteAt.call(this,t,n)},t.prototype.formatAt=function(t,n,r,i){this.update(),e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.insertAt=function(t,n,r){this.update(),e.prototype.insertAt.call(this,t,n,r)},t.prototype.optimize=function(t,n){var r=this;void 0===t&&(t=[]),void 0===n&&(n={}),e.prototype.optimize.call(this,n);for(var s=[].slice.call(this.observer.takeRecords());s.length>0;)t.push(s.pop());for(var a=function(e,t){void 0===t&&(t=!0),null!=e&&e!==r&&null!=e.domNode.parentNode&&(null==e.domNode[o.DATA_KEY].mutations&&(e.domNode[o.DATA_KEY].mutations=[]),t&&a(e.parent))},c=function(e){null!=e.domNode[o.DATA_KEY]&&null!=e.domNode[o.DATA_KEY].mutations&&(e instanceof i.default&&e.children.forEach(c),e.optimize(n))},l=t,u=0;l.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach((function(e){var t=o.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(a(o.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,(function(e){var t=o.find(e,!1);a(t,!1),t instanceof i.default&&t.children.forEach((function(e){a(e,!1)}))}))):"attributes"===e.type&&a(t.prev)),a(t))})),this.children.forEach(c),s=(l=[].slice.call(this.observer.takeRecords())).slice();s.length>0;)t.push(s.pop())}},t.prototype.update=function(t,n){var r=this;void 0===n&&(n={}),(t=t||this.observer.takeRecords()).map((function(e){var t=o.find(e.target,!0);return null==t?null:null==t.domNode[o.DATA_KEY].mutations?(t.domNode[o.DATA_KEY].mutations=[e],t):(t.domNode[o.DATA_KEY].mutations.push(e),null)})).forEach((function(e){null!=e&&e!==r&&null!=e.domNode[o.DATA_KEY]&&e.update(e.domNode[o.DATA_KEY].mutations||[],n)})),null!=this.domNode[o.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,n),this.optimize(t,n)},t.blotName="scroll",t.defaultChild="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="DIV",t}(i.default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(n){if(n.tagName!==t.tagName)return e.formats.call(this,n)},t.prototype.format=function(n,r){var o=this;n!==this.statics.blotName||r?e.prototype.format.call(this,n,r):(this.children.forEach((function(e){e instanceof i.default||(e=e.wrap(t.blotName,!0)),o.attributes.copy(e)})),this.unwrap())},t.prototype.formatAt=function(t,n,r,i){null!=this.formats()[r]||o.query(r,o.Scope.ATTRIBUTE)?this.isolate(t,n).format(r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n);var r=this.formats();if(0===Object.keys(r).length)return this.unwrap();var i=this.next;i instanceof t&&i.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}(r,i.formats())&&(i.moveChildren(this),i.remove())},t.blotName="inline",t.scope=o.Scope.INLINE_BLOT,t.tagName="SPAN",t}(i.default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(n){var r=o.query(t.blotName).tagName;if(n.tagName!==r)return e.formats.call(this,n)},t.prototype.format=function(n,r){null!=o.query(n,o.Scope.BLOCK)&&(n!==this.statics.blotName||r?e.prototype.format.call(this,n,r):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,n,r,i){null!=o.query(r,o.Scope.BLOCK)?this.format(r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.insertAt=function(t,n,r){if(null==r||null!=o.query(n,o.Scope.INLINE))e.prototype.insertAt.call(this,t,n,r);else{var i=this.split(t),s=o.create(n,r);i.parent.insertBefore(s,i)}},t.prototype.update=function(t,n){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,n)},t.blotName="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="P",t}(i.default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(e){},t.prototype.format=function(t,n){e.prototype.formatAt.call(this,0,this.length(),t,n)},t.prototype.formatAt=function(t,n,r,i){0===t&&n===this.length()?this.format(r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(n(19).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),o=n(1),s=function(e){function t(t){var n=e.call(this,t)||this;return n.text=n.statics.value(n.domNode),n}return r(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,n,r){null==r?(this.text=this.text.slice(0,t)+n+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,n,r)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=o.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},t.prototype.update=function(e,t){var n=this;e.some((function(e){return"characterData"===e.type&&e.target===n.domNode}))&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=o.Scope.INLINE_BLOT,t}(i.default);t.default=s},function(e,t,n){"use strict";var r=document.createElement("div");if(r.classList.toggle("test-class",!1),r.classList.contains("test-class")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)===!t?t:i.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(t=n[o],e.call(i,t,o,n))return t}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(e,t){var n=-1,r=1,i=0;function o(e,t,u){if(e==t)return e?[[i,e]]:[];(u<0||e.length<u)&&(u=null);var p=a(e,t),h=e.substring(0,p);p=c(e=e.substring(p),t=t.substring(p));var f=e.substring(e.length-p),m=function(e,t){var l;if(!e)return[[r,t]];if(!t)return[[n,e]];var u=e.length>t.length?e:t,d=e.length>t.length?t:e,p=u.indexOf(d);if(-1!=p)return l=[[r,u.substring(0,p)],[i,d],[r,u.substring(p+d.length)]],e.length>t.length&&(l[0][0]=l[2][0]=n),l;if(1==d.length)return[[n,e],[r,t]];var h=function(e,t){var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;function i(e,t,n){for(var r,i,o,s,l=e.substring(n,n+Math.floor(e.length/4)),u=-1,d="";-1!=(u=t.indexOf(l,u+1));){var p=a(e.substring(n),t.substring(u)),h=c(e.substring(0,n),t.substring(0,u));d.length<h+p&&(d=t.substring(u-h,u)+t.substring(u,u+p),r=e.substring(0,n-h),i=e.substring(n+p),o=t.substring(0,u-h),s=t.substring(u+p))}return 2*d.length>=e.length?[r,i,o,s,d]:null}var o,s,l,u,d,p=i(n,r,Math.ceil(n.length/4)),h=i(n,r,Math.ceil(n.length/2));if(!p&&!h)return null;o=h?p&&p[4].length>h[4].length?p:h:p,e.length>t.length?(s=o[0],l=o[1],u=o[2],d=o[3]):(u=o[0],d=o[1],s=o[2],l=o[3]);var f=o[4];return[s,l,u,d,f]}(e,t);if(h){var f=h[0],m=h[1],g=h[2],v=h[3],y=h[4],E=o(f,g),_=o(m,v);return E.concat([[i,y]],_)}return function(e,t){for(var i=e.length,o=t.length,a=Math.ceil((i+o)/2),c=a,l=2*a,u=new Array(l),d=new Array(l),p=0;p<l;p++)u[p]=-1,d[p]=-1;u[c+1]=0,d[c+1]=0;for(var h=i-o,f=h%2!=0,m=0,g=0,v=0,y=0,E=0;E<a;E++){for(var _=-E+m;_<=E-g;_+=2){for(var b=c+_,S=(C=_==-E||_!=E&&u[b-1]<u[b+1]?u[b+1]:u[b-1]+1)-_;C<i&&S<o&&e.charAt(C)==t.charAt(S);)C++,S++;if(u[b]=C,C>i)g+=2;else if(S>o)m+=2;else if(f&&(N=c+h-_)>=0&&N<l&&-1!=d[N]&&C>=(I=i-d[N]))return s(e,t,C,S)}for(var T=-E+v;T<=E-y;T+=2){for(var I,N=c+T,w=(I=T==-E||T!=E&&d[N-1]<d[N+1]?d[N+1]:d[N-1]+1)-T;I<i&&w<o&&e.charAt(i-I-1)==t.charAt(o-w-1);)I++,w++;if(d[N]=I,I>i)y+=2;else if(w>o)v+=2;else if(!f){var C;if((b=c+h-T)>=0&&b<l&&-1!=u[b])if(S=c+(C=u[b])-b,C>=(I=i-I))return s(e,t,C,S)}}}return[[n,e],[r,t]]}(e,t)}(e=e.substring(0,e.length-p),t=t.substring(0,t.length-p));return h&&m.unshift([i,h]),f&&m.push([i,f]),l(m),null!=u&&(m=function(e,t){var r=function(e,t){if(0===t)return[i,e];for(var r=0,o=0;o<e.length;o++){var s=e[o];if(s[0]===n||s[0]===i){var a=r+s[1].length;if(t===a)return[o+1,e];if(t<a){e=e.slice();var c=t-r,l=[s[0],s[1].slice(0,c)],u=[s[0],s[1].slice(c)];return e.splice(o,1,l,u),[o+1,e]}r=a}}throw new Error("cursor_pos is out of bounds!")}(e,t),o=r[1],s=r[0],a=o[s],c=o[s+1];if(null==a)return e;if(a[0]!==i)return e;if(null!=c&&a[1]+c[1]===c[1]+a[1])return o.splice(s,2,c,a),d(o,s,2);if(null!=c&&0===c[1].indexOf(a[1])){o.splice(s,2,[c[0],a[1]],[0,a[1]]);var l=c[1].slice(a[1].length);return l.length>0&&o.splice(s+2,0,[c[0],l]),d(o,s,3)}return e}(m,u)),m=function(e){for(var t=!1,o=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},s=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},a=2;a<e.length;a+=1)e[a-2][0]===i&&s(e[a-2][1])&&e[a-1][0]===n&&o(e[a-1][1])&&e[a][0]===r&&o(e[a][1])&&(t=!0,e[a-1][1]=e[a-2][1].slice(-1)+e[a-1][1],e[a][1]=e[a-2][1].slice(-1)+e[a][1],e[a-2][1]=e[a-2][1].slice(0,-1));if(!t)return e;var c=[];for(a=0;a<e.length;a+=1)e[a][1].length>0&&c.push(e[a]);return c}(m)}function s(e,t,n,r){var i=e.substring(0,n),s=t.substring(0,r),a=e.substring(n),c=t.substring(r),l=o(i,s),u=o(a,c);return l.concat(u)}function a(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(o,i)==t.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i}function c(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i}function l(e){e.push([i,""]);for(var t,o=0,s=0,u=0,d="",p="";o<e.length;)switch(e[o][0]){case r:u++,p+=e[o][1],o++;break;case n:s++,d+=e[o][1],o++;break;case i:s+u>1?(0!==s&&0!==u&&(0!==(t=a(p,d))&&(o-s-u>0&&e[o-s-u-1][0]==i?e[o-s-u-1][1]+=p.substring(0,t):(e.splice(0,0,[i,p.substring(0,t)]),o++),p=p.substring(t),d=d.substring(t)),0!==(t=c(p,d))&&(e[o][1]=p.substring(p.length-t)+e[o][1],p=p.substring(0,p.length-t),d=d.substring(0,d.length-t))),0===s?e.splice(o-u,s+u,[r,p]):0===u?e.splice(o-s,s+u,[n,d]):e.splice(o-s-u,s+u,[n,d],[r,p]),o=o-s-u+(s?1:0)+(u?1:0)+1):0!==o&&e[o-1][0]==i?(e[o-1][1]+=e[o][1],e.splice(o,1)):o++,u=0,s=0,d="",p=""}""===e[e.length-1][1]&&e.pop();var h=!1;for(o=1;o<e.length-1;)e[o-1][0]==i&&e[o+1][0]==i&&(e[o][1].substring(e[o][1].length-e[o-1][1].length)==e[o-1][1]?(e[o][1]=e[o-1][1]+e[o][1].substring(0,e[o][1].length-e[o-1][1].length),e[o+1][1]=e[o-1][1]+e[o+1][1],e.splice(o-1,1),h=!0):e[o][1].substring(0,e[o+1][1].length)==e[o+1][1]&&(e[o-1][1]+=e[o+1][1],e[o][1]=e[o][1].substring(e[o+1][1].length)+e[o+1][1],e.splice(o+1,1),h=!0)),o++;h&&l(e)}var u=o;function d(e,t,n){for(var r=t+n-1;r>=0&&r>=t-1;r--)if(r+1<e.length){var i=e[r],o=e[r+1];i[0]===o[1]&&e.splice(r,2,[i[0],i[1]+o[1]])}return e}u.INSERT=r,u.DELETE=n,u.EQUAL=i,e.exports=u},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"===typeof Object.keys?Object.keys:n).shim=n},function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:i).supported=r,t.unsupported=i},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function i(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e,t){var n=r?r+e:e,i=this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,s=i.length,a=new Array(s);o<s;o++)a[o]=i[o].fn;return a},s.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,s),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var p,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];u[l].fn.apply(u[l].context,c)}}return!0},s.prototype.on=function(e,t,n){var i=new o(t,n||this),s=r?r+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):(this._events[s]=i,this._eventsCount++),this},s.prototype.once=function(e,t,n){var i=new o(t,n||this,!0),s=r?r+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):(this._events[s]=i,this._eventsCount++),this},s.prototype.removeListener=function(e,t,n,o){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return 0===--this._eventsCount?this._events=new i:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==t||o&&!a.once||n&&a.context!==n||(0===--this._eventsCount?this._events=new i:delete this._events[s]);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||o&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:0===--this._eventsCount?this._events=new i:delete this._events[s]}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new i:delete this._events[t])):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=r,s.EventEmitter=s,"undefined"!==typeof e&&(e.exports=s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=E(n(3)),a=E(n(2)),c=E(n(0)),l=E(n(5)),u=E(n(10)),d=E(n(9)),p=n(36),h=n(37),f=E(n(13)),m=n(26),g=n(38),v=n(39),y=n(40);function E(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=(0,u.default)("quill:clipboard"),S="__ql-matcher",T=[[Node.TEXT_NODE,j],[Node.TEXT_NODE,L],["br",function(e,t){return A(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,x],[Node.ELEMENT_NODE,P],[Node.ELEMENT_NODE,k],[Node.ELEMENT_NODE,function(e,t){var n={},r=e.style||{};return r.fontStyle&&"italic"===O(e).fontStyle&&(n.italic=!0),r.fontWeight&&(O(e).fontWeight.startsWith("bold")||parseInt(O(e).fontWeight)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(t=C(t,n)),parseFloat(r.textIndent||0)>0&&(t=(new a.default).insert("\t").concat(t)),t}],["li",function(e,t){var n=c.default.query(e);if(null==n||"list-item"!==n.blotName||!A(t,"\n"))return t;for(var r=-1,i=e.parentNode;!i.classList.contains("ql-clipboard");)"list"===(c.default.query(i)||{}).blotName&&(r+=1),i=i.parentNode;return r<=0?t:t.compose((new a.default).retain(t.length()-1).retain(1,{indent:r}))}],["b",D.bind(D,"bold")],["i",D.bind(D,"italic")],["style",function(){return new a.default}]],I=[p.AlignAttribute,g.DirectionAttribute].reduce((function(e,t){return e[t.keyName]=t,e}),{}),N=[p.AlignStyle,h.BackgroundStyle,m.ColorStyle,g.DirectionStyle,v.FontStyle,y.SizeStyle].reduce((function(e,t){return e[t.keyName]=t,e}),{}),w=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.root.addEventListener("paste",r.onPaste.bind(r)),r.container=r.quill.addContainer("ql-clipboard"),r.container.setAttribute("contenteditable",!0),r.container.setAttribute("tabindex",-1),r.matchers=[],T.concat(r.options.matchers).forEach((function(e){var t=i(e,2),o=t[0],s=t[1];(n.matchVisual||s!==P)&&r.addMatcher(o,s)})),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"===typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[f.default.blotName]){var n=this.container.innerText;return this.container.innerHTML="",(new a.default).insert(n,_({},f.default.blotName,t[f.default.blotName]))}var r=this.prepareMatching(),o=i(r,2),s=o[0],c=o[1],l=M(this.container,s,c);return A(l,"\n")&&null==l.ops[l.ops.length-1].attributes&&(l=l.compose((new a.default).retain(l.length()-1).delete(1))),b.log("convert",this.container.innerHTML,l),this.container.innerHTML="",l}},{key:"dangerouslyPasteHTML",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"===typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,l.default.sources.SILENT);else{var r=this.convert(t);this.quill.updateContents((new a.default).retain(e).concat(r),n),this.quill.setSelection(e+r.length(),l.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var n=this.quill.getSelection(),r=(new a.default).retain(n.index),i=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(l.default.sources.SILENT),setTimeout((function(){r=r.concat(t.convert()).delete(n.length),t.quill.updateContents(r,l.default.sources.USER),t.quill.setSelection(r.length()-n.length,l.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=i,t.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],n=[];return this.matchers.forEach((function(r){var o=i(r,2),s=o[0],a=o[1];switch(s){case Node.TEXT_NODE:n.push(a);break;case Node.ELEMENT_NODE:t.push(a);break;default:[].forEach.call(e.container.querySelectorAll(s),(function(e){e[S]=e[S]||[],e[S].push(a)}))}})),[t,n]}}]),t}(d.default);function C(e,t,n){return"object"===("undefined"===typeof t?"undefined":r(t))?Object.keys(t).reduce((function(e,n){return C(e,n,t[n])}),e):e.reduce((function(e,r){return r.attributes&&r.attributes[t]?e.push(r):e.insert(r.insert,(0,s.default)({},_({},t,n),r.attributes))}),new a.default)}function O(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function A(e,t){for(var n="",r=e.ops.length-1;r>=0&&n.length<t.length;--r){var i=e.ops[r];if("string"!==typeof i.insert)break;n=i.insert+n}return n.slice(-1*t.length)===t}function R(e){if(0===e.childNodes.length)return!1;var t=O(e);return["block","list-item"].indexOf(t.display)>-1}function M(e,t,n){return e.nodeType===e.TEXT_NODE?n.reduce((function(t,n){return n(e,t)}),new a.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],(function(r,i){var o=M(i,t,n);return i.nodeType===e.ELEMENT_NODE&&(o=t.reduce((function(e,t){return t(i,e)}),o),o=(i[S]||[]).reduce((function(e,t){return t(i,e)}),o)),r.concat(o)}),new a.default):new a.default}function D(e,t,n){return C(n,e,!0)}function k(e,t){var n=c.default.Attributor.Attribute.keys(e),r=c.default.Attributor.Class.keys(e),i=c.default.Attributor.Style.keys(e),o={};return n.concat(r).concat(i).forEach((function(t){var n=c.default.query(t,c.default.Scope.ATTRIBUTE);null!=n&&(o[n.attrName]=n.value(e),o[n.attrName])||(null==(n=I[t])||n.attrName!==t&&n.keyName!==t||(o[n.attrName]=n.value(e)||void 0),null==(n=N[t])||n.attrName!==t&&n.keyName!==t||(n=N[t],o[n.attrName]=n.value(e)||void 0))})),Object.keys(o).length>0&&(t=C(t,o)),t}function x(e,t){var n=c.default.query(e);if(null==n)return t;if(n.prototype instanceof c.default.Embed){var r={},i=n.value(e);null!=i&&(r[n.blotName]=i,t=(new a.default).insert(r,n.formats(e)))}else"function"===typeof n.formats&&(t=C(t,n.blotName,n.formats(e)));return t}function L(e,t){return A(t,"\n")||(R(e)||t.length()>0&&e.nextSibling&&R(e.nextSibling))&&t.insert("\n"),t}function P(e,t){if(R(e)&&null!=e.nextElementSibling&&!A(t,"\n\n")){var n=e.offsetHeight+parseFloat(O(e).marginTop)+parseFloat(O(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*n&&t.insert("\n")}return t}function j(e,t){var n=e.data;if("O:P"===e.parentNode.tagName)return t.insert(n.trim());if(0===n.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!O(e.parentNode).whiteSpace.startsWith("pre")){var r=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};n=(n=n.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,r.bind(r,!0)),(null==e.previousSibling&&R(e.parentNode)||null!=e.previousSibling&&R(e.previousSibling))&&(n=n.replace(/^\s+/,r.bind(r,!1))),(null==e.nextSibling&&R(e.parentNode)||null!=e.nextSibling&&R(e.nextSibling))&&(n=n.replace(/\s+$/,r.bind(r,!1)))}return t.insert(n)}w.DEFAULTS={matchers:[],matchVisual:!0},t.default=w,t.matchAttributor=k,t.matchBlot=x,t.matchNewline=L,t.matchSpacing=P,t.matchText=j},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(6),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"optimize",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);a.blotName="bold",a.tagName=["STRONG","B"],t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(2)),s=u(n(0)),a=u(n(5)),c=u(n(10)),l=u(n(9));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var p=(0,c.default)("quill:toolbar"),h=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i,o=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(Array.isArray(o.options.container)){var s=document.createElement("div");m(s,o.options.container),e.container.parentNode.insertBefore(s,e.container),o.container=s}else"string"===typeof o.options.container?o.container=document.querySelector(o.options.container):o.container=o.options.container;return o.container instanceof HTMLElement?(o.container.classList.add("ql-toolbar"),o.controls=[],o.handlers={},Object.keys(o.options.handlers).forEach((function(e){o.addHandler(e,o.options.handlers[e])})),[].forEach.call(o.container.querySelectorAll("button, select"),(function(e){o.attach(e)})),o.quill.on(a.default.events.EDITOR_CHANGE,(function(e,t){e===a.default.events.SELECTION_CHANGE&&o.update(t)})),o.quill.on(a.default.events.SCROLL_OPTIMIZE,(function(){var e=o.quill.selection.getRange(),t=r(e,1)[0];o.update(t)})),o):(i=p.error("Container required for toolbar",o.options),d(o,i))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,n=[].find.call(e.classList,(function(e){return 0===e.indexOf("ql-")}));if(n){if(n=n.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[n]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[n])return void p.warn("ignoring attaching to disabled format",n,e);if(null==s.default.query(n))return void p.warn("ignoring attaching to nonexistent format",n,e)}var i="SELECT"===e.tagName?"change":"click";e.addEventListener(i,(function(i){var c=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var l=e.options[e.selectedIndex];c=!l.hasAttribute("selected")&&(l.value||!1)}else c=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),i.preventDefault();t.quill.focus();var u=t.quill.selection.getRange(),d=r(u,1)[0];if(null!=t.handlers[n])t.handlers[n].call(t,c);else if(s.default.query(n).prototype instanceof s.default.Embed){if(!(c=prompt("Enter "+n)))return;t.quill.updateContents((new o.default).retain(d.index).delete(d.length).insert(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,c)),a.default.sources.USER)}else t.quill.format(n,c,a.default.sources.USER);t.update(d)})),this.controls.push([n,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach((function(n){var i=r(n,2),o=i[0],s=i[1];if("SELECT"===s.tagName){var a=void 0;if(null==e)a=null;else if(null==t[o])a=s.querySelector("option[selected]");else if(!Array.isArray(t[o])){var c=t[o];"string"===typeof c&&(c=c.replace(/\"/g,'\\"')),a=s.querySelector('option[value="'+c+'"]')}null==a?(s.value="",s.selectedIndex=-1):a.selected=!0}else if(null==e)s.classList.remove("ql-active");else if(s.hasAttribute("value")){var l=t[o]===s.getAttribute("value")||null!=t[o]&&t[o].toString()===s.getAttribute("value")||null==t[o]&&!s.getAttribute("value");s.classList.toggle("ql-active",l)}else s.classList.toggle("ql-active",null!=t[o])}))}}]),t}(l.default);function f(e,t,n){var r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("ql-"+t),null!=n&&(r.value=n),e.appendChild(r)}function m(e,t){Array.isArray(t[0])||(t=[t]),t.forEach((function(t){var n=document.createElement("span");n.classList.add("ql-formats"),t.forEach((function(e){if("string"===typeof e)f(n,e);else{var t=Object.keys(e)[0],r=e[t];Array.isArray(r)?function(e,t,n){var r=document.createElement("select");r.classList.add("ql-"+t),n.forEach((function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),r.appendChild(t)})),e.appendChild(r)}(n,t,r):f(n,t,r)}})),e.appendChild(n)}))}h.DEFAULTS={},h.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var n=this.quill.getFormat();Object.keys(n).forEach((function(t){null!=s.default.query(t,s.default.Scope.INLINE)&&e.quill.format(t,!1)}))}else this.quill.removeFormat(t,a.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",a.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,a.default.sources.USER),this.quill.format("direction",e,a.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),n=this.quill.getFormat(t),r=parseInt(n.indent||0);if("+1"===e||"-1"===e){var i="+1"===e?1:-1;"rtl"===n.direction&&(i*=-1),this.quill.format("indent",r+i,a.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,a.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),n=this.quill.getFormat(t);"check"===e?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,a.default.sources.USER):this.quill.format("list","unchecked",a.default.sources.USER):this.quill.format("list",e,a.default.sources.USER)}}},t.default=h,t.addControls=m},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(28),a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.label.innerHTML=n,r.container.classList.add("ql-color-picker"),[].slice.call(r.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(e){e.classList.add("ql-primary")})),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"buildItem",value:function(e){var n=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return n.style.backgroundColor=e.getAttribute("value")||"",n}},{key:"selectItem",value:function(e,n){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,n);var r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&("line"===r.tagName?r.style.stroke=i:r.style.fill=i)}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(28),a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.container.classList.add("ql-icon-picker"),[].forEach.call(r.container.querySelectorAll(".ql-picker-item"),(function(e){e.innerHTML=n[e.getAttribute("data-value")||""]})),r.defaultItem=r.container.querySelector(".ql-selected"),r.selectItem(r.defaultItem),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"selectItem",value:function(e,n){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,n),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=n||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){r.root.style.marginTop=-1*r.quill.root.scrollTop+"px"})),this.hide()}return r(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var r=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect(),o=0;if(i.right>r.right&&(o=r.right-i.right,this.root.style.left=t+o+"px"),i.left<r.left&&(o=r.left-i.left,this.root.style.left=t+o+"px"),i.bottom>r.bottom){var s=i.bottom-i.top,a=e.bottom-e.top+s;this.root.style.top=n-a+"px",this.root.classList.add("ql-flip")}return o}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=h(n(3)),a=h(n(8)),c=n(43),l=h(c),u=h(n(27)),d=n(15),p=h(n(41));function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],y=function(e){function t(e,n){f(this,t),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=v);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.container.classList.add("ql-snow"),r}return g(t,e),o(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),p.default),this.tooltip=new E(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(t,n){e.handlers.link.call(e,!n.format.link)}))}}]),t}(l.default);y.DEFAULTS=(0,s.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var n=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(n)&&0!==n.indexOf("mailto:")&&(n="mailto:"+n),this.quill.theme.tooltip.edit("link",n)}else this.quill.format("link",!1)}}}}});var E=function(e){function t(e,n){f(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.preview=r.root.querySelector("a.ql-preview"),r}return g(t,e),o(t,[{key:"listen",value:function(){var e=this;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(t){if(null!=e.linkRange){var n=e.linkRange;e.restoreFocus(),e.quill.formatText(n,"link",!1,a.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()})),this.quill.on(a.default.events.SELECTION_CHANGE,(function(t,n,i){if(null!=t){if(0===t.length&&i===a.default.sources.USER){var o=e.quill.scroll.descendant(u.default,t.index),s=r(o,2),c=s[0],l=s[1];if(null!=c){e.linkRange=new d.Range(t.index-l,c.length());var p=u.default.formats(c.domNode);return e.preview.textContent=p,e.preview.setAttribute("href",p),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}}))}},{key:"show",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(c.BaseTooltip);E.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=L(n(29)),i=n(36),o=n(38),s=n(64),a=L(n(65)),c=L(n(66)),l=n(67),u=L(l),d=n(37),p=n(26),h=n(39),f=n(40),m=L(n(56)),g=L(n(68)),v=L(n(27)),y=L(n(69)),E=L(n(70)),_=L(n(71)),b=L(n(72)),S=L(n(73)),T=n(13),I=L(T),N=L(n(74)),w=L(n(75)),C=L(n(57)),O=L(n(41)),A=L(n(28)),R=L(n(59)),M=L(n(60)),D=L(n(61)),k=L(n(108)),x=L(n(62));function L(e){return e&&e.__esModule?e:{default:e}}r.default.register({"attributors/attribute/direction":o.DirectionAttribute,"attributors/class/align":i.AlignClass,"attributors/class/background":d.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":o.DirectionClass,"attributors/class/font":h.FontClass,"attributors/class/size":f.SizeClass,"attributors/style/align":i.AlignStyle,"attributors/style/background":d.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":o.DirectionStyle,"attributors/style/font":h.FontStyle,"attributors/style/size":f.SizeStyle},!0),r.default.register({"formats/align":i.AlignClass,"formats/direction":o.DirectionClass,"formats/indent":s.IndentClass,"formats/background":d.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":h.FontClass,"formats/size":f.SizeClass,"formats/blockquote":a.default,"formats/code-block":I.default,"formats/header":c.default,"formats/list":u.default,"formats/bold":m.default,"formats/code":T.Code,"formats/italic":g.default,"formats/link":v.default,"formats/script":y.default,"formats/strike":E.default,"formats/underline":_.default,"formats/image":b.default,"formats/video":S.default,"formats/list/item":l.ListItem,"modules/formula":N.default,"modules/syntax":w.default,"modules/toolbar":C.default,"themes/bubble":k.default,"themes/snow":x.default,"ui/icons":O.default,"ui/picker":A.default,"ui/icon-picker":M.default,"ui/color-picker":R.default,"ui/tooltip":D.default},!0),t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),a=(r=s)&&r.__esModule?r:{default:r},c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"add",value:function(e,n){if("+1"===n||"-1"===n){var r=this.value(e)||0;n="+1"===n?r+1:r-1}return 0===n?(this.remove(e),!0):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,n)}},{key:"canAdd",value:function(e,n){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,n)||o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(n))}},{key:"value",value:function(e){return parseInt(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(a.default.Attributor.Class),l=new c("indent","ql-indent",{scope:a.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(4),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);o.blotName="blockquote",o.tagName="blockquote",t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((r=o)&&r.__esModule?r:{default:r}).default);s.blotName="header",s.tagName=["H1","H2","H3","H4","H5","H6"],t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=c(n(0)),s=c(n(4)),a=c(n(25));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),r(t,[{key:"format",value:function(e,n){e!==h.blotName||n?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n):this.replaceWith(o.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,n){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,n),this):(this.parent.unwrap(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,n))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:i(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(s.default);p.blotName="list-item",p.tagName="LI";var h=function(e){function t(e){l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=function(t){if(t.target.parentNode===e){var r=n.statics.formats(e),i=o.default.find(t.target);"checked"===r?i.format("list","unchecked"):"unchecked"===r&&i.format("list","checked")}};return e.addEventListener("touchstart",r),e.addEventListener("mousedown",r),n}return d(t,e),r(t,null,[{key:"create",value:function(e){var n="ordered"===e?"OL":"UL",r=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,n);return"checked"!==e&&"unchecked"!==e||r.setAttribute("data-checked","checked"===e),r}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),r(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,n=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var e,t,n}},{key:"insertBefore",value:function(e,n){if(e instanceof p)i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n);else{var r=null==n?this.length():n.offset(this),o=this.split(r);o.parent.insertBefore(e,o)}}},{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&n.domNode.tagName===this.domNode.tagName&&n.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(n.moveChildren(this),n.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var n=o.default.create(this.statics.defaultChild);e.moveChildren(n),this.appendChild(n)}i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(a.default);h.blotName="list",h.scope=o.default.Scope.BLOCK_BLOT,h.tagName=["OL","UL"],h.defaultChild="list-item",h.allowedChildren=[p],t.ListItem=p,t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(56),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);o.blotName="italic",o.tagName=["EM","I"],t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(6),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);a.blotName="script",a.tagName=["SUB","SUP"],t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);o.blotName="strike",o.tagName="S",t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);o.blotName="underline",o.tagName="U",t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),a=(r=s)&&r.__esModule?r:{default:r},c=n(27),l=["alt","height","width"],u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"format",value:function(e,n){l.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&n.setAttribute("src",this.sanitize(e)),n}},{key:"formats",value:function(e){return l.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,c.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(a.default.Embed);u.blotName="image",u.tagName="IMG",t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(4),a=n(27),c=(r=a)&&r.__esModule?r:{default:r},l=["height","width"],u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"format",value:function(e,n){l.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen",!0),n.setAttribute("src",this.sanitize(e)),n}},{key:"formats",value:function(e){return l.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),{})}},{key:"sanitize",value:function(e){return c.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(s.BlockEmbed);u.blotName="video",u.className="ql-video",u.tagName="IFRAME",t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=c(n(35)),s=c(n(5)),a=c(n(9));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),r(t,null,[{key:"create",value:function(e){var n=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(o.default);p.blotName="formula",p.className="ql-formula",p.tagName="SPAN";var h=function(e){function t(){l(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return d(t,e),r(t,null,[{key:"register",value:function(){s.default.register(p,!0)}}]),t}(a.default);t.FormulaBlot=p,t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=c(n(0)),s=c(n(5)),a=c(n(9));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),r(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(c(n(13)).default);p.className="ql-syntax";var h=new o.default.Attributor.Class("token","hljs",{scope:o.default.Scope.INLINE}),f=function(e){function t(e,n){l(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if("function"!==typeof r.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var i=null;return r.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(i),i=setTimeout((function(){r.highlight(),i=null}),r.options.interval)})),r.highlight(),r}return d(t,e),r(t,null,[{key:"register",value:function(){s.default.register(h,!0),s.default.register(p,!0)}}]),r(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(s.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(p).forEach((function(t){t.highlight(e.options.highlight)})),this.quill.update(s.default.sources.SILENT),null!=t&&this.quill.setSelection(t,s.default.sources.SILENT)}}}]),t}(a.default);f.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=p,t.CodeToken=h,t.default=f},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=d(n(3)),s=d(n(8)),a=n(43),c=d(a),l=n(15),u=d(n(41));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(e){function t(e,n){p(this,t),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=m);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.container.classList.add("ql-bubble"),r}return f(t,e),i(t,[{key:"extendToolbar",value:function(e){this.tooltip=new v(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),u.default)}}]),t}(c.default);g.DEFAULTS=(0,o.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var v=function(e){function t(e,n){p(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.on(s.default.events.EDITOR_CHANGE,(function(e,t,n,i){if(e===s.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&i===s.default.sources.USER){r.show(),r.root.style.left="0px",r.root.style.width="",r.root.style.width=r.root.offsetWidth+"px";var o=r.quill.getLines(t.index,t.length);if(1===o.length)r.position(r.quill.getBounds(t));else{var a=o[o.length-1],c=r.quill.getIndex(a),u=Math.min(a.length()-1,t.index+t.length-c),d=r.quill.getBounds(new l.Range(c,u));r.position(d)}}else document.activeElement!==r.textbox&&r.quill.hasFocus()&&r.hide()})),r}return f(t,e),i(t,[{key:"listen",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){e.root.classList.remove("ql-editing")})),this.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var n=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),i=this.root.querySelector(".ql-tooltip-arrow");if(i.style.marginLeft="",0===n)return n;i.style.marginLeft=-1*n-i.offsetWidth/2+"px"}}]),t}(a.BaseTooltip);v.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=v,t.default=g},function(e,t,n){e.exports=n(63)}]).default},t.exports=n()},1899:function(e,t,n){!function(e,t,n,r,i,o,s,a,c,l,u,d,p,h,f,m,g,v,y,E,_,b,S,T,I,N,w,C,O,A,R,M,D,k,x,L,P,j,U,F,z,B,V,H,G,W,Y,q,K,Q,J,X,Z,$,ee,te,ne,re,ie,oe,se,ae,ce,le){"use strict";function ue(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var de=ue(t),pe=ue(se),he=ue(ae);function fe(e,t,n){return t=we(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,me()?Reflect.construct(t,n||[],we(e).constructor):t.apply(e,n))}function me(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(me=function(){return!!e})()}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ye(r.key),r)}}function Se(e,t,n){return t&&be(e.prototype,t),n&&be(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Te(e,t,n){return(t=ye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie.apply(this,arguments)}function Ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function Ce(e,t){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ce(e,t)}function Oe(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Re=12,Me=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function De(e){var t=e?"string"==typeof e||e instanceof String?oe.parseISO(e):re.toDate(e):new Date;return ke(t)?t:null}function ke(e,t){return t=t||new Date("1/1/1000"),o.isValid(e)&&!te.isBefore(e,t)}function xe(e,t,n){if("en"===n)return s.format(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=Qe(n);return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&Ke()&&Qe(Ke())&&(r=Qe(Ke())),s.format(e,t,{locale:r||null,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Le(e,t){var n=t.dateFormat,r=t.locale;return e&&xe(e,Array.isArray(n)?n[0]:n,r)||""}function Pe(e,t){var n=t.hour,r=void 0===n?0:n,i=t.minute,o=void 0===i?0:i,s=t.second,a=void 0===s?0:s;return M.setHours(R.setMinutes(A.setSeconds(e,a),o),r)}function je(e,t,n){var r=Qe(t||Ke());return B.startOfWeek(e,{locale:r,weekStartsOn:n})}function Ue(e){return V.startOfMonth(e)}function Fe(e){return G.startOfYear(e)}function ze(e){return H.startOfQuarter(e)}function Be(){return z.startOfDay(De())}function Ve(e,t){return e&&t?Z.isSameYear(e,t):!e&&!t}function He(e,t){return e&&t?X.isSameMonth(e,t):!e&&!t}function Ge(e,t){return e&&t?$.isSameQuarter(e,t):!e&&!t}function We(e,t){return e&&t?J.isSameDay(e,t):!e&&!t}function Ye(e,t){return e&&t?Q.isEqual(e,t):!e&&!t}function qe(e,t,n){var r,i=z.startOfDay(t),o=W.endOfDay(n);try{r=ne.isWithinInterval(e,{start:i,end:o})}catch(e){r=!1}return r}function Ke(){return("undefined"!=typeof window?window:globalThis).__localeId__}function Qe(e){if("string"==typeof e){var t="undefined"!=typeof window?window:globalThis;return t.__localeData__?t.__localeData__[e]:null}return e}function Je(e,t){return xe(D.setMonth(De(),e),"LLLL",t)}function Xe(e,t){return xe(D.setMonth(De(),e),"LLL",t)}function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,i=t.excludeDates,o=t.excludeDateIntervals,s=t.includeDates,a=t.includeDateIntervals,c=t.filterDate;return st(e,{minDate:n,maxDate:r})||i&&i.some((function(t){return We(e,t.date?t.date:t)}))||o&&o.some((function(t){var n=t.start,r=t.end;return ne.isWithinInterval(e,{start:n,end:r})}))||s&&!s.some((function(t){return We(e,t)}))||a&&!a.some((function(t){var n=t.start,r=t.end;return ne.isWithinInterval(e,{start:n,end:r})}))||c&&!c(De(e))||!1}function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excludeDates,r=t.excludeDateIntervals;return r&&r.length>0?r.some((function(t){var n=t.start,r=t.end;return ne.isWithinInterval(e,{start:n,end:r})})):n&&n.some((function(t){return We(e,t.date?t.date:t)}))||!1}function et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,i=t.excludeDates,o=t.includeDates,s=t.filterDate;return st(e,{minDate:V.startOfMonth(n),maxDate:q.endOfMonth(r)})||i&&i.some((function(t){return He(e,t)}))||o&&!o.some((function(t){return He(e,t)}))||s&&!s(De(e))||!1}function tt(e,t,n,r){var i=C.getYear(e),o=N.getMonth(e),s=C.getYear(t),a=N.getMonth(t),c=C.getYear(r);return i===s&&i===c?o<=n&&n<=a:i<s?c===i&&o<=n||c===s&&a>=n||c<s&&c>i:void 0}function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,i=t.excludeDates,o=t.includeDates,s=t.filterDate;return st(e,{minDate:n,maxDate:r})||i&&i.some((function(t){return Ge(e,t)}))||o&&!o.some((function(t){return Ge(e,t)}))||s&&!s(De(e))||!1}function rt(e,t,n){if(!o.isValid(t)||!o.isValid(n))return!1;var r=C.getYear(t),i=C.getYear(n);return r<=e&&i>=e}function it(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,i=t.excludeDates,o=t.includeDates,s=t.filterDate,a=new Date(e,0,1);return st(a,{minDate:G.startOfYear(n),maxDate:K.endOfYear(r)})||i&&i.some((function(e){return Ve(a,e)}))||o&&!o.some((function(e){return Ve(a,e)}))||s&&!s(De(a))||!1}function ot(e,t,n,r){var i=C.getYear(e),o=w.getQuarter(e),s=C.getYear(t),a=w.getQuarter(t),c=C.getYear(r);return i===s&&i===c?o<=n&&n<=a:i<s?c===i&&o<=n||c===s&&a>=n||c<s&&c>i:void 0}function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate;return n&&j.differenceInCalendarDays(e,n)<0||r&&j.differenceInCalendarDays(e,r)>0}function at(e,t){return t.some((function(t){return b.getHours(t)===b.getHours(e)&&_.getMinutes(t)===_.getMinutes(e)}))}function ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excludeTimes,r=t.includeTimes,i=t.filterTime;return n&&at(e,n)||r&&!at(e,r)||i&&!i(e)||!1}function lt(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var i,o=De(),s=M.setHours(R.setMinutes(o,_.getMinutes(e)),b.getHours(e)),a=M.setHours(R.setMinutes(o,_.getMinutes(n)),b.getHours(n)),c=M.setHours(R.setMinutes(o,_.getMinutes(r)),b.getHours(r));try{i=!ne.isWithinInterval(s,{start:a,end:c})}catch(e){i=!1}return i}function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.includeDates,i=g.subMonths(e,1);return n&&U.differenceInCalendarMonths(n,i)>0||r&&r.every((function(e){return U.differenceInCalendarMonths(e,i)>0}))||!1}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.includeDates,i=d.addMonths(e,1);return n&&U.differenceInCalendarMonths(i,n)>0||r&&r.every((function(e){return U.differenceInCalendarMonths(i,e)>0}))||!1}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.includeDates,i=y.subYears(e,1);return n&&F.differenceInCalendarYears(n,i)>0||r&&r.every((function(e){return F.differenceInCalendarYears(e,i)>0}))||!1}function ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.includeDates,i=h.addYears(e,1);return n&&F.differenceInCalendarYears(i,n)>0||r&&r.every((function(e){return F.differenceInCalendarYears(i,e)>0}))||!1}function ft(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter((function(e){return j.differenceInCalendarDays(e,t)>=0}));return L.min(r)}return n?L.min(n):t}function mt(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter((function(e){return j.differenceInCalendarDays(e,t)<=0}));return P.max(r)}return n?P.max(n):t}function gt(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,o=e.length;r<o;r++){var s=e[r];if(i.isDate(s)){var a=xe(s,"MM.dd.yyyy"),c=n.get(a)||[];c.includes(t)||(c.push(t),n.set(a,c))}else if("object"===Ee(s)){var l=Object.keys(s),u=l[0],d=s[l[0]];if("string"==typeof u&&d.constructor===Array)for(var p=0,h=d.length;p<h;p++){var f=xe(d[p],"MM.dd.yyyy"),m=n.get(f)||[];m.includes(u)||(m.push(u),n.set(f,m))}}}return n}function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--holidays",n=new Map;return e.forEach((function(e){var r=e.date,o=e.holidayName;if(i.isDate(r)){var s=xe(r,"MM.dd.yyyy"),a=n.get(s)||{};if(!("className"in a)||a.className!==t||(c=a.holidayNames,l=[o],c.length!==l.length||!c.every((function(e,t){return e===l[t]})))){var c,l;a.className=t;var u=a.holidayNames;a.holidayNames=u?[].concat(Oe(u),[o]):[o],n.set(s,a)}}})),n}function yt(e,t,n,r,i){for(var o=i.length,s=[],l=0;l<o;l++){var u=a.addMinutes(c.addHours(e,b.getHours(i[l])),_.getMinutes(i[l])),d=a.addMinutes(e,(n+1)*r);ee.isAfter(u,t)&&te.isBefore(u,d)&&s.push(i[l])}return s}function Et(e){return e<10?"0".concat(e):"".concat(e)}function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Re,n=Math.ceil(C.getYear(e)/t)*t;return{startPeriod:n-(t-1),endPeriod:n}}function bt(e){var t=e.getSeconds(),n=e.getMilliseconds();return re.toDate(e.getTime()-1e3*t-n)}function St(e){if(!i.isDate(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function Tt(e,t){if(!i.isDate(e)||!i.isDate(t))throw new Error("Invalid date received");var n=St(e),r=St(t);return te.isBefore(n,r)}function It(e){return" "===e.key}function Nt(e,t,n,r){for(var i=[],o=0;o<2*t+1;o++){var s=e+t-o,a=!0;n&&(a=C.getYear(n)<=s),r&&a&&(a=C.getYear(r)>=s),a&&i.push(s)}return i}var wt=function(e){function n(e){var r;_e(this,n),Te(r=fe(this,n,[e]),"renderOptions",(function(){var e=r.props.year,t=r.state.yearsList.map((function(t){return de.default.createElement("div",{className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:r.onChange.bind(r,t),"aria-selected":e===t?"true":void 0},e===t?de.default.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",t)})),n=r.props.minDate?C.getYear(r.props.minDate):null,i=r.props.maxDate?C.getYear(r.props.maxDate):null;return i&&r.state.yearsList.find((function(e){return e===i}))||t.unshift(de.default.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},de.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),n&&r.state.yearsList.find((function(e){return e===n}))||t.push(de.default.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},de.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t})),Te(r,"onChange",(function(e){r.props.onChange(e)})),Te(r,"handleClickOutside",(function(){r.props.onCancel()})),Te(r,"shiftYears",(function(e){var t=r.state.yearsList.map((function(t){return t+e}));r.setState({yearsList:t})})),Te(r,"incrementYears",(function(){return r.shiftYears(1)})),Te(r,"decrementYears",(function(){return r.shiftYears(-1)}));var i=e.yearDropdownItemNumber,o=e.scrollableYearDropdown,s=i||(o?10:5);return r.state={yearsList:Nt(r.props.year,s,r.props.minDate,r.props.maxDate)},r.dropdownRef=t.createRef(),r}return Ne(n,e),Se(n,[{key:"componentDidMount",value:function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,n=t?t.find((function(e){return e.ariaSelected})):null;e.scrollTop=n?n.offsetTop+(n.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}}},{key:"render",value:function(){var e=r.clsx({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return de.default.createElement("div",{className:e,ref:this.dropdownRef},this.renderOptions())}}])}(de.default.Component),Ct=pe.default(wt),Ot=function(e){function t(){var e;_e(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Te(e=fe(this,t,[].concat(r)),"state",{dropdownVisible:!1}),Te(e,"renderSelectOptions",(function(){for(var t=e.props.minDate?C.getYear(e.props.minDate):1900,n=e.props.maxDate?C.getYear(e.props.maxDate):2100,r=[],i=t;i<=n;i++)r.push(de.default.createElement("option",{key:i,value:i},i));return r})),Te(e,"onSelectChange",(function(t){e.onChange(t.target.value)})),Te(e,"renderSelectMode",(function(){return de.default.createElement("select",{value:e.props.year,className:"react-datepicker__year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),Te(e,"renderReadView",(function(t){return de.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(t){return e.toggleDropdown(t)}},de.default.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),de.default.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},e.props.year))})),Te(e,"renderDropdown",(function(){return de.default.createElement(Ct,{key:"dropdown",year:e.props.year,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableYearDropdown:e.props.scrollableYearDropdown,yearDropdownItemNumber:e.props.yearDropdownItemNumber})})),Te(e,"renderScrollMode",(function(){var t=e.state.dropdownVisible,n=[e.renderReadView(!t)];return t&&n.unshift(e.renderDropdown()),n})),Te(e,"onChange",(function(t){e.toggleDropdown(),t!==e.props.year&&e.props.onChange(t)})),Te(e,"toggleDropdown",(function(t){e.setState({dropdownVisible:!e.state.dropdownVisible},(function(){e.props.adjustDateOnChange&&e.handleYearChange(e.props.date,t)}))})),Te(e,"handleYearChange",(function(t,n){e.onSelect(t,n),e.setOpen()})),Te(e,"onSelect",(function(t,n){e.props.onSelect&&e.props.onSelect(t,n)})),Te(e,"setOpen",(function(){e.props.setOpen&&e.props.setOpen(!0)})),e}return Ne(t,e),Se(t,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return de.default.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)}}])}(de.default.Component),At=function(e){function t(){var e;_e(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Te(e=fe(this,t,[].concat(r)),"isSelectedMonth",(function(t){return e.props.month===t})),Te(e,"renderOptions",(function(){return e.props.monthNames.map((function(t,n){return de.default.createElement("div",{className:e.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:t,onClick:e.onChange.bind(e,n),"aria-selected":e.isSelectedMonth(n)?"true":void 0},e.isSelectedMonth(n)?de.default.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",t)}))})),Te(e,"onChange",(function(t){return e.props.onChange(t)})),Te(e,"handleClickOutside",(function(){return e.props.onCancel()})),e}return Ne(t,e),Se(t,[{key:"render",value:function(){return de.default.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}])}(de.default.Component),Rt=pe.default(At),Mt=function(e){function t(){var e;_e(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Te(e=fe(this,t,[].concat(r)),"state",{dropdownVisible:!1}),Te(e,"renderSelectOptions",(function(e){return e.map((function(e,t){return de.default.createElement("option",{key:t,value:t},e)}))})),Te(e,"renderSelectMode",(function(t){return de.default.createElement("select",{value:e.props.month,className:"react-datepicker__month-select",onChange:function(t){return e.onChange(t.target.value)}},e.renderSelectOptions(t))})),Te(e,"renderReadView",(function(t,n){return de.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:e.toggleDropdown},de.default.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),de.default.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[e.props.month]))})),Te(e,"renderDropdown",(function(t){return de.default.createElement(Rt,{key:"dropdown",month:e.props.month,monthNames:t,onChange:e.onChange,onCancel:e.toggleDropdown})})),Te(e,"renderScrollMode",(function(t){var n=e.state.dropdownVisible,r=[e.renderReadView(!n,t)];return n&&r.unshift(e.renderDropdown(t)),r})),Te(e,"onChange",(function(t){e.toggleDropdown(),t!==e.props.month&&e.props.onChange(t)})),Te(e,"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return Ne(t,e),Se(t,[{key:"render",value:function(){var e,t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return Xe(e,t.props.locale)}:function(e){return Je(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(n);break;case"select":e=this.renderSelectMode(n)}return de.default.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)}}])}(de.default.Component);function Dt(e,t){for(var n=[],r=Ue(e),i=Ue(t);!ee.isAfter(r,i);)n.push(De(r)),r=d.addMonths(r,1);return n}var kt=function(e){function t(e){var n;return _e(this,t),Te(n=fe(this,t,[e]),"renderOptions",(function(){return n.state.monthYearsList.map((function(e){var t=O.getTime(e),r=Ve(n.props.date,e)&&He(n.props.date,e);return de.default.createElement("div",{className:r?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:n.onChange.bind(n,t),"aria-selected":r?"true":void 0},r?de.default.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",xe(e,n.props.dateFormat,n.props.locale))}))})),Te(n,"onChange",(function(e){return n.props.onChange(e)})),Te(n,"handleClickOutside",(function(){n.props.onCancel()})),n.state={monthYearsList:Dt(n.props.minDate,n.props.maxDate)},n}return Ne(t,e),Se(t,[{key:"render",value:function(){var e=r.clsx({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return de.default.createElement("div",{className:e},this.renderOptions())}}])}(de.default.Component),xt=pe.default(kt),Lt=function(e){function t(){var e;_e(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Te(e=fe(this,t,[].concat(r)),"state",{dropdownVisible:!1}),Te(e,"renderSelectOptions",(function(){for(var t=Ue(e.props.minDate),n=Ue(e.props.maxDate),r=[];!ee.isAfter(t,n);){var i=O.getTime(t);r.push(de.default.createElement("option",{key:i,value:i},xe(t,e.props.dateFormat,e.props.locale))),t=d.addMonths(t,1)}return r})),Te(e,"onSelectChange",(function(t){e.onChange(t.target.value)})),Te(e,"renderSelectMode",(function(){return de.default.createElement("select",{value:O.getTime(Ue(e.props.date)),className:"react-datepicker__month-year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),Te(e,"renderReadView",(function(t){var n=xe(e.props.date,e.props.dateFormat,e.props.locale);return de.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(t){return e.toggleDropdown(t)}},de.default.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),de.default.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))})),Te(e,"renderDropdown",(function(){return de.default.createElement(xt,{key:"dropdown",date:e.props.date,dateFormat:e.props.dateFormat,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableMonthYearDropdown:e.props.scrollableMonthYearDropdown,locale:e.props.locale})})),Te(e,"renderScrollMode",(function(){var t=e.state.dropdownVisible,n=[e.renderReadView(!t)];return t&&n.unshift(e.renderDropdown()),n})),Te(e,"onChange",(function(t){e.toggleDropdown();var n=De(parseInt(t));Ve(e.props.date,n)&&He(e.props.date,n)||e.props.onChange(n)})),Te(e,"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return Ne(t,e),Se(t,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return de.default.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)}}])}(de.default.Component),Pt=function(e){function t(){var e;_e(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Te(e=fe(this,t,[].concat(i)),"dayEl",de.default.createRef()),Te(e,"handleClick",(function(t){!e.isDisabled()&&e.props.onClick&&e.props.onClick(t)})),Te(e,"handleMouseEnter",(function(t){!e.isDisabled()&&e.props.onMouseEnter&&e.props.onMouseEnter(t)})),Te(e,"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),Te(e,"isSameDay",(function(t){return We(e.props.day,t)})),Te(e,"isKeyboardSelected",(function(){var t;return!e.props.disabledKeyboardNavigation&&!(e.props.selectsMultiple?null===(t=e.props.selectedDates)||void 0===t?void 0:t.some((function(t){return e.isSameDayOrWeek(t)})):e.isSameDayOrWeek(e.props.selected))&&e.isSameDayOrWeek(e.props.preSelection)})),Te(e,"isDisabled",(function(){return Ze(e.props.day,e.props)})),Te(e,"isExcluded",(function(){return $e(e.props.day,e.props)})),Te(e,"isStartOfWeek",(function(){return We(e.props.day,je(e.props.day,e.props.locale,e.props.calendarStartDay))})),Te(e,"isSameWeek",(function(t){return e.props.showWeekPicker&&We(t,je(e.props.day,e.props.locale,e.props.calendarStartDay))})),Te(e,"isSameDayOrWeek",(function(t){return e.isSameDay(t)||e.isSameWeek(t)})),Te(e,"getHighLightedClass",(function(){var t=e.props,n=t.day,r=t.highlightDates;if(!r)return!1;var i=xe(n,"MM.dd.yyyy");return r.get(i)})),Te(e,"getHolidaysClass",(function(){var t=e.props,n=t.day,r=t.holidays;if(!r)return!1;var i=xe(n,"MM.dd.yyyy");return r.has(i)?[r.get(i).className]:void 0})),Te(e,"isInRange",(function(){var t=e.props,n=t.day,r=t.startDate,i=t.endDate;return!(!r||!i)&&qe(n,r,i)})),Te(e,"isInSelectingRange",(function(){var t,n=e.props,r=n.day,i=n.selectsStart,o=n.selectsEnd,s=n.selectsRange,a=n.selectsDisabledDaysInRange,c=n.startDate,l=n.endDate,u=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return!(!(i||o||s)||!u||!a&&e.isDisabled())&&(i&&l&&(te.isBefore(u,l)||Ye(u,l))?qe(r,u,l):(o&&c&&(ee.isAfter(u,c)||Ye(u,c))||!(!s||!c||l||!ee.isAfter(u,c)&&!Ye(u,c)))&&qe(r,c,u))})),Te(e,"isSelectingRangeStart",(function(){var t;if(!e.isInSelectingRange())return!1;var n=e.props,r=n.day,i=n.startDate,o=n.selectsStart,s=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return We(r,o?s:i)})),Te(e,"isSelectingRangeEnd",(function(){var t;if(!e.isInSelectingRange())return!1;var n=e.props,r=n.day,i=n.endDate,o=n.selectsEnd,s=n.selectsRange,a=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return We(r,o||s?a:i)})),Te(e,"isRangeStart",(function(){var t=e.props,n=t.day,r=t.startDate,i=t.endDate;return!(!r||!i)&&We(r,n)})),Te(e,"isRangeEnd",(function(){var t=e.props,n=t.day,r=t.startDate,i=t.endDate;return!(!r||!i)&&We(i,n)})),Te(e,"isWeekend",(function(){var t=S.getDay(e.props.day);return 0===t||6===t})),Te(e,"isAfterMonth",(function(){return void 0!==e.props.month&&(e.props.month+1)%12===N.getMonth(e.props.day)})),Te(e,"isBeforeMonth",(function(){return void 0!==e.props.month&&(N.getMonth(e.props.day)+1)%12===e.props.month})),Te(e,"isCurrentDay",(function(){return e.isSameDay(De())})),Te(e,"isSelected",(function(){var t;return e.props.selectsMultiple?null===(t=e.props.selectedDates)||void 0===t?void 0:t.some((function(t){return e.isSameDayOrWeek(t)})):e.isSameDayOrWeek(e.props.selected)})),Te(e,"getClassNames",(function(t){var n,i=e.props.dayClassName?e.props.dayClassName(t):void 0;return r.clsx("react-datepicker__day",i,"react-datepicker__day--"+xe(e.props.day,"ddd",n),{"react-datepicker__day--disabled":e.isDisabled(),"react-datepicker__day--excluded":e.isExcluded(),"react-datepicker__day--selected":e.isSelected(),"react-datepicker__day--keyboard-selected":e.isKeyboardSelected(),"react-datepicker__day--range-start":e.isRangeStart(),"react-datepicker__day--range-end":e.isRangeEnd(),"react-datepicker__day--in-range":e.isInRange(),"react-datepicker__day--in-selecting-range":e.isInSelectingRange(),"react-datepicker__day--selecting-range-start":e.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":e.isSelectingRangeEnd(),"react-datepicker__day--today":e.isCurrentDay(),"react-datepicker__day--weekend":e.isWeekend(),"react-datepicker__day--outside-month":e.isAfterMonth()||e.isBeforeMonth()},e.getHighLightedClass("react-datepicker__day--highlighted"),e.getHolidaysClass())})),Te(e,"getAriaLabel",(function(){var t=e.props,n=t.day,r=t.ariaLabelPrefixWhenEnabled,i=void 0===r?"Choose":r,o=t.ariaLabelPrefixWhenDisabled,s=void 0===o?"Not available":o,a=e.isDisabled()||e.isExcluded()?s:i;return"".concat(a," ").concat(xe(n,"PPPP",e.props.locale))})),Te(e,"getTitle",(function(){var t=e.props,n=t.day,r=t.holidays,i=void 0===r?new Map:r,o=t.excludeDates,s=xe(n,"MM.dd.yyyy"),a=[];return i.has(s)&&a.push.apply(a,Oe(i.get(s).holidayNames)),e.isExcluded()&&a.push(null==o?void 0:o.filter((function(e){return We(e.date?e.date:e,n)})).map((function(e){return e.message}))),a.join(", ")})),Te(e,"getTabIndex",(function(t,n){var r=t||e.props.selected,i=n||e.props.preSelection;return(!e.props.showWeekPicker||!e.props.showWeekNumber&&e.isStartOfWeek())&&(e.isKeyboardSelected()||e.isSameDay(r)&&We(i,r))?0:-1})),Te(e,"handleFocusDay",(function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!1;0===e.getTabIndex()&&!n.isInputFocused&&e.isSameDay(e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(r=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(r=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(r=!0),e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()&&(r=!1),e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()&&(r=!1)),r&&(null===(t=e.dayEl.current)||void 0===t||t.focus({preventScroll:!0}))})),Te(e,"renderDayContents",(function(){return e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()||e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()?null:e.props.renderDayContents?e.props.renderDayContents(T.getDate(e.props.day),e.props.day):T.getDate(e.props.day)})),Te(e,"render",(function(){return de.default.createElement("div",{ref:e.dayEl,className:e.getClassNames(e.props.day),onKeyDown:e.handleOnKeyDown,onClick:e.handleClick,onMouseEnter:e.props.usePointerEvent?void 0:e.handleMouseEnter,onPointerEnter:e.props.usePointerEvent?e.handleMouseEnter:void 0,tabIndex:e.getTabIndex(),"aria-label":e.getAriaLabel(),role:"option",title:e.getTitle(),"aria-disabled":e.isDisabled(),"aria-current":e.isCurrentDay()?"date":void 0,"aria-selected":e.isSelected()||e.isInRange()},e.renderDayContents(),""!==e.getTitle()&&de.default.createElement("span",{className:"overlay"},e.getTitle()))})),e}return Ne(t,e),Se(t,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(e){this.handleFocusDay(e)}}])}(de.default.Component),jt=function(e){function t(){var e;_e(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Te(e=fe(this,t,[].concat(r)),"weekNumberEl",de.default.createRef()),Te(e,"handleClick",(function(t){e.props.onClick&&e.props.onClick(t)})),Te(e,"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),Te(e,"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!We(e.props.date,e.props.selected)&&We(e.props.date,e.props.preSelection)})),Te(e,"getTabIndex",(function(){return e.props.showWeekPicker&&e.props.showWeekNumber&&(e.isKeyboardSelected()||We(e.props.date,e.props.selected)&&We(e.props.preSelection,e.props.selected))?0:-1})),Te(e,"handleFocusWeekNumber",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1;0===e.getTabIndex()&&!t.isInputFocused&&We(e.props.date,e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(n=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(n=!0)),n&&e.weekNumberEl.current&&e.weekNumberEl.current.focus({preventScroll:!0})})),e}return Ne(t,e),Se(t,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(e){this.handleFocusWeekNumber(e)}},{key:"render",value:function(){var e=this.props,t=e.weekNumber,n=e.ariaLabelPrefix,i=void 0===n?"week ":n,o=e.onClick,s={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!o,"react-datepicker__week-number--selected":!!o&&We(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return de.default.createElement("div",{ref:this.weekNumberEl,className:r.clsx(s),"aria-label":"".concat(i," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},t)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}])}(de.default.Component),Ut=function(e){function t(){var e;_e(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Te(e=fe(this,t,[].concat(r)),"handleDayClick",(function(t,n){e.props.onDayClick&&e.props.onDayClick(t,n)})),Te(e,"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),Te(e,"handleWeekClick",(function(t,n,r){"function"==typeof e.props.onWeekSelect&&e.props.onWeekSelect(t,n,r),e.props.showWeekPicker&&e.handleDayClick(t,r),e.props.shouldCloseOnSelect&&e.props.setOpen(!1)})),Te(e,"formatWeekNumber",(function(t){return e.props.formatWeekNumber?e.props.formatWeekNumber(t):function(e,t){var n=t&&Qe(t)||Ke()&&Qe(Ke());return I.getISOWeek(e,n?{locale:n}:null)}(t)})),Te(e,"renderDays",(function(){var t=e.startOfWeek(),n=[],r=e.formatWeekNumber(t);if(e.props.showWeekNumber){var i=e.props.onWeekSelect||e.props.showWeekPicker?e.handleWeekClick.bind(e,t,r):void 0;n.push(de.default.createElement(jt,{key:"W",weekNumber:r,date:t,onClick:i,selected:e.props.selected,preSelection:e.props.preSelection,ariaLabelPrefix:e.props.ariaLabelPrefix,showWeekPicker:e.props.showWeekPicker,showWeekNumber:e.props.showWeekNumber,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef}))}return n.concat([0,1,2,3,4,5,6].map((function(n){var r=l.addDays(t,n);return de.default.createElement(Pt,{ariaLabelPrefixWhenEnabled:e.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:e.props.disabledDayAriaLabelPrefix,key:r.valueOf(),day:r,month:e.props.month,onClick:e.handleDayClick.bind(e,r),usePointerEvent:e.props.usePointerEvent,onMouseEnter:e.handleDayMouseEnter.bind(e,r),minDate:e.props.minDate,maxDate:e.props.maxDate,calendarStartDay:e.props.calendarStartDay,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,highlightDates:e.props.highlightDates,holidays:e.props.holidays,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,showWeekPicker:e.props.showWeekPicker,showWeekNumber:e.props.showWeekNumber,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,selectsMultiple:e.props.selectsMultiple,selectedDates:e.props.selectedDates,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,renderDayContents:e.props.renderDayContents,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart,locale:e.props.locale})})))})),Te(e,"startOfWeek",(function(){return je(e.props.day,e.props.locale,e.props.calendarStartDay)})),Te(e,"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!We(e.startOfWeek(),e.props.selected)&&We(e.startOfWeek(),e.props.preSelection)})),e}return Ne(t,e),Se(t,[{key:"render",value:function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":We(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return de.default.createElement("div",{className:r.clsx(e)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}])}(de.default.Component),Ft="two_columns",zt="three_columns",Bt="four_columns",Vt=Te(Te(Te({},Ft,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),zt,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),Bt,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4});function Ht(e,t){return e?Bt:t?Ft:zt}var Gt=function(e){function t(){var e;_e(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Te(e=fe(this,t,[].concat(i)),"MONTH_REFS",Oe(Array(12)).map((function(){return de.default.createRef()}))),Te(e,"QUARTER_REFS",Oe(Array(4)).map((function(){return de.default.createRef()}))),Te(e,"isDisabled",(function(t){return Ze(t,e.props)})),Te(e,"isExcluded",(function(t){return $e(t,e.props)})),Te(e,"handleDayClick",(function(t,n){e.props.onDayClick&&e.props.onDayClick(t,n,e.props.orderInDisplay)})),Te(e,"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),Te(e,"handleMouseLeave",(function(){e.props.onMouseLeave&&e.props.onMouseLeave()})),Te(e,"isRangeStartMonth",(function(t){var n=e.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&He(D.setMonth(r,t),i)})),Te(e,"isRangeStartQuarter",(function(t){var n=e.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&Ge(k.setQuarter(r,t),i)})),Te(e,"isRangeEndMonth",(function(t){var n=e.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&He(D.setMonth(r,t),o)})),Te(e,"isRangeEndQuarter",(function(t){var n=e.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&Ge(k.setQuarter(r,t),o)})),Te(e,"isInSelectingRangeMonth",(function(t){var n,r=e.props,i=r.day,o=r.selectsStart,s=r.selectsEnd,a=r.selectsRange,c=r.startDate,l=r.endDate,u=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return!(!(o||s||a)||!u)&&(o&&l?tt(u,l,t,i):(s&&c||!(!a||!c||l))&&tt(c,u,t,i))})),Te(e,"isSelectingMonthRangeStart",(function(t){var n;if(!e.isInSelectingRangeMonth(t))return!1;var r=e.props,i=r.day,o=r.startDate,s=r.selectsStart,a=D.setMonth(i,t),c=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return He(a,s?c:o)})),Te(e,"isSelectingMonthRangeEnd",(function(t){var n;if(!e.isInSelectingRangeMonth(t))return!1;var r=e.props,i=r.day,o=r.endDate,s=r.selectsEnd,a=r.selectsRange,c=D.setMonth(i,t),l=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return He(c,s||a?l:o)})),Te(e,"isInSelectingRangeQuarter",(function(t){var n,r=e.props,i=r.day,o=r.selectsStart,s=r.selectsEnd,a=r.selectsRange,c=r.startDate,l=r.endDate,u=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return!(!(o||s||a)||!u)&&(o&&l?ot(u,l,t,i):(s&&c||!(!a||!c||l))&&ot(c,u,t,i))})),Te(e,"isWeekInMonth",(function(t){var n=e.props.day,r=l.addDays(t,6);return He(t,n)||He(r,n)})),Te(e,"isCurrentMonth",(function(e,t){return C.getYear(e)===C.getYear(De())&&t===N.getMonth(De())})),Te(e,"isCurrentQuarter",(function(e,t){return C.getYear(e)===C.getYear(De())&&t===w.getQuarter(De())})),Te(e,"isSelectedMonth",(function(e,t,n){return N.getMonth(n)===t&&C.getYear(e)===C.getYear(n)})),Te(e,"isSelectedQuarter",(function(e,t,n){return w.getQuarter(e)===t&&C.getYear(e)===C.getYear(n)})),Te(e,"renderWeeks",(function(){for(var t=[],n=e.props.fixedHeight,r=0,i=!1,o=je(Ue(e.props.day),e.props.locale,e.props.calendarStartDay),s=e.props.showWeekPicker?je(e.props.selected,e.props.locale,e.props.calendarStartDay):e.props.selected,a=e.props.showWeekPicker?je(e.props.preSelection,e.props.locale,e.props.calendarStartDay):e.props.preSelection;t.push(de.default.createElement(Ut,{ariaLabelPrefix:e.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:e.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:e.props.disabledDayAriaLabelPrefix,key:r,day:o,month:N.getMonth(e.props.day),onDayClick:e.handleDayClick,usePointerEvent:e.props.usePointerEvent,onDayMouseEnter:e.handleDayMouseEnter,onWeekSelect:e.props.onWeekSelect,formatWeekNumber:e.props.formatWeekNumber,locale:e.props.locale,minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,highlightDates:e.props.highlightDates,holidays:e.props.holidays,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:a,selected:s,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,selectsMultiple:e.props.selectsMultiple,selectedDates:e.props.selectedDates,showWeekNumber:e.props.showWeekNumbers,showWeekPicker:e.props.showWeekPicker,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,setOpen:e.props.setOpen,shouldCloseOnSelect:e.props.shouldCloseOnSelect,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,renderDayContents:e.props.renderDayContents,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,calendarStartDay:e.props.calendarStartDay,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart})),!i;){r++,o=u.addWeeks(o,1);var c=n&&r>=6,l=!n&&!e.isWeekInMonth(o);if(c||l){if(!e.props.peekNextMonth)break;i=!0}}return t})),Te(e,"onMonthClick",(function(t,n){var r=D.setMonth(e.props.day,n);et(r,e.props)||e.handleDayClick(Ue(r),t)})),Te(e,"onMonthMouseEnter",(function(t){var n=D.setMonth(e.props.day,t);et(n,e.props)||e.handleDayMouseEnter(Ue(n))})),Te(e,"handleMonthNavigation",(function(t,n){e.isDisabled(n)||e.isExcluded(n)||(e.props.setPreSelection(n),e.MONTH_REFS[t].current&&e.MONTH_REFS[t].current.focus())})),Te(e,"onMonthKeyDown",(function(t,n){var r=e.props,i=r.selected,o=r.preSelection,s=r.disabledKeyboardNavigation,a=r.showTwoColumnMonthYearPicker,c=r.showFourColumnMonthYearPicker,l=r.setPreSelection,u=r.handleOnMonthKeyDown,p=t.key;if("Tab"!==p&&t.preventDefault(),!s){var h=Ht(c,a),f=Vt[h].verticalNavigationOffset,m=Vt[h].grid;switch(p){case"Enter":e.onMonthClick(t,n),l(i);break;case"ArrowRight":e.handleMonthNavigation(11===n?0:n+1,d.addMonths(o,1));break;case"ArrowLeft":e.handleMonthNavigation(0===n?11:n-1,g.subMonths(o,1));break;case"ArrowUp":e.handleMonthNavigation(m[0].includes(n)?n+12-f:n-f,g.subMonths(o,f));break;case"ArrowDown":e.handleMonthNavigation(m[m.length-1].includes(n)?n-12+f:n+f,d.addMonths(o,f))}}u&&u(t)})),Te(e,"onQuarterClick",(function(t,n){var r=k.setQuarter(e.props.day,n);nt(r,e.props)||e.handleDayClick(ze(r),t)})),Te(e,"onQuarterMouseEnter",(function(t){var n=k.setQuarter(e.props.day,t);nt(n,e.props)||e.handleDayMouseEnter(ze(n))})),Te(e,"handleQuarterNavigation",(function(t,n){e.isDisabled(n)||e.isExcluded(n)||(e.props.setPreSelection(n),e.QUARTER_REFS[t-1].current&&e.QUARTER_REFS[t-1].current.focus())})),Te(e,"onQuarterKeyDown",(function(t,n){var r=t.key;if(!e.props.disabledKeyboardNavigation)switch(r){case"Enter":e.onQuarterClick(t,n),e.props.setPreSelection(e.props.selected);break;case"ArrowRight":e.handleQuarterNavigation(4===n?1:n+1,p.addQuarters(e.props.preSelection,1));break;case"ArrowLeft":e.handleQuarterNavigation(1===n?4:n-1,v.subQuarters(e.props.preSelection,1))}})),Te(e,"getMonthClassNames",(function(t){var n=e.props,i=n.day,o=n.startDate,s=n.endDate,a=n.selected,c=n.minDate,l=n.maxDate,u=n.preSelection,d=n.monthClassName,p=n.excludeDates,h=n.includeDates,f=d?d(D.setMonth(i,t)):void 0,m=D.setMonth(i,t);return r.clsx("react-datepicker__month-text","react-datepicker__month-".concat(t),f,{"react-datepicker__month-text--disabled":(c||l||p||h)&&et(m,e.props),"react-datepicker__month-text--selected":e.isSelectedMonth(i,t,a),"react-datepicker__month-text--keyboard-selected":!e.props.disabledKeyboardNavigation&&e.isSelectedMonth(i,t,u),"react-datepicker__month-text--in-selecting-range":e.isInSelectingRangeMonth(t),"react-datepicker__month-text--in-range":tt(o,s,t,i),"react-datepicker__month-text--range-start":e.isRangeStartMonth(t),"react-datepicker__month-text--range-end":e.isRangeEndMonth(t),"react-datepicker__month-text--selecting-range-start":e.isSelectingMonthRangeStart(t),"react-datepicker__month-text--selecting-range-end":e.isSelectingMonthRangeEnd(t),"react-datepicker__month-text--today":e.isCurrentMonth(i,t)})})),Te(e,"getTabIndex",(function(t){var n=N.getMonth(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==n?"-1":"0"})),Te(e,"getQuarterTabIndex",(function(t){var n=w.getQuarter(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==n?"-1":"0"})),Te(e,"getAriaLabel",(function(t){var n=e.props,r=n.chooseDayAriaLabelPrefix,i=void 0===r?"Choose":r,o=n.disabledDayAriaLabelPrefix,s=void 0===o?"Not available":o,a=n.day,c=D.setMonth(a,t),l=e.isDisabled(c)||e.isExcluded(c)?s:i;return"".concat(l," ").concat(xe(c,"MMMM yyyy"))})),Te(e,"getQuarterClassNames",(function(t){var n=e.props,i=n.day,o=n.startDate,s=n.endDate,a=n.selected,c=n.minDate,l=n.maxDate,u=n.preSelection,d=n.disabledKeyboardNavigation;return r.clsx("react-datepicker__quarter-text","react-datepicker__quarter-".concat(t),{"react-datepicker__quarter-text--disabled":(c||l)&&nt(k.setQuarter(i,t),e.props),"react-datepicker__quarter-text--selected":e.isSelectedQuarter(i,t,a),"react-datepicker__quarter-text--keyboard-selected":!d&&e.isSelectedQuarter(i,t,u),"react-datepicker__quarter-text--in-selecting-range":e.isInSelectingRangeQuarter(t),"react-datepicker__quarter-text--in-range":ot(o,s,t,i),"react-datepicker__quarter-text--range-start":e.isRangeStartQuarter(t),"react-datepicker__quarter-text--range-end":e.isRangeEndQuarter(t)})})),Te(e,"getMonthContent",(function(t){var n=e.props,r=n.showFullMonthYearPicker,i=n.renderMonthContent,o=n.locale,s=n.day,a=Xe(t,o),c=Je(t,o);return i?i(t,a,c,s):r?c:a})),Te(e,"getQuarterContent",(function(t){var n=e.props,r=n.renderQuarterContent,i=function(e,t){return xe(k.setQuarter(De(),e),"QQQ",t)}(t,n.locale);return r?r(t,i):i})),Te(e,"renderMonths",(function(){var t=e.props,n=t.showTwoColumnMonthYearPicker,r=t.showFourColumnMonthYearPicker,i=t.day,o=t.selected;return Vt[Ht(r,n)].grid.map((function(t,n){return de.default.createElement("div",{className:"react-datepicker__month-wrapper",key:n},t.map((function(t,n){return de.default.createElement("div",{ref:e.MONTH_REFS[t],key:n,onClick:function(n){e.onMonthClick(n,t)},onKeyDown:function(n){It(n)&&(n.preventDefault(),n.key="Enter"),e.onMonthKeyDown(n,t)},onMouseEnter:e.props.usePointerEvent?void 0:function(){return e.onMonthMouseEnter(t)},onPointerEnter:e.props.usePointerEvent?function(){return e.onMonthMouseEnter(t)}:void 0,tabIndex:e.getTabIndex(t),className:e.getMonthClassNames(t),role:"option","aria-label":e.getAriaLabel(t),"aria-current":e.isCurrentMonth(i,t)?"date":void 0,"aria-selected":e.isSelectedMonth(i,t,o)},e.getMonthContent(t))})))}))})),Te(e,"renderQuarters",(function(){var t=e.props,n=t.day,r=t.selected;return de.default.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(t,i){return de.default.createElement("div",{key:i,ref:e.QUARTER_REFS[i],role:"option",onClick:function(n){e.onQuarterClick(n,t)},onKeyDown:function(n){e.onQuarterKeyDown(n,t)},onMouseEnter:e.props.usePointerEvent?void 0:function(){return e.onQuarterMouseEnter(t)},onPointerEnter:e.props.usePointerEvent?function(){return e.onQuarterMouseEnter(t)}:void 0,className:e.getQuarterClassNames(t),"aria-selected":e.isSelectedQuarter(n,t,r),tabIndex:e.getQuarterTabIndex(t),"aria-current":e.isCurrentQuarter(n,t)?"date":void 0},e.getQuarterContent(t))})))})),Te(e,"getClassNames",(function(){var t=e.props,n=t.selectingDate,i=t.selectsStart,o=t.selectsEnd,s=t.showMonthYearPicker,a=t.showQuarterYearPicker,c=t.showWeekPicker;return r.clsx("react-datepicker__month",{"react-datepicker__month--selecting-range":n&&(i||o)},{"react-datepicker__monthPicker":s},{"react-datepicker__quarterPicker":a},{"react-datepicker__weekPicker":c})})),e}return Ne(t,e),Se(t,[{key:"render",value:function(){var e=this.props,t=e.showMonthYearPicker,n=e.showQuarterYearPicker,r=e.day,i=e.ariaLabelPrefix,o=void 0===i?"Month ":i,s=o?o.trim()+" ":"";return de.default.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(s).concat(xe(r,"MMMM, yyyy")),role:"listbox"},t?this.renderMonths():n?this.renderQuarters():this.renderWeeks())}}])}(de.default.Component),Wt=function(e){function t(){var e;_e(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Te(e=fe(this,t,[].concat(r)),"state",{height:null}),Te(e,"scrollToTheSelectedTime",(function(){requestAnimationFrame((function(){e.list&&(e.list.scrollTop=e.centerLi&&t.calcCenterPosition(e.props.monthRef?e.props.monthRef.clientHeight-e.header.clientHeight:e.list.clientHeight,e.centerLi))}))})),Te(e,"handleClick",(function(t){(e.props.minTime||e.props.maxTime)&&lt(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&ct(t,e.props)||e.props.onChange(t)})),Te(e,"isSelectedTime",(function(t){return e.props.selected&&(n=t,bt(e.props.selected).getTime()===bt(n).getTime());var n})),Te(e,"isDisabledTime",(function(t){return(e.props.minTime||e.props.maxTime)&&lt(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&ct(t,e.props)})),Te(e,"liClasses",(function(t){var n=["react-datepicker__time-list-item",e.props.timeClassName?e.props.timeClassName(t):void 0];return e.isSelectedTime(t)&&n.push("react-datepicker__time-list-item--selected"),e.isDisabledTime(t)&&n.push("react-datepicker__time-list-item--disabled"),e.props.injectTimes&&(60*b.getHours(t)+_.getMinutes(t))%e.props.intervals!=0&&n.push("react-datepicker__time-list-item--injected"),n.join(" ")})),Te(e,"handleOnKeyDown",(function(t,n){" "===t.key&&(t.preventDefault(),t.key="Enter"),"ArrowUp"!==t.key&&"ArrowLeft"!==t.key||!t.target.previousSibling||(t.preventDefault(),t.target.previousSibling.focus()),"ArrowDown"!==t.key&&"ArrowRight"!==t.key||!t.target.nextSibling||(t.preventDefault(),t.target.nextSibling.focus()),"Enter"===t.key&&e.handleClick(n),e.props.handleOnKeyDown(t)})),Te(e,"renderTimes",(function(){for(var t,n=[],r=e.props.format?e.props.format:"p",i=e.props.intervals,o=e.props.selected||e.props.openToDate||De(),s=(t=o,z.startOfDay(t)),c=e.props.injectTimes&&e.props.injectTimes.sort((function(e,t){return e-t})),l=60*function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}(o),u=l/i,d=0;d<u;d++){var p=a.addMinutes(s,d*i);if(n.push(p),c){var h=yt(s,p,d,i,c);n=n.concat(h)}}var f=n.reduce((function(e,t){return t.getTime()<=o.getTime()?t:e}),n[0]);return n.map((function(t,n){return de.default.createElement("li",{key:n,onClick:e.handleClick.bind(e,t),className:e.liClasses(t),ref:function(n){t===f&&(e.centerLi=n)},onKeyDown:function(n){e.handleOnKeyDown(n,t)},tabIndex:t===f?0:-1,role:"option","aria-selected":e.isSelectedTime(t)?"true":void 0,"aria-disabled":e.isDisabledTime(t)?"true":void 0},xe(t,r,e.props.locale))}))})),e}return Ne(t,e),Se(t,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var e=this,t=this.state.height;return de.default.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},de.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(t){e.header=t}},de.default.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),de.default.createElement("div",{className:"react-datepicker__time"},de.default.createElement("div",{className:"react-datepicker__time-box"},de.default.createElement("ul",{className:"react-datepicker__time-list",ref:function(t){e.list=t},style:t?{height:t}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}])}(de.default.Component);Te(Wt,"calcCenterPosition",(function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)}));var Yt=function(e){function t(e){var n;return _e(this,t),Te(n=fe(this,t,[e]),"YEAR_REFS",Oe(Array(n.props.yearItemNumber)).map((function(){return de.default.createRef()}))),Te(n,"isDisabled",(function(e){return Ze(e,n.props)})),Te(n,"isExcluded",(function(e){return $e(e,n.props)})),Te(n,"selectingDate",(function(){var e;return null!==(e=n.props.selectingDate)&&void 0!==e?e:n.props.preSelection})),Te(n,"updateFocusOnPaginate",(function(e){var t=function(){this.YEAR_REFS[e].current.focus()}.bind(n);window.requestAnimationFrame(t)})),Te(n,"handleYearClick",(function(e,t){n.props.onDayClick&&n.props.onDayClick(e,t)})),Te(n,"handleYearNavigation",(function(e,t){var r=n.props,i=r.date,o=r.yearItemNumber,s=_t(i,o).startPeriod;n.isDisabled(t)||n.isExcluded(t)||(n.props.setPreSelection(t),e-s==-1?n.updateFocusOnPaginate(o-1):e-s===o?n.updateFocusOnPaginate(0):n.YEAR_REFS[e-s].current.focus())})),Te(n,"isSameDay",(function(e,t){return We(e,t)})),Te(n,"isCurrentYear",(function(e){return e===C.getYear(De())})),Te(n,"isRangeStart",(function(e){return n.props.startDate&&n.props.endDate&&Ve(x.setYear(De(),e),n.props.startDate)})),Te(n,"isRangeEnd",(function(e){return n.props.startDate&&n.props.endDate&&Ve(x.setYear(De(),e),n.props.endDate)})),Te(n,"isInRange",(function(e){return rt(e,n.props.startDate,n.props.endDate)})),Te(n,"isInSelectingRange",(function(e){var t=n.props,r=t.selectsStart,i=t.selectsEnd,o=t.selectsRange,s=t.startDate,a=t.endDate;return!(!(r||i||o)||!n.selectingDate())&&(r&&a?rt(e,n.selectingDate(),a):(i&&s||!(!o||!s||a))&&rt(e,s,n.selectingDate()))})),Te(n,"isSelectingRangeStart",(function(e){if(!n.isInSelectingRange(e))return!1;var t=n.props,r=t.startDate,i=t.selectsStart;return Ve(x.setYear(De(),e),i?n.selectingDate():r)})),Te(n,"isSelectingRangeEnd",(function(e){if(!n.isInSelectingRange(e))return!1;var t=n.props,r=t.endDate,i=t.selectsEnd,o=t.selectsRange;return Ve(x.setYear(De(),e),i||o?n.selectingDate():r)})),Te(n,"isKeyboardSelected",(function(e){var t=Fe(x.setYear(n.props.date,e));return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!We(t,Fe(n.props.selected))&&We(t,Fe(n.props.preSelection))})),Te(n,"onYearClick",(function(e,t){var r=n.props.date;n.handleYearClick(Fe(x.setYear(r,t)),e)})),Te(n,"onYearKeyDown",(function(e,t){var r=e.key,i=n.props.handleOnKeyDown;if(!n.props.disabledKeyboardNavigation)switch(r){case"Enter":n.onYearClick(e,t),n.props.setPreSelection(n.props.selected);break;case"ArrowRight":n.handleYearNavigation(t+1,h.addYears(n.props.preSelection,1));break;case"ArrowLeft":n.handleYearNavigation(t-1,y.subYears(n.props.preSelection,1))}i&&i(e)})),Te(n,"getYearClassNames",(function(e){var t=n.props,i=t.date,o=t.minDate,s=t.maxDate,a=t.selected,c=t.excludeDates,l=t.includeDates,u=t.filterDate,d=t.yearClassName;return r.clsx("react-datepicker__year-text","react-datepicker__year-".concat(e),d?d(x.setYear(i,e)):void 0,{"react-datepicker__year-text--selected":e===C.getYear(a),"react-datepicker__year-text--disabled":(o||s||c||l||u)&&it(e,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(e),"react-datepicker__year-text--range-start":n.isRangeStart(e),"react-datepicker__year-text--range-end":n.isRangeEnd(e),"react-datepicker__year-text--in-range":n.isInRange(e),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(e),"react-datepicker__year-text--today":n.isCurrentYear(e)})})),Te(n,"getYearTabIndex",(function(e){return n.props.disabledKeyboardNavigation?"-1":e===C.getYear(n.props.preSelection)?"0":"-1"})),Te(n,"getYearContainerClassNames",(function(){var e=n.props,t=e.selectingDate,i=e.selectsStart,o=e.selectsEnd,s=e.selectsRange;return r.clsx("react-datepicker__year",{"react-datepicker__year--selecting-range":t&&(i||o||s)})})),Te(n,"getYearContent",(function(e){return n.props.renderYearContent?n.props.renderYearContent(e):e})),n}return Ne(t,e),Se(t,[{key:"render",value:function(){for(var e=this,t=[],n=this.props,r=n.date,i=n.yearItemNumber,o=n.onYearMouseEnter,s=n.onYearMouseLeave,a=_t(r,i),c=a.startPeriod,l=a.endPeriod,u=function(n){t.push(de.default.createElement("div",{ref:e.YEAR_REFS[n-c],onClick:function(t){e.onYearClick(t,n)},onKeyDown:function(t){It(t)&&(t.preventDefault(),t.key="Enter"),e.onYearKeyDown(t,n)},tabIndex:e.getYearTabIndex(n),className:e.getYearClassNames(n),onMouseEnter:e.props.usePointerEvent?void 0:function(e){return o(e,n)},onPointerEnter:e.props.usePointerEvent?function(e){return o(e,n)}:void 0,onMouseLeave:e.props.usePointerEvent?void 0:function(e){return s(e,n)},onPointerLeave:e.props.usePointerEvent?function(e){return s(e,n)}:void 0,key:n,"aria-current":e.isCurrentYear(n)?"date":void 0},e.getYearContent(n)))},d=c;d<=l;d++)u(d);return de.default.createElement("div",{className:this.getYearContainerClassNames()},de.default.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},t))}}])}(de.default.Component),qt=function(e){function t(e){var n;return _e(this,t),Te(n=fe(this,t,[e]),"onTimeChange",(function(e){n.setState({time:e});var t=n.props.date,r=t instanceof Date&&!isNaN(t)?t:new Date;r.setHours(e.split(":")[0]),r.setMinutes(e.split(":")[1]),n.props.onChange(r)})),Te(n,"renderTimeInput",(function(){var e=n.state.time,t=n.props,r=t.date,i=t.timeString,o=t.customTimeInput;return o?de.default.cloneElement(o,{date:r,value:e,onChange:n.onTimeChange}):de.default.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:e,onChange:function(e){n.onTimeChange(e.target.value||i)}})})),n.state={time:n.props.timeString},n}return Ne(t,e),Se(t,[{key:"render",value:function(){return de.default.createElement("div",{className:"react-datepicker__input-time-container"},de.default.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),de.default.createElement("div",{className:"react-datepicker-time__input-container"},de.default.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.timeString!==t.time?{time:e.timeString}:null}}])}(de.default.Component);function Kt(e){var t=e.showTimeSelectOnly,n=void 0!==t&&t,r=e.showTime,i=void 0!==r&&r,o=e.className,s=e.children,a=n?"Choose Time":"Choose Date".concat(i?" and Time":"");return de.default.createElement("div",{className:o,role:"dialog","aria-label":a,"aria-modal":"true"},s)}var Qt,Jt=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Xt=function(e){function t(e){var n;return _e(this,t),Te(n=fe(this,t,[e]),"handleClickOutside",(function(e){n.props.onClickOutside(e)})),Te(n,"setClickOutsideRef",(function(){return n.containerRef.current})),Te(n,"handleDropdownFocus",(function(e){(function(){var e=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className||"").split(/\s+/);return Jt.some((function(t){return e.indexOf(t)>=0}))})(e.target)&&n.props.onDropdownFocus()})),Te(n,"getDateInView",(function(){var e=n.props,t=e.preSelection,r=e.selected,i=e.openToDate,o=ft(n.props),s=mt(n.props),a=De();return i||r||t||(o&&te.isBefore(a,o)?o:s&&ee.isAfter(a,s)?s:a)})),Te(n,"increaseMonth",(function(){n.setState((function(e){var t=e.date;return{date:d.addMonths(t,1)}}),(function(){return n.handleMonthChange(n.state.date)}))})),Te(n,"decreaseMonth",(function(){n.setState((function(e){var t=e.date;return{date:g.subMonths(t,1)}}),(function(){return n.handleMonthChange(n.state.date)}))})),Te(n,"handleDayClick",(function(e,t,r){n.props.onSelect(e,t,r),n.props.setPreSelection&&n.props.setPreSelection(e)})),Te(n,"handleDayMouseEnter",(function(e){n.setState({selectingDate:e}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(e)})),Te(n,"handleMonthMouseLeave",(function(){n.setState({selectingDate:null}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()})),Te(n,"handleYearMouseEnter",(function(e,t){n.setState({selectingDate:x.setYear(De(),t)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(e,t)})),Te(n,"handleYearMouseLeave",(function(e,t){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(e,t)})),Te(n,"handleYearChange",(function(e){n.props.onYearChange&&(n.props.onYearChange(e),n.setState({isRenderAriaLiveMessage:!0})),n.props.adjustDateOnChange&&(n.props.onSelect&&n.props.onSelect(e),n.props.setOpen&&n.props.setOpen(!0)),n.props.setPreSelection&&n.props.setPreSelection(e)})),Te(n,"handleMonthChange",(function(e){n.handleCustomMonthChange(e),n.props.adjustDateOnChange&&(n.props.onSelect&&n.props.onSelect(e),n.props.setOpen&&n.props.setOpen(!0)),n.props.setPreSelection&&n.props.setPreSelection(e)})),Te(n,"handleCustomMonthChange",(function(e){n.props.onMonthChange&&(n.props.onMonthChange(e),n.setState({isRenderAriaLiveMessage:!0}))})),Te(n,"handleMonthYearChange",(function(e){n.handleYearChange(e),n.handleMonthChange(e)})),Te(n,"changeYear",(function(e){n.setState((function(t){var n=t.date;return{date:x.setYear(n,e)}}),(function(){return n.handleYearChange(n.state.date)}))})),Te(n,"changeMonth",(function(e){n.setState((function(t){var n=t.date;return{date:D.setMonth(n,e)}}),(function(){return n.handleMonthChange(n.state.date)}))})),Te(n,"changeMonthYear",(function(e){n.setState((function(t){var n=t.date;return{date:x.setYear(D.setMonth(n,N.getMonth(e)),C.getYear(e))}}),(function(){return n.handleMonthYearChange(n.state.date)}))})),Te(n,"header",(function(){var e=je(arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.date,n.props.locale,n.props.calendarStartDay),t=[];return n.props.showWeekNumbers&&t.push(de.default.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),t.concat([0,1,2,3,4,5,6].map((function(t){var i=l.addDays(e,t),o=n.formatWeekday(i,n.props.locale),s=n.props.weekDayClassName?n.props.weekDayClassName(i):void 0;return de.default.createElement("div",{key:t,className:r.clsx("react-datepicker__day-name",s)},o)})))})),Te(n,"formatWeekday",(function(e,t){return n.props.formatWeekDay?function(e,t,n){return t(xe(e,"EEEE",n))}(e,n.props.formatWeekDay,t):n.props.useWeekdaysShort?function(e,t){return xe(e,"EEE",t)}(e,t):function(e,t){return xe(e,"EEEEEE",t)}(e,t)})),Te(n,"decreaseYear",(function(){n.setState((function(e){var t=e.date;return{date:y.subYears(t,n.props.showYearPicker?n.props.yearItemNumber:1)}}),(function(){return n.handleYearChange(n.state.date)}))})),Te(n,"clearSelectingDate",(function(){n.setState({selectingDate:null})})),Te(n,"renderPreviousButton",(function(){if(!n.props.renderCustomHeader){var e;switch(!0){case n.props.showMonthYearPicker:e=pt(n.state.date,n.props);break;case n.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.yearItemNumber,i=void 0===r?Re:r,o=_t(Fe(y.subYears(e,i)),i).endPeriod,s=n&&C.getYear(n);return s&&s>o||!1}(n.state.date,n.props);break;default:e=ut(n.state.date,n.props)}if((n.props.forceShowMonthNavigation||n.props.showDisabledMonthNavigation||!e)&&!n.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--previous"],r=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(r=n.decreaseYear),e&&n.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--previous--disabled"),r=null);var i=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,o=n.props,s=o.previousMonthButtonLabel,a=o.previousYearButtonLabel,c=n.props,l=c.previousMonthAriaLabel,u=void 0===l?"string"==typeof s?s:"Previous Month":l,d=c.previousYearAriaLabel,p=void 0===d?"string"==typeof a?a:"Previous Year":d;return de.default.createElement("button",{type:"button",className:t.join(" "),onClick:r,onKeyDown:n.props.handleOnKeyDown,"aria-label":i?p:u},de.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},i?n.props.previousYearButtonLabel:n.props.previousMonthButtonLabel))}}})),Te(n,"increaseYear",(function(){n.setState((function(e){var t=e.date;return{date:h.addYears(t,n.props.showYearPicker?n.props.yearItemNumber:1)}}),(function(){return n.handleYearChange(n.state.date)}))})),Te(n,"renderNextButton",(function(){if(!n.props.renderCustomHeader){var e;switch(!0){case n.props.showMonthYearPicker:e=ht(n.state.date,n.props);break;case n.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.yearItemNumber,i=void 0===r?Re:r,o=_t(h.addYears(e,i),i).startPeriod,s=n&&C.getYear(n);return s&&s<o||!1}(n.state.date,n.props);break;default:e=dt(n.state.date,n.props)}if((n.props.forceShowMonthNavigation||n.props.showDisabledMonthNavigation||!e)&&!n.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--next"];n.props.showTimeSelect&&t.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&t.push("react-datepicker__navigation--next--with-today-button");var r=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(r=n.increaseYear),e&&n.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--next--disabled"),r=null);var i=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,o=n.props,s=o.nextMonthButtonLabel,a=o.nextYearButtonLabel,c=n.props,l=c.nextMonthAriaLabel,u=void 0===l?"string"==typeof s?s:"Next Month":l,d=c.nextYearAriaLabel,p=void 0===d?"string"==typeof a?a:"Next Year":d;return de.default.createElement("button",{type:"button",className:t.join(" "),onClick:r,onKeyDown:n.props.handleOnKeyDown,"aria-label":i?p:u},de.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},i?n.props.nextYearButtonLabel:n.props.nextMonthButtonLabel))}}})),Te(n,"renderCurrentMonth",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.date,t=["react-datepicker__current-month"];return n.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),de.default.createElement("div",{className:t.join(" ")},xe(e,n.props.dateFormat,n.props.locale))})),Te(n,"renderYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n.props.showYearDropdown&&!e)return de.default.createElement(Ot,{adjustDateOnChange:n.props.adjustDateOnChange,date:n.state.date,onSelect:n.props.onSelect,setOpen:n.props.setOpen,dropdownMode:n.props.dropdownMode,onChange:n.changeYear,minDate:n.props.minDate,maxDate:n.props.maxDate,year:C.getYear(n.state.date),scrollableYearDropdown:n.props.scrollableYearDropdown,yearDropdownItemNumber:n.props.yearDropdownItemNumber})})),Te(n,"renderMonthDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n.props.showMonthDropdown&&!e)return de.default.createElement(Mt,{dropdownMode:n.props.dropdownMode,locale:n.props.locale,onChange:n.changeMonth,month:N.getMonth(n.state.date),useShortMonthInDropdown:n.props.useShortMonthInDropdown})})),Te(n,"renderMonthYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n.props.showMonthYearDropdown&&!e)return de.default.createElement(Lt,{dropdownMode:n.props.dropdownMode,locale:n.props.locale,dateFormat:n.props.dateFormat,onChange:n.changeMonthYear,minDate:n.props.minDate,maxDate:n.props.maxDate,date:n.state.date,scrollableMonthYearDropdown:n.props.scrollableMonthYearDropdown})})),Te(n,"handleTodayButtonClick",(function(e){n.props.onSelect(Be(),e),n.props.setPreSelection&&n.props.setPreSelection(Be())})),Te(n,"renderTodayButton",(function(){if(n.props.todayButton&&!n.props.showTimeSelectOnly)return de.default.createElement("div",{className:"react-datepicker__today-button",onClick:function(e){return n.handleTodayButtonClick(e)}},n.props.todayButton)})),Te(n,"renderDefaultHeader",(function(e){var t=e.monthDate,r=e.i;return de.default.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(t),de.default.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(0!==r),n.renderMonthYearDropdown(0!==r),n.renderYearDropdown(0!==r)),de.default.createElement("div",{className:"react-datepicker__day-names"},n.header(t)))})),Te(n,"renderCustomHeader",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.monthDate,r=e.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var i=ut(n.state.date,n.props),o=dt(n.state.date,n.props),s=pt(n.state.date,n.props),a=ht(n.state.date,n.props),c=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return de.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},n.props.renderCustomHeader(ve(ve({},n.state),{},{customHeaderCount:r,monthDate:t,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:i,nextMonthButtonDisabled:o,prevYearButtonDisabled:s,nextYearButtonDisabled:a})),c&&de.default.createElement("div",{className:"react-datepicker__day-names"},n.header(t)))})),Te(n,"renderYearHeader",(function(e){var t=e.monthDate,r=n.props,i=r.showYearPicker,o=_t(t,r.yearItemNumber),s=o.startPeriod,a=o.endPeriod;return de.default.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},i?"".concat(s," - ").concat(a):C.getYear(t))})),Te(n,"renderHeader",(function(e){switch(!0){case void 0!==n.props.renderCustomHeader:return n.renderCustomHeader(e);case n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker:return n.renderYearHeader(e);default:return n.renderDefaultHeader(e)}})),Te(n,"renderMonths",(function(){var e;if(!n.props.showTimeSelectOnly&&!n.props.showYearPicker){for(var t=[],r=n.props.showPreviousMonths?n.props.monthsShown-1:0,i=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?h.addYears(n.state.date,r):g.subMonths(n.state.date,r),o=null!==(e=n.props.monthSelectedIn)&&void 0!==e?e:r,s=0;s<n.props.monthsShown;++s){var a=s-o+r,c=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?h.addYears(i,a):d.addMonths(i,a),l="month-".concat(s),u=s<n.props.monthsShown-1,p=s>0;t.push(de.default.createElement("div",{key:l,ref:function(e){n.monthContainer=e},className:"react-datepicker__month-container"},n.renderHeader({monthDate:c,i:s}),de.default.createElement(Gt,{chooseDayAriaLabelPrefix:n.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:n.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:n.props.weekAriaLabelPrefix,ariaLabelPrefix:n.props.monthAriaLabelPrefix,onChange:n.changeMonthYear,day:c,dayClassName:n.props.dayClassName,calendarStartDay:n.props.calendarStartDay,monthClassName:n.props.monthClassName,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,usePointerEvent:n.props.usePointerEvent,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,onWeekSelect:n.props.onWeekSelect,orderInDisplay:s,formatWeekNumber:n.props.formatWeekNumber,locale:n.props.locale,minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,highlightDates:n.props.highlightDates,holidays:n.props.holidays,selectingDate:n.state.selectingDate,includeDates:n.props.includeDates,includeDateIntervals:n.props.includeDateIntervals,inline:n.props.inline,shouldFocusDayInline:n.props.shouldFocusDayInline,fixedHeight:n.props.fixedHeight,filterDate:n.props.filterDate,preSelection:n.props.preSelection,setPreSelection:n.props.setPreSelection,selected:n.props.selected,selectsStart:n.props.selectsStart,selectsEnd:n.props.selectsEnd,selectsRange:n.props.selectsRange,selectsDisabledDaysInRange:n.props.selectsDisabledDaysInRange,selectsMultiple:n.props.selectsMultiple,selectedDates:n.props.selectedDates,showWeekNumbers:n.props.showWeekNumbers,startDate:n.props.startDate,endDate:n.props.endDate,peekNextMonth:n.props.peekNextMonth,setOpen:n.props.setOpen,shouldCloseOnSelect:n.props.shouldCloseOnSelect,renderDayContents:n.props.renderDayContents,renderMonthContent:n.props.renderMonthContent,renderQuarterContent:n.props.renderQuarterContent,renderYearContent:n.props.renderYearContent,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,showMonthYearPicker:n.props.showMonthYearPicker,showFullMonthYearPicker:n.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:n.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:n.props.showFourColumnMonthYearPicker,showYearPicker:n.props.showYearPicker,showQuarterYearPicker:n.props.showQuarterYearPicker,showWeekPicker:n.props.showWeekPicker,isInputFocused:n.props.isInputFocused,containerRef:n.containerRef,monthShowsDuplicateDaysEnd:u,monthShowsDuplicateDaysStart:p})))}return t}})),Te(n,"renderYears",(function(){if(!n.props.showTimeSelectOnly)return n.props.showYearPicker?de.default.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),de.default.createElement(Yt,Ie({onDayClick:n.handleDayClick,selectingDate:n.state.selectingDate,clearSelectingDate:n.clearSelectingDate,date:n.state.date},n.props,{onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave}))):void 0})),Te(n,"renderTimeSection",(function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return de.default.createElement(Wt,{selected:n.props.selected,openToDate:n.props.openToDate,onChange:n.props.onTimeChange,timeClassName:n.props.timeClassName,format:n.props.timeFormat,includeTimes:n.props.includeTimes,intervals:n.props.timeIntervals,minTime:n.props.minTime,maxTime:n.props.maxTime,excludeTimes:n.props.excludeTimes,filterTime:n.props.filterTime,timeCaption:n.props.timeCaption,todayButton:n.props.todayButton,showMonthDropdown:n.props.showMonthDropdown,showMonthYearDropdown:n.props.showMonthYearDropdown,showYearDropdown:n.props.showYearDropdown,withPortal:n.props.withPortal,monthRef:n.state.monthContainer,injectTimes:n.props.injectTimes,locale:n.props.locale,handleOnKeyDown:n.props.handleOnKeyDown,showTimeSelectOnly:n.props.showTimeSelectOnly})})),Te(n,"renderInputTimeSection",(function(){var e=new Date(n.props.selected),t=ke(e)&&Boolean(n.props.selected)?"".concat(Et(e.getHours()),":").concat(Et(e.getMinutes())):"";if(n.props.showTimeInput)return de.default.createElement(qt,{date:e,timeString:t,timeInputLabel:n.props.timeInputLabel,onChange:n.props.onTimeChange,customTimeInput:n.props.customTimeInput})})),Te(n,"renderAriaLiveRegion",(function(){var e,t=_t(n.state.date,n.props.yearItemNumber),r=t.startPeriod,i=t.endPeriod;return e=n.props.showYearPicker?"".concat(r," - ").concat(i):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?C.getYear(n.state.date):"".concat(Je(N.getMonth(n.state.date),n.props.locale)," ").concat(C.getYear(n.state.date)),de.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&e)})),Te(n,"renderChildren",(function(){if(n.props.children)return de.default.createElement("div",{className:"react-datepicker__children-container"},n.props.children)})),n.containerRef=de.default.createRef(),n.state={date:n.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},n}return Ne(t,e),Se(t,[{key:"componentDidMount",value:function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=void e.setState({monthContainer:e.monthContainer}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(!this.props.preSelection||We(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn)this.props.openToDate&&!We(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate});else{var n=!He(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},(function(){return n&&t.handleCustomMonthChange(t.state.date)}))}}},{key:"render",value:function(){var e=this.props.container||Kt;return de.default.createElement("div",{style:{display:"contents"},ref:this.containerRef},de.default.createElement(e,{className:r.clsx("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:Re}}}])}(de.default.Component),Zt=function(e){var t=e.icon,n=e.className,r=void 0===n?"":n,i=e.onClick,o="react-datepicker__calendar-icon";return de.default.isValidElement(t)?de.default.cloneElement(t,{className:"".concat(t.props.className||""," ").concat(o," ").concat(r),onClick:function(e){"function"==typeof t.props.onClick&&t.props.onClick(e),"function"==typeof i&&i(e)}}):"string"==typeof t?de.default.createElement("i",{className:"".concat(o," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:i}):de.default.createElement("svg",{className:"".concat(o," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},de.default.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},$t=function(e){function t(e){var n;return _e(this,t),(n=fe(this,t,[e])).el=document.createElement("div"),n}return Ne(t,e),Se(t,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return he.default.createPortal(this.props.children,this.el)}}])}(de.default.Component),en=function(e){return!e.disabled&&-1!==e.tabIndex},tn=function(e){function t(e){var n;return _e(this,t),Te(n=fe(this,t,[e]),"getTabChildren",(function(){return Array.prototype.slice.call(n.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(en)})),Te(n,"handleFocusStart",(function(){var e=n.getTabChildren();e&&e.length>1&&e[e.length-1].focus()})),Te(n,"handleFocusEnd",(function(){var e=n.getTabChildren();e&&e.length>1&&e[0].focus()})),n.tabLoopRef=de.default.createRef(),n}return Ne(t,e),Se(t,[{key:"render",value:function(){return this.props.enableTabLoop?de.default.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},de.default.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,de.default.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}])}(de.default.Component),nn=function(e){function t(){return _e(this,t),fe(this,t,arguments)}return Ne(t,e),Se(t,[{key:"render",value:function(){var e,t=this.props,n=t.className,i=t.wrapperClassName,o=t.hidePopper,s=t.popperComponent,a=t.targetComponent,c=t.enableTabLoop,l=t.popperOnKeyDown,u=t.portalId,d=t.portalHost,p=t.popperProps,h=t.showArrow;if(!o){var f=r.clsx("react-datepicker-popper",n);e=de.default.createElement(tn,{enableTabLoop:c},de.default.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:f,"data-placement":p.placement,onKeyDown:l},s,h&&de.default.createElement(ce.FloatingArrow,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(e=de.default.createElement(this.props.popperContainer,{},e)),u&&!o&&(e=de.default.createElement($t,{portalId:u,portalHost:d},e));var m=r.clsx("react-datepicker-wrapper",i);return de.default.createElement(de.default.Fragment,null,de.default.createElement("div",{ref:p.refs.setReference,className:m},a),e)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0}}}])}(de.default.Component),rn=(Qt=nn,function(e){var t=ve(ve({},e),{},{popperModifiers:e.popperModifiers||[],popperProps:e.popperProps||{},hidePopper:"boolean"!=typeof e.hidePopper||e.hidePopper}),n=de.default.useRef(),r=ce.useFloating(ve({open:!t.hidePopper,whileElementsMounted:ce.autoUpdate,placement:t.popperPlacement,middleware:[ce.flip({padding:15}),ce.offset(10),ce.arrow({element:n})].concat(Oe(t.popperModifiers))},t.popperProps));return de.default.createElement(Qt,Ie({},t,{popperProps:ve(ve({},r),{},{arrowRef:n})}))}),on="react-datepicker-ignore-onclickoutside",sn=pe.default(Xt),an="Date input not valid.",cn=function(e){function t(e){var n;return _e(this,t),Te(n=fe(this,t,[e]),"getPreSelection",(function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:De()})),Te(n,"modifyHolidays",(function(){var e;return null===(e=n.props.holidays)||void 0===e?void 0:e.reduce((function(e,t){var n=new Date(t.date);return o.isValid(n)?[].concat(Oe(e),[ve(ve({},t),{},{date:n})]):e}),[])})),Te(n,"calcInitialState",(function(){var e,t=n.getPreSelection(),r=ft(n.props),i=mt(n.props),o=r&&te.isBefore(t,z.startOfDay(r))?r:i&&ee.isAfter(t,W.endOfDay(i))?i:t;return{open:n.props.startOpen||!1,preventFocus:!1,preSelection:null!==(e=n.props.selectsRange?n.props.startDate:n.props.selected)&&void 0!==e?e:o,highlightDates:gt(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}})),Te(n,"clearPreventFocusTimeout",(function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)})),Te(n,"setFocus",(function(){n.input&&n.input.focus&&n.input.focus({preventScroll:!0})})),Te(n,"setBlur",(function(){n.input&&n.input.blur&&n.input.blur(),n.cancelFocusInput()})),Te(n,"setOpen",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.setState({open:e,preSelection:e&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:un},(function(){e||n.setState((function(e){return{focused:!!t&&e.focused}}),(function(){!t&&n.setBlur(),n.setState({inputValue:null})}))}))})),Te(n,"inputOk",(function(){return i.isDate(n.state.preSelection)})),Te(n,"isCalendarOpen",(function(){return void 0===n.props.open?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open})),Te(n,"handleFocus",(function(e){n.state.preventFocus||(n.props.onFocus(e),n.props.preventOpenOnFocus||n.props.readOnly||n.setOpen(!0)),n.setState({focused:!0})})),Te(n,"sendFocusBackToInput",(function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},(function(){n.preventFocusTimeout=setTimeout((function(){n.setFocus(),n.setState({preventFocus:!1})}))}))})),Te(n,"cancelFocusInput",(function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=null})),Te(n,"deferFocusInput",(function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout((function(){return n.setFocus()}),1)})),Te(n,"handleDropdownFocus",(function(){n.cancelFocusInput()})),Te(n,"handleBlur",(function(e){(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&n.props.onBlur(e),n.setState({focused:!1})})),Te(n,"handleCalendarClickOutside",(function(e){n.props.inline||n.setOpen(!1),n.props.onClickOutside(e),n.props.withPortal&&e.preventDefault()})),Te(n,"handleChange",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(!n.props.onChangeRaw||(n.props.onChangeRaw.apply(n,t),"function"==typeof i.isDefaultPrevented&&!i.isDefaultPrevented())){n.setState({inputValue:i.target.value,lastPreSelectChange:ln});var o,a,c,l,u,d,p,h,f=(o=i.target.value,a=n.props.dateFormat,c=n.props.locale,l=n.props.strictParsing,u=n.props.minDate,d=null,p=Qe(c)||Qe(Ke()),h=!0,Array.isArray(a)?(a.forEach((function(e){var t=ie.parse(o,e,new Date,{locale:p,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});l&&(h=ke(t,u)&&o===xe(t,e,c)),ke(t,u)&&h&&(d=t)})),d):(d=ie.parse(o,a,new Date,{locale:p,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),l?h=ke(d)&&o===xe(d,a,c):ke(d)||(a=a.match(Me).map((function(e){var t=e[0];if("p"===t||"P"===t){var n=s.longFormatters[t];return p?n(e,p.formatLong):t}return e})).join(""),o.length>0&&(d=ie.parse(o,a.slice(0,o.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),ke(d)||(d=new Date(o))),ke(d)&&h?d:null));n.props.showTimeSelectOnly&&n.props.selected&&f&&!We(f,n.props.selected)&&(f=le.set(n.props.selected,{hours:b.getHours(f),minutes:_.getMinutes(f),seconds:E.getSeconds(f)})),!f&&i.target.value||n.setSelected(f,i,!0)}})),Te(n,"handleSelect",(function(e,t,r){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(t),n.setSelected(e,t,!1,r),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(e);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var i=n.props,o=i.startDate,s=i.endDate;!o||s||Tt(e,o)||n.setOpen(!1)}})),Te(n,"setSelected",(function(e,t,r,i){var o=e;if(n.props.showYearPicker){if(null!==o&&it(C.getYear(o),n.props))return}else if(n.props.showMonthYearPicker){if(null!==o&&et(o,n.props))return}else if(null!==o&&Ze(o,n.props))return;var s=n.props,a=s.onChange,c=s.selectsRange,l=s.startDate,u=s.endDate,d=s.selectsMultiple,p=s.selectedDates,h=s.minTime;if(!Ye(n.props.selected,o)||n.props.allowSameDay||c||d)if(null!==o&&(!n.props.selected||r&&(n.props.showTimeSelect||n.props.showTimeSelectOnly||n.props.showTimeInput)||(o=Pe(o,{hour:b.getHours(n.props.selected),minute:_.getMinutes(n.props.selected),second:E.getSeconds(n.props.selected)})),r||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly||h&&(o=Pe(o,{hour:h.getHours(),minute:h.getMinutes(),second:h.getSeconds()})),n.props.inline||n.setState({preSelection:o}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:i})),c){var f=l&&u;l||u?l&&!u&&(null===o?a([null,null],t):Tt(o,l)?a([o,null],t):a([l,o],t)):a([o,null],t),f&&a([o,null],t)}else d?null!=p&&p.length?p.some((function(e){return We(e,o)}))?a(p.filter((function(e){return!We(e,o)})),t):a([].concat(Oe(p),[o]),t):a([o],t):a(o,t);r||(n.props.onSelect(o,t),n.setState({inputValue:null}))})),Te(n,"setPreSelection",(function(e){var t=void 0!==n.props.minDate,r=void 0!==n.props.maxDate,i=!0;if(e){var o=z.startOfDay(e);if(t&&r)i=qe(e,n.props.minDate,n.props.maxDate);else if(t){var s=z.startOfDay(n.props.minDate);i=ee.isAfter(e,s)||Ye(o,s)}else if(r){var a=W.endOfDay(n.props.maxDate);i=te.isBefore(e,a)||Ye(o,a)}}i&&n.setState({preSelection:e})})),Te(n,"toggleCalendar",(function(){n.setOpen(!n.state.open)})),Te(n,"handleTimeChange",(function(e){var t=n.props.selected?n.props.selected:n.getPreSelection(),r=n.props.selected?e:Pe(t,{hour:b.getHours(e),minute:_.getMinutes(e)});n.setState({preSelection:r}),n.props.onChange(r),n.props.shouldCloseOnSelect&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})})),Te(n,"onInputClick",(function(){n.props.disabled||n.props.readOnly||n.setOpen(!0),n.props.onInputClick()})),Te(n,"onInputKeyDown",(function(e){n.props.onKeyDown(e);var t=e.key;if(n.state.open||n.props.inline||n.props.preventOpenOnFocus){if(n.state.open){if("ArrowDown"===t||"ArrowUp"===t){e.preventDefault();var r=n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',i=n.calendar.componentNode&&n.calendar.componentNode.querySelector(r);return void(i&&i.focus({preventScroll:!0}))}var o=De(n.state.preSelection);"Enter"===t?(e.preventDefault(),n.inputOk()&&n.state.lastPreSelectChange===un?(n.handleSelect(o,e),!n.props.shouldCloseOnSelect&&n.setPreSelection(o)):n.setOpen(!1)):"Escape"===t?(e.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1)):"Tab"===t&&n.setOpen(!1),n.inputOk()||n.props.onInputError({code:1,msg:an})}}else"ArrowDown"!==t&&"ArrowUp"!==t&&"Enter"!==t||n.onInputClick()})),Te(n,"onPortalKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),n.setState({preventFocus:!0},(function(){n.setOpen(!1),setTimeout((function(){n.setFocus(),n.setState({preventFocus:!1})}))})))})),Te(n,"onDayKeyDown",(function(e){n.props.onKeyDown(e);var t,r=e.key,i=e.shiftKey,o=De(n.state.preSelection);if("Enter"===r)e.preventDefault(),n.handleSelect(o,e),!n.props.shouldCloseOnSelect&&n.setPreSelection(o);else if("Escape"===r)e.preventDefault(),n.setOpen(!1),n.inputOk()||n.props.onInputError({code:1,msg:an});else if(!n.props.disabledKeyboardNavigation){var s;switch(r){case"ArrowLeft":s=n.props.showWeekPicker?m.subWeeks(o,1):f.subDays(o,1);break;case"ArrowRight":s=n.props.showWeekPicker?u.addWeeks(o,1):l.addDays(o,1);break;case"ArrowUp":s=m.subWeeks(o,1);break;case"ArrowDown":s=u.addWeeks(o,1);break;case"PageUp":s=i?y.subYears(o,1):g.subMonths(o,1);break;case"PageDown":s=i?h.addYears(o,1):d.addMonths(o,1);break;case"Home":s=je(o,n.props.locale,n.props.calendarStartDay);break;case"End":t=o,s=Y.endOfWeek(t);break;default:s=null}if(!s)return void(n.props.onInputError&&n.props.onInputError({code:1,msg:an}));if(e.preventDefault(),n.setState({lastPreSelectChange:un}),n.props.adjustDateOnChange&&n.setSelected(s),n.setPreSelection(s),n.props.inline){var a=N.getMonth(o),c=N.getMonth(s),p=C.getYear(o),v=C.getYear(s);a!==c||p!==v?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}})),Te(n,"onPopperKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),n.sendFocusBackToInput())})),Te(n,"onClearClick",(function(e){e&&e.preventDefault&&e.preventDefault(),n.sendFocusBackToInput(),n.props.selectsRange?n.props.onChange([null,null],e):n.props.onChange(null,e),n.setState({inputValue:null})})),Te(n,"clear",(function(){n.onClearClick()})),Te(n,"onScroll",(function(e){"boolean"==typeof n.props.closeOnScroll&&n.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||n.setOpen(!1):"function"==typeof n.props.closeOnScroll&&n.props.closeOnScroll(e)&&n.setOpen(!1)})),Te(n,"renderCalendar",(function(){return n.props.inline||n.isCalendarOpen()?de.default.createElement(sn,{ref:function(e){n.calendar=e},locale:n.props.locale,calendarStartDay:n.props.calendarStartDay,chooseDayAriaLabelPrefix:n.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:n.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:n.props.weekAriaLabelPrefix,monthAriaLabelPrefix:n.props.monthAriaLabelPrefix,adjustDateOnChange:n.props.adjustDateOnChange,setOpen:n.setOpen,shouldCloseOnSelect:n.props.shouldCloseOnSelect,dateFormat:n.props.dateFormatCalendar,useWeekdaysShort:n.props.useWeekdaysShort,formatWeekDay:n.props.formatWeekDay,dropdownMode:n.props.dropdownMode,selected:n.props.selected,preSelection:n.state.preSelection,onSelect:n.handleSelect,onWeekSelect:n.props.onWeekSelect,openToDate:n.props.openToDate,minDate:n.props.minDate,maxDate:n.props.maxDate,selectsStart:n.props.selectsStart,selectsEnd:n.props.selectsEnd,selectsRange:n.props.selectsRange,selectsMultiple:n.props.selectsMultiple,selectedDates:n.props.selectedDates,startDate:n.props.startDate,endDate:n.props.endDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,filterDate:n.props.filterDate,onClickOutside:n.handleCalendarClickOutside,formatWeekNumber:n.props.formatWeekNumber,highlightDates:n.state.highlightDates,holidays:vt(n.modifyHolidays()),includeDates:n.props.includeDates,includeDateIntervals:n.props.includeDateIntervals,includeTimes:n.props.includeTimes,injectTimes:n.props.injectTimes,inline:n.props.inline,shouldFocusDayInline:n.state.shouldFocusDayInline,peekNextMonth:n.props.peekNextMonth,showMonthDropdown:n.props.showMonthDropdown,showPreviousMonths:n.props.showPreviousMonths,useShortMonthInDropdown:n.props.useShortMonthInDropdown,showMonthYearDropdown:n.props.showMonthYearDropdown,showWeekNumbers:n.props.showWeekNumbers,showYearDropdown:n.props.showYearDropdown,withPortal:n.props.withPortal,forceShowMonthNavigation:n.props.forceShowMonthNavigation,showDisabledMonthNavigation:n.props.showDisabledMonthNavigation,scrollableYearDropdown:n.props.scrollableYearDropdown,scrollableMonthYearDropdown:n.props.scrollableMonthYearDropdown,todayButton:n.props.todayButton,weekLabel:n.props.weekLabel,outsideClickIgnoreClass:on,fixedHeight:n.props.fixedHeight,monthsShown:n.props.monthsShown,monthSelectedIn:n.state.monthSelectedIn,onDropdownFocus:n.handleDropdownFocus,onMonthChange:n.props.onMonthChange,onYearChange:n.props.onYearChange,dayClassName:n.props.dayClassName,weekDayClassName:n.props.weekDayClassName,monthClassName:n.props.monthClassName,timeClassName:n.props.timeClassName,showDateSelect:n.props.showDateSelect,showTimeSelect:n.props.showTimeSelect,showTimeSelectOnly:n.props.showTimeSelectOnly,onTimeChange:n.handleTimeChange,timeFormat:n.props.timeFormat,timeIntervals:n.props.timeIntervals,minTime:n.props.minTime,maxTime:n.props.maxTime,excludeTimes:n.props.excludeTimes,filterTime:n.props.filterTime,timeCaption:n.props.timeCaption,className:n.props.calendarClassName,container:n.props.calendarContainer,yearItemNumber:n.props.yearItemNumber,yearDropdownItemNumber:n.props.yearDropdownItemNumber,previousMonthAriaLabel:n.props.previousMonthAriaLabel,previousMonthButtonLabel:n.props.previousMonthButtonLabel,nextMonthAriaLabel:n.props.nextMonthAriaLabel,nextMonthButtonLabel:n.props.nextMonthButtonLabel,previousYearAriaLabel:n.props.previousYearAriaLabel,previousYearButtonLabel:n.props.previousYearButtonLabel,nextYearAriaLabel:n.props.nextYearAriaLabel,nextYearButtonLabel:n.props.nextYearButtonLabel,timeInputLabel:n.props.timeInputLabel,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,renderCustomHeader:n.props.renderCustomHeader,popperProps:n.props.popperProps,renderDayContents:n.props.renderDayContents,renderMonthContent:n.props.renderMonthContent,renderQuarterContent:n.props.renderQuarterContent,renderYearContent:n.props.renderYearContent,onDayMouseEnter:n.props.onDayMouseEnter,onMonthMouseLeave:n.props.onMonthMouseLeave,onYearMouseEnter:n.props.onYearMouseEnter,onYearMouseLeave:n.props.onYearMouseLeave,selectsDisabledDaysInRange:n.props.selectsDisabledDaysInRange,showTimeInput:n.props.showTimeInput,showMonthYearPicker:n.props.showMonthYearPicker,showFullMonthYearPicker:n.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:n.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:n.props.showFourColumnMonthYearPicker,showYearPicker:n.props.showYearPicker,showQuarterYearPicker:n.props.showQuarterYearPicker,showWeekPicker:n.props.showWeekPicker,excludeScrollbar:n.props.excludeScrollbar,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,isInputFocused:n.state.focused,customTimeInput:n.props.customTimeInput,setPreSelection:n.setPreSelection,usePointerEvent:n.props.usePointerEvent,yearClassName:n.props.yearClassName},n.props.children):null})),Te(n,"renderAriaLiveRegion",(function(){var e,t=n.props,r=t.dateFormat,i=t.locale,o=n.props.showTimeInput||n.props.showTimeSelect?"PPPPp":"PPPP";return e=n.props.selectsRange?"Selected start date: ".concat(Le(n.props.startDate,{dateFormat:o,locale:i}),". ").concat(n.props.endDate?"End date: "+Le(n.props.endDate,{dateFormat:o,locale:i}):""):n.props.showTimeSelectOnly?"Selected time: ".concat(Le(n.props.selected,{dateFormat:r,locale:i})):n.props.showYearPicker?"Selected year: ".concat(Le(n.props.selected,{dateFormat:"yyyy",locale:i})):n.props.showMonthYearPicker?"Selected month: ".concat(Le(n.props.selected,{dateFormat:"MMMM yyyy",locale:i})):n.props.showQuarterYearPicker?"Selected quarter: ".concat(Le(n.props.selected,{dateFormat:"yyyy, QQQ",locale:i})):"Selected date: ".concat(Le(n.props.selected,{dateFormat:o,locale:i})),de.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},e)})),Te(n,"renderDateInput",(function(){var e,t=r.clsx(n.props.className,Te({},on,n.state.open)),i=n.props.customInput||de.default.createElement("input",{type:"text"}),o=n.props.customInputRef||"ref",s="string"==typeof n.props.value?n.props.value:"string"==typeof n.state.inputValue?n.state.inputValue:n.props.selectsRange?function(e,t,n){if(!e)return"";var r=Le(e,n),i=t?Le(t,n):"";return"".concat(r," - ").concat(i)}(n.props.startDate,n.props.endDate,n.props):n.props.selectsMultiple?function(e,t){if(null==e||!e.length)return"";var n=Le(e[0],t);if(1===e.length)return n;if(2===e.length){var r=Le(e[1],t);return"".concat(n,", ").concat(r)}var i=e.length-1;return"".concat(n," (+").concat(i,")")}(n.props.selectedDates,n.props):Le(n.props.selected,n.props);return de.default.cloneElement(i,(Te(Te(Te(Te(Te(Te(Te(Te(Te(Te(e={},o,(function(e){n.input=e})),"value",s),"onBlur",n.handleBlur),"onChange",n.handleChange),"onClick",n.onInputClick),"onFocus",n.handleFocus),"onKeyDown",n.onInputKeyDown),"id",n.props.id),"name",n.props.name),"form",n.props.form),Te(Te(Te(Te(Te(Te(Te(Te(Te(Te(e,"autoFocus",n.props.autoFocus),"placeholder",n.props.placeholderText),"disabled",n.props.disabled),"autoComplete",n.props.autoComplete),"className",r.clsx(i.props.className,t)),"title",n.props.title),"readOnly",n.props.readOnly),"required",n.props.required),"tabIndex",n.props.tabIndex),"aria-describedby",n.props.ariaDescribedBy),Te(Te(Te(e,"aria-invalid",n.props.ariaInvalid),"aria-labelledby",n.props.ariaLabelledBy),"aria-required",n.props.ariaRequired)))})),Te(n,"renderClearButton",(function(){var e=n.props,t=e.isClearable,i=e.disabled,o=e.selected,s=e.startDate,a=e.endDate,c=e.clearButtonTitle,l=e.clearButtonClassName,u=void 0===l?"":l,d=e.ariaLabelClose,p=void 0===d?"Close":d,h=e.selectedDates;return t&&(null!=o||null!=s||null!=a||null!=h&&h.length)?de.default.createElement("button",{type:"button",className:r.clsx("react-datepicker__close-icon",u,{"react-datepicker__close-icon--disabled":i}),disabled:i,"aria-label":p,onClick:n.onClearClick,title:c,tabIndex:-1}):null})),n.state=n.calcInitialState(),n.preventFocusTimeout=null,n}return Ne(t,e),Se(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(e,t){var n,r;e.inline&&(n=e.selected,r=this.props.selected,n&&r?N.getMonth(n)!==N.getMonth(r)||C.getYear(n)!==C.getYear(r):n!==r)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:gt(this.props.highlightDates)}),t.focused||Ye(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&this.props.onCalendarOpen(),!0===t.open&&!1===this.state.open&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var e=this.props,t=e.showIcon,n=e.icon,r=e.calendarIconClassname,i=e.toggleCalendarOnIconClick,o=this.state.open;return de.default.createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&de.default.createElement(Zt,Ie({icon:n,className:"".concat(r," ").concat(o&&"react-datepicker-ignore-onclickoutside")},i?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?de.default.createElement(tn,{enableTabLoop:this.props.enableTabLoop},de.default.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=de.default.createElement($t,{portalId:this.props.portalId,portalHost:this.props.portalHost},t)),de.default.createElement("div",null,this.renderInputContainer(),t)}return de.default.createElement(rn,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:e,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop,showArrow:this.props.showPopperArrow})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Re,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}}}])}(de.default.Component),ln="input",un="navigate";e.CalendarContainer=Kt,e.default=cn,e.getDefaultLocale=Ke,e.registerLocale=function(e,t){var n="undefined"!=typeof window?window:globalThis;n.__localeData__||(n.__localeData__={}),n.__localeData__[e]=t},e.setDefaultLocale=function(e){("undefined"!=typeof window?window:globalThis).__localeId__=e},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(5043),n(5173),n(2949),n(1890),n(9858),n(4333),n(86),n(5608),n(8620),n(9994),n(4640),n(1634),n(709),n(3613),n(4357),n(6221),n(899),n(6198),n(2808),n(8667),n(5857),n(7600),n(5528),n(9871),n(8920),n(2918),n(309),n(7025),n(671),n(4503),n(3525),n(2844),n(3410),n(4521),n(1972),n(8442),n(3439),n(5575),n(9840),n(6191),n(9249),n(1619),n(1125),n(7332),n(2412),n(4016),n(8268),n(4889),n(6500),n(8444),n(8060),n(4265),n(8322),n(1882),n(4593),n(4148),n(5551),n(4251),n(3458),n(2547),n(7950),n(5552),n(3848))},2730:(t,n,r)=>{"use strict";var i=r(5043),o=r(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,c={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(c[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function E(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!p.call(m,e)||!p.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,E);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,E);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,E);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),T=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),O=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var x=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var j,U=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var c="\n"+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case T:return"Portal";case w:return"Profiler";case N:return"StrictMode";case R:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function $(e,t){Z(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,n):t.hasOwnProperty("defaultValue")&&te(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function te(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ne=Array.isArray;function re(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(ne(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ce(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ce(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,de,pe=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ie=null,Ne=null;function we(e){if(e=_i(e)){if("function"!==typeof Te)throw Error(s(280));var t=e.stateNode;t&&(t=Si(t),Te(e.stateNode,e.type,t))}}function Ce(e){Ie?Ne?Ne.push(e):Ne=[e]:Ie=e}function Oe(){if(Ie){var e=Ie,t=Ne;if(Ne=Ie=null,we(e),t)for(e=0;e<t.length;e++)we(t[e])}}function Ae(e,t){return e(t)}function Re(){}var Me=!1;function De(e,t,n){if(Me)return e(t,n);Me=!0;try{return Ae(e,t,n)}finally{Me=!1,(null!==Ie||null!==Ne)&&(Re(),Oe())}}function ke(e,t){var n=e.stateNode;if(null===n)return null;var r=Si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var xe=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){xe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){xe=!1}function Pe(e,t,n,r,i,o,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var je=!1,Ue=null,Fe=!1,ze=null,Be={onError:function(e){je=!0,Ue=e}};function Ve(e,t,n,r,i,o,s,a,c){je=!1,Ue=null,Pe.apply(Be,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(s(188))}function Ye(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=o.unstable_scheduleCallback,Qe=o.unstable_cancelCallback,Je=o.unstable_shouldYield,Xe=o.unstable_requestPaint,Ze=o.unstable_now,$e=o.unstable_getCurrentPriorityLevel,et=o.unstable_ImmediatePriority,tt=o.unstable_UserBlockingPriority,nt=o.unstable_NormalPriority,rt=o.unstable_LowPriority,it=o.unstable_IdlePriority,ot=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ct(e)/lt|0)|0},ct=Math.log,lt=Math.LN2;var ut=64,dt=4194304;function pt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=pt(a):0!==(o&=s)&&(r=pt(o))}else 0!==(s=n&~i)?r=pt(s):0!==o&&(r=pt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function Et(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,Tt,It,Nt,wt,Ct=!1,Ot=[],At=null,Rt=null,Mt=null,Dt=new Map,kt=new Map,xt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kt.delete(t.pointerId)}}function jt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&Tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=Ei(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void wt(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&Tt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Ct=!1,null!==At&&Ft(At)&&(At=null),null!==Rt&&Ft(Rt)&&(Rt=null),null!==Mt&&Ft(Mt)&&(Mt=null),Dt.forEach(zt),kt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bt)))}function Ht(e){function t(t){return Vt(t,e)}if(0<Ot.length){Vt(Ot[0],e);for(var n=1;n<Ot.length;n++){var r=Ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Vt(At,e),null!==Rt&&Vt(Rt,e),null!==Mt&&Vt(Mt,e),Dt.forEach(t),kt.forEach(t),n=0;n<xt.length;n++)(r=xt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<xt.length&&null===(n=xt[0]).blockedOn;)Ut(n),null===n.blockedOn&&xt.shift()}var Gt=b.ReactCurrentBatchConfig,Wt=!0;function Yt(e,t,n,r){var i=_t,o=Gt.transition;Gt.transition=null;try{_t=1,Kt(e,t,n,r)}finally{_t=i,Gt.transition=o}}function qt(e,t,n,r){var i=_t,o=Gt.transition;Gt.transition=null;try{_t=4,Kt(e,t,n,r)}finally{_t=i,Gt.transition=o}}function Kt(e,t,n,r){if(Wt){var i=Jt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=jt(At,e,t,n,r,i),!0;case"dragenter":return Rt=jt(Rt,e,t,n,r,i),!0;case"mouseover":return Mt=jt(Mt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Dt.set(o,jt(Dt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,kt.set(o,jt(kt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var o=_i(i);if(null!==o&&St(o),null===(o=Jt(e,t,n,r))&&Wr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=Ei(e=Se(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case et:return 1;case tt:return 4;case nt:case rt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Zt=null,$t=null,en=null;function tn(){if(en)return en;var e,t,n=$t,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function on(){return!1}function sn(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:on,this.isPropagationStopped=on,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var an,cn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(un),pn=U({},un,{view:0,detail:0}),hn=sn(pn),fn=U({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,cn=e.screenY-ln.screenY):cn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),mn=sn(fn),gn=sn(U({},fn,{dataTransfer:0})),vn=sn(U({},pn,{relatedTarget:0})),yn=sn(U({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),En=U({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(En),bn=sn(U({},un,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function wn(){return Nn}var Cn=U({},pn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),On=sn(Cn),An=sn(U({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=sn(U({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),Mn=sn(U({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=U({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kn=sn(Dn),xn=[9,13,27,32],Ln=d&&"CompositionEvent"in window,Pn=null;d&&"documentMode"in document&&(Pn=document.documentMode);var jn=d&&"TextEvent"in window&&!Pn,Un=d&&(!Ln||Pn&&8<Pn&&11>=Pn),Fn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Yn(e,t,n,r){Ce(r),0<(t=qr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Qn(e){Fr(e,0)}function Jn(e){if(K(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Zn=!1;if(d){var $n;if(d){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}$n=er}else $n=!1;Zn=$n&&(!document.documentMode||9<document.documentMode)}function nr(){qn&&(qn.detachEvent("onpropertychange",rr),Kn=qn=null)}function rr(e){if("value"===e.propertyName&&Jn(Kn)){var t=[];Yn(t,Kn,e,Se(e)),De(Qn,t)}}function ir(e,t,n){"focusin"===e?(nr(),Kn=n,(qn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Kn)}function sr(e,t){if("click"===e)return Jn(t)}function ar(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!p.call(t,i)||!cr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&pr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=dr(n,o);var s=dr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=d&&"documentMode"in document&&11>=document.documentMode,vr=null,yr=null,Er=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==vr||vr!==Q(r)||("selectionStart"in(r=vr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Er&&lr(Er,r)||(Er=r,0<(r=qr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tr={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},Ir={},Nr={};function wr(e){if(Ir[e])return Ir[e];if(!Tr[e])return e;var t,n=Tr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return Ir[e]=n[t];return e}d&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);var Cr=wr("animationend"),Or=wr("animationiteration"),Ar=wr("animationstart"),Rr=wr("transitionend"),Mr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){Mr.set(e,t),l(t,[e])}for(var xr=0;xr<Dr.length;xr++){var Lr=Dr[xr];kr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}kr(Cr,"onAnimationEnd"),kr(Or,"onAnimationIteration"),kr(Ar,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(Rr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,l){if(Ve.apply(this,arguments),je){if(!je)throw Error(s(198));var u=Ue;je=!1,Ue=null,Fe||(Fe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;Ur(i,a,l),o=c}else for(s=0;s<r.length;s++){if(c=(a=r[s]).instance,l=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;Ur(i,a,l),o=c}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Vr]){e[Vr]=!0,a.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Xt(t)){case 1:var i=Yt;break;case 4:i=qt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!xe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=Ei(a)))return;if(5===(c=s.tag)||6===c){r=o=s;continue e}a=a.parentNode}}r=r.return}De((function(){var r=o,i=Se(n),s=[];e:{var a=Mr.get(e);if(void 0!==a){var c=dn,l=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":c=On;break;case"focusin":l="focus",c=vn;break;case"focusout":l="blur",c=vn;break;case"beforeblur":case"afterblur":c=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Rn;break;case Cr:case Or:case Ar:c=yn;break;case Rr:c=Mn;break;case"scroll":c=hn;break;case"wheel":c=kn;break;case"copy":case"cut":case"paste":c=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=An}var u=0!==(4&t),d=!u&&"scroll"===e,p=u?null!==a?a+"Capture":null:a;u=[];for(var h,f=r;null!==f;){var m=(h=f).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==p&&(null!=(m=ke(f,p))&&u.push(Yr(f,m,h)))),d)break;f=f.return}0<u.length&&(a=new c(a,l,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!Ei(l)&&!l[mi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?Ei(l):null)&&(l!==(d=He(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=mn,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",p="onPointerEnter",f="pointer"),d=null==c?a:bi(c),h=null==l?a:bi(l),(a=new u(m,f+"leave",c,n,i)).target=d,a.relatedTarget=h,m=null,Ei(i)===r&&((u=new u(p,f+"enter",l,n,i)).target=h,u.relatedTarget=d,m=u),d=m,c&&l)e:{for(p=l,f=0,h=u=c;h;h=Kr(h))f++;for(h=0,m=p;m;m=Kr(m))h++;for(;0<f-h;)u=Kr(u),f--;for(;0<h-f;)p=Kr(p),h--;for(;f--;){if(u===p||null!==p&&u===p.alternate)break e;u=Kr(u),p=Kr(p)}u=null}else u=null;null!==c&&Qr(s,a,c,u,!1),null!==l&&null!==d&&Qr(s,d,l,u,!0)}if("select"===(c=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Xn;else if(Wn(a))if(Zn)g=ar;else{g=or;var v=ir}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Yn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&te(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(vr=v,yr=r,Er=null);break;case"focusout":Er=yr=vr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(s,n,i)}var y;if(Ln)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Hn?Bn(e,n)&&(E="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(E="onCompositionStart");E&&(Un&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==E?"onCompositionEnd"===E&&Hn&&(y=tn()):($t="value"in(Zt=i)?Zt.value:Zt.textContent,Hn=!0)),0<(v=qr(r,E)).length&&(E=new bn(E,e,null,n,i),s.push({event:E,listeners:v}),y?E.data=y:null!==(y=Vn(n))&&(E.data=y))),(y=jn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Ln&&Bn(e,t)?(e=tn(),en=$t=Zt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Fr(s,t)}))}function Yr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=ke(e,n))&&r.unshift(Yr(e,o,i)),null!=(o=ke(e,t))&&r.push(Yr(e,o,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=ke(n,o))&&s.unshift(Yr(n,c,a)):i||null!=(c=ke(n,o))&&s.push(Yr(n,c,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Jr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(s(425))}function ei(){}var ti=null,ni=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,oi="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ci)}:ii;function ci(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ht(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var pi=Math.random().toString(36).slice(2),hi="__reactFiber$"+pi,fi="__reactProps$"+pi,mi="__reactContainer$"+pi,gi="__reactEvents$"+pi,vi="__reactListeners$"+pi,yi="__reactHandles$"+pi;function Ei(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[hi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[hi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Si(e){return e[fi]||null}var Ti=[],Ii=-1;function Ni(e){return{current:e}}function wi(e){0>Ii||(e.current=Ti[Ii],Ti[Ii]=null,Ii--)}function Ci(e,t){Ii++,Ti[Ii]=e.current,e.current=t}var Oi={},Ai=Ni(Oi),Ri=Ni(!1),Mi=Oi;function Di(e,t){var n=e.type.contextTypes;if(!n)return Oi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ki(e){return null!==(e=e.childContextTypes)&&void 0!==e}function xi(){wi(Ri),wi(Ai)}function Li(e,t,n){if(Ai.current!==Oi)throw Error(s(168));Ci(Ai,t),Ci(Ri,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,G(e)||"Unknown",i));return U({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oi,Mi=Ai.current,Ci(Ai,e),Ci(Ri,Ri.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Pi(e,t,Mi),r.__reactInternalMemoizedMergedChildContext=e,wi(Ri),wi(Ai),Ci(Ai,e)):wi(Ri),Ci(Ri,n)}var Fi=null,zi=!1,Bi=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function Hi(){if(!Bi&&null!==Fi){Bi=!0;var t=0,n=_t;try{var r=Fi;for(_t=1;t<r.length;t++){var i=r[t];do{i=i(!0)}while(null!==i)}Fi=null,zi=!1}catch(e){throw null!==Fi&&(Fi=Fi.slice(t+1)),Ke(et,Hi),e}finally{_t=n,Bi=!1}}return null}var Gi=[],Wi=0,Yi=null,qi=0,Ki=[],Qi=0,Ji=null,Xi=1,Zi="";function $i(e,t){Gi[Wi++]=qi,Gi[Wi++]=Yi,Yi=e,qi=t}function eo(e,t,n){Ki[Qi++]=Xi,Ki[Qi++]=Zi,Ki[Qi++]=Ji,Ji=e;var r=Xi;e=Zi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Xi=1<<32-at(t)+i|n<<i|r,Zi=o+e}else Xi=1<<o|n<<i|r,Zi=e}function to(e){null!==e.return&&($i(e,1),eo(e,1,0))}function no(e){for(;e===Yi;)Yi=Gi[--Wi],Gi[Wi]=null,qi=Gi[--Wi],Gi[Wi]=null;for(;e===Ji;)Ji=Ki[--Qi],Ki[Qi]=null,Zi=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null}var ro=null,io=null,oo=!1,so=null;function ao(e,t){var n=kl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function co(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ro=e,io=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ro=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Xi,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=kl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ro=e,io=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(oo){var t=io;if(t){var n=t;if(!co(e,t)){if(lo(e))throw Error(s(418));t=ui(n.nextSibling);var r=ro;t&&co(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,oo=!1,ro=e)}}else{if(lo(e))throw Error(s(418));e.flags=-4097&e.flags|2,oo=!1,ro=e}}}function po(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ro=e}function ho(e){if(e!==ro)return!1;if(!oo)return po(e),oo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw fo(),Error(s(418));for(;t;)ao(e,t),t=ui(t.nextSibling)}if(po(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=ro?ui(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=io;e;)e=ui(e.nextSibling)}function mo(){io=ro=null,oo=!1}function go(e){null===so?so=[e]:so.push(e)}var vo=b.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Eo=Ni(null),_o=null,bo=null,So=null;function To(){So=bo=_o=null}function Io(e){var t=Eo.current;wi(Eo),e._currentValue=t}function No(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wo(e,t){_o=e,So=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===_o)throw Error(s(308));bo=e,_o.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var Oo=null;function Ao(e){null===Oo?Oo=[e]:Oo.push(e)}function Ro(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ao(t)):(n.next=i.next,i.next=n),t.interleaved=n,Mo(e,r)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Do=!1;function ko(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Po(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Rc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Mo(e,n)}return null===(i=r.interleaved)?(t.next=t,Ao(r)):(t.next=i.next,i.next=t),r.interleaved=t,Mo(e,n)}function jo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Et(e,n)}}function Uo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fo(e,t,n,r){var i=e.updateQueue;Do=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==o){var d=i.baseState;for(s=0,u=l=c=null,a=o;;){var p=a.lane,h=a.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(p=t,h=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(h,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=m.payload)?f.call(h,d,p):f)||void 0===p)break e;d=U({},d,p);break e;case 2:Do=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[a]:p.push(a))}else h={eventTime:h,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=h,c=d):u=u.next=h,s|=p;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===u&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Uc|=s,e.lanes=s,e.memoizedState=d}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Bo=(new i.Component).refs;function Vo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ho={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nl(),i=rl(e),o=Lo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Po(e,o,i))&&(il(t,e,i,r),jo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nl(),i=rl(e),o=Lo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Po(e,o,i))&&(il(t,e,i,r),jo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nl(),r=rl(e),i=Lo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Po(e,i,r))&&(il(t,e,r,n),jo(t,e,r))}};function Go(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Wo(e,t,n){var r=!1,i=Oi,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=ki(t)?Mi:Ai.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Oi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ho,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Yo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ho.enqueueReplaceState(t,t.state,null)}function qo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Bo,ko(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=ki(t)?Mi:Ai.current,i.context=Di(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Vo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ho.enqueueReplaceState(i,i.state,null),Fo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ko(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Bo&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Qo(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jo(e){return(0,e._init)(e._payload)}function Xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ll(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===I?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===k&&Jo(o)===t.type)?((r=i(t,n.props)).ref=Ko(e,t,n),r.return=e,r):((r=Pl(n.type,n.key,n.props,null,e.mode,r)).ref=Ko(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=jl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Pl(t.type,t.key,t.props,null,e.mode,n)).ref=Ko(e,null,t),n.return=e,n;case T:return(t=zl(t,e.mode,n)).return=e,t;case k:return p(e,(0,t._init)(t._payload),n)}if(ne(t)||P(t))return(t=jl(t,e.mode,n,null)).return=e,t;Qo(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===i?l(e,t,n,r):null;case T:return n.key===i?u(e,t,n,r):null;case k:return h(e,t,(i=n._init)(n._payload),r)}if(ne(n)||P(n))return null!==i?null:d(e,t,n,r,null);Qo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return f(e,t,n,(0,r._init)(r._payload),i)}if(ne(r)||P(r))return d(t,e=e.get(n)||null,r,i,null);Qo(t,r)}return null}function m(i,s,a,c){for(var l=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=h(i,d,a[m],c);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=o(v,s,m),null===u?l=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(i,d),oo&&$i(i,m),l;if(null===d){for(;m<a.length;m++)null!==(d=p(i,a[m],c))&&(s=o(d,s,m),null===u?l=d:u.sibling=d,u=d);return oo&&$i(i,m),l}for(d=r(i,d);m<a.length;m++)null!==(g=f(d,i,m,a[m],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?l=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),oo&&$i(i,m),l}function g(i,a,c,l){var u=P(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var E=h(i,m,y.value,l);if(null===E){null===m&&(m=v);break}e&&m&&null===E.alternate&&t(i,m),a=o(E,a,g),null===d?u=E:d.sibling=E,d=E,m=v}if(y.done)return n(i,m),oo&&$i(i,g),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=p(i,y.value,l))&&(a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return oo&&$i(i,g),u}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=f(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),oo&&$i(i,g),u}return function e(r,o,s,c){if("object"===typeof s&&null!==s&&s.type===I&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case S:e:{for(var l=s.key,u=o;null!==u;){if(u.key===l){if((l=s.type)===I){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===k&&Jo(l)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Ko(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===I?((o=jl(s.props.children,r.mode,c,s.key)).return=r,r=o):((c=Pl(s.type,s.key,s.props,null,r.mode,c)).ref=Ko(r,o,s),c.return=r,r=c)}return a(r);case T:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=zl(s,r.mode,c)).return=r,r=o}return a(r);case k:return e(r,o,(u=s._init)(s._payload),c)}if(ne(s))return m(r,o,s,c);if(P(s))return g(r,o,s,c);Qo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Fl(s,r.mode,c)).return=r,r=o),a(r)):n(r,o)}}var Zo=Xo(!0),$o=Xo(!1),es={},ts=Ni(es),ns=Ni(es),rs=Ni(es);function is(e){if(e===es)throw Error(s(174));return e}function os(e,t){switch(Ci(rs,t),Ci(ns,e),Ci(ts,es),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}wi(ts),Ci(ts,t)}function ss(){wi(ts),wi(ns),wi(rs)}function as(e){is(rs.current);var t=is(ts.current),n=le(t,e.type);t!==n&&(Ci(ns,e),Ci(ts,n))}function cs(e){ns.current===e&&(wi(ts),wi(ns))}var ls=Ni(0);function us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ds=[];function ps(){for(var e=0;e<ds.length;e++)ds[e]._workInProgressVersionPrimary=null;ds.length=0}var hs=b.ReactCurrentDispatcher,fs=b.ReactCurrentBatchConfig,ms=0,gs=null,vs=null,ys=null,Es=!1,_s=!1,bs=0,Ss=0;function Ts(){throw Error(s(321))}function Is(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function Ns(e,t,n,r,i,o){if(ms=o,gs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hs.current=null===e||null===e.memoizedState?ca:la,e=n(r,i),_s){o=0;do{if(_s=!1,bs=0,25<=o)throw Error(s(301));o+=1,ys=vs=null,t.updateQueue=null,hs.current=ua,e=n(r,i)}while(_s)}if(hs.current=aa,t=null!==vs&&null!==vs.next,ms=0,ys=vs=gs=null,Es=!1,t)throw Error(s(300));return e}function ws(){var e=0!==bs;return bs=0,e}function Cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?gs.memoizedState=ys=e:ys=ys.next=e,ys}function Os(){if(null===vs){var e=gs.alternate;e=null!==e?e.memoizedState:null}else e=vs.next;var t=null===ys?gs.memoizedState:ys.next;if(null!==t)ys=t,vs=e;else{if(null===e)throw Error(s(310));e={memoizedState:(vs=e).memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},null===ys?gs.memoizedState=ys=e:ys=ys.next=e}return ys}function As(e,t){return"function"===typeof t?t(e):t}function Rs(e){var t=Os(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=vs,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=a=null,l=null,u=o;do{var d=u.lane;if((ms&d)===d)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=p,a=r):l=l.next=p,gs.lanes|=d,Uc|=d}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=c,cr(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,gs.lanes|=o,Uc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ms(e){var t=Os(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);cr(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ds(){}function ks(e,t){var n=gs,r=Os(),i=t(),o=!cr(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ws(Ps.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ys&&1&ys.memoizedState.tag){if(n.flags|=2048,zs(9,Ls.bind(null,n,r,i,t),void 0,null),null===Mc)throw Error(s(349));0!==(30&ms)||xs(n,t,i)}return i}function xs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ls(e,t,n,r){t.value=n,t.getSnapshot=r,js(t)&&Us(e)}function Ps(e,t,n){return n((function(){js(t)&&Us(e)}))}function js(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cr(e,n)}catch(r){return!0}}function Us(e){var t=Mo(e,1);null!==t&&il(t,e,1,-1)}function Fs(e){var t=Cs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:e},t.queue=e,e=e.dispatch=ra.bind(null,gs,e),[t.memoizedState,e]}function zs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bs(){return Os().memoizedState}function Vs(e,t,n,r){var i=Cs();gs.flags|=e,i.memoizedState=zs(1|t,n,void 0,void 0===r?null:r)}function Hs(e,t,n,r){var i=Os();r=void 0===r?null:r;var o=void 0;if(null!==vs){var s=vs.memoizedState;if(o=s.destroy,null!==r&&Is(r,s.deps))return void(i.memoizedState=zs(t,n,o,r))}gs.flags|=e,i.memoizedState=zs(1|t,n,o,r)}function Gs(e,t){return Vs(8390656,8,e,t)}function Ws(e,t){return Hs(2048,8,e,t)}function Ys(e,t){return Hs(4,2,e,t)}function qs(e,t){return Hs(4,4,e,t)}function Ks(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Hs(4,4,Ks.bind(null,t,e),n)}function Js(){}function Xs(e,t){var n=Os();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Is(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zs(e,t){var n=Os();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Is(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $s(e,t,n){return 0===(21&ms)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(cr(n,t)||(n=gt(),gs.lanes|=n,Uc|=n,e.baseState=!0),t)}function ea(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fs.transition;fs.transition={};try{e(!1),t()}finally{_t=n,fs.transition=r}}function ta(){return Os().memoizedState}function na(e,t,n){var r=rl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ia(e))oa(t,n);else if(null!==(n=Ro(e,t,n,r))){il(n,e,r,nl()),sa(n,t,r)}}function ra(e,t,n){var r=rl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(e))oa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,cr(a,s)){var c=t.interleaved;return null===c?(i.next=i,Ao(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ro(e,t,i,r))&&(il(n,e,r,i=nl()),sa(n,t,r))}}function ia(e){var t=e.alternate;return e===gs||null!==t&&t===gs}function oa(e,t){_s=Es=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Et(e,n)}}var aa={readContext:Co,useCallback:Ts,useContext:Ts,useEffect:Ts,useImperativeHandle:Ts,useInsertionEffect:Ts,useLayoutEffect:Ts,useMemo:Ts,useReducer:Ts,useRef:Ts,useState:Ts,useDebugValue:Ts,useDeferredValue:Ts,useTransition:Ts,useMutableSource:Ts,useSyncExternalStore:Ts,useId:Ts,unstable_isNewReconciler:!1},ca={readContext:Co,useCallback:function(e,t){return Cs().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Gs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4194308,4,Ks.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vs(4,2,e,t)},useMemo:function(e,t){var n=Cs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Cs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=na.bind(null,gs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Cs().memoizedState=e},useState:Fs,useDebugValue:Js,useDeferredValue:function(e){return Cs().memoizedState=e},useTransition:function(){var e=Fs(!1),t=e[0];return e=ea.bind(null,e[1]),Cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=gs,i=Cs();if(oo){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Mc)throw Error(s(349));0!==(30&ms)||xs(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Gs(Ps.bind(null,r,o,e),[e]),r.flags|=2048,zs(9,Ls.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Cs(),t=Mc.identifierPrefix;if(oo){var n=Zi;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=bs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ss++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Co,useCallback:Xs,useContext:Co,useEffect:Ws,useImperativeHandle:Qs,useInsertionEffect:Ys,useLayoutEffect:qs,useMemo:Zs,useReducer:Rs,useRef:Bs,useState:function(){return Rs(As)},useDebugValue:Js,useDeferredValue:function(e){return $s(Os(),vs.memoizedState,e)},useTransition:function(){return[Rs(As)[0],Os().memoizedState]},useMutableSource:Ds,useSyncExternalStore:ks,useId:ta,unstable_isNewReconciler:!1},ua={readContext:Co,useCallback:Xs,useContext:Co,useEffect:Ws,useImperativeHandle:Qs,useInsertionEffect:Ys,useLayoutEffect:qs,useMemo:Zs,useReducer:Ms,useRef:Bs,useState:function(){return Ms(As)},useDebugValue:Js,useDeferredValue:function(e){var t=Os();return null===vs?t.memoizedState=e:$s(t,vs.memoizedState,e)},useTransition:function(){return[Ms(As)[0],Os().memoizedState]},useMutableSource:Ds,useSyncExternalStore:ks,useId:ta,unstable_isNewReconciler:!1};function da(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function pa(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function ma(e,t,n){(n=Lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yc||(Yc=!0,qc=r),ha(0,t)},n}function ga(e,t,n){(n=Lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Kc?Kc=new Set([this]):Kc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function va(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cl.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ea(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Lo(-1,1)).tag=2,Po(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _a=b.ReactCurrentOwner,ba=!1;function Sa(e,t,n,r){t.child=null===e?$o(t,null,n,r):Zo(t,e.child,n,r)}function Ta(e,t,n,r,i){n=n.render;var o=t.ref;return wo(t,i),r=Ns(e,t,n,r,o,i),n=ws(),null===e||ba?(oo&&n&&to(t),t.flags|=1,Sa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ya(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||xl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Na(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ya(e,t,i)}return t.flags|=1,(e=Ll(o,r)).ref=t.ref,e.return=t,t.child=e}function Na(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ya(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Oa(e,t,n,r,i)}function wa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Lc,xc),xc|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Lc,xc),xc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Lc,xc),xc|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Lc,xc),xc|=r;return Sa(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Oa(e,t,n,r,i){var o=ki(n)?Mi:Ai.current;return o=Di(t,o),wo(t,i),n=Ns(e,t,n,r,o,i),r=ws(),null===e||ba?(oo&&r&&to(t),t.flags|=1,Sa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ya(e,t,i))}function Aa(e,t,n,r,i){if(ki(n)){var o=!0;ji(t)}else o=!1;if(wo(t,i),null===t.stateNode)Wa(e,t),Wo(t,n,r),qo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,l=n.contextType;"object"===typeof l&&null!==l?l=Co(l):l=Di(t,l=ki(n)?Mi:Ai.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||c!==l)&&Yo(t,s,r,l),Do=!1;var p=t.memoizedState;s.state=p,Fo(t,r,s,i),c=t.memoizedState,a!==r||p!==c||Ri.current||Do?("function"===typeof u&&(Vo(t,n,u,r),c=t.memoizedState),(a=Do||Go(t,n,a,r,p,c,l))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=l,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,xo(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:yo(t.type,a),s.props=l,d=t.pendingProps,p=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=Co(c):c=Di(t,c=ki(n)?Mi:Ai.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||p!==c)&&Yo(t,s,r,c),Do=!1,p=t.memoizedState,s.state=p,Fo(t,r,s,i);var f=t.memoizedState;a!==d||p!==f||Ri.current||Do?("function"===typeof h&&(Vo(t,n,h,r),f=t.memoizedState),(l=Do||Go(t,n,l,r,p,f,c)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=c,r=l):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Ra(e,t,n,r,o,i)}function Ra(e,t,n,r,i,o){Ca(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Ui(t,n,!1),Ya(e,t,o);r=t.stateNode,_a.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Zo(t,e.child,null,o),t.child=Zo(t,null,a,o)):Sa(e,t,a,o),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Ma(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),os(e,t.containerInfo)}function Da(e,t,n,r,i){return mo(),go(i),t.flags|=256,Sa(e,t,n,r),t.child}var ka,xa,La,Pa,ja={dehydrated:null,treeContext:null,retryLane:0};function Ua(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=ls.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(ls,1&o),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Ul(c,i,0,null),e=jl(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ua(n),t.memoizedState=ja,e):za(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=pa(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ul({mode:"visible",children:r.children},i,0,null),(o=jl(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Zo(t,e.child,null,a),t.child.memoizedState=Ua(a),t.memoizedState=ja,o);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Ba(e,t,a,r=pa(o=Error(s(419)),r,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(r=Mc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Mo(e,i),il(r,e,i,-1))}return vl(),Ba(e,t,a,r=pa(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Al.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,io=ui(i.nextSibling),ro=t,oo=!0,so=null,null!==e&&(Ki[Qi++]=Xi,Ki[Qi++]=Zi,Ki[Qi++]=Ji,Xi=e.id,Zi=e.overflow,Ji=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(a){a=i.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ll(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Ll(r,a):(a=jl(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Ua(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=ja,i}return e=(a=e.child).sibling,i=Ll(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=Ul({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&go(r),Zo(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),No(e.return,t,n)}function Ha(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ga(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Sa(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===us(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ha(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===us(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ha(t,!0,n,null,o);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ya(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Uc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ll(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ll(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!oo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(no(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return ki(t.type)&&xi(),Ka(t),null;case 3:return r=t.stateNode,ss(),wi(Ri),wi(Ai),ps(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==so&&(cl(so),so=null))),xa(e,t),Ka(t),null;case 5:cs(t);var i=is(rs.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=is(ts.current),ho(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)zr(Pr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":X(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":oe(r,o),zr("invalid",r)}for(var a in Ee(n,o),i=null,o)if(o.hasOwnProperty(a)){var l=o[a];"children"===a?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",""+l]):c.hasOwnProperty(a)&&null!=l&&"onScroll"===a&&zr("scroll",r)}switch(n){case"input":q(r),ee(r,o,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ei)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{a=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ce(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[hi]=t,e[fi]=r,ka(e,t,!1,!1),t.stateNode=e;e:{switch(a=_e(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)zr(Pr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":X(e,r),i=J(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),zr("invalid",e);break;case"textarea":oe(e,r),i=ie(e,r),zr("invalid",e)}for(o in Ee(n,i),l=i)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ve(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&pe(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(c.hasOwnProperty(o)?null!=u&&"onScroll"===o&&zr("scroll",e):null!=u&&_(e,o,u,a))}switch(n){case"input":q(e),ee(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?re(e,!!r.multiple,o,!1):null!=r.defaultValue&&re(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ei)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Pa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=is(rs.current),is(ts.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=ro))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ka(t),null;case 13:if(wi(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(oo&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))fo(),mo(),t.flags|=98560,o=!1;else if(o=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hi]=t}else mo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==so&&(cl(so),so=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Pc&&(Pc=3):vl())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return ss(),xa(e,t),null===e&&Hr(t.stateNode.containerInfo),Ka(t),null;case 10:return Io(t.type._context),Ka(t),null;case 19:if(wi(ls),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(a=o.rendering))if(r)qa(o,!1);else{if(0!==Pc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=us(e))){for(t.flags|=128,qa(o,!1),null!==(r=a.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ls,1&ls.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>Gc&&(t.flags|=128,r=!0,qa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=us(a))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!a.alternate&&!oo)return Ka(t),null}else 2*Ze()-o.renderingStartTime>Gc&&1073741824!==n&&(t.flags|=128,r=!0,qa(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=o.last)?n.sibling=a:t.child=a,o.last=a)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=ls.current,Ci(ls,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&xc)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ja(e,t){switch(no(t),t.tag){case 1:return ki(t.type)&&xi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ss(),wi(Ri),wi(Ai),ps(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return cs(t),null;case 13:if(wi(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));mo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return wi(ls),null;case 4:return ss(),null;case 10:return Io(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}ka=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},xa=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,is(ts.current);var o,s=null;switch(n){case"input":i=J(e,i),r=J(e,r),s=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),s=[];break;case"textarea":i=ie(e,i),r=ie(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ei)}for(u in Ee(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(c.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(null!=l||null!=a))if("style"===u)if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(s=s||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(c.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&zr("scroll",e),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Pa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xa=!1,Za=!1,$a="function"===typeof WeakSet?WeakSet:Set,ec=null;function tc(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){wl(e,t,r)}else n.current=null}function nc(e,t,n){try{n()}catch(r){wl(e,t,r)}}var rc=!1;function ic(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&nc(t,n,o)}i=i.next}while(i!==r)}}function oc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ac(e){var t=e.alternate;null!==t&&(e.alternate=null,ac(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[vi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cc(e){return 5===e.tag||3===e.tag||4===e.tag}function lc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ei));else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}function dc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dc(e,t,n),e=e.sibling;null!==e;)dc(e,t,n),e=e.sibling}var pc=null,hc=!1;function fc(e,t,n){for(n=n.child;null!==n;)mc(e,t,n),n=n.sibling}function mc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(ot,n)}catch(a){}switch(n.tag){case 5:Za||tc(n,t);case 6:var r=pc,i=hc;pc=null,fc(e,t,n),hc=i,null!==(pc=r)&&(hc?(e=pc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):pc.removeChild(n.stateNode));break;case 18:null!==pc&&(hc?(e=pc,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ht(e)):li(pc,n.stateNode));break;case 4:r=pc,i=hc,pc=n.stateNode.containerInfo,hc=!0,fc(e,t,n),pc=r,hc=i;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&nc(n,t,s),i=i.next}while(i!==r)}fc(e,t,n);break;case 1:if(!Za&&(tc(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){wl(n,t,a)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?(Za=(r=Za)||null!==n.memoizedState,fc(e,t,n),Za=r):fc(e,t,n);break;default:fc(e,t,n)}}function gc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach((function(t){var r=Rl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:pc=c.stateNode,hc=!1;break e;case 3:case 4:pc=c.stateNode.containerInfo,hc=!0;break e}c=c.return}if(null===pc)throw Error(s(160));mc(o,a,i),pc=null,hc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){wl(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yc(t,e),t=t.sibling}function yc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vc(t,e),Ec(e),4&r){try{ic(3,e,e.return),oc(3,e)}catch(g){wl(e,e.return,g)}try{ic(5,e,e.return)}catch(g){wl(e,e.return,g)}}break;case 1:vc(t,e),Ec(e),512&r&&null!==n&&tc(n,n.return);break;case 5:if(vc(t,e),Ec(e),512&r&&null!==n&&tc(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){wl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&Z(i,o),_e(c,a);var u=_e(c,o);for(a=0;a<l.length;a+=2){var d=l[a],p=l[a+1];"style"===d?ve(i,p):"dangerouslySetInnerHTML"===d?pe(i,p):"children"===d?he(i,p):_(i,d,p,u)}switch(c){case"input":$(i,o);break;case"textarea":se(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?re(i,!!o.multiple,f,!1):h!==!!o.multiple&&(null!=o.defaultValue?re(i,!!o.multiple,o.defaultValue,!0):re(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){wl(e,e.return,g)}}break;case 6:if(vc(t,e),Ec(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){wl(e,e.return,g)}}break;case 3:if(vc(t,e),Ec(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){wl(e,e.return,g)}break;case 4:default:vc(t,e),Ec(e);break;case 13:vc(t,e),Ec(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Hc=Ze())),4&r&&gc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Za=(u=Za)||d,vc(t,e),Za=u):vc(t,e),Ec(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(ec=e,d=e.child;null!==d;){for(p=ec=d;null!==ec;){switch(f=(h=ec).child,h.tag){case 0:case 11:case 14:case 15:ic(4,h,h.return);break;case 1:tc(h,h.return);var m=h.stateNode;if("function"===typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){wl(r,n,g)}}break;case 5:tc(h,h.return);break;case 22:if(null!==h.memoizedState){Tc(p);continue}}null!==f?(f.return=h,ec=f):Tc(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{i=p.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=p.stateNode,a=void 0!==(l=p.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=ge("display",a))}catch(g){wl(e,e.return,g)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(g){wl(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vc(t,e),Ec(e),4&r&&gc(e);case 21:}}function Ec(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cc(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),dc(e,lc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uc(e,lc(e),o);break;default:throw Error(s(161))}}catch(a){wl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _c(e,t,n){ec=e,bc(e,t,n)}function bc(e,t,n){for(var r=0!==(1&e.mode);null!==ec;){var i=ec,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Xa;if(!s){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Za;a=Xa;var l=Za;if(Xa=s,(Za=c)&&!l)for(ec=i;null!==ec;)c=(s=ec).child,22===s.tag&&null!==s.memoizedState?Ic(i):null!==c?(c.return=s,ec=c):Ic(i);for(;null!==o;)ec=o,bc(o,t,n),o=o.sibling;ec=i,Xa=a,Za=l}Sc(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,ec=o):Sc(e)}}function Sc(e){for(;null!==ec;){var t=ec;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Za||oc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Za)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&zo(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Ht(p)}}}break;default:throw Error(s(163))}Za||512&t.flags&&sc(t)}catch(h){wl(t,t.return,h)}}if(t===e){ec=null;break}if(null!==(n=t.sibling)){n.return=t.return,ec=n;break}ec=t.return}}function Tc(e){for(;null!==ec;){var t=ec;if(t===e){ec=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ec=n;break}ec=t.return}}function Ic(e){for(;null!==ec;){var t=ec;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{oc(4,t)}catch(c){wl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){wl(t,i,c)}}var o=t.return;try{sc(t)}catch(c){wl(t,o,c)}break;case 5:var s=t.return;try{sc(t)}catch(c){wl(t,s,c)}}}catch(c){wl(t,t.return,c)}if(t===e){ec=null;break}var a=t.sibling;if(null!==a){a.return=t.return,ec=a;break}ec=t.return}}var Nc,wc=Math.ceil,Cc=b.ReactCurrentDispatcher,Oc=b.ReactCurrentOwner,Ac=b.ReactCurrentBatchConfig,Rc=0,Mc=null,Dc=null,kc=0,xc=0,Lc=Ni(0),Pc=0,jc=null,Uc=0,Fc=0,zc=0,Bc=null,Vc=null,Hc=0,Gc=1/0,Wc=null,Yc=!1,qc=null,Kc=null,Qc=!1,Jc=null,Xc=0,Zc=0,$c=null,el=-1,tl=0;function nl(){return 0!==(6&Rc)?Ze():-1!==el?el:el=Ze()}function rl(e){return 0===(1&e.mode)?1:0!==(2&Rc)&&0!==kc?kc&-kc:null!==vo.transition?(0===tl&&(tl=gt()),tl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function il(e,t,n,r){if(50<Zc)throw Zc=0,$c=null,Error(s(185));yt(e,n,r),0!==(2&Rc)&&e===Mc||(e===Mc&&(0===(2&Rc)&&(Fc|=n),4===Pc&&ll(e,kc)),ol(e,r),1===n&&0===Rc&&0===(1&t.mode)&&(Gc=Ze()+500,zi&&Hi()))}function ol(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-at(o),a=1<<s,c=i[s];-1===c?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Mc?kc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zi=!0,Vi(e)}(ul.bind(null,e)):Vi(ul.bind(null,e)),ai((function(){0===(6&Rc)&&Hi()})),n=null;else{switch(bt(r)){case 1:n=et;break;case 4:n=tt;break;case 16:default:n=nt;break;case 536870912:n=it}n=Ml(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(el=-1,tl=0,0!==(6&Rc))throw Error(s(327));var n=e.callbackNode;if(Il()&&e.callbackNode!==n)return null;var r=ht(e,e===Mc?kc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yl(e,r);else{t=r;var i=Rc;Rc|=2;var o=gl();for(Mc===e&&kc===t||(Wc=null,Gc=Ze()+500,fl(e,t));;)try{_l();break}catch(c){ml(e,c)}To(),Cc.current=o,Rc=i,null!==Dc?t=0:(Mc=null,kc=0,t=Pc)}if(0!==t){if(2===t&&(0!==(i=mt(e))&&(r=i,t=al(e,i))),1===t)throw n=jc,fl(e,0),ll(e,r),ol(e,Ze()),n;if(6===t)ll(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!cr(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yl(e,r))&&(0!==(o=mt(e))&&(r=o,t=al(e,o))),1===t))throw n=jc,fl(e,0),ll(e,r),ol(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Tl(e,Vc,Wc);break;case 3:if(ll(e,r),(130023424&r)===r&&10<(t=Hc+500-Ze())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){nl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ii(Tl.bind(null,e,Vc,Wc),t);break}Tl(e,Vc,Wc);break;case 4:if(ll(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-at(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wc(r/1960))-r)){e.timeoutHandle=ii(Tl.bind(null,e,Vc,Wc),r);break}Tl(e,Vc,Wc);break;default:throw Error(s(329))}}}return ol(e,Ze()),e.callbackNode===n?sl.bind(null,e):null}function al(e,t){var n=Bc;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=yl(e,t))&&(t=Vc,Vc=n,null!==t&&cl(t)),e}function cl(e){null===Vc?Vc=e:Vc.push.apply(Vc,e)}function ll(e,t){for(t&=~zc,t&=~Fc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Rc))throw Error(s(327));Il();var t=ht(e,0);if(0===(1&t))return ol(e,Ze()),null;var n=yl(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=jc,fl(e,0),ll(e,t),ol(e,Ze()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tl(e,Vc,Wc),ol(e,Ze()),null}function dl(e,t){var n=Rc;Rc|=1;try{return e(t)}finally{0===(Rc=n)&&(Gc=Ze()+500,zi&&Hi())}}function pl(e){null!==Jc&&0===Jc.tag&&0===(6&Rc)&&Il();var t=Rc;Rc|=1;var n=Ac.transition,r=_t;try{if(Ac.transition=null,_t=1,e)return e()}finally{_t=r,Ac.transition=n,0===(6&(Rc=t))&&Hi()}}function hl(){xc=Lc.current,wi(Lc)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oi(n)),null!==Dc)for(n=Dc.return;null!==n;){var r=n;switch(no(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&xi();break;case 3:ss(),wi(Ri),wi(Ai),ps();break;case 5:cs(r);break;case 4:ss();break;case 13:case 19:wi(ls);break;case 10:Io(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Mc=e,Dc=e=Ll(e.current,null),kc=xc=t,Pc=0,jc=null,zc=Fc=Uc=0,Vc=Bc=null,null!==Oo){for(t=0;t<Oo.length;t++)if(null!==(r=(n=Oo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Oo=null}return e}function ml(e,t){for(;;){var n=Dc;try{if(To(),hs.current=aa,Es){for(var r=gs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Es=!1}if(ms=0,ys=vs=gs=null,_s=!1,bs=0,Oc.current=null,null===n||null===n.return){Pc=1,jc=t,Dc=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=kc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,d=c,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ya(a);if(null!==f){f.flags&=-257,Ea(f,a,c,0,t),1&f.mode&&va(o,u,t),l=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){va(o,u,t),vl();break e}l=Error(s(426))}else if(oo&&1&c.mode){var v=ya(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),Ea(v,a,c,0,t),go(da(l,c));break e}}o=l=da(l,c),4!==Pc&&(Pc=2),null===Bc?Bc=[o]:Bc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Uo(o,ma(0,l,t));break e;case 1:c=l;var y=o.type,E=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==E&&"function"===typeof E.componentDidCatch&&(null===Kc||!Kc.has(E)))){o.flags|=65536,t&=-t,o.lanes|=t,Uo(o,ga(o,c,t));break e}}o=o.return}while(null!==o)}Sl(n)}catch(_){t=_,Dc===n&&null!==n&&(Dc=n=n.return);continue}break}}function gl(){var e=Cc.current;return Cc.current=aa,null===e?aa:e}function vl(){0!==Pc&&3!==Pc&&2!==Pc||(Pc=4),null===Mc||0===(268435455&Uc)&&0===(268435455&Fc)||ll(Mc,kc)}function yl(t,n){var r=Rc;Rc|=2;var i=gl();for(Mc===t&&kc===n||(Wc=null,fl(t,n));;)try{El();break}catch(e){ml(t,e)}if(To(),Rc=r,Cc.current=i,null!==Dc)throw Error(s(261));return Mc=null,kc=0,Pc}function El(){for(;null!==Dc;)bl(Dc)}function _l(){for(;null!==Dc&&!Je();)bl(Dc)}function bl(e){var t=Nc(e.alternate,e,xc);e.memoizedProps=e.pendingProps,null===t?Sl(e):Dc=t,Oc.current=null}function Sl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,xc)))return void(Dc=n)}else{if(null!==(n=Ja(n,t)))return n.flags&=32767,void(Dc=n);if(null===e)return Pc=6,void(Dc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dc=t);Dc=t=e}while(null!==t);0===Pc&&(Pc=5)}function Tl(e,t,n){var r=_t,i=Ac.transition;try{Ac.transition=null,_t=1,function(e,t,n,r){do{Il()}while(null!==Jc);if(0!==(6&Rc))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,o),e===Mc&&(Dc=Mc=null,kc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Ml(nt,(function(){return Il(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ac.transition,Ac.transition=null;var a=_t;_t=1;var c=Rc;Rc|=4,Oc.current=null,function(e,t){if(ti=Wt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,c=-1,l=-1,u=0,d=0,p=e,h=null;t:for(;;){for(var f;p!==n||0!==i&&3!==p.nodeType||(c=a+i),p!==o||0!==r&&3!==p.nodeType||(l=a+r),3===p.nodeType&&(a+=p.nodeValue.length),null!==(f=p.firstChild);)h=p,p=f;for(;;){if(p===e)break t;if(h===n&&++u===i&&(c=a),h===o&&++d===r&&(l=a),null!==(f=p.nextSibling))break;h=(p=h).parentNode}p=f}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ni={focusedElem:e,selectionRange:n},Wt=!1,ec=t;null!==ec;)if(e=(t=ec).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,ec=e;else for(;null!==ec;){t=ec;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,E=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:yo(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(b){wl(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,ec=e;break}ec=t.return}m=rc,rc=!1}(e,n),yc(n,e),mr(ni),Wt=!!ti,ni=ti=null,e.current=n,_c(n,e,i),Xe(),Rc=c,_t=a,Ac.transition=o}else e.current=n;if(Qc&&(Qc=!1,Jc=e,Xc=i),o=e.pendingLanes,0===o&&(Kc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ol(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yc)throw Yc=!1,e=qc,qc=null,e;0!==(1&Xc)&&0!==e.tag&&Il(),o=e.pendingLanes,0!==(1&o)?e===$c?Zc++:(Zc=0,$c=e):Zc=0,Hi()}(e,t,n,r)}finally{Ac.transition=i,_t=r}return null}function Il(){if(null!==Jc){var e=bt(Xc),t=Ac.transition,n=_t;try{if(Ac.transition=null,_t=16>e?16:e,null===Jc)var r=!1;else{if(e=Jc,Jc=null,Xc=0,0!==(6&Rc))throw Error(s(331));var i=Rc;for(Rc|=4,ec=e.current;null!==ec;){var o=ec,a=o.child;if(0!==(16&ec.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(ec=u;null!==ec;){var d=ec;switch(d.tag){case 0:case 11:case 15:ic(8,d,o)}var p=d.child;if(null!==p)p.return=d,ec=p;else for(;null!==ec;){var h=(d=ec).sibling,f=d.return;if(ac(d),d===u){ec=null;break}if(null!==h){h.return=f,ec=h;break}ec=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}ec=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,ec=a;else e:for(;null!==ec;){if(0!==(2048&(o=ec).flags))switch(o.tag){case 0:case 11:case 15:ic(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,ec=y;break e}ec=o.return}}var E=e.current;for(ec=E;null!==ec;){var _=(a=ec).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,ec=_;else e:for(a=E;null!==ec;){if(0!==(2048&(c=ec).flags))try{switch(c.tag){case 0:case 11:case 15:oc(9,c)}}catch(S){wl(c,c.return,S)}if(c===a){ec=null;break e}var b=c.sibling;if(null!==b){b.return=c.return,ec=b;break e}ec=c.return}}if(Rc=i,Hi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(ot,e)}catch(S){}r=!0}return r}finally{_t=n,Ac.transition=t}}return!1}function Nl(e,t,n){e=Po(e,t=ma(0,t=da(n,t),1),1),t=nl(),null!==e&&(yt(e,1,t),ol(e,t))}function wl(e,t,n){if(3===e.tag)Nl(e,e,n);else for(;null!==t;){if(3===t.tag){Nl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kc||!Kc.has(r))){t=Po(t,e=ga(t,e=da(n,e),1),1),e=nl(),null!==t&&(yt(t,1,e),ol(t,e));break}}t=t.return}}function Cl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nl(),e.pingedLanes|=e.suspendedLanes&n,Mc===e&&(kc&n)===n&&(4===Pc||3===Pc&&(130023424&kc)===kc&&500>Ze()-Hc?fl(e,0):zc|=n),ol(e,t)}function Ol(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=nl();null!==(e=Mo(e,t))&&(yt(e,t,n),ol(e,n))}function Al(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ol(e,n)}function Rl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ol(e,n)}function Ml(e,t){return Ke(e,t)}function Dl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kl(e,t,n,r){return new Dl(e,t,n,r)}function xl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ll(e,t){var n=e.alternate;return null===n?((n=kl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pl(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)xl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return jl(n.children,i,o,t);case N:a=8,i|=8;break;case w:return(e=kl(12,n,t,2|i)).elementType=w,e.lanes=o,e;case R:return(e=kl(13,n,t,i)).elementType=R,e.lanes=o,e;case M:return(e=kl(19,n,t,i)).elementType=M,e.lanes=o,e;case x:return Ul(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case O:a=9;break e;case A:a=11;break e;case D:a=14;break e;case k:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=kl(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function jl(e,t,n,r){return(e=kl(7,e,r,t)).lanes=n,e}function Ul(e,t,n,r){return(e=kl(22,e,r,t)).elementType=x,e.lanes=n,e.stateNode={isHidden:!1},e}function Fl(e,t,n){return(e=kl(6,e,null,t)).lanes=n,e}function zl(e,t,n){return(t=kl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vl(e,t,n,r,i,o,s,a,c){return e=new Bl(e,t,n,a,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=kl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ko(o),e}function Hl(e){if(!e)return Oi;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ki(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(ki(n))return Pi(e,n,t)}return t}function Gl(e,t,n,r,i,o,s,a,c){return(e=Vl(n,r,!0,e,0,o,0,a,c)).context=Hl(null),n=e.current,(o=Lo(r=nl(),i=rl(n))).callback=void 0!==t&&null!==t?t:null,Po(n,o,i),e.current.lanes=i,yt(e,i,r),ol(e,r),e}function Wl(e,t,n,r){var i=t.current,o=nl(),s=rl(i);return n=Hl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Lo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Po(i,t,s))&&(il(e,i,s,o),jo(e,i,s)),s}function Yl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ql(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kl(e,t){ql(e,t),(e=e.alternate)&&ql(e,t)}Nc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Ma(t),mo();break;case 5:as(t);break;case 1:ki(t.type)&&ji(t);break;case 4:os(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(Eo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ci(ls,1&ls.current),null!==(e=Ya(e,t,n))?e.sibling:null);Ci(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ga(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,wa(e,t,n)}return Ya(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,oo&&0!==(1048576&t.flags)&&eo(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Di(t,Ai.current);wo(t,n),i=Ns(null,t,r,e,i,n);var o=ws();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ki(r)?(o=!0,ji(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ko(t),i.updater=Ho,t.stateNode=i,i._reactInternals=t,qo(t,r,e,n),t=Ra(null,t,r,!0,o,n)):(t.tag=0,oo&&o&&to(t),Sa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return xl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===D)return 14}return 2}(r),e=yo(r,e),i){case 0:t=Oa(null,t,r,e,n);break e;case 1:t=Aa(null,t,r,e,n);break e;case 11:t=Ta(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,yo(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Oa(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(Ma(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,xo(e,t),Fo(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,r,n,i=da(Error(s(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=da(Error(s(424)),t));break e}for(io=ui(t.stateNode.containerInfo.firstChild),ro=t,oo=!0,so=null,n=$o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mo(),r===i){t=Ya(e,t,n);break e}Sa(e,t,r,n)}t=t.child}return t;case 5:return as(t),null===e&&uo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ri(r,i)?a=null:null!==o&&ri(r,o)&&(t.flags|=32),Ca(e,t),Sa(e,t,a,n),t.child;case 6:return null===e&&uo(t),null;case 13:return Fa(e,t,n);case 4:return os(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zo(t,null,r,n):Sa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return Sa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Sa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ci(Eo,r._currentValue),r._currentValue=a,null!==o)if(cr(o.value,a)){if(o.children===i.children&&!Ri.current){t=Ya(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Lo(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),No(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),No(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Sa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,wo(t,n),r=r(i=Co(i)),t.flags|=1,Sa(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),Ia(e,t,r,i=yo(r.type,i),n);case 15:return Na(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Wa(e,t),t.tag=1,ki(r)?(e=!0,ji(t)):e=!1,wo(t,n),Wo(t,r,i),qo(t,r,i,n),Ra(null,t,r,!0,e,n);case 19:return Ga(e,t,n);case 22:return wa(e,t,n)}throw Error(s(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Jl(e){this._internalRoot=e}function Xl(e){this._internalRoot=e}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eu(){}function tu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Yl(s);a.call(e)}}Wl(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Yl(s);o.call(e)}}var s=Gl(t,r,e,0,null,!1,0,"",eu);return e._reactRootContainer=s,e[mi]=s.current,Hr(8===e.nodeType?e.parentNode:e),pl(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Yl(c);a.call(e)}}var c=Vl(e,0,!1,null,0,!1,0,"",eu);return e._reactRootContainer=c,e[mi]=c.current,Hr(8===e.nodeType?e.parentNode:e),pl((function(){Wl(t,c,n,r)})),c}(n,t,e,i,r);return Yl(s)}Xl.prototype.render=Jl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wl(e,t,null,null)},Xl.prototype.unmount=Jl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pl((function(){Wl(null,e,null,null)})),t[mi]=null}},Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xt.length&&0!==t&&t<xt[n].priority;n++);xt.splice(n,0,e),0===n&&Ut(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pt(t.pendingLanes);0!==n&&(Et(t,1|n),ol(t,Ze()),0===(6&Rc)&&(Gc=Ze()+500,Hi()))}break;case 13:pl((function(){var t=Mo(e,1);if(null!==t){var n=nl();il(t,e,1,n)}})),Kl(e,1)}},Tt=function(e){if(13===e.tag){var t=Mo(e,134217728);if(null!==t)il(t,e,134217728,nl());Kl(e,134217728)}},It=function(e){if(13===e.tag){var t=rl(e),n=Mo(e,t);if(null!==n)il(n,e,t,nl());Kl(e,t)}},Nt=function(){return _t},wt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Te=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Si(r);if(!i)throw Error(s(90));K(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&re(e,!!n.multiple,t,!1)}},Ae=dl,Re=pl;var nu={usingClientEntryPoint:!1,Events:[_i,bi,Si,Ce,Oe,dl]},ru={findFiberByHostInstance:Ei,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ye(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{ot=ou.inject(iu),st=ou}catch(de){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nu,n.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:T,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},n.createRoot=function(e,t){if(!Zl(e))throw Error(s(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vl(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Jl(t)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ye(t))?null:e.stateNode},n.flushSync=function(e){return pl(e)},n.hydrate=function(e,t,n){if(!$l(t))throw Error(s(200));return tu(null,e,t,!0,n)},n.hydrateRoot=function(e,t,n){if(!Zl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Gl(t,null,e,1,null!=n?n:null,i,0,o,a),e[mi]=t.current,Hr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xl(t)},n.render=function(e,t,n){if(!$l(t))throw Error(s(200));return tu(null,e,t,!1,n)},n.unmountComponentAtNode=function(e){if(!$l(e))throw Error(s(40));return!!e._reactRootContainer&&(pl((function(){tu(null,null,e,!1,(function(){e._reactRootContainer=null,e[mi]=null}))})),!0)},n.unstable_batchedUpdates=dl,n.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$l(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return tu(e,t,n,!1,r)},n.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},7251:function(e,t,n){var r,i,o;i=[t,n(75)],r=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(t);function r(e){return e&&e.__esModule?e:{default:e}}e.default=n.default},void 0===(o="function"===typeof r?r.apply(t,i):r)||(e.exports=o)},75:function(t,n,r){var i,o,s;o=[n,r(5043),r(5173)],i=function(t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setHasSupportToCaptureOption=f;var i=s(n),o=s(r);function s(e){return e&&e.__esModule?e:{default:e}}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function c(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=!1;function f(e){h=e}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){f(!0)}}))}catch(e){}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{capture:!0};return h?e:e.capture}function g(e){if("touches"in e){var t=e.touches[0];return{x:t.pageX,y:t.pageY}}return{x:e.screenX,y:e.screenY}}var v=function(e){function t(){var e;l(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o._handleSwipeStart=o._handleSwipeStart.bind(o),o._handleSwipeMove=o._handleSwipeMove.bind(o),o._handleSwipeEnd=o._handleSwipeEnd.bind(o),o._onMouseDown=o._onMouseDown.bind(o),o._onMouseMove=o._onMouseMove.bind(o),o._onMouseUp=o._onMouseUp.bind(o),o._setSwiperRef=o._setSwiperRef.bind(o),o}return p(t,e),u(t,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,m({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,m({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(e){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(e))}},{key:"_onMouseMove",value:function(e){this.mouseDown&&this._handleSwipeMove(e)}},{key:"_onMouseUp",value:function(e){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(e)}},{key:"_handleSwipeStart",value:function(e){var t=g(e),n=t.x,r=t.y;this.moveStart={x:n,y:r},this.props.onSwipeStart(e)}},{key:"_handleSwipeMove",value:function(e){if(this.moveStart){var t=g(e),n=t.x,r=t.y,i=n-this.moveStart.x,o=r-this.moveStart.y;this.moving=!0,this.props.onSwipeMove({x:i,y:o},e)&&e.cancelable&&e.preventDefault(),this.movePosition={deltaX:i,deltaY:o}}}},{key:"_handleSwipeEnd",value:function(e){this.props.onSwipeEnd(e);var t=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-t?this.props.onSwipeLeft(1,e):this.movePosition.deltaX>t&&this.props.onSwipeRight(1,e),this.movePosition.deltaY<-t?this.props.onSwipeUp(1,e):this.movePosition.deltaY>t&&this.props.onSwipeDown(1,e)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(e){this.swiper=e,this.props.innerRef(e)}},{key:"render",value:function(){var e=this.props,t=(e.tagName,e.className),n=e.style,r=e.children,o=(e.allowMouseEvents,e.onSwipeUp,e.onSwipeDown,e.onSwipeLeft,e.onSwipeRight,e.onSwipeStart,e.onSwipeMove,e.onSwipeEnd,e.innerRef,e.tolerance,c(e,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]));return i.default.createElement(this.props.tagName,a({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:t,style:n},o),r)}}]),t}(n.Component);v.displayName="ReactSwipe",v.propTypes={tagName:o.default.string,className:o.default.string,style:o.default.object,children:o.default.node,allowMouseEvents:o.default.bool,onSwipeUp:o.default.func,onSwipeDown:o.default.func,onSwipeLeft:o.default.func,onSwipeRight:o.default.func,onSwipeStart:o.default.func,onSwipeMove:o.default.func,onSwipeEnd:o.default.func,innerRef:o.default.func,tolerance:o.default.number.isRequired},v.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},t.default=v},void 0===(s="function"===typeof i?i.apply(n,o):i)||(t.exports=s)},5082:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case s:case p:case h:return e;default:switch(e=e&&e.$$typeof){case u:case l:case d:case m:case f:case c:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.ForwardRef=d,t.Memo=f},2086:(e,t,n)=>{"use strict";e.exports=n(5082)},2547:(e,t,n)=>{"use strict";n.r(t),n.d(t,{IGNORE_CLASS_NAME:()=>f,default:()=>g});var r=n(5043),i=n(7950);function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,n){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n))}var c,l,u=(void 0===c&&(c=0),function(){return++c}),d={},p={},h=["touchstart","touchmove"],f="ignore-react-onclickoutside";function m(e,t){var n={};return-1!==h.indexOf(t)&&l&&(n.passive=!e.props.preventDefault),n}const g=function(e,t){var n,c,h=e.displayName||e.name||"Component";return c=n=function(n){var c,f;function g(e){var r;return(r=n.call(this,e)||this).__outsideClickHandler=function(e){if("function"!==typeof r.__clickOutsideHandlerProp){var t=r.getInstance();if("function"!==typeof t.props.handleClickOutside){if("function"!==typeof t.handleClickOutside)throw new Error("WrappedComponent: "+h+" lacks a handleClickOutside(event) function for processing outside click events.");t.handleClickOutside(e)}else t.props.handleClickOutside(e)}else r.__clickOutsideHandlerProp(e)},r.__getComponentNode=function(){var e=r.getInstance();return t&&"function"===typeof t.setClickOutsideRef?t.setClickOutsideRef()(e):"function"===typeof e.setClickOutsideRef?e.setClickOutsideRef():(0,i.findDOMNode)(e)},r.enableOnClickOutside=function(){if("undefined"!==typeof document&&!p[r._uid]){"undefined"===typeof l&&(l=function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),e}}()),p[r._uid]=!0;var e=r.props.eventTypes;e.forEach||(e=[e]),d[r._uid]=function(e){var t;null!==r.componentNode&&(r.props.preventDefault&&e.preventDefault(),r.props.stopPropagation&&e.stopPropagation(),r.props.excludeScrollbar&&(t=e,document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY)||function(e,t,n){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&a(e,t,n))return!0;e=e.parentNode||e.host}return e}(e.composed&&e.composedPath&&e.composedPath().shift()||e.target,r.componentNode,r.props.outsideClickIgnoreClass)===document&&r.__outsideClickHandler(e))},e.forEach((function(e){document.addEventListener(e,d[r._uid],m(s(r),e))}))}},r.disableOnClickOutside=function(){delete p[r._uid];var e=d[r._uid];if(e&&"undefined"!==typeof document){var t=r.props.eventTypes;t.forEach||(t=[t]),t.forEach((function(t){return document.removeEventListener(t,e,m(s(r),t))})),delete d[r._uid]}},r.getRef=function(e){return r.instanceRef=e},r._uid=u(),r}f=n,(c=g).prototype=Object.create(f.prototype),c.prototype.constructor=c,o(c,f);var v=g.prototype;return v.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},v.componentDidMount=function(){if("undefined"!==typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"===typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!==typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+h+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},v.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},v.componentWillUnmount=function(){this.disableOnClickOutside()},v.render=function(){var t=this.props;t.excludeScrollbar;var n=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,(0,r.createElement)(e,n)},g}(r.Component),n.displayName="OnClickOutside("+h+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:f,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},c}},2157:function(e,t,n){var r;r=e=>(()=>{var t={703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:t=>{"use strict";t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";r.r(i),r.d(i,{default:()=>_});var e=r(98),t=r.n(e),n=r(697),o=r.n(n);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}var a=function(e){var n=e.pageClassName,r=e.pageLinkClassName,i=e.page,o=e.selected,a=e.activeClassName,c=e.activeLinkClassName,l=e.getEventListener,u=e.pageSelectedHandler,d=e.href,p=e.extraAriaContext,h=e.pageLabelBuilder,f=e.rel,m=e.ariaLabel||"Page "+i+(p?" "+p:""),g=null;return o&&(g="page",m=e.ariaLabel||"Page "+i+" is your current page",n=void 0!==n?n+" "+a:a,void 0!==r?void 0!==c&&(r=r+" "+c):r=c),t().createElement("li",{className:n},t().createElement("a",s({rel:f,role:d?void 0:"button",className:r,href:d,tabIndex:o?"-1":"0","aria-label":m,"aria-current":g,onKeyPress:u},l(u)),h(i)))};a.propTypes={pageSelectedHandler:o().func.isRequired,selected:o().bool.isRequired,pageClassName:o().string,pageLinkClassName:o().string,activeClassName:o().string,activeLinkClassName:o().string,extraAriaContext:o().string,href:o().string,ariaLabel:o().string,page:o().number.isRequired,getEventListener:o().func.isRequired,pageLabelBuilder:o().func.isRequired,rel:o().string};const c=a;function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var u=function(e){var n=e.breakLabel,r=e.breakAriaLabel,i=e.breakClassName,o=e.breakLinkClassName,s=e.breakHandler,a=e.getEventListener,c=i||"break";return t().createElement("li",{className:c},t().createElement("a",l({className:o,role:"button",tabIndex:"0","aria-label":r,onKeyPress:s},a(s)),n))};u.propTypes={breakLabel:o().oneOfType([o().string,o().node]),breakAriaLabel:o().string,breakClassName:o().string,breakLinkClassName:o().string,breakHandler:o().func.isRequired,getEventListener:o().func.isRequired};const d=u;function p(e){return null!=e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:""}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(a,e);var n,r,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(i);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(this,e)});function a(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),y(g(n=s.call(this,e)),"handlePreviousPage",(function(e){var t=n.state.selected;n.handleClick(e,null,t>0?t-1:void 0,{isPrevious:!0})})),y(g(n),"handleNextPage",(function(e){var t=n.state.selected,r=n.props.pageCount;n.handleClick(e,null,t<r-1?t+1:void 0,{isNext:!0})})),y(g(n),"handlePageSelected",(function(e,t){if(n.state.selected===e)return n.callActiveCallback(e),void n.handleClick(t,null,void 0,{isActive:!0});n.handleClick(t,null,e)})),y(g(n),"handlePageChange",(function(e){n.state.selected!==e&&(n.setState({selected:e}),n.callCallback(e))})),y(g(n),"getEventListener",(function(e){return y({},n.props.eventListener,e)})),y(g(n),"handleClick",(function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.isPrevious,s=void 0!==o&&o,a=i.isNext,c=void 0!==a&&a,l=i.isBreak,u=void 0!==l&&l,d=i.isActive,p=void 0!==d&&d;e.preventDefault?e.preventDefault():e.returnValue=!1;var h=n.state.selected,f=n.props.onClick,m=r;if(f){var g=f({index:t,selected:h,nextSelectedPage:r,event:e,isPrevious:s,isNext:c,isBreak:u,isActive:p});if(!1===g)return;Number.isInteger(g)&&(m=g)}void 0!==m&&n.handlePageChange(m)})),y(g(n),"handleBreakClick",(function(e,t){var r=n.state.selected;n.handleClick(t,e,r<e?n.getForwardJump():n.getBackwardJump(),{isBreak:!0})})),y(g(n),"callCallback",(function(e){void 0!==n.props.onPageChange&&"function"==typeof n.props.onPageChange&&n.props.onPageChange({selected:e})})),y(g(n),"callActiveCallback",(function(e){void 0!==n.props.onPageActive&&"function"==typeof n.props.onPageActive&&n.props.onPageActive({selected:e})})),y(g(n),"getElementPageRel",(function(e){var t=n.state.selected,r=n.props,i=r.nextPageRel,o=r.prevPageRel,s=r.selectedPageRel;return t-1===e?o:t===e?s:t+1===e?i:void 0})),y(g(n),"pagination",(function(){var e=[],r=n.props,i=r.pageRangeDisplayed,o=r.pageCount,s=r.marginPagesDisplayed,a=r.breakLabel,c=r.breakClassName,l=r.breakLinkClassName,u=r.breakAriaLabels,p=n.state.selected;if(o<=i)for(var h=0;h<o;h++)e.push(n.getPageElement(h));else{var f=i/2,m=i-f;p>o-i/2?f=i-(m=o-p):p<i/2&&(m=i-(f=p));var g,v,y=function(e){return n.getPageElement(e)},E=[];for(g=0;g<o;g++){var _=g+1;if(_<=s)E.push({type:"page",index:g,display:y(g)});else if(_>o-s)E.push({type:"page",index:g,display:y(g)});else if(g>=p-f&&g<=p+(0===p&&i>1?m-1:m))E.push({type:"page",index:g,display:y(g)});else if(a&&E.length>0&&E[E.length-1].display!==v&&(i>0||s>0)){var b=g<p?u.backward:u.forward;v=t().createElement(d,{key:g,breakAriaLabel:b,breakLabel:a,breakClassName:c,breakLinkClassName:l,breakHandler:n.handleBreakClick.bind(null,g),getEventListener:n.getEventListener}),E.push({type:"break",index:g,display:v})}}E.forEach((function(t,n){var r=t;"break"===t.type&&E[n-1]&&"page"===E[n-1].type&&E[n+1]&&"page"===E[n+1].type&&E[n+1].index-E[n-1].index<=2&&(r={type:"page",index:t.index,display:y(t.index)}),e.push(r.display)}))}return e})),void 0!==e.initialPage&&void 0!==e.forcePage&&console.warn("(react-paginate): Both initialPage (".concat(e.initialPage,") and forcePage (").concat(e.forcePage,") props are provided, which is discouraged.")+" Use exclusively forcePage prop for a controlled component.\nSee https://reactjs.org/docs/forms.html#controlled-components"),r=e.initialPage?e.initialPage:e.forcePage?e.forcePage:0,n.state={selected:r},n}return n=a,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialPage,n=e.disableInitialCallback,r=e.extraAriaContext,i=e.pageCount,o=e.forcePage;void 0===t||n||this.callCallback(t),r&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(i)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(i,"). Did you forget a Math.ceil()?")),void 0!==t&&t>i-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(t," > ").concat(i-1,").")),void 0!==o&&o>i-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(o," > ").concat(i-1,")."))}},{key:"componentDidUpdate",value:function(e){void 0!==this.props.forcePage&&this.props.forcePage!==e.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(e.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var e=this.state.selected,t=this.props,n=t.pageCount,r=e+t.pageRangeDisplayed;return r>=n?n-1:r}},{key:"getBackwardJump",value:function(){var e=this.state.selected-this.props.pageRangeDisplayed;return e<0?0:e}},{key:"getElementHref",value:function(e){var t=this.props,n=t.hrefBuilder,r=t.pageCount,i=t.hrefAllControls;if(n)return i||e>=0&&e<r?n(e+1,r,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(e){var t=e===this.state.selected;if(this.props.ariaLabelBuilder&&e>=0&&e<this.props.pageCount){var n=this.props.ariaLabelBuilder(e+1,t);return this.props.extraAriaContext&&!t&&(n=n+" "+this.props.extraAriaContext),n}}},{key:"getPageElement",value:function(e){var n=this.state.selected,r=this.props,i=r.pageClassName,o=r.pageLinkClassName,s=r.activeClassName,a=r.activeLinkClassName,l=r.extraAriaContext,u=r.pageLabelBuilder;return t().createElement(c,{key:e,pageSelectedHandler:this.handlePageSelected.bind(null,e),selected:n===e,rel:this.getElementPageRel(e),pageClassName:i,pageLinkClassName:o,activeClassName:s,activeLinkClassName:a,extraAriaContext:l,href:this.getElementHref(e),ariaLabel:this.ariaLabelBuilder(e),page:e+1,pageLabelBuilder:u,getEventListener:this.getEventListener})}},{key:"render",value:function(){var e=this.props.renderOnZeroPageCount;if(0===this.props.pageCount&&void 0!==e)return e?e(this.props):e;var n=this.props,r=n.disabledClassName,i=n.disabledLinkClassName,o=n.pageCount,s=n.className,a=n.containerClassName,c=n.previousLabel,l=n.previousClassName,u=n.previousLinkClassName,d=n.previousAriaLabel,h=n.prevRel,m=n.nextLabel,g=n.nextClassName,v=n.nextLinkClassName,y=n.nextAriaLabel,E=n.nextRel,_=this.state.selected,b=0===_,S=_===o-1,T="".concat(p(l)).concat(b?" ".concat(p(r)):""),I="".concat(p(g)).concat(S?" ".concat(p(r)):""),N="".concat(p(u)).concat(b?" ".concat(p(i)):""),w="".concat(p(v)).concat(S?" ".concat(p(i)):""),C=b?"true":"false",O=S?"true":"false";return t().createElement("ul",{className:s||a,role:"navigation","aria-label":"Pagination"},t().createElement("li",{className:T},t().createElement("a",f({className:N,href:this.getElementHref(_-1),tabIndex:b?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":C,"aria-label":d,rel:h},this.getEventListener(this.handlePreviousPage)),c)),this.pagination(),t().createElement("li",{className:I},t().createElement("a",f({className:w,href:this.getElementHref(_+1),tabIndex:S?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":O,"aria-label":y,rel:E},this.getEventListener(this.handleNextPage)),m)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),a}(e.Component);y(E,"propTypes",{pageCount:o().number.isRequired,pageRangeDisplayed:o().number,marginPagesDisplayed:o().number,previousLabel:o().node,previousAriaLabel:o().string,prevPageRel:o().string,prevRel:o().string,nextLabel:o().node,nextAriaLabel:o().string,nextPageRel:o().string,nextRel:o().string,breakLabel:o().oneOfType([o().string,o().node]),breakAriaLabels:o().shape({forward:o().string,backward:o().string}),hrefBuilder:o().func,hrefAllControls:o().bool,onPageChange:o().func,onPageActive:o().func,onClick:o().func,initialPage:o().number,forcePage:o().number,disableInitialCallback:o().bool,containerClassName:o().string,className:o().string,pageClassName:o().string,pageLinkClassName:o().string,pageLabelBuilder:o().func,activeClassName:o().string,activeLinkClassName:o().string,previousClassName:o().string,nextClassName:o().string,previousLinkClassName:o().string,nextLinkClassName:o().string,disabledClassName:o().string,disabledLinkClassName:o().string,breakClassName:o().string,breakLinkClassName:o().string,extraAriaContext:o().string,ariaLabelBuilder:o().func,eventListener:o().string,renderOnZeroPageCount:o().func,selectedPageRel:o().string}),y(E,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",breakAriaLabels:{forward:"Jump forward",backward:"Jump backward"},disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(e){return e},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1});const _=E})(),i})(),e.exports=r(n(5043))},2823:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=s(n(5043)),c=s(n(7950)),l=s(n(9853)),u=s(n(4175)),d=function(e){function t(t){var n=e.call(this,t)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(e,t,r,i){var o,s,a,c;"text-change"===e?null===(s=(o=n).onEditorChangeText)||void 0===s||s.call(o,n.editor.root.innerHTML,t,i,n.unprivilegedEditor):"selection-change"===e&&(null===(c=(a=n).onEditorChangeSelection)||void 0===c||c.call(a,t,i,n.unprivilegedEditor))};var r=n.isControlled()?t.value:t.defaultValue;return n.value=null!==r&&void 0!==r?r:"",n}return r(t,e),t.prototype.validateProps=function(e){var t;if(a.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(a.default.Children.count(e.children)&&"textarea"===(null===(t=a.default.Children.only(e.children))||void 0===t?void 0:t.type))throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,t){var n,r=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var i=this.getEditorContents(),s=null!==(n=e.value)&&void 0!==n?n:"";this.isEqualValue(s,i)||this.setEditorContents(this.editor,s)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),o(this.cleanProps,this.dirtyProps).some((function(t){return!l.default(e[t],r.props[t])}))},t.prototype.shouldComponentRegenerate=function(e){var t=this;return this.dirtyProps.some((function(n){return!l.default(e[n],t.props[n])}))},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,t){var n=this;if(this.editor&&this.shouldComponentRegenerate(e)){var r=this.editor.getContents(),i=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:i},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var o=this.regenerationSnapshot,s=(r=o.delta,o.selection);delete this.regenerationSnapshot,this.instantiateEditor();var a=this.editor;a.setContents(r),p((function(){return n.setEditorSelection(a,s)}))}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,t){var n=new u.default(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(n,t.tabIndex),this.hookEditor(n),n},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,t){return this.isDelta(e)&&this.isDelta(t)?l.default(e.ops,t.ops):l.default(e,t)},t.prototype.setEditorContents=function(e,t){var n=this;this.value=t;var r=this.getEditorSelection();"string"===typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),p((function(){return n.setEditorSelection(e,r)}))},t.prototype.setEditorSelection=function(e,t){if(this.selection=t,t){var n=e.getLength();t.index=Math.max(0,Math.min(t.index,n-1)),t.length=Math.max(0,Math.min(t.length,n-1-t.index)),e.setSelection(t)}},t.prototype.setEditorTabIndex=function(e,t){var n,r;(null===(r=null===(n=e)||void 0===n?void 0:n.scroll)||void 0===r?void 0:r.domNode)&&(e.scroll.domNode.tabIndex=t)},t.prototype.setEditorReadOnly=function(e,t){t?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=c.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,t=this.props,n=t.children,r=t.preserveWhitespace,o={key:this.state.generation,ref:function(t){e.editingArea=t}};return a.default.Children.count(n)?a.default.cloneElement(a.default.Children.only(n),o):r?a.default.createElement("pre",i({},o)):a.default.createElement("div",i({},o))},t.prototype.render=function(){var e;return a.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,null!==e&&void 0!==e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,t,n,r){var i,o;if(this.editor){var s=this.isDelta(this.value)?r.getContents():r.getHTML();s!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=s,null===(o=(i=this.props).onChange)||void 0===o||o.call(i,e,t,n,r))}},t.prototype.onEditorChangeSelection=function(e,t,n){var r,i,o,s,a,c;if(this.editor){var u=this.getEditorSelection(),d=!u&&e,p=u&&!e;l.default(e,u)||(this.selection=e,null===(i=(r=this.props).onChangeSelection)||void 0===i||i.call(r,e,t,n),d?null===(s=(o=this.props).onFocus)||void 0===s||s.call(o,e,t,n):p&&(null===(c=(a=this.props).onBlur)||void 0===c||c.call(a,u,t,n)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=u.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(a.default.Component);function p(e){Promise.resolve().then(e)}e.exports=d},178:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t,n){var r=0===e?e:e+t;return"translate3d"+("("+("horizontal"===n?[r,0,0]:[0,r,0]).join(",")+")")}},8226:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fadeAnimationHandler=t.slideStopSwipingHandler=t.slideSwipeAnimationHandler=t.slideAnimationHandler=void 0;var r,i=n(5043),o=(r=n(178))&&r.__esModule?r:{default:r},s=n(564);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.slideAnimationHandler=function(e,t){var n={},r=t.selectedItem,a=r,l=i.Children.count(e.children)-1;if(e.infiniteLoop&&(r<0||r>l))return a<0?e.centerMode&&e.centerSlidePercentage&&"horizontal"===e.axis?n.itemListStyle=(0,s.setPosition)(-(l+2)*e.centerSlidePercentage-(100-e.centerSlidePercentage)/2,e.axis):n.itemListStyle=(0,s.setPosition)(100*-(l+2),e.axis):a>l&&(n.itemListStyle=(0,s.setPosition)(0,e.axis)),n;var u=(0,s.getPosition)(r,e),d=(0,o.default)(u,"%",e.axis),p=e.transitionTime+"ms";return n.itemListStyle={WebkitTransform:d,msTransform:d,OTransform:d,transform:d},t.swiping||(n.itemListStyle=c(c({},n.itemListStyle),{},{WebkitTransitionDuration:p,MozTransitionDuration:p,OTransitionDuration:p,transitionDuration:p,msTransitionDuration:p})),n};t.slideSwipeAnimationHandler=function(e,t,n,r){var o={},a="horizontal"===t.axis,c=i.Children.count(t.children),l=(0,s.getPosition)(n.selectedItem,t),u=t.infiniteLoop?(0,s.getPosition)(c-1,t)-100:(0,s.getPosition)(c-1,t),d=a?e.x:e.y,p=d;0===l&&d>0&&(p=0),l===u&&d<0&&(p=0);var h=l+100/(n.itemSize/p),f=Math.abs(d)>t.swipeScrollTolerance;return t.infiniteLoop&&f&&(0===n.selectedItem&&h>-100?h-=100*c:n.selectedItem===c-1&&h<100*-c&&(h+=100*c)),(!t.preventMovementUntilSwipeScrollTolerance||f||n.swipeMovementStarted)&&(n.swipeMovementStarted||r({swipeMovementStarted:!0}),o.itemListStyle=(0,s.setPosition)(h,t.axis)),f&&!n.cancelClick&&r({cancelClick:!0}),o};t.slideStopSwipingHandler=function(e,t){var n=(0,s.getPosition)(t.selectedItem,e);return{itemListStyle:(0,s.setPosition)(n,e.axis)}};t.fadeAnimationHandler=function(e,t){var n=e.transitionTime+"ms",r="ease-in-out",i={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:r,msTransitionTimingFunction:r,MozTransitionTimingFunction:r,WebkitTransitionTimingFunction:r,OTransitionTimingFunction:r};return t.swiping||(i=c(c({},i),{},{WebkitTransitionDuration:n,MozTransitionDuration:n,OTransitionDuration:n,transitionDuration:n,msTransitionDuration:n})),{slideStyle:i,selectedStyle:c(c({},i),{},{opacity:1,position:"relative"}),prevStyle:c({},i)}}},3481:(t,n,r)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!==typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(r(5043)),o=p(r(7251)),s=p(r(8656)),a=p(r(4169)),c=p(r(5559)),l=p(r(9386)),u=r(564),d=r(8226);function p(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function f(e){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function _(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=S(t);if(n){var i=S(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;return b(e)}(this,e)}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(h,e);var t,n,r,p=_(h);function h(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),T(b(t=p.call(this,e)),"thumbsRef",void 0),T(b(t),"carouselWrapperRef",void 0),T(b(t),"listRef",void 0),T(b(t),"itemsRef",void 0),T(b(t),"timer",void 0),T(b(t),"animationHandler",void 0),T(b(t),"setThumbsRef",(function(e){t.thumbsRef=e})),T(b(t),"setCarouselWrapperRef",(function(e){t.carouselWrapperRef=e})),T(b(t),"setListRef",(function(e){t.listRef=e})),T(b(t),"setItemsRef",(function(e,n){t.itemsRef||(t.itemsRef=[]),t.itemsRef[n]=e})),T(b(t),"autoPlay",(function(){i.Children.count(t.props.children)<=1||(t.clearAutoPlay(),t.props.autoPlay&&(t.timer=setTimeout((function(){t.increment()}),t.props.interval)))})),T(b(t),"clearAutoPlay",(function(){t.timer&&clearTimeout(t.timer)})),T(b(t),"resetAutoPlay",(function(){t.clearAutoPlay(),t.autoPlay()})),T(b(t),"stopOnHover",(function(){t.setState({isMouseEntered:!0},t.clearAutoPlay)})),T(b(t),"startOnLeave",(function(){t.setState({isMouseEntered:!1},t.autoPlay)})),T(b(t),"isFocusWithinTheCarousel",(function(){return!!t.carouselWrapperRef&&!((0,c.default)().activeElement!==t.carouselWrapperRef&&!t.carouselWrapperRef.contains((0,c.default)().activeElement))})),T(b(t),"navigateWithKeyboard",(function(e){if(t.isFocusWithinTheCarousel()){var n="horizontal"===t.props.axis,r=n?37:38;(n?39:40)===e.keyCode?t.increment():r===e.keyCode&&t.decrement()}})),T(b(t),"updateSizes",(function(){if(t.state.initialized&&t.itemsRef&&0!==t.itemsRef.length){var e="horizontal"===t.props.axis,n=t.itemsRef[0];if(n){var r=e?n.clientWidth:n.clientHeight;t.setState({itemSize:r}),t.thumbsRef&&t.thumbsRef.updateSizes()}}})),T(b(t),"setMountState",(function(){t.setState({hasMount:!0}),t.updateSizes()})),T(b(t),"handleClickItem",(function(e,n){0!==i.Children.count(t.props.children)&&(t.state.cancelClick?t.setState({cancelClick:!1}):(t.props.onClickItem(e,n),e!==t.state.selectedItem&&t.setState({selectedItem:e})))})),T(b(t),"handleOnChange",(function(e,n){i.Children.count(t.props.children)<=1||t.props.onChange(e,n)})),T(b(t),"handleClickThumb",(function(e,n){t.props.onClickThumb(e,n),t.moveTo(e)})),T(b(t),"onSwipeStart",(function(e){t.setState({swiping:!0}),t.props.onSwipeStart(e)})),T(b(t),"onSwipeEnd",(function(e){t.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),t.props.onSwipeEnd(e),t.clearAutoPlay(),t.state.autoPlay&&t.autoPlay()})),T(b(t),"onSwipeMove",(function(e,n){t.props.onSwipeMove(n);var r=t.props.swipeAnimationHandler(e,t.props,t.state,t.setState.bind(b(t)));return t.setState(v({},r)),!!Object.keys(r).length})),T(b(t),"decrement",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t.moveTo(t.state.selectedItem-("number"===typeof e?e:1))})),T(b(t),"increment",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t.moveTo(t.state.selectedItem+("number"===typeof e?e:1))})),T(b(t),"moveTo",(function(e){if("number"===typeof e){var n=i.Children.count(t.props.children)-1;e<0&&(e=t.props.infiniteLoop?n:0),e>n&&(e=t.props.infiniteLoop?0:n),t.selectItem({selectedItem:e}),t.state.autoPlay&&!1===t.state.isMouseEntered&&t.resetAutoPlay()}})),T(b(t),"onClickNext",(function(){t.increment(1)})),T(b(t),"onClickPrev",(function(){t.decrement(1)})),T(b(t),"onSwipeForward",(function(){t.increment(1),t.props.emulateTouch&&t.setState({cancelClick:!0})})),T(b(t),"onSwipeBackwards",(function(){t.decrement(1),t.props.emulateTouch&&t.setState({cancelClick:!0})})),T(b(t),"changeItem",(function(e){return function(n){(0,u.isKeyboardEvent)(n)&&"Enter"!==n.key||t.moveTo(e)}})),T(b(t),"selectItem",(function(e){t.setState(v({previousItem:t.state.selectedItem},e),(function(){t.setState(t.animationHandler(t.props,t.state))})),t.handleOnChange(e.selectedItem,i.Children.toArray(t.props.children)[e.selectedItem])})),T(b(t),"getInitialImage",(function(){var e=t.props.selectedItem,n=t.itemsRef&&t.itemsRef[e];return(n&&n.getElementsByTagName("img")||[])[0]})),T(b(t),"getVariableItemHeight",(function(e){var n=t.itemsRef&&t.itemsRef[e];if(t.state.hasMount&&n&&n.children.length){var r=n.children[0].getElementsByTagName("img")||[];if(r.length>0){var i=r[0];if(!i.complete){i.addEventListener("load",(function e(){t.forceUpdate(),i.removeEventListener("load",e)}))}}var o=(r[0]||n.children[0]).clientHeight;return o>0?o:null}return null}));var n={initialized:!1,previousItem:e.selectedItem,selectedItem:e.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:e.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return t.animationHandler="function"===typeof e.animationHandler&&e.animationHandler||"fade"===e.animationHandler&&d.fadeAnimationHandler||d.slideAnimationHandler,t.state=v(v({},n),t.animationHandler(e,n)),t}return t=h,(n=[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(e,t){e.children||!this.props.children||this.state.initialized||this.setupCarousel(),!e.autoFocus&&this.props.autoFocus&&this.forceFocus(),t.swiping&&!this.state.swiping&&this.setState(v({},this.props.stopSwipingHandler(this.props,this.state))),e.selectedItem===this.props.selectedItem&&e.centerMode===this.props.centerMode||(this.updateSizes(),this.moveTo(this.props.selectedItem)),e.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var e=this;this.bindEvents(),this.state.autoPlay&&i.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},(function(){var t=e.getInitialImage();t&&!t.complete?t.addEventListener("load",e.setMountState):e.setMountState()}))}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var e=this.carouselWrapperRef;this.props.stopOnHover&&e&&(e.addEventListener("mouseenter",this.stopOnHover),e.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var e=this.carouselWrapperRef;this.props.stopOnHover&&e&&(e.removeEventListener("mouseenter",this.stopOnHover),e.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,l.default)().addEventListener("resize",this.updateSizes),(0,l.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,c.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,l.default)().removeEventListener("resize",this.updateSizes),(0,l.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var e=this.getInitialImage();e&&e.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,c.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var e;null===(e=this.carouselWrapperRef)||void 0===e||e.focus()}},{key:"renderItems",value:function(e){var t=this;return this.props.children?i.Children.map(this.props.children,(function(n,r){var o=r===t.state.selectedItem,a=r===t.state.previousItem,c=o&&t.state.selectedStyle||a&&t.state.prevStyle||t.state.slideStyle||{};t.props.centerMode&&"horizontal"===t.props.axis&&(c=v(v({},c),{},{minWidth:t.props.centerSlidePercentage+"%"})),t.state.swiping&&t.state.swipeMovementStarted&&(c=v(v({},c),{},{pointerEvents:"none"}));var l={ref:function(e){return t.setItemsRef(e,r)},key:"itemKey"+r+(e?"clone":""),className:s.default.ITEM(!0,r===t.state.selectedItem,r===t.state.previousItem),onClick:t.handleClickItem.bind(t,r,n),style:c};return i.default.createElement("li",l,t.props.renderItem(n,{isSelected:r===t.state.selectedItem,isPrevious:r===t.state.previousItem}))})):[]}},{key:"renderControls",value:function(){var e=this,t=this.props,n=t.showIndicators,r=t.labels,o=t.renderIndicator,s=t.children;return n?i.default.createElement("ul",{className:"control-dots"},i.Children.map(s,(function(t,n){return o&&o(e.changeItem(n),n===e.state.selectedItem,n,r.item)}))):null}},{key:"renderStatus",value:function(){return this.props.showStatus?i.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,i.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return this.props.showThumbs&&this.props.children&&0!==i.Children.count(this.props.children)?i.default.createElement(a.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children)):null}},{key:"render",value:function(){var e=this;if(!this.props.children||0===i.Children.count(this.props.children))return null;var t=this.props.swipeable&&i.Children.count(this.props.children)>1,n="horizontal"===this.props.axis,r=this.props.showArrows&&i.Children.count(this.props.children)>1,a=r&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,c=r&&(this.state.selectedItem<i.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,l=this.renderItems(!0),u=l.shift(),d=l.pop(),p={className:s.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},h={};if(n){if(p.onSwipeLeft=this.onSwipeForward,p.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var f=this.getVariableItemHeight(this.state.selectedItem);h.height=f||"auto"}}else p.onSwipeUp="natural"===this.props.verticalSwipe?this.onSwipeBackwards:this.onSwipeForward,p.onSwipeDown="natural"===this.props.verticalSwipe?this.onSwipeForward:this.onSwipeBackwards,p.style=v(v({},p.style),{},{height:this.state.itemSize}),h.height=this.state.itemSize;return i.default.createElement("div",{"aria-label":this.props.ariaLabel,className:s.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},i.default.createElement("div",{className:s.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,a,this.props.labels.leftArrow),i.default.createElement("div",{className:s.default.WRAPPER(!0,this.props.axis),style:h},t?i.default.createElement(o.default,m({tagName:"ul",innerRef:this.setListRef},p,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&d,this.renderItems(),this.props.infiniteLoop&&u):i.default.createElement("ul",{className:s.default.SLIDER(!0,this.state.swiping),ref:function(t){return e.setListRef(t)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&d,this.renderItems(),this.props.infiniteLoop&&u)),this.props.renderArrowNext(this.onClickNext,c,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}])&&y(t.prototype,n),r&&y(t,r),h}(i.default.Component);n.default=I,T(I,"displayName","Carousel"),T(I,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:u.noop,onClickThumb:u.noop,onChange:u.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(e,t,n){return i.default.createElement("button",{type:"button","aria-label":n,className:s.default.ARROW_PREV(!t),onClick:e})},renderArrowNext:function(e,t,n){return i.default.createElement("button",{type:"button","aria-label":n,className:s.default.ARROW_NEXT(!t),onClick:e})},renderIndicator:function(e,t,n,r){return i.default.createElement("li",{className:s.default.DOT(t),onClick:e,onKeyDown:e,value:n,key:n,role:"button",tabIndex:0,"aria-label":"".concat(r," ").concat(n+1)})},renderItem:function(e){return e},renderThumbs:function(e){var t=i.Children.map(e,(function(e){var t=e;if("img"!==e.type&&(t=i.Children.toArray(e.props.children).find((function(e){return"img"===e.type}))),t)return t}));return 0===t.filter((function(e){return e})).length?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):t},statusFormatter:u.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:d.slideSwipeAnimationHandler,stopSwipingHandler:d.slideStopSwipingHandler})},3096:()=>{},564:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPosition=t.getPosition=t.isKeyboardEvent=t.defaultStatusFormatter=t.noop=void 0;var r,i=n(5043),o=(r=n(178))&&r.__esModule?r:{default:r};t.noop=function(){};t.defaultStatusFormatter=function(e,t){return"".concat(e," of ").concat(t)};t.isKeyboardEvent=function(e){return!!e&&e.hasOwnProperty("key")};t.getPosition=function(e,t){if(t.infiniteLoop&&++e,0===e)return 0;var n=i.Children.count(t.children);if(t.centerMode&&"horizontal"===t.axis){var r=-e*t.centerSlidePercentage,o=n-1;return e&&(e!==o||t.infiniteLoop)?r+=(100-t.centerSlidePercentage)/2:e===o&&(r+=100-t.centerSlidePercentage),r}return 100*-e};t.setPosition=function(e,t){var n={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach((function(r){n[r]=(0,o.default)(e,"%",t)})),n}},4169:(t,n,r)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!==typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(r(5043)),o=u(r(8656)),s=r(1256),a=u(r(178)),c=u(r(7251)),l=u(r(9386));function u(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function g(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=y(t);if(n){var i=y(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;return v(e)}(this,e)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(d,e);var t,n,r,u=g(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),E(v(t=u.call(this,e)),"itemsWrapperRef",void 0),E(v(t),"itemsListRef",void 0),E(v(t),"thumbsRef",void 0),E(v(t),"setItemsWrapperRef",(function(e){t.itemsWrapperRef=e})),E(v(t),"setItemsListRef",(function(e){t.itemsListRef=e})),E(v(t),"setThumbsRef",(function(e,n){t.thumbsRef||(t.thumbsRef=[]),t.thumbsRef[n]=e})),E(v(t),"updateSizes",(function(){if(t.props.children&&t.itemsWrapperRef&&t.thumbsRef){var e=i.Children.count(t.props.children),n=t.itemsWrapperRef.clientWidth,r=t.props.thumbWidth?t.props.thumbWidth:(0,s.outerWidth)(t.thumbsRef[0]),o=Math.floor(n/r),a=o<e,c=a?e-o:0;t.setState((function(e,n){return{itemSize:r,visibleItems:o,firstItem:a?t.getFirstItem(n.selectedItem):0,lastPosition:c,showArrows:a}}))}})),E(v(t),"handleClickItem",(function(e,n,r){if(!function(e){return e.hasOwnProperty("key")}(r)||"Enter"===r.key){var i=t.props.onSelectItem;"function"===typeof i&&i(e,n)}})),E(v(t),"onSwipeStart",(function(){t.setState({swiping:!0})})),E(v(t),"onSwipeEnd",(function(){t.setState({swiping:!1})})),E(v(t),"onSwipeMove",(function(e){var n=e.x;if(!t.state.itemSize||!t.itemsWrapperRef||!t.state.visibleItems)return!1;var r=i.Children.count(t.props.children),o=-100*t.state.firstItem/t.state.visibleItems;0===o&&n>0&&(n=0),o===100*-Math.max(r-t.state.visibleItems,0)/t.state.visibleItems&&n<0&&(n=0);var s=o+100/(t.itemsWrapperRef.clientWidth/n);return t.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach((function(e){t.itemsListRef.style[e]=(0,a.default)(s,"%",t.props.axis)})),!0})),E(v(t),"slideRight",(function(e){t.moveTo(t.state.firstItem-("number"===typeof e?e:1))})),E(v(t),"slideLeft",(function(e){t.moveTo(t.state.firstItem+("number"===typeof e?e:1))})),E(v(t),"moveTo",(function(e){e=(e=e<0?0:e)>=t.state.lastPosition?t.state.lastPosition:e,t.setState({firstItem:e})})),t.state={selectedItem:e.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},t}return t=d,(n=[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(e){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==e.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,l.default)().addEventListener("resize",this.updateSizes),(0,l.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,l.default)().removeEventListener("resize",this.updateSizes),(0,l.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(e){var t=e;return e>=this.state.lastPosition&&(t=this.state.lastPosition),e<this.state.firstItem+this.state.visibleItems&&(t=this.state.firstItem),e<this.state.firstItem&&(t=e),t}},{key:"renderItems",value:function(){var e=this;return this.props.children.map((function(t,n){var r=o.default.ITEM(!1,n===e.state.selectedItem),s={key:n,ref:function(t){return e.setThumbsRef(t,n)},className:r,onClick:e.handleClickItem.bind(e,n,e.props.children[n]),onKeyDown:e.handleClickItem.bind(e,n,e.props.children[n]),"aria-label":"".concat(e.props.labels.item," ").concat(n+1),style:{width:e.props.thumbWidth}};return i.default.createElement("li",h({},s,{role:"button",tabIndex:0}),t)}))}},{key:"render",value:function(){var e=this;if(!this.props.children)return null;var t,n=i.Children.count(this.props.children)>1,r=this.state.showArrows&&this.state.firstItem>0,s=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,l=-this.state.firstItem*(this.state.itemSize||0),u=(0,a.default)(l,"px",this.props.axis),d=this.props.transitionTime+"ms";return t={WebkitTransform:u,MozTransform:u,MsTransform:u,OTransform:u,transform:u,msTransform:u,WebkitTransitionDuration:d,MozTransitionDuration:d,MsTransitionDuration:d,OTransitionDuration:d,transitionDuration:d,msTransitionDuration:d},i.default.createElement("div",{className:o.default.CAROUSEL(!1)},i.default.createElement("div",{className:o.default.WRAPPER(!1),ref:this.setItemsWrapperRef},i.default.createElement("button",{type:"button",className:o.default.ARROW_PREV(!r),onClick:function(){return e.slideRight()},"aria-label":this.props.labels.leftArrow}),n?i.default.createElement(c.default,{tagName:"ul",className:o.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:t,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):i.default.createElement("ul",{className:o.default.SLIDER(!1,this.state.swiping),ref:function(t){return e.setItemsListRef(t)},style:t},this.renderItems()),i.default.createElement("button",{type:"button",className:o.default.ARROW_NEXT(!s),onClick:function(){return e.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}])&&f(t.prototype,n),r&&f(t,r),d}(i.Component);n.default=_,E(_,"displayName","Thumbs"),E(_,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350})},8656:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(8139))&&r.__esModule?r:{default:r};var o={ROOT:function(e){return(0,i.default)(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({"carousel-root":!0},e||"",!!e))},CAROUSEL:function(e){return(0,i.default)({carousel:!0,"carousel-slider":e})},WRAPPER:function(e,t){return(0,i.default)({"thumbs-wrapper":!e,"slider-wrapper":e,"axis-horizontal":"horizontal"===t,"axis-vertical":"horizontal"!==t})},SLIDER:function(e,t){return(0,i.default)({thumbs:!e,slider:e,animated:!t})},ITEM:function(e,t,n){return(0,i.default)({thumb:!e,slide:e,selected:t,previous:n})},ARROW_PREV:function(e){return(0,i.default)({"control-arrow control-prev":!0,"control-disabled":e})},ARROW_NEXT:function(e){return(0,i.default)({"control-arrow control-next":!0,"control-disabled":e})},DOT:function(e){return(0,i.default)({dot:!0,selected:e})}};t.default=o},1256:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.outerWidth=void 0;t.outerWidth=function(e){var t=e.offsetWidth,n=getComputedStyle(e);return t+=parseInt(n.marginLeft)+parseInt(n.marginRight)}},1577:(e,t,n)=>{"use strict";Object.defineProperty(t,"FN",{enumerable:!0,get:function(){return r.default}});var r=s(n(3481)),i=n(3096),o=s(n(4169));function s(e){return e&&e.__esModule?e:{default:e}}},5559:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){return document}},9386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){return window}},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function E(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var _=E.prototype=new y;_.constructor=E,m(_,v.prototype),_.isPureReactComponent=!0;var b=Array.isArray,S=Object.prototype.hasOwnProperty,T={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!I.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:T.current}}function w(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function O(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return s=s(c=e),e=""===o?"."+O(c,0):o,b(s)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),A(s,t,i,"",(function(e){return e}))):null!=s&&(w(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+e)),t.push(s)),1;if(c=0,o=""===o?".":o+":",b(e))for(var l=0;l<e.length;l++){var u=o+O(a=e[l],l);c+=A(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=A(a=a.value,t,i,u=o+O(a,l++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function R(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},k={transition:null},x={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:k,ReactCurrentOwner:T};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!w(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=E,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=T.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)S.call(t,l)&&!I.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=w,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>o(c,n))l<i&&0>o(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>o(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],d=1,p=null,h=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,E="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function b(e){if(g=!1,_(e),!m)if(null!==r(l))m=!0,k(S);else{var t=r(u);null!==t&&x(b,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(w),w=-1),f=!0;var o=h;try{for(_(n),p=r(l);null!==p&&(!(p.expirationTime>n)||e&&!A());){var s=p.callback;if("function"===typeof s){p.callback=null,h=p.priorityLevel;var a=s(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?p.callback=a:p===r(l)&&i(l),_(n)}else i(l);p=r(l)}if(null!==p)var c=!0;else{var d=r(u);null!==d&&x(b,d.startTime-n),c=!1}return c}finally{p=null,h=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var T,I=!1,N=null,w=-1,C=5,O=-1;function A(){return!(t.unstable_now()-O<C)}function R(){if(null!==N){var e=t.unstable_now();O=e;var n=!0;try{n=N(!0,e)}finally{n?T():(I=!1,N=null)}}else I=!1}if("function"===typeof E)T=function(){E(R)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,D=M.port2;M.port1.onmessage=R,T=function(){D.postMessage(null)}}else T=function(){v(R,0)};function k(e){N=e,I||(I=!0,T())}function x(e,n){w=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,k(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(l)&&e===r(u)&&(g?(y(w),w=-1):g=!0,x(b,o-s))):(e.sortIndex=a,n(l,e),m||f||(m=!0,k(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},6440:e=>{"use strict";var t=function(){};e.exports=t},3693:(e,t,n)=>{var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},9045:(e,t,n)=>{var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7736:(e,t,n)=>{var r=n(3738).default,i=n(9045);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},8139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,o(n)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{A:()=>r})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var i=Object.create(null);__webpack_require__.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,__webpack_require__.d(i,o),i}})(),__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="/";var __webpack_exports__={};(()=>{"use strict";var t={};__webpack_require__.r(t),__webpack_require__.d(t,{hasBrowserEnv:()=>pS,hasStandardBrowserEnv:()=>hS,hasStandardBrowserWebWorkerEnv:()=>mS});var n,r=__webpack_require__(5043),i=__webpack_require__.t(r,2),o=__webpack_require__(4391),s=__webpack_require__(7950),a=__webpack_require__.t(s,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const l="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(t,n){if(!t){"undefined"!==typeof console&&console.warn(n);try{throw new Error(n)}catch(e){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,t,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,a=o.history,d=n.Pop,m=null,g=v();function v(){return(a.state||{idx:null}).idx}function y(){d=n.Pop;let e=v(),t=null==e?null:e-g;g=e,m&&m({action:d,location:_.location,delta:t})}function E(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(c({},a.state,{idx:g}),""));let _={get action(){return d},get location(){return e(o,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(l,y),m=e,()=>{o.removeEventListener(l,y),m=null}},createHref:e=>t(o,e),createURL:E,encodeLocation(e){let t=E(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){d=n.Push;let i=h(_.location,e,t);r&&r(i,e),g=v()+1;let c=p(i,g),l=_.createHref(i);try{a.pushState(c,"",l)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(l)}s&&m&&m({action:d,location:_.location,delta:1})},replace:function(e,t){d=n.Replace;let i=h(_.location,e,t);r&&r(i,e),g=v();let o=p(i,g),c=_.createHref(i);a.replaceState(o,"",c),s&&m&&m({action:d,location:_.location,delta:0})},go:e=>a.go(e)};return _}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){void 0===n&&(n="/");let r=D(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=E(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s){let e=M(r);o=A(i[s],e)}return o}function E(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(u(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=j([r,s.relativePath]),c=n.concat(s);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),E(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:O(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of _(e.path))i(e,t,r);else i(e,t)})),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=_(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,S=3,T=2,I=1,N=10,w=-2,C=e=>"*"===e;function O(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=w),t&&(r+=T),n.filter((e=>!C(e))).reduce(((e,t)=>e+(b.test(t)?S:""===t?I:N)),r)}function A(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],a=s===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},c);if(!l)return null;Object.assign(r,l.params);let u=e.route;o.push({params:r,pathname:j([i,l.pathname]),pathnameBase:U(j([i,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(i=j([i,l.pathnameBase]))}return o}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function M(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function k(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function x(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=x(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function P(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=c({},e),u(!i.pathname||!i.pathname.includes("?"),k("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),k("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),k("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:F(r),hash:z(i)}}(i,o),d=a&&"/"!==a&&a.endsWith("/"),p=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!d&&!p||(l.pathname+="/"),l}const j=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],H=(new Set(V),["get",...V]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const W=r.createContext(null);const Y=r.createContext(null);const q=r.createContext(null);const K=r.createContext(null);const Q=r.createContext({outlet:null,matches:[],isDataRoute:!1});const J=r.createContext(null);function X(){return null!=r.useContext(K)}function Z(){return X()||u(!1),r.useContext(K).location}function $(e){r.useContext(q).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Q);return e?function(){let{router:e}=pe(ue.UseNavigateStable),t=fe(de.UseNavigateStable),n=r.useRef(!1);$((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,G({fromRouteId:t},i)))}),[e,t]);return i}():function(){X()||u(!1);let e=r.useContext(W),{basename:t,future:n,navigator:i}=r.useContext(q),{matches:o}=r.useContext(Q),{pathname:s}=Z(),a=JSON.stringify(L(o,n.v7_relativeSplatPath)),c=r.useRef(!1);$((()=>{c.current=!0}));let l=r.useCallback((function(n,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof n)return void i.go(n);let o=P(n,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:j([t,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[t,i,a,s,e]);return l}()}const te=r.createContext(null);function ne(){let{matches:e}=r.useContext(Q),t=e[e.length-1];return t?t.params:{}}function re(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(q),{matches:o}=r.useContext(Q),{pathname:s}=Z(),a=JSON.stringify(L(o,i.v7_relativeSplatPath));return r.useMemo((()=>P(e,JSON.parse(a),s,"path"===n)),[e,a,s,n])}function ie(e,t,i,o){X()||u(!1);let{navigator:s}=r.useContext(q),{matches:a}=r.useContext(Q),c=a[a.length-1],l=c?c.params:{},d=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let p,h=Z();if(t){var f;let e="string"===typeof t?m(t):t;"/"===d||(null==(f=e.pathname)?void 0:f.startsWith(d))||u(!1),p=e}else p=h;let g=p.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let E=y(e,{pathname:v});let _=le(E&&E.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:j([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:j([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,o);return t&&_?r.createElement(K.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:n.Pop}},_):_}function oe(){let e=function(){var e;let t=r.useContext(J),n=he(de.UseRouteError),i=fe(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,null)}const se=r.createElement(oe,null);class ae extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Q.Provider,{value:this.props.routeContext},r.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(W);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Q.Provider,{value:t},i)}function le(e,t,n,i){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let a=e,c=null==(o=n)?void 0:o.errors;if(null!=c){let e=a.findIndex((e=>e.route.id&&(null==c?void 0:c[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,d=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){l=!0,a=d>=0?a.slice(0,d+1):[a[0]];break}}}return a.reduceRight(((e,i,o)=>{let s,u=!1,p=null,h=null;var f;n&&(s=c&&i.route.id?c[i.route.id]:void 0,p=i.route.errorElement||se,l&&(d<0&&0===o?(f="route-fallback",!1||me[f]||(me[f]=!0),u=!0,h=null):d===o&&(u=!0,h=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,o+1)),g=()=>{let t;return t=s?p:u?h:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ce,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?r.createElement(ae,{location:n.location,revalidation:n.revalidation,component:p,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function pe(e){let t=r.useContext(W);return t||u(!1),t}function he(e){let t=r.useContext(Y);return t||u(!1),t}function fe(e){let t=function(e){let t=r.useContext(Q);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const me={};i.startTransition;function ge(e){return function(e){let t=r.useContext(Q).outlet;return t?r.createElement(te.Provider,{value:e},t):t}(e.context)}function ve(e){u(!1)}function ye(e){let{basename:t="/",children:i=null,location:o,navigationType:s=n.Pop,navigator:a,static:c=!1,future:l}=e;X()&&u(!1);let d=t.replace(/^\/*/,"/"),p=r.useMemo((()=>({basename:d,navigator:a,static:c,future:G({v7_relativeSplatPath:!1},l)})),[d,l,a,c]);"string"===typeof o&&(o=m(o));let{pathname:h="/",search:f="",hash:g="",state:v=null,key:y="default"}=o,E=r.useMemo((()=>{let e=D(h,d);return null==e?null:{location:{pathname:e,search:f,hash:g,state:v,key:y},navigationType:s}}),[d,h,f,g,v,y,s]);return null==E?null:r.createElement(q.Provider,{value:p},r.createElement(K.Provider,{children:i,value:E}))}function Ee(e){let{children:t,location:n}=e;return ie(_e(t),n)}new Promise((()=>{}));r.Component;function _e(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,_e(e.props.children,o));e.type!==ve&&u(!1),e.props.index&&e.props.children&&u(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=_e(e.props.children,o)),n.push(s)})),n}function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Te=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(e){}new Map;const Ie=i.startTransition;a.flushSync,i.useId;function Ne(e){let{basename:t,children:n,future:i,window:o}=e,s=r.useRef();null==s.current&&(s.current=function(e){return void 0===e&&(e={}),g((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=m(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:f(t))}),(function(e,t){d("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}({window:o,v5Compat:!0}));let a=s.current,[c,l]=r.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},p=r.useCallback((e=>{u&&Ie?Ie((()=>l(e))):l(e)}),[l,u]);return r.useLayoutEffect((()=>a.listen(p)),[a,p]),r.createElement(ye,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:a,future:i})}const we="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oe=r.forwardRef((function(t,n){let i,{onClick:o,relative:s,reloadDocument:a,replace:c,state:l,target:d,to:p,preventScrollReset:h,unstable_viewTransition:m}=t,g=Se(t,Te),{basename:v}=r.useContext(q),y=!1;if("string"===typeof p&&Ce.test(p)&&(i=p,we))try{let e=new URL(window.location.href),t=p.startsWith("//")?new URL(e.protocol+p):new URL(p),n=D(t.pathname,v);t.origin===e.origin&&null!=n?p=n+t.search+t.hash:y=!0}catch(e){}let E=function(e,t){let{relative:n}=void 0===t?{}:t;X()||u(!1);let{basename:i,navigator:o}=r.useContext(q),{hash:s,pathname:a,search:c}=re(e,{relative:n}),l=a;return"/"!==i&&(l="/"===a?i:j([i,a])),o.createHref({pathname:l,search:c,hash:s})}(p,{relative:s}),_=function(e,t){let{target:n,replace:i,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:c}=void 0===t?{}:t,l=ee(),u=Z(),d=re(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:f(u)===f(d);l(e,{replace:n,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:c})}}),[u,l,d,i,o,n,e,s,a,c])}(p,{replace:c,state:l,target:d,preventScrollReset:h,relative:s,unstable_viewTransition:m});return r.createElement("a",be({},g,{href:i||E,onClick:y||a?o:function(e){o&&o(e),e.defaultPrevented||_(e)},ref:n,target:d}))}));var Ae,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));var Me=__webpack_require__(579);const De=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("footer",{children:[(0,Me.jsx)("div",{className:"footer-top",children:(0,Me.jsx)("div",{className:"container",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-5",children:[(0,Me.jsx)("h5",{children:"Useful Links"}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-sm-6",children:(0,Me.jsxs)("ul",{className:"list-unstyled",children:[(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Home"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/about-us",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," About Us"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/contact-us",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Contact Us"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/privacy-policy",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Privacy Policy"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/faq",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," FAQs"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"#.",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Blog"]})})]})}),(0,Me.jsx)("div",{className:"col-sm-6",children:(0,Me.jsxs)("ul",{className:"list-unstyled",children:[(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/terms-and-conditions",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Terms & Conditions"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"#.",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Refund & Cancellation Policy"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/customer_support",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Customer Support"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/disclaimer",children:[(0,Me.jsx)("i",{className:"fa fa-caret-right"})," Disclaimer"]})})]})})]})]}),(0,Me.jsxs)("div",{className:"col-md-3",children:[(0,Me.jsx)("h5",{children:"Social Links"}),(0,Me.jsxs)("ul",{className:"social-icon",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"#.",title:"",target:"_blank",children:(0,Me.jsx)("p",{children:(0,Me.jsx)("i",{className:"fa fa-facebook-f"})})})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"#.",title:"",target:"_blank",className:"mx-1",children:(0,Me.jsx)("p",{children:(0,Me.jsx)("i",{className:"fa fa-twitter"})})})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"#.",title:"",target:"_blank",children:(0,Me.jsx)("p",{children:(0,Me.jsx)("i",{className:"fa fa-linkedin"})})})})]}),(0,Me.jsx)("h5",{className:"mt20",children:"Download App"}),(0,Me.jsx)(Oe,{to:"#",children:(0,Me.jsx)("img",{src:"./assets/images/google-play.png",width:120,alt:""})}),(0,Me.jsx)(Oe,{to:"#",children:(0,Me.jsx)("img",{src:"./assets/images/app-store.png",width:120,alt:"",className:"mx-1"})})]}),(0,Me.jsxs)("div",{className:"col-md-4 addressBx",children:[(0,Me.jsx)("h5",{children:"Office Address"}),(0,Me.jsxs)("ul",{children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-home"})," ",(0,Me.jsx)("span",{className:"text16",children:"Dizital"})]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"}),"P\xf6seldorfer Weg 13, 20148 Hamburg"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-phone"})," ",(0,Me.jsx)(Oe,{to:"tel:03341816636",children:"+4901728250794"})]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-envelope"})," ",(0,Me.jsx)(Oe,{to:"mailto:support@dzital.de",children:"ak@dzital.com"})]})]})]})]})})}),(0,Me.jsx)("div",{className:"footer-bottom",children:(0,Me.jsx)("div",{className:"container",children:(0,Me.jsx)("div",{className:"row",children:(0,Me.jsx)("div",{className:"col-xs-12",align:"center",children:"\xa9 copyright 2023 dzital.de All rights reserved."})})})})]})});var ke=__webpack_require__(8139),xe=__webpack_require__.n(ke);const Le=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},Pe=r.createContext(null);var je=__webpack_require__(8168),Ue=__webpack_require__(8587);__webpack_require__(2740);function Fe(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function ze(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Be(e,t){return Object.keys(t).reduce((function(n,i){var o,s=n,a=s[Fe(i)],c=s[i],l=(0,Ue.A)(s,[Fe(i),i].map(ze)),u=t[i],d=function(e,t,n){var i=(0,r.useRef)(void 0!==e),o=(0,r.useState)(t),s=o[0],a=o[1],c=void 0!==e,l=i.current;return i.current=c,!c&&l&&s!==t&&a(t),[c?e:s,(0,r.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),a(e)}),[n])]}(c,a,e[u]),p=d[0],h=d[1];return(0,je.A)({},l,((o={})[i]=p,o[u]=h,o))}),e)}function Ve(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function He(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function Ge(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Ve.__suppressDeprecationWarning=!0,He.__suppressDeprecationWarning=!0,Ge.__suppressDeprecationWarning=!0;const We=["xxl","xl","lg","md","sm","xs"],Ye="xs",qe=r.createContext({prefixes:{},breakpoints:We,minBreakpoint:Ye}),{Consumer:Ke,Provider:Qe}=qe;function Je(e,t){const{prefixes:n}=(0,r.useContext)(qe);return e||n[t]||t}const Xe=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i,...o}=e;n=Je(n,"navbar-brand");const s=i||(o.href?"a":"span");return(0,Me.jsx)(s,{...o,ref:t,className:xe()(r,n)})}));Xe.displayName="NavbarBrand";const Ze=Xe;function $e(e){return e&&e.ownerDocument||document}function et(e,t){return function(e){var t=$e(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var tt=/([A-Z])/g;var nt=/^ms-/;function rt(e){return function(e){return e.replace(tt,"-$1").toLowerCase()}(e).replace(nt,"-ms-")}var it=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const ot=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(rt(t))||et(e).getPropertyValue(rt(t));Object.keys(t).forEach((function(i){var o=t[i];o||0===o?!function(e){return!(!e||!it.test(e))}(i)?n+=rt(i)+": "+o+";":r+=i+"("+o+") ":e.style.removeProperty(rt(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},st(e,t)}function at(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,st(e,t)}const ct=!1,lt=r.createContext(null);var ut="unmounted",dt="exited",pt="entering",ht="entered",ft="exiting",mt=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=dt,r.appearStatus=pt):i=ht:i=t.unmountOnExit||t.mountOnEnter?ut:dt,r.state={status:i},r.nextCallback=null,r}at(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===ut?{status:dt}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==pt&&n!==ht&&(t=pt):n!==pt&&n!==ht||(t=ft)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===pt){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===dt&&this.setState({status:ut})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[s.findDOMNode(this),r],o=i[0],a=i[1],c=this.getTimeouts(),l=r?c.appear:c.enter;!e&&!n||ct?this.safeSetState({status:ht},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:pt},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:ht},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!ct?(this.props.onExit(r),this.safeSetState({status:ft},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:dt},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:dt},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===ut)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,Ue.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(lt.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},t}(r.Component);function gt(){}mt.contextType=lt,mt.propTypes={},mt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:gt,onEntering:gt,onEntered:gt,onExit:gt,onExiting:gt,onExited:gt},mt.UNMOUNTED=ut,mt.EXITED=dt,mt.ENTERING=pt,mt.ENTERED=ht,mt.EXITING=ft;const vt=mt,yt=!("undefined"===typeof window||!window.document||!window.document.createElement);var Et=!1,_t=!1;try{var bt={get passive(){return Et=!0},get once(){return _t=Et=!0}};yt&&(window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,!0))}catch(e){}const St=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!_t){var i=r.once,o=r.capture,s=n;!_t&&i&&(s=n.__once||function e(r){this.removeEventListener(t,e,o),n.call(this,r)},n.__once=s),e.addEventListener(t,s,Et?r:o)}e.addEventListener(t,n,r)};const Tt=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const It=function(e,t,n,r){return St(e,t,n,r),function(){Tt(e,t,n,r)}};function Nt(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),o=It(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),o()}}function wt(e,t,n,r){null==n&&(n=function(e){var t=ot(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=Nt(e,n,r),o=It(e,"transitionend",t);return function(){i(),o()}}function Ct(e,t){const n=ot(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function Ot(e,t){const n=Ct(e,"transitionDuration"),r=Ct(e,"transitionDelay"),i=wt(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}const At=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>null!=e)).reduce(((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)};function Rt(e){e.offsetHeight}const Mt=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const Dt=function(e,t){return(0,r.useMemo)((()=>function(e,t){const n=Mt(e),r=Mt(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])};const kt=r.forwardRef(((e,t)=>{let{onEnter:n,onEntering:i,onEntered:o,onExit:a,onExiting:c,onExited:l,addEndListener:u,children:d,childRef:p,...h}=e;const f=(0,r.useRef)(null),m=Dt(f,p),g=e=>{var t;m((t=e)&&"setState"in t?s.findDOMNode(t):null!=t?t:null)},v=e=>t=>{e&&f.current&&e(f.current,t)},y=(0,r.useCallback)(v(n),[n]),E=(0,r.useCallback)(v(i),[i]),_=(0,r.useCallback)(v(o),[o]),b=(0,r.useCallback)(v(a),[a]),S=(0,r.useCallback)(v(c),[c]),T=(0,r.useCallback)(v(l),[l]),I=(0,r.useCallback)(v(u),[u]);return(0,Me.jsx)(vt,{ref:t,...h,onEnter:y,onEntered:_,onEntering:E,onExit:b,onExited:T,onExiting:S,addEndListener:I,nodeRef:f,children:"function"===typeof d?(e,t)=>d(e,{...t,ref:g}):r.cloneElement(d,{ref:g})})})),xt=kt,Lt={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Pt(e,t){const n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=Lt[e];return n+parseInt(ot(t,r[0]),10)+parseInt(ot(t,r[1]),10)}const jt={[dt]:"collapse",[ft]:"collapsing",[pt]:"collapsing",[ht]:"collapse show"},Ut=r.forwardRef(((e,t)=>{let{onEnter:n,onEntering:i,onEntered:o,onExit:s,onExiting:a,className:c,children:l,dimension:u="height",in:d=!1,timeout:p=300,mountOnEnter:h=!1,unmountOnExit:f=!1,appear:m=!1,getDimensionValue:g=Pt,...v}=e;const y="function"===typeof u?u():u,E=(0,r.useMemo)((()=>At((e=>{e.style[y]="0"}),n)),[y,n]),_=(0,r.useMemo)((()=>At((e=>{const t="scroll".concat(y[0].toUpperCase()).concat(y.slice(1));e.style[y]="".concat(e[t],"px")}),i)),[y,i]),b=(0,r.useMemo)((()=>At((e=>{e.style[y]=null}),o)),[y,o]),S=(0,r.useMemo)((()=>At((e=>{e.style[y]="".concat(g(y,e),"px"),Rt(e)}),s)),[s,g,y]),T=(0,r.useMemo)((()=>At((e=>{e.style[y]=null}),a)),[y,a]);return(0,Me.jsx)(xt,{ref:t,addEndListener:Ot,...v,"aria-expanded":v.role?d:null,onEnter:E,onEntering:_,onEntered:b,onExit:S,onExiting:T,childRef:l.ref,in:d,timeout:p,mountOnEnter:h,unmountOnExit:f,appear:m,children:(e,t)=>r.cloneElement(l,{...t,className:xe()(c,l.props.className,jt[e],"width"===y&&"collapse-horizontal")})})})),Ft=Ut,zt=r.createContext(null);zt.displayName="NavbarContext";const Bt=zt,Vt=r.forwardRef(((e,t)=>{let{children:n,bsPrefix:i,...o}=e;i=Je(i,"navbar-collapse");const s=(0,r.useContext)(Bt);return(0,Me.jsx)(Ft,{in:!(!s||!s.expanded),...o,children:(0,Me.jsx)("div",{ref:t,className:i,children:n})})}));Vt.displayName="NavbarCollapse";const Ht=Vt;const Gt=function(e){const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),t};function Wt(e){const t=Gt(e);return(0,r.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}const Yt=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,children:o,label:s="Toggle navigation",as:a="button",onClick:c,...l}=e;n=Je(n,"navbar-toggler");const{onToggle:u,expanded:d}=(0,r.useContext)(Bt)||{},p=Wt((e=>{c&&c(e),u&&u()}));return"button"===a&&(l.type="button"),(0,Me.jsx)(a,{...l,ref:t,onClick:p,"aria-label":s,className:xe()(i,n,!d&&"collapsed"),children:o||(0,Me.jsx)("span",{className:"".concat(n,"-icon")})})}));Yt.displayName="NavbarToggle";const qt=Yt,Kt="undefined"!==typeof __webpack_require__.g&&__webpack_require__.g.navigator&&"ReactNative"===__webpack_require__.g.navigator.product,Qt="undefined"!==typeof document||Kt?r.useLayoutEffect:r.useEffect,Jt=new WeakMap,Xt=(e,t)=>{if(!e||!t)return;const n=Jt.get(t)||new Map;Jt.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function Zt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const n=Xt(e,t),[i,o]=(0,r.useState)((()=>!!n&&n.matches));return Qt((()=>{let n=Xt(e,t);if(!n)return o(!1);let r=Jt.get(t);const i=()=>{o(n.matches)};return n.refCount++,n.addListener(i),i(),()=>{n.removeListener(i),n.refCount--,n.refCount<=0&&(null==r||r.delete(n.media)),n=void 0}}),[e]),i}const $t=function(e){const t=Object.keys(e);function n(e,t){return e===t?t:e?"".concat(e," and ").concat(t):t}function i(n){const r=function(e){return t[Math.min(t.indexOf(e)+1,t.length-1)]}(n);let i=e[r];return i="number"===typeof i?"".concat(i-.2,"px"):"calc(".concat(i," - 0.2px)"),"(max-width: ".concat(i,")")}return function(t,o,s){let a;return"object"===typeof t?(a=t,s=o,o=!0):a={[t]:o=o||!0},Zt((0,r.useMemo)((()=>Object.entries(a).reduce(((t,r)=>{let[o,s]=r;return"up"!==s&&!0!==s||(t=n(t,function(t){let n=e[t];return"number"===typeof n&&(n="".concat(n,"px")),"(min-width: ".concat(n,")")}(o))),"down"!==s&&!0!==s||(t=n(t,i(o))),t}),"")),[JSON.stringify(a)]),s)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function en(t){void 0===t&&(t=$e());try{var n=t.activeElement;return n&&n.nodeName?n:null}catch(e){return t.body}}function tn(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function nn(e){const t=function(e){const t=(0,r.useRef)(e);return t.current=e,t}(e);(0,r.useEffect)((()=>()=>t.current()),[])}const rn="data-rr-ui-";function on(e){return"".concat(rn).concat(e)}const sn=on("modal-open");const an=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(ot(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(sn,""),ot(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(sn),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},cn=(0,r.createContext)(yt?window:void 0);cn.Provider;function ln(){return(0,r.useContext)(cn)}const un=(e,t)=>yt?null==e?(t||$e()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const dn=function(e){let{children:t,in:n,onExited:i,mountOnEnter:o,unmountOnExit:s}=e;const a=(0,r.useRef)(null),c=(0,r.useRef)(n),l=Wt(i);(0,r.useEffect)((()=>{n?c.current=!0:l(a.current)}),[n,l]);const u=Dt(a,t.ref),d=(0,r.cloneElement)(t,{ref:u});return n?d:s||!c.current&&o?null:d},pn=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function hn(e){let{onEnter:t,onEntering:n,onEntered:i,onExit:o,onExiting:s,onExited:a,addEndListener:c,children:l}=e,u=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,pn);const d=(0,r.useRef)(null),p=Dt(d,"function"===typeof l?null:l.ref),h=e=>t=>{e&&d.current&&e(d.current,t)},f=(0,r.useCallback)(h(t),[t]),m=(0,r.useCallback)(h(n),[n]),g=(0,r.useCallback)(h(i),[i]),v=(0,r.useCallback)(h(o),[o]),y=(0,r.useCallback)(h(s),[s]),E=(0,r.useCallback)(h(a),[a]),_=(0,r.useCallback)(h(c),[c]);return Object.assign({},u,{nodeRef:d},t&&{onEnter:f},n&&{onEntering:m},i&&{onEntered:g},o&&{onExit:v},s&&{onExiting:y},a&&{onExited:E},c&&{addEndListener:_},{children:"function"===typeof l?(e,t)=>l(e,Object.assign({},t,{ref:p})):(0,r.cloneElement)(l,{ref:p})})}const fn=["component"];const mn=r.forwardRef(((e,t)=>{let{component:n}=e;const r=hn(function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,fn));return(0,Me.jsx)(n,Object.assign({ref:t},r))})),gn=mn;function vn(e){let{children:t,in:n,onExited:i,onEntered:o,transition:s}=e;const[a,c]=(0,r.useState)(!n);n&&a&&c(!1);const l=function(e){let{in:t,onTransition:n}=e;const i=(0,r.useRef)(null),o=(0,r.useRef)(!0),s=Wt(n);return Qt((()=>{if(!i.current)return;let e=!1;return s({in:t,element:i.current,initial:o.current,isStale:()=>e}),()=>{e=!0}}),[t,s]),Qt((()=>(o.current=!1,()=>{o.current=!0})),[]),i}({in:!!n,onTransition:e=>{Promise.resolve(s(e)).then((()=>{e.isStale()||(e.in?null==o||o(e.element,e.initial):(c(!0),null==i||i(e.element)))}),(t=>{throw e.in||c(!0),t}))}}),u=Dt(l,t.ref);return a&&!n?null:(0,r.cloneElement)(t,{ref:u})}function yn(e,t,n){return e?(0,Me.jsx)(gn,Object.assign({},n,{component:e})):t?(0,Me.jsx)(vn,Object.assign({},n,{transition:t})):(0,Me.jsx)(dn,Object.assign({},n))}const En=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let _n;function bn(e){const t=ln(),n=e||function(e){return _n||(_n=new an({ownerDocument:null==e?void 0:e.document})),_n}(t),i=(0,r.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:(0,r.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,r.useCallback)((e=>{i.current.backdrop=e}),[])})}const Sn=(0,r.forwardRef)(((e,t)=>{let{show:n=!1,role:i="dialog",className:o,style:a,children:c,backdrop:l=!0,keyboard:u=!0,onBackdropClick:d,onEscapeKeyDown:p,transition:h,runTransition:f,backdropTransition:m,runBackdropTransition:g,autoFocus:v=!0,enforceFocus:y=!0,restoreFocus:E=!0,restoreFocusOptions:_,renderDialog:b,renderBackdrop:S=(e=>(0,Me.jsx)("div",Object.assign({},e))),manager:T,container:I,onShow:N,onHide:w=(()=>{}),onExit:C,onExited:O,onExiting:A,onEnter:R,onEntering:M,onEntered:D}=e,k=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,En);const x=ln(),L=function(e,t){const n=ln(),[i,o]=(0,r.useState)((()=>un(e,null==n?void 0:n.document)));if(!i){const t=un(e);t&&o(t)}return(0,r.useEffect)((()=>{t&&i&&t(i)}),[t,i]),(0,r.useEffect)((()=>{const t=un(e);t!==i&&o(t)}),[e,i]),i}(I),P=bn(T),j=function(){const e=(0,r.useRef)(!0),t=(0,r.useRef)((()=>e.current));return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}(),U=function(e){const t=(0,r.useRef)(null);return(0,r.useEffect)((()=>{t.current=e})),t.current}(n),[F,z]=(0,r.useState)(!n),B=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(()=>P),[P]),yt&&!U&&n&&(B.current=en(null==x?void 0:x.document)),n&&F&&z(!1);const V=Wt((()=>{if(P.add(),K.current=It(document,"keydown",Y),q.current=It(document,"focus",(()=>setTimeout(G)),!0),N&&N(),v){var e,t;const n=en(null!=(e=null==(t=P.dialog)?void 0:t.ownerDocument)?e:null==x?void 0:x.document);P.dialog&&n&&!tn(P.dialog,n)&&(B.current=n,P.dialog.focus())}})),H=Wt((()=>{var e;(P.remove(),null==K.current||K.current(),null==q.current||q.current(),E)&&(null==(e=B.current)||null==e.focus||e.focus(_),B.current=null)}));(0,r.useEffect)((()=>{n&&L&&V()}),[n,L,V]),(0,r.useEffect)((()=>{F&&H()}),[F,H]),nn((()=>{H()}));const G=Wt((()=>{if(!y||!j()||!P.isTopModal())return;const e=en(null==x?void 0:x.document);P.dialog&&e&&!tn(P.dialog,e)&&P.dialog.focus()})),W=Wt((e=>{e.target===e.currentTarget&&(null==d||d(e),!0===l&&w())})),Y=Wt((e=>{u&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&P.isTopModal()&&(null==p||p(e),e.defaultPrevented||w())})),q=(0,r.useRef)(),K=(0,r.useRef)();if(!L)return null;const Q=Object.assign({role:i,ref:P.setDialogRef,"aria-modal":"dialog"===i||void 0},k,{style:a,className:o,tabIndex:-1});let J=b?b(Q):(0,Me.jsx)("div",Object.assign({},Q,{children:r.cloneElement(c,{role:"document"})}));J=yn(h,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:C,onExiting:A,onExited:function(){z(!0),null==O||O(...arguments)},onEnter:R,onEntering:M,onEntered:D,children:J});let X=null;return l&&(X=S({ref:P.setBackdropRef,onClick:W}),X=yn(m,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:X})),(0,Me.jsx)(Me.Fragment,{children:s.createPortal((0,Me.jsxs)(Me.Fragment,{children:[X,J]}),L)})}));Sn.displayName="Modal";const Tn=Object.assign(Sn,{Manager:an}),In={[pt]:"show",[ht]:"show"},Nn=r.forwardRef(((e,t)=>{let{className:n,children:i,transitionClasses:o={},onEnter:s,...a}=e;const c={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},l=(0,r.useCallback)(((e,t)=>{Rt(e),null==s||s(e,t)}),[s]);return(0,Me.jsx)(xt,{ref:t,addEndListener:Ot,...c,onEnter:l,childRef:i.ref,children:(e,t)=>r.cloneElement(i,{...t,className:xe()("fade",n,i.props.className,In[e],o[e])})})}));Nn.displayName="Fade";const wn=Nn,Cn=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=Je(r,"offcanvas-body"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));Cn.displayName="OffcanvasBody";const On=Cn,An={[pt]:"show",[ht]:"show"},Rn=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,children:o,in:s=!1,mountOnEnter:a=!1,unmountOnExit:c=!1,appear:l=!1,...u}=e;return n=Je(n,"offcanvas"),(0,Me.jsx)(xt,{ref:t,addEndListener:Ot,in:s,mountOnEnter:a,unmountOnExit:c,appear:l,...u,childRef:o.ref,children:(e,t)=>r.cloneElement(o,{...t,className:xe()(i,o.props.className,(e===pt||e===ft)&&"".concat(n,"-toggling"),An[e])})})}));Rn.displayName="OffcanvasToggling";const Mn=Rn,Dn=r.createContext({onHide(){}});var kn=__webpack_require__(5173),xn=__webpack_require__.n(kn);const Ln={"aria-label":xn().string,onClick:xn().func,variant:xn().oneOf(["white"])},Pn=r.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":i="Close",...o}=e;return(0,Me.jsx)("button",{ref:t,type:"button",className:xe()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":i,...o})}));Pn.displayName="CloseButton",Pn.propTypes=Ln;const jn=Pn,Un=r.forwardRef(((e,t)=>{let{closeLabel:n="Close",closeVariant:i,closeButton:o=!1,onHide:s,children:a,...c}=e;const l=(0,r.useContext)(Dn),u=Wt((()=>{null==l||l.onHide(),null==s||s()}));return(0,Me.jsxs)("div",{ref:t,...c,children:[a,o&&(0,Me.jsx)(jn,{"aria-label":n,variant:i,onClick:u})]})})),Fn=Un,zn=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:o=!1,...s}=e;return n=Je(n,"offcanvas-header"),(0,Me.jsx)(Fn,{ref:t,...s,className:xe()(r,n),closeLabel:i,closeButton:o})}));zn.displayName="OffcanvasHeader";const Bn=zn,Vn=(Hn="h5",r.forwardRef(((e,t)=>(0,Me.jsx)("div",{...e,ref:t,className:xe()(e.className,Hn)}))));var Hn;const Gn=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=Vn,...o}=e;return r=Je(r,"offcanvas-title"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));Gn.displayName="OffcanvasTitle";const Wn=Gn;var Yn=Function.prototype.bind.call(Function.prototype.call,[].slice);function qn(e,t){return Yn(e.querySelectorAll(t))}function Kn(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Qn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Jn=".sticky-top",Xn=".navbar-toggler";class Zn extends an{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,ot(t,{[e]:"".concat(parseFloat(ot(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],ot(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(function(e,t){e.classList?e.classList.add(t):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}(t,"modal-open"),!e.scrollBarWidth)return;const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";qn(t,Qn).forEach((t=>this.adjustAndStore(n,t,e.scrollBarWidth))),qn(t,Jn).forEach((t=>this.adjustAndStore(r,t,-e.scrollBarWidth))),qn(t,Xn).forEach((t=>this.adjustAndStore(r,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();!function(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=Kn(e.className,t):e.setAttribute("class",Kn(e.className&&e.className.baseVal||"",t))}(t,"modal-open");const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";qn(t,Qn).forEach((e=>this.restore(n,e))),qn(t,Jn).forEach((e=>this.restore(r,e))),qn(t,Xn).forEach((e=>this.restore(r,e)))}}let $n;const er=Zn;function tr(e){return(0,Me.jsx)(Mn,{...e})}function nr(e){return(0,Me.jsx)(wn,{...e})}const rr=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,children:o,"aria-labelledby":s,placement:a="start",responsive:c,show:l=!1,backdrop:u=!0,keyboard:d=!0,scroll:p=!1,onEscapeKeyDown:h,onShow:f,onHide:m,container:g,autoFocus:v=!0,enforceFocus:y=!0,restoreFocus:E=!0,restoreFocusOptions:_,onEntered:b,onExit:S,onExiting:T,onEnter:I,onEntering:N,onExited:w,backdropClassName:C,manager:O,renderStaticNode:A=!1,...R}=e;const M=(0,r.useRef)();n=Je(n,"offcanvas");const{onToggle:D}=(0,r.useContext)(Bt)||{},[k,x]=(0,r.useState)(!1),L=$t(c||"xs","up");(0,r.useEffect)((()=>{x(c?l&&!L:l)}),[l,c,L]);const P=Wt((()=>{null==D||D(),null==m||m()})),j=(0,r.useMemo)((()=>({onHide:P})),[P]);const U=(0,r.useCallback)((e=>(0,Me.jsx)("div",{...e,className:xe()("".concat(n,"-backdrop"),C)})),[C,n]),F=e=>(0,Me.jsx)("div",{...e,...R,className:xe()(i,c?"".concat(n,"-").concat(c):n,"".concat(n,"-").concat(a)),"aria-labelledby":s,children:o});return(0,Me.jsxs)(Me.Fragment,{children:[!k&&(c||A)&&F({}),(0,Me.jsx)(Dn.Provider,{value:j,children:(0,Me.jsx)(Tn,{show:k,ref:t,backdrop:u,container:g,keyboard:d,autoFocus:v,enforceFocus:y&&!p,restoreFocus:E,restoreFocusOptions:_,onEscapeKeyDown:h,onShow:f,onHide:P,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==I||I(e,...n)},onEntering:N,onEntered:b,onExit:S,onExiting:T,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==w||w(...n)},manager:O||(p?(M.current||(M.current=new er({handleContainerOverflow:!1})),M.current):function(e){return $n||($n=new Zn(e)),$n}()),transition:tr,backdropTransition:nr,renderBackdrop:U,renderDialog:F})})]})}));rr.displayName="Offcanvas";const ir=Object.assign(rr,{Body:On,Header:Bn,Title:Wn}),or=r.forwardRef(((e,t)=>{const n=(0,r.useContext)(Bt);return(0,Me.jsx)(ir,{ref:t,show:!(null==n||!n.expanded),...e,renderStaticNode:!0})}));or.displayName="NavbarOffcanvas";const sr=or,ar=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...o}=e;return r=Je(r,"navbar-text"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));ar.displayName="NavbarText";const cr=ar,lr=r.forwardRef(((e,t)=>{const{bsPrefix:n,expand:i=!0,variant:o="light",bg:s,fixed:a,sticky:c,className:l,as:u="nav",expanded:d,onToggle:p,onSelect:h,collapseOnSelect:f=!1,...m}=Be(e,{expanded:"onToggle"}),g=Je(n,"navbar"),v=(0,r.useCallback)((function(){null==h||h(...arguments),f&&d&&(null==p||p(!1))}),[h,f,d,p]);void 0===m.role&&"nav"!==u&&(m.role="navigation");let y="".concat(g,"-expand");"string"===typeof i&&(y="".concat(y,"-").concat(i));const E=(0,r.useMemo)((()=>({onToggle:()=>null==p?void 0:p(!d),bsPrefix:g,expanded:!!d,expand:i})),[g,d,i,p]);return(0,Me.jsx)(Bt.Provider,{value:E,children:(0,Me.jsx)(Pe.Provider,{value:v,children:(0,Me.jsx)(u,{ref:t,...m,className:xe()(l,g,i&&y,o&&"".concat(g,"-").concat(o),s&&"bg-".concat(s),c&&"sticky-".concat(c),a&&"fixed-".concat(a))})})})}));lr.displayName="Navbar";const ur=Object.assign(lr,{Brand:Ze,Collapse:Ht,Offcanvas:sr,Text:cr,Toggle:qt}),dr=r.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:i="div",className:o,...s}=e;const a=Je(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,Me.jsx)(i,{ref:t,...s,className:xe()(o,r?"".concat(a).concat(c):a)})}));dr.displayName="Container";const pr=dr;__webpack_require__(6440);const hr={type:xn().string,tooltip:xn().bool,as:xn().elementType},fr=r.forwardRef(((e,t)=>{let{as:n="div",className:r,type:i="valid",tooltip:o=!1,...s}=e;return(0,Me.jsx)(n,{...s,ref:t,className:xe()(r,"".concat(i,"-").concat(o?"tooltip":"feedback"))})}));fr.displayName="Feedback",fr.propTypes=hr;const mr=fr,gr=r.createContext({}),vr=r.forwardRef(((e,t)=>{let{bsPrefix:n,type:i,size:o,htmlSize:s,id:a,className:c,isValid:l=!1,isInvalid:u=!1,plaintext:d,readOnly:p,as:h="input",...f}=e;const{controlId:m}=(0,r.useContext)(gr);return n=Je(n,"form-control"),(0,Me.jsx)(h,{...f,type:i,size:s,ref:t,readOnly:p,id:a||m,className:xe()(c,d?"".concat(n,"-plaintext"):n,o&&"".concat(n,"-").concat(o),"color"===i&&"".concat(n,"-color"),l&&"is-valid",u&&"is-invalid")})}));vr.displayName="FormControl";const yr=Object.assign(vr,{Feedback:mr}),Er=["as","disabled"];function _r(e){let{tagName:t,disabled:n,href:r,target:i,rel:o,role:s,onClick:a,tabIndex:c=0,type:l}=e;t||(t=null!=r||null!=i||null!=o?"a":"button");const u={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},u];const d=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=s?s:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?o:void 0,onClick:d,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),d(e))}},u]}const br=r.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Er);const[o,{tagName:s}]=_r(Object.assign({tagName:n,disabled:r},i));return(0,Me.jsx)(s,Object.assign({},i,o,{ref:t}))}));br.displayName="Button";const Sr=br,Tr=r.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:o,active:s=!1,disabled:a=!1,className:c,...l}=e;const u=Je(r,"btn"),[d,{tagName:p}]=_r({tagName:n,disabled:a,...l}),h=p;return(0,Me.jsx)(h,{...d,...l,ref:t,disabled:a,className:xe()(c,u,s&&"active",i&&"".concat(u,"-").concat(i),o&&"".concat(u,"-").concat(o),l.href&&a&&"disabled")})}));Tr.displayName="Button";const Ir=Tr;__webpack_require__(9197);const Nr=r.createContext(null);Nr.displayName="NavContext";const wr=Nr,Cr=r.createContext(null),Or=["as","active","eventKey"];function Ar(e){let{key:t,onClick:n,active:i,id:o,role:s,disabled:a}=e;const c=(0,r.useContext)(Pe),l=(0,r.useContext)(wr),u=(0,r.useContext)(Cr);let d=i;const p={role:s};if(l){s||"tablist"!==l.role||(p.role="tab");const e=l.getControllerId(null!=t?t:null),n=l.getControlledId(null!=t?t:null);p[on("event-key")]=t,p.id=e||o,d=null==i&&null!=t?l.activeKey===t:i,!d&&(null!=u&&u.unmountOnExit||null!=u&&u.mountOnEnter)||(p["aria-controls"]=n)}return"tab"===p.role&&(p["aria-selected"]=d,d||(p.tabIndex=-1),a&&(p.tabIndex=-1,p["aria-disabled"]=!0)),p.onClick=Wt((e=>{a||(null==n||n(e),null!=t&&c&&!e.isPropagationStopped()&&c(t,e))})),[p,{isActive:d}]}const Rr=r.forwardRef(((e,t)=>{let{as:n=Sr,active:r,eventKey:i}=e,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Or);const[s,a]=Ar(Object.assign({key:Le(i,o.href),active:r},o));return s[on("active")]=a.isActive,(0,Me.jsx)(n,Object.assign({},o,s,{ref:t}))}));Rr.displayName="NavItem";const Mr=Rr,Dr=["as","onSelect","activeKey","role","onKeyDown"];const kr=()=>{},xr=on("event-key"),Lr=r.forwardRef(((e,t)=>{let{as:n="div",onSelect:i,activeKey:o,role:s,onKeyDown:a}=e,c=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Dr);const l=function(){const[,e]=(0,r.useReducer)((e=>!e),!1);return e}(),u=(0,r.useRef)(!1),d=(0,r.useContext)(Pe),p=(0,r.useContext)(Cr);let h,f;p&&(s=s||"tablist",o=p.activeKey,h=p.getControlledId,f=p.getControllerId);const m=(0,r.useRef)(null),g=e=>{const t=m.current;if(!t)return null;const n=qn(t,"[".concat(xr,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const i=n.indexOf(r);if(-1===i)return null;let o=i+e;return o>=n.length&&(o=0),o<0&&(o=n.length-1),n[o]},v=(e,t)=>{null!=e&&(null==i||i(e,t),null==d||d(e,t))};(0,r.useEffect)((()=>{if(m.current&&u.current){const e=m.current.querySelector("[".concat(xr,"][aria-selected=true]"));null==e||e.focus()}u.current=!1}));const y=Dt(t,m);return(0,Me.jsx)(Pe.Provider,{value:v,children:(0,Me.jsx)(wr.Provider,{value:{role:s,activeKey:Le(o),getControlledId:h||kr,getControllerId:f||kr},children:(0,Me.jsx)(n,Object.assign({},c,{onKeyDown:e=>{if(null==a||a(e),!p)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=g(-1);break;case"ArrowRight":case"ArrowDown":t=g(1);break;default:return}var n;t&&(e.preventDefault(),v(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),u.current=!0,l())},ref:y,role:s}))})})}));Lr.displayName="Nav";const Pr=Object.assign(Lr,{Item:Mr}),jr=r.createContext(null);jr.displayName="CardHeaderContext";const Ur=jr,Fr=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=Je(r,"nav-item"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));Fr.displayName="NavItem";const zr=Fr;new WeakMap;const Br=["onKeyDown"];const Vr=r.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Br);const[i]=_r(Object.assign({tagName:"a"},r)),o=Wt((e=>{i.onKeyDown(e),null==n||n(e)}));return(s=r.href)&&"#"!==s.trim()&&"button"!==r.role?(0,Me.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,Me.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:o}));var s}));Vr.displayName="Anchor";const Hr=Vr,Gr=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i=Hr,active:o,eventKey:s,disabled:a=!1,...c}=e;n=Je(n,"nav-link");const[l,u]=Ar({key:Le(s,c.href),active:o,disabled:a,...c});return(0,Me.jsx)(i,{...c,...l,ref:t,disabled:a,className:xe()(r,n,a&&"disabled",u.isActive&&"active")})}));Gr.displayName="NavLink";const Wr=Gr,Yr=r.forwardRef(((e,t)=>{const{as:n="div",bsPrefix:i,variant:o,fill:s=!1,justify:a=!1,navbar:c,navbarScroll:l,className:u,activeKey:d,...p}=Be(e,{activeKey:"onSelect"}),h=Je(i,"nav");let f,m,g=!1;const v=(0,r.useContext)(Bt),y=(0,r.useContext)(Ur);return v?(f=v.bsPrefix,g=null==c||c):y&&({cardHeaderBsPrefix:m}=y),(0,Me.jsx)(Pr,{as:n,ref:t,activeKey:d,className:xe()(u,{[h]:!g,["".concat(f,"-nav")]:g,["".concat(f,"-nav-scroll")]:g&&l,["".concat(m,"-").concat(o)]:!!m,["".concat(h,"-").concat(o)]:!!o,["".concat(h,"-fill")]:s,["".concat(h,"-justified")]:a}),...p})}));Yr.displayName="Nav";const qr=Object.assign(Yr,{Item:zr,Link:Wr}),Kr=(0,r.createContext)(),Qr=()=>(0,r.useContext)(Kr),Jr=r.forwardRef(((e,t)=>{let{bsPrefix:n,variant:r,animation:i="border",size:o,as:s="div",className:a,...c}=e;n=Je(n,"spinner");const l="".concat(n,"-").concat(i);return(0,Me.jsx)(s,{ref:t,...c,className:xe()(a,l,o&&"".concat(l,"-").concat(o),r&&"text-".concat(r))})}));Jr.displayName="Spinner";const Xr=Jr;const Zr=function(){const{userData:e,serviceList:t,getSubServiceList:n,subServiceList:i}=Qr(),[o,s]=(0,r.useState)(null),[a,c]=(0,r.useState)("Loading..."),[l,u]=(0,r.useState)(!0),[d,p]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),m=ee(),g=async()=>{try{await new Promise(((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{const{latitude:n,longitude:r}=t.coords;s({latitude:n,longitude:r}),localStorage.setItem("lat",JSON.stringify(n)),localStorage.setItem("lon",JSON.stringify(r)),u(!1),e({latitude:n,longitude:r})}),(e=>{u(!1),t(e)})):(u(!1),t(new Error("Geolocation is not supported")))}));const e=o.latitude,t=o.longitude,n="8d1d16020bfb4d1994ea0f1ce0ca60ca",r=await fetch("https://api.opencagedata.com/geocode/v1/json?q=".concat(e,"+").concat(t,"&key=").concat(n)),i=await r.json();if(i.results&&i.results.length>0){const e=i.results[0].components.country;c(e)}else c("NA")}catch(e){c("NA")}};(0,r.useEffect)((()=>{g()}),[l]);const v=e=>{p(e),n(e)},y=()=>{p(null)},E=()=>{p(null)},_=()=>{f(!1)};return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsxs)("section",{className:"sticky-top",children:[(0,Me.jsx)(ur,{expand:"lg",bg:"light",className:"border-bottom border-1",children:(0,Me.jsxs)(pr,{children:[(0,Me.jsx)(ur.Brand,{as:Oe,to:"/",children:(0,Me.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAXCAYAAAD9VOo7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDExNi4xNjQ3NjYsIDIwMjEvMDIvMTktMjM6MTA6MDcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0idXVpZDo1RDIwODkyNDkzQkZEQjExOTE0QTg1OTBEMzE1MDhDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEODQ3RkE0MzZDQUUxMUVFQTI0MkYxNjhERUJBMzg3MCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEODQ3RkE0MjZDQUUxMUVFQTI0MkYxNjhERUJBMzg3MCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBJbGx1c3RyYXRvciAyNy42IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTY5Q0M2NkU2Q0FFMTFFRTk3QjRGQjdFNDYzNEJDMzAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTY5Q0M2NkY2Q0FFMTFFRTk3QjRGQjdFNDYzNEJDMzAiLz4gPGRjOnRpdGxlPiA8cmRmOkFsdD4gPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij5Eeml0YWxfQnJpZWZib2dlbl9EaWdpdGFsPC9yZGY6bGk+IDwvcmRmOkFsdD4gPC9kYzp0aXRsZT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7XaJf1AAAFnElEQVR42sRZa2xURRid3baCtirSoEhNDD6xKj5QUTEKPoqAVF7iI/zQBOObH/hWjKhRQyAY0R82RmPwkRheulQQjFEUYzS1NUpQSkBFCNgWSaUt8tr1fOmZ8GVy7+7cXXvvSU529s7s3Zn55ntO6vHmTcZBFfgeeCa4G0yZYMjzA2AH+CPYCP4UMvYl8BZwlykMeW8WzIEngU3gDPbdDz4MdoNzweXgOZzvYXB/wPtyzrvdvoHgOvAB9fw28BmwHHwZfMf4YQF/uwa8FzxoIqI84JkI5DLw5Ajvkc1+EcyAT4MbnP5LwDPIqOhS7aHgaWxX83MweLEpDYfACrWBspm1bN8TQSAXgDXghcVOJEgg/4Arufg9eTSkDDwRPF0Jrx68gfxGjV3LBbfnmUsZ+0U77lZzWxIinH383AZ+qp7J79NgDzgAvJHv3sFxVey3GnI8+L0SxnDwKvU/l4Mjwe889nMPP7uL0Y4wgfTwVPhCFjsanMPPo8FVYJ1axALSB7PUvD4E56m+dEB7Czgu5F2ikS0Uwnpwpsf/T+SaNG72FEhamcaUYy69kDalQ2z35+AYsIHPjqMJi4rJ4KvqtD1R4txEQ/qzfaznAZ0c8HwKWGliQJCGyB+/S6fekcdkaaf4Nfggbe8J4HTwOp7c1Z5zGQQuUt8fBX8vcX1pdUp9Dt94cATbGZqe28GzwUng+0kIRE73FXSWvujmgrPc1Ol8PiGCQF4AT2F7MfiWiR/1qi0RXCcFYvsSEUgnwzZx6n+HaEiOvuZaCq6TwjB05s2MfK4Ej2J4nA93Kb+1g9oRNwZTQ2xgs4YH7S+G33Xck9/iFohs9J2ev8/QCbrmoIUCOQ88l9/DMISxvsVTYFsCAqlT0WKjypk+4mEZwDENfTmJUp16/5Dn2/hZ4WH65vMEGi52sUkGU1R7mWovdfItE7dAKpkI/eJhOtIF4nFTIDq5D7yD7T+oHUlgOPMVwVZGjRbrVKI7hmY4VoFUMbEbBl5aQuar85QgDGVJxWI2fVYSmAb2Y3s1faLFQZowu19T4xZINzNXCXk3/g+m7FDImFdol217uUkOE1R7SUD/MrWO8Ux+Y3PqXTwxKRU55ctDglDtlGJczGb2K2hlIS8pXKNqYV+RLqTA+RnzqmE0XavidOqHeSIKCWRvnpKFDaG3On21jqmaRa1MCpMc7Qg7ZEtDAoA+15BjuGGnOrZUI0tNGhGgKeLEL2K7mbUmjYXKXs9jvJ8UqlWpRA7F2jxjpa+dFYV6JrHb4xCIVD9vjZipV5ojxbTrwbP4/Etn3HPgWCWsJ02ymMqDZze8Nc9Y2fxPmKMNYjViYRwCETP0K/t2e/iQgcw7rJY8pvoyaqzcFcxRfY+YIqqhfVgq+dhj/EqVNE+MSyBdPMXZAj4k52xoGRdl4/Q3TO9NojWDDcpnidC+SFgYtdRmwWbPKK+Ra5ILqNGm9+KtKQ6nfkA59TBqYYxjqGzDR7nKnav65RZxJNtvG/+7kb4ulfRT5ZG9Hr+RfVmhvo8NGfdvsdpv74zPBz8gJYd4nk4r6MbQaobE4jWsV9Wo/lYutk2pts7A9/P9Q0z+oqO9zRNH+izD56wTWBRCLmR8mn7SYkWEPcvwsKXoR+arddj/kHv+RWqPy8yRq4Asg4ntPKg9LMlIgXVDOcsXsvB9FIi0Z5hod+oWr9Nxd6hnMwPKJVEgkd5rFEilRx1No0JVCvQF1U2m92pWIDeB30aYj5gsuf+5miWXadw3GxAZHtCHCrynjcLsoWURKzNKBPKD6S2j/6x8yCZKtN0El99TzFVEzaU8vZ4x/J8BYyUw2MkJpNVJSUUIGGz4LaX5XVxEp8fmSSjbwjKNDr9HcW3ynmLuXd6kBbF3R1YgW7jWncoduJdkOUZpm5WZ3Mj9bPpPgAEA0zhTu/wCqYQAAAAASUVORK5CYII=",alt:"logo"})}),(0,Me.jsx)("div",{className:"newSearchBx d-none d-lg-block",children:(0,Me.jsxs)("form",{className:"input-group width100",children:[(0,Me.jsx)(yr,{type:"text",placeholder:"Search...",className:"form-control"}),(0,Me.jsx)(Ir,{variant:"primary text-white",type:"button",id:"button-addon2",children:(0,Me.jsx)("i",{className:"fa fa-search"})})]})}),(0,Me.jsxs)("ul",{className:"navListInline",children:[!0===l?(0,Me.jsx)(Xr,{animation:"border",variant:"info",size:"sm",className:"ms-2"}):(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/",className:"nav-link",children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," ",a," "]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/",className:"nav-link",children:[(0,Me.jsx)("i",{className:"fa fa-language"})," ",(0,Me.jsx)("span",{children:"English"})]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/account",className:"nav-link",children:[(0,Me.jsx)("i",{className:"fa fa-user"})," ",(0,Me.jsx)("span",{children:e._id?"".concat(e.name):"Log In"})]})})]})]})}),(0,Me.jsx)(ur,{expand:"lg",className:"bg-theme mainNav",children:(0,Me.jsx)(pr,{children:(0,Me.jsx)(ur.Collapse,{id:"basic-navbar-nav",children:(0,Me.jsx)(qr,{className:"me-auto mb-2 mb-lg-16",children:Array.isArray(t)&&(null===t||void 0===t?void 0:t.map((e=>(0,Me.jsxs)("li",{className:"nav-item dropdown mega-dropdown",onMouseEnter:()=>v(e._id),onMouseLeave:y,children:[(0,Me.jsx)(Oe,{className:"navList dropdown-toggle",role:"button",onClick:()=>m("/".concat(e.slug,"?category_id=").concat(e._id)),"data-bs-toggle":"dropdown","aria-expanded":d===e._id,children:e.title}),(0,Me.jsx)("div",{className:"dropdown-menu mega-dropdown-menu container ".concat(d===e._id?"show":""),onMouseEnter:()=>v(e._id),onMouseLeave:y,children:(0,Me.jsx)("div",{className:"row",children:Array.isArray(i)&&(null===i||void 0===i?void 0:i.map((t=>(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)("ul",{className:"linkList",children:(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/".concat(e.slug,"?sub_category=").concat(t._id),onClick:E,children:t.title})})},t._id)}))))})})]},e._id))))})})})}),(0,Me.jsx)("section",{className:"p-2 bg-theme d-block d-lg-none",children:(0,Me.jsx)(pr,{children:(0,Me.jsxs)("button",{className:"btn btn-primary text-white",onClick:()=>f(!h),"aria-controls":"offCanvasSidebar","aria-expanded":h?"true":"false",children:[(0,Me.jsx)("i",{className:"fas fa-bars"})," Menu"]})})})]}),(0,Me.jsxs)("div",{className:"offcanvas offcanvas-start ".concat(h?"show":""),"data-bs-scroll":"true",tabIndex:-1,id:"offCanvasSidebar","aria-labelledby":"offCanvasSidebarLabel",children:[(0,Me.jsxs)("div",{className:"offcanvas-header",children:[(0,Me.jsxs)("form",{className:"input-group width100",children:[(0,Me.jsx)(yr,{type:"text",placeholder:"Search...",className:"form-control"}),(0,Me.jsx)(Ir,{variant:"primary text-white",type:"button",id:"button-addon2",children:(0,Me.jsx)("i",{className:"fa fa-search"})})]}),(0,Me.jsx)("button",{type:"button",onClick:()=>f(!1),className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),(0,Me.jsx)("hr",{className:"m0"}),(0,Me.jsx)("div",{className:"offcanvas-body",children:Array.isArray(t)&&(null===t||void 0===t?void 0:t.map((e=>(0,Me.jsx)("div",{className:"accordion accordion-flush mobileMegaMenuBx",id:"megaMenuPart",children:(0,Me.jsxs)("div",{className:"accordion-item",children:[(0,Me.jsx)("h2",{className:"accordion-header",children:(0,Me.jsx)("button",{onClick:()=>{n(null===e||void 0===e?void 0:e._id),f(!0)},className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#categoryItem1".concat(e._id),"aria-expanded":"false","aria-controls":"categoryItem1",children:e.title})}),(0,Me.jsx)("div",{id:"categoryItem1".concat(e._id),className:"accordion-collapse collapse","data-bs-parent":"#megaMenuPart",children:(0,Me.jsx)("div",{children:(0,Me.jsx)("div",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-3",children:Array.isArray(i)&&(null===i||void 0===i?void 0:i.map((t=>(0,Me.jsx)("ul",{className:"linkList",children:(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/".concat(e.slug,"?sub_category=").concat(t._id),onClick:_,children:t.title})})},t._id))))})})})})]})},e._id))))})]})]})},$r=__webpack_require__.p+"static/media/Ad.6240261e0d77ac4574e0.jpg",ei=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-1 adBx",children:(0,Me.jsx)("div",{className:"sticky-top",children:(0,Me.jsx)("img",{src:$r,alt:""})})})}),ti=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),2e3),t(!1)})()}),[]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"About Us"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"About Us"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),!1===e?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"aboutus-content sticky-top",children:[(0,Me.jsxs)("h1",{children:["Welcome to ",(0,Me.jsx)("span",{children:"Dzital"})]}),(0,Me.jsx)("h4",{children:"Your tagline goes here"}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here."}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6 col-xs-12",children:(0,Me.jsxs)("div",{className:"serviceBoxItem text-center",children:[(0,Me.jsx)("img",{src:"./assets/images/vision.png",alt:""}),(0,Me.jsx)("div",{className:"title",children:(0,Me.jsx)("h4",{children:"Vision"})}),(0,Me.jsx)("div",{className:"text",children:(0,Me.jsx)("span",{children:"Lorem ipsum dolor sit amet, id quo eruditi eloquentiam. Assum decore te sed. Elitr scripta ocurreret qui ad."})})]})}),(0,Me.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6 col-xs-12",children:(0,Me.jsxs)("div",{className:"serviceBoxItem text-center",children:[(0,Me.jsx)("img",{src:"./assets/images/mission.png",alt:""}),(0,Me.jsx)("div",{className:"title",children:(0,Me.jsx)("h4",{children:"Mission"})}),(0,Me.jsx)("div",{className:"text",children:(0,Me.jsx)("span",{children:"Lorem ipsum dolor sit amet, id quo eruditi eloquentiam. Assum decore te sed. Elitr scripta ocurreret qui ad."})})]})})]})]})}),(0,Me.jsxs)("div",{className:"col-md-4",children:[(0,Me.jsx)("img",{src:"./assets/images/home-search.jpg",width:"100%",alt:""}),(0,Me.jsx)("img",{src:"./assets/images/job-search.jpg",width:"100%",alt:""}),(0,Me.jsx)("img",{src:"./assets/images/ecommerce.jpg",width:"100%",alt:""}),(0,Me.jsx)("img",{src:"./assets/images/vehicle-search.jpg",width:"100%",alt:""}),(0,Me.jsx)("img",{src:"./assets/images/online-education.jpg",width:"100%",alt:""})]})]})}),(0,Me.jsx)(ei,{})]})})})]})};function ni(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function ri(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((n=>{"undefined"===typeof e[n]?e[n]=t[n]:ni(t[n])&&ni(e[n])&&Object.keys(t[n]).length>0&&ri(e[n],t[n])}))}const ii={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function oi(){const e="undefined"!==typeof document?document:{};return ri(e,ii),e}const si={document:ii,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function ai(){const e="undefined"!==typeof window?window:{};return ri(e,si),e}function ci(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function li(){return Date.now()}function ui(e,t){void 0===t&&(t="x");const n=ai();let r,i,o;const s=function(e){const t=ai();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(i=s.transform||s.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map((e=>e.replace(",","."))).join(", ")),o=new n.WebKitCSSMatrix("none"===i?"":i)):(o=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=o.toString().split(",")),"x"===t&&(i=n.WebKitCSSMatrix?o.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(i=n.WebKitCSSMatrix?o.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),i||0}function di(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function pi(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let r=1;r<arguments.length;r+=1){const i=r<0||arguments.length<=r?void 0:arguments[r];if(void 0!==i&&null!==i&&(n=i,!("undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?n instanceof HTMLElement:n&&(1===n.nodeType||11===n.nodeType)))){const n=Object.keys(Object(i)).filter((e=>t.indexOf(e)<0));for(let t=0,r=n.length;t<r;t+=1){const r=n[t],o=Object.getOwnPropertyDescriptor(i,r);void 0!==o&&o.enumerable&&(di(e[r])&&di(i[r])?i[r].__swiper__?e[r]=i[r]:pi(e[r],i[r]):!di(e[r])&&di(i[r])?(e[r]={},i[r].__swiper__?e[r]=i[r]:pi(e[r],i[r])):e[r]=i[r])}}}var n;return e}function hi(e,t,n){e.style.setProperty(t,n)}function fi(e){let{swiper:t,targetPosition:n,side:r}=e;const i=ai(),o=-t.translate;let s,a=null;const c=t.params.speed;t.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(t.cssModeFrameID);const l=n>o?"next":"prev",u=(e,t)=>"next"===l&&e>=t||"prev"===l&&e<=t,d=()=>{s=(new Date).getTime(),null===a&&(a=s);const e=Math.max(Math.min((s-a)/c,1),0),l=.5-Math.cos(e*Math.PI)/2;let p=o+l*(n-o);if(u(p,n)&&(p=n),t.wrapperEl.scrollTo({[r]:p}),u(p,n))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout((()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[r]:p})})),void i.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=i.requestAnimationFrame(d)};d()}function mi(e){return e.querySelector(".swiper-slide-transform")||e.shadowRoot&&e.shadowRoot.querySelector(".swiper-slide-transform")||e}function gi(e,t){return void 0===t&&(t=""),[...e.children].filter((e=>e.matches(t)))}function vi(e){try{return void console.warn(e)}catch(t){}}function yi(e,t){void 0===t&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:function(e){return void 0===e&&(e=""),e.trim().split(" ").filter((e=>!!e.trim()))}(t)),n}function Ei(e,t){return ai().getComputedStyle(e,null).getPropertyValue(t)}function _i(e){let t,n=e;if(n){for(t=0;null!==(n=n.previousSibling);)1===n.nodeType&&(t+=1);return t}}function bi(e,t,n){const r=ai();return n?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function Si(e){return(Array.isArray(e)?e:[e]).filter((e=>!!e))}let Ti,Ii,Ni;function wi(){return Ti||(Ti=function(){const e=ai(),t=oi();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),Ti}function Ci(e){return void 0===e&&(e={}),Ii||(Ii=function(e){let{userAgent:t}=void 0===e?{}:e;const n=wi(),r=ai(),i=r.navigator.platform,o=t||r.navigator.userAgent,s={ios:!1,android:!1},a=r.screen.width,c=r.screen.height,l=o.match(/(Android);?[\s\/]+([\d.]+)?/);let u=o.match(/(iPad).*OS\s([\d_]+)/);const d=o.match(/(iPod)(.*OS\s([\d_]+))?/),p=!u&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h="Win32"===i;let f="MacIntel"===i;return!u&&f&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf("".concat(a,"x").concat(c))>=0&&(u=o.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),f=!1),l&&!h&&(s.os="android",s.android=!0),(u||p||d)&&(s.os="ios",s.ios=!0),s}(e)),Ii}function Oi(){return Ni||(Ni=function(){const e=ai(),t=Ci();let n=!1;function r(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(r()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,r]=t.split("Version/")[1].split(" ")[0].split(".").map((e=>Number(e)));n=e<16||16===e&&r<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),o=r();return{isSafari:n||o,needPerspectiveFix:n,need3dFix:o||i&&t.ios,isWebView:i}}()),Ni}var Ai={on(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;const i=n?"unshift":"push";return e.split(" ").forEach((e=>{r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},once(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;function i(){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];t.apply(r,o)}return i.__emitterProxy=t,r.on(e,i,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;const r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((e=>{"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach(((r,i)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,n,r;for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];"string"===typeof o[0]||Array.isArray(o[0])?(t=o[0],n=o.slice(1,o.length),r=e):(t=o[0].events,n=o[0].data,r=o[0].context||e),n.unshift(r);return(Array.isArray(t)?t:t.split(" ")).forEach((t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach((e=>{e.apply(r,[t,...n])})),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach((e=>{e.apply(r,n)}))})),e}};const Ri=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=t.closest(e.isElement?"swiper-slide":".".concat(e.params.slideClass));if(n){let t=n.querySelector(".".concat(e.params.lazyPreloaderClass));!t&&e.isElement&&(n.shadowRoot?t=n.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)):requestAnimationFrame((()=>{n.shadowRoot&&(t=n.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)),t&&t.remove())}))),t&&t.remove()}},Mi=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},Di=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const r="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),i=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const n=i,o=[n-t];return o.push(...Array.from({length:t}).map(((e,t)=>n+r+t))),void e.slides.forEach(((t,n)=>{o.includes(t.column)&&Mi(e,n)}))}const o=i+r-1;if(e.params.rewind||e.params.loop)for(let s=i-t;s<=o+t;s+=1){const t=(s%n+n)%n;(t<i||t>o)&&Mi(e,t)}else for(let s=Math.max(i-t,0);s<=Math.min(o+t,n-1);s+=1)s!==i&&(s>o||s<i)&&Mi(e,s)};var ki={updateSize:function(){const e=this;let t,n;const r=e.el;t="undefined"!==typeof e.params.width&&null!==e.params.width?e.params.width:r.clientWidth,n="undefined"!==typeof e.params.height&&null!==e.params.height?e.params.height:r.clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(Ei(r,"padding-left")||0,10)-parseInt(Ei(r,"padding-right")||0,10),n=n-parseInt(Ei(r,"padding-top")||0,10)-parseInt(Ei(r,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t,n){return parseFloat(t.getPropertyValue(e.getDirectionLabel(n))||0)}const n=e.params,{wrapperEl:r,slidesEl:i,size:o,rtlTranslate:s,wrongRTL:a}=e,c=e.virtual&&n.virtual.enabled,l=c?e.virtual.slides.length:e.slides.length,u=gi(i,".".concat(e.params.slideClass,", swiper-slide")),d=c?e.virtual.slides.length:u.length;let p=[];const h=[],f=[];let m=n.slidesOffsetBefore;"function"===typeof m&&(m=n.slidesOffsetBefore.call(e));let g=n.slidesOffsetAfter;"function"===typeof g&&(g=n.slidesOffsetAfter.call(e));const v=e.snapGrid.length,y=e.slidesGrid.length;let E=n.spaceBetween,_=-m,b=0,S=0;if("undefined"===typeof o)return;"string"===typeof E&&E.indexOf("%")>=0?E=parseFloat(E.replace("%",""))/100*o:"string"===typeof E&&(E=parseFloat(E)),e.virtualSize=-E,u.forEach((e=>{s?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""})),n.centeredSlides&&n.cssMode&&(hi(r,"--swiper-centered-offset-before",""),hi(r,"--swiper-centered-offset-after",""));const T=n.grid&&n.grid.rows>1&&e.grid;let I;T?e.grid.initSlides(u):e.grid&&e.grid.unsetSlides();const N="auto"===n.slidesPerView&&n.breakpoints&&Object.keys(n.breakpoints).filter((e=>"undefined"!==typeof n.breakpoints[e].slidesPerView)).length>0;for(let w=0;w<d;w+=1){let r;if(I=0,u[w]&&(r=u[w]),T&&e.grid.updateSlide(w,r,u),!u[w]||"none"!==Ei(r,"display")){if("auto"===n.slidesPerView){N&&(u[w].style[e.getDirectionLabel("width")]="");const i=getComputedStyle(r),o=r.style.transform,s=r.style.webkitTransform;if(o&&(r.style.transform="none"),s&&(r.style.webkitTransform="none"),n.roundLengths)I=e.isHorizontal()?bi(r,"width",!0):bi(r,"height",!0);else{const e=t(i,"width"),n=t(i,"padding-left"),o=t(i,"padding-right"),s=t(i,"margin-left"),a=t(i,"margin-right"),c=i.getPropertyValue("box-sizing");if(c&&"border-box"===c)I=e+s+a;else{const{clientWidth:t,offsetWidth:i}=r;I=e+n+o+s+a+(i-t)}}o&&(r.style.transform=o),s&&(r.style.webkitTransform=s),n.roundLengths&&(I=Math.floor(I))}else I=(o-(n.slidesPerView-1)*E)/n.slidesPerView,n.roundLengths&&(I=Math.floor(I)),u[w]&&(u[w].style[e.getDirectionLabel("width")]="".concat(I,"px"));u[w]&&(u[w].swiperSlideSize=I),f.push(I),n.centeredSlides?(_=_+I/2+b/2+E,0===b&&0!==w&&(_=_-o/2-E),0===w&&(_=_-o/2-E),Math.abs(_)<.001&&(_=0),n.roundLengths&&(_=Math.floor(_)),S%n.slidesPerGroup===0&&p.push(_),h.push(_)):(n.roundLengths&&(_=Math.floor(_)),(S-Math.min(e.params.slidesPerGroupSkip,S))%e.params.slidesPerGroup===0&&p.push(_),h.push(_),_=_+I+E),e.virtualSize+=I+E,b=I,S+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+g,s&&a&&("slide"===n.effect||"coverflow"===n.effect)&&(r.style.width="".concat(e.virtualSize+E,"px")),n.setWrapperSize&&(r.style[e.getDirectionLabel("width")]="".concat(e.virtualSize+E,"px")),T&&e.grid.updateWrapperSize(I,p),!n.centeredSlides){const t=[];for(let r=0;r<p.length;r+=1){let i=p[r];n.roundLengths&&(i=Math.floor(i)),p[r]<=e.virtualSize-o&&t.push(i)}p=t,Math.floor(e.virtualSize-o)-Math.floor(p[p.length-1])>1&&p.push(e.virtualSize-o)}if(c&&n.loop){const t=f[0]+E;if(n.slidesPerGroup>1){const r=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),i=t*n.slidesPerGroup;for(let e=0;e<r;e+=1)p.push(p[p.length-1]+i)}for(let r=0;r<e.virtual.slidesBefore+e.virtual.slidesAfter;r+=1)1===n.slidesPerGroup&&p.push(p[p.length-1]+t),h.push(h[h.length-1]+t),e.virtualSize+=t}if(0===p.length&&(p=[0]),0!==E){const t=e.isHorizontal()&&s?"marginLeft":e.getDirectionLabel("marginRight");u.filter(((e,t)=>!(n.cssMode&&!n.loop)||t!==u.length-1)).forEach((e=>{e.style[t]="".concat(E,"px")}))}if(n.centeredSlides&&n.centeredSlidesBounds){let e=0;f.forEach((t=>{e+=t+(E||0)})),e-=E;const t=e-o;p=p.map((e=>e<=0?-m:e>t?t+g:e))}if(n.centerInsufficientSlides){let e=0;if(f.forEach((t=>{e+=t+(E||0)})),e-=E,e<o){const t=(o-e)/2;p.forEach(((e,n)=>{p[n]=e-t})),h.forEach(((e,n)=>{h[n]=e+t}))}}if(Object.assign(e,{slides:u,snapGrid:p,slidesGrid:h,slidesSizesGrid:f}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){hi(r,"--swiper-centered-offset-before","".concat(-p[0],"px")),hi(r,"--swiper-centered-offset-after","".concat(e.size/2-f[f.length-1]/2,"px"));const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+n))}if(d!==l&&e.emit("slidesLengthChange"),p.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),h.length!==y&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!c&&!n.cssMode&&("slide"===n.effect||"fade"===n.effect)){const t="".concat(n.containerModifierClass,"backface-hidden"),r=e.el.classList.contains(t);d<=n.maxBackfaceHiddenSlides?r||e.el.classList.add(t):r&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,n=[],r=t.virtual&&t.params.virtual.enabled;let i,o=0;"number"===typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const s=e=>r?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach((e=>{n.push(e)}));else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){const e=t.activeIndex+i;if(e>t.slides.length&&!r)break;n.push(s(e))}else n.push(s(t.activeIndex));for(i=0;i<n.length;i+=1)if("undefined"!==typeof n[i]){const e=n[i].offsetHeight;o=e>o?e:o}(o||0===o)&&(t.wrapperEl.style.height="".concat(o,"px"))},updateSlidesOffset:function(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=(e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop)-n-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:r,rtlTranslate:i,snapGrid:o}=t;if(0===r.length)return;"undefined"===typeof r[0].swiperSlideOffset&&t.updateSlidesOffset();let s=-e;i&&(s=e),r.forEach((e=>{e.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass)})),t.visibleSlidesIndexes=[],t.visibleSlides=[];let a=n.spaceBetween;"string"===typeof a&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*t.size:"string"===typeof a&&(a=parseFloat(a));for(let c=0;c<r.length;c+=1){const e=r[c];let l=e.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=r[0].swiperSlideOffset);const u=(s+(n.centeredSlides?t.minTranslate():0)-l)/(e.swiperSlideSize+a),d=(s-o[0]+(n.centeredSlides?t.minTranslate():0)-l)/(e.swiperSlideSize+a),p=-(s-l),h=p+t.slidesSizesGrid[c],f=p>=0&&p<=t.size-t.slidesSizesGrid[c];(p>=0&&p<t.size-1||h>1&&h<=t.size||p<=0&&h>=t.size)&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(c),r[c].classList.add(n.slideVisibleClass)),f&&r[c].classList.add(n.slideFullyVisibleClass),e.progress=i?-u:u,e.originalProgress=i?-d:d}},updateProgress:function(e){const t=this;if("undefined"===typeof e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:o,isEnd:s,progressLoop:a}=t;const c=o,l=s;if(0===r)i=0,o=!0,s=!0;else{i=(e-t.minTranslate())/r;const n=Math.abs(e-t.minTranslate())<1,a=Math.abs(e-t.maxTranslate())<1;o=n||i<=0,s=a||i>=1,n&&(i=0),a&&(i=1)}if(n.loop){const n=t.getSlideIndexByData(0),r=t.getSlideIndexByData(t.slides.length-1),i=t.slidesGrid[n],o=t.slidesGrid[r],s=t.slidesGrid[t.slidesGrid.length-1],c=Math.abs(e);a=c>=i?(c-i)/s:(c+s-o)/s,a>1&&(a-=1)}Object.assign(t,{progress:i,progressLoop:a,isBeginning:o,isEnd:s}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),o&&!c&&t.emit("reachBeginning toEdge"),s&&!l&&t.emit("reachEnd toEdge"),(c&&!o||l&&!s)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,slidesEl:r,activeIndex:i}=e,o=e.virtual&&n.virtual.enabled,s=e.grid&&n.grid&&n.grid.rows>1,a=e=>gi(r,".".concat(n.slideClass).concat(e,", swiper-slide").concat(e))[0];let c,l,u;if(t.forEach((e=>{e.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)})),o)if(n.loop){let t=i-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),c=a('[data-swiper-slide-index="'.concat(t,'"]'))}else c=a('[data-swiper-slide-index="'.concat(i,'"]'));else s?(c=t.filter((e=>e.column===i))[0],u=t.filter((e=>e.column===i+1))[0],l=t.filter((e=>e.column===i-1))[0]):c=t[i];c&&(c.classList.add(n.slideActiveClass),s?(u&&u.classList.add(n.slideNextClass),l&&l.classList.add(n.slidePrevClass)):(u=function(e,t){const n=[];for(;e.nextElementSibling;){const r=e.nextElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}(c,".".concat(n.slideClass,", swiper-slide"))[0],n.loop&&!u&&(u=t[0]),u&&u.classList.add(n.slideNextClass),l=function(e,t){const n=[];for(;e.previousElementSibling;){const r=e.previousElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}(c,".".concat(n.slideClass,", swiper-slide"))[0],n.loop&&0===!l&&(l=t[t.length-1]),l&&l.classList.add(n.slidePrevClass))),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:r,params:i,activeIndex:o,realIndex:s,snapIndex:a}=t;let c,l=e;const u=e=>{let n=e-t.virtual.slidesBefore;return n<0&&(n=t.virtual.slides.length+n),n>=t.virtual.slides.length&&(n-=t.virtual.slides.length),n};if("undefined"===typeof l&&(l=function(e){const{slidesGrid:t,params:n}=e,r=e.rtlTranslate?e.translate:-e.translate;let i;for(let o=0;o<t.length;o+=1)"undefined"!==typeof t[o+1]?r>=t[o]&&r<t[o+1]-(t[o+1]-t[o])/2?i=o:r>=t[o]&&r<t[o+1]&&(i=o+1):r>=t[o]&&(i=o);return n.normalizeSlideIndex&&(i<0||"undefined"===typeof i)&&(i=0),i}(t)),r.indexOf(n)>=0)c=r.indexOf(n);else{const e=Math.min(i.slidesPerGroupSkip,l);c=e+Math.floor((l-e)/i.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),l===o&&!t.params.loop)return void(c!==a&&(t.snapIndex=c,t.emit("snapIndexChange")));if(l===o&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=u(l));const d=t.grid&&i.grid&&i.grid.rows>1;let p;if(t.virtual&&i.virtual.enabled&&i.loop)p=u(l);else if(d){const e=t.slides.filter((e=>e.column===l))[0];let n=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(n)&&(n=Math.max(t.slides.indexOf(e),0)),p=Math.floor(n/i.grid.rows)}else if(t.slides[l]){const e=t.slides[l].getAttribute("data-swiper-slide-index");p=e?parseInt(e,10):l}else p=l;Object.assign(t,{previousSnapIndex:a,snapIndex:c,previousRealIndex:s,realIndex:p,previousIndex:o,activeIndex:l}),t.initialized&&Di(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(s!==p&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const n=this,r=n.params;let i=e.closest(".".concat(r.slideClass,", swiper-slide"));!i&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach((e=>{!i&&e.matches&&e.matches(".".concat(r.slideClass,", swiper-slide"))&&(i=e)}));let o,s=!1;if(i)for(let a=0;a<n.slides.length;a+=1)if(n.slides[a]===i){s=!0,o=a;break}if(!i||!s)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=o,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var xi={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:n,translate:r,wrapperEl:i}=this;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let o=ui(i,e);return o+=this.cssOverflowAdjustment(),n&&(o=-o),o||0},setTranslate:function(e,t){const n=this,{rtlTranslate:r,params:i,wrapperEl:o,progress:s}=n;let a,c=0,l=0;n.isHorizontal()?c=r?-e:e:l=e,i.roundLengths&&(c=Math.floor(c),l=Math.floor(l)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?c:l,i.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-c:-l:i.virtualTranslate||(n.isHorizontal()?c-=n.cssOverflowAdjustment():l-=n.cssOverflowAdjustment(),o.style.transform="translate3d(".concat(c,"px, ").concat(l,"px, ").concat(0,"px)"));const u=n.maxTranslate()-n.minTranslate();a=0===u?0:(e-n.minTranslate())/u,a!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);const o=this,{params:s,wrapperEl:a}=o;if(o.animating&&s.preventInteractionOnTransition)return!1;const c=o.minTranslate(),l=o.maxTranslate();let u;if(u=r&&e>c?c:r&&e<l?l:e,o.updateProgress(u),s.cssMode){const e=o.isHorizontal();if(0===t)a[e?"scrollLeft":"scrollTop"]=-u;else{if(!o.support.smoothScroll)return fi({swiper:o,targetPosition:-u,side:e?"left":"top"}),!0;a.scrollTo({[e?"left":"top"]:-u,behavior:"smooth"})}return!0}return 0===t?(o.setTransition(0),o.setTranslate(u),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(u),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}};function Li(e){let{swiper:t,runCallbacks:n,direction:r,step:i}=e;const{activeIndex:o,previousIndex:s}=t;let a=r;if(a||(a=o>s?"next":o<s?"prev":"reset"),t.emit("transition".concat(i)),n&&o!==s){if("reset"===a)return void t.emit("slideResetTransition".concat(i));t.emit("slideChangeTransition".concat(i)),"next"===a?t.emit("slideNextTransition".concat(i)):t.emit("slidePrevTransition".concat(i))}}var Pi={setTransition:function(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration="".concat(e,"ms"),n.wrapperEl.style.transitionDelay=0===e?"0ms":""),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),Li({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;n.animating=!1,r.cssMode||(n.setTransition(0),Li({swiper:n,runCallbacks:e,direction:t,step:"End"}))}};var ji={slideTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"string"===typeof e&&(e=parseInt(e,10));const o=this;let s=e;s<0&&(s=0);const{params:a,snapGrid:c,slidesGrid:l,previousIndex:u,activeIndex:d,rtlTranslate:p,wrapperEl:h,enabled:f}=o;if(o.animating&&a.preventInteractionOnTransition||!f&&!r&&!i||o.destroyed)return!1;const m=Math.min(o.params.slidesPerGroupSkip,s);let g=m+Math.floor((s-m)/o.params.slidesPerGroup);g>=c.length&&(g=c.length-1);const v=-c[g];if(a.normalizeSlideIndex)for(let E=0;E<l.length;E+=1){const e=-Math.floor(100*v),t=Math.floor(100*l[E]),n=Math.floor(100*l[E+1]);"undefined"!==typeof l[E+1]?e>=t&&e<n-(n-t)/2?s=E:e>=t&&e<n&&(s=E+1):e>=t&&(s=E)}if(o.initialized&&s!==d){if(!o.allowSlideNext&&(p?v>o.translate&&v>o.minTranslate():v<o.translate&&v<o.minTranslate()))return!1;if(!o.allowSlidePrev&&v>o.translate&&v>o.maxTranslate()&&(d||0)!==s)return!1}let y;if(s!==(u||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(v),y=s>d?"next":s<d?"prev":"reset",p&&-v===o.translate||!p&&v===o.translate)return o.updateActiveIndex(s),a.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==a.effect&&o.setTranslate(v),"reset"!==y&&(o.transitionStart(n,y),o.transitionEnd(n,y)),!1;if(a.cssMode){const e=o.isHorizontal(),n=p?v:-v;if(0===t){const t=o.virtual&&o.params.virtual.enabled;t&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),t&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame((()=>{h[e?"scrollLeft":"scrollTop"]=n}))):h[e?"scrollLeft":"scrollTop"]=n,t&&requestAnimationFrame((()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1}))}else{if(!o.support.smoothScroll)return fi({swiper:o,targetPosition:n,side:e?"left":"top"}),!0;h.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return o.setTransition(t),o.setTranslate(v),o.updateActiveIndex(s),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,r),o.transitionStart(n,y),0===t?o.transitionEnd(n,y):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,y))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,r){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"string"===typeof e){e=parseInt(e,10)}const i=this;if(i.destroyed)return;const o=i.grid&&i.params.grid&&i.params.grid.rows>1;let s=e;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)s+=i.virtual.slidesBefore;else{let e;if(o){const t=s*i.params.grid.rows;e=i.slides.filter((e=>1*e.getAttribute("data-swiper-slide-index")===t))[0].column}else e=i.getSlideIndexByData(s);const t=o?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:n}=i.params;let r=i.params.slidesPerView;"auto"===r?r=i.slidesPerViewDynamic():(r=Math.ceil(parseFloat(i.params.slidesPerView,10)),n&&r%2===0&&(r+=1));let a=t-e<r;if(n&&(a=a||e<Math.ceil(r/2)),a){const r=n?e<i.activeIndex?"prev":"next":e-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:r,slideTo:!0,activeSlideIndex:"next"===r?e+1:e-t+1,slideRealIndex:"next"===r?i.realIndex:void 0})}if(o){const e=s*i.params.grid.rows;s=i.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0].column}else s=i.getSlideIndexByData(s)}return requestAnimationFrame((()=>{i.slideTo(s,t,n,r)})),i},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this,{enabled:i,params:o,animating:s}=r;if(!i||r.destroyed)return r;let a=o.slidesPerGroup;"auto"===o.slidesPerView&&1===o.slidesPerGroup&&o.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const c=r.activeIndex<o.slidesPerGroupSkip?1:a,l=r.virtual&&o.virtual.enabled;if(o.loop){if(s&&!l&&o.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&o.cssMode)return requestAnimationFrame((()=>{r.slideTo(r.activeIndex+c,e,t,n)})),!0}return o.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+c,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this,{params:i,snapGrid:o,slidesGrid:s,rtlTranslate:a,enabled:c,animating:l}=r;if(!c||r.destroyed)return r;const u=r.virtual&&i.virtual.enabled;if(i.loop){if(l&&!u&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}function d(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const p=d(a?r.translate:-r.translate),h=o.map((e=>d(e)));let f=o[h.indexOf(p)-1];if("undefined"===typeof f&&i.cssMode){let e;o.forEach(((t,n)=>{p>=t&&(e=n)})),"undefined"!==typeof e&&(f=o[e>0?e-1:e])}let m=0;if("undefined"!==typeof f&&(m=s.indexOf(f),m<0&&(m=r.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(m=m-r.slidesPerViewDynamic("previous",!0)+1,m=Math.max(m,0))),i.rewind&&r.isBeginning){const i=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(i,e,t,n)}return i.loop&&0===r.activeIndex&&i.cssMode?(requestAnimationFrame((()=>{r.slideTo(m,e,t,n)})),!0):r.slideTo(m,e,t,n)},slideReset:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this;if(!r.destroyed)return r.slideTo(r.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===r&&(r=.5);const i=this;if(i.destroyed)return;let o=i.activeIndex;const s=Math.min(i.params.slidesPerGroupSkip,o),a=s+Math.floor((o-s)/i.params.slidesPerGroup),c=i.rtlTranslate?i.translate:-i.translate;if(c>=i.snapGrid[a]){const e=i.snapGrid[a];c-e>(i.snapGrid[a+1]-e)*r&&(o+=i.params.slidesPerGroup)}else{const e=i.snapGrid[a-1];c-e<=(i.snapGrid[a]-e)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,e,t,n)},slideToClickedSlide:function(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,r="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let i,o=e.clickedIndex;const s=e.isElement?"swiper-slide":".".concat(t.slideClass);if(t.loop){if(e.animating)return;i=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?o<e.loopedSlides-r/2||o>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),o=e.getSlideIndex(gi(n,"".concat(s,'[data-swiper-slide-index="').concat(i,'"]'))[0]),ci((()=>{e.slideTo(o)}))):e.slideTo(o):o>e.slides.length-r?(e.loopFix(),o=e.getSlideIndex(gi(n,"".concat(s,'[data-swiper-slide-index="').concat(i,'"]'))[0]),ci((()=>{e.slideTo(o)}))):e.slideTo(o)}else e.slideTo(o)}};var Ui={loopCreate:function(e){const t=this,{params:n,slidesEl:r}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;const i=()=>{gi(r,".".concat(n.slideClass,", swiper-slide")).forEach(((e,t)=>{e.setAttribute("data-swiper-slide-index",t)}))},o=t.grid&&n.grid&&n.grid.rows>1,s=n.slidesPerGroup*(o?n.grid.rows:1),a=t.slides.length%s!==0,c=o&&t.slides.length%n.grid.rows!==0,l=e=>{for(let r=0;r<e;r+=1){const e=t.isElement?yi("swiper-slide",[n.slideBlankClass]):yi("div",[n.slideClass,n.slideBlankClass]);t.slidesEl.append(e)}};if(a){if(n.loopAddBlankSlides){l(s-t.slides.length%s),t.recalcSlides(),t.updateSlides()}else vi("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(c){if(n.loopAddBlankSlides){l(n.grid.rows-t.slides.length%n.grid.rows),t.recalcSlides(),t.updateSlides()}else vi("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();t.loopFix({slideRealIndex:e,direction:n.centeredSlides?void 0:"next"})},loopFix:function(e){let{slideRealIndex:t,slideTo:n=!0,direction:r,setTranslate:i,activeSlideIndex:o,byController:s,byMousewheel:a}=void 0===e?{}:e;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:l,allowSlidePrev:u,allowSlideNext:d,slidesEl:p,params:h}=c,{centeredSlides:f}=h;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&h.virtual.enabled)return n&&(h.centeredSlides||0!==c.snapIndex?h.centeredSlides&&c.snapIndex<h.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0):c.slideTo(c.virtual.slides.length,0,!1,!0)),c.allowSlidePrev=u,c.allowSlideNext=d,void c.emit("loopFix");let m=h.slidesPerView;"auto"===m?m=c.slidesPerViewDynamic():(m=Math.ceil(parseFloat(h.slidesPerView,10)),f&&m%2===0&&(m+=1));const g=h.slidesPerGroupAuto?m:h.slidesPerGroup;let v=g;v%g!==0&&(v+=g-v%g),v+=h.loopAdditionalSlides,c.loopedSlides=v;const y=c.grid&&h.grid&&h.grid.rows>1;l.length<m+v?vi("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):y&&"row"===h.grid.fill&&vi("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const E=[],_=[];let b=c.activeIndex;"undefined"===typeof o?o=c.getSlideIndex(l.filter((e=>e.classList.contains(h.slideActiveClass)))[0]):b=o;const S="next"===r||!r,T="prev"===r||!r;let I=0,N=0;const w=y?Math.ceil(l.length/h.grid.rows):l.length,C=(y?l[o].column:o)+(f&&"undefined"===typeof i?-m/2+.5:0);if(C<v){I=Math.max(v-C,g);for(let e=0;e<v-C;e+=1){const t=e-Math.floor(e/w)*w;if(y){const e=w-t-1;for(let t=l.length-1;t>=0;t-=1)l[t].column===e&&E.push(t)}else E.push(w-t-1)}}else if(C+m>w-v){N=Math.max(C-(w-2*v),g);for(let e=0;e<N;e+=1){const t=e-Math.floor(e/w)*w;y?l.forEach(((e,n)=>{e.column===t&&_.push(n)})):_.push(t)}}if(c.__preventObserver__=!0,requestAnimationFrame((()=>{c.__preventObserver__=!1})),T&&E.forEach((e=>{l[e].swiperLoopMoveDOM=!0,p.prepend(l[e]),l[e].swiperLoopMoveDOM=!1})),S&&_.forEach((e=>{l[e].swiperLoopMoveDOM=!0,p.append(l[e]),l[e].swiperLoopMoveDOM=!1})),c.recalcSlides(),"auto"===h.slidesPerView?c.updateSlides():y&&(E.length>0&&T||_.length>0&&S)&&c.slides.forEach(((e,t)=>{c.grid.updateSlide(t,e,c.slides)})),h.watchSlidesProgress&&c.updateSlidesOffset(),n)if(E.length>0&&T){if("undefined"===typeof t){const e=c.slidesGrid[b],t=c.slidesGrid[b+I]-e;a?c.setTranslate(c.translate-t):(c.slideTo(b+Math.ceil(I),0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else if(i){const e=y?E.length/h.grid.rows:E.length;c.slideTo(c.activeIndex+e,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(_.length>0&&S)if("undefined"===typeof t){const e=c.slidesGrid[b],t=c.slidesGrid[b-N]-e;a?c.setTranslate(c.translate-t):(c.slideTo(b-N,0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else{const e=y?_.length/h.grid.rows:_.length;c.slideTo(c.activeIndex-e,0,!1,!0)}if(c.allowSlidePrev=u,c.allowSlideNext=d,c.controller&&c.controller.control&&!s){const e={slideRealIndex:t,direction:r,setTranslate:i,activeSlideIndex:o,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach((t=>{!t.destroyed&&t.params.loop&&t.loopFix({...e,slideTo:t.params.slidesPerView===h.slidesPerView&&n})})):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...e,slideTo:c.controller.control.params.slidesPerView===h.slidesPerView&&n})}c.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const r=[];e.slides.forEach((e=>{const t="undefined"===typeof e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;r[t]=e})),e.slides.forEach((e=>{e.removeAttribute("data-swiper-slide-index")})),r.forEach((e=>{n.append(e)})),e.recalcSlides(),e.slideTo(e.realIndex,0)}};var Fi={setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame((()=>{t.__preventObserver__=!1}))},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame((()=>{e.__preventObserver__=!1})))}};function zi(e,t,n){const r=ai(),{params:i}=e,o=i.edgeSwipeDetection,s=i.edgeSwipeThreshold;return!o||!(n<=s||n>=r.innerWidth-s)||"prevent"===o&&(t.preventDefault(),!0)}function Bi(e){const t=this,n=oi();let r=e;r.originalEvent&&(r=r.originalEvent);const i=t.touchEventsData;if("pointerdown"===r.type){if(null!==i.pointerId&&i.pointerId!==r.pointerId)return;i.pointerId=r.pointerId}else"touchstart"===r.type&&1===r.targetTouches.length&&(i.touchId=r.targetTouches[0].identifier);if("touchstart"===r.type)return void zi(t,r,r.targetTouches[0].pageX);const{params:o,touches:s,enabled:a}=t;if(!a)return;if(!o.simulateTouch&&"mouse"===r.pointerType)return;if(t.animating&&o.preventInteractionOnTransition)return;!t.animating&&o.cssMode&&o.loop&&t.loopFix();let c=r.target;if("wrapper"===o.touchEventsTarget&&!t.wrapperEl.contains(c))return;if("which"in r&&3===r.which)return;if("button"in r&&r.button>0)return;if(i.isTouched&&i.isMoved)return;const l=!!o.noSwipingClass&&""!==o.noSwipingClass,u=r.composedPath?r.composedPath():r.path;l&&r.target&&r.target.shadowRoot&&u&&(c=u[0]);const d=o.noSwipingSelector?o.noSwipingSelector:".".concat(o.noSwipingClass),p=!(!r.target||!r.target.shadowRoot);if(o.noSwiping&&(p?function(e,t){return void 0===t&&(t=this),function t(n){if(!n||n===oi()||n===ai())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(e);return r||n.getRootNode?r||t(n.getRootNode().host):null}(t)}(d,c):c.closest(d)))return void(t.allowClick=!0);if(o.swipeHandler&&!c.closest(o.swipeHandler))return;s.currentX=r.pageX,s.currentY=r.pageY;const h=s.currentX,f=s.currentY;if(!zi(t,r,h))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=h,s.startY=f,i.touchStartTime=li(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(i.allowThresholdMove=!1);let m=!0;c.matches(i.focusableElements)&&(m=!1,"SELECT"===c.nodeName&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==c&&n.activeElement.blur();const g=m&&t.allowTouchMove&&o.touchStartPreventDefault;!o.touchStartForcePreventDefault&&!g||c.isContentEditable||r.preventDefault(),o.freeMode&&o.freeMode.enabled&&t.freeMode&&t.animating&&!o.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",r)}function Vi(e){const t=oi(),n=this,r=n.touchEventsData,{params:i,touches:o,rtlTranslate:s,enabled:a}=n;if(!a)return;if(!i.simulateTouch&&"mouse"===e.pointerType)return;let c,l=e;if(l.originalEvent&&(l=l.originalEvent),"pointermove"===l.type){if(null!==r.touchId)return;if(l.pointerId!==r.pointerId)return}if("touchmove"===l.type){if(c=[...l.changedTouches].filter((e=>e.identifier===r.touchId))[0],!c||c.identifier!==r.touchId)return}else c=l;if(!r.isTouched)return void(r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l));const u=c.pageX,d=c.pageY;if(l.preventedByNestedSwiper)return o.startX=u,void(o.startY=d);if(!n.allowTouchMove)return l.target.matches(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(o,{startX:u,startY:d,currentX:u,currentY:d}),r.touchStartTime=li()));if(i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(d<o.startY&&n.translate<=n.maxTranslate()||d>o.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(u<o.startX&&n.translate<=n.maxTranslate()||u>o.startX&&n.translate>=n.minTranslate())return;if(t.activeElement&&l.target===t.activeElement&&l.target.matches(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);r.allowTouchCallbacks&&n.emit("touchMove",l),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=u,o.currentY=d;const p=o.currentX-o.startX,h=o.currentY-o.startY;if(n.params.threshold&&Math.sqrt(p**2+h**2)<n.params.threshold)return;if("undefined"===typeof r.isScrolling){let e;n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:p*p+h*h>=25&&(e=180*Math.atan2(Math.abs(h),Math.abs(p))/Math.PI,r.isScrolling=n.isHorizontal()?e>i.touchAngle:90-e>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),"undefined"===typeof r.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(r.startMoving=!0)),r.isScrolling)return void(r.isTouched=!1);if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let f=n.isHorizontal()?p:h,m=n.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;i.oneWayMovement&&(f=Math.abs(f)*(s?1:-1),m=Math.abs(m)*(s?1:-1)),o.diff=f,f*=i.touchRatio,s&&(f=-f,m=-m);const g=n.touchesDirection;n.swipeDirection=f>0?"prev":"next",n.touchesDirection=m>0?"prev":"next";const v=n.params.loop&&!i.cssMode,y="next"===n.touchesDirection&&n.allowSlideNext||"prev"===n.touchesDirection&&n.allowSlidePrev;if(!r.isMoved){if(v&&y&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(e)}r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}if((new Date).getTime(),r.isMoved&&r.allowThresholdMove&&g!==n.touchesDirection&&v&&y&&Math.abs(f)>=1)return Object.assign(o,{startX:u,startY:d,currentX:u,currentY:d,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,void(r.startTranslate=r.currentTranslate);n.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=f+r.startTranslate;let E=!0,_=i.resistanceRatio;if(i.touchReleaseOnEdges&&(_=0),f>0?(v&&y&&r.allowThresholdMove&&r.currentTranslate>(i.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(E=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+f)**_))):f<0&&(v&&y&&r.allowThresholdMove&&r.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-("auto"===i.slidesPerView?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(E=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-f)**_))),E&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(f)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,void(o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}i.followFinger&&!i.cssMode&&((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function Hi(e){const t=this,n=t.touchEventsData;let r,i=e;i.originalEvent&&(i=i.originalEvent);if("touchend"===i.type||"touchcancel"===i.type){if(r=[...i.changedTouches].filter((e=>e.identifier===n.touchId))[0],!r||r.identifier!==n.touchId)return}else{if(null!==n.touchId)return;if(i.pointerId!==n.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)){if(!(["pointercancel","contextmenu"].includes(i.type)&&(t.browser.isSafari||t.browser.isWebView)))return}n.pointerId=null,n.touchId=null;const{params:o,touches:s,rtlTranslate:a,slidesGrid:c,enabled:l}=t;if(!l)return;if(!o.simulateTouch&&"mouse"===i.pointerType)return;if(n.allowTouchCallbacks&&t.emit("touchEnd",i),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&o.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);o.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const u=li(),d=u-n.touchStartTime;if(t.allowClick){const e=i.path||i.composedPath&&i.composedPath();t.updateClickedSlide(e&&e[0]||i.target,e),t.emit("tap click",i),d<300&&u-n.lastClickTime<300&&t.emit("doubleTap doubleClick",i)}if(n.lastClickTime=li(),ci((()=>{t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===s.diff&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let p;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,p=o.followFinger?a?t.translate:-t.translate:-n.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:p});const h=p>=-t.maxTranslate()&&!t.params.loop;let f=0,m=t.slidesSizesGrid[0];for(let _=0;_<c.length;_+=_<o.slidesPerGroupSkip?1:o.slidesPerGroup){const e=_<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;"undefined"!==typeof c[_+e]?(h||p>=c[_]&&p<c[_+e])&&(f=_,m=c[_+e]-c[_]):(h||p>=c[_])&&(f=_,m=c[c.length-1]-c[c.length-2])}let g=null,v=null;o.rewind&&(t.isBeginning?v=o.virtual&&o.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(g=0));const y=(p-c[f])/m,E=f<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(d>o.longSwipesMs){if(!o.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(y>=o.longSwipesRatio?t.slideTo(o.rewind&&t.isEnd?g:f+E):t.slideTo(f)),"prev"===t.swipeDirection&&(y>1-o.longSwipesRatio?t.slideTo(f+E):null!==v&&y<0&&Math.abs(y)>o.longSwipesRatio?t.slideTo(v):t.slideTo(f))}else{if(!o.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(i.target===t.navigation.nextEl||i.target===t.navigation.prevEl)?i.target===t.navigation.nextEl?t.slideTo(f+E):t.slideTo(f):("next"===t.swipeDirection&&t.slideTo(null!==g?g:f+E),"prev"===t.swipeDirection&&t.slideTo(null!==v?v:f))}}function Gi(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:o}=e,s=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const a=s&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||a?e.params.loop&&!s?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout((()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()}),500)),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}function Wi(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Yi(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:r}=e;if(!r)return;let i;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const o=e.maxTranslate()-e.minTranslate();i=0===o?0:(e.translate-e.minTranslate())/o,i!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function qi(e){const t=this;Ri(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function Ki(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const Qi=(e,t)=>{const n=oi(),{params:r,el:i,wrapperEl:o,device:s}=e,a=!!r.nested,c="on"===t?"addEventListener":"removeEventListener",l=t;n[c]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:a}),i[c]("touchstart",e.onTouchStart,{passive:!1}),i[c]("pointerdown",e.onTouchStart,{passive:!1}),n[c]("touchmove",e.onTouchMove,{passive:!1,capture:a}),n[c]("pointermove",e.onTouchMove,{passive:!1,capture:a}),n[c]("touchend",e.onTouchEnd,{passive:!0}),n[c]("pointerup",e.onTouchEnd,{passive:!0}),n[c]("pointercancel",e.onTouchEnd,{passive:!0}),n[c]("touchcancel",e.onTouchEnd,{passive:!0}),n[c]("pointerout",e.onTouchEnd,{passive:!0}),n[c]("pointerleave",e.onTouchEnd,{passive:!0}),n[c]("contextmenu",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[c]("click",e.onClick,!0),r.cssMode&&o[c]("scroll",e.onScroll),r.updateOnWindowResize?e[l](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",Gi,!0):e[l]("observerUpdate",Gi,!0),i[c]("load",e.onLoad,{capture:!0})};var Ji={attachEvents:function(){const e=this,{params:t}=e;e.onTouchStart=Bi.bind(e),e.onTouchMove=Vi.bind(e),e.onTouchEnd=Hi.bind(e),e.onDocumentTouchStart=Ki.bind(e),t.cssMode&&(e.onScroll=Yi.bind(e)),e.onClick=Wi.bind(e),e.onLoad=qi.bind(e),Qi(e,"on")},detachEvents:function(){Qi(this,"off")}};const Xi=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var Zi={setBreakpoint:function(){const e=this,{realIndex:t,initialized:n,params:r,el:i}=e,o=r.breakpoints;if(!o||o&&0===Object.keys(o).length)return;const s=e.getBreakpoint(o,e.params.breakpointsBase,e.el);if(!s||e.currentBreakpoint===s)return;const a=(s in o?o[s]:void 0)||e.originalParams,c=Xi(e,r),l=Xi(e,a),u=r.enabled;c&&!l?(i.classList.remove("".concat(r.containerModifierClass,"grid"),"".concat(r.containerModifierClass,"grid-column")),e.emitContainerClasses()):!c&&l&&(i.classList.add("".concat(r.containerModifierClass,"grid")),(a.grid.fill&&"column"===a.grid.fill||!a.grid.fill&&"column"===r.grid.fill)&&i.classList.add("".concat(r.containerModifierClass,"grid-column")),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((t=>{if("undefined"===typeof a[t])return;const n=r[t]&&r[t].enabled,i=a[t]&&a[t].enabled;n&&!i&&e[t].disable(),!n&&i&&e[t].enable()}));const d=a.direction&&a.direction!==r.direction,p=r.loop&&(a.slidesPerView!==r.slidesPerView||d),h=r.loop;d&&n&&e.changeDirection(),pi(e.params,a);const f=e.params.enabled,m=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),u&&!f?e.disable():!u&&f&&e.enable(),e.currentBreakpoint=s,e.emit("_beforeBreakpoint",a),n&&(p?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!h&&m?(e.loopCreate(t),e.updateSlides()):h&&!m&&e.loopDestroy()),e.emit("breakpoint",a)},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),!e||"container"===t&&!n)return;let r=!1;const i=ai(),o="window"===t?i.innerHeight:n.clientHeight,s=Object.keys(e).map((e=>{if("string"===typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:o*t,point:e}}return{value:e,point:e}}));s.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let a=0;a<s.length;a+=1){const{point:e,value:o}=s[a];"window"===t?i.matchMedia("(min-width: ".concat(o,"px)")).matches&&(r=e):o<=n.clientWidth&&(r=e)}return r||"max"}};var $i={addClasses:function(){const e=this,{classNames:t,params:n,rtl:r,el:i,device:o}=e,s=function(e,t){const n=[];return e.forEach((e=>{"object"===typeof e?Object.keys(e).forEach((r=>{e[r]&&n.push(t+r)})):"string"===typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...s),i.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e.classList.remove(...t),this.emitContainerClasses()}};var eo={checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:r}=n;if(r){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*r;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},to={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function no(e,t){return function(n){void 0===n&&(n={});const r=Object.keys(n)[0],i=n[r];"object"===typeof i&&null!==i?(!0===e[r]&&(e[r]={enabled:!0}),"navigation"===r&&e[r]&&e[r].enabled&&!e[r].prevEl&&!e[r].nextEl&&(e[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&e[r]&&e[r].enabled&&!e[r].el&&(e[r].auto=!0),r in e&&"enabled"in i?("object"!==typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),pi(t,n)):pi(t,n)):pi(t,n)}}const ro={eventsEmitter:Ai,update:ki,translate:xi,transition:Pi,slide:ji,loop:Ui,grabCursor:Fi,events:Ji,breakpoints:Zi,checkOverflow:eo,classes:$i},io={};class oo{constructor(){let e,t;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?t=r[0]:[e,t]=r,t||(t={}),t=pi({},t),e&&!t.el&&(t.el=e);const o=oi();if(t.el&&"string"===typeof t.el&&o.querySelectorAll(t.el).length>1){const e=[];return o.querySelectorAll(t.el).forEach((n=>{const r=pi({},t,{el:n});e.push(new oo(r))})),e}const s=this;s.__swiper__=!0,s.support=wi(),s.device=Ci({userAgent:t.userAgent}),s.browser=Oi(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],t.modules&&Array.isArray(t.modules)&&s.modules.push(...t.modules);const a={};s.modules.forEach((e=>{e({params:t,swiper:s,extendParams:no(t,a),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})}));const c=pi({},to,a);return s.params=pi({},c,io,t),s.originalParams=pi({},s.params),s.passedParams=pi({},t),s.params&&s.params.on&&Object.keys(s.params.on).forEach((e=>{s.on(e,s.params.on[e])})),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===s.params.direction,isVertical:()=>"vertical"===s.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,r=_i(gi(t,".".concat(n.slideClass,", swiper-slide"))[0]);return _i(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0])}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=gi(e,".".concat(t.slideClass,", swiper-slide"))}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach((n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:n,slides:r,slidesGrid:i,slidesSizesGrid:o,size:s,activeIndex:a}=this;let c=1;if("number"===typeof n.slidesPerView)return n.slidesPerView;if(n.centeredSlides){let e,t=r[a]?Math.ceil(r[a].swiperSlideSize):0;for(let n=a+1;n<r.length;n+=1)r[n]&&!e&&(t+=Math.ceil(r[n].swiperSlideSize),c+=1,t>s&&(e=!0));for(let n=a-1;n>=0;n-=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,c+=1,t>s&&(e=!0))}else if("current"===e)for(let l=a+1;l<r.length;l+=1){(t?i[l]+o[l]-i[a]<s:i[l]-i[a]<s)&&(c+=1)}else for(let l=a-1;l>=0;l-=1){i[a]-i[l]<s&&(c+=1)}return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function r(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let i;if(n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach((t=>{t.complete&&Ri(e,t)})),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),n.freeMode&&n.freeMode.enabled&&!n.cssMode)r(),n.autoHeight&&e.updateAutoHeight();else{if(("auto"===n.slidesPerView||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const t=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;i=e.slideTo(t.length-1,0,!1,!0)}else i=e.slideTo(e.activeIndex,0,!1,!0);i||r()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.el.classList.remove("".concat(n.params.containerModifierClass).concat(r)),n.el.classList.add("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach((t=>{"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="rtl"):(t.el.classList.remove("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if("string"===typeof n&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>".".concat((t.params.wrapperClass||"").trim().split(" ").join("."));let i=(()=>{if(n&&n.shadowRoot&&n.shadowRoot.querySelector){return n.shadowRoot.querySelector(r())}return gi(n,r())[0]})();return!i&&t.params.createElements&&(i=yi("div",t.params.wrapperClass),n.append(i),gi(n,".".concat(t.params.slideClass)).forEach((e=>{i.append(e)}))),Object.assign(t,{el:n,wrapperEl:i,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:i,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:"rtl"===n.dir.toLowerCase()||"rtl"===Ei(n,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===Ei(n,"direction")),wrongRTL:"-webkit-box"===Ei(i,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const n=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&n.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach((e=>{e.complete?Ri(t,e):e.addEventListener("load",(e=>{Ri(t,e.target)}))})),Di(t),t.initialized=!0,Di(t),t.emit("init"),t.emit("afterInit"),t}destroy(t,n){void 0===t&&(t=!0),void 0===n&&(n=!0);const r=this,{params:i,el:o,wrapperEl:s,slides:a}=r;return"undefined"===typeof r.params||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),n&&(r.removeClasses(),o.removeAttribute("style"),s.removeAttribute("style"),a&&a.length&&a.forEach((e=>{e.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")}))),r.emit("destroy"),Object.keys(r.eventsListeners).forEach((e=>{r.off(e)})),!1!==t&&(r.el.swiper=null,function(t){const n=t;Object.keys(n).forEach((t=>{try{n[t]=null}catch(e){}try{delete n[t]}catch(e){}}))}(r)),r.destroyed=!0),null}static extendDefaults(e){pi(io,e)}static get extendedDefaults(){return io}static get defaults(){return to}static installModule(e){oo.prototype.__modules__||(oo.prototype.__modules__=[]);const t=oo.prototype.__modules__;"function"===typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach((e=>oo.installModule(e))),oo):(oo.installModule(e),oo)}}Object.keys(ro).forEach((e=>{Object.keys(ro[e]).forEach((t=>{oo.prototype[t]=ro[e][t]}))})),oo.use([function(e){let{swiper:t,on:n,emit:r}=e;const i=ai();let o=null,s=null;const a=()=>{t&&!t.destroyed&&t.initialized&&(r("beforeResize"),r("resize"))},c=()=>{t&&!t.destroyed&&t.initialized&&r("orientationchange")};n("init",(()=>{t.params.resizeObserver&&"undefined"!==typeof i.ResizeObserver?t&&!t.destroyed&&t.initialized&&(o=new ResizeObserver((e=>{s=i.requestAnimationFrame((()=>{const{width:n,height:r}=t;let i=n,o=r;e.forEach((e=>{let{contentBoxSize:n,contentRect:r,target:s}=e;s&&s!==t.el||(i=r?r.width:(n[0]||n).inlineSize,o=r?r.height:(n[0]||n).blockSize)})),i===n&&o===r||a()}))})),o.observe(t.el)):(i.addEventListener("resize",a),i.addEventListener("orientationchange",c))})),n("destroy",(()=>{s&&i.cancelAnimationFrame(s),o&&o.unobserve&&t.el&&(o.unobserve(t.el),o=null),i.removeEventListener("resize",a),i.removeEventListener("orientationchange",c)}))},function(e){let{swiper:t,extendParams:n,on:r,emit:i}=e;const o=[],s=ai(),a=function(e,n){void 0===n&&(n={});const r=new(s.MutationObserver||s.WebkitMutationObserver)((e=>{if(t.__preventObserver__)return;if(1===e.length)return void i("observerUpdate",e[0]);const n=function(){i("observerUpdate",e[0])};s.requestAnimationFrame?s.requestAnimationFrame(n):s.setTimeout(n,0)}));r.observe(e,{attributes:"undefined"===typeof n.attributes||n.attributes,childList:"undefined"===typeof n.childList||n.childList,characterData:"undefined"===typeof n.characterData||n.characterData}),o.push(r)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",(()=>{if(t.params.observer){if(t.params.observeParents){const e=function(e,t){const n=[];let r=e.parentElement;for(;r;)t?r.matches(t)&&n.push(r):n.push(r),r=r.parentElement;return n}(t.hostEl);for(let t=0;t<e.length;t+=1)a(e[t])}a(t.hostEl,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}})),r("destroy",(()=>{o.forEach((e=>{e.disconnect()})),o.splice(0,o.length)}))}]);const so=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function ao(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)&&!e.__swiper__}function co(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>n.indexOf(e)<0)).forEach((n=>{"undefined"===typeof e[n]?e[n]=t[n]:ao(t[n])&&ao(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:co(e[n],t[n]):e[n]=t[n]}))}function lo(e){return void 0===e&&(e={}),e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function uo(e){return void 0===e&&(e={}),e.pagination&&"undefined"===typeof e.pagination.el}function po(e){return void 0===e&&(e={}),e.scrollbar&&"undefined"===typeof e.scrollbar.el}function ho(e){void 0===e&&(e="");const t=e.split(" ").map((e=>e.trim())).filter((e=>!!e)),n=[];return t.forEach((e=>{n.indexOf(e)<0&&n.push(e)})),n.join(" ")}function fo(e){return void 0===e&&(e=""),e?e.includes("swiper-wrapper")?e:"swiper-wrapper ".concat(e):"swiper-wrapper"}function mo(){return mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mo.apply(this,arguments)}function go(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function vo(e){const t=[];return r.Children.toArray(e).forEach((e=>{go(e)?t.push(e):e.props&&e.props.children&&vo(e.props.children).forEach((e=>t.push(e)))})),t}function yo(e){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return r.Children.toArray(e).forEach((e=>{if(go(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){const r=vo(e.props.children);r.length>0?r.forEach((e=>t.push(e))):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function Eo(e,t){return"undefined"===typeof window?(0,r.useEffect)(e,t):(0,r.useLayoutEffect)(e,t)}const _o=(0,r.createContext)(null),bo=(0,r.createContext)(null),So=(0,r.forwardRef)((function(e,t){let{className:n,tag:i="div",wrapperTag:o="div",children:s,onSwiper:a,...c}=void 0===e?{}:e,l=!1;const[u,d]=(0,r.useState)("swiper"),[p,h]=(0,r.useState)(null),[f,m]=(0,r.useState)(!1),g=(0,r.useRef)(!1),v=(0,r.useRef)(null),y=(0,r.useRef)(null),E=(0,r.useRef)(null),_=(0,r.useRef)(null),b=(0,r.useRef)(null),S=(0,r.useRef)(null),T=(0,r.useRef)(null),I=(0,r.useRef)(null),{params:N,passedParams:w,rest:C,events:O}=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);const n={on:{}},r={},i={};co(n,to),n._emitClasses=!0,n.init=!1;const o={},s=so.map((e=>e.replace(/_/,""))),a=Object.assign({},e);return Object.keys(a).forEach((a=>{"undefined"!==typeof e[a]&&(s.indexOf(a)>=0?ao(e[a])?(n[a]={},i[a]={},co(n[a],e[a]),co(i[a],e[a])):(n[a]=e[a],i[a]=e[a]):0===a.search(/on[A-Z]/)&&"function"===typeof e[a]?t?r["".concat(a[2].toLowerCase()).concat(a.substr(3))]=e[a]:n.on["".concat(a[2].toLowerCase()).concat(a.substr(3))]=e[a]:o[a]=e[a])})),["navigation","pagination","scrollbar"].forEach((e=>{!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:i,rest:o,events:r}}(c),{slides:A,slots:R}=yo(s),M=()=>{m(!f)};Object.assign(N.on,{_containerClasses(e,t){d(t)}});const D=()=>{Object.assign(N.on,O),l=!0;const e={...N};if(delete e.wrapperClass,y.current=new oo(e),y.current.virtual&&y.current.params.virtual.enabled){y.current.virtual.slides=A;const e={cache:!1,slides:A,renderExternal:h,renderExternalUpdate:!1};co(y.current.params.virtual,e),co(y.current.originalParams.virtual,e)}};v.current||D(),y.current&&y.current.on("_beforeBreakpoint",M);return(0,r.useEffect)((()=>()=>{y.current&&y.current.off("_beforeBreakpoint",M)})),(0,r.useEffect)((()=>{!g.current&&y.current&&(y.current.emitSlidesClasses(),g.current=!0)})),Eo((()=>{if(t&&(t.current=v.current),v.current)return y.current.destroyed&&D(),function(e,t){let{el:n,nextEl:r,prevEl:i,paginationEl:o,scrollbarEl:s,swiper:a}=e;lo(t)&&r&&i&&(a.params.navigation.nextEl=r,a.originalParams.navigation.nextEl=r,a.params.navigation.prevEl=i,a.originalParams.navigation.prevEl=i),uo(t)&&o&&(a.params.pagination.el=o,a.originalParams.pagination.el=o),po(t)&&s&&(a.params.scrollbar.el=s,a.originalParams.scrollbar.el=s),a.init(n)}({el:v.current,nextEl:b.current,prevEl:S.current,paginationEl:T.current,scrollbarEl:I.current,swiper:y.current},N),a&&!y.current.destroyed&&a(y.current),()=>{y.current&&!y.current.destroyed&&y.current.destroy(!0,!1)}}),[]),Eo((()=>{!l&&O&&y.current&&Object.keys(O).forEach((e=>{y.current.on(e,O[e])}));const e=function(e,t,n,r,i){const o=[];if(!t)return o;const s=e=>{o.indexOf(e)<0&&o.push(e)};if(n&&r){const e=r.map(i),t=n.map(i);e.join("")!==t.join("")&&s("children"),r.length!==n.length&&s("children")}return so.filter((e=>"_"===e[0])).map((e=>e.replace(/_/,""))).forEach((n=>{if(n in e&&n in t)if(ao(e[n])&&ao(t[n])){const r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?s(n):(r.forEach((r=>{e[n][r]!==t[n][r]&&s(n)})),i.forEach((r=>{e[n][r]!==t[n][r]&&s(n)})))}else e[n]!==t[n]&&s(n)})),o}(w,E.current,A,_.current,(e=>e.key));return E.current=w,_.current=A,e.length&&y.current&&!y.current.destroyed&&function(e){let{swiper:t,slides:n,passedParams:r,changedParams:i,nextEl:o,prevEl:s,scrollbarEl:a,paginationEl:c}=e;const l=i.filter((e=>"children"!==e&&"direction"!==e&&"wrapperClass"!==e)),{params:u,pagination:d,navigation:p,scrollbar:h,virtual:f,thumbs:m}=t;let g,v,y,E,_,b,S,T;i.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(g=!0),i.includes("controller")&&r.controller&&r.controller.control&&u.controller&&!u.controller.control&&(v=!0),i.includes("pagination")&&r.pagination&&(r.pagination.el||c)&&(u.pagination||!1===u.pagination)&&d&&!d.el&&(y=!0),i.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||a)&&(u.scrollbar||!1===u.scrollbar)&&h&&!h.el&&(E=!0),i.includes("navigation")&&r.navigation&&(r.navigation.prevEl||s)&&(r.navigation.nextEl||o)&&(u.navigation||!1===u.navigation)&&p&&!p.prevEl&&!p.nextEl&&(_=!0);const I=e=>{t[e]&&(t[e].destroy(),"navigation"===e?(t.isElement&&(t[e].prevEl.remove(),t[e].nextEl.remove()),u[e].prevEl=void 0,u[e].nextEl=void 0,t[e].prevEl=void 0,t[e].nextEl=void 0):(t.isElement&&t[e].el.remove(),u[e].el=void 0,t[e].el=void 0))};i.includes("loop")&&t.isElement&&(u.loop&&!r.loop?b=!0:!u.loop&&r.loop?S=!0:T=!0),l.forEach((e=>{if(ao(u[e])&&ao(r[e]))Object.assign(u[e],r[e]),"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e||!("enabled"in r[e])||r[e].enabled||I(e);else{const t=r[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?u[e]=r[e]:!1===t&&I(e)}})),l.includes("controller")&&!v&&t.controller&&t.controller.control&&u.controller&&u.controller.control&&(t.controller.control=u.controller.control),i.includes("children")&&n&&f&&u.virtual.enabled?(f.slides=n,f.update(!0)):i.includes("virtual")&&f&&u.virtual.enabled&&(n&&(f.slides=n),f.update(!0)),i.includes("children")&&n&&u.loop&&(T=!0),g&&m.init()&&m.update(!0);v&&(t.controller.control=u.controller.control),y&&(!t.isElement||c&&"string"!==typeof c||(c=document.createElement("div"),c.classList.add("swiper-pagination"),c.part.add("pagination"),t.el.appendChild(c)),c&&(u.pagination.el=c),d.init(),d.render(),d.update()),E&&(!t.isElement||a&&"string"!==typeof a||(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),t.el.appendChild(a)),a&&(u.scrollbar.el=a),h.init(),h.updateSize(),h.setTranslate()),_&&(t.isElement&&(o&&"string"!==typeof o||(o=document.createElement("div"),o.classList.add("swiper-button-next"),o.innerHTML=t.hostEl.constructor.nextButtonSvg,o.part.add("button-next"),t.el.appendChild(o)),s&&"string"!==typeof s||(s=document.createElement("div"),s.classList.add("swiper-button-prev"),s.innerHTML=t.hostEl.constructor.prevButtonSvg,s.part.add("button-prev"),t.el.appendChild(s))),o&&(u.navigation.nextEl=o),s&&(u.navigation.prevEl=s),p.init(),p.update()),i.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),i.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),i.includes("direction")&&t.changeDirection(r.direction,!1),(b||T)&&t.loopDestroy(),(S||T)&&t.loopCreate(),t.update()}({swiper:y.current,slides:A,passedParams:w,changedParams:e,nextEl:b.current,prevEl:S.current,scrollbarEl:I.current,paginationEl:T.current}),()=>{O&&y.current&&Object.keys(O).forEach((e=>{y.current.off(e,O[e])}))}})),Eo((()=>{(e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())})(y.current)}),[p]),r.createElement(i,mo({ref:v,className:ho("".concat(u).concat(n?" ".concat(n):""))},C),r.createElement(bo.Provider,{value:y.current},R["container-start"],r.createElement(o,{className:fo(N.wrapperClass)},R["wrapper-start"],N.virtual?function(e,t,n){if(!n)return null;const i=e=>{let n=e;return e<0?n=t.length+e:n>=t.length&&(n-=t.length),n},o=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:"".concat(n.offset,"px")}:{top:"".concat(n.offset,"px")},{from:s,to:a}=n,c=e.params.loop?-t.length:0,l=e.params.loop?2*t.length:t.length,u=[];for(let r=c;r<l;r+=1)r>=s&&r<=a&&u.push(t[i(r)]);return u.map(((t,n)=>r.cloneElement(t,{swiper:e,style:o,key:t.props.virtualIndex||t.key||"slide-".concat(n)})))}(y.current,A,p):A.map(((e,t)=>r.cloneElement(e,{swiper:y.current,swiperSlideIndex:t}))),R["wrapper-end"]),lo(N)&&r.createElement(r.Fragment,null,r.createElement("div",{ref:S,className:"swiper-button-prev"}),r.createElement("div",{ref:b,className:"swiper-button-next"})),po(N)&&r.createElement("div",{ref:I,className:"swiper-scrollbar"}),uo(N)&&r.createElement("div",{ref:T,className:"swiper-pagination"}),R["container-end"]))}));So.displayName="Swiper";const To=(0,r.forwardRef)((function(e,t){let{tag:n="div",children:i,className:o="",swiper:s,zoom:a,lazy:c,virtualIndex:l,swiperSlideIndex:u,...d}=void 0===e?{}:e;const p=(0,r.useRef)(null),[h,f]=(0,r.useState)("swiper-slide"),[m,g]=(0,r.useState)(!1);function v(e,t,n){t===p.current&&f(n)}Eo((()=>{if("undefined"!==typeof u&&(p.current.swiperSlideIndex=u),t&&(t.current=p.current),p.current&&s){if(!s.destroyed)return s.on("_slideClass",v),()=>{s&&s.off("_slideClass",v)};"swiper-slide"!==h&&f("swiper-slide")}})),Eo((()=>{s&&p.current&&!s.destroyed&&f(s.getSlideClasses(p.current))}),[s]);const y={isActive:h.indexOf("swiper-slide-active")>=0,isVisible:h.indexOf("swiper-slide-visible")>=0,isPrev:h.indexOf("swiper-slide-prev")>=0,isNext:h.indexOf("swiper-slide-next")>=0},E=()=>"function"===typeof i?i(y):i;return r.createElement(n,mo({ref:p,className:ho("".concat(h).concat(o?" ".concat(o):"")),"data-swiper-slide-index":l,onLoad:()=>{g(!0)}},d),a&&r.createElement(_o.Provider,{value:y},r.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof a?a:void 0},E(),c&&!m&&r.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&r.createElement(_o.Provider,{value:y},E(),c&&!m&&r.createElement("div",{className:"swiper-lazy-preloader"})))}));function Io(e){let{swiper:t,extendParams:n,on:r,emit:i}=e;function o(e){let n;return e&&"string"===typeof e&&t.isElement&&(n=t.el.querySelector(e),n)?n:(e&&("string"===typeof e&&(n=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&"string"===typeof e&&n.length>1&&1===t.el.querySelectorAll(e).length&&(n=t.el.querySelector(e))),e&&!n?e:n)}function s(e,n){const r=t.params.navigation;(e=Si(e)).forEach((e=>{e&&(e.classList[n?"add":"remove"](...r.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=n),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](r.lockClass))}))}function a(){const{nextEl:e,prevEl:n}=t.navigation;if(t.params.loop)return s(n,!1),void s(e,!1);s(n,t.isBeginning&&!t.params.rewind),s(e,t.isEnd&&!t.params.rewind)}function c(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),i("navigationPrev"))}function l(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),i("navigationNext"))}function u(){const e=t.params.navigation;if(t.params.navigation=function(e,t,n,r){return e.params.createElements&&Object.keys(r).forEach((i=>{if(!n[i]&&!0===n.auto){let o=gi(e.el,".".concat(r[i]))[0];o||(o=yi("div",r[i]),o.className=r[i],e.el.append(o)),n[i]=o,t[i]=o}})),n}(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let n=o(e.nextEl),r=o(e.prevEl);Object.assign(t.navigation,{nextEl:n,prevEl:r}),n=Si(n),r=Si(r);const i=(n,r)=>{n&&n.addEventListener("click","next"===r?l:c),!t.enabled&&n&&n.classList.add(...e.lockClass.split(" "))};n.forEach((e=>i(e,"next"))),r.forEach((e=>i(e,"prev")))}function d(){let{nextEl:e,prevEl:n}=t.navigation;e=Si(e),n=Si(n);const r=(e,n)=>{e.removeEventListener("click","next"===n?l:c),e.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach((e=>r(e,"next"))),n.forEach((e=>r(e,"prev")))}n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null},r("init",(()=>{!1===t.params.navigation.enabled?p():(u(),a())})),r("toEdge fromEdge lock unlock",(()=>{a()})),r("destroy",(()=>{d()})),r("enable disable",(()=>{let{nextEl:e,prevEl:n}=t.navigation;e=Si(e),n=Si(n),t.enabled?a():[...e,...n].filter((e=>!!e)).forEach((e=>e.classList.add(t.params.navigation.lockClass)))})),r("click",((e,n)=>{let{nextEl:r,prevEl:o}=t.navigation;r=Si(r),o=Si(o);const s=n.target;if(t.params.navigation.hideOnClick&&!o.includes(s)&&!r.includes(s)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===s||t.pagination.el.contains(s)))return;let e;r.length?e=r[0].classList.contains(t.params.navigation.hiddenClass):o.length&&(e=o[0].classList.contains(t.params.navigation.hiddenClass)),i(!0===e?"navigationShow":"navigationHide"),[...r,...o].filter((e=>!!e)).forEach((e=>e.classList.toggle(t.params.navigation.hiddenClass)))}}));const p=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),d()};Object.assign(t.navigation,{enable:()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),u(),a()},disable:p,update:a,init:u,destroy:d})}function No(e){let t,n,{swiper:r,extendParams:i,on:o,emit:s,params:a}=e;r.autoplay={running:!1,paused:!1,timeLeft:0},i({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let c,l,u,d,p,h,f,m,g=a&&a.autoplay?a.autoplay.delay:3e3,v=a&&a.autoplay?a.autoplay.delay:3e3,y=(new Date).getTime();function E(e){r&&!r.destroyed&&r.wrapperEl&&e.target===r.wrapperEl&&(r.wrapperEl.removeEventListener("transitionend",E),m||N())}const _=()=>{if(r.destroyed||!r.autoplay.running)return;r.autoplay.paused?l=!0:l&&(v=c,l=!1);const e=r.autoplay.paused?c:y+v-(new Date).getTime();r.autoplay.timeLeft=e,s("autoplayTimeLeft",e,e/g),n=requestAnimationFrame((()=>{_()}))},b=e=>{if(r.destroyed||!r.autoplay.running)return;cancelAnimationFrame(n),_();let i="undefined"===typeof e?r.params.autoplay.delay:e;g=r.params.autoplay.delay,v=r.params.autoplay.delay;const o=(()=>{let e;if(e=r.virtual&&r.params.virtual.enabled?r.slides.filter((e=>e.classList.contains("swiper-slide-active")))[0]:r.slides[r.activeIndex],!e)return;return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(o)&&o>0&&"undefined"===typeof e&&(i=o,g=o,v=o),c=i;const a=r.params.speed,l=()=>{r&&!r.destroyed&&(r.params.autoplay.reverseDirection?!r.isBeginning||r.params.loop||r.params.rewind?(r.slidePrev(a,!0,!0),s("autoplay")):r.params.autoplay.stopOnLastSlide||(r.slideTo(r.slides.length-1,a,!0,!0),s("autoplay")):!r.isEnd||r.params.loop||r.params.rewind?(r.slideNext(a,!0,!0),s("autoplay")):r.params.autoplay.stopOnLastSlide||(r.slideTo(0,a,!0,!0),s("autoplay")),r.params.cssMode&&(y=(new Date).getTime(),requestAnimationFrame((()=>{b()}))))};return i>0?(clearTimeout(t),t=setTimeout((()=>{l()}),i)):requestAnimationFrame((()=>{l()})),i},S=()=>{y=(new Date).getTime(),r.autoplay.running=!0,b(),s("autoplayStart")},T=()=>{r.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(n),s("autoplayStop")},I=(e,n)=>{if(r.destroyed||!r.autoplay.running)return;clearTimeout(t),e||(f=!0);const i=()=>{s("autoplayPause"),r.params.autoplay.waitForTransition?r.wrapperEl.addEventListener("transitionend",E):N()};if(r.autoplay.paused=!0,n)return h&&(c=r.params.autoplay.delay),h=!1,void i();const o=c||r.params.autoplay.delay;c=o-((new Date).getTime()-y),r.isEnd&&c<0&&!r.params.loop||(c<0&&(c=0),i())},N=()=>{r.isEnd&&c<0&&!r.params.loop||r.destroyed||!r.autoplay.running||(y=(new Date).getTime(),f?(f=!1,b(c)):b(),r.autoplay.paused=!1,s("autoplayResume"))},w=()=>{if(r.destroyed||!r.autoplay.running)return;const e=oi();"hidden"===e.visibilityState&&(f=!0,I(!0)),"visible"===e.visibilityState&&N()},C=e=>{"mouse"===e.pointerType&&(f=!0,m=!0,r.animating||r.autoplay.paused||I(!0))},O=e=>{"mouse"===e.pointerType&&(m=!1,r.autoplay.paused&&N())};o("init",(()=>{r.params.autoplay.enabled&&(r.params.autoplay.pauseOnMouseEnter&&(r.el.addEventListener("pointerenter",C),r.el.addEventListener("pointerleave",O)),oi().addEventListener("visibilitychange",w),S())})),o("destroy",(()=>{r.el.removeEventListener("pointerenter",C),r.el.removeEventListener("pointerleave",O),oi().removeEventListener("visibilitychange",w),r.autoplay.running&&T()})),o("_freeModeStaticRelease",(()=>{(d||f)&&N()})),o("_freeModeNoMomentumRelease",(()=>{r.params.autoplay.disableOnInteraction?T():I(!0,!0)})),o("beforeTransitionStart",((e,t,n)=>{!r.destroyed&&r.autoplay.running&&(n||!r.params.autoplay.disableOnInteraction?I(!0,!0):T())})),o("sliderFirstMove",(()=>{!r.destroyed&&r.autoplay.running&&(r.params.autoplay.disableOnInteraction?T():(u=!0,d=!1,f=!1,p=setTimeout((()=>{f=!0,d=!0,I(!0)}),200)))})),o("touchEnd",(()=>{if(!r.destroyed&&r.autoplay.running&&u){if(clearTimeout(p),clearTimeout(t),r.params.autoplay.disableOnInteraction)return d=!1,void(u=!1);d&&r.params.cssMode&&N(),d=!1,u=!1}})),o("slideChange",(()=>{!r.destroyed&&r.autoplay.running&&(h=!0)})),Object.assign(r.autoplay,{start:S,stop:T,pause:I,resume:N})}function wo(e,t){const n=mi(t);return n!==t&&(n.style.backfaceVisibility="hidden",n.style["-webkit-backface-visibility"]="hidden"),n}function Co(e){let{swiper:t,duration:n,transformElements:r,allSlides:i}=e;const{activeIndex:o}=t;if(t.params.virtualTranslate&&0!==n){let e,n=!1;e=i?r:r.filter((e=>{const n=e.classList.contains("swiper-slide-transform")?(e=>{if(!e.parentElement)return t.slides.filter((t=>t.shadowRoot&&t.shadowRoot===e.parentNode))[0];return e.parentElement})(e):e;return t.getSlideIndex(n)===o})),e.forEach((e=>{!function(e,t){t&&e.addEventListener("transitionend",(function n(r){r.target===e&&(t.call(e,r),e.removeEventListener("transitionend",n))}))}(e,(()=>{if(n)return;if(!t||t.destroyed)return;n=!0,t.animating=!1;const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(e)}))}))}}function Oo(e){let{swiper:t,extendParams:n,on:r}=e;n({fadeEffect:{crossFade:!1}});!function(e){const{effect:t,swiper:n,on:r,setTranslate:i,setTransition:o,overwriteParams:s,perspective:a,recreateShadows:c,getEffectParams:l}=e;let u;r("beforeInit",(()=>{if(n.params.effect!==t)return;n.classNames.push("".concat(n.params.containerModifierClass).concat(t)),a&&a()&&n.classNames.push("".concat(n.params.containerModifierClass,"3d"));const e=s?s():{};Object.assign(n.params,e),Object.assign(n.originalParams,e)})),r("setTranslate",(()=>{n.params.effect===t&&i()})),r("setTransition",((e,r)=>{n.params.effect===t&&o(r)})),r("transitionEnd",(()=>{if(n.params.effect===t&&c){if(!l||!l().slideShadows)return;n.slides.forEach((e=>{e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((e=>e.remove()))})),c()}})),r("virtualUpdate",(()=>{n.params.effect===t&&(n.slides.length||(u=!0),requestAnimationFrame((()=>{u&&n.slides&&n.slides.length&&(i(),u=!1)})))}))}({effect:"fade",swiper:t,on:r,setTranslate:()=>{const{slides:e}=t;t.params.fadeEffect;for(let n=0;n<e.length;n+=1){const e=t.slides[n];let r=-e.swiperSlideOffset;t.params.virtualTranslate||(r-=t.translate);let i=0;t.isHorizontal()||(i=r,r=0);const o=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(e.progress),0):1+Math.min(Math.max(e.progress,-1),0),s=wo(0,e);s.style.opacity=o,s.style.transform="translate3d(".concat(r,"px, ").concat(i,"px, 0px)")}},setTransition:e=>{const n=t.slides.map((e=>mi(e)));n.forEach((t=>{t.style.transitionDuration="".concat(e,"ms")})),Co({swiper:t,duration:e,transformElements:n,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!t.params.cssMode})})}To.displayName="SwiperSlide";const Ao=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"fsMainSlider",children:(0,Me.jsx)("div",{className:"container",children:(0,Me.jsxs)("div",{className:"row justify-content-center",children:[(0,Me.jsx)("div",{className:"col-md-6 centerBx",children:(0,Me.jsxs)("div",{className:"",children:[(0,Me.jsxs)("h1",{children:["Find the right ",(0,Me.jsx)("i",{children:"freelance"})," service, right away"]}),(0,Me.jsxs)("form",{className:"input-group width100",children:[(0,Me.jsx)("input",{placeholder:"Search...",type:"text",className:"form-control"}),(0,Me.jsx)("button",{type:"button",id:"button-addon2",className:"btn btn-primary text-white",children:(0,Me.jsx)("i",{className:"fa fa-search text-white","aria-hidden":"true"})})]}),(0,Me.jsx)("div",{align:"left",children:(0,Me.jsxs)("ul",{className:"bannerPopularList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"Popular : "})}),(0,Me.jsx)("li",{children:(0,Me.jsx)("a",{href:"/",children:"Content Writer"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)("a",{href:"/",children:"Photographer"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)("a",{href:"/",children:"Web Developer"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)("a",{href:"/",children:"UI/UX"})})]})})]})}),(0,Me.jsx)("div",{className:"col-md-1",align:"center"}),(0,Me.jsx)("div",{className:"col-md-5",align:"center",children:(0,Me.jsxs)(So,{spaceBetween:0,slidesPerView:1,loop:!0,autoplay:{delay:2500,disableOnInteraction:!1},modules:[Oo,No],effect:"fade",onSlideChange:()=>"",onSwiper:e=>"",children:[(0,Me.jsx)(To,{children:(0,Me.jsx)("img",{src:"./assets/images/banner-M-1.webp",alt:""})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("img",{src:"./assets/images/banner-M-2.webp",alt:""})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("img",{src:"./assets/images/banner-M-3.webp",alt:""})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("img",{src:"./assets/images/banner-M-4.webp",alt:""})})]})})]})})})}),Ro=__webpack_require__.p+"static/media/no-poster.de8cb0a7786e6bf2b2de.png",Mo=e=>{let{item:t}=e;const[n,i]=(0,r.useState)(!1),{wishListAdd:o}=Qr();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",style:{height:"350px"},children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{to:"/product-detail/".concat(t._id),children:(0,Me.jsx)("img",{src:t.photo||Ro,className:"card-img-top allImg",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>{return e=t.product_id,o(e),void i(!0);var e},children:(0,Me.jsx)("i",{className:!0===n?"fa fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Oe,{to:"/product-detail/".concat(t._id),children:null===t||void 0===t?void 0:t.title})}),(0,Me.jsx)("p",{className:"card-title",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:(0,Me.jsx)(Oe,{to:"/product-detail/".concat(t._id),children:(e=>{const t=e.split(" ");return t.length>15?t.slice(0,14).join(" ")+"...":e})(t.description)})})})]})]})},t._id)})},Do=e=>{let{item:t,index:n}=e;const{goodsList:r}=Qr(),i=n%2!==0;return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"mt-4 ".concat(i?"bg-light":""),children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{className:"m-0",children:t.title}),(0,Me.jsx)(Oe,{className:"text text-decoration-none ",to:"/".concat(t.slug),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2",children:Array.isArray(r)&&r.slice(0,4).map(((e,t)=>(0,Me.jsx)(Mo,{item:e},t)))},t._id)]})})})},ko=e=>{let{item:t}=e;const{fashion:n,wishListAdd:i}=Qr(),[o,s]=(0,r.useState)({}),a=e=>{const t=e.split(" ");return t.length>15?t.slice(0,14).join(" ")+"...":e};return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{children:"Fashion & Beauty"}),(0,Me.jsx)(Oe,{className:"text text-decoration-none ",to:"/".concat(t.title),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2",children:Array.isArray(n)&&n.slice(0,4).map((e=>(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",style:{height:"350px"},children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{to:"/Fashion-Beauty-Details/".concat(e._id),children:(0,Me.jsx)("img",{src:e.photo||Ro,className:"card-img-top allImg",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>{return t=e.product_id,i(t),void s((e=>({...e,[t]:!0})));var t},children:(0,Me.jsx)("i",{className:o[e.product_id]?"fa fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Oe,{to:"/Fashion-Beauty-Details/".concat(e._id),children:e.title})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:a(e.description||"")})})]})]})},e._id)))})]})})})},xo=e=>{let{item:t}=e;const{lesson:n,wishListAdd:i}=Qr(),[o,s]=(0,r.useState)({}),a=e=>{const t=e.split(" ");return t.length>15?t.slice(0,14).join(" ")+"...":e};return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"bg-light",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{children:"Lessons & Courses"}),(0,Me.jsx)(Oe,{className:"text text-decoration-none ",to:"/".concat(t.title),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2 ",children:Array.isArray(n)&&n.slice(0,4).map((e=>(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",style:{height:" 350px"},children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{to:"/lessons-courses-detail/".concat(e._id),children:(0,Me.jsx)("img",{src:e.image||Ro,className:"card-img-top allImg",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>{return t=e.product_id,i(t),void s((e=>({...e,[t]:!0})));var t},children:(0,Me.jsx)("i",{className:o[e.product_id]?"fa fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Oe,{to:"/lessons-courses-detail/".concat(e._id),children:e.title})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:a(e.description)})})]})]})},e._id)))})]})})})},Lo=e=>{let{item:t}=e;const{jobList:n,wishListAdd:i,wishListRemove:o}=Qr(),[s,a]=(0,r.useState)({}),c=e=>{const t=e.split(" ");return t.length>15?t.slice(0,14).join(" ")+"...":e};return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{className:"m-0",children:t.title}),(0,Me.jsx)(Oe,{className:"text text-decoration-none ",to:"/".concat(t.title,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2",children:Array.isArray(n)&&n.slice(0,4).map((e=>(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{to:"/job-detail/".concat(e._id),children:(0,Me.jsx)("img",{src:e.image||Ro,className:"card-img-top allImg",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>{return t=e.product_id,s[t]?o(t):i(t),void a((e=>({...e,[t]:!e[t]})));var t},children:(0,Me.jsx)("i",{className:s[e.product_id]?"fa fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Oe,{to:"/job-detail/".concat(e._id),children:null===e||void 0===e?void 0:e.title})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:c(e.description)})})]})]})},e._id)))})]})})})},Po=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"bg-light",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsx)("h4",{children:"Top cities"}),(0,Me.jsxs)("div",{className:"row cityLink border-bottom border-1 mt-3 mb-3",children:[(0,Me.jsx)("div",{className:"col",children:(0,Me.jsxs)("ul",{className:"list-unstyled",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Berlin"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Bremen"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Dortmund"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Dresden"})})]})}),(0,Me.jsx)("div",{className:"col",children:(0,Me.jsxs)("ul",{className:"list-unstyled",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Duisburg"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Dusseldorf"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Eat"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Frankfurt am Main"})})]})}),(0,Me.jsx)("div",{className:"col",children:(0,Me.jsxs)("ul",{className:"list-unstyled",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Hamburg"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Hanover"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Cologne"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Leipzig"})})]})}),(0,Me.jsx)("div",{className:"col",children:(0,Me.jsxs)("ul",{className:"list-unstyled",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Munich"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Nuremberg (Central Fri)"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Saarbr\xfccken"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Stuttgart"})})]})})]}),(0,Me.jsx)("h4",{children:"Important Info"}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})})}),jo=e=>{let{item:t}=e;const{freelancerList:n,wishListAdd:i,wishListRemove:o}=Qr(),[s,a]=(0,r.useState)({}),c=e=>{const t=e.split(" ");return t.length>15?t.slice(0,14).join(" ")+"...":e};return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"bg-light",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{className:"m-0",children:t.title}),(0,Me.jsx)(Oe,{className:"text text-decoration-none ",to:"/".concat(t.title),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2",children:Array.isArray(n)&&n.slice(0,4).map((e=>(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",style:{height:" 350px"},children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{to:"/freelancer-detail/".concat(e._id),children:(0,Me.jsx)("img",{src:e.image||Ro,className:"card-img-top allImg",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>{return t=e.product_id,s[t]?o(t):i(t),void a((e=>({...e,[t]:!e[t]})));var t},children:(0,Me.jsx)("i",{className:s[e.product_id]?"fa fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Oe,{to:"/freelancer-detail/".concat(e._id),children:e.title})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:c(e.description)})})]})]})},e._id)))})]})})})},Uo=e=>{let{item:t}=e;const{property:n,wishListAdd:i,wishListRemove:o}=Qr(),[s,a]=(0,r.useState)({}),c=e=>{const t=e.split(" ");return t.length>15?t.slice(0,14).join(" ")+"...":e};return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{className:"m-0",children:t.title}),(0,Me.jsx)(Oe,{className:"text text-decoration-none ",to:"/".concat(t.title),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2",children:Array.isArray(n)&&n.slice(0,4).map((e=>(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",style:{height:" 350px"},children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{to:"/realstate-detail/".concat(e._id),children:(0,Me.jsx)("img",{src:e.photo||Ro,className:"card-img-top allImg",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>{return t=e.product_id,s[t]?o(t):i(t),void a((e=>({...e,[t]:!e[t]})));var t},children:(0,Me.jsx)("i",{className:s[e.product_id]?"fa fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Oe,{to:"/realstate-detail/".concat(e._id),children:e.title})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:c(e.description)})})]})]})},e._id)))})]})})})},Fo=e=>{let{item:t}=e;const{electronicsList:n,wishListAdd:i,wishListRemove:o}=Qr(),[s,a]=(0,r.useState)({}),c=e=>{const t=e.split(" ");return t.length>15?t.slice(0,14).join(" ")+"...":e};return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"bg-light",children:(0,Me.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Me.jsx)("h4",{className:"m-0",children:t.title}),(0,Me.jsx)(Oe,{className:"text text-decoration-none ",to:"/".concat(t.title),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Me.jsx)("aside",{className:"row pt-2 ",children:Array.isArray(n)&&n.slice(0,4).map((e=>(0,Me.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",style:{height:" 350px"},children:[(0,Me.jsxs)("div",{className:"imgBx  ",children:[(0,Me.jsx)(Oe,{to:"/Electronics-detail/".concat(e._id),children:(0,Me.jsx)("img",{src:e.photo||Ro,className:"card-img-top allImg ",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>{return t=e.product_id,s[t]?o(t):i(t),void a((e=>({...e,[t]:!e[t]})));var t},children:(0,Me.jsx)("i",{className:s[e.product_id]?"fa fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Oe,{to:"/Electronics-detail/".concat(e._id),children:e.title})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:c(e.description||"")})})]})]})},e._id)))})]})})})},zo=()=>{const{serviceList:e}=Qr();return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(Ao,{}),(0,Me.jsxs)("div",{className:"bgtheme",children:[Array.isArray(e)&&e.map(((e,t)=>{switch(e.slug){case"goods_of_all_kinds":return(0,Me.jsx)(Do,{item:e,index:t},t);case"fashion_beauty":return(0,Me.jsx)(ko,{item:e,index:t},t);case"lesson_courses":return(0,Me.jsx)(xo,{item:e,index:t},t);case"jobs":return(0,Me.jsx)(Lo,{item:e,index:t},t);case"freelancer":return(0,Me.jsx)(jo,{item:e,index:t},t);case"real_estate":return(0,Me.jsx)(Uo,{item:e,index:t},t);case"electronics":return(0,Me.jsx)(Fo,{item:e,index:t},t);default:return null}})),(0,Me.jsx)(Po,{})]})]})};function Bo(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Bo(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const Vo=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Bo(e))&&(r&&(r+=" "),r+=t);return r},Ho=e=>"number"==typeof e&&!isNaN(e),Go=e=>"string"==typeof e,Wo=e=>"function"==typeof e,Yo=e=>Go(e)||Wo(e)?e:null,qo=e=>(0,r.isValidElement)(e)||Go(e)||Wo(e)||Ho(e);function Ko(e){let{enter:t,exit:n,appendPosition:i=!1,collapse:o=!0,collapseDuration:s=300}=e;return function(e){let{children:a,position:c,preventExitTransition:l,done:u,nodeRef:d,isIn:p}=e;const h=i?"".concat(t,"--").concat(c):t,f=i?"".concat(n,"--").concat(c):n,m=(0,r.useRef)(0);return(0,r.useLayoutEffect)((()=>{const e=d.current,t=h.split(" "),n=r=>{r.target===d.current&&(e.dispatchEvent(new Event("d")),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===m.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,r.useEffect)((()=>{const e=d.current,t=()=>{e.removeEventListener("animationend",t),o?function(e,t,n){void 0===n&&(n=300);const{scrollHeight:r,style:i}=e;requestAnimationFrame((()=>{i.minHeight="initial",i.height=r+"px",i.transition="all ".concat(n,"ms"),requestAnimationFrame((()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,u,s):u()};p||(l?t():(m.current=1,e.className+=" ".concat(f),e.addEventListener("animationend",t)))}),[p]),r.createElement(r.Fragment,null,a)}}function Qo(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const Jo={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter((e=>e!==t));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach((t=>{const n=setTimeout((()=>{t(...[].slice.call(arguments,1))}),0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)}))}},Xo=e=>{let{theme:t,type:n,...i}=e;return r.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(n,")"),...i})},Zo={info:function(e){return r.createElement(Xo,{...e},r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return r.createElement(Xo,{...e},r.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return r.createElement(Xo,{...e},r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return r.createElement(Xo,{...e},r.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return r.createElement("div",{className:"Toastify__spinner"})}};function $o(e){const[,t]=(0,r.useReducer)((e=>e+1),0),[n,i]=(0,r.useState)([]),o=(0,r.useRef)(null),s=(0,r.useRef)(new Map).current,a=e=>-1!==n.indexOf(e),c=(0,r.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:a,getToast:e=>s.get(e)}).current;function l(e){let{containerId:t}=e;const{limit:n}=c.props;!n||t&&c.containerId!==t||(c.count-=c.queue.length,c.queue=[])}function u(e){i((t=>null==e?[]:t.filter((t=>t!==e))))}function d(){const{toastContent:e,toastProps:t,staleId:n}=c.queue.shift();h(e,t,n)}function p(e,n){let{delay:i,staleId:a,...l}=n;if(!qo(e)||function(e){return!o.current||c.props.enableMultiContainer&&e.containerId!==c.props.containerId||s.has(e.toastId)&&null==e.updateId}(l))return;const{toastId:p,updateId:f,data:m}=l,{props:g}=c,v=()=>u(p),y=null==f;y&&c.count++;const E={...g,style:g.toastStyle,key:c.toastKey++,...Object.fromEntries(Object.entries(l).filter((e=>{let[t,n]=e;return null!=n}))),toastId:p,updateId:f,data:m,closeToast:v,isIn:!1,className:Yo(l.className||g.toastClassName),bodyClassName:Yo(l.bodyClassName||g.bodyClassName),progressClassName:Yo(l.progressClassName||g.progressClassName),autoClose:!l.isLoading&&(_=l.autoClose,b=g.autoClose,!1===_||Ho(_)&&_>0?_:b),deleteToast(){const e=Qo(s.get(p),"removed");s.delete(p),Jo.emit(4,e);const n=c.queue.length;if(c.count=null==p?c.count-c.displayedToast:c.count-1,c.count<0&&(c.count=0),n>0){const e=null==p?c.props.limit:1;if(1===n||1===e)c.displayedToast++,d();else{const t=e>n?n:e;c.displayedToast=t;for(let e=0;e<t;e++)d()}}else t()}};var _,b;E.iconOut=function(e){let{theme:t,type:n,isLoading:i,icon:o}=e,s=null;const a={theme:t,type:n};return!1===o||(Wo(o)?s=o(a):(0,r.isValidElement)(o)?s=(0,r.cloneElement)(o,a):Go(o)||Ho(o)?s=o:i?s=Zo.spinner():(e=>e in Zo)(n)&&(s=Zo[n](a))),s}(E),Wo(l.onOpen)&&(E.onOpen=l.onOpen),Wo(l.onClose)&&(E.onClose=l.onClose),E.closeButton=g.closeButton,!1===l.closeButton||qo(l.closeButton)?E.closeButton=l.closeButton:!0===l.closeButton&&(E.closeButton=!qo(g.closeButton)||g.closeButton);let S=e;(0,r.isValidElement)(e)&&!Go(e.type)?S=(0,r.cloneElement)(e,{closeToast:v,toastProps:E,data:m}):Wo(e)&&(S=e({closeToast:v,toastProps:E,data:m})),g.limit&&g.limit>0&&c.count>g.limit&&y?c.queue.push({toastContent:S,toastProps:E,staleId:a}):Ho(i)?setTimeout((()=>{h(S,E,a)}),i):h(S,E,a)}function h(e,t,n){const{toastId:r}=t;n&&s.delete(n);const o={content:e,props:t};s.set(r,o),i((e=>[...e,r].filter((e=>e!==n)))),Jo.emit(4,Qo(o,null==o.props.updateId?"added":"updated"))}return(0,r.useEffect)((()=>(c.containerId=e.containerId,Jo.cancelEmit(3).on(0,p).on(1,(e=>o.current&&u(e))).on(5,l).emit(2,c),()=>{s.clear(),Jo.emit(3,c)})),[]),(0,r.useEffect)((()=>{c.props=e,c.isToastActive=a,c.displayedToast=n.length})),{getToastToRender:function(t){const n=new Map,r=Array.from(s.values());return e.newestOnTop&&r.reverse(),r.forEach((e=>{const{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},containerRef:o,isToastActive:a}}function es(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function ts(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function ns(e){const[t,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),s=(0,r.useRef)(null),a=(0,r.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,c=(0,r.useRef)(e),{autoClose:l,pauseOnHover:u,closeToast:d,onClick:p,closeOnClick:h}=e;function f(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),a.didMove=!1,document.addEventListener("mousemove",y),document.addEventListener("mouseup",E),document.addEventListener("touchmove",y),document.addEventListener("touchend",E);const n=s.current;a.canCloseOnClick=!0,a.canDrag=!0,a.boundingRect=n.getBoundingClientRect(),n.style.transition="",a.x=es(t.nativeEvent),a.y=ts(t.nativeEvent),"x"===e.draggableDirection?(a.start=a.x,a.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(a.start=a.y,a.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function m(t){if(a.boundingRect){const{top:n,bottom:r,left:i,right:o}=a.boundingRect;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&a.x>=i&&a.x<=o&&a.y>=n&&a.y<=r?v():g()}}function g(){n(!0)}function v(){n(!1)}function y(n){const r=s.current;a.canDrag&&r&&(a.didMove=!0,t&&v(),a.x=es(n),a.y=ts(n),a.delta="x"===e.draggableDirection?a.x-a.start:a.y-a.start,a.start!==a.x&&(a.canCloseOnClick=!1),r.style.transform="translate".concat(e.draggableDirection,"(").concat(a.delta,"px)"),r.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance)))}function E(){document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",E);const t=s.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return o(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate".concat(e.draggableDirection,"(0)"),t.style.opacity="1"}}(0,r.useEffect)((()=>{c.current=e})),(0,r.useEffect)((()=>(s.current&&s.current.addEventListener("d",g,{once:!0}),Wo(e.onOpen)&&e.onOpen((0,r.isValidElement)(e.children)&&e.children.props),()=>{const e=c.current;Wo(e.onClose)&&e.onClose((0,r.isValidElement)(e.children)&&e.children.props)})),[]),(0,r.useEffect)((()=>(e.pauseOnFocusLoss&&(document.hasFocus()||v(),window.addEventListener("focus",g),window.addEventListener("blur",v)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",g),window.removeEventListener("blur",v))})),[e.pauseOnFocusLoss]);const _={onMouseDown:f,onTouchStart:f,onMouseUp:m,onTouchEnd:m};return l&&u&&(_.onMouseEnter=v,_.onMouseLeave=g),h&&(_.onClick=e=>{p&&p(e),a.canCloseOnClick&&d()}),{playToast:g,pauseToast:v,isRunning:t,preventExitTransition:i,toastRef:s,eventHandlers:_}}function rs(e){let{closeToast:t,theme:n,ariaLabel:i="close"}=e;return r.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(n),type:"button",onClick:e=>{e.stopPropagation(),t(e)},"aria-label":i},r.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function is(e){let{delay:t,isRunning:n,closeToast:i,type:o="default",hide:s,className:a,style:c,controlledProgress:l,progress:u,rtl:d,isIn:p,theme:h}=e;const f=s||l&&0===u,m={...c,animationDuration:"".concat(t,"ms"),animationPlayState:n?"running":"paused",opacity:f?0:1};l&&(m.transform="scaleX(".concat(u,")"));const g=Vo("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(h),"Toastify__progress-bar--".concat(o),{"Toastify__progress-bar--rtl":d}),v=Wo(a)?a({rtl:d,type:o,defaultClassName:g}):Vo(g,a);return r.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:v,style:m,[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{p&&i()}})}const os=e=>{const{isRunning:t,preventExitTransition:n,toastRef:i,eventHandlers:o}=ns(e),{closeButton:s,children:a,autoClose:c,onClick:l,type:u,hideProgressBar:d,closeToast:p,transition:h,position:f,className:m,style:g,bodyClassName:v,bodyStyle:y,progressClassName:E,progressStyle:_,updateId:b,role:S,progress:T,rtl:I,toastId:N,deleteToast:w,isIn:C,isLoading:O,iconOut:A,closeOnClick:R,theme:M}=e,D=Vo("Toastify__toast","Toastify__toast-theme--".concat(M),"Toastify__toast--".concat(u),{"Toastify__toast--rtl":I},{"Toastify__toast--close-on-click":R}),k=Wo(m)?m({rtl:I,position:f,type:u,defaultClassName:D}):Vo(D,m),x=!!T||!c,L={closeToast:p,type:u,theme:M};let P=null;return!1===s||(P=Wo(s)?s(L):(0,r.isValidElement)(s)?(0,r.cloneElement)(s,L):rs(L)),r.createElement(h,{isIn:C,done:w,position:f,preventExitTransition:n,nodeRef:i},r.createElement("div",{id:N,onClick:l,className:k,...o,style:g,ref:i},r.createElement("div",{...C&&{role:S},className:Wo(v)?v({type:u}):Vo("Toastify__toast-body",v),style:y},null!=A&&r.createElement("div",{className:Vo("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!O})},A),r.createElement("div",null,a)),P,r.createElement(is,{...b&&!x?{key:"pb-".concat(b)}:{},rtl:I,theme:M,delay:c,isRunning:t,isIn:C,closeToast:p,hide:d,type:u,style:_,className:E,controlledProgress:x,progress:T||0})))},ss=function(e,t){return void 0===t&&(t=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},as=Ko(ss("bounce",!0)),cs=(Ko(ss("slide",!0)),Ko(ss("zoom")),Ko(ss("flip"))),ls=(0,r.forwardRef)(((e,t)=>{const{getToastToRender:n,containerRef:i,isToastActive:o}=$o(e),{className:s,style:a,rtl:c,containerId:l}=e;function u(e){const t=Vo("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":c});return Wo(s)?s({position:e,rtl:c,defaultClassName:t}):Vo(t,Yo(s))}return(0,r.useEffect)((()=>{t&&(t.current=i.current)}),[]),r.createElement("div",{ref:i,className:"Toastify",id:l},n(((e,t)=>{const n=t.length?{...a}:{...a,pointerEvents:"none"};return r.createElement("div",{className:u(e),style:n,key:"container-".concat(e)},t.map(((e,n)=>{let{content:i,props:s}=e;return r.createElement(os,{...s,isIn:o(s.toastId),style:{...s.style,"--nth":n+1,"--len":t.length},key:"toast-".concat(s.key)},i)})))})))}));ls.displayName="ToastContainer",ls.defaultProps={position:"top-right",transition:as,autoClose:5e3,closeButton:rs,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let us,ds=new Map,ps=[],hs=1;function fs(){return""+hs++}function ms(e){return e&&(Go(e.toastId)||Ho(e.toastId))?e.toastId:fs()}function gs(e,t){return ds.size>0?Jo.emit(0,e,t):ps.push({content:e,options:t}),t.toastId}function vs(e,t){return{...t,type:t&&t.type||e,toastId:ms(t)}}function ys(e){return(t,n)=>gs(t,vs(e,n))}function Es(e,t){return gs(e,vs("default",t))}Es.loading=(e,t)=>gs(e,vs("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Es.promise=function(e,t,n){let r,{pending:i,error:o,success:s}=t;i&&(r=Go(i)?Es.loading(i,n):Es.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(e,t,i)=>{if(null==t)return void Es.dismiss(r);const o={type:e,...a,...n,data:i},s=Go(t)?{render:t}:t;return r?Es.update(r,{...o,...s}):Es(s.render,{...o,...s}),i},l=Wo(e)?e():e;return l.then((e=>c("success",s,e))).catch((e=>c("error",o,e))),l},Es.success=ys("success"),Es.info=ys("info"),Es.error=ys("error"),Es.warning=ys("warning"),Es.warn=Es.warning,Es.dark=(e,t)=>gs(e,vs("default",{theme:"dark",...t})),Es.dismiss=e=>{ds.size>0?Jo.emit(1,e):ps=ps.filter((t=>null!=e&&t.options.toastId!==e))},Es.clearWaitingQueue=function(e){return void 0===e&&(e={}),Jo.emit(5,e)},Es.isActive=e=>{let t=!1;return ds.forEach((n=>{n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},Es.update=function(e,t){void 0===t&&(t={}),setTimeout((()=>{const n=function(e,t){let{containerId:n}=t;const r=ds.get(n||us);return r&&r.getToast(e)}(e,t);if(n){const{props:r,content:i}=n,o={delay:100,...r,...t,toastId:t.toastId||e,updateId:fs()};o.toastId!==e&&(o.staleId=e);const s=o.render||i;delete o.render,gs(s,o)}}),0)},Es.done=e=>{Es.update(e,{progress:1})},Es.onChange=e=>(Jo.on(4,e),()=>{Jo.off(4,e)}),Es.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Es.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Jo.on(2,(e=>{us=e.containerId||e,ds.set(us,e),ps.forEach((e=>{Jo.emit(0,e.content,e.options)})),ps=[]})).on(3,(e=>{ds.delete(e.containerId||e),0===ds.size&&Jo.off(0).off(1).off(5)}));const _s=e=>{let{title:t}=e;return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:t})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"#",children:"Category"})}),(0,Me.jsx)("li",{className:"active",children:t})]})})]})})})})},bs=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("div",{className:"card mb25",children:[(0,Me.jsxs)("article",{className:"card-group-item",children:[(0,Me.jsx)("header",{className:"card-header",children:(0,Me.jsx)("h6",{className:"title",children:"Price Range"})}),(0,Me.jsx)("div",{className:"filter-content",children:(0,Me.jsx)("div",{className:"card-body",children:(0,Me.jsx)("input",{type:"range",defaultValue:200,min:0,max:1e3,className:"width100"})})}),(0,Me.jsx)("header",{className:"card-header",children:(0,Me.jsx)("h6",{className:"title",children:"Brands "})}),(0,Me.jsx)("div",{className:"filter-content",children:(0,Me.jsx)("div",{className:"card-body",children:(0,Me.jsxs)("form",{children:[(0,Me.jsxs)("label",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""}),(0,Me.jsx)("span",{className:"form-check-label",children:"Mersedes Benz"})]}),(0,Me.jsxs)("label",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""}),(0,Me.jsx)("span",{className:"form-check-label",children:"Nissan Altima"})]}),(0,Me.jsxs)("label",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""}),(0,Me.jsx)("span",{className:"form-check-label",children:"Another Brand"})]})]})})})]}),(0,Me.jsxs)("article",{className:"card-group-item",children:[(0,Me.jsx)("header",{className:"card-header",children:(0,Me.jsx)("h6",{className:"title",children:"Choose type "})}),(0,Me.jsx)("div",{className:"filter-content",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("label",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"exampleRadio",defaultValue:""}),(0,Me.jsx)("span",{className:"form-check-label",children:"First hand items"})]}),(0,Me.jsxs)("label",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"exampleRadio",defaultValue:""}),(0,Me.jsx)("span",{className:"form-check-label",children:"Brand new items"})]}),(0,Me.jsxs)("label",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"exampleRadio",defaultValue:""}),(0,Me.jsx)("span",{className:"form-check-label",children:"Some other option"})]})]})}),(0,Me.jsx)("header",{className:"card-header",children:(0,Me.jsx)("h6",{className:"title",children:"Similar category "})}),(0,Me.jsx)("div",{className:"filter-content",children:(0,Me.jsxs)("div",{className:"list-group",style:{borderRadius:"0px 0px 4px 4px"},children:[(0,Me.jsxs)(Oe,{to:"/",className:"list-group-item d-flex justify-content-between align-items-center",children:["Freelancer",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill",children:"92"})]}),(0,Me.jsxs)(Oe,{to:"/",className:"list-group-item d-flex justify-content-between align-items-center",children:["Jobs",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill",children:"56"})]}),(0,Me.jsxs)(Oe,{to:"/",className:"list-group-item d-flex justify-content-between align-items-center",children:["Realestate",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill",children:"42"})]}),(0,Me.jsxs)(Oe,{to:"/",className:"list-group-item d-flex justify-content-between align-items-center",children:["Lessons & Courses",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill",children:"30"})]})]})})]})]})}),Ss=e=>{let{item:t}=e;const{loading:n,wishListAdd:i}=Qr(),[o,s]=(0,r.useState)(!1);return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col col-lg-4 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",style:{height:"350px"},children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{to:"/product-detail/".concat(t._id),children:(0,Me.jsx)("img",{src:null===t||void 0===t?void 0:t.photo,className:"card-img-top allImg",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>{return e=t.product_id,i(e),void s(!0);var e},children:(0,Me.jsx)("i",{className:!0===o?"fa-solid fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Oe,{to:"/product-detail/".concat(t._id),children:t.title})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:(e=>{const t=e.split(" ");return t.length>20?t.slice(0,14).join(" ")+"...":e})(t.description)})})]})]},t._id)})})};function Ts(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Ts(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const Is=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Ts(e))&&(r&&(r+=" "),r+=t);return r};function Ns(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}function ws(e,t){const n=(0,je.A)({},t);return Object.keys(e).forEach((r=>{if(r.toString().match(/^(components|slots)$/))n[r]=(0,je.A)({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},o=t[r];n[r]={},o&&Object.keys(o)?i&&Object.keys(i)?(n[r]=(0,je.A)({},o),Object.keys(i).forEach((e=>{n[r][e]=ws(i[e],o[e])}))):n[r]=o:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}function Cs(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?ws(t.components[n].defaultProps,r):r}var Os=__webpack_require__(8280),As=__webpack_require__(5756);const Rs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(As.T);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},Ms=(0,Os.A)();const Ds=function(){return Rs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ms)};function ks(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,o=Ds(r);i&&(o=o[i]||o);return Cs({theme:o,name:n,props:t})}var xs=__webpack_require__(6632),Ls=__webpack_require__(3216),Ps=__webpack_require__(7758),js=__webpack_require__(8812);function Us(e,t){return(0,je.A)({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Fs=__webpack_require__(7266);const zs={black:"#000",white:"#fff"},Bs={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Vs={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Hs={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Gs={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Ws={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Ys={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},qs={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Ks=["mode","contrastThreshold","tonalOffset"],Qs={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:zs.white,default:zs.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Js={text:{primary:zs.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:zs.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Xs(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,Fs.a)(e.main,i):"dark"===t&&(e.dark=(0,Fs.e$)(e.main,o)))}function Zs(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=(0,Ue.A)(e,Ks),o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Ws[200],light:Ws[50],dark:Ws[400]}:{main:Ws[700],light:Ws[400],dark:Ws[800]}}(t),s=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Vs[200],light:Vs[50],dark:Vs[400]}:{main:Vs[500],light:Vs[300],dark:Vs[700]}}(t),a=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Hs[500],light:Hs[300],dark:Hs[700]}:{main:Hs[700],light:Hs[400],dark:Hs[800]}}(t),c=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Ys[400],light:Ys[300],dark:Ys[700]}:{main:Ys[700],light:Ys[500],dark:Ys[900]}}(t),l=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:qs[400],light:qs[300],dark:qs[700]}:{main:qs[800],light:qs[500],dark:qs[900]}}(t),u=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Gs[400],light:Gs[300],dark:Gs[700]}:{main:"#ed6c02",light:Gs[500],dark:Gs[900]}}(t);function d(e){return(0,Fs.eM)(e,Js.text.primary)>=n?Js.text.primary:Qs.text.primary}const p=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:s=700}=e;if(t=(0,je.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,xs.A)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,xs.A)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return Xs(t,"light",o,r),Xs(t,"dark",s,r),t.contrastText||(t.contrastText=d(t.main)),t},h={dark:Js,light:Qs};return(0,Ls.A)((0,je.A)({common:(0,je.A)({},zs),mode:t,primary:p({color:o,name:"primary"}),secondary:p({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:a,name:"error"}),warning:p({color:u,name:"warning"}),info:p({color:c,name:"info"}),success:p({color:l,name:"success"}),grey:Bs,contrastThreshold:n,getContrastText:d,augmentColor:p,tonalOffset:r},h[t]),i)}const $s=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const ea={textTransform:"uppercase"},ta='"Roboto", "Helvetica", "Arial", sans-serif';function na(e,t){const n="function"===typeof t?t(e):t,{fontFamily:r=ta,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:c=700,htmlFontSize:l=16,allVariants:u,pxToRem:d}=n,p=(0,Ue.A)(n,$s);const h=i/14,f=d||(e=>"".concat(e/l*h,"rem")),m=(e,t,n,i,o)=>{return(0,je.A)({fontFamily:r,fontWeight:e,fontSize:f(t),lineHeight:n},r===ta?{letterSpacing:"".concat((s=i/t,Math.round(1e5*s)/1e5),"em")}:{},o,u);var s},g={h1:m(o,96,1.167,-1.5),h2:m(o,60,1.2,-.5),h3:m(s,48,1.167,0),h4:m(s,34,1.235,.25),h5:m(s,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(s,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(s,16,1.5,.15),body2:m(s,14,1.43,.15),button:m(a,14,1.75,.4,ea),caption:m(s,12,1.66,.4),overline:m(s,12,2.66,1,ea),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,Ls.A)((0,je.A)({htmlFontSize:l,pxToRem:f,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:c},g),p,{clone:!1})}function ra(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const ia=["none",ra(0,2,1,-1,0,1,1,0,0,1,3,0),ra(0,3,1,-2,0,2,2,0,0,1,5,0),ra(0,3,3,-2,0,3,4,0,0,1,8,0),ra(0,2,4,-1,0,4,5,0,0,1,10,0),ra(0,3,5,-1,0,5,8,0,0,1,14,0),ra(0,3,5,-1,0,6,10,0,0,1,18,0),ra(0,4,5,-2,0,7,10,1,0,2,16,1),ra(0,5,5,-3,0,8,10,1,0,3,14,2),ra(0,5,6,-3,0,9,12,1,0,3,16,2),ra(0,6,6,-3,0,10,14,1,0,4,18,3),ra(0,6,7,-4,0,11,15,1,0,4,20,3),ra(0,7,8,-4,0,12,17,2,0,5,22,4),ra(0,7,8,-4,0,13,19,2,0,5,24,4),ra(0,7,9,-4,0,14,21,2,0,5,26,4),ra(0,8,9,-5,0,15,22,2,0,6,28,5),ra(0,8,10,-5,0,16,24,2,0,6,30,5),ra(0,8,11,-5,0,17,26,2,0,6,32,5),ra(0,9,11,-5,0,18,28,2,0,7,34,6),ra(0,9,12,-6,0,19,29,2,0,7,36,6),ra(0,10,13,-6,0,20,31,3,0,8,38,7),ra(0,10,13,-6,0,21,33,3,0,8,40,7),ra(0,10,14,-6,0,22,35,3,0,8,42,7),ra(0,11,14,-7,0,23,36,3,0,9,44,8),ra(0,11,15,-7,0,24,38,3,0,9,46,8)],oa=["duration","easing","delay"],sa={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},aa={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function ca(e){return"".concat(Math.round(e),"ms")}function la(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function ua(e){const t=(0,je.A)({},sa,e.easing),n=(0,je.A)({},aa,e.duration);return(0,je.A)({getAutoHeightDuration:la,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:o=t.easeInOut,delay:s=0}=r;(0,Ue.A)(r,oa);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof i?i:ca(i)," ").concat(o," ").concat("string"===typeof s?s:ca(s)))).join(",")}},e,{easing:t,duration:n})}const da={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},pa=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function ha(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:r={},typography:i={}}=e,o=(0,Ue.A)(e,pa);if(e.vars)throw new Error((0,xs.A)(18));const s=Zs(n),a=(0,Os.A)(e);let c=(0,Ls.A)(a,{mixins:Us(a.breakpoints,t),palette:s,shadows:ia.slice(),typography:na(s,i),transitions:ua(r),zIndex:(0,je.A)({},da)});c=(0,Ls.A)(c,o);for(var l=arguments.length,u=new Array(l>1?l-1:0),d=1;d<l;d++)u[d-1]=arguments[d];return c=u.reduce(((e,t)=>(0,Ls.A)(e,t)),c),c.unstable_sxConfig=(0,je.A)({},Ps.A,null==o?void 0:o.unstable_sxConfig),c.unstable_sx=function(e){return(0,js.A)({sx:e,theme:this})},c}const fa=ha(),ma="$$material";function ga(e){let{props:t,name:n}=e;return ks({props:t,name:n,defaultTheme:fa,themeId:ma})}const va=e=>e,ya=(()=>{let e=va;return{configure(t){e=t},generate:t=>e(t),reset(){e=va}}})(),Ea={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function _a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r=Ea[t];return r?"".concat(n,"-").concat(r):"".concat(ya.generate(e),"-").concat(t)}function ba(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=_a(e,t,n)})),r}function Sa(e){return _a("MuiPagination",e)}ba("MuiPagination",["root","ul","outlined","text"]);const Ta=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Ia(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{boundaryCount:t=1,componentName:n="usePagination",count:i=1,defaultPage:o=1,disabled:s=!1,hideNextButton:a=!1,hidePrevButton:c=!1,onChange:l,page:u,showFirstButton:d=!1,showLastButton:p=!1,siblingCount:h=1}=e,f=(0,Ue.A)(e,Ta),[m,g]=function(e){let{controlled:t,default:n,name:i,state:o="value"}=e;const{current:s}=r.useRef(void 0!==t),[a,c]=r.useState(n);return[s?t:a,r.useCallback((e=>{s||c(e)}),[])]}({controlled:u,default:o,name:n,state:"page"}),v=(e,t)=>{u||g(t),l&&l(e,t)},y=(e,t)=>{const n=t-e+1;return Array.from({length:n},((t,n)=>e+n))},E=y(1,Math.min(t,i)),_=y(Math.max(i-t+1,t+1),i),b=Math.max(Math.min(m-h,i-t-2*h-1),t+2),S=Math.min(Math.max(m+h,t+2*h+2),_.length>0?_[0]-2:i-1),T=[...d?["first"]:[],...c?[]:["previous"],...E,...b>t+2?["start-ellipsis"]:t+1<i-t?[t+1]:[],...y(b,S),...S<i-t-1?["end-ellipsis"]:i-t>t?[i-t]:[],..._,...a?[]:["next"],...p?["last"]:[]],I=e=>{switch(e){case"first":return 1;case"previous":return m-1;case"next":return m+1;case"last":return i;default:return null}},N=T.map((e=>"number"===typeof e?{onClick:t=>{v(t,e)},type:"page",page:e,selected:e===m,disabled:s,"aria-current":e===m?"true":void 0}:{onClick:t=>{v(t,I(e))},type:e,page:I(e),selected:!1,disabled:s||-1===e.indexOf("ellipsis")&&("next"===e||"last"===e?m>=i:m<=1)}));return(0,je.A)({items:N},f)}const Na=r.createContext();function wa(e){return _a("MuiPaginationItem",e)}const Ca=ba("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]);var Oa=__webpack_require__(8052);const Aa=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},Ra=e=>Aa(e)&&"classes"!==e,Ma=(0,Oa.Ay)({themeId:ma,defaultTheme:fa,rootShouldForwardProp:Ra});const Da=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{!function(e,t){"function"===typeof e?e(t):e&&(e.current=t)}(t,e)}))}),t)},ka="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;const xa=function(e){const t=r.useRef(e);return ka((()=>{t.current=e})),r.useRef((function(){return(0,t.current)(...arguments)})).current},La={};const Pa=[];class ja{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new ja}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function Ua(){const e=function(e,t){const n=r.useRef(La);return n.current===La&&(n.current=e(t)),n}(ja.create).current;var t;return t=e.disposeEffect,r.useEffect(t,Pa),e}let Fa=!0,za=!1;const Ba=new ja,Va={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Ha(e){e.metaKey||e.altKey||e.ctrlKey||(Fa=!0)}function Ga(){Fa=!1}function Wa(){"hidden"===this.visibilityState&&za&&(Fa=!0)}function Ya(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return Fa||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!Va[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const qa=function(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",Ha,!0),t.addEventListener("mousedown",Ga,!0),t.addEventListener("pointerdown",Ga,!0),t.addEventListener("touchstart",Ga,!0),t.addEventListener("visibilitychange",Wa,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!Ya(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(za=!0,Ba.start(100,(()=>{za=!1})),t.current=!1,!0)},ref:e}};function Ka(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Qa(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function Ja(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Xa(e,t,n){var i=Qa(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var c in t){if(i[c])for(r=0;r<i[c].length;r++){var l=i[c][r];a[i[c][r]]=n(l)}a[c]=n(c)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(t,i);return Object.keys(o).forEach((function(s){var a=o[s];if((0,r.isValidElement)(a)){var c=s in t,l=s in i,u=t[s],d=(0,r.isValidElement)(u)&&!u.props.in;!l||c&&!d?l||!c||d?l&&c&&(0,r.isValidElement)(u)&&(o[s]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:u.props.in,exit:Ja(a,"exit",e),enter:Ja(a,"enter",e)})):o[s]=(0,r.cloneElement)(a,{in:!1}):o[s]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:Ja(a,"exit",e),enter:Ja(a,"enter",e)})}})),o}var Za=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},$a=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}at(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,i,o=t.children,s=t.handleExited;return{children:t.firstRender?(n=e,i=s,Qa(n.children,(function(e){return(0,r.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:Ja(e,"appear",n),enter:Ja(e,"enter",n),exit:Ja(e,"exit",n)})}))):Xa(e,o,s),firstRender:!1}},n.handleExited=function(e,t){var n=Qa(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,je.A)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=(0,Ue.A)(e,["component","childFactory"]),o=this.state.contextValue,s=Za(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?r.createElement(lt.Provider,{value:o},s):r.createElement(lt.Provider,{value:o},r.createElement(t,i,s))},t}(r.Component);$a.propTypes={},$a.defaultProps={component:"div",childFactory:function(e){return e}};const ec=$a;var tc=__webpack_require__(3290);const nc=function(e){const{className:t,classes:n,pulsate:i=!1,rippleX:o,rippleY:s,rippleSize:a,in:c,onExited:l,timeout:u}=e,[d,p]=r.useState(!1),h=Is(t,n.ripple,n.rippleVisible,i&&n.ripplePulsate),f={width:a,height:a,top:-a/2+s,left:-a/2+o},m=Is(n.child,d&&n.childLeaving,i&&n.childPulsate);return c||d||p(!0),r.useEffect((()=>{if(!c&&null!=l){const e=setTimeout(l,u);return()=>{clearTimeout(e)}}}),[l,c,u]),(0,Me.jsx)("span",{className:h,style:f,children:(0,Me.jsx)("span",{className:m})})};const rc=ba("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var ic,oc,sc,ac;const cc=["center","classes","className"];let lc,uc,dc,pc;const hc=(0,tc.i7)(lc||(lc=ic||(ic=Ka(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),fc=(0,tc.i7)(uc||(uc=oc||(oc=Ka(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),mc=(0,tc.i7)(dc||(dc=sc||(sc=Ka(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),gc=Ma("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),vc=Ma(nc,{name:"MuiTouchRipple",slot:"Ripple"})(pc||(pc=ac||(ac=Ka(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),rc.rippleVisible,hc,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),rc.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),rc.child,rc.childLeaving,fc,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),rc.childPulsate,mc,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),yc=r.forwardRef((function(e,t){const n=ga({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s}=n,a=(0,Ue.A)(n,cc),[c,l]=r.useState([]),u=r.useRef(0),d=r.useRef(null);r.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[c]);const p=r.useRef(!1),h=Ua(),f=r.useRef(null),m=r.useRef(null),g=r.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:s}=e;l((e=>[...e,(0,Me.jsx)(vc,{classes:{ripple:Is(o.ripple,rc.ripple),rippleVisible:Is(o.rippleVisible,rc.rippleVisible),ripplePulsate:Is(o.ripplePulsate,rc.ripplePulsate),child:Is(o.child,rc.child),childLeaving:Is(o.childLeaving,rc.childLeaving),childPulsate:Is(o.childPulsate,rc.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},u.current)])),u.current+=1,d.current=s}),[o]),v=r.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=i||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&p.current)return void(p.current=!1);"touchstart"===(null==e?void 0:e.type)&&(p.current=!0);const a=s?null:m.current,c=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let l,u,d;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(c.width/2),u=Math.round(c.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;l=Math.round(t-c.left),u=Math.round(n-c.top)}if(o)d=Math.sqrt((2*c.width**2+c.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-l),l)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===f.current&&(f.current=()=>{g({pulsate:r,rippleX:l,rippleY:u,rippleSize:d,cb:n})},h.start(80,(()=>{f.current&&(f.current(),f.current=null)}))):g({pulsate:r,rippleX:l,rippleY:u,rippleSize:d,cb:n})}),[i,g,h]),y=r.useCallback((()=>{v({},{pulsate:!0})}),[v]),E=r.useCallback(((e,t)=>{if(h.clear(),"touchend"===(null==e?void 0:e.type)&&f.current)return f.current(),f.current=null,void h.start(0,(()=>{E(e,t)}));f.current=null,l((e=>e.length>0?e.slice(1):e)),d.current=t}),[h]);return r.useImperativeHandle(t,(()=>({pulsate:y,start:v,stop:E})),[y,v,E]),(0,Me.jsx)(gc,(0,je.A)({className:Is(rc.root,o.root,s),ref:m},a,{children:(0,Me.jsx)(ec,{component:null,exit:!0,children:c})}))})),Ec=yc;function _c(e){return _a("MuiButtonBase",e)}const bc=ba("MuiButtonBase",["root","disabled","focusVisible"]),Sc=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Tc=Ma("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(bc.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Ic=r.forwardRef((function(e,t){const n=ga({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:c="button",disabled:l=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:p=!1,LinkComponent:h="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:E,onKeyDown:_,onKeyUp:b,onMouseDown:S,onMouseLeave:T,onMouseUp:I,onTouchEnd:N,onTouchMove:w,onTouchStart:C,tabIndex:O=0,TouchRippleProps:A,touchRippleRef:R,type:M}=n,D=(0,Ue.A)(n,Sc),k=r.useRef(null),x=r.useRef(null),L=Da(x,R),{isFocusVisibleRef:P,onFocus:j,onBlur:U,ref:F}=qa(),[z,B]=r.useState(!1);l&&z&&B(!1),r.useImperativeHandle(i,(()=>({focusVisible:()=>{B(!0),k.current.focus()}})),[]);const[V,H]=r.useState(!1);r.useEffect((()=>{H(!0)}),[]);const G=V&&!u&&!l;function W(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return xa((r=>{t&&t(r);return!n&&x.current&&x.current[e](r),!0}))}r.useEffect((()=>{z&&p&&!u&&V&&x.current.pulsate()}),[u,p,z,V]);const Y=W("start",S),q=W("stop",g),K=W("stop",v),Q=W("stop",I),J=W("stop",(e=>{z&&e.preventDefault(),T&&T(e)})),X=W("start",C),Z=W("stop",N),$=W("stop",w),ee=W("stop",(e=>{U(e),!1===P.current&&B(!1),f&&f(e)}),!1),te=xa((e=>{k.current||(k.current=e.currentTarget),j(e),!0===P.current&&(B(!0),E&&E(e)),y&&y(e)})),ne=()=>{const e=k.current;return c&&"button"!==c&&!("A"===e.tagName&&e.href)},re=r.useRef(!1),ie=xa((e=>{p&&!re.current&&z&&x.current&&" "===e.key&&(re.current=!0,x.current.stop(e,(()=>{x.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),_&&_(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!l&&(e.preventDefault(),m&&m(e))})),oe=xa((e=>{p&&" "===e.key&&x.current&&z&&!e.defaultPrevented&&(re.current=!1,x.current.stop(e,(()=>{x.current.pulsate(e)}))),b&&b(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let se=c;"button"===se&&(D.href||D.to)&&(se=h);const ae={};"button"===se?(ae.type=void 0===M?"button":M,ae.disabled=l):(D.href||D.to||(ae.role="button"),l&&(ae["aria-disabled"]=l));const ce=Da(t,F,k);const le=(0,je.A)({},n,{centerRipple:o,component:c,disabled:l,disableRipple:u,disableTouchRipple:d,focusRipple:p,tabIndex:O,focusVisible:z}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o=Ns({root:["root",t&&"disabled",n&&"focusVisible"]},_c,i);return n&&r&&(o.root+=" ".concat(r)),o})(le);return(0,Me.jsxs)(Tc,(0,je.A)({as:se,className:Is(ue.root,a),ownerState:le,onBlur:ee,onClick:m,onContextMenu:q,onFocus:te,onKeyDown:ie,onKeyUp:oe,onMouseDown:Y,onMouseLeave:J,onMouseUp:Q,onDragLeave:K,onTouchEnd:Z,onTouchMove:$,onTouchStart:X,ref:ce,tabIndex:l?-1:O,type:M},ae,D,{children:[s,G?(0,Me.jsx)(Ec,(0,je.A)({ref:L,center:o},A)):null]}))})),Nc=Ic;const wc=__webpack_require__(410).A;function Cc(e){return _a("MuiSvgIcon",e)}ba("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Oc=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Ac=Ma("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(wc(n.color))],t["fontSize".concat(wc(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,o,s,a,c,l,u,d,p,h,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=t.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(s=t.typography)||null==(a=s.pxToRem)?void 0:a.call(s,20))||"1.25rem",medium:(null==(c=t.typography)||null==(l=c.pxToRem)?void 0:l.call(c,24))||"1.5rem",large:(null==(u=t.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(p=null==(h=(t.vars||t).palette)||null==(h=h[n.color])?void 0:h.main)?p:{action:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),Rc=r.forwardRef((function(e,t){const n=ga({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:a="svg",fontSize:c="medium",htmlColor:l,inheritViewBox:u=!1,titleAccess:d,viewBox:p="0 0 24 24"}=n,h=(0,Ue.A)(n,Oc),f=r.isValidElement(i)&&"svg"===i.type,m=(0,je.A)({},n,{color:s,component:a,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:p,hasSvgAsChild:f}),g={};u||(g.viewBox=p);const v=(e=>{const{color:t,fontSize:n,classes:r}=e;return Ns({root:["root","inherit"!==t&&"color".concat(wc(t)),"fontSize".concat(wc(n))]},Cc,r)})(m);return(0,Me.jsxs)(Ac,(0,je.A)({as:a,className:Is(v.root,o),focusable:"false",color:l,"aria-hidden":!d||void 0,role:d?"img":void 0,ref:t},g,h,f&&i.props,{ownerState:m,children:[f?i.props.children:i,d?(0,Me.jsx)("title",{children:d}):null]}))}));Rc.muiName="SvgIcon";const Mc=Rc;function Dc(e,t){function n(n,r){return(0,Me.jsx)(Mc,(0,je.A)({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))}return n.muiName=Mc.muiName,r.memo(r.forwardRef(n))}const kc=Dc((0,Me.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),xc=Dc((0,Me.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Lc=Dc((0,Me.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Pc=Dc((0,Me.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),jc=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Uc=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat(wc(n.size))],"text"===n.variant&&t["text".concat(wc(n.color))],"outlined"===n.variant&&t["outlined".concat(wc(n.color))],"rounded"===n.shape&&t.rounded,"page"===n.type&&t.page,("start-ellipsis"===n.type||"end-ellipsis"===n.type)&&t.ellipsis,("previous"===n.type||"next"===n.type)&&t.previousNext,("first"===n.type||"last"===n.type)&&t.firstLast]},Fc=Ma("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Uc})((e=>{let{theme:t,ownerState:n}=e;return(0,je.A)({},t.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",["&.".concat(Ca.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"small"===n.size&&{minWidth:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===n.size&&{minWidth:40,borderRadius:20,padding:"0 10px",fontSize:t.typography.pxToRem(15)})})),zc=Ma(Nc,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Uc})((e=>{let{theme:t,ownerState:n}=e;return(0,je.A)({},t.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,["&.".concat(Ca.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(Ca.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(Ca.selected)]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Fs.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},["&.".concat(Ca.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Fs.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},["&.".concat(Ca.disabled)]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},"small"===n.size&&{minWidth:26,height:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===n.size&&{minWidth:40,height:40,borderRadius:20,padding:"0 10px",fontSize:t.typography.pxToRem(15)},"rounded"===n.shape&&{borderRadius:(t.vars||t).shape.borderRadius})}),(e=>{let{theme:t,ownerState:n}=e;return(0,je.A)({},"text"===n.variant&&{["&.".concat(Ca.selected)]:(0,je.A)({},"standard"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}},["&.".concat(Ca.focusVisible)]:{backgroundColor:(t.vars||t).palette[n.color].dark}},{["&.".concat(Ca.disabled)]:{color:(t.vars||t).palette.action.disabled}})},"outlined"===n.variant&&{border:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(Ca.selected)]:(0,je.A)({},"standard"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.5)"):(0,Fs.X4)(t.palette[n.color].main,.5)),backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.activatedOpacity,")"):(0,Fs.X4)(t.palette[n.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / calc(").concat(t.vars.palette.action.activatedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Fs.X4)(t.palette[n.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(Ca.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / calc(").concat(t.vars.palette.action.activatedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Fs.X4)(t.palette[n.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{["&.".concat(Ca.disabled)]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})})),Bc=Ma("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})((e=>{let{theme:t,ownerState:n}=e;return(0,je.A)({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},"small"===n.size&&{fontSize:t.typography.pxToRem(18)},"large"===n.size&&{fontSize:t.typography.pxToRem(22)})})),Vc=r.forwardRef((function(e,t){const n=ga({props:e,name:"MuiPaginationItem"}),{className:i,color:o="standard",component:s,components:a={},disabled:c=!1,page:l,selected:u=!1,shape:d="circular",size:p="medium",slots:h={},type:f="page",variant:m="text"}=n,g=(0,Ue.A)(n,jc),v=(0,je.A)({},n,{color:o,disabled:c,selected:u,shape:d,size:p,type:f,variant:m}),y=(()=>{const e=r.useContext(Na);return null!=e&&e})(),E=(e=>{const{classes:t,color:n,disabled:r,selected:i,size:o,shape:s,type:a,variant:c}=e;return Ns({root:["root","size".concat(wc(o)),c,s,"standard"!==n&&"color".concat(wc(n)),"standard"!==n&&"".concat(c).concat(wc(n)),r&&"disabled",i&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[a]],icon:["icon"]},wa,t)})(v),_=(y?{previous:h.next||a.next||Pc,next:h.previous||a.previous||Lc,last:h.first||a.first||kc,first:h.last||a.last||xc}:{previous:h.previous||a.previous||Lc,next:h.next||a.next||Pc,first:h.first||a.first||kc,last:h.last||a.last||xc})[f];return"start-ellipsis"===f||"end-ellipsis"===f?(0,Me.jsx)(Fc,{ref:t,ownerState:v,className:Is(E.root,i),children:"\u2026"}):(0,Me.jsxs)(zc,(0,je.A)({ref:t,ownerState:v,component:s,disabled:c,className:Is(E.root,i)},g,{children:["page"===f&&l,_?(0,Me.jsx)(Bc,{as:_,ownerState:v,className:E.icon}):null]}))})),Hc=Vc,Gc=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Wc=Ma("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),Yc=Ma("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function qc(e,t,n){return"page"===e?"".concat(n?"":"Go to ","page ").concat(t):"Go to ".concat(e," page")}const Kc=r.forwardRef((function(e,t){const n=ga({props:e,name:"MuiPagination"}),{boundaryCount:r=1,className:i,color:o="standard",count:s=1,defaultPage:a=1,disabled:c=!1,getItemAriaLabel:l=qc,hideNextButton:u=!1,hidePrevButton:d=!1,renderItem:p=(e=>(0,Me.jsx)(Hc,(0,je.A)({},e))),shape:h="circular",showFirstButton:f=!1,showLastButton:m=!1,siblingCount:g=1,size:v="medium",variant:y="text"}=n,E=(0,Ue.A)(n,Gc),{items:_}=Ia((0,je.A)({},n,{componentName:"Pagination"})),b=(0,je.A)({},n,{boundaryCount:r,color:o,count:s,defaultPage:a,disabled:c,getItemAriaLabel:l,hideNextButton:u,hidePrevButton:d,renderItem:p,shape:h,showFirstButton:f,showLastButton:m,siblingCount:g,size:v,variant:y}),S=(e=>{const{classes:t,variant:n}=e;return Ns({root:["root",n],ul:["ul"]},Sa,t)})(b);return(0,Me.jsx)(Wc,(0,je.A)({"aria-label":"pagination navigation",className:Is(S.root,i),ownerState:b,ref:t},E,{children:(0,Me.jsx)(Yc,{className:S.ul,ownerState:b,children:_.map(((e,t)=>(0,Me.jsx)("li",{children:p((0,je.A)({},e,{color:o,"aria-label":l(e.type,e.page,e.selected),shape:h,size:v,variant:y}))},t)))})}))})),Qc=Kc;var Jc=__webpack_require__(7713);const Xc=["ownerState"],Zc=["variants"],$c=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function el(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const tl=(0,Os.A)(),nl=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function rl(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function il(e){return e?(t,n)=>n[e]:null}function ol(e,t){let{ownerState:n}=t,r=(0,Ue.A)(t,Xc);const i="function"===typeof e?e((0,je.A)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap((e=>ol(e,(0,je.A)({ownerState:n},r))));if(i&&"object"===typeof i&&Array.isArray(i.variants)){const{variants:e=[]}=i;let t=(0,Ue.A)(i,Zc);return e.forEach((e=>{let i=!0;"function"===typeof e.props?i=e.props((0,je.A)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)})),i&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,je.A)({ownerState:n},r,n)):e.style))})),t}return i}const sl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=tl,rootShouldForwardProp:r=el,slotShouldForwardProp:i=el}=e,o=e=>(0,js.A)((0,je.A)({},e,{theme:rl((0,je.A)({},e,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Jc.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:a,slot:c,skipVariantsResolver:l,skipSx:u,overridesResolver:d=il(nl(c))}=s,p=(0,Ue.A)(s,$c),h=void 0!==l?l:c&&"Root"!==c&&"root"!==c||!1,f=u||!1;let m=el;"Root"===c||"root"===c?m=r:c?m=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=(0,Jc.default)(e,(0,je.A)({shouldForwardProp:m,label:undefined},p)),v=e=>"function"===typeof e&&e.__emotion_real!==e||(0,Ls.Q)(e)?r=>ol(e,(0,je.A)({},r,{theme:rl({theme:r.theme,defaultTheme:n,themeId:t})})):e,y=function(r){let i=v(r);for(var s=arguments.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=arguments[l];const u=c?c.map(v):[];a&&d&&u.push((e=>{const r=rl((0,je.A)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[a]||!r.components[a].styleOverrides)return null;const i=r.components[a].styleOverrides,o={};return Object.entries(i).forEach((t=>{let[n,i]=t;o[n]=ol(i,(0,je.A)({},e,{theme:r}))})),d(e,o)})),a&&!h&&u.push((e=>{var r;const i=rl((0,je.A)({},e,{defaultTheme:n,themeId:t}));return ol({variants:null==i||null==(r=i.components)||null==(r=r[a])?void 0:r.variants},(0,je.A)({},e,{theme:i}))})),f||u.push(o);const p=u.length-c.length;if(Array.isArray(r)&&p>0){const e=new Array(p).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const m=g(i,...u);return e.muiName&&(m.muiName=e.muiName),m};return g.withConfig&&(y.withConfig=g.withConfig),y}}(),al=sl;var cl=__webpack_require__(8698),ll=__webpack_require__(9751),ul=__webpack_require__(8604);const dl=["component","direction","spacing","divider","children","className","useFlexGap"],pl=(0,Os.A)(),hl=al("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function fl(e){return ks({props:e,name:"MuiStack",defaultTheme:pl})}function ml(e,t){const n=r.Children.toArray(e).filter(Boolean);return n.reduce(((e,i,o)=>(e.push(i),o<n.length-1&&e.push(r.cloneElement(t,{key:"separator-".concat(o)})),e)),[])}const gl=e=>{let{ownerState:t,theme:n}=e,r=(0,je.A)({display:"flex",flexDirection:"column"},(0,ll.NI)({theme:n},(0,ll.kW)({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=(0,ul.LX)(n),i=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),o=(0,ll.kW)({values:t.direction,base:i}),s=(0,ll.kW)({values:t.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach(((e,t,n)=>{if(!o[e]){const r=t>0?o[n[t-1]]:"column";o[e]=r}}));const a=(n,r)=>{return t.useFlexGap?{gap:(0,ul._W)(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((i=r?o[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]))]:(0,ul._W)(e,n)}};var i};r=(0,Ls.A)(r,(0,ll.NI)({theme:n},s,a))}return r=(0,ll.iZ)(n.breakpoints,r),r};const vl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=hl,useThemeProps:n=fl,componentName:i="MuiStack"}=e,o=t(gl),s=r.forwardRef((function(e,t){const r=n(e),s=(0,cl.A)(r),{component:a="div",direction:c="column",spacing:l=0,divider:u,children:d,className:p,useFlexGap:h=!1}=s,f=(0,Ue.A)(s,dl),m={direction:c,spacing:l,useFlexGap:h},g=Ns({root:["root"]},(e=>_a(i,e)),{});return(0,Me.jsx)(o,(0,je.A)({as:a,ownerState:m,ref:t,className:Is(g.root,p)},f,{children:u?ml(d,u):d}))}));return s}({createStyledComponent:Ma("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>ga({props:e,name:"MuiStack"})}),yl=vl,El=e=>{let{col:t}=e;const n=Z();let r="/jobs"===n.pathname||"/freelancer"===n.pathname?170:250,i="/freelancer"===n.pathname?"170px":"100%";return(0,Me.jsx)("div",{className:"col-md-".concat(t," mb-4 overflow-hidden "),style:{minHeight:r,width:"/freelancer"===n.pathname&&"100%"},children:(0,Me.jsx)("div",{className:"card placeholder-glow p-1","aria-hidden":"true",style:{height:"100%",borderRadius:8},children:(0,Me.jsx)("div",{className:"placeholder ",style:{height:i,borderRadius:4}})})})},_l=e=>{let{col:t}=e;return(0,Me.jsx)("div",{className:"col-md-".concat(t," mb-4 overflow-hidden "),style:{aspectRatio:1},children:(0,Me.jsxs)("div",{className:"card placeholder-glow p-1","aria-hidden":"true",style:{height:"100%",borderRadius:8},children:[(0,Me.jsx)("div",{className:"placeholder",style:{height:"50%",borderRadius:4}}),(0,Me.jsxs)("div",{className:"d-grid gap-3 p-2",children:[(0,Me.jsxs)("p",{className:"card-text placeholder-glow",children:[(0,Me.jsx)("span",{className:"placeholder col-7"}),(0,Me.jsx)("span",{className:"placeholder col-4"}),(0,Me.jsx)("span",{className:"placeholder col-4"}),(0,Me.jsx)("span",{className:"placeholder col-6"}),(0,Me.jsx)("span",{className:"placeholder col-8"})]}),(0,Me.jsx)("button",{tabIndex:"-1",className:"btn btn-primary disabled placeholder col-6"})]})]})})},bl=()=>(0,Me.jsx)("div",{className:"mb-3 overflow-hidden ",children:(0,Me.jsxs)("div",{className:"card placeholder-glow p-1 responsble-skeleton","aria-hidden":"true",children:[(0,Me.jsx)("div",{className:"placeholder outer-div"}),(0,Me.jsxs)("div",{className:"d-flex gap-3 p-2 position-relative ",style:{flex:1,flexDirection:"column"},children:[(0,Me.jsx)("span",{className:"placeholder",style:{height:20,width:"80%"}}),(0,Me.jsx)("span",{className:"placeholder",style:{height:20,width:"70%"}}),(0,Me.jsx)("span",{className:"placeholder",style:{height:20,width:"50%"}}),(0,Me.jsx)("button",{tabIndex:"-1",className:"btn btn-primary disabled placeholder position-absolute ",style:{height:30,width:"60%",bottom:"6px"}})]})]})}),Sl=()=>{const{goodsList:e,getGoodsProduct:t,totalItem:n,listLoading:i}=Qr(),[o,s]=(0,r.useState)(1),[a,c]=(0,r.useState)(""),l=Math.ceil((null===n||void 0===n?void 0:n.goods)/10),u=Z(),d=new URLSearchParams(u.search).get("sub_category"),p={keyword_search:a,page:o,limit:10};return(0,r.useEffect)((()=>{(async()=>{await t(p,d)})()}),[a,o,d]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(_s,{title:"Goods of all kinds"}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsx)(bs,{})}),(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("aside",{className:"row pt-2",children:i.goods?Array.from({length:6}).map(((e,t)=>(0,Me.jsx)(_l,{col:4},t))):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(Ss,{item:e},t)))}),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(yl,{spacing:2,children:(0,Me.jsx)(Qc,{count:l,page:o,onChange:(e,t)=>s(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Me.jsx)(ei,{})]})})})]})},Tl=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Il={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|c>>6,p=63&c;a||(p=64,o||(d=64)),r.push(n[l],n[u],n[d],n[p])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Tl(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Nl;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Nl extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wl=function(e){return function(e){const t=Tl(e);return Il.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Cl=function(t){try{return Il.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const Ol=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof __webpack_require__.g)return __webpack_require__.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Al=()=>{try{return Ol()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const n=t&&Cl(t[1]);return n&&JSON.parse(n)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Rl=e=>{var t,n;return null===(n=null===(t=Al())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ml=()=>{var e;return null===(e=Al())||void 0===e?void 0:e.config},Dl=e=>{var t;return null===(t=Al())||void 0===t?void 0:t["_".concat(e)]};class kl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function xl(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}class Ll extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ll.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pl.prototype.create)}}class Pl{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(jl,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ll(n,o,t)}}const jl=/\{\$([^}]+)}/g;function Ul(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(Fl(n)&&Fl(o)){if(!Ul(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Fl(e){return null!==e&&"object"===typeof e}function zl(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Bl(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Vl(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Hl{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(t,n,r){let i;if(void 0===t&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:n,complete:r},void 0===i.next&&(i.next=Gl),void 0===i.error&&(i.error=Gl),void 0===i.complete&&(i.complete=Gl);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(t,n){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{n(this.observers[t])}catch(e){"undefined"!==typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Gl(){}function Wl(e){return e&&e._delegate?e._delegate:e}class Yl{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ql="[DEFAULT]";class Kl{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const t=new kl;if(this.instancesDeferred.set(n,t),this.isInitialized(n)||this.shouldAutoInitialize())try{const e=this.getOrInitializeService({instanceIdentifier:n});e&&t.resolve(e)}catch(e){}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(n=null===t||void 0===t?void 0:t.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:ql})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(e){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ql;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ql;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ql;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ql(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ql;return this.component?this.component.multipleInstances?e:ql:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Ql(e){return e===ql?void 0:e}class Jl{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Kl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Xl=[];var Zl;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Zl||(Zl={}));const $l={debug:Zl.DEBUG,verbose:Zl.VERBOSE,info:Zl.INFO,warn:Zl.WARN,error:Zl.ERROR,silent:Zl.SILENT},eu=Zl.INFO,tu={[Zl.DEBUG]:"log",[Zl.VERBOSE]:"log",[Zl.INFO]:"info",[Zl.WARN]:"warn",[Zl.ERROR]:"error"},nu=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=tu[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class ru{constructor(e){this.name=e,this._logLevel=eu,this._logHandler=nu,this._userLogHandler=null,Xl.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zl))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?$l[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Zl.DEBUG,...t),this._logHandler(this,Zl.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Zl.VERBOSE,...t),this._logHandler(this,Zl.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Zl.INFO,...t),this._logHandler(this,Zl.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Zl.WARN,...t),this._logHandler(this,Zl.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Zl.ERROR,...t),this._logHandler(this,Zl.ERROR,...t)}}const iu=(e,t)=>t.some((t=>e instanceof t));let ou,su;const au=new WeakMap,cu=new WeakMap,lu=new WeakMap,uu=new WeakMap,du=new WeakMap;let pu={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return cu.get(e);if("objectStoreNames"===t)return e.objectStoreNames||lu.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mu(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function hu(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(su||(su=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(gu(this),n),mu(au.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return mu(e.apply(gu(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(gu(this),t,...r);return lu.set(o,t.sort?t.sort():[t]),mu(o)}}function fu(e){return"function"===typeof e?hu(e):(e instanceof IDBTransaction&&function(e){if(cu.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));cu.set(e,t)}(e),iu(e,ou||(ou=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,pu):e)}function mu(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(mu(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&au.set(t,e)})).catch((()=>{})),du.set(t,e),t}(e);if(uu.has(e))return uu.get(e);const t=fu(e);return t!==e&&(uu.set(e,t),du.set(t,e)),t}const gu=e=>du.get(e);const vu=["get","getKey","getAll","getAllKeys","count"],yu=["put","add","delete","clear"],Eu=new Map;function _u(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Eu.get(t))return Eu.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=yu.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!vu.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return Eu.set(t,o),o}pu=(e=>({...e,get:(t,n,r)=>_u(t,n)||e.get(t,n,r),has:(t,n)=>!!_u(t,n)||e.has(t,n)}))(pu);class bu{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Su="@firebase/app",Tu="0.9.29",Iu=new ru("@firebase/app"),Nu="[DEFAULT]",wu={[Su]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Cu=new Map,Ou=new Map;function Au(t,n){try{t.container.addComponent(n)}catch(e){Iu.debug("Component ".concat(n.name," failed to register with FirebaseApp ").concat(t.name),e)}}function Ru(e){const t=e.name;if(Ou.has(t))return Iu.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ou.set(t,e);for(const n of Cu.values())Au(n,e);return!0}function Mu(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Du=new Pl("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ku{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Yl("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Du.create("app-deleted",{appName:this._name})}}const xu="10.9.0";function Lu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Nu,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Du.create("bad-app-name",{appName:String(i)});if(n||(n=Ml()),!n)throw Du.create("no-options");const o=Cu.get(i);if(o){if(Ul(n,o.options)&&Ul(r,o.config))return o;throw Du.create("duplicate-app",{appName:i})}const s=new Jl(i);for(const c of Ou.values())s.addComponent(c);const a=new ku(n,r,s);return Cu.set(i,a),a}function Pu(e,t,n){var r;let i=null!==(r=wu[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Iu.warn(e.join(" "))}Ru(new Yl("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const ju="firebase-heartbeat-database",Uu=1,Fu="firebase-heartbeat-store";let zu=null;function Bu(){return zu||(zu=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=mu(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(mu(s.result),e.oldVersion,e.newVersion,mu(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(ju,Uu,{upgrade:(t,n)=>{if(0===n)try{t.createObjectStore(Fu)}catch(e){console.warn(e)}}}).catch((e=>{throw Du.create("idb-open",{originalErrorMessage:e.message})}))),zu}async function Vu(t,n){try{const e=(await Bu()).transaction(Fu,"readwrite"),r=e.objectStore(Fu);await r.put(n,Hu(t)),await e.done}catch(e){if(e instanceof Ll)Iu.warn(e.message);else{const n=Du.create("idb-set",{originalErrorMessage:null===e||void 0===e?void 0:e.message});Iu.warn(n.message)}}}function Hu(e){return"".concat(e.name,"!").concat(e.options.appId)}class Gu{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Yu(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Wu();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Wu(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),qu(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),qu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=wl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Wu(){return(new Date).toISOString().substring(0,10)}class Yu{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Bu()).transaction(Fu),n=await e.objectStore(Fu).get(Hu(t));return await e.done,n}catch(e){if(e instanceof Ll)Iu.warn(e.message);else{const n=Du.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});Iu.warn(n.message)}}}(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Vu(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Vu(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function qu(e){return wl(JSON.stringify({version:2,heartbeats:e})).length}var Ku;Ku="",Ru(new Yl("platform-logger",(e=>new bu(e)),"PRIVATE")),Ru(new Yl("heartbeat",(e=>new Gu(e)),"PRIVATE")),Pu(Su,Tu,Ku),Pu(Su,Tu,"esm2017"),Pu("fire-js","");Pu("firebase","10.9.0","app");function Qu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Ju(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Xu=Ju,Zu=new Pl("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$u=new ru("@firebase/auth");function ed(e){if($u.logLevel<=Zl.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];$u.error("Auth (".concat(xu,"): ").concat(e),...n)}}function td(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw od(e,...n)}function nd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return od(e,...n)}function rd(e,t,n){const r=Object.assign(Object.assign({},Xu()),{[t]:n});return new Pl("auth","Firebase",r).create(t,{appName:e.name})}function id(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&td(e,"argument-error"),rd(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function od(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Zu.create(e,...n)}function sd(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw od(t,...r)}}function ad(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ed(t),new Error(t)}function cd(e,t){e||ad(t)}function ld(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ud(){return"http:"===dd()||"https:"===dd()}function dd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function pd(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ud()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class hd{constructor(e,t){this.shortDelay=e,this.longDelay=t,cd(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xl())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return pd()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fd(e,t){cd(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class md{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ad("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ad("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ad("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},vd=new hd(3e4,6e4);function yd(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ed(e,t,n,r){return _d(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=zl(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),md.fetch()(Sd(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function _d(t,n,r){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},gd),n);try{const e=new Id(t),n=await Promise.race([r(),e.promise]);e.clearNetworkTimeout();const o=await n.json();if("needConfirmation"in o)throw Nd(t,"account-exists-with-different-credential",o);if(n.ok&&!("errorMessage"in o))return o;{const e=n.ok?o.errorMessage:o.error.message,[r,s]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===r)throw Nd(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===r)throw Nd(t,"email-already-in-use",o);if("USER_DISABLED"===r)throw Nd(t,"user-disabled",o);const a=i[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw rd(t,a,s);td(t,a)}}catch(e){if(e instanceof Ll)throw e;td(t,"network-request-failed",{message:String(e)})}}async function bd(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Ed(e,t,n,r,i);return"mfaPendingCredential"in o&&td(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Sd(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?fd(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Td(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Id{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(nd(this.auth,"network-request-failed"))),vd.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nd(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=nd(e,t,r);return i.customData._tokenResponse=n,i}function wd(e){return void 0!==e&&void 0!==e.enterprise}class Cd{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Td(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Od(e,t){return Ed(e,"GET","/v2/recaptchaConfig",yd(e,t))}function Ad(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function Rd(e){return 1e3*Number(e)}function Md(t){const[n,r,i]=t.split(".");if(void 0===n||void 0===r||void 0===i)return ed("JWT malformed, contained fewer than 3 sections"),null;try{const e=Cl(r);return e?JSON.parse(e):(ed("Failed to decode base64 JWT payload"),null)}catch(e){return ed("Caught error parsing JWT payload as JSON",null===e||void 0===e?void 0:e.toString()),null}}async function Dd(t,n){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return n;try{return await n}catch(e){throw e instanceof Ll&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class kd{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class xd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ad(this.lastLoginAt),this.creationTime=Ad(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ld(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Dd(e,async function(e,t){return Ed(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));sd(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map((e=>{var{providerId:t}=e,n=Qu(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(c=e.providerData,l=s,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),p=!!u&&d,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new xd(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(e,h)}class Pd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){sd(e.idToken,"internal-error"),sd("undefined"!==typeof e.idToken,"internal-error"),sd("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Md(e);return sd(t,"internal-error"),sd("undefined"!==typeof t.exp,"internal-error"),sd("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return sd(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await _d(e,{},(async()=>{const n=zl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=Sd(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",md.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Pd;return n&&(sd("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(sd("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(sd("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pd,this.toJSON())}_performRefresh(){return ad("not implemented")}}function jd(e,t){sd("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ud{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Qu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Dd(this,this.stsTokenManager.getToken(this.auth,e));return sd(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Wl(e),r=await n.getIdToken(t),i=Md(r);sd(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ad(Rd(i.auth_time)),issuedAtTime:Ad(Rd(i.iat)),expirationTime:Ad(Rd(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Wl(e);await Ld(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(sd(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ud(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){sd(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ld(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Dd(this,async function(e,t){return Ed(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,p=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,h=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:E,isAnonymous:_,providerData:b,stsTokenManager:S}=t;sd(y&&S,e,"internal-error");const T=Pd.fromJSON(this.name,S);sd("string"===typeof y,e,"internal-error"),jd(u,e.name),jd(d,e.name),sd("boolean"===typeof E,e,"internal-error"),sd("boolean"===typeof _,e,"internal-error"),jd(p,e.name),jd(h,e.name),jd(f,e.name),jd(m,e.name),jd(g,e.name),jd(v,e.name);const I=new Ud({uid:y,auth:e,email:d,emailVerified:E,displayName:u,isAnonymous:_,photoURL:h,phoneNumber:p,tenantId:f,stsTokenManager:T,createdAt:g,lastLoginAt:v});return b&&Array.isArray(b)&&(I.providerData=b.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Pd;r.updateFromServerResponse(t);const i=new Ud({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ld(i),i}}const Fd=new Map;function zd(e){cd(e instanceof Function,"Expected a class definition");let t=Fd.get(e);return t?(cd(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fd.set(e,t),t)}class Bd{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Bd.type="NONE";const Vd=Bd;function Hd(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Gd{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Hd(this.userKey,r.apiKey,i),this.fullPersistenceKey=Hd("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ud._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Gd(zd(Vd),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||zd(Vd);const o=Hd(n,e.config.apiKey,e.name);let s=null;for(const l of t)try{const t=await l._get(o);if(t){const n=Ud._fromJSON(e,t);l!==i&&(s=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(c){}}))),new Gd(i,e,n)):new Gd(i,e,n)}}function Wd(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Qd(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yd(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Xd(t))return"Blackberry";if(Zd(t))return"Webos";if(qd(t))return"Safari";if((t.includes("chrome/")||Kd(t))&&!t.includes("edge/"))return"Chrome";if(Jd(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Yd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl();return/firefox\//i.test(e)}function qd(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl();return/crios\//i.test(e)}function Qd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl();return/iemobile/i.test(e)}function Jd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl();return/android/i.test(e)}function Xd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl();return/blackberry/i.test(e)}function Zd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl();return/webos/i.test(e)}function $d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ep(){return function(){const e=xl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function tp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl();return $d(e)||Jd(e)||Zd(e)||Xd(e)||/windows phone/i.test(e)||Qd(e)}function np(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Wd(xl());break;case"Worker":t="".concat(Wd(xl()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xu,"/").concat(r)}class rp{constructor(e){this.auth=e,this.queue=[]}pushCallback(t,n){const r=n=>new Promise(((r,i)=>{try{r(t(n))}catch(e){i(e)}}));r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const e of this.queue)await e(t),e.onAbort&&n.push(e.onAbort)}catch(e){n.reverse();for(const e of n)try{e()}catch(ns){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e||void 0===e?void 0:e.message})}}}class ip{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class op{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ap(this),this.idTokenSubscription=new ap(this),this.beforeStateQueue=new rp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zu,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=zd(n)),this._initializationPromise=this.queue((async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Gd.create(this,t),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(n),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(t){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const e=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,r=null===i||void 0===i?void 0:i._redirectEventId,s=await this.tryRedirectSignIn(t);e&&e!==r||!(null===s||void 0===s?void 0:s.user)||(i=s.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=r,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return sd(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(e){await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Ld(t)}catch(e){if((null===e||void 0===e?void 0:e.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Wl(e):null;return t&&sd(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&sd(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(zd(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ed(e,"GET","/v2/passwordPolicy",yd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ip(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pl("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ed(e,"POST","/v2/accounts:revokeToken",yd(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zd(e)||this._popupRedirectResolver;sd(t,this,"argument-error"),this.redirectPersistenceManager=await Gd.create(this,[zd(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(sd(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return sd(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=np(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if($u.logLevel<=Zl.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];$u.warn("Auth (".concat(xu,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function sp(e){return Wl(e)}class ap{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Hl(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return sd(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let cp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lp(e){return cp.loadJS(e)}function up(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class dp{constructor(e){this.type="recaptcha-enterprise",this.auth=sp(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;wd(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Od(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Cd(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&wd(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=cp.recaptchaEnterpriseScript;0!==t.length&&(t+=i),lp(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function pp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new dp(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function hp(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await pp(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await pp(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function fp(e,t,n){const r=sp(e);sd(r._canInitEmulator,r,"emulator-config-failed"),sd(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=mp(t),{host:s,port:a}=function(e){const t=mp(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:gp(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:gp(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function mp(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function gp(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class vp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ad("not implemented")}_getIdTokenResponse(e){return ad("not implemented")}_linkToIdToken(e,t){return ad("not implemented")}_getReauthenticationResolver(e){return ad("not implemented")}}async function yp(e,t){return Ed(e,"POST","/v1/accounts:signUp",t)}async function Ep(e,t){return bd(e,"POST","/v1/accounts:signInWithPassword",yd(e,t))}async function _p(e,t){return Ed(e,"POST","/v1/accounts:sendOobCode",yd(e,t))}async function bp(e,t){return _p(e,t)}class Sp extends vp{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Sp(e,t,"password")}static _fromEmailAndCode(e,t){return new Sp(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return hp(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ep);case"emailLink":return async function(e,t){return bd(e,"POST","/v1/accounts:signInWithEmailLink",yd(e,t))}(e,{email:this._email,oobCode:this._password});default:td(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return hp(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yp);case"emailLink":return async function(e,t){return bd(e,"POST","/v1/accounts:signInWithEmailLink",yd(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:td(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Tp(e,t){return bd(e,"POST","/v1/accounts:signInWithIdp",yd(e,t))}class Ip extends vp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ip(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):td("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Qu(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Ip(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Tp(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Tp(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Tp(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=zl(t)}return e}}const Np={USER_NOT_FOUND:"user-not-found"};class wp extends vp{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new wp({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new wp({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return bd(e,"POST","/v1/accounts:signInWithPhoneNumber",yd(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await bd(e,"POST","/v1/accounts:signInWithPhoneNumber",yd(e,t));if(n.temporaryProof)throw Nd(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return bd(e,"POST","/v1/accounts:signInWithPhoneNumber",yd(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Np)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new wp({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Cp{constructor(e){var t,n,r,i,o,s;const a=Bl(Vl(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);sd(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=Bl(Vl(e)).link,n=t?Bl(Vl(t)).deep_link_id:null,r=Bl(Vl(e)).deep_link_id;return(r?Bl(Vl(r)).link:null)||r||n||t||e}(e);try{return new Cp(t)}catch(n){return null}}}class Op{constructor(){this.providerId=Op.PROVIDER_ID}static credential(e,t){return Sp._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Cp.parseLink(t);return sd(n,"argument-error"),Sp._fromEmailAndCode(e,n.code,n.tenantId)}}Op.PROVIDER_ID="password",Op.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Op.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ap{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Rp extends Ap{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Mp extends Rp{constructor(){super("facebook.com")}static credential(e){return Ip._fromParams({providerId:Mp.PROVIDER_ID,signInMethod:Mp.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mp.credentialFromTaggedObject(e)}static credentialFromError(e){return Mp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Mp.credential(t.oauthAccessToken)}catch(n){return null}}}Mp.FACEBOOK_SIGN_IN_METHOD="facebook.com",Mp.PROVIDER_ID="facebook.com";class Dp extends Rp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ip._fromParams({providerId:Dp.PROVIDER_ID,signInMethod:Dp.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Dp.credentialFromTaggedObject(e)}static credentialFromError(e){return Dp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Dp.credential(n,r)}catch(i){return null}}}Dp.GOOGLE_SIGN_IN_METHOD="google.com",Dp.PROVIDER_ID="google.com";class kp extends Rp{constructor(){super("github.com")}static credential(e){return Ip._fromParams({providerId:kp.PROVIDER_ID,signInMethod:kp.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kp.credentialFromTaggedObject(e)}static credentialFromError(e){return kp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return kp.credential(t.oauthAccessToken)}catch(n){return null}}}kp.GITHUB_SIGN_IN_METHOD="github.com",kp.PROVIDER_ID="github.com";class xp extends Rp{constructor(){super("twitter.com")}static credential(e,t){return Ip._fromParams({providerId:xp.PROVIDER_ID,signInMethod:xp.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xp.credentialFromTaggedObject(e)}static credentialFromError(e){return xp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return xp.credential(n,r)}catch(i){return null}}}xp.TWITTER_SIGN_IN_METHOD="twitter.com",xp.PROVIDER_ID="twitter.com";class Lp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ud._fromIdTokenResponse(e,n,r),o=Pp(n);return new Lp({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Pp(n);return new Lp({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Pp(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class jp extends Ll{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,jp.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new jp(e,t,n,r)}}function Up(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw jp._fromErrorAndOperation(e,n,t,r);throw n}))}async function Fp(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Dd(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Lp._forOperation(e,"link",r)}async function zp(t,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=t,o="reauthenticate";try{const e=await Dd(t,Up(i,o,n,t),r);sd(e.idToken,i,"internal-error");const s=Md(e.idToken);sd(s,i,"internal-error");const{sub:a}=s;return sd(t.uid===a,i,"user-mismatch"),Lp._forOperation(t,o,e)}catch(e){throw(null===e||void 0===e?void 0:e.code)==="auth/".concat("user-not-found")&&td(i,"user-mismatch"),e}}async function Bp(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Up(e,r,t),o=await Lp._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}function Vp(e,t,n){var r;sd((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),sd("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(sd(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(sd(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}new WeakMap;const Hp="__sak";class Gp{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hp,"1"),this.storage.removeItem(Hp),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Wp extends Gp{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=xl();return qd(e)||$d(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=tp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);ep()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wp.type="LOCAL";const Yp=Wp;class qp extends Gp{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qp.type="SESSION";const Kp=qp;class Qp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Qp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Jp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Qp.receivers=[];class Xp{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const c=Jp("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function Zp(){return window}function $p(){return"undefined"!==typeof Zp().WorkerGlobalScope&&"function"===typeof Zp().importScripts}const eh="firebaseLocalStorageDb",th="firebaseLocalStorage",nh="fbase_key";class rh{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ih(e,t){return e.transaction([th],t?"readwrite":"readonly").objectStore(th)}function oh(){const t=indexedDB.open(eh,1);return new Promise(((n,r)=>{t.addEventListener("error",(()=>{r(t.error)})),t.addEventListener("upgradeneeded",(()=>{const n=t.result;try{n.createObjectStore(th,{keyPath:nh})}catch(e){r(e)}})),t.addEventListener("success",(async()=>{const e=t.result;e.objectStoreNames.contains(th)?n(e):(e.close(),await function(){const e=indexedDB.deleteDatabase(eh);return new rh(e).toPromise()}(),n(await oh()))}))}))}async function sh(e,t,n){const r=ih(e,!0).put({[nh]:t,value:n});return new rh(r).toPromise()}function ah(e,t){const n=ih(e,!0).delete(t);return new rh(n).toPromise()}class ch{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await oh()),this.db}async _withRetries(t){let n=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(e){if(n++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $p()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qp._getInstance($p()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Xp(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await oh();return await sh(e,Hp,"1"),await ah(e,Hp),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>sh(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ih(e,!1).get(t),r=await new rh(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>ah(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ih(e,!1).getAll();return new rh(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ch.type="LOCAL";const lh=ch;up("rcb"),new hd(3e4,6e4);const uh="recaptcha";async function dh(e,t,n){var r;const i=await n.verify();try{let o;if(sd("string"===typeof i,e,"argument-error"),sd(n.type===uh,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){sd("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Ed(e,"POST","/v2/accounts/mfaEnrollment:start",yd(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{sd("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;sd(n,e,"missing-multi-factor-info");const s=await function(e,t){return Ed(e,"POST","/v2/accounts/mfaSignIn:start",yd(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Ed(e,"POST","/v1/accounts:sendVerificationCode",yd(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class ph{constructor(e){this.providerId=ph.PROVIDER_ID,this.auth=sp(e)}verifyPhoneNumber(e,t){return dh(this.auth,e,Wl(t))}static credential(e,t){return wp._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ph.credentialFromTaggedObject(t)}static credentialFromError(e){return ph.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?wp._fromTokenResponse(n,r):null}}function hh(e,t){return t?zd(t):(sd(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ph.PROVIDER_ID="phone",ph.PHONE_SIGN_IN_METHOD="phone";class fh extends vp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Tp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Tp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mh(e){return Bp(e.auth,new fh(e),e.bypassAuthState)}function gh(e){const{auth:t,user:n}=e;return sd(n,t,"internal-error"),zp(n,new fh(e),e.bypassAuthState)}async function vh(e){const{auth:t,user:n}=e;return sd(n,t,"internal-error"),Fp(n,new fh(e),e.bypassAuthState)}class yh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s)return void this.reject(s);const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mh;case"linkViaPopup":case"linkViaRedirect":return vh;case"reauthViaPopup":case"reauthViaRedirect":return gh;default:td(this.auth,"internal-error")}}resolve(e){cd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Eh=new hd(2e3,1e4);async function _h(e,t,n){const r=sp(e);id(e,t,Ap);const i=hh(r,n);return new bh(r,"signInViaPopup",t,i).executeNotNull()}class bh extends yh{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,bh.currentPopupAction&&bh.currentPopupAction.cancel(),bh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return sd(e,this.auth,"internal-error"),e}async onExecution(){cd(1===this.filter.length,"Popup operations only handle one event");const e=Jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(nd(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(nd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(nd(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Eh.get())};e()}}bh.currentPopupAction=null;const Sh="pendingRedirect",Th=new Map;class Ih extends yh{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let t=Th.get(this.auth._key());if(!t){try{const e=await async function(e,t){const n=Ch(t),r=wh(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Th.set(this.auth._key(),t)}return this.bypassAuthState||Th.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Nh(e,t){Th.set(e._key(),t)}function wh(e){return zd(e._redirectPersistence)}function Ch(e){return Hd(Sh,e.config.apiKey,e.name)}async function Oh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=sp(e),i=hh(r,t),o=new Ih(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class Ah{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mh(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Mh(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(nd(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rh(e))}saveEventToCache(e){this.cachedEventUids.add(Rh(e)),this.lastProcessedEventTime=Date.now()}}function Rh(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Mh(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Dh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kh=/^https?/;async function xh(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Ed(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Lh(r))return}catch(n){}td(e,"unauthorized-domain")}function Lh(e){const t=ld(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!kh.test(n))return!1;if(Dh.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ph=new hd(3e4,6e4);function jh(){const e=Zp().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Uh(e){return new Promise(((t,n)=>{var r,i,o;function s(){jh(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{jh(),n(nd(e,"network-request-failed"))},timeout:Ph.get()})}if(null===(i=null===(r=Zp().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Zp().gapi)||void 0===o?void 0:o.load)){const t=up("iframefcb");return Zp()[t]=()=>{gapi.load?s():n(nd(e,"network-request-failed"))},lp("".concat(cp.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw Fh=null,e}))}let Fh=null;const zh=new hd(5e3,15e3),Bh="__/auth/iframe",Vh="emulator/auth/iframe",Hh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wh(e){const t=e.config;sd(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?fd(t,Vh):"https://".concat(e.config.authDomain,"/").concat(Bh),r={apiKey:t.apiKey,appName:e.name,v:xu},i=Gh.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(zl(r).slice(1))}async function Yh(e){const t=await function(e){return Fh=Fh||Uh(e),Fh}(e),n=Zp().gapi;return sd(n,e,"internal-error"),t.open({where:document.body,url:Wh(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hh,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=nd(e,"network-request-failed"),o=Zp().setTimeout((()=>{r(i)}),zh.get());function s(){Zp().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const qh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Qh(t,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const l=Object.assign(Object.assign({},qh),{width:i.toString(),height:o.toString(),top:s,left:a}),u=xl().toLowerCase();r&&(c=Kd(u)?"_blank":r),Yd(u)&&(n=n||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return $d(arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(n||"",c),new Kh(null);const p=window.open(n||"",c,d);sd(p,t,"popup-blocked");try{p.focus()}catch(e){}return new Kh(p)}const Jh="__/auth/handler",Xh="emulator/auth/handler",Zh=encodeURIComponent("fac");async function $h(e,t,n,r,i,o){sd(e.config.authDomain,e,"auth-domain-config-required"),sd(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xu,eventId:i};if(t instanceof Ap){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Rp){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(Zh,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Jh);return fd(t,Xh)}(e),"?").concat(zl(a).slice(1)).concat(l)}const ef="webStorageSupport";const tf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kp,this._completeRedirectFn=Oh,this._overrideRedirectResult=Nh}async _openPopup(e,t,n,r){var i;cd(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Qh(e,await $h(e,t,n,ld(),r),Jp())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Zp().location.href=e}(await $h(e,t,n,ld(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(cd(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Yh(e),n=new Ah(e);return t.register("authEvent",(t=>{sd(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ef,{type:ef},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ef];void 0!==i&&t(!!i),td(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xh(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tp()||qd()||$d()}};var nf="@firebase/auth",rf="1.6.2";class of{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){sd(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const sf=Dl("authIdTokenMaxAge")||300;let af=null;var cf;!function(e){cp=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=nd("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),cf="Browser",Ru(new Yl("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;sd(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:cf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:np(cf)},l=new op(r,i,o,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zd);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ru(new Yl("auth-internal",(e=>(e=>new of(e))(sp(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Pu(nf,rf,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(cf)),Pu(nf,rf,"esm2017");const lf=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nu;const t=Cu.get(e);if(!t&&e===Nu&&Ml())return Lu();if(!t)throw Du.create("no-app",{appName:e});return t}();const t=Mu(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Mu(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Ul(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;td(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:tf,persistence:[lh,Yp,Kp]}),r=Dl("authTokenSyncURL");if(r&&r.match(/^\/[^\/].*/)){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>sf)return;const r=null===t||void 0===t?void 0:t.token;af!==r&&(af=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Wl(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){Wl(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const o=Rl("auth");return o&&fp(n,"http://".concat(o)),n}(Lu({apiKey:"AIzaSyAKWIIExMaVrxQ858PYKyLrj271uBSJy9c",authDomain:"dzital-38fcb.firebaseapp.com",databaseURL:"https://dzital-38fcb-default-rtdb.europe-west1.firebasedatabase.app",projectId:"dzital-38fcb",storageBucket:"dzital-38fcb.appspot.com",messagingSenderId:"1037771428251",appId:"1:1037771428251:web:8c6533617d284fb301113e"})),uf=new Dp,df=new Mp;var pf={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hf=r.createContext&&r.createContext(pf),ff=["attr","size","title"];function mf(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gf(){return gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gf.apply(this,arguments)}function vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vf(Object(n),!0).forEach((function(t){Ef(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ef(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _f(e){return e&&e.map(((e,t)=>r.createElement(e.tag,yf({key:t},e.attr),_f(e.child))))}function bf(e){return t=>r.createElement(Sf,gf({attr:yf({},e.attr)},t),_f(e.child))}function Sf(e){var t=t=>{var n,{attr:i,size:o,title:s}=e,a=mf(e,ff),c=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",gf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,a,{className:n,style:yf(yf({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==hf?r.createElement(hf.Consumer,null,(e=>t(e))):t(pf)}function Tf(e){return bf({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function If(e){return bf({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(e)}function Nf(e){return bf({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function wf(e){return bf({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(e)}function Cf(e){return bf({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(e)}function Of(e){return bf({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function Af(e){return bf({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"},child:[]}]})(e)}function Rf(e){return bf({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"},child:[]}]})(e)}const Mf=()=>{const{LoginUser:e,SocialLoginUser:t}=Qr(),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[a,c]=(0,r.useState)(""),[l,u]=(0,r.useState)(!1),[d,p]=(0,r.useState)(!1);return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"box-form",children:[(0,Me.jsx)("div",{className:"left",style:{background:"url(./assets/images/login-bg.jpg) center bottom"},children:(0,Me.jsxs)("div",{className:"overlay",children:[(0,Me.jsx)("h1",{children:"Success starts here"}),(0,Me.jsxs)("ul",{children:[(0,Me.jsx)("li",{children:"Over 600 categories"}),(0,Me.jsx)("li",{children:"Pay per project, not per hour"}),(0,Me.jsx)("li",{children:"Access to talent and businesses across the globe"})]})]})}),(0,Me.jsxs)("div",{className:"right",children:[(0,Me.jsx)("h3",{children:"Sign in to your account"}),(0,Me.jsxs)("div",{className:"formBx mt-5",children:[(0,Me.jsx)("div",{className:"formBx",children:(0,Me.jsxs)("form",{className:"px-md-1 ",children:[(0,Me.jsxs)("div",{className:"form-outline mb-3",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Email or username"})}),(0,Me.jsx)("input",{type:"email",value:n,onChange:e=>{i(e.target.value)},className:"form-control",required:!0})]}),(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Password"})}),(0,Me.jsxs)("div",{className:"input-group mb-3",children:[(0,Me.jsx)("input",{type:d?"text":"password",value:o,onChange:e=>{s(e.target.value)},className:"form-control",placeholder:"Password","aria-describedby":"password-toggle",required:!0}),(0,Me.jsx)("span",{className:"input-group-text",id:"password-toggle",onClick:()=>{p(!d)},children:d?(0,Me.jsx)(Rf,{}):(0,Me.jsx)(Of,{})})]})]}),(0,Me.jsxs)("div",{className:"row mb-2",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("button",{type:"submit",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:t=>{if(t.preventDefault(),!n||!o)return void Es.info("Please fill in all required fields");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?e(n,o):Es.info("Please input a valid Email")},children:"Continue"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("p",{className:"mt-1",align:"right",children:(0,Me.jsx)(Oe,{className:"text14 text-muted",onClick:()=>{u(!l)},to:"#",children:"Forgot Password"})})})]}),l&&(0,Me.jsxs)("div",{className:"form-outline mb-3",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Recipient's email"})}),(0,Me.jsx)("input",{type:"email",value:a,onChange:e=>c(e.target.value),className:"form-control",required:!0})]}),l&&(0,Me.jsx)("div",{className:"row mb-2",children:(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("button",{type:"button",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:e=>{e.preventDefault(),a?async function(e,t,n){const r=sp(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Vp(r,i,n),await hp(r,i,"getOobCode",bp)}(lf,a).then((()=>{Es.success("Password reset email sent. Please check your mail."),c(""),u(!1)})).catch((e=>{Es.error("Error sending password reset email")})):Es.info("Please enter your email")},children:"Send Reset Email"})})})]})}),(0,Me.jsx)("h4",{className:"text-muted mb40 ",align:"center",children:"OR"}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-sm-12 col-lg-6",children:(0,Me.jsxs)(Oe,{onClick:()=>{_h(lf,uf).then((e=>{t(e.user.email,e.user.uid,"google",e.user.displayName,e.user.photoURL)})).catch((e=>{}))},className:"btn btn-light width100 mb20 d-flex gap-1 mb-20 align-items-center justify-content-center",to:"#.",children:[(0,Me.jsx)("img",{src:"./assets/images/google.svg",width:"16",alt:"",className:"google-icon"}),(0,Me.jsx)("span",{children:"Google"})]})}),(0,Me.jsx)("div",{className:"col-sm-12 col-lg-6",children:(0,Me.jsxs)("button",{className:"btn btn-light width100 mb20 d-flex gap-1 mb-20 align-items-center justify-content-center",onClick:()=>{_h(lf,df).then((e=>{t(e.user.email,e.user.uid,"facebook")})).catch((e=>{}))},children:[(0,Me.jsx)("img",{src:"./assets/images/facebook.svg",width:16,alt:""}),(0,Me.jsx)("span",{children:"Facebook"})]})})]}),(0,Me.jsxs)("p",{className:"text text-center",children:["Don't An have Accout ? ",(0,Me.jsx)(Oe,{to:"/singup",children:" SignUp"})," "]})]}),(0,Me.jsx)("p",{className:"text14 text-muted",children:"By joining, you agree to the Dzital Terms of Service and to occasionally receive emails from us. Please read our Privacy Policy to learn how we use your personal data."})]})]})}),(0,Me.jsx)(ei,{})]})})})})},Df=()=>{const{LoginUser:e}=Qr(),[t,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[s,a]=(0,r.useState)(!1),[c,l]=(0,r.useState)(!1);return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"box-form",children:[(0,Me.jsx)("div",{className:"left",style:{background:"url(./assets/images/login-bg.jpg) center bottom"},children:(0,Me.jsxs)("div",{className:"overlay",children:[(0,Me.jsx)("h1",{children:"Success starts here"}),(0,Me.jsxs)("ul",{children:[(0,Me.jsx)("li",{children:"Over 600 categories"}),(0,Me.jsx)("li",{children:"Pay per project, not per hour"}),(0,Me.jsx)("li",{children:"Access to talent and businesses across the globe"})]})]})}),(0,Me.jsxs)("div",{className:"right",children:[(0,Me.jsx)("p",{className:"mb5",children:(0,Me.jsxs)(Oe,{className:"text-muted",to:"/login",children:[(0,Me.jsx)("i",{className:"fa fa-long-arrow-left"})," Back"]})}),(0,Me.jsxs)("div",{className:"formBx",children:[(0,Me.jsxs)("form",{className:"px-md-1 mt30",children:[(0,Me.jsxs)("div",{className:"form-outline mb-3",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Email or username"})}),(0,Me.jsx)("input",{type:"email",value:t,onChange:e=>{n(e.target.value),a(!1),l(!1)},className:"form-control",required:!0})]}),(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Password"})}),(0,Me.jsx)("input",{type:"password",value:i,onChange:e=>{o(e.target.value),a(!1),l(!1)},className:"form-control",required:!0})]}),(0,Me.jsxs)("div",{className:"row mb-2",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("button",{type:"submit",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:n=>{if(n.preventDefault(),!t||!i)return void Es.info("Please fill in all required fields");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?(a(!1),l(!1),e(t,i)):Es.info("Please input a valid Email")},children:"Continue"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("p",{className:"mt-1",align:"right",children:(0,Me.jsx)(Oe,{className:"text14 text-muted","data-bs-toggle":"collapse",to:"#forgotPassword",children:"Forgot Password"})})})]})]}),(0,Me.jsxs)("div",{className:"input-group collapse",id:"forgotPassword",children:[(0,Me.jsx)("input",{type:"text",className:"form-control",placeholder:"Recipient's username","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),(0,Me.jsx)("button",{className:"btn btnTheme",style:{backgroundColor:"var(--theme-color)"},type:"button",id:"button-addon2",children:"Button"})]})]}),(0,Me.jsx)("p",{className:"text14 text-muted",children:"By joining, you agree to the Dzital Terms of Service and to occasionally receive emails from us. Please read our Privacy Policy to learn how we use your personal data."})]})]})}),(0,Me.jsx)(ei,{})]})})})})},kf=__webpack_require__.p+"static/media/user.eca20e66104f9ff91cf6.jpg",xf=e=>{let{preview:t}=e;const{userData:n,LogOut:r}=Qr(),{image:i,name:o}=n||{};return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("div",{className:"profile-sidebar  w-full",children:[(0,Me.jsx)("div",{className:"profile-userpic d-flex justify-content-center align-items-center",children:(0,Me.jsx)("img",{src:t||i||kf,className:"img-fluid rounded-circle",alt:"",style:{maxHeight:"120px",minHeight:"110px",maxWidth:"120px"}})}),(0,Me.jsx)("div",{className:"profile-usertitle",children:(0,Me.jsx)("div",{className:"profile-usertitle-name",children:o})}),(0,Me.jsxs)("div",{className:"profile-userbuttons d-flex ",children:[(0,Me.jsx)(Oe,{to:"/account",className:"btn btnTheme small-text",style:{background:"var(--theme-color)"},children:"Personal Info"}),(0,Me.jsx)(Oe,{to:"/packages",className:"btn btn-warning small-text",children:"Upgrade to Premium"})]}),(0,Me.jsx)("div",{className:"profile-usermenu",children:(0,Me.jsxs)("ul",{className:"nav",children:[(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/change-password",children:[(0,Me.jsx)("i",{className:"fa fa-lock"})," Password & Security"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/my-post",children:[(0,Me.jsx)("i",{className:"fa fa-address-card-o"})," My Post"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/add-post",children:[(0,Me.jsx)("i",{className:"fa fa-address-card-o"})," Add Post"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"/wishlist",children:[(0,Me.jsx)("i",{className:"fa fa-heart-o"})," Wishlist"]})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{to:"#",onClick:()=>r(),children:[(0,Me.jsx)("i",{className:"fa fa-power-off"})," Sign Out"]})})]})})]})})},Lf=()=>{const{userData:e,updateProfile:t}=Qr(),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[a,c]=(0,r.useState)(""),[l,u]=(0,r.useState)(""),[d,p]=(0,r.useState)(""),[h,f]=(0,r.useState)(null),[m,g]=(0,r.useState)(""),{email:v,image:y,mobile:E,name:_,bio:b,address:S}=e||{};return(0,r.useEffect)((()=>{s(b)}),[b]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(_s,{title:"Accounts"}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)(xf,{preview:m})}),(0,Me.jsxs)("div",{className:"col-md-7",children:[(0,Me.jsx)("div",{className:"card border-0",children:(0,Me.jsxs)("div",{className:"card card-body border-0",children:[(0,Me.jsx)("h2",{className:"titleText",children:"Personal Info"}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 mt-2",children:[(0,Me.jsx)("label",{className:"mb-1",children:(0,Me.jsx)("b",{children:"Short Bio"})}),(0,Me.jsx)("div",{children:(0,Me.jsx)("textarea",{className:"form-control",rows:3,value:o,onChange:e=>s(e.target.value)})})]}),(0,Me.jsx)("div",{className:"col-md-3 mt-2",children:(0,Me.jsxs)("div",{className:"fileBx",children:[(0,Me.jsx)("input",{type:"file",name:"uploadfile",id:"img",style:{display:"none"},accept:"image/*",onChange:e=>{const t=e.target.files[0];if(!t)return;if(t.size>921600)return Es.error("File size exceeds the limit. Please choose a smaller file."),f(null),void g(null);f(t),g(URL.createObjectURL(t))}}),(0,Me.jsx)("label",{htmlFor:"img",children:"Click me to upload image"})]})})]})]})}),(0,Me.jsxs)("div",{className:"card border-0 mt-4",children:[(0,Me.jsxs)("div",{className:"card card-body border-0 profileBx",children:[(0,Me.jsxs)("div",{className:"item mb20",children:[(0,Me.jsxs)(Oe,{className:"nameTag collapsed","data-bs-toggle":"collapse","data-bs-target":"#fullName",children:["Full Name"," ",(0,Me.jsx)("i",{className:"fa fa-pencil-square-o",style:{cursor:"pointer"},title:"Edit"}),(0,Me.jsx)("h5",{className:"mb5",children:_})]}),(0,Me.jsx)("div",{className:"collapse",id:"fullName",children:(0,Me.jsx)("input",{type:"text",className:"form-control",value:n,onChange:e=>i(e.target.value)})})]}),(0,Me.jsxs)("div",{className:"item mb20",children:[(0,Me.jsxs)(Oe,{className:"nameTag collapsed","data-bs-toggle":"collapse","data-bs-target":"#emailId",children:["Email ID",(0,Me.jsx)("i",{className:"fa fa-pencil-square-o",style:{cursor:"pointer"},title:"Edit"}),(0,Me.jsx)("h5",{className:"mb5",children:v})]}),(0,Me.jsx)("div",{className:"collapse",id:"emailId",children:(0,Me.jsx)("input",{type:"email",className:"form-control",value:l,onChange:e=>u(e.target.value)})})]}),(0,Me.jsxs)("div",{className:"item mb20",children:[(0,Me.jsxs)(Oe,{className:"nameTag collapsed","data-bs-toggle":"collapse","data-bs-target":"#phoneNumber",children:["Phone Number",(0,Me.jsx)("i",{className:"fa fa-pencil-square-o",style:{cursor:"pointer"},title:"Edit"}),(0,Me.jsx)("h5",{className:"mb5",children:E})]}),(0,Me.jsx)("div",{className:"collapse",id:"phoneNumber",children:(0,Me.jsx)("input",{type:"number",className:"form-control",value:d,onChange:e=>p(e.target.value)})})]}),(0,Me.jsxs)("div",{className:"item mb20",children:[(0,Me.jsxs)(Oe,{className:"nameTag collapsed","data-bs-toggle":"collapse","data-bs-target":"#address",children:["Address",(0,Me.jsx)("i",{className:"fa fa-pencil-square-o",style:{cursor:"pointer"},title:"Edit"}),(0,Me.jsx)("h5",{className:"mb5",children:S})]}),(0,Me.jsx)("div",{className:"collapse",id:"address",children:(0,Me.jsx)("input",{type:"text",className:"form-control",value:a,onChange:e=>c(e.target.value)})})]})]}),(0,Me.jsx)("button",{className:"btn  mt-2",style:{background:"var(--theme-color)"},onClick:()=>{t(n||_,l||v,h||y,d||E,o||b,a||S)},children:"Update"})]})]}),(0,Me.jsx)(ei,{})]})})})]})},Pf=()=>{const{isLogIn:e}=Qr(),t=ee();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("div",{className:"card card-sm",children:[(0,Me.jsx)("div",{className:"card-body p5",children:(0,Me.jsxs)("div",{className:"",children:[(0,Me.jsxs)("button",{onClick:()=>{return n="/message",void(e?t(n):(Es("please Login first"),setTimeout((()=>{t("/login?redirect=".concat(n.split("/")[1]))}),1e3)));var n},className:"btn btn-secondary btn-sm mb5 mt5",children:[(0,Me.jsx)("i",{className:"fa fa-comments"})," Text Chat"]}),(0,Me.jsxs)(Oe,{to:"/voice-call",className:"btn btn-success btn-sm  mb5 mt5 mx-1",children:[(0,Me.jsx)("i",{className:"fa fa-phone"})," Voice Call"]}),(0,Me.jsxs)(Oe,{to:"/videocall",className:"btn btn-danger btn-sm  mb5 mt5",children:[(0,Me.jsx)("i",{className:"fa fa-video-camera"})," Video Call"]}),(0,Me.jsxs)(Oe,{className:"btn btn-primary btn-sm  mb5 mt5 mx-1","data-bs-target":"#supplierModal","data-bs-toggle":"modal",children:[(0,Me.jsx)("i",{className:"fa fa-user-o"})," Contact To Supplier"]})]})}),(0,Me.jsx)("div",{className:"modal fade supplierModal",id:"supplierModal",tabIndex:-1,children:(0,Me.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:(0,Me.jsxs)("div",{className:"modal-content",children:[(0,Me.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"}),(0,Me.jsx)("div",{className:"modal-body",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsxs)("h1",{className:"modal-title fs-6",children:[(0,Me.jsx)("b",{children:"Get Latest Price"})," by adding Link few details of your requirement"]}),(0,Me.jsx)("hr",{className:"mt-2"}),(0,Me.jsx)("label",{children:(0,Me.jsx)("b",{children:"Quantity"})}),(0,Me.jsxs)("div",{className:"input-group mt-1 mb-4",style:{maxWidth:200},children:[(0,Me.jsx)("input",{type:"number",className:"form-control"}),(0,Me.jsx)("span",{className:"input-group-text bg-theme",id:"basic-addon2",style:{background:"var(--theme-color)"},children:"Pieces"})]}),(0,Me.jsx)("label",{children:(0,Me.jsx)("b",{children:"Requirement Details"})}),(0,Me.jsx)("div",{className:"input-group mt-1 mb-4",style:{maxWidth:400},children:(0,Me.jsx)("textarea",{className:"form-control",name:"",id:"",cols:30,rows:3,placeholder:"Additional Details About Your Requirement",defaultValue:""})}),(0,Me.jsx)("button",{className:"btn btnTheme btn-sm",type:"button",style:{minWidth:150,background:"var(--theme-color)"},children:"Next"}),(0,Me.jsx)("hr",{className:"mt-4"}),(0,Me.jsxs)("div",{className:"mt-3",children:[(0,Me.jsx)("h5",{children:"Your contact information"}),(0,Me.jsxs)("h6",{children:[(0,Me.jsx)("i",{className:"fa fa-user-o"})," ",(0,Me.jsx)("b",{children:"Mr."})," Ramesh Singh"]}),(0,Me.jsxs)("h6",{children:[(0,Me.jsx)("i",{className:"fa fa-phone"})," ",(0,Me.jsx)("b",{children:"+91"})," 1234567890 \xa0 | \xa0 ",(0,Me.jsx)("i",{className:"fa fa-envelope-o"})," ","ramesh@gmail.com"]})]})]}),(0,Me.jsxs)("div",{className:"col-md-4",children:[(0,Me.jsx)("img",{src:"assets/images/iPhone-1.jpg",alt:"",style:{maxWidth:"100%"}}),(0,Me.jsxs)("div",{className:"",children:[(0,Me.jsx)("h5",{className:"fs-5",children:"Iphone 14 refurbished mobiles,bill and warranty available"}),(0,Me.jsx)("h2",{children:"\u20ac799"}),(0,Me.jsx)("h6",{children:"Highlights"}),(0,Me.jsxs)("ul",{className:"text14",style:{marginLeft:"-10px"},children:[(0,Me.jsx)("li",{children:"128 GB ROM"}),(0,Me.jsx)("li",{children:"6.1 inch Super Retina XDR Display"}),(0,Me.jsx)("li",{children:"12MP + 12MP"}),(0,Me.jsx)("li",{children:"A15 Bionic Chip, 6 Core Processor Processor"})]})]})]})]})})]})})})]})})},jf=e=>{let{isOpen:t,onClose:n,onOpenModal:r}=e;const i=window.location.href,o=encodeURIComponent(document.title),s={facebook:"https://www.facebook.com/sharer/sharer.php?u=".concat(i),twitter:"https://twitter.com/intent/tweet?url=".concat(i),linkedin:"https://www.linkedin.com/sharing/share-offsite/?url=".concat(i,"&title=").concat(o),instagram:"https://www.instagram.com/share?url=".concat(i),whatsapp:"https://api.whatsapp.com/send?text=".concat(i)};return(0,Me.jsxs)("div",{className:"modal ".concat(t?"show":""," "),tabIndex:"-1",role:"dialog",style:{display:t?"block":"none"},children:[(0,Me.jsx)("div",{className:"modal-dialog",role:"document",children:(0,Me.jsxs)("div",{className:"modal-content",children:[(0,Me.jsxs)("div",{className:"modal-header",children:[(0,Me.jsx)("h5",{className:"modal-title",children:"Share Link"}),(0,Me.jsx)("button",{type:"button",className:"close",onClick:n,"aria-label":"Close",children:(0,Me.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,Me.jsxs)("div",{className:"modal-body",children:[(0,Me.jsx)("p",{children:"Share this link:"}),(0,Me.jsx)("input",{type:"text",className:"form-control mb-2",value:window.location.href,readOnly:!0}),(0,Me.jsx)("p",{children:"Share on:"}),(0,Me.jsxs)("div",{className:"social-icons",children:[(0,Me.jsx)("a",{href:s.facebook,target:"_blank",rel:"noopener noreferrer",children:(0,Me.jsx)(Tf,{className:"mr-2"})}),(0,Me.jsx)("a",{href:s.twitter,target:"_blank",rel:"noopener noreferrer",children:(0,Me.jsx)(wf,{className:"mr-2"})}),(0,Me.jsx)("a",{href:s.linkedin,target:"_blank",rel:"noopener noreferrer",children:(0,Me.jsx)(Nf,{className:"mr-2"})}),(0,Me.jsx)("a",{href:s.instagram,target:"_blank",rel:"noopener noreferrer",children:(0,Me.jsx)(If,{className:"mr-2"})}),(0,Me.jsx)("a",{href:s.whatsapp,target:"_blank",rel:"noopener noreferrer",children:(0,Me.jsx)(Cf,{})})]})]}),(0,Me.jsx)("div",{className:"modal-footer",children:(0,Me.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{navigator.clipboard.writeText(i).then((()=>{})).catch((e=>{console.error("Failed to copy link to clipboard:",e)}))},children:"Copy Link"})})]})}),(0,Me.jsx)("div",{className:"share-icon",onClick:r,children:(0,Me.jsx)(Af,{})})]})},Uf=()=>{const{id:e}=ne(),{getGoodsProductDetails:t,goodsItems:n,wishListAdd:i}=Qr(),[o,s]=(0,r.useState)(!1),[a,c]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{await t(e)})()}),[e]);const{description:l,image_1:u,image_2:d,image_3:p,photo:h,product_id:f,title:m,attribute_values:g}=n.data||{},v=[h,u,d,p],y=e=>{if(!Array.isArray(g))return null;const t=g.find((t=>t.attribute===e));return t?t.value:null},E=y("Price"),_=y("Brand");return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/goods_of_all_kinds",children:"Goods of all kinds"})}),(0,Me.jsx)("li",{className:"active",children:m})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),n.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!n.isLoad&&(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsx)("div",{className:"card",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-5",children:(0,Me.jsx)("div",{className:"swiper mainBannerSwiper",children:(0,Me.jsx)(So,{loop:!0,navigation:!0,modules:[Io],className:"mySwiper",children:Array.isArray(v)&&v.map(((e,t)=>(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide",children:(0,Me.jsx)("img",{src:e,alt:"",loading:"lazy"})})},t)))})})}),(0,Me.jsxs)("div",{className:"col-md-7",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-10 col-sm-12",children:[(0,Me.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Me.jsx)("h2",{children:_||""})}),(0,Me.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Me.jsx)("div",{children:(0,Me.jsx)("h4",{className:"text-muted",children:m})})})]}),(0,Me.jsxs)("div",{className:"col-md-2 col-sm-12",align:"right",children:[(0,Me.jsx)("div",{className:"iconWish",onClick:()=>{c(!0)},children:(0,Me.jsx)("i",{className:"fa fa-share-alt text20"})}),(0,Me.jsx)(jf,{isOpen:a,onClose:()=>{c(!1)}}),(0,Me.jsx)("div",{className:"iconWish",onClick:()=>(e=>{i(e),s(!0)})(f),children:(0,Me.jsx)("i",{className:!0===o?"fa fa-heart":"fa fa-heart-o"})})]})]}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-5 col-sm-12",children:[(0,Me.jsx)("h5",{className:"text-success",children:"Special price"}),(0,Me.jsx)("h5",{children:(0,Me.jsxs)("span",{className:"text28",children:[(0,Me.jsx)("i",{className:"fa fa-inr",children:" "})," ",E||"Not Disclosed"]})})]}),(0,Me.jsx)(Pf,{})]})]})]}),(0,Me.jsx)("h5",{children:"Product Description"}),(0,Me.jsx)("p",{children:l}),(0,Me.jsx)("hr",{}),Array.isArray(g)&&g.map((e=>(0,Me.jsxs)("p",{children:[(0,Me.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]})}),(0,Me.jsx)("h4",{className:"mt20",children:"Related Products"}),(0,Me.jsx)("hr",{className:"mt0"}),(0,Me.jsx)("div",{className:"swiper productSlider",children:(0,Me.jsxs)(So,{loop:!0,slidesPerView:5,spaceBetween:20,keyboard:{enabled:!0},autoplay:{delay:3e3},breakpoints:{320:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:3,spaceBetween:15},768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:5,spaceBetween:15}},navigation:!0,modules:[Io],className:"mySwiper",children:[(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{children:(0,Me.jsx)("img",{src:h,className:"card-img-top",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",children:(0,Me.jsx)("i",{className:"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)("a",{children:"KTM Bikes: E-Bikes and Bikes"})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Waiblingen"})})]})]})})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{children:(0,Me.jsx)("img",{src:h,className:"card-img-top",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",children:(0,Me.jsx)("i",{className:"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)("a",{children:"KTM Bikes: E-Bikes and Bikes"})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Waiblingen"})})]})]})})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{children:(0,Me.jsx)("img",{src:h,className:"card-img-top",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",children:(0,Me.jsx)("i",{className:"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)("a",{children:"KTM Bikes: E-Bikes and Bikes"})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Waiblingen"})})]})]})})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{children:(0,Me.jsx)("img",{src:h,className:"card-img-top",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",children:(0,Me.jsx)("i",{className:"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)("a",{children:"KTM Bikes: E-Bikes and Bikes"})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Waiblingen"})})]})]})})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{children:(0,Me.jsx)("img",{src:h,className:"card-img-top",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",children:(0,Me.jsx)("i",{className:"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)("a",{children:"KTM Bikes: E-Bikes and Bikes"})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Waiblingen"})})]})]})})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{children:(0,Me.jsx)("img",{src:h,className:"card-img-top",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",children:(0,Me.jsx)("i",{className:"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)("a",{children:"KTM Bikes: E-Bikes and Bikes"})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Waiblingen"})})]})]})})})]})})]}),(0,Me.jsx)(ei,{})]})})})]})};const Ff=function(){const e=ee(),{isLogIn:t,loading:n}=Qr();return!0===n?(0,Me.jsx)("div",{className:"d-flex align-items-center justify-content-center vh-100",children:(0,Me.jsx)(Xr,{animation:"border",role:"status",variant:"info",children:(0,Me.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):t?(0,Me.jsx)(ge,{}):(e("/login"),(0,Me.jsx)(Mf,{}))},zf=e=>{let{item:t}=e;const{wishListAdd:n}=Qr(),[i,o]=(0,r.useState)(!1);return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"card mb-3 realestateItem",children:(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)(Oe,{to:"/realstate-detail/".concat(t._id),children:(0,Me.jsx)("img",{src:t.photo,className:"img-fluid rounded-start allImg",alt:"..."})})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Oe,{to:"/realstate-detail/".concat(t._id),children:t.title})}),(0,Me.jsx)("div",{className:"row",children:(0,Me.jsxs)("div",{className:"col-md-4",align:"right",children:[(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>{return e=t.product_id,n(e),void o(!0);var e},children:(0,Me.jsx)("i",{className:!0===i?"fa-solid fa-heart":"fa fa-heart-o"})}),"\xa0\xa0"]})}),(0,Me.jsx)("p",{className:"card-text",children:(e=>{const t=e.split(" ");return t.length>30?t.slice(0,29).join(" ")+"...":e})(t.description)}),(0,Me.jsx)(Oe,{className:"btn btnTheme",style:{background:"var(--theme-color)"},to:"/realstate-detail/".concat(t._id),children:"View Property >>"})]})})]},t._id)})})},Bf=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Me.jsxs)("div",{className:"titelBx",children:[(0,Me.jsx)(Oe,{className:"navbar-brand",to:"#sideBarCollapse","data-bs-toggle":"collapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Me.jsx)("i",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:(0,Me.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsxs)("div",{className:"customeSidebar",children:[(0,Me.jsx)("div",{className:"dropHeadBx",children:(0,Me.jsxs)(Oe,{className:"collapseLink","data-bs-toggle":"collapse",to:"#wohnungMieten",children:["To Rent An Apartment"," ",(0,Me.jsx)("i",{className:"fa fa-chevron-circle-down pull-right mt3"})]})}),(0,Me.jsxs)("div",{className:"collapse",id:"wohnungMieten",children:[(0,Me.jsx)("div",{className:"headBx",children:"Rent"}),(0,Me.jsxs)("div",{className:"listBx",children:[(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"mietenRadio",id:"mietenRadio1",defaultChecked:""}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"mietenRadio1",children:"Apartment"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"mietenRadio",id:"mietenRadio2"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"mietenRadio2",children:"House"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"mietenRadio",id:"mietenRadio3"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"mietenRadio3",children:"temporary living"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"mietenRadio",id:"mietenRadio4"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"mietenRadio4",children:"Shared apartment"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"mietenRadio",id:"mietenRadio5"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"mietenRadio5",children:"Commercial real estate"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"mietenRadio",id:"mietenRadio6"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"mietenRadio6",children:"Garage/parking space"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"mietenRadio",id:"mietenRadio7"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"mietenRadio7",children:"Property tax"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"mietenRadio",id:"mietenRadio8"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"mietenRadio8",children:"New construction project"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"mietenRadio",id:"mietenRadio9"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"mietenRadio9",children:"Miscellaneous"})]})]}),(0,Me.jsx)("div",{className:"headBx",children:"Buy"}),(0,Me.jsxs)("div",{className:"listBx",children:[(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"kaufenRadio",id:"kaufenRadio1",defaultChecked:""}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"kaufenRadio1",children:"House"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"kaufenRadio",id:"kaufenRadio2"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"kaufenRadio2",children:"Apartment"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"kaufenRadio",id:"kaufenRadio3"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"kaufenRadio3",children:"New Building Project"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"kaufenRadio",id:"kaufenRadio4"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"kaufenRadio4",children:"Commercial Real Estate"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"kaufenRadio",id:"kaufenRadio5"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"kaufenRadio5",children:"Property"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"kaufenRadio",id:"kaufenRadio6"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"kaufenRadio6",children:"Investment Property"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"kaufenRadio",id:"kaufenRadio7"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"kaufenRadio7",children:"Garage"})]}),(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"kaufenRadio",id:"kaufenRadio8"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"kaufenRadio8",children:"Other"})]})]}),(0,Me.jsx)("div",{className:"headBx",children:"Build"}),(0,Me.jsxs)("div",{className:"listBx",children:[(0,Me.jsx)("div",{className:"form-check",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","House Construction & Catalogs"]})}),(0,Me.jsx)("div",{className:"form-check",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Prefabricated Houses"]})}),(0,Me.jsx)("div",{className:"form-check",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Solid Houses"]})}),(0,Me.jsx)("div",{className:"form-check",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Model Houses"]})}),(0,Me.jsx)("div",{className:"form-check",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Model Home Parks"]})}),(0,Me.jsx)("div",{className:"form-check",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Construction Financing"]})})]})]}),(0,Me.jsx)("div",{className:"headBx",children:"TYPE"}),(0,Me.jsx)("div",{className:"listBx",children:(0,Me.jsxs)("select",{name:"objectType",className:"form-control",title:"Property Type",children:[(0,Me.jsx)("option",{value:"",children:"Any"}),(0,Me.jsx)("option",{value:"etage",children:"Apartment"}),(0,Me.jsx)("option",{value:"mehrfamilienhaus",children:"Apartment building"}),(0,Me.jsx)("option",{value:"dachgeschoss",children:"Attic"}),(0,Me.jsx)("option",{value:"geschaeftshaus",children:"Commercial Building"}),(0,Me.jsx)("option",{value:"gewerbeeinheit",children:"Commercial Unit"}),(0,Me.jsx)("option",{value:"maisonette",children:"Maisonnette"}),(0,Me.jsx)("option",{value:"penthouse",children:"Penthouse"}),(0,Me.jsx)("option",{value:"wohnanlage",children:"Residential Complex"})]})}),(0,Me.jsx)("div",{className:"headBx",children:"Buy"}),(0,Me.jsx)("div",{className:"listBx",children:(0,Me.jsxs)("select",{name:"status",className:"form-control",title:"Status",children:[(0,Me.jsx)("option",{value:"",children:"Any"}),(0,Me.jsx)("option",{value:"s0",children:"Vacant"}),(0,Me.jsx)("option",{value:"s1",children:"Tenanted"})]})}),(0,Me.jsx)("div",{className:"headBx",children:"Status"}),(0,Me.jsx)("div",{className:"listBx",children:(0,Me.jsxs)("select",{name:"status",className:"form-control",title:"Status",children:[(0,Me.jsx)("option",{value:"",children:"Any"}),(0,Me.jsx)("option",{value:"s0",children:"Vacant"}),(0,Me.jsx)("option",{value:"s1",children:"Tenanted"})]})}),(0,Me.jsx)("div",{className:"headBx",children:"Location"}),(0,Me.jsx)("div",{className:"listBx",children:(0,Me.jsxs)("select",{name:"status",className:"form-control",title:"Status",children:[(0,Me.jsx)("option",{children:"Any"}),(0,Me.jsx)("option",{children:"Charlottenburg"}),(0,Me.jsx)("option",{children:"Dahlem"}),(0,Me.jsx)("option",{children:"Friedenau"}),(0,Me.jsx)("option",{children:"Friedrichshain"}),(0,Me.jsx)("option",{children:"Karlshorst"}),(0,Me.jsx)("option",{children:"Kreuzberg"})]})}),(0,Me.jsx)("div",{className:"headBx",children:"Bedrooms"}),(0,Me.jsx)("div",{className:"listBx",children:(0,Me.jsxs)("select",{name:"status",className:"form-control",title:"Status",children:[(0,Me.jsx)("option",{children:"Any"}),(0,Me.jsx)("option",{children:"Studio"}),(0,Me.jsx)("option",{children:"1"}),(0,Me.jsx)("option",{children:"2"}),(0,Me.jsx)("option",{children:"3"}),(0,Me.jsx)("option",{children:"4"}),(0,Me.jsx)("option",{children:"5"})]})}),(0,Me.jsx)("div",{className:"headBx",children:"Price Range"}),(0,Me.jsxs)("div",{className:"listBx",children:[(0,Me.jsx)("label",{htmlFor:"",children:"Min Price"}),(0,Me.jsxs)("select",{name:"price_from",className:"form-control form-control-sm",title:"Any",children:[(0,Me.jsx)("option",{value:"",children:"Any"}),(0,Me.jsx)("option",{value:1e5,children:"100,000"}),(0,Me.jsx)("option",{value:2e5,children:"200,000"}),(0,Me.jsx)("option",{value:3e5,children:"300,000"}),(0,Me.jsx)("option",{value:4e5,children:"400,000"}),(0,Me.jsx)("option",{value:5e5,children:"500,000"}),(0,Me.jsx)("option",{value:6e5,children:"600,000"}),(0,Me.jsx)("option",{value:7e5,children:"700,000"}),(0,Me.jsx)("option",{value:8e5,children:"800,000"}),(0,Me.jsx)("option",{value:1e6,children:"1,000,000+"})]}),(0,Me.jsx)("label",{className:"mt10",htmlFor:"",children:"Max Price"}),(0,Me.jsxs)("select",{name:"price_to",className:"form-control form-control-sm",id:"search-type",title:"Any",children:[(0,Me.jsx)("option",{value:"",children:"Any"}),(0,Me.jsx)("option",{value:1e5,children:"100,000"}),(0,Me.jsx)("option",{value:2e5,children:"200,000"}),(0,Me.jsx)("option",{value:3e5,children:"300,000"}),(0,Me.jsx)("option",{value:4e5,children:"400,000"}),(0,Me.jsx)("option",{value:5e5,children:"500,000"}),(0,Me.jsx)("option",{value:6e5,children:"600,000"}),(0,Me.jsx)("option",{value:7e5,children:"700,000"}),(0,Me.jsx)("option",{value:8e5,children:"800,000"}),(0,Me.jsx)("option",{value:1e6,children:"1,000,000+"})]}),(0,Me.jsxs)("div",{className:"mt10 mb10",children:[(0,Me.jsx)("input",{type:"submit",className:"btn btnTheme btn-sm",defaultValue:"Search",style:{background:"var(--theme-color)"}}),(0,Me.jsx)("input",{type:"reset",className:"btn btnTheme btn-sm mx-1",defaultValue:"Reset",style:{background:"var(--theme-color)"}})]})]}),(0,Me.jsx)("div",{className:"headBx",children:"Similar category"}),(0,Me.jsx)("div",{className:"listBx p0",children:(0,Me.jsxs)("div",{className:"list-group round0",children:[(0,Me.jsxs)(Oe,{className:"list-group-item d-flex justify-content-between align-items-center",children:["Freelancer",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill",children:"92"})]}),(0,Me.jsxs)(Oe,{className:"list-group-item d-flex justify-content-between align-items-center",children:["Jobs",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill",children:"56"})]}),(0,Me.jsxs)(Oe,{className:"list-group-item d-flex justify-content-between align-items-center",children:["Realestate",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill",children:"42"})]}),(0,Me.jsxs)(Oe,{className:"list-group-item d-flex justify-content-between align-items-center",children:["Lessons & Courses",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill",children:"30"})]})]})})]})})]})}),Vf=()=>{const{property:e,totalItem:t,getProperty:n,listLoading:i}=Qr(),[o,s]=(0,r.useState)(1),[a,c]=(0,r.useState)(""),l=Math.ceil((null===t||void 0===t?void 0:t.RealEstate)/12),u=Z(),d=new URLSearchParams(u.search).get("sub_category"),p={keyword_search:a,page:o,limit:12};return(0,r.useEffect)((()=>{(async()=>{await n(p,d)})()}),[a,o,d]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Realestate List Page"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Category"})}),(0,Me.jsx)("li",{className:"active",children:"Realestate List Page"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsx)(Bf,{})}),(0,Me.jsxs)("div",{className:"col-md-8",children:[i.RealEstate?Array.from({length:3}).map(((e,t)=>(0,Me.jsx)(bl,{},t))):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(zf,{item:e},t))),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(yl,{spacing:2,children:(0,Me.jsx)(Qc,{count:l,page:o,onChange:(e,t)=>s(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Me.jsx)(ei,{})]})})})]})};var Hf=__webpack_require__(1577);const Gf=e=>{let{img:t}=e;return(0,Me.jsx)(Hf.FN,{infiniteLoop:!0,children:Array.isArray(t)&&t.map(((e,t)=>(0,Me.jsx)("div",{className:"swiper-slide",children:(0,Me.jsx)("img",{src:e,alt:""})},t)))})},Wf=()=>{const{id:e}=ne(),{getPropertyDetail:t,propertyDetail:n,wishListAdd:i}=Qr(),[o,s]=(0,r.useState)({}),[a,c]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{await t(e)})()}),[e]);const{description:l,image_1:u,image_2:d,image_3:p,photo:h,title:f,product_id:m,attribute_values:g}=n.data||{},v=[h,u,d,p];return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:f})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/real_estate",children:"Realestate"})}),(0,Me.jsx)("li",{className:"active",children:f})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),n.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!n.isLoad&&(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsx)("div",{className:"card",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"mb20",children:f}),(0,Me.jsx)(Gf,{img:v})]})})}),(0,Me.jsxs)("div",{className:"col-md-4",children:[(0,Me.jsx)("div",{className:"card card-sm mb15",children:(0,Me.jsx)("div",{className:"card-body p5",children:(0,Me.jsxs)("ul",{className:"list-group list-group-horizontal list-inline",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"Share"})}),(0,Me.jsx)("li",{children:"\xa0\xa0\xa0\xa0"}),(0,Me.jsx)("li",{children:(0,Me.jsxs)("div",{className:"iconWish",children:[(0,Me.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{c(!0)}}),(0,Me.jsx)(jf,{isOpen:a,onClose:()=>{c(!1)}})]})}),(0,Me.jsx)("li",{children:"\xa0\xa0\xa0\xa0"}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>(e=>{i(e),s((t=>({...t,[e]:!0})))})(m),children:(0,Me.jsx)("i",{className:o[m]?"fa fa-heart":"fa fa-heart-o"})})})]})})}),(0,Me.jsx)("div",{className:"card card-sm mb15",children:(0,Me.jsxs)("div",{className:"card-body p5",children:[(0,Me.jsxs)("h5",{className:"mb0 text16 theme-text",children:[(0,Me.jsx)("i",{className:"fa fa-calendar"})," ",(0,Me.jsx)("b",{children:"Posted On"})," 05 Nov 2023"]}),(0,Me.jsxs)("p",{className:"text-muted mb5",children:[(0,Me.jsx)("b",{children:"Location :"})," Berliner Festspiele, Germany"]}),(0,Me.jsx)("div",{children:(0,Me.jsx)("iframe",{allowFullScreen:!0,height:"350",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d19429.71981350022!2d13.274301454071658!3d52.50239880695637!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47a850f9c36ee8a5%3A0xe2db0292ab5e1528!2sBerliner%20Festspiele!5e0!3m2!1sen!2sin!4v1699431152474!5m2!1sen!2sin",style:{border:"0"},width:"100%"})})]})}),(0,Me.jsx)("div",{className:"card card-sm",children:(0,Me.jsx)(Pf,{})})]})]}),(0,Me.jsx)("div",{className:"col-md-12 mt10",children:(0,Me.jsx)("div",{className:"card",children:(0,Me.jsx)("div",{className:"card-body",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"property-attributes",children:(0,Me.jsxs)("div",{className:"attr-list",children:[(0,Me.jsx)("h4",{children:"Property Specification"}),(0,Me.jsx)("table",{className:"table table-bordered table-striped",children:(0,Me.jsx)("tbody",{children:Array.isArray(g)&&g.map((e=>(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("td",{children:(0,Me.jsx)("strong",{children:e.attribute})}),(0,Me.jsx)("td",{children:e.value})]},e._id)))})})]})})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"property-description",children:[(0,Me.jsx)("h4",{children:f}),(0,Me.jsxs)("div",{className:"mt25",children:[(0,Me.jsx)("h5",{children:"Property Description :"}),(0,Me.jsxs)("p",{children:[l," "]})]})]})})]})})})})]}),(0,Me.jsx)(ei,{})]})})})]})},Yf=()=>{const{RegisterUser:e}=Qr(),[t,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[c,l]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),f=ee();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"box-form",children:[(0,Me.jsx)("div",{className:"left",style:{background:"url(./assets/images/login-bg.jpg) center bottom"},children:(0,Me.jsxs)("div",{className:"overlay",children:[(0,Me.jsx)("h1",{children:"Success starts here"}),(0,Me.jsxs)("ul",{children:[(0,Me.jsx)("li",{children:"Over 600 categories"}),(0,Me.jsx)("li",{children:"Pay per project, not per hour"}),(0,Me.jsx)("li",{children:"Access to talent and businesses across the globe"})]})]})}),(0,Me.jsxs)("div",{className:"right",children:[(0,Me.jsx)("p",{className:"mb5",children:(0,Me.jsxs)(Oe,{className:"text-muted",to:"/login",children:[(0,Me.jsx)("i",{className:"fa fa-long-arrow-left"})," Back"]})}),(0,Me.jsx)("h3",{children:"Sign up with Dzital"}),(0,Me.jsx)("div",{className:"formBx",children:(0,Me.jsxs)("form",{className:"px-md-1 mt30",children:[(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsxs)("label",{htmlFor:"",children:[(0,Me.jsx)("b",{children:"Name"})," ",(0,Me.jsx)("span",{className:"text text-danger",children:"*"})]}),(0,Me.jsx)("input",{type:"text",value:c,onChange:e=>l(e.target.value),className:"form-control"})]}),(0,Me.jsxs)("div",{className:"form-outline mb-3",children:[(0,Me.jsxs)("label",{htmlFor:"",children:[(0,Me.jsx)("b",{children:"Email"})," ",(0,Me.jsx)("span",{className:"text text-danger",children:"*"})]}),(0,Me.jsx)("input",{type:"email",value:t,onChange:e=>n(e.target.value),className:"form-control",required:!0})]}),(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsxs)("label",{htmlFor:"",children:[(0,Me.jsx)("b",{children:"Password"})," ",(0,Me.jsx)("span",{className:"text text-danger",children:"*"})]}),(0,Me.jsxs)("div",{className:"input-group mb-3",children:[(0,Me.jsx)("input",{type:u?"text":"password",value:i,onChange:e=>o(e.target.value),className:"form-control",placeholder:"Password","aria-describedby":"password-toggle",required:!0}),(0,Me.jsx)("span",{className:"input-group-text",id:"password-toggle",onClick:()=>{d(!u)},children:u?(0,Me.jsx)(Rf,{}):(0,Me.jsx)(Of,{})})]})]}),(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsxs)("label",{htmlFor:"",children:[(0,Me.jsx)("b",{children:"Confirm Password"})," ",(0,Me.jsx)("span",{className:"text text-danger",children:"*"})]}),(0,Me.jsxs)("div",{className:"input-group mb-3",children:[(0,Me.jsx)("input",{type:p?"text":"password",value:s,onChange:e=>a(e.target.value),className:"form-control",placeholder:"Confirm Password","aria-describedby":"password-toggle",required:!0}),(0,Me.jsx)("span",{className:"input-group-text",id:"password-toggle",onClick:()=>{h(!p)},children:p?(0,Me.jsx)(Rf,{}):(0,Me.jsx)(Of,{})})]})]}),(0,Me.jsxs)("div",{className:"row mb-2 ",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("button",{type:"button",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:r=>{r.preventDefault();t&&i&&s&&c?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?i.length<8||!/^(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,}$/.test(i)?Es.info("Password must be at least 8 characters long and contain a special character"):i!=!s?(e(c,t,i),f("/login"),n(""),o(""),a(""),l(""),Es.success("Successfully registered!")):Es.info("password did not match with confirm password"):Es.info("Please input a valid Email"):Es.info("Please fill in all required fields")},children:"Continue"})}),(0,Me.jsxs)("p",{className:"text text-center mt20",children:["Already Have An Account ? ",(0,Me.jsx)(Oe,{to:"/login",children:" LogIn"})," "]})]})]})}),(0,Me.jsx)("p",{className:"text14 text-muted",children:"By joining, you agree to the Dzital Terms of Service and to occasionally receive emails from us. Please read our Privacy Policy to learn how we use your personal data."})]})]})}),(0,Me.jsx)(ei,{})]})})})})},qf=r.forwardRef(((e,t)=>{let{id:n,bsPrefix:i,className:o,type:s="checkbox",isValid:a=!1,isInvalid:c=!1,as:l="input",...u}=e;const{controlId:d}=(0,r.useContext)(gr);return i=Je(i,"form-check-input"),(0,Me.jsx)(l,{...u,ref:t,type:s,id:n||d,className:xe()(o,i,a&&"is-valid",c&&"is-invalid")})}));qf.displayName="FormCheckInput";const Kf=qf,Qf=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,htmlFor:o,...s}=e;const{controlId:a}=(0,r.useContext)(gr);return n=Je(n,"form-check-label"),(0,Me.jsx)("label",{...s,ref:t,htmlFor:o||a,className:xe()(i,n)})}));Qf.displayName="FormCheckLabel";const Jf=Qf;const Xf=r.forwardRef(((e,t)=>{let{id:n,bsPrefix:i,bsSwitchPrefix:o,inline:s=!1,reverse:a=!1,disabled:c=!1,isValid:l=!1,isInvalid:u=!1,feedbackTooltip:d=!1,feedback:p,feedbackType:h,className:f,style:m,title:g="",type:v="checkbox",label:y,children:E,as:_="input",...b}=e;i=Je(i,"form-check"),o=Je(o,"form-switch");const{controlId:S}=(0,r.useContext)(gr),T=(0,r.useMemo)((()=>({controlId:n||S})),[S,n]),I=!E&&null!=y&&!1!==y||function(e,t){return r.Children.toArray(e).some((e=>r.isValidElement(e)&&e.type===t))}(E,Jf),N=(0,Me.jsx)(Kf,{...b,type:"switch"===v?"checkbox":v,ref:t,isValid:l,isInvalid:u,disabled:c,as:_});return(0,Me.jsx)(gr.Provider,{value:T,children:(0,Me.jsx)("div",{style:m,className:xe()(f,I&&i,s&&"".concat(i,"-inline"),a&&"".concat(i,"-reverse"),"switch"===v&&o),children:E||(0,Me.jsxs)(Me.Fragment,{children:[N,I&&(0,Me.jsx)(Jf,{title:g,children:y}),p&&(0,Me.jsx)(mr,{type:h,tooltip:d,children:p})]})})})}));Xf.displayName="FormCheck";const Zf=Object.assign(Xf,{Input:Kf,Label:Jf}),$f=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=Je(r,"form-floating"),(0,Me.jsx)(i,{ref:t,className:xe()(n,r),...o})}));$f.displayName="FormFloating";const em=$f,tm=r.forwardRef(((e,t)=>{let{controlId:n,as:i="div",...o}=e;const s=(0,r.useMemo)((()=>({controlId:n})),[n]);return(0,Me.jsx)(gr.Provider,{value:s,children:(0,Me.jsx)(i,{...o,ref:t})})}));tm.displayName="FormGroup";const nm=tm;function rm(e){let{as:t,bsPrefix:n,className:i,...o}=e;n=Je(n,"col");const s=function(){const{breakpoints:e}=(0,r.useContext)(qe);return e}(),a=function(){const{minBreakpoint:e}=(0,r.useContext)(qe);return e}(),c=[],l=[];return s.forEach((e=>{const t=o[e];let r,i,s;delete o[e],"object"===typeof t&&null!=t?({span:r,offset:i,order:s}=t):r=t;const u=e!==a?"-".concat(e):"";r&&c.push(!0===r?"".concat(n).concat(u):"".concat(n).concat(u,"-").concat(r)),null!=s&&l.push("order".concat(u,"-").concat(s)),null!=i&&l.push("offset".concat(u,"-").concat(i))})),[{...o,className:xe()(i,...c,...l)},{as:t,bsPrefix:n,spans:c}]}const im=r.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:o,spans:s}]=rm(e);return(0,Me.jsx)(i,{...r,ref:t,className:xe()(n,!s.length&&o)})}));im.displayName="Col";const om=im,sm=r.forwardRef(((e,t)=>{let{as:n="label",bsPrefix:i,column:o=!1,visuallyHidden:s=!1,className:a,htmlFor:c,...l}=e;const{controlId:u}=(0,r.useContext)(gr);i=Je(i,"form-label");let d="col-form-label";"string"===typeof o&&(d="".concat(d," ").concat(d,"-").concat(o));const p=xe()(a,i,s&&"visually-hidden",o&&d);return c=c||u,o?(0,Me.jsx)(om,{ref:t,as:"label",className:p,htmlFor:c,...l}):(0,Me.jsx)(n,{ref:t,className:p,htmlFor:c,...l})}));sm.displayName="FormLabel";const am=sm,cm=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,id:o,...s}=e;const{controlId:a}=(0,r.useContext)(gr);return n=Je(n,"form-range"),(0,Me.jsx)("input",{...s,type:"range",ref:t,className:xe()(i,n),id:o||a})}));cm.displayName="FormRange";const lm=cm,um=r.forwardRef(((e,t)=>{let{bsPrefix:n,size:i,htmlSize:o,className:s,isValid:a=!1,isInvalid:c=!1,id:l,...u}=e;const{controlId:d}=(0,r.useContext)(gr);return n=Je(n,"form-select"),(0,Me.jsx)("select",{...u,size:o,ref:t,className:xe()(s,n,i&&"".concat(n,"-").concat(i),a&&"is-valid",c&&"is-invalid"),id:l||d})}));um.displayName="FormSelect";const dm=um,pm=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="small",muted:o,...s}=e;return n=Je(n,"form-text"),(0,Me.jsx)(i,{...s,ref:t,className:xe()(r,n,o&&"text-muted")})}));pm.displayName="FormText";const hm=pm,fm=r.forwardRef(((e,t)=>(0,Me.jsx)(Zf,{...e,ref:t,type:"switch"})));fm.displayName="Switch";const mm=Object.assign(fm,{Input:Zf.Input,Label:Zf.Label}),gm=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:i,controlId:o,label:s,...a}=e;return n=Je(n,"form-floating"),(0,Me.jsxs)(nm,{ref:t,className:xe()(r,n),controlId:o,...a,children:[i,(0,Me.jsx)("label",{htmlFor:o,children:s})]})}));gm.displayName="FloatingLabel";const vm=gm,ym={_ref:xn().any,validated:xn().bool,as:xn().elementType},Em=r.forwardRef(((e,t)=>{let{className:n,validated:r,as:i="form",...o}=e;return(0,Me.jsx)(i,{...o,ref:t,className:xe()(n,r&&"was-validated")})}));Em.displayName="Form",Em.propTypes=ym;const _m=Object.assign(Em,{Group:nm,Control:yr,Floating:em,Check:Zf,Switch:mm,Label:am,Text:hm,Range:lm,Select:dm,FloatingLabel:vm}),bm=()=>{ee();const{UserUpdate:e,userData:t}=Qr(),[n,i]=(0,r.useState)(t?t.email:""),[o,s]=(0,r.useState)(t?t.gender:""),[a,c]=(0,r.useState)(""),[l,u]=(0,r.useState)(t?t.image:""),[d,p]=(0,r.useState)(t?t.mobile:""),[h,f]=(0,r.useState)(t?t.name:"");console.log(t);return(0,r.useEffect)((()=>{t&&(i(t.email),s(t.gender),u(t.image),p(t.mobile),f(t.name))}),[t]),(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"box-form",children:[(0,Me.jsx)("div",{className:"left",style:{background:"url(./assets/images/login-bg.jpg) center bottom"},children:(0,Me.jsxs)("div",{className:"overlay",children:[(0,Me.jsx)("h1",{children:"Success starts here"}),(0,Me.jsxs)("ul",{children:[(0,Me.jsx)("li",{children:"Over 600 categories"}),(0,Me.jsx)("li",{children:"Pay per project, not per hour"}),(0,Me.jsx)("li",{children:"Access to talent and businesses across the globe"})]})]})}),(0,Me.jsxs)("div",{className:"right",children:[(0,Me.jsx)("p",{className:"mb5",children:(0,Me.jsxs)(Oe,{className:"text-muted",to:"/account",children:[(0,Me.jsx)("i",{className:"fa fa-long-arrow-left"})," Back"]})}),(0,Me.jsx)("h3",{children:"Update Your Profile"}),(0,Me.jsxs)("div",{className:"formBx",children:[(0,Me.jsxs)("form",{className:"px-md-1 mt30",children:[(0,Me.jsxs)("div",{className:"form-outline mb-3",children:[(0,Me.jsx)("b",{children:"Profile"}),(0,Me.jsxs)("label",{className:"btn btn-outline-secondary col-md-12",children:[l?(0,Me.jsx)("div",{children:(0,Me.jsx)("img",{src:l||URL.createObjectURL(l),alt:"Image 1",height:50,width:50,className:"img img-responsive mr-2"})}):(0,Me.jsxs)("div",{children:[(0,Me.jsx)("i",{class:"fa-regular fa-image"}),(0,Me.jsx)("span",{className:"plus-sign",children:"+"})]}),(0,Me.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:e=>u(e.target.files[0]),hidden:!0})]})]}),(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Name"})}),(0,Me.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),className:"form-control"})]}),(0,Me.jsx)("div",{className:"form-outline mb-4",children:(0,Me.jsxs)(_m.Group,{controlId:"formGender",children:[(0,Me.jsx)(_m.Label,{children:(0,Me.jsx)("b",{children:"Gender"})}),(0,Me.jsxs)(_m.Select,{value:o,onChange:e=>{s(e.target.value)},children:[(0,Me.jsx)("option",{value:"",children:"Select Gender"}),(0,Me.jsx)("option",{value:"male",children:"Male"}),(0,Me.jsx)("option",{value:"female",children:"Female"}),(0,Me.jsx)("option",{value:"other",children:"Other"})]})]})}),(0,Me.jsxs)("div",{className:"form-outline mb-3",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Email"})}),(0,Me.jsx)("input",{type:"email",value:n,onChange:e=>i(e.target.value),className:"form-control",required:!0})]}),(0,Me.jsxs)("div",{className:"form-outline mb-4",children:[(0,Me.jsx)("label",{htmlFor:"",children:(0,Me.jsx)("b",{children:"Mobile"})}),(0,Me.jsx)("input",{type:"mobile",value:d,onChange:e=>p(e.target.value),className:"form-control"})]}),(0,Me.jsxs)("div",{className:"row mb-2",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("button",{type:"submit",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:t=>{t.preventDefault(),e(h,n,d,l,o)},children:"Continue"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("p",{className:"mt-1",align:"right",children:(0,Me.jsx)(Oe,{className:"text14 text-muted","data-bs-toggle":"collapse",to:"#forgotPassword",children:"Forgot Password"})})})]})]}),(0,Me.jsxs)("div",{className:"input-group collapse",id:"forgotPassword",children:[(0,Me.jsx)("input",{type:"text",className:"form-control",placeholder:"Recipient's username","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),(0,Me.jsx)("button",{className:"btn btnTheme",type:"button",id:"button-addon2",children:"Button"})]})]}),(0,Me.jsx)("p",{className:"text14 text-muted",children:"By joining, you agree to the Dzital Terms of Service and to occasionally receive emails from us. Please read our Privacy Policy to learn how we use your personal data."})]})]})}),(0,Me.jsx)(ei,{})]})})})})},Sm=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Qr();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Me.jsxs)("div",{className:"titelBx",children:[(0,Me.jsx)(Oe,{className:"navbar-brand",to:"#sideBarCollapse","data-bs-toggle":"collapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Me.jsx)("i",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:(0,Me.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Me.jsx)(Me.Fragment,{children:n&&n.length>0&&(0,Me.jsxs)("div",{children:[(0,Me.jsx)("div",{className:"headBx",children:e.attribute}),(0,Me.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Me.jsx)("ul",{className:"list-group list-group-flush",children:(0,Me.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Me.jsxs)("label",{children:[(0,Me.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}})," ",n.value]})})},n._id)))})]},e._id)})}))})})]})})},Tm=e=>{let{item:t}=e;const n=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(t.createdAt);return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)(Oe,{className:"jobeItem",to:"/job-detail/".concat(t._id),children:(0,Me.jsx)("div",{className:"card mb20",children:(0,Me.jsxs)("div",{className:"card-body",style:{height:"170px"},children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-9 col-sm-12",children:(0,Me.jsx)("h5",{children:t.title})}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("p",{className:"m0 mb10 mt20",children:[(0,Me.jsx)("i",{className:"fa fa-file-text-o"})," "," ",t.description]}),(0,Me.jsxs)("div",{className:"row footBx mt20",children:[(0,Me.jsx)("div",{className:"col",children:(0,Me.jsxs)("span",{className:"text-muted",children:[n," Ago"]})}),(0,Me.jsxs)("div",{className:"col text14",align:"right",children:[(0,Me.jsx)("i",{className:"fa fa-bookmark-o"})," Save"]})]})]})})})})})},Im=()=>{const{jobList:e,getJobList:t,totalItem:n,listLoading:i,serviceList:o,getAttributeFilterList:s,filterAttributeList:a}=Qr(),[c,l]=(0,r.useState)(1),[u,d]=(0,r.useState)(""),p=Z(),h=new URLSearchParams(p.search),f=h.get("sub_category"),m=h.get("category_id"),g=Math.ceil((null===n||void 0===n?void 0:n.job)/12),[v,y]=(0,r.useState)([]),E={keyword_search:u,page:c,limit:12};(0,r.useEffect)((()=>{(async()=>{f?await t(E,f,v):await t(E,null,v)})()}),[u,c,f,v]),(0,r.useEffect)((()=>{(async()=>{f&&await s({sub:f}),m&&await s({main:m})})()}),[u,f,m]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Jobs"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Category"})}),(0,Me.jsx)("li",{className:"active",children:"Jobs"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsx)(Sm,{onFilter:(e,t,n)=>{if(!0===e.target.checked)y([...v,{attribute:t,value:n}]);else{const e=v.filter((e=>e.attribute!==t));y(e)}}})}),(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("div",{className:"row",children:i.job?Array.from({length:4}).map(((e,t)=>(0,Me.jsx)(El,{col:6},t))):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(Tm,{item:e},t)))}),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(yl,{spacing:2,children:(0,Me.jsx)(Qc,{count:g,page:c,onChange:e=>l(e),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Me.jsx)(ei,{})]})})})]})},Nm=()=>{const{id:e}=ne(),{getJobListDetail:t,jobDetail:n}=Qr();(0,r.useEffect)((()=>{(async()=>{await t(e)})()}),[e]);const{description:i,title:o,attribute_values:s,createdAt:a}=n.data||{},c=e=>{if(!Array.isArray(s))return null;const t=s.find((t=>t.attribute===e));return t?t.value:null},l=c("Salary Expectation"),u=c("Location"),d=c("Experience Level"),p=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(a);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:o})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/jobs",children:"Jobs"})}),(0,Me.jsx)("li",{className:"active",children:o})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),n.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!n.isLoad&&(0,Me.jsxs)("div",{className:"col-md-6",children:[(0,Me.jsx)("div",{className:"card jobeItem mb20",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-9 col-sm-12",children:(0,Me.jsx)("h5",{children:o})}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-briefcase"})," ",d]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-inr"})," ",l||"Not Disclosed"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," ",u||"Not Mentioned"]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("p",{className:"mt5 mb5 text16",children:[(0,Me.jsx)("b",{children:"Posted :"})," ",p," ago"]})})})]})}),(0,Me.jsx)("div",{className:"card mb20",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{children:"Job description"}),(0,Me.jsxs)("p",{children:[i," "]}),(0,Me.jsx)("hr",{}),Array.isArray(s)&&s.map((e=>(0,Me.jsxs)("p",{children:[(0,Me.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]})})]}),(0,Me.jsxs)("div",{className:"col-md-4",children:[(0,Me.jsx)(Pf,{}),(0,Me.jsx)("div",{className:"card",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{children:(0,Me.jsx)("b",{children:"Similar jobs"})}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("div",{className:"jobeItem",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Me.jsx)("h5",{children:"Website Designer"}),(0,Me.jsxs)("ul",{className:"reviewList mb5",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"G Tech Web Solutions"})}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-star"})," ",(0,Me.jsx)("span",{children:"1.2"})]}),(0,Me.jsx)("li",{className:"text-muted",children:"|"}),(0,Me.jsx)("li",{children:(0,Me.jsx)("span",{children:"12 Reviews"})})]})]}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," Kolkata"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("b",{children:"Posted : "}),(0,Me.jsx)("span",{className:"text-muted",children:"30+ Days Ago"})]})]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("div",{className:"jobeItem",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Me.jsx)("h5",{children:"Website Designer"}),(0,Me.jsxs)("ul",{className:"reviewList mb5",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"G Tech Web Solutions"})}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-star"})," ",(0,Me.jsx)("span",{children:"1.2"})]}),(0,Me.jsx)("li",{className:"text-muted",children:"|"}),(0,Me.jsx)("li",{children:(0,Me.jsx)("span",{children:"12 Reviews"})})]})]}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," Kolkata"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("b",{children:"Posted : "}),(0,Me.jsx)("span",{className:"text-muted",children:"30+ Days Ago"})]})]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("div",{className:"jobeItem",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Me.jsx)("h5",{children:"Website Designer"}),(0,Me.jsxs)("ul",{className:"reviewList mb5",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"G Tech Web Solutions"})}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-star"})," ",(0,Me.jsx)("span",{children:"1.2"})]}),(0,Me.jsx)("li",{className:"text-muted",children:"|"}),(0,Me.jsx)("li",{children:(0,Me.jsx)("span",{children:"12 Reviews"})})]})]}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," Kolkata"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("b",{children:"Posted : "}),(0,Me.jsx)("span",{className:"text-muted",children:"30+ Days Ago"})]})]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("div",{className:"jobeItem",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Me.jsx)("h5",{children:"Website Designer"}),(0,Me.jsxs)("ul",{className:"reviewList mb5",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"G Tech Web Solutions"})}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-star"})," ",(0,Me.jsx)("span",{children:"1.2"})]}),(0,Me.jsx)("li",{className:"text-muted",children:"|"}),(0,Me.jsx)("li",{children:(0,Me.jsx)("span",{children:"12 Reviews"})})]})]}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," Kolkata"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("b",{children:"Posted : "}),(0,Me.jsx)("span",{className:"text-muted",children:"30+ Days Ago"})]})]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("div",{className:"jobeItem",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Me.jsx)("h5",{children:"Website Designer"}),(0,Me.jsxs)("ul",{className:"reviewList mb5",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"G Tech Web Solutions"})}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-star"})," ",(0,Me.jsx)("span",{children:"1.2"})]}),(0,Me.jsx)("li",{className:"text-muted",children:"|"}),(0,Me.jsx)("li",{children:(0,Me.jsx)("span",{children:"12 Reviews"})})]})]}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," Kolkata"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("b",{children:"Posted : "}),(0,Me.jsx)("span",{className:"text-muted",children:"30+ Days Ago"})]})]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("div",{className:"jobeItem",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Me.jsx)("h5",{children:"Website Designer"}),(0,Me.jsxs)("ul",{className:"reviewList mb5",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"G Tech Web Solutions"})}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-star"})," ",(0,Me.jsx)("span",{children:"1.2"})]}),(0,Me.jsx)("li",{className:"text-muted",children:"|"}),(0,Me.jsx)("li",{children:(0,Me.jsx)("span",{children:"12 Reviews"})})]})]}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," Kolkata"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("b",{children:"Posted : "}),(0,Me.jsx)("span",{className:"text-muted",children:"30+ Days Ago"})]})]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("div",{className:"jobeItem",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Me.jsx)("h5",{children:"Website Designer"}),(0,Me.jsxs)("ul",{className:"reviewList mb5",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"G Tech Web Solutions"})}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-star"})," ",(0,Me.jsx)("span",{children:"1.2"})]}),(0,Me.jsx)("li",{className:"text-muted",children:"|"}),(0,Me.jsx)("li",{children:(0,Me.jsx)("span",{children:"12 Reviews"})})]})]}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," Kolkata"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("b",{children:"Posted : "}),(0,Me.jsx)("span",{className:"text-muted",children:"30+ Days Ago"})]})]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("div",{className:"jobeItem",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Me.jsx)("h5",{children:"Website Designer"}),(0,Me.jsxs)("ul",{className:"reviewList mb5",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"G Tech Web Solutions"})}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-star"})," ",(0,Me.jsx)("span",{children:"1.2"})]}),(0,Me.jsx)("li",{className:"text-muted",children:"|"}),(0,Me.jsx)("li",{children:(0,Me.jsx)("span",{children:"12 Reviews"})})]})]}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," Kolkata"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("b",{children:"Posted : "}),(0,Me.jsx)("span",{className:"text-muted",children:"30+ Days Ago"})]})]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("div",{className:"jobeItem",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Me.jsx)("h5",{children:"Website Designer"}),(0,Me.jsxs)("ul",{className:"reviewList mb5",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("b",{children:"G Tech Web Solutions"})}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-star"})," ",(0,Me.jsx)("span",{children:"1.2"})]}),(0,Me.jsx)("li",{className:"text-muted",children:"|"}),(0,Me.jsx)("li",{children:(0,Me.jsx)("span",{children:"12 Reviews"})})]})]}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," Kolkata"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("b",{children:"Posted : "}),(0,Me.jsx)("span",{className:"text-muted",children:"30+ Days Ago"})]})]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(Oe,{className:"btn btn-primary",to:"/jobs",children:"View all"})})]})})]}),(0,Me.jsx)(ei,{})]})})})]})},wm=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav",children:[(0,Me.jsxs)("div",{className:"titelBx",children:[(0,Me.jsx)(Oe,{className:"navbar-brand",to:"#sideBarCollapse","data-bs-toggle":"collapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Me.jsx)("i",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:(0,Me.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsxs)("div",{className:"customeSidebar",children:[(0,Me.jsx)("div",{className:"headBx",children:"Gender"}),(0,Me.jsx)("div",{className:"listBx p0",children:(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"gender",id:"gender1"}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"gender1",children:"Men"})]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("div",{className:"form-check",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"radio",name:"gender",id:"gender2",defaultChecked:""}),(0,Me.jsx)("label",{className:"form-check-label",htmlFor:"gender2",children:"Women"})]})})]})}),(0,Me.jsx)("div",{className:"headBx dropHeadBx",children:(0,Me.jsxs)(Oe,{className:"collapseLink","data-bs-toggle":"collapse",to:"#category",children:["Category ",(0,Me.jsx)("i",{className:"fa fa-chevron-circle-down float-end mt3"})]})}),(0,Me.jsx)("div",{className:"listBx p0 collapse show",id:"category",children:(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Westernwear"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Indianwear"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Jewellery"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Bags"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Lingerie"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Accessories"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Footwear"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Active & Sports"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Sportswear"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Maternity Wear"]})})]})}),(0,Me.jsx)("div",{className:"headBx dropHeadBx",children:(0,Me.jsxs)(Oe,{className:"collapseLink","data-bs-toggle":"collapse",to:"#occasion",children:["Occasion ",(0,Me.jsx)("i",{className:"fa fa-chevron-circle-down float-end mt3"})]})}),(0,Me.jsx)("div",{className:"listBx p0 collapse show",id:"occasion",children:(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Casual"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Festive"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Party"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Everyday Essentials"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Wedding"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Evening"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Work"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Sports"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Winter"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Formal"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Fusion"]})})]})}),(0,Me.jsx)("div",{className:"headBx dropHeadBx",children:(0,Me.jsxs)(Oe,{className:"collapseLink","data-bs-toggle":"collapse",to:"#colorBx",children:["Color ",(0,Me.jsx)("i",{className:"fa fa-chevron-circle-down float-end mt3"})]})}),(0,Me.jsx)("div",{className:"listBx p0 collapse show colorBx",id:"colorBx",children:(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ",(0,Me.jsx)("span",{style:{backgroundColor:"#f00"}})," Red"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ",(0,Me.jsx)("span",{style:{backgroundColor:"#000"}})," Black"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ",(0,Me.jsx)("span",{style:{backgroundColor:"#00a903"}})," Green"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ",(0,Me.jsx)("span",{style:{backgroundColor:"#e7bd42"}})," Gold"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ",(0,Me.jsx)("span",{style:{backgroundColor:"#663300"}})," Brown"]})})]})}),(0,Me.jsx)("div",{className:"headBx",children:"Price"}),(0,Me.jsx)("div",{className:"listBx",children:(0,Me.jsx)("input",{type:"range",defaultValue:200,min:0,max:1e3,className:"width100 mt10 mb10"})}),(0,Me.jsx)("div",{className:"headBx dropHeadBx",children:(0,Me.jsxs)(Oe,{className:"collapseLink","data-bs-toggle":"collapse",to:"#material",children:["Material ",(0,Me.jsx)("i",{className:"fa fa-chevron-circle-down float-end mt3"})]})}),(0,Me.jsx)("div",{className:"listBx p0 collapse show",id:"material",children:(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Cotton"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Polyester"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Brass"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Blended Fabric"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Alloy"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Viscose"]})})]})})]})})]})})}),Cm=e=>{let{item:t}=e;const[n,i]=(0,r.useState)(!1),{wishListAdd:o}=Qr();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"card shopItem",children:(0,Me.jsxs)("div",{className:"card-body",style:{height:"350px"},children:[(0,Me.jsxs)("div",{className:"proImg",children:[(0,Me.jsx)(Oe,{to:"/Fashion-Beauty-Details/".concat(t._id),children:(0,Me.jsx)("img",{src:t.photo,alt:""})}),(0,Me.jsx)(Oe,{className:"wishList",onClick:()=>{return e=t.product_id,o(e),void i(!0);var e},children:(0,Me.jsx)("i",{className:!0===n?"fa fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"textCont",children:[(0,Me.jsx)("h4",{children:(0,Me.jsx)(Oe,{to:"/Fashion-Beauty-Details/".concat(t._id),children:t.brand})}),(0,Me.jsx)("p",{children:t.title}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:(e=>{const t=e.split(" ");return t.length>15?t.slice(0,14).join(" ")+"...":e})(t.description)})}),(0,Me.jsx)(Oe,{className:"btn btnTheme btn-sm width100",style:{background:"var(--theme-color)"},to:"/Fashion-Beauty-Details/".concat(t._id),children:(0,Me.jsx)("b",{children:"View Details"})})]})]},t._id)})})})},Om=()=>{const{fashion:e,getFashionBeauty:t,totalItem:n,listLoading:i}=Qr(),[o,s]=(0,r.useState)(1),[a,c]=(0,r.useState)(""),l=Math.ceil((null===n||void 0===n?void 0:n.Fashion)/12),u=Z(),d=new URLSearchParams(u.search).get("sub_category"),p={keyword_search:a,page:o,limit:12};return(0,r.useEffect)((()=>{(async()=>{await t(p,d)})()}),[a,o,d]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Fashion & Beauty"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Category"})}),(0,Me.jsx)("li",{className:"active",children:"Fashion & Beauty"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)(wm,{}),(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("div",{className:"row",children:i.Fashion?Array.from({length:6}).map(((e,t)=>(0,Me.jsx)(_l,{col:4},t))):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(Cm,{item:e},t)))}),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(yl,{spacing:2,children:(0,Me.jsx)(Qc,{count:l,page:o,onChange:(e,t)=>s(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Me.jsx)(ei,{})]})})})]})},Am=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Me.jsxs)("div",{className:"titelBx",children:[(0,Me.jsx)(Oe,{className:"navbar-brand",to:"#sideBarCollapse","data-bs-toggle":"collapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Me.jsx)("i",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:(0,Me.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsxs)("div",{className:"customeSidebar",children:[(0,Me.jsx)("div",{className:"headBx",children:"All Categories"}),(0,Me.jsx)("div",{className:"listBx p0",children:(0,Me.jsxs)("div",{className:"list-group list-group-flush",children:[(0,Me.jsx)(Oe,{className:"list-group-item",to:"#.",children:"Graphic Design & Multimedia"}),(0,Me.jsx)(Oe,{className:"list-group-item",to:"#.",children:"Writing, Content & Translation"}),(0,Me.jsx)(Oe,{className:"list-group-item",to:"#.",children:"Data Entry & Admin"}),(0,Me.jsx)(Oe,{className:"list-group-item active",to:"#.",children:"Finance & Accounting"}),(0,Me.jsx)(Oe,{className:"list-group-item",to:"#.",children:"Sales & Marketing"}),(0,Me.jsx)(Oe,{className:"list-group-item",to:"#.",children:"Customer Support & Service"}),(0,Me.jsx)(Oe,{className:"list-group-item",to:"#.",children:"Social Media, SEO & SEM"}),(0,Me.jsx)(Oe,{className:"list-group-item",to:"#.",children:"Mobile Application"}),(0,Me.jsx)(Oe,{className:"list-group-item",to:"#.",children:"Others"}),(0,Me.jsx)(Oe,{className:"list-group-item",to:"#.",children:"Music & Audio"})]})}),(0,Me.jsx)("div",{className:"headBx",children:"Price Range"}),(0,Me.jsx)("div",{className:"listBx",children:(0,Me.jsx)("input",{type:"range",defaultValue:200,min:0,max:1e3,className:"width100 mt10 mb10"})})]})})]})})}),Rm=e=>{let{item:t}=e;const n=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(t.createdAt);return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"card mb20",children:(0,Me.jsx)("div",{className:"card-body jobeItemBx",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9",children:[(0,Me.jsx)("h4",{children:t.title}),(0,Me.jsxs)("p",{className:"text-muted mb5",children:[(0,Me.jsx)("i",{className:"fa fa-clock-o"})," Posted on : ",n," ago"]}),(0,Me.jsx)("p",{className:"mb-4",children:(e=>{const t=e.split(" ");return t.length>20?t.slice(0,20).join(" ")+"...":e})(t.description)})]}),(0,Me.jsx)("div",{className:"col-md-3 viewBx",align:"center",children:(0,Me.jsx)(Oe,{className:"btn btn-outline-primary width100",to:"/freelancer-detail/".concat(t._id),children:"View & Apply"})})]})})},t._id)})},Mm=()=>{const{freelancerList:e,totalItem:t,getFreelancer:n,listLoading:i}=Qr(),[o,s]=(0,r.useState)(1),[a,c]=(0,r.useState)(""),l=Z(),u=new URLSearchParams(l.search).get("sub_category"),d=Math.ceil((null===t||void 0===t?void 0:t.freelancer)/12),p={keyword_search:a,page:o,limit:12};return(0,r.useEffect)((()=>{(async()=>{await n(p,u)})()}),[a,o,u]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Freelancer"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{children:"Category"})}),(0,Me.jsx)("li",{className:"active",children:"Freelancer"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)(Am,{}),(0,Me.jsxs)("div",{className:"col-md-8",children:[i.freelancer?Array.from({length:3}).map(((e,t)=>(0,Me.jsx)(El,{col:10},t))):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(Rm,{item:e},t))),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(yl,{spacing:2,children:(0,Me.jsx)(Qc,{count:d,page:o,onChange:(e,t)=>s(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Me.jsx)(ei,{})]})})})]})},Dm=()=>{const{id:e}=ne(),{getFreelancerDetails:t,freelancerDetail:n}=Qr(),[i,o]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{await t(e)})()}),[e]);const{title:s,description:a,attribute_values:c,createdAt:l}=n.data||{},u=e=>{if(!Array.isArray(c))return null;const t=c.find((t=>t.attribute===e));return t?t.value:null},d=u("Salary"),p=u("Location"),h=u("Experience Level"),f=u("Industry Experience"),m=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(l);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Freelancer Job Details"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/Freelancer",children:"Freelancer"})}),(0,Me.jsx)("li",{className:"active",children:"Freelancer Details"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),n.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!n.isLoad&&(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsx)("h2",{className:"mb-3",children:s})}),(0,Me.jsxs)("div",{className:"col-md-4 d-flex gap-3 align-items-center",align:"right",children:[(0,Me.jsxs)(Oe,{className:"btn btnTheme ",to:"#.",style:{background:"var(--theme-color)"},children:[(0,Me.jsx)("i",{className:"fa fa-envelope "})," Send Proposal"]}),(0,Me.jsxs)("div",{className:"iconWish",children:[(0,Me.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{o(!0)}}),(0,Me.jsx)(jf,{isOpen:i,onClose:()=>{o(!1)}})]})]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("div",{className:"card jobeItem mb20",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-9 col-sm-12",children:(0,Me.jsx)("h5",{children:s})}),(0,Me.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Me.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Me.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-briefcase"})," ",f||h||""]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-inr"})," ",d||"Not Disclosed"]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," ",p||"Not Mentioned"]})]}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("p",{className:"mt5 mb5 text16",children:[(0,Me.jsx)("b",{children:"Posted :"})," ",m," ago"]})})})]})}),(0,Me.jsx)("div",{className:"card ",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("h3",{children:["Description for ",s]}),(0,Me.jsx)("p",{className:"mb0",align:"justify",children:a}),(0,Me.jsx)("hr",{}),Array.isArray(c)&&c.map((e=>(0,Me.jsxs)("p",{children:[(0,Me.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]})})]}),(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsxs)("div",{className:"card text-bg-secondery",style:{background:"var(--theme-color-dark)"},children:[(0,Me.jsx)("div",{className:"card-header",children:(0,Me.jsx)("h5",{className:"text-light",children:"About the Client"})}),(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-globe"})," ",(0,Me.jsx)("b",{children:"Country :"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"Germany"})]}),(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-list"})," ",(0,Me.jsx)("b",{children:"Projects Paid :"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"0"})]}),(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-pencil-square-o"})," ",(0,Me.jsx)("b",{children:"Projects Posted :"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"1"})]}),(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-thumbs-o-up"})," ",(0,Me.jsx)("b",{children:"Total Feedbacks :"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"1"})]}),(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-thumbs-o-up"})," ",(0,Me.jsx)("b",{children:"Feedbacks :"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"1"})]}),(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-cubes"})," ",(0,Me.jsx)("b",{children:"Total Spent :"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"\u20b9 0"})]}),(0,Me.jsxs)("li",{className:"list-group-item",children:[(0,Me.jsx)("i",{className:"fa fa-users"})," ",(0,Me.jsx)("b",{children:"Client Type"})," ",(0,Me.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"Company"})]})]}),(0,Me.jsx)("div",{className:"card-footer text-light",children:"Member since 15 Nov, 2023"})]})})]}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-12",children:[(0,Me.jsx)("h5",{className:"mt-3",children:"Proposals"}),(0,Me.jsx)("hr",{className:"mt0"})]}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("div",{className:"card mb-3",style:{maxWidth:540},children:(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("img",{src:"assets/images/arch-dreams.jpg",className:"img-fluid rounded-start",style:{height:"100%"},alt:"..."})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:"Arch Dreams"}),(0,Me.jsxs)("p",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," India \xa0\xa0"," ",(0,Me.jsx)("i",{className:"fa fa-clock-o"})," 3 hours ago"]}),(0,Me.jsx)("p",{className:"card-text",children:"Architectural Designer"}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Received: 18 Nov, 23 (Today)"})})]})})]})})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("div",{className:"card mb-3",style:{maxWidth:540},children:(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("img",{src:"assets/images/arch-dreams.jpg",className:"img-fluid rounded-start",style:{height:"100%"},alt:"..."})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:"Arch Dreams"}),(0,Me.jsxs)("p",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," India \xa0\xa0"," ",(0,Me.jsx)("i",{className:"fa fa-clock-o"})," 3 hours ago"]}),(0,Me.jsx)("p",{className:"card-text",children:"Architectural Designer"}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Received: 18 Nov, 23 (Today)"})})]})})]})})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("div",{className:"card mb-3",style:{maxWidth:540},children:(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("img",{src:"assets/images/arch-dreams.jpg",className:"img-fluid rounded-start",style:{height:"100%"},alt:"..."})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:"Arch Dreams"}),(0,Me.jsxs)("p",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," India \xa0\xa0"," ",(0,Me.jsx)("i",{className:"fa fa-clock-o"})," 3 hours ago"]}),(0,Me.jsx)("p",{className:"card-text",children:"Architectural Designer"}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Received: 18 Nov, 23 (Today)"})})]})})]})})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("div",{className:"card mb-3",style:{maxWidth:540},children:(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("img",{src:"assets/images/arch-dreams.jpg",className:"img-fluid rounded-start",style:{height:"100%"},alt:"..."})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:"Arch Dreams"}),(0,Me.jsxs)("p",{children:[(0,Me.jsx)("i",{className:"fa fa-map-marker"})," India \xa0\xa0"," ",(0,Me.jsx)("i",{className:"fa fa-clock-o"})," 3 hours ago"]}),(0,Me.jsx)("p",{className:"card-text",children:"Architectural Designer"}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Received: 18 Nov, 23 (Today)"})})]})})]})})})]})]}),(0,Me.jsx)(ei,{})]})})})]})},km=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Me.jsxs)("div",{className:"titelBx",children:[(0,Me.jsx)("a",{className:"navbar-brand",href:"#sideBarCollapse","data-bs-toggle":"collapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Me.jsx)("i",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:(0,Me.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Me.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Me.jsxs)("div",{className:"customeSidebar",children:[(0,Me.jsx)("div",{className:"headBx dropHeadBx",children:(0,Me.jsxs)("a",{className:"collapseLink","data-bs-toggle":"collapse",href:"#marketing",children:["Marketing"," ",(0,Me.jsx)("i",{className:"fa fa-chevron-circle-down float-end mt3"})]})}),(0,Me.jsx)("div",{className:"listBx p0 collapse",id:"marketing",children:(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Automation"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Contact Management"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Email Marketing"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Inbound Marketing"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Lead Generation"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Reporting & Performance"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Search Engine Optimization"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Social Media"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Web Design"]})})]})}),(0,Me.jsx)("div",{className:"headBx dropHeadBx",children:(0,Me.jsxs)("a",{className:"collapseLink","data-bs-toggle":"collapse",href:"#sales",children:["Sales"," ",(0,Me.jsx)("i",{className:"fa fa-chevron-circle-down float-end mt3"})]})}),(0,Me.jsx)("div",{className:"listBx p0 collapse",id:"sales",children:(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Contact Management"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Inbound Sales"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Sales Enablement"]})})]})}),(0,Me.jsx)("div",{className:"headBx dropHeadBx",children:(0,Me.jsxs)("a",{className:"collapseLink","data-bs-toggle":"collapse",href:"#service",children:["Service"," ",(0,Me.jsx)("i",{className:"fa fa-chevron-circle-down float-end mt3"})]})}),(0,Me.jsx)("div",{className:"listBx p0 collapse",id:"service",children:(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Contact Management"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Inbound Service"]})})]})}),(0,Me.jsx)("div",{className:"headBx",children:"Content Type"}),(0,Me.jsx)("div",{className:"listBx p0",children:(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Course"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Lesson"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Ebook"]})})]})}),(0,Me.jsx)("div",{className:"headBx",children:"Duration"}),(0,Me.jsx)("div",{className:"listBx p0",children:(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","30 min or less"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","30 min - 1 Hour"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","1 - 2 Hours"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","2 - 3 Hours"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","3+ Hours"]})})]})}),(0,Me.jsx)("div",{className:"headBx",children:"Levels"}),(0,Me.jsx)("div",{className:"listBx p0",children:(0,Me.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Beginner"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Intermediate"]})}),(0,Me.jsx)("li",{className:"list-group-item",children:(0,Me.jsxs)("label",{className:"form-check-label",children:[(0,Me.jsx)("input",{className:"form-check-input",type:"checkbox",defaultValue:""})," ","Advanced"]})})]})})]})})]})})}),xm=e=>{let{item:t}=e;return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("div",{className:"lCItem",children:(0,Me.jsxs)("div",{className:"innerBx",children:[(0,Me.jsxs)("div",{className:"titelBx",children:[(0,Me.jsx)("i",{className:"fa fa-lightbulb-o"}),(0,Me.jsx)("h4",{children:t.title})]}),(0,Me.jsxs)("div",{className:"textCont",children:[(0,Me.jsx)("h5",{className:"mb-1 text16",children:(0,Me.jsx)("b",{children:t.title})}),(0,Me.jsx)("h6",{className:"mb-3 text14"}),(0,Me.jsx)("p",{children:(e=>{const t=e.split(" ");return t.length>20?t.slice(0,14).join(" ")+"...":e})(t.description)}),(0,Me.jsx)(Oe,{className:"btn btnTheme width100",to:"/lessons-courses-detail/".concat(t._id),style:{background:"var(--theme-color)"},children:"Start course"})]})]})})})})},Lm=()=>{const{lesson:e,getLesson:t,totalItem:n,listLoading:i}=Qr(),[o,s]=(0,r.useState)(1),[a,c]=(0,r.useState)(""),l=Math.ceil((null===n||void 0===n?void 0:n.Lessons)/8),u=Z(),d=new URLSearchParams(u.search).get("sub_category"),p={keyword_search:a,page:o,limit:8};return(0,r.useEffect)((()=>{(async()=>{await t(p,d)})()}),[a,o,d]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Lessons & Courses"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("a",{href:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)("a",{children:"Category"})}),(0,Me.jsx)("li",{className:"active",children:"Lessons & Courses"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)(km,{}),(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("div",{className:"row",children:i.Lessons?Array.from({length:4}).map(((e,t)=>(0,Me.jsx)(El,{col:6},t))):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(xm,{item:e},t)))}),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(yl,{spacing:2,children:(0,Me.jsx)(Qc,{count:l,page:o,onChange:(e,t)=>s(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Me.jsx)(ei,{})]})})})]})},Pm=()=>(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsxs)("div",{className:"lCItem",children:[(0,Me.jsx)("div",{className:"shadow3"}),(0,Me.jsx)("div",{className:"shadow2"}),(0,Me.jsx)("div",{className:"shadow1"}),(0,Me.jsxs)("div",{className:"innerBx",children:[(0,Me.jsxs)("div",{className:"titelBx",children:[(0,Me.jsx)("i",{className:"fa fa-lightbulb-o"}),(0,Me.jsx)("h4",{children:"Developing Scalable HubSpot Solutions"})]}),(0,Me.jsxs)("div",{className:"textCont",children:[(0,Me.jsx)("h5",{className:"mb-1 text16",children:(0,Me.jsx)("b",{children:"SHORT COURSE"})}),(0,Me.jsxs)("h6",{className:"mb-3 text14",children:["5 Lessons ",(0,Me.jsx)("span",{className:"theme-text",children:"3:00 hours"})]}),(0,Me.jsx)("p",{children:"In this course, you'll build the foundational skills needed to create scala..."}),(0,Me.jsx)(Oe,{className:"btn btnTheme width100",to:"/lessons-courses-detail",style:{background:"var(--theme-color)"},children:"Start course"})]})]})]})})}),jm=()=>{const{id:e}=ne(),{getLessonDetail:t,lessonDetail:n}=Qr(),[i,o]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{await t(e)})()}),[e]);const{description:s,title:a,attribute_values:c}=n.data||{},l=e=>{if(!Array.isArray(c))return null;const t=c.find((t=>t.attribute===e));if(t&&t.value){const e=parseInt(t.value);if(!isNaN(e))return e}return null},u=l("Lessons"),d=l("Videos"),p=l("Quizzes"),h=l("Hours"),f=Array.isArray(c)?c.filter((e=>e.value.startsWith("https://youtu.be"))):[],m=e=>{const t=e.split("/").pop().split("?")[0];return"https://www.youtube.com/embed/".concat(t)};return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/lesson_courses",children:"Lessons & Courses"})}),(0,Me.jsx)("li",{className:"active",children:a})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),n.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!n.isLoad&&(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsx)("h2",{className:"mb-3",children:a})}),(0,Me.jsx)("div",{className:"col-md-4",align:"right",children:(0,Me.jsxs)("div",{className:"col-md-4",align:"right",children:[(0,Me.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{o(!0)}}),(0,Me.jsx)(jf,{isOpen:i,onClose:()=>{o(!1)}})]})})]}),(0,Me.jsx)("hr",{className:"mt0"}),(0,Me.jsxs)("div",{className:"row mb-3",children:[(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("div",{className:"card freelanceDtls mb-3 ",style:{background:"#feffdb"},children:(0,Me.jsx)("div",{className:"card-body",children:(0,Me.jsxs)("ul",{children:[(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-file-text-o"}),(0,Me.jsx)("h6",{children:(0,Me.jsx)("b",{children:u||"Not Mentioned"})}),(0,Me.jsx)("p",{children:"Lessons"})]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-play"}),(0,Me.jsx)("h6",{children:(0,Me.jsx)("b",{children:d||"Not Mentioned"})}),(0,Me.jsx)("p",{children:"Videos"})]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-question"}),(0,Me.jsx)("h6",{children:(0,Me.jsx)("b",{children:p||"Not Mentioned"})}),(0,Me.jsx)("p",{children:"Quizzes"})]}),(0,Me.jsxs)("li",{children:[(0,Me.jsx)("i",{className:"fa fa-clock-o"}),(0,Me.jsx)("h6",{className:"text-success",children:(0,Me.jsx)("b",{children:h?"".concat(h," : 00"):"Not Mentioned"})}),(0,Me.jsx)("p",{children:"Hours"})]})]})})}),(0,Me.jsx)("div",{className:"card mb-3",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("h3",{className:"card-title",children:["Description for ",a]}),s,(0,Me.jsx)("hr",{})]})})]}),(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"card",children:(0,Me.jsx)("div",{className:"card-body",children:f.map(((e,t)=>(0,Me.jsx)("div",{className:"video-responsive",children:(0,Me.jsx)("iframe",{width:"100%",height:"100%",src:m(e.value),title:"YouTube video ".concat(t+1),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},t)))})})}),(0,Me.jsxs)("div",{className:"col-md-12",children:[(0,Me.jsx)("h5",{className:"mt-3",children:"Related Courses"}),(0,Me.jsx)("hr",{className:"mt0"}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)(Pm,{}),(0,Me.jsx)(Pm,{}),(0,Me.jsx)(Pm,{}),(0,Me.jsx)(Pm,{})]})]})]})]}),(0,Me.jsx)(ei,{})]})})})]})},Um=()=>{const{mypost:e,getMyPost:t,totalItem:n,myPostRemove:i,listLoading:o}=Qr(),[s,a]=(0,r.useState)(1),c=Math.ceil((null===n||void 0===n?void 0:n.post)/10),l={page:s,limit:10};(0,r.useEffect)((()=>{(async()=>{await t(l)})()}),[s]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"My Post"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"My Post"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)(xf,{})}),(0,Me.jsx)("div",{className:"col-md-7",children:(0,Me.jsx)("div",{className:"card border-0",children:(0,Me.jsxs)("div",{className:"card card-body border-0",children:[(0,Me.jsx)("h2",{className:"text24 mb-1",children:"My Post"}),(0,Me.jsx)("p",{className:"text-muted mb-1",children:"Here you can see your post and edit them easily."}),(0,Me.jsx)("hr",{className:"mt0"}),o.Post?Array.from({length:3}).map(((e,t)=>(0,Me.jsx)(bl,{},t))):Array.isArray(e)&&e.map((e=>(0,Me.jsx)("div",{className:"card mb-3 myPostItem",children:(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"imgBx",children:(0,Me.jsx)("img",{src:e.image,className:"img-fluid rounded-start",alt:"Dzital"})})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-9",children:(0,Me.jsx)("h5",{className:"card-title mb-1",children:e.title})}),(0,Me.jsx)("div",{className:"col-md-3",align:"right",children:(0,Me.jsx)("h5",{className:"m0",children:(0,Me.jsx)("b",{className:"badge bg-warning text-dark"})})})]}),(0,Me.jsxs)("p",{className:"card-text mb-0",children:[e.description,"..."," "]}),(0,Me.jsx)("hr",{className:"mb-2 mt-1"}),"Approved"===e.status?(0,Me.jsxs)(Oe,{className:"btn btn-success btn-sm",style:{marginRight:"3px"},children:[(0,Me.jsx)("i",{className:"fa fa-eye"})," Approved"]}):(0,Me.jsxs)(Oe,{className:"btn btn-secondary btn-sm mx-1",style:{marginRight:"3px"},children:[(0,Me.jsx)("i",{className:"fa-regular fa-eye-slash"})," ","Unapproved"]}),(0,Me.jsxs)(Oe,{to:"/updateProduct/".concat(e._id),className:"btn btn-dark btn-sm",children:[(0,Me.jsx)("i",{className:"fa-regular fa-pen-to-square "})," ","Edit"]}),(0,Me.jsxs)(Oe,{className:"btn btn-danger btn-sm mx-1",onClick:()=>i(e._id),children:[(0,Me.jsx)("i",{className:"fa-sharp fa-solid fa-trash"})," ","Delete"]})]})})]})},e._id))),Array.isArray(e)&&e.length>0?(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(yl,{spacing:2,children:(0,Me.jsx)(Qc,{count:c,page:s,onChange:(e,t)=>{a(t)},color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})}):""]})})}),(0,Me.jsx)(ei,{})]})})})]})},Fm=()=>{const{getMyPostListDetail:e,myPostDetail:t,updateMyPost:n}=Qr(),{id:i}=ne(),[o,s]=(0,r.useState)(""),[a,c]=(0,r.useState)(""),[l,u]=(0,r.useState)(""),[d,p]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[m,g]=(0,r.useState)([]),[v,y]=(0,r.useState)(!1),[E,_]=(0,r.useState)([]),[b,S]=(0,r.useState)({title:"",description:"",attribute_values:[],image:"",photo:"",image_1:"",image_2:"",image_3:""}),T=(e,t,n)=>{const{name:r,value:i,files:o}=e.target;if("attribute_value"===r){const e=[...b.attribute_values];e[t].value=i,S((t=>({...t,attribute_values:e})))}if(["photo","image","image_1","image_2","image_3"].includes(r)){const[t]=o;if(t){switch(r){case"photo":c(e.target.files[0]);break;case"image":s(e.target.files[0]);break;case"image_1":u(e.target.files[0]);break;case"image_2":p(e.target.files[0]);break;case"image_3":f(e.target.files[0])}S((e=>({...e,[r]:t}))),_((e=>({...e,[r]:URL.createObjectURL(t)})))}}else S((e=>({...e,[r]:i}))),g({...m,[n]:i})};(0,r.useEffect)((()=>{var e;if((null===(e=b.category_name)||void 0===e?void 0:e.length)>0){const e=b.category_name;null!==e&&void 0!==e&&e.includes("Jobs")||null!==e&&void 0!==e&&e.includes("Freelancer")||null!==e&&void 0!==e&&e.includes("Lessons & Courses")?y(!0):y(!1)}}));return(0,r.useEffect)((()=>{S({title:t.title,description:t.description,attribute_values:t.attribute_values,image:t.image,photo:t.photo,image_1:t.image_1,image_2:t.image_2,image_3:t.image_3})}),[t]),(0,r.useEffect)((()=>{e(i)}),[i]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"SELECTED CATEGORY"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{className:"active",to:"/my-post",children:"My Post"})}),(0,Me.jsx)("li",{className:"active",children:"Update Product"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"card",children:[(0,Me.jsx)("div",{className:"card card-header",children:(0,Me.jsx)("h5",{className:" text-center ",children:"Update Product"})}),(0,Me.jsx)("div",{className:"card card-body border-0",children:(0,Me.jsxs)("form",{onSubmit:e=>{e.preventDefault();const{title:t,description:r,photo:o,image:s,image_1:a,image_2:c,image_3:l}=b,u=new FormData;u.append("title",t),u.append("description",r),!1===v?(u.append("photo",o||""),u.append("image_1",a||""),u.append("image_2",c||""),u.append("image_3",l||"")):u.append("image",s||""),Object.entries(m).forEach(((e,t)=>{let[n,r]=e;u.append("attributeData[".concat(t,"][attribute_id]"),n),u.append("attributeData[".concat(t,"][value]"),r)})),n(i,u)},encType:"multipart/form-data",children:[(0,Me.jsxs)("div",{className:"mb20",style:{maxWidth:"500px"},children:[(0,Me.jsx)("h6",{children:"Title"}),(0,Me.jsx)("input",{type:"text",name:"title",id:"title",value:b.title,onChange:T,className:"form-control"})]}),(0,Me.jsxs)("div",{className:"mb20",children:[(0,Me.jsx)("h6",{children:"Description"}),(0,Me.jsx)("textarea",{type:"text",name:"description",id:"description",value:b.description,onChange:T,className:"form-control min-vh-40"})]}),(0,Me.jsx)("div",{className:"radioBx mb20",children:(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"row",children:Array.isArray(b.attribute_values)&&b.attribute_values.map(((e,t)=>(0,Me.jsxs)("div",{className:"col-md-6 mt30",children:[(0,Me.jsx)("label",{style:{fontWeight:"bold",fontSize:"1em"},children:e.attribute}),(0,Me.jsx)("input",{type:"text",name:"attribute_value",id:"attribute_value_".concat(t),value:e.value,onChange:n=>T(n,t,e.attribute_id),className:"form-control mt-2"})]},e._id)))})})}),!1===v?(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("h5",{className:"m0 text-center mt50",children:"UPLOAD UP TO 4 PHOTOS"}),(0,Me.jsxs)("div",{className:"row mt10",children:[(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"photo",id:"photo",style:{display:"none"},onChange:T}),(0,Me.jsx)("label",{htmlFor:"photo",children:(0,Me.jsx)("img",{src:E.photo||b.photo,height:70,width:100,alt:"photo"})})]})}),(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"image_1",id:"img1",style:{display:"none"},onChange:T}),(0,Me.jsx)("label",{htmlFor:"img1",children:(0,Me.jsx)("img",{height:70,width:100,src:E.image_1||b.image_1,alt:"Img_1"})})]})}),(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"image_2",id:"img2",onChange:T,style:{display:"none"}}),(0,Me.jsx)("label",{htmlFor:"img2",children:(0,Me.jsx)("img",{height:70,width:100,src:E.image_2||b.image_2,alt:"image_2"})})]})}),(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"image_3",id:"img3",style:{display:"none"},onChange:T}),(0,Me.jsx)("label",{htmlFor:"img3",children:(0,Me.jsx)("img",{height:70,width:100,src:E.image_3||b.image_3,alt:"image_3"})})]})})]})]}):(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("h5",{className:"m30 text-center",children:"UPLOAD file"}),(0,Me.jsx)("div",{className:"row justify-content-center ",children:(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"image",id:"img",onChange:T,style:{display:"none"},required:!0}),(0,Me.jsx)("label",{htmlFor:"img",children:(0,Me.jsx)("img",{height:70,width:100,src:E.image||b.image,alt:"photo"})})]})})})]}),(0,Me.jsx)(Ir,{type:"submit",className:"text text-white mt30 ",children:"Submit"})]})})]})}),(0,Me.jsx)(ei,{})]})})})]})},zm=()=>{const{ChnagePassword:e,userData:t}=Qr(),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[a,c]=(0,r.useState)(""),l=(e,t)=>{t(e.target.value)};return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(_s,{title:"change-password"}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)(xf,{})}),(0,Me.jsx)("div",{className:"col-md-7",children:(0,Me.jsx)("div",{className:"card border-0",children:(0,Me.jsxs)("div",{className:"card card-body border-0",children:[(0,Me.jsx)("h2",{className:"text24 mb5",children:"Password & Security"}),(0,Me.jsx)("p",{className:"text-muted",children:"Manage your password settings and secure your account."}),t.social_id?(0,Me.jsxs)("form",{onSubmit:t=>{t.preventDefault(),o===a?e(n,o):Es.error("New password and confirm password must be the same")},children:[(0,Me.jsxs)("div",{className:"row mb-4 mt40",children:[(0,Me.jsxs)("div",{className:"col-md-6 mt-4",children:[(0,Me.jsx)("label",{className:"mb-1",children:(0,Me.jsx)("b",{children:"Set Password"})}),(0,Me.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,s)})]}),(0,Me.jsxs)("div",{className:"col-md-6 mt-4",children:[(0,Me.jsx)("label",{className:"mb-1",children:(0,Me.jsx)("b",{children:"Confirm Password"})}),(0,Me.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,c)})]})]}),(0,Me.jsx)("button",{className:"btn btnTheme",type:"submit",style:{width:"fit-content",background:"var(--theme-color)"},children:"Update Password"})]}):(0,Me.jsxs)("form",{onSubmit:t=>{t.preventDefault(),o===a?e(n,o):Es.error("New password and confirm password must be the same")},children:[(0,Me.jsx)("div",{className:"row",children:(0,Me.jsxs)("div",{className:"col-md-6 mt-2",children:[(0,Me.jsx)("label",{className:"mb-1",children:(0,Me.jsx)("b",{children:"Current Password"})}),(0,Me.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,i)})]})}),(0,Me.jsxs)("div",{className:"row mb-4",children:[(0,Me.jsxs)("div",{className:"col-md-6 mt-4",children:[(0,Me.jsx)("label",{className:"mb-1",children:(0,Me.jsx)("b",{children:"New Password"})}),(0,Me.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,s)})]}),(0,Me.jsxs)("div",{className:"col-md-6 mt-4",children:[(0,Me.jsx)("label",{className:"mb-1",children:(0,Me.jsx)("b",{children:"Confirm Password"})}),(0,Me.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,c)})]})]}),(0,Me.jsx)("button",{className:"btn btnTheme",type:"submit",style:{width:"fit-content",background:"var(--theme-color)"},children:"Update Password"})]})]})})}),(0,Me.jsx)(ei,{})]})})})]})},Bm=()=>{const{serviceList:e,getSubServiceList:t,subServiceList:n,subServiceLoading:r}=Qr(),i=ee();return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Add Post"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Add Post"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"card",children:[(0,Me.jsx)("div",{className:"card card-header",children:(0,Me.jsx)("h5",{children:"CHOOSE A CATEGORY"})}),(0,Me.jsx)("div",{className:"card card-body border-0",style:{minHeight:"500px"},children:(0,Me.jsx)("div",{className:"postCategoryBx",children:Array.isArray(e)&&e.map(((e,o)=>(0,Me.jsxs)("div",{className:"dropend",children:[(0,Me.jsx)("button",{type:"button",className:"dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:()=>{return n=e._id,void t(n);var n},children:e.title}),(0,Me.jsx)("ul",{className:"dropdown-menu",style:{maxHeight:"250px"},children:(0,Me.jsx)(Me.Fragment,{children:r?(0,Me.jsx)("div",{className:"spinner-border text-primary text-center",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})}):(0,Me.jsx)(Me.Fragment,{children:Array.isArray(n)&&n.map((t=>(0,Me.jsx)("li",{children:(0,Me.jsx)(Ir,{className:"dropdown-item",onClick:()=>((e,t)=>{try{i("/add-title",{state:{servicecategories:e,subservicecat:t}})}catch(n){console.log(n)}})(e._id,t._id),children:null===t||void 0===t?void 0:t.title})},t._id)))})})})]},o)))})})]})}),(0,Me.jsx)(ei,{})]})})})]})};var Vm=__webpack_require__(2157),Hm=__webpack_require__.n(Vm);const Gm=()=>{const{wishList:e,wishListRemove:t,listLoading:n}=Qr(),[i,o]=(0,r.useState)(0),s=Math.ceil(e.length/1);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Wishlist"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Wishlist"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)(xf,{})}),(0,Me.jsx)("div",{className:"col-md-7",children:(0,Me.jsxs)("div",{className:"card border-0",children:[(0,Me.jsxs)("div",{className:"card card-body border-0",children:[(0,Me.jsx)("h2",{className:"text24 mb-1",children:"Wishlist"}),(0,Me.jsx)("p",{className:"text-muted mb-1",children:"Here you can see your wishlist item."}),(0,Me.jsx)("hr",{className:"mt0"}),n.WishList?Array.from({length:3}).map(((e,t)=>(0,Me.jsx)(bl,{},t))):Array.isArray(e)&&e.map(((e,n)=>(0,Me.jsx)("div",{className:"card mb-3 myPostItem",children:(0,Me.jsxs)("div",{className:"row g-0",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)("img",{src:e.image,className:"img-fluid rounded-start",alt:e.title}),(0,Me.jsx)(Oe,{className:"wishIcon",children:(0,Me.jsx)("i",{className:"fa-solid fa-heart"})})]})}),(0,Me.jsx)("div",{className:"col-md-8",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("div",{className:"row",children:(0,Me.jsx)("div",{className:"col-md-9",children:(0,Me.jsx)("h5",{className:"card-title mb-1",children:e.title})})}),(0,Me.jsx)("p",{className:"card-text mb-0",children:e.description}),(0,Me.jsx)("hr",{className:"mb-2 mt-1"}),(0,Me.jsxs)(Oe,{className:"btn btn-danger btn-sm",onClick:()=>{return n=e._id,void t(n);var n},children:[(0,Me.jsx)("i",{className:"fa-sharp fa-solid fa-trash"}),"Delete Wishlist"]})]})})]})},n)))]}),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(Hm(),{breakLabel:"...",previousLabel:"Previous",nextLabel:"Next",pageCount:s,onPageChange:e=>{let{selected:t}=e;o(t)},containerClassName:"pagination",activeClassName:"active",renderOnZeroPageCount:null})})]})}),(0,Me.jsx)(ei,{})]})})})]})},Wm=()=>{const{getUserplan:e,packagesList:t}=Qr(),[n,i]=(0,r.useState)(0),[o,s]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{s(!0);try{await e()}catch(t){console.error("Error fetching data:",t)}finally{s(!1)}})()}),[]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(_s,{title:"packages"}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsx)(xf,{})}),(0,Me.jsx)("div",{className:"col-md-7",children:(0,Me.jsx)("div",{className:"card border-0",children:(0,Me.jsxs)("div",{className:"card card-body border-0",children:[(0,Me.jsx)("h2",{className:"titleText pb-2",children:"Upgrade your membership to premium"}),!1===o?(0,Me.jsx)("div",{className:"priceTabBx",children:(0,Me.jsxs)("div",{className:"innerBx",children:[(0,Me.jsx)("div",{className:"nav flex-column nav-pills col-md-4",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:Array.isArray(t)&&t.map(((e,t)=>(0,Me.jsxs)("button",{className:"nav-link ".concat(t===n?"active":""),id:"".concat(e.title,"-tab"),onClick:()=>i(t),children:[(0,Me.jsx)("b",{children:e.title}),(0,Me.jsx)("br",{}),(0,Me.jsxs)("small",{children:[e.no_of_months," Months' Access from Date Of Upgrade"]})]},t)))}),(0,Me.jsx)("div",{className:"tab-content col-md-8",id:"v-pills-tabContent",children:Array.isArray(t)&&t.map(((e,t)=>(0,Me.jsxs)("div",{className:"tab-pane fade ".concat(t===n?"show active":""),id:"".concat(e.title),role:"tabpanel","aria-labelledby":"".concat(e.title,"-tab"),children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-9",children:[(0,Me.jsx)("h2",{children:e.title}),(0,Me.jsxs)("p",{className:"text-muted m0",children:[(0,Me.jsxs)("b",{children:[e.no_of_months," Months' Access from Date Of Upgrade"]}),(0,Me.jsx)("br",{}),"You thrive on interactive learning and personalised feedback from Link teacher."," "]})]}),(0,Me.jsx)("div",{className:"col-md-3",children:(0,Me.jsxs)("h1",{className:"theme-text",children:["\u20ac",e.amount]})})]}),(0,Me.jsx)("hr",{className:"mt-2 mb-2"}),(0,Me.jsx)("ul",{children:Array.isArray(e.benefit)&&e.benefit.map(((e,t)=>(0,Me.jsx)("li",{children:e},t)))}),"Free Plan"===e.title?"":(0,Me.jsx)(Oe,{className:"btn btnTheme",style:{background:"var(--theme-color)"},children:(0,Me.jsx)("b",{children:"Upgrade Packages"})})]},t)))})]})}):(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status"})})]})})}),(0,Me.jsx)(ei,{})]})})})]})},Ym=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),2e3),t(!1)})()}),[]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Contact Us"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Contact Us"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),!1===e?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-sm-6",children:(0,Me.jsxs)("div",{className:"card",children:[(0,Me.jsx)("div",{className:"card-header",children:(0,Me.jsx)("h4",{className:"m0",children:"Get in touch with us"})}),(0,Me.jsxs)("form",{className:"card-body",children:[(0,Me.jsx)("div",{className:"form-group mb-4",children:(0,Me.jsx)("input",{type:"text",className:"form-control",id:"name",name:"nm",placeholder:"Name",required:"",autoFocus:""})}),(0,Me.jsx)("div",{className:"form-group form_left mb-4",children:(0,Me.jsx)("input",{type:"email",className:"form-control",id:"email",name:"em",placeholder:"Email",required:""})}),(0,Me.jsx)("div",{className:"form-group mb-4",children:(0,Me.jsx)("input",{type:"text",className:"form-control",id:"phone",maxLength:10,placeholder:"Mobile No.",required:""})}),(0,Me.jsxs)("div",{className:"form-group mb-4",children:[(0,Me.jsx)("textarea",{className:"form-control textarea-contact",rows:5,id:"comment",name:"FB",placeholder:"Type Your Message/Feedback here...",required:"",defaultValue:""}),(0,Me.jsx)("br",{}),(0,Me.jsxs)("button",{className:"btn btnTheme",type:"submit",style:{background:"var(--theme-color)"},children:[" ","Submit Message ",(0,Me.jsx)("span",{className:"fa fa-send"})," "]})]})]})]})}),(0,Me.jsx)("div",{className:"col-sm-6",children:(0,Me.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d5071.152286297458!2d7.677349994282403!3d50.542054854758454!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47be85ab5e065037%3A0x2116fb58113383e5!2s56269%20Dierdorf-Br%C3%BCckrachdorf%2C%20Germany!5e0!3m2!1sen!2sin!4v1702715002839!5m2!1sen!2sin",width:"100%",height:480,style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"addIfoBx",children:(0,Me.jsx)("div",{className:"card mt-3",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("i",{className:"fa fa-envelope mb-3"}),(0,Me.jsx)("h5",{className:"card-title",children:"Email Id"}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("a",{to:"mailto:support@dzital.de",children:"ak@dzital.com"})})]})})})}),(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"addIfoBx",children:(0,Me.jsx)("div",{className:"card mt-3",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("i",{className:"fa fa-phone mb-3"}),(0,Me.jsx)("h5",{className:"card-title",children:"Phone No."}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("a",{to:"tel:+4901728250794",children:"+4901728250794"})})]})})})}),(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("div",{className:"addIfoBx",children:(0,Me.jsx)("div",{className:"card mt-3",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("i",{className:"fa fa-location-dot mb-3"}),(0,Me.jsx)("h5",{className:"card-title",children:"Office Address"}),(0,Me.jsx)("p",{className:"card-text",children:"P\xf6seldorfer Weg 13, 20148 Hamburg"})]})})})})]})]}),(0,Me.jsx)(ei,{})]})})})]})},qm=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),2e3),t(!1)})()}),[]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Privacy Policy"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Privacy Policy"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),!1===e?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h3",{children:"Privacy Policy"}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),(0,Me.jsx)(ei,{})]})})})]})},Km=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),1500),t(!1)})()}),[]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Terms & Conditions"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Terms & Conditions"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),!1===e?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h3",{children:"Terms & Conditions"}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),(0,Me.jsx)(ei,{})]})})})]})},Qm=e=>{let{item:t}=e;const[n,i]=(0,r.useState)(!1),{wishListAdd:o,getWishList:s}=Qr();return(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsx)("div",{className:"col col-lg-4 proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",style:{height:"350px"},children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{to:"/Electronics-detail/".concat(t._id),children:(0,Me.jsx)("img",{src:t.photo,className:"card-img-top allImg",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>{return e=t.product_id,o(e),void i(!0);var e},children:(0,Me.jsx)("i",{className:!0===n?"fa fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)(Oe,{to:"/Electronics-detail/".concat(t._id),children:t.title})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsxs)("small",{className:"text-body-secondary",children:[t.description.slice(0,50),"..."]})})]})]})})})},Jm=()=>{const{electronicsList:e,totalItem:t,getElectronicsProduct:n,listLoading:i}=Qr(),[o,s]=(0,r.useState)(1),[a,c]=(0,r.useState)(""),l=Math.ceil((null===t||void 0===t?void 0:t.Electronics)/12),u=Z(),d=new URLSearchParams(u.search).get("sub_category"),p={keyword_search:a,page:o,limit:12};return(0,r.useEffect)((()=>{(async()=>{await n(p,d)})()}),[a,o,d]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(_s,{title:"Electronics"}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-2",children:(0,Me.jsx)(bs,{})}),(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("div",{className:"row ",children:i.Electronics?Array.from({length:6}).map(((e,t)=>(0,Me.jsx)(_l,{col:4},t))):Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsx)(Qm,{item:e},t)))}),(0,Me.jsx)("div",{align:"center",children:(0,Me.jsx)(yl,{spacing:2,children:(0,Me.jsx)(Qc,{count:l,page:o,onChange:(e,t)=>s(t),color:"primary",variant:"outlined",shape:"rounded",siblingCount:0,boundaryCount:0})})})]}),(0,Me.jsx)(ei,{})]})})})]})},Xm=()=>{const{id:e}=ne(),[t,n]=(0,r.useState)(!1),{getElectronicsProductDetails:i,electronicsItems:o,wishListAdd:s}=Qr(),[a,c]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{await i(e)})()}),[e]);const l=e=>{s(e),n(!0)},{description:u,image_1:d,image_2:p,image_3:h,photo:f,product_id:m,title:g,attribute_values:v,_id:y}=o.data||{},E=[f,d,p,h],_=e=>{if(!Array.isArray(v))return null;const t=v.find((t=>t.attribute===e));return t?t.value:null},b=_("Price"),S=_("Brand");return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/electronics",children:"Electronics"})}),(0,Me.jsx)("li",{className:"active",children:g})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),o.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!o.isLoad&&(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsx)("div",{className:"card",children:(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-5",children:(0,Me.jsx)("div",{className:"swiper mainBannerSwiper",children:(0,Me.jsx)(So,{loop:!0,navigation:!0,modules:[Io],className:"mySwiper",children:Array.isArray(E)&&E.map(((e,t)=>(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide",children:(0,Me.jsx)("img",{src:e,alt:""})})},t)))})})}),(0,Me.jsxs)("div",{className:"col-md-7",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Me.jsx)("h2",{children:S||""})}),(0,Me.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Me.jsx)("h3",{children:(0,Me.jsx)("h4",{className:"text-muted",children:g})})}),(0,Me.jsxs)("div",{className:"col-md-2 flex col-sm-12",align:"right",children:[(0,Me.jsxs)("div",{className:"cursor-pointer",children:[(0,Me.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{c(!0)}}),(0,Me.jsx)(jf,{isOpen:a,onClose:()=>{c(!1)}})]}),"\xa0",(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>l(m),children:(0,Me.jsx)("i",{className:!0===t?"fa fa-heart":"fa fa-heart-o"})})]})]}),(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-5 col-sm-12",children:[(0,Me.jsx)("h5",{className:"text-success",children:"Special price"}),(0,Me.jsx)("h5",{children:(0,Me.jsxs)("span",{className:"text28",children:[(0,Me.jsx)("i",{className:"fa fa-inr",children:" "})," ",b||"Not Disclosed"]})})]}),(0,Me.jsx)(Pf,{})]})]})]}),(0,Me.jsx)("h5",{children:"Product Description"}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("p",{children:u}),Array.isArray(v)&&v.map((e=>(0,Me.jsxs)("p",{children:[(0,Me.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]},y)}),(0,Me.jsx)("h4",{className:"mt20",children:"Related Products"}),(0,Me.jsx)("hr",{className:"mt0"}),(0,Me.jsx)("div",{className:"swiper productSlider",children:(0,Me.jsxs)(So,{loop:!0,slidesPerView:5,spaceBetween:20,keyboard:{enabled:!0},autoplay:{delay:3e3},breakpoints:{320:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:3,spaceBetween:15},768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:5,spaceBetween:15}},navigation:!0,modules:[Io],className:"mySwiper",children:[(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{to:"/Electronics/".concat(y),children:(0,Me.jsx)("img",{src:f,className:"card-img-top",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>l(m),children:(0,Me.jsx)("i",{className:!0===t?"fa fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)("a",{children:"KTM Bikes: E-Bikes and Bikes"})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Waiblingen"})})]})]})})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{to:"/Electronics/".concat(y),children:(0,Me.jsx)("img",{src:f,className:"card-img-top",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>l(m),children:(0,Me.jsx)("i",{className:!0===t?"fa fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)("a",{children:"KTM Bikes: E-Bikes and Bikes"})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Waiblingen"})})]})]})})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide proBx",children:(0,Me.jsxs)("div",{className:"card mb-3",children:[(0,Me.jsxs)("div",{className:"imgBx",children:[(0,Me.jsx)(Oe,{to:"/Electronics/".concat(y),children:(0,Me.jsx)("img",{src:f,className:"card-img-top",alt:""})}),(0,Me.jsx)(Oe,{className:"iconWish",onClick:()=>l(m),children:(0,Me.jsx)("i",{className:!0===t?"fa fa-heart":"fa fa-heart-o"})})]}),(0,Me.jsxs)("div",{className:"card-body",children:[(0,Me.jsx)("h5",{className:"card-title",children:(0,Me.jsx)("a",{children:"KTM Bikes: E-Bikes and Bikes"})}),(0,Me.jsx)("p",{className:"card-text",children:(0,Me.jsx)("small",{className:"text-body-secondary",children:"Waiblingen"})})]})]})})})]})})]}),(0,Me.jsx)(ei,{})]})})})]})},Zm=()=>(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("div",{className:"d-flex justify-content-center item-center",style:{position:"absolute",textAlign:"center",top:"35%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,Me.jsxs)("p",{style:{color:"#77ced9",fontSize:"60px",fontWeight:"bold"},children:[(0,Me.jsx)("img",{src:"assets/images/g-logo.png",alt:"Dzital",style:{width:"50px",height:"50px",marginBottom:"10px"}}),"zital"]})}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("svg",{style:{left:"50%",top:"50%",position:"absolute",transform:"translate(-50%, -50%) matrix(1, 0, 0, 1, 0, 0)"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 187.3 93.7",height:"300px",width:"400px",children:[(0,Me.jsx)("path",{d:"M93.9,46.4c9.3,9.5,13.8,17.9,23.5,17.9s17.5-7.8,17.5-17.5s-7.8-17.6-17.5-17.5c-9.7,0.1-13.3,7.2-22.1,17.1 \t\t\t\tc-8.9,8.8-15.7,17.9-25.4,17.9s-17.5-7.8-17.5-17.5s7.8-17.5,17.5-17.5S86.2,38.6,93.9,46.4z",strokeMiterlimit:10,strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:4,fill:"none",id:"outline",stroke:"#77ced9"}),(0,Me.jsx)("path",{d:"M93.9,46.4c9.3,9.5,13.8,17.9,23.5,17.9s17.5-7.8,17.5-17.5s-7.8-17.6-17.5-17.5c-9.7,0.1-13.3,7.2-22.1,17.1 \t\t\t\tc-8.9,8.8-15.7,17.9-25.4,17.9s-17.5-7.8-17.5-17.5s7.8-17.5,17.5-17.5S86.2,38.6,93.9,46.4z",strokeMiterlimit:10,strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:4,stroke:"#4E4FEB",fill:"none",opacity:"0.05",id:"outline-bg"})]})]}),$m=e=>{let{img:t}=e;return(0,Me.jsx)(Hf.FN,{infiniteLoop:!0,children:Array.isArray(t)&&t.map(((e,t)=>(0,Me.jsx)("div",{className:"swiper-slide",children:(0,Me.jsx)("img",{src:e,alt:""})},t)))})},eg=()=>{const{id:e}=ne(),[t,n]=(0,r.useState)(!1),{getFashionBeautyDetails:i,fashionDetail:o,wishListAdd:s}=Qr(),[a,c]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{await i(e)})()}),[e]);const{description:l,attribute_values:u,image_1:d,image_2:p,image_3:h,photo:f,product_id:m,title:g}=o.data||{},v=[f,d,p,h],y=e=>{if(!Array.isArray(u))return null;const t=u.find((t=>t.attribute===e));return t?t.value:null},E=y("Price"),_=y("Brand");return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/fashion_beauty",children:"Fashion & Beauty"})}),(0,Me.jsx)("li",{className:"active",children:g})]})})]})})}),(0,Me.jsx)("section",{className:"midBody bgtheme",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),o.isLoad&&(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!o.isLoad&&(0,Me.jsxs)("div",{className:"col-md-10",children:[(0,Me.jsx)("div",{className:"card",children:(0,Me.jsx)("div",{className:"card-body",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-5",children:(0,Me.jsx)("div",{className:"sticky-top",children:(0,Me.jsx)($m,{img:v})})}),(0,Me.jsxs)("div",{className:"col-md-7",children:[(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Me.jsx)("h3",{children:_||""})}),(0,Me.jsxs)("div",{className:"col-md-2 col-sm-12",align:"right",children:[(0,Me.jsx)(Oe,{className:"wishList",onClick:()=>(e=>{s(e),n(!0)})(m),children:(0,Me.jsx)("i",{className:!0===t?"fa fa-heart":"fa fa-heart-o"})}),(0,Me.jsxs)("div",{className:"iconWish",children:[(0,Me.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{c(!0)}}),(0,Me.jsx)(jf,{isOpen:a,onClose:()=>{c(!1)}})]})]}),(0,Me.jsx)("h4",{className:"text-muted",children:g}),(0,Me.jsx)("h5",{className:"text-success",children:"Special price"}),(0,Me.jsx)("h5",{children:(0,Me.jsxs)("span",{className:"text28",children:[(0,Me.jsx)("i",{className:"fa fa-inr",children:" "})," ",E||"Not Disclosed"]})})]}),(0,Me.jsx)("div",{className:"row",children:(0,Me.jsx)(Pf,{item:o})}),(0,Me.jsx)("h4",{className:"mt-3",children:"product description"}),(0,Me.jsx)("p",{align:"justify",children:l}),(0,Me.jsx)("hr",{}),Array.isArray(u)&&u.map((e=>(0,Me.jsxs)("p",{children:[(0,Me.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]})]})})}),(0,Me.jsx)("h4",{className:"mt20",children:"Related Products"}),(0,Me.jsx)("hr",{className:"mt0"}),(0,Me.jsx)("div",{className:"swiper productSlider",children:(0,Me.jsxs)(So,{loop:!0,navigation:!0,modules:[Io],className:"mySwiper",children:[(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide"})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide"})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide"})}),(0,Me.jsx)(To,{children:(0,Me.jsx)("div",{className:"swiper-slide"})})]})})]}),(0,Me.jsx)(ei,{})]})})})]})},tg=()=>{const{faq:e,getFaq:t}=Qr(),[n,i]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{i(!0),await t(),i(!1)})()}),[]),(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"FAQ"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"FAQ"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-1 adBx",children:(0,Me.jsx)("div",{className:"sticky-top",children:(0,Me.jsx)("img",{src:"assets/images/Ad.jpg",alt:""})})}),!0===n?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-md-8",children:[(0,Me.jsx)("h3",{className:"mb-3 text-center",children:"Frequently Asked Questions"}),(0,Me.jsx)("div",{className:"accordion mt50",id:"accordionExample",children:Array.isArray(e)&&e.map(((e,t)=>(0,Me.jsxs)("div",{className:"accordion-item",children:[(0,Me.jsx)("h2",{className:"accordion-header",children:(0,Me.jsx)("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#accordionItem".concat(t),"aria-expanded":0===t?"true":"false","aria-controls":"accordionItem".concat(t),children:e.question})}),(0,Me.jsx)("div",{id:"accordionItem".concat(t),className:"accordion-collapse collapse ".concat(0===t?"show":""),"aria-labelledby":"accordionItem".concat(t),"data-bs-parent":"#accordionExample",children:(0,Me.jsx)("div",{className:"accordion-body",children:(0,Me.jsxs)("p",{align:"justify",children:[" ",null===e||void 0===e?void 0:e.answer," "]})})})]},e._id)))})]}),(0,Me.jsx)("div",{className:"col-md-4",children:(0,Me.jsx)("img",{src:"./assets/images/job-search.jpg",width:"100%",alt:""})})]})}),(0,Me.jsx)("div",{className:"col-md-1 adBx mt50",children:(0,Me.jsx)("div",{className:"sticky-top",children:(0,Me.jsx)("img",{src:"assets/images/Ad.jpg",alt:""})})})]})})})]})};const ng=function(){const{pathname:e}=Z();return(0,r.useEffect)((()=>{window.scrollTo(0,0)}),[e]),null};var rg,ig=__webpack_require__(1635),og=__webpack_require__.n(ig);!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"}(rg||(rg={}));var sg=function(e){var t;return function(){return t||(t=og().createClient(e)),t}};function ag(t,n){var i=null;return function(){var o=(0,r.useState)(!1),s=o[0],a=o[1],c=(0,r.useState)(null),l=c[0],u=c[1],d=(0,r.useRef)(i);return(0,r.useEffect)((function(){return null===d.current?function(){try{return Promise.resolve(og().createMicrophoneAndCameraTracks(t,n)).then((function(e){return i=e}))}catch(e){return Promise.reject(e)}}().then((function(e){d.current=e,a(!0)}),(function(e){u(e)})):a(!0),function(){i=null}}),[]),{ready:s,tracks:d.current,error:l}}}var cg=function(e){var t=(0,r.useRef)(null),n=e.videoTrack,i=e.config,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["videoTrack","config"]);return(0,r.useLayoutEffect)((function(){return null!==t.current&&n.play(t.current,i),function(){n.stop()}}),[n]),r.createElement("div",Object.assign({},o,{ref:t}))};const lg={mode:"rtc",codec:"vp8"};const ug=function(){return[sg(lg),ag()]};var dg=!1;function pg(e,t){var n=t;return n.unshift(void 0),new(Function.prototype.bind.apply(e,n))}function hg(e){var t,n=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(n);var r="ej2"+function(e){for(var t="",n=0;n<5;n++)t+=(n?",":"")+e[parseInt(n.toString(),10)];return t}(n),i=function(n){n.source===window&&"string"===typeof n.data&&n.data.length<=32&&n.data===r&&(e(),t())};return window.addEventListener("message",i,!1),window.postMessage(r,"*"),t=function(){window.removeEventListener("message",i),e=i=r=void 0}}function fg(e,t){for(var n=t,r=e.replace(/\[/g,".").replace(/\]/g,"").split("."),i=0;i<r.length&&!bg(n);i++)n=n[r[parseInt(i.toString(),10)]];return n}function mg(e,t,n){var r,i,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),s=n||{},a=s,c=o.length;for(r=0;r<c;r++)i=o[parseInt(r.toString(),10)],r+1===c?a[""+i]=void 0===t?{}:t:_g(a[""+i])&&(a[""+i]={}),a=a[""+i];return s}var gg="undefined"!==typeof window?window:{};function vg(e){return!_g(e)&&e.constructor==={}.constructor}function yg(e,t){if(!_g(t))for(var n=e,r=t,i="deepMerge",o=0,s=Object.keys(t);o<s.length;o++){var a=s[o];_g(n[""+i])||-1===n[""+i].indexOf(a)||!vg(r[""+a])&&!Array.isArray(r[""+a])?n[""+a]=r[""+a]:Eg(n[""+a],n[""+a],r[""+a],!0)}}function Eg(e,t,n,r){var i=e&&"object"===typeof e?e:{},o=arguments.length;r&&(o-=1);for(var s=function(e){if(!a[e])return"continue";var t=a[e];Object.keys(t).forEach((function(e){var n,o=i[""+e],s=t[""+e],a=Array.isArray(s)&&Array.isArray(o)&&s.length!==o.length,c=!Ng()||!(o instanceof Event)&&!a;r&&c&&(vg(s)||Array.isArray(s))?vg(s)?(n=o||{},Array.isArray(n)&&n.hasOwnProperty("isComplexArray")?Eg(n,{},s,r):i[""+e]=Eg(n,{},s,r)):(n=Ng()?o&&Object.keys(s).length:o||[],i[""+e]=Eg([],n,s,n&&n.length||s&&s.length)):i[""+e]=s}))},a=arguments,c=1;c<o;c++)s(c);return i}function _g(e){return void 0===e||null===e}function bg(e){return"undefined"===typeof e}function Sg(e,t){return e===t||!(e===document||!e)&&Sg(e.parentNode,t)}function Tg(t){try{throw new Error(t)}catch(e){throw e.message+"\n"+e.stack}}function Ig(e){var t=e+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"}function Ng(){return dg}var wg,Cg={latn:{_digits:"0123456789",_type:"numeric"}},Og={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},Ag=[0,1,2,3,4,5,6,7,8,9],Rg=function(){function e(){}return e.getMainObject=function(e,t){return fg(Ng()?t:"main."+t,e)},e.getNumberingSystem=function(e){return fg("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var n={},r=0,i=t||Object.keys(e);r<i.length;r++){var o=i[r];n.hasOwnProperty(e[o])||(n[e[o]]=o)}return n},e.getSymbolRegex=function(e){var t=e.map((function(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")})).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},n=0,r=Object.keys(Og);n<r.length;n++){var i=r[n];t[e[i]]=Og[i]}return t},e.constructRegex=function(e){for(var t=e.length,n="",r=0;r<t;r++)n+=r!==t-1?e[parseInt(r.toString(),10)]+"|":e[parseInt(r.toString(),10)];return n},e.convertValueParts=function(e,t,n){return e.replace(t,(function(e){return n[e]}))},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=fg("numbers",e),t.nSystem=fg("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,n,r){var i={},o=this.getDefaultNumberingSystem(e);if(!bg(o.nSystem)||r){var s=r?fg("obj.mapperDigits",o):fg(o.nSystem+"._digits",t);bg(s)||(i.numericPair=this.reverseObject(s,Ag),i.numberParseRegex=new RegExp(this.constructRegex(s),"g"),i.numericRegex="["+s[0]+"-"+s[9]+"]",n&&(i.numericRegex=s[0]+"-"+s[9],i.symbolNumberSystem=fg(r?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),i.symbolMatch=this.getSymbolMatch(i.symbolNumberSystem),i.numberSystem=o.nSystem))}return i},e.getNumberMapper=function(e,t,n){var r={mapper:{}},i=this.getDefaultNumberingSystem(e);if(!bg(i.nSystem)){r.numberSystem=i.nSystem,r.numberSymbols=fg("symbols-numberSystem-"+i.nSystem,i.obj),r.timeSeparator=fg("timeSeparator",r.numberSymbols);var o=fg(i.nSystem+"._digits",t);if(!bg(o))for(var s=0,a=Ag;s<a.length;s++){var c=a[s];r.mapper[c]=o[c]}}return r},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=Cg,e}(),Mg={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};!function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var n=e.getDate(),r=e.getMonth(),i=e.getFullYear(),o=r+1,s=i;o<3&&(s-=1,o+=12);var a=Math.floor(s/100),c=a-Math.floor(a/4)-2,l=Math.floor(365.25*(s+4716))+Math.floor(30.6001*(o+1))+n-c-1524,u=l+(c=(a=Math.floor((l-1867216.25)/36524.25))-Math.floor(a/4)+1)+1524,d=Math.floor((u-122.1)/365.25),p=Math.floor(365.25*d),h=Math.floor((u-p)/30.6001);n=u-p-Math.floor(30.6001*h),(r=Math.floor((u-p)/20.6001))>13&&(d+=1,r-=12),r-=1,i=d-4716;var f=l-24e5,m=10631/30,g=l-1948084,v=Math.floor(g/10631);g-=10631*v;var y=Math.floor((g-.1335)/m),E=30*v+y;g-=Math.floor(y*m+.1335);var _=Math.floor((g+28.5001)/29.5);13===_&&(_=12);for(var b=g-Math.floor(29.5001*_-29),S=0;S<t.length&&!(t[parseInt(S.toString(),10)]>f);S++);var T=S+16260,I=Math.floor((T-1)/12),N=I+1,w=T-12*I,C=f-t[S-1]+1;return(C+"").length>2&&(C=b,w=_,N=E),{year:N,month:w,date:C}},e.toGregorian=function(e,n,r){var i=r+t[12*(e-1)+1+(n-1)-16260-1]-1+24e5,o=Math.floor(i+.5),s=Math.floor((o-1867216.25)/36524.25),a=(s=o+1+s-Math.floor(s/4))+1524,c=Math.floor((a-122.1)/365.25),l=Math.floor(365.25*c),u=Math.floor((a-l)/30.6001),d=a-l-Math.floor(30.6001*u),p=u-(u>13.5?13:1),h=c-(p>2.5?4716:4715);return h<=0&&p--,new Date(h+"/"+p+"/"+d)}}(wg||(wg={}));var Dg=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,kg="stand-alone",xg=["sun","mon","tue","wed","thu","fri","sat"],Lg={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},Pg={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},jg=function(){function e(){}return e.dateFormat=function(e,t,n){var r=this,i=tv.getDependables(n,e,t.calendar),o=fg("parserObject.numbers",i),s=i.dateObject,a={isIslamic:tv.islamicRegex.test(t.calendar)};Ng()&&t.isServerRendered&&(t=tv.compareBlazorDateFormats(t,e));var c=t.format||tv.getResultantPattern(t.skeleton,i.dateObject,t.type,!1,Ng()?e:"");if(a.dateSeperator=Ng()?fg("dateSeperator",s):tv.getDateSeparator(i.dateObject),bg(c))Tg("Format options or type given must be invalid");else{c=tv.ConvertDateToWeekFormat(c),Ng()&&(c=c.replace(/tt/,"a")),a.pattern=c,a.numMapper=Ng()?Eg({},o):Rg.getNumberMapper(i.parserObject,Rg.getNumberingSystem(n));for(var l=0,u=c.match(Dg)||[];l<u.length;l++){var d=u[l],p=d.length,h=d[0];switch("K"===h&&(h="h"),h){case"E":case"c":Ng()?a.weekday=fg("days."+tv.monthIndex[p],s):a.weekday=i.dateObject[tv.days][kg][tv.monthIndex[p]];break;case"M":case"L":Ng()?a.month=fg("months."+tv.monthIndex[p],s):a.month=i.dateObject[tv.month][kg][tv.monthIndex[p]];break;case"a":a.designator=Ng()?fg("dayPeriods",s):fg("dayPeriods.format.wide",s);break;case"G":var f=p<=3?"eraAbbr":4===p?"eraNames":"eraNarrow";a.era=Ng()?fg("eras",s):fg("eras."+f,i.dateObject);break;case"z":a.timeZone=fg("dates.timeZoneNames",i.parserObject)}}}return function(e){return isNaN(e.getDate())?null:r.intDateFormatter(e,a)}},e.intDateFormatter=function(e,t){for(var n="",r=t.pattern.match(tv.dateParseRegex),i=this.getCurrentDateValue(e,t.isIslamic),o=0,s=r;o<s.length;o++){var a=s[o],c=a.length,l=a[0];"K"===l&&(l="h");var u=void 0,d="",p=void 0,h=void 0,f="";switch(l){case"M":case"L":u=i.month,c>2?n+=t.month[u]:p=!0;break;case"E":case"c":n+=t.weekday[xg[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(p=!0,"d"===l)u=i.date;else if("f"===l){p=!1,h=!0;var m=(d=(d=e[Lg[l]]().toString()).substring(0,c)).length;if(c!==m){if(c>3)continue;for(var g=0;g<c-m;g++)d="0"+d.toString()}f+=d}else u=e[Lg[l]]();"h"===l&&(u=u%12||12);break;case"y":h=!0,f+=i.year,2===c&&(f=f.substr(f.length-2));break;case"a":var v=e.getHours()<12?"am":"pm";n+=t.designator[v];break;case"G":var y=e.getFullYear()<0?0:1,E=t.era[y];_g(E)&&(E=t.era[y?0:1]),n+=E||"";break;case"'":n+="''"===a?"'":a.replace(/'/g,"");break;case"z":var _=e.getTimezoneOffset(),b=c<4?"+H;-H":t.timeZone.hourFormat;b=b.replace(/:/g,t.numMapper.timeSeparator),0===_?n+=t.timeZone.gmtZeroFormat:(h=!0,f=this.getTimeZoneValue(_,b)),f=t.timeZone.gmtFormat.replace(/\{0\}/,f);break;case":":n+=t.numMapper.numberSymbols.timeSeparator;break;case"/":n+=t.dateSeperator;break;case"W":p=!0,u=tv.getWeekOfYear(e);break;default:n+=a}p&&(h=!0,f=this.checkTwodigitNumber(u,c)),h&&(n+=Rg.convertValueParts(f,tv.latnParseRegex,t.numMapper.mapper))}return n},e.getCurrentDateValue=function(e,t){return t?wg.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var n=e+"";return 2===t&&2!==n.length?"0"+n:n},e.getTimeZoneValue=function(e,t){var n=this,r=t.split(";")[e>0?1:0],i=Math.abs(e);return r.replace(/HH?|mm/g,(function(e){var t=e.length,r=-1!==e.indexOf("H");return n.checkTwodigitNumber(Math.floor(r?i/60:i%60),t)}))},e}(),Ug={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},Fg=["infinity","nan","group","decimal","exponential"],zg=function(){function e(){}return e.numberFormatter=function(e,t,n){var r,i=this,o=Eg({},t),s={},a={},c=tv.getDependables(n,e,"",!0),l=c.numericObject;a.numberMapper=Ng()?Eg({},l):Rg.getNumberMapper(c.parserObject,Rg.getNumberingSystem(n),!0),a.currencySymbol=Ng()?fg("currencySymbol",l):tv.getCurrencySymbol(c.numericObject,o.currency||ev,t.altSymbol),a.percentSymbol=Ng()?fg("numberSymbols.percentSign",l):a.numberMapper.numberSymbols.percentSign,a.minusSymbol=Ng()?fg("numberSymbols.minusSign",l):a.numberMapper.numberSymbols.minusSign;var u=a.numberMapper.numberSymbols;if(t.format&&!tv.formatRegex.test(t.format))s=tv.customFormat(t.format,a,c.numericObject);else{if(Eg(o,tv.getProperNumericSkeleton(t.format||"N")),o.isCurrency="currency"===o.type,o.isPercent="percent"===o.type,Ng()||(r=tv.getSymbolPattern(o.type,a.numberMapper.numberSystem,c.numericObject,o.isAccount)),o.groupOne=this.checkValueRange(o.maximumSignificantDigits,o.minimumSignificantDigits,!0),this.checkValueRange(o.maximumFractionDigits,o.minimumFractionDigits,!1,!0),bg(o.fractionDigits)||(o.minimumFractionDigits=o.maximumFractionDigits=o.fractionDigits),bg(o.useGrouping)&&(o.useGrouping=!0),o.isCurrency&&!Ng()&&(r=r.replace(/\u00A4/g,tv.defaultCurrency)),Ng())s.nData=Eg({},{},fg(o.type+"nData",l)),s.pData=Eg({},{},fg(o.type+"pData",l)),"currency"===o.type&&t.currency&&tv.replaceBlazorCurrency([s.pData,s.nData],a.currencySymbol,t.currency);else{var d=r.split(";");s.nData=tv.getFormatData(d[1]||"-"+d[0],!0,a.currencySymbol),s.pData=tv.getFormatData(d[0],!1,a.currencySymbol),o.useGrouping&&(o.groupSeparator=u[Fg[2]],o.groupData=this.getGroupingDetails(d[0]))}if(bg(o.minimumFractionDigits)&&(o.minimumFractionDigits=s.nData.minimumFraction),bg(o.maximumFractionDigits)){var p=s.nData.maximumFraction;o.maximumFractionDigits=bg(p)&&o.isPercent?0:p}var h=o.minimumFractionDigits,f=o.maximumFractionDigits;bg(h)||bg(f)||h>f&&(o.maximumFractionDigits=h)}return Eg(s.nData,o),Eg(s.pData,o),function(e){return isNaN(e)?u[Fg[1]]:isFinite(e)?i.intNumberFormatter(e,s,a):u[Fg[0]]}},e.getGroupingDetails=function(e){var t={},n=e.match(tv.negativeDataRegex);if(n&&n[4]){var r=n[4],i=r.lastIndexOf(",");if(-1!==i){var o=r.split(".")[0];t.primary=o.length-i-1;var s=r.lastIndexOf(",",i-1);-1!==s&&(t.secondary=i-1-s)}}return t},e.checkValueRange=function(e,t,n,r){var i=r?"f":"s",o=0,s=Ug["l"+i],a=Ug["m"+i];if(bg(e)||(this.checkRange(e,s,r),o++),bg(t)||(this.checkRange(t,a,r),o++),2===o){if(!(e<t))return!0;Tg(a+"specified must be less than the"+s)}else n&&1===o&&Tg("Both"+a+"and"+a+"must be present");return!1},e.checkRange=function(e,t,n){var r=n?[0,20]:[1,21];(e<r[0]||e>r[1])&&Tg(t+"value must be within the range"+r[0]+"to"+r[1])},e.intNumberFormatter=function(e,t,n){var r;if(!bg(t.nData.type)){e<0?(e*=-1,r=t.nData):r=0===e&&t.zeroData||t.pData;var i="";return r.isPercent&&(e*=100),r.groupOne?i=this.processSignificantDigits(e,r.minimumSignificantDigits,r.maximumSignificantDigits):(i=this.processFraction(e,r.minimumFractionDigits,r.maximumFractionDigits),r.minimumIntegerDigits&&(i=this.processMinimumIntegers(i,r.minimumIntegerDigits))),"scientific"===r.type&&(i=(i=e.toExponential(r.maximumFractionDigits)).replace("e",n.numberMapper.numberSymbols[Fg[4]])),i=i.replace(".",n.numberMapper.numberSymbols[Fg[3]]),i="#,###,,;(#,###,,)"===r.format?this.customPivotFormat(parseInt(i)):i,r.useGrouping&&(i=this.groupNumbers(i,r.groupData.primary,r.groupSeparator||",",n.numberMapper.numberSymbols[Fg[3]]||".",r.groupData.secondary)),i=Rg.convertValueParts(i,tv.latnParseRegex,n.numberMapper.mapper),"N/A"===r.nlead?r.nlead:r.nlead+i+r.nend}},e.processSignificantDigits=function(e,t,n){var r=e+"";return r.length<t?e.toPrecision(t):+(r=e.toPrecision(n))+""},e.groupNumbers=function(e,t,n,r,i){for(var o=!_g(i)&&0!==i,s=e.split(r),a=s[0],c=a.length,l="";c>t;)l=a.slice(c-t,c)+(l.length?n+l:""),c-=t,o&&(t=i,o=!1);return s[0]=a.slice(0,c)+(l.length?n:"")+l,s.join(r)},e.processFraction=function(e,t,n){var r=(e+"").split(".")[1],i=r?r.length:0;if(t&&i<t){var o="";if(0!==i){o+=e;for(var s=0;s<t-i;s++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!_g(n)&&(i>n||0===n)?e.toFixed(n):e+""},e.processMinimumIntegers=function(e,t){var n=e.split("."),r=n[0],i=r.length;if(i<t){for(var o=0;o<t-i;o++)r="0"+r;n[0]=r}return n.join(".")},e.customPivotFormat=function(e){if(e>=5e5){var t=(e/=1e6).toString().split("."),n=(t[0],t[1]);return n&&+n.substring(0,1)>=5?Math.ceil(e).toString():Math.floor(e).toString()}return""},e}(),Bg="stand-alone",Vg=/^[0-9]*$/,Hg={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},Gg=function(){function e(){}return e.dateParser=function(e,t,n){var r=this,i=tv.getDependables(n,e,t.calendar),o=Rg.getCurrentNumericOptions(i.parserObject,Rg.getNumberingSystem(n),!1,Ng()),s={};Ng()&&t.isServerRendered&&(t=tv.compareBlazorDateFormats(t,e));var a,c=t.format||tv.getResultantPattern(t.skeleton,i.dateObject,t.type,!1,Ng()?e:""),l="";if(bg(c))Tg("Format options or type given must be invalid");else{c=tv.ConvertDateToWeekFormat(c),s={isIslamic:tv.islamicRegex.test(t.calendar),pattern:c,evalposition:{},culture:e};for(var u=c.match(tv.dateParseRegex)||[],d=u.length,p=0,h=0,f=!1,m=o.numericRegex,g=Ng()?i.parserObject.numbers:Rg.getNumberMapper(i.parserObject,Rg.getNumberingSystem(n)),v=0;v<d;v++){var y=u[parseInt(v.toString(),10)],E=y.length,_="K"===y[0]?"h":y[0],b=void 0,S=void 0,T=Pg[_],I=2===E?"":"?";switch(f&&(p=h,f=!1),_){case"E":case"c":var N=void 0;N=Ng()?fg("days."+tv.monthIndex[E],i.dateObject):i.dateObject[tv.days][Bg][tv.monthIndex[E]];var w=Rg.reverseObject(N);l+="("+Object.keys(w).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(S=!0,("M"===_||"L"===_)&&E>2){var C=void 0;C=Ng()?fg("months."+tv.monthIndex[E],i.dateObject):i.dateObject.months[Bg][tv.monthIndex[E]],s[T]=Rg.reverseObject(C),l+="("+Object.keys(s[T]).join("|")+")"}else if("f"===_){if(E>3)continue;b=!0,l+="("+m+m+"?"+m+"?)"}else b=!0,l+="("+m+m+I+")";"h"===_&&(s.hour12=!0);break;case"W":l+="("+m+(1===E?"?":"")+m+")";break;case"y":S=b=!0,l+=2===E?"("+m+m+")":"("+m+"{"+E+",})";break;case"a":S=!0;var O=Ng()?fg("dayPeriods",i.dateObject):fg("dayPeriods.format.wide",i.dateObject);s[T]=Rg.reverseObject(O),l+="("+Object.keys(s[T]).join("|")+")";break;case"G":S=!0;var A=E<=3?"eraAbbr":4===E?"eraNames":"eraNarrow";s[T]=Rg.reverseObject(Ng()?fg("eras",i.dateObject):fg("eras."+A,i.dateObject)),l+="("+Object.keys(s[T]).join("|")+"?)";break;case"z":S=0!==(new Date).getTimezoneOffset(),s[T]=fg("dates.timeZoneNames",i.parserObject);var R=s[T],M=(a=E<4)?"+H;-H":R.hourFormat;M=M.replace(/:/g,g.timeSeparator),l+="("+this.parseTimeZoneRegx(M,R,m)+")?",f=!0,h=a?6:12;break;case"'":l+="("+y.replace(/'/g,"")+")?";break;default:l+="([\\D])"}S&&(s.evalposition[""+T]={isNumber:b,pos:v+1+p,hourOnly:a}),v!==d-1||_g(l)||(s.parserRegex=new RegExp("^"+l+"$","i"))}}return function(e){var t=r.internalDateParse(e,s,o);if(_g(t)||!Object.keys(t).length)return null;if(s.isIslamic){var n={},i=t.year,a=t.day,c=t.month,l=i?i+"":"",u=2===l.length;i&&c&&a&&!u||(n=wg.getHijriDate(new Date)),u&&(i=parseInt((n.year+"").slice(0,2)+l,10));var d=wg.toGregorian(i||n.year,c||n.month,a||n.date);t.year=d.getFullYear(),t.month=d.getMonth()+1,t.day=d.getDate()}return r.getDateObject(t)}},e.getDateObject=function(e,t){var n=t||new Date;n.setMilliseconds(0);var r=e.year,i=e.designator,o=e.timeZone;if(!bg(r)){if((r+"").length<=2)r+=100*Math.floor(n.getFullYear()/100);n.setFullYear(r)}for(var s=0,a=["hour","minute","second","milliseconds","month","day"];s<a.length;s++){var c=a[s],l=e[c];if(bg(l)&&"day"===c&&n.setDate(1),!bg(l))if("month"===c){if((l-=1)<0||l>11)return new Date("invalid");var u=n.getDate();n.setDate(1),n[Hg[c]](l);var d=new Date(n.getFullYear(),l+1,0).getDate();n.setDate(u<d?u:d)}else{if("day"===c){var p=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();if(l<1||l>p)return null}n[Hg[c]](l)}}if(!bg(i)){var h=n.getHours();"pm"===i?n.setHours(h+(12===h?0:12)):12===h&&n.setHours(0)}if(!bg(o)){var f=o-n.getTimezoneOffset();0!==f&&n.setMinutes(n.getMinutes()+f)}return n},e.internalDateParse=function(e,t,n){var r=e.match(t.parserRegex),i={hour:0,minute:0,second:0};if(_g(r))return null;for(var o=0,s=Object.keys(t.evalposition);o<s.length;o++){var a=s[o],c=t.evalposition[""+a],l=r[c.pos];if(c.isNumber)i[a]=this.internalNumberParser(l,n);else if("timeZone"!==a||bg(l))l="month"!==a||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?l:l[0].toUpperCase()+l.substring(1).toLowerCase(),i[a]=t[a][l];else{var u=c.pos,d=void 0,p=r[u+1],h=!bg(p);c.hourOnly?d=60*this.getZoneValue(h,p,r[u+4],n):(d=60*this.getZoneValue(h,p,r[u+7],n),d+=this.getZoneValue(h,r[u+4],r[u+10],n)),_g(d)||(i[""+a]=d)}}return t.hour12&&(i.hour12=!0),i},e.internalNumberParser=function(e,t){return e=Rg.convertValueParts(e,t.numberParseRegex,t.numericPair),Vg.test(e)?+e:null},e.parseTimeZoneRegx=function(e,t,n){var r,i,o=t.gmtFormat,s="("+n+")("+n+")";return r=e.replace("+","\\+"),i=(r=-1!==e.indexOf("HH")?r.replace(/HH|mm/g,"("+s+")"):r.replace(/H|m/g,"("+s+"?)")).split(";").map((function(e){return o.replace("{0}",e)})),r=i.join("|")+"|"+t.gmtZeroFormat},e.getZoneValue=function(e,t,n,r){var i=e?t:n;if(!i)return 0;var o=this.internalNumberParser(i,r);return e?-o:o},e}(),Wg=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,Yg=/,/g,qg=["minusSign","infinity"],Kg=function(){function e(){}return e.numberParser=function(e,t,n){var r,i=this,o=tv.getDependables(n,e,"",!0),s={custom:!0};tv.formatRegex.test(t.format)||!t.format?(Eg(s,tv.getProperNumericSkeleton(t.format||"N")),s.custom=!1,s.fractionDigits||t.maximumFractionDigits&&(s.maximumFractionDigits=t.maximumFractionDigits)):Eg(s,tv.customFormat(t.format,null,null));var a,c=fg("numbers",o.parserObject);if(r=Rg.getCurrentNumericOptions(o.parserObject,Rg.getNumberingSystem(n),!0,Ng()),s.symbolRegex=Rg.getSymbolRegex(Object.keys(r.symbolMatch)),s.infinity=r.symbolNumberSystem[qg[1]],Ng())s.nData=Eg({},{},fg(s.type+"nData",c)),s.pData=Eg({},{},fg(s.type+"pData",c)),"currency"===s.type&&t.currency&&tv.replaceBlazorCurrency([s.pData,s.nData],fg("currencySymbol",c),t.currency);else if(a=tv.getSymbolPattern(s.type,r.numberSystem,o.numericObject,s.isAccount)){var l=(a=a.replace(/\u00A4/g,tv.defaultCurrency)).split(";");s.nData=tv.getFormatData(l[1]||"-"+l[0],!0,""),s.pData=tv.getFormatData(l[0],!0,"")}return function(e){return i.getParsedNumber(e,s,r)}},e.getParsedNumber=function(e,t,n){var r,i,o,s,a,c;if(-1!==e.indexOf(t.infinity))return 1/0;e=Rg.convertValueParts(e,t.symbolRegex,n.symbolMatch),0===(e=-1!==(e=Rg.convertValueParts(e,n.numberParseRegex,n.numericPair)).indexOf("-")?e.replace("-.","-0."):e).indexOf(".")&&(e="0"+e);var l=e.match(Wg);if(_g(l))return NaN;s=l[1],o=l[2];var u=l[5];return a=l[6],i=(r=t.custom?s===t.nData.nlead&&a===t.nData.nend:-1!==s.indexOf(t.nData.nlead)&&-1!==a.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace(Yg,""),u&&(o+=u),c=+o,("percent"===t.type||i)&&(c/=100),(t.custom||t.fractionDigits)&&(c=parseFloat(c.toFixed(t.custom?r?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(c=this.convertMaxFracDigits(o,t,c,r)),r&&(c*=-1),c},e.convertMaxFracDigits=function(e,t,n,r){var i=e.split(".");return i[1]&&i[1].length>t.maximumFractionDigits&&(n=+n.toFixed(t.custom?r?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),n},e}(),Qg=function(){function t(e){this.ranArray=[],this.boundedEvents={},_g(e)||(this.context=e)}return t.prototype.on=function(e,t,n,r){if(!_g(t)){var i=n||this.context;this.notExist(e)?this.boundedEvents[""+e]=[{handler:t,context:i}]:_g(r)?this.isHandlerPresent(this.boundedEvents[""+e],t)||this.boundedEvents[""+e].push({handler:t,context:i}):-1===this.ranArray.indexOf(r)&&(this.ranArray.push(r),this.boundedEvents[""+e].push({handler:t,context:i,id:r}))}},t.prototype.off=function(e,t,n){if(!this.notExist(e)){var r=fg(e,this.boundedEvents);if(t){for(var i=0;i<r.length;i++)if(n){if(r[parseInt(i.toString(),10)].id===n){r.splice(i,1);var o=this.ranArray.indexOf(n);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===r[parseInt(i.toString(),10)].handler){r.splice(i,1);break}}else delete this.boundedEvents[""+e]}},t.prototype.notify=function(e,t,n,r){if(this.notExist(e))n&&n.call(this,t);else{t&&(t.name=e);var i=fg(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(i,t,n,r,0);for(var o=0,s=i;o<s.length;o++){var a=s[o];a.handler.call(a.context,t)}n&&n.call(this,t)}},t.prototype.blazorCallback=function(e,t,n,r,i){var o=this,s=i===e.length-1;if(i<e.length){var a=e[parseInt(i.toString(),10)],c=a.handler.call(a.context,t);if(c&&"function"===typeof c.then){if(!n)return c;c.then((function(c){if(c="string"===typeof c&&o.isJson(c)?JSON.parse(c,o.dateReviver):c,Eg(t,t,c,!0),!n||!s)return o.blazorCallback(e,t,n,r,i+1);n.call(a.context,t)})).catch((function(e){r&&r.call(a.context,"string"===typeof e&&o.isJson(e)?JSON.parse(e,o.dateReviver):e)}))}else{if(!n||!s)return this.blazorCallback(e,t,n,r,i+1);n.call(a.context,t)}}},t.prototype.dateReviver=function(e,t){return Ng&&"string"===typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},t.prototype.isJson=function(t){try{JSON.parse(t)}catch(e){return!1}return!0},t.prototype.destroy=function(){this.boundedEvents=this.context=void 0},t.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},t.prototype.isHandlerPresent=function(e,t){for(var n=0,r=e;n<r.length;n++){if(r[n].handler===t)return!0}return!1},t}(),Jg=new Qg,Xg=!1,Zg={},$g="en-US",ev="USD";!function(){function e(e){e&&(this.culture=e)}e.prototype.getDateFormat=function(e){return jg.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},Zg)},e.prototype.getNumberFormat=function(e){return e&&!e.currency&&(e.currency=ev),Ng()&&e&&!e.format&&(e.minimumFractionDigits=0),zg.numberFormatter(this.getCulture(),e||{},Zg)},e.prototype.getDateParser=function(e){return Gg.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},Zg)},e.prototype.getNumberParser=function(e){return Ng()&&e&&!e.format&&(e.minimumFractionDigits=0),Kg.numberParser(this.getCulture(),e||{format:"N"},Zg)},e.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},e.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},e.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},e.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},e.prototype.getDatePattern=function(e,t){return tv.getActualDateTimeFormat(this.getCulture(),e,Zg,t)},e.prototype.getNumberPattern=function(e,t){return tv.getActualNumberFormat(this.getCulture(),e,Zg,t)},e.prototype.getFirstDayOfWeek=function(){return tv.getWeekData(this.getCulture(),Zg)},e.prototype.getCulture=function(){return this.culture||$g}}();var tv,nv={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var n=["infinity","nan","group","decimal"],r=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,i={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.dateConverterMapper=/dddd|ddd/gi;e.islamicRegex=/^islamic/;var o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var s={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function a(t,n,r,i,o){var s,a=r||"date";if(o)s=d({skeleton:t},o).format||d({skeleton:"d"},"en-US").format;else{if(-1!==e.basicPatterns.indexOf(t)){if(s=fg(a+"Formats."+t,n),"dateTime"===a){var c=fg("dateFormats."+t,n),l=fg("timeFormats."+t,n);s=s.replace("{1}",c).replace("{0}",l)}}else s=fg("dateTimeFormats.availableFormats."+t,n);bg(s)&&"yMd"===t&&(s="M/d/y")}return s}function c(t,n,r,i){var o={},s=r||"gregorian";if(o.parserObject=Rg.getMainObject(t,n)||(Ng()?e.blazorDefaultObject:e.defaultObject),i)o.numericObject=fg("numbers",o.parserObject);else{var a=Ng()?"dates":"dates.calendars."+s;o.dateObject=fg(a,o.parserObject)}return o}function l(e,t,n,r){return fg(e+"Formats-numberSystem-"+t+(r?".accounting":".standard"),n)||(r?fg(e+"Formats-numberSystem-"+t+".standard",n):"")}function u(t){var n=t.match(e.dateConverterMapper);if(n&&Ng()){var r=3===n[0].length?"EEE":"EEEE";return t.replace(e.dateConverterMapper,r)}return t}function d(e,t){var n=e.format||e.skeleton,r=fg((t||"en-US")+"."+n,nv);return r||(r=fg("en-US."+n,nv)),r&&(r=u(r),e.format=r.replace(/tt/,"a")),e}function p(t){var n=t.match(e.formatRegex),r={},i=n[1].toUpperCase();return r.isAccount="A"===i,r.type=e.patternMatcher[i],t.length>1&&(r.fractionDigits=parseInt(n[2],10)),r}function h(n,r,i,o){var s=o?{}:{nlead:"",nend:""},a=n.match(e.customRegex);if(a){o||(s.nlead=f(a[1],i),s.nend=f(a[10],i),s.groupPattern=a[4]);var c=a[7];if(c&&r){var l=c.match(t);_g(l)?s.minimumFraction=0:s.minimumFraction=l.length,s.maximumFraction=c.length-1}}return s}function f(t,n){return t?t.replace(e.defaultCurrency,n):""}function m(e,t,n){return fg("currencies."+t+(n?"."+n:".symbol"),e)||fg("currencies."+t+".symbol-alt-narrow",e)||"$"}function g(t,r,i){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},s=t.match(e.customRegex);if(_g(s)||""===s[5]&&"N/A"!==t)return o.type=void 0,o;o.nlead=s[1],o.nend=s[10];var a=s[6],c=!!a.match(/\ $/g),u=-1!==a.replace(/\ $/g,"").indexOf(" ");o.useGrouping=-1!==a.indexOf(",")||u,a=a.replace(/,/g,"");var d=s[7];if(-1!==a.indexOf("0")&&(o.minimumIntegerDigits=a.length-a.indexOf("0")),_g(d)||(o.minimumFractionDigits=d.lastIndexOf("0"),o.maximumFractionDigits=d.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),_g(r)?Eg(o,v([o.nlead,o.nend],"%","%")):(Eg(o,v([o.nlead,o.nend],"$",r.currencySymbol)),o.isCurrency||Eg(o,v([o.nlead,o.nend],"%",r.percentSymbol))),!_g(i)){var p=l(o.type,r.numberMapper.numberSystem,i,!1);o.useGrouping&&(o.groupSeparator=u?" ":r.numberMapper.numberSymbols[n[2]],o.groupData=zg.getGroupingDetails(p.split(";")[0])),o.nlead=o.nlead.replace(/'/g,""),o.nend=c?" "+o.nend.replace(/'/g,""):o.nend.replace(/'/g,"")}return o}function v(e,t,n){for(var r={nlead:e[0],nend:e[1]},i=0;i<2;i++){var o=e[parseInt(i.toString(),10)],a=o.indexOf(t);if(-1!==a&&(a<o.indexOf("'")||a>o.lastIndexOf("'"))){r[s[i]]=o.substr(0,a)+n+o.substr(a+1),r[s[t]]=!0,r.type=r.isCurrency?"currency":"percent";break}}return r}function y(e,t,n){e+=".";for(var r=0;r<t;r++)e+="0";if(t<n)for(var i=n-t,o=0;o<i;o++)e+="#";return e}function E(e,t){for(var n=e.split("."),r="",i=0;i<t;i++)r+="0";return n[1]?r+"."+n[1]:r}function _(e){var t=e.split("."),n=t[0],r=3-n.length%3;e="";for(var i=(n=(r&&1===r?"#":2===r?"##":"")+n).length-1;i>0;i-=3)e=","+n[i-2]+n[i-1]+n[parseInt(i.toString(),10)]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=a,e.getDependables=c,e.getSymbolPattern=l,e.ConvertDateToWeekFormat=u,e.compareBlazorDateFormats=d,e.getProperNumericSkeleton=p,e.getFormatData=h,e.changeCurrencySymbol=f,e.getCurrencySymbol=m,e.customFormat=function(e,t,n){for(var r={},i=e.split(";"),o=["pData","nData","zeroData"],s=0;s<i.length;s++)r[o[s]]=g(i[s],t,n);return _g(r.nData)&&(r.nData=Eg({},r.pData),r.nData.nlead=_g(t)?"-"+r.nData.nlead:t.minusSymbol+r.nData.nlead),r},e.customNumberFormat=g,e.isCurrencyPercent=v,e.getDateSeparator=function(e){var t=(fg("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,n,o){var s=c(n,e,t.calendar);Ng()&&(t=d(t,e));var l=t.format||a(t.skeleton,s.dateObject,t.type);if(o){if(l=l.replace(r,(function(e){return i[e]})),-1!==l.indexOf("z")){var u=l.match(/z/g).length,p=void 0,h={timeZone:{}};h.numMapper=Rg.getNumberMapper(s.parserObject,Rg.getNumberingSystem(n)),h.timeZone=fg("dates.timeZoneNames",s.parserObject);var f=(new Date).getTimezoneOffset(),m=u<4?"+H;-H":h.timeZone.hourFormat;m=m.replace(/:/g,h.numMapper.timeSeparator),0===f?p=h.timeZone.gmtZeroFormat:(p=jg.getTimeZoneValue(f,m),p=h.timeZone.gmtFormat.replace(/\{0\}/,p)),l=l.replace(/[z]+/,'"'+p+'"')}l=l.replace(/ $/,"")}return l},e.getActualNumberFormat=function(t,n,r,i){var o,s,a=c(r,t,"",!0),u={custom:!0},d=a.numericObject,f={},g=(n.format||"").match(e.currencyFormatRegex),v=e.formatRegex.test(n.format)?p(n.format||"N"):{},b={};if(g){b.numberMapper=Ng()?Eg({},a.numericObject):Rg.getNumberMapper(a.parserObject,Rg.getNumberingSystem(r),!0);var S=Ng()?fg("currencySymbol",a.numericObject):m(a.numericObject,n.currency||ev,n.altSymbol),T=l("currency",b.numberMapper.numberSystem,a.numericObject,/a/i.test(n.format)),I=(T=T.replace(/\u00A4/g,S)).split(";");f.hasNegativePattern=!!Ng()||I.length>1,f.nData=Ng()?fg(v.type+"nData",d):h(I[1]||"-"+I[0],!0,S),f.pData=Ng()?fg(v.type+"pData",d):h(I[0],!1,S),g[2]||n.minimumFractionDigits||n.maximumFractionDigits||(o=h(T.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(n.format)||!n.format){if(Eg(u,p(n.format||"N")),u.custom=!1,s="###0",u.fractionDigits||n.minimumFractionDigits||n.maximumFractionDigits||o){u.fractionDigits&&(n.minimumFractionDigits=n.maximumFractionDigits=u.fractionDigits),s=y(s,o||u.fractionDigits||n.minimumFractionDigits||0,n.maximumFractionDigits||0)}if(n.minimumIntegerDigits&&(s=E(s,n.minimumIntegerDigits)),n.useGrouping&&(s=_(s)),"currency"===u.type||u.type&&Ng()){Ng()&&"currency"!==u.type&&(f.pData=fg(u.type+"pData",d),f.nData=fg(u.type+"nData",d));var N=s;s=f.pData.nlead+N+f.pData.nend,(f.hasNegativePattern||Ng())&&(s+=";"+f.nData.nlead+N+f.nData.nend)}"percent"!==u.type||Ng()||(s+=" %")}else s=n.format.replace(/'/g,'"');return Object.keys(b).length>0&&(s=i?s:function(e,t){if(-1!==e.indexOf(",")){var n=e.split(",");e=n[0]+fg("numberMapper.numberSymbols.group",t)+n[1].replace(".",fg("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",fg("numberMapper.numberSymbols.decimal",t));return e}(s,b)),s},e.fractionDigitsPattern=y,e.minimumIntegerPattern=E,e.groupingPattern=_,e.getWeekData=function(e,t){var n="sun",r=fg("supplemental.weekData.firstDay",t),i=e;return/en-/.test(i)&&(i=i.slice(3)),i=i.slice(0,2).toUpperCase()+i.substr(2),r&&(n=r[""+i]||r[i.slice(0,2)]||"sun"),o[""+n]},e.replaceBlazorCurrency=function(e,t,n){var r=fg(n||"",Mg);if(t!==r)for(var i=0,o=e;i<o.length;i++){var s=o[i];s.nend=s.nend.replace(t,r),s.nlead=s.nlead.replace(t,r)}},e.getWeekOfYear=function(e){var t,n=new Date(e.getFullYear(),0,1),r=n.getDay();r=r>=0?r:r+7;var i=Math.floor((e.getTime()-n.getTime()-6e4*(e.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)+1;if(r<4){if((t=Math.floor((i+r-1)/7)+1)>52){var o=new Date(e.getFullYear()+1,0,1).getDay();t=(o=o>=0?o:o+7)<4?1:53}}else t=Math.floor((i+r-1)/7);return t}}(tv||(tv={}));var rv=/^(.*?):[ \t]*([^\r\n]*)$/gm,iv=(function(){function e(e,t,n,r){this.mode=!0,this.emitError=!0,this.options={},"string"===typeof e?(this.url=e,this.type=t?t.toUpperCase():"GET",this.mode=!!_g(n)||n):"object"===typeof e&&(this.options=e,yg(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:r}e.prototype.send=function(e){var t=this;this.data=_g(e)?this.data:e;var n={cancel:!1,httpRequest:null};return new Promise((function(e,r){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,r)},_g(t.onLoad)||(t.httpRequest.onload=t.onLoad),_g(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),_g(t.onAbort)||(t.httpRequest.onabort=t.onAbort),_g(t.onError)||(t.httpRequest.onerror=t.onError),_g(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),_g(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(n.httpRequest=t.httpRequest,t.beforeSend(n)),n.cancel||t.httpRequest.send(_g(t.data)?null:t.data)}))},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var n=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===n)n=void 0;else try{n=JSON.parse(n)}catch(r){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(n)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,n;t={};for(var r=rv.exec(this.httpRequest.getAllResponseHeaders());r;)t[r[1].toLowerCase()]=r[2],r=rv.exec(this.httpRequest.getAllResponseHeaders());return _g(n=t[e.toLowerCase()])?null:n}}(),/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i),ov=/msie|trident/i,sv=/Trident\/7\./,av=/(ipad|iphone|ipod touch)/i,cv=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,lv=/android/i,uv=/trident|windows phone|edge/i,dv=/(version)[ /]([\w.]+)/i,pv={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!==typeof window&&(window.browserDetails=window.browserDetails||{});var hv=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},n=[],r=0,i=Object.keys(pv);r<i.length;r++){var o=i[r];if(n=e.userAgent.match(pv[""+o])){if(t.name="opr"===n[1].toLowerCase()?"opera":n[1].toLowerCase(),t.name="crios"===n[1].toLowerCase()?"chrome":t.name,t.version=n[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(sv)){t.name="msie";break}var s=e.userAgent.match(dv);"safari"===t.name&&s&&(t.version=s[2]);break}}return t},e.getEvent=function(t){var n={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?n[""+t].isPointer:e.isTouch?n[""+t].isTouch+(e.isDevice?"":" "+n[""+t].isDevice):n[""+t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,n){var r="undefined"!==typeof window?window.browserDetails:{};return"undefined"!==typeof navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===e.isTouch&&(r.isIos=!0,r.isDevice=!0,r.isTouch=!0,r.isPointer=!0),"undefined"===typeof r[""+t]?r[""+t]=n.test(e.userAgent):r[""+t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return bg(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",ov)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return bg(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return bg(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return bg(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",iv)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",av)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",cv)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",lv)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return bg(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(bg(window.cordova)&&bg(window.PhoneGap)&&bg(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",uv)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return bg(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return bg(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return bg(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return bg(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!==typeof navigator?navigator.userAgent:"",e}(),fv=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,n,r,i,o){var s,a=e.addOrGetEventData(t);s=o?function(e,t){var n;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout((function(){return n=null,e.apply(r,i)}),t)}}(r,o):r,i&&(s=s.bind(i));for(var c=n.split(" "),l=0;l<c.length;l++)a.push({name:c[parseInt(l.toString(),10)],listener:r,debounce:s}),hv.isIE?t.addEventListener(c[parseInt(l.toString(),10)],s):t.addEventListener(c[parseInt(l.toString(),10)],s,{passive:!1});return s},e.remove=function(t,n,r){for(var i=e.addOrGetEventData(t),o=n.split(" "),s=function(e){var n,s=-1;i&&0!==i.length&&i.some((function(t,i){return t.name===o[parseInt(e.toString(),10)]&&t.listener===r&&(s=i,n=t.debounce,!0)})),-1!==s&&i.splice(s,1),n&&t.removeEventListener(o[parseInt(e.toString(),10)],n)},a=0;a<o.length;a++)s(a)},e.clearEvents=function(t){var n,r;r=Eg([],r,n=e.addOrGetEventData(t));for(var i=0;i<r.length;i++)t.removeEventListener(r[parseInt(i.toString(),10)].name,r[parseInt(i.toString(),10)].debounce),n.shift()},e.trigger=function(t,n,r){for(var i=0,o=e.addOrGetEventData(t);i<o.length;i++){var s=o[i];s.name===n&&s.debounce.call(this,r)}},e}(),mv=/^svg|^path|^g/;function gv(e,t){var n=mv.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return"undefined"===typeof t||(n.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(n.className=t.className),void 0!==t.id&&(n.id=t.id),void 0!==t.styles&&n.setAttribute("style",t.styles),void 0!==t.attrs&&function(e,t){for(var n=Object.keys(t),r=e,i=0,o=n;i<o.length;i++){var s=o[i];if(vg(r)){var a=s;"tabindex"===s&&(a="tabIndex"),r.attributes[""+a]=t[""+s]}else r.setAttribute(s,t[""+s])}}(n,t.attrs)),n}function vv(e,t){for(var n=Ev(t),r=0,i=e;r<i.length;r++)for(var o=i[r],s=0,a=n;s<a.length;s++){var c=a[s];if(vg(o)){var l=fg("attributes.className",o);_g(l)?mg("attributes.className",c,o):new RegExp("\\b"+c+"\\b","i").test(l)||mg("attributes.className",l+" "+c,o)}else o.classList.contains(c)||o.classList.add(c)}return e}function yv(e,t){for(var n=Ev(t),r=0,i=e;r<i.length;r++){var o=i[r],s=vg(o);if(s?fg("attributes.className",o):""!==o.className)for(var a=0,c=n;a<c.length;a++){var l=c[a];if(s){var u=fg("attributes.className",o).split(" "),d=u.indexOf(l);-1!==d&&u.splice(d,1),mg("attributes.className",u.join(" "),o)}else o.classList.remove(l)}}return e}function Ev(e){var t=[];return"string"===typeof e?t.push(e):t=e,t}function _v(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function bv(e){e.querySelectorAll("script").forEach((function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),Sv(t)}))}function Sv(e){var t=e.parentNode;if(t)return t.removeChild(e)}function Tv(e,t,n){return void 0===t&&(t=document),e=Iv(e),t.querySelector(e)}function Iv(e){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(e.match(/#[0-9]/g)||e.match(t)){for(var n=e.split(","),r=0;r<n.length;r++){for(var i=n[parseInt(r.toString(),10)].split(" "),o=0;o<i.length;o++)if(i[parseInt(o.toString(),10)].indexOf("#")>-1&&!i[parseInt(o.toString(),10)].match(/\[.*\]/)){var s=i[parseInt(o.toString(),10)].split("#");if(s[1].match(/^\d/)||s[1].match(t)){var a=i[parseInt(o.toString(),10)].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",i[parseInt(o.toString(),10)]=a.join(".")}}n[parseInt(r.toString(),10)]=i.join(" ")}return n.join(",")}return e}function Nv(e,t){var n=e;if("function"===typeof n.closest)return n.closest(t);for(;n&&1===n.nodeType;){if(Cv(n,t))return n;n=n.parentNode}return null}function wv(e,t){void 0!==t&&Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function Cv(e,t){var n=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return n?n.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var Ov=new RegExp("]"),Av=function(){function e(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new Qg(this),bg(t)||(this.element="string"===typeof t?document.querySelector(t):t,_g(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),bg(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var n=this.isProtectedOnChange;this.isProtectedOnChange=!!t,yg(this,e),!0!==t?(yg(this.changedProperties,e),this.dataBind()):Ng()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=n},e.callChildDataBind=function(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(t[""+i]instanceof Array)for(var o=0,s=t[""+i];o<s.length;o++){var a=s[o];void 0!==a.dataBind&&a.dataBind()}else t[""+i].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,n=this.changedProperties,r=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(n,r),this.isProtectedOnChange=t}},e.prototype.serverDataBind=function(e){if(Ng()){e=e||{},Eg(this.bulkChanges,{},e,!0);var t="sfBlazor";this.allowServerDataBinding&&window[""+t].updateModel&&(window[""+t].updateModel(this),this.bulkChanges={})}},e.prototype.saveChanges=function(e,t,n){if(Ng()){var r={};r[""+e]=t,this.serverDataBind(r)}this.isProtectedOnChange||(this.oldProperties[""+e]=n,this.changedProperties[""+e]=t,this.finalUpdate(),this.finalUpdate=hg(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,n,r){var i=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var s=this.modelObserver.notify(e,t,n,r);if(Ov.test(e)){var a=fg(e,this);if(a){if(window.Blazor){var c=a.call(this,t);c&&"function"===typeof c.then?n?c.then((function(e){n&&(e="string"===typeof e&&i.modelObserver.isJson(e)?JSON.parse(e):e,n.call(i,e))})).catch((function(e){r&&(e="string"===typeof e&&i.modelObserver.isJson(e)?JSON.parse(e):e,r.call(i,e))})):s=c:n&&n.call(this,t)}else a.call(this,t),n&&n.call(this,t)}else n&&n.call(this,t)}return this.isProtectedOnChange=o,s}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();vv([this.element],["e-lib",e]),_g(this.element.ej2_instances)?mg("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter((function(t){return t!==e})),yv([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&yv([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();function Rv(e,t,n,r){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof r||(e.properties[""+t]=pg(r,[e,t,n])),e.properties[""+t]}function Mv(e,t,n,r,i,o){for(var s=[],a=n?n.length:0,c=0;c<a;c++){var l=r;if(o&&(l=r(n[parseInt(c.toString(),10)],e)),i){var u=pg(l,[e,t,{},!0]);u.setProperties(n[parseInt(c.toString(),10)],!0),s.push(u)}else s.push(pg(l,[e,t,n[parseInt(c.toString(),10)],!1]))}return s}function Dv(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[""+t]=e),this.properties[""+t]}}function kv(e,t){return function(n){if(this.properties[""+t]!==n){var r=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,n,r),this.properties[""+t]=n}}}function xv(e,t,n){return function(){return Rv(this,t,e,n)}}function Lv(e,t,n){return function(r){Rv(this,t,e,n).setProperties(r)}}function Pv(e,t,n){return function(){var r=this;if(!this.properties.hasOwnProperty(t)){var i=Mv(this,t,e,n,!1);this.properties[""+t]=i}var o=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||o||["push","pop"].forEach((function(e){var i={value:Uv(e,t,n,r.properties[""+t]).bind(r),configurable:!0};Object.defineProperty(r.properties[""+t],e,i)})),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[""+t],"isComplexArray",{value:!0}),this.properties[""+t]}}function jv(e,t,n){return function(r){this.isComplexArraySetter=!0;var i=Mv(this,t,e,n,!1),o=Mv(this,t,r,n,!0);this.isComplexArraySetter=!1,this.saveChanges(t,o,i),this.properties[""+t]=o}}function Uv(e,t,n,r){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(var s=0;s<n.length;s++){Array.prototype[""+e].apply(r,[n[parseInt(s.toString(),10)]]);var a=Fv(o+(r.length-1),n[parseInt(s.toString(),10)],!this.controlParent,e);this.serverDataBind(a,n[parseInt(s.toString(),10)],!1,e)}break;case"pop":Array.prototype[""+e].apply(r);var c=Fv(o+r.length,null,!this.controlParent,e);this.serverDataBind(c,{ejsAction:"pop"},!1,e)}return r}}function Fv(e,t,n,r){var i=e;if(n&&((i={})[""+e]=t,t&&"object"===typeof t)){i[""+e].ejsAction=r}return i}function zv(e){return function(t,n){var r={set:kv(e,n),get:Dv(e,n),enumerable:!0,configurable:!0};Object.defineProperty(t,n,r),Gv(t,n,"prop",e)}}function Bv(e,t){return function(n,r){var i={set:Lv(e,r,t),get:xv(e,r,t),enumerable:!0,configurable:!0};Object.defineProperty(n,r,i),Gv(n,r,"complexProp",e,t)}}function Vv(){return function(e,t){var n={set:function(e){var n=this.properties[""+t];if(n!==e){var r=Wv(this,t);!1===bg(n)&&r.context.removeEventListener(r.prefix,n),r.context.addEventListener(r.prefix,e),this.properties[""+t]=e}},get:Dv(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,n),Gv(e,t,"event")}}function Hv(e){}function Gv(e,t,n,r,i){bg(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[n+"s"].push({propertyName:t,defaultValue:r,type:i}),e.propList[n+"Names"].push(t)}function Wv(e,t){if(!1===e.hasOwnProperty("parentObj"))return{context:e,prefix:t};var n=fg("propName",e);return n&&(t=n+"-"+t),Wv(fg("parentObj",e),t)}var Yv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qv=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};!function(t){function n(e){var n=t.call(this,e,void 0)||this;return n.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},n}var r;Yv(n,t),r=n,n.prototype.animate=function(e,t){t=t||{};var n=this.getModel(t);if("string"===typeof e)for(var i=Array.prototype.slice.call(function(e,t,n){return void 0===t&&(t=document),e=Iv(e),t.querySelectorAll(e)}(e,document)),o=0,s=i;o<s.length;o++){var a=s[o];n.element=a,r.delayAnimation(n)}else n.element=e,r.delayAnimation(n)},n.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var n=e.getAttribute("e-animation-id");if(n){var r=parseInt(n,10);cancelAnimationFrame(r),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},n.delayAnimation=function(e){"Disable"===Kv?(e.begin&&e.begin.call(this,e),e.end&&e.end.call(this,e)):e.delay?setTimeout((function(){r.applyAnimation(e)}),e.delay):r.applyAnimation(e)},n.applyAnimation=function(t){var n=this;t.timeStamp=0;var r=0,i=0,o=0,s=t.duration;t.element.setAttribute("e-animate","true");var a=function(c){try{if(c){o=0===o?c:o,t.timeStamp=c+t.timeStamp-o,o=c,!r&&t.begin&&t.begin.call(n,t),r+=1;var l=t.timeStamp/r;t.timeStamp<s&&t.timeStamp+l<s&&t.element.getAttribute("e-animate")?(t.element.style.animation=t.name+" "+t.duration+"ms "+t.timingFunction,t.progress&&t.progress.call(n,t),requestAnimationFrame(a)):(cancelAnimationFrame(i),t.element.removeAttribute("e-animation-id"),t.element.removeAttribute("e-animate"),t.element.style.animation="",t.end&&t.end.call(n,t))}else i=requestAnimationFrame(a),t.element.setAttribute("e-animation-id",i.toString())}catch(e){cancelAnimationFrame(i),t.element.removeAttribute("e-animation-id"),t.fail&&t.fail.call(n,e)}};a()},n.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},n.prototype.onPropertyChanged=function(e,t){},n.prototype.getModuleName=function(){return"animation"},n.prototype.destroy=function(){},qv([zv("FadeIn")],n.prototype,"name",void 0),qv([zv(400)],n.prototype,"duration",void 0),qv([zv("ease")],n.prototype,"timingFunction",void 0),qv([zv(0)],n.prototype,"delay",void 0),qv([Vv()],n.prototype,"progress",void 0),qv([Vv()],n.prototype,"begin",void 0),qv([Vv()],n.prototype,"end",void 0),qv([Vv()],n.prototype,"fail",void 0),n=r=qv([Hv],n)}(Av);var Kv="";var Qv,Jv=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var n=e.length;if(0!==n){this.loadedModules.length&&this.clearUnusedModule(e);for(var r=0;r<n;r++)for(var i=e[parseInt(r.toString(),10)],o=0,s=t;o<s.length;o++){var a=s[o],c=i.member;if(a&&a.prototype.getModuleName()===i.member&&!this.isModuleLoaded(c)){var l=pg(a,i.args),u=this.getMemberName(c);i.isProperty?mg(u,a,this.parent):mg(u,l,this.parent);var d=i;d.member=u,this.loadedModules.push(d)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var n=t[e];n.isProperty||fg(n.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t,n,r=this,i=e.map((function(e){return r.getMemberName(e.member)})),o=0,s=this.loadedModules.filter((function(e){return-1===i.indexOf(e.member)}));o<s.length;o++){var a=s[o];a.isProperty||fg(a.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(a),1),t=this.parent,n=a.member,delete t[""+n]}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,n=this.loadedModules;t<n.length;t++){if(n[t].member===this.getMemberName(e))return!0}return!1},e}(),Xv=function(){function e(e,t,n,r){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=fg("callChildDataBind",Av),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=r,this.setProperties(n,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[""+t]=e:delete this.parentObj.childChangedProperties[""+t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(yg(this,e),this.updateChange(!1,this.propName),this.clearChanges()):yg(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(mg(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),mg(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,n,r){this.controlParent.isProtectedOnChange||(r||this.serverDataBind(e,t,!0),this.oldProperties[""+e]=n,this.changedProperties[""+e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,n,r){if(Ng()&&!this.parentObj.isComplexArraySetter){var i,o={},s=n?this.getParentKey(!0)+"."+e:e;if(-1!==s.indexOf(".")){var a=s.split(".");i=o;for(var c=0;c<a.length;c++){var l=c===a.length-1;i[a[parseInt(c.toString(),10)]]=l?t:{},i=l?i:i[a[parseInt(c.toString(),10)]]}}else o[""+s]={},i=o[""+s],o[""+s][""+e]=t;if(this.isParentArray){i.ejsAction=r||"none"}this.controlParent.serverDataBind(o)}},e.prototype.getParentKey=function(e){var t="",n=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var r=this.parentObj[this.propName].length;r=e?r:r>0?r-1:0,n+=t=-1!==t?"-"+t:"-"+r}return this.controlParent!==this.parentObj&&(n=this.parentObj.getParentKey()+"."+this.propName+t),n},e}(),Zv=["grid","pivotview","treegrid","spreadsheet","rangeNavigator","DocumentEditor","listbox","PdfViewer","richtexteditor","DashboardLayout","chart","stockChart","circulargauge","diagram","heatmap","lineargauge","maps","smithchart","barcode","sparkline","treemap","bulletChart","kanban","daterangepicker","schedule","gantt","signature","query-builder","drop-down-tree","carousel","filemanager","uploader","accordion","tab","treeview"],$v=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],ey=function(){function e(e){this.isValidated=!1,this.isLicensed=!0,this.version="20.4",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats/i,this.errors={noLicense:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",trailExpired:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",versionMismatched:"<span>The included Syncfusion license key is invalid.</span>",platformMismatched:"<span>The included Syncfusion license key is invalid.</span>",invalidKey:"<span>The included Syncfusion license key is invalid.</span>"},this.manager=function(){var e=null;return{setKey:function(t){e=t},getKey:function(){return e}}}(),this.npxManager={getKey:function(){return"npxKeyReplace"}},this.manager.setKey(e)}return e.prototype.validate=function(){if(!this.isValidated&&gg&&!fg(ny($v),gg)&&!fg("Blazor",gg)){var e=void 0,t=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var n=this.getInfoFromKey();if(n&&n.length)for(var r=0,i=n;r<i.length;r++){var o=i[r];if(!this.platform.test(o.platform)||o.invalidPlatform)e=this.errors.platformMismatched;else if(-1===o.version.indexOf(this.version))e=(e=(e=this.errors.versionMismatched).replace("##LicenseVersion",o.version)).replace("##Requireversion",this.version+".x");else if(o.expiryDate){var s=new Date(o.expiryDate),a=new Date;if(!(s!==a&&s<a))break;e=this.errors.trailExpired}}else e=this.errors.invalidKey}else{var c=fg(ny([115,121,110,99,102,117,115,105,111,110,46,108,105,99,101,110,115,101,67,111,110,116,101,110,116]),gg);t=fg(ny([115,121,110,99,102,117,115,105,111,110,46,99,108,97,105,109,65,99,99,111,117,110,116,85,82,76]),gg),e=c&&""!==c?c:this.errors.noLicense}if(e&&"undefined"!==typeof document&&!_g(document)){var l=gv("div",{innerHTML:"<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"top: 6px;\n                    position: absolute;\n                    left: 16px;\n                    width: 24px;\n                    height: 24px;\"/>"+e+' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href='+(Qv=t&&""!==t?t:"https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=MjAuNA==")+">Claim your free account</a>"});l.setAttribute("style","position: fixed;\n                top: 10px;\n                left: 10px;\n                right: 10px;\n                font-size: 14px;\n                background: #EEF2FF;\n                color: #222222;\n                z-index: 999999999;\n                text-align: left;\n                border: 1px solid #EEEEEE;\n                padding: 10px 11px 10px 50px;\n                border-radius: 8px;\n                font-family: Helvetica Neue, Helvetica, Arial;"),document.body.appendChild(l),this.isLicensed=!1}this.isValidated=!0,mg(ny($v),this.isValidated,gg)}return this.isLicensed},e.prototype.getDecryptedData=function(e){try{return atob(e)}catch(t){return""}},e.prototype.getInfoFromKey=function(){try{var e="",t=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],n=[],r=[],i=!1,o=!1;this.manager.getKey()?e=this.manager.getKey():(o=!0,e=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var s=e.split(";"),a=0,c=s;a<c.length;a++){var l=c[a],u=this.getDecryptedData(l);if(u){var d=0,p="";if(o){var h=u[u.length-1],f=[];for(m=0;m<u.length;m++)f[parseInt(m.toString(),10)]=u[parseInt(m.toString(),10)].charCodeAt(0)-h.charCodeAt(0);for(m=0;m<f.length;m++)p+=String.fromCharCode(f[parseInt(m.toString(),10)])}else for(var m=0;m<u.length;m++,d++){d===t.length&&(d=0);var g=u.charCodeAt(m);p+=String.fromCharCode(g^t[parseInt(d.toString(),10)]>>16)}this.platform.test(p)?(n=p.split(";"),i=!1,n.length>3&&r.push({platform:n[0],version:n[1],expiryDate:n[2]})):p&&p.split(";").length>3&&(i=!0)}}return i&&!r.length?[{invalidPlatform:i}]:r.length?r:null}catch(v){return null}},e}(),ty=new ey;function ny(e){for(var t="",n=0,r=e;n<r.length;n++){var i=r[n];t+=String.fromCharCode(i)}return t}var ry,iy=function(e){return e&&function(e){ty=new ey(e)}(e),ty.validate()},oy=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sy=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},ay=0,cy=0,ly=0,uy=!0,dy=!1,py=!1;var hy=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.randomId=function(){if("undefined"!==typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),r.isStringTemplate=!1,r.needsID=!1,r.isReactHybrid=!1,_g(r.enableRtl)&&r.setProperties({enableRtl:Xg},!0),_g(r.locale)&&r.setProperties({locale:$g},!0),r.moduleLoader=new Jv(r),r.localObserver=new Qg(r),Jg.on("notifyExternalChange",r.detectFunction,r,r.randomId),"undefined"===typeof window||"undefined"===typeof document||iy()||-1!==Zv.indexOf(r.getModuleName())&&(ly+=1)>5&&(uy=!1),bg(n)||r.appendTo(),r}return oy(t,e),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(yv([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),Jg.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new Qg(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.getLocalData=function(){var e=this.getModuleName()+this.element.id;return py?window.localStorage.getItem(e+this.ej2StatePersistenceVersion):window.localStorage.getItem(e)},t.prototype.appendTo=function(t){if(_g(t)||"string"!==typeof t?_g(t)||(this.element=t):this.element=Tv(t,document),!_g(this.element)){var n="e-"+this.getModuleName().toLowerCase();vv([this.element],["e-control",n]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var r=fg("ej2_instances",this.element);r&&-1!==r.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),uy||dy||(!function(){var e='\n    <div style="\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 99999;\n    ">\n        <div style="\n    background: #FFFFFF;\n    height: 455px;\n    width: 840px;\n    font-family: Helvetica Neue, Helvetica, Arial;\n    color: #000000;\n    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n    display: block;\n    margin: 8% auto;\n    border-radius: 20px;\n    ">\n            <div style="\n    position: absolute;\nwidth: 838px;\nheight: 62px;\nbackground-color: #F9F9F9;\nborder: 1px solid #EEEEEE;\nborder-top-left-radius: 20px;\nborder-top-right-radius: 20px;\n">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n    text-align: left;\n    width: 146px;\n    position: absolute;\n    top: 14px;\n    left: 31px;\n">\n            </div>\n            <div style="\n    position: relative;\n    top: 80px;\n    left: 32px;\n    font-size: 20px;\n    text-align: left;\n    font-weight: 700;\n    letter-spacing: 0.02em;\n    font-style: normal;\n    line-height: 125%;\n    ">Claim your FREE account and get a key in less than a minute</div>\n            <ul style="\n        font-size: 15px;\n        font-weight: 400;\n        color: #333333;\n        letter-spacing: 0.01em;\n        position: relative;\n        left: 32px;\n        top: 88px;\n        line-height: 180%;\n        ">\n                <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                <li><span>Access to 24x5 support by developers via the <a href="https://support.syncfusion.com/create" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">support tickets</a>, <a href="https://www.syncfusion.com/forums" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">forum</a>, <a href="https://www.syncfusion.com/feedback" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">feature &amp; feedback page</a> and chat.</span></li>\n                <li><span>200+ <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">ebooks </a>on the latest technologies, industry trends, and research topics.</span>\n                </li>\n                <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Metro Studio.</a></span></li>\n                <li><span>Free and unlimited access to Syncfusion technical <a href="https://www.syncfusion.com/blogs/" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">blogs</a> and <a href="https://www.syncfusion.com/resources/techportal/whitepapers" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">whitepapers.</a></span></li>\n            </ul>\n            <div style="\n            font-size: 18px;\n            font-weight: 700;\n            position: relative;\n            line-height: 125%;\n            letter-spacing: 0.02em;\n            top: 90px;\n            left: 32px;\n    ">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K" style="\n            width: 742.5px;\n            position: relative;\n            top: 107px;\n            left: 32px;\n            ">\n            <a href='+Qv+' style="\n        float: left;\n        border-radius: 56px;\n        background: #0D6EFD;\n        padding-top: 8px;\n        width: 280px;\n        height: 38px;\n        text-align: center;\n        position: relative;\n        top: 127px;\n        left: 274px;\n        font-size: 16px;\n        color: white;\n        text-decoration: none;\n        letter-spacing: 0.02em;\n    ">Claim your FREE account</a>\n            <div style="\n    font-size: 14px;\n    position: relative;\n    top: 180px;\n    left: 19px;\n    letter-spacing: 0.02em;\n    font-weight: 500;\n    line-height: 125%;\n">have a Syncfusion account? <a href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login" style="text-decoration: none;\ncolor: #0D6EFD;\nfont-weight: 500;">Sign In</a></div>\n        </div>\n    </div>';if("undefined"!==typeof document&&!_g(document)){var t=gv("div",{innerHTML:e});document.body.appendChild(t)}}(),dy=!0),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){if(Ng()){window.sfBlazor.renderComplete(this.element,e)}this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},t.prototype.on=function(e,t,n){if("string"===typeof e)this.localObserver.on(e,t,n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];this.localObserver.on(o.event,o.handler,o.context)}},t.prototype.off=function(e,t){if("string"===typeof e)this.localObserver.off(e,t);else for(var n=0,r=e;n<r.length;n++){var i=r[n];this.localObserver.off(i.event,i.handler)}},t.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var n=0;n<e.length;n++)-1===this.prototype.injectedModules.indexOf(e[parseInt(n.toString(),10)])&&this.prototype.injectedModules.push(e[parseInt(n.toString(),10)])},t.prototype.createElement=function(e,t,n){return gv(e,t)},t.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},t.prototype.mergePersistData=function(){var e;_g(e=py?window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):window.localStorage.getItem(this.getModuleName()+this.element.id))||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||(py?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},t.prototype.renderReactTemplates=function(e){_g(e)||e()},t.prototype.clearTemplate=function(e,t){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(ay=0),ry=this.pageID(location.href),cy=history.length,e+"_"+ry+"_"+ay++},t.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return Math.abs(t)},t.prototype.isHistoryChanged=function(){return ry!==this.pageID(location.href)||cy!==history.length},t.prototype.addOnPersist=function(e){for(var t=this,n={},r=0,i=e;r<i.length;r++){var o,s=i[r];bg(o=fg(s,this))||mg(s,this.getActualProperties(o),n)}return JSON.stringify(n,(function(e,n){return t.getActualProperties(n)}))},t.prototype.getActualProperties=function(e){return e instanceof Xv?fg("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,t){for(var n={},r=function(r){if(-1===t.indexOf(r)){var o=e[r];if("object"!==typeof o||o instanceof Array)n[""+r]=o;else{var s=t.filter((function(e){return new RegExp(r+".").test(e)})).map((function(e){return e.replace(r+".","")}));n[""+r]=i.iterateJsonProperties(i.getActualProperties(o),s)}}},i=this,o=0,s=Object.keys(e);o<s.length;o++){r(s[o])}return n},sy([zv(!1)],t.prototype,"enablePersistence",void 0),sy([zv()],t.prototype,"enableRtl",void 0),sy([zv()],t.prototype,"locale",void 0),t=sy([Hv],t)}(Av);"undefined"!==typeof window&&window.addEventListener("popstate",(function(){ay=0}));var fy=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),my=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},gy={left:0,top:0,bottom:0,right:0},vy={isDragged:!1},yy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fy(t,e),my([zv(0)],t.prototype,"left",void 0),my([zv(0)],t.prototype,"top",void 0),t}(Xv),Ey=function(e){function t(t,r){var i=e.call(this,r,t)||this;return i.dragLimit=n.getDefaultPosition(),i.borderWidth=n.getDefaultPosition(),i.padding=n.getDefaultPosition(),i.diffX=0,i.prevLeft=0,i.prevTop=0,i.dragProcessStarted=!1,i.eleTop=0,i.tapHoldTimer=0,i.externalInitialize=!1,i.diffY=0,i.parentScrollX=0,i.parentScrollY=0,i.droppables={},i.bind(),i}var n;return fy(t,e),n=t,t.prototype.bind=function(){this.toggleEvents(),hv.isIE&&vv([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return Eg({},gy)},t.prototype.toggleEvents=function(e){var t;bg(this.handle)||(t=Tv(this.handle,this.element));var n=this.enableTapHold&&hv.isDevice&&hv.isTouch?this.mobileInitialize:this.initialize;e?fv.remove(t||this.element,hv.touchStartEvent,n):fv.add(t||this.element,hv.touchStartEvent,n,this)},t.prototype.mobileInitialize=function(e){var t=this,n=e.currentTarget;this.tapHoldTimer=setTimeout((function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,n)}),this.tapHoldThreshold),fv.add(document,hv.touchMoveEvent,this.removeTapholdTimer,this),fv.add(document,hv.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),fv.remove(document,hv.touchMoveEvent,this.removeTapholdTimer),fv.remove(document,hv.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return _g(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[""+t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[""+t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY),this.tempScrollHeight=e.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),this.tempScrollWidth=e.scrollWidth),_g(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.currentStateTarget=e.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){var n=this.abort;"string"===typeof n&&(n=[n]);for(var r=0;r<n.length;r++)if(!_g(Nv(e.target,n[parseInt(r.toString(),10)])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!bg(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var i=this.getCoordinates(e);if(this.initialPosition={x:i.pageX,y:i.pageY},!this.clone){var o=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=i.pageX-(o.left+this.parentScrollX),this.relativeYPosition=i.pageY-(o.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(fv.add(document,hv.touchMoveEvent,this.intDragStart,this),fv.add(document,hv.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,fv.trigger(document.documentElement,hv.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!bg(e.changedTouches);if(!t||1===e.changedTouches.length){var n,r=this.getCoordinates(e),i=getComputedStyle(this.element);this.margin={left:parseInt(i.marginLeft,10),top:parseInt(i.marginTop,10),right:parseInt(i.marginRight,10),bottom:parseInt(i.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var s=Nv(e.target,this.dragTarget);_g(s)||(o=s)}this.isReplaceDragEle&&(o=this.currentStateCheck(e.target,o)),this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e,this.isDragScroll);var a=this.initialPosition.x-r.pageX,c=this.initialPosition.y-r.pageY;if(Math.sqrt(a*a+c*c)>=this.distance||this.externalInitialize){var l=this.getHelperElement(e);if(!l||_g(l))return;t&&e.preventDefault();var u=this.helperElement=l;if(this.parentClientRect=this.calculateParentPosition(u.offsetParent),this.dragStart){var d={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:Ng()?this.bindDragEvents.bind(this):null,dragElement:u};this.trigger("dragStart",d)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),n={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var p=getComputedStyle(o),h=parseFloat(p.marginTop);this.clone&&0!==h&&(n.top+=h),this.eleTop=isNaN(parseFloat(p.top))?0:parseFloat(p.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(n.top-=this.parentScrollY,n.left-=this.parentScrollX);var f=this.getProcessedPositionValue({top:n.top-this.diffY+"px",left:n.left-this.diffX+"px"});this.dragArea&&"string"!==typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(n.top+=this.dragArea.scrollTop),this.dragElePosition={top:n.top,left:n.left},wv(u,this.getDragPosition({position:"absolute",left:f.left,top:f.top})),fv.remove(document,hv.touchMoveEvent,this.intDragStart),fv.remove(document,hv.touchEndEvent,this.intDestroy),Ng()||this.bindDragEvents(u)}}},t.prototype.bindDragEvents=function(e){_v(e)?(fv.add(document,hv.touchMoveEvent,this.intDrag,this),fv.add(document,hv.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(_g(e))return{left:0,top:0};var t=e.getBoundingClientRect(),n=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(n.marginLeft,10),top:t.top+window.pageYOffset-parseInt(n.marginTop,10)}},t.prototype.intDrag=function(e){if(bg(e.changedTouches)||1===e.changedTouches.length){var t,n;this.clone&&e.changedTouches&&hv.isDevice&&hv.isTouch&&e.preventDefault(),this.position=this.getMousePosition(e,this.isDragScroll);var r=this.getDocumentWidthHeight("Height");r<this.position.top&&(this.position.top=r);var i=this.getDocumentWidthHeight("Width");if(i<this.position.left&&(this.position.left=i),this.drag){var o=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:o})}var s=this.checkTargetElement(e);if(s.target&&s.instance){var a=!0;this.hoverObject&&(this.hoverObject.instance!==s.instance?this.triggerOutFunction(e,s):a=!1),a&&(s.instance.dragData[this.scope]=this.droppables[this.scope],s.instance.intOver(e,s.target),this.hoverObject=s)}else this.hoverObject&&this.triggerOutFunction(e,s);var c=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var l=this.parentClientRect.left,u=this.parentClientRect.top,d=this.getCoordinates(e),p=d.pageX,h=d.pageY,f=this.position.left-this.diffX,m=this.position.top-this.diffY,g=getComputedStyle(c);if(this.dragArea){if(this.pageX!==p||this.skipDistanceCheck){var v=c.offsetWidth+(parseFloat(g.marginLeft)+parseFloat(g.marginRight));t=this.dragLimit.left>f&&f>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<f+v&&f>0?f-(f-this.dragLimit.right)+window.pageXOffset-v:f<0?this.dragLimit.left:f}if(this.pageY!==h||this.skipDistanceCheck){var y=c.offsetHeight+(parseFloat(g.marginTop)+parseFloat(g.marginBottom));n=this.dragLimit.top>m&&m>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<m+y&&m>0?m-(m-this.dragLimit.bottom)+window.pageYOffset-y:m<0?this.dragLimit.top:m}}else t=f,n=m;var E,_,b=u+this.borderWidth.top,S=l+this.borderWidth.left;this.dragProcessStarted&&(_g(n)&&(n=this.prevTop),_g(t)&&(t=this.prevLeft)),this.helperElement.classList.contains("e-treeview")?this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,E=n-b<0?this.dragLimit.top:n-this.borderWidth.top,_=t-S<0?this.dragLimit.left:t-this.borderWidth.left):(E=n-this.borderWidth.top,_=t-this.borderWidth.left):this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,E=n-b<0?this.dragLimit.top:n-b,_=t-S<0?this.dragElePosition.left:t-S):(E=n-b,_=t-S);var T=parseFloat(getComputedStyle(this.element).marginTop);if(T>0&&(this.clone&&(E+=T,m<0&&(T+m>=0?E=T+m:E-=T),E=this.dragLimit.bottom<E?this.dragLimit.bottom:E),n-b<0))if(m+T+(c.offsetHeight-b)>=0){var I=this.dragLimit.top+m-b;I+T+b<0?E-=T+b:E=I}else E-=T+b;if(this.dragArea&&this.helperElement.classList.contains("e-treeview"))E=E+(y=c.offsetHeight+(parseFloat(g.marginTop)+parseFloat(g.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-y:E;this.enableScrollHandler&&!this.clone&&(E-=this.parentScrollY,_-=this.parentScrollX),this.dragArea&&"string"!==typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(E+=this.dragArea.scrollTop);var N=this.getProcessedPositionValue({top:E+"px",left:_+"px"});wv(c,this.getDragPosition(N)),this.elementInViewport(c)||!this.enableAutoScroll||this.helperElement.classList.contains("e-treeview")||this.helperElement.scrollIntoView();var w=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===w.length&&(w=this.getPathElements(e));var C=this.getScrollParent(w,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(C,E):this.elementInViewport(this.helperElement)||(0===(w=[].slice.call(document.querySelectorAll(":hover"))).length&&(w=this.getPathElements(e)),C=this.getScrollParent(w,!0),this.getScrollPosition(C,E))}this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=n,this.position.left=t,this.position.top=n,this.pageX=p,this.pageY=h}},t.prototype.getScrollParent=function(e,t){for(var n,r=t?e.reverse():e,i=r.length-1;i>=0;i--)if(("auto"===(n=window.getComputedStyle(r[parseInt(i.toString(),10)])["overflow-y"])||"scroll"===n)&&r[parseInt(i.toString(),10)].scrollHeight>r[parseInt(i.toString(),10)].clientHeight)return r[parseInt(i.toString(),10)];if("visible"===(n=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},t.prototype.getScrollPosition=function(e,t){e&&e===document.scrollingElement?e.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<t&&e.getBoundingClientRect().height+this.parentClientRect.top>t?e.scrollTop+=this.helperElement.clientHeight:e.scrollTop>t-this.helperElement.clientHeight&&(e.scrollTop-=this.helperElement.clientHeight):e&&e!==document.scrollingElement&&(e.clientHeight+e.getBoundingClientRect().top-this.helperElement.clientHeight+document.scrollingElement.scrollTop<t?e.scrollTop+=this.helperElement.clientHeight:e.getBoundingClientRect().top>t-this.helperElement.clientHeight-document.scrollingElement.scrollTop&&(e.scrollTop-=this.helperElement.clientHeight))},t.prototype.getPathElements=function(e){var t=e.clientX>0?e.clientX:0,n=e.clientY>0?e.clientY:0;return document.elementsFromPoint(t,n)},t.prototype.triggerOutFunction=function(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(e){var t=Eg({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,n=document.documentElement;return Math.max(t["scroll"+e],n["scroll"+e],t["offset"+e],n["offset"+e],n["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,bg(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var n=this.checkTargetElement(e);n.target&&n.instance&&(n.instance.dragStopCalled=!0,n.instance.dragData[this.scope]=this.droppables[this.scope],n.instance.intDrop(e,n.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),fv.remove(document,hv.touchMoveEvent,this.intDragStart),fv.remove(document,hv.touchEndEvent,this.intDragStop),fv.remove(document,hv.touchEndEvent,this.intDestroy),fv.remove(document,hv.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(e){return e&&(vy.isDragged=!vy.isDragged),vy.isDragged},t.prototype.setDragArea=function(){var e,t,n,r=0,i=0;if(n="string"===typeof this.dragArea?Tv(this.dragArea):this.dragArea){var o=n.getBoundingClientRect();e=n.scrollWidth?n.scrollWidth:o.right-o.left,t=n.scrollHeight?this.dragArea&&!_g(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?n.clientHeight:n.scrollHeight:o.bottom-o.top;for(var s=["Top","Left","Bottom","Right"],a=getComputedStyle(n),c=0;c<s.length;c++){var l=s[parseInt(c.toString(),10)],u=a["border"+l+"Width"],d=a["padding"+l],p=l.toLowerCase();this.borderWidth[""+p]=isNaN(parseFloat(u))?0:parseFloat(u),this.padding[""+p]=isNaN(parseFloat(d))?0:parseFloat(d)}r=this.dragArea&&!_g(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?o.top+document.scrollingElement.scrollTop:o.top,i=o.left,this.dragLimit.left=i+this.borderWidth.left+this.padding.left,this.dragLimit.top=n.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=i+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=r+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,n=this.getCoordinates(e),r=this.helperElement.style.pointerEvents||"",i=-1!==e.type.indexOf("pointer")&&"safari"===hv.info.name&&parseInt(hv.info.version)>12;return Sg(e.target,this.helperElement)||-1!==e.type.indexOf("touch")||i?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(n.clientX,n.clientY),this.helperElement.style.pointerEvents=r):t=e.target,t},t.prototype.currentStateCheck=function(e,t){return _g(this.currentStateTarget)||this.currentStateTarget===e?_g(t)?e:t:this.currentStateTarget},t.prototype.getMousePosition=function(e,t){var n,r,i=void 0!==e.srcElement?e.srcElement:e.target,o=this.getCoordinates(e),s=_g(i.offsetParent);if(t?(n=this.clone?o.pageX:o.pageX+(s?0:i.offsetParent.scrollLeft)-this.relativeXPosition,r=this.clone?o.pageY:o.pageY+(s?0:i.offsetParent.scrollTop)-this.relativeYPosition):(n=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,r=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),this.element&&this.element.classList.length>0&&-1===this.element.classList.value.indexOf("e-dialog")&&document.scrollingElement){var a=document.scrollingElement.scrollHeight>0&&document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight&&document.scrollingElement.scrollTop>0;n=document.scrollingElement.scrollWidth>0&&document.scrollingElement.scrollWidth>document.scrollingElement.clientWidth&&document.scrollingElement.scrollLeft>0?n-document.scrollingElement.scrollLeft:n,r=a?r-document.scrollingElement.scrollTop:r}return{left:n-(this.margin.left+this.cursorAt.left),top:r-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=gv("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,n){this.droppables[this.scope]=e?null:{draggable:t,helper:n,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),n=this.getDropInstance(t);if(!n&&t&&!_g(t.parentNode)){var r=Nv(t.parentNode,".e-droppable")||t.parentElement;r&&(n=this.getDropInstance(r))}return{target:t,instance:n}},t.prototype.getDropInstance=function(e){var t,n=e&&e.ej2_instances;if(n)for(var r=0,i=n;r<i.length;r++){var o=i[r];if("droppable"===o.getModuleName()){t=o;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},my([Bv({},yy)],t.prototype,"cursorAt",void 0),my([zv(!0)],t.prototype,"clone",void 0),my([zv()],t.prototype,"dragArea",void 0),my([zv()],t.prototype,"isDragScroll",void 0),my([zv()],t.prototype,"isReplaceDragEle",void 0),my([zv(!0)],t.prototype,"isPreventSelect",void 0),my([Vv()],t.prototype,"drag",void 0),my([Vv()],t.prototype,"dragStart",void 0),my([Vv()],t.prototype,"dragStop",void 0),my([zv(1)],t.prototype,"distance",void 0),my([zv()],t.prototype,"handle",void 0),my([zv()],t.prototype,"abort",void 0),my([zv()],t.prototype,"helper",void 0),my([zv("default")],t.prototype,"scope",void 0),my([zv("")],t.prototype,"dragTarget",void 0),my([zv()],t.prototype,"axis",void 0),my([zv()],t.prototype,"queryPositionInfo",void 0),my([zv(!1)],t.prototype,"enableTailMode",void 0),my([zv(!1)],t.prototype,"skipDistanceCheck",void 0),my([zv(!0)],t.prototype,"preventDefault",void 0),my([zv(!1)],t.prototype,"enableAutoScroll",void 0),my([zv(!1)],t.prototype,"enableTapHold",void 0),my([zv(750)],t.prototype,"tapHoldThreshold",void 0),my([zv(!1)],t.prototype,"enableScrollHandler",void 0),t=n=my([Hv],t)}(Av),_y=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),by=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Sy=(function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.mouseOver=!1,r.dragData={},r.dragStopCalled=!1,r.bind(),r}_y(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){fv.add(this.element,hv.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var n=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:n}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var n,r=!0,i=this.dragData[this.scope],o=!!i&&(i.helper&&_v(i.helper));o&&(n=this.isDropArea(e,i.helper,t),this.accept&&(r=Cv(i.helper,this.accept))),o&&this.drop&&n.canDrop&&r&&this.trigger("drop",{event:e,target:n.target,droppedElement:i.helper,dragData:i}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,n){var r={canDrop:!0,target:n||e.target},i="touchend"===e.type;if(i||r.target===t){t.style.display="none";var o=i?e.changedTouches[0]:e,s=document.elementFromPoint(o.clientX,o.clientY);r.canDrop=!1,r.canDrop=Sg(s,this.element),r.canDrop&&(r.target=s),t.style.display=""}return r},t.prototype.destroy=function(){fv.remove(this.element,hv.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},by([zv()],t.prototype,"accept",void 0),by([zv("default")],t.prototype,"scope",void 0),by([Vv()],t.prototype,"drop",void 0),by([Vv()],t.prototype,"over",void 0),by([Vv()],t.prototype,"out",void 0),t=by([Hv],t)}(Av),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Ty=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Iy={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Ny=(function(e){function t(t,r){var i=e.call(this,r,t)||this;return i.keyPressHandler=function(e){for(var t=e.altKey,r=e.ctrlKey,o=e.shiftKey,s=e.which,a=0,c=Object.keys(i.keyConfigs);a<c.length;a++)for(var l=c[a],u=0,d=i.keyConfigs[""+l].split(",");u<d.length;u++){var p=d[u],h=n.getKeyConfigData(p.trim());t===h.altKey&&r===h.ctrlKey&&o===h.shiftKey&&s===h.keyCode&&(e.action=l,i.keyAction&&i.keyAction(e))}},i.bind(),i}var n;Sy(t,e),n=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[""+e];var t=e.toLowerCase().split("+"),r={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?r.keyCode=Number(t[t.length-1]):r.keyCode=n.getKeyCode(t[t.length-1]),n.configCache[""+e]=r,r},t.getKeyCode=function(e){return Iy[""+e]||e.toUpperCase().charCodeAt(0)},t.configCache={},Ty([zv({})],t.prototype,"keyConfigs",void 0),Ty([zv("keyup")],t.prototype,"eventName",void 0),Ty([Vv()],t.prototype,"keyAction",void 0),t=n=Ty([Hv],t)}(Av),function(){function e(e,t,n){this.controlName=e,this.localeStrings=t,this.setLocale(n||$g)}e.prototype.setLocale=function(t){var n=this.intGetControlConstant(e.locale,t);this.currentLocale=n||this.localeStrings},e.load=function(e){this.locale=Eg(this.locale,e,{},!0)},e.prototype.getConstant=function(e){return _g(this.currentLocale[""+e])?this.localeStrings[""+e]||"":this.currentLocale[""+e]},e.prototype.intGetControlConstant=function(e,t){return e[""+t]?e[""+t][this.controlName]:null},e.locale={}}(),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),wy=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Cy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ny(t,e),wy([zv(50)],t.prototype,"swipeThresholdDistance",void 0),t}(Xv),Oy=/(Up|Down)/,Ay=(function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.touchAction=!0,r.tapCount=0,r.startEvent=function(e){if(!0===r.touchAction){var t=r.updateChangeTouches(e);void 0!==e.changedTouches&&(r.touchAction=!1),r.isTouchMoved=!1,r.movedDirection="",r.startPoint=r.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},r.startEventData=t,r.hScrollLocked=r.vScrollLocked=!1,r.tStampStart=Date.now(),r.timeOutTapHold=setTimeout((function(){r.tapHoldEvent(e)}),r.tapHoldThreshold),fv.add(r.element,hv.touchMoveEvent,r.moveEvent,r),fv.add(r.element,hv.touchEndEvent,r.endEvent,r),fv.add(r.element,hv.touchCancelEvent,r.cancelEvent,r)}},r.moveEvent=function(e){var t=r.updateChangeTouches(e);r.movedPoint=t,r.isTouchMoved=!(t.clientX===r.startPoint.clientX&&t.clientY===r.startPoint.clientY);var n={};r.isTouchMoved&&(clearTimeout(r.timeOutTapHold),r.calcScrollPoints(e),n=Eg(n,{},{startEvents:r.startEventData,originalEvent:e,startX:r.startPoint.clientX,startY:r.startPoint.clientY,distanceX:r.distanceX,distanceY:r.distanceY,scrollDirection:r.scrollDirection,velocity:r.getVelocity(t)}),r.trigger("scroll",n),r.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},r.cancelEvent=function(e){clearTimeout(r.timeOutTapHold),clearTimeout(r.timeOutTap),r.tapCount=0,r.swipeFn(e),fv.remove(r.element,hv.touchCancelEvent,r.cancelEvent)},r.endEvent=function(e){r.swipeFn(e),r.isTouchMoved||"function"===typeof r.tap&&(r.trigger("tap",{originalEvent:e,tapCount:++r.tapCount}),r.timeOutTap=setTimeout((function(){r.tapCount=0}),r.tapThreshold)),r.modeclear()},r.swipeFn=function(e){clearTimeout(r.timeOutTapHold),clearTimeout(r.timeOutTap);var t=r.updateChangeTouches(e),n=t.clientX-r.startPoint.clientX,i=t.clientY-r.startPoint.clientY;n=Math.floor(n<0?-1*n:n),i=Math.floor(i<0?-1*i:n),r.isTouchMoved=n>1||i>1,/Firefox/.test(hv.userAgent)&&0===t.clientX&&0===t.clientY&&"mouseup"===e.type&&(r.isTouchMoved=!1),r.endPoint=t,r.calcPoints(e);var o={originalEvent:e,startEvents:r.startEventData,startX:r.startPoint.clientX,startY:r.startPoint.clientY,distanceX:r.distanceX,distanceY:r.distanceY,swipeDirection:r.movedDirection,velocity:r.getVelocity(t)};if(r.isTouchMoved){var s=void 0,a=r.swipeSettings.swipeThresholdDistance;s=Eg(s,r.defaultArgs,o);var c=!1,l=r.element,u=r.isScrollable(l),d=Oy.test(r.movedDirection);(a<r.distanceX&&!d||a<r.distanceY&&d)&&(c=!u||r.checkSwipe(l,d)),c&&r.trigger("swipe",s)}r.modeclear()},r.modeclear=function(){r.modeClear=setTimeout((function(){r.touchAction=!0}),"function"!==typeof r.tap?0:20),r.lastTapTime=(new Date).getTime(),fv.remove(r.element,hv.touchMoveEvent,r.moveEvent),fv.remove(r.element,hv.touchEndEvent,r.endEvent),fv.remove(r.element,hv.touchCancelEvent,r.cancelEvent)},r.bind(),r}Ny(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),hv.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){fv.add(this.element,hv.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){fv.remove(this.element,hv.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),n=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(n)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,fv.remove(this.element,hv.touchMoveEvent,this.moveEvent),fv.remove(this.element,hv.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),fv.remove(this.element,hv.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,n=e.clientY,r=Date.now(),i=t-this.startPoint.clientX,o=n-this.startPoint.clientX,s=r-this.tStampStart;return Math.sqrt(i*i+o*o)/s},t.prototype.checkSwipe=function(e,t){var n=["scroll","offset"],r=t?["Height","Top"]:["Width","Left"];return e[n[0]+r[0]]<=e[n[1]+r[0]]||(0===e[n[0]+r[1]]||e[n[1]+r[0]]+e[n[0]+r[1]]>=e[n[0]+r[0]])},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},wy([Vv()],t.prototype,"tap",void 0),wy([Vv()],t.prototype,"tapHold",void 0),wy([Vv()],t.prototype,"swipe",void 0),wy([Vv()],t.prototype,"scroll",void 0),wy([zv(350)],t.prototype,"tapThreshold",void 0),wy([zv(750)],t.prototype,"tapHoldThreshold",void 0),wy([Bv({},Cy)],t.prototype,"swipeSettings",void 0),t=wy([Hv],t)}(Av),new RegExp("\\n|\\r|\\s\\s+","g")),Ry=new RegExp(/'|"/g),My=new RegExp("if ?\\("),Dy=new RegExp("else if ?\\("),ky=new RegExp("else"),xy=new RegExp("for ?\\("),Ly=new RegExp("(/if|/for)"),Py=new RegExp("\\((.*)\\)",""),jy=new RegExp("^[0-9]+$","g"),Uy=new RegExp("[\\w\"'.\\s+]+","g"),Fy=new RegExp('"(.*?)"',"g"),zy=new RegExp("[\\w\"'@#$.\\s-+]+","g"),By=new RegExp("\\${([^}]*)}","g"),Vy=/^\..*/gm,Hy=/\\/gi,Gy=/\\\\/gi,Wy=new RegExp("[\\w\"'@#$.\\s+]+","g"),Yy=/\window\./gm;function qy(e,t,n){var r="data",i=function(e,t,n,r){var i=0,o=[],s=e.match(/class="([^"]+|)\s{2}/g),a="";s&&s.forEach((function(t){a=t.replace(/\s\s+/g," "),e=e.replace(t,a)}));return e.replace(Ay,"").replace(Fy,"'$1'").replace(By,(function(e,s,a,c){var l=/@|#|\$/gm,u=s.match(Py);if(u){var d=u[1];if(Dy.test(s))s='";} '+s.replace(u[1],d.replace(Uy,(function(e){return Ky(e=e.trim(),!Ry.test(e)&&-1===o.indexOf(e),t,o,r)})))+'{ \n str = str + "';else if(My.test(s))s='"; '+s.replace(u[1],d.replace(zy,(function(e){return Xy(e,t,o,r)})))+'{ \n str = str + "';else if(xy.test(s)){var p=u[1].split(" of ");s='"; '+s.replace(u[1],(function(e){return o.push(p[0]),o.push(p[0]+"Index"),"var i"+(i+=1)+"=0; i"+i+" < "+Ky(p[1],!0,t,o,r)+".length; i"+i+"++"}))+"{ \n "+p[0]+"= "+Ky(p[1],!0,t,o,r)+"[i"+i+"]; \n var "+p[0]+"Index=i"+i+'; \n str = str + "'}else{var h=s.split("("),f=n&&n.hasOwnProperty(h[0])?"this.":"global";f=/\./.test(h[0])?"":f;var m=u[1].split(",");0===u[1].length||/data/.test(m[0])||/window./.test(m[0])||(u[1]="global"===f?t+"."+u[1]:u[1]);var g=/@|\$|#/gm,v=/\]\./gm;if(Yy.test(s)&&v.test(s)||g.test(s))/@|\$|#|\]\./gm.test(s)&&(s='"+ '+("global"===f?"":f)+s.replace(u[1],d.replace(Wy,(function(e){return Xy(e,t,o,r)})))+'+ "');else s='" + '+("global"===f?"":f)+s.replace(d,Ky(u[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==f,t,o,r))+'+"'}}else ky.test(s)?s='"; '+s.replace(ky,'} else { \n str = str + "'):s.match(Ly)?s=s.replace(Ly,'"; \n } \n str = str + "'):l.test(s)?(s.match(Hy)&&(s=Jy(s)),s='"+'+Qy(s,-1===o.indexOf(s),t,o)+'"]+"'):s=s.match(Hy)?'"+'+Qy(s=Jy(s),-1===o.indexOf(s),t,o)+'"]+"':""!==s?'"+'+Ky(s.replace(/,/gi,"+"+t+"."),-1===o.indexOf(s),t,o,r)+'+"':" ";return s}))}(e,r,t,n);return new Function(r,'var str="'+i+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n    if(str.match(valueRegEx)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if(str.match(hrefRegex)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                if (check1) {\n                    var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                    change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                    str1 = str1.replace(check1, change);\n                }\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;").bind(t)}function Ky(e,t,n,r,i){return!t||jy.test(e)||-1!==r.indexOf(e.split(".")[0])||i?e:n+"."+e}function Qy(e,t,n,r){return t&&!jy.test(e)&&-1===r.indexOf(e.split(".")[0])?n+'["'+e:e}function Jy(e){return e.match(Gy)||(e=e.replace(Hy,"\\\\")),e}function Xy(e,t,n,r){e=e.trim();if(/\window\./gm.test(e))return e;var i=/'|"/gm;return/@|\$|#/gm.test(e)&&(e=Qy(e,-1===n.indexOf(e),t,n)+'"]'),Vy.test(e)?function(e,t,n,r){return!t||jy.test(e)||-1!==r.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:n+"."+e}(e,!i.test(e)&&-1===n.indexOf(e),t,n):Ky(e,!i.test(e)&&-1===n.indexOf(e),t,n,r)}var Zy=/^[\n\r.]+<tr|^<tr/,$y=/^[\n\r.]+<svg|^<path|^<g/,eE={};function tE(e,t,n){var r=nE.compile(e,t,n);return function(e,t,n,i,o,s,a,c){var l=r(e,t,n,a,c),u="BlazorTemplateId";if(Ng()&&!o){var d=i+("-"+Math.random().toString(36).substr(2,5));if(eE[""+i]||(eE[""+i]=[]),_g(s))e[""+u]=d,eE[""+i].push(e);else for(var p=0,h=Object.keys(eE[""+i][parseInt(s.toString(),10)]);p<h.length;p++){var f=h[p];f!==u&&e[""+f]&&(eE[""+i][parseInt(s.toString(),10)][""+f]=e[""+f]),f===u&&(d=eE[""+i][parseInt(s.toString(),10)][""+f])}return"rowTemplate"===n?[gv("tr",{id:d,className:"e-blazor-template"})]:[gv("div",{id:d,className:"e-blazor-template"})]}return"string"===typeof l?$y.test(l)?gv("svg",{innerHTML:l}).childNodes:gv(Zy.test(l)?"table":"div",{innerHTML:l}).childNodes:l}}var nE={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t,n){return void 0===t&&(t={}),qy(e,t)},e}())).compile},rE=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],iE=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],oE=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],sE=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:rE,attributes:iE}}},e.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var n=this.wrapElement.innerHTML;return this.removeElement(),n.replace("&amp;","&")},e.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var n=e[parseInt(t.toString(),10)].attributes,r=0;r<n.length;r++)this.wrapElement.children[parseInt(t.toString(),10)].removeAttribute(n[parseInt(r.toString(),10)].localName)},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach((function(e){Sv(e)}))},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+oE.join("],[")+"]");e.length>0&&e.forEach((function(e){oE.forEach((function(t){e.hasAttribute(t)&&e.removeAttribute(t)}))}))},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach((function(t,n){var r=e.wrapElement.querySelectorAll(t.selector);r.length>0&&r.forEach((function(e){e.removeAttribute(t.attribute)}))}))},e}(),aE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cE=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},lE="e-prevent",uE="e-dragging",dE="e-drag",pE="e-responsive",hE="e-panel-content",fE="e-panel-container",mE="e-panel-header",gE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aE(t,e),cE([zv("")],t.prototype,"id",void 0),cE([zv("")],t.prototype,"cssClass",void 0),cE([zv("")],t.prototype,"header",void 0),cE([zv("")],t.prototype,"content",void 0),cE([zv(!0)],t.prototype,"enabled",void 0),cE([zv(0)],t.prototype,"row",void 0),cE([zv(0)],t.prototype,"col",void 0),cE([zv(1)],t.prototype,"sizeX",void 0),cE([zv(1)],t.prototype,"sizeY",void 0),cE([zv(1)],t.prototype,"minSizeY",void 0),cE([zv(1)],t.prototype,"minSizeX",void 0),cE([zv(null)],t.prototype,"maxSizeY",void 0),cE([zv(null)],t.prototype,"maxSizeX",void 0),cE([zv(1e3)],t.prototype,"zIndex",void 0),t}(Xv),vE=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.rows=1,r.panelID=0,r.movePanelCalled=!1,r.resizeCalled=!1,r.mOffX=0,r.mOffY=0,r.maxTop=9999,r.maxRows=100,r.mouseX=0,r.mouseY=0,r.minTop=0,r.minLeft=0,r.isInlineRendering=!1,r.removeAllCalled=!1,r.isPanelRemoved=!1,r.panelsSizeY=0,r.resizeHeight=!1,r.eventVar=!1,mg("mergePersistData",r.mergePersistPanelData,r),r}var n,r;return aE(t,e),t.prototype.preRender=function(){this.panelCollection=[],this.sortedArray=[],this.gridPanelCollection=[],this.overlapElement=[],this.overlapElementClone=[],this.overlapSubElementClone=[],this.collisionChecker={},this.dragCollection=[],this.elementRef={top:"",left:"",height:"",width:""},this.dimensions=[],this.allItems=[],this.oldRowCol={},this.availableClasses=[],this.setOldRowCol(),this.calculateCellSize(),this.contentTemplateChild=[].slice.call(this.element.children)},t.prototype.setOldRowCol=function(){for(var e=0;e<this.panels.length;e++)this.panels[e].id||(this.panelPropertyChange(this.panels[e],{id:"layout_"+this.panelID.toString()}),this.panelID=this.panelID+1),this.oldRowCol[this.panels[e].id]={row:this.panels[e].row,col:this.panels[e].col}},t.prototype.createPanelElement=function(e,t){var n=this.createElement("div");return e&&e.length>0&&vv([n],e),t&&n.setAttribute("id",t),n},t.prototype.render=function(){this.initialize(),this.isRenderComplete=!0,this.showGridLines&&!this.checkMediaQuery()&&this.initGridLines(),this.updateDragArea(),this.renderComplete(),this.renderReactTemplates()},t.prototype.initGridLines=function(){this.table=document.createElement("table");var e=document.createElement("tbody");this.table.classList.add("e-dashboard-gridline-table");for(var t=0;t<this.maxRow();t++){for(var n=document.createElement("tr"),r=0;r<this.columns;r++){var i=document.createElement("td");i.classList.add("e-dashboard-gridline"),this.setAttributes({value:{row:t.toString(),col:r.toString(),sizeX:"1",sizeY:"1"}},i),this.setPanelPosition(i,t,r),this.setHeightAndWidth(i,{row:t,col:r,sizeX:1,sizeY:1}),n.appendChild(i)}e.appendChild(n)}this.table.appendChild(e),this.element.appendChild(this.table),this.renderReactTemplates()},t.prototype.initialize=function(){if(this.updateRowHeight(),this.element.childElementCount>0&&this.element.querySelectorAll(".e-panel").length>0){var e=[];this.setProperties({panels:[]},!0),this.isInlineRendering=!0;for(var t=0;t<this.element.querySelectorAll(".e-panel").length;t++)e.push(this.element.querySelectorAll(".e-panel")[t]);for(t=0;t<e.length;t++){var n=e[t];this.enableRtl&&vv([n],"e-rtl"),this.getInlinePanels(n),this.maxCol(),this.maxRow()}for(t=0;t<this.panels.length;t++){n=this.element.querySelector("#"+this.panels[t].id);if(this.setMinMaxValues(this.panels[t]),this.maxColumnValue<this.panels[t].col||this.maxColumnValue<this.panels[t].col+this.panels[t].sizeX){var r=this.maxColumnValue-this.panels[t].sizeX;this.panelPropertyChange(this.panels[t],{col:r<0?0:r})}this.setXYAttributes(n,this.panels[t]);var i=this.renderPanels(n,this.panels[t],this.panels[t].id,!1);this.panelCollection.push(i),this.setHeightAndWidth(n,this.panels[t]),this.tempObject=this,this.mediaQuery&&!window.matchMedia("("+this.mediaQuery+")").matches&&(this.setPanelPosition(n,this.panels[t].row,this.panels[t].col),this.mainElement=n,this.updatePanelLayout(n,this.panels[t]),this.mainElement=null),this.setClasses([n])}this.updateOldRowColumn(),this.checkMediaQuery()&&this.checkMediaQuerySizing()}else this.renderDashBoardCells(this.panels);!this.allowDragging||this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches||this.enableDraggingContent(this.panelCollection),this.sortedPanel(),this.bindEvents(),this.updatePanels(),this.updateCloneArrayObject(),this.checkColumnValue=this.maxColumnValue,this.checkMediaQuery()||this.panelResponsiveUpdate(),this.setEnableRtl()},t.prototype.checkMediaQuery=function(){return this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches},t.prototype.calculateCellSize=function(){this.cellSize=[],this.checkMediaQuery()?this.cellSize[1]=this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio:(this.cellSize[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSize[0]=this.element.parentElement&&(this.element.parentElement.offsetWidth-(this.maxCol()-1)*this.cellSpacing[0])/this.maxCol(),this.cellSize[1]=this.cellSize[0]/this.cellAspectRatio)},t.prototype.maxRow=function(e){var t=1;if(this.rows>1&&_g(e))return t=this.rows;for(var n=0;n<this.panels.length;n++)this.panels[n].sizeY+this.panels[n].row>t&&(t=this.panels[n].sizeY+this.panels[n].row);return 0===this.panels.length&&(t=this.columns),t},t.prototype.maxCol=function(){var e;return e=this.columns,this.maxColumnValue=e,e},t.prototype.updateOldRowColumn=function(){for(var e=0;e<this.panels.length;e++){var t=this.panels[e].id;if(document.getElementById(t)){var n=parseInt(document.getElementById(t).getAttribute("data-row"),10),r=parseInt(document.getElementById(t).getAttribute("data-col"),10);this.oldRowCol[this.panels[e].id]={row:n,col:r}}}},t.prototype.createSubElement=function(e,t,n){var r=this.createElement("div");return n&&vv([r],[n]),e&&e.length>0&&vv([r],e),t&&r.setAttribute("id",t),r},t.prototype.templateParser=function(e){if(e)try{return document.querySelectorAll(e).length?tE(document.querySelector(e).innerHTML.trim()):tE(e)}catch(n){var t=sE.sanitize(e);return tE(this.enableHtmlSanitizer&&"string"===typeof e?t:e)}},t.prototype.renderTemplate=function(e,t,n,r,i){var o=this.templateParser(e),s=[];if("."!==e[0]&&"#"!==e[0]||"SCRIPT"===document.querySelector(e).tagName){var a=o({},this,i,n,r,null,t);if(a){for(var c=0,l=a;c<l.length;c++){var u=l[c];s.push(u)}!function(e,t,n){for(var r=document.createDocumentFragment(),i=0,o=e;i<o.length;i++){var s=o[i];r.appendChild(s)}t.appendChild(r),n&&bv(t)}([].slice.call(s),t)}}else{var d=document.querySelector(e);if(!_g(d))return"none"===d.style.display&&d.style.removeProperty("display"),""===d.getAttribute("style")&&d.removeAttribute("style"),void t.appendChild(d);e=e.trim()}},t.prototype.renderPanels=function(e,t,n,r){vv([e],["e-panel","e-panel-transition"]);var i=t.cssClass?t.cssClass.split(" "):null;if(this.panelContent=e.querySelector(".e-panel-container")?e.querySelector(".e-panel-container"):this.createSubElement(i,e.id+"_content",fE),e.appendChild(this.panelContent),t.enabled||this.disablePanel(e),t.header){var o=e.querySelector(".e-panel-header")?e.querySelector(".e-panel-header"):this.createSubElement([],e.id+"template","");if(vv([o],[mE]),!e.querySelector(".e-panel-header")){var s=this.element.id+"HeaderTemplate"+n;this.renderTemplate(t.header,o,s,r,"header"),this.panelContent.appendChild(o),this.renderReactTemplates()}}if(t.content){var a=t.cssClass?t.cssClass.split(" "):null;this.panelBody=e.querySelector(".e-panel-content")?e.querySelector(".e-panel-content"):this.createSubElement(a,e.id+"_body",hE);var c="calc( 100% - "+(this.panelContent.querySelector(".e-panel-header")?window.getComputedStyle(this.panelContent.querySelector(".e-panel-header")).height:"0px")+")";if(wv(this.panelBody,{height:c}),!e.querySelector(".e-panel-content")){s=this.element.id+"ContentTemplate"+n;this.renderTemplate(t.content,this.panelBody,s,r,"content"),this.panelContent.appendChild(this.panelBody),this.renderReactTemplates()}}return e},t.prototype.disablePanel=function(e){vv([e],["e-disabled"])},t.prototype.getInlinePanels=function(e){var t={sizeX:e.hasAttribute("data-sizex")?parseInt(e.getAttribute("data-sizex"),10):1,sizeY:e.hasAttribute("data-sizey")?parseInt(e.getAttribute("data-sizey"),10):1,minSizeX:e.hasAttribute("data-minsizex")?parseInt(e.getAttribute("data-minsizex"),10):1,minSizeY:e.hasAttribute("data-minsizey")?parseInt(e.getAttribute("data-minsizey"),10):1,maxSizeX:e.hasAttribute("data-maxsizex")?parseInt(e.getAttribute("data-maxsizex"),10):null,maxSizeY:e.hasAttribute("data-maxsizey")?parseInt(e.getAttribute("data-maxsizey"),10):null,row:e.hasAttribute("data-row")?parseInt(e.getAttribute("data-row"),10):0,col:e.hasAttribute("data-col")?parseInt(e.getAttribute("data-col"),10):0,id:e.getAttribute("id"),zIndex:e.hasAttribute("data-zindex")?parseInt(e.getAttribute("data-zIndex"),10):1e3,header:e.querySelector(".e-panel-header")&&".e-panel-header",content:e.querySelector(".e-panel-content")&&".e-panel-content"};t.id||(t.id="layout_"+this.panelID.toString(),e.setAttribute("id",t.id),this.panelID=this.panelID+1),bg(t.enabled)&&(t.enabled=!0),e.style.zIndex=""+t.zIndex;var n=new gE(this,"panels",t,!0);this.panels.push(n)},t.prototype.resizeEvents=function(){if(this.allowResizing)for(var e=this.element.querySelectorAll(".e-panel .e-panel-container .e-resize"),t=0;t<e.length;t++){var n="msie"===hv.info.name?"mousedown pointerdown":"mousedown";fv.add(e[t],n,this.downResizeHandler,this),"msie"!==hv.info.name&&fv.add(e[t],"touchstart",this.touchDownResizeHandler,this)}},t.prototype.bindEvents=function(){this.refreshListener=this.refresh.bind(this),fv.add(window,"resize",this.refreshListener),this.resizeEvents()},t.prototype.downResizeHandler=function(e){this.downHandler(e),this.lastMouseX=e.pageX,this.lastMouseY=e.pageY;var t="msie"===hv.info.name?"mousemove pointermove":"mousemove",n="msie"===hv.info.name?"mouseup pointerup":"mouseup";this.isMouseMoveBound||(fv.add(document,t,this.moveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(fv.add(document,n,this.upResizeHandler,this),this.isMouseUpBound=!0)},t.prototype.downHandler=function(e){this.resizeCalled=!1,this.panelsInitialModel=this.cloneModels(this.panels);var t=Nv(e.currentTarget,".e-panel"),n={event:e,element:t,isInteracted:!0};this.trigger("resizeStart",n),this.downTarget=e.currentTarget,this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),vv([this.element],[lE]),this.element.appendChild(this.shadowEle),this.renderReactTemplates(),this.elementX=parseFloat(t.style.left),this.elementY=parseFloat(t.style.top),this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight,this.originalWidth=this.getCellInstance(t.id).sizeX,this.originalHeight=this.getCellInstance(t.id).sizeY,this.previousRow=this.getCellInstance(t.id).row},t.prototype.touchDownResizeHandler=function(e){this.downHandler(e),this.lastMouseX=e.changedTouches[0].pageX,this.lastMouseY=e.changedTouches[0].pageY,this.isMouseMoveBound||(fv.add(document,"touchmove",this.touchMoveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(fv.add(document,"touchend",this.upResizeHandler,this),this.isMouseUpBound=!0)},t.prototype.getCellSize=function(){return[this.cellSize[0],this.cellSize[1]]},t.prototype.updateMaxTopLeft=function(e){this.moveTarget=this.downTarget;var t={event:e,element:Nv(this.moveTarget,".e-panel"),isInteracted:!0};this.trigger("resize",t)},t.prototype.updateResizeElement=function(e){this.maxLeft=this.element.offsetWidth-1,this.maxTop=this.cellSize[1]*this.maxRows-1,yv([e],"e-panel-transition"),vv([e],[uE]);for(var t=["e-east","e-west","e-north","e-south","e-south-east","e-north-east","e-north-west","e-south-west"],n=0;n<this.moveTarget.classList.length;n++)-1!==t.indexOf(this.moveTarget.classList[n])&&(this.handleClass=this.moveTarget.classList[n])},t.prototype.moveResizeHandler=function(e){this.updateMaxTopLeft(e);var t=Nv(this.moveTarget,".e-panel");if(this.lastMouseX!==e.pageX&&this.lastMouseY!==e.pageY){this.updateResizeElement(t);var n=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.pageX,this.mouseY=e.pageY;var r=this.mouseY-this.lastMouseY+this.mOffY,i=this.mouseX-this.lastMouseX+this.mOffX;this.mOffX=this.mOffY=0,this.lastMouseY=this.mouseY,this.lastMouseX=this.mouseX,this.resizingPanel(t,n,i,r)}},t.prototype.touchMoveResizeHandler=function(e){this.updateMaxTopLeft(e);var t=Nv(this.moveTarget,".e-panel");if(this.lastMouseX!==e.changedTouches[0].pageX&&this.lastMouseY!==e.changedTouches[0].pageY){this.updateResizeElement(t);var n=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.changedTouches[0].pageX,this.mouseY=e.changedTouches[0].pageY;var r=this.mouseX-this.lastMouseX+this.mOffX,i=this.mouseY-this.lastMouseY+this.mOffY;this.mOffX=this.mOffY=0,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.resizingPanel(t,n,r,i)}},t.prototype.resizingPanel=function(e,t,n,r){var i=this.getCellInstance(e.id).sizeX,o=this.getCellInstance(e.id).sizeY,s=r,a=n;if(this.handleClass.indexOf("north")>=0&&(this.elementHeight-s<this.getMinHeight(t)?(r=this.elementHeight-this.getMinHeight(t),this.mOffY=s-r):t.maxSizeY&&this.elementHeight-s>this.getMaxHeight(t)?(r=this.elementHeight-this.getMaxHeight(t),this.mOffY=s-r):this.elementY+s<this.minTop&&(r=this.minTop-this.elementY,this.mOffY=s-r),this.elementY+=r,this.elementHeight-=r),this.handleClass.indexOf("south")>=0&&(this.elementHeight+s<this.getMinHeight(t)?(r=this.getMinHeight(t)-this.elementHeight,this.mOffY=s-r):t.maxSizeY&&this.elementHeight+s>this.getMaxHeight(t)&&(r=this.getMaxHeight(t)-this.elementHeight,this.mOffY=s-r),this.elementHeight+=r),this.handleClass.indexOf("west")>=0&&(this.elementWidth-a<this.getMinWidth(t)?(n=this.elementWidth-this.getMinWidth(t),this.mOffX=a-n):t.maxSizeX&&this.elementWidth-a>this.getMaxWidth(t)?(n=this.elementWidth-this.getMaxWidth(t),this.mOffX=a-n):this.elementX+a<this.minLeft&&(n=this.minLeft-this.elementX,this.mOffX=a-n),this.elementX+=n,this.elementWidth-=n),this.handleClass.indexOf("east")>=0){this.elementWidth+a<this.getMinWidth(t)?(n=this.getMinWidth(t)-this.elementWidth,this.mOffX=a-n):t.maxSizeX&&this.elementWidth+a>this.getMaxWidth(t)&&(n=this.getMaxWidth(t)-this.elementWidth,this.mOffX=a-n);var c=this.elementWidth;this.elementWidth+=n;var l=this.pixelsToColumns(this.elementWidth-t.sizeX*this.cellSpacing[1],!0);this.columns<t.col+l&&(this.elementWidth=c)}e.style.top=this.elementY+"px",e.style.left=this.elementX+"px",e.style.width=this.elementWidth+"px",e.style.height=this.elementHeight+"px";var u=this.getResizeRowColumn(t);if(u.col+u.sizeX>this.columns&&this.panelPropertyChange(u,{sizeX:u.sizeX-1}),this.shadowEle.style.top=u.row*this.getCellSize()[1]+u.row*this.cellSpacing[1]+"px",this.shadowEle.style.left=u.col*this.getCellSize()[0]+u.col*this.cellSpacing[0]+"px",this.shadowEle.style.height=u.sizeY*(this.getCellSize()[1]+this.cellSpacing[1])+"px",this.shadowEle.style.width=u.sizeX*(this.getCellSize()[0]+this.cellSpacing[0])+"px",i!==u.sizeX||o!==u.sizeY){i=u.sizeX,o=u.sizeY;var d=this.getCellInstance(e.id),p={attributes:{row:d.row.toString(),col:d.col.toString(),sizeX:d.sizeX.toString(),sizeY:d.sizeY.toString()}};this.setAttributes(p,e),this.mainElement=e,this.updatePanelLayout(e,this.getCellInstance(e.id)),this.updateOldRowColumn(),this.sortedPanel()}},t.prototype.upResizeHandler=function(e){if(!_g(this.downTarget)){this.upTarget=this.downTarget;var t=Nv(this.upTarget,".e-panel"),n={event:e,element:t,isInteracted:!0};if(t){vv([t],"e-panel-transition");var r="msie"===hv.info.name?"mousemove pointermove":"mousemove",i="msie"===hv.info.name?"mouseup pointerup":"mouseup";fv.remove(document,r,this.moveResizeHandler),fv.remove(document,i,this.upResizeHandler),"msie"!==hv.info.name&&(fv.remove(document,"touchmove",this.touchMoveResizeHandler),fv.remove(document,"touchend",this.upResizeHandler)),this.isMouseUpBound=!1,this.isMouseMoveBound=!1,this.shadowEle&&Sv(this.shadowEle),this.shadowEle=null;var o=this.getCellInstance(t.getAttribute("id"));this.setPanelPosition(t,o.row,o.col),this.setHeightAndWidth(t,o)}yv([t],[uE]),this.trigger("resizeStop",n),this.resizeCalled=!1,this.lastMouseX=this.lastMouseY=void 0,this.mOffX=this.mOffY=0,this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.updatePanels(),this.updateCloneArrayObject(),this.checkForChanges(!0)}},t.prototype.getResizeRowColumn=function(e){var t=!1,n=e.col;-1!==["e-west","e-south-west"].indexOf(this.handleClass)&&(n=this.pixelsToColumns(this.elementX,!1));var r=e.row;-1!==["e-north"].indexOf(this.handleClass)&&(r=this.pixelsToRows(this.elementY,!1),this.previousRow!==r&&(this.previousRow=r,t=!0));var i=e.sizeX;-1===["e-north","e-south"].indexOf(this.handleClass)&&(i=this.pixelsToColumns(this.elementWidth-i*this.cellSpacing[1],!0));var o=e.sizeY;return-1===["e-east","e-west"].indexOf(this.handleClass)&&("e-north"!==this.handleClass||t)&&(o=this.pixelsToRows(this.elementHeight-o*this.cellSpacing[0],!0)),e.col+i>this.columns&&(e.sizeX=i-1),(r>-1&&n>-1&&i+n<=this.maxCol()&&o+r<=this.maxRow()&&0===this.collisions(r,n,i,o,this.getPanelBase(e.id)).length||!1!==this.allowPushing)&&this.panelPropertyChange(e,{row:r,col:n,sizeX:i,sizeY:o}),e},t.prototype.pixelsToColumns=function(e,t){var n=this.cellSize[0];return t?Math.ceil(e/n):Math.floor(e/n)},t.prototype.pixelsToRows=function(e,t){return t?Math.round(e/this.cellSize[1]):Math.round(e/(this.cellSize[1]+this.cellSpacing[0]))},t.prototype.getMinWidth=function(e){return e.minSizeX*this.getCellSize()[0]+(e.minSizeX-1)*this.cellSpacing[0]},t.prototype.getMaxWidth=function(e){return e.maxSizeX*this.getCellSize()[0]},t.prototype.getMinHeight=function(e){return e.minSizeY*this.getCellSize()[1]+(e.minSizeY-1)*this.cellSpacing[1]},t.prototype.getMaxHeight=function(e){return e.maxSizeY*this.getCellSize()[1]},t.prototype.sortedPanel=function(){this.sortedArray=[];for(var e=0,t=this.panelCollection.length;e<t;++e)this.sortItem(this.panelCollection[e])},t.prototype.moveItemsUpwards=function(){if(!1!==this.allowFloating){for(var e=0,t=this.sortedArray.length;e<t;++e){var n=this.sortedArray[e];if(n)for(var r=0,i=n.length;r<i;++r){var o=n[r];o&&this.moveItemUpwards(o)}}this.updateGridLines()}},t.prototype.moveItemUpwards=function(e){if(!1!==this.allowFloating&&e!==this.mainElement){for(var t=this.getCellInstance(e.id).col,n=parseInt(e.getAttribute("data-sizeY"),10),r=parseInt(e.getAttribute("data-sizeX"),10),i=null,o=null,s=parseInt(e.getAttribute("data-row"),10)-1;s>-1;){if(0!==this.collisions(s,t,r,n,e).length)break;i=s,o=t,--s}null!==i&&this.sortItem(e,i,o)}},t.prototype.sortItem=function(e,t,n){this.overlapElement=[];var r=parseInt(e.getAttribute("data-col"),10),i=parseInt(e.getAttribute("data-row"),10);if(this.sortedArray[i]||(this.sortedArray[i]=[]),this.sortedArray[i][r]=e,void 0!==e&&void 0!==t&&void 0!==n){if(void 0!==this.oldRowCol[e.id]&&null!==this.oldRowCol[e.id].row&&"undefined"!==typeof this.oldRowCol[e.id].col){var o=this.sortedArray[this.oldRowCol[e.id].row];this.oldRowCol[e.id]&&o[this.oldRowCol[e.id].col]===e&&(delete o[this.oldRowCol[e.id].col],this.updateOldRowColumn(),this.sortedPanel())}this.oldRowCol[e.id].row=t,this.oldRowCol[e.id].row=n,this.sortedArray[i]||(this.sortedArray[i]=[]),this.sortedArray[i][r]=e,-1===this.allItems.indexOf(e)&&this.allItems.push(e),this.panelPropertyChange(this.getCellInstance(e.id),{row:t,col:n});var s=this.getCellInstance(e.id);this.setAttributes({value:{col:s.col.toString(),row:s.row.toString()}},e),this.updateLayout(e,this.getCellInstance(e.id))}},t.prototype.updateLayout=function(e,t){this.setPanelPosition(e,t.row,t.col),this.setHeightAndWidth(e,t),this.updateRowHeight(),this.sortedPanel()},t.prototype.refresh=function(){if(this.panelsSizeY=0,this.updateDragArea(),this.checkMediaQuery())this.checkMediaQuerySizing();else{if(this.element.classList.contains(pE)){yv([this.element],[pE]);for(var e=this.element.querySelectorAll((this.element.id?"#"+this.element.id+" > ":"")+".e-panel"),t=0;t<e.length;t++){var n=e[t],r=this.getCellInstance(n.id),i=parseInt(n.getAttribute("data-row"),10),o=parseInt(n.getAttribute("data-col"),10);this.panelPropertyChange(r,{row:i,col:o}),this.setHeightAndWidth(n,this.getCellInstance(n.id)),this.setPanelPosition(n,i,o),this.updateRowHeight()}}this.panelResponsiveUpdate(),this.updateGridLines()}this.removeResizeClasses(this.panelCollection),this.setClasses(this.panelCollection),this.resizeEvents(),this.checkDragging(this.dragCollection)},t.prototype.updateGridLines=function(){this.element.querySelector(".e-dashboard-gridline-table")&&(this.table&&Sv(this.table),this.initGridLines())},t.prototype.checkDragging=function(e){if(this.checkMediaQuery()||!this.allowDragging)for(var t=0;t<e.length;t++)e[t].destroy();else{for(t=0;t<e.length;t++)e[t].destroy();this.enableDraggingContent(this.panelCollection)}},t.prototype.sortPanels=function(){for(var e=[],t=function(t){for(var r=function(r){n.panels.filter((function(n){n.row===t&&n.col===r&&e.push(n)}))},i=0;i<n.columns;i++)r(i)},n=this,r=0;r<=this.rows;r++)t(r);return e},t.prototype.checkMediaQuerySizing=function(){var e;vv([this.element],[pE]),e=this.isPanelRemoved&&this.panels?this.panels:this.sortPanels(),this.updatedRows=e.length;for(var t=0;t<e.length;t++){var n=document.getElementById(e[t].id),r=void 0;n&&(wv(n,{width:"100%"}),n.style.height=" "+(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)*e[t].sizeY+"px",e[t].sizeY>1&&(r=(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)*e[t].sizeY+parseInt((Math.round(e[t].sizeY/2)*this.cellSpacing[1]).toString(),0),n.style.height=r+"px"),this.resizeHeight=!0,this.panelPropertyChange(e[t],{row:t,col:0}),this.setPanelPosition(n,e[t].row,e[t].col),this.panelsSizeY=this.panelsSizeY+e[t].sizeY,this.setClasses(this.panelCollection),this.checkDragging(this.dragCollection),this.removeResizeClasses(this.panelCollection))}this.updateRowHeight()},t.prototype.panelResponsiveUpdate=function(){this.element.classList.add("e-responsive"),this.calculateCellSize();for(var e=0;e<this.element.querySelectorAll(".e-panel").length;e++){var t=this.element.querySelectorAll(".e-panel")[e],n=this.getCellInstance(t.id);this.setHeightAndWidth(t,n)}for(e=0;e<this.panels.length;e++)this.setPanelPosition(document.getElementById(this.panels[e].id),this.panels[e].row,this.panels[e].col);this.updateRowHeight()},t.prototype.updateRowHeight=function(){this.getRowColumn(),this.setHeightWidth()},t.prototype.setHeightWidth=function(){var e,t;if(this.checkMediaQuery()){for(var n=0,r=0;r<this.panels.length;r++)this.panels[r].sizeY&&(n+=this.panels[r].sizeY);e=n*(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)+(n-1)*this.cellSpacing[1]+"px"}else e=this.maxRow()*(this.cellSize[0]/this.cellAspectRatio)+(this.maxRow()-1)*this.cellSpacing[1]+"px";wv(this.element,{height:e}),t=window.getComputedStyle(this.element).width,wv(this.element,{width:t})},t.prototype.setHeightAndWidth=function(e,t){wv(e,{height:Ig(this.setXYDimensions(t)[0])}),wv(e,{width:Ig(this.setXYDimensions(t)[1])})},t.prototype.renderCell=function(e,t,n){var r;this.dimensions=this.setXYDimensions(e),bg(e.enabled)&&(e.enabled=!0),this.contentTemplateChild.length>0&&!_g(n)?(r=this.contentTemplateChild[n],e.cssClass&&vv([r],[e.cssClass]),e.id&&r.setAttribute("id",e.id)):r=this.createPanelElement(e.cssClass?e.cssClass.split(" "):null,e.id),r.style.zIndex=""+e.zIndex,this.element.appendChild(r),this.renderReactTemplates();var i=this.renderPanels(r,e,e.id,t);return this.panelCollection.push(i),this.setXYAttributes(r,e),this.setHeightAndWidth(r,e),r},t.prototype.setPanelPosition=function(e,t,n){if(e){this.checkMediaQuery()&&this.calculateCellSize();var r=this.getCellSize()[1],i=this.getCellSize()[0],o=0===n?0:n*(i+this.cellSpacing[0]),s=0===t?0:t*(r+this.cellSpacing[1]);this.checkMediaQuery()&&(s=0===t?0:this.panelsSizeY*(r+this.cellSpacing[1])),wv(e,{left:o+"px",top:s+"px"})}},t.prototype.getRowColumn=function(){if(this.rows=null,this.element.querySelectorAll(".e-panel").length>0&&!this.updatedRows)for(var e=this.element.querySelectorAll(".e-panel"),t=0;t<e.length;t++){var n=e[t],r=parseInt(n.getAttribute("data-row"),10),i=parseInt(n.getAttribute("data-sizeY"),10);this.rows=Math.max(this.rows,r+i)}else{this.updatedRows&&(this.rows=this.updatedRows,this.updatedRows=null);for(t=0;t<this.panels.length;t++)this.rows=Math.max(this.rows,this.panels[t].row)}},t.prototype.setMinMaxValues=function(e){!e.sizeX||e.sizeX<e.minSizeX?this.panelPropertyChange(e,{sizeX:e.minSizeX}):e.maxSizeX&&e.sizeX>e.maxSizeX?this.panelPropertyChange(e,{sizeX:e.maxSizeX}):e.sizeX>this.columns?this.panelPropertyChange(e,{sizeX:this.columns}):this.panelPropertyChange(e,{sizeX:e.sizeX}),!e.sizeY||e.sizeY<e.minSizeY?this.panelPropertyChange(e,{sizeY:e.minSizeY}):e.maxSizeY&&e.sizeY>e.maxSizeY?this.panelPropertyChange(e,{sizeY:e.maxSizeY}):this.panelPropertyChange(e,{sizeY:e.sizeY})},t.prototype.checkMinMaxValues=function(e){e.col+e.sizeX>this.columns&&this.panelPropertyChange(e,{sizeX:e.sizeX+(this.columns-(e.col+e.sizeX))})},t.prototype.panelPropertyChange=function(e,t){e.setProperties(t,!0)},t.prototype.renderDashBoardCells=function(e){if(this.element.querySelectorAll(".e-panel").length>0||this.panels.length>0)for(var t=0;t<e.length;t++){this.gridPanelCollection.push(e[t]),this.setMinMaxValues(e[t]),(this.maxColumnValue<e[t].col||this.maxColumnValue<e[t].col+e[t].sizeX)&&this.panelPropertyChange(e[t],{col:this.maxColumnValue-e[t].sizeX});var n=this.renderCell(e[t],!1,t);this.enableRtl&&vv([n],"e-rtl"),this.element.appendChild(n),this.renderReactTemplates(),this.checkMediaQuery()&&t===e.length-1?this.checkMediaQuerySizing():(this.setPanelPosition(n,e[t].row,e[t].col),this.mainElement=n,this.updatePanelLayout(n,e[t]),this.mainElement=null)}this.setClasses(this.panelCollection)},t.prototype.collisions=function(e,t,n,r,i){var o,s=[];n&&r||(n=r=1),!i||i instanceof Array||(i=[i]);for(var a=0;a<r;++a)for(var c=0;c<n;++c)!(o=this.getPanel(e+a,t+c,i))||i&&-1!==i.indexOf(document.getElementById(o.id))||-1!==s.indexOf(document.getElementById(o.id))||s.push(document.getElementById(o.id));return s},t.prototype.rightWardsSpaceChecking=function(e,t,n){var r=this,i=[],o=[];if(e.forEach((function(e){var n=parseInt(e.getAttribute("data-col"),10),o=parseInt(e.getAttribute("data-sizeX"),10);if(t<r.columns&&n>=t)if(o>1)for(var s=n;s<n+o;s++)i.push(s);else i.push(n)})),i.length>0)for(var s=t+1;s<=this.columns-1;s++)-1===i.indexOf(s)&&s!==t&&-1===o.indexOf(s)&&o.push(s);var a=this.getOccupiedColumns(n);return a.forEach((function(e){e>t&&-1!==o.indexOf(e)&&o.splice(o.indexOf(e),1)})),this.getOccupiedColumns(this.checkingElement).forEach((function(e){e>parseInt(n.getAttribute("data-col"),10)&&-1===a.indexOf(e)&&-1===o.indexOf(e)&&o.push(e)})),o=o.sort((function(e,t){return e-t}))},t.prototype.getOccupiedColumns=function(e){for(var t=[],n=parseInt(e.getAttribute("data-sizeX"),10),r=parseInt(e.getAttribute("data-col"),10),i=r;i<r+n&&i<=this.columns;i++)t.push(i);return t},t.prototype.leftWardsSpaceChecking=function(e,t,n){var r=this,i=[],o=[];if(e.forEach((function(e){var n=parseInt(e.getAttribute("data-col"),10),i=parseInt(e.getAttribute("data-sizeX"),10);if(t<=r.columns&&n<=t)if(i>1)for(var s=n;s<n+i;s++)o.push(s);else o.push(n)})),o.length>0)for(var s=0;s<=t;s++)-1===o.indexOf(s)&&s!==t&&-1===i.indexOf(s)&&i.push(s);var a=this.getOccupiedColumns(n);return a.forEach((function(e){e<t&&-1!==i.indexOf(e)&&i.splice(i.indexOf(e),1)})),this.getOccupiedColumns(this.checkingElement).forEach((function(e){e<parseInt(n.getAttribute("data-col"),10)&&-1===a.indexOf(e)&&-1===i.indexOf(e)&&i.push(e)})),i=(i=i.sort((function(e,t){return e-t}))).reverse()},t.prototype.adjustmentAvailable=function(e,t,n,r,i){this.leftAdjustable=void 0,this.rightAdjustable=void 0;var o,s=!1,a=[];this.topAdjustable=void 0;var c=parseInt(i.getAttribute("data-sizeX"),10),l=parseInt(i.getAttribute("data-col"),10);-1===(a=this.getRowElements(this.collisions(e,0,this.columns,n,[]))).indexOf(i)&&a.push(i);var u=this.leftWardsSpaceChecking(a,t,i);if(u.length>0?(this.leftAdjustable=this.isLeftAdjustable(u,i,e,t,r,n),this.spacedColumnValue!==l-this.getCellInstance(this.checkingElement.id).sizeX&&(this.leftAdjustable=!1),this.leftAdjustable?this.rightAdjustable=!1:(this.leftAdjustable=!1,o=this.rightWardsSpaceChecking(a,t,i),this.rightAdjustable=o.length>0&&this.isRightAdjustable(o,i,e,t,r,n),this.spacedColumnValue!==c+l&&(this.rightAdjustable=!1),this.rightAdjustable||(this.rightAdjustable=!1))):(o=this.rightWardsSpaceChecking(a,t,i),this.rightAdjustable=o.length>0&&this.isRightAdjustable(o,i,e,t,r,n),this.spacedColumnValue!==c+l&&(this.rightAdjustable=!1),this.rightAdjustable&&(this.leftAdjustable=!1)),!this.rightAdjustable&&!this.leftAdjustable&&e>0){var d=this.getCellInstance(i.id).row,p=!1;this.startRow!==d&&(p=!0);for(var h=e;h>=0;h--){var f=this.getCellInstance(i.id).sizeY>1&&p?this.checkingElement:i;h!==d&&h===d-n&&0===this.collisions(h,t,r,n,f).length&&(p=!1,this.topAdjustable=!0,this.spacedRowValue=_g(this.spacedRowValue)?h:this.spacedRowValue,this.spacedColumnValue=t)}}return(this.rightAdjustable||this.leftAdjustable||this.topAdjustable)&&(s=!0,_g(this.spacedRowValue)&&(this.spacedRowValue=e)),s},t.prototype.isXSpacingAvailable=function(e,t){for(var n=!1,r=[],i=0;i<e.length;i++)if(e[i+1]-e[i]===1||e[i+1]-e[i]===-1){if(r.push(e[i]),2===t&&r.push(e[i+1]),i===e.length-2&&(r.push(e[i+1]),r.length>t&&r.splice(-1)),r.length===t)return n=!0,this.spacedColumnValue=r.sort((function(e,t){return e-t}))[0],this.spacedColumnValue<0&&(this.spacedColumnValue=1),n}else r=[];return n},t.prototype.getRowElements=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},t.prototype.isLeftAdjustable=function(e,t,n,r,i,o){var s;if(1===i&&1===o&&e.length>0)this.spacedColumnValue=e[0],s=!0;else if(i>1&&1===o)s=this.isXSpacingAvailable(e,i);else if(o>1)if(1===i){var a=void 0;if(e.length>=1&&(a=!0),a)for(var c=0;c<e.length;c++){if(0===this.collisions(n,e[c],i,o,this.checkingElement).length)return this.spacedColumnValue=e[c],s=!0;s=!1}}else s=this.replacable(e,i,n,o,t);return s},t.prototype.isRightAdjustable=function(e,t,n,r,i,o){var s;if(1===i&&1===o&&e.length>0)this.spacedColumnValue=e[0],s=!0;else if(i>1&&1===o)s=this.isXSpacingAvailable(e,i);else if(o>1)if(1===i){var a=void 0;if(e.length>=1&&(a=!0),a)for(var c=0;c<e.length;c++){for(var l=this.collisions(n,e[c],i,o,this.checkingElement),u=0;u<l.length;u++)parseInt(t.getAttribute("data-col"),10)!==e[c]&&l.splice(l.indexOf(l[u]),1);if(0===l.length)return s=!0,this.spacedColumnValue=e[c],s;s=!1}}else s=this.replacable(e,i,n,o,t);return s},t.prototype.replacable=function(e,t,n,r,i){for(var o,s=[],a=0;a<e.length;a++){if(this.isXSpacingAvailable(e,t)){var c=[];if(c.push(this.checkingElement),c.push(i),0===s.length)return o=!0,this.spacedColumnValue=this.spacedColumnValue,o;o=!1}}return o},t.prototype.sortCollisionItems=function(e){for(var t,n=[],r=function(r){t=[],e.forEach((function(e){e&&e.getAttribute("data-row")===r.toString()&&t.push(e)}));for(var o=function(e){t.forEach((function(t){t&&t.getAttribute("data-col")===e.toString()&&n.push(t)}))},s=i.columns-1;s>=0;s--)o(s)},i=this,o=this.rows-1;o>=0;o--)r(o);return n},t.prototype.updatedModels=function(e,t,n){var r=this,i=[];return this.mainElement||this.sortedPanel(),e.forEach((function(o){r.checkingElement=o;var s=r.getCellInstance(o.id),a=!r.adjustmentAvailable(s.row,s.col,s.sizeY,s.sizeX,n);if(s.sizeX>1&&a)for(var c=s.row;c<t.row+t.sizeY;c++){r.collisions(c,s.col,s.sizeX,s.sizeY,o).forEach((function(t){e.indexOf(t)>=0&&-1===i.indexOf(t)&&i.push(t)}))}})),i.forEach((function(t){i.indexOf(t)>=0&&e.splice(e.indexOf(t),1)})),e},t.prototype.resetLayout=function(e){var t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement);if(!this.mainElement||this.addPanelCalled||this.resizeCalled||this.movePanelCalled)return t;if(this.mainElement&&this.oldRowCol!==this.cloneObject)for(var n=0;n<this.panels.length;n++){var r=document.getElementById(this.panels[n].id);if(r!==this.mainElement){var i=this.cloneObject[r.id].row,o=this.cloneObject[r.id].col;this.setPanelPosition(r,i,o),this.panelPropertyChange(this.getCellInstance(r.id),{row:i,col:o}),this.setAttributes({value:{col:o.toString(),row:i.toString()}},r),this.updateOldRowColumn()}}return this.sortedArray=this.cloneArray,t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement),this.sortedPanel(),this.updateOldRowColumn(),this.checkCollision&&this.checkCollision.length>0&&-1===t.indexOf(this.checkCollision[0])&&this.cloneObject[this.checkCollision[0].id].row===e.row&&t.push(this.checkCollision[0]),t},t.prototype.swapAvailability=function(e,t){for(var n=!0,r=this.getCellInstance(t.id),i=0;i<e.length;i++)for(var o=this.getCellInstance(e[i].id),s=1;s<r.sizeY;s++){var a=[];if(a.push(t),a.push(e[i]),this.collisions(r.row+s,o.col,o.sizeX,o.sizeY,a).length>0)return n=!1,!1}return n},t.prototype.checkForSwapping=function(e,t){if(!this.mainElement||0===e.length)return!1;var n,r=parseInt(e[0].getAttribute("data-row"),10);if(this.startRow<r?n=1:this.startRow>r&&(n=0),!this.swapAvailability(e,t))return!1;for(var i=!1,o=0;o<e.length;o++)if(e.length>=1&&this.cloneObject[this.mainElement.id]&&this.cloneObject[this.mainElement.id].row===this.oldRowCol[this.mainElement.id].row)return!1;for(var s=0===n?this.getCellInstance(this.mainElement.id).row+this.getCellInstance(this.mainElement.id).sizeY:this.startRow,a=0;a<e.length;a++){var c=this.getCellInstance(e[a].id),l=this.getCellInstance(t.id),u=[];if(1===c.sizeY&&-1===u.indexOf(e[a]))u.push(e[a]);else if(c.sizeY>1&&-1===u.indexOf(e[a]))if(1===n&&l.row===this.cloneObject[c.id].row+c.sizeY-1)u.push(e[a]);else{if(0!==n||l.row!==this.cloneObject[c.id].row)return!1;u.push(e[a])}if(c.sizeY<=l.sizeY&&-1===u.indexOf(e[a])&&u.push(e[a]),u.push(this.mainElement),this.collisions(s,c.col,c.sizeX,c.sizeY,u).length>0)return i=!1;a===e.length-1&&(i=!0)}return i},t.prototype.swapItems=function(e,t,n){var r,i=this,o=[];o.push(t);var s=parseInt(e[0].getAttribute("data-row"),10);this.startRow<s?r=1:this.startRow>s&&(r=0);var a=0===r?s+n.sizeY:this.startRow;if(!this.movePanelCalled){var c=this.getCellInstance(e[0].id);this.panelPropertyChange(n,{row:0===r?s:a+c.sizeY})}for(var l=0;l<e.length;l++)o.push(e[l]),this.setPanelPosition(e[l],a,this.getCellInstance(e[l].id).col),this.panelPropertyChange(this.getCellInstance(e[l].id),{row:a}),e[l].setAttribute("data-row",a.toString());t.setAttribute("data-row",n.row.toString()),this.setPanelPosition(this.shadowEle,n.row,n.col);for(var u=0;u<this.panels.length;u++)this.oldRowCol[this.panels[u].id]={row:this.panels[u].row,col:this.panels[u].col};this.startRow=n.row,this.updateOldRowColumn(),o.forEach((function(e){i.cloneObject[e.id]=i.oldRowCol[e.id];for(var t=i.getCellInstance(e.id),n=0;n<i.sortedArray.length;n++)if(i.sortedArray[n])for(var r=0;r<i.sortedArray[n].length;r++)i.sortedArray[n][r]===e&&(i.sortedArray[n][r]=void 0);i.sortedArray[t.row]||(i.sortedArray[t.row]=[]),i.sortedArray[t.row][t.col]=e,i.cloneArray=i.sortedArray}))},t.prototype.updatePanelLayout=function(e,t){this.collisionChecker={};var n=[],r=[];if((n=this.mainElement&&this.isRenderComplete?this.resetLayout(t):this.collisions(t.row,t.col,t.sizeX,t.sizeY,e)).length>0)if(n=this.sortCollisionItems(n),n=this.updatedModels(n,t,e),!_g(this.startRow)&&this.checkForSwapping(n,e))this.swapItems(n,e,t);else for(var i=0;i<n.length;i++){var o=this.getCellInstance(n[i].id);if(this.checkingElement=n[i],this.spacedRowValue=null,this.spacedColumnValue=null,this.adjustmentAvailable(o.row,o.col,o.sizeY,o.sizeX,e)&&!_g(this.spacedColumnValue)){this.setPanelPosition(n[i],this.spacedRowValue,this.spacedColumnValue),this.oldRowCol[n[i].id]={row:this.spacedRowValue,col:this.spacedColumnValue};var s={attributes:{row:this.spacedRowValue.toString(),col:this.spacedColumnValue.toString()}};if(this.setAttributes(s,n[i]),this.panelPropertyChange(o,{col:this.spacedColumnValue,row:this.spacedRowValue}),this.topAdjustable&&this.allowFloating&&(this.updatePanels(),this.updateCloneArrayObject()),this.spacedRowValue=null,i<n.length)continue}else r.push(n[i])}if(r.length>0){var a=this;r.forEach((function(e){-1===a.overlapElement.indexOf(e)&&a.overlapElement.push(e)})),this.overlapElement&&-1!==this.overlapElement.indexOf(e)&&this.overlapElement.splice(this.overlapElement.indexOf(e),1),r.length>0&&(this.updateRowColumn(t.row,this.overlapElement,e),this.checkForCompletePushing())}this.isSubValue||this.sortedPanel(),this.updateRowHeight(),this.updateGridLines()},t.prototype.checkForCompletePushing=function(){for(var e=0;e<this.panels.length;e++)if(this.collisionChecker[this.panels[e].id]&&null!==this.collisionChecker[this.panels[e].id]){this.overlapElement=[this.collisionChecker[this.panels[e].id].ele];var t=this.panels[e].id;this.updateRowColumn(this.collisionChecker[""+t].row,this.overlapElement,this.collisionChecker[""+t].srcEle)}},t.prototype.updateCollisionChecked=function(e){for(var t=0;t<Object.keys(this.collisionChecker).length;t++)this.collisionChecker[e.id]=null},t.prototype.updateRowColumn=function(e,t,n){if(n){var r=parseInt(n.getAttribute("data-sizeY"),10),i=parseInt(n.getAttribute("data-row"),10);this.overlapElementClone=(this.overlapElement&&this.shouldRestrict,this.overlapElement);for(var o=0;o<this.overlapElementClone.length;o++){if(0===this.overlapElementClone.length)return;for(var s=0;s<this.overlapElementClone.length;s++)this.collisionChecker[this.overlapElementClone[s].id]={ele:this.overlapElementClone[s],row:e,srcEle:n};var a=i+r,c=parseInt(this.overlapElementClone[o].getAttribute("data-sizeY"),10),l=parseInt(this.overlapElementClone[o].getAttribute("data-col"),10),u=parseInt(this.overlapElementClone[o].getAttribute("data-sizeX"),10),d=void 0,p=void 0;if(-1===this.overlapSubElementClone.indexOf(n)&&this.overlapSubElementClone.push(n),-1===this.overlapSubElementClone.indexOf(this.overlapElementClone[o])&&this.overlapSubElementClone.push(this.overlapElementClone[o]),c>1||u>1){var h=this.getCellInstance(this.overlapElementClone[o].id);d=h.col;for(var f=document.getElementById(h.id),m=h.row;m<i+r;m++){this.isSubValue=!0,this.panelPropertyChange(h,{row:h.row+1}),f.setAttribute("data-row",h.row.toString()),this.setPanelPosition(f,h.row,d),this.updateCollisionChecked(f),this.oldRowCol[f.id]={row:h.row,col:d};var g=this.getCellInstance(f.id);this.panelPropertyChange(g,{col:d,row:h.row});var v=parseInt(f.getAttribute("data-row"),10),y=parseInt(f.getAttribute("data-col"),10),E=parseInt(f.getAttribute("data-sizeX"),10),_=parseInt(f.getAttribute("data-sizeY"),10),b=[];b.push(f),b.push(n),p=this.collisions(v,y,E,_,b),this.mainElement&&-1!==p.indexOf(this.mainElement)&&p.splice(p.indexOf(this.mainElement),1),this.collisionPanel(p,y,v,f)}this.isSubValue=!1}else{this.addPanelCalled&&(this.addPanelCalled=!1),this.overlapElementClone[o].setAttribute("data-row",a.toString());var S=[];S.push(this.overlapElementClone[o]),S.push(n),p=this.collisions(a,l,u,c,S),this.mainElement&&-1!==p.indexOf(this.mainElement)&&p.splice(p.indexOf(this.mainElement),1),d=parseInt(this.overlapElementClone[o].getAttribute("data-col"),10),this.setPanelPosition(this.overlapElementClone[o],a,d),this.updateCollisionChecked(this.overlapElementClone[o]),this.oldRowCol[this.overlapElementClone[o].id]={row:a,col:d};g=this.getCellInstance(this.overlapElementClone[o].id);this.panelPropertyChange(g,{col:d,row:a}),this.collisionPanel(p,d,a,this.overlapElementClone[o])}}}},t.prototype.collisionPanel=function(e,t,n,r){var i=this.getCellInstance(r.id);if(this.panelPropertyChange(i,{row:n,col:t}),e.length>0){var o=this;this.overlapElement=[],this.shouldRestrict=!0,e.forEach((function(e){o.overlapElement.push(e)}));for(var s=parseInt(r.getAttribute("data-row"),10),a=0;a<this.overlapElement.length;a++)this.updateRowColumn(s,this.overlapElement,r);this.shouldRestrict=!1}else{if(this.addPanelCalled||this.sortedPanel(),this.overlapSubElementClone.length>0)for(var c=function(e){var t=parseInt(l.overlapSubElementClone[e].getAttribute("data-row"),10),n=parseInt(l.overlapSubElementClone[e].getAttribute("data-col"),10),r=parseInt(l.overlapSubElementClone[e].getAttribute("data-sizeX"),10),i=parseInt(l.overlapSubElementClone[e].getAttribute("data-sizeY"),10),o=l.collisions(t,n,r,i,l.overlapSubElementClone);l.mainElement&&-1!==o.indexOf(l.mainElement)&&o.splice(o.indexOf(l.mainElement),1);var s=l;o.forEach((function(e){s.overlapElement.push(e)})),o.length>0&&l.updateRowColumn(t,l.overlapElement,l.overlapSubElementClone[e])},l=this,u=0;u<this.overlapSubElementClone.length;u++)c(u);this.overlapSubElementClone=[]}},t.prototype.removeResizeClasses=function(e){for(var t=0;t<e.length;t++)for(var n=e[t].querySelectorAll(".e-resize"),r=0;r<n.length;r++)Sv(n[r])},t.prototype.ensureDrag=function(){this.checkDragging(this.dragCollection),yv(this.element.querySelectorAll("."+dE),[dE]),this.setClasses(this.panelCollection)},t.prototype.setClasses=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=e[t].querySelector(".e-panel-container");this.allowDragging&&(this.draggableHandle&&n.querySelectorAll(this.draggableHandle)[0]?vv([n.querySelectorAll(this.draggableHandle)[0]],[dE]):vv([n],[dE])),this.allowResizing&&this.mediaQuery&&!this.checkMediaQuery()&&this.setResizingClass(n,r)}},t.prototype.setResizingClass=function(e,t){if(this.availableClasses=this.resizableHandles,!e.querySelector(".e-resize"))for(var n=0;n<this.availableClasses.length;n++){var r=this.createElement("span");t.appendChild(r),vv([r],["e-east"===this.availableClasses[n]||"e-west"===this.availableClasses[n]||"e-north"===this.availableClasses[n]||"e-south"===this.availableClasses[n]?"e-single":"e-double",this.availableClasses[n],"e-resize","e-dl-icon"])}},t.prototype.setXYAttributes=function(e,t){var n={value:{sizeX:t.sizeX.toString(),sizeY:t.sizeY.toString(),minSizeX:t.minSizeX.toString(),minSizeY:t.minSizeY.toString(),maxSizeX:_g(t.maxSizeX)?void 0:t.maxSizeX.toString(),maxSizeY:_g(t.maxSizeY)?void 0:t.maxSizeY.toString(),row:t.row.toString(),col:t.col.toString()}};this.setAttributes(n,e)},t.prototype.setXYDimensions=function(e){var t,n=this.getCellSize()[1],r=this.getCellSize()[0];return t=e&&"number"===typeof r&&"number"===typeof e.sizeX&&e.sizeX>1?e.sizeX*r+(e.sizeX-1)*this.cellSpacing[0]:r,[e&&"number"===typeof n&&e.sizeY>1&&"number"===typeof e.sizeY?e.sizeY*n+(e.sizeY-1)*this.cellSpacing[1]:Ig(n),t]},t.prototype.getRowColumnDragValues=function(e){var t=parseFloat(e.element.style.top),n=parseFloat(e.element.style.left);return[Math.round(t/(this.getCellSize()[1]+this.cellSpacing[1])),Math.round(n/(this.getCellSize()[0]+ +this.cellSpacing[0]))]},t.prototype.checkForChanges=function(e,t,n){var r=[];if(this.removeAllCalled)r=[];else for(var i=0;i<this.panels.length;i++)!_g(t)&&this.panels[i].id===t[0].id||!_g(n)&&this.panels[i].id===n[0].id||this.panels[i].row===this.panelsInitialModel[i].row&&this.panels[i].col===this.panelsInitialModel[i].col||r.push(this.panels[i]);if(r.length>0||this.removeAllCalled){var o={changedPanels:r,isInteracted:e,addedPanels:_g(t)?[]:t,removedPanels:_g(n)?[]:n};this.trigger("change",o)}},t.prototype.enableDraggingContent=function(e){for(var t,n=this,r=function(r){var o=[".e-resize",".e-drag-restrict"],s=e[r];i.dragobj=new Ey(s,{preventDefault:!1,clone:!1,dragArea:i.element,isDragScroll:!0,handle:i.draggableHandle?i.draggableHandle:".e-panel",abort:o,dragStart:i.onDraggingStart.bind(i),dragStop:function(e){if(n.trigger("dragStop",e),_g(e.cancel)&&(e.cancel=!1),e.cancel){var t=n.getCellInstance(n.mainElement.id);for(r=0;r<n.panels.length;r++)n.panels[r].id===t.id&&(e.element.setAttribute("data-col",n.panelsInitialModel[r].col.toString()),e.element.setAttribute("data-row",n.panelsInitialModel[r].row.toString()),t.col=n.panelsInitialModel[r].col,t.row=n.panelsInitialModel[r].row,n.setPanelPosition(n.mainElement,n.panelsInitialModel[r].row,n.panelsInitialModel[r].col),n.updatePanelLayout(n.mainElement,t));n.shadowEle&&Sv(n.shadowEle)}else{var i=n.getCellInstance(n.mainElement.id);n.allowPushing&&n.collisions(i.row,i.col,i.sizeX,i.sizeY,n.mainElement).length>0?(n.setHolderPosition(e),n.setPanelPosition(n.mainElement,i.row,i.col),n.updatePanelLayout(n.mainElement,i)):n.setPanelPosition(n.mainElement,i.row,i.col),n.mainElement=null;var o=n.getPanelBase(e);n.shadowEle&&Sv(n.shadowEle),yv([n.element],[lE]),yv([e.element],[uE]),n.shadowEle=null,e.element.classList.remove("e-dragging");var s=n.getRowColumnDragValues(e)[0],a=n.getRowColumnDragValues(e)[1],c=n.getCellInstance(e.element.id);n.allowPushing&&0===n.collisions(s,a,c.sizeX,c.sizeY,document.getElementById(o.id)).length?(n.panelPropertyChange(n.getCellInstance(e.element.id),{row:s,col:a}),n.oldRowCol[e.element.id].row=s,n.oldRowCol[e.element.id].col=a,n.setAttributes({value:{col:a.toString(),row:s.toString()}},e.element),n.sortedPanel()):(n.panelPropertyChange(n.getCellInstance(e.element.id),{row:n.oldRowCol[e.element.id].row,col:n.oldRowCol[e.element.id].col}),e.element.setAttribute("data-col",n.getCellInstance(e.element.id).col.toString()),e.element.setAttribute("data-row",n.getCellInstance(e.element.id).row.toString()),n.sortedPanel());var l=n.getCellInstance(e.element.id);n.setPanelPosition(e.element,l.row,l.col),n.updatePanels(),n.updateCloneArrayObject(),n.checkForChanges(!0),n.dragStopEventArgs={event:e.event,element:e.element},n.resizeEvents(),n.rows=n.maxRow(!0),n.setHeightWidth(),n.updateDragArea()}},drag:function(e){n.draggedEventArgs={event:e.event,element:e.element,target:Nv(e.target,".e-panel")},n.trigger("drag",n.draggedEventArgs),n.onDragStart(e)}}),-1===i.dragCollection.indexOf(i.dragobj)&&i.dragCollection.push(i.dragobj),t=r},i=this,o=0;o<e.length;o++)r(o),o=t},t.prototype.updatePanels=function(){this.moveItemsUpwards(),this.updateOldRowColumn(),this.sortedPanel()},t.prototype.updateDragArea=function(){this.dragCollection.forEach((function(e){e.setDragArea()}))},t.prototype.updateRowsHeight=function(e,t,n){e+t>=this.rows&&(this.rows=this.rows+n,this.setHeightWidth())},t.prototype.onDraggingStart=function(e){var t=e;if(this.trigger("dragStart",t,(function(t){_g(e.cancel)&&(e.cancel=!1)})),this.eventVar=e.cancel,e.cancel)yv([this.element],[lE]),yv([e.element],[uE]);else{this.panelsInitialModel=this.cloneModels(this.panels),this.mainElement=e.element,this.cloneObject=JSON.parse(JSON.stringify(this.cloneObject));var n=this.startRow=parseInt(e.element.getAttribute("data-row"),10);this.startCol=parseInt(e.element.getAttribute("data-col"),10);var r=parseInt(e.element.getAttribute("data-sizeY"),10);this.updateRowsHeight(n,r,r),this.updateDragArea(),this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),this.shadowEle.classList.add("e-holder-transition"),wv(this.shadowEle,{position:"absolute"}),vv([this.element],[lE]),vv([e.element],[uE]),this.element.appendChild(this.shadowEle),this.renderReactTemplates(),this.shadowEle=document.querySelector(".e-holder"),this.shadowEle.style.height=this.getCellInstance(e.element.id).sizeY*this.cellSize[1]+"px",this.shadowEle.style.width=this.getCellInstance(e.element.id).sizeX*this.cellSize[0]+"px";var i=this.getCellInstance(e.element.id);this.setPanelPosition(this.shadowEle,i.row,i.col)}},t.prototype.cloneModels=function(e,t){void 0===t&&(t=[]);for(var n=0;n<e.length;n++)for(var r in t[n]||(t[n]={}),e[n])t[n][""+r]=e[n][""+r];return t},t.prototype.onDragStart=function(e){var t,n,r;if(this.eventVar)this.dragobj.intDestroy(e.event),yv([this.element],[lE]),yv([e.element],[uE]);else{var i=r=this.getRowColumnDragValues(e)[1],o=this.getRowColumnDragValues(e)[0];if(i<0||o<0)return;this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:i});var s=this.getCellInstance(e.element.id);if(this.updateRowsHeight(s.row,s.sizeY,1),this.updateDragArea(),this.allowPushing&&(this.setAttributes({value:{col:i.toString(),row:o.toString()}},e.element),this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:i}),t=this.oldRowCol[e.element.id].col,n=this.oldRowCol[e.element.id].row,this.oldRowCol[e.element.id]={row:o,col:i},this.updateOldRowColumn(),(this.startCol!==t||this.startRow!==n)&&(this.setHolderPosition(e),this.startCol!==t&&(this.startRow=n),this.startRow!==n&&(this.startCol=t),this.allowPushing))){this.mainElement=e.element;var a=s;this.checkCollision=this.collisions(a.row,a.col,a.sizeX,a.sizeY,e.element),s.col>=this.checkColumnValue&&(this.checkCollision=[]),this.updatePanelLayout(e.element,s),this.moveItemsUpwards()}if(!1!==this.allowPushing&&this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:i}),this.oldRowCol[e.element.id].row===o&&this.oldRowCol[e.element.id].col===i||(this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:i}),this.setAttributes({value:{col:i.toString(),row:o.toString()}},e.element)),this.startCol!==r&&(this.startCol=t,this.moveItemsUpwards()),this.allowPushing||this.setHolderPosition(e),this.removeResizeClasses(this.panelCollection),this.setClasses(this.panelCollection),!1===this.allowPushing)return}},t.prototype.getPanelBase=function(e){for(var t,n=0;n<this.panelCollection.length;n++)this.panelCollection[n].id===(e.element&&e.element.id||e)&&(t=this.panelCollection[n]);return t},t.prototype.getPanel=function(e,t,n){!n||n instanceof Array||(n=[n]);for(var r=1;e>-1;){for(var i=1,o=t;o>-1;){var s=this.sortedArray[e];if(s){var a=s[o];if(a&&(!n||-1===n.indexOf(a))&&parseInt(a.getAttribute("data-sizeX"),10)>=i&&parseInt(a.getAttribute("data-sizeY"),10)>=r)return a}++i,--o}--e,++r}return null},t.prototype.setHolderPosition=function(e){var t=parseInt(e.element.getAttribute("data-sizeY"),10),n=parseInt(e.element.getAttribute("data-col"),10),r=parseInt(e.element.getAttribute("data-row"),10),i=parseInt(e.element.getAttribute("data-sizeX"),10),o=this.getCellSize()[0],s=this.getCellSize()[1],a=0===r?0:r*(s+this.cellSpacing[1]),c=0===n?0:n*(o+this.cellSpacing[0]),l=this.getCellSize()[1],u=this.getCellSize()[0];this.elementRef.top=this.shadowEle.style.top=a+"px",this.elementRef.left=this.shadowEle.style.left=c+"px",this.elementRef.height=this.shadowEle.style.height=t*l+(t-1)*this.cellSpacing[1]+"px",this.elementRef.width=this.shadowEle.style.width=i*u+(i-1)*this.cellSpacing[0]+"px"},t.prototype.getCellInstance=function(e){for(var t,n=0;n<this.panels.length;n++)this.panels[n].id===e&&(t=this.panels[n]);return t},t.prototype.addPanel=function(e){this.panelsSizeY=0,this.maxCol(),e.minSizeX||(e.minSizeX=1),e.minSizeY||(e.minSizeY=1),e.id||(e.id="layout_"+this.panelID.toString(),this.panelID=this.panelID+1);var t=new gE(this,"panels",e,!0);this.panels.push(t),this.panelsInitialModel=this.cloneModels(this.panels),this.setMinMaxValues(t),(this.maxColumnValue<t.col||this.maxColumnValue<t.col+t.sizeX)&&this.panelPropertyChange(t,{col:this.maxColumnValue-t.sizeX});var n=this.renderCell(t,!0,null);if(this.oldRowCol[t.id]={row:t.row,col:t.col},this.cloneObject[t.id]={row:t.row,col:t.col},this.updateOldRowColumn(),this.element.insertAdjacentElement("afterbegin",n),this.addPanelCalled=!0,this.checkMediaQuery()?(this.checkMediaQuerySizing(),this.removeResizeClasses(this.panelCollection)):(this.mainElement=n,this.checkCollision||(this.checkCollision=[]),this.setPanelPosition(n,t.row,t.col),this.updatePanelLayout(n,t)),this.addPanelCalled=!1,this.allowDragging&&this.mediaQuery&&!this.checkMediaQuery()&&this.enableDraggingContent([document.getElementById(t.id)]),this.setClasses([n]),this.allowFloating&&(this.mainElement=null,this.moveItemsUpwards()),this.updateOldRowColumn(),this.sortedPanel(),this.updateCloneArrayObject(),this.allowResizing)for(var r=0;r<n.querySelectorAll(".e-resize").length;r++){var i="msie"===hv.info.name?"mousedown pointerdown":"mousedown";fv.add(n.querySelectorAll(".e-resize")[r],i,this.downResizeHandler,this),"msie"!==hv.info.name&&fv.add(n.querySelectorAll(".e-resize")[r],"touchstart",this.touchDownResizeHandler,this)}this.checkForChanges(!1,[t])},t.prototype.updatePanel=function(e){if(this.panelsSizeY=0,e.id){var t=this.getCellInstance(e.id);if(t){this.maxCol(),e.col=e.col<1?0:e.col>this.columns?this.columns-1:e.col,_g(e.col)&&(e.col=t.col),this.panelPropertyChange(t,e),this.setMinMaxValues(t);var n=document.getElementById(e.id);this.mainElement=n;var r=t.cssClass?t.cssClass.split(" "):null;if(this.panelContent=n.querySelector(".e-panel-container")?n.querySelector(".e-panel-container"):this.createSubElement(r,n.id+"_content",fE),n.appendChild(this.panelContent),t.header){var i=n.querySelector(".e-panel-header")?n.querySelector(".e-panel-header"):this.createSubElement([],n.id+"template","");vv([i],[mE]),i.innerHTML="";var o=this.element.id+"HeaderTemplate"+t.id;this.renderTemplate(t.header,i,o,!0,"header"),this.panelContent.appendChild(i),this.renderReactTemplates()}else n.querySelector(".e-panel-header")&&Sv(n.querySelector(".e-panel-header"));if(t.content){var s=t.cssClass?t.cssClass.split(" "):null;this.panelBody=n.querySelector(".e-panel-content")?n.querySelector(".e-panel-content"):this.createSubElement(s,n.id+"_body",hE),this.panelBody.innerHTML="";var a="calc( 100% - "+(this.panelContent.querySelector(".e-panel-header")?window.getComputedStyle(this.panelContent.querySelector(".e-panel-header")).height:"0px")+")";wv(this.panelBody,{height:a});o=this.element.id+"ContentTemplate"+t.id;this.renderTemplate(t.content,this.panelBody,o,!0,"content"),this.panelContent.appendChild(this.panelBody),this.renderReactTemplates()}else n.querySelector(".e-panel-content")&&Sv(n.querySelector(".e-panel-content"));this.setXYAttributes(n,t),this.setHeightAndWidth(n,t),this.setPanelPosition(n,t.row,t.col),this.updatePanelLayout(n,t),this.checkMediaQuery()&&this.checkMediaQuerySizing(),this.mainElement=null,this.updatePanels(),this.updateCloneArrayObject()}}},t.prototype.updateCloneArrayObject=function(){this.cloneArray=this.sortedArray,this.cloneObject=JSON.parse(JSON.stringify(this.oldRowCol))},t.prototype.serialize=function(){for(var e=this.cloneModels(this.panels),t=[],n=0;n<e.length;n++)t.push({id:e[n].id,row:e[n].row,col:e[n].col,sizeX:e[n].sizeX,sizeY:e[n].sizeY,minSizeX:e[n].minSizeX,minSizeY:e[n].minSizeY,maxSizeX:e[n].maxSizeX,maxSizeY:e[n].maxSizeY});return t},t.prototype.removeAll=function(){this.removeAllCalled=!0;for(var e=0;e<this.panelCollection.length;e++)Sv(this.panelCollection[e]),this.clearTemplate();this.removeAllPanel(),this.rows=0,this.gridPanelCollection=[],this.setHeightWidth(),this.sortedPanel(),this.sortedArray=[],this.overlapElementClone=[],this.overlapElement=[],this.overlapSubElementClone=[],this.panelCollection=[],this.oldRowCol={},this.cloneObject={};var t=this.cloneModels(this.panels);this.setProperties({panels:[]},!0),this.updatePanels(),this.updateCloneArrayObject(),this.checkForChanges(!1,null,t),this.removeAllCalled=!1},t.prototype.removePanel=function(e){var t,n=this;this.panelsSizeY=0,this.panelsInitialModel=this.cloneModels(this.panels);for(var r=0;r<this.panelCollection.length;r++)this.panelCollection[r].id===e&&(Sv(this.panelCollection[r]),this.panelCollection.splice(r,1)),this.panels[r].id===e&&(t=this.panels[r],this.panels.splice(r,1),this.panelsInitialModel.splice(r,1),this.updateOldRowColumn(),this.sortedPanel());this.updatePanels(),this.checkMediaQuery()&&(this.isPanelRemoved=!0,this.checkMediaQuerySizing(),this.isPanelRemoved=!1),this.gridPanelCollection.forEach((function(t){t.id===e&&n.gridPanelCollection.splice(n.gridPanelCollection.indexOf(t),1)})),this.updateCloneArrayObject(),this.checkForChanges(!1,null,[t])},t.prototype.movePanel=function(e,t,n){this.movePanelCalled=!0,this.panelsInitialModel=this.cloneModels(this.panels);var r=this.getCellInstance(e);if(!isNaN(t)&&null!==t&&!isNaN(n)&&null!==n&&r){n<0?n=0:n>this.columns&&(n=this.columns-r.sizeX),this.panelPropertyChange(r,{row:t,col:n});var i=document.getElementById(e);this.mainElement=i,this.startRow=parseInt(i.getAttribute("data-row"),10),this.startCol=parseInt(i.getAttribute("data-col"),10),this.setAttributes({value:{col:n.toString(),row:t.toString()}},i),this.updateOldRowColumn(),this.setPanelPosition(i,t,n),this.updatePanelLayout(i,r),this.updateRowHeight(),this.updatePanels(),this.updateCloneArrayObject(),this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.movePanelCalled=!1,this.checkForChanges(!1)}},t.prototype.setAttributes=function(e,t){for(var n=0;n<Object.keys(e).length;n++)Object.keys(e)&&(e[Object.keys(e)[n]].col&&t.setAttribute("data-col",e[Object.keys(e)[n]].col.toString()),e[Object.keys(e)[n]].row&&t.setAttribute("data-row",e[Object.keys(e)[n]].row.toString()),e[Object.keys(e)[n]].sizeX&&t.setAttribute("data-sizeX",e[Object.keys(e)[n]].sizeX.toString()),e[Object.keys(e)[n]].sizeY&&t.setAttribute("data-sizeY",e[Object.keys(e)[n]].sizeY.toString()),e[Object.keys(e)[n]].minSizeX&&t.setAttribute("data-minSizeX",e[Object.keys(e)[n]].minSizeX.toString()),e[Object.keys(e)[n]].minSizeY&&t.setAttribute("data-minSizeY",e[Object.keys(e)[n]].minSizeY.toString()),e[Object.keys(e)[n]].maxSizeX&&t.setAttribute("data-maxSizeY",e[Object.keys(e)[n]].maxSizeX.toString()),e[Object.keys(e)[n]].maxSizeY&&t.setAttribute("data-maxSizeY",e[Object.keys(e)[n]].maxSizeY.toString()))},t.prototype.resizePanel=function(e,t,n){this.panelsInitialModel=this.cloneModels(this.panels);var r=this.getCellInstance(e);this.resizeCalled=!0;var i=document.getElementById(e),o={event:null,element:i,isInteracted:!1};this.trigger("resizeStart",o),this.panelPropertyChange(r,{sizeX:t,sizeY:n}),this.setMinMaxValues(r),this.checkMinMaxValues(r),this.mainElement=i,this.setAttributes({value:{sizeX:r.sizeX.toString(),sizeY:r.sizeY.toString()}},i),this.setHeightAndWidth(i,r),this.updatePanelLayout(i,r),this.updatePanels(),this.updateRowHeight(),this.resizeCalled=!1,this.trigger("resizeStop",o),this.checkForChanges(!1)},t.prototype.destroy=function(){fv.remove(window,"resize",this.refreshListener),yv([this.element],["e-dashboardlayout","e-lib","e-responsive","e-control"]),this.element.removeAttribute("style");for(var t=0;t<this.dragCollection.length;t++)this.dragCollection[t].destroy();this.removeAllPanel(),e.prototype.destroy.call(this),this.clearTemplate(),this.renderReactTemplates()},t.prototype.removeAllPanel=function(){for(;this.element.firstElementChild;)Sv(this.element.firstElementChild),this.clearTemplate()},t.prototype.setEnableRtl=function(){!0===this.enableRtl?vv([this.element],"e-rtl"):yv([this.element],"e-rtl")},t.prototype.updateCellSizeAndSpacing=function(){this.panelResponsiveUpdate(),this.setHeightWidth(),this.getRowColumn();for(var e=0;e<this.element.querySelectorAll(".e-panel").length;e++){var t=this.element.querySelectorAll(".e-panel")[e],n=this.getCellInstance(t.id);this.setHeightAndWidth(t,n),this.setPanelPosition(t,n.row,n.col)}},t.prototype.updatePanelsDynamically=function(e){this.removeAll(),this.setProperties({panels:e},!0),this.setOldRowCol(),this.table&&this.table.remove(),this.initialize(),this.checkMediaQuery()&&this.refresh(),this.showGridLines&&this.initGridLines()},t.prototype.checkForIDValues=function(e){var t=this;!_g(e)&&e.length>0?(this.panelID=0,e.forEach((function(e){e.id||(t.panelPropertyChange(e,{id:"layout_"+t.panelID.toString()}),t.panelID=t.panelID+1)}))):this.restrictDynamicUpdate=!0},t.prototype.onPropertyChanged=function(e,t){var n=this;e.panels&&e.panels.length>0&&e.panels[0]instanceof gE&&this.checkForIDValues(e.panels);for(var r=0,i=Object.keys(e);r<i.length;r++){switch(i[r]){case"enableRtl":this.setProperties({enableRtl:e.enableRtl},!0),this.setEnableRtl();break;case"mediaQuery":this.setProperties({mediaQuery:e.mediaQuery},!0),this.checkMediaQuery()&&this.checkMediaQuerySizing();break;case"allowDragging":this.setProperties({allowDragging:e.allowDragging},!0),this.ensureDrag();break;case"allowResizing":if(this.setProperties({allowResizing:e.allowResizing},!0),this.allowResizing)this.setClasses(this.panelCollection),this.resizeEvents();else{for(var o=this.element.querySelectorAll(".e-panel .e-panel-container .e-resize"),s=0;s<o.length;s++){var a="msie"===hv.info.name?"mousedown pointerdown":"mousedown",c=o[s];fv.remove(c,a,this.downResizeHandler),"msie"!==hv.info.name&&fv.remove(c,"touchstart",this.touchDownResizeHandler)}this.removeResizeClasses(this.panelCollection)}break;case"cellSpacing":this.setProperties({cellSpacing:e.cellSpacing},!0),this.updateCellSizeAndSpacing(),this.updateGridLines();break;case"draggableHandle":this.setProperties({draggableHandle:e.draggableHandle},!0),this.ensureDrag();break;case"allowFloating":this.setProperties({allowFloating:e.allowFloating},!0),this.moveItemsUpwards();break;case"showGridLines":this.showGridLines?(this.setProperties({showGridLines:e.showGridLines},!0),this.initGridLines()):this.table&&Sv(this.table);break;case"allowPushing":this.setProperties({allowPushing:e.allowPushing},!0);break;case"panels":!e.columns&&!this.restrictDynamicUpdate&&e.panels[0]&&e.panels.length>0?(this.isRenderComplete=!1,this.updatePanelsDynamically(e.panels),this.isRenderComplete=!0):e.panels[0]&&e.panels.length?this.restrictDynamicUpdate=!1:(this.isRenderComplete=!1,this.updatePanelsDynamically(this.panels),this.isRenderComplete=!0);break;case"columns":this.isRenderComplete=!1,e.panels&&this.updatePanelsDynamically(e.panels),this.setProperties({columns:e.columns},!0),this.panelCollection=[],this.maxColumnValue=this.columns,this.calculateCellSize(),this.panels.forEach((function(e){if(n.setMinMaxValues(e),n.maxColumnValue<e.col||n.maxColumnValue<e.col+e.sizeX){var t=n.maxColumnValue-e.sizeX;n.panelPropertyChange(e,{col:t<0?0:t}),n.setXYAttributes(document.getElementById(e.id),e)}n.setHeightAndWidth(document.getElementById(e.id),e),n.panelCollection.push(document.getElementById(e.id)),n.setPanelPosition(document.getElementById(e.id),e.row,e.col),n.mainElement=document.getElementById(e.id),n.updatePanelLayout(document.getElementById(e.id),e),n.mainElement=null})),this.updatePanels(),this.updateCloneArrayObject(),this.isRenderComplete=!0,this.updateGridLines()}}},t.prototype.getPersistData=function(){return this.addOnPersist(["panels"])},t.prototype.mergePersistPanelData=function(e){var t=window.localStorage.getItem(this.getModuleName()+this.element.id);if(!_g(t)&&""!==t||!_g(e)){var n=_g(e)?JSON.parse(t):e,r=Object.keys(n);this.isProtectedOnChange=!0;for(var i=0,o=r;i<o.length;i++){var s=o[i];"object"!==typeof fg(s,this)||_g(fg(s,this))||Array.isArray(fg(s,this))&&"panels"===s&&this.mergePanels(n[s],this[s])}this.isProtectedOnChange=!1}},t.prototype.mergePanels=function(e,t){for(var n=e,r=function(e){i.checkForIDValues(t);var r=t.filter((function(t){return t.id===n[e].id}))[0];_g(r)||(n[e]=Eg(r,n[e],{},!0))},i=this,o=0;o<n.length;o++)r(o)},t.prototype.getModuleName=function(){return"DashboardLayout"},cE([zv(!0)],t.prototype,"allowDragging",void 0),cE([zv(!1)],t.prototype,"allowResizing",void 0),cE([zv(!0)],t.prototype,"allowPushing",void 0),cE([zv(!0)],t.prototype,"enableHtmlSanitizer",void 0),cE([zv(!0)],t.prototype,"allowFloating",void 0),cE([zv(1)],t.prototype,"cellAspectRatio",void 0),cE([zv([5,5])],t.prototype,"cellSpacing",void 0),cE([zv(1)],t.prototype,"columns",void 0),cE([zv(!1)],t.prototype,"showGridLines",void 0),cE([zv(null)],t.prototype,"draggableHandle",void 0),cE([zv("en-US")],t.prototype,"locale",void 0),cE([zv("max-width: 600px")],t.prototype,"mediaQuery",void 0),cE([(n=[],r=gE,function(e,t){var i={set:jv(n,t,r),get:Pv(n,t,r),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),Gv(e,t,"colProp",n,r)})],t.prototype,"panels",void 0),cE([zv(["e-south-east"])],t.prototype,"resizableHandles",void 0),cE([Vv()],t.prototype,"change",void 0),cE([Vv()],t.prototype,"dragStart",void 0),cE([Vv()],t.prototype,"drag",void 0),cE([Vv()],t.prototype,"dragStop",void 0),cE([Vv()],t.prototype,"resizeStart",void 0),cE([Vv()],t.prototype,"resize",void 0),cE([Vv()],t.prototype,"resizeStop",void 0),cE([Vv()],t.prototype,"created",void 0),cE([Vv()],t.prototype,"destroyed",void 0),t=cE([Hv],t)}(hy),yE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),EE=["alt","className","disabled","form","id","readOnly","style","tabIndex","title","type","name","onClick","onFocus","onBlur"],_E=["accordion","tab","splitter"],bE=new RegExp("]"),SE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mountingState=!1,t.attrKeys=[],t.cachedTimeOut=0,t.isAppendCalled=!1,t.initRenderCalled=!1,t.isReactForeceUpdate=!1,t.isReact=!0,t.isshouldComponentUpdateCalled=!1,t.isCreated=!1,t}return yE(t,e),t.prototype.componentDidMount=function(){this.refreshChild(!0),this.canDelayUpdate=-1!==_E.indexOf(this.getModuleName()),this.renderReactComponent(),this.portals&&this.portals.length&&(this.mountingState=!0,this.renderReactTemplates(),this.mountingState=!1)},t.prototype.componentDidUpdate=function(e){this.isshouldComponentUpdateCalled||!this.initRenderCalled||this.isReactForeceUpdate||(this.isshouldComponentUpdateCalled=!0,e!==this.props&&this.refreshProperties(this.props,!0))},t.prototype.renderReactComponent=function(){var e=this.reactElement;e&&!this.isAppendCalled&&(this.isAppendCalled=!0,this.appendTo(e))},t.prototype.shouldComponentUpdate=function(e){return this.isshouldComponentUpdateCalled=!0,this.initRenderCalled?(this.isAppendCalled||(clearTimeout(this.cachedTimeOut),this.isAppendCalled=!0,this.appendTo(this.reactElement)),this.updateProperties(e),!0):(this.updateProperties(e,!0),!0)},t.prototype.updateProperties=function(e,t){for(var n=this,r=Eg({},e),i=Object.keys(e),o=_g(this.props.statelessTemplates)?["valueTemplate","itemTemplate","headerTemplate","content"]:this.props.statelessTemplates,s=0,a=i;s<a.length;s++){var c=a[s],l="className"===c;if("children"!==c)if(l||_g(this.htmlattributes[""+c])||this.htmlattributes[""+c]===r[""+c]||(this.htmlattributes[""+c]=r[""+c]),this.compareValues(this.props[""+c],e[""+c]))delete r[""+c];else if(-1!==this.attrKeys.indexOf(c))if(l){this.clsName=!0;for(var u=this.props[""+c].split(" "),d=0;d<u.length;d++)this.element.classList.remove(u[parseInt(d.toString(),10)]);for(var p=r[""+c].split(" "),h=0;h<p.length;h++)this.element.classList.add(p[parseInt(h.toString(),10)])}else"disabled"!==c&&delete r[""+c];else("value"===c&&e[""+c]===this[""+c]||o.indexOf(c)>-1&&("content"===c&&"function"===typeof r[""+c]||e[""+c].toString()===this[""+c].toString()))&&delete r[""+c]}r.children&&delete r.children,this.initRenderCalled&&(this.canDelayUpdate||this.props.delayUpdate)?setTimeout((function(){n.refreshProperties(r,e,t)})):this.refreshProperties(r,e,t)},t.prototype.refreshProperties=function(e,t,n){var r=_g(this.props.statelessTemplates)?[]:this.props.statelessTemplates;Object.keys(e).length&&(n||this.processComplexTemplate(e,this),this.setProperties(e,n)),-1===r.indexOf("directiveTemplates")&&this.refreshChild(n,t)},t.prototype.processComplexTemplate=function(e,t){var n=t.complexTemplate;if(n)for(var r in n){var i=n[""+r];e[""+r]&&mg(i,fg(r,e),e)}},t.prototype.getDefaultAttributes=function(){var e=this;this.isReact=!0;var n=Object.keys(this.props);this.htmlattributes||(this.htmlattributes={}),this.attrKeys=EE.concat(this.controlAttributes||[]);for(var r=0,i=n;r<i.length;r++){var o=i[r];-1===o.indexOf("data-")&&-1===o.indexOf("aria-")&&-1===this.attrKeys.indexOf(o)||this.htmlattributes[""+o]!==this.props[""+o]&&(this.htmlattributes[""+o]=this.props[""+o])}if(!this.htmlattributes.ref){this.htmlattributes.ref=function(t){e.reactElement=t};-1!==["autocomplete","combobox","dropdownlist","dropdowntree","multiselect","listbox","colorpicker","numerictextbox","textbox","uploader","maskedtextbox","slider","datepicker","datetimepicker","daterangepicker","timepicker","checkbox","switch","radio"].indexOf(this.getModuleName())&&(this.htmlattributes.key=""+t.reactUid,t.reactUid++)}if(this.clsName){for(var s=this.element.classList,a=this.htmlattributes.className,c=0;c<s.length;c++)-1===a.indexOf(s[parseInt(c.toString(),10)])&&(this.htmlattributes.className=this.htmlattributes.className+" "+s[parseInt(c.toString(),10)]);this.clsName=!1}return this.htmlattributes},t.prototype.trigger=function(e,t,n){var r=this;if(!0!==this.isDestroyed&&this.modelObserver){if(bE.test(e)){var i=fg(e,this);i?(i.call(this,t),n&&n.call(this,t)):n&&n.call(this,t)}"change"!==e&&"input"!==e||this.props.onChange&&t.event&&this.props.onChange.call(void 0,{syntheticEvent:t.event,nativeEvent:{text:t.value},value:t.value,target:this});var o=this.isProtectedOnChange;this.isProtectedOnChange=!1,"created"===e?setTimeout((function(){r.isCreated=!0,r.isDestroyed||r.modelObserver.notify(e,t,n)}),10):this.modelObserver.notify(e,t,n),this.isProtectedOnChange=o}},t.prototype.compareValues=function(e,t){if(typeof e===typeof t){if(e===t)return!0;if((!_g(e)&&e.constructor)!==(!_g(t)&&t.constructor))return!1;if(e instanceof Date||e instanceof RegExp||e instanceof String||e instanceof Number)return e.toString()===t.toString();if(vg(e)||Array.isArray(e)){var n=e,r=t;return vg(n)&&(n=[e],r=[t]),this.compareObjects(n,r).status}}return!1},t.prototype.compareObjects=function(e,t,n){var r=!0,i=[];if(e.length===t.length)for(var o=0,s=t.length;o<s;o++){var a={},c=e[parseInt(o.toString(),10)],l=t[parseInt(o.toString(),10)],u=Object.keys(l);if(0!==u.length)for(var d=0,p=u;d<p.length;d++){var h=p[d],f=c[""+h],m=l[""+h];if("items"===h)for(var g=0;g<m.length;g++)if("richtexteditor"===this.getModuleName()&&"object"===typeof m[parseInt(g.toString(),10)])return{status:!0};if("grid"===this.getModuleName()&&"field"===h&&(a[""+h]=m),!c.hasOwnProperty(h)||!this.compareValues(f,m)){if(!n)return{status:!1};r=!1,a[""+h]=m}}else if(t[parseInt(o.toString(),10)]===e[parseInt(o.toString(),10)])r=!0;else{if(!n)return{status:!1};r=!1}Object.keys(a).length&&i.push({index:o,value:a,key:n})}else r=!1;return{status:r,changedProperties:i}},t.prototype.refreshChild=function(e,t){if(this.checkInjectedModules){for(var n=this.getInjectedModules()||[],r=0,i=this.getInjectedServices()||[];r<i.length;r++){var o=i[r];-1===n.indexOf(o)&&n.push(o)}this.injectedModules=n}if(this.directivekeys){var s=[],a=this.validateChildren({},this.directivekeys,t||this.props);if(a&&Object.keys(a).length){if(!e&&this.skipRefresh)for(var c=0,l=this.skipRefresh;c<l.length;c++){delete a[""+l[c]]}if(this.prevProperties)for(var u=Object.keys(this.prevProperties),d=0;d<u.length;d++){var p=u[parseInt(d.toString(),10)];if(a.hasOwnProperty(p)){var h=this.compareObjects(this.prevProperties[""+p],a[""+p],p);if(h.status)delete a[""+p];else{h.changedProperties.length&&(s=s.concat(h.changedProperties));var f={};f[""+p]=a[""+p],this.prevProperties=Eg(this.prevProperties,f)}}}else this.prevProperties=Eg({},a,{},!0);if(s.length)if("grid"===this.getModuleName()&&"columns"===p)for(var m=0,g=this.columns;m<g.length;m++){if(fg("field",g[parseInt(m.toString(),10)])===fg(m+".value.field",s)){var v=fg(s[parseInt(m.toString(),10)].key+"."+s[parseInt(m.toString(),10)].index,this);v&&v.setProperties?v.setProperties(s[parseInt(m.toString(),10)].value):Eg(v,s[parseInt(m.toString(),10)].value)}else this.setProperties(a,e)}else for(var y=0,E=s;y<E.length;y++){var _=E[y],b=fg(_.key+"."+_.index,this);b&&b.setProperties?b.setProperties(_.value):Eg(b,_.value)}else this.setProperties(a,e)}}},t.prototype.componentWillUnmount=function(){clearTimeout(this.cachedTimeOut);this.initRenderCalled&&this.isAppendCalled&&this.element&&(["dropdowntree","checkbox"].indexOf(this.getModuleName())||document.body.contains(this.element))&&!this.isDestroyed&&this.isCreated&&this.destroy()},t.prototype.appendReactElement=function(e,t){var n=s.createPortal(e,t);this.portals?this.portals.push(n):this.portals=[n]},t.prototype.renderReactTemplates=function(e){this.isReactForeceUpdate=!0,e?this.forceUpdate(e):this.forceUpdate(),this.isReactForeceUpdate=!1},t.prototype.clearTemplate=function(e,t,n){var r=this,i=[];e&&e.length?Array.prototype.forEach.call(e,(function(e){var n=0,o=0;if(r.portals.forEach((function(t){t.propName===e&&(i.push(o),o++)})),_g(t)||r.portals[i[(""+t)[parseInt(n.toString(),10)]]].propName!==e)for(var s=0;s<r.portals.length;s++)r.portals[parseInt(s.toString(),10)].propName===e&&(r.portals.splice(s,1),s--);else r.portals.splice(t,1),n++})):this.portals=[],this.renderReactTemplates(n)},t.prototype.validateChildren=function(e,t,n){for(var i=!1,o=0,s=r.Children.toArray(n.children);o<s.length;o++){var a=s[o],c=this.getChildType(a),l=t[""+c];if(c&&t){var u=this.getChildProps(r.Children.toArray(a.props.children),l);u.length&&(i=!0,e[a.type.propertyName||c]=u)}}return i?e:null},t.prototype.getChildType=function(e){return e.type&&e.type.isDirective&&e.type.moduleName||""},t.prototype.getChildProps=function(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r],s=!1,a=void 0;"string"===typeof t?(s=!0,a=t):a=Object.keys(t)[0];var c=o.props;if(this.getChildType(o)===a)if(s||!c.children){var l=Eg({},c,{},!0);this.processComplexTemplate(l,o.type),n.push(l)}else{var u=this.validateChildren(Eg({},c),t[""+a],c)||c;u.children&&delete u.children,this.processComplexTemplate(u,o.type),n.push(u)}}return n},t.prototype.getInjectedServices=function(){for(var e=0,t=r.Children.toArray(this.props.children);e<t.length;e++){var n=t[e];if(n.type.isService)return n.props.services}return[]},t.reactUid=1,t}(r.Component);var TE,IE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),NE=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}IE(t,e),t.prototype.render=function(){return null},t.isDirective=!0}(r.PureComponent),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),wE=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}NE(t,e),t.prototype.render=function(){return null},t.isService=!0}(r.PureComponent),nE.compile);TE={compile:function(e,t){return"string"===typeof e?wE(e,t):function(t,n,i,o){var a,c=e,l=t;"object"===typeof c&&(c=e.template,l=Eg({},t,e.data||{})),a=o||document.createElement("div");var u=r.createElement(c,l),d=s.createPortal(u,a);if(d.propName=i,n.portals?n.portals.push(d):n.portals=[d],!o)return[a]}}},nE.compile=TE.compile;var CE,OE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),AE=function(e){function t(t){var n=e.call(this,t)||this;return n.initRenderCalled=!1,n.checkInjectedModules=!1,n.directivekeys={panels:"panel"},n.immediateRender=!1,n.portals=[],n}return OE(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return r.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},t}(vE);CE=AE,[SE,r.Component].forEach((function(e){Object.getOwnPropertyNames(e.prototype).forEach((function(t){"isMounted"!==t&&"replaceState"!==t&&(CE.prototype[""+t]=e.prototype[""+t])}))}));const RE=e=>{const{users:t,tracks:n}=e,r=new Array(t.length<6?6:t.length).fill(0);return(0,Me.jsx)("div",{className:"control-section",id:"predefine_control",children:(0,Me.jsx)("div",{className:"content-wrapper",style:{maxWidth:"95%",margin:"10px auto"},children:(0,Me.jsxs)(AE,{created:()=>{},columns:6,id:"predefine_dashboard",cellSpacing:[5,5],resizeStop:e=>{if(e.element&&e.element.querySelector(".e-panel-container .e-panel-content div div div")){let t=e.element.querySelector(".e-panel-container .e-panel-content div div div").ej2_instances[0];const n=e.element.querySelector(".e-panel-container .e-panel-content").clientHeight;t.height="".concat(n-20),t.width="100%",t.refresh()}},allowResizing:!0,allowDragging:!0,children:[(0,Me.jsxs)("div",{id:"one",className:"e-panel","data-row":"0","data-col":"0","data-sizex":"6","data-sizey":"2",children:[(0,Me.jsx)("span",{id:"close",className:"e-template-icon e-clear-icon"}),(0,Me.jsx)("div",{className:"e-panel-container",children:(0,Me.jsx)(cg,{className:"vid",videoTrack:n[0],style:{height:"95%",width:"570px",margin:"8px auto"}})})]}),r.map(((e,n)=>{var r;return(0,Me.jsxs)("div",{id:"user-".concat(n),className:"e-panel","data-row":"2","data-col":n,"data-sizex":"1","data-sizey":"1",children:[(0,Me.jsx)("span",{id:"close",className:"e-template-icon e-clear-icon"}),(0,Me.jsx)("div",{className:"e-panel-container",children:(null===(r=t[n])||void 0===r?void 0:r.videoTrack)&&(0,Me.jsx)(cg,{className:"vid",videoTrack:t[n].videoTrack,style:{height:"100%",width:"100%"}},t[n].uid)})]},"user-".concat(n))}))]})})})},ME=e=>{const{setInCall:t,channelName:n}=e,[i,o]=ug(),[s,a]=(0,r.useState)([]),[c,l]=(0,r.useState)(!1),u=i(),{ready:d,tracks:p}=o();return(0,r.useEffect)((()=>{d&&p&&(console.log("init ready"),(async e=>{u.on("user-published",(async(e,t)=>{var n;await u.subscribe(e,t),console.log("subscribe success"),"audio"===t&&(null===(n=e.audioTrack)||void 0===n||n.play())})),u.on("user-unpublished",((e,t)=>{var n;console.log("unpublished",e,t),"audio"===t&&(null===(n=e.audioTrack)||void 0===n||n.stop()),"video"===t&&a((t=>t.filter((t=>t.uid!==e.uid))))})),u.on("user-left",(e=>{console.log("leaving",e),a((t=>t.filter((t=>t.uid!==e.uid))))})),await u.join("5524bffbadca4a1698c527eb676b5b74",e,"007eJxTYHBROWS472v8Lz+Vkqp5HPoGc+69St7gkpSdOfvN1L0Ju2YoMJiaGpkkpaUlJaYkJ5okGppZWiSbGpmnJpmZmyWZJpmb5B88mdoQyMiQJ6bNwsgAgSA+O0NyRmJeXmoOAwMA6nUhRw==",null),p&&await u.publish([p[0],p[1]]),l(!0)})(n))}),[n,d,p]),(0,Me.jsx)("div",{className:"App",children:c&&p&&(0,Me.jsx)(RE,{users:s,tracks:p})})},DE=e=>{const{setInCall:t,setChannelName:n}=e;return(0,Me.jsx)("div",{className:"e-card wrapper",children:(0,Me.jsxs)("div",{className:"wrapper-inner",children:[(0,Me.jsx)("h1",{className:"heading",children:"Join a Meeting"}),(0,Me.jsxs)("form",{className:"join",children:[(0,Me.jsx)("input",{type:"text",placeholder:"Enter Channel Name",floatLabelType:"Auto",onChange:e=>n(e.target.value)}),(0,Me.jsx)("button",{type:"submit",onClick:e=>{e.preventDefault(),t(!0)},children:"Join"})]})]})})},kE=()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)("");return(0,Me.jsx)("div",{children:e?(0,Me.jsx)(ME,{setInCall:t,channelName:n}):(0,Me.jsx)(DE,{setInCall:t,setChannelName:i})})};var xE=__webpack_require__(1604),LE=__webpack_require__.n(xE);function PE(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(null);return(0,Me.jsxs)("div",{className:"App",children:[(0,Me.jsx)("button",{onClick:()=>{let n=LE().createClient({mode:"rtc",codec:"h264"});n.init("5524bffbadca4a1698c527eb676b5b74",(()=>{n.join(null,"abc",null,(t=>{let r=LE().createStream({streamID:t,audio:!0,video:!1,screen:!1});s(r),r.init((()=>{n.publish(r),r.play("local_stream")})),n.on("stream-added",(t=>{let n=t.stream;n.getId();e.subscribed(n)})),n.on("stream-subscribed",(e=>{e.stream.play("remote_stream")}))}))})),t(n)},children:"JOIN CALL"}),(0,Me.jsx)("div",{id:"local_stream"}),(0,Me.jsx)("div",{id:"remote_stream"})]})}var jE=__webpack_require__(9472),UE=__webpack_require__.n(jE);const FE=()=>{const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)([]),[o,s]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=new(UE().connection)({appKey:"611099035#1281065"});return e.addEventHandler("connection&message",{onConnected:()=>{console.log("Connect success !")},onDisconnected:()=>{console.log("Logout success !")},onTextMessage:e=>{console.log(e),i((t=>[...t,e]))},onTokenWillExpire:e=>{console.log("Token is about to expire")},onTokenExpired:e=>{console.log("The token has expired")},onError:e=>{console.error("Error:",e)}}),t(e),()=>{e&&e.close()}}),[]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("link",{href:"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css",rel:"stylesheet"}),(0,Me.jsx)("div",{className:"container",children:(0,Me.jsx)("div",{className:"row clearfix",children:(0,Me.jsx)("div",{className:"col-lg-12",children:(0,Me.jsx)("div",{className:"card chat-app",children:(0,Me.jsxs)("div",{className:"chat",children:[(0,Me.jsx)("div",{className:"chat-header clearfix",children:(0,Me.jsx)("div",{className:"row",children:(0,Me.jsxs)("div",{className:"col-lg-6",children:[(0,Me.jsx)("a",{"data-toggle":"modal","data-target":"#view_info",children:(0,Me.jsx)("img",{src:"https://bootdey.com/img/Content/avatar/avatar2.png",alt:"avatar"})}),(0,Me.jsxs)("div",{className:"chat-about",children:[(0,Me.jsx)("h6",{className:"m-b-0",children:"Aiden Chavez"}),(0,Me.jsx)("small",{children:"Last seen: 2 hours ago"})]})]})})}),(0,Me.jsx)("div",{className:"chat-history",children:(0,Me.jsxs)("ul",{className:"m-b-0",children:[(0,Me.jsxs)("li",{className:"clearfix",children:[(0,Me.jsxs)("div",{className:"message-data text-right",children:[(0,Me.jsx)("span",{className:"message-data-time",children:"10:10 AM, Today"}),(0,Me.jsx)("img",{src:"https://bootdey.com/img/Content/avatar/avatar7.png",alt:"avatar"})]}),(0,Me.jsx)("div",{className:"message other-message float-right",children:" Hi Aiden, how are you? How is the project coming along? "})]}),(0,Me.jsxs)("li",{className:"clearfix",children:[(0,Me.jsx)("div",{className:"message-data",children:(0,Me.jsx)("span",{className:"message-data-time",children:"10:12 AM, Today"})}),(0,Me.jsx)("div",{className:"message my-message",children:"Are we meeting today?"})]}),(0,Me.jsxs)("li",{className:"clearfix",children:[(0,Me.jsx)("div",{className:"message-data",children:(0,Me.jsx)("span",{className:"message-data-time",children:"10:15 AM, Today"})}),(0,Me.jsx)("div",{className:"message my-message",children:"Project has been already finished and I have results to show you."})]})]})}),(0,Me.jsx)("div",{className:"chat-message clearfix",children:(0,Me.jsxs)("div",{className:"input-group mb-0",children:[(0,Me.jsx)("div",{className:"input-group-prepend",children:(0,Me.jsx)("span",{className:"input-group-text",children:(0,Me.jsx)("i",{className:"fa fa-send"})})}),(0,Me.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter text here..."})]})})]})})})})})]})};var zE=e=>"checkbox"===e.type,BE=e=>e instanceof Date,VE=e=>null==e;const HE=e=>"object"===typeof e;var GE=e=>!VE(e)&&!Array.isArray(e)&&HE(e)&&!BE(e),WE=e=>GE(e)&&e.target?zE(e.target)?e.target.checked:e.target.value:e,YE=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),qE=e=>{const t=e.constructor&&e.constructor.prototype;return GE(t)&&t.hasOwnProperty("isPrototypeOf")},KE="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function QE(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(KE&&(e instanceof Blob||e instanceof FileList)||!n&&!GE(e))return e;if(t=n?[]:{},n||qE(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=QE(e[n]));else t=e}return t}var JE=e=>Array.isArray(e)?e.filter(Boolean):[],XE=e=>void 0===e,ZE=(e,t,n)=>{if(!t||!GE(e))return n;const r=JE(t.split(/[,[\].]+?/)).reduce(((e,t)=>VE(e)?e:e[t]),e);return XE(r)||r===e?XE(e[t])?n:e[t]:r},$E=e=>"boolean"===typeof e;const e_={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},t_={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},n_="max",r_="min",i_="maxLength",o_="minLength",s_="pattern",a_="required",c_="validate";r.createContext(null);var l_=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(i,o,{get:()=>{const i=o;return t._proxyFormState[i]!==t_.all&&(t._proxyFormState[i]=!r||t_.all),n&&(n[i]=!0),e[i]}});return i},u_=e=>GE(e)&&!Object.keys(e).length,d_=(e,t,n,r)=>{n(e);const{name:i,...o}=e;return u_(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find((e=>t[e]===(!r||t_.all)))},p_=e=>Array.isArray(e)?e:[e];function h_(e){const t=r.useRef(e);t.current=e,r.useEffect((()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}}),[e.disabled])}var f_=e=>"string"===typeof e,m_=(e,t,n,r,i)=>f_(e)?(r&&t.watch.add(e),ZE(n,e,i)):Array.isArray(e)?e.map((e=>(r&&t.watch.add(e),ZE(n,e)))):(r&&(t.watchAll=!0),n);var g_=e=>/^\w*$/.test(e),v_=e=>JE(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y_=(e,t,n)=>{let r=-1;const i=g_(t)?[t]:v_(t),o=i.length,s=o-1;for(;++r<o;){const t=i[r];let o=n;if(r!==s){const n=e[t];o=GE(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}e[t]=o,e=e[t]}return e};var E_=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},__=e=>({isOnSubmit:!e||e===t_.onSubmit,isOnBlur:e===t_.onBlur,isOnChange:e===t_.onChange,isOnAll:e===t_.all,isOnTouch:e===t_.onTouched}),b_=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));const S_=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const n=ZE(e,i);if(n){const{_f:e,...o}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!r)break;if(e.ref&&t(e.ref,e.name)&&!r)break;S_(o,t)}else GE(o)&&S_(o,t)}}};var T_=(e,t,n)=>{const r=JE(ZE(e,n));return y_(r,"root",t[n]),y_(e,n,r),e},I_=e=>"file"===e.type,N_=e=>"function"===typeof e,w_=e=>{if(!KE)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},C_=e=>f_(e),O_=e=>"radio"===e.type,A_=e=>e instanceof RegExp;const R_={value:!1,isValid:!1},M_={value:!0,isValid:!0};var D_=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!XE(e[0].attributes.value)?XE(e[0].value)||""===e[0].value?M_:{value:e[0].value,isValid:!0}:M_:R_}return R_};const k_={isValid:!1,value:null};var x_=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),k_):k_;function L_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(C_(e)||Array.isArray(e)&&e.every(C_)||$E(e)&&!e)return{type:n,message:C_(e)?e:"",ref:t}}var P_=e=>GE(e)&&!A_(e)?e:{value:e,message:""},j_=async(e,t,n,r,i)=>{const{ref:o,refs:s,required:a,maxLength:c,minLength:l,min:u,max:d,pattern:p,validate:h,name:f,valueAsNumber:m,mount:g,disabled:v}=e._f,y=ZE(t,f);if(!g||v)return{};const E=s?s[0]:o,_=e=>{r&&E.reportValidity&&(E.setCustomValidity($E(e)?"":e||""),E.reportValidity())},b={},S=O_(o),T=zE(o),I=S||T,N=(m||I_(o))&&XE(o.value)&&XE(y)||w_(o)&&""===o.value||""===y||Array.isArray(y)&&!y.length,w=E_.bind(null,f,n,b),C=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i_,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o_;const s=e?t:n;b[f]={type:e?r:i,message:s,ref:o,...w(e?r:i,s)}};if(i?!Array.isArray(y)||!y.length:a&&(!I&&(N||VE(y))||$E(y)&&!y||T&&!D_(s).isValid||S&&!x_(s).isValid)){const{value:e,message:t}=C_(a)?{value:!!a,message:a}:P_(a);if(e&&(b[f]={type:a_,message:t,ref:E,...w(a_,t)},!n))return _(t),b}if(!N&&(!VE(u)||!VE(d))){let e,t;const r=P_(d),i=P_(u);if(VE(y)||isNaN(y)){const n=o.valueAsDate||new Date(y),s=e=>new Date((new Date).toDateString()+" "+e),a="time"==o.type,c="week"==o.type;f_(r.value)&&y&&(e=a?s(y)>s(r.value):c?y>r.value:n>new Date(r.value)),f_(i.value)&&y&&(t=a?s(y)<s(i.value):c?y<i.value:n<new Date(i.value))}else{const n=o.valueAsNumber||(y?+y:y);VE(r.value)||(e=n>r.value),VE(i.value)||(t=n<i.value)}if((e||t)&&(C(!!e,r.message,i.message,n_,r_),!n))return _(b[f].message),b}if((c||l)&&!N&&(f_(y)||i&&Array.isArray(y))){const e=P_(c),t=P_(l),r=!VE(e.value)&&y.length>+e.value,i=!VE(t.value)&&y.length<+t.value;if((r||i)&&(C(r,e.message,t.message),!n))return _(b[f].message),b}if(p&&!N&&f_(y)){const{value:e,message:t}=P_(p);if(A_(e)&&!y.match(e)&&(b[f]={type:s_,message:t,ref:o,...w(s_,t)},!n))return _(t),b}if(h)if(N_(h)){const e=L_(await h(y,t),E);if(e&&(b[f]={...e,...w(c_,e.message)},!n))return _(e.message),b}else if(GE(h)){let e={};for(const r in h){if(!u_(e)&&!n)break;const i=L_(await h[r](y,t),E,r);i&&(e={...i,...w(r,i.message)},_(i.message),n&&(b[f]=e))}if(!u_(e)&&(b[f]={ref:E,...e},!n))return b}return _(!0),b};function U_(e,t){const n=Array.isArray(t)?t:g_(t)?[t]:v_(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=XE(e)?r++:e[t[r++]];return e}(e,n),i=n.length-1,o=n[i];return r&&delete r[o],0!==i&&(GE(r)&&u_(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!XE(e[t]))return!1;return!0}(r))&&U_(e,n.slice(0,-1)),e}var F_=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}},z_=e=>VE(e)||!HE(e);function B_(e,t){if(z_(e)||z_(t))return e===t;if(BE(e)&&BE(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const n=e[i];if(!r.includes(i))return!1;if("ref"!==i){const e=t[i];if(BE(n)&&BE(e)||GE(n)&&GE(e)||Array.isArray(n)&&Array.isArray(e)?!B_(n,e):n!==e)return!1}}return!0}var V_=e=>"select-multiple"===e.type,H_=e=>O_(e)||zE(e),G_=e=>w_(e)&&e.isConnected,W_=e=>{for(const t in e)if(N_(e[t]))return!0;return!1};function Y_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(e);if(GE(e)||n)for(const r in e)Array.isArray(e[r])||GE(e[r])&&!W_(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Y_(e[r],t[r])):VE(e[r])||(t[r]=!0);return t}function q_(e,t,n){const r=Array.isArray(e);if(GE(e)||r)for(const i in e)Array.isArray(e[i])||GE(e[i])&&!W_(e[i])?XE(t)||z_(n[i])?n[i]=Array.isArray(e[i])?Y_(e[i],[]):{...Y_(e[i])}:q_(e[i],VE(t)?{}:t[i],n[i]):n[i]=!B_(e[i],t[i]);return n}var K_=(e,t)=>q_(e,t,Y_(t)),Q_=(e,t)=>{let{valueAsNumber:n,valueAsDate:r,setValueAs:i}=t;return XE(e)?e:n?""===e?NaN:e?+e:e:r&&f_(e)?new Date(e):i?i(e):e};function J_(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return I_(t)?t.files:O_(t)?x_(e.refs).value:V_(t)?[...t.selectedOptions].map((e=>{let{value:t}=e;return t})):zE(t)?D_(e.refs).value:Q_(XE(t.value)?e.ref.value:t.value,e)}var X_=(e,t,n,r)=>{const i={};for(const o of e){const e=ZE(t,o);e&&y_(i,o,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},Z_=e=>XE(e)?e:A_(e)?e.source:GE(e)?A_(e.value)?e.value.source:e.value:e,$_=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function eb(e,t,n){const r=ZE(e,n);if(r||g_(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),o=ZE(t,r),s=ZE(e,r);if(o&&!Array.isArray(o)&&n!==r)return{name:n};if(s&&s.type)return{name:r,error:s};i.pop()}return{name:n}}var tb=(e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e),nb=(e,t)=>!JE(ZE(e,t)).length&&U_(e,t);const rb={mode:t_.onSubmit,reValidateMode:t_.onChange,shouldFocusError:!0};function ib(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={...rb,...t},r={submitCount:0,isDirty:!1,isLoading:N_(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},i={},o=(GE(n.defaultValues)||GE(n.values))&&QE(n.defaultValues||n.values)||{},s=n.shouldUnregister?{}:QE(o),a={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:F_(),array:F_(),state:F_()},p=__(n.mode),h=__(n.reValidateMode),f=n.criteriaMode===t_.all,m=async e=>{if(u.isValid||e){const e=n.resolver?u_((await _()).errors):await b(i,!0);e!==r.isValid&&d.state.next({isValid:e})}},g=(e,t)=>{(u.isValidating||u.validatingFields)&&((e||Array.from(c.mount)).forEach((e=>e&&y_(r.validatingFields,e,!!t))),r.isValidating=Object.values(r.validatingFields).some((e=>e)),d.state.next({validatingFields:r.validatingFields,isValidating:r.isValidating}))},v=(e,t,n,r)=>{const c=ZE(i,e);if(c){const i=ZE(s,e,XE(n)?ZE(o,e):n);XE(i)||r&&r.defaultChecked||t?y_(s,e,t?i:J_(c._f)):I(e,i),a.mount&&m()}},y=(e,t,n,s,a)=>{let c=!1,l=!1;const p={name:e},h=!(!ZE(i,e)||!ZE(i,e)._f.disabled);if(!n||s){u.isDirty&&(l=r.isDirty,r.isDirty=p.isDirty=S(),c=l!==p.isDirty);const n=h||B_(ZE(o,e),t);l=!(h||!ZE(r.dirtyFields,e)),n||h?U_(r.dirtyFields,e):y_(r.dirtyFields,e,!0),p.dirtyFields=r.dirtyFields,c=c||u.dirtyFields&&l!==!n}if(n){const t=ZE(r.touchedFields,e);t||(y_(r.touchedFields,e,n),p.touchedFields=r.touchedFields,c=c||u.touchedFields&&t!==n)}return c&&a&&d.state.next(p),c?p:{}},E=(n,i,o,s)=>{const a=ZE(r.errors,n),c=u.isValid&&$E(i)&&r.isValid!==i;if(t.delayError&&o?(e=(e=>t=>{clearTimeout(l),l=setTimeout(e,t)})((()=>((e,t)=>{y_(r.errors,e,t),d.state.next({errors:r.errors})})(n,o))),e(t.delayError)):(clearTimeout(l),e=null,o?y_(r.errors,n,o):U_(r.errors,n)),(o?!B_(a,o):a)||!u_(s)||c){const e={...s,...c&&$E(i)?{isValid:i}:{},errors:r.errors,name:n};r={...r,...e},d.state.next(e)}},_=async e=>{g(e,!0);const t=await n.resolver(s,n.context,X_(e||c.mount,i,n.criteriaMode,n.shouldUseNativeValidation));return g(e),t},b=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const o in e){const a=e[o];if(a){const{_f:e,...l}=a;if(e){const l=c.array.has(e.name);g([o],!0);const u=await j_(a,s,f,n.shouldUseNativeValidation&&!t,l);if(g([o]),u[e.name]&&(i.valid=!1,t))break;!t&&(ZE(u,e.name)?l?T_(r.errors,u,e.name):y_(r.errors,e.name,u[e.name]):U_(r.errors,e.name))}l&&await b(l,t,i)}}return i.valid},S=(e,t)=>(e&&t&&y_(s,e,t),!B_(R(),o)),T=(e,t,n)=>m_(e,c,{...a.mount?s:XE(t)?o:f_(e)?{[e]:t}:t},n,t),I=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=ZE(i,e);let o=t;if(r){const n=r._f;n&&(!n.disabled&&y_(s,e,Q_(t,n)),o=w_(n.ref)&&VE(t)?"":t,V_(n.ref)?[...n.ref.options].forEach((e=>e.selected=o.includes(e.value))):n.refs?zE(n.ref)?n.refs.length>1?n.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(o)?!!o.find((t=>t===e.value)):o===e.value))):n.refs[0]&&(n.refs[0].checked=!!o):n.refs.forEach((e=>e.checked=e.value===o)):I_(n.ref)?n.ref.value="":(n.ref.value=o,n.ref.type||d.values.next({name:e,values:{...s}})))}(n.shouldDirty||n.shouldTouch)&&y(e,o,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&A(e)},N=(e,t,n)=>{for(const r in t){const o=t[r],s="".concat(e,".").concat(r),a=ZE(i,s);!c.array.has(e)&&z_(o)&&(!a||a._f)||BE(o)?I(s,o,n):N(s,o,n)}},w=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=ZE(i,e),p=c.array.has(e),h=QE(t);y_(s,e,h),p?(d.array.next({name:e,values:{...s}}),(u.isDirty||u.dirtyFields)&&n.shouldDirty&&d.state.next({name:e,dirtyFields:K_(o,s),isDirty:S(e,h)})):!l||l._f||VE(h)?I(e,h,n):N(e,h,n),b_(e,c)&&d.state.next({...r}),d.values.next({name:a.mount?e:void 0,values:{...s}})},C=async t=>{const o=t.target;let a=o.name,l=!0;const v=ZE(i,a),S=e=>{l=Number.isNaN(e)||e===ZE(s,a,e)};if(v){let T,I;const N=o.type?J_(v._f):WE(t),w=t.type===e_.BLUR||t.type===e_.FOCUS_OUT,C=!$_(v._f)&&!n.resolver&&!ZE(r.errors,a)&&!v._f.deps||tb(w,ZE(r.touchedFields,a),r.isSubmitted,h,p),O=b_(a,c,w);y_(s,a,N),w?(v._f.onBlur&&v._f.onBlur(t),e&&e(0)):v._f.onChange&&v._f.onChange(t);const R=y(a,N,w,!1),M=!u_(R)||O;if(!w&&d.values.next({name:a,type:t.type,values:{...s}}),C)return u.isValid&&m(),M&&d.state.next({name:a,...O?{}:R});if(!w&&O&&d.state.next({...r}),n.resolver){const{errors:e}=await _([a]);if(S(N),l){const t=eb(r.errors,i,a),n=eb(e,i,t.name||a);T=n.error,a=n.name,I=u_(e)}}else g([a],!0),T=(await j_(v,s,f,n.shouldUseNativeValidation))[a],g([a]),S(N),l&&(T?I=!1:u.isValid&&(I=await b(i,!0)));l&&(v._f.deps&&A(v._f.deps),E(a,I,T,R))}},O=(e,t)=>{if(ZE(r.errors,t)&&e.focus)return e.focus(),1},A=async function(e){let t,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=p_(e);if(n.resolver){const n=await(async e=>{const{errors:t}=await _(e);if(e)for(const n of e){const e=ZE(t,n);e?y_(r.errors,n,e):U_(r.errors,n)}else r.errors=t;return t})(XE(e)?e:a);t=u_(n),o=e?!a.some((e=>ZE(n,e))):t}else e?(o=(await Promise.all(a.map((async e=>{const t=ZE(i,e);return await b(t&&t._f?{[e]:t}:t)})))).every(Boolean),(o||r.isValid)&&m()):o=t=await b(i);return d.state.next({...!f_(e)||u.isValid&&t!==r.isValid?{}:{name:e},...n.resolver||!e?{isValid:t}:{},errors:r.errors}),s.shouldFocus&&!o&&S_(i,O,e?a:c.mount),o},R=e=>{const t={...o,...a.mount?s:{}};return XE(e)?t:f_(e)?ZE(t,e):e.map((e=>ZE(t,e)))},M=(e,t)=>({invalid:!!ZE((t||r).errors,e),isDirty:!!ZE((t||r).dirtyFields,e),isTouched:!!ZE((t||r).touchedFields,e),isValidating:!!ZE((t||r).validatingFields,e),error:ZE((t||r).errors,e)}),D=(e,t,n)=>{const o=(ZE(i,e,{_f:{}})._f||{}).ref;y_(r.errors,e,{...t,ref:o}),d.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&o&&o.focus&&o.focus()},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const a of e?p_(e):c.mount)c.mount.delete(a),c.array.delete(a),t.keepValue||(U_(i,a),U_(s,a)),!t.keepError&&U_(r.errors,a),!t.keepDirty&&U_(r.dirtyFields,a),!t.keepTouched&&U_(r.touchedFields,a),!t.keepIsValidating&&U_(r.validatingFields,a),!n.shouldUnregister&&!t.keepDefaultValue&&U_(o,a);d.values.next({values:{...s}}),d.state.next({...r,...t.keepDirty?{isDirty:S()}:{}}),!t.keepIsValid&&m()},x=e=>{let{disabled:t,name:n,field:r,fields:i,value:o}=e;if($E(t)){const e=t?void 0:XE(o)?J_(r?r._f:ZE(i,n)._f):o;y_(s,n,e),y(n,e,!1,!1,!0)}},L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ZE(i,e);const s=$E(t.disabled);return y_(i,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),c.mount.add(e),r?x({field:r,disabled:t.disabled,name:e,value:t.value}):v(e,!0,t.value),{...s?{disabled:t.disabled}:{},...n.progressive?{required:!!t.required,min:Z_(t.min),max:Z_(t.max),minLength:Z_(t.minLength),maxLength:Z_(t.maxLength),pattern:Z_(t.pattern)}:{},name:e,onChange:C,onBlur:C,ref:s=>{if(s){L(e,t),r=ZE(i,e);const n=XE(s.value)&&s.querySelectorAll&&s.querySelectorAll("input,select,textarea")[0]||s,a=H_(n),c=r._f.refs||[];if(a?c.find((e=>e===n)):n===r._f.ref)return;y_(i,e,{_f:{...r._f,...a?{refs:[...c.filter(G_),n,...Array.isArray(ZE(o,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),v(e,!1,void 0,n)}else r=ZE(i,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!YE(c.array,e)||!a.action)&&c.unMount.add(e)}}},P=()=>n.shouldFocusError&&S_(i,O,c.mount),j=(e,t)=>async o=>{let a;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let c=QE(s);if(d.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await _();r.errors=e,c=t}else await b(i);if(U_(r.errors,"root"),u_(r.errors)){d.state.next({errors:{}});try{await e(c,o)}catch(l){a=l}}else t&&await t({...r.errors},o),P(),setTimeout(P);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:u_(r.errors)&&!a,submitCount:r.submitCount+1,errors:r.errors}),a)throw a},U=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=e?QE(e):o,p=QE(l),h=u_(e),f=h?o:p;if(n.keepDefaultValues||(o=l),!n.keepValues){if(n.keepDirtyValues)for(const e of c.mount)ZE(r.dirtyFields,e)?y_(f,e,ZE(s,e)):w(e,ZE(f,e));else{if(KE&&XE(e))for(const e of c.mount){const t=ZE(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(w_(e)){const t=e.closest("form");if(t){t.reset();break}}}}i={}}s=t.shouldUnregister?n.keepDefaultValues?QE(o):{}:QE(f),d.array.next({values:{...f}}),d.values.next({values:{...f}})}c={mount:n.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!u.isValid||!!n.keepIsValid||!!n.keepDirtyValues,a.watch=!!t.shouldUnregister,d.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:!h&&(n.keepDirty?r.isDirty:!(!n.keepDefaultValues||B_(e,o))),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:h?[]:n.keepDirtyValues?n.keepDefaultValues&&s?K_(o,s):r.dirtyFields:n.keepDefaultValues&&e?K_(o,e):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitSuccessful:!!n.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1})},F=(e,t)=>U(N_(e)?e(s):e,t);return{control:{register:L,unregister:k,getFieldState:M,handleSubmit:j,setError:D,_executeSchema:_,_getWatch:T,_getDirty:S,_updateValid:m,_removeUnmounted:()=>{for(const e of c.unMount){const t=ZE(i,e);t&&(t._f.refs?t._f.refs.every((e=>!G_(e))):!G_(t._f.ref))&&k(e)}c.unMount=new Set},_updateFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(c&&n){if(a.action=!0,p&&Array.isArray(ZE(i,e))){const t=n(ZE(i,e),c.argA,c.argB);l&&y_(i,e,t)}if(p&&Array.isArray(ZE(r.errors,e))){const t=n(ZE(r.errors,e),c.argA,c.argB);l&&y_(r.errors,e,t),nb(r.errors,e)}if(u.touchedFields&&p&&Array.isArray(ZE(r.touchedFields,e))){const t=n(ZE(r.touchedFields,e),c.argA,c.argB);l&&y_(r.touchedFields,e,t)}u.dirtyFields&&(r.dirtyFields=K_(o,s)),d.state.next({name:e,isDirty:S(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else y_(s,e,t)},_updateDisabledField:x,_getFieldArray:e=>JE(ZE(a.mount?s:o,e,t.shouldUnregister?ZE(o,e,[]):[])),_reset:U,_resetDefaultValues:()=>N_(n.defaultValues)&&n.defaultValues().then((e=>{F(e,n.resetOptions),d.state.next({isLoading:!1})})),_updateFormState:e=>{r={...r,...e}},_disableForm:e=>{$E(e)&&(d.state.next({disabled:e}),S_(i,((t,n)=>{let r=e;const o=ZE(i,n);o&&$E(o._f.disabled)&&(r||(r=o._f.disabled)),t.disabled=r}),0,!1))},_subjects:d,_proxyFormState:u,_setErrors:e=>{r.errors=e,d.state.next({errors:r.errors,isValid:!1})},get _fields(){return i},get _formValues(){return s},get _state(){return a},set _state(e){a=e},get _defaultValues(){return o},get _names(){return c},set _names(e){c=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n={...n,...e}}},trigger:A,register:L,handleSubmit:j,watch:(e,t)=>N_(e)?d.values.subscribe({next:n=>e(T(void 0,t),n)}):T(e,t,!0),setValue:w,getValues:R,reset:F,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ZE(i,e)&&(XE(t.defaultValue)?w(e,QE(ZE(o,e))):(w(e,t.defaultValue),y_(o,e,QE(t.defaultValue))),t.keepTouched||U_(r.touchedFields,e),t.keepDirty||(U_(r.dirtyFields,e),r.isDirty=t.defaultValue?S(e,QE(ZE(o,e))):S()),t.keepError||(U_(r.errors,e),u.isValid&&m()),d.state.next({...r}))},clearErrors:e=>{e&&p_(e).forEach((e=>U_(r.errors,e))),d.state.next({errors:e?r.errors:{}})},unregister:k,setError:D,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=ZE(i,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:M}}function ob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=r.useRef(),n=r.useRef(),[i,o]=r.useState({isDirty:!1,isValidating:!1,isLoading:N_(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:N_(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...ib(e),formState:i});const s=t.current.control;return s._options=e,h_({subject:s._subjects.state,next:e=>{d_(e,s._proxyFormState,s._updateFormState,!0)&&o({...s._formState})}}),r.useEffect((()=>s._disableForm(e.disabled)),[s,e.disabled]),r.useEffect((()=>{if(s._proxyFormState.isDirty){const e=s._getDirty();e!==i.isDirty&&s._subjects.state.next({isDirty:e})}}),[s,i.isDirty]),r.useEffect((()=>{e.values&&!B_(e.values,n.current)?(s._reset(e.values,s._options.resetOptions),n.current=e.values,o((e=>({...e})))):s._resetDefaultValues()}),[e.values,s]),r.useEffect((()=>{e.errors&&s._setErrors(e.errors)}),[e.errors,s]),r.useEffect((()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()})),r.useEffect((()=>{e.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})}),[e.shouldUnregister,s]),t.current.formState=l_(i,s),t.current}var sb=__webpack_require__(1899),ab=__webpack_require__.n(sb);const cb=()=>{const e=Z(),t=ee(),{AddRealEstate:n,AddJob:i,AddFashionProduct:o,getAttributeList:s,attributeList:a,productId:c,AddFreelancer:l,AddElectronics:u,AddCourse:d,AddGoodsProduct:p}=Qr(),{handleSubmit:h}=ob(),[f,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)({}),[y,E]=(0,r.useState)({}),[_,b]=(0,r.useState)(!1),[S,T]=(0,r.useState)({bid_start_price:"",bid_entry:"",bid_increament_value:"",bid_start_date:null,bid_end_date:null}),I=(e,t,n)=>{v((n=>({...n,[e]:t}))),E((e=>({...e,[n]:t})))};(0,r.useEffect)((()=>{null===e.state&&(Es.error("add Title first"),t(-1))}),[e.state,t]),(0,r.useEffect)((()=>{var t,n;const r={category_id:(null===e||void 0===e||null===(t=e.state)||void 0===t?void 0:t.category_id)||"",sub_category_id:(null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.sub_category_id)||""};(async()=>{await s(r)})()}),[]),(0,r.useEffect)((()=>{if((null===a||void 0===a?void 0:a.length)>0){const e=Array.isArray(a)&&(null===a||void 0===a?void 0:a.map((e=>null===e||void 0===e?void 0:e.category_name)));null!==e&&void 0!==e&&e.includes("Jobs")||null!==e&&void 0!==e&&e.includes("Freelancer")||null!==e&&void 0!==e&&e.includes("Lessons & Courses")?m(!0):m(!1)}}),[a]);const N=e=>{switch(e){case"Salary Expectation":case"Typing Speed":case"Salary to":case"Salary from":case"Salary":case"Land Area":case"Price Range":case"Number of Rooms":case"Number of Bathrooms":case"Year Built":case"Square Footage":case"Rent":case"Quizzes":case"Lessons":case"Videos":case"Hours":case"Course Duration":case"Duration":case"Pack of":case"Price":case"\tModel Number":case"Release Year":case"Number of Pieces":return"number";default:return"text"}},w=Array.isArray(a)&&a.map((e=>e.sub_category_name)),C=Array.isArray(a)&&a.map((e=>e.category_name));return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"SELECTED CATEGORY"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{children:(0,Me.jsxs)(Oe,{className:"active",to:"/add-post",children:["Add Product"," "]})}),(0,Me.jsx)("li",{className:"active",children:C[0]}),(0,Me.jsx)("li",{className:"active",children:w[0]})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"card",children:[(0,Me.jsx)("div",{className:"card card-header",children:(0,Me.jsx)("h5",{children:"INCLUDE SOME DETAILS"})}),(0,Me.jsx)("div",{className:"card card-body border-0",children:(0,Me.jsxs)("form",{onSubmit:h((async()=>{const t={title:e.state.title,description:e.state.description,product_id:c,category_id:e.state.category_id,sub_category_id:e.state.sub_category_id},r=new FormData;if(Object.keys(t).forEach((e=>{r.append(e,t[e])})),Object.entries(y).forEach(((e,t)=>{let[n,i]=e;r.append("attributeData[".concat(t,"][attribute_id]"),n),r.append("attributeData[".concat(t,"][value]"),i)})),!0===_){r.append("bid_now","true"),r.append("bid_start_price",S.bid_start_price||""),r.append("bid_entry",S.bid_entry||""),r.append("bid_increament_value",S.bid_increament_value||"");const e=S.bid_start_date?S.bid_start_date.toLocaleDateString("en-GB"):"";r.append("bid_start_date",e);const t=S.bid_end_date?S.bid_end_date.toLocaleDateString("en-GB"):"";r.append("bid_end_date",t)}switch(!1===f?(r.append("photo",g.photo||""),r.append("image_1",g.image_1||""),r.append("image_2",g.image_2||""),r.append("image_3",g.image_3||"")):r.append("image",g.image||""),a[0].category_name){case"Goods of all kinds":return p(r);case"Fashion & Beauty":return o(r);case"Lessons & Courses":return d(r);case"Jobs":return i(r);case"Freelancer":return l(r);case"Real Estate":return n(r);case"Electronics":return u(r);default:return null}})),encType:"multipart/form-data",children:[Array.isArray(a)&&a.map((e=>{var t;return(0,Me.jsxs)("div",{className:"radioBx mb20",children:[(0,Me.jsx)("h6",{children:e.attribute}),(0,Me.jsx)(Me.Fragment,{children:e.options.length>0?Array.isArray(e.options)&&(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.map(((t,n)=>(0,Me.jsxs)(r.Fragment,{children:[(0,Me.jsx)("input",{type:"radio",className:"btn-check",name:e.attribute,id:"radio_".concat(e.attribute,"_").concat(t._id),value:t.option,onChange:t=>I(e.attribute,t.target.value,e._id)},n),(0,Me.jsxs)("label",{className:"btn btn-outline-primary",htmlFor:"radio_".concat(e.attribute,"_").concat(t._id),children:[" ",t.option," "]})]},t._id)))):(0,Me.jsx)("div",{className:"row",children:(0,Me.jsx)("div",{className:"",children:(0,Me.jsx)("input",{type:N(e.attribute),name:e.attribute,className:"form-control",onChange:t=>I(e.attribute,t.target.value,e._id)})},e._id)})})]},e._id)})),!1===f?(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("h5",{className:"m0",children:"UPLOAD UP TO 4 PHOTOS"}),(0,Me.jsxs)("div",{className:"row",style:{maxWidth:"700px"},children:[(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"photo",id:"photo",style:{display:"none"},onChange:e=>(e=>{const t=e.target.files[0];v({...g,photo:t})})(e),required:!0}),(0,Me.jsx)("label",{htmlFor:"photo",children:g.photo?(0,Me.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.photo),alt:"photo"}):"Upload Img"})]})}),(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"img1",id:"img1",style:{display:"none"},onChange:e=>(e=>{const t=e.target.files[0];v({...g,image_1:t})})(e)}),(0,Me.jsx)("label",{htmlFor:"img1",children:g.image_1?(0,Me.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.image_1),alt:"Img_1"}):"Upload Img"})]})}),(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"img2",id:"img2",onChange:e=>(e=>{const t=e.target.files[0];v({...g,image_2:t})})(e),style:{display:"none"}}),(0,Me.jsx)("label",{htmlFor:"img2",children:g.image_2?(0,Me.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.image_2),alt:"image_2"}):"Upload Img"})]})}),(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"img3",id:"img3",style:{display:"none"},onChange:e=>(e=>{const t=e.target.files[0];v({...g,image_3:t})})(e)}),(0,Me.jsx)("label",{htmlFor:"img3",children:g.image_3?(0,Me.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.image_3),alt:"image_3"}):"Upload Img"})]})})]}),(0,Me.jsxs)("div",{className:"col-sm-3",children:[(0,Me.jsx)("label",{htmlFor:"bid",children:(0,Me.jsx)("h5",{style:{marginRight:"10px",marginTop:"3px"},children:"Enable Bid"})}),(0,Me.jsx)("input",{type:"checkbox",name:"bid",onChange:e=>{b(e.target.checked)}})]}),_&&(0,Me.jsx)(Me.Fragment,{children:(0,Me.jsxs)("div",{className:"row",children:[(0,Me.jsxs)("div",{className:"col-sm-2",children:[(0,Me.jsx)("label",{htmlFor:"bid_start_price",children:"Bit Start Price"}),(0,Me.jsx)("input",{type:"number",name:"bid_start_price",onChange:e=>T({...S,bid_start_price:e.target.value})})]}),(0,Me.jsxs)("div",{className:"col-sm-2",children:[(0,Me.jsx)("label",{htmlFor:"bid_entry",children:"Bid Base Price"}),(0,Me.jsx)("input",{type:"number",name:"bid_entry",onChange:e=>T({...S,bid_entry:e.target.value})})]}),(0,Me.jsxs)("div",{className:"col-sm-2",children:[(0,Me.jsx)("label",{htmlFor:"bid_increament_value",children:"Bid Increament Value"}),(0,Me.jsx)("input",{type:"number",name:"bid_increament_value",onChange:e=>T({...S,bid_increament_value:e.target.value})})]}),(0,Me.jsxs)("div",{className:"col-sm-2",children:[(0,Me.jsx)("label",{htmlFor:"bid_start_date",children:"Bid Start Date"}),(0,Me.jsx)(ab(),{selected:S.bid_start_date,onChange:e=>{T({...S,bid_start_date:e})},name:"bid_start_date"})]}),(0,Me.jsxs)("div",{className:"col-sm-2",children:[(0,Me.jsx)("label",{htmlFor:"bid_end_date",children:"Bid End Date"}),(0,Me.jsx)(ab(),{selected:S.bid_end_date,onChange:e=>{T({...S,bid_end_date:e})},name:"bid_end_date"})]})]})})]}):(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("h5",{className:"m0",children:"UPLOAD file"}),(0,Me.jsx)("div",{className:"row",style:{maxWidth:"700px"},children:(0,Me.jsx)("div",{className:"col-sm-3",children:(0,Me.jsxs)("div",{className:"fileBx mt-2",children:[(0,Me.jsx)("input",{type:"file",name:"uploadfile",id:"img",onChange:e=>(e=>{const t=e.target.files[0];v({...g,image:t})})(e),style:{display:"none"},required:!0}),(0,Me.jsx)("label",{htmlFor:"img",children:g.image?(0,Me.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.image),alt:"photo"}):"Upload Img"})]})})})]}),(0,Me.jsx)(Ir,{type:"submit",className:"text text-white mt-2",children:"Submit"})]})})]})}),(0,Me.jsx)(ei,{})]})})})]})};__webpack_require__(2823);const lb=()=>{const{AddTitleDes:e}=Qr(),t=Z(),n=ee(),{servicecategories:r,subservicecat:i}=(null===t||void 0===t?void 0:t.state)||{},{register:o,handleSubmit:s,formState:{errors:a}}=ob();return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"SELECTED CATEGORY"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Oe,{to:"/",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Add Product"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{className:"card",children:[(0,Me.jsx)("div",{className:"card card-header",children:(0,Me.jsx)("h5",{children:"INCLUDE SOME DETAILS"})}),(0,Me.jsx)("div",{className:"card card-body border-0",children:(0,Me.jsxs)("form",{className:"",onSubmit:s((async t=>{try{const o={title:t.title,description:t.description,category_id:r,sub_category_id:i},s=await e(o);200===s.status&&n("/add-product",{state:{id:s.data._id,...o}})}catch(o){console.error(o)}})),children:[(0,Me.jsxs)("div",{className:"mb20",style:{maxWidth:"500px"},children:[(0,Me.jsx)("h6",{children:"Title"}),(0,Me.jsx)("input",{type:"text",className:"form-control",...o("title",{required:"Title is required",minLength:{value:20,message:"A minimum length of 20 characters is required. Please edit the field"},maxLength:{value:50,message:"Title cannot exceed 50 characters"}})}),a.title&&(0,Me.jsx)("span",{className:"text text-danger",children:a.title.message})]}),(0,Me.jsxs)("div",{className:"mb20",style:{maxWidth:"500px"},children:[(0,Me.jsx)("h6",{children:"Description"}),(0,Me.jsx)("textarea",{type:"text",className:"form-control",...o("description",{required:"Description is required",minLength:{value:250,message:"A minimum length of 250 characters is required. Please edit the field"},maxLength:{value:5500,message:"Title cannot exceed 5500 characters"}})}),a.description&&(0,Me.jsx)("span",{className:"text text-danger",children:a.description.message})]}),(0,Me.jsx)(Ir,{className:"text text-white",type:"submit",children:"Next"})]})})]})}),(0,Me.jsx)(ei,{})]})})})]})},ub=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),1500),t(!1)})()}),[]),(0,Me.jsxs)("div",{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Disclaimer"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("a",{href:"index.php",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Disclaimer"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),!1===e?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h3",{children:"Disclaimer"}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),(0,Me.jsx)(ei,{})]})})})]})},db=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),1500),t(!1)})()}),[]),(0,Me.jsxs)("div",{children:[(0,Me.jsx)("section",{className:"pageBanner",children:(0,Me.jsx)("article",{className:"container",children:(0,Me.jsxs)("aside",{className:"row",children:[(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsx)("h4",{children:"Customer Support"})}),(0,Me.jsx)("div",{className:"col-md-6",children:(0,Me.jsxs)("ul",{className:"navList",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)("a",{href:"index.php",children:"Home"})}),(0,Me.jsx)("li",{className:"active",children:"Customer Support"})]})})]})})}),(0,Me.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Me.jsx)("article",{className:"container-fluid",children:(0,Me.jsxs)("article",{className:"row",children:[(0,Me.jsx)(ei,{}),!1===e?(0,Me.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Me.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Me.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Me.jsx)("div",{className:"col-md-10",children:(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h3",{children:"Customer Support"}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Me.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),(0,Me.jsx)(ei,{})]})})})]})};const pb=function(){const{mainscreenLoading:e}=Qr();return(0,Me.jsx)("div",{className:"App ",children:e?(0,Me.jsx)(Zm,{}):(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(Zr,{}),(0,Me.jsx)(ng,{}),(0,Me.jsx)(ls,{position:"top-center",autoClose:2e3,closeOnClick:!0,transition:cs}),(0,Me.jsxs)(Ee,{children:[(0,Me.jsx)(ve,{exact:!0,path:"/",element:(0,Me.jsx)(zo,{})}),(0,Me.jsx)(ve,{path:"/about-us",element:(0,Me.jsx)(ti,{})}),(0,Me.jsx)(ve,{path:"/contact-us",element:(0,Me.jsx)(Ym,{})}),(0,Me.jsx)(ve,{path:"/privacy-policy",element:(0,Me.jsx)(qm,{})}),(0,Me.jsx)(ve,{path:"/terms-and-conditions",element:(0,Me.jsx)(Km,{})}),(0,Me.jsx)(ve,{path:"/goods_of_all_kinds",element:(0,Me.jsx)(Sl,{})}),(0,Me.jsx)(ve,{path:"/electronics",element:(0,Me.jsx)(Jm,{})}),(0,Me.jsx)(ve,{path:"/Electronics-detail/:id",element:(0,Me.jsx)(Xm,{})}),(0,Me.jsx)(ve,{path:"/Login",element:(0,Me.jsx)(Mf,{})}),(0,Me.jsx)(ve,{path:"/Login-with-email",element:(0,Me.jsx)(Df,{})}),(0,Me.jsx)(ve,{path:"/product-detail/:id",element:(0,Me.jsx)(Uf,{})}),(0,Me.jsx)(ve,{path:"/real_estate",element:(0,Me.jsx)(Vf,{})}),(0,Me.jsx)(ve,{path:"/realstate-detail/:id",element:(0,Me.jsx)(Wf,{})}),(0,Me.jsx)(ve,{path:"/singup",element:(0,Me.jsx)(Yf,{})}),(0,Me.jsx)(ve,{path:"/jobs",element:(0,Me.jsx)(Im,{})}),(0,Me.jsx)(ve,{path:"/job-detail/:id",element:(0,Me.jsx)(Nm,{})}),(0,Me.jsx)(ve,{path:"/fashion_beauty",element:(0,Me.jsx)(Om,{})}),(0,Me.jsx)(ve,{path:"/Fashion-Beauty-Details/:id",element:(0,Me.jsx)(eg,{})}),(0,Me.jsx)(ve,{path:"/freelancer",element:(0,Me.jsx)(Mm,{})}),(0,Me.jsx)(ve,{path:"/freelancer-detail/:id",element:(0,Me.jsx)(Dm,{})}),(0,Me.jsx)(ve,{path:"/lesson_courses",element:(0,Me.jsx)(Lm,{})}),(0,Me.jsx)(ve,{path:"/lessons-courses-detail/:id",element:(0,Me.jsx)(jm,{})}),(0,Me.jsx)(ve,{path:"/faq",element:(0,Me.jsx)(tg,{})}),(0,Me.jsx)(ve,{path:"/videocall",element:(0,Me.jsx)(kE,{})}),(0,Me.jsx)(ve,{path:"/voice-call",element:(0,Me.jsx)(PE,{})}),(0,Me.jsx)(ve,{path:"/disclaimer",element:(0,Me.jsx)(ub,{})}),(0,Me.jsx)(ve,{path:"/customer_support",element:(0,Me.jsx)(db,{})}),(0,Me.jsx)(ve,{path:"*",element:(0,Me.jsx)("div",{children:"page not found"})}),(0,Me.jsx)(ve,{path:"/message",element:(0,Me.jsx)(Ff,{}),children:(0,Me.jsx)(ve,{index:!0,element:(0,Me.jsx)(FE,{})})}),(0,Me.jsx)(ve,{path:"/account",element:(0,Me.jsx)(Ff,{}),children:(0,Me.jsx)(ve,{index:!0,element:(0,Me.jsx)(Lf,{})})}),(0,Me.jsx)(ve,{path:"/my-post",element:(0,Me.jsx)(Ff,{}),children:(0,Me.jsx)(ve,{index:!0,element:(0,Me.jsx)(Um,{})})}),(0,Me.jsx)(ve,{path:"/updateProduct/:id",element:(0,Me.jsx)(Ff,{}),children:(0,Me.jsx)(ve,{index:!0,element:(0,Me.jsx)(Fm,{})})}),(0,Me.jsx)(ve,{path:"/add-post",element:(0,Me.jsx)(Ff,{}),children:(0,Me.jsx)(ve,{index:!0,element:(0,Me.jsx)(Bm,{})})}),(0,Me.jsx)(ve,{path:"/add-title",element:(0,Me.jsx)(Ff,{}),children:(0,Me.jsx)(ve,{index:!0,element:(0,Me.jsx)(lb,{})})}),(0,Me.jsx)(ve,{path:"/add-product",element:(0,Me.jsx)(Ff,{}),children:(0,Me.jsx)(ve,{index:!0,element:(0,Me.jsx)(cb,{})})}),(0,Me.jsx)(ve,{path:"/wishlist",element:(0,Me.jsx)(Ff,{}),children:(0,Me.jsx)(ve,{index:!0,element:(0,Me.jsx)(Gm,{})})}),(0,Me.jsx)(ve,{path:"/packages",element:(0,Me.jsx)(Ff,{}),children:(0,Me.jsx)(ve,{index:!0,element:(0,Me.jsx)(Wm,{})})}),(0,Me.jsx)(ve,{path:"/change-password",element:(0,Me.jsx)(Ff,{}),children:(0,Me.jsx)(ve,{index:!0,element:(0,Me.jsx)(zm,{})})}),(0,Me.jsx)(ve,{path:"/user-update",element:(0,Me.jsx)(Ff,{}),children:(0,Me.jsx)(ve,{index:!0,element:(0,Me.jsx)(bm,{})})})]}),(0,Me.jsx)(De,{})]})})};function hb(e,t){return function(){return e.apply(t,arguments)}}const{toString:fb}=Object.prototype,{getPrototypeOf:mb}=Object,gb=(vb=Object.create(null),e=>{const t=fb.call(e);return vb[t]||(vb[t]=t.slice(8,-1).toLowerCase())});var vb;const yb=e=>(e=e.toLowerCase(),t=>gb(t)===e),Eb=e=>t=>typeof t===e,{isArray:_b}=Array,bb=Eb("undefined");const Sb=yb("ArrayBuffer");const Tb=Eb("string"),Ib=Eb("function"),Nb=Eb("number"),wb=e=>null!==e&&"object"===typeof e,Cb=e=>{if("object"!==gb(e))return!1;const t=mb(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ob=yb("Date"),Ab=yb("File"),Rb=yb("Blob"),Mb=yb("FileList"),Db=yb("URLSearchParams");function kb(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),_b(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function xb(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const Lb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Pb=e=>!bb(e)&&e!==Lb;const jb=(Ub="undefined"!==typeof Uint8Array&&mb(Uint8Array),e=>Ub&&e instanceof Ub);var Ub;const Fb=yb("HTMLFormElement"),zb=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Bb=yb("RegExp"),Vb=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};kb(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},Hb="abcdefghijklmnopqrstuvwxyz",Gb="0123456789",Wb={DIGIT:Gb,ALPHA:Hb,ALPHA_DIGIT:Hb+Hb.toUpperCase()+Gb};const Yb=yb("AsyncFunction"),qb={isArray:_b,isArrayBuffer:Sb,isBuffer:function(e){return null!==e&&!bb(e)&&null!==e.constructor&&!bb(e.constructor)&&Ib(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Ib(e.append)&&("formdata"===(t=gb(e))||"object"===t&&Ib(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Sb(e.buffer),t},isString:Tb,isNumber:Nb,isBoolean:e=>!0===e||!1===e,isObject:wb,isPlainObject:Cb,isUndefined:bb,isDate:Ob,isFile:Ab,isBlob:Rb,isRegExp:Bb,isFunction:Ib,isStream:e=>wb(e)&&Ib(e.pipe),isURLSearchParams:Db,isTypedArray:jb,isFileList:Mb,forEach:kb,merge:function e(){const{caseless:t}=Pb(this)&&this||{},n={},r=(r,i)=>{const o=t&&xb(n,i)||i;Cb(n[o])&&Cb(r)?n[o]=e(n[o],r):Cb(r)?n[o]=e({},r):_b(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&kb(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return kb(t,((t,r)=>{n&&Ib(t)?e[r]=hb(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&mb(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:gb,kindOfTest:yb,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(_b(e))return e;let t=e.length;if(!Nb(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Fb,hasOwnProperty:zb,hasOwnProp:zb,reduceDescriptors:Vb,freezeMethods:e=>{Vb(e,((t,n)=>{if(Ib(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Ib(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return _b(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:xb,global:Lb,isContextDefined:Pb,ALPHABET:Wb,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wb.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Ib(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(wb(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=_b(e)?[]:{};return kb(e,((e,t)=>{const o=n(e,r+1);!bb(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:Yb,isThenable:e=>e&&(wb(e)||Ib(e))&&Ib(e.then)&&Ib(e.catch)};function Kb(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}qb.inherits(Kb,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:qb.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Qb=Kb.prototype,Jb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Jb[e]={value:e}})),Object.defineProperties(Kb,Jb),Object.defineProperty(Qb,"isAxiosError",{value:!0}),Kb.from=(e,t,n,r,i,o)=>{const s=Object.create(Qb);return qb.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Kb.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const Xb=Kb;function Zb(e){return qb.isPlainObject(e)||qb.isArray(e)}function $b(e){return qb.endsWith(e,"[]")?e.slice(0,-2):e}function eS(e,t,n){return e?e.concat(t).map((function(e,t){return e=$b(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const tS=qb.toFlatObject(qb,{},null,(function(e){return/^is[A-Z]/.test(e)}));const nS=function(e,t,n){if(!qb.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=qb.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!qb.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&qb.isSpecCompliantForm(t);if(!qb.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(qb.isDate(e))return e.toISOString();if(!a&&qb.isBlob(e))throw new Xb("Blob is not supported. Use a Buffer instead.");return qb.isArrayBuffer(e)||qb.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(qb.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(qb.isArray(e)&&function(e){return qb.isArray(e)&&!e.some(Zb)}(e)||(qb.isFileList(e)||qb.endsWith(n,"[]"))&&(a=qb.toArray(e)))return n=$b(n),a.forEach((function(e,r){!qb.isUndefined(e)&&null!==e&&t.append(!0===s?eS([n],r,o):null===s?n:n+"[]",c(e))})),!1;return!!Zb(e)||(t.append(eS(i,n,o),c(e)),!1)}const u=[],d=Object.assign(tS,{defaultVisitor:l,convertValue:c,isVisitable:Zb});if(!qb.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!qb.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),qb.forEach(n,(function(n,o){!0===(!(qb.isUndefined(n)||null===n)&&i.call(t,n,qb.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),u.pop()}}(e),t};function rS(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function iS(e,t){this._pairs=[],e&&nS(e,this,t)}const oS=iS.prototype;oS.append=function(e,t){this._pairs.push([e,t])},oS.toString=function(e){const t=e?function(t){return e.call(this,t,rS)}:rS;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const sS=iS;function aS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cS(e,t,n){if(!t)return e;const r=n&&n.encode||aS,i=n&&n.serialize;let o;if(o=i?i(t,n):qb.isURLSearchParams(t)?t.toString():new sS(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const lS=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){qb.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},uS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dS={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:sS,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},pS="undefined"!==typeof window&&"undefined"!==typeof document,hS=(fS="undefined"!==typeof navigator&&navigator.product,pS&&["ReactNative","NativeScript","NS"].indexOf(fS)<0);var fS;const mS="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,gS={...t,...dS};const vS=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&qb.isArray(r)?r.length:o,a)return qb.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&qb.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&qb.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s}if(qb.isFormData(e)&&qb.isFunction(e.entries)){const n={};return qb.forEachEntry(e,((e,r)=>{t(function(e){return qb.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const yS={transitional:uS,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=qb.isObject(t);o&&qb.isHTMLForm(t)&&(t=new FormData(t));if(qb.isFormData(t))return i?JSON.stringify(vS(t)):t;if(qb.isArrayBuffer(t)||qb.isBuffer(t)||qb.isStream(t)||qb.isFile(t)||qb.isBlob(t))return t;if(qb.isArrayBufferView(t))return t.buffer;if(qb.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return nS(e,new gS.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return gS.isNode&&qb.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(t,this.formSerializer).toString();if((s=qb.isFileList(t))||r.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return nS(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),function(t,n,r){if(qb.isString(t))try{return(n||JSON.parse)(t),qb.trim(t)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const n=this.transitional||yS.transitional,r=n&&n.forcedJSONParsing,i="json"===this.responseType;if(t&&qb.isString(t)&&(r&&!this.responseType||i)){const r=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(e){if(r){if("SyntaxError"===e.name)throw Xb.from(e,Xb.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gS.classes.FormData,Blob:gS.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};qb.forEach(["delete","get","head","post","put","patch"],(e=>{yS.headers[e]={}}));const ES=yS,_S=qb.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bS=Symbol("internals");function SS(e){return e&&String(e).trim().toLowerCase()}function TS(e){return!1===e||null==e?e:qb.isArray(e)?e.map(TS):String(e)}function IS(e,t,n,r,i){return qb.isFunction(r)?r.call(this,t,n):(i&&(t=n),qb.isString(t)?qb.isString(r)?-1!==t.indexOf(r):qb.isRegExp(r)?r.test(t):void 0:void 0)}class NS{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=SS(t);if(!i)throw new Error("header name must be a non-empty string");const o=qb.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=TS(e))}const o=(e,t)=>qb.forEach(e,((e,n)=>i(e,n,t)));return qb.isPlainObject(e)||e instanceof this.constructor?o(e,t):qb.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&_S[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=SS(e)){const n=qb.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(qb.isFunction(t))return t.call(this,e,n);if(qb.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=SS(e)){const n=qb.findKey(this,e);return!(!n||void 0===this[n]||t&&!IS(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=SS(e)){const i=qb.findKey(n,e);!i||t&&!IS(0,n[i],i,t)||(delete n[i],r=!0)}}return qb.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!IS(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return qb.forEach(this,((r,i)=>{const o=qb.findKey(n,i);if(o)return t[o]=TS(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=TS(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return qb.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&qb.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[bS]=this[bS]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=SS(e);t[r]||(!function(e,t){const n=qb.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return qb.isArray(e)?e.forEach(r):r(e),this}}NS.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),qb.reduceDescriptors(NS.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),qb.freezeMethods(NS);const wS=NS;function CS(e,t){const n=this||ES,r=t||n,i=wS.from(r.headers);let o=r.data;return qb.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function OS(e){return!(!e||!e.__CANCEL__)}function AS(e,t,n){Xb.call(this,null==e?"canceled":e,Xb.ERR_CANCELED,t,n),this.name="CanceledError"}qb.inherits(AS,Xb,{__CANCEL__:!0});const RS=AS;const MS=gS.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];qb.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),qb.isString(r)&&s.push("path="+r),qb.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function DS(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const kS=gS.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=qb.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const xS=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[s];i||(i=c),n[o]=a,r[o]=c;let u=s,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-i<t)return;const p=l&&c-l;return p?Math.round(1e3*d/p):void 0}};function LS(e,t){let n=0;const r=xS(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,c=r(a);n=o;const l={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}const PS="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=wS.from(e.headers).normalize();let o,s,{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if(qb.isFormData(r))if(gS.hasStandardBrowserEnv||gS.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(s=i.getContentType())){const[e,...t]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const d=DS(e.baseURL,e.url);function p(){if(!u)return;const r=wS.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Xb("Request failed with status code "+n.status,[Xb.ERR_BAD_REQUEST,Xb.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),cS(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=p:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(p)},u.onabort=function(){u&&(n(new Xb("Request aborted",Xb.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new Xb("Network Error",Xb.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||uS;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Xb(t,r.clarifyTimeoutError?Xb.ETIMEDOUT:Xb.ECONNABORTED,e,u)),u=null},gS.hasStandardBrowserEnv&&(c&&qb.isFunction(c)&&(c=c(e)),c||!1!==c&&kS(d))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&MS.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in u&&qb.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),qb.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",LS(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",LS(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{u&&(n(!t||t.type?new RS(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(d);h&&-1===gS.protocols.indexOf(h)?n(new Xb("Unsupported protocol "+h+":",Xb.ERR_BAD_REQUEST,e)):u.send(r||null)}))},jS={http:null,xhr:PS};qb.forEach(jS,((t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch(e){}Object.defineProperty(t,"adapterName",{value:n})}}));const US=e=>"- ".concat(e),FS=e=>qb.isFunction(e)||null===e||!1===e,zS=e=>{e=qb.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!FS(n)&&(r=jS[(t=String(n)).toLowerCase()],void 0===r))throw new Xb("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(US).join("\n"):" "+US(e[0]):"as no adapter specified";throw new Xb("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function BS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new RS(null,e)}function VS(e){BS(e),e.headers=wS.from(e.headers),e.data=CS.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return zS(e.adapter||ES.adapter)(e).then((function(t){return BS(e),t.data=CS.call(e,e.transformResponse,t),t.headers=wS.from(t.headers),t}),(function(t){return OS(t)||(BS(e),t&&t.response&&(t.response.data=CS.call(e,e.transformResponse,t.response),t.response.headers=wS.from(t.response.headers))),Promise.reject(t)}))}const HS=e=>e instanceof wS?{...e}:e;function GS(e,t){t=t||{};const n={};function r(e,t,n){return qb.isPlainObject(e)&&qb.isPlainObject(t)?qb.merge.call({caseless:n},e,t):qb.isPlainObject(t)?qb.merge({},t):qb.isArray(t)?t.slice():t}function i(e,t,n){return qb.isUndefined(t)?qb.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!qb.isUndefined(t))return r(void 0,t)}function s(e,t){return qb.isUndefined(t)?qb.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(HS(e),HS(t),!0)};return qb.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=c[r]||i,s=o(e[r],t[r],r);qb.isUndefined(s)&&o!==a||(n[r]=s)})),n}const WS="1.6.8",YS={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{YS[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const qS={};YS.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.8] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new Xb(r(i," has been removed"+(t?" in "+t:"")),Xb.ERR_DEPRECATED);return t&&!qS[i]&&(qS[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};const KS={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Xb("options must be an object",Xb.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new Xb("option "+o+" must be "+n,Xb.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Xb("Unknown option "+o,Xb.ERR_BAD_OPTION)}},validators:YS},QS=KS.validators;class JS{constructor(e){this.defaults=e,this.interceptors={request:new lS,response:new lS}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=GS(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&KS.assertOptions(n,{silentJSONParsing:QS.transitional(QS.boolean),forcedJSONParsing:QS.transitional(QS.boolean),clarifyTimeoutError:QS.transitional(QS.boolean)},!1),null!=r&&(qb.isFunction(r)?t.paramsSerializer={serialize:r}:KS.assertOptions(r,{encode:QS.function,serialize:QS.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&qb.merge(i.common,i[t.method]);i&&qb.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=wS.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[VS.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=s.length;let p=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{p=e(p)}catch(h){t.call(this,h);break}}try{l=VS.call(this,p)}catch(h){return Promise.reject(h)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return cS(DS((e=GS(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}qb.forEach(["delete","get","head","options"],(function(e){JS.prototype[e]=function(t,n){return this.request(GS(n||{},{method:e,url:t,data:(n||{}).data}))}})),qb.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(GS(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}JS.prototype[e]=t(),JS.prototype[e+"Form"]=t(!0)}));const XS=JS;class ZS{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new RS(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new ZS((function(t){e=t})),cancel:e}}}const $S=ZS;const eT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(eT).forEach((e=>{let[t,n]=e;eT[n]=t}));const tT=eT;const nT=function e(t){const n=new XS(t),r=hb(XS.prototype.request,n);return qb.extend(r,XS.prototype,n,{allOwnKeys:!0}),qb.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(GS(t,n))},r}(ES);nT.Axios=XS,nT.CanceledError=RS,nT.CancelToken=$S,nT.isCancel=OS,nT.VERSION=WS,nT.toFormData=nS,nT.AxiosError=Xb,nT.Cancel=nT.CanceledError,nT.all=function(e){return Promise.all(e)},nT.spread=function(e){return function(t){return e.apply(null,t)}},nT.isAxiosError=function(e){return qb.isObject(e)&&!0===e.isAxiosError},nT.mergeConfig=GS,nT.AxiosHeaders=wS,nT.formToJSON=e=>vS(qb.isHTMLForm(e)?new FormData(e):e),nT.getAdapter=zS,nT.HttpStatusCode=tT,nT.default=nT;const rT=nT,iT="http://13.201.212.185:4200",oT=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)({}),[a,c]=(0,r.useState)([]),[l,u]=(0,r.useState)([]),[d,p]=(0,r.useState)([]),[h,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)([]),[v,y]=(0,r.useState)([]),[E,_]=(0,r.useState)({isLoad:!1,data:{}}),[b,S]=(0,r.useState)({data:{},isLoad:!1}),[T,I]=(0,r.useState)([]),[N,w]=(0,r.useState)(""),[C,O]=(0,r.useState)(!1),[A,R]=(0,r.useState)(!1),[M,D]=(0,r.useState)({data:{},isLoad:!1}),[k,x]=(0,r.useState)({data:{},isLoad:!1}),[L,P]=(0,r.useState)([]),[j,U]=(0,r.useState)({data:{},isLoad:!1}),[F,z]=(0,r.useState)([]),[B,V]=(0,r.useState)({data:{},isLoad:!1}),[H,G]=(0,r.useState)([]),[W,Y]=(0,r.useState)([]),[q,K]=(0,r.useState)({data:[],isLoad:!1}),[Q,J]=(0,r.useState)([]),[X,$]=(0,r.useState)([]),[te,ne]=(0,r.useState)([]),[re,ie]=(0,r.useState)(!1),[oe,se]=(0,r.useState)([]),[ae,ce]=(0,r.useState)([]),[le,ue]=(0,r.useState)([]),[de,pe]=(0,r.useState)([]),[he,fe]=(0,r.useState)({}),[me,ge]=(0,r.useState)({goods:0,job:0,freelancer:0,RealEstate:0,Lessons:0,Fashion:0,Electronics:0,post:0}),[ve,ye]=(0,r.useState)({goods:!1,job:!1,freelancer:!1,RealEstate:!1,Lessons:!1,Fashion:!1,Electronics:!1,WishList:!1,Post:!1}),Ee=ee(),_e=Z(),be=localStorage.getItem("token"),Se=async()=>{const e=localStorage.getItem("token");if(O(!0),N||e)try{const t=await fetch("".concat(iT,"/api/profile/details"),{method:"GET",headers:{"Content-Type":"application/json",token:N||e}}),n=await t.json();t.ok?(s(n.data),i(!0)):i(!1)}catch(t){i(!1)}else i(!1);O(!1)},Te=async(e,t)=>{const n=new URLSearchParams(_e.search).get("redirect");w(e),localStorage.setItem("token",e),await Se(),Es.success(t),Ee(n?"/".concat(n):"/account")},Ie=async()=>{await Se()},Ne=async(e,t)=>{try{ye({...ve,goods:!0});const{keyword_search:n,page:r,limit:i}=e,o=await fetch("".concat(iT,"/api/product/goods/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:n||"",page:r,limit:i,sub_category_id:t})}),s=await o.json();o.ok&&(ie(!0),g(s.data),ge({...me,goods:s.total}))}catch(n){console.log(n)}finally{ie(!1),ye({...ve,goods:!1})}},we=async e=>{try{ye({...ve,Electronics:!0});const{keyword_search:t,page:n,limit:r}=e,i=await fetch("".concat(iT,"/api/product/electronics/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:t||"",page:n,limit:r})}),o=await i.json();i.ok&&(I(o.data),ge({...me,Electronics:o.total}))}catch(t){console.log(t)}finally{ye({...ve,Electronics:!1})}},Ce=async(e,t)=>{try{ye({...ve,freelancer:!0});const{keyword_search:n,page:r,limit:i}=e,o=await fetch("".concat(iT,"/api/product/freelancer/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:n||"",page:r,limit:i,sub_category_id:t||""})}),s=await o.json();o.ok&&(P(s.data),ge({...me,freelancer:s.total}))}catch(n){console.log(n)}finally{ye({...ve,freelancer:!1})}},Oe=async(e,t)=>{try{ye({...ve,Fashion:!0});const{keyword_search:n,page:r,limit:i}=e,o=await fetch("".concat(iT,"/api/product/fashion/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:n||"",page:r,limit:i,sub_category_id:t})}),s=await o.json();o.ok&&(z(s.data),ge({...me,Fashion:s.total}))}catch(n){console.log(n)}finally{ye({...ve,Fashion:!1})}},Ae=async(e,t)=>{try{ye({...ve,RealEstate:!0});const{keyword_search:n,page:r,limit:i}=e,o=await fetch("".concat(iT,"/api/property/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:n||"",page:r,limit:i,sub_category_id:t})}),s=await o.json();o.ok&&(Y(s.data),ge({...me,RealEstate:s.total}))}catch(n){console.log(n)}finally{ye({...ve,RealEstate:!1})}},Re=async(e,t)=>{try{ye({...ve,Lessons:!0});const{keyword_search:n,page:r,limit:i}=e,o=await fetch("".concat(iT,"/api/product/lesson-courses/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:n||"",page:r,limit:i,sub_category_id:t})}),s=await o.json();o.ok&&(G(s.data),ge({...me,Lessons:s.total}))}catch(n){console.log(n)}finally{ye({...ve,Lessons:!1})}},De=async(e,t,n)=>{try{ye({...ve,job:!0});const{keyword_search:r,page:i,limit:o}=e,s=await fetch("".concat(iT,"/api/product/job/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:r||"",page:i,limit:o,sub_category_id:t||"",filter:Array.isArray(n)&&n.length>0?n:null})}),a=await s.json();s.ok&&(J(a.data),ge({...me,job:a.total}))}catch(r){console.log(r)}finally{ye({...ve,job:!1})}},ke=async e=>{try{ye({...ve,Post:!0});const{keyword_search:t,page:n,limit:r}=e,i=await fetch("".concat(iT,"/api/user/product/list"),{method:"Post",headers:{"Content-Type":"application/json",token:be},body:JSON.stringify({keyword_search:t||"",page:n,limit:r})}),o=await i.json();i.ok&&(pe(o.data),ge({...me,post:o.total}))}catch(t){console.log(t)}finally{ye({...ve,Post:!1})}},xe=async()=>{try{ye({...ve,WishList:!0});const e=await fetch("".concat(iT,"/api/user/product/wishlist"),{method:"GET",headers:{"Content-Type":"application/json",token:be}}),t=await e.json();e.ok&&$(t.data.wishlist)}catch(e){Es.error("Server Down")}finally{ye({...ve,WishList:!1})}};(0,r.useEffect)((()=>{(async()=>{R(!0);try{await Ie(),await(async()=>{O(!0);try{const e=await fetch("".concat(iT,"/api/service/list"),{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();e.ok&&u(t.data)}catch(e){console.log(e)}O(!1)})()}catch(e){}finally{R(!1)}})()}),[]),(0,r.useEffect)((()=>{"/"===_e.pathname&&(we({}),Ne({}),Ce({}),Oe({}),Ae({}),Re({}),De({}),(async()=>{try{const e=await fetch("".concat(iT,"/api/cms/getAll"),{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();e.ok&&c(t.data)}catch(e){Es.error("Server Down")}})()),"/wishlist"===_e.pathname&&xe()}),[_e.pathname]);const Le={RegisterUser:async(e,t,n)=>{try{const r=new FormData;r.append("name",e),r.append("email",t),r.append("password",n);const o=await rT.post("".concat(iT,"/api/register"),r,{headers:{"Content-Type":"multipart/form-data"}}),s=o.data;200===o.status?(Te(s.token,s.message),i(!0)):(i(!1),Es.error(s.message))}catch(r){i(!1)}},LoginUser:async(e,t)=>{try{O(!0);const n=await fetch("".concat(iT,"/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await n.json();n.ok?(Te(r.token,r.message),i(!0)):(i(!1),Es.error(r.message))}catch(n){i(!1),Es.error("Server Down")}finally{O(!1)}},isLogIn:n,LogOut:async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat(iT,"/api/logout"),{method:"GET",headers:{"Content-Type":"application/json",token:e}}),n=await t.json();t.ok&&(localStorage.removeItem("token"),s({}),i(!1),function(e){Wl(e).signOut()}(lf),Es.success(n.message))}catch(e){Es.error("Server Down")}},userData:o,cmsData:a,checkTokenValidity:Se,loading:C,SocialLoginUser:async(e,t,n,r,o)=>{try{O(!0);const s=await fetch("".concat(iT,"/api/social-login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,social_id:t,register_type:n,image:o,name:r})}),a=await s.json();s.ok?(Te(a.token,a.message),i(!0)):(i(!1),Es.error(a.message))}catch(s){Es.error("Server Down")}finally{O(!1)}},serviceList:l,goodsList:m,electronicsList:T,getGoodsProductDetails:async e=>{try{_({data:{},isLoad:!0});const t=await fetch("".concat(iT,"/api/product/goods/details/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?_({data:n.data,isLoad:!1}):_({data:{},isLoad:!1})}catch(t){_({data:{},isLoad:!1}),console.log(t)}},goodsItems:E,getElectronicsProductDetails:async e=>{try{S({data:{},isLoad:!0});const t=await fetch("".concat(iT,"/api/product/electronics/details/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?S({data:n.data,isLoad:!1}):S({data:{},isLoad:!1})}catch(t){S({data:{},isLoad:!1}),console.log(t)}},electronicsItems:b,getUserplan:async()=>{try{const e=await fetch("".concat(iT,"/api/user/membership/plan/list"),{method:"POST",headers:{"Content-Type":"application/json",token:be}}),t=await e.json();e.ok&&y(t.data)}catch(e){Es.error("Server Down")}},packagesList:v,ChnagePassword:async(e,t)=>{try{const n=await fetch("".concat(iT,"/api/change-password"),{method:"POST",headers:{"Content-Type":"application/json",token:be},body:JSON.stringify({currentPassword:e,newPassword:t})}),r=await n.json();console.log("data",r),n.ok?(Es.success(r.message),Ee("/account")):Es.error(r.message)}catch(n){Es.error("Server Down")}},mainscreenLoading:A,updateProfile:async(e,t,n,r,i,o)=>{const s=new FormData;s.append("name",e),s.append("email",t),s.append("image",n),s.append("mobile",r),s.append("bio",i),s.append("address",o);try{const e=await rT.post("".concat(iT,"/api/profile/update"),s,{headers:{"Content-Type":"multipart/form-data",token:be}});Es(e.data.message),Ie()}catch(a){console.error("Error updating profile:",a)}},setMainscreenLoading:R,getFreelancer:Ce,freelancerList:L,freelancerDetail:j,getFreelancerDetails:async e=>{try{U({data:{},isLoad:!0});const t=await fetch("".concat(iT,"/api/product/freelancer/details/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?U({data:n.data,isLoad:!1}):U({data:{},isLoad:!1})}catch(t){U({data:{},isLoad:!1}),console.log(t)}},fashion:F,wishListAdd:async e=>{try{if(!n)return Es.info("Login first"),void Ee("/login");{const t=await fetch("".concat(iT,"/api/user/product/wishlist/add"),{method:"POST",headers:{"Content-Type":"application/json",token:be},body:JSON.stringify({product_id:e})}),n=await t.json();t.ok?(Es.success(n.message),xe()):Es.error(t.message)}}catch(t){console.log(t)}},wishListRemove:async e=>{try{const t=await fetch("".concat(iT,"/api/user/product/wishlist/remove"),{method:"POST",headers:{"Content-Type":"application/json",token:be},body:JSON.stringify({product_id:e})}),n=await t.json();t.ok?(Es.success(n.message),xe()):Es.error(t.message)}catch(t){console.log(t)}},wishList:X,faq:te,getFaq:async()=>{try{const e=await fetch("".concat(iT,"/api/all-faq"),{method:"POST",headers:{"Content-Type":"application/json",token:be}}),t=await e.json();e.ok&&ne(t.data)}catch(e){console.log(e)}},skeleton:re,property:W,getPropertyDetail:async e=>{try{K({data:[],isLoad:!0});const t=await fetch("".concat(iT,"/api/property/details/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?K({data:n.data,isLoad:!1}):K({data:[],isLoad:!1})}catch(t){K({data:[],isLoad:!1}),console.log(t)}},propertyDetail:q,lesson:H,jobList:Q,getGoodsProduct:Ne,totalItem:me,getJobList:De,getLesson:Re,getElectronicsProduct:we,getFashionBeauty:Oe,getProperty:Ae,listLoading:ve,jobDetail:M,getJobListDetail:async e=>{try{D({data:{},isLoad:!0});const t=await fetch("".concat(iT,"/api/job/details/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?D({data:n.data,isLoad:!1}):D({data:{},isLoad:!1})}catch(t){D({data:{},isLoad:!1}),console.log(t)}},lessonDetail:k,getLessonDetail:async e=>{try{x({data:{},isLoad:!0});const t=await fetch("".concat(iT,"/api/product/lesson-course/detail/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?x({data:n.data,isLoad:!1}):x({data:{},isLoad:!1})}catch(t){x({data:{},isLoad:!1}),console.log(t)}},fashionDetail:B,getFashionBeautyDetails:async e=>{try{V({data:{},isLoad:!0});const t=await fetch("".concat(iT,"/api/product/fashion/details/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?V({data:n.data,isLoad:!1}):V({data:{},isLoad:!1})}catch(t){V({data:{},isLoad:!1}),console.log(t)}},getSubServiceList:async e=>{try{f(!0);const t=await fetch("".concat(iT,"/api/service/sub-category/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parentId:e})}),n=await t.json();t.ok&&p(n.data)}catch(t){console.log(t)}finally{f(!1)}},subServiceList:d,subServiceLoading:h,AddTitleDes:async e=>{try{const t=await fetch("".concat(iT,"/api/user/product/add"),{method:"POST",headers:{"Content-Type":"application/json",token:be},body:JSON.stringify({...e})}),n=await t.json();return t.ok&&(Es.success(n.message),ue(n.data._id)),n}catch(t){Es.error(t),console.log(t)}},AddRealEstate:async e=>{try{const t=await rT.post("".concat(iT,"/api/property/add"),e,{headers:{"Content-Type":"multipart/form-data",token:be}});return Es.success(t.message||"Success"),Ee("/my-post"),t}catch(t){Es.error(t),console.log(t)}},getAttributeList:async e=>{try{const t=await rT.post("".concat(iT,"/api/attribute/list"),{category_id:e.category_id||"",sub_category_id:e.sub_category_id||""},{headers:{"Content-Type":"application/json",token:be}});return se(t.data.data),t}catch(t){}},attributeList:oe,productId:le,AddJob:async e=>{try{const t=await rT.post("".concat(iT,"/api/job/post"),e,{headers:{"Content-Type":"multipart/form-data",token:be}});return Es.success(t.message||"Success"),Ee("/my-post"),t}catch(t){Es.error(t)}},AddFashionProduct:async e=>{try{const t=await rT.post("".concat(iT,"/api/product/fashion/add"),e,{headers:{"Content-Type":"multipart/form-data",token:be}});return Es.success(t.message||"Success"),Ee("/my-post"),t}catch(t){Es.error(t)}},AddFreelancer:async e=>{try{const t=await rT.post("".concat(iT,"/api/product/freelancer/add"),e,{headers:{"Content-Type":"multipart/form-data",token:be}});return Es.success(t.message||"Success"),Ee("/my-post"),t}catch(t){Es.error(t)}},AddElectronics:async e=>{try{const t=await rT.post("".concat(iT,"/api/product/electronics/add"),e,{headers:{"Content-Type":"multipart/form-data",token:be}});return Es.success(t.message||"Success"),Ee("/my-post"),t}catch(t){Es.error(t)}},AddCourse:async e=>{try{const t=await rT.post("".concat(iT,"/api/product/lesson-course/add"),e,{headers:{"Content-Type":"multipart/form-data",token:be}});return Es.success(t.message||"Success"),Ee("/my-post"),t}catch(t){Es.error(t)}},AddGoodsProduct:async e=>{try{const t=await rT.post("".concat(iT,"/api/product/goods/add"),e,{headers:{"Content-Type":"multipart/form-data",token:be}});return Es.success(t.message||"Success"),Ee("/my-post"),t}catch(t){Es.error(t)}},getMyPost:ke,mypost:de,myPostRemove:async e=>{try{const t=await fetch("".concat(iT,"/api/user/product/delete/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",token:be}}),n=await t.json();t.ok?(Es.success(n.message),ke(e)):Es.error(t.message)}catch(t){console.log(t)}},getMyPostListDetail:async e=>{try{const t=await fetch("".concat(iT,"/api/user/product/detail/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",token:be}}),n=await t.json();t.ok?fe(n.data):console.log("")}catch(t){console.log(t)}},myPostDetail:he,updateMyPost:async(e,t)=>{try{const n=await rT.post("".concat(iT,"/api/user/product/update/").concat(e),t,{headers:{"Content-Type":"multipart/form-data",token:be}});return Es.success(n.message||"Success"),Ee("/my-post"),n}catch(n){Es.error(n.message)}},getAttributeFilterList:async e=>{try{const t=e.main?{category_id:e.main}:e.sub?{sub_category_id:e.sub}:{},{data:n}=await rT.post("".concat(iT,"/api/attribute/filter/list"),t,{headers:{"Content-Type":"application/json"}});return ce(n.data),n}catch(t){}},filterAttributeList:ae};return(0,Me.jsx)(Kr.Provider,{value:Le,children:t})};__webpack_require__(8885);o.createRoot(document.getElementById("root")).render((0,Me.jsx)(r.StrictMode,{children:(0,Me.jsx)(Ne,{children:(0,Me.jsx)(oT,{children:(0,Me.jsx)(pb,{})})})}))})()})();
//# sourceMappingURL=main.04bb227e.js.map