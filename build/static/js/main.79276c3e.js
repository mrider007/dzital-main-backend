/*! For license information please see main.79276c3e.js.LICENSE.txt */
(()=>{var __webpack_modules__={5513:(e,t,n)=>{"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,s=String.fromCharCode,o=Object.assign;function a(e){return e.trim()}function c(e,t,n){return e.replace(t,n)}function l(e,t){return e.indexOf(t)}function d(e,t){return 0|e.charCodeAt(t)}function u(e,t,n){return e.slice(t,n)}function h(e){return e.length}function p(e){return e.length}function f(e,t){return t.push(e),e}var m=1,g=1,_=0,v=0,y=0,E="";function b(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:m,column:g,length:o,return:""}}function T(e,t){return o(b("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return y=v>0?d(E,--v):0,g--,10===y&&(g=1,m--),y}function w(){return y=v<_?d(E,v++):0,g++,10===y&&(g=1,m++),y}function C(){return d(E,v)}function R(){return v}function I(e,t){return u(E,e,t)}function N(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function O(e){return m=g=1,_=h(E=e),v=0,[]}function A(e){return E="",e}function k(e){return a(I(v-1,D(91===e?e+2:40===e?e+1:e)))}function x(e){for(;(y=C())&&y<33;)w();return N(e)>2||N(y)>3?"":" "}function P(e,t){for(;--t&&w()&&!(y<48||y>102||y>57&&y<65||y>70&&y<97););return I(e,R()+(t<6&&32==C()&&32==w()))}function D(e){for(;w();)switch(y){case e:return v;case 34:case 39:34!==e&&39!==e&&D(y);break;case 40:41===e&&D(e);break;case 92:w()}return v}function L(e,t){for(;w()&&e+y!==57&&(e+y!==84||47!==C()););return"/*"+I(t,v-1)+"*"+s(47===e?e:w())}function M(e){for(;!N(C());)w();return I(e,v)}var j="-ms-",U="-moz-",F="-webkit-",B="comm",V="rule",G="decl",H="@keyframes";function W(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function z(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case G:return e.return=e.return||e.value;case B:return"";case H:return e.return=e.value+"{"+W(e.children,r)+"}";case V:e.value=e.props.join(",")}return h(n=W(e.children,r))?e.return=e.value+"{"+n+"}":""}function q(e){return A(K("",null,null,null,[""],e=O(e),0,[0],e))}function K(e,t,n,r,i,o,a,u,p){for(var m=0,g=0,_=a,v=0,y=0,E=0,b=1,T=1,I=1,N=0,O="",A=i,D=o,j=r,U=O;T;)switch(E=N,N=w()){case 40:if(108!=E&&58==d(U,_-1)){-1!=l(U+=c(k(N),"&","&\f"),"&\f")&&(I=-1);break}case 34:case 39:case 91:U+=k(N);break;case 9:case 10:case 13:case 32:U+=x(E);break;case 92:U+=P(R()-1,7);continue;case 47:switch(C()){case 42:case 47:f(J(L(w(),R()),t,n),p);break;default:U+="/"}break;case 123*b:u[m++]=h(U)*I;case 125*b:case 59:case 0:switch(N){case 0:case 125:T=0;case 59+g:-1==I&&(U=c(U,/\f/g,"")),y>0&&h(U)-_&&f(y>32?X(U+";",r,n,_-1):X(c(U," ","")+";",r,n,_-2),p);break;case 59:U+=";";default:if(f(j=Y(U,t,n,m,g,i,u,O,A=[],D=[],_),o),123===N)if(0===g)K(U,t,j,j,A,o,_,u,D);else switch(99===v&&110===d(U,3)?100:v){case 100:case 108:case 109:case 115:K(e,j,j,r&&f(Y(e,j,j,0,0,i,u,O,i,A=[],_),D),i,D,_,u,r?A:D);break;default:K(U,j,j,j,[""],D,0,u,D)}}m=g=y=0,b=I=1,O=U="",_=a;break;case 58:_=1+h(U),y=E;default:if(b<1)if(123==N)--b;else if(125==N&&0==b++&&125==S())continue;switch(U+=s(N),N*b){case 38:I=g>0?1:(U+="\f",-1);break;case 44:u[m++]=(h(U)-1)*I,I=1;break;case 64:45===C()&&(U+=k(w())),v=C(),g=_=h(O=U+=M(R())),N++;break;case 45:45===E&&2==h(U)&&(b=0)}}return o}function Y(e,t,n,r,s,o,l,d,h,f,m){for(var g=s-1,_=0===s?o:[""],v=p(_),y=0,E=0,T=0;y<r;++y)for(var S=0,w=u(e,g+1,g=i(E=l[y])),C=e;S<v;++S)(C=a(E>0?_[S]+" "+w:c(w,/&\f/g,_[S])))&&(h[T++]=C);return b(e,t,n,0===s?V:d,h,f,m)}function J(e,t,n){return b(e,t,n,B,s(y),u(e,2,-2),0)}function X(e,t,n,r){return b(e,t,n,G,u(e,0,r),u(e,r+1,-1),r)}var Z=function(e,t,n){for(var r=0,i=0;r=i,i=C(),38===r&&12===i&&(t[n]=1),!N(i);)w();return I(e,v)},Q=function(e,t){return A(function(e,t){var n=-1,r=44;do{switch(N(r)){case 0:38===r&&12===C()&&(t[n]=1),e[n]+=Z(v-1,t,n);break;case 2:e[n]+=k(r);break;case 4:if(44===r){e[++n]=58===C()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=s(r)}}while(r=w());return e}(O(e),t))},$=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||$.get(n))&&!r){$.set(e,!0);for(var i=[],s=Q(t,i),o=n.props,a=0,c=0;a<s.length;a++)for(var l=0;l<o.length;l++,c++)e.props[c]=i[a]?s[a].replace(/&\f/g,o[l]):o[l]+" "+s[a]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^d(e,0)?(((t<<2^d(e,0))<<2^d(e,1))<<2^d(e,2))<<2^d(e,3):0}(e,t)){case 5103:return F+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return F+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return F+e+U+e+j+e+e;case 6828:case 4268:return F+e+j+e+e;case 6165:return F+e+j+"flex-"+e+e;case 5187:return F+e+c(e,/(\w+).+(:[^]+)/,F+"box-$1$2"+j+"flex-$1$2")+e;case 5443:return F+e+j+"flex-item-"+c(e,/flex-|-self/,"")+e;case 4675:return F+e+j+"flex-line-pack"+c(e,/align-content|flex-|-self/,"")+e;case 5548:return F+e+j+c(e,"shrink","negative")+e;case 5292:return F+e+j+c(e,"basis","preferred-size")+e;case 6060:return F+"box-"+c(e,"-grow","")+F+e+j+c(e,"grow","positive")+e;case 4554:return F+c(e,/([^-])(transform)/g,"$1"+F+"$2")+e;case 6187:return c(c(c(e,/(zoom-|grab)/,F+"$1"),/(image-set)/,F+"$1"),e,"")+e;case 5495:case 3959:return c(e,/(image-set\([^]*)/,F+"$1$`$1");case 4968:return c(c(e,/(.+:)(flex-)?(.*)/,F+"box-pack:$3"+j+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+F+e+e;case 4095:case 3583:case 4068:case 2532:return c(e,/(.+)-inline(.+)/,F+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(d(e,t+1)){case 109:if(45!==d(e,t+4))break;case 102:return c(e,/(.+:)(.+)-([^]+)/,"$1"+F+"$2-$3$1"+U+(108==d(e,t+3)?"$3":"$2-$3"))+e;case 115:return~l(e,"stretch")?ne(c(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==d(e,t+1))break;case 6444:switch(d(e,h(e)-3-(~l(e,"!important")&&10))){case 107:return c(e,":",":"+F)+e;case 101:return c(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+F+(45===d(e,14)?"inline-":"")+"box$3$1"+F+"$2$3$1"+j+"$2box$3")+e}break;case 5936:switch(d(e,t+11)){case 114:return F+e+j+c(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return F+e+j+c(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return F+e+j+c(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return F+e+j+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case G:e.return=ne(e.value,e.length);break;case H:return W([T(e,{value:c(e.value,"@","@"+F)})],r);case V:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return W([T(e,{props:[c(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return W([T(e,{props:[c(t,/:(plac\w+)/,":"+F+"input-$1")]}),T(e,{props:[c(t,/:(plac\w+)/,":-moz-$1")]}),T(e,{props:[c(t,/:(plac\w+)/,j+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var s,o,a={},c=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;c.push(e)}));var l,d,u=[z,(d=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&d(e)})],h=function(e){var t=p(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}([ee,te].concat(i,u));o=function(e,t,n,r){l=n,W(q(e?e+"{"+t.styles+"}":t.styles),h),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new r({key:t,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return f.sheet.hydrate(c),f}},918:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},5756:(e,t,n)=>{"use strict";n.d(t,{C:()=>a,T:()=>l,i:()=>s,w:()=>c});var r=n(5043),i=n(5513),s=(n(2830),n(9436),!0),o=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null);var a=o.Provider,c=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(o);return e(t,i,n)}))};s||(c=function(e){return function(t){var n=(0,r.useContext)(o);return null===n?(n=(0,i.A)({key:"css"}),r.createElement(o.Provider,{value:n},e(t,n))):e(t,n)}});var l=r.createContext({})},3290:(e,t,n)=>{"use strict";n.d(t,{AH:()=>l,i7:()=>d,mL:()=>c});var r=n(5756),i=n(5043),s=n(1722),o=n(9436),a=n(2830),c=(n(5513),n(219),(0,r.w)((function(e,t){var n=e.styles,c=(0,a.J)([n],void 0,i.useContext(r.T));if(!r.i){for(var l,d=c.name,u=c.styles,h=c.next;void 0!==h;)d+=" "+h.name,u+=h.styles,h=h.next;var p=!0===t.compat,f=t.insert("",{name:d,styles:u},t.sheet,p);return p?null:i.createElement("style",((l={})["data-emotion"]=t.key+"-global "+d,l.dangerouslySetInnerHTML={__html:f},l.nonce=t.sheet.nonce,l))}var m=i.useRef();return(0,o.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+c.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),m.current=[n,r],function(){n.flush()}}),[t]),(0,o.i)((function(){var e=m.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==c.next&&(0,s.sk)(t,c.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",c,n,!1)}}),[t,c.name]),null})));function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.J)(t)}var d=function(){var e=l.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},2830:(e,t,n)=>{"use strict";n.d(t,{J:()=>f});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(918),s=/[A-Z]|^ms/g,o=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},l=(0,i.A)((function(e){return a(e)?e:e.replace(s,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(o,(function(e,t,n){return h={name:t,styles:n,next:h},t}))}return 1===r[e]||a(e)||"number"!==typeof t||0===t?t:t+"px"};function u(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return h={name:n.name,styles:n.styles,next:h},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)h={name:r.name,styles:r.styles,next:h},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=u(e,t,n[i])+";";else for(var s in n){var o=n[s];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=s+"{"+t[o]+"}":c(o)&&(r+=l(s)+":"+d(s,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var a=u(e,t,o);switch(s){case"animation":case"animationName":r+=l(s)+":"+a+";";break;default:r+=s+"{"+a+"}"}}else for(var h=0;h<o.length;h++)c(o[h])&&(r+=l(s)+":"+d(s,o[h])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=h,s=n(e);return h=i,u(e,t,s)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var h,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var f=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";h=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=u(n,t,s)):i+=s[0];for(var o=1;o<e.length;o++)i+=u(n,t,e[o]),r&&(i+=s[o]);p.lastIndex=0;for(var a,c="";null!==(a=p.exec(i));)c+="-"+a[1];var l=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+c;return{name:l,styles:i,next:h}}},9436:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>a,s:()=>o});var i=n(5043),s=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,o=s||function(e){return e()},a=s||i.useLayoutEffect},1722:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>s});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},s=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var s=t;do{e.insert(t===s?"."+r:"",s,e.sheet,!0),s=s.next}while(void 0!==s)}}},7713:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>S,StyledEngineProvider:()=>T,ThemeContext:()=>c.T,css:()=>v.AH,default:()=>w,internal_processStyles:()=>C,keyframes:()=>v.i7});var r=n(8168),i=n(5043),s=n(918),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,s.A)((function(e){return o.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),c=n(5756),l=n(1722),d=n(2830),u=n(9436),h=a,p=function(e){return"theme"!==e},f=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?h:p},m=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},g=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,l.SF)(t,n,r),(0,u.s)((function(){return(0,l.sk)(t,n,r)})),null},_=function e(t,n){var s,o,a=t.__emotion_real===t,u=a&&t.__emotion_base||t;void 0!==n&&(s=n.label,o=n.target);var h=m(t,n,a),p=h||f(u),_=!p("as");return function(){var v=arguments,y=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==s&&y.push("label:"+s+";"),null==v[0]||void 0===v[0].raw)y.push.apply(y,v);else{0,y.push(v[0][0]);for(var E=v.length,b=1;b<E;b++)y.push(v[b],v[0][b])}var T=(0,c.w)((function(e,t,n){var r=_&&e.as||u,s="",a=[],m=e;if(null==e.theme){for(var v in m={},e)m[v]=e[v];m.theme=i.useContext(c.T)}"string"===typeof e.className?s=(0,l.Rk)(t.registered,a,e.className):null!=e.className&&(s=e.className+" ");var E=(0,d.J)(y.concat(a),t.registered,m);s+=t.key+"-"+E.name,void 0!==o&&(s+=" "+o);var b=_&&void 0===h?f(r):p,T={};for(var S in e)_&&"as"===S||b(S)&&(T[S]=e[S]);return T.className=s,T.ref=n,i.createElement(i.Fragment,null,i.createElement(g,{cache:t,serialized:E,isStringTag:"string"===typeof r}),i.createElement(r,T))}));return T.displayName=void 0!==s?s:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",T.defaultProps=t.defaultProps,T.__emotion_real=T,T.__emotion_base=u,T.__emotion_styles=y,T.__emotion_forwardProp=h,Object.defineProperty(T,"toString",{value:function(){return"."+o}}),T.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:m(T,i,!0)})).apply(void 0,y)},T}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){_[e]=_(e)}));var v=n(3290),y=n(5513),E=n(579);let b;function T(e){const{injectFirst:t,children:n}=e;return t&&b?(0,E.jsx)(c.C,{value:b,children:n}):n}function S(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,E.jsx)(v.mL,{styles:r})}function w(e,t){return _(e,t)}"object"===typeof document&&(b=(0,y.A)({key:"css",prepend:!0}));const C=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},7266:(e,t,n)=>{"use strict";var r=n(4994);t.X4=p,t.e$=f,t.eM=function(e,t){const n=h(e),r=h(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=m;var i=r(n(7245)),s=r(n(1098));function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,s.default)(e,t,n)}function a(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}function c(e){if(e.type)return e;if("#"===e.charAt(0))return c(a(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,s=e.substring(t+1,e.length-1);if("color"===n){if(s=s.split(" "),r=s.shift(),4===s.length&&"/"===s[3].charAt(0)&&(s[3]=s[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else s=s.split(",");return s=s.map((e=>parseFloat(e))),{type:n,values:s,colorSpace:r}}const l=e=>{const t=c(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")};function d(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function u(e){e=c(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const l=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),d({type:a,values:l})}function h(e){let t="hsl"===(e=c(e)).type||"hsla"===e.type?c(u(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function p(e,t){return e=c(e),t=o(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,d(e)}function f(e,t){if(e=c(e),t=o(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return d(e)}function m(e,t){if(e=c(e),t=o(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return d(e)}},8052:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=m,rootShouldForwardProp:r=f,slotShouldForwardProp:c=f}=e,d=e=>(0,l.default)((0,i.default)({},e,{theme:_((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return d.__mui_systemSx=!0,function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:u,slot:p,skipVariantsResolver:m,skipSx:E,overridesResolver:b=v(g(p))}=l,T=(0,s.default)(l,h),S=void 0!==m?m:p&&"Root"!==p&&"root"!==p||!1,w=E||!1;let C=f;"Root"===p||"root"===p?C=r:p?C=c:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(C=void 0);const R=(0,o.default)(e,(0,i.default)({shouldForwardProp:C,label:undefined},T)),I=e=>"function"===typeof e&&e.__emotion_real!==e||(0,a.isPlainObject)(e)?r=>y(e,(0,i.default)({},r,{theme:_({theme:r.theme,defaultTheme:n,themeId:t})})):e,N=function(r){let s=I(r);for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];const l=a?a.map(I):[];u&&b&&l.push((e=>{const r=_((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[u]||!r.components[u].styleOverrides)return null;const s=r.components[u].styleOverrides,o={};return Object.entries(s).forEach((t=>{let[n,s]=t;o[n]=y(s,(0,i.default)({},e,{theme:r}))})),b(e,o)})),u&&!S&&l.push((e=>{var r;const s=_((0,i.default)({},e,{defaultTheme:n,themeId:t}));return y({variants:null==s||null==(r=s.components)||null==(r=r[u])?void 0:r.variants},(0,i.default)({},e,{theme:s}))})),w||l.push(d);const h=l.length-a.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");s=[...r,...e],s.raw=[...r.raw,...e]}const p=R(s,...l);return e.muiName&&(p.muiName=e.muiName),p};return R.withConfig&&(N.withConfig=R.withConfig),N}};var i=r(n(4634)),s=r(n(4893)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(7713)),a=n(4534),c=(r(n(578)),r(n(2046)),r(n(4989))),l=r(n(3234));const d=["ownerState"],u=["variants"],h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const m=(0,c.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function _(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function v(e){return e?(t,n)=>n[e]:null}function y(e,t){let{ownerState:n}=t,r=(0,s.default)(t,d);const o="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(o))return o.flatMap((e=>y(e,(0,i.default)({ownerState:n},r))));if(o&&"object"===typeof o&&Array.isArray(o.variants)){const{variants:e=[]}=o;let t=(0,s.default)(o,u);return e.forEach((e=>{let s=!0;"function"===typeof e.props?s=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(s=!1)})),s&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return o}},9751:(e,t,n)=>{"use strict";n.d(t,{EU:()=>a,NI:()=>o,iZ:()=>l,kW:()=>d,vf:()=>c,zu:()=>i});var r=n(3216);const i={xs:0,sm:600,md:900,lg:1200,xl:1536},s={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(i[e],"px)")};function o(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||s;return t.reduce(((r,i,s)=>(r[e.up(e.keys[s])]=n(t[s]),r)),{})}if("object"===typeof t){const e=r.breakpoints||s;return Object.keys(t).reduce(((r,s)=>{if(-1!==Object.keys(e.values||i).indexOf(s)){r[e.up(s)]=n(t[s],s)}else{const e=s;r[e]=t[e]}return r}),{})}return n(t)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function c(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function l(e){const t=a(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];const o=[t,...i].reduce(((e,t)=>(0,r.A)(e,t)),{});return c(Object.keys(t),o)}function d(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),s=Object.keys(i);if(0===s.length)return t;let o;return s.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[o],o=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[o],o=n):e[n]=t,e)),{})}},9703:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},4853:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8587),i=n(8168);const s=["values","unit","step"],o=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,c=(0,r.A)(e,s),l=o(t),d=Object.keys(l);function u(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function h(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-a/100).concat(n,")")}function p(e,r){const i=d.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof t[d[i]]?t[d[i]]:r)-a/100).concat(n,")")}return(0,i.A)({keys:d,values:l,up:u,down:h,between:p,only:function(e){return d.indexOf(e)+1<d.length?p(e,d[d.indexOf(e)+1]):u(e)},not:function(e){const t=d.indexOf(e);return 0===t?u(d[1]):t===d.length-1?h(d[t]):p(e,d[d.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},c)}},8280:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(8168),i=n(8587),s=n(3216),o=n(4853);const a={borderRadius:4};var c=n(8604);var l=n(8812),d=n(7758),u=n(9703);const h=["breakpoints","palette","spacing","shape"];const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:p,shape:f={}}=e,m=(0,i.A)(e,h),g=(0,o.A)(t),_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,c.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(p);let v=(0,s.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:_,shape:(0,r.A)({},a,f)},m);v.applyStyles=u.A;for(var y=arguments.length,E=new Array(y>1?y-1:0),b=1;b<y;b++)E[b-1]=arguments[b];return v=E.reduce(((e,t)=>(0,s.A)(e,t)),v),v.unstable_sxConfig=(0,r.A)({},d.A,null==m?void 0:m.unstable_sxConfig),v.unstable_sx=function(e){return(0,l.A)({sx:e,theme:this})},v}},4989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>s.A});var r=n(8280),i=n(4853),s=n(9703)},3815:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(3216);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},8604:(e,t,n)=>{"use strict";n.d(t,{LX:()=>f,MA:()=>p,_W:()=>m,Lc:()=>v,Ms:()=>y});var r=n(9751),i=n(7162),s=n(3815);const o={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!c[e])return[e];e=c[e]}const[t,n]=e.split(""),r=o[t],i=a[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),d=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],u=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...d,...u];function p(e,t,n,r){var s;const o=null!=(s=(0,i.Yn)(e,t,!1))?s:n;return"number"===typeof o?e=>"string"===typeof e?e:o*e:Array.isArray(o)?e=>"string"===typeof e?e:o[e]:"function"===typeof o?o:()=>{}}function f(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const s=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(l(n),i),o=e[n];return(0,r.NI)(e,o,s)}function _(e,t){const n=f(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(s.A,{})}function v(e){return _(e,d)}function y(e){return _(e,u)}function E(e){return _(e,h)}v.propTypes={},v.filterProps=d,y.propTypes={},y.filterProps=u,E.propTypes={},E.filterProps=h},7162:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a,BO:()=>o,Yn:()=>s});var r=n(410),i=n(9751);function s(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function o(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:s(e,n)||i,t&&(r=t(r,i,e)),r}const a=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:c}=e,l=e=>{if(null==e[t])return null;const l=e[t],d=s(e.theme,a)||{};return(0,i.NI)(e,l,(e=>{let i=o(d,c,e);return e===i&&"string"===typeof e&&(i=o(d,c,"".concat(t).concat("default"===e?"":(0,r.A)(e)),e)),!1===n?i:{[n]:i}}))};return l.propTypes={},l.filterProps=[t],l}},7758:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var r=n(8604),i=n(7162),s=n(3815);const o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,s.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var a=n(9751);function c(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function l(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const d=l("border",c),u=l("borderTop",c),h=l("borderRight",c),p=l("borderBottom",c),f=l("borderLeft",c),m=l("borderColor"),g=l("borderTopColor"),_=l("borderRightColor"),v=l("borderBottomColor"),y=l("borderLeftColor"),E=l("outline",c),b=l("outlineColor"),T=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,a.NI)(e,e.borderRadius,n)}return null};T.propTypes={},T.filterProps=["borderRadius"];o(d,u,h,p,f,m,g,_,v,y,T,E,b);const S=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,a.NI)(e,e.gap,n)}return null};S.propTypes={},S.filterProps=["gap"];const w=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.columnGap,n)}return null};w.propTypes={},w.filterProps=["columnGap"];const C=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.rowGap,n)}return null};C.propTypes={},C.filterProps=["rowGap"];o(S,w,C,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function R(e,t){return"grey"===t?t:e}o((0,i.Ay)({prop:"color",themeKey:"palette",transform:R}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:R}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:R}));function I(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const N=(0,i.Ay)({prop:"width",transform:I}),O=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||a.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:I(t)}};return(0,a.NI)(e,e.maxWidth,t)}return null};O.filterProps=["maxWidth"];const A=(0,i.Ay)({prop:"minWidth",transform:I}),k=(0,i.Ay)({prop:"height",transform:I}),x=(0,i.Ay)({prop:"maxHeight",transform:I}),P=(0,i.Ay)({prop:"minHeight",transform:I}),D=((0,i.Ay)({prop:"size",cssProperty:"width",transform:I}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:I}),o(N,O,A,k,x,P,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:c},borderTop:{themeKey:"borders",transform:c},borderRight:{themeKey:"borders",transform:c},borderBottom:{themeKey:"borders",transform:c},borderLeft:{themeKey:"borders",transform:c},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:c},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:T},color:{themeKey:"palette",transform:R},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:R},backgroundColor:{themeKey:"palette",transform:R},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:S},rowGap:{style:C},columnGap:{style:w},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:I},maxWidth:{style:O},minWidth:{transform:I},height:{transform:I},maxHeight:{transform:I},minHeight:{transform:I},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8698:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(8168),i=n(8587),s=n(3216),o=n(7758);const a=["sx"],c=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:o.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function l(e){const{sx:t}=e,n=(0,i.A)(e,a),{systemProps:o,otherProps:l}=c(n);let d;return d=Array.isArray(t)?[o,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,s.Q)(e)?(0,r.A)({},o,e):o}:(0,r.A)({},o,t),(0,r.A)({},l,{sx:d})}},3234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>i.A,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>s.A});var r=n(8812),i=n(8698),s=n(7758)},8812:(e,t,n)=>{"use strict";n.d(t,{A:()=>d,k:()=>c});var r=n(410),i=n(3815),s=n(7162),o=n(9751),a=n(7758);function c(){function e(e,t,n,i){const a={[e]:t,theme:n},c=i[e];if(!c)return{[e]:t};const{cssProperty:l=e,themeKey:d,transform:u,style:h}=c;if(null==t)return null;if("typography"===d&&"inherit"===t)return{[e]:t};const p=(0,s.Yn)(n,d)||{};if(h)return h(a);return(0,o.NI)(a,t,(t=>{let n=(0,s.BO)(p,u,t);return t===n&&"string"===typeof t&&(n=(0,s.BO)(p,u,"".concat(e).concat("default"===t?"":(0,r.A)(t)),t)),!1===l?n:{[l]:n}}))}return function t(n){var r;const{sx:s,theme:c={}}=n||{};if(!s)return null;const l=null!=(r=c.unstable_sxConfig)?r:a.A;function d(n){let r=n;if("function"===typeof n)r=n(c);else if("object"!==typeof n)return n;if(!r)return null;const s=(0,o.EU)(c.breakpoints),a=Object.keys(s);let d=s;return Object.keys(r).forEach((n=>{const s=(a=r[n],u=c,"function"===typeof a?a(u):a);var a,u;if(null!==s&&void 0!==s)if("object"===typeof s)if(l[n])d=(0,i.A)(d,e(n,s,c,l));else{const e=(0,o.NI)({theme:c},s,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,s)?d=(0,i.A)(d,e):d[n]=t({sx:s,theme:c})}else d=(0,i.A)(d,e(n,s,c,l))})),(0,o.vf)(a,d)}return Array.isArray(s)?s.map(d):d(s)}}const l=c();l.filterProps=["sx"];const d=l},410:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6632);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},578:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(410)},1098:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},3216:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,Q:()=>i});var r=n(8168);function i(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function s(e){if(!i(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=s(e[n])})),t}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,r.A)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?a[r]=o(e[r],t[r],n):n.clone?a[r]=i(t[r])?s(t[r]):t[r]:a[r]=t[r])})),a}},4534:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(3216)},6632:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},7245:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(6632)},2046:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c,getFunctionName:()=>s});var r=n(2086);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function s(e){const t="".concat(e).match(i);return t&&t[1]||""}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||s(e)||t}function a(e,t,n){const r=o(t);return e.displayName||(""!==r?"".concat(n,"(").concat(r,")"):n)}function c(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return o(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.ForwardRef:return a(e,e.render,"ForwardRef");case r.Memo:return a(e,e.type,"memo");default:return}}}},3393:function(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function a(e,t){if(null==e)return{};var n,r,i=o(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c(e,t){return l(e)||d(e,t)||u(e,t)||p()}function l(e){if(Array.isArray(e))return e}function d(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(c){a=!0,i=c}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}function u(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m,g,_,v,y={exports:{}};function E(){return g?m:(g=1,m="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}function b(){if(v)return _;v=1;var e=E();function t(){}function n(){}return n.resetWarningCache=t,_=function(){function r(t,n,r,i,s,o){if(o!==e){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function i(){return r}r.isRequired=r;var s={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s}}y.exports=b()();var T=f(y.exports),S=function(e,n,r){var i=!!r,s=t.useRef(r);t.useEffect((function(){s.current=r}),[r]),t.useEffect((function(){if(!i||!e)return function(){};var t=function(){s.current&&s.current.apply(s,arguments)};return e.on(n,t),function(){e.off(n,t)}}),[i,n,e,s])},w=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},C=function(e){return null!==e&&"object"===i(e)},R=function(e){return C(e)&&"function"===typeof e.then},I=function(e){return C(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},N="[object Object]",O=function e(t,n){if(!C(t)||!C(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var i=Object.prototype.toString.call(t)===N;if(i!==(Object.prototype.toString.call(n)===N))return!1;if(!i&&!r)return t===n;var s=Object.keys(t),o=Object.keys(n);if(s.length!==o.length)return!1;for(var a={},c=0;c<s.length;c+=1)a[s[c]]=!0;for(var l=0;l<o.length;l+=1)a[o[l]]=!0;var d=Object.keys(a);if(d.length!==s.length)return!1;var u=t,h=n,p=function(t){return e(u[t],h[t])};return d.every(p)},A=function(e,t,n){return C(e)?Object.keys(e).reduce((function(i,o){var a=!C(t)||!O(e[o],t[o]);return n.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),i):a?r(r({},i||{}),{},s({},o,e[o])):i}),null):null},k="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;if(null===e||I(e))return e;throw new Error(t)},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;if(R(e))return{tag:"async",stripePromise:Promise.resolve(e).then((function(e){return x(e,t)}))};var n=x(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},D=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"2.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"2.7.0",url:"https://stripe.com/docs/stripe-js/react"}))},L=t.createContext(null);L.displayName="ElementsContext";var M=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},j=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo((function(){return P(n)}),[n]),o=c(t.useState((function(){return{stripe:"sync"===s.tag?s.stripe:null,elements:"sync"===s.tag?s.stripe.elements(r):null}})),2),a=o[0],l=o[1];t.useEffect((function(){var e=!0,t=function(e){l((function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}}))};return"async"!==s.tag||a.stripe?"sync"!==s.tag||a.stripe||t(s.stripe):s.stripePromise.then((function(n){n&&e&&t(n)})),function(){e=!1}}),[s,a,r]);var d=w(n);t.useEffect((function(){null!==d&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")}),[d,n]);var u=w(r);return t.useEffect((function(){if(a.elements){var e=A(r,u,["clientSecret","fonts"]);e&&a.elements.update(e)}}),[r,u,a.elements]),t.useEffect((function(){D(a.stripe)}),[a.stripe]),t.createElement(L.Provider,{value:a},i)};j.propTypes={stripe:T.any,options:T.object};var U=function(e){var n=t.useContext(L);return M(n,e)},F=function(){return U("calls useElements()").elements},B=function(e){return(0,e.children)(U("mounts <ElementsConsumer>"))};B.propTypes={children:T.func.isRequired};var V=["on","session"],G=t.createContext(null);G.displayName="CustomCheckoutSdkContext";var H=function(e,t){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CustomCheckoutProvider> provider."));return e},W=t.createContext(null);W.displayName="CustomCheckoutContext";var z=function(e,t){if(!e)return null;e.on,e.session;var n=a(e,V);return r(r({},n),t||e.session())},q="Invalid prop `stripe` supplied to `CustomCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",K=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo((function(){return P(n,q)}),[n]),o=c(t.useState(null),2),a=o[0],l=o[1],d=c(t.useState((function(){return{stripe:"sync"===s.tag?s.stripe:null,customCheckoutSdk:null}})),2),u=d[0],h=d[1],p=function(e,t){h((function(n){return n.stripe&&n.customCheckoutSdk?n:{stripe:e,customCheckoutSdk:t}}))},f=t.useRef(!1);t.useEffect((function(){var e=!0;return"async"!==s.tag||u.stripe?"sync"===s.tag&&s.stripe&&!f.current&&(f.current=!0,s.stripe.initCustomCheckout(r).then((function(e){e&&(p(s.stripe,e),e.on("change",l))}))):s.stripePromise.then((function(t){t&&e&&!f.current&&(f.current=!0,t.initCustomCheckout(r).then((function(e){e&&(p(t,e),e.on("change",l))})))})),function(){e=!1}}),[s,u,r,l]);var m=w(n);t.useEffect((function(){null!==m&&m!==n&&console.warn("Unsupported prop change on CustomCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[m,n]);var g=w(r);t.useEffect((function(){var e,t;if(u.customCheckoutSdk){!r.clientSecret||C(g)||O(r.clientSecret,g.clientSecret)||console.warn("Unsupported prop change: options.client_secret is not a mutable property.");var n=null===g||void 0===g||null===(e=g.elementsOptions)||void 0===e?void 0:e.appearance,i=null===r||void 0===r||null===(t=r.elementsOptions)||void 0===t?void 0:t.appearance;i&&!O(i,n)&&u.customCheckoutSdk.changeAppearance(i)}}),[r,g,u.customCheckoutSdk]),t.useEffect((function(){D(u.stripe)}),[u.stripe]);var _=t.useMemo((function(){return z(u.customCheckoutSdk,a)}),[u.customCheckoutSdk,a]);return u.customCheckoutSdk?t.createElement(G.Provider,{value:u},t.createElement(W.Provider,{value:_},i)):null};K.propTypes={stripe:T.any,options:T.shape({clientSecret:T.string.isRequired,elementsOptions:T.object}).isRequired};var Y=function(e){var n=t.useContext(G);return H(n,e)},J=function(e){var n=t.useContext(G),r=t.useContext(L);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?H(n,e):M(r,e)},X=function(){Y("calls useCustomCheckout()");var e=t.useContext(W);if(!e)throw new Error("Could not find CustomCheckout Context; You need to wrap the part of your app that calls useCustomCheckout() in an <CustomCheckoutProvider> provider.");return e},Z=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Q=function(e,n){var r="".concat(Z(e),"Element"),i=n?function(e){J("mounts <".concat(r,">"));var n=e.id,i=e.className;return t.createElement("div",{id:n,className:i})}:function(n){var i,s=n.id,o=n.className,a=n.options,l=void 0===a?{}:a,d=n.onBlur,u=n.onFocus,h=n.onReady,p=n.onChange,f=n.onEscape,m=n.onClick,g=n.onLoadError,_=n.onLoaderStart,v=n.onNetworksChange,y=n.onConfirm,E=n.onCancel,b=n.onShippingAddressChange,T=n.onShippingRateChange,C=J("mounts <".concat(r,">")),R="elements"in C?C.elements:null,I="customCheckoutSdk"in C?C.customCheckoutSdk:null,N=c(t.useState(null),2),O=N[0],k=N[1],x=t.useRef(null),P=t.useRef(null);S(O,"blur",d),S(O,"focus",u),S(O,"escape",f),S(O,"click",m),S(O,"loaderror",g),S(O,"loaderstart",_),S(O,"networkschange",v),S(O,"confirm",y),S(O,"cancel",E),S(O,"shippingaddresschange",b),S(O,"shippingratechange",T),S(O,"change",p),h&&(i="expressCheckout"===e?h:function(){h(O)}),S(O,"ready",i),t.useLayoutEffect((function(){if(null===x.current&&null!==P.current&&(R||I)){var t=null;I?t=I.createElement(e,l):R&&(t=R.create(e,l)),x.current=t,k(t),t&&t.mount(P.current)}}),[R,I,l]);var D=w(l);return t.useEffect((function(){if(x.current){var e=A(l,D,["paymentRequest"]);e&&x.current.update(e)}}),[l,D]),t.useLayoutEffect((function(){return function(){if(x.current&&"function"===typeof x.current.destroy)try{x.current.destroy(),x.current=null}catch(e){}}}),[]),t.createElement("div",{id:s,className:o,ref:P})};return i.propTypes={id:T.string,className:T.string,onChange:T.func,onBlur:T.func,onFocus:T.func,onReady:T.func,onEscape:T.func,onClick:T.func,onLoadError:T.func,onLoaderStart:T.func,onNetworksChange:T.func,onConfirm:T.func,onCancel:T.func,onShippingAddressChange:T.func,onShippingRateChange:T.func,options:T.object},i.displayName=r,i.__elementType=e,i},$="undefined"===typeof window,ee=t.createContext(null);ee.displayName="EmbeddedCheckoutProviderContext";var te=function(){var e=t.useContext(ee);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},ne="Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",re=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo((function(){return P(n,ne)}),[n]),o=t.useRef(null),a=t.useRef(null),l=c(t.useState({embeddedCheckout:null}),2),d=l[0],u=l[1];t.useEffect((function(){if(!a.current&&!o.current){var e=function(e){a.current||o.current||(a.current=e,o.current=a.current.initEmbeddedCheckout(r).then((function(e){u({embeddedCheckout:e})})))};"async"!==s.tag||a.current||!r.clientSecret&&!r.fetchClientSecret?"sync"!==s.tag||a.current||!r.clientSecret&&!r.fetchClientSecret||e(s.stripe):s.stripePromise.then((function(t){t&&e(t)}))}}),[s,r,d,a]),t.useEffect((function(){return function(){d.embeddedCheckout?(o.current=null,d.embeddedCheckout.destroy()):o.current&&o.current.then((function(){o.current=null,d.embeddedCheckout&&d.embeddedCheckout.destroy()}))}}),[d.embeddedCheckout]),t.useEffect((function(){D(a)}),[a]);var h=w(n);t.useEffect((function(){null!==h&&h!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[h,n]);var p=w(r);return t.useEffect((function(){null!=p&&(null!=r?(void 0===r.clientSecret&&void 0===r.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=p.clientSecret&&r.clientSecret!==p.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=p.fetchClientSecret&&r.fetchClientSecret!==p.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=p.onComplete&&r.onComplete!==p.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))}),[p,r]),t.createElement(ee.Provider,{value:d},i)},ie=function(e){var n=e.id,r=e.className,i=te().embeddedCheckout,s=t.useRef(!1),o=t.useRef(null);return t.useLayoutEffect((function(){return!s.current&&i&&null!==o.current&&(i.mount(o.current),s.current=!0),function(){if(s.current&&i)try{i.unmount(),s.current=!1}catch(e){}}}),[i]),t.createElement("div",{ref:o,id:n,className:r})},se=function(e){var n=e.id,r=e.className;return te(),t.createElement("div",{id:n,className:r})},oe=$?se:ie,ae=function(){return J("calls useStripe()").stripe},ce=Q("auBankAccount",$),le=Q("card",$),de=Q("cardNumber",$),ue=Q("cardExpiry",$),he=Q("cardCvc",$),pe=Q("fpxBank",$),fe=Q("iban",$),me=Q("idealBank",$),ge=Q("p24Bank",$),_e=Q("epsBank",$),ve=Q("payment",$),ye=Q("expressCheckout",$),Ee=Q("paymentRequestButton",$),be=Q("linkAuthentication",$),Te=Q("address",$),Se=Q("shippingAddress",$),we=Q("paymentMethodMessaging",$),Ce=Q("affirmMessage",$),Re=Q("afterpayClearpayMessage",$);e.AddressElement=Te,e.AffirmMessageElement=Ce,e.AfterpayClearpayMessageElement=Re,e.AuBankAccountElement=ce,e.CardCvcElement=he,e.CardElement=le,e.CardExpiryElement=ue,e.CardNumberElement=de,e.CustomCheckoutProvider=K,e.Elements=j,e.ElementsConsumer=B,e.EmbeddedCheckout=oe,e.EmbeddedCheckoutProvider=re,e.EpsBankElement=_e,e.ExpressCheckoutElement=ye,e.FpxBankElement=pe,e.IbanElement=fe,e.IdealBankElement=me,e.LinkAuthenticationElement=be,e.P24BankElement=ge,e.PaymentElement=ve,e.PaymentMethodMessagingElement=we,e.PaymentRequestButtonElement=Ee,e.ShippingAddressElement=Se,e.useCustomCheckout=X,e.useElements=F,e.useStripe=ae}(t,n(5043))},9472:function(module){var t;t=function(){return function(){var __webpack_modules__={4537:function(e){"use strict";e.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,i=2,s=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,o){n[r]=function(e){if(s)if(s=!1,e)o(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){s&&(s=!1,o(e))}}))}},7419:function(e,t){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),i=new Array(123),s=0;s<64;)i[r[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;n.encode=function(e,t,n){for(var i,s=null,o=[],a=0,c=0;t<n;){var l=e[t++];switch(c){case 0:o[a++]=r[l>>2],i=(3&l)<<4,c=1;break;case 1:o[a++]=r[i|l>>4],i=(15&l)<<2,c=2;break;case 2:o[a++]=r[i|l>>6],o[a++]=r[63&l],c=0}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=r[i],o[a++]=61,1===c&&(o[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var o="invalid encoding";n.decode=function(e,t,n){for(var r,s=n,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if(void 0===(l=i[l]))throw Error(o);switch(a){case 0:r=l,a=1;break;case 1:t[n++]=r<<2|(48&l)>>4,r=l,a=2;break;case 2:t[n++]=(15&r)<<4|(60&l)>>2,r=l,a=3;break;case 3:t[n++]=(3&r)<<6|l,a=0}}if(1===a)throw Error(o);return n-s},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},5124:function(e){"use strict";function t(e,n){"string"==typeof e&&(n=e,e=void 0);var r=[];function i(e){if("string"!=typeof e){var n=s();if(t.verbose&&console.log("codegen: "+n),n="return "+n,e){for(var o=Object.keys(e),a=new Array(o.length+1),c=new Array(o.length),l=0;l<o.length;)a[l]=o[l],c[l]=e[o[l++]];return a[l]=n,Function.apply(null,a).apply(null,c)}return Function(n)()}for(var d=new Array(arguments.length-1),u=0;u<d.length;)d[u]=arguments[++u];if(u=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var n=d[u++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),u!==d.length)throw Error("parameter count mismatch");return r.push(e),i}function s(t){return"function "+(t||n||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}return i.toString=s,i}e.exports=t,t.verbose=!1},9211:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},9054:function(e,t,n){"use strict";e.exports=s;var r=n(4537),i=n(7199)("fs");function s(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&i&&i.readFile?i.readFile(e,(function(r,i){return r&&"undefined"!=typeof XMLHttpRequest?s.xhr(e,t,n):r?n(r):n(null,t.binary?i:i.toString("utf8"))})):s.xhr(e,t,n):r(s,this,e,t)}s.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var i=0;i<r.responseText.length;++i)e.push(255&r.responseText.charCodeAt(i))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)}},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},945:function(e){"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function s(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function o(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:s,e.writeFloatBE=r?s:i,e.readFloatLE=r?o:a,e.readFloatBE=r?a:o}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var s=Math.floor(Math.log(t)/Math.LN2);e((i<<31|s+127<<23|8388607&Math.round(t*Math.pow(2,-s)*8388608))>>>0,n,r)}}function o(e,t,n){var r=e(t,n),i=2*(r>>31)+1,s=r>>>23&255,o=8388607&r;return 255===s?o?NaN:i*(1/0):0===s?1401298464324817e-60*i*o:i*Math.pow(2,s-150)*(o+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,r),e.readFloatLE=o.bind(null,i),e.readFloatBE=o.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function s(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function o(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:s,e.writeDoubleBE=r?s:i,e.readDoubleLE=r?o:a,e.readDoubleBE=r?a:o}():function(){function t(e,t,n,r,i,s){var o=r<0?1:0;if(o&&(r=-r),0===r)e(0,i,s+t),e(1/r>0?0:2147483648,i,s+n);else if(isNaN(r))e(0,i,s+t),e(2146959360,i,s+n);else if(r>17976931348623157e292)e(0,i,s+t),e((o<<31|2146435072)>>>0,i,s+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,s+t),e((o<<31|a/4294967296)>>>0,i,s+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,i,s+t),e((o<<31|c+1023<<20|1048576*a&1048575)>>>0,i,s+n)}}}function o(e,t,n,r,i){var s=e(r,i+t),o=e(r,i+n),a=2*(o>>31)+1,c=o>>>20&2047,l=4294967296*(1048575&o)+s;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=o.bind(null,i,0,4),e.readDoubleBE=o.bind(null,s,4,0)}(),e}function n(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function r(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},8626:function(e,t){"use strict";var n=t,r=n.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=n.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=r(e),i="";n&&(i=t.shift()+"/");for(var s=0;s<t.length;)".."===t[s]?s>0&&".."!==t[s-1]?t.splice(--s,2):n?t.splice(s,1):++s:"."===t[s]?t.splice(s,1):++s;return i+t.join("/")};n.resolve=function(e,t,n){return n||(t=i(t)),r(t)?t:(n||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}},6662:function(e){"use strict";e.exports=function(e,t,n){var r=n||8192,i=r>>>1,s=null,o=r;return function(n){if(n<1||n>i)return e(n);o+n>r&&(s=e(r),o=0);var a=t.call(s,o,o+=n);return 7&o&&(o=1+(7|o)),a}}},4997:function(e,t){"use strict";var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,s=[],o=0;t<n;)(r=e[t++])<128?s[o++]=r:r>191&&r<224?s[o++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[o++]=55296+(r>>10),s[o++]=56320+(1023&r)):s[o++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0);return i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))},n.write=function(e,t,n){for(var r,i,s=n,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&i),++o,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-s}},4188:function(e,t,n){var r,i,s;!function(o){"use strict";if(null!=t&&"number"!=typeof t.nodeType)e.exports=o();else if(null!=n.amdO)i=[],void 0===(s="function"==typeof(r=o)?r.apply(t,i):r)||(e.exports=s);else{var a=o(),c="undefined"!=typeof self?self:$.global;"function"!=typeof c.btoa&&(c.btoa=a.btoa),"function"!=typeof c.atob&&(c.atob=a.atob)}}((function(){"use strict";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(e){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidCharacterError",{btoa:function(n){for(var r,i,s=String(n),o=0,a=e,c="";s.charAt(0|o)||(a="=",o%1);c+=a.charAt(63&r>>8-o%1*8)){if((i=s.charCodeAt(o+=3/4))>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return c},atob:function(n){var r=String(n).replace(/[=]+$/,"");if(r.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,s,o=0,a=0,c="";s=r.charAt(a++);~s&&(i=o%4?64*i+s:s,o++%4)?c+=String.fromCharCode(255&i>>(-2*o&6)):0)s=e.indexOf(s);return c}}}))},9667:function(e,t,n){"use strict";n.r(t),n.d(t,{addUsersToChatRoom:function(){return y},addUsersToChatRoomAllowlist:function(){return Y},addUsersToChatRoomWhitelist:function(){return K},blockChatRoomMember:function(){return L},blockChatRoomMembers:function(){return j},chatRoomBlockMulti:function(){return M},chatRoomBlockSingle:function(){return D},createChatRoom:function(){return u},deleteChatRoomSharedFile:function(){return oe},destroyChatRoom:function(){return h},disableSendChatRoomMsg:function(){return z},enableSendChatRoomMsg:function(){return q},fetchChatRoomAnnouncement:function(){return re},fetchChatRoomSharedFileList:function(){return ae},getChatRoomAdmin:function(){return C},getChatRoomAllowlist:function(){return $},getChatRoomAttributes:function(){return le},getChatRoomBlacklist:function(){return H},getChatRoomBlacklistNew:function(){return G},getChatRoomBlocklist:function(){return W},getChatRoomDetails:function(){return p},getChatRoomMuteList:function(){return x},getChatRoomMuted:function(){return k},getChatRoomMutelist:function(){return P},getChatRoomSharedFilelist:function(){return ce},getChatRoomWhitelist:function(){return Q},getChatRooms:function(){return d},isChatRoomWhiteUser:function(){return ee},isInChatRoomAllowlist:function(){return te},isInChatRoomMutelist:function(){return ne},joinChatRoom:function(){return E},leaveChatRoom:function(){return T},listChatRoomMember:function(){return S},listChatRoomMembers:function(){return w},modifyChatRoom:function(){return f},muteChatRoomMember:function(){return N},quitChatRoom:function(){return b},removeChatRoomAdmin:function(){return I},removeChatRoomAllowlistMember:function(){return Z},removeChatRoomAttribute:function(){return pe},removeChatRoomAttributes:function(){return he},removeChatRoomBlockMulti:function(){return B},removeChatRoomBlockSingle:function(){return U},removeChatRoomMember:function(){return g},removeChatRoomMembers:function(){return v},removeChatRoomWhitelistMember:function(){return X},removeMultiChatRoomMember:function(){return _},removeMuteChatRoomMember:function(){return O},removeSingleChatRoomMember:function(){return m},rmUsersFromChatRoomWhitelist:function(){return J},setChatRoomAdmin:function(){return R},setChatRoomAttribute:function(){return ue},setChatRoomAttributes:function(){return de},unblockChatRoomMember:function(){return F},unblockChatRoomMembers:function(){return V},unmuteChatRoomMember:function(){return A},updateChatRoomAnnouncement:function(){return ie},uploadChatRoomSharedFile:function(){return se}}),n(1539),n(8674),n(8309),n(2526),n(1817),n(2222),n(9753),n(9600),n(2165),n(6992),n(8783),n(3948);var r=n(5531),i=n(7252),s=n(4370),o=n(3246),a=n(7360),c=n(1595);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function d(e){var t=this;if("number"!=typeof e.pagenum||"number"!=typeof e.pagesize)throw Error("Invalid parameter");if(!o.XZ.call(this)){var n=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var l={pagenum:e.pagenum||1,pagesize:e.pagesize||20},d=this.context,u=d.orgName,h=d.appName,p=d.accessToken,f={url:this.apiUrl+"/"+u+"/"+h+"/chatrooms",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+p},data:l,success:function(t){"function"==typeof e.success&&e.success(t)},error:function(n){n.error&&n.error_description&&t.onError&&t.onError({type:r.E.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR,message:n.error_description,data:n}),"function"==typeof e.error&&e.error(n)}};return a.kg.debug("Call getChatRooms",e),s.hj.call(this,f,c.fI.GET_CHATROOM_LIST)}function u(e){if("string"!=typeof e.name)throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={name:e.name,description:e.description,maxusers:e.maxusers,owner:this.user,members:e.members},l=this.context,d=l.orgName,u=l.appName,h=(l.accessToken,l.jid),p={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/chatrooms?resource=").concat(h.clientResource),dataType:"json",type:"POST",data:JSON.stringify(n),headers:{Authorization:"Bearer "+e.token||0,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call createChatRoom",e),s.hj.call(this,p,c.fI.CREATE_CHATROOM)}function h(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=(n.accessToken,n.jid),h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(e.chatRoomId,"?resource=").concat(u.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+e.token||0},success:e.success,error:e.error};return a.kg.debug("Call destroyChatRoom",e),s.hj.call(this,h,c.fI.DESTROY_CHATROOM)}function p(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h={url:this.apiUrl+"/"+l+"/"+d+"/chatrooms/"+e.chatRoomId,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomDetails",e),s.hj.call(this,h,c.fI.GET_CHATROOM_DETAIL)}function f(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={groupname:e.chatRoomName,description:e.description,maxusers:e.maxusers},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"?resource=").concat(h.clientResource),type:"PUT",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call modifyChatRoom",e),s.hj.call(this,m,c.fI.MODIFY_CHATROOM)}function m(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||"string"!=typeof e.username)throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/users/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeChatRoomMember",e),s.hj.call(this,m,c.fI.REMOVE_CHATROOM_MEMBER)}var g=m;function _(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||!Array.isArray(e.users))throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=e.chatRoomId,l=e.users.join(","),d=this.context,u=d.orgName,h=d.appName,p=d.accessToken,f=d.jid,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(h,"/chatrooms/").concat(n,"/users/").concat(l,"?resource=").concat(f.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeChatRoomMembers",e),s.hj.call(this,m,c.fI.MULTI_REMOVE_CHATROOM_MEMBER)}var v=_;function y(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||!Array.isArray(e.users))throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=e.chatRoomId,l={usernames:e.users},d=this.context,u=d.orgName,h=d.appName,p=d.accessToken,f=d.jid,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(h,"/chatrooms/").concat(n,"/users?resource=").concat(f.clientResource),type:"POST",data:JSON.stringify(l),dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call addUsersToChatRoom",e),s.hj.call(this,m,c.fI.ADD_USERS_TO_CHATROOM)}function E(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}return a.kg.debug("Call joinChatRoom",e),this.mSync.handleChatRoom(e,"join")}function b(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}return a.kg.debug("Call leaveChatRoom",e),this.mSync.handleChatRoom(e,"leave")}var T=b;function S(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(isNaN(e.pageNum)||e.pageNum<=0)throw Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw Error('The parameter "pageSize" should be a positive number');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={pagenum:e.pageNum,pagesize:e.pageSize},l=this.context,d=l.orgName,u=l.appName,h=l.accessToken,p={url:this.apiUrl+"/"+d+"/"+u+"/chatrooms/"+e.chatRoomId+"/users",dataType:"json",type:"GET",data:n,headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call listChatRoomMembers",e),s.hj.call(this,p,c.fI.LIST_CHATROOM_MEMBERS)}var w=S;function C(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.chatRoomId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatrooms/"+h+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomAdmin",e),s.hj.call(this,p,c.fI.GET_CHATROOM_ADMIN)}function R(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={newadmin:e.username},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/admin?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setChatRoomAdmin",e),s.hj.call(this,m,c.fI.SET_CHATROOM_ADMIN)}function I(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/admin/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeChatRoomAdmin",e),s.hj.call(this,m,c.fI.REMOVE_CHATROOM_ADMIN)}function N(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if("number"!=typeof e.muteDuration)throw Error('Invalid parameter: "muteDuration"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={usernames:[e.username],mute_duration:e.muteDuration},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/mute?resource=").concat(h.clientResource),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},data:JSON.stringify(f),success:e.success,error:e.error};return a.kg.debug("Call muteChatRoomMember",e),s.hj.call(this,m,c.fI.MUTE_CHATROOM_MEMBER)}function O(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/mute/").concat(f,"?resource=").concat(h.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unmuteChatRoomMember",e),s.hj.call(this,m,c.fI.REMOVE_MUTE_CHATROOM_MEMBER)}var A=O;function k(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.chatRoomId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatrooms/"+h+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomMutelist",e),s.hj.call(this,p,c.fI.GET_MUTE_CHATROOM_MEMBERS)}var x=k,P=k;function D(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/blocks/users/").concat(f,"?resource=").concat(h.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call blockChatRoomMember",e),s.hj.call(this,m,c.fI.SET_CHATROOM_MEMBER_TO_BLACK)}var L=D;function M(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={usernames:e.usernames},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/blocks/users?resource=").concat(h.clientResource),data:JSON.stringify(f),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Chat blockChatRoomMembers:",m),s.hj.call(this,m,c.fI.MULTI_SET_CHATROOM_MEMBER_TO_BLACK)}var j=M;function U(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/blocks/users/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unblockChatRoomMember",e),s.hj.call(this,m,c.fI.REMOVE_CHATROOM_MEMBER_BLACK)}var F=U;function B(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f=e.usernames.join(","),m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/blocks/users/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unblockChatRoomMembers",e),s.hj.call(this,m,c.fI.MULTI_REMOVE_CHATROOM_MEMBER_BLACK)}var V=B;function G(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.chatRoomId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatrooms/"+h+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomBlocklist",e),s.hj.call(this,p,c.fI.GET_CHATROOM_BLOCK_MEMBERS)}var H=G,W=G;function z(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/ban?resource=").concat(h.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call disableSendChatRoomMsg",e),s.hj.call(this,f,c.fI.DISABLED_CHATROOM_SEND_MSG)}function q(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/ban?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call enableSendChatRoomMsg",e),s.hj.call(this,f,c.fI.ENABLE_CHATROOM_SEND_MSG)}function K(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={usernames:e.users},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/white/users?resource=").concat(h.clientResource),type:"POST",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call addUsersToChatRoomWhitelist",e),s.hj.call(this,m,c.fI.ADD_USERS_TO_CHATROOM)}var Y=K;function J(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.chatRoomId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/white/users/").concat(e.userName,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeChatRoomAllowlistMember",e),s.hj.call(this,f,c.fI.REMOVE_CHATROOM_WHITE_USERS)}var X=J,Z=J;function Q(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.chatRoomId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatrooms/"+h+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getChatRoomAllowlist",e),s.hj.call(this,p,c.fI.GET_CHATROOM_WHITE_USERS)}var $=Q;function ee(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.chatRoomId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatrooms/"+h+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call isInChatRoomAllowlist",e),s.hj.call(this,p,c.fI.CHECK_CHATROOM_WHITE_USER)}var te=ee;function ne(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,d=n.accessToken,u=n.userId,h={url:this.apiUrl+"/"+c+"/"+l+"/sdk/chatrooms/"+e.chatRoomId+"/mute/"+u,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d}};return a.kg.debug("Call isInChatRoomMutelist",e),s.hj.call(this,h).then((function(e){return e.data}))}function re(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.roomId,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(h,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call fetchChatRoomAnnouncement",e),s.hj.call(this,p,c.fI.GET_CHATROOM_ANN)}function ie(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("string"!=typeof e.announcement)throw Error('Invalid parameter: "announcement"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.roomId,f={announcement:e.announcement},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/announcement?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call updateChatRoomAnnouncement:",e),s.hj.call(this,m,c.fI.UPDATE_CHATROOM_ANN)}function se(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("object"!==l(e.file))throw Error('Invalid parameter: "file"');if(o.XZ.call(this)){var t=this.context,n=t.orgName,r=t.appName,i=t.accessToken,d=t.jid,u=e.roomId;s.cT.call(this,{uploadUrl:"".concat(this.apiUrl,"/").concat(n,"/").concat(r,"/chatrooms/").concat(u,"/share_files?resource=").concat(d.clientResource),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:i,apiUrl:this.apiUrl,file:e.file,appKey:this.context.appKey},c.fI.UPLOAD_CHATROOM_FILE),a.kg.debug("Call uploadChatRoomSharedFile",e)}}function oe(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("string"!=typeof e.fileId||""===e.fileId)throw Error('Invalid parameter: "fileId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.roomId,f=e.fileId,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(p,"/share_files/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call deleteChatRoomSharedFile",e),s.hj.call(this,m,c.fI.DELETE_CHATROOM_FILE)}function ae(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.roomId,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatrooms/").concat(h,"/share_files"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json",accept:"application/json"},success:e.success,error:e.error};return a.kg.debug("Call fetchChatRoomSharedFileList",e),s.hj.call(this,p,c.fI.GET_CHATROOM_FILES)}var ce=ae;function le(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if(e.attributeKeys&&!Array.isArray(e.attributeKeys))throw Error('"Invalid parameter attributeKeys": '+e.attributeKeys);if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=(n.jid,e.chatRoomId),p={keys:e.attributeKeys},f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/metadata/chatroom/").concat(h),type:"POST",dataType:"json",data:JSON.stringify(p),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return a.kg.debug("Call getChatRoomAttributes:",e),s.hj.call(this,f,c.fI.GET_CHATROOM_ATTR).then((function(e){return{data:e.data,type:e.type}}))}function de(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("object"!==l(e.attributes))throw Error("Invalid parameter attributes: "+e.attributes);if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,d=n.orgName,u=n.appName,h=n.accessToken,p=n.userId,f=e.chatRoomId,m=e.attributes,g=e.autoDelete,_=void 0===g||g,v=e.isForced?"/forced":"",y={metaData:m,autoDelete:_?"DELETE":"NO_DELETE"},E={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/metadata/chatroom/").concat(f,"/user/").concat(p)+v,type:"PUT",dataType:"json",data:JSON.stringify(y),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"}};return a.kg.debug("Call setChatRoomAttributes:",e),s.hj.call(this,E,c.fI.SET_CHATROOM_ATTR).then((function(e){return(0,o._W)(e)}))}function ue(e){var t;if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("string"!=typeof e.attributeKey||""===e.attributeKey)throw Error("Invalid parameter attributeKey: "+e.attributeKey);if("string"!=typeof e.attributeValue||""===e.attributeValue)throw Error("Invalid parameter attributeValue: "+e.attributeValue);if(!o.XZ.call(this)){var n=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var l=this.context,d=l.orgName,u=l.appName,h=l.accessToken,p=l.userId,f=e.chatRoomId,m=e.attributeKey,g=e.attributeValue,_=e.autoDelete,v=void 0===_||_,y=e.isForced?"/forced":"",E={metaData:(t={},t[m]=g,t),autoDelete:v?"DELETE":"NO_DELETE"},b={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/metadata/chatroom/").concat(f,"/user/").concat(p)+y,type:"PUT",dataType:"json",data:JSON.stringify(E),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"}};return a.kg.debug("Call setChatRoomAttribute:",e),s.hj.call(this,b,c.fI.SET_CHATROOM_ATTR).then((function(e){var t=(0,o.H7)(e);if(t)throw t}))}function he(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if(!Array.isArray(e.attributeKeys))throw Error('"Invalid parameter attributes": '+e.attributeKeys);if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.userId,p=e.chatRoomId,f=e.attributeKeys,m=e.isForced?"/forced":"",g={keys:f},_={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/metadata/chatroom/").concat(p,"/user/").concat(h)+m,type:"DELETE",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return a.kg.debug("Call removeChatRoomAttributes:",e),s.hj.call(this,_,c.fI.DELETE_CHATROOM_ATTR).then((function(e){return(0,o._W)(e)}))}function pe(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("string"!=typeof e.attributeKey||""===e.attributeKey)throw Error('"Invalid parameter attributeKey": '+e.attributeKey);if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.userId,p=e.chatRoomId,f=e.attributeKey,m=e.isForced?"/forced":"",g={keys:[f]},_={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/metadata/chatroom/").concat(p,"/user/").concat(h)+m,type:"DELETE",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return a.kg.debug("Call removeChatRoomAttribute:",e),s.hj.call(this,_,c.fI.DELETE_CHATROOM_ATTR).then((function(e){var t=(0,o.H7)(e);if(t)throw t}))}},4363:function(e,t,n){"use strict";n.d(t,{w:function(){return s}}),n(9601),n(2772);var r=n(7360),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function s(e){var t,n,s,o=e.id,a=e.payload,c=e.timestamp,l=e.to,d=a.bodies&&a.bodies.length>0?a.bodies[0]:{},u={},h={},p=a.type?a.type:l.indexOf("@conference.easemob.com")>-1?"groupChat":"singleChat";switch(p="chat"===p?"singleChat":p,d.type){case"txt":var f=null===(t=null==a?void 0:a.meta)||void 0===t?void 0:t.edit_msg;if(u={id:o,type:"txt",chatType:p,msg:d.msg||"",to:a.to||"",from:a.from,time:c,ext:a.ext},f){var m=f.edit_time,g=f.operator,_=f.count;u.modifiedInfo={operationTime:m,operatorId:g,operationCount:_}}break;case"img":u={id:o,type:"img",chatType:p,to:a.to,from:a.from,time:c,ext:a.ext,width:(null===(n=d.size)||void 0===n?void 0:n.width)||0,height:(null===(s=d.size)||void 0===s?void 0:s.height)||0,secret:d.secret||"",url:(null==d?void 0:d.url)||"",file_length:d.file_length||0,file:{}};break;case"video":u={id:o,type:"video",chatType:p,from:a.from,to:a.to,url:(null==d?void 0:d.url)||"",secret:d.secret||"",filename:d.filename,length:d.length||0,file:{},file_length:d.file_length||0,filetype:a.ext.file_type||"",ext:a.ext,time:c};break;case"loc":u={id:o,type:"loc",chatType:p,from:a.from,to:a.to,buildingName:d.buildingName||"",addr:d.addr,lat:d.lat,lng:d.lng,ext:a.ext,time:c};break;case"audio":u={id:o,type:"audio",chatType:p,from:a.from,to:a.to,secret:d.secret||"",ext:a.ext,time:c,url:(null==d?void 0:d.url)||"",file:{},filename:d.filename,length:d.length||0,file_length:d.file_length||0,filetype:a.ext.file_type||""};break;case"file":u={id:o,type:"file",chatType:p,from:a.from,to:a.to,ext:a.ext,time:c,url:(null==d?void 0:d.url)||"",secret:d.secret||"",file:{},filename:d.filename||"",file_length:d.file_length||0,filetype:a.ext.file_type||""};break;case"cmd":u={id:o,type:"cmd",chatType:p,from:a.from,to:a.to,ext:a.ext,time:c,action:d.action||""};break;case"custom":u={id:o,type:"custom",chatType:p,from:a.from,to:a.to,ext:a.ext,time:c,customEvent:d.customEvent||"",customExts:d.customExts||""};break;case"combine":u={id:o,type:"combine",chatType:p,msg:d.msg||"",to:a.to||"",from:a.from,time:c,ext:a.ext,title:d.title||"",summary:d.summary||"",url:(null==d?void 0:d.url)||"",compatibleText:d.text,combineLevel:d.combineLevel||0,secret:d.secret||"",filename:d.filename||"",file_length:d.file_length||0};break;default:r.kg.error("unexpected message: ".concat(e))}if(a.msgConfig&&(h.msgConfig=a.msgConfig),null==a?void 0:a.meta){var v=a.meta;v.thread&&(h.chatThread={messageId:v.thread.msg_parent_id,parentId:v.thread.muc_parent_id,chatThreadName:v.thread.thread_name}),v.reactions&&(h.reactions=v.reactions),v.translations&&(h.translations=v.translations)}return i(i({},u),h)}},2856:function(e,t,n){"use strict";n.r(t),n.d(t,{acceptGroupInvite:function(){return H},acceptGroupJoinRequest:function(){return F},addUsersToGroupAllowlist:function(){return _e},addUsersToGroupWhitelist:function(){return ge},agreeInviteIntoGroup:function(){return G},agreeJoinGroup:function(){return U},blockGroup:function(){return f},blockGroupMember:function(){return ie},blockGroupMembers:function(){return oe},blockGroupMessages:function(){return m},changeGroupOwner:function(){return b},changeOwner:function(){return E},createGroup:function(){return p},createGroupNew:function(){return h},deleteGroupSharedFile:function(){return ke},destroyGroup:function(){return x},disableSendGroupMsg:function(){return fe},dissolveGroup:function(){return k},downloadGroupSharedFile:function(){return De},enableSendGroupMsg:function(){return me},fetchGroupAnnouncement:function(){return Ne},fetchGroupSharedFileList:function(){return xe},getGroup:function(){return v},getGroupAdmin:function(){return R},getGroupAllowlist:function(){return Te},getGroupBlacklist:function(){return he},getGroupBlacklistNew:function(){return ue},getGroupBlocklist:function(){return pe},getGroupInfo:function(){return T},getGroupMemberAttributes:function(){return Me},getGroupMembersAttributes:function(){return je},getGroupMsgReadUser:function(){return Ie},getGroupMuteList:function(){return te},getGroupMutelist:function(){return ne},getGroupSharedFilelist:function(){return Pe},getGroupWhitelist:function(){return be},getJoinedGroups:function(){return y},getMuted:function(){return ee},getPublicGroups:function(){return _},groupBlockMulti:function(){return se},groupBlockSingle:function(){return re},inviteToGroup:function(){return L},inviteUsersToGroup:function(){return M},isGroupWhiteUser:function(){return Se},isInGroupAllowlist:function(){return Ce},isInGroupMutelist:function(){return Re},isInGroupWhiteList:function(){return we},joinGroup:function(){return j},leaveGroup:function(){return D},listGroupMember:function(){return w},listGroupMembers:function(){return C},listGroups:function(){return g},modifyGroup:function(){return S},mute:function(){return X},muteGroupMember:function(){return Z},quitGroup:function(){return P},rejectGroupInvite:function(){return z},rejectGroupJoinRequest:function(){return V},rejectInviteIntoGroup:function(){return W},rejectJoinGroup:function(){return B},removeAdmin:function(){return O},removeGroupAdmin:function(){return A},removeGroupAllowlistMember:function(){return Ee},removeGroupBlockMulti:function(){return le},removeGroupBlockSingle:function(){return ae},removeGroupMember:function(){return K},removeGroupMembers:function(){return J},removeGroupWhitelistMember:function(){return ye},removeMultiGroupMember:function(){return Y},removeMute:function(){return Q},removeSingleGroupMember:function(){return q},rmUsersFromGroupWhitelist:function(){return ve},setAdmin:function(){return I},setGroupAdmin:function(){return N},setGroupMemberAttributes:function(){return Le},unblockGroupMember:function(){return ce},unblockGroupMembers:function(){return de},unmuteGroupMember:function(){return $},updateGroupAnnouncement:function(){return Oe},uploadGroupSharedFile:function(){return Ae}}),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(2222),n(6699),n(2023),n(9554),n(4747),n(8309),n(9753),n(9600);var r=n(5531),i=n(7252),s=n(4370),o=n(3246),a=n(7360),c=n(1595);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var d=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};function h(e){if(!e||!e.data)throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups?resource=").concat(h.clientResource),dataType:"json",type:"POST",data:JSON.stringify({owner:this.user,groupname:e.data.groupname,desc:e.data.desc,members:e.data.members,public:e.data.public,approval:e.data.approval,allowinvites:e.data.allowinvites,invite_need_confirm:e.data.inviteNeedConfirm,maxusers:e.data.maxusers,custom:e.data.ext}),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:function(t){e.success&&e.success(t)},error:e.error};return a.kg.debug("Call createGroup:",e),s.hj.call(this,p,c.fI.CREATE_GROUP)}var p=h;function f(e){var t;if("string"!=typeof e.groupId||""===e.groupId)throw Error("Invalid parameter");if(!o.XZ.call(this)){var n=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var l=this.context,d=l.orgName,u=l.appName,h=l.accessToken,p=l.jid,f={entities:[(t={},t["notification_ignore_"+e.groupId]=!0,t)]},m={type:"PUT",url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/users/").concat(this.user,"?resource=").concat(p.clientResource),data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call blockGroupMessages",e),s.hj.call(this,m,c.fI.BLOCK_GROUP)}var m=f;function g(e){if("number"!=typeof e.limit)throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h={limit:e.limit,cursor:e.cursor};e.cursor||delete h.cursor;var p={url:this.apiUrl+"/"+l+"/"+d+"/publicchatgroups",type:"GET",dataType:"json",data:h,headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call listGroups",e),s.hj.call(this,p,c.fI.LIST_GROUP)}var _=g;function v(e){if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h={url:this.apiUrl+"/"+l+"/"+d+"/users/"+this.user+"/joined_chatgroups",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return a.kg.debug("Call getJoinedGroups",e),s.hj.call(this,h,c.fI.GET_USER_GROUP)}function y(e){if("number"!=typeof e.pageNum||"number"!=typeof e.pageSize)throw Error('Invalid parameter: "pageNum or pageSize"');if(e.pageNum<0||e.pageSize<0)throw Error('"pageNum" should >= 0 and "pageSize" should >= 0');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.needAffiliations||e.needRole?"/chatgroups/user/".concat(this.user,"?pagenum=").concat(e.pageNum,"&pagesize=").concat(e.pageSize,"&needAffiliations=").concat(e.needAffiliations,"&needRole=").concat(e.needRole):"/users/".concat(this.user,"/joined_chatgroups?pagenum=").concat(e.pageNum,"&pagesize=").concat(e.pageSize),p={url:this.apiUrl+"/"+l+"/"+d+h,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return a.kg.debug("Call getGroup",e),s.hj.call(this,p,c.fI.GET_USER_GROUP).then((function(e){var t=e.uri,n=e.entities,r=[];return t.includes("joined_chatgroups")||(n.forEach((function(e){var t={affiliationsCount:e.affiliations_count,groupName:e.name,groupId:e.groupId,role:e.permission,disabled:e.disabled,approval:e.membersonly,allowInvites:e.allowinvites,description:e.description,maxUsers:e.maxusers,public:e.public};r.push(t)})),e.entities=r),e}))}function E(e){if("string"!=typeof e.groupId||"string"!=typeof e.newOwner)throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={newowner:e.newOwner},l=this.context,d=l.orgName,u=l.appName,h=l.accessToken,p=l.jid,f={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/chatgroups/").concat(e.groupId,"?resource=").concat(p.clientResource),type:"PUT",dataType:"json",headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},data:JSON.stringify(n),success:e.success,error:e.error};return a.kg.debug("Call changeOwner",e),s.hj.call(this,f,c.fI.CHANGE_OWNER)}var b=E;function T(e){if("string"!=typeof e.groupId&&!Array.isArray(e.groupId))throw Error('Invalid parameter: "groupId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+e.groupId+"?joined_time=true",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupInfo",e),s.hj.call(this,h,c.fI.GET_GROUP_INFO)}function S(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error("Invalid parameter");if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={groupname:e.groupName,description:e.description,custom:e.ext},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"?resource=").concat(h.clientResource),type:"PUT",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call modifyGroup",e),s.hj.call(this,m,c.fI.MODIFY_GROUP)}function w(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(isNaN(e.pageNum)||e.pageNum<=0)throw Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw Error('The parameter "pageSize" should be a positive number');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={pagenum:e.pageNum,pagesize:e.pageSize},l=this.context,d=l.orgName,u=l.appName,h=l.accessToken,p={url:this.apiUrl+"/"+d+"/"+u+"/chatgroups/"+e.groupId+"/users",dataType:"json",type:"GET",data:n,headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call listGroupMember",e),s.hj.call(this,p,c.fI.LIST_GROUP_MEMBER)}var C=w;function R(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.groupId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+h+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupAdmin",e),s.hj.call(this,p,c.fI.GET_GROUP_ADMIN)}function I(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={newadmin:e.username},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/admin?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setGroupAdmin",e),s.hj.call(this,m,c.fI.SET_GROUP_ADMIN)}var N=I;function O(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/admin/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeAdmin",e),s.hj.call(this,m,c.fI.REMOVE_GROUP_ADMIN)}var A=O;function k(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"?version=v3&resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call destroyGroup",e),s.hj.call(this,f,c.fI.DISSOLVE_GROUP)}var x=k;function P(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/quit?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call quitGroup",e),s.hj.call(this,f,c.fI.QUIT_GROUP)}var D=P;function L(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=e.groupId,l={usernames:e.users},d=this.context,u=d.orgName,h=d.appName,p=d.accessToken,f=d.jid,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(h,"/chatgroups/").concat(n,"/invite?resource=").concat(f.clientResource),type:"POST",data:JSON.stringify(l),dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call inviteUsersToGroup",e),s.hj.call(this,m,c.fI.INVITE_TO_GROUP)}var M=L;function j(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(e.groupId,"/apply?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify({message:e.message||""}),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call joinGroup",e),s.hj.call(this,p,c.fI.JOIN_GROUP)}function U(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.applicant||""===e.applicant)throw Error('Invalid parameter: "applicant"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={applicant:e.applicant,verifyResult:!0,reason:"no clue"},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/apply_verify?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call agreeJoinGroup",e),s.hj.call(this,m,c.fI.AGREE_JOIN_GROUP)}var F=U;function B(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.applicant||""===e.applicant)throw Error('Invalid parameter: "applicant"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={applicant:e.applicant,verifyResult:!1,reason:e.reason||""},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/apply_verify?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call rejectGroupJoinRequest",e),s.hj.call(this,m,c.fI.REJECT_JOIN_GROUP)}var V=B;function G(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.invitee||""===e.invitee)throw Error('Invalid parameter: "invitee"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={invitee:e.invitee,verifyResult:!0},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/invite_verify?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call acceptGroupInvite",e),s.hj.call(this,m,c.fI.AGREE_INVITE_GROUP)}var H=G;function W(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.invitee||""===e.invitee)throw Error('Invalid parameter: "invitee"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={invitee:e.invitee,verifyResult:!1},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/invite_verify?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call rejectGroupInvite",e),s.hj.call(this,m,c.fI.REJECT_INVITE_GROUP)}var z=W;function q(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=e.groupId,l=e.username,d=this.context,u=d.orgName,h=d.appName,p=d.accessToken,f=d.jid,m={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(h,"/chatgroups/").concat(n,"/users/").concat(l,"?resource=").concat(f.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeGroupMember",e),s.hj.call(this,m,c.fI.REMOVE_GROUP_MEMBER)}var K=q;function Y(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.users.join(","),m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/users/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeGroupMembers",e),s.hj.call(this,m,c.fI.MULTI_REMOVE_GROUP_MEMBER)}var J=Y;function X(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!(Array.isArray(e.username)||"string"==typeof e.username&&""!==e.username))throw Error('Invalid parameter: "username"');if("number"!=typeof e.muteDuration)throw Error('Invalid parameter: "muteDuration"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={usernames:"string"==typeof e.username?[e.username]:e.username,mute_duration:e.muteDuration},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/mute?resource=").concat(h.clientResource),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},data:JSON.stringify(f),success:e.success,error:e.error};return a.kg.debug("Call muteGroupMember",e),s.hj.call(this,m,c.fI.MUTE_GROUP_MEMBER)}var Z=X;function Q(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!(Array.isArray(e.username)||"string"==typeof e.username&&""!==e.username))throw Error('Invalid parameter: "username"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/mute/").concat(f,"?resource=").concat(h.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unmuteGroupMember",e),s.hj.call(this,m,c.fI.UNMUTE_GROUP_MEMBER)}var $=Q;function ee(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.groupId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+h+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupMuteList",e),s.hj.call(this,p,c.fI.GET_GROUP_MUTE_LIST)}var te=ee,ne=ee;function re(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/blocks/users/").concat(f,"?resource=").concat(h.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call blockGroupMember",e),s.hj.call(this,m,c.fI.BLOCK_GROUP_MEMBER)}var ie=re;function se(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={usernames:e.usernames},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/blocks/users?resource=").concat(h.clientResource),data:JSON.stringify(f),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call blockGroupMembers",e),s.hj.call(this,m,c.fI.BLOCK_GROUP_MEMBERS)}var oe=se;function ae(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.username,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/blocks/users/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unblockGroupMember",e),s.hj.call(this,m,c.fI.UNBLOCK_GROUP_MEMBER)}var ce=ae;function le(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.usernames.join(","),m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/blocks/users/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call unblockGroupMembers",e),s.hj.call(this,m,c.fI.UNBLOCK_GROUP_MEMBERS)}var de=le;function ue(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.groupId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+h+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupBlacklist",e),s.hj.call(this,p,c.fI.GET_GROUP_BLACK_LIST)}var he=ue,pe=ue;function fe(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/ban?resource=").concat(h.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call disableSendGroupMsg",e),s.hj.call(this,f,c.fI.DISABLED_SEND_GROUP_MSG)}function me(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/ban?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call enableSendGroupMsg",e),s.hj.call(this,f,c.fI.ENABLE_SEND_GROUP_MSG)}function ge(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={usernames:e.users},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/white/users?resource=").concat(h.clientResource),type:"POST",data:JSON.stringify(f),dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call addUsersToGroupWhitelist",e),s.hj.call(this,m,c.fI.ADD_USERS_TO_GROUP_WHITE)}var _e=ge;function ve(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/white/users/").concat(e.userName,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call removeGroupAllowlistMember",e),s.hj.call(this,f,c.fI.REMOVE_GROUP_WHITE_MEMBER)}var ye=ve,Ee=ve;function be(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.groupId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+h+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupAllowlist",e),s.hj.call(this,p,c.fI.GET_GROUP_WHITE_LIST)}var Te=be;function Se(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.groupId,p={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+h+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call isInGroupAllowlist",e),s.hj.call(this,p,c.fI.IS_IN_GROUP_WHITE_LIST)}var we=Se,Ce=Se;function Re(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "chatRoomId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,d=n.accessToken,u=n.userId,h={url:this.apiUrl+"/"+c+"/"+l+"/sdk/group/"+e.groupId+"/mute/"+u,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d}};return a.kg.debug("Call isInGroupMutelist",e),s.hj.call(this,h).then((function(e){return e.data}))}function Ie(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.msgId||""===e.msgId)throw Error('Invalid parameter: "msgId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h={url:this.apiUrl+"/"+l+"/"+d+"/chatgroups/"+e.groupId+"/acks/"+e.msgId,dataType:"json",type:"GET",data:{limit:500,key:void 0},headers:{Authorization:"Bearer "+u},success:e.success,error:e.error};return a.kg.debug("Call getGroupMsgReadUser",e),s.hj.call(this,h,c.fI.GET_GROUP_MSG_READ_USER)}function Ne(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.groupId,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(h,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call fetchGroupAnnouncement",e),s.hj.call(this,p,c.fI.GET_GROUP_ANN)}function Oe(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.announcement)throw Error('Invalid parameter: "announcement"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f={announcement:e.announcement},m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/announcement?resource=").concat(h.clientResource),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call updateGroupAnnouncement",e),s.hj.call(this,m,c.fI.UPDATE_GROUP_ANN)}function Ae(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("object"!==l(e.file))throw Error('Invalid parameter: "file"');if(o.XZ.call(this)){var t=this.context,n=t.orgName,r=t.appName,i=t.accessToken,d=t.jid,u=e.groupId;s.cT.call(this,{uploadUrl:"".concat(this.apiUrl,"/").concat(n,"/").concat(r,"/chatgroups/").concat(u,"/share_files?resource=").concat(d.clientResource),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:i,apiUrl:this.apiUrl,file:e.file,appKey:this.context.appKey},c.fI.UPLOAD_GROUP_FILE),a.kg.debug("Call uploadGroupSharedFile",e)}}function ke(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.fileId||""===e.fileId)throw Error('Invalid parameter: "file"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=n.jid,p=e.groupId,f=e.fileId,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(p,"/share_files/").concat(f,"?resource=").concat(h.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call deleteGroupSharedFile",e),s.hj.call(this,m,c.fI.DELETE_GROUP_FILE)}function xe(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,l=n.orgName,d=n.appName,u=n.accessToken,h=e.pageNum||1,p=e.pageSize||10,f=e.groupId,m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/chatgroups/").concat(f,"/share_files?pagenum=").concat(h,"&pagesize=").concat(p),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getGroupSharedFilelist",e),s.hj.call(this,m,c.fI.GET_GROUP_FILE_LIST)}var Pe=xe;function De(e){var t=this.context,n=t.orgName,r=t.appName,i=t.accessToken,o=this.apiUrl,l=e.groupId,d=e.fileId;s.LR.call(this,{url:"".concat(o,"/").concat(n,"/").concat(r,"/chatgroups/").concat(l,"/share_files/").concat(d),onFileDownloadComplete:e.onFileDownloadComplete,onFileDownloadError:e.onFileDownloadError,accessToken:i,id:d,secret:e.secret},c.fI.DOWN_GROUP_FILE),a.kg.debug("Call downloadGroupSharedFile",e)}function Le(e){return d(this,void 0,void 0,(function(){var t,n,d,h,p,f,m,g,_,v,y;return u(this,(function(u){switch(u.label){case 0:if(t=e.groupId,n=e.userId,d=e.memberAttributes,"string"!=typeof t||""===t)throw Error('Invalid parameter: "groupId"');if("string"!=typeof n||""===n)throw Error('Invalid parameter: "userId"');if("object"!==l(d))throw Error('Invalid parameter: "memberAttributes"');return o.XZ.call(this)?(p=this.context,f=p.orgName,m=p.appName,g=p.accessToken,_=p.jid,v={metaData:d},y={url:"".concat(this.apiUrl,"/").concat(f,"/").concat(m,"/sdk/metadata/chatgroup/").concat(t,"/user/").concat(n,"?resource=").concat(_.clientResource),type:"PUT",dataType:"json",data:JSON.stringify(v),headers:{Authorization:"Bearer "+g,"Content-Type":"application/json"}},a.kg.debug("Call setGroupMemberAttributes",e),[4,s.hj.call(this,y,c.fI.SET_GROUP_MEMBER_ATTRS)]):(h=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(h)]);case 1:return u.sent(),[2]}}))}))}function Me(e){var t=e.groupId,n=e.userId;return je.call(this,{groupId:t,userIds:[n]}).then((function(e){var t;return{type:e.type,data:null===(t=e.data)||void 0===t?void 0:t[n]}}))}function je(e){var t=e.groupId,n=e.userIds,l=e.keys,d=void 0===l?[]:l;if("string"!=typeof t||""===t)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(n)||(null==n?void 0:n.length)<=0)throw Error('Invalid parameter: "userIds"');if(!Array.isArray(d))throw Error('Invalid parameter: "keys"');if(!o.XZ.call(this)){var u=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(u)}var h=this.context,p=h.orgName,f=h.appName,m=h.accessToken,g={targets:n,properties:d},_={url:"".concat(this.apiUrl,"/").concat(p,"/").concat(f,"/sdk/metadata/chatgroup/").concat(t,"/get"),type:"POST",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+m,"Content-Type":"application/json"}};return a.kg.debug("Call getGroupMembersAttributes",e),s.hj.call(this,_,c.fI.GET_GROUP_MEMBER_ATTR).then((function(e){return{type:e.type,data:(null==e?void 0:e.data)||{}}}))}},7479:function(e,t,n){"use strict";n.r(t),n.d(t,{acceptContactInvite:function(){return G},acceptInvitation:function(){return V},addContact:function(){return U},addReaction:function(){return $},addToBlackList:function(){return z},addUsersToBlacklist:function(){return q},addUsersToBlocklist:function(){return K},declineContactInvite:function(){return W},declineInvitation:function(){return H},deleteContact:function(){return B},deleteConversation:function(){return O},deleteReaction:function(){return ee},deleteSession:function(){return N},fetchHistoryMessages:function(){return L},fetchUserInfoById:function(){return x},getBlacklist:function(){return E},getBlocklist:function(){return b},getChatToken:function(){return D},getContacts:function(){return S},getConversationlist:function(){return I},getHistoryMessages:function(){return j},getReactionDetail:function(){return re},getReactionList:function(){return te},getReactionlist:function(){return ne},getRoster:function(){return T},getServerConversations:function(){return oe},getServerPinnedConversations:function(){return ce},getSessionList:function(){return R},modifyMessage:function(){return Q},pinConversation:function(){return le},recallMessage:function(){return Z},removeFromBlackList:function(){return Y},removeHistoryMessages:function(){return se},removeRoster:function(){return F},removeUserFromBlackList:function(){return J},removeUserFromBlocklist:function(){return X},reportMessage:function(){return ie},updateCurrentUserNick:function(){return P},updateOwnUserInfo:function(){return A},updateUserInfo:function(){return k},uploadPushToken:function(){return C},uploadToken:function(){return w}}),n(9601),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(9554),n(4747),n(2222),n(7941),n(6699),n(3710),n(9714),n(9600),n(5069),n(561),n(9753),n(8309),n(1249);var r=n(3246),i=n(5531),s=n(7252),o=n(4370),a=n(8161),c=n(4968),l=n(4188),d=n.n(l),u=n(7360),h=n(1595),p=n(4363),f=n(7288),m=n(9743),g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},g.apply(this,arguments)},_=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},y={chat:"singleChat",chatroom:"chatRoom",groupchat:"groupChat",singleChat:"singleChat",chatRoom:"chatRoom",groupChat:"groupChat"};function E(e){if(!r.XZ.call(this)){var t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={url:this.apiUrl+"/"+a+"/"+c+"/users/"+this.user+"/blocks/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+l},success:function(t){var n={};t.data.forEach((function(e){n[e]={name:e}})),"function"==typeof(null==e?void 0:e.success)&&e.success(t)},error:function(t){"function"==typeof(null==e?void 0:e.error)&&e.error(t)}};return u.kg.debug("Call getBlocklist"),o.hj.call(this,d,h.fI.GET_BLACK_LIST)}var b=E,T=S;function S(e){var t=this;if(!r.XZ.call(this)){var n=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var a=this.context,c=a.orgName,l=a.appName,d=a.accessToken,p={url:this.apiUrl+"/"+c+"/"+l+"/users/"+this.user+"/contacts/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+d},success:function(n){var r=[];n.data.forEach((function(e){r.push({name:e,subscription:"both",jid:t.context.jid})})),"function"==typeof(null==e?void 0:e.success)&&e.success(r)},error:function(t){"function"==typeof(null==e?void 0:e.error)&&e.error(t)}};return u.kg.debug("Call getContacts"),o.hj.call(this,p,h.fI.GET_CONTACTS)}function w(e){if("string"!=typeof e.deviceId||""===e.deviceId)throw Error('Invalid parameter: "deviceId"');if("string"!=typeof e.deviceToken||""===e.deviceToken)throw Error('Invalid parameter: "deviceToken"');if("string"!=typeof e.notifierName||""===e.notifierName)throw Error('Invalid parameter: "notifierName"');if(!r.XZ.call(this)){var t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/users/").concat(this.user),type:"PUT",data:JSON.stringify({device_id:e.deviceId,device_token:e.deviceToken,notifier_name:e.notifierName}),dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e.success,error:e.error};return u.kg.debug("Call uploadPushToken",e),o.hj.call(this,d,h.fI.UPLOAD_PUSH_TOKEN)}var C=w;function R(e){if(!r.XZ.call(this)){var t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/users/").concat(this.user,"/user_channels"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return u.kg.debug("Call getSessionList"),o.hj.call(this,d,h.fI.GET_SESSION_LIST)}function I(e){if(!r.XZ.call(this)){var t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=!!(e&&"number"==typeof e.pageNum&&"number"==typeof e.pageSize&&e.pageNum>0&&e.pageSize>0),f={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/users/").concat(this.user,"/user_channels").concat(d?"/page":""),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return d&&(f.data={pageNum:e.pageNum,pageSize:e.pageSize}),u.kg.debug("Call getConversationlist"),o.hj.call(this,f,h.fI.GET_SESSION_LIST).then((function(e){return function(e){var t=e.data.channel_infos;return null==t||t.forEach((function(e){e.meta&&"{}"!==JSON.stringify(e.meta)?(e.meta.payload=JSON.parse(e.meta.payload),e.lastMessage=(0,p.w)(e.meta)):e.lastMessage=e.meta,delete e.meta})),e}(e)}))}function N(e){if(e&&"string"!=typeof e.channel)throw Error("Invalid parameter channel: ".concat(e.channel));if(e&&"singleChat"!==e.chatType&&"groupChat"!==e.chatType)throw Error("Invalid parameter chatType: ".concat(e.chatType));if(e&&"boolean"!=typeof e.deleteRoam)throw Error("Invalid parameter deleteRoam: ".concat(e.deleteRoam));if(!r.XZ.call(this)){var t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n,a=this.context,c=a.orgName,l=a.appName,d=a.accessToken,p=a.jid;n="singleChat"===e.chatType?"chat":"groupChat";var f={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/user/").concat(this.user,"/user_channel?resource=").concat(p.clientResource),dataType:"json",type:"DELETE",data:JSON.stringify({channel:e.channel,type:n,delete_roam:e.deleteRoam}),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"},success:e.success,error:e.error};return u.kg.debug("Call deleteSession",e),o.hj.call(this,f,h.fI.DELETE_SESSION)}var O=N;function A(e,t){if(!r.XZ.call(this)){var n=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var a=this.context,c=a.orgName,l=a.appName,d=a.accessToken,p=["nickname","avatarurl","mail","phone","gender","sign","birth","ext"],f={};if("wx"===o.P6.getEnvInfo().platform)if("string"==typeof e&&void 0!==t){if(!p.includes(e))throw new Error("illegal key, only these keys: nickname, avatarurl, mail, phone, gender, sign, birth, ext are allowed");f[e]=t}else{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("illegal params");p.forEach((function(t){p.includes(t)&&void 0!==e[t]&&(f[t]=e[t])}))}else if("string"==typeof e){if(!p.includes(e))throw new Error("illegal key, only these keys: nickname, avatarurl, mail, phone, gender, sign, birth, ext are allowed");f=e+"="+t}else{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("illegal params");var m=[];p.forEach((function(t){if(p.includes(t)&&void 0!==e[t]){var n=encodeURIComponent(t),r=encodeURIComponent(e[t]);m.push(n+"="+r)}})),f=m.join("&")}var g={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/metadata/user/").concat(this.user),type:"PUT",data:f,dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/x-www-form-urlencoded"}};return u.kg.debug("Call updateOwnUserInfo",e),o.hj.call(this,g,h.fI.UPDATE_USER_INFO)}var k=A;function x(e,t){if(!r.XZ.call(this)){var n=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}var a,c=this.context,l=c.orgName,d=c.appName,p=c.accessToken,f=[];if("string"==typeof e)f=[e];else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("illegal params");f=e}a="string"==typeof t?[t]:t&&"[object Array]"===Object.prototype.toString.call(t)?t:["nickname","avatarurl","mail","phone","gender","sign","birth","ext"];var m={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/metadata/user/get"),type:"POST",data:JSON.stringify({targets:f,properties:a}),dataType:"json",headers:{Authorization:"Bearer "+p,"Content-Type":"application/json"}};return u.kg.debug("Call fetchUserInfoById",e),o.hj.call(this,m,h.fI.GET_USER_INFO)}function P(e){if(!r.XZ.call(this)){var t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/users/").concat(this.user),type:"PUT",dataType:"json",data:JSON.stringify({nickname:e}),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return u.kg.debug("Call updateCurrentUserNick",e),o.hj.call(this,d)}function D(e){if("string"!=typeof e||""===e)throw Error('Invalid parameter: "agoraToken"');var t=this.context,n=t.orgName,r=t.appName,i={url:this.apiUrl+"/"+n+"/"+r+"/token",dataType:"json",type:"POST",data:JSON.stringify({grant_type:"agora"}),headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}};return u.kg.debug("Call getChatToken",e),o.hj.call(this,i,h.fI.SDK_INTERNAL)}function L(e){var t=this;return new Promise((function(n,o){if(!e.queue)throw Error('Invalid parameter: "specified"');if(!r.XZ.call(t)){var a=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(a)}(function e(t){var r=this,i=t.count||20;M.call(this,{count:i,isGroup:!!t.isGroup,queue:t.queue,start:t.start,format:t.format,success:function(s){if(s.msgs.length>=i||s.is_last){var o=s.msgs.splice(0,i).reverse();t.success&&t.success(o),n(o)}else e.call(r,g(g({},t),{start:null}))},fail:function(e){o(e),t.fail&&t.fail(e)}})}).call(t,e),u.kg.debug("Call fetchHistoryMessages",e)}))}function M(e){var t=this,n=e.queue,r=this.mr_cache[n]||(this.mr_cache[n]={msgs:[]}),c=this.context.userId,l=e.start||-1,u=e.count||20;if(r.msgs.length>=u||r.is_last)"function"==typeof e.success&&e.success(r);else{r&&r.next_key&&(l=r.next_key),e.start&&(l=e.start);var p={queue:n+(e.isGroup?"@conference.easemob.com":"@easemob.com"),start:l,end:-1},f=this.context,m=f.orgName,g=f.appName,y={url:"".concat(this.apiUrl,"/").concat(m,"/").concat(g,"/users/").concat(c,"/messageroaming"),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"},data:JSON.stringify(p),success:function(n){return _(t,void 0,void 0,(function(){var t,i,s,o,c,l,u=this;return v(this,(function(h){switch(h.label){case 0:if(t=null==n?void 0:n.data,!n.data.msgs)return"function"==typeof e.success&&e.success(r),r.is_last=!0,r.next_key="",[2];i=t.msgs,s=i.length,r.is_last=t.is_last,r.next_key=t.next_key,o=function(t){return _(u,void 0,void 0,(function(){var n,r,i,s,o;return v(this,(function(c){switch(c.label){case 0:for(n=[],t=d().atob(t),r=0,i=t.length;r<i;++r)n.push(t.charCodeAt(r));return s=(s=this.context.root.lookup("easemob.pb.Meta")).decode(n),o={errorCode:0,reason:""},1!==s.ns?[3,2]:[4,a.Z.call(this,s,o,!0,e.format)];case 1:return[2,c.sent()];case 2:return[2]}}))}))},c=0,h.label=1;case 1:return c<s?[4,o(i[c].msg)]:[3,4];case 2:(l=h.sent())&&r.msgs.push(l),h.label=3;case 3:return c++,[3,1];case 4:return"function"==typeof e.success&&e.success(r),[2]}}))}))},error:function(e){if(e.error&&e.error_description){var n=s.Z.create({type:i.E.WEBIM_CONNCTION_AJAX_ERROR,message:"fetch history messages error",data:e});t.onError&&t.onError(n)}}};o.hj.call(this,y,h.fI.GET_HISTORY_MSG).catch((function(t){"function"==typeof e.fail&&e.fail(t)}))}}function j(e){var t=this;return new Promise((function(n,c){var l=e.targetId,h=e.cursor,p=void 0===h?-1:h,f=e.pageSize,m=void 0===f?20:f,g=e.chatType,y=e.searchDirection,E=e.searchOptions,b=void 0===E?{}:E,T=b.msgTypes,S=void 0===T?[]:T,w=b.startTime,C=void 0===w?null:w,R=b.endTime,I=void 0===R?null:R,N=b.from,O=void 0===N?null:N;if("string"!=typeof l||""===l)throw Error('"Invalid parameter": "targetId"');if(O&&"string"!=typeof O)throw Error('"Invalid parameter": "searchOptions.from"');if(S&&!Array.isArray(S))throw Error('"Invalid parameter": "searchOptions.msgTypes"');if(C&&"number"!=typeof C)throw Error('"Invalid parameter": "searchOptions.startTime"');if(I&&"number"!=typeof C)throw Error('"Invalid parameter": "searchOptions.endTime"');if(!r.XZ.call(t)){var A=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return c(A)}var k=t.context,x=k.orgName,P=k.appName,D=k.userId,L="groupChat"===e.chatType?"@conference.easemob.com":"@easemob.com",M={queue:"".concat(l).concat(L),start:p,pull_number:m,is_positive:"down"===y,msgType:S.join(",")||"",end:-1,startTime:C,endTime:I,userId:"singleChat"===g?null:O},j={url:"".concat(t.apiUrl,"/").concat(x,"/").concat(P,"/users/").concat(D,"/messageroaming"),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+t.token,"Content-Type":"application/json"},data:JSON.stringify(M),success:function(r){return _(t,void 0,void 0,(function(){var t,i,s,o,c,l,u,h,p=this;return v(this,(function(f){switch(f.label){case 0:t=null==r?void 0:r.data,i=t.msgs||[],s=function(e){return _(p,void 0,void 0,(function(){var t,n,r,i,s;return v(this,(function(o){switch(o.label){case 0:for(t=[],e=d().atob(e),n=0,r=e.length;n<r;++n)t.push(e.charCodeAt(n));return i=(i=this.context.root.lookup("easemob.pb.Meta")).decode(t),s={errorCode:0,reason:""},1!==i.ns?[3,2]:[4,a.Z.call(this,i,s,!0,!0)];case 1:return[2,o.sent()];case 2:return[2]}}))}))},o=[],c=0,f.label=1;case 1:return c<i.length?[4,s(i[c].msg)]:[3,4];case 2:(l=f.sent())&&o.push(l),f.label=3;case 3:return c++,[3,1];case 4:return t.msgs=o,u={cursor:t.next_key,messages:o,isLast:t.is_last},null===(h=e.success)||void 0===h||h.call(e,u),n(u),[2]}}))}))},error:e.fail};o.hj.call(t,j).catch((function(e){c(e)})),u.kg.debug("Call getHistoryMessages",e)}))}function U(e,t){var n=this;return new Promise((function(r,i){var s={id:n.getUniqueId(),to:e,message:t};c.Z.operatRoster.call(n,s,"add",r,i),u.kg.debug("Call addContact",s)}))}var F=B;function B(e){var t=this;return new Promise((function(n,r){var i={id:t.getUniqueId(),to:e};c.Z.operatRoster.call(t,i,"remove",n,r),u.kg.debug("Call deleteContact",i)}))}function V(e){var t=this;return new Promise((function(n,r){var i={id:t.getUniqueId(),to:e};c.Z.operatRoster.call(t,i,"accept",n,r),u.kg.debug("Call acceptInvitation",i)}))}var G=V;function H(e){var t=this;return new Promise((function(n,r){var i={id:t.getUniqueId(),to:e};c.Z.operatRoster.call(t,i,"decline",n,r),u.kg.debug("Call declineContactInvite",i)}))}var W=H;function z(e){var t=this;return new Promise((function(n,r){c.Z.operatRoster.call(t,{to:e.name},"ban",n,r),u.kg.debug("Call addUsersToBlocklist",e)}))}var q=z,K=z;function Y(e){var t=this;return new Promise((function(n,r){c.Z.operatRoster.call(t,{to:e.name},"allow",n,r),u.kg.debug("Call removeUserFromBlocklist",e)}))}var J=Y,X=Y;function Z(e){var t=this,n=this.getUniqueId(),r={id:n,to:e.to};this._msgHash[n]=g({},r);var i="";void 0!==e.chatType?i=e.chatType:void 0!==e.type&&(i="chat"===e.type?"singleChat":e.type);var s={id:n,type:"recall",chatType:i,ackId:e.mid,to:e.to,isChatThread:e.isChatThread||!1,success:function(n){return _(t,void 0,void 0,(function(){var t,r,s,o,a,c,l,d,u;return v(this,(function(h){switch(h.label){case 0:return h.trys.push([0,5,,6]),"singleChat"!==i&&"groupChat"!==i?[3,4]:[4,null===(s=null===(r=this._localCache)||void 0===r?void 0:r.getInstance())||void 0===s?void 0:s.removeMsgByServerMsgId(e.mid)];case 1:return h.sent(),[4,null===(a=null===(o=this._localCache)||void 0===o?void 0:o.getInstance())||void 0===a?void 0:a.getConversationLastMessage(e.to,i)];case 2:return t=h.sent(),[4,null===(l=null===(c=this._localCache)||void 0===c?void 0:c.getInstance())||void 0===l?void 0:l.updateLocalConversation((0,m.MQ)({conversationId:e.to,conversationType:i}),{lastMessageId:null==t?void 0:t.serverMsgId})];case 3:h.sent(),h.label=4;case 4:return null===(d=null==e?void 0:e.success)||void 0===d||d.call(e,n),[3,6];case 5:return h.sent(),null===(u=null==e?void 0:e.success)||void 0===u||u.call(e,n),[3,6];case 6:return[2]}}))}))},fail:e.fail};return u.kg.debug("Call recallMessage",e),this.mSync.send(s,this)}function Q(e){var t=e||{},n=t.messageId,r=t.modifiedMessage;if(u.kg.debug("Call modifyMessage",n,r),""===n)throw Error('Invalid parameter: "messageId"');if("txt"!==r.type)throw Error('Invalid parameter: "modifiedMessage.type"');return this.mSync.send(g({editMessageId:n},r))}function $(e){return _(this,void 0,void 0,(function(){var t,n,a,c,l,d,u,h,p;return v(this,(function(f){switch(f.label){case 0:if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reaction: ".concat(e.reaction));return r.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=e.reaction,u=e.messageId,h={msgId:u,message:d},p={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/reaction/user/").concat(this.user),type:"POST",data:JSON.stringify(h),dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}},[4,o.hj.call(this,p)]):(t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return f.sent(),[2]}}))}))}function ee(e){return _(this,void 0,void 0,(function(){var t,n,a,c,l,d,u,h;return v(this,(function(p){switch(p.label){case 0:if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reactionId: ".concat(e.reaction));return r.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=e.messageId,u=e.reaction,h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/reaction/user/").concat(this.user,"?msgId=").concat(d,"&message=").concat(u),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}},[4,o.hj.call(this,h)]):(t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return p.sent(),[2]}}))}))}function te(e){if("string"!=typeof e.chatType||!e.chatType)throw Error("Invalid parameter chatType: ".concat(e.chatType));if(!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if(!r.XZ.call(this)){var t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=e.chatType,u=e.messageId,h={msgIdList:"string"==typeof u?[u]:u,msgType:"singleChat"===d?"chat":"groupchat",groupId:e.groupId||null},p={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/reaction/user/").concat(this.user),type:"GET",data:h,dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,p).then((function(e){var t=e.data;return null==t||t.forEach((function(e){null==e||e.reactionList.forEach((function(e){e.isAddedBySelf=e.state,delete e.state,delete e.reactionId}))})),e}))}var ne=te;function re(e){if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reaction: ".concat(e.reaction));if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if(!r.XZ.call(this)){var t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=e.cursor,u=e.pageSize,h={msgId:e.messageId,message:e.reaction,currentPage:d||null,pageSize:u||20},p={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/reaction/user/").concat(this.user,"/detail"),type:"GET",data:h,dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return o.hj.call(this,p).then((function(e){return e.data.isAddedBySelf=e.data.state,delete e.data.state,delete e.data.reactionId,e}))}function ie(e){return _(this,void 0,void 0,(function(){var t,n,a,c,l,d,u,h,p,f,m;return v(this,(function(g){switch(g.label){case 0:if("string"!=typeof e.reportType||!e.reportType)throw Error("Invalid parameter reportType: ".concat(e.reportType));if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.reportReason||!e.reportReason)throw Error("Invalid parameter messageId: ".concat(e.reportReason));return r.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=e.reportType,u=e.reportReason,h=e.messageId,p={username:this.user,reportType:d,reportReason:u},f="".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/user/").concat(this.user,"/moderation/report/message/").concat(h),m={url:f,type:"POST",data:JSON.stringify(p),dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}},[4,o.hj.call(this,m)]):(t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return g.sent(),[2]}}))}))}function se(e){var t;return _(this,void 0,void 0,(function(){var n,a,c,l,d,h,p,f,m;return v(this,(function(g){switch(g.label){case 0:if("string"!=typeof e.targetId||""===e.targetId)throw Error('"Invalid parameter targetId": '+e.targetId);if(!["singleChat","groupChat"].includes(e.chatType))throw Error('"Invalid parameter chatType": '+e.chatType);if(e.beforeTimeStamp&&("number"!=typeof e.beforeTimeStamp||e.beforeTimeStamp<0||(null===(t=e.beforeTimeStamp)||void 0===t?void 0:t.toString().length)>18))throw Error('"Invalid parameter beforeTimeStamp": '+e.beforeTimeStamp);if(e.messageIds&&!(Array.isArray(e.messageIds)&&e.messageIds.length>0&&e.messageIds.length<=20))throw Error('"Invalid parameter messageIds": '+e.messageIds);if(!e.messageIds&&!e.beforeTimeStamp)throw Error("messageIds or beforeTimeStamp field is required.");return r.XZ.call(this)?(a=this.context,c=a.orgName,l=a.appName,d=a.userId,h="singleChat"===e.chatType?"userId":"groupId",p="singleChat"===e.chatType?"chat":"group",f=e.messageIds?"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/sdk/message/roaming/").concat(p,"/user/").concat(d,"?").concat(h,"=").concat(e.targetId,"&msgIdList=").concat(e.messageIds,"&resource=").concat(this.clientResource):"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/sdk/message/roaming/").concat(p,"/user/").concat(d,"/time?").concat(h,"=").concat(e.targetId,"&delTime=").concat(e.beforeTimeStamp,"&&resource=").concat(this.clientResource),m={url:f,dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}},u.kg.debug("Call removeHistoryMessages",e),[4,o.hj.call(this,m)]):(n=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(n)]);case 1:return g.sent(),[2]}}))}))}function oe(e){var t=this;if(!r.XZ.call(this)){var n=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(n)}if((null==e?void 0:e.pageSize)&&"number"!=typeof e.pageSize)throw Error("Invalid parameter pageSize: ".concat(e.pageSize));if((null==e?void 0:e.cursor)&&"string"!=typeof e.cursor)throw Error("Invalid parameter cursor: ".concat(e.cursor));var a=this.context,c=a.orgName,l=a.appName,d=a.accessToken,p={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/sdk/user/").concat(this.user,"/user_channels/list?"),type:"GET",dataType:"json",data:{limit:(null==e?void 0:e.pageSize)||20,cursor:(null==e?void 0:e.cursor)||""},headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};return u.kg.debug("Call getServerConversations",e),new Promise((function(e,n){o.hj.call(t,p,h.fI.GET_SESSION_LIST).then((function(n){return _(t,void 0,void 0,(function(){var t,r=this;return v(this,(function(i){switch(i.label){case 0:return t=ae(n),this._localCache?[4,Promise.all(t.data.conversations.map((function(e){return _(r,void 0,void 0,(function(){var t,n,r=this;return v(this,(function(i){return null===(n=null===(t=this._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.storeMessage(e.lastMessage,f.r.SUCCESS,!0).then((function(){var t,n;null===(n=null===(t=r._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.updateLocalConversation((0,m.MQ)({conversationId:e.conversationId,conversationType:e.conversationType}),{unReadCount:e.unReadCount})})),[2]}))}))})))]:[3,2];case 1:return i.sent(),e(t),[2];case 2:return e(t),[2]}}))}))})).catch((function(e){n(e)}))}))}function ae(e){var t=e.data,n=t.cursor,r=t.channel_infos,i=[];null==r||r.forEach((function(e){var t=null;(null==e?void 0:e.meta)&&"{}"!==JSON.stringify(e.meta)&&(e.meta.payload=JSON.parse(e.meta.payload),"delivery"!==(t=(0,p.w)(e.meta)).type&&"read"!==t.type&&"channel"!==t.type&&(t.chatType=y[t.chatType]));var n={conversationId:e.session_to,conversationType:"chat"===e.session_type?"singleChat":"groupChat",isPinned:e.is_top,pinnedTime:e.is_top?e.update_top_status_time:0,unReadCount:e.unread_num,lastMessage:t};i.push(n)}));var s={conversations:i,cursor:n||""};return{type:e.type,data:s}}function ce(e){if(!r.XZ.call(this)){var t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}if((null==e?void 0:e.pageSize)&&"number"!=typeof e.pageSize)throw Error("Invalid parameter pageSize: ".concat(e.pageSize));if((null==e?void 0:e.cursor)&&"string"!=typeof e.cursor)throw Error("Invalid parameter cursor: ".concat(e.cursor));var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/sdk/user/").concat(this.user,"/user_channels/list?"),type:"GET",dataType:"json",data:{limit:(null==e?void 0:e.pageSize)||20,cursor:(null==e?void 0:e.cursor)||"",is_top:!0},headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return u.kg.debug("Call getServerConversations",e),o.hj.call(this,d,h.fI.GET_SESSION_LIST).then((function(e){return ae(e)}))}function le(e){return _(this,void 0,void 0,(function(){var t,n,a,c,l,d,p,f,m,g,_,y,E,b;return v(this,(function(v){if(!r.XZ.call(this))return t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)];if(n=e.conversationId,a=e.conversationType,c=e.isPinned,l="singleChat"===a?"chat":"groupChat","string"!=typeof n||""===n)throw Error("Invalid parameter conversationId: ".concat(n));if(!["singleChat","groupChat"].includes(a))throw Error("Invalid parameter conversationType: ".concat(a));if("boolean"!=typeof c)throw Error("Invalid parameter isPinned: ".concat(c));return d=this.context,p=d.orgName,f=d.appName,m=d.accessToken,g=d.jid,_={type:l,to:n},y=c?"":"type=".concat(l,"&to=").concat(n,"&"),E="".concat(this.apiUrl,"/").concat(p,"/").concat(f,"/sdk/user/").concat(this.user,"/user_channel/top?").concat(y,"resource=").concat(g.clientResource),b={url:E,type:c?"POST":"DELETE",dataType:"json",headers:{Authorization:"Bearer "+m,"Content-Type":"application/json"}},c&&(b.data=JSON.stringify(_)),u.kg.debug("Call pinConversation",e),[2,o.hj.call(this,b,h.fI.PIN_CONVERSATION).then((function(e){var t=e.type,n=e.data;return{type:t,data:{isPinned:n.is_top||!1,pinnedTime:n.is_top?n.update_top_status_time:0}}}))]}))}))}},3770:function(e,t,n){"use strict";n.r(t),n.d(t,{getPresenceStatus:function(){return m},getSubscribedPresenceList:function(){return p},getSubscribedPresencelist:function(){return f},publishPresence:function(){return d},subscribePresence:function(){return u},unsubscribePresence:function(){return h}}),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(2222),n(9753);var r=n(4370),i=n(3246),s=n(7252),o=n(5531),a=n(7360),c=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};function d(e){return c(this,void 0,void 0,(function(){var t,n,c,d,u,h,p,f,m;return l(this,(function(l){switch(l.label){case 0:if("string"!=typeof e.description)throw Error('Invalid parameter: "description"');return i.XZ.call(this)?(n=this.context,c=n.accessToken,d=n.orgName,u=n.appName,h=n.userId,p=this.context.jid.clientResource,f={ext:e.description},m={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/users/").concat(h,"/presence/").concat(p,"/1"),type:"POST",dataType:"json",data:JSON.stringify(f),headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error},a.kg.debug("Call publishPresence:",e),[4,r.hj.call(this,m)]):(t=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function u(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');if("number"!=typeof e.expiry)throw Error('Invalid parameter: "expiry"');if(!i.XZ.call(this)){var t=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,d=n.userId,u=n.accessToken,h={usernames:e.usernames},p={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/users/").concat(d,"/presence/").concat(e.expiry),type:"POST",dataType:"json",data:JSON.stringify(h),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call subscribePresence:",e),r.hj.call(this,p).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}function h(e){return c(this,void 0,void 0,(function(){var t,n,c,d,u,h,p;return l(this,(function(l){switch(l.label){case 0:if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');return i.XZ.call(this)?(n=this.context,c=n.orgName,d=n.appName,u=n.userId,h=n.accessToken,p={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(d,"/users/").concat(u,"/presence"),type:"DELETE",dataType:"json",data:JSON.stringify(e.usernames),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error},a.kg.debug("Call unsubscribePresence:",e),[4,r.hj.call(this,p)]):(t=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function p(e){if("number"!=typeof e.pageNum||"number"!=typeof e.pageSize)throw Error('Invalid parameter: "pageNum or pageSize"');if(e.pageNum<0||e.pageSize<0)throw Error('"pageNum" should >= 0 and "pageSize" should >= 0');if(!i.XZ.call(this)){var t=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,d=n.userId,u=n.accessToken,h={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/users/").concat(d,"/presence/sublist?pageNum=").concat(e.pageNum,"&pageSize=").concat(e.pageSize),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getSubscribedPresenceList:",e),r.hj.call(this,h).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}var f=p;function m(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');if(!i.XZ.call(this)){var t=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={usernames:e.usernames},c=this.context,l=c.orgName,d=c.appName,u=c.userId,h=c.accessToken,p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/users/").concat(u,"/presence"),type:"POST",dataType:"json",data:JSON.stringify(n),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getPresenceStatus:",e),r.hj.call(this,p).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}},1735:function(e,t,n){"use strict";n.r(t),n.d(t,{clearRemindTypeForConversation:function(){return u},getPushPerformLanguage:function(){return m},getSilentModeForAll:function(){return l},getSilentModeForConversation:function(){return h},getSilentModeForConversations:function(){return p},setPushPerformLanguage:function(){return f},setSilentModeForAll:function(){return c},setSilentModeForConversation:function(){return d}}),n(7941),n(1539),n(8674),n(2222),n(9753),n(9554),n(4747),n(9600);var r=n(4370),i=n(3246),s=n(7252),o=n(5531),a=n(7360);function c(e){if(!(e.options instanceof Object))throw Error('Invalid parameter: "options"');var t=e.options.paramType;if("number"!=typeof t||t<0||t>2)throw Error('Invalid parameter: "options of paramType"');if(0===t){if("string"!=typeof e.options.remindType)throw Error('Invalid parameter: "options of remindType"')}else if(1===t){if("number"!=typeof e.options.duration)throw Error('Invalid parameter: "options of duration"')}else if(2===t){var n=e.options,c=n.startTime,l=n.endTime;if(!(c instanceof Object&&Object.keys(c).length))throw Error('Invalid parameter: "options of startTime"');if(!c.hours||"number"!=typeof c.hours||!c.minutes||"number"!=typeof c.minutes)throw Error('Invalid parameter: "options of startTime of hours or minutes"');if(!(l instanceof Object&&Object.keys(l).length))throw Error('Invalid parameter: "options of endTime"');if(!l.hours||"number"!=typeof l.hours||!l.minutes||"number"!=typeof l.minutes)throw Error('Invalid parameter: "options of endTime of hours or minutes"')}if(!i.XZ.call(this)){var d=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(d)}var u=this.context,h=u.accessToken,p=u.orgName,f=u.appName,m=u.userId,g={};switch(t){case 0:g={type:e.options.remindType};break;case 1:g={ignoreDuration:e.options.duration};break;case 2:var _=e.options;c=_.startTime,l=_.endTime,g={ignoreInterval:"".concat(c.hours,":").concat(c.minutes,"-").concat(l.hours,":").concat(l.minutes)}}var v={url:"".concat(this.apiUrl,"/").concat(p,"/").concat(f,"/users/").concat(m,"/notification/user/").concat(m),type:"PUT",dataType:"json",data:JSON.stringify(g),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setSilentModeForAll:",e),r.hj.call(this,v)}function l(e){if(!i.XZ.call(this)){var t=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,d=n.appName,u=n.userId,h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/users/").concat(u,"/notification/user/").concat(u),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:null==e?void 0:e.success,error:null==e?void 0:e.error};return a.kg.debug("Call getSilentModeForAll:",e),r.hj.call(this,h)}function d(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!(e.options instanceof Object))throw Error('Invalid parameter: "options"');var t=e.options.paramType;if("number"!=typeof t||t<0||t>2)throw Error('Invalid parameter: "options of paramType"');if(0===t){if("string"!=typeof e.options.remindType)throw Error('Invalid parameter: "options of remindType"')}else if(1===t){if("number"!=typeof e.options.duration)throw Error('Invalid parameter: "options of duration"')}else if(2===t){var n=e.options,c=n.startTime,l=n.endTime;if(!(c instanceof Object&&Object.keys(c).length))throw Error('Invalid parameter: "options of startTime"');if(!c.hours||"number"!=typeof c.hours||!c.minutes||"number"!=typeof c.minutes)throw Error('Invalid parameter: "options of startTime of hours or minutes"');if(!(l instanceof Object&&Object.keys(l).length))throw Error('Invalid parameter: "options of endTime"');if(!l.hours||"number"!=typeof l.hours||!l.minutes||"number"!=typeof l.minutes)throw Error('Invalid parameter: "options of endTime of hours or minutes"')}if(!i.XZ.call(this)){var d=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(d)}var u=this.context,h=u.accessToken,p=u.orgName,f=u.appName,m=u.userId,g="chatgroup",_={};switch(t){case 0:_={type:e.options.remindType};break;case 1:_={ignoreDuration:e.options.duration};break;case 2:var v=e.options;c=v.startTime,l=v.endTime,_={ignoreInterval:"".concat(c.hours,":").concat(c.minutes,"-").concat(l.hours,":").concat(l.minutes)}}"singleChat"===e.type&&(g="user");var y={url:"".concat(this.apiUrl,"/").concat(p,"/").concat(f,"/users/").concat(m,"/notification/").concat(g,"/").concat(e.conversationId),type:"PUT",dataType:"json",data:JSON.stringify(_),headers:{Authorization:"Bearer "+h,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setSilentModeForConversation:",e),r.hj.call(this,y)}function u(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!i.XZ.call(this)){var t=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,d=n.appName,u=n.userId,h="chatgroup";"singleChat"===e.type&&(h="user");var p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/users/").concat(u,"/notification/").concat(h,"/").concat(e.conversationId),type:"PUT",dataType:"json",data:JSON.stringify({type:"DEFAULT"}),headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call clearRemindTypeForConversation:",e),r.hj.call(this,p)}function h(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!i.XZ.call(this)){var t=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,d=n.appName,u=n.userId,h="chatgroup";"singleChat"===e.type&&(h="user");var p={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/users/").concat(u,"/notification/").concat(h,"/").concat(e.conversationId),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getSilentModeForConversation:",e),r.hj.call(this,p)}function p(e){if(!Array.isArray(e.conversationList))throw Error('Invalid parameter: "conversationList"');if(!i.XZ.call(this)){var t=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,d=n.appName,u=n.userId,h=[],p=[];e.conversationList.forEach((function(e){"singleChat"===e.type?h.push(e.id):p.push(e.id)}));var f=h.length?h.join(","):"",m=p.length?p.join(","):"",g={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/users/").concat(u,"/notification?user=").concat(f,"&group=").concat(m),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call getSilentModeForConversations:",e),r.hj.call(this,g)}function f(e){if("string"!=typeof e.language||!e.language)throw Error('Invalid parameter: "language"');if(!i.XZ.call(this)){var t=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n={translationLanguage:e.language},c=this.context,l=c.accessToken,d=c.orgName,u=c.appName,h=c.userId,p={url:"".concat(this.apiUrl,"/").concat(d,"/").concat(u,"/users/").concat(h,"/notification/language"),type:"PUT",dataType:"json",data:JSON.stringify(n),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},success:e.success,error:e.error};return a.kg.debug("Call setPushPerformLanguage:",e),r.hj.call(this,p)}function m(e){if(!i.XZ.call(this)){var t=s.Z.create({type:o.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.accessToken,l=n.orgName,d=n.appName,u=n.userId,h={url:"".concat(this.apiUrl,"/").concat(l,"/").concat(d,"/users/").concat(u,"/notification/language"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},success:null==e?void 0:e.success,error:null==e?void 0:e.error};return a.kg.debug("Call getPushPerformLanguage:",e),r.hj.call(this,h)}},7384:function(e,t,n){"use strict";n.r(t),n.d(t,{changeChatThreadName:function(){return f},createChatThread:function(){return d},destroyChatThread:function(){return p},getChatThreadDetail:function(){return E},getChatThreadLastMessage:function(){return y},getChatThreadMembers:function(){return m},getChatThreads:function(){return v},getJoinedChatThreads:function(){return _},joinChatThread:function(){return u},leaveChatThread:function(){return h},removeChatThreadMember:function(){return g}}),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(8309),n(2222),n(9554),n(4747),n(9753);var r=n(5531),i=n(7252),s=n(4370),o=n(3246),a=n(4363),c=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};function d(e){if("string"!=typeof e.name||""===e.name)throw Error("Invalid parameter name: ".concat(e.name));if("string"!=typeof e.messageId||""===e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.parentId||""===e.parentId)throw Error("Invalid parameter parentId: ".concat(e.parentId));if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=n.jid,u={name:e.name,msg_id:e.messageId,group_id:e.parentId,owner:this.user},h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread?resource=").concat(d.clientResource),type:"POST",dataType:"json",data:JSON.stringify(u),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return s.hj.call(this,h).then((function(e){var t=e.data.thread_id;return e.data={chatThreadId:t},e}))}function u(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=n.jid,u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"/user/").concat(this.user,"/join?resource=").concat(d.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return s.hj.call(this,u).then((function(e){var t=e.data.detail;return t.messageId=t.msgId,t.parentId=t.groupId,delete t.msgId,delete t.groupId,e}))}function h(e){return c(this,void 0,void 0,(function(){var t,n,a,c,d,u,h;return l(this,(function(l){switch(l.label){case 0:if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));return o.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,d=n.accessToken,u=n.jid,h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"/user/").concat(this.user,"/quit?resource=").concat(u.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}},[4,s.hj.call(this,h)]):(t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function p(e){return c(this,void 0,void 0,(function(){var t,n,a,c,d,u,h;return l(this,(function(l){switch(l.label){case 0:if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));return o.XZ.call(this)?(n=this.context,a=n.orgName,c=n.appName,d=n.accessToken,u=n.jid,h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"?resource=").concat(u.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}},[4,s.hj.call(this,h)]):(t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function f(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if("string"!=typeof e.name||""===e.name)throw Error("Invalid parameter name: ".concat(e.name));if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=n.jid,u={name:e.name},h={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"?resource=").concat(d.clientResource),type:"PUT",dataType:"json",data:JSON.stringify(u),headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return s.hj.call(this,h)}function m(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={limit:e.pageSize||20,cursor:e.cursor||""},u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"/users"),type:"GET",dataType:"json",data:d,headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return s.hj.call(this,u)}function g(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if("string"!=typeof e.username||""===e.username)throw Error("Invalid parameter username: ".concat(e.username));if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d=n.jid,u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId,"/users/").concat(e.username,"?resource=").concat(d.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return s.hj.call(this,u)}function _(e){if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={limit:e.pageSize||20,cursor:e.cursor||""},u={url:e.parentId?"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/threads/chatgroups/").concat(e.parentId,"/user/").concat(this.user):"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/threads/user/").concat(this.user),type:"GET",dataType:"json",data:d,headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return s.hj.call(this,u).then((function(e){var t=e.entities;return null==t||t.forEach((function(e){e.parentId=e.groupId,e.messageId=e.msgId,delete e.groupId,delete e.msgId})),e}))}function v(e){if("string"!=typeof e.parentId||""===e.parentId)throw Error("Invalid parameter parentId: ".concat(e.parentId));if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={cursor:e.cursor||"",limit:e.pageSize||20},u={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/threads/chatgroups/").concat(e.parentId),type:"GET",dataType:"json",data:d,headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return s.hj.call(this,u).then((function(e){var t=e.entities;return null==t||t.forEach((function(e){e.parentId=e.groupId,e.messageId=e.msgId,delete e.groupId,delete e.msgId})),e}))}function y(e){if(!Array.isArray(e.chatThreadIds))throw Error("Invalid parameter chatThreadIds: ".concat(e.chatThreadIds));if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,d=n.accessToken,u={threadIds:e.chatThreadIds},h={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/thread/message"),type:"POST",dataType:"json",data:JSON.stringify(u),headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};return s.hj.call(this,h).then((function(e){return function(e){var t=e.entities;return null==t||t.forEach((function(e){e.chatThreadId=e.thread_id,e.last_message&&"{}"!==JSON.stringify(e.last_message)?e.lastMessage=(0,a.w)(e.last_message):e.lastMessage=e.last_message,delete e.thread_id,delete e.last_message})),e}(e)}))}function E(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!o.XZ.call(this)){var t=i.Z.create({type:r.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,a=n.orgName,c=n.appName,l=n.accessToken,d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(c,"/thread/").concat(e.chatThreadId),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};return s.hj.call(this,d).then((function(e){return e.data.affiliationsCount=e.data.affiliations_count,e.data.messageId=e.data.msgId,e.data.parentId=e.data.groupId,delete e.data.affiliations_count,delete e.data.msgId,delete e.data.groupId,e}))}},70:function(e,t,n){"use strict";n.r(t),n.d(t,{getSupportedLanguages:function(){return c},translateMessage:function(){return l}}),n(1539),n(8674),n(2222),n(9753);var r=n(3246),i=n(5531),s=n(7252),o=n(7360),a=n(4370);function c(){if(!r.XZ.call(this)){var e=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(e)}var t=this.context,n=t.orgName,c=t.appName,l=t.accessToken,d={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(c,"/users/").concat(this.user,"/translate/support/language"),dataType:"json",type:"GET",headers:{Authorization:"Bearer "+l}};return o.kg.debug("Call getSupportedLanguages"),a.hj.call(this,d)}function l(e){if("string"!=typeof e.text||""===e.text)throw Error('Invalid parameter: "text"');if(!Array.isArray(e.languages))throw Error('Invalid parameter: "language"');if(!r.XZ.call(this)){var t=s.Z.create({type:i.E.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var n=this.context,c=n.orgName,l=n.appName,d=n.accessToken,u="".concat(this.apiUrl,"/").concat(c,"/").concat(l,"/users/").concat(this.user,"/translate"),h={text:e.text,to:e.languages},p={url:u,dataType:"json",type:"POST",data:JSON.stringify(h),headers:{Authorization:"Bearer "+d}};return o.kg.debug("Call translateMessage"),a.hj.call(this,p)}},3246:function(e,t,n){"use strict";n.d(t,{H7:function(){return l},XZ:function(){return a},_W:function(){return c}}),n(7941),n(9554),n(1539),n(4747),n(6699),n(2023);var r=n(5531),i=n(7252);function s(){var e=this.context.appName,t=this.context.orgName;return!(!e||!t)||(this.onError&&this.onError({type:r.E.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"}),!1)}function o(){var e;if(!this.context.accessToken){var t=i.Z.create({type:r.E.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"});return this.onError&&this.onError(t),null===(e=this.eventHandler)||void 0===e||e.dispatch("onError",t),!1}return!0}function a(){return o.call(this)&&s.call(this)}function c(e){var t=e.data,n=e.type;return{data:{status:Object.keys(t.errorKeys).length>0?"fail":"success",errorKeys:t.errorKeys,successKeys:t.successKeys},type:n}}function l(e){var t=e.data,n=void 0;return Object.keys(t.errorKeys).length>0&&Object.keys(t.errorKeys).forEach((function(e){var s=t.errorKeys[e];n=s.includes("is not part of you")?i.Z.create({type:r.E.NO_PERMISSION,message:s}):s.includes("size of metadata for this single chatroom exceeds the user defined limit")||s.includes("total size of chatroom metadata for this app exceeds the user defined limit")||s.includes("is exceeding maximum limit")?i.Z.create({type:r.E.MAX_LIMIT,message:s}):s.includes("is not Legal")?i.Z.create({type:r.E.REQUEST_PARAMETER_ERROR,message:s}):s.includes("Failed to update userMetadata. Concurrent updates not allowed")?i.Z.create({type:r.E.OPERATION_NOT_ALLOWED,message:s}):i.Z.create({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,message:s})})),n}},2071:function(e,t,n){"use strict";n.d(t,{$x:function(){return a},F3:function(){return c},Nl:function(){return i},TJ:function(){return s},Tp:function(){return u},Wc:function(){return r},el:function(){return o},iB:function(){return l},yK:function(){return d}}),n(6992),n(1532),n(1539),n(8783),n(3948);var r=7,i=new Map,s=new Map,o="im",a="32f24ab2ddb74f508aa9286c356cec84",c=1e3,l={INIT:9674,API:9675},d="direct",u=-1},1595:function(e,t,n){"use strict";var r,i,s,o,a,c;n.d(t,{C8:function(){return r},aC:function(){return c},c:function(){return s},dd:function(){return a},fI:function(){return i},td:function(){return o}}),function(e){e[e.UNKNOWOPERATION=-1]="UNKNOWOPERATION",e[e.REST_GET_SESSION_LIST=1]="REST_GET_SESSION_LIST",e[e.REST_DEL_SESSION=2]="REST_DEL_SESSION",e[e.REST_GET_HISTORY_MESSAGE=3]="REST_GET_HISTORY_MESSAGE",e[e.REST_PIN_CONVERSATION=4]="REST_PIN_CONVERSATION",e[e.REST_OPERATE=10]="REST_OPERATE",e[e.MSYNC_SENDMESSAGE=11]="MSYNC_SENDMESSAGE",e[e.MSYNC_RECALLMESSAGE=12]="MSYNC_RECALLMESSAGE",e[e.MSYNC_MODIFYMESSAGE=13]="MSYNC_MODIFYMESSAGE",e[e.MSYNC_OPERATE=20]="MSYNC_OPERATE",e[e.ROSTER_ADD=21]="ROSTER_ADD",e[e.ROSTER_REMOVE=22]="ROSTER_REMOVE",e[e.ROSTER_ACCEPT=23]="ROSTER_ACCEPT",e[e.ROSTER_DECLINE=24]="ROSTER_DECLINE",e[e.ROSTER_BAN=25]="ROSTER_BAN",e[e.ROSTER_ALLOW=26]="ROSTER_ALLOW",e[e.ROSTER_BLACKLIST=27]="ROSTER_BLACKLIST",e[e.ROSTER_CONTACTS=28]="ROSTER_CONTACTS",e[e.ROSTER_OPERATE=30]="ROSTER_OPERATE",e[e.USER_LOGIN=31]="USER_LOGIN",e[e.USER_CREATE=32]="USER_CREATE",e[e.USER_UPDATE_USERINFO=33]="USER_UPDATE_USERINFO",e[e.USER_FETCH_USERINFO=34]="USER_FETCH_USERINFO",e[e.USER_UPDATE_NICK=35]="USER_UPDATE_NICK",e[e.USER_UPLOAD_PUSH_TOKEN=36]="USER_UPLOAD_PUSH_TOKEN",e[e.USER_OPERATE=40]="USER_OPERATE",e[e.GROUP_CREATEGROUP=41]="GROUP_CREATEGROUP",e[e.GROUP_BLOCK_MESSAGE=42]="GROUP_BLOCK_MESSAGE",e[e.GROUP_FETCH_PUBLICGROUPS_WITHCURSOR=43]="GROUP_FETCH_PUBLICGROUPS_WITHCURSOR",e[e.GROUP_FETCH_USERS_GROUP=44]="GROUP_FETCH_USERS_GROUP",e[e.GROUP_CHANGE_OWNER=45]="GROUP_CHANGE_OWNER",e[e.GROUP_FETCH_SPECIFICATION=46]="GROUP_FETCH_SPECIFICATION",e[e.GROUP_CHANGE_GROUPATTRIBUTE=47]="GROUP_CHANGE_GROUPATTRIBUTE",e[e.GROUP_FETCH_MEMEBERS=48]="GROUP_FETCH_MEMEBERS",e[e.GROUP_GET_ADMIN=49]="GROUP_GET_ADMIN",e[e.GROUP_SET_ADMIN=50]="GROUP_SET_ADMIN",e[e.GROUP_REMOVE_ADMIN=51]="GROUP_REMOVE_ADMIN",e[e.GROUP_DESTOTYGROUP=52]="GROUP_DESTOTYGROUP",e[e.GROUP_LEAVEGROUP=53]="GROUP_LEAVEGROUP",e[e.GROUP_INVITE_TO_GROUP=54]="GROUP_INVITE_TO_GROUP",e[e.GROUP_JOIN_PUBLICGROUP=55]="GROUP_JOIN_PUBLICGROUP",e[e.GROUP_ACCEPT_JOINPUBLICGROUPAPPL=56]="GROUP_ACCEPT_JOINPUBLICGROUPAPPL",e[e.GROUP_DECLINE_JOINPUBLICGROUPAPPL=57]="GROUP_DECLINE_JOINPUBLICGROUPAPPL",e[e.GROUP_ACCEPT_INVITATION=58]="GROUP_ACCEPT_INVITATION",e[e.GROUP_DECLINE_INVITATION=59]="GROUP_DECLINE_INVITATION",e[e.GROUP_REMOVE_MEMBER=60]="GROUP_REMOVE_MEMBER",e[e.GROUP_REMOVE_MEMBERS=61]="GROUP_REMOVE_MEMBERS",e[e.GROUP_MUTE_MEMBERS=62]="GROUP_MUTE_MEMBERS",e[e.GROUP_UNMUTE_MEMBERS=63]="GROUP_UNMUTE_MEMBERS",e[e.GROUP_FETCH_MUTES=64]="GROUP_FETCH_MUTES",e[e.GROUP_BLOCK_MEMBER=65]="GROUP_BLOCK_MEMBER",e[e.GROUP_BLOCK_MEMBERS=66]="GROUP_BLOCK_MEMBERS",e[e.GROUP_UNBLOCK_MEMBER=67]="GROUP_UNBLOCK_MEMBER",e[e.GROUP_UNBLOCK_MEMBERS=68]="GROUP_UNBLOCK_MEMBERS",e[e.GROUP_GET_BLOCK_LIST=69]="GROUP_GET_BLOCK_LIST",e[e.GROUP_MUTE_ALLMEMBERS=70]="GROUP_MUTE_ALLMEMBERS",e[e.GROUP_UNMUTE_ALLMEMBERS=71]="GROUP_UNMUTE_ALLMEMBERS",e[e.GROUP_ADD_WHITELIST=72]="GROUP_ADD_WHITELIST",e[e.GROUP_REMOVE_WHITELIST=73]="GROUP_REMOVE_WHITELIST",e[e.GROUP_FETCH_WHITELIST=74]="GROUP_FETCH_WHITELIST",e[e.GROUP_IS_IN_WHITELIST=75]="GROUP_IS_IN_WHITELIST",e[e.GROUP_GET_READ_USERS=76]="GROUP_GET_READ_USERS",e[e.GROUP_FETCH_ANNOUNCEMENT=77]="GROUP_FETCH_ANNOUNCEMENT",e[e.GROUP_UPDATE_ANNOUNCEMENT=78]="GROUP_UPDATE_ANNOUNCEMENT",e[e.GROUP_UPLOAD_SHAREDFILE=79]="GROUP_UPLOAD_SHAREDFILE",e[e.GROUP_DELETE_SHAREDFILE=80]="GROUP_DELETE_SHAREDFILE",e[e.GROUP_FETCH_SHAREDFILE=81]="GROUP_FETCH_SHAREDFILE",e[e.GROUP_DOWNLOAD_SHAREDFILE=82]="GROUP_DOWNLOAD_SHAREDFILE",e[e.GROUP_MEMBER_SET_META_DATA=83]="GROUP_MEMBER_SET_META_DATA",e[e.GROUP_MEMBER_FETCH_META_DATA=84]="GROUP_MEMBER_FETCH_META_DATA",e[e.GROUP_OPERATE=100]="GROUP_OPERATE",e[e.CHATROOM_FETCH_CHATROOMSWITHPAGE=101]="CHATROOM_FETCH_CHATROOMSWITHPAGE",e[e.CHATROOM_CREATECHATROOM=102]="CHATROOM_CREATECHATROOM",e[e.CHATROOM_DESTORYCHATROOM=103]="CHATROOM_DESTORYCHATROOM",e[e.CHATROOM_FETCH_SPECIFICATION=104]="CHATROOM_FETCH_SPECIFICATION",e[e.CHATROOM_CHANGE_ATTRIBUTE=105]="CHATROOM_CHANGE_ATTRIBUTE",e[e.CHATROOM_REMOVE_MEMBER=106]="CHATROOM_REMOVE_MEMBER",e[e.CHATROOM_REMOVE_MEMBERS=107]="CHATROOM_REMOVE_MEMBERS",e[e.CHATROOM_ADD_MEMBERS=108]="CHATROOM_ADD_MEMBERS",e[e.CHATROOM_JOINCAHTROOM=109]="CHATROOM_JOINCAHTROOM",e[e.CHATROOM_LEAVECAHTROOM=110]="CHATROOM_LEAVECAHTROOM",e[e.CHATROOM_FETCH_MEMBERS=111]="CHATROOM_FETCH_MEMBERS",e[e.CHATROOM_GET_ADMIN=112]="CHATROOM_GET_ADMIN",e[e.CHATROOM_SET_ADMIN=113]="CHATROOM_SET_ADMIN",e[e.CHATROOM_REMOVE_ADMIN=114]="CHATROOM_REMOVE_ADMIN",e[e.CHATROOM_MUTE_USER=115]="CHATROOM_MUTE_USER",e[e.CHATROOM_UNMUTE_USER=116]="CHATROOM_UNMUTE_USER",e[e.CHATROOM_FETCH_MUTES=117]="CHATROOM_FETCH_MUTES",e[e.CHATROOM_BLOCK_USER=118]="CHATROOM_BLOCK_USER",e[e.CHATROOM_BLOCK_USERS=119]="CHATROOM_BLOCK_USERS",e[e.CHATROOM_UNBLOCK_USER=120]="CHATROOM_UNBLOCK_USER",e[e.CHATROOM_UNBLOCK_USERS=121]="CHATROOM_UNBLOCK_USERS",e[e.CHATROOM_FETCH_BANS=122]="CHATROOM_FETCH_BANS",e[e.CHATROOM_MUTE_ALLMEMEBERS=123]="CHATROOM_MUTE_ALLMEMEBERS",e[e.CHATROOM_UNMUTE_ALLMEMEBERS=124]="CHATROOM_UNMUTE_ALLMEMEBERS",e[e.CHATROOM_ADD_WHITELIST=125]="CHATROOM_ADD_WHITELIST",e[e.CHATROOM_REMOVE_WHITELIST=126]="CHATROOM_REMOVE_WHITELIST",e[e.CHATROOM_FETCH_WHITELIST=127]="CHATROOM_FETCH_WHITELIST",e[e.CHATROOM_FETCH_MEMBERIN_WHITELIST=128]="CHATROOM_FETCH_MEMBERIN_WHITELIST",e[e.CHATROOM_FETCH_ANNOUNCEMENT=129]="CHATROOM_FETCH_ANNOUNCEMENT",e[e.CHATROOM_UPDATE_ANNOUNCEMENT=130]="CHATROOM_UPDATE_ANNOUNCEMENT",e[e.CHATROOM_REMOVE_SHARE_FILE=131]="CHATROOM_REMOVE_SHARE_FILE",e[e.CHATROOM_GET_SHARE_FILE_LIST=132]="CHATROOM_GET_SHARE_FILE_LIST",e[e.CHATROOM_UPLOAD_FILE=133]="CHATROOM_UPLOAD_FILE",e[e.CHATROOM_SET_META_DATA=134]="CHATROOM_SET_META_DATA",e[e.CHATROOM_DELETE_META_DATA=135]="CHATROOM_DELETE_META_DATA",e[e.CHATROOM_FETCH_META_DATA=136]="CHATROOM_FETCH_META_DATA",e[e.CHATROOM_OPERATE=150]="CHATROOM_OPERATE"}(r||(r={})),function(e){e.SDK_INTERNAL="SDK_INTERNAL",e.LOGIN="USER_LOGIN",e.REGISTER="USER_CREATE",e.GET_CHATROOM_LIST="CHATROOM_FETCH_CHATROOMSWITHPAGE",e.CREATE_CHATROOM="CHATROOM_CREATECHATROOM",e.DESTROY_CHATROOM="CHATROOM_DESTORYCHATROOM",e.GET_CHATROOM_DETAIL="CHATROOM_FETCH_SPECIFICATION",e.MODIFY_CHATROOM="CHATROOM_CHANGE_ATTRIBUTE",e.REMOVE_CHATROOM_MEMBER="CHATROOM_REMOVE_MEMBER",e.MULTI_REMOVE_CHATROOM_MEMBER="CHATROOM_REMOVE_MEMBERS",e.ADD_USERS_TO_CHATROOM="CHATROOM_ADD_MEMBERS",e.JOIN_CHATROOM="CHATROOM_JOINCAHTROOM",e.QUIT_CHATROOM="CHATROOM_LEAVECAHTROOM",e.LIST_CHATROOM_MEMBERS="CHATROOM_FETCH_MEMBERS",e.GET_CHATROOM_ADMIN="CHATROOM_GET_ADMIN",e.SET_CHATROOM_ADMIN="CHATROOM_SET_ADMIN",e.REMOVE_CHATROOM_ADMIN="CHATROOM_REMOVE_ADMIN",e.MUTE_CHATROOM_MEMBER="CHATROOM_MUTE_USER",e.REMOVE_MUTE_CHATROOM_MEMBER="CHATROOM_UNMUTE_USER",e.GET_MUTE_CHATROOM_MEMBERS="CHATROOM_FETCH_MUTES",e.SET_CHATROOM_MEMBER_TO_BLACK="CHATROOM_BLOCK_USER",e.MULTI_SET_CHATROOM_MEMBER_TO_BLACK="CHATROOM_BLOCK_USERS",e.REMOVE_CHATROOM_MEMBER_BLACK="CHATROOM_UNBLOCK_USER",e.MULTI_REMOVE_CHATROOM_MEMBER_BLACK="CHATROOM_UNBLOCK_USERS",e.GET_CHATROOM_BLOCK_MEMBERS="CHATROOM_FETCH_BANS",e.DISABLED_CHATROOM_SEND_MSG="CHATROOM_MUTE_ALLMEMEBERS",e.ENABLE_CHATROOM_SEND_MSG="CHATROOM_UNMUTE_ALLMEMEBERS",e.ADD_CHATROOM_WHITE_USERS="CHATROOM_ADD_WHITELIST",e.REMOVE_CHATROOM_WHITE_USERS="CHATROOM_REMOVE_WHITELIST",e.GET_CHATROOM_WHITE_USERS="CHATROOM_FETCH_WHITELIST",e.CHECK_CHATROOM_WHITE_USER="CHATROOM_FETCH_MEMBERIN_WHITELIST",e.GET_CHATROOM_ANN="CHATROOM_FETCH_ANNOUNCEMENT",e.UPDATE_CHATROOM_ANN="CHATROOM_UPDATE_ANNOUNCEMENT",e.DELETE_CHATROOM_FILE="CHATROOM_REMOVE_SHARE_FILE",e.GET_CHATROOM_FILES="CHATROOM_GET_SHARE_FILE_LIST",e.UPLOAD_CHATROOM_FILE="CHATROOM_UPLOAD_FILE",e.SET_CHATROOM_ATTR="CHATROOM_SET_META_DATA",e.DELETE_CHATROOM_ATTR="CHATROOM_DELETE_META_DATA",e.GET_CHATROOM_ATTR="CHATROOM_FETCH_META_DATA",e.CREATE_GROUP="GROUP_CREATEGROUP",e.BLOCK_GROUP="GROUP_BLOCK_MESSAGE",e.LIST_GROUP="GROUP_FETCH_PUBLICGROUPS_WITHCURSOR",e.GET_USER_GROUP="GROUP_FETCH_USERS_GROUP",e.CHANGE_OWNER="GROUP_CHANGE_OWNER",e.GET_GROUP_INFO="GROUP_FETCH_SPECIFICATION",e.MODIFY_GROUP="GROUP_CHANGE_GROUPATTRIBUTE",e.LIST_GROUP_MEMBER="GROUP_FETCH_MEMEBERS",e.GET_GROUP_ADMIN="GROUP_GET_ADMIN",e.SET_GROUP_ADMIN="GROUP_SET_ADMIN",e.REMOVE_GROUP_ADMIN="GROUP_REMOVE_ADMIN",e.DISSOLVE_GROUP="GROUP_DESTOTYGROUP",e.QUIT_GROUP="GROUP_LEAVEGROUP",e.INVITE_TO_GROUP="GROUP_INVITE_TO_GROUP",e.JOIN_GROUP="GROUP_JOIN_PUBLICGROUP",e.AGREE_JOIN_GROUP="GROUP_ACCEPT_JOINPUBLICGROUPAPPL",e.REJECT_JOIN_GROUP="GROUP_DECLINE_JOINPUBLICGROUPAPPL",e.AGREE_INVITE_GROUP="GROUP_ACCEPT_INVITATION",e.REJECT_INVITE_GROUP="GROUP_DECLINE_INVITATION",e.REMOVE_GROUP_MEMBER="GROUP_REMOVE_MEMBER",e.MULTI_REMOVE_GROUP_MEMBER="GROUP_REMOVE_MEMBERS",e.MUTE_GROUP_MEMBER="GROUP_MUTE_MEMBERS",e.UNMUTE_GROUP_MEMBER="GROUP_UNMUTE_MEMBERS",e.GET_GROUP_MUTE_LIST="GROUP_FETCH_MUTES",e.BLOCK_GROUP_MEMBER="GROUP_BLOCK_MEMBER",e.BLOCK_GROUP_MEMBERS="GROUP_BLOCK_MEMBERS",e.UNBLOCK_GROUP_MEMBER="GROUP_UNBLOCK_MEMBER",e.UNBLOCK_GROUP_MEMBERS="GROUP_UNBLOCK_MEMBERS",e.GET_GROUP_BLACK_LIST="GROUP_GET_BLOCK_LIST",e.DISABLED_SEND_GROUP_MSG="GROUP_MUTE_ALLMEMBERS",e.ENABLE_SEND_GROUP_MSG="GROUP_UNMUTE_ALLMEMBERS",e.ADD_USERS_TO_GROUP_WHITE="GROUP_ADD_WHITELIST",e.REMOVE_GROUP_WHITE_MEMBER="GROUP_REMOVE_WHITELIST",e.GET_GROUP_WHITE_LIST="GROUP_FETCH_WHITELIST",e.IS_IN_GROUP_WHITE_LIST="GROUP_IS_IN_WHITELIST",e.GET_GROUP_MSG_READ_USER="GROUP_GET_READ_USERS",e.GET_GROUP_ANN="GROUP_FETCH_ANNOUNCEMENT",e.UPDATE_GROUP_ANN="GROUP_UPDATE_ANNOUNCEMENT",e.UPLOAD_GROUP_FILE="GROUP_UPLOAD_SHAREDFILE",e.DELETE_GROUP_FILE="GROUP_DELETE_SHAREDFILE",e.GET_GROUP_FILE_LIST="GROUP_FETCH_SHAREDFILE",e.DOWN_GROUP_FILE="GROUP_DOWNLOAD_SHAREDFILE",e.SET_GROUP_MEMBER_ATTRS="GROUP_MEMBER_SET_META_DATA",e.GET_GROUP_MEMBER_ATTR="GROUP_MEMBER_FETCH_META_DATA",e.GET_SESSION_LIST="REST_GET_SESSION_LIST",e.DELETE_SESSION="REST_DEL_SESSION",e.GET_HISTORY_MSG="REST_GET_HISTORY_MESSAGE",e.PIN_CONVERSATION="REST_PIN_CONVERSATION",e.UPDATE_USER_INFO="USER_UPDATE_USERINFO",e.GET_USER_INFO="USER_FETCH_USERINFO",e.UPDATE_USER_NICK="USER_UPDATE_NICK",e.UPLOAD_PUSH_TOKEN="USER_UPLOAD_PUSH_TOKEN",e.GET_BLACK_LIST="ROSTER_BLACKLIST",e.GET_CONTACTS="ROSTER_CONTACTS",e.add="ROSTER_ADD",e.remove="ROSTER_REMOVE",e.accept="ROSTER_ACCEPT",e.decline="ROSTER_DECLINE",e.ban="ROSTER_BAN",e.allow="ROSTER_ALLOW",e.SEND_MSG="MSYNC_SENDMESSAGE",e.UPLOAD_MSG_ATTACH="UPLOAD_MSG_ATTACH",e.SEND_RECALL_MSG="MSYNC_RECALLMESSAGE",e.MODIFY_MESSAGE="MSYNC_MODIFYMESSAGE"}(i||(i={})),function(e){e.GET_DNS="REST_DNSLIST",e.LOGIN_BY_AGORA_TOKEN="LOGIN_BY_AGORA_TOKEN",e.LOGIN_BY_PWD="LOGIN_BY_PWD",e.RESISTER="REGISTER"}(s||(s={})),function(e){e[e["5G"]=7]="5G",e[e["4G"]=7]="4G",e[e["3G"]=7]="3G",e[e["2G"]=7]="2G",e[e["SLOW-2G"]=7]="SLOW-2G",e[e.WIFI=2]="WIFI",e[e.LAN=1]="LAN",e[e.DISCONNECTED=0]="DISCONNECTED",e[e.NONE=0]="NONE",e[e.UNKNOWN=-1]="UNKNOWN",e[e["WEBIM UNABLE TO GET"]=-2]="WEBIM UNABLE TO GET"}(o||(o={})),function(e){e[e.success=200]="success",e[e.failed=500]="failed"}(a||(a={})),function(e){e[e.web=0]="web",e[e.native=1]="native"}(c||(c={}))},9335:function(e,t,n){"use strict";n.d(t,{g:function(){return k},Z:function(){return me}}),n(9601),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(7042),n(2222),n(3710),n(9714),n(5212),n(8309),n(2772),n(9653),n(3843),n(1038),n(2564),n(7941),n(9753),n(8264),n(9575),n(2472),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016),n(6699),n(2023),n(561),n(3161),n(9554),n(4747),n(285),n(1637),n(8145),n(1249),n(4812);var r=n(4188),i=n.n(r),s=n(3720),o=n.n(s),a=n(5531),c=n(8161),l=n(7360),d=["public","members_only","allow_user_invites","invite_need_confirm"],u={name:"name",title:"name",description:"description",public:"public",members_only:"approval",allow_user_invites:"allowInvites",max_users:"maxUsers",invite_need_confirm:"inviteNeedConfirm",custom:"ext",last_modified:"lastModified"};function h(e,t){var n,r,i,s,o,a,c=this,l=this.context,h=l.userId,p=l.jid,f=t.from.name===h&&p.clientResource!==t.from.clientResource;return t.isThread?(i={id:t.mucId.name,name:t.mucName,operation:"",parentId:t.mucParentId.name,operator:t.from.name,userName:t.to.length?t.to[0].name:""},s={chatThreadId:t.mucId.name,chatThreadName:t.mucName,operation:"",parentId:t.mucParentId.name}):(r={type:"",owner:t.from.name,gid:t.mucId.name,from:t.from.name,fromJid:t.from,to:t.to.length?t.to[0].name:"",toJid:t.to,chatroom:t.isChatroom,status:t.status},o={operation:"",id:t.mucId.name,from:t.from.name},t.isChatroom&&(null===(n=null==t?void 0:t.eventInfo)||void 0===n?void 0:n.ext)&&(a=JSON.parse(t.eventInfo.ext))),({45:function(){var e,n,r;o.operation="memberAttributesUpdate";var i=JSON.parse(null===(e=null==t?void 0:t.eventInfo)||void 0===e?void 0:e.ext)||{};o.attributes=i.properties||{},o.userId=i.username||"",f?null===(n=c.eventHandler)||void 0===n||n.dispatch("onMultiDeviceEvent",o):null===(r=c.eventHandler)||void 0===r||r.dispatch("onGroupEvent",o)},44:function(){var e;o.operation="removeChatRoomAttributes",o.attributes=a.result.successKeys,a.result.successKeys.length>0&&(null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",o))},43:function(){var e;o.operation="updateChatRoomAttributes";var t={};a.result.successKeys.forEach((function(e){t[e]=a.properties[e]})),o.attributes=t,a.result.successKeys.length>0&&(null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",o))},42:function(){},41:function(){},40:function(){},39:function(){},38:function(){var e;s.operation="chatThreadNameUpdate",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",s)},37:function(){var e;i.operation="userRemove",null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatThreadChange",i)},36:function(){var e;s.operation="chatThreadLeave",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",s)},35:function(){var e;s.operation="chatThreadJoin",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",s)},34:function(){var e;s.operation="chatThreadDestroy",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",s)},33:function(){var e;s.operation="chatThreadCreate",null===(e=c.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",s)},32:function(){var e,n,i,s;r.type=t.isChatroom?"rmChatRoomMute":"rmGroupMute",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="unmuteAllMembers",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},31:function(){var e,n,i,s;r.type=t.isChatroom?"muteChatRoom":"muteGroup",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="muteAllMembers",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},30:function(){var e,n,i,s;r.type=t.isChatroom?"rmUserFromChatRoomWhiteList":"rmUserFromGroupWhiteList",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="removeAllowlistMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},29:function(){var e,n,i,s;r.type=t.isChatroom?"addUserToChatRoomWhiteList":"addUserToGroupWhiteList",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="addUserToAllowlist",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},28:function(){var e,n,i,s;r.type="deleteFile",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="deleteFile",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},27:function(){var e,n,i,s;r.type="uploadFile",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="uploadFile",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},26:function(){var e,n,i,s;r.type="deleteAnnouncement",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="deleteAnnouncement",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},25:function(){var e,n,i,s;r.type="updateAnnouncement",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="updateAnnouncement",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},24:function(){var e,n,i,s;r.type="removeMute",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="unmuteMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},23:function(){var e,n,i,s;r.type="addMute",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="muteMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},22:function(){var e,n,i,s;r.type="removeAdmin",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="removeAdmin",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},21:function(){var e,n,i,s;r.type="addAdmin",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="setAdmin",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},20:function(){var e,n,i,s;r.type="changeOwner",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="changeOwner",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},19:function(){var e,n,i,s;r.type="direct_joined",r.groupName=t.mucName,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="directJoined",o.name=t.mucName,t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},18:function(){var e,n,i,s;r.type=t.isChatroom?"leaveChatRoom":"leaveGroup",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="memberAbsence",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},17:function(){var e,n,i,s;r.type=t.isChatroom?"memberJoinChatRoomSuccess":"memberJoinPublicGroupSuccess",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="memberPresence",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},16:function(){var e,n;r.type="unblock",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},15:function(){var e,n;r.type="block",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},14:function(){var e,n,i,s,a,l=t.isChatroom;if(!l){var h=JSON.parse((null===(e=null==t?void 0:t.eventInfo)||void 0===e?void 0:e.ext)||"{}",(function(e,t){return"last_modified"===e?Number(t):d.includes(e)?"true"===t||!0===t:t}));o.detail=r.detail={},Object.keys(h).forEach((function(e){var t=u[e];if(t){var n=h[e];o.detail&&(o.detail[t]=n),r.detail&&(r.detail[t]=n)}}))}r.type="update",c.onPresence&&c.onPresence(r),l?null===(n=c.eventHandler)||void 0===n||n.dispatch("onChatroomChange",r):null===(i=c.eventHandler)||void 0===i||i.dispatch("onGroupChange",r),o.operation="updateInfo",l?null===(s=c.eventHandler)||void 0===s||s.dispatch("onChatroomEvent",o):null===(a=c.eventHandler)||void 0===a||a.dispatch("onGroupEvent",o)},13:function(){var e,n,i,s;r.type="allow",r.reason=t.reason,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="unblockMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},12:function(){var e,n;r.type="ban",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},11:function(){var e,n;r.type="getBlackList",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},10:function(){var e,n,i,s;r.type="removedFromGroup",r.kicked=r.to,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="removeMember",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},9:function(){var e,n,i,s;r.type="invite_decline",r.kicked=r.to,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="rejectInvite",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},8:function(){var e,n,i,s;r.type="invite_accept",r.kicked=r.to,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="acceptInvite",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},7:function(){var e,n,i,s;r.type="invite",r.kicked=r.to,r.groupName=t.mucName,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="inviteToJoin",o.name=t.mucName,t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},6:function(){var e,n,i,s;r.type="joinPublicGroupDeclined",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="joinPublicGroupDeclined",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):(o.userId=t.to.length?t.to[0].name:"",null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o))},5:function(){var e,n,i,s;r.type="joinPublicGroupSuccess",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="acceptRequest",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},4:function(){var e,n,i,s;r.type="joinGroupNotifications",r.reason=t.reason,c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="requestToJoin",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},3:function(){var e,n;r.type="leave",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},2:function(){var e,n;r.type="join",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r)},1:function(){var e,n,i,s;r.type="deleteGroupChat",c.onPresence&&c.onPresence(r),t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomChange",r):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupChange",r),o.operation="destroy",t.isChatroom?null===(i=c.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",o):null===(s=c.eventHandler)||void 0===s||s.dispatch("onGroupEvent",o)},0:function(){var e,n;o.operation="create",t.isChatroom?null===(e=c.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",o):null===(n=c.eventHandler)||void 0===n||n.dispatch("onGroupEvent",o)}}[e]||function(){console.error("No match operation ".concat(e))})()}var p=function(e){var t=this.root.lookup("easemob.pb.MUCBody").decode(e.payload),n=t.operation;l.kg.debug("onMucMessage",t),h.call(this,n,t)},f=n(4968),m=n(7252),g=function(e){var t,n,r,i,s,o,c=this.root.lookup("easemob.pb.StatisticsBody").decode(e.payload);switch(c.operation){case 0:this.onStatisticMessage&&this.onStatisticMessage(c),null===(t=this.eventHandler)||void 0===t||t.dispatch("onStatisticMessage",c);break;case 1:o=m.Z.create({type:a.E.WEBIM_CONNCTION_USER_REMOVED,message:"user has been removed"}),this.logOut=!0,this.onError&&this.onError(o),null===(n=this.eventHandler)||void 0===n||n.dispatch("onError",o);break;case 2:o=m.Z.create({type:a.E.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE,message:"the user is already logged on another device"}),this.logOut=!0,this.onError&&this.onError(o),null===(r=this.eventHandler)||void 0===r||r.dispatch("onError",o);break;case 3:o=m.Z.create({type:a.E.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD,message:"the user was kicked by changing password"}),this.logOut=!0,this.onError&&this.onError(o),null===(i=this.eventHandler)||void 0===i||i.dispatch("onError",o);break;case 4:o=m.Z.create({type:a.E.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE,message:"the user was kicked by other device"}),this.logOut=!0,this.onError&&this.onError(o),null===(s=this.eventHandler)||void 0===s||s.dispatch("onError",o);break;default:l.kg.error("handleStatisticsMsg:",c)}},_=(n(9720),n(4370)),v=n(4363);function y(e){var t,n=[],r=[],i=e.data;i&&i.values&&i.values.forEach((function(e){Object.entries(e.status).forEach((function(e){r.push({device:e[0],status:Number(e[1])})})),n.push({userId:e.uid,lastTime:Number(e.last_time),expire:Number(e.expiry),ext:e.ext,statusDetails:r})})),this.onPresenceStatusChange&&this.onPresenceStatusChange(n),null===(t=this.eventHandler)||void 0===t||t.dispatch("onPresenceStatusChange",n)}function E(e){var t=this;e.data.forEach((function(e){var n,r={from:e.from,to:e.to,chatType:"chat"===e.channel_type?"singleChat":"groupChat",messageId:e.messageId,reactions:e.reactions,ts:e.ts};null===(n=t.eventHandler)||void 0===n||n.dispatch("onReactionChange",r)}))}function b(e){var t,n,r,i;if(e.data){var s=e.data,o={id:s.id||"",name:s.name||"",parentId:s.muc_parent_id||"",messageId:s.msg_parent_id||"",timestamp:s.timestamp||0,operator:s.from||"",operation:""};switch(s.operation){case"create":o.operation="create",o.createTimestamp=o.timestamp,o.messageCount=0,null===(t=this.eventHandler)||void 0===t||t.dispatch("onChatThreadChange",o);break;case"update_msg":o.operation="update",o.messageCount=s.message_count,s.last_message&&"{}"!==JSON.stringify(s.last_message)?o.lastMessage=(0,v.w)(s.last_message):"{}"===JSON.stringify(s.last_message)&&(o.lastMessage={}),null===(n=this.eventHandler)||void 0===n||n.dispatch("onChatThreadChange",o);break;case"update":o.operation="update",o.messageCount=s.message_count,null===(r=this.eventHandler)||void 0===r||r.dispatch("onChatThreadChange",o);break;case"delete":o.operation="destroy",null===(i=this.eventHandler)||void 0===i||i.dispatch("onChatThreadChange",o)}}}function T(e){var t,n=e.data;if(n.resource!==this.clientResource){var r={operation:"deleteRoaming",conversationId:n.to,chatType:"chat"===n.chatType?"singleChat":"groupChat",resource:n.resource};null===(t=this.eventHandler)||void 0===t||t.dispatch("onMultiDeviceEvent",r)}}function S(e){var t,n=e.data,r={operation:"del"===n.op?"deleteConversation":"top"===n.op?"pinnedConversation":"unpinnedConversation",conversationId:n.id,conversationType:"chat"===n.type?"singleChat":"groupChat",timestamp:n.ts};this.clientResource!==n.res&&(null===(t=this.eventHandler)||void 0===t||t.dispatch("onMultiDeviceEvent",r))}var w=function(e){var t=_.P6.parseNotify(e.payload);switch(t.type){case"presence":y.call(this,t);break;case"reaction":E.call(this,t);break;case"thread":b.call(this,t);break;case"roaming_delete":T.call(this,t);break;case"conv":S.call(this,t);break;default:l.kg.error("unexpected notify type: ".concat(t.type))}},C=n(7288),R=n(9743),I=1,N=n(2071),O=n(1595);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}var k,x=function(){return x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},x.apply(this,arguments)},P=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},D=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},L=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};!function(e){e[e.NORMAL=0]="NORMAL",e[e.SINGLECHAT=1]="SINGLECHAT",e[e.GROUPCHAT=2]="GROUPCHAT",e[e.CHATROOM=3]="CHATROOM",e[e.READ_ACK=4]="READ_ACK",e[e.DELIVER_ACK=5]="DELIVER_ACK",e[e.RECALL=6]="RECALL",e[e.CHANNEL_ACK=7]="CHANNEL_ACK",e[e.EDIT=8]="EDIT"}(k||(k={}));var M=_.P6.getEnvInfo();function j(){var e="webim",t="",n="",r=[],i=(new Date).valueOf();"webim"===this.deviceId?(n="random_"+i.toString(),e=this.deviceId+"_"+n,t=this.deviceId):e=t=n="webim_"+this.deviceId,this.context.jid&&(this.context.jid.clientResource=e);var s=this.root.lookup("easemob.pb.Provision"),o=s.decode(r);o.compressType=this.compressType,o.encryptType=this.encryptType,o.osType=this.osType,o.version=this.version,o.deviceName=t,o.resource=e,o.deviceUuid=n,o.auth="$t$"+this.token,o.actionVersion="v2.0",o=s.encode(o).finish();var a=this.root.lookup("easemob.pb.MSync"),c=a.decode(r);return c.version=this.version,c.guid=this.context.jid,c.auth="$t$"+this.token,c.command=3,c.deviceId=t,c.serviceId=this.dataReport.getServiceId(),c.encryptType=this.encryptType,c.payload=o,a.encode(c).finish()}function U(e,t){var n=this,r=_.P6.getEnvInfo();if("web"===r.platform||"zfb"===r.platform||"dd"===r.platform){for(var s="",o=0;o<e.length;o++)s+=String.fromCharCode(e[o]);return s=i().btoa(s),"web"===r.platform?s:{data:s,isBuffer:!1,complete:function(){},fail:function(e){"sendSocketMessage:fail taskID not exist"!==e.errMsg&&"SocketTast.send:fail SocketTask.readyState is not OPEN"!==e.errMsg||(l.kg.debug("send message fail and reconnect"),n.reconnecting||n.reconnect()),t&&n._msgHash&&n._msgHash[t]&&n._msgHash[t].fail({id:t})}}}var a=e;return{data:a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength),fail:function(e){"sendSocketMessage:fail taskID not exist"!==e.errMsg&&"SocketTast.send:fail SocketTask.readyState is not OPEN"!==e.errMsg||n.reconnecting||n.reconnect(),t&&n._msgHash&&n._msgHash[t]&&n._msgHash[t].fail({id:t})}}}function F(e,t){switch(e.ns){case 0:g.call(this,e);break;case 1:c.Z.call(this,e,t);break;case 2:p.call(this,e);break;case 3:f.Z.handleRosterMsg.call(this,e);break;case 4:this.registerConfrIQHandler&&this.registerConfrIQHandler(e,t,this);break;case 5:w.call(this,e);break;default:l.kg.error("distributeMeta",e)}}function B(e,t){for(var n=function(n){var i=new(o())(e[n].id.low,e[n].id.high,e[n].id.unsigned).toString();if(r._load_msg_cache.some((function(e){return e.msgId===i})))return"continue";var s=e[n].from.name,a=e[n].to?e[n].to.name:"",c=!!e[n].to&&-1!==e[n].to.domain.indexOf("conference");r._load_msg_cache.length<=r.max_cache_length||r._load_msg_cache.shift(),r._load_msg_cache.push({msgId:i,from:s,to:a,isGroup:c}),F.call(r,e[n],t)},r=this,i=0;i<e.length;i++)n(i)}function V(e){var t=this.root.lookup("easemob.pb.CommUnreadDL");if(t=t.decode(e.payload),"agoraToken"===this.grantType){var n=new(o())(t.timestamp.low,t.timestamp.high,t.timestamp.unsigned).toString();this.compareTokenExpireTime(Number(n),this.expirationTime)}if(0===t.unread.length)X.call(this);else for(var r=0;r<t.unread.length;r++)l.kg.debug("pull unread message",t.unread),W.call(this,t.unread[r].queue);X.call(this)}function G(){var e=[],t=this.root.lookup("easemob.pb.StatisticsBody"),n=t.decode(e);n.operation=0,n=t.encode(n).finish();var r=this.root.lookup("easemob.pb.Meta").decode(e);r.id=(new Date).valueOf(),r.ns=0,r.payload=n;var i=this.root.lookup("easemob.pb.CommSyncUL"),s=i.decode(e);s.meta=r,s=i.encode(s).finish();var o=this.root.lookup("easemob.pb.MSync"),a=o.decode(e);return a.version=this.version,a.encryptType=[0],a.command=0,a.payload=s,o.encode(a).finish()}function H(e){var t=[],n=this.root.lookup("easemob.pb.CommSyncUL"),r=n.decode(t);r.queue=e,r=n.encode(r).finish();var i=this.root.lookup("easemob.pb.MSync"),s=i.decode(t);return s.version=this.version,s.encryptType=this.encryptType,s.command=0,s.payload=r,i.encode(s).finish()}function W(e){l.kg.debug("sendBackqueue");var t=H.call(this,e);fe.call(this,t)}function z(e,t){var n=[],r=this.root.lookup("easemob.pb.CommSyncUL"),i=r.decode(n);i.queue=t,i.key=new(o())(e.low,e.high,e.unsigned).toString(),i=r.encode(i).finish();var s=this.root.lookup("easemob.pb.MSync"),a=s.decode(n);return a.version=this.version,a.encryptType=this.encryptType,a.command=0,a.payload=i,s.encode(a).finish()}function q(){var e;if(this.times=1,this.autoReconnectNumTotal=0,this.onOpened&&this.onOpened(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onConnected"),"agoraToken"===this.grantType){var t=Date.now();this.expiresIn=this.expirationTime-t,this.tokenExpireTimeCountDown(this.expiresIn)}J.call(this),Q.call(this),Z.call(this),X.call(this)}function K(e,t){l.kg.debug("sendLastSession");var n=z.call(this,e,t);fe.call(this,n)}function Y(e){var t,n,r,i,s,o,c=this,d=this.root.lookup("easemob.pb.Provision").decode(e.payload);if(this.context.jid&&(this.context.jid.clientResource=d.resource),this.clientResource=d.resource,0===d.status.errorCode)this.reconnecting=!1,this.logOut=!1,"zfb"!==M.platform&&"dd"!==M.platform||(this.sock.readyState=1),this._localCache?(null===(t=this._localCache)||void 0===t?void 0:t.getInstance())?q.call(this):this._localCache&&new this._localCache({user:this.user,dbName:"cache_".concat(Math.abs((0,R.un)(this.appKey)),"_").concat(this.user),version:I,onInit:function(){return P(c,void 0,void 0,(function(){return D(this,(function(e){return l.kg.debug("localCache init success"),q.call(this),[2]}))}))}}):q.call(this);else{var u=void 0,h=d.status.reason;switch(h){case"Sorry, the app day live count limit":u=m.Z.create({type:a.E.MAX_LIMIT,message:"Sorry, the daily active user limit for this app has been reached"}),null===(n=this.eventHandler)||void 0===n||n.dispatch("onError",u);break;case"Sorry, the app online count limit":u=m.Z.create({type:a.E.MAX_LIMIT,message:"Sorry, the maximum number limit of online users for this app has been reached"}),null===(r=this.eventHandler)||void 0===r||r.dispatch("onError",u);break;case"Sorry, the app month live count limit":u=m.Z.create({type:a.E.MAX_LIMIT,message:"Sorry, the monthly active user limit for this app has been reached"}),null===(i=this.eventHandler)||void 0===i||i.dispatch("onError",u);break;case"Sorry, who are you?":u=m.Z.create({type:a.E.WEBIM_CONNCTION_AUTH_ERROR,message:"Auth failed"}),null===(s=this.eventHandler)||void 0===s||s.dispatch("onError",u);break;default:u=m.Z.create({type:a.E.SERVER_UNKNOWN_ERROR,message:h}),null===(o=this.eventHandler)||void 0===o||o.dispatch("onError",u)}}}function J(){var e,t;if((null===(e=this.unMSyncSendMsgMap)||void 0===e?void 0:e.size)>0){for(var n=Array.from(this.unMSyncSendMsgMap.keys()),r=0;r<n.length;r++){var i=this.unMSyncSendMsgMap.get(n[r]);fe.call(this,i,n[r])}null===(t=this.unMSyncSendMsgMap)||void 0===t||t.clear()}}function X(){var e=G.call(this);fe.call(this,e)}function Z(){var e=ee.call(this);fe.call(this,e)}function Q(){var e=this;$.call(this),this.heartBeatID=setInterval((function(){Z.call(e)}),this.heartBeatWait)}function $(){clearInterval(this.heartBeatID)}function ee(){var e=this.root.lookup("easemob.pb.MSync"),t=e.decode([]);return t.version=this.version,t.encryptType=this.encryptType,t.command=1,e.encode(t).finish()}function te(e,t){return e.some((function(e){return e.name===t.name}))}function ne(e){var t=this,n=this.root.lookup("easemob.pb.CommNotice"),r=n.decode(e.payload),i=te(this._queues,r.queue);l.kg.debug("receive notice",n,this._queues),i||this.clientResource===r.queue.clientResource&&r.queue.name===this.context.userId||(this.qTimer&&clearTimeout(this.qTimer),this.qTimer=setTimeout((function(){var e=r.queue;te(t._queues,e)&&(W.call(t,e),l.kg.debug("\u2b07q:",e))}),1e4),this._queues.push(r.queue),1===this._queues.length&&W.call(this,r.queue))}function re(e){if("string"==typeof e){var t=JSON.parse(e);if(Array.isArray(t)){var n=t[0],r=t[1];this.closeInfo={code:n,reason:r}}}}function ie(e){return P(this,void 0,void 0,(function(){var t,n,r,s,o,a,c,d;return D(this,(function(u){if(t=_.P6.getEnvInfo(),n=this.root.lookup("easemob.pb.MSync"),"miniCore"===this.name){try{e.data instanceof ArrayBuffer||(l.kg.debug("received message: ".concat(e.data)),re.call(this,e.data)),s=new Uint8Array(e.data),r=n.decode(s)}catch(e){throw new Error("decode message fail.")}return[2,r]}if("web"===t.platform||"zfb"===t.platform||"dd"===t.platform){for('[401,"normal closed"]'===e.data&&(l.kg.debug("received message: ".concat(e.data)),re.call(this,e.data)),o=i().atob(e.data),a=[],c=0,d=o.length;c<d;++c)a.push(o.charCodeAt(c));return[2,n.decode(a)]}try{e.data instanceof ArrayBuffer||(l.kg.debug("received message: ".concat(e.data)),re.call(this,e.data)),r=n.decode(e.data)}catch(e){throw new Error("decode message fail.")}return[2,r]}))}))}function se(e){var t=this;e.then((function(e){if(e)switch(e.command){case 0:oe.call(t,e);break;case 1:V.call(t,e);break;case 2:ne.call(t,e);break;case 3:Y.call(t,e);break;default:l.kg.error("unexpected msync command: ".concat(e.command))}else l.kg.error("unexpected msync result: ".concat(e))}))}function oe(e){var t,n,r,i,s,c,l,d,u,h,p,f,g,v,y,E,b,T,S,w,R,I,A,k,L,M,j,U,F,V,G,H,z,q,Y,J,X,Z,Q,$,ee;return P(this,void 0,void 0,(function(){var P,te,ne,re,ie,se,oe,ae,ce,le,de,ue,he,pe,fe,me,ge,_e,ve,ye,Ee,be,Te,Se,we,Ce,Re,Ie,Ne,Oe,Ae,ke,xe=this;return D(this,(function(D){switch(D.label){case 0:if(P=(P=this.root.lookup("easemob.pb.CommSyncDL")).decode(e.payload),te=new(o())(P.serverId.low,P.serverId.high,P.serverId.unsigned).toString(),ne=new(o())(P.metaId.low,P.metaId.high,P.metaId.unsigned).toString(),!(Number(ne)>0))return[3,10];if(!P.status)return[3,9];if(0!==P.status.errorCode)return[3,8];if((Re=N.Nl.get(ne))&&(Ie=Re.rpt,Ne=Re.requestName,Ie({isEndApi:!0,data:{isSuccess:1,requestName:Ne,requestMethod:"WEBSOCKET",requestUrl:this.url,code:O.dd.success}}),N.Nl.delete(ne)),null==(re=this._msgHash[ne])?void 0:re.isHandleChatroom){try{ie="join"===(null===(t=this._msgHash[ne])||void 0===t?void 0:t.operation),(null===(n=this._msgHash[ne])||void 0===n?void 0:n.resolve)instanceof Function&&ie&&this._msgHash[ne].resolve({type:0,data:{action:"apply",id:this._msgHash[ne].roomId,result:!0,user:this.context.userId}}),(null===(r=this._msgHash[ne])||void 0===r?void 0:r.success)instanceof Function&&ie&&this._msgHash[ne].success({type:0,data:{action:"apply",id:this._msgHash[ne].roomId,result:!0,user:this.context.userId}}),(null===(i=this._msgHash[ne])||void 0===i?void 0:i.resolve)instanceof Function&&!ie&&this._msgHash[ne].resolve({type:0,data:{result:!0}}),(null===(s=this._msgHash[ne])||void 0===s?void 0:s.success)instanceof Function&&!ie&&this._msgHash[ne].success({type:0,data:{result:!0}})}catch(e){Oe=m.Z.create({type:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing success function error",data:e}),this.onError&&this.onError(Oe),null===(c=this.eventHandler)||void 0===c||c.dispatch("onError",Oe)}delete this._msgHash[ne]}if(!re||re.isHandleChatroom)return[3,7];if(se=null,oe="",ae=0,0!==P.metas.length)try{(ce=_.P6.parseNotify(P.metas[0].payload)).edit_msg&&(le=ce.edit_msg,de=le.count,ue=le.operator,he=le.edit_time,pe=le.sender,fe=le.send_time,se={operationTime:he,operatorId:ue,operationCount:de},oe=pe,ae=Number(fe))}catch(e){Oe=m.Z.create({type:a.E.WEBIM_LOAD_MSG_ERROR,message:"decode message error",data:e}),this.onError&&this.onError(Oe),null===(l=this.eventHandler)||void 0===l||l.dispatch("onError",Oe)}N.TJ.has(ne)&&(N.TJ.get(ne).rpt({isEndApi:!0,data:{isSuccess:1,requestMethod:"WEBSOCKET",requestUrl:this.url,code:O.dd.success,msgId:te}}),N.TJ.delete(ne)),D.label=1;case 1:return D.trys.push([1,5,,6]),me={localMsgId:ne,serverMsgId:te},se&&(this._msgHash[ne].modifiedInfo=se,ge=this._msgHash[ne],_e=ge.editMessageId,we=ge.type,ve=ge.chatType,ye=ge.msg,Ee=ge.to,be=ge.translations,Te={id:_e,type:we,chatType:ve,msg:ye,modifiedInfo:se,to:Ee,from:oe,time:Number(ae)},be&&(Te.translations=be),me.message=Te,null===(h=null===(u=null===(d=this._localCache)||void 0===d?void 0:d.getInstance())||void 0===u?void 0:u.getMessageByServerMsgId(_e))||void 0===h||h.then((function(e){var t,n;e&&"txt"===e.type&&(null===(n=null===(t=xe._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.putMessageToDB(x(x({},e),{msg:Te.msg,modifiedInfo:Te.modifiedInfo,translations:Te.translations})))}))),[4,null===(f=null===(p=this._localCache)||void 0===p?void 0:p.getInstance())||void 0===f?void 0:f.updateLocalMessage(ne,{serverMsgId:te,status:C.r.SUCCESS})];case 2:return D.sent(),(null===(g=this._msgHash[ne])||void 0===g?void 0:g.success)instanceof Function?[4,this._msgHash[ne].success(ne,te)]:[3,4];case 3:D.sent(),D.label=4;case 4:return(null===(v=this._msgHash[ne])||void 0===v?void 0:v.resolve)instanceof Function&&this._msgHash[ne].resolve(me),[3,6];case 5:return Se=D.sent(),Oe=m.Z.create({type:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing success function error",data:Se}),this.onError&&this.onError(Oe),null===(y=this.eventHandler)||void 0===y||y.dispatch("onError",Oe),[3,6];case 6:this.onReceivedMessage&&this.onReceivedMessage({id:ne,mid:te,to:this._msgHash[ne].to,time:0}),null===(E=this.eventHandler)||void 0===E||E.dispatch("onReceivedMessage",{id:ne,mid:te,to:this._msgHash[ne].to}),delete this._msgHash[ne],D.label=7;case 7:return[3,9];case 8:if(15===P.status.errorCode)(null===(b=this._msgHash[ne])||void 0===b?void 0:b.fail)instanceof Function&&this._msgHash[ne].fail({type:a.E.SERVICE_NOT_ALLOW_MESSAGING_MUTE,reason:"you were muted"}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject({type:a.E.SERVICE_NOT_ALLOW_MESSAGING_MUTE,reason:"you were muted"}),null===(S=null===(T=this._localCache)||void 0===T?void 0:T.getInstance())||void 0===S||S.updateLocalMessage(ne,{serverMsgId:te,status:C.r.FAIL});else if(1===P.status.errorCode){switch(we=void 0,P.status.reason){case"blocked":we=a.E.PERMISSION_DENIED;break;case"group not found":we=a.E.GROUP_NOT_EXIST;break;case"not in group or chatroom":we=a.E.GROUP_NOT_JOINED;break;case"exceed recall time limit":we=a.E.MESSAGE_RECALL_TIME_LIMIT;break;case"message recall disabled":we=a.E.SERVICE_NOT_ENABLED;break;case"not in group or chatroom white list":we=a.E.SERVICE_NOT_ALLOW_MESSAGING;break;case"nonroster":we=a.E.USER_NOT_FRIEND,P.status.reason="not contact";break;case"group is disabled":we=a.E.GROUP_IS_DISABLED,P.status.reason="group is disabled";break;case"limit directed users":we=a.E.MAX_LIMIT;break;case"Sorry, edit limit reached":we=a.E.MAX_LIMIT,P.status.reason="Modify message limit reached";break;case"Sorry, message does not exist":we=a.E.MODIFY_MESSAGE_NOT_EXIST,P.status.reason="The message does not exist.";break;case"Sorry, You do not have permission":we=a.E.PERMISSION_DENIED,P.status.reason="You do not have the modified permission.";break;case"Sorry, format is incorrect":we=a.E.MODIFY_MESSAGE_FORMAT_ERROR,P.status.reason="The modify messaged format error.";break;case"Sorry, edit is not available":we=a.E.SERVICE_NOT_ENABLED,P.status.reason="The message modify function is not activated.";break;case"Sorry, edit fail":we=a.E.MODIFY_MESSAGE_FAILED,P.status.reason="Modify message failed.";break;default:P.status.reason.includes("grpID")&&P.status.reason.includes("does not exist!")?(we=a.E.CHATROOM_NOT_EXIST,P.status.reason="The chat room dose not exist."):P.status.reason.includes("username")&&P.status.reason.includes("doesn't exist!")?we=a.E.USER_NOT_FOUND:"group member list is full!"===P.status.reason?we=a.E.CHATROOM_MEMBERS_FULL:P.status.reason.includes("can not join this group")&&P.status.reason.includes("is in the blacklist")?(we=a.E.PERMISSION_DENIED,P.status.reason="permission denied"):we="can not operate this group, reason: group is disabled"===P.status.reason?a.E.GROUP_IS_DISABLED:P.status.reason.includes("moderation")?a.E.MESSAGE_MODERATION_BLOCKED:a.E.SERVER_UNKNOWN_ERROR}this._msgHash[ne]&&((null===(w=this._msgHash[ne])||void 0===w?void 0:w.isHandleChatroom)?(Ce=m.Z.create({type:we,message:P.status.reason||"",data:""}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ce),this._msgHash[ne].error instanceof Function&&this._msgHash[ne].error(Ce)):(Ce=m.Z.create({type:we,message:P.status.reason||"",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ce),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:we,reason:P.status.reason?P.status.reason:"",data:{id:ne,mid:te}}),null===(I=null===(R=this._localCache)||void 0===R?void 0:R.getInstance())||void 0===I||I.updateLocalMessage(ne,{serverMsgId:te,status:C.r.FAIL})),delete this._msgHash[ne])}else if(7===P.status.errorCode)"sensitive words"===P.status.reason&&this._msgHash[ne]?(Ce=m.Z.create({type:a.E.MESSAGE_INCLUDE_ILLEGAL_CONTENT,message:"sensitive words",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ce),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:a.E.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:ne,mid:te,reason:"sensitive words"}}),null===(k=null===(A=this._localCache)||void 0===A?void 0:A.getInstance())||void 0===k||k.updateLocalMessage(ne,{serverMsgId:te,status:C.r.FAIL})):"blocked by mod_antispam"===P.status.reason&&this._msgHash[ne]?(Ce=m.Z.create({type:a.E.MESSAGE_INCLUDE_ILLEGAL_CONTENT,message:"blocked by mod_antispam",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ce),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:a.E.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:ne,mid:te,reason:"blocked by mod_antispam"}}),null===(M=null===(L=this._localCache)||void 0===L?void 0:L.getInstance())||void 0===M||M.updateLocalMessage(ne,{serverMsgId:te,status:C.r.FAIL})):"user is mute"===P.status.reason&&this._msgHash[ne]?(Ce=m.Z.create({type:a.E.USER_MUTED_BY_ADMIN,message:"user is mute",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ce),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail(Ce),null===(U=null===(j=this._localCache)||void 0===j?void 0:j.getInstance())||void 0===U||U.updateLocalMessage(ne,{serverMsgId:te,status:C.r.FAIL})):"traffic limit"===P.status.reason&&this._msgHash[ne]?(Ce=m.Z.create({type:a.E.MESSAGE_CURRENT_LIMITING,message:"traffic limit",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ce),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail(Ce),null===(V=null===(F=this._localCache)||void 0===F?void 0:F.getInstance())||void 0===V||V.updateLocalMessage(ne,{serverMsgId:te,status:C.r.FAIL})):"Sorry, data is too large"===P.status.reason&&this._msgHash[ne]&&(Ce=m.Z.create({type:a.E.MESSAGE_SIZE_LIMIT,message:"Sorry, data is too large",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ce),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail(Ce),null===(H=null===(G=this._localCache)||void 0===G?void 0:G.getInstance())||void 0===H||H.updateLocalMessage(ne,{serverMsgId:te,status:C.r.FAIL}));else if(19===P.status.errorCode)this._msgHash[ne]&&(N.TJ.has(ne)&&(N.TJ.get(ne).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:a.E.MESSAGE_EXTERNAL_LOGIC_BLOCKED,codeDesc:P.status.reason||"",msgId:te}}),N.TJ.delete(ne)),Ce=m.Z.create({type:a.E.MESSAGE_EXTERNAL_LOGIC_BLOCKED,message:P.status.reason||"",data:{id:ne,mid:te}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ce),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:a.E.MESSAGE_EXTERNAL_LOGIC_BLOCKED,data:{id:ne,mid:te,reason:P.status.reason}}),null===(q=null===(z=this._localCache)||void 0===z?void 0:z.getInstance())||void 0===q||q.updateLocalMessage(ne,{serverMsgId:te,status:C.r.FAIL}));else if(this._msgHash[ne]){N.TJ.has(ne)&&(N.TJ.get(ne).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:a.E.WEBIM_LOAD_MSG_ERROR,codeDesc:(null===(Y=P.status)||void 0===Y?void 0:Y.reason)||"",msgId:te}}),N.TJ.delete(ne));try{Ce=m.Z.create({type:a.E.WEBIM_LOAD_MSG_ERROR,message:(null===(J=P.status)||void 0===J?void 0:J.reason)||"",data:{id:ne,mid:te,reason:P.status&&P.status.reason}}),this._msgHash[ne].reject instanceof Function&&this._msgHash[ne].reject(Ce),null===(Z=null===(X=this._localCache)||void 0===X?void 0:X.getInstance())||void 0===Z||Z.updateLocalMessage(ne,{serverMsgId:te,status:C.r.FAIL}),this._msgHash[ne].fail instanceof Function&&this._msgHash[ne].fail({type:a.E.WEBIM_LOAD_MSG_ERROR,data:{errorCode:P.status&&P.status.errorCode,reason:P.status&&P.status.reason}})}catch(e){Oe=m.Z.create({type:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing fail function error",data:e}),this.onError&&this.onError(Oe),null===(Q=this.eventHandler)||void 0===Q||Q.dispatch("onError",Oe)}delete this._msgHash[ne]}else N.TJ.has(ne)&&(N.TJ.get(ne).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,codeDesc:"on message error",msgId:te}}),N.TJ.delete(ne)),(Re=N.Nl.get(ne))&&(Ie=Re.rpt,Ne=Re.requestName,Ie({isEndApi:!0,data:{isSuccess:0,requestName:Ne,requestMethod:"WEBSOCKET",requestUrl:this.url,code:O.dd.failed,codeDesc:"on message error"}}),N.Nl.delete(ne)),Oe=m.Z.create({type:a.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"on message error"}),this.onError&&this.onError(Oe),null===($=this.eventHandler)||void 0===$||$.dispatch("onError",Oe);D.label=9;case 9:return[2];case 10:if(0!==P.metas.length)try{B.call(this,P.metas,P.status)}catch(e){Oe=m.Z.create({type:a.E.WEBIM_LOAD_MSG_ERROR,message:"decode message error",data:e}),this.onError&&this.onError(Oe),null===(ee=this.eventHandler)||void 0===ee||ee.dispatch("onError",Oe)}finally{P.isLast?(Ae=-1,this._queues.some((function(e,t){return e.name===P.name&&(Ae=t,!0)}))&&Ae>0&&this._queues.splice(Ae,1),this._queues.length>0&&(W.call(this,this._queues[0]),this.qTimer&&clearTimeout(this.qTimer))):K.call(this,P.nextKey,P.queue)}else P.isLast&&(ke=-1,this._queues.some((function(e,t){return e.name===P.queue.name&&(ke=t,!0)}))&&this._queues.splice(ke,1),this._queues.length>0&&(W.call(this,this._queues[0]),this.qTimer&&clearTimeout(this.qTimer)));return[2]}}))}))}function ae(e){var t=[],n=this.root.lookup("easemob.pb.KeyValue"),r=[];for(var i in e){var s=n.decode(t);s.key=i,"object"===A(e[i])?(s.type=8,s.stringValue=JSON.stringify(e[i])):"string"==typeof e[i]?(s.type=7,s.stringValue=e[i]):"boolean"==typeof e[i]?(s.type=1,s.varintValue=!0===e[i]?1:0):Number.isInteger(e[i])?(s.type=2,s.varintValue=e[i]):(s.type=6,s.doubleValue=e[i]),r.push(s)}return r}function ce(e){var t,n,r,i=[];if(this.root){var s,c=this.root.lookup("easemob.pb.MessageBody.Content").decode(i);switch(s=!e.group&&"groupchat"!==(null===(t=null==e?void 0:e.chatType)||void 0===t?void 0:t.toLowerCase())||e.roomType?e.group&&e.roomType||"chatroom"===(null===(n=null==e?void 0:e.chatType)||void 0===n?void 0:n.toLowerCase())?"chatRoom":"singleChat":"groupChat",e.type){case"txt":c.type=0,c.text=e.msg;break;case"img":c.type=1,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.size=e.body.size,c.thumbnailDisplayName=e.body.filename):e.file?(c.displayName=e.file.filename,c.remotePath=e.file.url,c.secretKey=e.file.secret,c.fileLength=e.file.file_length,c.size=e.file.size,c.thumbnailDisplayName=e.file.filename):(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.size=e.size,c.thumbnailDisplayName=e.filename),e.isBuildCombinedMsg&&(c.size={height:e.height,width:e.width});break;case"video":c.type=2,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.duration=e.body.length,c.thumbnailDisplayName=e.body.filename):e.isBuildCombinedMsg&&(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.duration=e.length,c.thumbnailDisplayName=e.filename);break;case"loc":c.type=3,c.latitude=e.lat,c.longitude=e.lng,c.address=e.addr,c.buildingName=e.buildingName,c.latitude=e.lat;break;case"audio":c.type=4,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.duration=e.body.length,c.thumbnailDisplayName=e.body.filename):e.isBuildCombinedMsg&&(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.duration=e.length,c.thumbnailDisplayName=e.filename);break;case"file":c.type=5,e.body?(c.displayName=e.body.filename,c.remotePath=e.body.url,c.secretKey=e.body.secret,c.fileLength=e.body.file_length,c.thumbnailDisplayName=e.body.filename):e.isBuildCombinedMsg&&(c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.thumbnailDisplayName=e.filename);break;case"cmd":c.type=6,c.action=e.action;break;case"custom":c.type=7,c.customEvent=e.customEvent,c.customExts=ae.call(this,e.customExts);break;case"combine":c.type=0,c.subType=0,c.text=e.compatibleText,c.displayName=e.filename,c.remotePath=e.url,c.secretKey=e.secret,c.fileLength=e.file_length,c.title=e.title,c.summary=e.summary,c.combineLevel=e.combineLevel}var d=[];e.ext&&(d=ae.call(this,e.ext));var u=this.root.lookup("easemob.pb.MessageBody"),h=u.decode(i),p=e.from||this.context.jid.name;h.from={name:e.isBuildCombinedMsg?p:this.context.jid.name},h.to={name:e.to},"channel"===e.type?h.type=k.CHANNEL_ACK:"recall"===e.type?(h.type=k.RECALL,h.ackMessageId=e.ackId):"delivery"===e.type?(h.type=k.DELIVER_ACK,h.ackMessageId=e.ackId):"read"===e.type?(h.type=k.READ_ACK,h.ackMessageId=e.ackId,"groupChat"===s&&(h.msgConfig={allowGroupAck:!0},h.ackContent=e.ackContent)):"chatRoom"===s?h.type=k.CHATROOM:"groupChat"===s?(h.type=k.GROUPCHAT,e.msgConfig&&(h.msgConfig={allowGroupAck:!0})):"singleChat"===s&&(h.type=k.SINGLECHAT),e.editMessageId&&(h.type=k.EDIT,h.editMessageId=e.editMessageId),h.contents=[c],h.ext=d;var f=function(e){var t={};return"translations"in e&&(t.translations=e.translations),"isChatThread"in e&&e.isChatThread&&(t.thread={}),Object.keys(t).length>0?JSON.stringify(t):""}(e);f&&(h.meta=f),h=u.encode(h).finish();var m=this.root.lookup("easemob.pb.Meta"),g=m.decode(i);g.id=e.id;var _="easemob.com";if("chatRoom"!==s&&"groupChat"!==s||(_="conference.easemob.com"),g.to={appKey:this.appKey,name:e.to,domain:_},"chatRoom"===s&&(g.ext=ae.call(this,function(e){return{chatroom_msg_tag:"high"===e.priority?0:"low"===e.priority?2:1}}(e))[0]),g.ns=1,g.payload=h,g.routetype=e.deliverOnlineOnly?1:0,"singleChat"!==s&&Array.isArray(e.receiverList)&&(null===(r=e.receiverList)||void 0===r?void 0:r.length)>0&&(g.directedUsers=e.receiverList,g.routetype=2,l.kg.debug("receiverList:",e.receiverList,"thirdMessage",g)),e.isBuildCombinedMsg)return g.timestamp=o().fromValue(e.time),m.encode(g).finish();var v=this.root.lookup("easemob.pb.CommSyncUL"),y=v.decode(i);y.meta=g,y=v.encode(y).finish();var E=this.root.lookup("easemob.pb.MSync"),b=E.decode(i);return b.version=this.version,b.encryptType=this.encryptType,b.command=0,b.payload=y,E.encode(b).finish()}e.fail&&e.fail({type:a.E.WEBIM_CONNCTION_CLIENT_OFFLINE,message:"Not logged in"})}function le(e){var t,n,r=this,i=x({},e);if(e.file)return i.accessToken=this.token,i.appKey=this.appKey,i.apiUrl=this.apiUrl,i.body&&i.body.url?ce.call(this,i):new Promise((function(t,n){var s=i.onFileUploadComplete;i.onFileUploadComplete=function(t){var n,o,a,c;if(t.entities[0]["file-metadata"]){var l=t.entities[0]["file-metadata"]["content-length"];i.file_length=l,i.filetype=t.entities[0]["file-metadata"]["content-type"],l>204800&&(i.thumbnail=!0)}i.body={type:i.type||"file",secret:t.entities[0]["share-secret"],filename:i.file.filename||i.filename,url:(r.isHttpDNS?r.apiUrl+t.uri.substr(t.uri.indexOf("/",9)):t.uri)+"/"+t.entities[0].uuid,length:i.length||0,filetype:i.filetype||i.file.filetype,file_length:(null===(o=null===(n=i.file)||void 0===n?void 0:n.data)||void 0===o?void 0:o.size)||0,size:{width:i.width||0,height:i.height||0}},i.file.url=t.uri,e.secret=t.entities[0]["share-secret"];var d=(r.isHttpDNS?r.apiUrl+t.uri.substr(t.uri.indexOf("/",9)):t.uri)+"/"+t.entities[0].uuid;e.url=d,t.url=d,"img"===i.type&&(e.thumb="".concat(d,"?thumbnail=true"),t.thumb="".concat(d,"?thumbnail=true")),s instanceof Function&&s(t,i.id);var u=ce.call(r,i);N.TJ.size<=N.F3&&N.TJ.set(i.id,{rpt:r.dataReport.geOperateFun({operationName:O.fI.SEND_MSG})}),null===(c=null===(a=r._localCache)||void 0===a?void 0:a.getInstance())||void 0===c||c.storeMessage(e,C.r.INPROGRESS),fe.call(r,u)},_.P6.uploadFile.call(r,i,O.fI.UPLOAD_MSG_ATTACH)}));if("combine"===e.type){i.accessToken=this.token,i.appKey=this.appKey,i.apiUrl=this.apiUrl;var s=i.onFileUploadComplete,o=i.onFileUploadError;return new Promise((function(t,n){var c,d,u,h;if((null===(c=e.messageList)||void 0===c?void 0:c.length)>300||0===(null===(d=e.messageList)||void 0===d?void 0:d.length))return r._msgHash[i.id].reject({type:a.E.MAX_LIMIT,message:"The number of combined messages exceeded the limit."});var p=L([],e.messageList,!0),f=0;if(p.forEach((function(e){(null==e?void 0:e.combineLevel)>f&&(f=null==e?void 0:e.combineLevel)})),i.combineLevel=f+1,i.combineLevel>10)return r._msgHash[i.id].reject({type:a.E.MAX_LIMIT,message:"The level of the merged message exceeded the limit."});var m=de.call(r,p),g=function(t,n){var o,a,c,l,d,u,h=(r.isHttpDNS?r.apiUrl+t.uri.substr(t.uri.indexOf("/",9)):t.uri)+"/"+t.entities[0].uuid,p=null===(o=t.entities[0])||void 0===o?void 0:o["share-secret"],f=h+"?em-redirect=true";p&&(f="".concat(f,"&share-secret=").concat(p)),s instanceof Function&&s({url:f,secret:p}),e.url=f,e.secret=p,i.url=h,i.secret=t.entities[0]["share-secret"],i.filename=(null===(a=i.file)||void 0===a?void 0:a.filename)||(null==n?void 0:n.fileName),i.file_length=(null===(l=null===(c=i.file)||void 0===c?void 0:c.data)||void 0===l?void 0:l.size)||(null==n?void 0:n.fileLength)||0,null===(u=null===(d=r._localCache)||void 0===d?void 0:d.getInstance())||void 0===u||u.storeMessage(e,C.r.INPROGRESS);var m=ce.call(r,i);fe.call(r,m)},v=_.P6.getEnvInfo();if("web"!==v.platform&&"node"!==v.platform&&"quick_app"!==v.platform&&(null===(h=null===(u=v.global)||void 0===u?void 0:u.canIUse)||void 0===h?void 0:h.call(u,"getFileSystemManager"))){var y=v.global.getFileSystemManager(),E=r.apiUrl+"/"+r.orgName+"/"+r.appName+"/chatfiles";y.writeFile({filePath:"".concat(v.global.env.USER_DATA_PATH,"/combine"),data:m.buffer,encoding:"binary",success:function(e){v.global.uploadFile({url:E,filePath:"".concat(v.global.env.USER_DATA_PATH,"/combine"),name:"file",header:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+i.accessToken},success:function(e){if(200===e.statusCode){l.kg.debug("upload success",e);var t=JSON.parse(e.data);g(t,{fileName:"combine",fileLength:m.length})}else l.kg.debug("upload fail"),i.onFileUploadError instanceof Function&&i.onFileUploadError(e),this._msgHash[i.id].reject({type:a.E.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:e})},fail:function(t){l.kg.debug("upload fail"),i.onFileUploadError instanceof Function&&i.onFileUploadError(e),this._msgHash[i.id].reject({type:a.E.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:t})}})},fail:function(e){l.kg.debug("write file fail",e),this._msgHash[i.id].reject({type:a.E.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:e})}})}else{var b=new File([m],"combine",{type:"application/octet-stream"}),T={url:URL.createObjectURL(b),filename:i.id,data:b};i.file=T,i.onFileUploadComplete=function(e){g(e)},i.onFileUploadError=function(e){o instanceof Function&&o(e),r._msgHash[i.id].reject({type:a.E.WEBIM_UPLOADFILE_ERROR,message:"Failed to upload the merge message.Please try again",data:e})},_.P6.uploadFile.call(r,i,O.fI.UPLOAD_MSG_ATTACH)}}))}"img"===e.type&&(i.body||(i.body=x(x({},i),{size:{width:i.width||0,height:i.height||0}}))),null===(n=null===(t=this._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.storeMessage(e,C.r.INPROGRESS);var c=ce.call(this,i);fe.call(this,c)}function de(e){for(var t=Uint8Array.from("cm",(function(e){return e.charCodeAt(0)})),n=0;n<e.length;n++){for(var r=e[n],i=x(x({},r),{isBuildCombinedMsg:!0}),s=this.mSync.encodeChatMsg.call(this,i),o=s.length,a=new Uint8Array(4),c=0;c<4;c++)a[c]=o>>8*(3-c)&255;l.kg.debug("message length:",a);var d=new Uint8Array(t.length+a.length+s.length);d.set(t),d.set(a,t.length),d.set(s,t.length+a.length),t=d}var u=new Uint8Array(t.length+1),h=0;for(n=2;n<t.length;n++)n%2==1&&(h^=t[n]);return u.set(t),l.kg.debug("checkResult:",h),u[t.length]=h,u}function ue(e,t,n){var r=[],i=this.root.lookup("easemob.pb.MUCBody"),s=i.decode(r);s.mucId={appKey:this.appKey,name:e,domain:"conference.easemob.com"},s.operation="join"===n?2:3,s.from={name:this.context.userId},s.isChatroom=!0,s=i.encode(s).finish();var o=this.root.lookup("easemob.pb.Meta").decode(r);o.id=t,o.from={appKey:this.appKey,name:this.context.userId,domain:"easemob.com",client_resource:this.context.jid.clientResource},o.to={domain:"easemob.com"},o.ns=2,o.payload=s;var a=this.root.lookup("easemob.pb.CommSyncUL"),c=a.decode(r);c.meta=o,c=a.encode(c).finish();var l=this.root.lookup("easemob.pb.MSync"),d=l.decode(r);return d.version=this.version,d.encryptType=this.encryptType,d.command=0,d.payload=c,l.encode(d).finish()}function he(e,t){var n=_.P6.getUniqueId(),r=ue.call(this,e.roomId,n,t);return fe.call(this,x(x({},e),{isHandleChatroom:!0,joinMsg:r,id:n,operation:t}),n)}function pe(e){var t=this;return new Promise((function(n,r){var i,s,o,c,l,d;if(t.logOut)return r({type:a.E.WEBIM_CONNECTION_CLOSED,message:"not login"});if(!e.id||"string"!=typeof e.id||""===e.id)return r({type:a.E.MESSAGE_PARAMETER_ERROR,message:'Missing required parameter: "id"'});if(!e.to||"string"!=typeof e.to||""===e.to)return r({type:a.E.MESSAGE_PARAMETER_ERROR,message:'Missing required parameter: "to"'});var u="file"===e.type||"img"===e.type||"audio"===e.type||"video"===e.type,h="delivery"===e.type||"read"===e.type||"channel"===e.type,p="cmd"===e.type,f="recall"===e.type,m=null==e?void 0:e.editMessageId,g=!(h||f||p||m);if(e.id){if(!u&&!h||u&&t.useOwnUploadFun){var _="recall"===e.type?O.fI.SEND_RECALL_MSG:O.fI.SEND_MSG;m&&(_=O.fI.MODIFY_MESSAGE),N.TJ.size<=N.F3&&N.TJ.set(e.id,{rpt:t.dataReport.geOperateFun({operationName:_})})}g&&(null===(s=null===(i=t._localCache)||void 0===i?void 0:i.getInstance())||void 0===s||s.storeMessage(e,C.r.CREATE)),t._msgHash[e.id]=x(x({},e),{resolve:n,reject:r})}if(u||"combine"===e.type)return le.call(t,e);if("txt"===e.type&&(null===(o=e.msgConfig)||void 0===o?void 0:o.languages)&&Array.isArray(null===(c=e.msgConfig)||void 0===c?void 0:c.languages)&&e.msgConfig.languages.length>0){var v=t.translateMessage||t.translation.translateMessage;if(!v)throw new Error("there is no method to translate message");v.call(t,{text:e.msg,languages:e.msgConfig.languages}).then((function(n){var r,i,s,o=null===(r=n.data[0])||void 0===r?void 0:r.translations;o=o.map((function(e){return{code:e.to,text:e.text}})),e.translations=o,t._msgHash[e.id].translations=o,null===(s=null===(i=t._localCache)||void 0===i?void 0:i.getInstance())||void 0===s||s.storeMessage(e,C.r.INPROGRESS);var a=ce.call(t,e);fe.call(t,a,e.id)})).catch((function(e){r(e)}))}else{g&&(null===(d=null===(l=t._localCache)||void 0===l?void 0:l.getInstance())||void 0===d||d.storeMessage(e,C.r.INPROGRESS));var y=ce.call(t,e);fe.call(t,y,e.id)}}))}function fe(e,t){var n,r,i=this;if(e.isHandleChatroom){if(!this.isOpened()){var s={data:"",type:a.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};return Promise.reject(s)}return new Promise((function(n,r){var s;i._msgHash[e.id]=x(x({},e),{resolve:n,reject:r}),s="miniCore"===i.name?e.joinMsg:U.call(i,e.joinMsg,t),i.sock.send(s)}))}if(!this.isOpened())return null===(n=this.unMSyncSendMsgMap)||void 0===n||n.set(t,e),!this.logOut&&this.autoReconnectNumTotal<this.autoReconnectNumMax&&(this.autoReconnectNumTotal<=this.socketHost.length&&this.isHttpDNS||!this.isHttpDNS)&&(l.kg.debug("need to reconnect",this.autoReconnectNumTotal,this.autoReconnectNumMax),this.offLineSendConnecting=!0,this.reconnecting||this.reconnect()),void(this.onError&&this.onError({type:a.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"}));r="miniCore"===this.name?e:U.call(this,e,t),this.sock.send(r)}var me=function(e,t){return e.send=pe,e.sendMsg=pe,l.kg.debug("init Msync by ".concat(e.name)),{generateProvision:j.bind(e),base64transform:U.bind(e),distributeMeta:F.bind(e),decodeMeta:B.bind(e),decodeUnreadDL:V.bind(e),_rebuild:G.bind(e),_lastsession:z.bind(e),receiveProvision:Y.bind(e),isInQueue:te.bind(e),decodeNotice:ne.bind(e),decodeMSync:ie.bind(e),distributeMSync:se.bind(e),encodeChatMsg:ce.bind(e),upLoadFile:le.bind(e),send:pe.bind(e),stopHeartBeat:$.bind(e),handleChatRoom:he.bind(e)}}},7252:function(e,t){"use strict";var n=function(){function e(e){this.type=e.type,this.message=e.message,this.data=e.data}return e.create=function(t){return new e(t)},e}();t.Z=n},8161:function(e,t,n){"use strict";n(9601),n(1539),n(8674),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948),n(7941),n(3710),n(9714),n(9653),n(9554),n(4747),n(8309),n(2772),n(2222);var r=n(3720),i=n.n(r),s=n(4363),o=n(4370),a=n(9335),c=n(9743),l=n(7360),d=n(2449),u=n(7288),h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h.apply(this,arguments)},p=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},m={0:"TEXT",1:"IMAGE",2:"VIDEO",3:"LOCATION",4:"VOICE",5:"FILE",6:"COMMAND",7:"CUSTOM",8:"COMBINE"};function g(e){for(var t={},n=0;n<e.length;n++)if(8===e[n].type)t[e[n].key]=JSON.parse(e[n].stringValue);else if(7===e[n].type)t[e[n].key]=e[n].stringValue;else if(6===e[n].type)t[e[n].key]=e[n].doubleValue;else if(5===e[n].type)t[e[n].key]=e[n].floatValue;else if(1===e[n].type){var r=e[n].varintValue,s=new(i())(r.low,r.high,r.unsigned).toString();t[e[n].key]=0!==Number(s)}else 2!==e[n].type&&3!==e[n].type&&4!==e[n].type||(r=e[n].varintValue,s=new(i())(r.low,r.high,r.unsigned).toString(),t[e[n].key]=Number(s));return t}function _(e){var t,n,r,i,o,c,d,h,_,v,y,E,b,T,S,w,C,R,I,N,O,A,k,x,P,D,L;return p(this,void 0,void 0,(function(){var p,M,j,U,F,B,V,G,H,W,z,q,K,Y,J,X,Z,Q,$,ee,te,ne,re,ie,se,oe,ae,ce,le,de,ue,he,pe,fe,me,ge,_e,ve,ye,Ee,be,Te,Se,we,Ce,Re,Ie,Ne;return f(this,(function(f){switch(f.label){case 0:switch(p=e.status,M=e.thirdMessage,j=e.msgBody,U=e.msgId,F=e.type,B=e.from,V=e.to,G=e.time,H=e.onlineState,W=e.chatType,z=e.ignoreCallback,q=e.priority,K=e.format,Y={},J={},X=p.errorCode>0,Z=p.errorCode,Q=p.reason,$={},ee=[],te=[],ne={},re="",ie=0,se=null,oe=null,M.ext&&($=g(M.ext)),M.meta&&"string"==typeof M.meta&&((ce=JSON.parse(M.meta)).reaction&&(ee=ce.reaction).forEach((function(e){e.isAddedBySelf=e.state,delete e.state})),ce.translations&&(te=ce.translations),ce.edit_msg&&(le=ce.edit_msg,de=le.count,ue=le.operator,he=le.edit_time,pe=le.sender,fe=le.send_time,ne={operationTime:he,operatorId:ue,operationCount:de},re=pe,ie=fe),ce.thread&&"{}"!==JSON.stringify(ce.thread)&&(se={messageId:ce.thread.msg_parent_id,parentId:ce.thread.muc_parent_id,chatThreadName:ce.thread.thread_name}),ce.thread_overview&&"{}"!==JSON.stringify(ce.thread_overview)&&(oe={id:ce.thread_overview.id,parentId:ce.thread_overview.muc_parent_id,name:ce.thread_overview.name,lastMessage:ce.thread_overview.last_message&&"{}"!==JSON.stringify(ce.thread_overview.last_message)?(0,s.w)(ce.thread_overview.last_message):null,createTimestamp:ce.thread_overview.create_timestamp,updateTimestamp:ce.thread_overview.update_timestamp,messageCount:ce.thread_overview.message_count||0})),j.type){case 0:return[3,1];case 1:return[3,7];case 2:return[3,10];case 3:return[3,13];case 4:return[3,16];case 5:return[3,19];case 6:return[3,22];case 7:return[3,23];case 8:return[3,26]}return[3,27];case 1:return Object.prototype.hasOwnProperty.call(j,"subType")&&0===j.subType?(ae=(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),me={id:U,type:"combine",chatType:W,to:V,from:B,ext:$,time:Number(G),onlineState:H,title:j.title||"",summary:j.summary||"",url:ae||"",secret:j.secretKey||"",file_length:j.fileLength||0,filename:j.displayName||"",compatibleText:j.text,combineLevel:j.combineLevel||0},Y.msgConfig&&(me.msgConfig=Y.msgConfig),ee.length>0&&(me.reactions=ee),se&&(me.chatThread=se),oe&&(me.chatThreadOverview=oe),"chatRoom"===W&&(me.priority=q),J=me,z?[3,3]:[4,null===(n=null===(t=this._localCache)||void 0===t?void 0:t.getInstance())||void 0===n?void 0:n.storeMessage(me,u.r.SUCCESS)]):[3,4];case 2:f.sent(),null===(r=this.eventHandler)||void 0===r||r.dispatch("onCombineMessage",me),f.label=3;case 3:return[3,28];case 4:return!(Y={id:U,type:F,contentsType:m[j.type],from:B,to:V,data:j.text,ext:$,sourceMsg:j.text,time:G,msgConfig:M.msgConfig,onlineState:H}).msgConfig&&delete M.msgConfig,Y.error=X,Y.errorText=Q,Y.errorCode=Z,!z&&this.onTextMessage&&this.onTextMessage(Y),ge={id:U,type:"txt",chatType:W,msg:j.text,to:V,from:B,ext:$,time:Number(G),onlineState:H},Y.msgConfig&&(ge.msgConfig=Y.msgConfig),ee.length>0&&(ge.reactions=ee),se&&(ge.chatThread=se),oe&&(ge.chatThreadOverview=oe),te.length>0&&(ge.translations=te),ne.operationCount>0&&(ge.modifiedInfo=ne,M.type===a.g.EDIT&&(ge.from=re,ge.time=ie)),"chatRoom"===W&&(ge.priority=q),J=ge,z?[3,6]:[4,null===(o=null===(i=this._localCache)||void 0===i?void 0:i.getInstance())||void 0===o?void 0:o.storeMessage(ge,u.r.SUCCESS)];case 5:f.sent(),null===(c=this.eventHandler)||void 0===c||c.dispatch("onTextMessage",ge),f.label=6;case 6:return[3,28];case 7:return _e=(null===(d=null==j?void 0:j.size)||void 0===d?void 0:d.width)||0,ve=(null===(h=null==j?void 0:j.size)||void 0===h?void 0:h.height)||0,ae=this.useOwnUploadFun?j.remotePath:(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&!this.useOwnUploadFun&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),!(Y={id:U,type:F,contentsType:m[j.type],from:B,to:V,url:ae,secret:j.secretKey,filename:j.displayName,thumb:this.useOwnUploadFun?"":"".concat(ae,"&thumbnail=true"),thumb_secret:j.secretKey,file_length:j.fileLength||"",width:_e,height:ve,filetype:j.filetype||"",accessToken:this.token,ext:$,time:G,msgConfig:M.msgConfig,onlineState:H}).delay&&delete Y.delay,!Y.msgConfig&&delete M.msgConfig,Y.error=X,Y.errorText=Q,Y.errorCode=Z,!z&&this.onPictureMessage&&this.onPictureMessage(Y),ye={id:U,type:"img",chatType:W,from:B,to:V,url:ae||"",width:_e,height:ve,secret:j.secretKey||"",thumb:this.useOwnUploadFun?"":"".concat(ae,"&thumbnail=true"),thumb_secret:j.secretKey,file_length:j.fileLength||0,ext:$,time:Number(G),onlineState:H},Y.msgConfig&&(ye.msgConfig=Y.msgConfig),ee.length>0&&(ye.reactions=ee),se&&(ye.chatThread=se),oe&&(ye.chatThreadOverview=oe),"chatRoom"===W&&(ye.priority=q),J=ye,z?[3,9]:[4,null===(v=null===(_=this._localCache)||void 0===_?void 0:_.getInstance())||void 0===v?void 0:v.storeMessage(ye,u.r.SUCCESS)];case 8:f.sent(),null===(y=this.eventHandler)||void 0===y||y.dispatch("onImageMessage",ye),f.label=9;case 9:return[3,28];case 10:return ae=this.useOwnUploadFun?j.remotePath:(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&!this.useOwnUploadFun&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),!(Y={id:U,type:F,contentsType:m[j.type],from:B,to:V,url:ae,secret:j.secretKey,filename:j.displayName,length:j.duration||"",file_length:j.fileLength||"",filetype:j.filetype||"",accessToken:this.token||"",ext:$,time:G,msgConfig:M.msgConfig,onlineState:H}).delay&&delete Y.delay,!Y.msgConfig&&delete M.msgConfig,Y.error=X,Y.errorText=Q,Y.errorCode=Z,!z&&this.onVideoMessage&&this.onVideoMessage(Y),Ee={id:U,type:"video",chatType:W,from:B,to:V,url:ae,secret:j.secretKey,filename:j.displayName,length:j.duration||0,file:{},file_length:j.fileLength||0,filetype:j.filetype||"",accessToken:this.token||"",ext:$,time:Number(G),onlineState:H},Y.msgConfig&&(Ee.msgConfig=Y.msgConfig),ee.length>0&&(Ee.reactions=ee),se&&(Ee.chatThread=se),oe&&(Ee.chatThreadOverview=oe),"chatRoom"===W&&(Ee.priority=q),J=Ee,z?[3,12]:[4,null===(b=null===(E=this._localCache)||void 0===E?void 0:E.getInstance())||void 0===b?void 0:b.storeMessage(Ee,u.r.SUCCESS)];case 11:f.sent(),null===(T=this.eventHandler)||void 0===T||T.dispatch("onVideoMessage",Ee),f.label=12;case 12:return[3,28];case 13:return!(Y={id:U,type:F,contentsType:m[j.type],from:B,to:V,addr:j.address,buildingName:j.buildingName,lat:j.latitude,lng:j.longitude,ext:$,time:G,msgConfig:M.msgConfig,onlineState:H}).delay&&delete Y.delay,!Y.msgConfig&&delete M.msgConfig,Y.error=X,Y.errorText=Q,Y.errorCode=Z,!z&&this.onLocationMessage&&this.onLocationMessage(Y),be={id:U,type:"loc",chatType:W,from:B,to:V,buildingName:j.buildingName,addr:j.address,lat:j.latitude,lng:j.longitude,ext:$,time:Number(G),onlineState:H},Y.msgConfig&&(be.msgConfig=Y.msgConfig),ee.length>0&&(be.reactions=ee),se&&(be.chatThread=se),oe&&(be.chatThreadOverview=oe),"chatRoom"===W&&(be.priority=q),J=be,z?[3,15]:[4,null===(w=null===(S=this._localCache)||void 0===S?void 0:S.getInstance())||void 0===w?void 0:w.storeMessage(be,u.r.SUCCESS)];case 14:f.sent(),null===(C=this.eventHandler)||void 0===C||C.dispatch("onLocationMessage",be),f.label=15;case 15:return[3,28];case 16:return ae=this.useOwnUploadFun?j.remotePath:(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&!this.useOwnUploadFun&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),!(Y={id:U,type:F,contentsType:m[j.type],from:B,to:V,url:ae,secret:j.secretKey,filename:j.displayName,file_length:j.fileLength||"",accessToken:this.token||"",ext:$,length:j.duration,time:G,msgConfig:M.msgConfig,onlineState:H}).delay&&delete Y.delay,!Y.msgConfig&&delete M.msgConfig,Y.error=X,Y.errorText=Q,Y.errorCode=Z,!z&&this.onAudioMessage&&this.onAudioMessage(Y),Te={id:U,type:"audio",chatType:W,from:B,to:V,url:ae,secret:j.secretKey,file:{},filename:j.displayName,length:j.duration||0,file_length:j.fileLength||0,filetype:j.filetype||"",accessToken:this.token||"",ext:$,time:Number(G),onlineState:H},Y.msgConfig&&(Te.msgConfig=Y.msgConfig),ee.length>0&&(Te.reactions=ee),se&&(Te.chatThread=se),oe&&(Te.chatThreadOverview=oe),"chatRoom"===W&&(Te.priority=q),J=Te,z?[3,18]:[4,null===(I=null===(R=this._localCache)||void 0===R?void 0:R.getInstance())||void 0===I?void 0:I.storeMessage(Te,u.r.SUCCESS)];case 17:f.sent(),null===(N=this.eventHandler)||void 0===N||N.dispatch("onAudioMessage",Te),f.label=18;case 18:return[3,28];case 19:return ae=this.useOwnUploadFun?j.remotePath:(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&!this.useOwnUploadFun&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),!(Y={id:U,type:F,contentsType:m[j.type],from:B,to:V,url:ae,secret:j.secretKey,filename:j.displayName,file_length:j.fileLength,accessToken:this.token||"",ext:$,time:G,msgConfig:M.msgConfig,onlineState:H}).delay&&delete Y.delay,!Y.msgConfig&&delete M.msgConfig,Y.error=X,Y.errorText=Q,Y.errorCode=Z,!z&&this.onFileMessage&&this.onFileMessage(Y),Se={id:U,type:"file",chatType:W,from:B,to:V,url:ae,secret:j.secretKey,file:{},filename:j.displayName,length:j.duration||0,file_length:j.fileLength||0,filetype:j.filetype||"",accessToken:this.token||"",ext:$,time:Number(G),onlineState:H},Y.msgConfig&&(Se.msgConfig=Y.msgConfig),ee.length>0&&(Se.reactions=ee),se&&(Se.chatThread=se),oe&&(Se.chatThreadOverview=oe),"chatRoom"===W&&(Se.priority=q),J=Se,z?[3,21]:[4,null===(A=null===(O=this._localCache)||void 0===O?void 0:O.getInstance())||void 0===A?void 0:A.storeMessage(Se,u.r.SUCCESS)];case 20:f.sent(),null===(k=this.eventHandler)||void 0===k||k.dispatch("onFileMessage",Se),f.label=21;case 21:return[3,28];case 22:return!(Y={id:U,type:F,contentsType:m[j.type],from:B,to:V,action:j.action,ext:$,time:G,msgConfig:M.msgConfig,onlineState:H}).msgConfig&&delete M.msgConfig,Y.error=X,Y.errorText=Q,Y.errorCode=Z,!z&&this.onCmdMessage&&this.onCmdMessage(Y),we={id:U,type:"cmd",chatType:W,from:B,to:V,action:j.action,ext:$,time:Number(G),onlineState:H},Y.msgConfig&&(we.msgConfig=Y.msgConfig),ee.length>0&&(we.reactions=ee),se&&(we.chatThread=se),oe&&(we.chatThreadOverview=oe),"chatRoom"===W&&(we.priority=q),J=we,z||null===(x=this.eventHandler)||void 0===x||x.dispatch("onCmdMessage",we),[3,28];case 23:return Ce={},Re={},M.contents[0].customExts&&(Ce=g(M.contents[0].customExts)),M.contents[0].params&&(Re=g(M.contents[0].params)),Y={id:U,type:F,contentsType:m[j.type],from:B,to:V,customEvent:j.customEvent,params:Re,customExts:Ce,ext:$,time:G,onlineState:H},!z&&this.onCustomMessage&&this.onCustomMessage(Y),Ie={id:U,type:"custom",chatType:W,from:B,to:V,customEvent:j.customEvent,params:Re,customExts:Ce,ext:$,time:Number(G),onlineState:H},Y.msgConfig&&(Ie.msgConfig=Y.msgConfig),ee.length>0&&(Ie.reactions=ee),se&&(Ie.chatThread=se),oe&&(Ie.chatThreadOverview=oe),"chatRoom"===W&&(Ie.priority=q),J=Ie,z?[3,25]:[4,null===(D=null===(P=this._localCache)||void 0===P?void 0:P.getInstance())||void 0===D?void 0:D.storeMessage(Ie,u.r.SUCCESS)];case 24:f.sent(),null===(L=this.eventHandler)||void 0===L||L.dispatch("onCustomMessage",Ie),f.label=25;case 25:return[3,28];case 26:return ae=(j.remotePath&&this.apiUrl+j.remotePath.substr(j.remotePath.indexOf("/",9)))+"?em-redirect=true",j.secretKey&&(ae="".concat(ae,"&share-secret=").concat(j.secretKey)),Ne={id:U,type:"combine",chatType:W,to:V,from:B,ext:$,time:Number(G),onlineState:H,title:j.title||"",summary:j.summary||"",url:ae||"",secret:j.secretKey||"",file_length:j.fileLength||0,filename:j.displayName||"",compatibleText:j.text,combineLevel:j.combineLevel||0},Y.msgConfig&&(Ne.msgConfig=Y.msgConfig),ee.length>0&&(Ne.reactions=ee),se&&(Ne.chatThread=se),oe&&(Ne.chatThreadOverview=oe),"chatRoom"===W&&(Ne.priority=q),J=Ne,!z&&this.eventHandler&&this.eventHandler.dispatch("onCombineMessage",Ne),[3,28];case 27:return l.kg.error("Unknow message type, message:",j),[3,28];case 28:return K?[2,J]:[2,Y]}}))}))}function v(e,t,n){if(this.delivery&&e!==t){var r=this.getUniqueId(),i=new d.Message("delivery",r);i.set({ackId:n,to:e}),l.kg.debug("send delivery ack"),this.send(i.body)}}t.Z=function(e,t,n,r){var s,d,u,m,y,E,b,T,S,w,C,R,I,N,O,A,k,x,P,D;return p(this,void 0,void 0,(function(){var p,L,M,j,U,F,B,V,G,H,W,z,q,K,Y,J,X,Z,Q,$,ee,te,ne,re,ie,se,oe,ae;return f(this,(function(f){switch(f.label){case 0:if(p=new(i())(e.timestamp.low,e.timestamp.high,e.timestamp.unsigned).toString(),L=this.root.lookup("easemob.pb.MessageBody"),M=L.decode(e.payload),j=1,e.meta&&e.meta.length)switch(o.P6.parseNotify(e.meta).is_online){case 0:j=0;break;case 1:j=1;break;default:j=2}else j=3;switch(U=new(i())(e.id.low,e.id.high,e.id.unsigned).toString(),F=M.ackMessageId?new(i())(M.ackMessageId.low,M.ackMessageId.high,M.ackMessageId.unsigned).toString():"",B="",V=M.from&&M.from.name,G=M.to&&M.to.name,l.kg.debug("thirdMessage:",M),M.type){case a.g.SINGLECHAT:return[3,1];case a.g.GROUPCHAT:return[3,2];case a.g.CHATROOM:return[3,3];case a.g.READ_ACK:return[3,4];case a.g.DELIVER_ACK:return[3,5];case a.g.RECALL:return[3,6];case a.g.CHANNEL_ACK:return[3,15];case a.g.EDIT:return[3,16]}return[3,19];case 1:return B="chat","agoraToken"===this.grantType&&(B="singleChat"),this.delivery&&!n&&V!==this.context.userId&&v.call(this,V,G,U),[3,20];case 2:return B="groupchat","agoraToken"===this.grantType&&(B="groupChat"),[3,20];case 3:return B="chatroom","agoraToken"===this.grantType&&(B="chatRoom"),j=1,[3,20];case 4:return B="read_ack",H=void 0,M.ext[0]&&JSON.parse(M.ext[0].stringValue)?(H={id:U,type:"read",from:V,to:G,mid:F,groupReadCount:M.ext[0]&&JSON.parse(M.ext[0].stringValue),ackContent:M.ackContent,onlineState:j},this.onReadMessage&&this.onReadMessage(H),null===(s=this.eventHandler)||void 0===s||s.dispatch("onReadMessage",H),[2]):(H={id:U,type:"read",from:V,to:G,mid:F,onlineState:j},this.onReadMessage&&this.onReadMessage(H),null===(d=this.eventHandler)||void 0===d||d.dispatch("onReadMessage",H),[2]);case 5:return B="deliver_ack",this.onDeliveredMessage&&this.onDeliveredMessage({id:U,type:"delivery",from:V,to:G,mid:F,onlineState:j}),W={id:U,type:"delivery",from:V,to:G,mid:F,onlineState:j},null===(u=this.eventHandler)||void 0===u||u.dispatch("onDeliveredMessage",W),[2];case 6:return B="recall",z={id:U,from:V||"admin",to:G,mid:F,onlineState:j},q=G===this.user?V:G,[4,null===(y=null===(m=this._localCache)||void 0===m?void 0:m.getInstance())||void 0===y?void 0:y.getMessageByServerMsgId(z.mid)];case 7:return(K=f.sent())?[4,null===(b=null===(E=this._localCache)||void 0===E?void 0:E.getInstance())||void 0===b?void 0:b.removeMsgByServerMsgId(z.mid)]:[3,9];case 8:f.sent(),f.label=9;case 9:return"singleChat"!==(null==K?void 0:K.chatType)&&"groupChat"!==(null==K?void 0:K.chatType)?[3,14]:(Y=(null==K?void 0:K.from)===this.user||""===(null==K?void 0:K.from),[4,null===(S=null===(T=this._localCache)||void 0===T?void 0:T.getInstance())||void 0===S?void 0:S.getConversationLastMessage(q,K.chatType)]);case 10:return J=f.sent(),[4,null===(C=null===(w=this._localCache)||void 0===w?void 0:w.getInstance())||void 0===C?void 0:C.getConversationBySessionId((0,c.MQ)({conversationId:q,conversationType:K.chatType}))];case 11:return(X=f.sent())?[4,null===(I=null===(R=this._localCache)||void 0===R?void 0:R.getInstance())||void 0===I?void 0:I.updateLocalConversation((0,c.MQ)({conversationId:q,conversationType:K.chatType}),{lastMessageId:null==J?void 0:J.serverMsgId,unReadCount:(0,c.E7)({conversation:X,isRecallSelfMsg:Y,recalledMsgTime:K.time})})]:[3,13];case 12:f.sent(),f.label=13;case 13:f.label=14;case 14:return this.onRecallMessage&&this.onRecallMessage(z),null===(N=this.eventHandler)||void 0===N||N.dispatch("onRecallMessage",z),[2];case 15:return this.onChannelMessage&&this.onChannelMessage({id:U,type:"channel",chatType:"singleChat",from:V,to:G,time:Number(p),onlineState:j}),Z={id:U,type:"channel",chatType:"singleChat",from:V,to:G,time:Number(p),onlineState:j},null===(O=this.eventHandler)||void 0===O||O.dispatch("onChannelMessage",Z),[2];case 16:return Q={errorCode:0,reason:""},[4,_.call(this,{status:Q,thirdMessage:M,msgBody:M.contents[0],msgId:U,type:B,from:V,to:G,time:p,onlineState:j,ignoreCallback:!0,format:!0})];case 17:return $=f.sent(),ee=!!e.to&&-1!==e.to.domain.indexOf("conference"),$.chatType=ee?"groupChat":"singleChat",te=M.editMessageId&&new(i())(M.editMessageId.low,M.editMessageId.high,M.editMessageId.unsigned).toString(),ne={id:te,type:$.type,chatType:$.chatType,msg:$.msg,to:$.to,from:$.from,time:$.time,modifiedInfo:$.modifiedInfo},$.translations&&(ne.translations=$.translations),[4,null===(k=null===(A=this._localCache)||void 0===A?void 0:A.getInstance())||void 0===k?void 0:k.getMessageByServerMsgId(te)];case 18:return"txt"===(null==(re=f.sent())?void 0:re.type)&&(null===(P=null===(x=this._localCache)||void 0===x?void 0:x.getInstance())||void 0===P||P.putMessageToDB(h(h({},re),{msg:ne.msg,modifiedInfo:ne.modifiedInfo,translations:ne.translations}))),"txt"===$.type&&(null===(D=this.eventHandler)||void 0===D||D.dispatch("onModifiedMessage",ne)),[2];case 19:return l.kg.error("unexpected message type: ".concat(M.type)),[2];case 20:ie="normal","chat"===B.toLowerCase()||"singleChat"===B?se="singleChat":"groupchat"===B.toLowerCase()||"groupChat"===B?se="groupChat":(se="chatRoom",j=1,e.ext&&(oe=g([e.ext]),ie=0===oe.chatroom_msg_tag?"high":2===oe.chatroom_msg_tag?"low":"normal")),ae=0,f.label=21;case 21:return ae<M.contents.length?[4,_.call(this,{status:t,thirdMessage:M,msgBody:M.contents[ae],msgId:U,type:B,from:V,to:G,time:p,onlineState:j,chatType:se,ignoreCallback:n,priority:ie,format:r})]:[3,24];case 22:return[2,f.sent()];case 23:return ae++,[3,21];case 24:return[2]}}))}))}},4968:function(e,t,n){"use strict";n(8309);var r,i=n(7360),s=n(2071),o=n(1595);!function(e){e[e.Add=2]="Add",e[e.Remove=3]="Remove",e[e.Accept=4]="Accept",e[e.Decline=5]="Decline",e[e.Ban=6]="Ban",e[e.Allow=7]="Allow"}(r||(r={}));var a={operatRoster:function(e,t,n,a){var c=[],l=this.root.lookup("easemob.pb.RosterBody"),d=l.decode(c);switch(t){case"add":d.operation=r.Add;break;case"remove":d.operation=r.Remove;break;case"accept":d.operation=r.Accept;break;case"decline":d.operation=r.Decline;break;case"ban":d.operation=r.Ban;break;case"allow":d.operation=r.Allow;break;default:i.kg.error("operatRoster:",t)}d.from=this.context.jid;var u=[];if("string"==typeof e.to)u.push({appKey:this.appKey||this.context.appKey,name:e.to,domain:"easemob.com"});else if(e.to instanceof Array)for(var h=0;h<e.to.length;h++)u.push({appKey:this.appKey,name:e.to[h],domain:"easemob.com"});d.to=u,d.reason=e.message||"",d=l.encode(d).finish();var p=this.root.lookup("easemob.pb.Meta").decode(c);p.id=e.id||this.getUniqueId();var f=this.dataReport.geOperateFun({operationName:o.fI[t]});s.Nl.size<=s.F3&&s.Nl.set(p.id,{rpt:f,requestName:o.fI[t],resolve:n,reject:a}),p.from=this.context.jid,p.to={domain:"@easemob.com"},p.ns=3,p.payload=d;var m=this.root.lookup("easemob.pb.CommSyncUL"),g=m.decode(c);g.meta=p,g=m.encode(g).finish();var _=this.root.lookup("easemob.pb.MSync"),v=_.decode(c);if(v.version=this.version,v.encryptType=[0],v.command=0,v.guid=this.jid,v.payload=g,v=_.encode(v).finish(),"miniCore"===this.name)this.sock.send(v);else{var y=this.mSync.base64transform(v);this.sock.send(y)}},handleRosterMsg:function(e){var t,n,r,s,o,a,c=this.root.lookup("easemob.pb.RosterBody").decode(e.payload),l={type:"",to:c.to[0].name,from:c.from.name,status:c.reason};switch(c.operation){case 2:l.type="subscribe",this.onContactInvited&&this.onContactInvited(l),null===(t=this.eventHandler)||void 0===t||t.dispatch("onContactInvited",l);break;case 3:l.type="unsubscribed",this.onContactDeleted&&this.onContactDeleted(l),null===(n=this.eventHandler)||void 0===n||n.dispatch("onContactDeleted",l);break;case 4:l.type="subscribed",this.onContactAdded&&this.onContactAdded(l),null===(r=this.eventHandler)||void 0===r||r.dispatch("onContactAdded",l);break;case 5:l.type="unsubscribed",this.onContactRefuse&&this.onContactRefuse(l),null===(s=this.eventHandler)||void 0===s||s.dispatch("onContactRefuse",l);break;case 6:case 7:break;case 8:l.type="subscribed",this.onContactAgreed&&this.onContactAgreed(l),null===(o=this.eventHandler)||void 0===o||o.dispatch("onContactAgreed",l);break;case 9:l.type="unsubscribed",this.onContactRefuse&&this.onContactRefuse(l),null===(a=this.eventHandler)||void 0===a||a.dispatch("onContactRefuse",l);break;default:i.kg.error("handleRosterMsg:",c)}this.onPresence&&l.type&&this.onPresence(l)}};t.Z=a},7288:function(e,t,n){"use strict";var r;n.d(t,{r:function(){return r}}),function(e){e[e.CREATE=0]="CREATE",e[e.FAIL=1]="FAIL",e[e.INPROGRESS=2]="INPROGRESS",e[e.SUCCESS=3]="SUCCESS"}(r||(r={}))},9743:function(e,t,n){"use strict";n.d(t,{E7:function(){return i},MQ:function(){return r},un:function(){return s}}),n(2222);var r=function(e){return"".concat(e.conversationType,"-").concat(e.conversationId)},i=function(e){var t=e.isRecallSelfMsg,n=e.conversation,r=e.recalledMsgTime,i=n.unReadCount,s=void 0===i?0:i,o=n.unreadCountClearTimestamp;return t||(void 0===o?0:o)>r?s:s&&s>0?s-1:0},s=function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}},7360:function(e,t,n){"use strict";function r(){console.log&&(console.log.apply?console.log.apply(console,Array.prototype.slice.call(arguments)):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}n.d(t,{kg:function(){return p}}),n(7042),n(2222),n(8309),n(9600),n(6992),n(1539),n(8783),n(3948),n(285),n(1637),n(4812),n(3710),n(9554),n(2772),n(4916),n(2526),n(1817),n(2165);var i="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var o,a=function(){},c={};!function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));var l=function(){function e(e,t,n){this.name=e||"defaultLogger",this.currentLevel=0,this.useCookiePersist=!1,this.storageLogLevelKey="loglevel",this.levels=o,this.logMethods=["trace","debug","info","warn","error"],this.methodFactory=n||this.defaultMethodFactory;var r=this._getPersistedLevel();null==r&&(r=null===t?"WARN":t),this.logs=[],this.config={useCache:!1,maxCache:3145728,color:"",background:""},this.logBytes=0,this.setLevel(r,!1,"")}return e.prototype.setConfig=function(e){this.config=e},e.prototype.getLevel=function(){return this.currentLevel},e.prototype.setLevel=function(e,t,n){if("string"==typeof e&&(e=o[e]),void 0===e&&(e=0),!("number"==typeof e&&e>=0&&e<=this.levels.SILENT))throw Error("log.setLevel() called with invalid level: "+e);if(this.currentLevel=e,!1!==t&&this._persistLevel(e),this.replaceLoggingMethods(e,n),"undefined"==typeof console&&e<o.SILENT)throw Error("No console available for logging")},e.prototype.setDefaultLevel=function(e){this._getPersistedLevel()||this.setLevel(e,!1,"")},e.prototype.enableAll=function(e){this.setLevel(this.levels.TRACE,!0,"")},e.prototype.disableAll=function(e){this.setLevel(this.levels.SILENT,!0,"")},e.prototype.getLogs=function(){return this.logs},e.prototype.download=function(){if("undefined"!=typeof window&&"undefined"!=typeof document){var e=this.getLogs().join("\n"),t=new Blob([e],{type:"text/plain;charset=UTF-8"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=n,r.setAttribute("download","sdklog"),document.body.appendChild(r),r.click()}},e.prototype._bindMethod=function(e,t,n){var r=this,i=e[t],s=this.getTime();if(n)return this._cacheLog;if("function"==typeof i.bind)return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var o=r.getTime();i.call.apply(i,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e,"".concat(o," IM SDK [").concat("log"===t?"debug":t,"]: ")],n,!1)),r.onLog&&r.onLog({time:o,level:"log"===t?"debug":t,logs:n})};try{return Function.prototype.bind.call(i,e,"".concat(s," IM SDK [").concat("log"===t?"debug":t,"]: "))}catch(t){return function(){return Function.prototype.apply.apply(i,[e,arguments])}}},e.prototype.getTime=function(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()},e.prototype._cacheLog=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(new Date).toLocaleString()+": ",r="";e.forEach((function(e){"object"===s(e)?r+=JSON.stringify(e)+" ":r+=e+" "})),this._cacheLogCall(n+r)},e.prototype._cacheLogCall=function(e){var t=d(e),n=this.logBytes+t,r=this.config.maxCache;if(!(t>=r)){if(n<r)this.logBytes+=t;else for(var i=n-r,s=0;s<i;){var o=this.logs.shift();void 0!==o&&(s+=d(o))}this.logs.push(e)}},e.prototype._getPersistedLevel=function(){var e;if("undefined"==typeof window)return 5;if("undefined"===(e=window&&window.localStorage&&window.localStorage[this.storageLogLevelKey])){var t=window.document.cookie,n=t.indexOf(encodeURIComponent(this.storageLogLevelKey));-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}return e||5},e.prototype._persistLevel=function(e){var t=this.logMethods[e]||"SILENT";"undefined"!=typeof window&&(window.localStorage&&(window.localStorage[this.storageLogLevelKey]=t),this.useCookiePersist&&(window.document.cookie=encodeURIComponent(this.storageLogLevelKey)+"="+t+";"))},e.prototype.replaceLoggingMethods=function(e,t){for(var n=0;n<this.logMethods.length;n++){var r=this.logMethods[n];this[r]=n<e?a:this.methodFactory(r,e,t)}this.log=this.debug},e.prototype.defaultMethodFactory=function(e,t,n){return this.realMethod(e)||this.enableLoggingWhenConsoleArrives.apply(this,[e,t,n])},e.prototype.realMethod=function(e){return"debug"===e&&(e="log"),"undefined"!=typeof console&&("trace"===e&&i?r:void 0!==console[e]?this._bindMethod(console,e,this.config.useCache):void 0!==console.log?this._bindMethod(console,"log",this.config.useCache):a)},e.prototype.enableLoggingWhenConsoleArrives=function(e,t,n){return function(){"undefined"!=typeof console&&(this.replaceLoggingMethods.call(this,t,n),this[e].apply(this,arguments))}.bind(this)},e}();function d(e){for(var t=e.length,n=0;n<e.length;n++)e.charCodeAt(n)>255&&t++;return t}var u=new l;u.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");return this};var h="undefined"!=typeof window?window.log:void 0;u.noConflict=function(){return"undefined"!=typeof window&&window.log===u&&(window.log=h),u},u.getLoggers=function(){return c};var p=u},2449:function(e,t,n){"use strict";n.d(t,{Message:function(){return g}});var r=n(4370),i=function(){function e(e){var t=e.id;this.id=t,this.type=e.type}return e.prototype.set=function(e){this.body={id:this.id,ackId:e.id,type:"read",to:e.to,from:e.from||"",chatType:e.chatType}},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType,ackId:e.id,type:"read",to:e.to,from:e.from||"",ackContent:e.ackContent,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}(),s=function(){function e(e){this.id=e.id,this.type=e.type}return e.prototype.set=function(e){this.body={id:this.id,ackId:e.ackId,type:"delivery",to:e.to,from:e.from||""}},e.create=function(e){return{id:r.P6.getUniqueId(),ackId:e.ackId,type:"delivery",to:e.to,from:e.from||"",isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}(),o=(n(3843),n(3710),function(){function e(e){var t=e.type,n=e.id;this.id=n,this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"channel",to:e.to,from:e.from||"",time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),type:"channel",chatType:e.chatType||"singleChat",to:e.to,from:e.from||"",time:Date.now(),isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}()),a=(n(9753),function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t,this.value=""}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"txt",to:e.to,msg:e.msg,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),isChatThread:e.isChatThread},this.value=e.msg},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){var t,n;return(null===(t=e.msgConfig)||void 0===t?void 0:t.languages)&&Array.isArray(null===(n=e.msgConfig)||void 0===n?void 0:n.languages),{type:"txt",id:r.P6.getUniqueId(),msg:e.msg,to:e.to,from:e.from||"",chatType:e.chatType,ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}()),c=function(){function e(e){var t=e.type,n=e.id;this.id=n||r.P6.getUniqueId(),this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"cmd",to:e.to,action:e.action,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),type:"cmd",to:e.to,from:e.from||"",chatType:e.chatType||"singleChat",action:e.action,time:Date.now(),ext:e.ext,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),l=function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"custom",to:e.to,customEvent:e.customEvent,customExts:e.customExts,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType||"singleChat",type:"custom",to:e.to,customEvent:e.customEvent,customExts:e.customExts,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),d=function(){function e(e){var t=e.type,n=e.id;this.id=n||r.P6.getUniqueId(),this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"loc",to:e.to,addr:e.addr,buildingName:e.buildingName,lat:e.lat,lng:e.lng,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType||"singleChat",type:"loc",to:e.to,addr:e.addr,buildingName:e.buildingName,lat:e.lat,lng:e.lng,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),u=function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&r.P6.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"img",file:e.file,width:e.width,height:e.height,to:e.to,from:e.from||"",roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType,type:"img",url:e.url,width:e.width,height:e.height,file:e.file,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,file_length:e.file_length,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList,thumbnailWidth:e.thumbnailWidth,thumbnailHeight:e.thumbnailHeight}},e}(),h=function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&r.P6.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"audio",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType,type:"audio",filename:e.filename,length:e.length,file:e.file,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,file_length:e.file_length,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),p=function(){function e(e){var t=e.type,n=e.id;this.id=n,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&r.P6.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"video",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),apiUrl:e.apiUrl,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType||"singleChat",type:"video",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),f=function(){function e(e){var t=e.type,n=e.id;this.id=n,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&r.P6.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"file",file:e.file,filename:e.filename,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:r.P6.getUniqueId(),chatType:e.chatType||"singleChat",type:"file",file:e.file,filename:e.filename,fileInputId:e.fileInputId,file_length:e.file_length,to:e.to,from:e.from||"",ext:e.ext,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),m=function(){function e(e){var t=e.type,n=e.id||r.P6.getUniqueId();this.id=n,this.type=t,this.value=""}return e.create=function(e){return{type:"combine",id:r.P6.getUniqueId(),to:e.to,from:e.from||"",chatType:e.chatType,ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList,compatibleText:e.compatibleText,title:e.title,summary:e.summary,messageList:e.messageList,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete}},e}(),g=function(){function e(t,n){return this.type=t,this.id=n||r.P6.getUniqueId(),e.createOldMsg({type:t,id:this.id})}return e.createOldMsg=function(e){switch(e.type){case"read":return new i({type:"read",id:e.id});case"delivery":return new s({type:"delivery",id:e.id});case"channel":return new o({type:"channel",id:e.id});case"txt":return new a({type:"txt",id:e.id});case"cmd":return new c({type:"cmd",id:e.id});case"custom":return new l({type:"custom",id:e.id});case"loc":return new d({type:"loc",id:e.id});case"img":return new u({type:"img",id:e.id});case"audio":return new h({type:"audio",id:e.id});case"video":return new p({type:"video",id:e.id});case"file":return new f({type:"file",id:e.id})}},e.create=function(e){return"txt"!==(t=e).type||"version"in t?function(e){return"img"===e.type&&!("version"in e)}(e)?u.create(e):function(e){return"cmd"===e.type&&!("version"in e)}(e)?c.create(e):function(e){return"file"===e.type&&!("version"in e)}(e)?f.create(e):function(e){return"audio"===e.type&&!("version"in e)}(e)?h.create(e):function(e){return"video"===e.type&&!("version"in e)}(e)?p.create(e):function(e){return"custom"===e.type&&!("version"in e)}(e)?l.create(e):function(e){return"loc"===e.type&&!("version"in e)}(e)?d.create(e):function(e){return"channel"===e.type&&!("version"in e)}(e)?o.create(e):function(e){return"delivery"===e.type&&!("version"in e)}(e)?s.create(e):function(e){return"read"===e.type&&!("version"in e)}(e)?i.create(e):function(e){return"combine"===e.type&&!("version"in e)}(e)?m.create(e):{}:a.create(e);var t},e.prototype.set=function(e){},e}()},5531:function(e,t,n){"use strict";var r;n.d(t,{E:function(){return r}}),function(e){e[e.REQUEST_SUCCESS=0]="REQUEST_SUCCESS",e[e.REQUEST_TIMEOUT=-1]="REQUEST_TIMEOUT",e[e.REQUEST_UNKNOWN=-2]="REQUEST_UNKNOWN",e[e.REQUEST_PARAMETER_ERROR=-3]="REQUEST_PARAMETER_ERROR",e[e.REQUEST_ABORT=-4]="REQUEST_ABORT",e[e.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR=0]="WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_OPEN_ERROR=1]="WEBIM_CONNCTION_OPEN_ERROR",e[e.WEBIM_CONNCTION_AUTH_ERROR=2]="WEBIM_CONNCTION_AUTH_ERROR",e[e.WEBIM_CONNCTION_OPEN_USERGRID_ERROR=3]="WEBIM_CONNCTION_OPEN_USERGRID_ERROR",e[e.WEBIM_CONNCTION_ATTACH_ERROR=4]="WEBIM_CONNCTION_ATTACH_ERROR",e[e.WEBIM_CONNCTION_ATTACH_USERGRID_ERROR=5]="WEBIM_CONNCTION_ATTACH_USERGRID_ERROR",e[e.WEBIM_CONNCTION_REOPEN_ERROR=6]="WEBIM_CONNCTION_REOPEN_ERROR",e[e.WEBIM_CONNCTION_SERVER_CLOSE_ERROR=7]="WEBIM_CONNCTION_SERVER_CLOSE_ERROR",e[e.WEBIM_CONNCTION_SERVER_ERROR=8]="WEBIM_CONNCTION_SERVER_ERROR",e[e.WEBIM_CONNCTION_IQ_ERROR=9]="WEBIM_CONNCTION_IQ_ERROR",e[e.WEBIM_CONNCTION_PING_ERROR=10]="WEBIM_CONNCTION_PING_ERROR",e[e.WEBIM_CONNCTION_NOTIFYVERSION_ERROR=11]="WEBIM_CONNCTION_NOTIFYVERSION_ERROR",e[e.WEBIM_CONNCTION_GETROSTER_ERROR=12]="WEBIM_CONNCTION_GETROSTER_ERROR",e[e.WEBIM_CONNCTION_CROSSDOMAIN_ERROR=13]="WEBIM_CONNCTION_CROSSDOMAIN_ERROR",e[e.WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES=14]="WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES",e[e.WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR=15]="WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR",e[e.WEBIM_CONNCTION_DISCONNECTED=16]="WEBIM_CONNCTION_DISCONNECTED",e[e.WEBIM_CONNCTION_AJAX_ERROR=17]="WEBIM_CONNCTION_AJAX_ERROR",e[e.WEBIM_CONNCTION_JOINROOM_ERROR=18]="WEBIM_CONNCTION_JOINROOM_ERROR",e[e.WEBIM_CONNCTION_GETROOM_ERROR=19]="WEBIM_CONNCTION_GETROOM_ERROR",e[e.WEBIM_CONNCTION_GETROOMINFO_ERROR=20]="WEBIM_CONNCTION_GETROOMINFO_ERROR",e[e.WEBIM_CONNCTION_GETROOMMEMBER_ERROR=21]="WEBIM_CONNCTION_GETROOMMEMBER_ERROR",e[e.WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR=22]="WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR",e[e.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR=23]="WEBIM_CONNCTION_LOAD_CHATROOM_ERROR",e[e.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR=24]="WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR",e[e.WEBIM_CONNCTION_JOINCHATROOM_ERROR=25]="WEBIM_CONNCTION_JOINCHATROOM_ERROR",e[e.WEBIM_CONNCTION_QUITCHATROOM_ERROR=26]="WEBIM_CONNCTION_QUITCHATROOM_ERROR",e[e.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR=27]="WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR=28]="WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR=29]="WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR=30]="WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_CALLBACK_INNER_ERROR=31]="WEBIM_CONNCTION_CALLBACK_INNER_ERROR",e[e.WEBIM_CONNCTION_CLIENT_OFFLINE=32]="WEBIM_CONNCTION_CLIENT_OFFLINE",e[e.WEBIM_CONNCTION_CLIENT_LOGOUT=33]="WEBIM_CONNCTION_CLIENT_LOGOUT",e[e.WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR=34]="WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR",e[e.WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP=35]="WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP",e[e.WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP=36]="WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP",e[e.WEBIM_CONNECTION_ACCEPT_JOIN_GROUP=37]="WEBIM_CONNECTION_ACCEPT_JOIN_GROUP",e[e.WEBIM_CONNECTION_DECLINE_JOIN_GROUP=38]="WEBIM_CONNECTION_DECLINE_JOIN_GROUP",e[e.WEBIM_CONNECTION_CLOSED=39]="WEBIM_CONNECTION_CLOSED",e[e.WEBIM_CONNECTION_ERROR=40]="WEBIM_CONNECTION_ERROR",e[e.MAX_LIMIT=50]="MAX_LIMIT",e[e.MESSAGE_NOT_FOUND=51]="MESSAGE_NOT_FOUND",e[e.NO_PERMISSION=52]="NO_PERMISSION",e[e.OPERATION_UNSUPPORTED=53]="OPERATION_UNSUPPORTED",e[e.OPERATION_NOT_ALLOWED=54]="OPERATION_NOT_ALLOWED",e[e.LOCAL_DB_OPERATION_FAILED=55]="LOCAL_DB_OPERATION_FAILED",e[e.WEBIM_UPLOADFILE_BROWSER_ERROR=100]="WEBIM_UPLOADFILE_BROWSER_ERROR",e[e.WEBIM_UPLOADFILE_ERROR=101]="WEBIM_UPLOADFILE_ERROR",e[e.WEBIM_UPLOADFILE_NO_LOGIN=102]="WEBIM_UPLOADFILE_NO_LOGIN",e[e.WEBIM_UPLOADFILE_NO_FILE=103]="WEBIM_UPLOADFILE_NO_FILE",e[e.WEBIM_DOWNLOADFILE_ERROR=200]="WEBIM_DOWNLOADFILE_ERROR",e[e.WEBIM_DOWNLOADFILE_NO_LOGIN=201]="WEBIM_DOWNLOADFILE_NO_LOGIN",e[e.WEBIM_DOWNLOADFILE_BROWSER_ERROR=202]="WEBIM_DOWNLOADFILE_BROWSER_ERROR",e[e.PARSE_FILE_ERROR=203]="PARSE_FILE_ERROR",e[e.USER_NOT_FOUND=204]="USER_NOT_FOUND",e[e.MESSAGE_PARAMETER_ERROR=205]="MESSAGE_PARAMETER_ERROR",e[e.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE=206]="WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE",e[e.WEBIM_CONNCTION_USER_REMOVED=207]="WEBIM_CONNCTION_USER_REMOVED",e[e.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD=216]="WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD",e[e.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE=217]="WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE",e[e.USER_MUTED_BY_ADMIN=219]="USER_MUTED_BY_ADMIN",e[e.USER_NOT_FRIEND=221]="USER_NOT_FRIEND",e[e.WEBIM_MESSAGE_REC_TEXT=300]="WEBIM_MESSAGE_REC_TEXT",e[e.WEBIM_MESSAGE_REC_TEXT_ERROR=301]="WEBIM_MESSAGE_REC_TEXT_ERROR",e[e.WEBIM_MESSAGE_REC_EMOTION=302]="WEBIM_MESSAGE_REC_EMOTION",e[e.WEBIM_MESSAGE_REC_PHOTO=303]="WEBIM_MESSAGE_REC_PHOTO",e[e.WEBIM_MESSAGE_REC_AUDIO=304]="WEBIM_MESSAGE_REC_AUDIO",e[e.WEBIM_MESSAGE_REC_AUDIO_FILE=305]="WEBIM_MESSAGE_REC_AUDIO_FILE",e[e.WEBIM_MESSAGE_REC_VEDIO=306]="WEBIM_MESSAGE_REC_VEDIO",e[e.WEBIM_MESSAGE_REC_VEDIO_FILE=307]="WEBIM_MESSAGE_REC_VEDIO_FILE",e[e.WEBIM_MESSAGE_REC_FILE=308]="WEBIM_MESSAGE_REC_FILE",e[e.WEBIM_MESSAGE_SED_TEXT=309]="WEBIM_MESSAGE_SED_TEXT",e[e.WEBIM_MESSAGE_SED_EMOTION=310]="WEBIM_MESSAGE_SED_EMOTION",e[e.WEBIM_MESSAGE_SED_PHOTO=311]="WEBIM_MESSAGE_SED_PHOTO",e[e.WEBIM_MESSAGE_SED_AUDIO=312]="WEBIM_MESSAGE_SED_AUDIO",e[e.WEBIM_MESSAGE_SED_AUDIO_FILE=313]="WEBIM_MESSAGE_SED_AUDIO_FILE",e[e.WEBIM_MESSAGE_SED_VEDIO=314]="WEBIM_MESSAGE_SED_VEDIO",e[e.WEBIM_MESSAGE_SED_VEDIO_FILE=315]="WEBIM_MESSAGE_SED_VEDIO_FILE",e[e.WEBIM_MESSAGE_SED_FILE=316]="WEBIM_MESSAGE_SED_FILE",e[e.WEBIM_MESSAGE_SED_ERROR=317]="WEBIM_MESSAGE_SED_ERROR",e[e.STATUS_INIT=400]="STATUS_INIT",e[e.STATUS_DOLOGIN_USERGRID=401]="STATUS_DOLOGIN_USERGRID",e[e.STATUS_DOLOGIN_IM=402]="STATUS_DOLOGIN_IM",e[e.STATUS_OPENED=403]="STATUS_OPENED",e[e.STATUS_CLOSING=404]="STATUS_CLOSING",e[e.STATUS_CLOSED=405]="STATUS_CLOSED",e[e.STATUS_ERROR=406]="STATUS_ERROR",e[e.SERVER_BUSY=500]="SERVER_BUSY",e[e.MESSAGE_INCLUDE_ILLEGAL_CONTENT=501]="MESSAGE_INCLUDE_ILLEGAL_CONTENT",e[e.MESSAGE_EXTERNAL_LOGIC_BLOCKED=502]="MESSAGE_EXTERNAL_LOGIC_BLOCKED",e[e.SERVER_UNKNOWN_ERROR=503]="SERVER_UNKNOWN_ERROR",e[e.MESSAGE_RECALL_TIME_LIMIT=504]="MESSAGE_RECALL_TIME_LIMIT",e[e.SERVICE_NOT_ENABLED=505]="SERVICE_NOT_ENABLED",e[e.SERVICE_NOT_ALLOW_MESSAGING=506]="SERVICE_NOT_ALLOW_MESSAGING",e[e.SERVICE_NOT_ALLOW_MESSAGING_MUTE=507]="SERVICE_NOT_ALLOW_MESSAGING_MUTE",e[e.MESSAGE_MODERATION_BLOCKED=508]="MESSAGE_MODERATION_BLOCKED",e[e.MESSAGE_CURRENT_LIMITING=509]="MESSAGE_CURRENT_LIMITING",e[e.MESSAGE_WEBSOCKET_DISCONNECTED=510]="MESSAGE_WEBSOCKET_DISCONNECTED",e[e.MESSAGE_SIZE_LIMIT=511]="MESSAGE_SIZE_LIMIT",e[e.GROUP_NOT_EXIST=605]="GROUP_NOT_EXIST",e[e.GROUP_NOT_JOINED=602]="GROUP_NOT_JOINED",e[e.GROUP_MEMBERS_FULL=606]="GROUP_MEMBERS_FULL",e[e.PERMISSION_DENIED=603]="PERMISSION_DENIED",e[e.WEBIM_LOAD_MSG_ERROR=604]="WEBIM_LOAD_MSG_ERROR",e[e.GROUP_ALREADY_JOINED=601]="GROUP_ALREADY_JOINED",e[e.GROUP_MEMBERS_LIMIT=607]="GROUP_MEMBERS_LIMIT",e[e.GROUP_IS_DISABLED=608]="GROUP_IS_DISABLED",e[e.GROUP_MEMBER_ATTRIBUTES_SET_FAILED=609]="GROUP_MEMBER_ATTRIBUTES_SET_FAILED",e[e.REST_PARAMS_STATUS=700]="REST_PARAMS_STATUS",e[e.CHATROOM_NOT_JOINED=702]="CHATROOM_NOT_JOINED",e[e.CHATROOM_MEMBERS_FULL=704]="CHATROOM_MEMBERS_FULL",e[e.CHATROOM_NOT_EXIST=705]="CHATROOM_NOT_EXIST",e[e.SDK_RUNTIME_ERROR=999]="SDK_RUNTIME_ERROR",e[e.PRESENCE_PARAM_EXCEED=1100]="PRESENCE_PARAM_EXCEED",e[e.REACTION_ALREADY_ADDED=1101]="REACTION_ALREADY_ADDED",e[e.REACTION_CREATING=1102]="REACTION_CREATING",e[e.REACTION_OPERATION_IS_ILLEGAL=1103]="REACTION_OPERATION_IS_ILLEGAL",e[e.TRANSLATION_NOT_VALID=1200]="TRANSLATION_NOT_VALID",e[e.TRANSLATION_TEXT_TOO_LONG=1201]="TRANSLATION_TEXT_TOO_LONG",e[e.TRANSLATION_FAILED=1204]="TRANSLATION_FAILED",e[e.THREAD_NOT_EXIST=1300]="THREAD_NOT_EXIST",e[e.THREAD_ALREADY_EXIST=1301]="THREAD_ALREADY_EXIST",e[e.MODIFY_MESSAGE_NOT_EXIST=1302]="MODIFY_MESSAGE_NOT_EXIST",e[e.MODIFY_MESSAGE_FORMAT_ERROR=1303]="MODIFY_MESSAGE_FORMAT_ERROR",e[e.MODIFY_MESSAGE_FAILED=1304]="MODIFY_MESSAGE_FAILED",e[e.CONVERSATION_NOT_EXIST=1400]="CONVERSATION_NOT_EXIST"}(r||(r={}))},4370:function(e,t,n){"use strict";n.d(t,{iw:function(){return g},hj:function(){return u},LR:function(){return b},cT:function(){return E},P6:function(){return S}}),n(9601),n(1539),n(8674),n(3710),n(7941),n(6699),n(7042),n(2772),n(9714),n(9653),n(6992),n(8783),n(3948),n(285),n(1637),n(8309),n(4986),n(2023);var r=n(5531),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},s=function(e,t,n,s){var o,a,c,l,d,u,h,p,f,m,g,_,v,y,E,b,T,S,w,C,R=e.response;R&&"string"==typeof R&&(R=JSON.parse(R));var I=e.status,N={elapse:s,httpCode:I,errDesc:null==R?void 0:R.error_description};if(400===I){if(40002===R.error_code)return void t({type:r.E.THREAD_ALREADY_EXIST,message:null==R?void 0:R.error_description,extraInfo:N});if(40009===R.error_code)return void t({type:r.E.OPERATION_UNSUPPORTED,message:null==R?void 0:R.error_description,extraInfo:N});if(60005===R.error_code)return void t({type:r.E.GROUP_MEMBER_ATTRIBUTES_SET_FAILED,message:(null==R?void 0:R.desc)||(null==R?void 0:R.error_description),extraInfo:N});if(60010===R.error_code)return void((null==R?void 0:R.error_description.includes("exceeds chatgroup user metadata single value limit"))?t({type:r.E.MAX_LIMIT,message:(null==R?void 0:R.desc)||R.error_description,extraInfo:N}):t({type:r.E.NO_PERMISSION,message:(null==R?void 0:R.desc)||R.error_description,extraInfo:N}));if(60011===R.error_code)return void t({type:r.E.CHATROOM_NOT_JOINED,message:null==R?void 0:R.desc,extraInfo:N});if(60006===R.error_code||60007===R.error_code||60009===R.error_code||60012===R.error_code)return void t({type:r.E.MAX_LIMIT,message:(null==R?void 0:R.desc)||(null==R?void 0:R.error_description),extraInfo:N});if(null===(o=R.error_description)||void 0===o?void 0:o.includes("are not members of this group"))return(null===(a=e.responseURL)||void 0===a?void 0:a.includes("chatgroups"))?t({type:r.E.GROUP_NOT_JOINED,data:e.response||e.responseText,message:R.error_description,extraInfo:N}):t({type:r.E.CHATROOM_NOT_JOINED,data:e.response||e.responseText,message:R.error_description,extraInfo:N}),void n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,message:null==R?void 0:R.error_description,data:e.responseText,extraInfo:N});if("the app not open presence"===(null==R?void 0:R.result))return void t({type:r.E.SERVICE_NOT_ENABLED,message:null==R?void 0:R.result,extraInfo:N});switch(null==R?void 0:R.error_description){case"the user is already operation this message":t({type:r.E.REACTION_ALREADY_ADDED,message:null==R?void 0:R.error_description,extraInfo:N});break;case"The quantity has exceeded the limit!":t({type:r.E.MAX_LIMIT,message:null==R?void 0:R.error_description,extraInfo:N});break;case"The user not in this group!":t({type:r.E.GROUP_NOT_JOINED,message:null==R?void 0:R.error_description,extraInfo:N});break;case"the user operation is illegal!":t({type:r.E.REACTION_OPERATION_IS_ILLEGAL,message:null==R?void 0:R.error_description,extraInfo:N});break;case"this appKey is not open reaction service!":case"this appKey not open message roaming":t({type:r.E.SERVICE_NOT_ENABLED,message:null==R?void 0:R.error_description,extraInfo:N});break;case"this message is creating reaction, please try again.":t({type:r.E.REACTION_CREATING,message:null==R?void 0:R.error_description,extraInfo:N});break;case"groupId can not be null!":t({type:r.E.GROUP_NOT_EXIST,message:null==R?void 0:R.error_description,extraInfo:N});break;case"The input text is too long.":t({type:r.E.TRANSLATION_TEXT_TOO_LONG,message:null==R?void 0:R.error_description,extraInfo:N});break;case"The target language is not valid.":t({type:r.E.TRANSLATION_NOT_VALID,message:null==R?void 0:R.error_description,extraInfo:N});break;case"report failed, get message by id failed":t({type:r.E.MESSAGE_NOT_FOUND,message:null==R?void 0:R.error_description,extraInfo:N});break;case"ext is too big ":t({type:r.E.PRESENCE_PARAM_EXCEED,message:null==R?void 0:R.error_description,extraInfo:N});break;case"Request body not readable.Please check content type is correct!":t({type:r.E.REQUEST_PARAMETER_ERROR,message:null==R?void 0:R.error_description,extraInfo:N});break;default:t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,message:null==R?void 0:R.error_description,data:e.responseText,extraInfo:N}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,message:null==R?void 0:R.error_description,data:e.responseText,extraInfo:N})}}else if(401===I)40001===R.error_code||60001===R.error_code||"Unable to authenticate (OAuth)"===R.error_description?t({type:r.E.NO_PERMISSION,message:null==R?void 0:R.error_description,extraInfo:N}):(n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:N}),t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:N}));else if(403===I)4e4===R.error_code||60004===R.error_code||15002===R.error_code?t({type:r.E.SERVICE_NOT_ENABLED,message:null==R?void 0:R.error_description,extraInfo:N}):40003===R.error_code||40004===R.error_code?t({type:r.E.THREAD_ALREADY_EXIST,message:null==R?void 0:R.error_description,extraInfo:N}):40005===R.error_code||40007===R.error_code||91002===R.error_code?t({type:r.E.MAX_LIMIT,message:null==R?void 0:R.error_description,extraInfo:N}):60002===R.error_code&&t({type:r.E.PERMISSION_DENIED,message:null==R?void 0:R.error_description,extraInfo:N}),"group member list is full!"===R.error_description?(null===(c=e.responseURL)||void 0===c?void 0:c.includes("chatgroups"))?t({type:r.E.GROUP_MEMBERS_FULL,data:e.response||e.responseText,message:R.error_description,extraInfo:N}):t({type:r.E.CHATROOM_MEMBERS_FULL,data:e.response||e.responseText,message:R.error_description,extraInfo:N}):(null===(l=R.error_description)||void 0===l?void 0:l.includes(R.error_description.includes("already in group")))?(null===(d=e.responseURL)||void 0===d?void 0:d.includes("chatgroups"))&&t({type:r.E.GROUP_ALREADY_JOINED,data:e.response||e.responseText,message:R.error_description,extraInfo:N}):(null===(u=R.error_description)||void 0===u?void 0:u.includes("are not members of this group"))?(null===(h=e.responseURL)||void 0===h?void 0:h.includes("chatgroups"))?t({type:r.E.GROUP_NOT_JOINED,data:e.response||e.responseText,message:R.error_description,extraInfo:N}):t({type:r.E.CHATROOM_NOT_JOINED,data:e.response||e.responseText,message:R.error_description,extraInfo:N}):(null===(p=R.error_description)||void 0===p?void 0:p.includes("service not open!"))||(null===(f=R.error_description)||void 0===f?void 0:f.includes("message report not open"))||(null===(m=R.error_description)||void 0===m?void 0:m.includes("messageroaming function not open"))?t({type:r.E.SERVICE_NOT_ENABLED,data:e.response||e.responseText,message:R.error_description,extraInfo:N}):(null===(g=R.error_description)||void 0===g?void 0:g.includes("members size is greater than max user size !"))?t({type:r.E.GROUP_MEMBERS_LIMIT,data:e.response||e.responseText,message:R.error_description,extraInfo:N}):(null===(_=R.error_description)||void 0===_?void 0:_.includes("can not operate this group, reason: group is disabled"))?t({type:r.E.GROUP_IS_DISABLED,data:e.response||e.responseText,message:R.error_description,extraInfo:N}):t({type:r.E.PERMISSION_DENIED,data:e.response||e.responseText,message:"permission denied",extraInfo:i(i({},N),{errDesc:"permission denied"})}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:N});else if(404===I)40011===R.error_code?t({type:r.E.THREAD_NOT_EXIST,message:null==R?void 0:R.error_description,extraInfo:N}):40012===R.error_code?t({type:r.E.NO_PERMISSION,message:null==R?void 0:R.error_description,extraInfo:N}):60003===R.error_code||20004===R.error_code?t({type:r.E.GROUP_NOT_JOINED,message:null==R?void 0:R.error_description,extraInfo:N}):91001===R.error_code&&t({type:r.E.CONVERSATION_NOT_EXIST,message:null==R?void 0:R.error_description,extraInfo:N}),(null===(v=R.error_description)||void 0===v?void 0:v.includes("do not find this group"))||(null===(y=R.error_description)||void 0===y?void 0:y.includes("does not exist"))?(null===(E=e.responseURL)||void 0===E?void 0:E.includes("chatgroups"))?t({type:r.E.GROUP_NOT_EXIST,data:e.response||e.responseText,message:"The chat room dose not exist.",extraInfo:i(i({},N),{errDesc:"The chat room dose not exist."})}):t({type:r.E.CHATROOM_NOT_EXIST,data:e.response||e.responseText,message:"The chat room dose not exist.",extraInfo:i(i({},N),{errDesc:"The chat room dose not exist."})}):(null===(b=R.error_description)||void 0===b?void 0:b.includes("username"))&&(null===(T=R.error_description)||void 0===T?void 0:T.includes("doesn't exist!'"))||(null===(S=R.error_description)||void 0===S?void 0:S.includes("user not found"))?t({type:r.E.USER_NOT_FOUND,data:e.response||e.responseText,message:R.error_description,extraInfo:N}):t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.response||e.responseText,message:e.responseText,extraInfo:N}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.response||e.responseText,message:e.responseText,extraInfo:N});else if(406===I)90004===R.error_code&&t({type:r.E.OPERATION_NOT_ALLOWED,message:null==R?void 0:R.error_description,extraInfo:N});else if(429===I||503===I){if(null===(w=R.error_description)||void 0===w?void 0:w.includes("The request has reached the maximum limit"))return void t({type:r.E.MAX_LIMIT,message:e.responseText,extraInfo:N});t({type:r.E.SERVER_BUSY,data:e.response||e.responseText,message:"Server is busy.",extraInfo:i(i({},N),{errDesc:"Server is busy."})}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"Server is busy.",extraInfo:i(i({},N),{errDesc:"Server is busy."})})}else if(500===I){if(40006===R.error_code||40008===R.error_code||40010===R.error_code)return void t({type:r.E.SERVER_UNKNOWN_ERROR,message:null==R?void 0:R.error_description,extraInfo:N});if(90005===R.error_code||99999===R.error_code)return void t({type:r.E.REQUEST_UNKNOWN,message:null==R?void 0:R.error_description,extraInfo:N});if(null===(C=R.error_description)||void 0===C?void 0:C.includes("translte failed!"))return void t({type:r.E.TRANSLATION_FAILED,message:e.responseText,extraInfo:N});t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"",extraInfo:N}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"",extraInfo:N})}else t({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:i(i({},N),{errDesc:"ajax error"})}),n({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:i(i({},N),{errDesc:"ajax error"})})},o=n(1595),a=n(2071),c=n(7360),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)},d=function(){};function u(e,t){var n,i=this;return v().platform===g.WEB?new Promise((function(t,i){var o=e.dataType||"text",a=e.success||d,l=e.error||d,u=new XMLHttpRequest;u.ontimeout=function(){i({type:r.E.REQUEST_TIMEOUT,message:"Request Timeout",errorType:"timeout_error",xhr:u})},u.onerror=function(){i({type:r.E.REQUEST_UNKNOWN,message:"Request Unknow Error",errorType:"onerror",xhr:u})},u.onabort=function(){i({type:r.E.REQUEST_ABORT,message:"Request Abort",errorType:"onabort",xhr:u})},u.onreadystatechange=function(){if(4===u.readyState){var e=(new Date).getTime()-n,d=u.status||0,h={elapse:e,httpCode:d};if(200===d){S.ajaxUnconventionalErrorTimes=0;try{switch(o){case"text":return a(u.responseText),void t(u.responseText);case"json":var p=JSON.parse(u.responseText);return p.extraInfo=h,a(p),void t(p);case"xml":return u.responseXML&&u.responseXML.documentElement?(a(u.responseXML.documentElement),void t(u.responseXML.documentElement)):(l({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:u.responseText,message:"XHR.responseXML is null or XHR.responseXML.documentElement is null"}),void i({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:u.responseText,message:"XHR.responseXML is null or XHR.responseXML.documentElement is null"}));default:l({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:u.responseText,message:"Invalid dataType"}),i({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:u.responseText,message:"Invalid dataType"})}return t(u.response||u.responseText),void a(u.response||u.responseText,u)}catch(e){i(e)}return}[400,401,403,404,429,500,503].includes(d)||(c.kg.debug("rest api request fail status:",d),S.ajaxUnconventionalErrorTimes++),s(u,i,l,e)}0===u.readyState&&(l({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:u.responseText,message:"Request not initialized"}),i({type:r.E.WEBIM_CONNCTION_AJAX_ERROR,data:u.responseText,message:"Request not initialized"}))},e.responseType&&u.responseType&&(u.responseType=e.responseType),e.mimeType&&u.overrideMimeType(e.mimeType);var h=e.type||"POST",p=e.data||null,f="";if("get"===h.toLowerCase()&&p){for(var m in p)p.hasOwnProperty(m)&&(f+=m+"="+p[m]+"&");f=f?f.slice(0,-1):f,e.url+=(e.url.indexOf("?")>0?"&":"?")+(f?f+"&":f)+"_v="+(new Date).getTime(),p=null,f=""}n=(new Date).getTime(),u.open(h,e.url);var g=e.headers||{};for(var _ in g["Content-Type"]||(g["Content-Type"]="application/json"),g)g.hasOwnProperty(_)&&u.setRequestHeader(_,g[_]);u.send(p)})).then((function(n){return i.dataReport&&t&&t!==o.fI.SDK_INTERNAL&&i.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:l({isSuccess:1,requestUrl:e.url,requestName:t,requestMethod:e.type},T(n.extraInfo))}),t!==o.fI.SDK_INTERNAL&&delete n.extraInfo,"Object"===h(n)?l(l({},n),{type:r.E.REQUEST_SUCCESS}):{data:n,type:r.E.REQUEST_SUCCESS}})).catch((function(n){throw i.dataReport&&t&&t!==o.fI.SDK_INTERNAL&&i.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:l({isSuccess:0,requestUrl:e.url,requestName:t,requestMethod:e.type},T(n.extraInfo))}),t!==o.fI.SDK_INTERNAL&&delete n.extraInfo,n})):p.call(this,e,t)}function h(e){return Object.prototype.toString.call(e).slice(8,-1)}function p(e,t){var n=this;return new Promise((function(t,n){var r=e.success||d,i=e.error||d,s=e.type||"POST",o=e.data||null,c="",l=(new Date).getTime(),u=S.getEnvInfo();if("get"===s.toLowerCase()&&o){for(var h in o)o.hasOwnProperty(h)&&(c+=h+"="+o[h]+"&");c=c?c.slice(0,-1):c,e.url+=(e.url.indexOf("?")>0?"&":"?")+(c?c+"&":c)+"_v="+(new Date).getTime(),o=null,c=""}var p={url:e.url,data:e.data,method:s,headers:{},success:function(e){var s,o,a,c,d,u={elapse:(new Date).getTime()-l,httpCode:Number((null===(s=e.statusCode)||void 0===s?void 0:s.toString())||(null===(o=e.status)||void 0===o?void 0:o.toString())),errDesc:(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.error_description)||""};if("200"===(null===(c=e.statusCode)||void 0===c?void 0:c.toString())||"200"===(null===(d=e.status)||void 0===d?void 0:d.toString())){e.data.extraInfo=u;var h=e.data;r(h),t(h)}else e.extraInfo=u,i(h=e),n(h)},complete:function(){},fail:function(e){var t={elapse:(new Date).getTime()-l,httpCode:a.Tp,errDesc:"request:fail"};e.extraInfo=t,e.data={error:"request:fail",error_description:"request:fail"},i(e),n(e)}};if("zfb"===u.platform||"dd"===u.platform?p.headers=e.headers:p.header=e.headers,"dd"===u.platform)return dd.httpRequest(p);u.global.request(p)})).then((function(i){return n.dataReport&&t&&t!==o.fI.SDK_INTERNAL&&n.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:l({isSuccess:1,requestUrl:e.url,requestName:t,requestMethod:e.type},T(i.extraInfo))}),t!==o.fI.SDK_INTERNAL&&delete i.extraInfo,"Object"===h(i)?l(l({},i),{type:r.E.REQUEST_SUCCESS}):{data:i,type:r.E.REQUEST_SUCCESS}})).catch((function(r){throw n.dataReport&&t&&t!==o.fI.SDK_INTERNAL&&n.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:l({isSuccess:0,requestUrl:e.url,requestName:t,requestMethod:e.type},T(r.extraInfo))}),t!==o.fI.SDK_INTERNAL&&delete r.extraInfo,r}))}var f,m,g,_=(f=function(e,t){var n=v();if(n.platform!==g.WEB){var r=n.global,i=function(n){n.isConnected?e():t()};r.offNetworkStatusChange&&r.offNetworkStatusChange(i),r.onNetworkStatusChange&&r.onNetworkStatusChange(i)}else"undefined"!=typeof addEventListener&&(window.addEventListener("online",e),window.addEventListener("offline",t))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!f)return m;m=f.apply(void 0,e),f=null});function v(){return"undefined"!=typeof swan&&y(swan)?{platform:g.BAIDU,global:swan}:"undefined"!=typeof tt&&y(tt)?{platform:g.TT,global:tt}:"undefined"!=typeof dd&&y(dd)?{platform:g.DD,global:dd}:"undefined"!=typeof my&&y(my)?{platform:g.ZFB,global:my}:"undefined"!=typeof wx&&y(wx)?{platform:g.WX,global:wx}:"undefined"!=typeof uni&&y(uni)?{platform:g.UNI,global:uni}:"undefined"!=typeof window&&window.WebSocket?{platform:g.WEB,global:window}:{platform:g.NODE,global:n.g||{}}}function y(e){for(var t=["canIUse","getSystemInfo"],n=0,r=t.length;n<r;n++)if(!e[t[n]])return!1;return!0}function E(e,t){var n,i,s=this,a=(new Date).getTime(),c=e.accessToken;if(c){var l=e.appKey,u=[],h="",p="";if(l&&(h=(u=l.split("#"))[0],p=u[1]),h||p){var f=e.apiUrl,m=e.uploadUrl||f+"/"+h+"/"+p+"/chatfiles";if((null===(i=null===(n=null==e?void 0:e.file)||void 0===n?void 0:n.data)||void 0===i?void 0:i.size)<=0)e.onFileUploadError&&e.onFileUploadError({type:r.E.WEBIM_UPLOADFILE_ERROR,message:"fileSize must be greater than 0"});else{var g=new XMLHttpRequest;g.upload&&g.upload.addEventListener("progress",e.onFileUploadProgress||d,!1),g.addEventListener("abort",e.onFileUploadCanceled||d,!1),g.addEventListener("error",(function(e){v({type:r.E.WEBIM_UPLOADFILE_ERROR,data:g})}),!1),g.addEventListener("load",(function(n){try{var i=JSON.parse(g.responseText);if(400===g.status)return v({type:r.E.WEBIM_UPLOADFILE_ERROR,data:i}),!1;try{!function(n){var r=(new Date).getTime()-a;s.dataReport&&t&&[o.fI.UPLOAD_MSG_ATTACH,o.fI.UPLOAD_CHATROOM_FILE,o.fI.UPLOAD_GROUP_FILE].includes(t)&&s.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:(null==n?void 0:n.error)?0:1,requestMethod:"POST",requestName:t,requestElapse:r,requestUrl:m,code:g.status,codeDesc:(null==n?void 0:n.error_description)||""}}),e.onFileUploadComplete&&e.onFileUploadComplete(n)}(i)}catch(n){v({type:r.E.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:n})}}catch(n){v({type:r.E.WEBIM_UPLOADFILE_ERROR,data:g.responseText})}}),!1),g.open("POST",m),g.setRequestHeader("restrict-access","true"),g.setRequestHeader("Accept","*/*"),g.setRequestHeader("Authorization","Bearer "+c);var _=new FormData;_.append("file",e.file.data),e.thumbnailWidth&&_.append("thumbnail-width",e.thumbnailWidth+""),e.thumbnailHeight&&_.append("thumbnail-height",e.thumbnailHeight+""),g.send(_)}}else e.onFileUploadError&&e.onFileUploadError({type:r.E.WEBIM_UPLOADFILE_ERROR,message:"AppKey illegal"})}else e.onFileUploadError&&e.onFileUploadError({type:r.E.WEBIM_UPLOADFILE_NO_LOGIN,message:"AccessToken cannot be empty"});function v(n){var r=(new Date).getTime()-a;s.dataReport&&t&&[o.fI.UPLOAD_MSG_ATTACH,o.fI.UPLOAD_CHATROOM_FILE,o.fI.UPLOAD_GROUP_FILE].includes(t)&&s.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:0,requestMethod:"POST",requestName:t,requestElapse:r,requestUrl:m,code:(null==g?void 0:g.status)||0,codeDesc:"upload file error"}}),e.onFileUploadError&&e.onFileUploadError(n)}}function b(e,t){e.onFileDownloadComplete=e.onFileDownloadComplete||d,e.onFileDownloadError=e.onFileDownloadError||d;var n=(new Date).getTime(),i=new XMLHttpRequest,s=this;i.addEventListener("load",(function(r){var a=(new Date).getTime()-n;s.dataReport&&t&&t===o.fI.DOWN_GROUP_FILE&&s.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:200===i.status?1:0,requestMethod:"POST",requestName:t,requestElapse:a,requestUrl:null==e?void 0:e.url,code:i.status,codeDesc:200===i.status?"":"download file error"}}),e.onFileDownloadComplete&&e.onFileDownloadComplete(i.response)}),!1),i.addEventListener("error",(function(a){var c=(new Date).getTime()-n;s.dataReport&&t&&t===o.fI.DOWN_GROUP_FILE&&s.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:0,requestMethod:"POST",requestName:t,requestElapse:c,requestUrl:null==e?void 0:e.url,code:(null==i?void 0:i.status)||0,codeDesc:"download file error"}}),e.onFileDownloadError&&e.onFileDownloadError({type:r.E.WEBIM_DOWNLOADFILE_ERROR,id:e.id,xhr:i})}),!1);var a=e.method||"GET",c=e.responseType||"blob",l=e.mimeType||"text/plain; charset=x-user-defined";i.open(a,e.url),"undefined"!=typeof Blob?i.responseType=c:i.overrideMimeType(l);var u={"X-Requested-With":"XMLHttpRequest",Accept:"application/octet-stream","share-secret":e.secret,Authorization:"Bearer "+this.context.accessToken},h=e.headers||{};for(var p in h)u[p]=h[p];for(var p in u)u[p]&&i.setRequestHeader(p,u[p]);i.send(null)}function T(e){void 0===e&&(e={});var t=e.elapse,n=void 0===t?0:t,r=e.httpCode,i=void 0===r?0:r,s=e.errDesc;return{requestElapse:n,code:i,codeDesc:void 0===s?"":s}}!function(e){e.WEB="web",e.WX="wx",e.ZFB="zfb",e.DD="dd",e.TT="tt",e.BAIDU="baidu",e.QUICK_APP="quick_app",e.UNI="uni",e.NODE="node"}(g||(g={}));var S={autoIncrement:0,ajaxUnconventionalErrorTimes:0,ajax:u,getUniqueId:function(){this.autoIncrement?this.autoIncrement++:this.autoIncrement=1;var e=new Date,t=new Date(2010,1,1);return(e.getTime()-t.getTime()+this.autoIncrement).toString()},getFileUrl:function(e){var t={url:"",filename:"",filetype:"",data:{}},n="string"==typeof e?document.getElementById(e):e;if(window.URL.createObjectURL){if(!n.files)throw Error("this is not HTMLInputElement");var r=n.files;if(r.length>0){var i=r.item(0);t.data=i,t.url=window.URL.createObjectURL(i),t.filename=(null==i?void 0:i.name)||""}}else{if("string"!=typeof e)throw Error("in IE fileInputId must be string");i=document.getElementById(e).value,t.url=i;var s=i.lastIndexOf("/"),o=i.lastIndexOf("\\"),a=Math.max(s,o);t.filename=a<0?i:i.substring(a+1)}var c=t.filename.lastIndexOf(".");return-1!==c&&(t.filetype=t.filename.substring(c+1).toLowerCase()),t},uploadFile:E,flow:function(e){for(var t=e.length,n=t;n--;)if("function"!=typeof e[n])throw new TypeError("Expected a function");return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,s=t?e[i].apply(this,n):n[0];++i<t;)s=e[i].call(this,s);return s}},listenNetwork:_,getEnvInfo:v,wxRequest:p,parseDownloadResponse:function(e){if(!window||!window.URL)throw Error("parseDownloadResponse can be used in broswer only");return e&&e.type&&"application/json"===e.type||0>Object.prototype.toString.call(e).indexOf("Blob")?this.url+"?token=":window.URL.createObjectURL(e)},download:b,parseNotify:function(e){for(var t="",n=0;n<e.length;n++)t+="%"+e[n].toString(16);return JSON.parse(decodeURIComponent(t))},getExtraData:T,Uint8ArrayToString:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}}},9662:function(e,t,n){var r=n(614),i=n(6330),s=TypeError;e.exports=function(e){if(r(e))return e;throw s(i(e)+" is not a function")}},9483:function(e,t,n){var r=n(4411),i=n(6330),s=TypeError;e.exports=function(e){if(r(e))return e;throw s(i(e)+" is not a constructor")}},6077:function(e,t,n){var r=n(614),i=String,s=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw s("Can't set "+i(e)+" as a prototype")}},1223:function(e,t,n){var r=n(5112),i=n(30),s=n(3070).f,o=r("unscopables"),a=Array.prototype;null==a[o]&&s(a,o,{configurable:!0,value:i(null)}),e.exports=function(e){a[o][e]=!0}},5787:function(e,t,n){var r=n(7976),i=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw i("Incorrect invocation")}},9670:function(e,t,n){var r=n(111),i=String,s=TypeError;e.exports=function(e){if(r(e))return e;throw s(i(e)+" is not an object")}},3013:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7556:function(e,t,n){var r=n(7293);e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},260:function(e,t,n){"use strict";var r,i,s,o=n(3013),a=n(9781),c=n(7854),l=n(614),d=n(111),u=n(2597),h=n(648),p=n(6330),f=n(8880),m=n(8052),g=n(7045),_=n(7976),v=n(9518),y=n(7674),E=n(5112),b=n(9711),T=n(9909),S=T.enforce,w=T.get,C=c.Int8Array,R=C&&C.prototype,I=c.Uint8ClampedArray,N=I&&I.prototype,O=C&&v(C),A=R&&v(R),k=Object.prototype,x=c.TypeError,P=E("toStringTag"),D=b("TYPED_ARRAY_TAG"),L="TypedArrayConstructor",M=o&&!!y&&"Opera"!==h(c.opera),j=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},B=function(e){var t=v(e);if(d(t)){var n=w(t);return n&&u(n,L)?n[L]:B(t)}},V=function(e){if(!d(e))return!1;var t=h(e);return u(U,t)||u(F,t)};for(r in U)(s=(i=c[r])&&i.prototype)?S(s)[L]=i:M=!1;for(r in F)(s=(i=c[r])&&i.prototype)&&(S(s)[L]=i);if((!M||!l(O)||O===Function.prototype)&&(O=function(){throw x("Incorrect invocation")},M))for(r in U)c[r]&&y(c[r],O);if((!M||!A||A===k)&&(A=O.prototype,M))for(r in U)c[r]&&y(c[r].prototype,A);if(M&&v(N)!==A&&y(N,A),a&&!u(A,P))for(r in j=!0,g(A,P,{configurable:!0,get:function(){return d(this)?this[D]:void 0}}),U)c[r]&&f(c[r],D,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:j&&D,aTypedArray:function(e){if(V(e))return e;throw x("Target is not a typed array")},aTypedArrayConstructor:function(e){if(l(e)&&(!y||_(O,e)))return e;throw x(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(a){if(n)for(var i in U){var s=c[i];if(s&&u(s.prototype,e))try{delete s.prototype[e]}catch(n){try{s.prototype[e]=t}catch(e){}}}A[e]&&!n||m(A,e,n?t:M&&R[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(a){if(y){if(n)for(r in U)if((i=c[r])&&u(i,e))try{delete i[e]}catch(e){}if(O[e]&&!n)return;try{return m(O,e,n?t:M&&O[e]||t)}catch(e){}}for(r in U)!(i=c[r])||i[e]&&!n||m(i,e,t)}},getTypedArrayConstructor:B,isView:function(e){if(!d(e))return!1;var t=h(e);return"DataView"===t||u(U,t)||u(F,t)},isTypedArray:V,TypedArray:O,TypedArrayPrototype:A}},3331:function(e,t,n){"use strict";var r=n(7854),i=n(1702),s=n(9781),o=n(3013),a=n(6530),c=n(8880),l=n(7045),d=n(9190),u=n(7293),h=n(5787),p=n(9303),f=n(7466),m=n(7067),g=n(1179),_=n(9518),v=n(7674),y=n(8006).f,E=n(1285),b=n(1589),T=n(8003),S=n(9909),w=a.PROPER,C=a.CONFIGURABLE,R="ArrayBuffer",I="DataView",N="prototype",O="Wrong index",A=S.getterFor(R),k=S.getterFor(I),x=S.set,P=r[R],D=P,L=D&&D[N],M=r[I],j=M&&M[N],U=Object.prototype,F=r.Array,B=r.RangeError,V=i(E),G=i([].reverse),H=g.pack,W=g.unpack,z=function(e){return[255&e]},q=function(e){return[255&e,e>>8&255]},K=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Y=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},J=function(e){return H(e,23,4)},X=function(e){return H(e,52,8)},Z=function(e,t,n){l(e[N],t,{configurable:!0,get:function(){return n(this)[t]}})},Q=function(e,t,n,r){var i=m(n),s=k(e);if(i+t>s.byteLength)throw B(O);var o=s.bytes,a=i+s.byteOffset,c=b(o,a,a+t);return r?c:G(c)},$=function(e,t,n,r,i,s){var o=m(n),a=k(e);if(o+t>a.byteLength)throw B(O);for(var c=a.bytes,l=o+a.byteOffset,d=r(+i),u=0;u<t;u++)c[l+u]=d[s?u:t-u-1]};if(o){var ee=w&&P.name!==R;if(u((function(){P(1)}))&&u((function(){new P(-1)}))&&!u((function(){return new P,new P(1.5),new P(NaN),1!=P.length||ee&&!C})))ee&&C&&c(P,"name",R);else{(D=function(e){return h(this,L),new P(m(e))})[N]=L;for(var te,ne=y(P),re=0;ne.length>re;)(te=ne[re++])in D||c(D,te,P[te]);L.constructor=D}v&&_(j)!==U&&v(j,U);var ie=new M(new D(2)),se=i(j.setInt8);ie.setInt8(0,2147483648),ie.setInt8(1,2147483649),!ie.getInt8(0)&&ie.getInt8(1)||d(j,{setInt8:function(e,t){se(this,e,t<<24>>24)},setUint8:function(e,t){se(this,e,t<<24>>24)}},{unsafe:!0})}else L=(D=function(e){h(this,L);var t=m(e);x(this,{type:R,bytes:V(F(t),0),byteLength:t}),s||(this.byteLength=t,this.detached=!1)})[N],j=(M=function(e,t,n){h(this,j),h(e,L);var r=A(e),i=r.byteLength,o=p(t);if(o<0||o>i)throw B("Wrong offset");if(o+(n=void 0===n?i-o:f(n))>i)throw B("Wrong length");x(this,{type:I,buffer:e,byteLength:n,byteOffset:o,bytes:r.bytes}),s||(this.buffer=e,this.byteLength=n,this.byteOffset=o)})[N],s&&(Z(D,"byteLength",A),Z(M,"buffer",k),Z(M,"byteLength",k),Z(M,"byteOffset",k)),d(j,{getInt8:function(e){return Q(this,1,e)[0]<<24>>24},getUint8:function(e){return Q(this,1,e)[0]},getInt16:function(e){var t=Q(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Q(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Y(Q(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return Y(Q(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return W(Q(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return W(Q(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){$(this,1,e,z,t)},setUint8:function(e,t){$(this,1,e,z,t)},setInt16:function(e,t){$(this,2,e,q,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){$(this,2,e,q,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){$(this,4,e,K,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){$(this,4,e,K,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){$(this,4,e,J,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){$(this,8,e,X,t,arguments.length>2?arguments[2]:void 0)}});T(D,R),T(M,I),e.exports={ArrayBuffer:D,DataView:M}},1048:function(e,t,n){"use strict";var r=n(7908),i=n(1400),s=n(6244),o=n(5117),a=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),c=s(n),l=i(e,c),d=i(t,c),u=arguments.length>2?arguments[2]:void 0,h=a((void 0===u?c:i(u,c))-d,c-l),p=1;for(d<l&&l<d+h&&(p=-1,d+=h-1,l+=h-1);h-- >0;)d in n?n[l]=n[d]:o(n,l),l+=p,d+=p;return n}},1285:function(e,t,n){"use strict";var r=n(7908),i=n(1400),s=n(6244);e.exports=function(e){for(var t=r(this),n=s(t),o=arguments.length,a=i(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,l=void 0===c?n:i(c,n);l>a;)t[a++]=e;return t}},8533:function(e,t,n){"use strict";var r=n(2092).forEach,i=n(9341)("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},7745:function(e,t,n){var r=n(6244);e.exports=function(e,t){for(var n=0,i=r(t),s=new e(i);i>n;)s[n]=t[n++];return s}},8457:function(e,t,n){"use strict";var r=n(9974),i=n(6916),s=n(7908),o=n(3411),a=n(7659),c=n(4411),l=n(6244),d=n(6135),u=n(4121),h=n(1246),p=Array;e.exports=function(e){var t=s(e),n=c(this),f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m;g&&(m=r(m,f>2?arguments[2]:void 0));var _,v,y,E,b,T,S=h(t),w=0;if(!S||this===p&&a(S))for(_=l(t),v=n?new this(_):p(_);_>w;w++)T=g?m(t[w],w):t[w],d(v,w,T);else for(b=(E=u(t,S)).next,v=n?new this:[];!(y=i(b,E)).done;w++)T=g?o(E,m,[y.value,w],!0):y.value,d(v,w,T);return v.length=w,v}},1318:function(e,t,n){var r=n(5656),i=n(1400),s=n(6244),o=function(e){return function(t,n,o){var a,c=r(t),l=s(c),d=i(o,l);if(e&&n!=n){for(;l>d;)if((a=c[d++])!=a)return!0}else for(;l>d;d++)if((e||d in c)&&c[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},2092:function(e,t,n){var r=n(9974),i=n(1702),s=n(8361),o=n(7908),a=n(6244),c=n(5417),l=i([].push),d=function(e){var t=1==e,n=2==e,i=3==e,d=4==e,u=6==e,h=7==e,p=5==e||u;return function(f,m,g,_){for(var v,y,E=o(f),b=s(E),T=r(m,g),S=a(b),w=0,C=_||c,R=t?C(f,S):n||h?C(f,0):void 0;S>w;w++)if((p||w in b)&&(y=T(v=b[w],w,E),e))if(t)R[w]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:l(R,v)}else switch(e){case 4:return!1;case 7:l(R,v)}return u?-1:i||d?d:R}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},6583:function(e,t,n){"use strict";var r=n(2104),i=n(5656),s=n(9303),o=n(6244),a=n(9341),c=Math.min,l=[].lastIndexOf,d=!!l&&1/[1].lastIndexOf(1,-0)<0,u=a("lastIndexOf"),h=d||!u;e.exports=h?function(e){if(d)return r(l,this,arguments)||0;var t=i(this),n=o(t),a=n-1;for(arguments.length>1&&(a=c(a,s(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:l},1194:function(e,t,n){var r=n(7293),i=n(5112),s=n(7392),o=i("species");e.exports=function(e){return s>=51||!r((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,n){"use strict";var r=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},3671:function(e,t,n){var r=n(9662),i=n(7908),s=n(8361),o=n(6244),a=TypeError,c=function(e){return function(t,n,c,l){r(n);var d=i(t),u=s(d),h=o(d),p=e?h-1:0,f=e?-1:1;if(c<2)for(;;){if(p in u){l=u[p],p+=f;break}if(p+=f,e?p<0:h<=p)throw a("Reduce of empty array with no initial value")}for(;e?p>=0:h>p;p+=f)p in u&&(l=n(l,u[p],p,d));return l}};e.exports={left:c(!1),right:c(!0)}},3658:function(e,t,n){"use strict";var r=n(9781),i=n(3157),s=TypeError,o=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(i(e)&&!o(e,"length").writable)throw s("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},1589:function(e,t,n){var r=n(1400),i=n(6244),s=n(6135),o=Array,a=Math.max;e.exports=function(e,t,n){for(var c=i(e),l=r(t,c),d=r(void 0===n?c:n,c),u=o(a(d-l,0)),h=0;l<d;l++,h++)s(u,h,e[l]);return u.length=h,u}},206:function(e,t,n){var r=n(1702);e.exports=r([].slice)},4362:function(e,t,n){var r=n(1589),i=Math.floor,s=function(e,t){var n=e.length,c=i(n/2);return n<8?o(e,t):a(e,s(r(e,0,c),t),s(r(e,c),t),t)},o=function(e,t){for(var n,r,i=e.length,s=1;s<i;){for(r=s,n=e[s];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==s++&&(e[r]=n)}return e},a=function(e,t,n,r){for(var i=t.length,s=n.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?r(t[o],n[a])<=0?t[o++]:n[a++]:o<i?t[o++]:n[a++];return e};e.exports=s},7475:function(e,t,n){var r=n(3157),i=n(4411),s=n(111),o=n(5112)("species"),a=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===a||r(t.prototype))||s(t)&&null===(t=t[o]))&&(t=void 0)),void 0===t?a:t}},5417:function(e,t,n){var r=n(7475);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},3411:function(e,t,n){var r=n(9670),i=n(9212);e.exports=function(e,t,n,s){try{return s?t(r(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},7072:function(e,t,n){var r=n(5112)("iterator"),i=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){i=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var s={};s[r]=function(){return{next:function(){return{done:n=!0}}}},e(s)}catch(e){}return n}},4326:function(e,t,n){var r=n(1702),i=r({}.toString),s=r("".slice);e.exports=function(e){return s(i(e),8,-1)}},648:function(e,t,n){var r=n(1694),i=n(614),s=n(4326),o=n(5112)("toStringTag"),a=Object,c="Arguments"==s(function(){return arguments}());e.exports=r?s:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=a(e),o))?n:c?s(t):"Object"==(r=s(t))&&i(t.callee)?"Arguments":r}},5631:function(e,t,n){"use strict";var r=n(30),i=n(7045),s=n(9190),o=n(9974),a=n(5787),c=n(8554),l=n(408),d=n(1656),u=n(6178),h=n(6340),p=n(9781),f=n(2423).fastKey,m=n(9909),g=m.set,_=m.getterFor;e.exports={getConstructor:function(e,t,n,d){var u=e((function(e,i){a(e,h),g(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),p||(e.size=0),c(i)||l(i,e[d],{that:e,AS_ENTRIES:n})})),h=u.prototype,m=_(t),v=function(e,t,n){var r,i,s=m(e),o=y(e,t);return o?o.value=n:(s.last=o={index:i=f(t,!0),key:t,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=o),r&&(r.next=o),p?s.size++:e.size++,"F"!==i&&(s.index[i]=o)),e},y=function(e,t){var n,r=m(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return s(h,{clear:function(){for(var e=m(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,p?e.size=0:this.size=0},delete:function(e){var t=this,n=m(t),r=y(t,e);if(r){var i=r.next,s=r.previous;delete n.index[r.index],r.removed=!0,s&&(s.next=i),i&&(i.previous=s),n.first==r&&(n.first=i),n.last==r&&(n.last=s),p?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=m(this),r=o(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!y(this,e)}}),s(h,n?{get:function(e){var t=y(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),p&&i(h,"size",{configurable:!0,get:function(){return m(this).size}}),u},setStrong:function(e,t,n){var r=t+" Iterator",i=_(t),s=_(r);d(e,t,(function(e,t){g(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=s(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?u("keys"==t?n.key:"values"==t?n.value:[n.key,n.value],!1):(e.target=void 0,u(void 0,!0))}),n?"entries":"values",!n,!0),h(t)}}},7710:function(e,t,n){"use strict";var r=n(2109),i=n(7854),s=n(1702),o=n(4705),a=n(8052),c=n(2423),l=n(408),d=n(5787),u=n(614),h=n(8554),p=n(111),f=n(7293),m=n(7072),g=n(8003),_=n(9587);e.exports=function(e,t,n){var v=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),E=v?"set":"add",b=i[e],T=b&&b.prototype,S=b,w={},C=function(e){var t=s(T[e]);a(T,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(y&&!p(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return y&&!p(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!p(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(o(e,!u(b)||!(y||T.forEach&&!f((function(){(new b).entries().next()})))))S=n.getConstructor(t,e,v,E),c.enable();else if(o(e,!0)){var R=new S,I=R[E](y?{}:-0,1)!=R,N=f((function(){R.has(1)})),O=m((function(e){new b(e)})),A=!y&&f((function(){for(var e=new b,t=5;t--;)e[E](t,t);return!e.has(-0)}));O||((S=t((function(e,t){d(e,T);var n=_(new b,e,S);return h(t)||l(t,n[E],{that:n,AS_ENTRIES:v}),n}))).prototype=T,T.constructor=S),(N||A)&&(C("delete"),C("has"),v&&C("get")),(A||I)&&C(E),y&&T.clear&&delete T.clear}return w[e]=S,r({global:!0,constructor:!0,forced:S!=b},w),g(S,e),y||n.setStrong(S,e,v),S}},9920:function(e,t,n){var r=n(2597),i=n(3887),s=n(1236),o=n(3070);e.exports=function(e,t,n){for(var a=i(t),c=o.f,l=s.f,d=0;d<a.length;d++){var u=a[d];r(e,u)||n&&r(n,u)||c(e,u,l(t,u))}}},4964:function(e,t,n){var r=n(5112)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},8544:function(e,t,n){var r=n(7293);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},6178:function(e){e.exports=function(e,t){return{value:e,done:t}}},8880:function(e,t,n){var r=n(9781),i=n(3070),s=n(9114);e.exports=r?function(e,t,n){return i.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:function(e,t,n){"use strict";var r=n(4948),i=n(3070),s=n(9114);e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,s(0,n)):e[o]=n}},7045:function(e,t,n){var r=n(6339),i=n(3070);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),i.f(e,t,n)}},8052:function(e,t,n){var r=n(614),i=n(3070),s=n(6339),o=n(3072);e.exports=function(e,t,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:t;if(r(n)&&s(n,l,a),a.global)c?e[t]=n:o(t,n);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},9190:function(e,t,n){var r=n(8052);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},3072:function(e,t,n){var r=n(7854),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},5117:function(e,t,n){"use strict";var r=n(6330),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw i("Cannot delete property "+r(t)+" of "+r(e))}},9781:function(e,t,n){var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,n=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},317:function(e,t,n){var r=n(7854),i=n(111),s=r.document,o=i(s)&&i(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},7207:function(e){var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},8324:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(e,t,n){var r=n(317)("span").classList,i=r&&r.constructor&&r.constructor.prototype;e.exports=i===Object.prototype?void 0:i},8886:function(e,t,n){var r=n(8113).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},7871:function(e,t,n){var r=n(3823),i=n(5268);e.exports=!r&&!i&&"object"==typeof window&&"object"==typeof document},9363:function(e){e.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},3823:function(e){e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},256:function(e,t,n){var r=n(8113);e.exports=/MSIE|Trident/.test(r)},1528:function(e,t,n){var r=n(8113);e.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},6833:function(e,t,n){var r=n(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:function(e,t,n){var r=n(4326);e.exports="undefined"!=typeof process&&"process"==r(process)},1036:function(e,t,n){var r=n(8113);e.exports=/web0s(?!.*chrome)/i.test(r)},8113:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(e,t,n){var r,i,s=n(7854),o=n(8113),a=s.process,c=s.Deno,l=a&&a.versions||c&&c.version,d=l&&l.v8;d&&(i=(r=d.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},8008:function(e,t,n){var r=n(8113).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(e,t,n){var r=n(7854),i=n(1236).f,s=n(8880),o=n(8052),a=n(3072),c=n(9920),l=n(4705);e.exports=function(e,t){var n,d,u,h,p,f=e.target,m=e.global,g=e.stat;if(n=m?r:g?r[f]||a(f,{}):(r[f]||{}).prototype)for(d in t){if(h=t[d],u=e.dontCallGetSet?(p=i(n,d))&&p.value:n[d],!l(m?d:f+(g?".":"#")+d,e.forced)&&void 0!==u){if(typeof h==typeof u)continue;c(h,u)}(e.sham||u&&u.sham)&&s(h,"sham",!0),o(n,d,h,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},6677:function(e,t,n){var r=n(7293);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},2104:function(e,t,n){var r=n(4374),i=Function.prototype,s=i.apply,o=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?o.bind(s):function(){return o.apply(s,arguments)})},9974:function(e,t,n){var r=n(1470),i=n(9662),s=n(4374),o=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:s?o(e,t):function(){return e.apply(t,arguments)}}},4374:function(e,t,n){var r=n(7293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},7065:function(e,t,n){"use strict";var r=n(1702),i=n(9662),s=n(111),o=n(2597),a=n(206),c=n(4374),l=Function,d=r([].concat),u=r([].join),h={};e.exports=c?l.bind:function(e){var t=i(this),n=t.prototype,r=a(arguments,1),c=function(){var n=d(r,a(arguments));return this instanceof c?function(e,t,n){if(!o(h,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";h[t]=l("C,a","return new C("+u(r,",")+")")}return h[t](e,n)}(t,n.length,n):t.apply(e,n)};return s(n)&&(c.prototype=n),c}},6916:function(e,t,n){var r=n(4374),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(e,t,n){var r=n(9781),i=n(2597),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=i(s,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&o(s,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},5668:function(e,t,n){var r=n(1702),i=n(9662);e.exports=function(e,t,n){try{return r(i(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},1470:function(e,t,n){var r=n(4326),i=n(1702);e.exports=function(e){if("Function"===r(e))return i(e)}},1702:function(e,t,n){var r=n(4374),i=Function.prototype,s=i.call,o=r&&i.bind.bind(s,s);e.exports=r?o:function(e){return function(){return s.apply(e,arguments)}}},5005:function(e,t,n){var r=n(7854),i=n(614);e.exports=function(e,t){return arguments.length<2?(n=r[e],i(n)?n:void 0):r[e]&&r[e][t];var n}},1246:function(e,t,n){var r=n(648),i=n(8173),s=n(8554),o=n(7497),a=n(5112)("iterator");e.exports=function(e){if(!s(e))return i(e,a)||i(e,"@@iterator")||o[r(e)]}},4121:function(e,t,n){var r=n(6916),i=n(9662),s=n(9670),o=n(6330),a=n(1246),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?a(e):t;if(i(n))return s(r(n,e));throw c(o(e)+" is not iterable")}},8044:function(e,t,n){var r=n(1702),i=n(3157),s=n(614),o=n(4326),a=n(1340),c=r([].push);e.exports=function(e){if(s(e))return e;if(i(e)){for(var t=e.length,n=[],r=0;r<t;r++){var l=e[r];"string"==typeof l?c(n,l):"number"!=typeof l&&"Number"!=o(l)&&"String"!=o(l)||c(n,a(l))}var d=n.length,u=!0;return function(e,t){if(u)return u=!1,t;if(i(this))return t;for(var r=0;r<d;r++)if(n[r]===e)return t}}}},8173:function(e,t,n){var r=n(9662),i=n(8554);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},7854:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(e,t,n){var r=n(1702),i=n(7908),s=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(i(e),t)}},3501:function(e){e.exports={}},842:function(e){e.exports=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}}},490:function(e,t,n){var r=n(5005);e.exports=r("document","documentElement")},4664:function(e,t,n){var r=n(9781),i=n(7293),s=n(317);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},1179:function(e){var t=Array,n=Math.abs,r=Math.pow,i=Math.floor,s=Math.log,o=Math.LN2;e.exports={pack:function(e,a,c){var l,d,u,h=t(c),p=8*c-a-1,f=(1<<p)-1,m=f>>1,g=23===a?r(2,-24)-r(2,-77):0,_=e<0||0===e&&1/e<0?1:0,v=0;for((e=n(e))!=e||e===1/0?(d=e!=e?1:0,l=f):(l=i(s(e)/o),e*(u=r(2,-l))<1&&(l--,u*=2),(e+=l+m>=1?g/u:g*r(2,1-m))*u>=2&&(l++,u/=2),l+m>=f?(d=0,l=f):l+m>=1?(d=(e*u-1)*r(2,a),l+=m):(d=e*r(2,m-1)*r(2,a),l=0));a>=8;)h[v++]=255&d,d/=256,a-=8;for(l=l<<a|d,p+=a;p>0;)h[v++]=255&l,l/=256,p-=8;return h[--v]|=128*_,h},unpack:function(e,t){var n,i=e.length,s=8*i-t-1,o=(1<<s)-1,a=o>>1,c=s-7,l=i-1,d=e[l--],u=127&d;for(d>>=7;c>0;)u=256*u+e[l--],c-=8;for(n=u&(1<<-c)-1,u>>=-c,c+=t;c>0;)n=256*n+e[l--],c-=8;if(0===u)u=1-a;else{if(u===o)return n?NaN:d?-1/0:1/0;n+=r(2,t),u-=a}return(d?-1:1)*n*r(2,u-t)}}},8361:function(e,t,n){var r=n(1702),i=n(7293),s=n(4326),o=Object,a=r("".split);e.exports=i((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?a(e,""):o(e)}:o},9587:function(e,t,n){var r=n(614),i=n(111),s=n(7674);e.exports=function(e,t,n){var o,a;return s&&r(o=t.constructor)&&o!==n&&i(a=o.prototype)&&a!==n.prototype&&s(e,a),e}},2788:function(e,t,n){var r=n(1702),i=n(614),s=n(5465),o=r(Function.toString);i(s.inspectSource)||(s.inspectSource=function(e){return o(e)}),e.exports=s.inspectSource},2423:function(e,t,n){var r=n(2109),i=n(1702),s=n(3501),o=n(111),a=n(2597),c=n(3070).f,l=n(8006),d=n(1156),u=n(2050),h=n(9711),p=n(6677),f=!1,m=h("meta"),g=0,_=function(e){c(e,m,{value:{objectID:"O"+g++,weakData:{}}})},v=e.exports={enable:function(){v.enable=function(){},f=!0;var e=l.f,t=i([].splice),n={};n[m]=1,e(n).length&&(l.f=function(n){for(var r=e(n),i=0,s=r.length;i<s;i++)if(r[i]===m){t(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,m)){if(!u(e))return"F";if(!t)return"E";_(e)}return e[m].objectID},getWeakData:function(e,t){if(!a(e,m)){if(!u(e))return!0;if(!t)return!1;_(e)}return e[m].weakData},onFreeze:function(e){return p&&f&&u(e)&&!a(e,m)&&_(e),e}};s[m]=!0},9909:function(e,t,n){var r,i,s,o=n(4811),a=n(7854),c=n(111),l=n(8880),d=n(2597),u=n(5465),h=n(6200),p=n(3501),f="Object already initialized",m=a.TypeError,g=a.WeakMap;if(o||u.state){var _=u.state||(u.state=new g);_.get=_.get,_.has=_.has,_.set=_.set,r=function(e,t){if(_.has(e))throw m(f);return t.facade=e,_.set(e,t),t},i=function(e){return _.get(e)||{}},s=function(e){return _.has(e)}}else{var v=h("state");p[v]=!0,r=function(e,t){if(d(e,v))throw m(f);return t.facade=e,l(e,v,t),t},i=function(e){return d(e,v)?e[v]:{}},s=function(e){return d(e,v)}}e.exports={set:r,get:i,has:s,enforce:function(e){return s(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}}}},7659:function(e,t,n){var r=n(5112),i=n(7497),s=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[s]===e)}},3157:function(e,t,n){var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},4067:function(e,t,n){var r=n(648);e.exports=function(e){var t=r(e);return"BigInt64Array"==t||"BigUint64Array"==t}},614:function(e,t,n){var r=n(4154),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},4411:function(e,t,n){var r=n(1702),i=n(7293),s=n(614),o=n(648),a=n(5005),c=n(2788),l=function(){},d=[],u=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=r(h.exec),f=!h.exec(l),m=function(e){if(!s(e))return!1;try{return u(l,d,e),!0}catch(e){return!1}},g=function(e){if(!s(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,c(e))}catch(e){return!0}};g.sham=!0,e.exports=!u||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?g:m},4705:function(e,t,n){var r=n(7293),i=n(614),s=/#|\.prototype\./,o=function(e,t){var n=c[a(e)];return n==d||n!=l&&(i(t)?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},c=o.data={},l=o.NATIVE="N",d=o.POLYFILL="P";e.exports=o},5988:function(e,t,n){var r=n(111),i=Math.floor;e.exports=Number.isInteger||function(e){return!r(e)&&isFinite(e)&&i(e)===e}},8554:function(e){e.exports=function(e){return null==e}},111:function(e,t,n){var r=n(614),i=n(4154),s=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===s}:function(e){return"object"==typeof e?null!==e:r(e)}},1913:function(e){e.exports=!1},7850:function(e,t,n){var r=n(111),i=n(4326),s=n(5112)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==i(e))}},2190:function(e,t,n){var r=n(5005),i=n(614),s=n(7976),o=n(3307),a=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&s(t.prototype,a(e))}},408:function(e,t,n){var r=n(9974),i=n(6916),s=n(9670),o=n(6330),a=n(7659),c=n(6244),l=n(7976),d=n(4121),u=n(1246),h=n(9212),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},m=f.prototype;e.exports=function(e,t,n){var g,_,v,y,E,b,T,S=n&&n.that,w=!(!n||!n.AS_ENTRIES),C=!(!n||!n.IS_RECORD),R=!(!n||!n.IS_ITERATOR),I=!(!n||!n.INTERRUPTED),N=r(t,S),O=function(e){return g&&h(g,"normal",e),new f(!0,e)},A=function(e){return w?(s(e),I?N(e[0],e[1],O):N(e[0],e[1])):I?N(e,O):N(e)};if(C)g=e.iterator;else if(R)g=e;else{if(!(_=u(e)))throw p(o(e)+" is not iterable");if(a(_)){for(v=0,y=c(e);y>v;v++)if((E=A(e[v]))&&l(m,E))return E;return new f(!1)}g=d(e,_)}for(b=C?e.next:g.next;!(T=i(b,g)).done;){try{E=A(T.value)}catch(e){h(g,"throw",e)}if("object"==typeof E&&E&&l(m,E))return E}return new f(!1)}},9212:function(e,t,n){var r=n(6916),i=n(9670),s=n(8173);e.exports=function(e,t,n){var o,a;i(e);try{if(!(o=s(e,"return"))){if("throw"===t)throw n;return n}o=r(o,e)}catch(e){a=!0,o=e}if("throw"===t)throw n;if(a)throw o;return i(o),n}},3061:function(e,t,n){"use strict";var r=n(3383).IteratorPrototype,i=n(30),s=n(9114),o=n(8003),a=n(7497),c=function(){return this};e.exports=function(e,t,n,l){var d=t+" Iterator";return e.prototype=i(r,{next:s(+!l,n)}),o(e,d,!1,!0),a[d]=c,e}},1656:function(e,t,n){"use strict";var r=n(2109),i=n(6916),s=n(1913),o=n(6530),a=n(614),c=n(3061),l=n(9518),d=n(7674),u=n(8003),h=n(8880),p=n(8052),f=n(5112),m=n(7497),g=n(3383),_=o.PROPER,v=o.CONFIGURABLE,y=g.IteratorPrototype,E=g.BUGGY_SAFARI_ITERATORS,b=f("iterator"),T="keys",S="values",w="entries",C=function(){return this};e.exports=function(e,t,n,o,f,g,R){c(n,t,o);var I,N,O,A=function(e){if(e===f&&L)return L;if(!E&&e in P)return P[e];switch(e){case T:case S:case w:return function(){return new n(this,e)}}return function(){return new n(this)}},k=t+" Iterator",x=!1,P=e.prototype,D=P[b]||P["@@iterator"]||f&&P[f],L=!E&&D||A(f),M="Array"==t&&P.entries||D;if(M&&(I=l(M.call(new e)))!==Object.prototype&&I.next&&(s||l(I)===y||(d?d(I,y):a(I[b])||p(I,b,C)),u(I,k,!0,!0),s&&(m[k]=C)),_&&f==S&&D&&D.name!==S&&(!s&&v?h(P,"name",S):(x=!0,L=function(){return i(D,this)})),f)if(N={values:A(S),keys:g?L:A(T),entries:A(w)},R)for(O in N)(E||x||!(O in P))&&p(P,O,N[O]);else r({target:t,proto:!0,forced:E||x},N);return s&&!R||P[b]===L||p(P,b,L,{name:f}),m[t]=L,N}},3383:function(e,t,n){"use strict";var r,i,s,o=n(7293),a=n(614),c=n(111),l=n(30),d=n(9518),u=n(8052),h=n(5112),p=n(1913),f=h("iterator"),m=!1;[].keys&&("next"in(s=[].keys())?(i=d(d(s)))!==Object.prototype&&(r=i):m=!0),!c(r)||o((function(){var e={};return r[f].call(e)!==e}))?r={}:p&&(r=l(r)),a(r[f])||u(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},7497:function(e){e.exports={}},6244:function(e,t,n){var r=n(7466);e.exports=function(e){return r(e.length)}},6339:function(e,t,n){var r=n(1702),i=n(7293),s=n(614),o=n(2597),a=n(9781),c=n(6530).CONFIGURABLE,l=n(2788),d=n(9909),u=d.enforce,h=d.get,p=String,f=Object.defineProperty,m=r("".slice),g=r("".replace),_=r([].join),v=a&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),y=String(String).split("String"),E=e.exports=function(e,t,n){"Symbol("===m(p(t),0,7)&&(t="["+g(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||c&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),v&&n&&o(n,"arity")&&e.length!==n.arity&&f(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=u(e);return o(r,"source")||(r.source=_(y,"string"==typeof t?t:"")),e};Function.prototype.toString=E((function(){return s(this)&&h(this).source||l(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},5948:function(e,t,n){var r,i,s,o,a,c=n(7854),l=n(9974),d=n(1236).f,u=n(261).set,h=n(8572),p=n(6833),f=n(1528),m=n(1036),g=n(5268),_=c.MutationObserver||c.WebKitMutationObserver,v=c.document,y=c.process,E=c.Promise,b=d(c,"queueMicrotask"),T=b&&b.value;if(!T){var S=new h,w=function(){var e,t;for(g&&(e=y.domain)&&e.exit();t=S.get();)try{t()}catch(e){throw S.head&&r(),e}e&&e.enter()};p||g||m||!_||!v?!f&&E&&E.resolve?((o=E.resolve(void 0)).constructor=E,a=l(o.then,o),r=function(){a(w)}):g?r=function(){y.nextTick(w)}:(u=l(u,c),r=function(){u(w)}):(i=!0,s=v.createTextNode(""),new _(w).observe(s,{characterData:!0}),r=function(){s.data=i=!i}),T=function(e){S.head||r(),S.add(e)}}e.exports=T},8523:function(e,t,n){"use strict";var r=n(9662),i=TypeError,s=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw i("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new s(e)}},3929:function(e,t,n){var r=n(7850),i=TypeError;e.exports=function(e){if(r(e))throw i("The method doesn't accept regular expressions");return e}},1574:function(e,t,n){"use strict";var r=n(9781),i=n(1702),s=n(6916),o=n(7293),a=n(1956),c=n(5181),l=n(5296),d=n(7908),u=n(8361),h=Object.assign,p=Object.defineProperty,f=i([].concat);e.exports=!h||o((function(){if(r&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=h({},e)[n]||a(h({},t)).join("")!=i}))?function(e,t){for(var n=d(e),i=arguments.length,o=1,h=c.f,p=l.f;i>o;)for(var m,g=u(arguments[o++]),_=h?f(a(g),h(g)):a(g),v=_.length,y=0;v>y;)m=_[y++],r&&!s(p,g,m)||(n[m]=g[m]);return n}:h},30:function(e,t,n){var r,i=n(9670),s=n(6048),o=n(748),a=n(3501),c=n(490),l=n(317),d=n(6200),u="prototype",h="script",p=d("IE_PROTO"),f=function(){},m=function(e){return"<"+h+">"+e+"</"+h+">"},g=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},_=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;_="undefined"!=typeof document?document.domain&&r?g(r):(t=l("iframe"),n="java"+h+":",t.style.display="none",c.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F):g(r);for(var i=o.length;i--;)delete _[u][o[i]];return _()};a[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f[u]=i(e),n=new f,f[u]=null,n[p]=e):n=_(),void 0===t?n:s.f(n,t)}},6048:function(e,t,n){var r=n(9781),i=n(3353),s=n(3070),o=n(9670),a=n(5656),c=n(1956);t.f=r&&!i?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),i=c(t),l=i.length,d=0;l>d;)s.f(e,n=i[d++],r[n]);return e}},3070:function(e,t,n){var r=n(9781),i=n(4664),s=n(3353),o=n(9670),a=n(4948),c=TypeError,l=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u="enumerable",h="configurable",p="writable";t.f=r?s?function(e,t,n){if(o(e),t=a(t),o(n),"function"==typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var r=d(e,t);r&&r[p]&&(e[t]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:u in n?n[u]:r[u],writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(o(e),t=a(t),o(n),i)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var r=n(9781),i=n(6916),s=n(5296),o=n(9114),a=n(5656),c=n(4948),l=n(2597),d=n(4664),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=a(e),t=c(t),d)try{return u(e,t)}catch(e){}if(l(e,t))return o(!i(s.f,e,t),e[t])}},1156:function(e,t,n){var r=n(4326),i=n(5656),s=n(8006).f,o=n(1589),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"==r(e)?function(e){try{return s(e)}catch(e){return o(a)}}(e):s(i(e))}},8006:function(e,t,n){var r=n(6324),i=n(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,n){var r=n(2597),i=n(614),s=n(7908),o=n(6200),a=n(8544),c=o("IE_PROTO"),l=Object,d=l.prototype;e.exports=a?l.getPrototypeOf:function(e){var t=s(e);if(r(t,c))return t[c];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof l?d:null}},2050:function(e,t,n){var r=n(7293),i=n(111),s=n(4326),o=n(7556),a=Object.isExtensible,c=r((function(){a(1)}));e.exports=c||o?function(e){return!!i(e)&&(!o||"ArrayBuffer"!=s(e))&&(!a||a(e))}:a},7976:function(e,t,n){var r=n(1702);e.exports=r({}.isPrototypeOf)},6324:function(e,t,n){var r=n(1702),i=n(2597),s=n(5656),o=n(1318).indexOf,a=n(3501),c=r([].push);e.exports=function(e,t){var n,r=s(e),l=0,d=[];for(n in r)!i(a,n)&&i(r,n)&&c(d,n);for(;t.length>l;)i(r,n=t[l++])&&(~o(d,n)||c(d,n));return d}},1956:function(e,t,n){var r=n(6324),i=n(748);e.exports=Object.keys||function(e){return r(e,i)}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var r=n(5668),i=n(9670),s=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return i(n),s(r),t?e(n,r):n.__proto__=r,n}}():void 0)},4699:function(e,t,n){var r=n(9781),i=n(1702),s=n(1956),o=n(5656),a=i(n(5296).f),c=i([].push),l=function(e){return function(t){for(var n,i=o(t),l=s(i),d=l.length,u=0,h=[];d>u;)n=l[u++],r&&!a(i,n)||c(h,e?[n,i[n]]:i[n]);return h}};e.exports={entries:l(!0),values:l(!1)}},288:function(e,t,n){"use strict";var r=n(1694),i=n(648);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},2140:function(e,t,n){var r=n(6916),i=n(614),s=n(111),o=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&i(n=e.toString)&&!s(a=r(n,e)))return a;if(i(n=e.valueOf)&&!s(a=r(n,e)))return a;if("string"!==t&&i(n=e.toString)&&!s(a=r(n,e)))return a;throw o("Can't convert object to primitive value")}},3887:function(e,t,n){var r=n(5005),i=n(1702),s=n(8006),o=n(5181),a=n(9670),c=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=s.f(a(e)),n=o.f;return n?c(t,n(e)):t}},857:function(e,t,n){var r=n(7854);e.exports=r},2534:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},3702:function(e,t,n){var r=n(7854),i=n(2492),s=n(614),o=n(4705),a=n(2788),c=n(5112),l=n(7871),d=n(3823),u=n(1913),h=n(7392),p=i&&i.prototype,f=c("species"),m=!1,g=s(r.PromiseRejectionEvent),_=o("Promise",(function(){var e=a(i),t=e!==String(i);if(!t&&66===h)return!0;if(u&&(!p.catch||!p.finally))return!0;if(!h||h<51||!/native code/.test(e)){var n=new i((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[f]=r,!(m=n.then((function(){}))instanceof r))return!0}return!t&&(l||d)&&!g}));e.exports={CONSTRUCTOR:_,REJECTION_EVENT:g,SUBCLASSING:m}},2492:function(e,t,n){var r=n(7854);e.exports=r.Promise},9478:function(e,t,n){var r=n(9670),i=n(111),s=n(8523);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=s.f(e);return(0,n.resolve)(t),n.promise}},612:function(e,t,n){var r=n(2492),i=n(7072),s=n(3702).CONSTRUCTOR;e.exports=s||!i((function(e){r.all(e).then(void 0,(function(){}))}))},8572:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=t},2261:function(e,t,n){"use strict";var r,i,s=n(6916),o=n(1702),a=n(1340),c=n(7066),l=n(2999),d=n(2309),u=n(30),h=n(9909).get,p=n(9441),f=n(7168),m=d("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,_=g,v=o("".charAt),y=o("".indexOf),E=o("".replace),b=o("".slice),T=(i=/b*/g,s(g,r=/a/,"a"),s(g,i,"a"),0!==r.lastIndex||0!==i.lastIndex),S=l.BROKEN_CARET,w=void 0!==/()??/.exec("")[1];(T||w||S||p||f)&&(_=function(e){var t,n,r,i,o,l,d,p=this,f=h(p),C=a(e),R=f.raw;if(R)return R.lastIndex=p.lastIndex,t=s(_,R,C),p.lastIndex=R.lastIndex,t;var I=f.groups,N=S&&p.sticky,O=s(c,p),A=p.source,k=0,x=C;if(N&&(O=E(O,"y",""),-1===y(O,"g")&&(O+="g"),x=b(C,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==v(C,p.lastIndex-1))&&(A="(?: "+A+")",x=" "+x,k++),n=new RegExp("^(?:"+A+")",O)),w&&(n=new RegExp("^"+A+"$(?!\\s)",O)),T&&(r=p.lastIndex),i=s(g,N?n:p,x),N?i?(i.input=b(i.input,k),i[0]=b(i[0],k),i.index=p.lastIndex,p.lastIndex+=i[0].length):p.lastIndex=0:T&&i&&(p.lastIndex=p.global?i.index+i[0].length:r),w&&i&&i.length>1&&s(m,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&I)for(i.groups=l=u(null),o=0;o<I.length;o++)l[(d=I[o])[0]]=i[d[1]];return i}),e.exports=_},7066:function(e,t,n){"use strict";var r=n(9670);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4706:function(e,t,n){var r=n(6916),i=n(2597),s=n(7976),o=n(7066),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||i(e,"flags")||!s(a,e)?t:r(o,e)}},2999:function(e,t,n){var r=n(7293),i=n(7854).RegExp,s=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),o=s||r((function(){return!i("a","y").sticky})),a=s||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:o,UNSUPPORTED_Y:s}},9441:function(e,t,n){var r=n(7293),i=n(7854).RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:function(e,t,n){var r=n(7293),i=n(7854).RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4488:function(e,t,n){var r=n(8554),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},7152:function(e,t,n){"use strict";var r,i=n(7854),s=n(2104),o=n(614),a=n(9363),c=n(8113),l=n(206),d=n(8053),u=i.Function,h=/MSIE .\./.test(c)||a&&((r=i.Bun.version.split(".")).length<3||0==r[0]&&(r[1]<3||3==r[1]&&0==r[2]));e.exports=function(e,t){var n=t?2:1;return h?function(r,i){var a=d(arguments.length,1)>n,c=o(r)?r:u(r),h=a?l(arguments,n):[],p=a?function(){s(c,this,h)}:c;return t?e(p,i):e(p)}:e}},6340:function(e,t,n){"use strict";var r=n(5005),i=n(7045),s=n(5112),o=n(9781),a=s("species");e.exports=function(e){var t=r(e);o&&t&&!t[a]&&i(t,a,{configurable:!0,get:function(){return this}})}},8003:function(e,t,n){var r=n(3070).f,i=n(2597),s=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,s)&&r(e,s,{configurable:!0,value:t})}},6200:function(e,t,n){var r=n(2309),i=n(9711),s=r("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},5465:function(e,t,n){var r=n(7854),i=n(3072),s="__core-js_shared__",o=r[s]||i(s,{});e.exports=o},2309:function(e,t,n){var r=n(1913),i=n(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.30.2",mode:r?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:function(e,t,n){var r=n(9670),i=n(9483),s=n(8554),o=n(5112)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||s(n=r(a)[o])?t:i(n)}},8710:function(e,t,n){var r=n(1702),i=n(9303),s=n(1340),o=n(4488),a=r("".charAt),c=r("".charCodeAt),l=r("".slice),d=function(e){return function(t,n){var r,d,u=s(o(t)),h=i(n),p=u.length;return h<0||h>=p?e?"":void 0:(r=c(u,h))<55296||r>56319||h+1===p||(d=c(u,h+1))<56320||d>57343?e?a(u,h):r:e?l(u,h,h+2):d-56320+(r-55296<<10)+65536}};e.exports={codeAt:d(!1),charAt:d(!0)}},3197:function(e,t,n){var r=n(1702),i=2147483647,s=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",c=RangeError,l=r(o.exec),d=Math.floor,u=String.fromCharCode,h=r("".charCodeAt),p=r([].join),f=r([].push),m=r("".replace),g=r("".split),_=r("".toLowerCase),v=function(e){return e+22+75*(e<26)},y=function(e,t,n){var r=0;for(e=n?d(e/700):e>>1,e+=d(e/t);e>455;)e=d(e/35),r+=36;return d(r+36*e/(e+38))},E=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=h(e,n++);if(i>=55296&&i<=56319&&n<r){var s=h(e,n++);56320==(64512&s)?f(t,((1023&i)<<10)+(1023&s)+65536):(f(t,i),n--)}else f(t,i)}return t}(e);var n,r,s=e.length,o=128,l=0,m=72;for(n=0;n<e.length;n++)(r=e[n])<128&&f(t,u(r));var g=t.length,_=g;for(g&&f(t,"-");_<s;){var E=i;for(n=0;n<e.length;n++)(r=e[n])>=o&&r<E&&(E=r);var b=_+1;if(E-o>d((i-l)/b))throw c(a);for(l+=(E-o)*b,o=E,n=0;n<e.length;n++){if((r=e[n])<o&&++l>i)throw c(a);if(r==o){for(var T=l,S=36;;){var w=S<=m?1:S>=m+26?26:S-m;if(T<w)break;var C=T-w,R=36-w;f(t,u(v(w+C%R))),T=d(C/R),S+=36}f(t,u(v(T))),m=y(l,b,_==g),l=0,_++}}l++,o++}return p(t,"")};e.exports=function(e){var t,n,r=[],i=g(m(_(e),o,"."),".");for(t=0;t<i.length;t++)n=i[t],f(r,l(s,n)?"xn--"+E(n):n);return p(r,".")}},3111:function(e,t,n){var r=n(1702),i=n(4488),s=n(1340),o=n(1361),a=r("".replace),c=RegExp("^["+o+"]+"),l=RegExp("(^|[^"+o+"])["+o+"]+$"),d=function(e){return function(t){var n=s(i(t));return 1&e&&(n=a(n,c,"")),2&e&&(n=a(n,l,"$1")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},6293:function(e,t,n){var r=n(7392),i=n(7293),s=n(7854).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!s(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},6532:function(e,t,n){var r=n(6916),i=n(5005),s=n(5112),o=n(8052);e.exports=function(){var e=i("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,a=s("toPrimitive");t&&!t[a]&&o(t,a,(function(e){return r(n,this)}),{arity:1})}},2015:function(e,t,n){var r=n(6293);e.exports=r&&!!Symbol.for&&!!Symbol.keyFor},261:function(e,t,n){var r,i,s,o,a=n(7854),c=n(2104),l=n(9974),d=n(614),u=n(2597),h=n(7293),p=n(490),f=n(206),m=n(317),g=n(8053),_=n(6833),v=n(5268),y=a.setImmediate,E=a.clearImmediate,b=a.process,T=a.Dispatch,S=a.Function,w=a.MessageChannel,C=a.String,R=0,I={},N="onreadystatechange";h((function(){r=a.location}));var O=function(e){if(u(I,e)){var t=I[e];delete I[e],t()}},A=function(e){return function(){O(e)}},k=function(e){O(e.data)},x=function(e){a.postMessage(C(e),r.protocol+"//"+r.host)};y&&E||(y=function(e){g(arguments.length,1);var t=d(e)?e:S(e),n=f(arguments,1);return I[++R]=function(){c(t,void 0,n)},i(R),R},E=function(e){delete I[e]},v?i=function(e){b.nextTick(A(e))}:T&&T.now?i=function(e){T.now(A(e))}:w&&!_?(o=(s=new w).port2,s.port1.onmessage=k,i=l(o.postMessage,o)):a.addEventListener&&d(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!h(x)?(i=x,a.addEventListener("message",k,!1)):i=N in m("script")?function(e){p.appendChild(m("script"))[N]=function(){p.removeChild(this),O(e)}}:function(e){setTimeout(A(e),0)}),e.exports={set:y,clear:E}},863:function(e,t,n){var r=n(1702);e.exports=r(1..valueOf)},1400:function(e,t,n){var r=n(9303),i=Math.max,s=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):s(n,t)}},4599:function(e,t,n){var r=n(7593),i=TypeError;e.exports=function(e){var t=r(e,"number");if("number"==typeof t)throw i("Can't convert number to bigint");return BigInt(t)}},7067:function(e,t,n){var r=n(9303),i=n(7466),s=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw s("Wrong length or index");return n}},5656:function(e,t,n){var r=n(8361),i=n(4488);e.exports=function(e){return r(i(e))}},9303:function(e,t,n){var r=n(4758);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},7466:function(e,t,n){var r=n(9303),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},7908:function(e,t,n){var r=n(4488),i=Object;e.exports=function(e){return i(r(e))}},4590:function(e,t,n){var r=n(3002),i=RangeError;e.exports=function(e,t){var n=r(e);if(n%t)throw i("Wrong offset");return n}},3002:function(e,t,n){var r=n(9303),i=RangeError;e.exports=function(e){var t=r(e);if(t<0)throw i("The argument can't be less than 0");return t}},7593:function(e,t,n){var r=n(6916),i=n(111),s=n(2190),o=n(8173),a=n(2140),c=n(5112),l=TypeError,d=c("toPrimitive");e.exports=function(e,t){if(!i(e)||s(e))return e;var n,c=o(e,d);if(c){if(void 0===t&&(t="default"),n=r(c,e,t),!i(n)||s(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:function(e,t,n){var r=n(7593),i=n(2190);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},1694:function(e,t,n){var r={};r[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(r)},1340:function(e,t,n){var r=n(648),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9843:function(e,t,n){"use strict";var r=n(2109),i=n(7854),s=n(6916),o=n(9781),a=n(3832),c=n(260),l=n(3331),d=n(5787),u=n(9114),h=n(8880),p=n(5988),f=n(7466),m=n(7067),g=n(4590),_=n(4948),v=n(2597),y=n(648),E=n(111),b=n(2190),T=n(30),S=n(7976),w=n(7674),C=n(8006).f,R=n(7321),I=n(2092).forEach,N=n(6340),O=n(7045),A=n(3070),k=n(1236),x=n(9909),P=n(9587),D=x.get,L=x.set,M=x.enforce,j=A.f,U=k.f,F=Math.round,B=i.RangeError,V=l.ArrayBuffer,G=V.prototype,H=l.DataView,W=c.NATIVE_ARRAY_BUFFER_VIEWS,z=c.TYPED_ARRAY_TAG,q=c.TypedArray,K=c.TypedArrayPrototype,Y=c.aTypedArrayConstructor,J=c.isTypedArray,X="BYTES_PER_ELEMENT",Z="Wrong length",Q=function(e,t){Y(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},$=function(e,t){O(e,t,{configurable:!0,get:function(){return D(this)[t]}})},ee=function(e){var t;return S(G,e)||"ArrayBuffer"==(t=y(e))||"SharedArrayBuffer"==t},te=function(e,t){return J(e)&&!b(t)&&t in e&&p(+t)&&t>=0},ne=function(e,t){return t=_(t),te(e,t)?u(2,e[t]):U(e,t)},re=function(e,t,n){return t=_(t),!(te(e,t)&&E(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?j(e,t,n):(e[t]=n.value,e)};o?(W||(k.f=ne,A.f=re,$(K,"buffer"),$(K,"byteOffset"),$(K,"byteLength"),$(K,"length")),r({target:"Object",stat:!0,forced:!W},{getOwnPropertyDescriptor:ne,defineProperty:re}),e.exports=function(e,t,n){var o=e.match(/\d+/)[0]/8,c=e+(n?"Clamped":"")+"Array",l="get"+e,u="set"+e,p=i[c],_=p,v=_&&_.prototype,y={},b=function(e,t){j(e,t,{get:function(){return function(e,t){var n=D(e);return n.view[l](t*o+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=D(e);n&&(r=(r=F(r))<0?0:r>255?255:255&r),i.view[u](t*o+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};W?a&&(_=t((function(e,t,n,r){return d(e,v),P(E(t)?ee(t)?void 0!==r?new p(t,g(n,o),r):void 0!==n?new p(t,g(n,o)):new p(t):J(t)?Q(_,t):s(R,_,t):new p(m(t)),e,_)})),w&&w(_,q),I(C(p),(function(e){e in _||h(_,e,p[e])})),_.prototype=v):(_=t((function(e,t,n,r){d(e,v);var i,a,c,l=0,u=0;if(E(t)){if(!ee(t))return J(t)?Q(_,t):s(R,_,t);i=t,u=g(n,o);var h=t.byteLength;if(void 0===r){if(h%o)throw B(Z);if((a=h-u)<0)throw B(Z)}else if((a=f(r)*o)+u>h)throw B(Z);c=a/o}else c=m(t),i=new V(a=c*o);for(L(e,{buffer:i,byteOffset:u,byteLength:a,length:c,view:new H(i)});l<c;)b(e,l++)})),w&&w(_,q),v=_.prototype=T(K)),v.constructor!==_&&h(v,"constructor",_),M(v).TypedArrayConstructor=_,z&&h(v,z,c);var S=_!=p;y[c]=_,r({global:!0,constructor:!0,forced:S,sham:!W},y),X in _||h(_,X,o),X in v||h(v,X,o),N(c)}):e.exports=function(){}},3832:function(e,t,n){var r=n(7854),i=n(7293),s=n(7072),o=n(260).NATIVE_ARRAY_BUFFER_VIEWS,a=r.ArrayBuffer,c=r.Int8Array;e.exports=!o||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!s((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new a(2),1,void 0).length}))},3074:function(e,t,n){var r=n(7745),i=n(6304);e.exports=function(e,t){return r(i(e),t)}},7321:function(e,t,n){var r=n(9974),i=n(6916),s=n(9483),o=n(7908),a=n(6244),c=n(4121),l=n(1246),d=n(7659),u=n(4067),h=n(260).aTypedArrayConstructor,p=n(4599);e.exports=function(e){var t,n,f,m,g,_,v,y,E=s(this),b=o(e),T=arguments.length,S=T>1?arguments[1]:void 0,w=void 0!==S,C=l(b);if(C&&!d(C))for(y=(v=c(b,C)).next,b=[];!(_=i(y,v)).done;)b.push(_.value);for(w&&T>2&&(S=r(S,arguments[2])),n=a(b),f=new(h(E))(n),m=u(f),t=0;n>t;t++)g=w?S(b[t],t):b[t],f[t]=m?p(g):+g;return f}},6304:function(e,t,n){var r=n(260),i=n(6707),s=r.aTypedArrayConstructor,o=r.getTypedArrayConstructor;e.exports=function(e){return s(i(e,o(e)))}},9711:function(e,t,n){var r=n(1702),i=0,s=Math.random(),o=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++i+s,36)}},5143:function(e,t,n){var r=n(7293),i=n(5112),s=n(9781),o=n(1913),a=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),o&&!e.toJSON||!t.size&&(o||!s)||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},3307:function(e,t,n){var r=n(6293);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var r=n(9781),i=n(7293);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},4811:function(e,t,n){var r=n(7854),i=n(614),s=r.WeakMap;e.exports=i(s)&&/native code/.test(String(s))},6800:function(e,t,n){var r=n(857),i=n(2597),s=n(6061),o=n(3070).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||o(t,e,{value:s.f(e)})}},6061:function(e,t,n){var r=n(5112);t.f=r},5112:function(e,t,n){var r=n(7854),i=n(2309),s=n(2597),o=n(9711),a=n(6293),c=n(3307),l=r.Symbol,d=i("wks"),u=c?l.for||l:l&&l.withoutSetter||o;e.exports=function(e){return s(d,e)||(d[e]=a&&s(l,e)?l[e]:u("Symbol."+e)),d[e]}},1361:function(e){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},8264:function(e,t,n){"use strict";var r=n(2109),i=n(7854),s=n(3331),o=n(6340),a="ArrayBuffer",c=s[a];r({global:!0,constructor:!0,forced:i[a]!==c},{ArrayBuffer:c}),o(a)},9575:function(e,t,n){"use strict";var r=n(2109),i=n(1470),s=n(7293),o=n(3331),a=n(9670),c=n(1400),l=n(7466),d=n(6707),u=o.ArrayBuffer,h=o.DataView,p=h.prototype,f=i(u.prototype.slice),m=i(p.getUint8),g=i(p.setUint8);r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:s((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(f&&void 0===t)return f(a(this),e);for(var n=a(this).byteLength,r=c(e,n),i=c(void 0===t?n:t,n),s=new(d(this,u))(l(i-r)),o=new h(this),p=new h(s),_=0;r<i;)g(p,_++,m(o,r++));return s}})},2222:function(e,t,n){"use strict";var r=n(2109),i=n(7293),s=n(3157),o=n(111),a=n(7908),c=n(6244),l=n(7207),d=n(6135),u=n(5417),h=n(1194),p=n(5112),f=n(7392),m=p("isConcatSpreadable"),g=f>=51||!i((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),_=function(e){if(!o(e))return!1;var t=e[m];return void 0!==t?!!t:s(e)};r({target:"Array",proto:!0,arity:1,forced:!g||!h("concat")},{concat:function(e){var t,n,r,i,s,o=a(this),h=u(o,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(_(s=-1===t?o:arguments[t]))for(i=c(s),l(p+i),n=0;n<i;n++,p++)n in s&&d(h,p,s[n]);else l(p+1),d(h,p++,s);return h.length=p,h}})},7327:function(e,t,n){"use strict";var r=n(2109),i=n(2092).filter;r({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},9554:function(e,t,n){"use strict";var r=n(2109),i=n(8533);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},1038:function(e,t,n){var r=n(2109),i=n(8457);r({target:"Array",stat:!0,forced:!n(7072)((function(e){Array.from(e)}))},{from:i})},6699:function(e,t,n){"use strict";var r=n(2109),i=n(1318).includes,s=n(7293),o=n(1223);r({target:"Array",proto:!0,forced:s((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},2772:function(e,t,n){"use strict";var r=n(2109),i=n(1470),s=n(1318).indexOf,o=n(9341),a=i([].indexOf),c=!!a&&1/a([1],1,-0)<0;r({target:"Array",proto:!0,forced:c||!o("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return c?a(this,e,t)||0:s(this,e,t)}})},9753:function(e,t,n){n(2109)({target:"Array",stat:!0},{isArray:n(3157)})},6992:function(e,t,n){"use strict";var r=n(5656),i=n(1223),s=n(7497),o=n(9909),a=n(3070).f,c=n(1656),l=n(6178),d=n(1913),u=n(9781),h="Array Iterator",p=o.set,f=o.getterFor(h);e.exports=c(Array,"Array",(function(e,t){p(this,{type:h,target:r(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,l(void 0,!0)):l("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values");var m=s.Arguments=s.Array;if(i("keys"),i("values"),i("entries"),!d&&u&&"values"!==m.name)try{a(m,"name",{value:"values"})}catch(e){}},9600:function(e,t,n){"use strict";var r=n(2109),i=n(1702),s=n(8361),o=n(5656),a=n(9341),c=i([].join);r({target:"Array",proto:!0,forced:s!=Object||!a("join",",")},{join:function(e){return c(o(this),void 0===e?",":e)}})},4986:function(e,t,n){var r=n(2109),i=n(6583);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},1249:function(e,t,n){"use strict";var r=n(2109),i=n(2092).map;r({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},5827:function(e,t,n){"use strict";var r=n(2109),i=n(3671).left,s=n(9341),o=n(7392);r({target:"Array",proto:!0,forced:!n(5268)&&o>79&&o<83||!s("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},5069:function(e,t,n){"use strict";var r=n(2109),i=n(1702),s=n(3157),o=i([].reverse),a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),o(this)}})},7042:function(e,t,n){"use strict";var r=n(2109),i=n(3157),s=n(4411),o=n(111),a=n(1400),c=n(6244),l=n(5656),d=n(6135),u=n(5112),h=n(1194),p=n(206),f=h("slice"),m=u("species"),g=Array,_=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,r,u,h=l(this),f=c(h),v=a(e,f),y=a(void 0===t?f:t,f);if(i(h)&&(n=h.constructor,(s(n)&&(n===g||i(n.prototype))||o(n)&&null===(n=n[m]))&&(n=void 0),n===g||void 0===n))return p(h,v,y);for(r=new(void 0===n?g:n)(_(y-v,0)),u=0;v<y;v++,u++)v in h&&d(r,u,h[v]);return r.length=u,r}})},5212:function(e,t,n){"use strict";var r=n(2109),i=n(2092).some;r({target:"Array",proto:!0,forced:!n(9341)("some")},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},561:function(e,t,n){"use strict";var r=n(2109),i=n(7908),s=n(1400),o=n(9303),a=n(6244),c=n(3658),l=n(7207),d=n(5417),u=n(6135),h=n(5117),p=n(1194)("splice"),f=Math.max,m=Math.min;r({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var n,r,p,g,_,v,y=i(this),E=a(y),b=s(e,E),T=arguments.length;for(0===T?n=r=0:1===T?(n=0,r=E-b):(n=T-2,r=m(f(o(t),0),E-b)),l(E+n-r),p=d(y,r),g=0;g<r;g++)(_=b+g)in y&&u(p,g,y[_]);if(p.length=r,n<r){for(g=b;g<E-r;g++)v=g+n,(_=g+r)in y?y[v]=y[_]:h(y,v);for(g=E;g>E-r+n;g--)h(y,g-1)}else if(n>r)for(g=E-r;g>b;g--)v=g+n-1,(_=g+r-1)in y?y[v]=y[_]:h(y,v);for(g=0;g<n;g++)y[g+b]=arguments[g+2];return c(y,E-r+n),p}})},3843:function(e,t,n){var r=n(2109),i=n(1702),s=Date,o=i(s.prototype.getTime);r({target:"Date",stat:!0},{now:function(){return o(new s)}})},3710:function(e,t,n){var r=n(1702),i=n(8052),s=Date.prototype,o="Invalid Date",a="toString",c=r(s[a]),l=r(s.getTime);String(new Date(NaN))!=o&&i(s,a,(function(){var e=l(this);return e==e?c(this):o}))},4812:function(e,t,n){var r=n(2109),i=n(7065);r({target:"Function",proto:!0,forced:Function.bind!==i},{bind:i})},8309:function(e,t,n){var r=n(9781),i=n(6530).EXISTS,s=n(1702),o=n(7045),a=Function.prototype,c=s(a.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=s(l.exec);r&&!i&&o(a,"name",{configurable:!0,get:function(){try{return d(l,c(this))[1]}catch(e){return""}}})},8862:function(e,t,n){var r=n(2109),i=n(5005),s=n(2104),o=n(6916),a=n(1702),c=n(7293),l=n(614),d=n(2190),u=n(206),h=n(8044),p=n(6293),f=String,m=i("JSON","stringify"),g=a(/./.exec),_=a("".charAt),v=a("".charCodeAt),y=a("".replace),E=a(1..toString),b=/[\uD800-\uDFFF]/g,T=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,w=!p||c((function(){var e=i("Symbol")();return"[null]"!=m([e])||"{}"!=m({a:e})||"{}"!=m(Object(e))})),C=c((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),R=function(e,t){var n=u(arguments),r=h(t);if(l(r)||void 0!==e&&!d(e))return n[1]=function(e,t){if(l(r)&&(t=o(r,this,f(e),t)),!d(t))return t},s(m,null,n)},I=function(e,t,n){var r=_(n,t-1),i=_(n,t+1);return g(T,e)&&!g(S,i)||g(S,e)&&!g(T,r)?"\\u"+E(v(e,0),16):e};m&&r({target:"JSON",stat:!0,arity:3,forced:w||C},{stringify:function(e,t,n){var r=u(arguments),i=s(w?R:m,null,r);return C&&"string"==typeof i?y(i,b,I):i}})},9098:function(e,t,n){"use strict";n(7710)("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(5631))},1532:function(e,t,n){n(9098)},9653:function(e,t,n){"use strict";var r=n(2109),i=n(1913),s=n(9781),o=n(7854),a=n(857),c=n(1702),l=n(4705),d=n(2597),u=n(9587),h=n(7976),p=n(2190),f=n(7593),m=n(7293),g=n(8006).f,_=n(1236).f,v=n(3070).f,y=n(863),E=n(3111).trim,b="Number",T=o[b],S=a[b],w=T.prototype,C=o.TypeError,R=c("".slice),I=c("".charCodeAt),N=l(b,!T(" 0o1")||!T("0b1")||T("+0x1")),O=function(e){var t,n=arguments.length<1?0:T(function(e){var t=f(e,"number");return"bigint"==typeof t?t:function(e){var t,n,r,i,s,o,a,c,l=f(e,"number");if(p(l))throw C("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=E(l),43===(t=I(l,0))||45===t){if(88===(n=I(l,2))||120===n)return NaN}else if(48===t){switch(I(l,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(o=(s=R(l,2)).length,a=0;a<o;a++)if((c=I(s,a))<48||c>i)return NaN;return parseInt(s,r)}return+l}(t)}(e));return h(w,t=this)&&m((function(){y(t)}))?u(Object(n),this,O):n};O.prototype=w,N&&!i&&(w.constructor=O),r({global:!0,constructor:!0,wrap:!0,forced:N},{Number:O});var A=function(e,t){for(var n,r=s?g(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),i=0;r.length>i;i++)d(t,n=r[i])&&!d(e,n)&&v(e,n,_(t,n))};i&&S&&A(a[b],S),(N||i)&&A(a[b],T)},3161:function(e,t,n){n(2109)({target:"Number",stat:!0},{isInteger:n(5988)})},9601:function(e,t,n){var r=n(2109),i=n(1574);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},9070:function(e,t,n){var r=n(2109),i=n(9781),s=n(3070).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==s,sham:!i},{defineProperty:s})},9720:function(e,t,n){var r=n(2109),i=n(4699).entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},9660:function(e,t,n){var r=n(2109),i=n(6293),s=n(7293),o=n(5181),a=n(7908);r({target:"Object",stat:!0,forced:!i||s((function(){o.f(1)}))},{getOwnPropertySymbols:function(e){var t=o.f;return t?t(a(e)):[]}})},7941:function(e,t,n){var r=n(2109),i=n(7908),s=n(1956);r({target:"Object",stat:!0,forced:n(7293)((function(){s(1)}))},{keys:function(e){return s(i(e))}})},1539:function(e,t,n){var r=n(1694),i=n(8052),s=n(288);r||i(Object.prototype,"toString",s,{unsafe:!0})},821:function(e,t,n){"use strict";var r=n(2109),i=n(6916),s=n(9662),o=n(8523),a=n(2534),c=n(408);r({target:"Promise",stat:!0,forced:n(612)},{all:function(e){var t=this,n=o.f(t),r=n.resolve,l=n.reject,d=a((function(){var n=s(t.resolve),o=[],a=0,d=1;c(e,(function(e){var s=a++,c=!1;d++,i(n,t,e).then((function(e){c||(c=!0,o[s]=e,--d||r(o))}),l)})),--d||r(o)}));return d.error&&l(d.value),n.promise}})},4164:function(e,t,n){"use strict";var r=n(2109),i=n(1913),s=n(3702).CONSTRUCTOR,o=n(2492),a=n(5005),c=n(614),l=n(8052),d=o&&o.prototype;if(r({target:"Promise",proto:!0,forced:s,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&c(o)){var u=a("Promise").prototype.catch;d.catch!==u&&l(d,"catch",u,{unsafe:!0})}},3401:function(e,t,n){"use strict";var r,i,s,o=n(2109),a=n(1913),c=n(5268),l=n(7854),d=n(6916),u=n(8052),h=n(7674),p=n(8003),f=n(6340),m=n(9662),g=n(614),_=n(111),v=n(5787),y=n(6707),E=n(261).set,b=n(5948),T=n(842),S=n(2534),w=n(8572),C=n(9909),R=n(2492),I=n(3702),N=n(8523),O="Promise",A=I.CONSTRUCTOR,k=I.REJECTION_EVENT,x=I.SUBCLASSING,P=C.getterFor(O),D=C.set,L=R&&R.prototype,M=R,j=L,U=l.TypeError,F=l.document,B=l.process,V=N.f,G=V,H=!!(F&&F.createEvent&&l.dispatchEvent),W="unhandledrejection",z=function(e){var t;return!(!_(e)||!g(t=e.then))&&t},q=function(e,t){var n,r,i,s=t.value,o=1==t.state,a=o?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{a?(o||(2===t.rejection&&Z(t),t.rejection=1),!0===a?n=s:(u&&u.enter(),n=a(s),u&&(u.exit(),i=!0)),n===e.promise?l(U("Promise-chain cycle")):(r=z(n))?d(r,n,c,l):c(n)):l(s)}catch(e){u&&!i&&u.exit(),l(e)}},K=function(e,t){e.notified||(e.notified=!0,b((function(){for(var n,r=e.reactions;n=r.get();)q(n,e);e.notified=!1,t&&!e.rejection&&J(e)})))},Y=function(e,t,n){var r,i;H?((r=F.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),l.dispatchEvent(r)):r={promise:t,reason:n},!k&&(i=l["on"+e])?i(r):e===W&&T("Unhandled promise rejection",n)},J=function(e){d(E,l,(function(){var t,n=e.facade,r=e.value;if(X(e)&&(t=S((function(){c?B.emit("unhandledRejection",r,n):Y(W,n,r)})),e.rejection=c||X(e)?2:1,t.error))throw t.value}))},X=function(e){return 1!==e.rejection&&!e.parent},Z=function(e){d(E,l,(function(){var t=e.facade;c?B.emit("rejectionHandled",t):Y("rejectionhandled",t,e.value)}))},Q=function(e,t,n){return function(r){e(t,r,n)}},$=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,K(e,!0))},ee=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw U("Promise can't be resolved itself");var r=z(t);r?b((function(){var n={done:!1};try{d(r,t,Q(ee,n,e),Q($,n,e))}catch(t){$(n,t,e)}})):(e.value=t,e.state=1,K(e,!1))}catch(t){$({done:!1},t,e)}}};if(A&&(j=(M=function(e){v(this,j),m(e),d(r,this);var t=P(this);try{e(Q(ee,t),Q($,t))}catch(e){$(t,e)}}).prototype,(r=function(e){D(this,{type:O,done:!1,notified:!1,parent:!1,reactions:new w,rejection:!1,state:0,value:void 0})}).prototype=u(j,"then",(function(e,t){var n=P(this),r=V(y(this,M));return n.parent=!0,r.ok=!g(e)||e,r.fail=g(t)&&t,r.domain=c?B.domain:void 0,0==n.state?n.reactions.add(r):b((function(){q(r,n)})),r.promise})),i=function(){var e=new r,t=P(e);this.promise=e,this.resolve=Q(ee,t),this.reject=Q($,t)},N.f=V=function(e){return e===M||void 0===e?new i(e):G(e)},!a&&g(R)&&L!==Object.prototype)){s=L.then,x||u(L,"then",(function(e,t){var n=this;return new M((function(e,t){d(s,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete L.constructor}catch(e){}h&&h(L,j)}o({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:M}),p(M,O,!1,!0),f(O)},8674:function(e,t,n){n(3401),n(821),n(4164),n(6027),n(683),n(6294)},6027:function(e,t,n){"use strict";var r=n(2109),i=n(6916),s=n(9662),o=n(8523),a=n(2534),c=n(408);r({target:"Promise",stat:!0,forced:n(612)},{race:function(e){var t=this,n=o.f(t),r=n.reject,l=a((function(){var o=s(t.resolve);c(e,(function(e){i(o,t,e).then(n.resolve,r)}))}));return l.error&&r(l.value),n.promise}})},683:function(e,t,n){"use strict";var r=n(2109),i=n(6916),s=n(8523);r({target:"Promise",stat:!0,forced:n(3702).CONSTRUCTOR},{reject:function(e){var t=s.f(this);return i(t.reject,void 0,e),t.promise}})},6294:function(e,t,n){"use strict";var r=n(2109),i=n(5005),s=n(1913),o=n(2492),a=n(3702).CONSTRUCTOR,c=n(9478),l=i("Promise"),d=s&&!a;r({target:"Promise",stat:!0,forced:s||a},{resolve:function(e){return c(d&&this===l?o:this,e)}})},4916:function(e,t,n){"use strict";var r=n(2109),i=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},9714:function(e,t,n){"use strict";var r=n(6530).PROPER,i=n(8052),s=n(9670),o=n(1340),a=n(7293),c=n(4706),l="toString",d=RegExp.prototype[l],u=a((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),h=r&&d.name!=l;(u||h)&&i(RegExp.prototype,l,(function(){var e=s(this);return"/"+o(e.source)+"/"+o(c(e))}),{unsafe:!0})},2023:function(e,t,n){"use strict";var r=n(2109),i=n(1702),s=n(3929),o=n(4488),a=n(1340),c=n(4964),l=i("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~l(a(o(this)),a(s(e)),arguments.length>1?arguments[1]:void 0)}})},8783:function(e,t,n){"use strict";var r=n(8710).charAt,i=n(1340),s=n(9909),o=n(1656),a=n(6178),c="String Iterator",l=s.set,d=s.getterFor(c);o(String,"String",(function(e){l(this,{type:c,string:i(e),index:0})}),(function(){var e,t=d(this),n=t.string,i=t.index;return i>=n.length?a(void 0,!0):(e=r(n,i),t.index+=e.length,a(e,!1))}))},4032:function(e,t,n){"use strict";var r=n(2109),i=n(7854),s=n(6916),o=n(1702),a=n(1913),c=n(9781),l=n(6293),d=n(7293),u=n(2597),h=n(7976),p=n(9670),f=n(5656),m=n(4948),g=n(1340),_=n(9114),v=n(30),y=n(1956),E=n(8006),b=n(1156),T=n(5181),S=n(1236),w=n(3070),C=n(6048),R=n(5296),I=n(8052),N=n(7045),O=n(2309),A=n(6200),k=n(3501),x=n(9711),P=n(5112),D=n(6061),L=n(6800),M=n(6532),j=n(8003),U=n(9909),F=n(2092).forEach,B=A("hidden"),V="Symbol",G="prototype",H=U.set,W=U.getterFor(V),z=Object[G],q=i.Symbol,K=q&&q[G],Y=i.TypeError,J=i.QObject,X=S.f,Z=w.f,Q=b.f,$=R.f,ee=o([].push),te=O("symbols"),ne=O("op-symbols"),re=O("wks"),ie=!J||!J[G]||!J[G].findChild,se=c&&d((function(){return 7!=v(Z({},"a",{get:function(){return Z(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=X(z,t);r&&delete z[t],Z(e,t,n),r&&e!==z&&Z(z,t,r)}:Z,oe=function(e,t){var n=te[e]=v(K);return H(n,{type:V,tag:e,description:t}),c||(n.description=t),n},ae=function(e,t,n){e===z&&ae(ne,t,n),p(e);var r=m(t);return p(n),u(te,r)?(n.enumerable?(u(e,B)&&e[B][r]&&(e[B][r]=!1),n=v(n,{enumerable:_(0,!1)})):(u(e,B)||Z(e,B,_(1,{})),e[B][r]=!0),se(e,r,n)):Z(e,r,n)},ce=function(e,t){p(e);var n=f(t),r=y(n).concat(he(n));return F(r,(function(t){c&&!s(le,n,t)||ae(e,t,n[t])})),e},le=function(e){var t=m(e),n=s($,this,t);return!(this===z&&u(te,t)&&!u(ne,t))&&(!(n||!u(this,t)||!u(te,t)||u(this,B)&&this[B][t])||n)},de=function(e,t){var n=f(e),r=m(t);if(n!==z||!u(te,r)||u(ne,r)){var i=X(n,r);return!i||!u(te,r)||u(n,B)&&n[B][r]||(i.enumerable=!0),i}},ue=function(e){var t=Q(f(e)),n=[];return F(t,(function(e){u(te,e)||u(k,e)||ee(n,e)})),n},he=function(e){var t=e===z,n=Q(t?ne:f(e)),r=[];return F(n,(function(e){!u(te,e)||t&&!u(z,e)||ee(r,te[e])})),r};l||(q=function(){if(h(K,this))throw Y("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,t=x(e),n=function(e){this===z&&s(n,ne,e),u(this,B)&&u(this[B],t)&&(this[B][t]=!1),se(this,t,_(1,e))};return c&&ie&&se(z,t,{configurable:!0,set:n}),oe(t,e)},I(K=q[G],"toString",(function(){return W(this).tag})),I(q,"withoutSetter",(function(e){return oe(x(e),e)})),R.f=le,w.f=ae,C.f=ce,S.f=de,E.f=b.f=ue,T.f=he,D.f=function(e){return oe(P(e),e)},c&&(N(K,"description",{configurable:!0,get:function(){return W(this).description}}),a||I(z,"propertyIsEnumerable",le,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!l,sham:!l},{Symbol:q}),F(y(re),(function(e){L(e)})),r({target:V,stat:!0,forced:!l},{useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!c},{create:function(e,t){return void 0===t?v(e):ce(v(e),t)},defineProperty:ae,defineProperties:ce,getOwnPropertyDescriptor:de}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ue}),M(),j(q,V),k[B]=!0},1817:function(e,t,n){"use strict";var r=n(2109),i=n(9781),s=n(7854),o=n(1702),a=n(2597),c=n(614),l=n(7976),d=n(1340),u=n(7045),h=n(9920),p=s.Symbol,f=p&&p.prototype;if(i&&c(p)&&(!("description"in f)||void 0!==p().description)){var m={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),t=l(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(m[t]=!0),t};h(g,p),g.prototype=f,f.constructor=g;var _="Symbol(test)"==String(p("test")),v=o(f.valueOf),y=o(f.toString),E=/^Symbol\((.*)\)[^)]+$/,b=o("".replace),T=o("".slice);u(f,"description",{configurable:!0,get:function(){var e=v(this);if(a(m,e))return"";var t=y(e),n=_?T(t,7,-1):b(t,E,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:g})}},763:function(e,t,n){var r=n(2109),i=n(5005),s=n(2597),o=n(1340),a=n(2309),c=n(2015),l=a("string-to-symbol-registry"),d=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=o(e);if(s(l,t))return l[t];var n=i("Symbol")(t);return l[t]=n,d[n]=t,n}})},2165:function(e,t,n){n(6800)("iterator")},2526:function(e,t,n){n(4032),n(763),n(6620),n(8862),n(9660)},6620:function(e,t,n){var r=n(2109),i=n(2597),s=n(2190),o=n(6330),a=n(2309),c=n(2015),l=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{keyFor:function(e){if(!s(e))throw TypeError(o(e)+" is not a symbol");if(i(l,e))return l[e]}})},2990:function(e,t,n){"use strict";var r=n(1702),i=n(260),s=r(n(1048)),o=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(e,t){return s(o(this),e,t,arguments.length>2?arguments[2]:void 0)}))},8927:function(e,t,n){"use strict";var r=n(260),i=n(2092).every,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},3105:function(e,t,n){"use strict";var r=n(260),i=n(1285),s=n(4599),o=n(648),a=n(6916),c=n(1702),l=n(7293),d=r.aTypedArray,u=r.exportTypedArrayMethod,h=c("".slice);u("fill",(function(e){var t=arguments.length;d(this);var n="Big"===h(o(this),0,3)?s(e):+e;return a(i,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),l((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},5035:function(e,t,n){"use strict";var r=n(260),i=n(2092).filter,s=n(3074),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=i(o(this),e,arguments.length>1?arguments[1]:void 0);return s(this,t)}))},7174:function(e,t,n){"use strict";var r=n(260),i=n(2092).findIndex,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},4345:function(e,t,n){"use strict";var r=n(260),i=n(2092).find,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},2846:function(e,t,n){"use strict";var r=n(260),i=n(2092).forEach,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},8145:function(e,t,n){"use strict";var r=n(3832);(0,n(260).exportTypedArrayStaticMethod)("from",n(7321),r)},4731:function(e,t,n){"use strict";var r=n(260),i=n(1318).includes,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},7209:function(e,t,n){"use strict";var r=n(260),i=n(1318).indexOf,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},6319:function(e,t,n){"use strict";var r=n(7854),i=n(7293),s=n(1702),o=n(260),a=n(6992),c=n(5112)("iterator"),l=r.Uint8Array,d=s(a.values),u=s(a.keys),h=s(a.entries),p=o.aTypedArray,f=o.exportTypedArrayMethod,m=l&&l.prototype,g=!i((function(){m[c].call([1])})),_=!!m&&m.values&&m[c]===m.values&&"values"===m.values.name,v=function(){return d(p(this))};f("entries",(function(){return h(p(this))}),g),f("keys",(function(){return u(p(this))}),g),f("values",v,g||!_,{name:"values"}),f(c,v,g||!_,{name:"values"})},8867:function(e,t,n){"use strict";var r=n(260),i=n(1702),s=r.aTypedArray,o=r.exportTypedArrayMethod,a=i([].join);o("join",(function(e){return a(s(this),e)}))},7789:function(e,t,n){"use strict";var r=n(260),i=n(2104),s=n(6583),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return i(s,o(this),t>1?[e,arguments[1]]:[e])}))},3739:function(e,t,n){"use strict";var r=n(260),i=n(2092).map,s=n(6304),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(s(e))(t)}))}))},4483:function(e,t,n){"use strict";var r=n(260),i=n(3671).right,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return i(s(this),e,t,t>1?arguments[1]:void 0)}))},9368:function(e,t,n){"use strict";var r=n(260),i=n(3671).left,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return i(s(this),e,t,t>1?arguments[1]:void 0)}))},2056:function(e,t,n){"use strict";var r=n(260),i=r.aTypedArray,s=r.exportTypedArrayMethod,o=Math.floor;s("reverse",(function(){for(var e,t=this,n=i(t).length,r=o(n/2),s=0;s<r;)e=t[s],t[s++]=t[--n],t[n]=e;return t}))},3462:function(e,t,n){"use strict";var r=n(7854),i=n(6916),s=n(260),o=n(6244),a=n(4590),c=n(7908),l=n(7293),d=r.RangeError,u=r.Int8Array,h=u&&u.prototype,p=h&&h.set,f=s.aTypedArray,m=s.exportTypedArrayMethod,g=!l((function(){var e=new Uint8ClampedArray(2);return i(p,e,{length:1,0:3},1),3!==e[1]})),_=g&&s.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var e=new u(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));m("set",(function(e){f(this);var t=a(arguments.length>1?arguments[1]:void 0,1),n=c(e);if(g)return i(p,this,n,t);var r=this.length,s=o(n),l=0;if(s+t>r)throw d("Wrong length");for(;l<s;)this[t+l]=n[l++]}),!g||_)},678:function(e,t,n){"use strict";var r=n(260),i=n(6304),s=n(7293),o=n(206),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("slice",(function(e,t){for(var n=o(a(this),e,t),r=i(this),s=0,c=n.length,l=new r(c);c>s;)l[s]=n[s++];return l}),s((function(){new Int8Array(1).slice()})))},7462:function(e,t,n){"use strict";var r=n(260),i=n(2092).some,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},3824:function(e,t,n){"use strict";var r=n(7854),i=n(1470),s=n(7293),o=n(9662),a=n(4362),c=n(260),l=n(8886),d=n(256),u=n(7392),h=n(8008),p=c.aTypedArray,f=c.exportTypedArrayMethod,m=r.Uint16Array,g=m&&i(m.prototype.sort),_=!(!g||s((function(){g(new m(2),null)}))&&s((function(){g(new m(2),{})}))),v=!!g&&!s((function(){if(u)return u<74;if(l)return l<67;if(d)return!0;if(h)return h<602;var e,t,n=new m(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(g(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));f("sort",(function(e){return void 0!==e&&o(e),v?g(this,e):a(p(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!v||_)},5021:function(e,t,n){"use strict";var r=n(260),i=n(7466),s=n(1400),o=n(6304),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=a(this),r=n.length,c=s(e,r);return new(o(n))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((void 0===t?r:s(t,r))-c))}))},2974:function(e,t,n){"use strict";var r=n(7854),i=n(2104),s=n(260),o=n(7293),a=n(206),c=r.Int8Array,l=s.aTypedArray,d=s.exportTypedArrayMethod,u=[].toLocaleString,h=!!c&&o((function(){u.call(new c(1))}));d("toLocaleString",(function(){return i(u,h?a(l(this)):l(this),a(arguments))}),o((function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()}))||!o((function(){c.prototype.toLocaleString.call([1,2])})))},5016:function(e,t,n){"use strict";var r=n(260).exportTypedArrayMethod,i=n(7293),s=n(7854),o=n(1702),a=s.Uint8Array,c=a&&a.prototype||{},l=[].toString,d=o([].join);i((function(){l.call({})}))&&(l=function(){return d(this)});var u=c.toString!=l;r("toString",l,u)},2472:function(e,t,n){n(9843)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},4747:function(e,t,n){var r=n(7854),i=n(8324),s=n(8509),o=n(8533),a=n(8880),c=function(e){if(e&&e.forEach!==o)try{a(e,"forEach",o)}catch(t){e.forEach=o}};for(var l in i)i[l]&&c(r[l]&&r[l].prototype);c(s)},3948:function(e,t,n){var r=n(7854),i=n(8324),s=n(8509),o=n(6992),a=n(8880),c=n(5112),l=c("iterator"),d=c("toStringTag"),u=o.values,h=function(e,t){if(e){if(e[l]!==u)try{a(e,l,u)}catch(t){e[l]=u}if(e[d]||a(e,d,t),i[t])for(var n in o)if(e[n]!==o[n])try{a(e,n,o[n])}catch(t){e[n]=o[n]}}};for(var p in i)h(r[p]&&r[p].prototype,p);h(s,"DOMTokenList")},6815:function(e,t,n){var r=n(2109),i=n(7854),s=n(7152)(i.setInterval,!0);r({global:!0,bind:!0,forced:i.setInterval!==s},{setInterval:s})},8417:function(e,t,n){var r=n(2109),i=n(7854),s=n(7152)(i.setTimeout,!0);r({global:!0,bind:!0,forced:i.setTimeout!==s},{setTimeout:s})},2564:function(e,t,n){n(6815),n(8417)},5556:function(e,t,n){"use strict";n(6992);var r=n(2109),i=n(7854),s=n(6916),o=n(1702),a=n(9781),c=n(5143),l=n(8052),d=n(7045),u=n(9190),h=n(8003),p=n(3061),f=n(9909),m=n(5787),g=n(614),_=n(2597),v=n(9974),y=n(648),E=n(9670),b=n(111),T=n(1340),S=n(30),w=n(9114),C=n(4121),R=n(1246),I=n(8053),N=n(5112),O=n(4362),A=N("iterator"),k="URLSearchParams",x=k+"Iterator",P=f.set,D=f.getterFor(k),L=f.getterFor(x),M=Object.getOwnPropertyDescriptor,j=function(e){if(!a)return i[e];var t=M(i,e);return t&&t.value},U=j("fetch"),F=j("Request"),B=j("Headers"),V=F&&F.prototype,G=B&&B.prototype,H=i.RegExp,W=i.TypeError,z=i.decodeURIComponent,q=i.encodeURIComponent,K=o("".charAt),Y=o([].join),J=o([].push),X=o("".replace),Z=o([].shift),Q=o([].splice),$=o("".split),ee=o("".slice),te=/\+/g,ne=Array(4),re=function(e){return ne[e-1]||(ne[e-1]=H("((?:%[\\da-f]{2}){"+e+"})","gi"))},ie=function(e){try{return z(e)}catch(t){return e}},se=function(e){var t=X(e,te," "),n=4;try{return z(t)}catch(e){for(;n;)t=X(t,re(n--),ie);return t}},oe=/[!'()~]|%20/g,ae={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ce=function(e){return ae[e]},le=function(e){return X(q(e),oe,ce)},de=p((function(e,t){P(this,{type:x,iterator:C(D(e).entries),kind:t})}),"Iterator",(function(){var e=L(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),ue=function(e){this.entries=[],this.url=null,void 0!==e&&(b(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===K(e,0)?ee(e,1):e:T(e)))};ue.prototype={type:k,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,a,c,l=R(e);if(l)for(n=(t=C(e,l)).next;!(r=s(n,t)).done;){if(o=(i=C(E(r.value))).next,(a=s(o,i)).done||(c=s(o,i)).done||!s(o,i).done)throw W("Expected sequence with length 2");J(this.entries,{key:T(a.value),value:T(c.value)})}else for(var d in e)_(e,d)&&J(this.entries,{key:d,value:T(e[d])})},parseQuery:function(e){if(e)for(var t,n,r=$(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=$(t,"="),J(this.entries,{key:se(Z(n)),value:se(Y(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],J(n,le(e.key)+"="+le(e.value));return Y(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var he=function(){m(this,pe);var e=P(this,new ue(arguments.length>0?arguments[0]:void 0));a||(this.length=e.entries.length)},pe=he.prototype;if(u(pe,{append:function(e,t){I(arguments.length,2);var n=D(this);J(n.entries,{key:T(e),value:T(t)}),a||this.length++,n.updateURL()},delete:function(e){I(arguments.length,1);for(var t=D(this),n=t.entries,r=T(e),i=0;i<n.length;)n[i].key===r?Q(n,i,1):i++;a||(this.length=n.length),t.updateURL()},get:function(e){I(arguments.length,1);for(var t=D(this).entries,n=T(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){I(arguments.length,1);for(var t=D(this).entries,n=T(e),r=[],i=0;i<t.length;i++)t[i].key===n&&J(r,t[i].value);return r},has:function(e){I(arguments.length,1);for(var t=D(this).entries,n=T(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){I(arguments.length,1);for(var n,r=D(this),i=r.entries,s=!1,o=T(e),c=T(t),l=0;l<i.length;l++)(n=i[l]).key===o&&(s?Q(i,l--,1):(s=!0,n.value=c));s||J(i,{key:o,value:c}),a||(this.length=i.length),r.updateURL()},sort:function(){var e=D(this);O(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=D(this).entries,r=v(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new de(this,"keys")},values:function(){return new de(this,"values")},entries:function(){return new de(this,"entries")}},{enumerable:!0}),l(pe,A,pe.entries,{name:"entries"}),l(pe,"toString",(function(){return D(this).serialize()}),{enumerable:!0}),a&&d(pe,"size",{get:function(){return D(this).entries.length},configurable:!0,enumerable:!0}),h(he,k),r({global:!0,constructor:!0,forced:!c},{URLSearchParams:he}),!c&&g(B)){var fe=o(G.has),me=o(G.set),ge=function(e){if(b(e)){var t,n=e.body;if(y(n)===k)return t=e.headers?new B(e.headers):new B,fe(t,"content-type")||me(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),S(e,{body:w(0,T(n)),headers:w(0,t)})}return e};if(g(U)&&r({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return U(e,arguments.length>1?ge(arguments[1]):{})}}),g(F)){var _e=function(e){return m(this,V),new F(e,arguments.length>1?ge(arguments[1]):{})};V.constructor=_e,_e.prototype=V,r({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:_e})}}e.exports={URLSearchParams:he,getState:D}},1637:function(e,t,n){n(5556)},8789:function(e,t,n){"use strict";n(8783);var r,i=n(2109),s=n(9781),o=n(5143),a=n(7854),c=n(9974),l=n(1702),d=n(8052),u=n(7045),h=n(5787),p=n(2597),f=n(1574),m=n(8457),g=n(1589),_=n(8710).codeAt,v=n(3197),y=n(1340),E=n(8003),b=n(8053),T=n(5556),S=n(9909),w=S.set,C=S.getterFor("URL"),R=T.URLSearchParams,I=T.getState,N=a.URL,O=a.TypeError,A=a.parseInt,k=Math.floor,x=Math.pow,P=l("".charAt),D=l(/./.exec),L=l([].join),M=l(1..toString),j=l([].pop),U=l([].push),F=l("".replace),B=l([].shift),V=l("".split),G=l("".slice),H=l("".toLowerCase),W=l([].unshift),z="Invalid scheme",q="Invalid host",K="Invalid port",Y=/[a-z]/i,J=/[\d+-.a-z]/i,X=/\d/,Z=/^0x/i,Q=/^[0-7]+$/,$=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,re=/^[\u0000-\u0020]+/,ie=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,se=/[\t\n\r]/g,oe=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)W(t,e%256),e=k(e/256);return L(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,s=0;s<8;s++)0!==e[s]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=s),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=M(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ae={},ce=f({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),le=f({},ce,{"#":1,"?":1,"{":1,"}":1}),de=f({},le,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ue=function(e,t){var n=_(e,0);return n>32&&n<127&&!p(t,e)?e:encodeURIComponent(e)},he={ftp:21,file:null,http:80,https:443,ws:80,wss:443},pe=function(e,t){var n;return 2==e.length&&D(Y,P(e,0))&&(":"==(n=P(e,1))||!t&&"|"==n)},fe=function(e){var t;return e.length>1&&pe(G(e,0,2))&&(2==e.length||"/"===(t=P(e,2))||"\\"===t||"?"===t||"#"===t)},me=function(e){return"."===e||"%2e"===H(e)},ge={},_e={},ve={},ye={},Ee={},be={},Te={},Se={},we={},Ce={},Re={},Ie={},Ne={},Oe={},Ae={},ke={},xe={},Pe={},De={},Le={},Me={},je=function(e,t,n){var r,i,s,o=y(e);if(t){if(i=this.parse(o))throw O(i);this.searchParams=null}else{if(void 0!==n&&(r=new je(n,!0)),i=this.parse(o,null,r))throw O(i);(s=I(new R)).bindURL(this),this.searchParams=s}};je.prototype={type:"URL",parse:function(e,t,n){var i,s,o,a,c,l=this,d=t||ge,u=0,h="",f=!1,_=!1,v=!1;for(e=y(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=F(e,re,""),e=F(e,ie,"$1")),e=F(e,se,""),i=m(e);u<=i.length;){switch(s=i[u],d){case ge:if(!s||!D(Y,s)){if(t)return z;d=ve;continue}h+=H(s),d=_e;break;case _e:if(s&&(D(J,s)||"+"==s||"-"==s||"."==s))h+=H(s);else{if(":"!=s){if(t)return z;h="",d=ve,u=0;continue}if(t&&(l.isSpecial()!=p(he,h)||"file"==h&&(l.includesCredentials()||null!==l.port)||"file"==l.scheme&&!l.host))return;if(l.scheme=h,t)return void(l.isSpecial()&&he[l.scheme]==l.port&&(l.port=null));h="","file"==l.scheme?d=Oe:l.isSpecial()&&n&&n.scheme==l.scheme?d=ye:l.isSpecial()?d=Se:"/"==i[u+1]?(d=Ee,u++):(l.cannotBeABaseURL=!0,U(l.path,""),d=De)}break;case ve:if(!n||n.cannotBeABaseURL&&"#"!=s)return z;if(n.cannotBeABaseURL&&"#"==s){l.scheme=n.scheme,l.path=g(n.path),l.query=n.query,l.fragment="",l.cannotBeABaseURL=!0,d=Me;break}d="file"==n.scheme?Oe:be;continue;case ye:if("/"!=s||"/"!=i[u+1]){d=be;continue}d=we,u++;break;case Ee:if("/"==s){d=Ce;break}d=Pe;continue;case be:if(l.scheme=n.scheme,s==r)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=g(n.path),l.query=n.query;else if("/"==s||"\\"==s&&l.isSpecial())d=Te;else if("?"==s)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=g(n.path),l.query="",d=Le;else{if("#"!=s){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=g(n.path),l.path.length--,d=Pe;continue}l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=g(n.path),l.query=n.query,l.fragment="",d=Me}break;case Te:if(!l.isSpecial()||"/"!=s&&"\\"!=s){if("/"!=s){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,d=Pe;continue}d=Ce}else d=we;break;case Se:if(d=we,"/"!=s||"/"!=P(h,u+1))continue;u++;break;case we:if("/"!=s&&"\\"!=s){d=Ce;continue}break;case Ce:if("@"==s){f&&(h="%40"+h),f=!0,o=m(h);for(var E=0;E<o.length;E++){var b=o[E];if(":"!=b||v){var T=ue(b,de);v?l.password+=T:l.username+=T}else v=!0}h=""}else if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&l.isSpecial()){if(f&&""==h)return"Invalid authority";u-=m(h).length+1,h="",d=Re}else h+=s;break;case Re:case Ie:if(t&&"file"==l.scheme){d=ke;continue}if(":"!=s||_){if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&l.isSpecial()){if(l.isSpecial()&&""==h)return q;if(t&&""==h&&(l.includesCredentials()||null!==l.port))return;if(a=l.parseHost(h))return a;if(h="",d=xe,t)return;continue}"["==s?_=!0:"]"==s&&(_=!1),h+=s}else{if(""==h)return q;if(a=l.parseHost(h))return a;if(h="",d=Ne,t==Ie)return}break;case Ne:if(!D(X,s)){if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&l.isSpecial()||t){if(""!=h){var S=A(h,10);if(S>65535)return K;l.port=l.isSpecial()&&S===he[l.scheme]?null:S,h=""}if(t)return;d=xe;continue}return K}h+=s;break;case Oe:if(l.scheme="file","/"==s||"\\"==s)d=Ae;else{if(!n||"file"!=n.scheme){d=Pe;continue}if(s==r)l.host=n.host,l.path=g(n.path),l.query=n.query;else if("?"==s)l.host=n.host,l.path=g(n.path),l.query="",d=Le;else{if("#"!=s){fe(L(g(i,u),""))||(l.host=n.host,l.path=g(n.path),l.shortenPath()),d=Pe;continue}l.host=n.host,l.path=g(n.path),l.query=n.query,l.fragment="",d=Me}}break;case Ae:if("/"==s||"\\"==s){d=ke;break}n&&"file"==n.scheme&&!fe(L(g(i,u),""))&&(pe(n.path[0],!0)?U(l.path,n.path[0]):l.host=n.host),d=Pe;continue;case ke:if(s==r||"/"==s||"\\"==s||"?"==s||"#"==s){if(!t&&pe(h))d=Pe;else if(""==h){if(l.host="",t)return;d=xe}else{if(a=l.parseHost(h))return a;if("localhost"==l.host&&(l.host=""),t)return;h="",d=xe}continue}h+=s;break;case xe:if(l.isSpecial()){if(d=Pe,"/"!=s&&"\\"!=s)continue}else if(t||"?"!=s)if(t||"#"!=s){if(s!=r&&(d=Pe,"/"!=s))continue}else l.fragment="",d=Me;else l.query="",d=Le;break;case Pe:if(s==r||"/"==s||"\\"==s&&l.isSpecial()||!t&&("?"==s||"#"==s)){if(".."===(c=H(c=h))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(l.shortenPath(),"/"==s||"\\"==s&&l.isSpecial()||U(l.path,"")):me(h)?"/"==s||"\\"==s&&l.isSpecial()||U(l.path,""):("file"==l.scheme&&!l.path.length&&pe(h)&&(l.host&&(l.host=""),h=P(h,0)+":"),U(l.path,h)),h="","file"==l.scheme&&(s==r||"?"==s||"#"==s))for(;l.path.length>1&&""===l.path[0];)B(l.path);"?"==s?(l.query="",d=Le):"#"==s&&(l.fragment="",d=Me)}else h+=ue(s,le);break;case De:"?"==s?(l.query="",d=Le):"#"==s?(l.fragment="",d=Me):s!=r&&(l.path[0]+=ue(s,ae));break;case Le:t||"#"!=s?s!=r&&("'"==s&&l.isSpecial()?l.query+="%27":l.query+="#"==s?"%23":ue(s,ae)):(l.fragment="",d=Me);break;case Me:s!=r&&(l.fragment+=ue(s,ce))}u++}},parseHost:function(e){var t,n,r;if("["==P(e,0)){if("]"!=P(e,e.length-1))return q;if(t=function(e){var t,n,r,i,s,o,a,c=[0,0,0,0,0,0,0,0],l=0,d=null,u=0,h=function(){return P(e,u)};if(":"==h()){if(":"!=P(e,1))return;u+=2,d=++l}for(;h();){if(8==l)return;if(":"!=h()){for(t=n=0;n<4&&D(ee,h());)t=16*t+A(h(),16),u++,n++;if("."==h()){if(0==n)return;if(u-=n,l>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;u++}if(!D(X,h()))return;for(;D(X,h());){if(s=A(h(),10),null===i)i=s;else{if(0==i)return;i=10*i+s}if(i>255)return;u++}c[l]=256*c[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==h()){if(u++,!h())return}else if(h())return;c[l++]=t}else{if(null!==d)return;u++,d=++l}}if(null!==d)for(o=l-d,l=7;0!=l&&o>0;)a=c[l],c[l--]=c[d+o-1],c[d+--o]=a;else if(8!=l)return;return c}(G(e,1,-1)),!t)return q;this.host=t}else if(this.isSpecial()){if(e=v(e),D(te,e))return q;if(t=function(e){var t,n,r,i,s,o,a,c=V(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(s=10,i.length>1&&"0"==P(i,0)&&(s=D(Z,i)?16:8,i=G(i,8==s?1:2)),""===i)o=0;else{if(!D(10==s?$:8==s?Q:ee,i))return e;o=A(i,s)}U(n,o)}for(r=0;r<t;r++)if(o=n[r],r==t-1){if(o>=x(256,5-t))return null}else if(o>255)return null;for(a=j(n),r=0;r<n.length;r++)a+=n[r]*x(256,3-r);return a}(e),null===t)return q;this.host=t}else{if(D(ne,e))return q;for(t="",n=m(e),r=0;r<n.length;r++)t+=ue(n[r],ae);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return p(he,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&pe(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,s=e.port,o=e.path,a=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=oe(i),null!==s&&(l+=":"+s)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?o[0]:o.length?"/"+L(o,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw O(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new Ue(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+oe(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(y(e)+":",ge)},getUsername:function(){return this.username},setUsername:function(e){var t=m(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ue(t[n],de)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ue(t[n],de)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?oe(e):oe(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Re)},getHostname:function(){var e=this.host;return null===e?"":oe(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Ie)},getPort:function(){var e=this.port;return null===e?"":y(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=y(e))?this.port=null:this.parse(e,Ne))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+L(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,xe))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=y(e))?this.query=null:("?"==P(e,0)&&(e=G(e,1)),this.query="",this.parse(e,Le)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=y(e))?("#"==P(e,0)&&(e=G(e,1)),this.fragment="",this.parse(e,Me)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ue=function(e){var t=h(this,Fe),n=b(arguments.length,1)>1?arguments[1]:void 0,r=w(t,new je(e,!1,n));s||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Fe=Ue.prototype,Be=function(e,t){return{get:function(){return C(this)[e]()},set:t&&function(e){return C(this)[t](e)},configurable:!0,enumerable:!0}};if(s&&(u(Fe,"href",Be("serialize","setHref")),u(Fe,"origin",Be("getOrigin")),u(Fe,"protocol",Be("getProtocol","setProtocol")),u(Fe,"username",Be("getUsername","setUsername")),u(Fe,"password",Be("getPassword","setPassword")),u(Fe,"host",Be("getHost","setHost")),u(Fe,"hostname",Be("getHostname","setHostname")),u(Fe,"port",Be("getPort","setPort")),u(Fe,"pathname",Be("getPathname","setPathname")),u(Fe,"search",Be("getSearch","setSearch")),u(Fe,"searchParams",Be("getSearchParams")),u(Fe,"hash",Be("getHash","setHash"))),d(Fe,"toJSON",(function(){return C(this).serialize()}),{enumerable:!0}),d(Fe,"toString",(function(){return C(this).serialize()}),{enumerable:!0}),N){var Ve=N.createObjectURL,Ge=N.revokeObjectURL;Ve&&d(Ue,"createObjectURL",c(Ve,N)),Ge&&d(Ue,"revokeObjectURL",c(Ge,N))}E(Ue,"URL"),i({global:!0,constructor:!0,forced:!o,sham:!s},{URL:Ue})},285:function(e,t,n){n(8789)},5717:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},3720:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},s={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=c(e,(0|e)<0?-1:0,!0),o&&(s[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),o&&(i[e]=n),n)}function a(e,t){if(isNaN(e))return t?_:g;if(t){if(e<0)return _;if(e>=p)return T}else{if(e<=-f)return S;if(e+1>=f)return b}return e<0?a(-e,t).neg():c(e%h|0,e/h|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=a,n.fromBits=c;var l=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(e.substring(1),t,n).neg();for(var i=a(l(n,8)),s=g,o=0;o<e.length;o+=8){var c=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+c),n);if(c<8){var h=a(l(n,c));s=s.mul(h).add(a(u))}else s=(s=s.mul(i)).add(a(u))}return s.unsigned=t,s}function u(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?d(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=d,n.fromValue=u;var h=4294967296,p=h*h,f=p/2,m=o(1<<24),g=o(0);n.ZERO=g;var _=o(0,!0);n.UZERO=_;var v=o(1);n.ONE=v;var y=o(1,!0);n.UONE=y;var E=o(-1);n.NEG_ONE=E;var b=c(-1,2147483647,!1);n.MAX_VALUE=b;var T=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=T;var S=c(0,-2147483648,!1);n.MIN_VALUE=S;var w=n.prototype;w.toInt=function(){return this.unsigned?this.low>>>0:this.low},w.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},w.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=a(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=a(l(e,6),this.unsigned),s=this,o="";;){var c=s.div(i),d=(s.sub(c.mul(i)).toInt()>>>0).toString(e);if((s=c).isZero())return d+o;for(;d.length<6;)d="0"+d;o=""+d+o}},w.getHighBits=function(){return this.high},w.getHighBitsUnsigned=function(){return this.high>>>0},w.getLowBits=function(){return this.low},w.getLowBitsUnsigned=function(){return this.low>>>0},w.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},w.isZero=function(){return 0===this.high&&0===this.low},w.eqz=w.isZero,w.isNegative=function(){return!this.unsigned&&this.high<0},w.isPositive=function(){return this.unsigned||this.high>=0},w.isOdd=function(){return 1==(1&this.low)},w.isEven=function(){return 0==(1&this.low)},w.equals=function(e){return r(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},w.eq=w.equals,w.notEquals=function(e){return!this.eq(e)},w.neq=w.notEquals,w.ne=w.notEquals,w.lessThan=function(e){return this.comp(e)<0},w.lt=w.lessThan,w.lessThanOrEqual=function(e){return this.comp(e)<=0},w.lte=w.lessThanOrEqual,w.le=w.lessThanOrEqual,w.greaterThan=function(e){return this.comp(e)>0},w.gt=w.greaterThan,w.greaterThanOrEqual=function(e){return this.comp(e)>=0},w.gte=w.greaterThanOrEqual,w.ge=w.greaterThanOrEqual,w.compare=function(e){if(r(e)||(e=u(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},w.comp=w.compare,w.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(v)},w.neg=w.negate,w.add=function(e){r(e)||(e=u(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,o=e.high>>>16,a=65535&e.high,l=e.low>>>16,d=0,h=0,p=0,f=0;return p+=(f+=s+(65535&e.low))>>>16,h+=(p+=i+l)>>>16,d+=(h+=n+a)>>>16,d+=t+o,c((p&=65535)<<16|(f&=65535),(d&=65535)<<16|(h&=65535),this.unsigned)},w.subtract=function(e){return r(e)||(e=u(e)),this.add(e.neg())},w.sub=w.subtract,w.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=u(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return a(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,s=this.low>>>16,o=65535&this.low,l=e.high>>>16,d=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,_=0,v=0,y=0;return v+=(y+=o*p)>>>16,_+=(v+=s*p)>>>16,v&=65535,_+=(v+=o*h)>>>16,f+=(_+=i*p)>>>16,_&=65535,f+=(_+=s*h)>>>16,_&=65535,f+=(_+=o*d)>>>16,f+=n*p+i*h+s*d+o*l,c((v&=65535)<<16|(y&=65535),(f&=65535)<<16|(_&=65535),this.unsigned)},w.mul=w.multiply,w.divide=function(e){if(r(e)||(e=u(e)),e.isZero())throw Error("division by zero");var n,i,s;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?_:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _;if(e.gt(this.shru(1)))return y;s=_}else{if(this.eq(S))return e.eq(v)||e.eq(E)?S:e.eq(S)?v:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:E:(i=this.sub(e.mul(n)),s=n.add(i.div(e)));if(e.eq(S))return this.unsigned?_:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=g}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),d=o<=48?1:l(2,o-48),h=a(n),p=h.mul(e);p.isNegative()||p.gt(i);)p=(h=a(n-=d,this.unsigned)).mul(e);h.isZero()&&(h=v),s=s.add(h),i=i.sub(p)}return s},w.div=w.divide,w.modulo=function(e){return r(e)||(e=u(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},w.mod=w.modulo,w.rem=w.modulo,w.not=function(){return c(~this.low,~this.high,this.unsigned)},w.and=function(e){return r(e)||(e=u(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},w.or=function(e){return r(e)||(e=u(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},w.xor=function(e){return r(e)||(e=u(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},w.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},w.shl=w.shiftLeft,w.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},w.shr=w.shiftRight,w.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},w.shru=w.shiftRightUnsigned,w.shr_u=w.shiftRightUnsigned,w.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},w.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},w.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},w.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},w.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},3281:function(e,t,n){"use strict";e.exports=n(9050)},2967:function(e){"use strict";e.exports=r;var t,n=/\/|\./;function r(e,t){n.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),r[e]=t}r("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),r("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),r("timestamp",{Timestamp:t}),r("empty",{Empty:{fields:{}}}),r("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),r("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),r("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),r.get=function(e){return r[e]||null}},3996:function(e,t,n){"use strict";var r=t,i=n(7025),s=n(9935);function o(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",r);for(var s=t.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a)t.repeated&&s[o[a]]===t.typeDefault&&e("default:"),e("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",r,s[o[a]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function a(e,t,n,r){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r):e("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var s=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,s?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,n=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<t.length;++r){var a=t[r].resolve(),c=s.safeProp(a.name);a.map?(n("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),o(n,a,r,c+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),o(n,a,r,c+"[i]")("}")("}")):(a.resolvedType instanceof i||n("if(d%s!=null){",c),o(n,a,r,c),a.resolvedType instanceof i||n("}"))}return n("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var n=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],o=[],c=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?r:t[l].map?o:c).push(t[l]);if(r.length){for(n("if(o.arrays||o.defaults){"),l=0;l<r.length;++l)n("d%s=[]",s.safeProp(r[l].name));n("}")}if(o.length){for(n("if(o.objects||o.defaults){"),l=0;l<o.length;++l)n("d%s={}",s.safeProp(o[l].name));n("}")}if(c.length){for(n("if(o.defaults){"),l=0;l<c.length;++l){var d=c[l],u=s.safeProp(d.name);if(d.resolvedType instanceof i)n("d%s=o.enums===String?%j:%j",u,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var h="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",u,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}")}else n("d%s=%j",u,d.typeDefault)}n("}")}var p=!1;for(l=0;l<t.length;++l){d=t[l];var f=e._fieldsArray.indexOf(d);u=s.safeProp(d.name),d.map?(p||(p=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){"),a(n,d,f,u+"[ks2[j]]")("}")):d.repeated?(n("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u),a(n,d,f,u+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",u,d.name),a(n,d,f,u),d.partOf&&n("if(o.oneofs)")("d%s=%j",s.safeProp(d.partOf.name),d.name)),n("}")}return n("return d")}},5305:function(e,t,n){"use strict";e.exports=function(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var a=e._fieldsArray[n].resolve(),c=a.resolvedType instanceof r?"int32":a.type,l="m"+s.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[a.keyType]?t("k=%j",i.defaults[a.keyType]):t("k=null"),void 0!==i.defaults[c]?t("value=%j",i.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===i.basic[c]?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==i.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',l):t("%s[k]=value",l)):a.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),void 0!==i.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,c)("}else"),void 0===i.basic[c]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,n):t("%s.push(r.%s())",l,c)):void 0===i.basic[c]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,n):t("%s=r.%s()",l,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var d=e._fieldsArray[n];d.required&&t("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",o(d))}return t("return m")};var r=n(7025),i=n(7063),s=n(9935);function o(e){return"missing required '"+e.name+"'"}},4928:function(e,t,n){"use strict";e.exports=function(e){for(var t,n=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(s.compareFieldsById),c=0;c<a.length;++c){var l=a[c].resolve(),d=e._fieldsArray.indexOf(l),u=l.resolvedType instanceof r?"int32":l.type,h=i.basic[u];t="m"+s.safeProp(l.name),l.map?(n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|i.mapKey[l.keyType],l.keyType),void 0===h?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,t):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,u,t),n("}")("}")):l.repeated?(n("if(%s!=null&&%s.length){",t,t),l.packed&&void 0!==i.packed[u]?n("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",u,t)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",t),void 0===h?o(n,l,d,t+"[i]"):n("w.uint32(%i).%s(%s[i])",(l.id<<3|h)>>>0,u,t)),n("}")):(l.optional&&n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,l.name),void 0===h?o(n,l,d,t):n("w.uint32(%i).%s(%s)",(l.id<<3|h)>>>0,u,t))}return n("return w")};var r=n(7025),i=n(7063),s=n(9935);function o(e,t,n,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(t.id<<3|2)>>>0)}},7025:function(e,t,n){"use strict";e.exports=o;var r=n(3243);((o.prototype=Object.create(r.prototype)).constructor=o).className="Enum";var i=n(9313),s=n(9935);function o(e,t,n,i,s){if(r.call(this,e,n),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=s||{},this.reserved=void 0,t)for(var o=Object.keys(t),a=0;a<o.length;++a)"number"==typeof t[o[a]]&&(this.valuesById[this.values[o[a]]=t[o[a]]]=o[a])}o.fromJSON=function(e,t){var n=new o(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(e,t,n){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},o.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},o.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},3548:function(e,t,n){"use strict";e.exports=l;var r=n(3243);((l.prototype=Object.create(r.prototype)).constructor=l).className="Field";var i,s=n(7025),o=n(7063),a=n(9935),c=/^required|optional|repeated$/;function l(e,t,n,i,s,l,d){if(a.isObject(i)?(d=s,l=i,i=s=void 0):a.isObject(s)&&(d=l,l=s,s=void 0),r.call(this,e,l),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(n))throw TypeError("type must be a string");if(void 0!==i&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==s&&!a.isString(s))throw TypeError("extend must be a string");"proto3_optional"===i&&(i="optional"),this.rule=i&&"optional"!==i?i:void 0,this.type=n,this.id=t,this.extend=s||void 0,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=d}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,n)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},l.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},l.d=function(e,t,n,r){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(i,s){a.decorateType(i.constructor).add(new l(s,e,t,n,{default:r}))}},l._configure=function(e){i=e}},8836:function(e,t,n){"use strict";var r=e.exports=n(9482);r.build="light",r.load=function(e,t,n){return"function"==typeof t?(n=t,t=new r.Root):t||(t=new r.Root),t.load(e,n)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=n(4928),r.decoder=n(5305),r.verifier=n(4497),r.converter=n(3996),r.ReflectionObject=n(3243),r.Namespace=n(9313),r.Root=n(9424),r.Enum=n(7025),r.Type=n(7645),r.Field=n(3548),r.OneOf=n(7598),r.MapField=n(6039),r.Service=n(7513),r.Method=n(4429),r.Message=n(8368),r.wrappers=n(1667),r.types=n(7063),r.util=n(9935),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},9482:function(e,t,n){"use strict";var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(1173),r.BufferWriter=n(3155),r.Reader=n(1408),r.BufferReader=n(593),r.util=n(9693),r.rpc=n(5994),r.roots=n(5054),r.configure=i,i()},9050:function(e,t,n){"use strict";var r=e.exports=n(8836);r.build="full",r.tokenize=n(626),r.parse=n(2228),r.common=n(2967),r.Root._configure(r.Type,r.parse,r.common)},6039:function(e,t,n){"use strict";e.exports=o;var r=n(3548);((o.prototype=Object.create(r.prototype)).constructor=o).className="MapField";var i=n(7063),s=n(9935);function o(e,t,n,i,o,a){if(r.call(this,e,t,i,void 0,void 0,o,a),!s.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},o.d=function(e,t,n){return"function"==typeof n?n=s.decorateType(n).name:n&&"object"==typeof n&&(n=s.decorateEnum(n).name),function(r,i){s.decorateType(r.constructor).add(new o(i,e,t,n))}}},8368:function(e,t,n){"use strict";e.exports=i;var r=n(9693);function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},4429:function(e,t,n){"use strict";e.exports=s;var r=n(3243);((s.prototype=Object.create(r.prototype)).constructor=s).className="Method";var i=n(9935);function s(e,t,n,s,o,a,c,l,d){if(i.isObject(o)?(c=o,o=a=void 0):i.isObject(a)&&(c=a,a=void 0),void 0!==t&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(n))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");r.call(this,e,c),this.type=t||"rpc",this.requestType=n,this.requestStream=!!o||void 0,this.responseType=s,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l,this.parsedOptions=d}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},9313:function(e,t,n){"use strict";e.exports=u;var r=n(3243);((u.prototype=Object.create(r.prototype)).constructor=u).className="Namespace";var i,s,o,a=n(3548),c=n(7598),l=n(9935);function d(e,t){if(e&&e.length){for(var n={},r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}}function u(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}u.fromJSON=function(e,t){return new u(e,t.options).addJSON(t.nested)},u.arrayToJSON=d,u.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},u.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(u.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),u.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",d(this.nestedArray,e)])},u.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),r=0;r<n.length;++r)t=e[n[r]],this.add((void 0!==t.fields?i.fromJSON:void 0!==t.values?o.fromJSON:void 0!==t.methods?s.fromJSON:void 0!==t.id?a.fromJSON:u.fromJSON)(n[r],t));return this},u.prototype.get=function(e){return this.nested&&this.nested[e]||null},u.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},u.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof i||e instanceof o||e instanceof s||e instanceof u||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof u&&e instanceof u)||t instanceof i||t instanceof s)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,r=0;r<n.length;++r)e.add(n[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},u.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},u.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var r=e.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof u))throw Error("path conflicts with non-namespace objects")}else n.add(n=new u(r))}return t&&n.addJSON(t),n},u.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof u?e[t++].resolveAll():e[t++].resolve();return this.resolve()},u.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof u&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof u&&(r=this._nestedArray[i].lookup(e,t,!0)))return r;return null===this.parent||n?null:this.parent.lookup(e,t)},u.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},u.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},u.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},u.prototype.lookupService=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},u._configure=function(e,t,n){i=e,s=t,o=n}},3243:function(e,t,n){"use strict";e.exports=s,s.className="ReflectionObject";var r,i=n(9935);function s(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},s.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},s.prototype.getOption=function(e){if(this.options)return this.options[e]},s.prototype.setOption=function(e,t,n){return n&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},s.prototype.setParsedOption=function(e,t,n){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(n){var s=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(s){var o=s[e];i.setProperty(o,n,t)}else(s={})[e]=i.setProperty({},n,t),r.push(s)}else{var a={};a[e]=t,r.push(a)}return this},s.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;++r)this.setOption(n[r],e[n[r]],t);return this},s.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},s._configure=function(e){r=e}},7598:function(e,t,n){"use strict";e.exports=o;var r=n(3243);((o.prototype=Object.create(r.prototype)).constructor=o).className="OneOf";var i=n(3548),s=n(9935);function o(e,t,n,i){if(Array.isArray(t)||(n=t,t=void 0),r.call(this,e,n),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},o.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n))}a(this)},o.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},o.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){s.decorateType(t.constructor).add(new o(n,e)),Object.defineProperty(t,n,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},2228:function(e,t,n){"use strict";e.exports=w,w.filename=null,w.defaults={keepCase:!1};var r=n(626),i=n(9424),s=n(7645),o=n(3548),a=n(6039),c=n(7598),l=n(7025),d=n(7513),u=n(4429),h=n(7063),p=n(9935),f=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,_=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,y=/^-?0[0-7]+$/,E=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,b=/^[a-zA-Z_][a-zA-Z_0-9]*$/,T=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,S=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function w(e,t,n){t instanceof i||(n=t,t=new i),n||(n=w.defaults);var C,R,I,N,O,A=n.preferTrailingComment||!1,k=r(e,n.alternateCommentMode||!1),x=k.next,P=k.push,D=k.peek,L=k.skip,M=k.cmnt,j=!0,U=!1,F=t,B=n.keepCase?function(e){return e}:p.camelCase;function V(e,t,n){var r=w.filename;return n||(w.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(r?r+", ":"")+"line "+k.line+")")}function G(){var e,t=[];do{if('"'!==(e=x())&&"'"!==e)throw V(e);t.push(x()),L(e),e=D()}while('"'===e||"'"===e);return t.join("")}function H(e){var t=x();switch(t){case"'":case'"':return P(t),G();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var n=1;switch("-"===e.charAt(0)&&(n=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return n*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(f.test(e))return n*parseInt(e,10);if(g.test(e))return n*parseInt(e,16);if(v.test(e))return n*parseInt(e,8);if(E.test(e))return n*parseFloat(e);throw V(e,"number",!0)}(t)}catch(n){if(e&&T.test(t))return t;throw V(t,"value")}}function W(e,t){var n,r;do{!t||'"'!==(n=D())&&"'"!==n?e.push([r=z(x()),L("to",!0)?z(x()):r]):e.push(G())}while(L(",",!0));L(";")}function z(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw V(e,"id");if(m.test(e))return parseInt(e,10);if(_.test(e))return parseInt(e,16);if(y.test(e))return parseInt(e,8);throw V(e,"id")}function q(){if(void 0!==C)throw V("package");if(C=x(),!T.test(C))throw V(C,"name");F=F.define(C),L(";")}function K(){var e,t=D();switch(t){case"weak":e=I||(I=[]),x();break;case"public":x();default:e=R||(R=[])}t=G(),L(";"),e.push(t)}function Y(){if(L("="),N=G(),!(U="proto3"===N)&&"proto2"!==N)throw V(N,"syntax");L(";")}function J(e,t){switch(t){case"option":return Q(e,t),L(";"),!0;case"message":return function(e,t){if(!b.test(t=x()))throw V(t,"type name");var n=new s(t);X(n,(function(e){if(!J(n,e))switch(e){case"map":!function(e){L("<");var t=x();if(void 0===h.mapKey[t])throw V(t,"type");L(",");var n=x();if(!T.test(n))throw V(n,"type");L(">");var r=x();if(!b.test(r))throw V(r,"name");L("=");var i=new a(B(r),z(x()),t,n);X(i,(function(e){if("option"!==e)throw V(e);Q(i,e),L(";")}),(function(){te(i)})),e.add(i)}(n);break;case"required":case"repeated":Z(n,e);break;case"optional":Z(n,U?"proto3_optional":"optional");break;case"oneof":!function(e,t){if(!b.test(t=x()))throw V(t,"name");var n=new c(B(t));X(n,(function(e){"option"===e?(Q(n,e),L(";")):(P(e),Z(n,"optional"))})),e.add(n)}(n,e);break;case"extensions":W(n.extensions||(n.extensions=[]));break;case"reserved":W(n.reserved||(n.reserved=[]),!0);break;default:if(!U||!T.test(e))throw V(e);P(e),Z(n,"optional")}})),e.add(n)}(e,t),!0;case"enum":return function(e,t){if(!b.test(t=x()))throw V(t,"name");var n=new l(t);X(n,(function(e){switch(e){case"option":Q(n,e),L(";");break;case"reserved":W(n.reserved||(n.reserved=[]),!0);break;default:!function(e,t){if(!b.test(t))throw V(t,"name");L("=");var n=z(x(),!0),r={};X(r,(function(e){if("option"!==e)throw V(e);Q(r,e),L(";")}),(function(){te(r)})),e.add(t,n,r.comment)}(n,e)}})),e.add(n)}(e,t),!0;case"service":return function(e,t){if(!b.test(t=x()))throw V(t,"service name");var n=new d(t);X(n,(function(e){if(!J(n,e)){if("rpc"!==e)throw V(e);!function(e,t){var n=M(),r=t;if(!b.test(t=x()))throw V(t,"name");var i,s,o,a,c=t;if(L("("),L("stream",!0)&&(s=!0),!T.test(t=x()))throw V(t);if(i=t,L(")"),L("returns"),L("("),L("stream",!0)&&(a=!0),!T.test(t=x()))throw V(t);o=t,L(")");var l=new u(c,r,i,o,s,a);l.comment=n,X(l,(function(e){if("option"!==e)throw V(e);Q(l,e),L(";")})),e.add(l)}(n,e)}})),e.add(n)}(e,t),!0;case"extend":return function(e,t){if(!T.test(t=x()))throw V(t,"reference");var n=t;X(null,(function(t){switch(t){case"required":case"repeated":Z(e,t,n);break;case"optional":Z(e,U?"proto3_optional":"optional",n);break;default:if(!U||!T.test(t))throw V(t);P(t),Z(e,"optional",n)}}))}(e,t),!0}return!1}function X(e,t,n){var r=k.line;if(e&&("string"!=typeof e.comment&&(e.comment=M()),e.filename=w.filename),L("{",!0)){for(var i;"}"!==(i=x());)t(i);L(";",!0)}else n&&n(),L(";"),e&&("string"!=typeof e.comment||A)&&(e.comment=M(r)||e.comment)}function Z(e,t,n){var r=x();if("group"!==r){if(!T.test(r))throw V(r,"type");var i=x();if(!b.test(i))throw V(i,"name");i=B(i),L("=");var a=new o(i,z(x()),r,t,n);if(X(a,(function(e){if("option"!==e)throw V(e);Q(a,e),L(";")}),(function(){te(a)})),"proto3_optional"===t){var l=new c("_"+i);a.setOption("proto3_optional",!0),l.add(a),e.add(l)}else e.add(a);U||!a.repeated||void 0===h.packed[r]&&void 0!==h.basic[r]||a.setOption("packed",!1,!0)}else!function(e,t){var n=x();if(!b.test(n))throw V(n,"name");var r=p.lcFirst(n);n===r&&(n=p.ucFirst(n)),L("=");var i=z(x()),a=new s(n);a.group=!0;var c=new o(r,i,n,t);c.filename=w.filename,X(a,(function(e){switch(e){case"option":Q(a,e),L(";");break;case"required":case"repeated":Z(a,e);break;case"optional":Z(a,U?"proto3_optional":"optional");break;default:throw V(e)}})),e.add(a).add(c)}(e,t)}function Q(e,t){var n=L("(",!0);if(!T.test(t=x()))throw V(t,"name");var r,i=t,s=i;n&&(L(")"),s=i="("+i+")",t=D(),S.test(t)&&(r=t.substr(1),i+=t,x())),L("="),function(e,t,n,r){e.setParsedOption&&e.setParsedOption(t,n,r)}(e,s,$(e,i),r)}function $(e,t){if(L("{",!0)){for(var n={};!L("}",!0);){if(!b.test(O=x()))throw V(O,"name");var r,i=O;"{"===D()?r=$(e,t+"."+O):(L(":"),"{"===D()?r=$(e,t+"."+O):(r=H(!0),ee(e,t+"."+O,r)));var s=n[i];s&&(r=[].concat(s).concat(r)),n[i]=r,L(",",!0)}return n}var o=H(!0);return ee(e,t,o),o}function ee(e,t,n){e.setOption&&e.setOption(t,n)}function te(e){if(L("[",!0)){do{Q(e,"option")}while(L(",",!0));L("]")}return e}for(;null!==(O=x());)switch(O){case"package":if(!j)throw V(O);q();break;case"import":if(!j)throw V(O);K();break;case"syntax":if(!j)throw V(O);Y();break;case"option":Q(F,O),L(";");break;default:if(J(F,O)){j=!1;continue}throw V(O)}return w.filename=null,{package:C,imports:R,weakImports:I,syntax:N,root:t}}},1408:function(e,t,n){"use strict";e.exports=c;var r,i=n(9693),s=i.LongBits,o=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,d="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):d(e)})(e)}:d};function h(){var e=new s(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new s(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=u(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},593:function(e,t,n){"use strict";e.exports=s;var r=n(1408);(s.prototype=Object.create(r.prototype)).constructor=s;var i=n(9693);function s(e){r.call(this,e)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},9424:function(e,t,n){"use strict";e.exports=u;var r=n(9313);((u.prototype=Object.create(r.prototype)).constructor=u).className="Root";var i,s,o,a=n(3548),c=n(7025),l=n(7598),d=n(9935);function u(e){r.call(this,"",e),this.deferred=[],this.files=[]}function h(){}u.fromJSON=function(e,t){return t||(t=new u),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},u.prototype.resolvePath=d.path.resolve,u.prototype.fetch=d.fetch,u.prototype.load=function e(t,n,r){"function"==typeof n&&(r=n,n=void 0);var i=this;if(!r)return d.asPromise(e,i,t,n);var a=r===h;function c(e,t){if(r){var n=r;if(r=null,a)throw e;n(e,t)}}function l(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var n=e.substring(t);if(n in o)return n}return null}function u(e,t){try{if(d.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),d.isString(t)){s.filename=e;var r,o=s(t,i,n),u=0;if(o.imports)for(;u<o.imports.length;++u)(r=l(o.imports[u])||i.resolvePath(e,o.imports[u]))&&p(r);if(o.weakImports)for(u=0;u<o.weakImports.length;++u)(r=l(o.weakImports[u])||i.resolvePath(e,o.weakImports[u]))&&p(r,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||f||c(null,i)}function p(e,t){if(!(i.files.indexOf(e)>-1))if(i.files.push(e),e in o)a?u(e,o[e]):(++f,setTimeout((function(){--f,u(e,o[e])})));else if(a){var n;try{n=d.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}u(e,n)}else++f,i.fetch(e,(function(n,s){--f,r&&(n?t?f||c(null,i):c(n):u(e,s))}))}var f=0;d.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=i.resolvePath("",t[g]))&&p(m);if(a)return i;f||c(null,i)},u.prototype.loadSync=function(e,t){if(!d.isNode)throw Error("not supported");return this.load(e,t,h)},u.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var n=t.parent.lookup(t.extend);if(n){var r=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.declaringField=t,t.extensionField=r,n.add(r),!0}return!1}u.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof i)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);p.test(e.name)&&(e.parent[e.name]=e)}},u.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);p.test(e.name)&&delete e.parent[e.name]}},u._configure=function(e,t,n){i=e,s=t,o=n}},5054:function(e){"use strict";e.exports={}},5994:function(e,t,n){"use strict";t.Service=n(7948)},7948:function(e,t,n){"use strict";e.exports=i;var r=n(9693);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,s,o){if(!s)throw TypeError("request must be specified");var a=this;if(!o)return r.asPromise(e,a,t,n,i,s);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(e,n){if(e)return a.emit("error",e,t),o(e);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",n,t),o(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},7513:function(e,t,n){"use strict";e.exports=a;var r=n(9313);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var i=n(4429),s=n(9935),o=n(5994);function a(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var n=new a(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),s=0;s<r.length;++s)n.add(i.fromJSON(r[s],t.methods[r[s]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},a.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return s.toObject(["options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,c(this)):r.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return r.prototype.remove.call(this,e)},a.prototype.create=function(e,t,n){for(var r,i=new o.Service(e,t,n),a=0;a<this.methodsArray.length;++a){var c=s.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[c]=s.codegen(["r","c"],s.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return i}},626:function(e){"use strict";e.exports=u;var t=/[\s{}=;:[\],'"()<>]/g,n=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,r=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,i=/^ *[*/]+ */,s=/^\s*\*?\/*/,o=/\n/g,a=/\s/,c=/\\(.?)/g,l={0:"\0",r:"\r",n:"\n",t:"\t"};function d(e){return e.replace(c,(function(e,t){switch(t){case"\\":case"":return t;default:return l[t]||""}}))}function u(e,c){e=e.toString();var l=0,u=e.length,h=1,p=null,f=null,m=0,g=!1,_=!1,v=[],y=null;function E(e){return Error("illegal "+e+" (line "+h+")")}function b(t){return e.charAt(t)}function T(t,n,r){p=e.charAt(t++),m=h,g=!1,_=r;var a,l=t-(c?2:3);do{if(--l<0||"\n"===(a=e.charAt(l))){g=!0;break}}while(" "===a||"\t"===a);for(var d=e.substring(t,n).split(o),u=0;u<d.length;++u)d[u]=d[u].replace(c?s:i,"").trim();f=d.join("\n").trim()}function S(t){var n=w(t),r=e.substring(t,n);return/^\s*\/{1,2}/.test(r)}function w(e){for(var t=e;t<u&&"\n"!==b(t);)t++;return t}function C(){if(v.length>0)return v.shift();if(y)return function(){var t="'"===y?r:n;t.lastIndex=l-1;var i=t.exec(e);if(!i)throw E("string");return l=t.lastIndex,R(y),y=null,d(i[1])}();var i,s,o,p,f,m=0===l;do{if(l===u)return null;for(i=!1;a.test(o=b(l));)if("\n"===o&&(m=!0,++h),++l===u)return null;if("/"===b(l)){if(++l===u)throw E("comment");if("/"===b(l))if(c){if(p=l,f=!1,S(l)){f=!0;do{if((l=w(l))===u)break;l++}while(S(l))}else l=Math.min(u,w(l)+1);f&&T(p,l,m),h++,i=!0}else{for(f="/"===b(p=l+1);"\n"!==b(++l);)if(l===u)return null;++l,f&&T(p,l-1,m),++h,i=!0}else{if("*"!==(o=b(l)))return"/";p=l+1,f=c||"*"===b(p);do{if("\n"===o&&++h,++l===u)throw E("comment");s=o,o=b(l)}while("*"!==s||"/"!==o);++l,f&&T(p,l-2,m),i=!0}}}while(i);var g=l;if(t.lastIndex=0,!t.test(b(g++)))for(;g<u&&!t.test(b(g));)++g;var _=e.substring(l,l=g);return'"'!==_&&"'"!==_||(y=_),_}function R(e){v.push(e)}function I(){if(!v.length){var e=C();if(null===e)return null;R(e)}return v[0]}return Object.defineProperty({next:C,peek:I,push:R,skip:function(e,t){var n=I();if(n===e)return C(),!0;if(!t)throw E("token '"+n+"', '"+e+"' expected");return!1},cmnt:function(e){var t=null;return void 0===e?m===h-1&&(c||"*"===p||g)&&(t=_?f:null):(m<e&&I(),m!==e||g||!c&&"/"!==p||(t=_?null:f)),t}},"line",{get:function(){return h}})}u.unescape=d},7645:function(e,t,n){"use strict";e.exports=v;var r=n(9313);((v.prototype=Object.create(r.prototype)).constructor=v).className="Type";var i=n(7025),s=n(7598),o=n(3548),a=n(6039),c=n(7513),l=n(8368),d=n(1408),u=n(1173),h=n(9935),p=n(4928),f=n(5305),m=n(4497),g=n(3996),_=n(1667);function v(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function y(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,l,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:h.oneOfGetter(this._oneofsArray[n].oneof),set:h.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,r)}}}),v.generateConstructor=function(e){for(var t,n=h.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?n("this%s={}",h.safeProp(t.name)):t.repeated&&n("this%s=[]",h.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var n=new v(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var l=Object.keys(t.fields),d=0;d<l.length;++d)n.add((void 0!==t.fields[l[d]].keyType?a.fromJSON:o.fromJSON)(l[d],t.fields[l[d]]));if(t.oneofs)for(l=Object.keys(t.oneofs),d=0;d<l.length;++d)n.add(s.fromJSON(l[d],t.oneofs[l[d]]));if(t.nested)for(l=Object.keys(t.nested),d=0;d<l.length;++d){var u=t.nested[l[d]];n.add((void 0!==u.id?o.fromJSON:void 0!==u.fields?v.fromJSON:void 0!==u.values?i.fromJSON:void 0!==u.methods?c.fromJSON:r.fromJSON)(l[d],u))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},v.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return h.toObject(["options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return r.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),y(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),y(this)):r.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof o&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),y(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),y(this)}return r.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=p(this)({Writer:u,types:t,util:h}),this.decode=f(this)({Reader:d,types:t,util:h}),this.verify=m(this)({types:t,util:h}),this.fromObject=g.fromObject(this)({types:t,util:h}),this.toObject=g.toObject(this)({types:t,util:h});var r=_[e];if(r){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(i),i.toObject=this.toObject,this.toObject=r.toObject.bind(i)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof d||(e=d.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){h.decorateType(t,e)}}},7063:function(e,t,n){"use strict";var r=t,i=n(9935),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var n=0,r={};for(t|=0;n<e.length;)r[s[n+t]]=e[n++];return r}r.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),r.long=o([0,0,0,1,1],7),r.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},9935:function(e,t,n){"use strict";var r,i,s=e.exports=n(9693),o=n(5054);s.codegen=n(5124),s.fetch=n(9054),s.path=n(8626),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),r=0;r<t.length;)n[r]=e[t[r++]];return n}return[]},s.toObject=function(e){for(var t={},n=0;n<e.length;){var r=e[n++],i=e[n++];void 0!==i&&(t[r]=i)}return t};var a=/\\/g,c=/"/g;s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,(function(e,t){return t.toUpperCase()}))},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type;r||(r=n(7645));var i=new r(t||e.name);return s.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var d=0;s.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=n(7025));var t=new i("Enum"+d++,e);return s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},s.setProperty=function(e,t,n){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,n,r){var i=n.shift();if("__proto__"===i)return t;if(n.length>0)t[i]=e(t[i]||{},n,r);else{var s=t[i];s&&(r=[].concat(s).concat(r)),t[i]=r}return t}(e,t=t.split("."),n)},Object.defineProperty(s,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(n(9424)))}})},1945:function(e,t,n){"use strict";e.exports=i;var r=n(9693);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):s},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===o?s:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},9693:function(e,t,n){"use strict";var r=t;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function s(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(4537),r.base64=n(7419),r.EventEmitter=n(9211),r.float=n(945),r.inquire=n(7199),r.utf8=n(4997),r.pool=n(6662),r.LongBits=n(1945),r.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=s,r.ProtocolError=s("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},4497:function(e,t,n){"use strict";e.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n={};e.oneofsArray.length&&t("var p={}");for(var r=0;r<e.fieldsArray.length;++r){var c=e._fieldsArray[r].resolve(),l="m"+i.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)t("if(!util.isObject(%s))",l)("return%j",s(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),a(t,c,"k[i]"),o(t,c,r,l+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",l)("return%j",s(c,"array"))("for(var i=0;i<%s.length;++i){",l),o(t,c,r,l+"[i]")("}");else{if(c.partOf){var d=i.safeProp(c.partOf.name);1===n[c.partOf.name]&&t("if(p%s===1)",d)("return%j",c.partOf.name+": multiple values"),n[c.partOf.name]=1,t("p%s=1",d)}o(t,c,r,l)}c.optional&&t("}")}return t("return null")};var r=n(7025),i=n(9935);function s(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",i)("default:")("return%j",s(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",s(t,"buffer"))}return e}function a(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",s(t,"boolean key"))}return e}},1667:function(e,t,n){"use strict";var r=t,i=n(8368);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),n=this.lookup(t);if(n){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:n.encode(n.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var n="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var s=this.lookup(r);s&&(e=s.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var o=e.$type.toObject(e,t);return""===n&&(n="type.googleapis.com/"),r=n+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),o["@type"]=r,o}return this.toObject(e,t)}}},1173:function(e,t,n){"use strict";e.exports=u;var r,i=n(9693),s=i.LongBits,o=i.base64,a=i.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(u.create=function(){return new r})()}:function(){return new u}};function p(e,t,n){t[n]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function g(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}u.create=h(),u.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(u.alloc=i.pool(u.alloc,i.Array.prototype.subarray)),u.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(m,10,s.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=s.from(e);return this._push(m,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(m,t.length(),t)},u.prototype.bool=function(e){return this._push(p,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=s.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var _=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(i.isString(e)){var n=u.alloc(t=o.length(e));o.decode(e,n,0),e=n}return this.uint32(t)._push(_,t,e)},u.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},u.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(l,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},u._configure=function(e){r=e,u.create=h(),r._configure()}},3155:function(e,t,n){"use strict";e.exports=s;var r=n(1173);(s.prototype=Object.create(r.prototype)).constructor=s;var i=n(9693);function s(){r.call(this)}function o(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},s._configure()},8e3:function(e,t,n){"use strict";var r=n(7581);e.exports=n(3626)(r),"_sockjs_onload"in n.g&&setTimeout(n.g._sockjs_onload,1)},2530:function(e,t,n){"use strict";var r=n(5717),i=n(685);function s(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}r(s,i),e.exports=s},3212:function(e,t,n){"use strict";var r=n(5717),i=n(3184);function s(){i.call(this)}r(s,i),s.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},s.prototype.once=function(e,t){var n=this,r=!1;this.on(e,(function i(){n.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}))},s.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),i=1;i<n;i++)r[i-1]=arguments[i];for(var s=0;s<t.length;s++)t[s].apply(this,r)}},s.prototype.on=s.prototype.addListener=i.prototype.addEventListener,s.prototype.removeListener=i.prototype.removeEventListener,e.exports.v=s},685:function(e){"use strict";function t(e){this.type=e}t.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},t.prototype.stopPropagation=function(){},t.prototype.preventDefault=function(){},t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,e.exports=t},3184:function(e){"use strict";function t(){this._listeners={}}t.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},t.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);-1===r||(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e])}},t.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],i=0;i<r.length;i++)r[i].apply(this,n)},e.exports=t},3326:function(e,t,n){"use strict";var r=n(5717),i=n(685);function s(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}r(s,i),e.exports=s},691:function(e,t,n){"use strict";var r=n(3683);function i(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}i.prototype._transportClose=function(e,t){r.postMessage("c",JSON.stringify([e,t]))},i.prototype._transportMessage=function(e){r.postMessage("t",e)},i.prototype._send=function(e){this._transport.send(e)},i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=i},551:function(e,t,n){"use strict";var r=n(273),i=n(7705),s=n(691),o=n(6311),a=n(3683),c=n(7486);e.exports=function(e,t){var n,l={};t.forEach((function(e){e.facadeTransport&&(l[e.facadeTransport.transportName]=e.facadeTransport)})),l[o.transportName]=o,e.bootstrap_iframe=function(){var t;a.currentWindowId=c.hash.slice(1),i.attachEvent("message",(function(i){if(i.source===parent&&(void 0===n&&(n=i.origin),i.origin===n)){var o;try{o=JSON.parse(i.data)}catch(e){return void i.data}if(o.windowId===a.currentWindowId)switch(o.type){case"s":var d;try{d=JSON.parse(o.data)}catch(e){o.data;break}var u=d[0],h=d[1],p=d[2],f=d[3];if(u!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+u+'", the iframe: "'+e.version+'".');if(!r.isOriginEqual(p,c.href)||!r.isOriginEqual(f,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+p+", "+f+")");t=new s(new l[h](p,f));break;case"m":t._send(o.data);break;case"c":t&&t._close(),t=null}}})),a.postMessage("s")}}},2550:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),s=n(2217);function o(e,t){r.call(this);var n=this,i=+new Date;this.xo=new t("GET",e),this.xo.once("finish",(function(e,t){var r,o;if(200===e){if(o=+new Date-i,t)try{r=JSON.parse(t)}catch(e){}s.isObject(r)||(r={})}n.emit("finish",r,o),n.removeAllListeners()}))}i(o,r),o.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=o},6311:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v,s=n(3515),o=n(2550);function a(e){var t=this;i.call(this),this.ir=new o(e,s),this.ir.once("finish",(function(e,n){t.ir=null,t.emit("message",JSON.stringify([e,n]))}))}r(a,i),a.transportName="iframe-info-receiver",a.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=a},3616:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),s=n(7705),o=n(5088),a=n(6311);function c(e,t){var i=this;r.call(this);var c=function(){var n=i.ifr=new o(a.transportName,t,e);n.once("message",(function(e){if(e){var t;try{t=JSON.parse(e)}catch(e){return i.emit("finish"),void i.close()}var n=t[0],r=t[1];i.emit("finish",n,r)}i.close()})),n.once("close",(function(){i.emit("finish"),i.close()}))};n.g.document.body?c():s.attachEvent("load",c)}i(c,r),c.enabled=function(){return o.enabled()},c.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=c},5172:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),s=n(273),o=n(6073),a=n(9033),c=n(3515),l=n(7103),d=n(3616),u=n(2550);function h(e,t){var n=this;r.call(this),setTimeout((function(){n.doXhr(e,t)}),0)}i(h,r),h._getReceiver=function(e,t,n){return n.sameOrigin?new u(t,c):a.enabled?new u(t,a):o.enabled&&n.sameScheme?new u(t,o):d.enabled()?new d(e,t):new u(t,l)},h.prototype.doXhr=function(e,t){var n=this,r=s.addPath(e,"/info");this.xo=h._getReceiver(e,r,t),this.timeoutRef=setTimeout((function(){n._cleanup(!1),n.emit("finish")}),h.timeout),this.xo.once("finish",(function(e,t){n._cleanup(!0),n.emit("finish",e,t)}))},h.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},h.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},h.timeout=8e3,e.exports=h},7486:function(e,t,n){"use strict";e.exports=n.g.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},3626:function(e,t,n){"use strict";n(1247);var r,i=n(4564),s=n(5717),o=n(8915),a=n(8028),c=n(273),l=n(7705),d=n(5581),u=n(2217),h=n(8510),p=n(4886),f=n(685),m=n(3184),g=n(7486),_=n(2530),v=n(3326),y=n(5172);function E(e,t,n){if(!(this instanceof E))return new E(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");m.call(this),this.readyState=E.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&p.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if("function"==typeof r)this._generateSessionId=r;else{if("number"!=typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return o.string(r)}}this._server=n.server||o.numberString(1e3);var s=new i(e);if(!s.host||!s.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(s.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==s.protocol&&"https:"!==s.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+s.protocol+"' is not allowed.");var a="https:"===s.protocol;if("https:"===g.protocol&&!a&&!c.isLoopbackAddr(s.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var l=t.sort();l.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<l.length-1&&e===l[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var d=c.getOrigin(g.href);this._origin=d?d.toLowerCase():null,s.set("pathname",s.pathname.replace(/\/+$/,"")),this.url=s.href,this.url,this._urlInfo={nullOrigin:!h.hasDomain(),sameOrigin:c.isOriginEqual(this.url,g.href),sameScheme:c.isSchemeEqual(this.url,g.href)},this._ir=new y(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function b(e){return 1e3===e||e>=3e3&&e<=4999}s(E,m),E.prototype.close=function(e,t){if(e&&!b(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");this.readyState!==E.CLOSING&&this.readyState!==E.CLOSED&&this._close(e||1e3,t||"Normal closure",!0)},E.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===E.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===E.OPEN&&this._transport.send(a.quote(e))},E.version=n(2828),E.CONNECTING=0,E.OPEN=1,E.CLOSING=2,E.CLOSED=3,E.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=u.extend(e,this._urlInfo);var n=r.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},E.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.transportName,e.needBody&&(!n.g.document.body||void 0!==n.g.document.readyState&&"complete"!==n.g.document.readyState&&"interactive"!==n.g.document.readyState))return this._transports.unshift(e),void l.attachEvent("load",this._connect.bind(this));var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var r=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),i=this._transportOptions[e.transportName],s=new e(r,this._transUrl,i);return s.on("message",this._transportMessage.bind(this)),s.once("close",this._transportClose.bind(this)),s.transportName=e.transportName,void(this._transport=s)}this._close(2e3,"All transports failed",!1)},E.prototype._transportTimeout=function(){this.readyState===E.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},E.prototype._transportMessage=function(e){var t,n=this,r=e.slice(0,1),i=e.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new f("heartbeat")),void this.transport}if(i)try{t=JSON.parse(i)}catch(e){}if(void 0!==t)switch(r){case"a":Array.isArray(t)&&t.forEach((function(e){n.transport,n.dispatchEvent(new v(e))}));break;case"m":this.transport,this.dispatchEvent(new v(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},E.prototype._transportClose=function(e,t){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),b(e)||2e3===e||this.readyState!==E.CONNECTING?this._close(e,t):this._connect()},E.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===E.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=E.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new f("open")),this.transport):this._close(1006,"Server lost session")},E.prototype._close=function(e,t,n){this.transport,this.readyState;var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===E.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=E.CLOSING,setTimeout(function(){this.readyState=E.CLOSED,r&&this.dispatchEvent(new f("error"));var i=new _("close");i.wasClean=n||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},E.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return r=d(e),n(551)(E,e),E}},1247:function(){"use strict";var e,t=Array.prototype,n=Object.prototype,r=Function.prototype,i=String.prototype,s=t.slice,o=n.toString,a=function(e){return"[object Function]"===n.toString.call(e)},c=function(e){return"[object String]"===o.call(e)},l=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();e=l?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)};var d=function(t,r,i){for(var s in r)n.hasOwnProperty.call(r,s)&&e(t,s,r[s],i)},u=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function h(){}d(r,{bind:function(e){var t=this;if(!a(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=s.call(arguments,1),r=Math.max(0,t.length-n.length),i=[],o=0;o<r;o++)i.push("$"+o);var c=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this, arguments); }")((function(){if(this instanceof c){var r=t.apply(this,n.concat(s.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(s.call(arguments)))}));return t.prototype&&(h.prototype=t.prototype,c.prototype=new h,h.prototype=null),c}}),d(Array,{isArray:function(e){return"[object Array]"===o.call(e)}});var p,f,m,g=Object("a"),_="a"!==g[0]||!(0 in g);d(t,{forEach:function(e){var t=u(this),n=_&&c(this)?this.split(""):t,r=arguments[1],i=-1,s=n.length>>>0;if(!a(e))throw new TypeError;for(;++i<s;)i in n&&e.call(r,n[i],i,t)}},(p=t.forEach,f=!0,m=!0,p&&(p.call("foo",(function(e,t,n){"object"!=typeof n&&(f=!1)})),p.call([1],(function(){m="string"==typeof this}),"x")),!(p&&f&&m)));var v=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);d(t,{indexOf:function(e){var t=_&&c(this)?this.split(""):u(this),n=t.length>>>0;if(!n)return-1;var r,i=0;for(arguments.length>1&&((r=+arguments[1])!=r?r=0:0!==r&&r!==1/0&&r!==-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r))),i=r),i=i>=0?i:Math.max(0,n+i);i<n;i++)if(i in t&&t[i]===e)return i;return-1}},v);var y,E=i.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(y=void 0===/()??/.exec("")[1],i.split=function(e,n){var r=this;if(void 0===e&&0===n)return[];if("[object RegExp]"!==o.call(e))return E.call(this,e,n);var i,s,a,c,l=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),u=0;for(e=new RegExp(e.source,d+"g"),r+="",y||(i=new RegExp("^"+e.source+"$(?!\\s)",d)),n=void 0===n?-1>>>0:n>>>0;(s=e.exec(r))&&!((a=s.index+s[0].length)>u&&(l.push(r.slice(u,s.index)),!y&&s.length>1&&s[0].replace(i,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(s[e]=void 0)})),s.length>1&&s.index<r.length&&t.push.apply(l,s.slice(1)),c=s[0].length,u=a,l.length>=n));)e.lastIndex===s.index&&e.lastIndex++;return u===r.length?!c&&e.test("")||l.push(""):l.push(r.slice(u)),l.length>n?l.slice(0,n):l}):"0".split(void 0,0).length&&(i.split=function(e,t){return void 0===e&&0===t?[]:E.call(this,e,t)});var b=i.substr;d(i,{substr:function(e,t){return b.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},"".substr&&"b"!=="0b".substr(-1))},7581:function(e,t,n){"use strict";e.exports=[n(2412),n(9842),n(4620),n(3004),n(882)(n(3004)),n(5616),n(882)(n(5616)),n(2387),n(9998),n(882)(n(2387)),n(5375)]},2940:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),s=n(7705),o=n(273),a=n.g.XMLHttpRequest;function c(e,t,n,i){var s=this;r.call(this),setTimeout((function(){s._start(e,t,n,i)}),0)}i(c,r),c.prototype._start=function(e,t,n,r){var i=this;try{this.xhr=new a}catch(e){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=o.addQuery(t,"t="+ +new Date),this.unloadRef=s.unloadAdd((function(){i._cleanup(!0)}));try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i.emit("finish",0,""),i._cleanup(!1)})}catch(e){return this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),r&&r.headers)for(var l in r.headers)this.xhr.setRequestHeader(l,r.headers[l]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,n=i.xhr;switch(n.readyState,n.readyState){case 3:try{t=n.status,e=n.responseText}catch(e){}1223===t&&(t=204),200===t&&e&&e.length>0&&i.emit("chunk",t,e);break;case 4:1223===(t=n.status)&&(t=204),12005!==t&&12029!==t||(t=0),n.responseText,i.emit("finish",t,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(e){i.emit("finish",0,""),i._cleanup(!1)}},c.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!a;var l=["Active"].concat("Object").join("X");!c.enabled&&l in n.g&&(a=function(){try{return new n.g[l]("Microsoft.XMLHTTP")}catch(e){return null}},c.enabled=!!new a);var d=!1;try{d="withCredentials"in new a}catch(e){}c.supportsCORS=d,e.exports=c},3759:function(e,t,n){e.exports=n.g.EventSource},9334:function(e,t,n){"use strict";var r=n.g.WebSocket||n.g.MozWebSocket;e.exports=r?function(e){return new r(e)}:void 0},3004:function(e,t,n){"use strict";var r=n(5717),i=n(9395),s=n(6709),o=n(9033),a=n(3759);function c(e){if(!c.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",s,o)}r(c,i),c.enabled=function(){return!!a},c.transportName="eventsource",c.roundTrips=2,e.exports=c},5616:function(e,t,n){"use strict";var r=n(5717),i=n(3608),s=n(3515),o=n(9395);function a(e){if(!i.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/htmlfile",i,s)}r(a,o),a.enabled=function(e){return i.enabled&&e.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,e.exports=a},5088:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v,s=n(2828),o=n(273),a=n(3683),c=n(7705),l=n(8915);function d(e,t,n){if(!d.enabled())throw new Error("Transport created when disabled");i.call(this);var r=this;this.origin=o.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=l.string(8);var s=o.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=a.createIframe(s,(function(e){r.emit("close",1006,"Unable to load an iframe ("+e+")"),r.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}r(d,i),d.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},d.prototype._message=function(e){if(e.data,!o.isOriginEqual(e.origin,this.origin))return e.origin,void this.origin;var t;try{t=JSON.parse(e.data)}catch(t){return void e.data}if(t.windowId!==this.windowId)return t.windowId,void this.windowId;switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=JSON.parse(t.data)}catch(e){return void t.data}this.emit("close",n[0],n[1]),this.close()}},d.prototype.postMessage=function(e,t){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},d.prototype.send=function(e){this.postMessage("m",e)},d.enabled=function(){return a.iframeEnabled},d.transportName="iframe",d.roundTrips=2,e.exports=d},5375:function(e,t,n){"use strict";var r=n(5717),i=n(8347),s=n(514),o=n(771);function a(e){if(!a.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",o,s)}r(a,i),a.enabled=function(){return!!n.g.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,e.exports=a},9395:function(e,t,n){"use strict";var r=n(5717),i=n(273),s=n(8347);function o(e,t,n,r){s.call(this,e,t,function(e){return function(t,n,r){var s={};"string"==typeof n&&(s.headers={"Content-type":"text/plain"});var o=i.addPath(t,"/xhr_send"),a=new e("POST",o,n,s);return a.once("finish",(function(e){if(a=null,200!==e&&204!==e)return r(new Error("http status "+e));r()})),function(){a.close(),a=null;var e=new Error("Aborted");e.code=1e3,r(e)}}}(r),n,r)}r(o,s),e.exports=o},1851:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v;function s(e,t){i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}r(s,i),s.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},s.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){t.sendStop=null,t.sendSchedule()}),25)},s.prototype.sendSchedule=function(){this.sendBuffer.length;var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},s.prototype._cleanup=function(){this.removeAllListeners()},s.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=s},882:function(e,t,n){"use strict";var r=n(5717),i=n(5088),s=n(2217);e.exports=function(e){function t(t,n){i.call(this,e.transportName,t,n)}return r(t,i),t.enabled=function(t,r){if(!n.g.document)return!1;var o=s.extend({},r);return o.sameOrigin=!0,e.enabled(o)&&i.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=i.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}},1265:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v;function s(e,t,n){i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}r(s,i),s.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){e.emit("message",t)})),t.once("close",(function(n,r){e.pollIsClosing,e.poll=t=null,e.pollIsClosing||("network"===r?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))}))},s.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=s},8347:function(e,t,n){"use strict";var r=n(5717),i=n(273),s=n(1851),o=n(1265);function a(e,t,n,r,a){var c=i.addPath(e,t),l=this;s.call(this,e,n),this.poll=new o(r,c,a),this.poll.on("message",(function(e){l.emit("message",e)})),this.poll.once("close",(function(e,t){l.poll=null,l.emit("close",e,t),l.close()}))}r(a,s),a.prototype.close=function(){s.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=a},6709:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v,s=n(3759);function o(e){i.call(this);var t=this,n=this.es=new s(e);n.onmessage=function(e){e.data,t.emit("message",decodeURI(e.data))},n.onerror=function(e){n.readyState;var r=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(r)}}r(o,i),o.prototype.abort=function(){this._cleanup(),this._close("user")},o.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},o.prototype._close=function(e){var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=o},3608:function(e,t,n){"use strict";var r=n(5717),i=n(3683),s=n(273),o=n(3212).v,a=n(8915);function c(e){o.call(this);var t=this;i.polluteGlobalNamespace(),this.id="a"+a.string(6),e=s.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),c.htmlfileEnabled;var r=c.htmlfileEnabled?i.createHtmlfile:i.createIframe;n.g[i.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(e){t.emit("message",e)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=r(e,(function(){t._cleanup(),t._close("permanent")}))}r(c,o),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete n.g[i.WPrefix][this.id]},c.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},c.htmlfileEnabled=!1;var l=["Active"].concat("Object").join("X");if(l in n.g)try{c.htmlfileEnabled=!!new n.g[l]("htmlfile")}catch(e){}c.enabled=c.htmlfileEnabled||i.iframeEnabled,e.exports=c},514:function(e,t,n){"use strict";var r=n(3683),i=n(8915),s=n(8510),o=n(273),a=n(5717),c=n(3212).v;function l(e){var t=this;c.call(this),r.polluteGlobalNamespace(),this.id="a"+i.string(6);var s=o.addQuery(e,"c="+encodeURIComponent(r.WPrefix+"."+this.id));n.g[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(s),this.timeoutId=setTimeout((function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))}),l.timeout)}a(l,c),l.prototype.abort=function(){if(n.g[r.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},l.timeout=35e3,l.scriptErrorTimeout=1e3,l.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},l.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},l.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete n.g[r.WPrefix][this.id]},l.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),l.scriptErrorTimeout))},l.prototype._createScript=function(e){var t,r=this,o=this.script=n.g.document.createElement("script");if(o.id="a"+i.string(8),o.src=e,o.type="text/javascript",o.charset="UTF-8",o.onerror=this._scriptError.bind(this),o.onload=function(){r._abort(new Error("JSONP script loaded abnormally (onload)"))},o.onreadystatechange=function(){if(o.readyState,/loaded|closed/.test(o.readyState)){if(o&&o.htmlFor&&o.onclick){r.loadedOkay=!0;try{o.onclick()}catch(e){}}o&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===o.async&&n.g.document.attachEvent)if(s.isOpera())(t=this.script2=n.g.document.createElement("script")).text="try{var a = document.getElementById('"+o.id+"'); if(a)a.onerror();}catch(x){};",o.async=t.async=!1;else{try{o.htmlFor=o.id,o.event="onclick"}catch(e){}o.async=!0}void 0!==o.async&&(o.async=!0);var a=n.g.document.getElementsByTagName("head")[0];a.insertBefore(o,a.firstChild),t&&a.insertBefore(t,a.firstChild)},e.exports=l},1044:function(e,t,n){"use strict";var r=n(5717),i=n(3212).v;function s(e,t){i.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){n._chunkHandler(e,t),n.xo=null;var r=200===e?"network":"permanent";n.emit("close",null,r),n._cleanup()}))}r(s,i),s.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var i=r.slice(0,n);i&&this.emit("message",i)}},s.prototype._cleanup=function(){this.removeAllListeners()},s.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=s},771:function(e,t,n){"use strict";var r,i,s=n(8915),o=n(273);e.exports=function(e,t,a){r||((r=n.g.document.createElement("form")).style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",(i=n.g.document.createElement("textarea")).name="d",r.appendChild(i),n.g.document.body.appendChild(r));var c="a"+s.string(8);r.target=c,r.action=o.addQuery(o.addPath(e,"/jsonp_send"),"i="+c);var l=function(e){try{return n.g.document.createElement('<iframe name="'+e+'">')}catch(r){var t=n.g.document.createElement("iframe");return t.name=e,t}}(c);l.id=c,l.style.display="none",r.appendChild(l);try{i.value=t}catch(e){}r.submit();var d=function(e){l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,setTimeout((function(){l.parentNode.removeChild(l),l=null}),500),i.value="",a(e))};return l.onerror=function(){d()},l.onload=function(){d()},l.onreadystatechange=function(e){l.readyState,"complete"===l.readyState&&d()},function(){d(new Error("Aborted"))}}},6073:function(e,t,n){"use strict";var r=n(3212).v,i=n(5717),s=n(7705),o=n(8510),a=n(273);function c(e,t,n){var i=this;r.call(this),setTimeout((function(){i._start(e,t,n)}),0)}i(c,r),c.prototype._start=function(e,t,r){var i=this,o=new n.g.XDomainRequest;t=a.addQuery(t,"t="+ +new Date),o.onerror=function(){i._error()},o.ontimeout=function(){i._error()},o.onprogress=function(){o.responseText,i.emit("chunk",200,o.responseText)},o.onload=function(){i.emit("finish",200,o.responseText),i._cleanup(!1)},this.xdr=o,this.unloadRef=s.unloadAdd((function(){i._cleanup(!0)}));try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(e){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!n.g.XDomainRequest||!o.hasDomain()),e.exports=c},9033:function(e,t,n){"use strict";var r=n(5717),i=n(2940);function s(e,t,n,r){i.call(this,e,t,n,r)}r(s,i),s.enabled=i.enabled&&i.supportsCORS,e.exports=s},7103:function(e,t,n){"use strict";var r=n(3212).v;function i(){var e=this;r.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),i.timeout)}n(5717)(i,r),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,e.exports=i},3515:function(e,t,n){"use strict";var r=n(5717),i=n(2940);function s(e,t,n){i.call(this,e,t,n,{noCredentials:!0})}r(s,i),s.enabled=i.enabled,e.exports=s},2412:function(e,t,n){"use strict";var r=n(7705),i=n(273),s=n(5717),o=n(3212).v,a=n(9334);function c(e,t,n){if(!c.enabled())throw new Error("Transport created when disabled");o.call(this);var s=this,l=i.addPath(e,"/websocket");l="https"===l.slice(0,5)?"wss"+l.slice(5):"ws"+l.slice(4),this.url=l,this.ws=new a(this.url,[],n),this.ws.onmessage=function(e){e.data,s.emit("message",e.data)},this.unloadRef=r.unloadAdd((function(){s.ws.close()})),this.ws.onclose=function(e){e.code,e.reason,s.emit("close",e.code,e.reason),s._cleanup()},this.ws.onerror=function(e){s.emit("close",1006,"WebSocket connection broken"),s._cleanup()}}s(c,o),c.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},c.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!a},c.transportName="websocket",c.roundTrips=2,e.exports=c},9998:function(e,t,n){"use strict";var r=n(5717),i=n(9395),s=n(4620),o=n(1044),a=n(6073);function c(e){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",o,a)}r(c,i),c.enabled=s.enabled,c.transportName="xdr-polling",c.roundTrips=2,e.exports=c},4620:function(e,t,n){"use strict";var r=n(5717),i=n(9395),s=n(1044),o=n(6073);function a(e){if(!o.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",s,o)}r(a,i),a.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&o.enabled&&e.sameScheme},a.transportName="xdr-streaming",a.roundTrips=2,e.exports=a},2387:function(e,t,n){"use strict";var r=n(5717),i=n(9395),s=n(1044),o=n(9033),a=n(3515);function c(e){if(!a.enabled&&!o.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",s,o)}r(c,i),c.enabled=function(e){return!e.nullOrigin&&(!(!a.enabled||!e.sameOrigin)||o.enabled)},c.transportName="xhr-polling",c.roundTrips=2,e.exports=c},9842:function(e,t,n){"use strict";var r=n(5717),i=n(9395),s=n(1044),o=n(9033),a=n(3515),c=n(8510);function l(e){if(!a.enabled&&!o.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",s,o)}r(l,i),l.enabled=function(e){return!e.nullOrigin&&!c.isOpera()&&o.enabled},l.transportName="xhr-streaming",l.roundTrips=2,l.needBody=!!n.g.document,e.exports=l},2017:function(e,t,n){"use strict";n.g.crypto&&n.g.crypto.getRandomValues?e.exports.randomBytes=function(e){var t=new Uint8Array(e);return n.g.crypto.getRandomValues(t),t}:e.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}},8510:function(e,t,n){"use strict";e.exports={isOpera:function(){return n.g.navigator&&/opera/i.test(n.g.navigator.userAgent)},isKonqueror:function(){return n.g.navigator&&/konqueror/i.test(n.g.navigator.userAgent)},hasDomain:function(){if(!n.g.document)return!0;try{return!!n.g.document.domain}catch(e){return!1}}}},8028:function(e){"use strict";var t,n=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var r=JSON.stringify(e);return n.lastIndex=0,n.test(r)?(t||(t=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,(function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,n}(n)),r.replace(n,(function(e){return t[e]}))):r}}},7705:function(e,t,n){"use strict";var r=n(8915),i={},s=!1,o=n.g.chrome&&n.g.chrome.app&&n.g.chrome.app.runtime;e.exports={attachEvent:function(e,t){void 0!==n.g.addEventListener?n.g.addEventListener(e,t,!1):n.g.document&&n.g.attachEvent&&(n.g.document.attachEvent("on"+e,t),n.g.attachEvent("on"+e,t))},detachEvent:function(e,t){void 0!==n.g.addEventListener?n.g.removeEventListener(e,t,!1):n.g.document&&n.g.detachEvent&&(n.g.document.detachEvent("on"+e,t),n.g.detachEvent("on"+e,t))},unloadAdd:function(e){if(o)return null;var t=r.string(8);return i[t]=e,s&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in i&&delete i[e]},triggerUnloadCallbacks:function(){for(var e in i)i[e](),delete i[e]}},o||e.exports.attachEvent("unload",(function(){s||(s=!0,e.exports.triggerUnloadCallbacks())}))},3683:function(e,t,n){"use strict";var r=n(7705),i=n(8510);e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in n.g||(n.g[e.exports.WPrefix]={})},postMessage:function(t,r){n.g.parent!==n.g&&n.g.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:t,data:r||""}),"*")},createIframe:function(e,t){var i,s,o=n.g.document.createElement("iframe"),a=function(){clearTimeout(i);try{o.onload=null}catch(e){}o.onerror=null},c=function(){o&&(a(),setTimeout((function(){o&&o.parentNode.removeChild(o),o=null}),0),r.unloadDel(s))},l=function(e){o&&(c(),t(e))};return o.src=e,o.style.display="none",o.style.position="absolute",o.onerror=function(){l("onerror")},o.onload=function(){clearTimeout(i),i=setTimeout((function(){l("onload timeout")}),2e3)},n.g.document.body.appendChild(o),i=setTimeout((function(){l("timeout")}),15e3),s=r.unloadAdd(c),{post:function(e,t){setTimeout((function(){try{o&&o.contentWindow&&o.contentWindow.postMessage(e,t)}catch(e){}}),0)},cleanup:c,loaded:a}},createHtmlfile:function(t,i){var s,o,a,c=["Active"].concat("Object").join("X"),l=new n.g[c]("htmlfile"),d=function(){clearTimeout(s),a.onerror=null},u=function(){l&&(d(),r.unloadDel(o),a.parentNode.removeChild(a),a=l=null,CollectGarbage())},h=function(e){l&&(u(),i(e))};l.open(),l.write('<html><script>document.domain="'+n.g.document.domain+'";<\/script></html>'),l.close(),l.parentWindow[e.exports.WPrefix]=n.g[e.exports.WPrefix];var p=l.createElement("div");return l.body.appendChild(p),a=l.createElement("iframe"),p.appendChild(a),a.src=t,a.onerror=function(){h("onerror")},s=setTimeout((function(){h("timeout")}),15e3),o=r.unloadAdd(u),{post:function(e,t){try{setTimeout((function(){a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}),0)}catch(e){}},cleanup:u,loaded:d}}},e.exports.iframeEnabled=!1,n.g.document&&(e.exports.iframeEnabled=("function"==typeof n.g.postMessage||"object"==typeof n.g.postMessage)&&!i.isKonqueror())},4886:function(e,t,n){"use strict";var r={};["log","debug","warn"].forEach((function(e){var t;try{t=n.g.console&&n.g.console[e]&&n.g.console[e].apply}catch(e){}r[e]=t?function(){return n.g.console[e].apply(n.g.console,arguments)}:"log"===e?function(){}:r.log})),e.exports=r},2217:function(e){"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,i=arguments.length;r<i;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}},8915:function(e,t,n){"use strict";var r=n(2017);e.exports={string:function(e){for(var t=r.randomBytes(e),n=[],i=0;i<e;i++)n.push("abcdefghijklmnopqrstuvwxyz012345".substr(t[i]%32,1));return n.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},5581:function(e){"use strict";e.exports=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"===e.transportName&&!1===n.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(n)?(e.transportName,r.main.push(e),e.facadeTransport&&r.facade.push(e.facadeTransport)):e.transportName))})),r}}}},273:function(e,t,n){"use strict";var r=n(4564);e.exports={getOrigin:function(e){if(!e)return null;var t=new r(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){return this.getOrigin(e)===this.getOrigin(t)},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}},2828:function(e){e.exports="1.6.1"},4564:function(e,t,n){"use strict";var r=n(4058),i=n(8188),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function u(e){return(e||"").toString().replace(s,"")}var h=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function f(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},i={},s=typeof(e=e||r);if("blob:"===e.protocol)i=new _(unescape(e.pathname),{});else if("string"===s)for(t in i=new _(e,{}),p)delete i[t];else if("object"===s){for(t in e)t in p||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=u(e)).replace(o,""),t=t||{};var n,r=l.exec(e),i=r[1]?r[1].toLowerCase():"",s=!!r[2],a=!!r[3],c=0;return s?a?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):a?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===i?c>=2&&(n=n.slice(2)):m(i)?n=r[4]:i?s&&(n=n.slice(2)):c>=2&&m(t.protocol)&&(n=r[4]),{protocol:i,slashes:s||m(i),slashesCount:c,rest:n}}function _(e,t,n){if(e=(e=u(e)).replace(o,""),!(this instanceof _))return new _(e,t,n);var s,a,c,l,p,v,y=h.slice(),E=typeof t,b=this,T=0;for("object"!==E&&"string"!==E&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),s=!(a=g(e||"",t=f(t))).protocol&&!a.slashes,b.slashes=a.slashes||s&&t.slashes,b.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||d.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!m(b.protocol)))&&(y[3]=[/(.*)/,"pathname"]);T<y.length;T++)"function"!=typeof(l=y[T])?(c=l[0],v=l[1],c!=c?b[v]=e:"string"==typeof c?~(p="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(b[v]=e.slice(0,p),e=e.slice(p+l[2])):(b[v]=e.slice(p),e=e.slice(0,p))):(p=c.exec(e))&&(b[v]=p[1],e=e.slice(0,p.index)),b[v]=b[v]||s&&l[3]&&t[v]||"",l[4]&&(b[v]=b[v].toLowerCase())):e=l(e,b);n&&(b.query=n(b.query)),s&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],s=!1,o=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),o++):o&&(0===r&&(s=!0),n.splice(r,1),o--);return s&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(b.pathname,t.pathname)),"/"!==b.pathname.charAt(0)&&m(b.protocol)&&(b.pathname="/"+b.pathname),r(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(p=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,p),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(p+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&m(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}_.prototype={set:function(e,t,n){var s=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),s[e]=t;break;case"port":s[e]=t,r(t,s.protocol)?t&&(s.host=s.hostname+":"+t):(s.host=s.hostname,s[e]="");break;case"hostname":s[e]=t,s.port&&(t+=":"+s.port),s.host=t;break;case"host":s[e]=t,c.test(t)?(t=t.split(":"),s.port=t.pop(),s.hostname=t.join(":")):(s.hostname=t,s.port="");break;case"protocol":s.protocol=t.toLowerCase(),s.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";s[e]=t.charAt(0)!==o?o+t:t}else s[e]=t;break;case"username":case"password":s[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(s.username=t.slice(0,a),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=t.slice(a+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<h.length;l++){var d=h[l];d[4]&&(s[d[1]]=s[d[1]].toLowerCase())}return s.auth=s.password?s.username+":"+s.password:s.username,s.origin="file:"!==s.protocol&&m(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString(),s},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.host,s=n.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var o=s+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(o+=n.username,n.password&&(o+=":"+n.password),o+="@"):n.password?(o+=":"+n.password,o+="@"):"file:"!==n.protocol&&m(n.protocol)&&!r&&"/"!==n.pathname&&(o+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),o+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},_.extractProtocol=g,_.location=f,_.trimLeft=u,_.qs=i,e.exports=_},8188:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,s,o=[];for(s in"string"!=typeof t&&(t="?"),e)if(n.call(e,s)){if((r=e[s])||null!=r&&!isNaN(r)||(r=""),s=i(s),r=i(r),null===s||null===r)continue;o.push(s+"="+r)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var s=r(t[1]),o=r(t[2]);null===s||null===o||s in i||(i[s]=o)}return i}},4058:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}}},__webpack_module_cache__={};function __nested_webpack_require_895763__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__nested_webpack_require_895763__),n.exports}__nested_webpack_require_895763__.amdO={},__nested_webpack_require_895763__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __nested_webpack_require_895763__.d(t,{a:t}),t},__nested_webpack_require_895763__.d=function(e,t){for(var n in t)__nested_webpack_require_895763__.o(t,n)&&!__nested_webpack_require_895763__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__nested_webpack_require_895763__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__nested_webpack_require_895763__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_895763__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__={};return function(){"use strict";__nested_webpack_require_895763__.r(__nested_webpack_exports__),__nested_webpack_require_895763__.d(__nested_webpack_exports__,{default:function(){return ae}});var e=__nested_webpack_require_895763__(8e3),t=__nested_webpack_require_895763__.n(e),n=__nested_webpack_require_895763__(3281),r=__nested_webpack_require_895763__.n(n),i=__nested_webpack_require_895763__(3720),s=__nested_webpack_require_895763__.n(i),o=(__nested_webpack_require_895763__(9601),__nested_webpack_require_895763__(1539),__nested_webpack_require_895763__(8674),__nested_webpack_require_895763__(2526),__nested_webpack_require_895763__(1817),__nested_webpack_require_895763__(2165),__nested_webpack_require_895763__(6992),__nested_webpack_require_895763__(8783),__nested_webpack_require_895763__(3948),__nested_webpack_require_895763__(8309),__nested_webpack_require_895763__(1532),__nested_webpack_require_895763__(4812),__nested_webpack_require_895763__(9070),__nested_webpack_require_895763__(9575),__nested_webpack_require_895763__(2472),__nested_webpack_require_895763__(2990),__nested_webpack_require_895763__(8927),__nested_webpack_require_895763__(3105),__nested_webpack_require_895763__(5035),__nested_webpack_require_895763__(4345),__nested_webpack_require_895763__(7174),__nested_webpack_require_895763__(2846),__nested_webpack_require_895763__(4731),__nested_webpack_require_895763__(7209),__nested_webpack_require_895763__(6319),__nested_webpack_require_895763__(8867),__nested_webpack_require_895763__(7789),__nested_webpack_require_895763__(3739),__nested_webpack_require_895763__(9368),__nested_webpack_require_895763__(4483),__nested_webpack_require_895763__(2056),__nested_webpack_require_895763__(3462),__nested_webpack_require_895763__(678),__nested_webpack_require_895763__(7462),__nested_webpack_require_895763__(3824),__nested_webpack_require_895763__(5021),__nested_webpack_require_895763__(2974),__nested_webpack_require_895763__(5016),__nested_webpack_require_895763__(5827),__nested_webpack_require_895763__(3843),__nested_webpack_require_895763__(3710),__nested_webpack_require_895763__(2564),__nested_webpack_require_895763__(9653),__nested_webpack_require_895763__(7941),__nested_webpack_require_895763__(9554),__nested_webpack_require_895763__(4747),__nested_webpack_require_895763__(1038),__nested_webpack_require_895763__(7327),__nested_webpack_require_895763__(561),__nested_webpack_require_895763__(7252)),a=__nested_webpack_require_895763__(4370),c=__nested_webpack_require_895763__(5531),l=__nested_webpack_require_895763__(9335),d=__nested_webpack_require_895763__(7360),u=function(){function e(e,t,n){this.handlerData={},this.handlerData={},e.addEventHandler=this.addEventHandler.bind(this),e.removeEventHandler=this.removeEventHandler.bind(this)}return e.prototype.addEventHandler=function(e,t){this.handlerData[e]=t},e.prototype.removeEventHandler=function(e){delete this.handlerData[e]},e.prototype.dispatch=function(e,t){for(var n in d.kg.debug("dispatch event: "+e,t||""),this.handlerData){var r=this.handlerData[n][e];r&&r(t)}},e}(),h=function(){};function p(e){this.onOpened=e.onOpened||h,this.onPresence=e.onPresence||h,this.onTextMessage=e.onTextMessage||h,this.onPictureMessage=e.onPictureMessage||h,this.onAudioMessage=e.onAudioMessage||h,this.onVideoMessage=e.onVideoMessage||h,this.onFileMessage=e.onFileMessage||h,this.onLocationMessage=e.onLocationMessage||h,this.onCmdMessage=e.onCmdMessage||h,this.onCustomMessage=e.onCustomMessage||h,this.onReceivedMessage=e.onReceivedMessage||h,this.onDeliveredMessage=e.onDeliveredMessage||h,this.onReadMessage=e.onReadMessage||h,this.onRecallMessage=e.onRecallMessage||h,this.onChannelMessage=e.onChannelMessage||h,this.onError=e.onError||h,this.onOffline=e.onOffline||h,this.onOnline=e.onOnline||h,this.onStatisticMessage=e.onStatisticMessage||h,this.onContactInvited=e.onContactInvited||h,this.onContactAgreed=e.onContactAgreed||h,this.onContactRefuse=e.onContactRefuse||h,this.onContactDeleted=e.onContactDeleted||h,this.onContactAdded=e.onContactAdded||h,this.onTokenWillExpire=e.onTokenWillExpire||h,this.onTokenExpired=e.onTokenExpired||h,this.onClosed=e.onClosed||h,this.onPresenceStatusChange=e.onPresenceStatusChange||h}__nested_webpack_require_895763__(2222),__nested_webpack_require_895763__(2772);var f={biz:"",debug:!1,token:""},m="https://data-reporting.agora.io/report",g="https://data-reporting.sh.agoralab.co/report",_=(__nested_webpack_require_895763__(6699),__nested_webpack_require_895763__(2023),__nested_webpack_require_895763__(2071)),v=__nested_webpack_require_895763__(1595),y=function(e){var t=Number(v.C8[e]);return t===v.C8.USER_LOGIN?"MANUALLOGIN":t===v.C8.MSYNC_SENDMESSAGE?"SENDMESSAGE":t>v.C8.UNKNOWOPERATION&&t<v.C8.REST_OPERATE?"REST":t>v.C8.REST_OPERATE&&t<v.C8.MSYNC_OPERATE?"MESSAGE":t>v.C8.MSYNC_OPERATE&&t<v.C8.ROSTER_OPERATE?"ROSTER":t>v.C8.ROSTER_OPERATE&&t<v.C8.USER_OPERATE?"USER":t>v.C8.USER_OPERATE&&t<v.C8.GROUP_OPERATE?"GROUP":t>v.C8.GROUP_OPERATE&&t<v.C8.CHATROOM_OPERATE?"CHATROOM":"OPERATION"},E=function(){return(new Date).getTime()},b=function(e){return[a.iw.BAIDU,a.iw.WX,a.iw.DD,a.iw.ZFB,a.iw.TT,a.iw.QUICK_APP,a.iw.UNI].includes(e.platform)},T=function(){return e=1,t=99999,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e;var e,t},S={},w=(__nested_webpack_require_895763__(1249),function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}),C=1e3,R=function(){function e(e){this.eventQueue=[],this.stock=C,this.config=e,this.governor()}return e.prototype.add=function(e){this.stock<=0?console.warn("Event Report limit ".concat(C," per minute")):(this.eventQueue.push(e),this.consume(),this.stock-=1)},e.prototype.consume=function(){var e=this;0!==this.eventQueue.length&&(this.timer&&this.eventQueue.length<=10&&clearTimeout(this.timer),this.timer=setTimeout((function(){var t,n=e.eventQueue.splice(0,10),r=n.filter((function(e){return e.appId===n[0].appId})),i=n.filter((function(e){return e.appId!==n[0].appId}));(t=e.eventQueue).unshift.apply(t,i),e.batchSend(r)}),1e3))},e.prototype.governor=function(){var e=this,t=setInterval((function(){e.stock=C}),6e4);"undefined"!=typeof addEventListener&&addEventListener("beforeunload",(function(){clearInterval(t)}))},e.prototype.batchSend=function(e){var t,n;if(void 0===e&&(e=[]),0!==e.length)try{var r=e.map((function(e){e.biz,e.appId;var t=e.eventId,n=w(e,["biz","appId","eventId"]);return{eventId:Number(t),body:n}}));!function(e,t){try{var n=t.biz,r=t.appId,i=t.data,s=t.debug,o=t.onSuccess;if(!n)throw new Error("biz is not defined");S.global||(S=a.P6.getEnvInfo());var c=S;if(b(c)){var l={url:s?g:m,data:i,method:"POST",success:function(){null==o||o()},fail:function(){},complete:function(){}},d={token:e,appid:null!=r?r:"",sendts:"".concat(Math.floor((new Date).getTime()/1e3)),biz:n,debug:"".concat(s)};if("zfb"===c.platform||"dd"===c.platform?l.headers=d:l.header=d,"dd"===c.platform)return c.global.httpRequest(l);c.global.request(l)}else{var u=new XMLHttpRequest;u.onreadystatechange=function(){2===u.readyState&&(null==o||o())},u.open("POST",s?g:m),u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("token",e),u.setRequestHeader("appid",null!=r?r:""),u.setRequestHeader("sendts","".concat(Math.floor((new Date).getTime()/1e3))),u.setRequestHeader("biz",n),u.setRequestHeader("debug","".concat(s)),u.send(JSON.stringify(i))}}catch(e){console.error(e)}}(this.config.token,{biz:null===(t=e[0])||void 0===t?void 0:t.biz,appId:null===(n=e[0])||void 0===n?void 0:n.appId,data:r,debug:this.config.debug,onSuccess:this.consume.bind(this)})}catch(e){console.error(e)}},e}(),I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},I.apply(this,arguments)},N=new(function(){function e(e){this.inited=!1,this.appId="",this.biz="",this.eventQueue={},this.config=f,e&&this.init(e)}return e.prototype.init=function(e){var t;if(void 0===e&&(e={}),!e.biz||!e.token)throw new Error("Event Report: biz or token is not defined");try{this.appId=null!==(t=e.appId)&&void 0!==t?t:"",this.biz=e.biz,this.config=I(I({},f),e),this.eventQueue=new R(this.config),this.log(e),this.inited=!0}catch(e){console.error(e)}},e.prototype.send=function(e,t,n){var r;if(void 0===t&&(t={}),this.inited){var i=I(I({},t),{eventId:Number(e),biz:this.biz,appId:null!==(r=null==n?void 0:n.appId)&&void 0!==r?r:this.appId});this.eventQueue.add(i),this.log(i)}else console.error("Event Report: init is not called")},e.prototype.log=function(e){try{if(this.config.debug){var t=e.payload,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["payload"]);console.log("%c Event Report: ".concat(this.config.biz," "),"background: #8A97FC; color: #fff"),console.table(n),t&&(console.info("payload:"),console.table(t))}}catch(e){console.error(e)}},e}()),O=function(){return O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},O.apply(this,arguments)},A={requestName:"",subrequestid:"1",requestMethod:"GET",requestUrl:"",requestElapse:0,code:0,codeDesc:"",isLastApi:0,isSuccess:1},k=function(){function e(e){this.platform=a.P6.getEnvInfo(),this.isReportDt=e.isReport||!1,this.isCollectDt=!0,b(this.platform)&&!this.isReportDt&&(this.isCollectDt=!1),this.eventQueue=[],this.accessChannel=_.yK,this.options=function(e,t){t.platform||(t=a.P6.getEnvInfo());var n=e.org,r=e.appkey,i=e.deviceId,s=e.sdkVersion,o=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||"".concat(t.platform,"_mini_program");return{org:n,appkey:r,deviceId:i,sdkServiceId:"sid_".concat(a.P6.getUniqueId(),"_").concat(T()),did:o,sdkVersion:s,os:_.Wc,sdkProduct:v.aC.web}}(e,this.platform),this.sid=this.options.sdkServiceId,this.init(e)}return e.getInstance=function(){return e.instance},e.prototype.getServiceId=function(){return this.sid||"sid_0"},e.prototype.setIsReportDt=function(e){this.isReportDt=e,e&&this.rptEventQueue()},e.prototype.setIsCollectDt=function(e){this.isCollectDt=e,e||(this.eventQueue=[])},e.prototype.rptEventQueue=function(){var e=this;this.eventQueue.length&&this.eventQueue.forEach((function(t,n){N.send(t.eventId,t.dt),n>=e.eventQueue.length-1&&(e.eventQueue=[])}))},e.prototype.init=function(t){e.instance||(e.instance=this,N.init({biz:_.el,token:_.$x,appId:t.appkey,debug:!1}),this.reportInit())},e.prototype.reportInit=function(){if(this.isCollectDt){var e=this.options,t=e.did,n=e.os,r=e.sdkVersion,i=e.deviceId;this.reportData(_.iB.INIT,{did:t,os:n,sdkVersion:r,deviceId:i})}},e.prototype.geOperateFun=function(e){var t=this;if(!this.isCollectDt)return function(){};var n=1,r=0,i="",s=E(),o=e.uid,c=e.operationName;o&&(this.uid=o);var l={uid:this.uid,operationId:"opr_".concat(a.P6.getUniqueId(),"_").concat(T()),requestid:"req_".concat(a.P6.getUniqueId(),"_").concat(T()),operationName:c};return function(e){var o,d,u,h;if(e.data.isSuccess?(r=0,i=""):(0===e.data.code&&(e.data.code=_.Tp),r=null!==(o=e.data.code)&&void 0!==o?o:r,i=null!==(d=e.data.codeDesc)&&void 0!==d?d:i),(null===(u=e.data)||void 0===u?void 0:u.accessChannel)&&(t.accessChannel=null===(h=e.data)||void 0===h?void 0:h.accessChannel),e.isRetry?(n++,e.data.subrequestid="".concat(n)):(l.requestid="req_".concat(a.P6.getUniqueId(),"_").concat(T()),n=1),e.data.isLastApi){var p=E();e.data.requestElapse=p-s,e.data.requestMethod="",e.data.subrequestid="0",e.data.code=200===r?0:r,e.data.codeDesc=i}else e.data.requestName||(e.data.requestName=c);e.data.requestElapse||(e.data.requestElapse=E()-s),t.reportData.call(t,_.iB.API,O(O(O(O({},A),l),e.data),{accessChannel:t.accessChannel,operationType:y(c)})),e.isEndApi&&t.reportData.call(t,_.iB.API,O(O(O({},l),A),{isSuccess:e.data.isSuccess,isLastApi:1,subrequestid:"0",requestMethod:"",code:200===r?0:r,codeDesc:i,requestElapse:e.data.requestElapse,accessChannel:t.accessChannel,operationType:y(c)}))}},e.prototype.reportData=function(e,t){return n=this,i=function(){var n,r,i,s,o,c,l,d;return function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),n=E(),r=0,e!==_.iB.API?[3,2]:[4,(h=this.platform,new Promise((function(e){var t;h.platform||(h=a.P6.getEnvInfo());var n="";if(h.platform===a.iw.WEB){var r=navigator.connection;(null==r?void 0:r.type)?(null==r||r.type,n=v.td.WIFI):(null==r?void 0:r.effectiveType)&&(n=v.td[r.effectiveType.toLocaleUpperCase()]),e(n)}else h.platform===a.iw.NODE?(n=v.td.UNKNOWN,e(n)):null===(t=h.global)||void 0===t||t.getNetworkType({success:function(t){n=v.td[t.networkType.toLocaleUpperCase()],e(n)}})})))];case 1:r=u.sent(),u.label=2;case 2:return i=this.options,s=i.appkey,o=i.sdkServiceId,c=i.sdkProduct,l=O({lts:n,net:r,appkey:s,sdkServiceId:o,sdkProduct:c},t),this.isReportDt?N.send(e,l):this.isCollectDt&&this.eventQueue.push({eventId:e,dt:l}),[3,4];case 3:return d=u.sent(),console.warn(d),[3,4];case 4:return[2]}var h}))},new((r=void 0)||(r=Promise))((function(e,t){function s(e){try{a(i.next(e))}catch(e){t(e)}}function o(e){try{a(i.throw(e))}catch(e){t(e)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,o)}a((i=i.apply(n,[])).next())}));var n,r,i},e}(),x=__nested_webpack_require_895763__(7288),P=__nested_webpack_require_895763__(7479),D=__nested_webpack_require_895763__(2856),L=__nested_webpack_require_895763__(9667),M=__nested_webpack_require_895763__(3770),j=__nested_webpack_require_895763__(1735),U=__nested_webpack_require_895763__(7384),F=__nested_webpack_require_895763__(70),B=__nested_webpack_require_895763__(8161),V=function(){return V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},V.apply(this,arguments)},G=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},H=a.P6.getEnvInfo(),W="web"===H.platform,z=function(){},q={CLOSED:3,CLOSING:2,CONNECTING:0,OPEN:1},K=function(){function e(t){var n;if(this.name="connection",this.max_cache_length=100,this.isDebug=t.isDebug||!1,this.isReport=!1,this.isHttpDNS=void 0===t.isHttpDNS?W:t.isHttpDNS,this.heartBeatWait=t.heartBeatWait||3e4,this.autoReconnectNumMax=t.autoReconnectNumMax||5,this.refreshDNSIntervals=this.autoReconnectNumMax<5?this.autoReconnectNumMax:5,this.delivery=t.delivery||!1,this.dnsArr=["https://rs.easemob.com","https://rs.chat.agora.io","http://59.110.89.59","http://39.97.193.190","http://39.97.193.187"],this.dnsIndex=0,this.dnsTotal=this.dnsArr.length,this.restHosts=[],this.restTotal=0,this.restIndex=0,this.hostIndex=0,this.socketHost=[],this.hostTotal=0,this.times=1,this.autoReconnectNumTotal=0,this.domain="easemob.com",this.appKey=t.appKey,this.appName="",this.orgName="",this.token="",this.grantType="",this.apiUrl=t.apiUrl||"",this.url=t.url||"",this.https=t.https||"undefined"!=typeof window&&"https:"===(null===(n=window.location)||void 0===n?void 0:n.protocol),this.version="1.2.1",this.deviceId=t.deviceId||"webim",this.osType=16,this.useOwnUploadFun=t.useOwnUploadFun||!1,this.compressType=[0],this.encryptType=[0],this.clientResource="",this.expiresIn=0,this.expirationTime=0,this.logOut=!0,this.context={jid:{appKey:"",clientResource:"",domain:"easemob.com",name:""},userId:"",appKey:"",status:0,restTokenData:"",appName:"",orgName:"",root:{},accessToken:""},this._msgHash={},this._msgPromiseHash={},this._queues=[],this._load_msg_cache=[],this.unMSyncSendMsgMap=new Map,this.mr_cache={},this.closeInfo=null,this.reconnecting=!1,"string"!=typeof this.appKey||2!==this.appKey.split("#").length)throw Error("Illegal appKey: ".concat(this.appKey));var r=this.appKey.split("#");this.orgName=r[0],this.appName=r[1],this.listen=p.bind(this),this.mSync=this.usePlugin(l.Z),this.eventHandler=this.usePlugin(u),Object.assign(e.prototype,P),Object.assign(e.prototype,D),Object.assign(e.prototype,L),Object.assign(e.prototype,M),Object.assign(e.prototype,j),Object.assign(e.prototype,U),Object.assign(e.prototype,F),this.dataReport=new k({appkey:this.appKey,org:this.orgName,sdkVersion:this.version,deviceId:this.deviceId,isReport:this.isReport});var i=0,s=this;Object.defineProperty(a.P6,"ajaxUnconventionalErrorTimes",{set:function(e){0!==e&&(d.kg.debug("rest api request fail times: ".concat(e)),(i=e)%5==0&&this.isHttpDNS&&(d.kg.debug("refresh dns config when rest request fail."),te.call(s,"refresh",{},{})))},get:function(){return i}})}return e.prototype.usePlugin=function(e,t){if(!t)return new e(this);this[t]=new e(this)},e.prototype.listen=function(e){},e.prototype.addEventHandler=function(e,t){},e.prototype.removeEventHandler=function(e){},e.prototype.registerUser=function(e){var t=this;return new Promise((function(n,r){var i=t.dataReport.geOperateFun({uid:e.username,operationName:v.fI.REGISTER});if(t.isHttpDNS){t.dnsIndex=0;var s=V(V({},e),{user:e.username,pwd:e.password,promise:{resolve:n,reject:r}});te.call(t,"signup",s,{rpt:i})}else s=V(V({},e),{promise:{resolve:n,reject:r}}),Y.call(t,s,{rpt:i})}))},e.prototype.open=function(e){var t=this;return d.kg.debug("open"),new Promise((function(n,r){if($.call(t,e)){e.accessToken&&(t.token=e.accessToken);var i=V(V({},e),{promise:{resolve:n,reject:r}}),s=t.dataReport.geOperateFun({uid:e.user,operationName:v.fI.LOGIN});t.isHttpDNS?te.call(t,"login",i,{rpt:s}):J.call(t,i,{rpt:s})}}))},e.prototype.isOpened=function(){return this.sock&&this.sock.readyState===q.OPEN||!1},e.prototype.close=function(){var e,t,n;this.logOut=!0,this.reconnecting=!1,this.context.status=c.E.STATUS_CLOSING,this.sock&&this.sock.close(),null===(e=this.unMSyncSendMsgMap)||void 0===e||e.clear(),this.stopHeartBeat(),this.rejectMessage(),this.rejectContactsOperate(),this.context.status=c.E.STATUS_CLOSED,this._load_msg_cache=[],this._queues=[],this._msgHash={},this.mr_cache={},this.token="",this.context.accessToken="",null===(n=null===(t=null==this?void 0:this._localCache)||void 0===t?void 0:t.getInstance())||void 0===n||n.close()},e.prototype.downloadAndParseCombineMessage=function(e){var t=this,n=e.url,r=e.secret;return new Promise((function(e,i){var s,o,l=a.P6.getEnvInfo(),u="web"!==l.platform&&"node"!==l.platform&&"quick_app"!==l.platform&&(null===(o=null===(s=l.global)||void 0===s?void 0:s.canIUse)||void 0===o?void 0:o.call(s,"getFileSystemManager")),h=function(n){var r=function(e){i({type:c.E.PARSE_FILE_ERROR,message:"Read file failed",data:e})},s=function(n){return r=t,o=function(){var t,r,s,o,l,h,p,f,m,g,_,v,y;return G(this,(function(E){switch(E.label){case 0:for(t=u?new Uint8Array(n.data):new Uint8Array(n.target.result),r=0,s=0,o=2,l=t.subarray(r,r+o),h=a.P6.Uint8ArrayToString(l),d.kg.debug("file header:",h),s+=o,p=0,f=2;f<t.length-1;f++)f%2==1&&(p^=t[f]);if(m=t.subarray(t.length-1,t.length),d.kg.debug("checkResult:",p,m[0]===p),m[0]!==p)return[2,i({type:c.E.PARSE_FILE_ERROR,message:"File verification failed"})];if("cm"!==h)return[3,7];E.label=1;case 1:E.trys.push([1,5,,6]),g=[],_=function(){var e,n,i,a;return G(this,(function(c){switch(c.label){case 0:return r+=o,s+=o=4,e=t.subarray(r,r+o),r+=o,o=e.reduce((function(t,n,r){return t+(n<<8*(e.length-r-1))}),0),s+=o,n=t.subarray(r,r+o),i=(i=v.root.lookup("easemob.pb.Meta")).decode(n),[4,B.Z.call(v,i,0,!0,!0)];case 1:return a=c.sent(),g.push(a),[2]}}))},v=this,E.label=2;case 2:return s<t.length-1?[5,_()]:[3,4];case 3:return E.sent(),[3,2];case 4:return[2,e(g)];case 5:return y=E.sent(),i({type:c.E.PARSE_FILE_ERROR,message:"Parse file failed",data:y}),[3,6];case 6:return[3,8];case 7:return[2,i({type:c.E.PARSE_FILE_ERROR,message:"File verification failed"})];case 8:return[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{a(o.next(e))}catch(e){t(e)}}function i(e){try{a(o.throw(e))}catch(e){t(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(n,i)}a((o=o.apply(r,[])).next())}));var r,s,o};if(u){var o=l.global.getFileSystemManager(),h=n.tempFilePath;o.readFile({filePath:h,success:s,fail:r})}else if(n instanceof Blob){var p=new FileReader;p.readAsArrayBuffer(n),p.onerror=r,p.onload=s}},p=function(e){i({type:c.E.WEBIM_DOWNLOADFILE_ERROR,message:"Download failed, please try again",data:e})};u?l.global.downloadFile({url:n,success:h,fail:p}):a.P6.download.call(t,{url:n,headers:{Accept:"application/json"},onFileDownloadComplete:h,onFileDownloadError:p,secret:r,accessToken:t.context.accessToken})}))},e.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatID)},e.prototype.clear=function(){this.restTotal=0,this.restIndex=0,this.hostIndex=0,this.hostTotal=0},e.prototype.heartBeat=function(){},e.prototype.renewToken=function(e){var t=this;return this.isOpened()?this.getChatToken(e).then((function(e){var n=Date.now();return t.expirationTime=e.expire_timestamp,t.expiresIn=e.expire_timestamp-n,t.token=e.access_token,t.context.accessToken=e.access_token,t.clearTokenTimeout(),t.tokenExpireTimeCountDown(t.expiresIn),{status:!0,token:e.access_token,expire:e.expire_timestamp}})):Promise.reject({status:!1})},e.prototype.clearTokenTimeout=function(){d.kg.debug("clearTokenTimeout"),this.tokenWillExpireTimer&&clearTimeout(this.tokenWillExpireTimer),this.tokenExpiredTimer&&clearTimeout(this.tokenExpiredTimer)},e.prototype.tokenExpireTimeCountDown=function(e){var t=this;e>Math.pow(2,31)-1&&(e=Math.pow(2,31)-1),this.tokenWillExpireTimer=setTimeout((function(){var n;t.onTokenWillExpire&&t.onTokenWillExpire(),null===(n=t.eventHandler)||void 0===n||n.dispatch("onTokenWillExpire"),d.kg.info("onTokenWillExpire",e)}),e/2),this.tokenExpiredTimer=setTimeout((function(){var n;d.kg.info("onTokenExpired",e),t.onTokenExpired&&t.onTokenExpired(),null===(n=t.eventHandler)||void 0===n||n.dispatch("onTokenExpired"),t.close()}),e)},e.prototype.compareTokenExpireTime=function(e,t){var n,r=Number(t)-Number(e);d.kg.debug("compareTokenExpireTime",r),r<=this.expiresIn/2&&r>0?(this.onTokenWillExpire&&this.onTokenWillExpire(),null===(n=this.eventHandler)||void 0===n||n.dispatch("onTokenWillExpire"),d.kg.info("onTokenWillExpire",r)):r<=0&&(this.closeByTokenExpired(),d.kg.info("closeByTokenExpired",r))},e.prototype.closeByTokenExpired=function(){var e;d.kg.info("closed By TokenExpired"),this.onTokenExpired&&this.onTokenExpired(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onTokenExpired"),this.close()},e.prototype.rejectMessage=function(){var e=this,t=Object.keys(this._msgHash);if(t.length>0){var n=o.Z.create({type:c.E.MESSAGE_WEBSOCKET_DISCONNECTED,message:"websocket disconnected"});t.forEach((function(t){var r,i,s;(null===(r=e.unMSyncSendMsgMap)||void 0===r?void 0:r.has(t))||(e._msgHash[t].reject instanceof Function&&e._msgHash[t].reject(n),null===(s=null===(i=e._localCache)||void 0===i?void 0:i.getInstance())||void 0===s||s.updateLocalMessage(t,{serverMsgId:t,status:x.r.FAIL}),e._msgHash[t].fail instanceof Function&&e._msgHash[t].fail(n),delete e._msgHash[t])}))}},e.prototype.rejectContactsOperate=function(){Array.from(_.Nl.values()).forEach((function(e){null==e||e.reject()})),_.Nl.clear()},e.prototype.resetConnState=function(){this.mSync.stopHeartBeat(),this.times=1,this.autoReconnectNumTotal=0,this.hostIndex=0},e.prototype.reconnect=function(){var e,t=this;this.sock.readyState!==q.CONNECTING&&this.sock.readyState!==q.OPEN&&(d.kg.info("reconnect: time",this.times),d.kg.info("reconnect sock.readyState: ",this.sock.readyState),!1===this.reconnecting&&(this.reconnecting=!0),null===(e=this.eventHandler)||void 0===e||e.dispatch("onReconnecting"),this.rejectMessage(),this.rejectContactsOperate(),this.isHttpDNS&&(this.hostIndex<this.socketHost.length-1?this.hostIndex++:this.hostIndex=this.socketHost.length-1),setTimeout((function(){t.sock.readyState!==q.OPEN&&(d.kg.info("login sock.readyState: ",t.sock.readyState),t.sock.close(),Q.call(t,{access_token:t.context.accessToken}),t.times++)}),500*this.times),this.autoReconnectNumTotal++)},e.prototype.send=function(e){return Promise.resolve(null)},e._getSock=function(){},e}();function Y(e,t){var n=this,r=t.rpt,i=t.isRetry,s=e.promise,l=this.apiUrl+"/"+this.orgName+"/"+this.appName+"/users",d={requestName:v.c.RESISTER,requestUrl:l},u=e.error||z;if(!this.orgName&&!this.appName){var h=o.Z.create({type:c.E.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"signup error"});u(h)}var p={headers:{"Content-type":"application/json"},url:l,dataType:"json",data:JSON.stringify({username:e.username,password:e.password,nickname:e.nickname||""}),success:function(t){e.success&&e.success(t);var n=V(V({},t),{type:c.E.REQUEST_SUCCESS});s.resolve&&s.resolve(n);var o=t.extraInfo,a=o.httpCode,l=o.elapse;r({isEndApi:!0,isRetry:i,data:V(V({},{requestElapse:l,isSuccess:1,code:a}),d)})},error:function(t){var o=t.extraInfo,a=o.elapse,c=o.httpCode,l=o.errDesc;return r({isRetry:i,data:V(V({},{requestElapse:a,isSuccess:0,code:c,codeDesc:l}),d)}),n.isHttpDNS&&n.restIndex+1<n.restTotal?(n.restIndex++,ne.call(n),Y.call(n,e,{rpt:r,isRetry:i}),Promise.reject(t)):(r({data:{isLastApi:1,isSuccess:0}}),n.clear(),s.reject&&s.reject(t),u(t))}};return a.P6.ajax(p).catch((function(e){s.reject&&s.reject(e)}))}function J(e,t){var n=this;if($.call(this,e)&&!this.isOpened()){var r=t.rpt,i=t.isRetry;ee.call(this,e),this.user=e.user;var s=e.promise,l=this.context.appName,u=this.context.orgName,h=this.apiUrl+"/"+u+"/"+l+"/token";if(e.agoraToken)this.grantType="agoraToken",this.getChatToken(e.agoraToken).then((function(t){d.kg.info("getChatToken result:",t),n.expirationTime=t.expire_timestamp,n.token=t.access_token,n.context.accessToken=t.access_token,n.context.restTokenData=t.access_token;var i=t.extraInfo,o=i.httpCode,a=i.elapse;s.resolve({accessToken:t.access_token,expireTimestamp:t.expire_timestamp});var c={requestName:v.c.LOGIN_BY_AGORA_TOKEN,requestUrl:h,requestElapse:a,isSuccess:1,code:o};r({data:c}),Q.call(n,V(V({},e),{access_token:t.access_token}),r)})).catch((function(e){var t,i=o.Z.create({type:c.E.WEBIM_CONNCTION_GETROSTER_ERROR,message:"get chat token fail",data:e});s.reject(i),n.onError&&n.onError(i),null===(t=n.eventHandler)||void 0===t||t.dispatch("onError",i);var a=e.extraInfo,l=a.elapse,d=a.httpCode,u=a.errDesc,p={requestName:v.c.LOGIN_BY_AGORA_TOKEN,requestUrl:h,requestElapse:l,isSuccess:0,code:d,codeDesc:u};r({data:p}),r({data:{isLastApi:1,isSuccess:0}})}));else if(e.accessToken)this.grantType="accessToken",this.token=e.accessToken,this.context.accessToken=e.accessToken,this.context.restTokenData=e.accessToken,s.resolve({accessToken:e.accessToken}),Q.call(this,e,r);else{this.grantType="password";var p={grant_type:"password",username:e.user,password:e.pwd,timestamp:+new Date},f=JSON.stringify(p),m={headers:{"Content-type":"application/json"},url:h,dataType:"json",data:f,success:function(t){"function"==typeof e.success&&e.success(t),n.token=t.access_token,n.context.restTokenData=t.access_token,n.context.accessToken=t.access_token,n.expiresIn=t.expires_in,n.clearTokenTimeout(),n.tokenExpireTimeCountDown(1e3*n.expiresIn),s.resolve({accessToken:t.access_token,duration:t.expires_in});var o=t.extraInfo,a=o.httpCode,c=o.elapse,l={requestName:v.c.LOGIN_BY_PWD,requestElapse:c,requestUrl:h,isSuccess:1,code:a};r({isRetry:i,data:l}),Q.call(n,t,r)}||z,error:function(t){var a,l=t.extraInfo,d=l.elapse,u=l.httpCode,p=l.errDesc,f={requestName:v.c.LOGIN_BY_PWD,requestElapse:d,requestUrl:h,isSuccess:0,code:u,codeDesc:p};if(r({isRetry:i,data:f}),n.isHttpDNS&&n.restIndex+1<n.restTotal)return n.restIndex++,ne.call(n),void J.call(n,e,{rpt:r,isRetry:!0});r({data:{isLastApi:1,isSuccess:0}}),n.clear(),t.error&&t.error_description?(a=o.Z.create({type:c.E.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,message:t.error_description,data:t}),n.onError&&n.onError(a)):(a=o.Z.create({type:c.E.WEBIM_CONNCTION_OPEN_ERROR,message:t.error_description,data:t}),n.onError&&n.onError(a)),"function"==typeof e.error&&e.error(a),s.reject(a)}||z,version:"4.2.0"};a.P6.ajax(m).catch((function(e){console.warn(e)}))}a.P6.listenNetwork(X.bind(this),Z.bind(this))}}function X(){var e;d.kg.debug("online"),this.onOnline&&this.onOnline(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onOnline"),this.sock&&1!==this.sock.readyState&&(d.kg.debug("sock.readyState:",this.sock.readyState),this.logOut||this.reconnecting||this.reconnect())}function Z(){var e;d.kg.debug("offline"),this.onOffline&&this.onOffline(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onOffline")}function Q(e,t){var n=this,r=this._getSock();this.sock=r;var i=function(){var e;d.kg.debug("websockt onOpen"),t&&t({data:{isLastApi:1,isSuccess:1,accessChannel:null===(e=n.socketHost[n.hostIndex])||void 0===e?void 0:e.channel}});var i=a.P6.flow([n.mSync.generateProvision,n.mSync.base64transform])();try{r.send(i)}catch(e){var s=o.Z.create({type:c.E.SDK_RUNTIME_ERROR,message:"send message error",data:e});n.onError&&n.onError(s)}},s=function(e){setTimeout((function(){var t,r,i,s,o,a,l,u,h,p,f,m;d.kg.debug("websocket onClose"),"zfb"!==H.platform&&"dd"!==H.platform||(n.sock.readyState=q.CLOSED);var g=401===(null==e?void 0:e.code)||401===(null===(t=n.closeInfo)||void 0===t?void 0:t.code);if(n.logOut)n.clear(),n.resetConnState(),g&&(d.kg.debug("websocket provision error"),n.closeInfo=null),null===(i=null===(r=null==n?void 0:n._localCache)||void 0===r?void 0:r.getInstance())||void 0===i||i.close(),n.onClosed&&n.onClosed(),null===(s=n.eventHandler)||void 0===s||s.dispatch("onDisconnected");else if(g){d.kg.debug("websocket provision error");var _={type:c.E.WEBIM_CONNECTION_ERROR,message:"provision error",data:e};n.closeInfo=null,n.onError&&n.onError(_),null===(o=n.eventHandler)||void 0===o||o.dispatch("onError",_),null===(l=null===(a=null==n?void 0:n._localCache)||void 0===a?void 0:a.getInstance())||void 0===l||l.close(),n.onClosed&&n.onClosed(),null===(u=n.eventHandler)||void 0===u||u.dispatch("onDisconnected"),n.resetConnState()}else if(n.autoReconnectNumTotal<n.autoReconnectNumMax){n.reconnect();var v={type:c.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};n.onError&&n.onError(v),n.autoReconnectNumTotal%n.refreshDNSIntervals==0&&"web"===H.platform&&n.isHttpDNS&&(d.kg.debug("refresh dns config when websocket close"),te.call(n,"refresh",{},{}))}else null===(h=n.unMSyncSendMsgMap)||void 0===h||h.clear(),n.rejectMessage(),v={type:c.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"},n.onError&&n.onError(v),null===(f=null===(p=null==n?void 0:n._localCache)||void 0===p?void 0:p.getInstance())||void 0===f||f.close(),n.onClosed&&n.onClosed(),null===(m=n.eventHandler)||void 0===m||m.dispatch("onDisconnected"),n.resetConnState(),n.reconnecting=!1,d.kg.debug("reconnect fail")}),0)},l=function(e){var t=n.mSync,r=t.decodeMSync,i=t.distributeMSync;a.P6.flow([r,i])(e)};"web"===H.platform?(r.onopen=i,r.onclose=s,r.onmessage=l):(r.onOpen(i),r.onMessage(l),r.onClose(s),"undefined"!=typeof window&&window.WebSocket||r.onError((function(e){var r,i,s,o,a;if(d.kg.debug("mini program sock on error",e),n.onError&&n.onError({type:c.E.WEBIM_CONNECTION_ERROR,message:"on socket error",data:e}),!n.logOut)if(n.autoReconnectNumTotal<n.autoReconnectNumMax)d.kg.debug("sock.onError reconnect",n.autoReconnectNumTotal,n.autoReconnectNumMax),n.reconnect(),n.autoReconnectNumTotal%n.refreshDNSIntervals==0&&"web"===H.platform&&n.isHttpDNS&&(d.kg.debug("refresh dns config when websocket error"),te.call(n,"refresh",{},{}));else{var l={type:c.E.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};null===(r=n.unMSyncSendMsgMap)||void 0===r||r.clear(),n.rejectMessage(),n.onError&&n.onError(l),null===(s=null===(i=null==n?void 0:n._localCache)||void 0===i?void 0:i.getInstance())||void 0===s||s.close(),n.onClosed&&n.onClosed(),null===(o=n.eventHandler)||void 0===o||o.dispatch("onDisconnected"),n.resetConnState(),n.reconnecting=!1,d.kg.debug("reconnect fail")}t&&t({data:{isLastApi:1,isSuccess:0,accessChannel:null===(a=n.socketHost[n.hostIndex])||void 0===a?void 0:a.channel}})})))}function $(e){if(""===e.user){var t=o.Z.create({type:c.E.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR,message:"the user cannot be empty"});return d.kg.debug("open params error",t),this.onError&&this.onError(t),!1}var n=this.appKey.split("#");return!(2!==n.length||!n[0]||!n[1])||(t=o.Z.create({type:c.E.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"the appKey is illegal"}),d.kg.debug("open params error",t),this.onError&&this.onError(t),!1)}function ee(e){this.context.jid={appKey:this.appKey,name:e.user,domain:this.domain,clientResource:this.clientResource};var t=this.appKey.split("#"),n=t[0],r=t[1];this.context.root=this.root,this.context.userId=e.user,this.context.appKey=this.appKey,this.context.appName=r,this.context.orgName=n}function te(e,t,n){var r=this,i=n.rpt,s=n.isRetry,o=this.dnsArr[this.dnsIndex]+"/easemob/server.json",c={url:o,dataType:"json",type:"GET",data:{app_key:encodeURIComponent(this.appKey)},success:function(n){var a=n.extraInfo,c=a.elapse,l=a.httpCode,u={requestUrl:o,requestName:v.c.GET_DNS,requestElapse:c,isSuccess:1,code:l};"true"===(null==n?void 0:n.enableDataReport)?(r.dataReport.setIsCollectDt(!0),r.dataReport.setIsReportDt(!0)):(r.dataReport.setIsReportDt(!1),r.dataReport.setIsCollectDt(!1)),i&&i({isRetry:s,data:u});var h=n.rest.hosts,p=r.https?"https":"http";if(d.kg.info("httpType: "+p),!h)return Promise.reject(!1);for(var f=h.filter((function(e){if(e.protocol===p)return e})),m=0;m<f.length;m++)if(f[m].protocol===p){var g=f[m];f.splice(m,1),f.unshift(g)}r.restHosts=f,r.restTotal=f.length;var _=n["msync-ws"].hosts;if(!_)return Promise.reject(!1);var y=_.filter((function(e){return e.protocol===p&&e}));r.socketHost=y,r.hostTotal=y.length,ne.call(r),"refresh"!==e&&("login"===e?J.call(r,t,{rpt:i}):Y.call(r,t,{rpt:i}))}||z,error:function(n){var a=n.extraInfo,c=a.elapse,l=a.httpCode,u=a.errDesc,h={requestUrl:o,requestName:v.c.GET_DNS,isSuccess:0,code:l,codeDesc:u,requestElapse:c};i&&i({isRetry:s,data:h}),d.kg.debug("getHttpDNS fail: "+r.dnsIndex),r.dnsIndex++,r.dnsIndex<r.dnsTotal&&te.call(r,e,t,{rpt:i,isRetry:!0})}||z};return a.P6.ajax(c).catch((function(e){console.warn(e)}))}function ne(){var e,t;if(this.restIndex>this.restTotal)return d.kg.debug("restIndex > restTotal"),"";var n="",r=this.restHosts[this.restIndex],i=r.domain,s=r.ip,o=r.port,a=this.https?"https:":"http:";return s&&"undefined"!=typeof window&&"http:"===(null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.protocol)?n=a+"//"+s+":"+o:(n=a+"//"+i,o&&"80"!==o&&"443"!==o&&(n+=":".concat(o)),"undefined"==typeof window||window.location||(n="https://"+i),"undefined"!=typeof window&&window.location&&"file:"===(null===(t=window.location)||void 0===t?void 0:t.protocol)&&(n="https://"+i)),"undefined"==typeof window&&(n=a+"//"+i),this.apiUrl=n,n}var re=__nested_webpack_require_895763__(2449);r().util.Long=s(),r().configure();var ie=r().Root.fromJSON({nested:{easemob:{nested:{pb:{nested:{MessageBody:{fields:{type:{type:"Type",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},contents:{rule:"repeated",type:"Content",id:4},ext:{rule:"repeated",type:"KeyValue",id:5},ackMessageId:{type:"uint64",id:6},msgConfig:{type:"MessageConfig",id:7},ackContent:{type:"string",id:8},meta:{type:"string",id:9},editMessageId:{type:"uint64",id:11}},nested:{Content:{fields:{type:{type:"Type",id:1},text:{type:"string",id:2},latitude:{type:"double",id:3},longitude:{type:"double",id:4},address:{type:"string",id:5},displayName:{type:"string",id:6},remotePath:{type:"string",id:7},secretKey:{type:"string",id:8},fileLength:{type:"int32",id:9},action:{type:"string",id:10},params:{rule:"repeated",type:"KeyValue",id:11},duration:{type:"int32",id:12},size:{type:"Size",id:13},thumbnailRemotePath:{type:"string",id:14},thumbnailSecretKey:{type:"string",id:15},thumbnailDisplayName:{type:"string",id:16},thumbnailFileLength:{type:"int32",id:17},thumbnailSize:{type:"Size",id:18},customEvent:{type:"string",id:19},customExts:{rule:"repeated",type:"KeyValue",id:20},buildingName:{type:"string",id:21},subType:{type:"SubType",id:22},title:{type:"string",id:23},summary:{type:"string",id:24},combineLevel:{type:"int32",id:25}},nested:{Type:{values:{TEXT:0,IMAGE:1,VIDEO:2,LOCATION:3,VOICE:4,FILE:5,COMMAND:6,CUSTOM:7,COMBINE:8}},Size:{fields:{width:{type:"double",id:1},height:{type:"double",id:2}}},SubType:{values:{COMBINE:0}}}},Type:{values:{NORMAL:0,CHAT:1,GROUPCHAT:2,CHATROOM:3,READ_ACK:4,DELIVER_ACK:5,RECALL:6,CHANNEL_ACK:7,EDIT:8}},MessageConfig:{fields:{allowGroupAck:{type:"bool",id:1}}}}},KeyValue:{oneofs:{value:{oneof:["varintValue","floatValue","doubleValue","stringValue"]}},fields:{key:{type:"string",id:1},type:{type:"ValueType",id:2},varintValue:{type:"int64",id:3},floatValue:{type:"float",id:4},doubleValue:{type:"double",id:5},stringValue:{type:"string",id:6}},nested:{ValueType:{values:{BOOL:1,INT:2,UINT:3,LLINT:4,FLOAT:5,DOUBLE:6,STRING:7,JSON_STRING:8}}}},JID:{fields:{appKey:{type:"string",id:1},name:{type:"string",id:2},domain:{type:"string",id:3},clientResource:{type:"string",id:4}}},ConferenceBody:{fields:{sessionId:{type:"string",id:1},operation:{type:"Operation",id:2},conferenceId:{type:"string",id:3},type:{type:"Type",id:4},content:{type:"string",id:5},network:{type:"string",id:6},version:{type:"string",id:7},identity:{type:"Identity",id:8},duration:{type:"string",id:9},peerName:{type:"string",id:10},endReason:{type:"EndReason",id:11},status:{type:"Status",id:12},isDirect:{type:"bool",id:13},controlType:{type:"StreamControlType",id:14},routeFlag:{type:"int32",id:15},routeKey:{type:"string",id:16}},nested:{Status:{fields:{errorCode:{type:"int32",id:1}}},Operation:{values:{JOIN:0,INITIATE:1,ACCEPT_INITIATE:2,ANSWER:3,TERMINATE:4,REMOVE:5,STREAM_CONTROL:6,MEDIA_REQUEST:7}},Type:{values:{VOICE:0,VIDEO:1}},Identity:{values:{CALLER:0,CALLEE:1}},EndReason:{values:{HANGUP:0,NORESPONSE:1,REJECT:2,BUSY:3,FAIL:4,UNSUPPORTED:5,OFFLINE:6}},StreamControlType:{values:{PAUSE_VOICE:0,RESUME_VOICE:1,PAUSE_VIDEO:2,RESUME_VIDEO:3}}}},MSync:{fields:{version:{type:"Version",id:1,options:{default:"MSYNC_V1"}},guid:{type:"JID",id:2},auth:{type:"string",id:3},compressAlgorimth:{type:"uint32",id:4},crypto:{type:"uint32",id:5},userAgent:{type:"string",id:6},pov:{type:"uint64",id:7},command:{type:"Command",id:8},deviceId:{type:"uint32",id:10},encryptType:{rule:"repeated",type:"EncryptType",id:11,options:{packed:!1}},encryptKey:{type:"string",id:12},payload:{type:"bytes",id:9}},nested:{Version:{values:{MSYNC_V1:0,MSYNC_V2:1}},Command:{values:{SYNC:0,UNREAD:1,NOTICE:2,PROVISION:3}}}},EncryptType:{values:{ENCRYPT_NONE:0,ENCRYPT_AES_128_CBC:1,ENCRYPT_AES_256_CBC:2}},CommSyncUL:{fields:{meta:{type:"Meta",id:1},key:{type:"uint64",id:2},queue:{type:"JID",id:3},isRoam:{type:"bool",id:4},lastFullRoamKey:{type:"uint64",id:5}}},CommSyncDL:{fields:{status:{type:"Status",id:1},metaId:{type:"uint64",id:2},serverId:{type:"uint64",id:3},metas:{rule:"repeated",type:"Meta",id:4},nextKey:{type:"uint64",id:5},queue:{type:"JID",id:6},isLast:{type:"bool",id:7},timestamp:{type:"uint64",id:8},isRoam:{type:"bool",id:9}}},CommNotice:{fields:{queue:{type:"JID",id:1}}},CommUnreadUL:{fields:{}},CommUnreadDL:{fields:{status:{type:"Status",id:1},unread:{rule:"repeated",type:"MetaQueue",id:2},timestamp:{type:"uint64",id:3}}},MetaQueue:{fields:{queue:{type:"JID",id:1},n:{type:"uint32",id:2}}},Meta:{fields:{id:{type:"uint64",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},timestamp:{type:"uint64",id:4},ns:{type:"NameSpace",id:5},payload:{type:"bytes",id:6},routetype:{type:"RouteType",id:7},ext:{type:"KeyValue",id:8},meta:{type:"bytes",id:9},directedUsers:{rule:"repeated",type:"string",id:10}},nested:{NameSpace:{values:{STATISTIC:0,CHAT:1,MUC:2,ROSTER:3,CONFERENCE:4,NOTIFY:5,QUERY:6}},RouteType:{values:{ROUTE_ALL:0,ROUTE_ONLINE:1,ROUTE_DIRECT:2}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},reason:{type:"string",id:2},redirectInfo:{rule:"repeated",type:"RedirectInfo",id:3}},nested:{ErrorCode:{values:{OK:0,FAIL:1,UNAUTHORIZED:2,MISSING_PARAMETER:3,WRONG_PARAMETER:4,REDIRECT:5,TOKEN_EXPIRED:6,PERMISSION_DENIED:7,NO_ROUTE:8,UNKNOWN_COMMAND:9,PB_PARSER_ERROR:10,BIND_ANOTHER_DEVICE:11,IM_FORBIDDEN:12,TOO_MANY_DEVICES:13,PLATFORM_LIMIT:14,USER_MUTED:15,ENCRYPT_DISABLE:16,ENCRYPT_ENABLE:17,DECRYPT_FAILURE:18,PERMISSION_DENIED_EXTERNAL:19}}}},RedirectInfo:{fields:{host:{type:"string",id:1},port:{type:"uint32",id:2}}},Provision:{fields:{osType:{type:"OsType",id:1},version:{type:"string",id:2},networkType:{type:"NetworkType",id:3},appSign:{type:"string",id:4},compressType:{rule:"repeated",type:"CompressType",id:5,options:{packed:!1}},encryptType:{rule:"repeated",type:"EncryptType",id:6,options:{packed:!1}},encryptKey:{type:"string",id:7},status:{type:"Status",id:8},deviceUuid:{type:"string",id:9},isManualLogin:{type:"bool",id:10},password:{type:"string",id:11},deviceName:{type:"string",id:12},resource:{type:"string",id:13},auth:{type:"string",id:14},serviceId:{type:"string",id:16},actionVersion:{type:"string",id:17}},nested:{OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}},CompressType:{values:{COMPRESS_NONE:0,COMPRESS_ZLIB:1}}}},MUCBody:{fields:{mucId:{type:"JID",id:1},operation:{type:"Operation",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},setting:{type:"Setting",id:5},reason:{type:"string",id:6},isChatroom:{type:"bool",id:7},status:{type:"Status",id:8},isThread:{type:"bool",id:9},mucParentId:{type:"JID",id:10},mucName:{type:"string",id:11},eventInfo:{type:"EventInfo",id:12}},nested:{Operation:{values:{CREATE:0,DESTROY:1,JOIN:2,LEAVE:3,APPLY:4,APPLY_ACCEPT:5,APPLY_DECLINE:6,INVITE:7,INVITE_ACCEPT:8,INVITE_DECLINE:9,KICK:10,GET_BLACKLIST:11,BAN:12,ALLOW:13,UPDATE:14,BLOCK:15,UNBLOCK:16,PRESENCE:17,ABSENCE:18,DIRECT_JOINED:19,ASSIGN_OWNER:20,ADD_ADMIN:21,REMOVE_ADMIN:22,ADD_MUTE:23,REMOVE_MUTE:24,UPDATE_ANNOUNCEMENT:25,DELETE_ANNOUNCEMENT:26,UPLOAD_FILE:27,DELETE_FILE:28,ADD_USER_WHITE_LIST:29,REMOVE_USER_WHITE_LIST:30,BAN_GROUP:31,REMOVE_BAN_GROUP:32,THREAD_CREATE:33,THREAD_DESTROY:34,THREAD_JOIN:35,THREAD_LEAVE:36,THREAD_KICK:37,THREAD_UPDATE:38,THREAD_PRESENCE:39,THREAD_ABSENCE:40,DISABLE_GROUP:41,ABLE_GROUP:42,SET_METADATA:43,DELETE_METADATA:44,GROUP_MEMBER_METADATA_UPDATE:45}},Setting:{fields:{name:{type:"string",id:1},desc:{type:"string",id:2},type:{type:"Type",id:3},maxUsers:{type:"int32",id:4},owner:{type:"string",id:5}},nested:{Type:{values:{PRIVATE_OWNER_INVITE:0,PRIVATE_MEMBER_INVITE:1,PUBLIC_JOIN_APPROVAL:2,PUBLIC_JOIN_OPEN:3,PUBLIC_ANONYMOUS:4}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,PERMISSION_DENIED:1,WRONG_PARAMETER:2,MUC_NOT_EXIST:3,USER_NOT_EXIST:4,UNKNOWN:5}}}},EventInfo:{fields:{eventType:{type:"EventType",id:1,options:{default:"EVENT_NONE"}},ext:{type:"string",id:2}},nested:{EventType:{values:{EVENT_NONE:0,CIRCLE_CHANNEL:1}}}}}},RosterBody:{fields:{operation:{type:"Operation",id:1},status:{type:"Status",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},reason:{type:"string",id:5},rosterVer:{type:"string",id:6},biDirection:{type:"bool",id:7}},nested:{Operation:{values:{GET_ROSTER:0,GET_BLACKLIST:1,ADD:2,REMOVE:3,ACCEPT:4,DECLINE:5,BAN:6,ALLOW:7,REMOTE_ACCEPT:8,REMOTE_DECLINE:9}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,USER_NOT_EXIST:1,USER_ALREADY_FRIEND:2,USER_ALREADY_BLACKLIST:3}}}}}},StatisticsBody:{fields:{operation:{type:"Operation",id:1},os:{type:"OsType",id:2},version:{type:"string",id:3},network:{type:"NetworkType",id:4},imTime:{type:"uint32",id:5},chatTime:{type:"uint32",id:6},location:{type:"string",id:7}},nested:{Operation:{values:{INFORMATION:0,USER_REMOVED:1,USER_LOGIN_ANOTHER_DEVICE:2,USER_KICKED_BY_CHANGE_PASSWORD:3,USER_KICKED_BY_OTHER_DEVICE:4}},OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}}}}}}}}}});K.prototype.root=ie;var se=d.kg.getLogger("defaultLogger");se.setConfig({useCache:!1,maxCache:3145728,color:"",background:""}),se.enableAll(),K.prototype._getSock=function(){if(this.isHttpDNS){var e=this.socketHost[this.hostIndex];if(!e)throw this.times=1,this.autoReconnectNumTotal=0,this.hostIndex=0,this.onClosed&&this.onClosed(),new Error("No connected domain name when get websocket.");var n=e.domain,r=e.ip,i="",s=e.port;i=n||r,s&&"80"!==s&&"443"!==s&&(i+=":"+s),i&&(this.url="//"+i+"/ws");var o=this.https?"https:":"http:";this.url=o+this.url}return new(t())(this.url)},K.prototype.getUniqueId=a.P6.getUniqueId;var oe={connection:K,message:re.Message,utils:a.P6,logger:se,statusCode:c.E};"undefined"!=typeof window&&(window.WebIM=oe);var ae=oe}(),__nested_webpack_exports__}()},module.exports=t()},1635:function(e,t,n){e.exports=function(){"use strict";function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i=function(e){try{return!!e()}catch(e){return!0}},s=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),o=s,a=Function.prototype,c=a.call,l=o&&a.bind.bind(c,c),d=o?l:function(e){return function(){return c.apply(e,arguments)}},u=d({}.isPrototypeOf),h=function(e){return e&&e.Math==Math&&e},p=h("object"==typeof globalThis&&globalThis)||h("object"==typeof window&&window)||h("object"==typeof self&&self)||h("object"==typeof t&&t)||function(){return this}()||t||Function("return this")(),f=s,m=Function.prototype,g=m.apply,_=m.call,v="object"==typeof Reflect&&Reflect.apply||(f?_.bind(g):function(){return _.apply(g,arguments)}),y=d,E=y({}.toString),b=y("".slice),T=function(e){return b(E(e),8,-1)},S=T,w=d,C=function(e){if("Function"===S(e))return w(e)},R="object"==typeof document&&document.all,I={all:R,IS_HTMLDDA:void 0===R&&void 0!==R},N=I.all,O=I.IS_HTMLDDA?function(e){return"function"==typeof e||e===N}:function(e){return"function"==typeof e},A={},k=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),x=s,P=Function.prototype.call,D=x?P.bind(P):function(){return P.apply(P,arguments)},L={},M={}.propertyIsEnumerable,j=Object.getOwnPropertyDescriptor,U=j&&!M.call({1:2},1);L.f=U?function(e){var t=j(this,e);return!!t&&t.enumerable}:M;var F,B,V=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},G=i,H=T,W=Object,z=d("".split),q=G((function(){return!W("z").propertyIsEnumerable(0)}))?function(e){return"String"==H(e)?z(e,""):W(e)}:W,K=function(e){return null==e},Y=K,J=TypeError,X=function(e){if(Y(e))throw J("Can't call method on "+e);return e},Z=q,Q=X,$=function(e){return Z(Q(e))},ee=O,te=I.all,ne=I.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:ee(e)||e===te}:function(e){return"object"==typeof e?null!==e:ee(e)},re={},ie=re,se=p,oe=O,ae=function(e){return oe(e)?e:void 0},ce=function(e,t){return arguments.length<2?ae(ie[e])||ae(se[e]):ie[e]&&ie[e][t]||se[e]&&se[e][t]},le="undefined"!=typeof navigator&&String(navigator.userAgent)||"",de=p,ue=le,he=de.process,pe=de.Deno,fe=he&&he.versions||pe&&pe.version,me=fe&&fe.v8;me&&(B=(F=me.split("."))[0]>0&&F[0]<4?1:+(F[0]+F[1])),!B&&ue&&(!(F=ue.match(/Edge\/(\d+)/))||F[1]>=74)&&(F=ue.match(/Chrome\/(\d+)/))&&(B=+F[1]);var ge=B,_e=ge,ve=i,ye=p.String,Ee=!!Object.getOwnPropertySymbols&&!ve((function(){var e=Symbol();return!ye(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&_e&&_e<41})),be=Ee&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Te=ce,Se=O,we=u,Ce=Object,Re=be?function(e){return"symbol"==typeof e}:function(e){var t=Te("Symbol");return Se(t)&&we(t.prototype,Ce(e))},Ie=String,Ne=function(e){try{return Ie(e)}catch(e){return"Object"}},Oe=O,Ae=Ne,ke=TypeError,xe=function(e){if(Oe(e))return e;throw ke(Ae(e)+" is not a function")},Pe=xe,De=K,Le=function(e,t){var n=e[t];return De(n)?void 0:Pe(n)},Me=D,je=O,Ue=ne,Fe=TypeError,Be={exports:{}},Ve=p,Ge=Object.defineProperty,He=function(e,t){try{Ge(Ve,e,{value:t,configurable:!0,writable:!0})}catch(r){Ve[e]=t}return t},We="__core-js_shared__",ze=p[We]||He(We,{}),qe=ze;(Be.exports=function(e,t){return qe[e]||(qe[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Ke=Be.exports,Ye=X,Je=Object,Xe=function(e){return Je(Ye(e))},Ze=Xe,Qe=d({}.hasOwnProperty),$e=Object.hasOwn||function(e,t){return Qe(Ze(e),t)},et=d,tt=0,nt=Math.random(),rt=et(1..toString),it=function(e){return"Symbol("+(void 0===e?"":e)+")_"+rt(++tt+nt,36)},st=Ke,ot=$e,at=it,ct=Ee,lt=be,dt=p.Symbol,ut=st("wks"),ht=lt?dt.for||dt:dt&&dt.withoutSetter||at,pt=function(e){return ot(ut,e)||(ut[e]=ct&&ot(dt,e)?dt[e]:ht("Symbol."+e)),ut[e]},ft=D,mt=ne,gt=Re,_t=Le,vt=function(e,t){var n,r;if("string"===t&&je(n=e.toString)&&!Ue(r=Me(n,e)))return r;if(je(n=e.valueOf)&&!Ue(r=Me(n,e)))return r;if("string"!==t&&je(n=e.toString)&&!Ue(r=Me(n,e)))return r;throw Fe("Can't convert object to primitive value")},yt=TypeError,Et=pt("toPrimitive"),bt=function(e,t){if(!mt(e)||gt(e))return e;var n,r=_t(e,Et);if(r){if(void 0===t&&(t="default"),n=ft(r,e,t),!mt(n)||gt(n))return n;throw yt("Can't convert object to primitive value")}return void 0===t&&(t="number"),vt(e,t)},Tt=Re,St=function(e){var t=bt(e,"string");return Tt(t)?t:t+""},wt=ne,Ct=p.document,Rt=wt(Ct)&&wt(Ct.createElement),It=function(e){return Rt?Ct.createElement(e):{}},Nt=It,Ot=!k&&!i((function(){return 7!=Object.defineProperty(Nt("div"),"a",{get:function(){return 7}}).a})),At=k,kt=D,xt=L,Pt=V,Dt=$,Lt=St,Mt=$e,jt=Ot,Ut=Object.getOwnPropertyDescriptor;A.f=At?Ut:function(e,t){if(e=Dt(e),t=Lt(t),jt)try{return Ut(e,t)}catch(e){}if(Mt(e,t))return Pt(!kt(xt.f,e,t),e[t])};var Ft=i,Bt=O,Vt=/#|\.prototype\./,Gt=function(e,t){var n=Wt[Ht(e)];return n==qt||n!=zt&&(Bt(t)?Ft(t):!!t)},Ht=Gt.normalize=function(e){return String(e).replace(Vt,".").toLowerCase()},Wt=Gt.data={},zt=Gt.NATIVE="N",qt=Gt.POLYFILL="P",Kt=Gt,Yt=xe,Jt=s,Xt=C(C.bind),Zt=function(e,t){return Yt(e),void 0===t?e:Jt?Xt(e,t):function(){return e.apply(t,arguments)}},Qt={},$t=k&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),en=ne,tn=String,nn=TypeError,rn=function(e){if(en(e))return e;throw nn(tn(e)+" is not an object")},sn=k,on=Ot,an=$t,cn=rn,ln=St,dn=TypeError,un=Object.defineProperty,hn=Object.getOwnPropertyDescriptor,pn="enumerable",fn="configurable",mn="writable";Qt.f=sn?an?function(e,t,n){if(cn(e),t=ln(t),cn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&mn in n&&!n[mn]){var r=hn(e,t);r&&r[mn]&&(e[t]=n.value,n={configurable:fn in n?n[fn]:r[fn],enumerable:pn in n?n[pn]:r[pn],writable:!1})}return un(e,t,n)}:un:function(e,t,n){if(cn(e),t=ln(t),cn(n),on)try{return un(e,t,n)}catch(e){}if("get"in n||"set"in n)throw dn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var gn=Qt,_n=V,vn=k?function(e,t,n){return gn.f(e,t,_n(1,n))}:function(e,t,n){return e[t]=n,e},yn=p,En=v,bn=C,Tn=O,Sn=A.f,wn=Kt,Cn=re,Rn=Zt,In=vn,Nn=$e,On=function(e){var t=function(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return En(e,this,arguments)};return t.prototype=e.prototype,t},An=function(e,t){var n,r,i,s,o,a,c,l,d,u=e.target,h=e.global,p=e.stat,f=e.proto,m=h?yn:p?yn[u]:(yn[u]||{}).prototype,g=h?Cn:Cn[u]||In(Cn,u,{})[u],_=g.prototype;for(s in t)r=!(n=wn(h?s:u+(p?".":"#")+s,e.forced))&&m&&Nn(m,s),a=g[s],r&&(c=e.dontCallGetSet?(d=Sn(m,s))&&d.value:m[s]),o=r&&c?c:t[s],r&&typeof a==typeof o||(l=e.bind&&r?Rn(o,yn):e.wrap&&r?On(o):f&&Tn(o)?bn(o):o,(e.sham||o&&o.sham||a&&a.sham)&&In(l,"sham",!0),In(g,s,l),f&&(Nn(Cn,i=u+"Prototype")||In(Cn,i,{}),In(Cn[i],s,o),e.real&&_&&(n||!_[s])&&In(_,s,o)))},kn=Math.ceil,xn=Math.floor,Pn=Math.trunc||function(e){var t=+e;return(t>0?xn:kn)(t)},Dn=function(e){var t=+e;return t!=t||0===t?0:Pn(t)},Ln=Dn,Mn=Math.max,jn=Math.min,Un=function(e,t){var n=Ln(e);return n<0?Mn(n+t,0):jn(n,t)},Fn=Dn,Bn=Math.min,Vn=function(e){return e>0?Bn(Fn(e),9007199254740991):0},Gn=function(e){return Vn(e.length)},Hn=$,Wn=Un,zn=Gn,qn=function(e){return function(t,n,r){var i,s=Hn(t),o=zn(s),a=Wn(r,o);if(e&&n!=n){for(;o>a;)if((i=s[a++])!=i)return!0}else for(;o>a;a++)if((e||a in s)&&s[a]===n)return e||a||0;return!e&&-1}},Kn={includes:qn(!0),indexOf:qn(!1)},Yn=Kn.includes;An({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(e){return Yn(this,e,arguments.length>1?arguments[1]:void 0)}});var Jn=re,Xn=function(e){return Jn[e+"Prototype"]},Zn=Xn("Array").includes,Qn=ne,$n=T,er=pt("match"),tr=function(e){var t;return Qn(e)&&(void 0!==(t=e[er])?!!t:"RegExp"==$n(e))},nr=TypeError,rr={};rr[pt("toStringTag")]="z";var ir="[object z]"===String(rr),sr=ir,or=O,ar=T,cr=pt("toStringTag"),lr=Object,dr="Arguments"==ar(function(){return arguments}()),ur=sr?ar:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=lr(e),cr))?n:dr?ar(t):"Object"==(r=ar(t))&&or(t.callee)?"Arguments":r},hr=ur,pr=String,fr=function(e){if("Symbol"===hr(e))throw TypeError("Cannot convert a Symbol value to a string");return pr(e)},mr=pt("match"),gr=An,_r=function(e){if(tr(e))throw nr("The method doesn't accept regular expressions");return e},vr=X,yr=fr,Er=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[mr]=!1,"/./"[e](t)}catch(e){}}return!1},br=d("".indexOf);gr({target:"String",proto:!0,forced:!Er("includes")},{includes:function(e){return!!~br(yr(vr(this)),yr(_r(e)),arguments.length>1?arguments[1]:void 0)}});var Tr=Xn("String").includes,Sr=u,wr=Zn,Cr=Tr,Rr=Array.prototype,Ir=String.prototype,Nr=r((function(e){var t=e.includes;return e===Rr||Sr(Rr,e)&&t===Rr.includes?wr:"string"==typeof e||e===Ir||Sr(Ir,e)&&t===Ir.includes?Cr:t}));let Or=!0,Ar=!0;function kr(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function xr(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const s=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,s),i.apply(this,[e,s])};const s=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(n))return s.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function Pr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Or=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Dr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Ar=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Lr(){if("object"==typeof window){if(Or)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Mr(e,t){Ar&&console.warn(e+" is deprecated, please use "+t+" instead.")}function jr(e){return"[object Object]"===Object.prototype.toString.call(e)}function Ur(e){return jr(e)?Object.keys(e).reduce((function(t,n){const r=jr(e[n]),i=r?Ur(e[n]):e[n],s=r&&!Object.keys(i).length;return void 0===i||s?t:Object.assign(t,{[n]:i})}),{}):e}function Fr(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?Fr(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{Fr(e,e.get(t),n)}))})))}function Br(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const s=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&s.push(e)})),s.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&Fr(e,n,i)}))})),i}const Vr=Lr;function Gr(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let s=e.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});const o=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?t=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let o=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!o&&n.length&&t.includes("back")&&(o=n[n.length-1]),o&&(e.video.deviceId=s.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=r(e.video),Vr("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return Vr("chrome: "+JSON.stringify(e)),i(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(s(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(s(e))))))}}}function Hr(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Wr(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else xr(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function zr(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function qr(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(s(i(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(s(i(t)))},n])})).then(n,r)}}function Kr(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Br(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),xr(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Br(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Yr(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function Jr(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Yr(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function s(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=s(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>s(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Xr(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function Zr(e,t){xr(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var Qr=Object.freeze({__proto__:null,fixNegotiationNeeded:Zr,shimAddTrackRemoveTrack:Jr,shimAddTrackRemoveTrackWithNative:Yr,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,s=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:s||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:zr,shimGetStats:qr,shimGetUserMedia:Gr,shimMediaStream:Hr,shimOnTrack:Wr,shimPeerConnection:Xr,shimSenderReceiverGetStats:Kr});function $r(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){Mr("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function ei(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ti(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,s]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,s)}}function ni(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ri(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),xr(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ii(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){Mr("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function si(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function oi(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function ai(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function ci(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function li(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var di=Object.freeze({__proto__:null,shimAddTransceiver:oi,shimCreateAnswer:li,shimCreateOffer:ci,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:ai,shimGetUserMedia:$r,shimOnTrack:ei,shimPeerConnection:ti,shimRTCDataChannel:si,shimReceiverGetStats:ri,shimRemoveStream:ii,shimSenderGetStats:ni});function ui(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function hi(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function pi(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}function fi(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(mi(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function mi(e){return e&&void 0!==e.video?Object.assign({},e,{video:Ur(e.video)}):e}function gi(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(Mr("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function _i(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function vi(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function yi(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Ei=Object.freeze({__proto__:null,shimAudioContext:yi,shimCallbacksAPI:pi,shimConstraints:mi,shimCreateOfferLegacy:vi,shimGetUserMedia:fi,shimLocalStreamsAPI:ui,shimRTCIceServerUrls:gi,shimRemoteStreamsAPI:hi,shimTrackEventTransceiver:_i}),bi={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let s=3;s<r.length;s++){const i=r[s],o=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(o){const r=t.parseRtpMap(o),s=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(r.parameters=s.length?t.parseFmtp(s[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{i.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),s=-1!==r.fecMechanisms.indexOf("ULPFEC"),o=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=o.length>0&&o[0].ssrc;let c;const l=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));l.length>0&&l[0].length>1&&l[0][0]===a&&(c=l[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:s?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let d=t.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substring(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=d}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const s=t.matchPrefix(e,"a=rtcp-mux");return n.mux=s.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const s=t.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const o=t.matchPrefix(e,"a=sctpmap:");if(o.length>0){const e=o[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const s=void 0!==n?n:2;return i=e||t.generateSessionId(),"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+s+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t}(bi);var Ti=bi.exports,Si=r(Ti),wi=e({__proto__:null,default:Si},[Ti]);function Ci(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=Si.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,xr(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function Ri(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||xr(e,"icecandidate",(e=>{if(e.candidate){const t=Si.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function Ii(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=Si.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Si.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},s=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=Si.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=i(e),n=s(arguments[0],e);let o;o=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const a={};Object.defineProperty(a,"maxMessageSize",{get:()=>o}),this._sctp=a}return o.apply(this,arguments)}}function Ni(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},xr(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Oi(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function Ai(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function ki(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function xi(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}return e.sdp||"offer"!==e.type&&"answer"!==e.type?n.apply(this,[e]):("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}var Pi=Object.freeze({__proto__:null,removeExtmapAllowMixed:Ai,shimAddIceCandidateNullOrEmpty:ki,shimConnectionState:Oi,shimMaxMessageSize:Ii,shimParameterlessSetLocalDescription:xi,shimRTCIceCandidate:Ci,shimRTCIceCandidateRelayProtocol:Ri,shimSendThrowTypeError:Ni});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=Lr,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=kr(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=kr(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=kr(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:Pi,extractVersion:kr,disableLog:Pr,disableWarnings:Dr,sdp:wi};switch(r.browser){case"chrome":if(!Qr||!Xr||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Qr,ki(e,r),xi(e),Gr(e,r),Hr(e),Xr(e,r),Wr(e),Jr(e,r),zr(e),qr(e),Kr(e),Zr(e,r),Ci(e),Ri(e),Oi(e),Ii(e,r),Ni(e),Ai(e,r);break;case"firefox":if(!di||!ti||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=di,ki(e,r),xi(e),$r(e,r),ti(e,r),ei(e),ii(e),ni(e),ri(e),si(e),oi(e),ai(e),ci(e),li(e),Ci(e),Oi(e),Ii(e,r),Ni(e);break;case"safari":if(!Ei||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Ei,ki(e,r),xi(e),gi(e),vi(e),pi(e),ui(e),hi(e),_i(e),fi(e),yi(e),Ci(e),Ri(e),Ii(e,r),Ni(e),Ai(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var Di={exports:{}},Li=An,Mi=k,ji=Qt.f;Li({target:"Object",stat:!0,forced:Object.defineProperty!==ji,sham:!Mi},{defineProperty:ji});var Ui=re.Object,Fi=Di.exports=function(e,t,n){return Ui.defineProperty(e,t,n)};Ui.defineProperty.sham&&(Fi.sham=!0);var Bi=r(Di.exports),Vi=T,Gi=Array.isArray||function(e){return"Array"==Vi(e)},Hi=TypeError,Wi=St,zi=Qt,qi=V,Ki=function(e,t,n){var r=Wi(t);r in e?zi.f(e,r,qi(0,n)):e[r]=n},Yi=O,Ji=ze,Xi=d(Function.toString);Yi(Ji.inspectSource)||(Ji.inspectSource=function(e){return Xi(e)});var Zi=Ji.inspectSource,Qi=d,$i=i,es=O,ts=ur,ns=Zi,rs=function(){},is=[],ss=ce("Reflect","construct"),os=/^\s*(?:class|function)\b/,as=Qi(os.exec),cs=!os.exec(rs),ls=function(e){if(!es(e))return!1;try{return ss(rs,is,e),!0}catch(e){return!1}},ds=function(e){if(!es(e))return!1;switch(ts(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return cs||!!as(os,ns(e))}catch(e){return!0}};ds.sham=!0;var us=!ss||$i((function(){var e;return ls(ls.call)||!ls(Object)||!ls((function(){e=!0}))||e}))?ds:ls,hs=Gi,ps=us,fs=ne,ms=pt("species"),gs=Array,_s=function(e){var t;return hs(e)&&(t=e.constructor,(ps(t)&&(t===gs||hs(t.prototype))||fs(t)&&null===(t=t[ms]))&&(t=void 0)),void 0===t?gs:t},vs=function(e,t){return new(_s(e))(0===t?0:t)},ys=i,Es=ge,bs=pt("species"),Ts=An,Ss=i,ws=Gi,Cs=ne,Rs=Xe,Is=Gn,Ns=function(e){if(e>9007199254740991)throw Hi("Maximum allowed index exceeded");return e},Os=Ki,As=vs,ks=function(e){return Es>=51||!ys((function(){var t=[];return(t.constructor={})[bs]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},xs=ge,Ps=pt("isConcatSpreadable"),Ds=xs>=51||!Ss((function(){var e=[];return e[Ps]=!1,e.concat()[0]!==e})),Ls=function(e){if(!Cs(e))return!1;var t=e[Ps];return void 0!==t?!!t:ws(e)};Ts({target:"Array",proto:!0,arity:1,forced:!Ds||!ks("concat")},{concat:function(e){var t,n,r,i,s,o=Rs(this),a=As(o,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(Ls(s=-1===t?o:arguments[t]))for(i=Is(s),Ns(c+i),n=0;n<i;n++,c++)n in s&&Os(a,c,s[n]);else Ns(c+1),Os(a,c++,s);return a.length=c,a}});var Ms={},js={},Us=$e,Fs=$,Bs=Kn.indexOf,Vs=js,Gs=d([].push),Hs=function(e,t){var n,r=Fs(e),i=0,s=[];for(n in r)!Us(Vs,n)&&Us(r,n)&&Gs(s,n);for(;t.length>i;)Us(r,n=t[i++])&&(~Bs(s,n)||Gs(s,n));return s},Ws=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],zs=Hs,qs=Ws,Ks=Object.keys||function(e){return zs(e,qs)},Ys=k,Js=$t,Xs=Qt,Zs=rn,Qs=$,$s=Ks;Ms.f=Ys&&!Js?Object.defineProperties:function(e,t){Zs(e);for(var n,r=Qs(t),i=$s(t),s=i.length,o=0;s>o;)Xs.f(e,n=i[o++],r[n]);return e};var eo,to=ce("document","documentElement"),no=it,ro=Ke("keys"),io=function(e){return ro[e]||(ro[e]=no(e))},so=rn,oo=Ms,ao=Ws,co=js,lo=to,uo=It,ho="prototype",po="script",fo=io("IE_PROTO"),mo=function(){},go=function(e){return"<"+po+">"+e+"</"+po+">"},_o=function(e){e.write(go("")),e.close();var t=e.parentWindow.Object;return e=null,t},vo=function(){try{eo=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;vo="undefined"!=typeof document?document.domain&&eo?_o(eo):(t=uo("iframe"),n="java"+po+":",t.style.display="none",lo.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(go("document.F=Object")),e.close(),e.F):_o(eo);for(var r=ao.length;r--;)delete vo[ho][ao[r]];return vo()};co[fo]=!0;var yo=Object.create||function(e,t){var n;return null!==e?(mo[ho]=so(e),n=new mo,mo[ho]=null,n[fo]=e):n=vo(),void 0===t?n:oo.f(n,t)},Eo={},bo=Hs,To=Ws.concat("length","prototype");Eo.f=Object.getOwnPropertyNames||function(e){return bo(e,To)};var So={},wo=Un,Co=Gn,Ro=Ki,Io=Array,No=Math.max,Oo=function(e,t,n){for(var r=Co(e),i=wo(t,r),s=wo(void 0===n?r:n,r),o=Io(No(s-i,0)),a=0;i<s;i++,a++)Ro(o,a,e[i]);return o.length=a,o},Ao=T,ko=$,xo=Eo.f,Po=Oo,Do="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];So.f=function(e){return Do&&"Window"==Ao(e)?function(e){try{return xo(e)}catch(e){return Po(Do)}}(e):xo(ko(e))};var Lo={};Lo.f=Object.getOwnPropertySymbols;var Mo=vn,jo=function(e,t,n,r){return r&&r.enumerable?e[t]=n:Mo(e,t,n),e},Uo=Qt,Fo=function(e,t,n){return Uo.f(e,t,n)},Bo={},Vo=pt;Bo.f=Vo;var Go,Ho,Wo,zo=re,qo=$e,Ko=Bo,Yo=Qt.f,Jo=function(e){var t=zo.Symbol||(zo.Symbol={});qo(t,e)||Yo(t,e,{value:Ko.f(e)})},Xo=D,Zo=ce,Qo=pt,$o=jo,ea=function(){var e=Zo("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=Qo("toPrimitive");t&&!t[r]&&$o(t,r,(function(e){return Xo(n,this)}),{arity:1})},ta=ur,na=ir?{}.toString:function(){return"[object "+ta(this)+"]"},ra=ir,ia=Qt.f,sa=vn,oa=$e,aa=na,ca=pt("toStringTag"),la=function(e,t,n,r){if(e){var i=n?e:e.prototype;oa(i,ca)||ia(i,ca,{configurable:!0,value:t}),r&&!ra&&sa(i,"toString",aa)}},da=O,ua=p.WeakMap,ha=da(ua)&&/native code/.test(String(ua)),pa=p,fa=ne,ma=vn,ga=$e,_a=ze,va=io,ya=js,Ea="Object already initialized",ba=pa.TypeError,Ta=pa.WeakMap;if(ha||_a.state){var Sa=_a.state||(_a.state=new Ta);Sa.get=Sa.get,Sa.has=Sa.has,Sa.set=Sa.set,Go=function(e,t){if(Sa.has(e))throw ba(Ea);return t.facade=e,Sa.set(e,t),t},Ho=function(e){return Sa.get(e)||{}},Wo=function(e){return Sa.has(e)}}else{var wa=va("state");ya[wa]=!0,Go=function(e,t){if(ga(e,wa))throw ba(Ea);return t.facade=e,ma(e,wa,t),t},Ho=function(e){return ga(e,wa)?e[wa]:{}},Wo=function(e){return ga(e,wa)}}var Ca={set:Go,get:Ho,has:Wo,enforce:function(e){return Wo(e)?Ho(e):Go(e,{})},getterFor:function(e){return function(t){var n;if(!fa(t)||(n=Ho(t)).type!==e)throw ba("Incompatible receiver, "+e+" required");return n}}},Ra=Zt,Ia=q,Na=Xe,Oa=Gn,Aa=vs,ka=d([].push),xa=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,s=6==e,o=7==e,a=5==e||s;return function(c,l,d,u){for(var h,p,f=Na(c),m=Ia(f),g=Ra(l,d),_=Oa(m),v=0,y=u||Aa,E=t?y(c,_):n||o?y(c,0):void 0;_>v;v++)if((a||v in m)&&(p=g(h=m[v],v,f),e))if(t)E[v]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return v;case 2:ka(E,h)}else switch(e){case 4:return!1;case 7:ka(E,h)}return s?-1:r||i?i:E}},Pa={forEach:xa(0),map:xa(1),filter:xa(2),some:xa(3),every:xa(4),find:xa(5),findIndex:xa(6),filterReject:xa(7)},Da=An,La=p,Ma=D,ja=d,Ua=k,Fa=Ee,Ba=i,Va=$e,Ga=u,Ha=rn,Wa=$,za=St,qa=fr,Ka=V,Ya=yo,Ja=Ks,Xa=Eo,Za=So,Qa=Lo,$a=A,ec=Qt,tc=Ms,nc=L,rc=jo,ic=Fo,sc=Ke,oc=js,ac=it,cc=pt,lc=Bo,dc=Jo,uc=ea,hc=la,pc=Ca,fc=Pa.forEach,mc=io("hidden"),gc="Symbol",_c="prototype",vc=pc.set,yc=pc.getterFor(gc),Ec=Object[_c],bc=La.Symbol,Tc=bc&&bc[_c],Sc=La.TypeError,wc=La.QObject,Cc=$a.f,Rc=ec.f,Ic=Za.f,Nc=nc.f,Oc=ja([].push),Ac=sc("symbols"),kc=sc("op-symbols"),xc=sc("wks"),Pc=!wc||!wc[_c]||!wc[_c].findChild,Dc=Ua&&Ba((function(){return 7!=Ya(Rc({},"a",{get:function(){return Rc(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Cc(Ec,t);r&&delete Ec[t],Rc(e,t,n),r&&e!==Ec&&Rc(Ec,t,r)}:Rc,Lc=function(e,t){var n=Ac[e]=Ya(Tc);return vc(n,{type:gc,tag:e,description:t}),Ua||(n.description=t),n},Mc=function(e,t,n){e===Ec&&Mc(kc,t,n),Ha(e);var r=za(t);return Ha(n),Va(Ac,r)?(n.enumerable?(Va(e,mc)&&e[mc][r]&&(e[mc][r]=!1),n=Ya(n,{enumerable:Ka(0,!1)})):(Va(e,mc)||Rc(e,mc,Ka(1,{})),e[mc][r]=!0),Dc(e,r,n)):Rc(e,r,n)},jc=function(e,t){Ha(e);var n=Wa(t),r=Ja(n).concat(Vc(n));return fc(r,(function(t){Ua&&!Ma(Uc,n,t)||Mc(e,t,n[t])})),e},Uc=function(e){var t=za(e),n=Ma(Nc,this,t);return!(this===Ec&&Va(Ac,t)&&!Va(kc,t))&&(!(n||!Va(this,t)||!Va(Ac,t)||Va(this,mc)&&this[mc][t])||n)},Fc=function(e,t){var n=Wa(e),r=za(t);if(n!==Ec||!Va(Ac,r)||Va(kc,r)){var i=Cc(n,r);return!i||!Va(Ac,r)||Va(n,mc)&&n[mc][r]||(i.enumerable=!0),i}},Bc=function(e){var t=Ic(Wa(e)),n=[];return fc(t,(function(e){Va(Ac,e)||Va(oc,e)||Oc(n,e)})),n},Vc=function(e){var t=e===Ec,n=Ic(t?kc:Wa(e)),r=[];return fc(n,(function(e){!Va(Ac,e)||t&&!Va(Ec,e)||Oc(r,Ac[e])})),r};Fa||(bc=function(){if(Ga(Tc,this))throw Sc("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?qa(arguments[0]):void 0,t=ac(e),n=function(e){this===Ec&&Ma(n,kc,e),Va(this,mc)&&Va(this[mc],t)&&(this[mc][t]=!1),Dc(this,t,Ka(1,e))};return Ua&&Pc&&Dc(Ec,t,{configurable:!0,set:n}),Lc(t,e)},rc(Tc=bc[_c],"toString",(function(){return yc(this).tag})),rc(bc,"withoutSetter",(function(e){return Lc(ac(e),e)})),nc.f=Uc,ec.f=Mc,tc.f=jc,$a.f=Fc,Xa.f=Za.f=Bc,Qa.f=Vc,lc.f=function(e){return Lc(cc(e),e)},Ua&&ic(Tc,"description",{configurable:!0,get:function(){return yc(this).description}})),Da({global:!0,constructor:!0,wrap:!0,forced:!Fa,sham:!Fa},{Symbol:bc}),fc(Ja(xc),(function(e){dc(e)})),Da({target:gc,stat:!0,forced:!Fa},{useSetter:function(){Pc=!0},useSimple:function(){Pc=!1}}),Da({target:"Object",stat:!0,forced:!Fa,sham:!Ua},{create:function(e,t){return void 0===t?Ya(e):jc(Ya(e),t)},defineProperty:Mc,defineProperties:jc,getOwnPropertyDescriptor:Fc}),Da({target:"Object",stat:!0,forced:!Fa},{getOwnPropertyNames:Bc}),uc(),hc(bc,gc),oc[mc]=!0;var Gc=Ee&&!!Symbol.for&&!!Symbol.keyFor,Hc=An,Wc=ce,zc=$e,qc=fr,Kc=Ke,Yc=Gc,Jc=Kc("string-to-symbol-registry"),Xc=Kc("symbol-to-string-registry");Hc({target:"Symbol",stat:!0,forced:!Yc},{for:function(e){var t=qc(e);if(zc(Jc,t))return Jc[t];var n=Wc("Symbol")(t);return Jc[t]=n,Xc[n]=t,n}});var Zc=An,Qc=$e,$c=Re,el=Ne,tl=Gc,nl=Ke("symbol-to-string-registry");Zc({target:"Symbol",stat:!0,forced:!tl},{keyFor:function(e){if(!$c(e))throw TypeError(el(e)+" is not a symbol");if(Qc(nl,e))return nl[e]}});var rl=d([].slice),il=Gi,sl=O,ol=T,al=fr,cl=d([].push),ll=An,dl=ce,ul=v,hl=D,pl=d,fl=i,ml=O,gl=Re,_l=rl,vl=function(e){if(sl(e))return e;if(il(e)){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];"string"==typeof i?cl(n,i):"number"!=typeof i&&"Number"!=ol(i)&&"String"!=ol(i)||cl(n,al(i))}var s=n.length,o=!0;return function(e,t){if(o)return o=!1,t;if(il(this))return t;for(var r=0;r<s;r++)if(n[r]===e)return t}}},yl=Ee,El=String,bl=dl("JSON","stringify"),Tl=pl(/./.exec),Sl=pl("".charAt),wl=pl("".charCodeAt),Cl=pl("".replace),Rl=pl(1..toString),Il=/[\uD800-\uDFFF]/g,Nl=/^[\uD800-\uDBFF]$/,Ol=/^[\uDC00-\uDFFF]$/,Al=!yl||fl((function(){var e=dl("Symbol")();return"[null]"!=bl([e])||"{}"!=bl({a:e})||"{}"!=bl(Object(e))})),kl=fl((function(){return'"\\udf06\\ud834"'!==bl("\udf06\ud834")||'"\\udead"'!==bl("\udead")})),xl=function(e,t){var n=_l(arguments),r=vl(t);if(ml(r)||void 0!==e&&!gl(e))return n[1]=function(e,t){if(ml(r)&&(t=hl(r,this,El(e),t)),!gl(t))return t},ul(bl,null,n)},Pl=function(e,t,n){var r=Sl(n,t-1),i=Sl(n,t+1);return Tl(Nl,e)&&!Tl(Ol,i)||Tl(Ol,e)&&!Tl(Nl,r)?"\\u"+Rl(wl(e,0),16):e};bl&&ll({target:"JSON",stat:!0,arity:3,forced:Al||kl},{stringify:function(e,t,n){var r=_l(arguments),i=ul(Al?xl:bl,null,r);return kl&&"string"==typeof i?Cl(i,Il,Pl):i}});var Dl=Lo,Ll=Xe;An({target:"Object",stat:!0,forced:!Ee||i((function(){Dl.f(1)}))},{getOwnPropertySymbols:function(e){var t=Dl.f;return t?t(Ll(e)):[]}}),Jo("asyncIterator"),Jo("hasInstance"),Jo("isConcatSpreadable"),Jo("iterator"),Jo("match"),Jo("matchAll"),Jo("replace"),Jo("search"),Jo("species"),Jo("split");var Ml=ea;Jo("toPrimitive"),Ml();var jl=ce,Ul=la;Jo("toStringTag"),Ul(jl("Symbol"),"Symbol"),Jo("unscopables"),la(p.JSON,"JSON",!0);var Fl,Bl,Vl,Gl=re.Symbol,Hl={},Wl=k,zl=$e,ql=Function.prototype,Kl=Wl&&Object.getOwnPropertyDescriptor,Yl=zl(ql,"name"),Jl={EXISTS:Yl,PROPER:Yl&&"something"===function(){}.name,CONFIGURABLE:Yl&&(!Wl||Wl&&Kl(ql,"name").configurable)},Xl=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Zl=$e,Ql=O,$l=Xe,ed=Xl,td=io("IE_PROTO"),nd=Object,rd=nd.prototype,id=ed?nd.getPrototypeOf:function(e){var t=$l(e);if(Zl(t,td))return t[td];var n=t.constructor;return Ql(n)&&t instanceof n?n.prototype:t instanceof nd?rd:null},sd=i,od=O,ad=ne,cd=yo,ld=id,dd=jo,ud=pt("iterator"),hd=!1;[].keys&&("next"in(Vl=[].keys())?(Bl=ld(ld(Vl)))!==Object.prototype&&(Fl=Bl):hd=!0);var pd=!ad(Fl)||sd((function(){var e={};return Fl[ud].call(e)!==e}));od((Fl=pd?{}:cd(Fl))[ud])||dd(Fl,ud,(function(){return this}));var fd={IteratorPrototype:Fl,BUGGY_SAFARI_ITERATORS:hd},md=fd.IteratorPrototype,gd=yo,_d=V,vd=la,yd=Hl,Ed=function(){return this},bd=function(e,t,n,r){var i=t+" Iterator";return e.prototype=gd(md,{next:_d(+!r,n)}),vd(e,i,!1,!0),yd[i]=Ed,e},Td=d,Sd=xe,wd=O,Cd=String,Rd=TypeError,Id=function(e,t,n){try{return Td(Sd(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}},Nd=rn,Od=function(e){if("object"==typeof e||wd(e))return e;throw Rd("Can't set "+Cd(e)+" as a prototype")},Ad=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Id(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Nd(n),Od(r),t?e(n,r):n.__proto__=r,n}}():void 0),kd=An,xd=D,Pd=bd,Dd=id,Ld=la,Md=jo,jd=Hl,Ud=fd,Fd=Jl.PROPER,Bd=Ud.BUGGY_SAFARI_ITERATORS,Vd=pt("iterator"),Gd="keys",Hd="values",Wd="entries",zd=function(){return this},qd=function(e,t,n,r,i,s,o){Pd(n,t,r);var a,c,l,d=function(e){if(e===i&&m)return m;if(!Bd&&e in p)return p[e];switch(e){case Gd:case Hd:case Wd:return function(){return new n(this,e)}}return function(){return new n(this)}},u=t+" Iterator",h=!1,p=e.prototype,f=p[Vd]||p["@@iterator"]||i&&p[i],m=!Bd&&f||d(i),g="Array"==t&&p.entries||f;if(g&&(a=Dd(g.call(new e)))!==Object.prototype&&a.next&&(Ld(a,u,!0,!0),jd[u]=zd),Fd&&i==Hd&&f&&f.name!==Hd&&(h=!0,m=function(){return xd(f,this)}),i)if(c={values:d(Hd),keys:s?m:d(Gd),entries:d(Wd)},o)for(l in c)(Bd||h||!(l in p))&&Md(p,l,c[l]);else kd({target:t,proto:!0,forced:Bd||h},c);return o&&p[Vd]!==m&&Md(p,Vd,m,{name:i}),jd[t]=m,c},Kd=function(e,t){return{value:e,done:t}},Yd=$,Jd=Hl,Xd=Ca;Qt.f;var Zd=qd,Qd=Kd,$d="Array Iterator",eu=Xd.set,tu=Xd.getterFor($d);Zd(Array,"Array",(function(e,t){eu(this,{type:$d,target:Yd(e),index:0,kind:t})}),(function(){var e=tu(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,Qd(void 0,!0)):Qd("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),Jd.Arguments=Jd.Array;var nu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ru=p,iu=ur,su=vn,ou=Hl,au=pt("toStringTag");for(var cu in nu){var lu=ru[cu],du=lu&&lu.prototype;du&&iu(du)!==au&&su(du,au,cu),ou[cu]=ou.Array}var uu=Gl,hu=pt,pu=Qt.f,fu=hu("metadata"),mu=Function.prototype;void 0===mu[fu]&&pu(mu,fu,{value:null}),Jo("dispose"),Jo("metadata");var gu=uu;Jo("asyncDispose");var _u=d,vu=ce("Symbol"),yu=vu.keyFor,Eu=_u(vu.prototype.valueOf),bu=vu.isRegisteredSymbol||function(e){try{return void 0!==yu(Eu(e))}catch(e){return!1}};An({target:"Symbol",stat:!0},{isRegisteredSymbol:bu});for(var Tu=Ke,Su=ce,wu=d,Cu=Re,Ru=pt,Iu=Su("Symbol"),Nu=Iu.isWellKnownSymbol,Ou=Su("Object","getOwnPropertyNames"),Au=wu(Iu.prototype.valueOf),ku=Tu("wks"),xu=0,Pu=Ou(Iu),Du=Pu.length;xu<Du;xu++)try{var Lu=Pu[xu];Cu(Iu[Lu])&&Ru(Lu)}catch(e){}var Mu=function(e){if(Nu&&Nu(e))return!0;try{for(var t=Au(e),n=0,r=Ou(ku),i=r.length;n<i;n++)if(ku[r[n]]==t)return!0}catch(e){}return!1};An({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Mu}),Jo("matcher"),Jo("observable"),An({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:bu}),An({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Mu}),Jo("metadataKey"),Jo("patternMatch"),Jo("replaceAll");var ju=r(gu),Uu=d,Fu=Dn,Bu=fr,Vu=X,Gu=Uu("".charAt),Hu=Uu("".charCodeAt),Wu=Uu("".slice),zu=function(e){return function(t,n){var r,i,s=Bu(Vu(t)),o=Fu(n),a=s.length;return o<0||o>=a?e?"":void 0:(r=Hu(s,o))<55296||r>56319||o+1===a||(i=Hu(s,o+1))<56320||i>57343?e?Gu(s,o):r:e?Wu(s,o,o+2):i-56320+(r-55296<<10)+65536}},qu={codeAt:zu(!1),charAt:zu(!0)},Ku=qu.charAt,Yu=fr,Ju=Ca,Xu=qd,Zu=Kd,Qu="String Iterator",$u=Ju.set,eh=Ju.getterFor(Qu);Xu(String,"String",(function(e){$u(this,{type:Qu,string:Yu(e),index:0})}),(function(){var e,t=eh(this),n=t.string,r=t.index;return r>=n.length?Zu(void 0,!0):(e=Ku(n,r),t.index+=e.length,Zu(e,!1))}));var th=r(Bo.f("iterator"));function nh(e){return nh="function"==typeof ju&&"symbol"==typeof th?function(e){return typeof e}:function(e){return e&&"function"==typeof ju&&e.constructor===ju&&e!==ju.prototype?"symbol":typeof e},nh(e)}var rh=r(Bo.f("toPrimitive"));function ih(e){var t=function(e,t){if("object"!==nh(e)||null===e)return e;var n=e[rh];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nh(t)?t:String(t)}function sh(e,t,n){return(t=ih(t))in e?Bi(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oh=Xn("Array").keys,ah=ur,ch=$e,lh=u,dh=oh,uh=Array.prototype,hh={DOMTokenList:!0,NodeList:!0},ph=r((function(e){var t=e.keys;return e===uh||lh(uh,e)&&t===uh.keys||ch(hh,ah(e))?dh:t})),fh=Ne,mh=TypeError,gh=Oo,_h=Math.floor,vh=function(e,t){var n=e.length,r=_h(n/2);return n<8?yh(e,t):Eh(e,vh(gh(e,0,r),t),vh(gh(e,r),t),t)},yh=function(e,t){for(var n,r,i=e.length,s=1;s<i;){for(r=s,n=e[s];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==s++&&(e[r]=n)}return e},Eh=function(e,t,n,r){for(var i=t.length,s=n.length,o=0,a=0;o<i||a<s;)e[o+a]=o<i&&a<s?r(t[o],n[a])<=0?t[o++]:n[a++]:o<i?t[o++]:n[a++];return e},bh=vh,Th=i,Sh=function(e,t){var n=[][e];return!!n&&Th((function(){n.call(null,t||function(){return 1},1)}))},wh=le.match(/firefox\/(\d+)/i),Ch=!!wh&&+wh[1],Rh=/MSIE|Trident/.test(le),Ih=le.match(/AppleWebKit\/(\d+)\./),Nh=!!Ih&&+Ih[1],Oh=An,Ah=d,kh=xe,xh=Xe,Ph=Gn,Dh=function(e,t){if(!delete e[t])throw mh("Cannot delete property "+fh(t)+" of "+fh(e))},Lh=fr,Mh=i,jh=bh,Uh=Sh,Fh=Ch,Bh=Rh,Vh=ge,Gh=Nh,Hh=[],Wh=Ah(Hh.sort),zh=Ah(Hh.push),qh=Mh((function(){Hh.sort(void 0)})),Kh=Mh((function(){Hh.sort(null)})),Yh=Uh("sort"),Jh=!Mh((function(){if(Vh)return Vh<70;if(!(Fh&&Fh>3)){if(Bh)return!0;if(Gh)return Gh<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Hh.push({k:t+r,v:n})}for(Hh.sort((function(e,t){return t.v-e.v})),r=0;r<Hh.length;r++)t=Hh[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));Oh({target:"Array",proto:!0,forced:qh||!Kh||!Yh||!Jh},{sort:function(e){void 0!==e&&kh(e);var t=xh(this);if(Jh)return void 0===e?Wh(t):Wh(t,e);var n,r,i=[],s=Ph(t);for(r=0;r<s;r++)r in t&&zh(i,t[r]);for(jh(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Lh(t)>Lh(n)?1:-1}}(e)),n=Ph(i),r=0;r<n;)t[r]=i[r++];for(;r<s;)Dh(t,r++);return t}});var Xh=Xn("Array").sort,Zh=u,Qh=Xh,$h=Array.prototype,ep=r((function(e){var t=e.sort;return e===$h||Zh($h,e)&&t===$h.sort?Qh:t})),tp=ce,np=Eo,rp=Lo,ip=rn,sp=d([].concat),op=tp("Reflect","ownKeys")||function(e){var t=np.f(ip(e)),n=rp.f;return n?sp(t,n(e)):t},ap=$e,cp=op,lp=A,dp=Qt,up=ne,hp=vn,pp=Error,fp=d("".replace),mp=String(pp("zxcasd").stack),gp=/\n\s*at [^:]*:[^\n]*/,_p=gp.test(mp),vp=V,yp=!i((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",vp(1,7)),7!==e.stack)})),Ep=vn,bp=function(e,t){if(_p&&"string"==typeof e&&!pp.prepareStackTrace)for(;t--;)e=fp(e,gp,"");return e},Tp=yp,Sp=Error.captureStackTrace,wp=Hl,Cp=pt("iterator"),Rp=Array.prototype,Ip=function(e){return void 0!==e&&(wp.Array===e||Rp[Cp]===e)},Np=ur,Op=Le,Ap=K,kp=Hl,xp=pt("iterator"),Pp=function(e){if(!Ap(e))return Op(e,xp)||Op(e,"@@iterator")||kp[Np(e)]},Dp=D,Lp=xe,Mp=rn,jp=Ne,Up=Pp,Fp=TypeError,Bp=function(e,t){var n=arguments.length<2?Up(e):t;if(Lp(n))return Mp(Dp(n,e));throw Fp(jp(e)+" is not iterable")},Vp=D,Gp=rn,Hp=Le,Wp=function(e,t,n){var r,i;Gp(e);try{if(!(r=Hp(e,"return"))){if("throw"===t)throw n;return n}r=Vp(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return Gp(r),n},zp=Zt,qp=D,Kp=rn,Yp=Ne,Jp=Ip,Xp=Gn,Zp=u,Qp=Bp,$p=Pp,ef=Wp,tf=TypeError,nf=function(e,t){this.stopped=e,this.result=t},rf=nf.prototype,sf=function(e,t,n){var r,i,s,o,a,c,l,d=n&&n.that,u=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=zp(t,d),g=function(e){return r&&ef(r,"normal",e),new nf(!0,e)},_=function(e){return u?(Kp(e),f?m(e[0],e[1],g):m(e[0],e[1])):f?m(e,g):m(e)};if(h)r=e.iterator;else if(p)r=e;else{if(!(i=$p(e)))throw tf(Yp(e)+" is not iterable");if(Jp(i)){for(s=0,o=Xp(e);o>s;s++)if((a=_(e[s]))&&Zp(rf,a))return a;return new nf(!1)}r=Qp(e,i)}for(c=h?e.next:r.next;!(l=qp(c,r)).done;){try{a=_(l.value)}catch(e){ef(r,"throw",e)}if("object"==typeof a&&a&&Zp(rf,a))return a}return new nf(!1)},of=fr,af=An,cf=u,lf=id,df=Ad,uf=function(e,t,n){for(var r=cp(t),i=dp.f,s=lp.f,o=0;o<r.length;o++){var a=r[o];ap(e,a)||n&&ap(n,a)||i(e,a,s(t,a))}},hf=yo,pf=vn,ff=V,mf=function(e,t){up(t)&&"cause"in t&&hp(e,"cause",t.cause)},gf=function(e,t,n,r){Tp&&(Sp?Sp(e,t):Ep(e,"stack",bp(n,r)))},_f=sf,vf=function(e,t){return void 0===e?arguments.length<2?"":t:of(e)},yf=pt("toStringTag"),Ef=Error,bf=[].push,Tf=function(e,t){var n,r=cf(Sf,this);df?n=df(Ef(),r?lf(this):Sf):(n=r?this:hf(Sf),pf(n,yf,"Error")),void 0!==t&&pf(n,"message",vf(t)),gf(n,Tf,n.stack,1),arguments.length>2&&mf(n,arguments[2]);var i=[];return _f(e,bf,{that:i}),pf(n,"errors",i),n};df?df(Tf,Ef):uf(Tf,Ef,{name:!0});var Sf=Tf.prototype=hf(Ef.prototype,{constructor:ff(1,Tf),message:ff(1,""),name:ff(1,"AggregateError")});af({global:!0,constructor:!0,arity:2},{AggregateError:Tf});var wf,Cf,Rf,If,Nf="undefined"!=typeof process&&"process"==T(process),Of=ce,Af=Fo,kf=k,xf=pt("species"),Pf=u,Df=TypeError,Lf=function(e,t){if(Pf(t,e))return e;throw Df("Incorrect invocation")},Mf=us,jf=Ne,Uf=TypeError,Ff=rn,Bf=function(e){if(Mf(e))return e;throw Uf(jf(e)+" is not a constructor")},Vf=K,Gf=pt("species"),Hf=function(e,t){var n,r=Ff(e).constructor;return void 0===r||Vf(n=Ff(r)[Gf])?t:Bf(n)},Wf=TypeError,zf=function(e,t){if(e<t)throw Wf("Not enough arguments");return e},qf=/(?:ipad|iphone|ipod).*applewebkit/i.test(le),Kf=p,Yf=v,Jf=Zt,Xf=O,Zf=$e,Qf=i,$f=to,em=rl,tm=It,nm=zf,rm=qf,im=Nf,sm=Kf.setImmediate,om=Kf.clearImmediate,am=Kf.process,cm=Kf.Dispatch,lm=Kf.Function,dm=Kf.MessageChannel,um=Kf.String,hm=0,pm={},fm="onreadystatechange";Qf((function(){wf=Kf.location}));var mm=function(e){if(Zf(pm,e)){var t=pm[e];delete pm[e],t()}},gm=function(e){return function(){mm(e)}},_m=function(e){mm(e.data)},vm=function(e){Kf.postMessage(um(e),wf.protocol+"//"+wf.host)};sm&&om||(sm=function(e){nm(arguments.length,1);var t=Xf(e)?e:lm(e),n=em(arguments,1);return pm[++hm]=function(){Yf(t,void 0,n)},Cf(hm),hm},om=function(e){delete pm[e]},im?Cf=function(e){am.nextTick(gm(e))}:cm&&cm.now?Cf=function(e){cm.now(gm(e))}:dm&&!rm?(If=(Rf=new dm).port2,Rf.port1.onmessage=_m,Cf=Jf(If.postMessage,If)):Kf.addEventListener&&Xf(Kf.postMessage)&&!Kf.importScripts&&wf&&"file:"!==wf.protocol&&!Qf(vm)?(Cf=vm,Kf.addEventListener("message",_m,!1)):Cf=fm in tm("script")?function(e){$f.appendChild(tm("script"))[fm]=function(){$f.removeChild(this),mm(e)}}:function(e){setTimeout(gm(e),0)});var ym={set:sm,clear:om},Em=function(){this.head=null,this.tail=null};Em.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var bm,Tm,Sm,wm,Cm,Rm=Em,Im=/ipad|iphone|ipod/i.test(le)&&"undefined"!=typeof Pebble,Nm=/web0s(?!.*chrome)/i.test(le),Om=p,Am=Zt,km=A.f,xm=ym.set,Pm=Rm,Dm=qf,Lm=Im,Mm=Nm,jm=Nf,Um=Om.MutationObserver||Om.WebKitMutationObserver,Fm=Om.document,Bm=Om.process,Vm=Om.Promise,Gm=km(Om,"queueMicrotask"),Hm=Gm&&Gm.value;if(!Hm){var Wm=new Pm,zm=function(){var e,t;for(jm&&(e=Bm.domain)&&e.exit();t=Wm.get();)try{t()}catch(e){throw Wm.head&&bm(),e}e&&e.enter()};Dm||jm||Mm||!Um||!Fm?!Lm&&Vm&&Vm.resolve?((wm=Vm.resolve(void 0)).constructor=Vm,Cm=Am(wm.then,wm),bm=function(){Cm(zm)}):jm?bm=function(){Bm.nextTick(zm)}:(xm=Am(xm,Om),bm=function(){xm(zm)}):(Tm=!0,Sm=Fm.createTextNode(""),new Um(zm).observe(Sm,{characterData:!0}),bm=function(){Sm.data=Tm=!Tm}),Hm=function(e){Wm.head||bm(),Wm.add(e)}}var qm=Hm,Km=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Ym=p.Promise,Jm="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Xm=!Jm&&!Nf&&"object"==typeof window&&"object"==typeof document,Zm=p,Qm=Ym,$m=O,eg=Kt,tg=Zi,ng=pt,rg=Xm,ig=Jm,sg=ge,og=Qm&&Qm.prototype,ag=ng("species"),cg=!1,lg=$m(Zm.PromiseRejectionEvent),dg=eg("Promise",(function(){var e=tg(Qm),t=e!==String(Qm);if(!t&&66===sg)return!0;if(!og.catch||!og.finally)return!0;if(!sg||sg<51||!/native code/.test(e)){var n=new Qm((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[ag]=r,!(cg=n.then((function(){}))instanceof r))return!0}return!t&&(rg||ig)&&!lg})),ug={CONSTRUCTOR:dg,REJECTION_EVENT:lg,SUBCLASSING:cg},hg={},pg=xe,fg=TypeError,mg=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw fg("Bad Promise constructor");t=e,n=r})),this.resolve=pg(t),this.reject=pg(n)};hg.f=function(e){return new mg(e)};var gg,_g,vg=An,yg=Nf,Eg=p,bg=D,Tg=jo,Sg=la,wg=function(e){var t=Of(e);kf&&t&&!t[xf]&&Af(t,xf,{configurable:!0,get:function(){return this}})},Cg=xe,Rg=O,Ig=ne,Ng=Lf,Og=Hf,Ag=ym.set,kg=qm,xg=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}},Pg=Km,Dg=Rm,Lg=Ca,Mg=Ym,jg=ug,Ug=hg,Fg="Promise",Bg=jg.CONSTRUCTOR,Vg=jg.REJECTION_EVENT,Gg=Lg.getterFor(Fg),Hg=Lg.set,Wg=Mg&&Mg.prototype,zg=Mg,qg=Wg,Kg=Eg.TypeError,Yg=Eg.document,Jg=Eg.process,Xg=Ug.f,Zg=Xg,Qg=!!(Yg&&Yg.createEvent&&Eg.dispatchEvent),$g="unhandledrejection",e_=function(e){var t;return!(!Ig(e)||!Rg(t=e.then))&&t},t_=function(e,t){var n,r,i,s=t.value,o=1==t.state,a=o?e.ok:e.fail,c=e.resolve,l=e.reject,d=e.domain;try{a?(o||(2===t.rejection&&o_(t),t.rejection=1),!0===a?n=s:(d&&d.enter(),n=a(s),d&&(d.exit(),i=!0)),n===e.promise?l(Kg("Promise-chain cycle")):(r=e_(n))?bg(r,n,c,l):c(n)):l(s)}catch(e){d&&!i&&d.exit(),l(e)}},n_=function(e,t){e.notified||(e.notified=!0,kg((function(){for(var n,r=e.reactions;n=r.get();)t_(n,e);e.notified=!1,t&&!e.rejection&&i_(e)})))},r_=function(e,t,n){var r,i;Qg?((r=Yg.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Eg.dispatchEvent(r)):r={promise:t,reason:n},!Vg&&(i=Eg["on"+e])?i(r):e===$g&&xg("Unhandled promise rejection",n)},i_=function(e){bg(Ag,Eg,(function(){var t,n=e.facade,r=e.value;if(s_(e)&&(t=Pg((function(){yg?Jg.emit("unhandledRejection",r,n):r_($g,n,r)})),e.rejection=yg||s_(e)?2:1,t.error))throw t.value}))},s_=function(e){return 1!==e.rejection&&!e.parent},o_=function(e){bg(Ag,Eg,(function(){var t=e.facade;yg?Jg.emit("rejectionHandled",t):r_("rejectionhandled",t,e.value)}))},a_=function(e,t,n){return function(r){e(t,r,n)}},c_=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,n_(e,!0))},l_=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Kg("Promise can't be resolved itself");var r=e_(t);r?kg((function(){var n={done:!1};try{bg(r,t,a_(l_,n,e),a_(c_,n,e))}catch(t){c_(n,t,e)}})):(e.value=t,e.state=1,n_(e,!1))}catch(t){c_({done:!1},t,e)}}};Bg&&(qg=(zg=function(e){Ng(this,qg),Cg(e),bg(gg,this);var t=Gg(this);try{e(a_(l_,t),a_(c_,t))}catch(e){c_(t,e)}}).prototype,(gg=function(e){Hg(this,{type:Fg,done:!1,notified:!1,parent:!1,reactions:new Dg,rejection:!1,state:0,value:void 0})}).prototype=Tg(qg,"then",(function(e,t){var n=Gg(this),r=Xg(Og(this,zg));return n.parent=!0,r.ok=!Rg(e)||e,r.fail=Rg(t)&&t,r.domain=yg?Jg.domain:void 0,0==n.state?n.reactions.add(r):kg((function(){t_(r,n)})),r.promise})),_g=function(){var e=new gg,t=Gg(e);this.promise=e,this.resolve=a_(l_,t),this.reject=a_(c_,t)},Ug.f=Xg=function(e){return e===zg||void 0===e?new _g(e):Zg(e)}),vg({global:!0,constructor:!0,wrap:!0,forced:Bg},{Promise:zg}),Sg(zg,Fg,!1,!0),wg(Fg);var d_=pt("iterator"),u_=!1;try{var h_=0,p_={next:function(){return{done:!!h_++}},return:function(){u_=!0}};p_[d_]=function(){return this},Array.from(p_,(function(){throw 2}))}catch(e){}var f_=Ym,m_=function(e,t){if(!t&&!u_)return!1;var n=!1;try{var r={};r[d_]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},g_=ug.CONSTRUCTOR||!m_((function(e){f_.all(e).then(void 0,(function(){}))})),__=D,v_=xe,y_=hg,E_=Km,b_=sf;An({target:"Promise",stat:!0,forced:g_},{all:function(e){var t=this,n=y_.f(t),r=n.resolve,i=n.reject,s=E_((function(){var n=v_(t.resolve),s=[],o=0,a=1;b_(e,(function(e){var c=o++,l=!1;a++,__(n,t,e).then((function(e){l||(l=!0,s[c]=e,--a||r(s))}),i)})),--a||r(s)}));return s.error&&i(s.value),n.promise}});var T_=An,S_=ug.CONSTRUCTOR;Ym&&Ym.prototype,T_({target:"Promise",proto:!0,forced:S_,real:!0},{catch:function(e){return this.then(void 0,e)}});var w_=D,C_=xe,R_=hg,I_=Km,N_=sf;An({target:"Promise",stat:!0,forced:g_},{race:function(e){var t=this,n=R_.f(t),r=n.reject,i=I_((function(){var i=C_(t.resolve);N_(e,(function(e){w_(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var O_=D,A_=hg;An({target:"Promise",stat:!0,forced:ug.CONSTRUCTOR},{reject:function(e){var t=A_.f(this);return O_(t.reject,void 0,e),t.promise}});var k_=rn,x_=ne,P_=hg,D_=function(e,t){if(k_(e),x_(t)&&t.constructor===e)return t;var n=P_.f(e);return(0,n.resolve)(t),n.promise},L_=An,M_=Ym,j_=ug.CONSTRUCTOR,U_=D_,F_=ce("Promise"),B_=!j_;L_({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return U_(B_&&this===F_?M_:this,e)}});var V_=D,G_=xe,H_=hg,W_=Km,z_=sf;An({target:"Promise",stat:!0,forced:g_},{allSettled:function(e){var t=this,n=H_.f(t),r=n.resolve,i=n.reject,s=W_((function(){var n=G_(t.resolve),i=[],s=0,o=1;z_(e,(function(e){var a=s++,c=!1;o++,V_(n,t,e).then((function(e){c||(c=!0,i[a]={status:"fulfilled",value:e},--o||r(i))}),(function(e){c||(c=!0,i[a]={status:"rejected",reason:e},--o||r(i))}))})),--o||r(i)}));return s.error&&i(s.value),n.promise}});var q_=D,K_=xe,Y_=ce,J_=hg,X_=Km,Z_=sf,Q_="No one promise resolved";An({target:"Promise",stat:!0,forced:g_},{any:function(e){var t=this,n=Y_("AggregateError"),r=J_.f(t),i=r.resolve,s=r.reject,o=X_((function(){var r=K_(t.resolve),o=[],a=0,c=1,l=!1;Z_(e,(function(e){var d=a++,u=!1;c++,q_(r,t,e).then((function(e){u||l||(l=!0,i(e))}),(function(e){u||l||(u=!0,o[d]=e,--c||s(new n(o,Q_)))}))})),--c||s(new n(o,Q_))}));return o.error&&s(o.value),r.promise}});var $_=An,ev=Ym,tv=i,nv=ce,rv=O,iv=Hf,sv=D_,ov=ev&&ev.prototype;$_({target:"Promise",proto:!0,real:!0,forced:!!ev&&tv((function(){ov.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=iv(this,nv("Promise")),n=rv(e);return this.then(n?function(n){return sv(t,e()).then((function(){return n}))}:e,n?function(n){return sv(t,e()).then((function(){throw n}))}:e)}});var av=re.Promise,cv=r(av);const lv=()=>{};function dv(){const e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:lv};return e.promise=new cv(((t,n)=>{e.resolve=n=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=t=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,n(t))}})),e}const uv=new Map,hv=new Map,pv=new Map;var fv,mv;!function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(fv||(fv={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(mv||(mv={}));var gv={exports:{}};!function(e,n){!function(t,r){var i="function",s="undefined",o="object",a="string",c="major",l="model",d="name",u="type",h="vendor",p="version",f="architecture",m="console",g="mobile",_="tablet",v="smarttv",y="wearable",E="embedded",b="Amazon",T="Apple",S="ASUS",w="BlackBerry",C="Browser",R="Chrome",I="Firefox",N="Google",O="Huawei",A="LG",k="Microsoft",x="Motorola",P="Opera",D="Samsung",L="Sharp",M="Sony",j="Xiaomi",U="Zebra",F="Facebook",B="Chromium OS",V="Mac OS",G=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},H=function(e,t){return typeof e===a&&-1!==W(t).indexOf(W(e))},W=function(e){return e.toLowerCase()},z=function(e,t){if(typeof e===a)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,350)},q=function(e,t){for(var n,s,a,c,l,d,u=0;u<t.length&&!l;){var h=t[u],p=t[u+1];for(n=s=0;n<h.length&&!l&&h[n];)if(l=h[n++].exec(e))for(a=0;a<p.length;a++)d=l[++s],typeof(c=p[a])===o&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,d):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=d?d.replace(c[1],c[2]):r:this[c[0]]=d?c[1].call(this,d,c[2]):r:4===c.length&&(this[c[0]]=d?c[3].call(this,d.replace(c[1],c[2])):r):this[c]=d||r;u+=2}},K=function(e,t){for(var n in t)if(typeof t[n]===o&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(H(t[n][i],e))return"?"===n?r:n}else if(H(t[n],e))return"?"===n?r:n;return e},Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,P+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[d,P]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+C]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+C],p],[/\bfocus\/([\w\.]+)/i],[p,[d,I+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,P+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,P+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI "+C]],[/fxios\/([-\w\.]+)/i],[p,[d,I]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+C]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+C],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,F],p],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,R+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+C]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,I+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,p],[/(cobalt)\/([\w\.]+)/i],[d,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,W]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",W]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,W]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[h,D],[u,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[h,D],[u,g]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[h,T],[u,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[h,T],[u,_]],[/(macintosh);/i],[l,[h,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[h,L],[u,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[h,O],[u,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[h,O],[u,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[h,j],[u,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[h,j],[u,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[h,"OPPO"],[u,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[h,"Vivo"],[u,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[h,"Realme"],[u,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[h,x],[u,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[h,x],[u,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[h,A],[u,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[h,A],[u,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[h,"Lenovo"],[u,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[h,"Nokia"],[u,g]],[/(pixel c)\b/i],[l,[h,N],[u,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[h,N],[u,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[h,M],[u,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[h,M],[u,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[h,"OnePlus"],[u,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[h,b],[u,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[h,b],[u,g]],[/(playbook);[-\w\),; ]+(rim)/i],[l,h,[u,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[h,w],[u,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[h,S],[u,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[h,S],[u,g]],[/(nexus 9)/i],[l,[h,"HTC"],[u,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[l,/_/g," "],[u,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[h,"Acer"],[u,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[h,"Meizu"],[u,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,l,[u,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,l,[u,_]],[/(surface duo)/i],[l,[h,k],[u,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[h,"Fairphone"],[u,g]],[/(u304aa)/i],[l,[h,"AT&T"],[u,g]],[/\bsie-(\w*)/i],[l,[h,"Siemens"],[u,g]],[/\b(rct\w+) b/i],[l,[h,"RCA"],[u,_]],[/\b(venue[\d ]{2,7}) b/i],[l,[h,"Dell"],[u,_]],[/\b(q(?:mv|ta)\w+) b/i],[l,[h,"Verizon"],[u,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[h,"Barnes & Noble"],[u,_]],[/\b(tm\d{3}\w+) b/i],[l,[h,"NuVision"],[u,_]],[/\b(k88) b/i],[l,[h,"ZTE"],[u,_]],[/\b(nx\d{3}j) b/i],[l,[h,"ZTE"],[u,g]],[/\b(gen\d{3}) b.+49h/i],[l,[h,"Swiss"],[u,g]],[/\b(zur\d{3}) b/i],[l,[h,"Swiss"],[u,_]],[/\b((zeki)?tb.*\b) b/i],[l,[h,"Zeki"],[u,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],l,[u,_]],[/\b(ns-?\w{0,9}) b/i],[l,[h,"Insignia"],[u,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[h,"NextBook"],[u,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],l,[u,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],l,[u,g]],[/\b(ph-1) /i],[l,[h,"Essential"],[u,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[h,"Envizen"],[u,_]],[/\b(trio[-\w\. ]+) b/i],[l,[h,"MachSpeed"],[u,_]],[/\btu_(1491) b/i],[l,[h,"Rotor"],[u,_]],[/(shield[\w ]+) b/i],[l,[h,"Nvidia"],[u,_]],[/(sprint) (\w+)/i],[h,l,[u,g]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[h,k],[u,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[h,U],[u,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[h,U],[u,g]],[/smart-tv.+(samsung)/i],[h,[u,v]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[h,D],[u,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,A],[u,v]],[/(apple) ?tv/i],[h,[l,T+" TV"],[u,v]],[/crkey/i],[[l,R+"cast"],[h,N],[u,v]],[/droid.+aft(\w)( bui|\))/i],[l,[h,b],[u,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[h,L],[u,v]],[/(bravia[\w ]+)( bui|\))/i],[l,[h,M],[u,v]],[/(mitv-\w{5}) bui/i],[l,[h,j],[u,v]],[/Hbbtv.*(technisat) (.*);/i],[h,l,[u,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,z],[l,z],[u,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,l,[u,m]],[/droid.+; (shield) bui/i],[l,[h,"Nvidia"],[u,m]],[/(playstation [345portablevi]+)/i],[l,[h,M],[u,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[h,k],[u,m]],[/((pebble))app/i],[h,l,[u,y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[h,T],[u,y]],[/droid.+; (glass) \d/i],[l,[h,N],[u,y]],[/droid.+; (wt63?0{2,3})\)/i],[l,[h,U],[u,y]],[/(quest( 2| pro)?)/i],[l,[h,F],[u,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[u,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[u,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[u,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,g]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[p,K,Y]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[p,K,Y]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,V],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,w]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,I+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[d,R+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,B],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,p]]},X=function(e,n){if(typeof e===o&&(n=e,e=r),!(this instanceof X))return new X(e,n).getResult();var m=typeof t!==s&&t.navigator?t.navigator:r,v=e||(m&&m.userAgent?m.userAgent:""),y=m&&m.userAgentData?m.userAgentData:r,E=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(J,n):J;return this.getBrowser=function(){var e={};return e[d]=r,e[p]=r,q.call(e,v,E.browser),e[c]=function(e){return typeof e===a?e.replace(/[^\d\.]/g,"").split(".")[0]:r}(e[p]),m&&m.brave&&typeof m.brave.isBrave==i&&(e[d]="Brave"),e},this.getCPU=function(){var e={};return e[f]=r,q.call(e,v,E.cpu),e},this.getDevice=function(){var e={};return e[h]=r,e[l]=r,e[u]=r,q.call(e,v,E.device),!e[u]&&y&&y.mobile&&(e[u]=g),"Macintosh"==e[l]&&m&&typeof m.standalone!==s&&m.maxTouchPoints&&m.maxTouchPoints>2&&(e[l]="iPad",e[u]=_),e},this.getEngine=function(){var e={};return e[d]=r,e[p]=r,q.call(e,v,E.engine),e},this.getOS=function(){var e={};return e[d]=r,e[p]=r,q.call(e,v,E.os),!e[d]&&y&&"Unknown"!=y.platform&&(e[d]=y.platform.replace(/chrome os/i,B).replace(/macos/i,V)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return v},this.setUA=function(e){return v=typeof e===a&&e.length>350?z(e,350):e,this},this.setUA(v),this};X.VERSION="0.7.34",X.BROWSER=G([d,p,c]),X.CPU=G([f]),X.DEVICE=G([l,h,u,m,g,v,_,y,E]),X.ENGINE=X.OS=G([d,p]),e.exports&&(n=e.exports=X),n.UAParser=X;var Z=typeof t!==s&&(t.jQuery||t.Zepto);if(Z&&!Z.ua){var Q=new X;Z.ua=Q.getResult(),Z.ua.get=function(){return Q.getUA()},Z.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var n in t)Z.ua[n]=t[n]}}}("object"==typeof window?window:t)}(gv,gv.exports);const _v=new(r(gv.exports));let vv=_v.getResult(),yv=null;function Ev(e){if(!yv){e&&_v.setUA(e),vv=_v.getResult();const t=function(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return mv.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return mv.CHROME;case"Safari":case"Mobile Safari":return mv.SAFARI;case"Edge":return mv.EDGE;case"Firefox":return mv.FIREFOX;case"QQBrowser":return mv.QQ;case"Opera":return mv.OPERA;case"WeChat":return mv.WECHAT;default:return e.browser.name||""}}(vv),n=function(e){let t;return t="Blink"===e.engine.name?e.engine.version||"":e.browser.version||"",t.split(".")[0]}(vv),r=function(e){return"Windows"===e.os.name?e.os.version?e.os.name+" "+e.os.version:e.os.name:e.os.name||""}(vv),i=vv.os.version;if(!(t&&n&&r&&i))return{name:t,version:n,os:r,osVersion:i};yv={name:t,version:n,os:r,osVersion:i}}return yv}function bv(){return Ev().os}function Tv(){const e=Ev();return"".concat(e.os," ").concat(e.osVersion)}function Sv(){const e=Ev();return!!("WebKit"===vv.engine.name&&e.os===fv.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==mv.SAFARI||Ov()&&e.name!==mv.SAFARI)}function wv(){const e=Ev();if(Sv()){if(e.os===fv.MAC_OS)return!0;if(e.os===fv.IOS){const e=vv.os.version&&vv.os.version.split(".");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}function Cv(){return"WebKit"===vv.engine.name}function Rv(){return Ev().name===mv.CHROME}function Iv(){return Ev().name===mv.SAFARI}function Nv(){return Ev().name===mv.FIREFOX}function Ov(){return Ev().os===fv.IOS}function Av(e){const t=Ev();return!(t.name!==mv.CHROME||!t.osVersion)&&Number(t.version)>=e}function kv(e){const t=Ev();return!(t.name!==mv.EDGE||!t.osVersion)&&Number(t.version)>=e}function xv(e){const t=Ev();return!(t.name!==mv.OPERA||!t.osVersion)&&Number(t.version)>=e}function Pv(){const e=Ev();return!(e.name!==mv.CHROME||!e.osVersion)&&Number(e.version)<=90}function Dv(){const e=Ev();if(e.os!==fv.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function Lv(){const e=Ev();if(e.os!==fv.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])}function Mv(){const e=Ev();if(e.os!==fv.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 16===Number(t[0])}function jv(){const e=Ev();if(e.os!==fv.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function Uv(){return Iv()&&navigator.maxTouchPoints>0}function Fv(){return Ev().name===mv.WECHAT}function Bv(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Vv(){const e=Ev();return e.name!==mv.EDGE&&e.name!==mv.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function Gv(){return bv()===fv.ANDROID}function Hv(){const e=Ev();return Gv()&&(e.name===mv.CHROME||e.name===mv.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}var Wv;!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED"}(Wv||(Wv={}));let zv=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;super(t),sh(this,"code",void 0),sh(this,"message",void 0),sh(this,"data",void 0),sh(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=n}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return"error"===e&&(t||console).error(this.toString()),"warning"===e&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function qv(e,t){if("boolean"!=typeof e)throw new zv(Wv.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function Kv(e,t,n){if(!Nr(n).call(n,e))throw new zv(Wv.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(n)))}function Yv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<n||e>r||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!function(e){return"number"==typeof e&&e%1==0}(e))throw new zv(Wv.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}function Jv(e,t){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new zv(Wv.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));void 0!==e.min&&Yv(e.min,"".concat(t,".min"),0,1/0),void 0!==e.max&&Yv(e.max,"".concat(t,".max"),1,1/0),void 0!==e.exact&&Yv(e.exact,"".concat(t,".exact"),1,1/0),void 0!==e.ideal&&Yv(e.ideal,"".concat(t,".ideal"),1,1/0)}else Yv(e,t,1,1/0)}function Xv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new zv(Wv.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!$v(e,n,r,i))throw new zv(Wv.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))}function Zv(e,t){if(!Array.isArray(e))throw new zv(Wv.INVALID_PARAMS,"".concat(t," should be an array"))}function Qv(e){return null==e}function $v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&e.length<=n&&e.length>=t&&(!r||function(e){if("string"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}(e))}function ey(e,t,n){if("getBigUint64"in DataView.prototype)return e.getBigUint64(t,n);const r=e.getUint32(t,n),i=e.getUint32(t+4,n),s=Number(!!n),o=Number(!n);return BigInt(r*o+i*s)<<BigInt(32)|BigInt(r*s+i*o)}function ty(e,t,n,r){if("setBigUint64"in DataView.prototype)return e.setBigUint64(t,n,r);const i=Number(n>>BigInt(32)),s=Number(n&BigInt(4294967295));r?(e.setUint32(t+4,i,r),e.setUint32(t,s,r)):(e.setUint32(t,i,r),e.setUint32(t+4,s,r))}var ny,ry;!function(e){e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE"}(ny||(ny={})),function(e){e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(ry||(ry={}));const iy=new class{constructor(){sh(this,"_clientSize",null),sh(this,"getClientWidth",(()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth)),sh(this,"getClientHeight",(()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight)),sh(this,"getStyle",(e=>window.getComputedStyle(e,null))),sh(this,"checkCssVisibleProperty",(e=>{var t;let n=!0;const r=this.getStyle(e),{display:i,visibility:s,opacity:o,filter:a}=r;return("none"===i||Nr(t=["hidden","collapse"]).call(t,s)||Number(o)<.1)&&(n=!1),!!n&&(a&&a.split(" ").filter((e=>{var t;const n=e.split("(")[0];return Nr(t=["brightness","blur","opacity"]).call(t,n)})).map((e=>{const[t,n]=e.split(/\(|\)/);return[t,Number(n.match(/^[0-9\.]+/))]})).forEach((e=>{const[t,r]=e;switch(t){case"brightness":(r<.1||r>3)&&(n=!1);break;case"blur":r>3&&(n=!1);break;case"opacity":r<.1&&(n=!1)}})),n)})),sh(this,"checkPropertyUpToAllParentNodes",((e,t)=>{let n=!0,r=!0;const i=e=>t(e);let s=e;for(;s&&r;)i(s)||(n=!1,r=!1),s=s.parentElement,s||(r=!1);return n})),sh(this,"checkActualCssVisibleIncludeInherit",(e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty))),sh(this,"getSizeAboutClient",(e=>{const{width:t,height:n,left:r,right:i,top:s,bottom:o}=e.getBoundingClientRect(),a=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:n,left:r,right:i,top:s,bottom:o,clientWidth:a,clientHeight:c,clientMin:Math.min(a,c)}})),sh(this,"checkActualSize",(()=>{const{width:e,height:t,clientMin:n}=this._clientSize;return this.checkSizeIsVisible(e,t,n)})),sh(this,"elementFromPoint",((e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null)),sh(this,"checkCoverForAPoint",((e,t,n)=>{const r=this.elementFromPoint(e,t);return null!==r&&r!==n})),sh(this,"getPointPositionList",(()=>{const{width:e,height:t,left:n,top:r}=this._clientSize,i=e/6,s=t/6,o=[],a=10**6;for(let c=0;c<5;c++)for(let e=0;e<5;e++){const t=(n*a+(0===c?.1:4===c?(i*c*a-1e5)/a:i*c)*a)/a,l=(r*a+(0===e?.1:4===e?(s*e*a-1e5)/a:s*e)*a)/a;o.push({x:t,y:l})}return[...o]})),sh(this,"checkElementCover",(e=>this.getPointPositionList().map((t=>this.checkCoverForAPoint(t.x,t.y,e))).filter((e=>!!e)).length>6)),sh(this,"checkSizeIsVisible",((e,t,n)=>(e>50||n/e<=10)&&(t>50||n/t<=10))),sh(this,"checkSizeOfPartInClient",(()=>{const{left:e,right:t,top:n,bottom:r,clientHeight:i,clientWidth:s,clientMin:o}=this._clientSize;let a,c,l,d;if(e<0)a=0;else{if(!(e<s))return!1;a=e}if(t<0)return!1;if(c=t<s?t:s,n<0)l=0;else{if(!(n<i))return!1;l=n}if(r<0)return!1;d=r<i?r:i;const u=c-a,h=d-l;return this.checkSizeIsVisible(u,h,o)})),sh(this,"returnHiddenResult",(e=>(this._clientSize=null,{visible:!1,reason:e}))),sh(this,"checkOneElementVisible",(e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(ny.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(ny.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(ny.SIZE)}}return this.returnHiddenResult(ny.STYLE)}return this.returnHiddenResult(ry.UNMOUNTED)}return this.returnHiddenResult(ry.INVALID_HTML_ELEMENT)})),sh(this,"checkElementIsMountedOnDom",(e=>this.checkPropertyUpToAllParentNodes(e,(e=>"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement))))}};function sy(e){return(new TextEncoder).encode(e)}const oy=function(e,t){const n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n},ay=async e=>{const t=function(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),n=await window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),r=sy(e),i=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r);return function(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}(new Uint8Array(i))},cy=async e=>function(e,t){let n="";return new Uint8Array(e).forEach((e=>{n+=e.toString(t).padStart(2,"0")})),n}(await crypto.subtle.digest("SHA-256",sy(e)),16);class ly{constructor(){sh(this,"_events",{}),sh(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map((e=>e.listener)):[]}on(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const t=this._events[e].map((e=>e));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(let s=0;s<t.length;s+=1){const n=t[s];n.once&&this.off(e,n.listener),n.listener.apply(this,r||[])}}safeEmit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];[...this._events[e]||[]].forEach((t=>{t.once&&this.off(e,t.listener);try{t.listener.apply(this,n)}catch(t){console.error("safeEmit event:".concat(e," error ").concat(null==t?void 0:t.toString()))}}))}_indexOfListener(e,t){let n=e.length;for(;n--;)if(e[n].listener===t)return n;return-1}}let dy=null;function uy(){if(dy)return dy;if(window.electron)return dy=window.electron;if(!window.require)return null;try{return dy=window.require("electron"),dy}catch(e){return null}}var hy,py,fy,my,gy,_y,vy,yy;function Ey(e){return Yv(e.timeout,"config.timeout",0,1e5),Yv(e.timeoutFactor,"config.timeoutFactor",0,100,!1),Yv(e.maxRetryCount,"config.maxRetryConfig",0,1/0),Yv(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function by(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((e=>{if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function Ty(e){return Xv(e.turnServerURL,"turnServerURL"),Xv(e.username,"username"),Xv(e.password,"password"),e.udpport&&Yv(e.udpport,"udpport",1,99999,!0),e.forceturn&&qv(e.forceturn,"forceturn"),e.security&&qv(e.security,"security"),e.tcpport&&Yv(e.tcpport,"tcpport",1,99999,!0),!0}function Sy(e){return void 0!==e.level&&Kv(e.level,"level",[1,2,3]),void 0!==e.delay&&Yv(e.delay,"delay",0,3e3,!0),!0}function wy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return 0===e.getListeners(t).length?cv.reject(new zv(Wv.UNEXPECTED_ERROR,"can not emit promise")):new cv(((n,i)=>{e.emit(t,...r,n,i)}))}function Cy(e,t){if(0===e.getListeners(t).length)return cv.resolve();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return wy(e,t,...r)}function Ry(e,t){if(0===e.getListeners(t).length)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Iy(e,t,...r)}function Iy(e,t){let n=null,r=null;for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];if(e.emit(t,...s,(e=>{n=e}),(e=>{r=e})),null!==r)throw r;if(null===n)throw new zv(Wv.UNEXPECTED_ERROR,"handler is not sync");return n}!function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.DATACHANNEL_FAILBACK="Client._datachannelFailback",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload"}(hy||(hy={})),function(e){e.TRACER="tracer"}(py||(py={})),function(e){e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(fy||(fy={})),function(e){e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.FALLBACK="FALLBACK",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE"}(my||(my={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change"}(gy||(gy={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(_y||(_y={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(vy||(vy={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(yy||(yy={}));const Ny=new class extends ly{set networkState(e){this.emit(yy.NETWORK_STATE_CHANGE,e,this._networkState),e===vy.ONLINE?this.emit(yy.ONLINE):e===vy.OFFLINE&&(this.onlineWaiter=new cv((e=>{this.once(yy.ONLINE,(()=>{this.onlineWaiter=void 0,e(vy.ONLINE)}))})),this.emit(yy.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===vy.ONLINE}constructor(){super(),sh(this,"_moduleName","network-indicator"),sh(this,"_networkState",vy.ONLINE),sh(this,"onlineWaiter",void 0),window.addEventListener("online",(()=>{this.networkState=vy.ONLINE})),window.addEventListener("offline",(()=>{this.networkState=vy.OFFLINE}))}};var Oy=xe,Ay=Xe,ky=q,xy=Gn,Py=TypeError,Dy=function(e){return function(t,n,r,i){Oy(n);var s=Ay(t),o=ky(s),a=xy(s),c=e?a-1:0,l=e?-1:1;if(r<2)for(;;){if(c in o){i=o[c],c+=l;break}if(c+=l,e?c<0:a<=c)throw Py("Reduce of empty array with no initial value")}for(;e?c>=0:a>c;c+=l)c in o&&(i=n(i,o[c],c,s));return i}},Ly=[Dy(!1),Dy(!0)][0];An({target:"Array",proto:!0,forced:!Nf&&ge>79&&ge<83||!Sh("reduce")},{reduce:function(e){var t=arguments.length;return Ly(this,e,t,t>1?arguments[1]:void 0)}});var My=Xn("Array").reduce,jy=u,Uy=My,Fy=Array.prototype,By=r((function(e){var t=e.reduce;return e===Fy||jy(Fy,e)&&t===Fy.reduce?Uy:t}));function Vy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vy(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hy(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}function Wy(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),t}function zy(e){void 0!==cv?cv.resolve().then(e):setTimeout(e,0)}function qy(e){return JSON.parse(JSON.stringify(e))}function Ky(e){try{return qy(e)}catch(t){return e}}const Yy={};function Jy(e,t){Yy[t]||(Yy[t]=!0,e())}function Xy(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}function Zy(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}function Qy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=By(t).call(t,((e,t)=>e+t.length),0),i=new Uint8Array(new ArrayBuffer(r));let s=0;return t.forEach((e=>{i.set(e,s),s+=e.length})),i}function $y(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function eE(e){let t=0;return/DingTalk/i.test(navigator.userAgent)&&e.realFormData&&(e=e.realFormData),e.forEach((e=>{t+="string"==typeof e?$y(e):e.size})),t+138}function tE(e){const t=new zv(Wv.TIMEOUT,"timeout");return new cv(((n,r)=>{window.setTimeout((()=>r(t)),e)}))}function nE(e){return new cv((t=>{window.setTimeout(t,e)}))}function rE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;const n=Math.random().toString(16).substr(2,e).toLowerCase();return n.length===e?"".concat(t).concat(n):"".concat(t).concat(n)+rE(e-n.length,"")}function iE(){return rE(32,"").toUpperCase()}const sE=()=>{},oE=new class{constructor(){sh(this,"fnMap",new Map)}throttleByKey(e,t,n,r){for(var i=arguments.length,s=new Array(i>4?i-4:0),o=4;o<i;o++)s[o-4]=arguments[o];if(this.fnMap.has(t)){const i=this.fnMap.get(t);if(i.threshold!==n){i.fn(...i.args),clearTimeout(i.timer);const o=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:o,args:s,skipFn:r})}else i.skipFn&&i.skipFn(...i.args),this.fnMap.set(t,Gy(Gy({},i),{},{fn:e,args:s,skipFn:r}))}else{const i=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:i,args:s,skipFn:r})}}},aE=oE.throttleByKey.bind(oE);function cE(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}function lE(e,t){if(!cE(e)||!cE(t))return t;if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){const n=[...e];for(let r=0;r<t.length;r++)n[r]=lE(e[r],t[r]);return n}{const n=Gy({},e);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)?n[r]=lE(e[r],t[r]):n[r]=t[r]);return n}}function dE(e,t){let n=[0];if(t&&(n=new Array(t).fill(0)),0===e)return n;let r=0;for(;e>0&&(n[r]=255&e,e>>=8,r++,!t||r!==t););return n}let uE=1,hE=console;class pE{static setLogger(e){hE=e}constructor(e){sh(this,"lockingPromise",cv.resolve()),sh(this,"locks",0),sh(this,"name",""),sh(this,"lockId",void 0),this.lockId=uE++,e&&(this.name=e),hE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,hE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:""));const n=new cv((n=>{t=()=>{this.locks-=1,hE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:"")),n()}})),r=this.lockingPromise.then((()=>t));return this.lockingPromise=this.lockingPromise.then((()=>n)),r}}function fE(e,t){return function(n,r,i){const s=i.value;if("function"!=typeof s)throw new Error("Cannot use mutex on object property.");return i.value=async function(){const n=this[t];if(!n)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));const i=await n.lock("From ".concat(e,".").concat(r));try{for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return await s.apply(this,a)}finally{i()}},i}}const mE={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function gE(e,t){const n=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,n)}function _E(e,t,n,r){const i=Object.assign({},mE,r);let s=i.timeout;const o=async()=>{await function(e){return new cv((t=>{window.setTimeout(t,e)}))}(s),s*=i.timeoutFactor,s=Math.min(i.maxRetryTimeout,s)};let a=!1;const c=new cv((async(r,s)=>{t=t||(()=>!1),n=n||(()=>!0);for(let c=0;c<i.maxRetryCount;c+=1){if(a)return s(new zv(Wv.OPERATION_ABORTED));try{const n=await e();if(!t(n,c))return r(n);if(c+1===i.maxRetryCount)return r(n);await o()}catch(e){if(!n(e,c))return s(e);if(c+1===i.maxRetryCount)return s(e);await o()}}}));return c.cancel=()=>a=!0,c}let vE=class{constructor(e){sh(this,"input",[]),sh(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return 0===this.input.length?0:By(e=this.input).call(e,((e,t)=>e+t))/this.input.length}};function yE(e,t){return function(){return e.apply(t,arguments)}}const{toString:EE}=Object.prototype,{getPrototypeOf:bE}=Object,TE=(SE=Object.create(null),e=>{const t=EE.call(e);return SE[t]||(SE[t]=t.slice(8,-1).toLowerCase())});var SE;const wE=e=>(e=e.toLowerCase(),t=>TE(t)===e),CE=e=>t=>typeof t===e,{isArray:RE}=Array,IE=CE("undefined"),NE=wE("ArrayBuffer"),OE=CE("string"),AE=CE("function"),kE=CE("number"),xE=e=>null!==e&&"object"==typeof e,PE=e=>{if("object"!==TE(e))return!1;const t=bE(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},DE=wE("Date"),LE=wE("File"),ME=wE("Blob"),jE=wE("FileList"),UE=wE("URLSearchParams");function FE(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e)if("object"!=typeof e&&(e=[e]),RE(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function BE(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const VE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,GE=e=>!IE(e)&&e!==VE,HE=(WE="undefined"!=typeof Uint8Array&&bE(Uint8Array),e=>WE&&e instanceof WE);var WE;const zE=wE("HTMLFormElement"),qE=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),KE=wE("RegExp"),YE=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};FE(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},JE="abcdefghijklmnopqrstuvwxyz",XE="0123456789",ZE={DIGIT:XE,ALPHA:JE,ALPHA_DIGIT:JE+JE.toUpperCase()+XE},QE=wE("AsyncFunction");var $E={isArray:RE,isArrayBuffer:NE,isBuffer:function(e){return null!==e&&!IE(e)&&null!==e.constructor&&!IE(e.constructor)&&AE(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||AE(e.append)&&("formdata"===(t=TE(e))||"object"===t&&AE(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&NE(e.buffer),t},isString:OE,isNumber:kE,isBoolean:e=>!0===e||!1===e,isObject:xE,isPlainObject:PE,isUndefined:IE,isDate:DE,isFile:LE,isBlob:ME,isRegExp:KE,isFunction:AE,isStream:e=>xE(e)&&AE(e.pipe),isURLSearchParams:UE,isTypedArray:HE,isFileList:jE,forEach:FE,merge:function e(){const{caseless:t}=GE(this)&&this||{},n={},r=(r,i)=>{const s=t&&BE(n,i)||i;PE(n[s])&&PE(r)?n[s]=e(n[s],r):PE(r)?n[s]=e({},r):RE(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&FE(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return FE(t,((t,r)=>{n&&AE(t)?e[r]=yE(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&bE(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:TE,kindOfTest:wE,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(RE(e))return e;let t=e.length;if(!kE(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:zE,hasOwnProperty:qE,hasOwnProp:qE,reduceDescriptors:YE,freezeMethods:e=>{YE(e,((t,n)=>{if(AE(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];AE(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return RE(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:BE,global:VE,isContextDefined:GE,ALPHABET:ZE,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ZE.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&AE(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(xE(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=RE(e)?[]:{};return FE(e,((e,t)=>{const s=n(e,r+1);!IE(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:QE,isThenable:e=>e&&(xE(e)||AE(e))&&AE(e.then)&&AE(e.catch)};function eb(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}$E.inherits(eb,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$E.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const tb=eb.prototype,nb={};function rb(e){return $E.isPlainObject(e)||$E.isArray(e)}function ib(e){return $E.endsWith(e,"[]")?e.slice(0,-2):e}function sb(e,t,n){return e?e.concat(t).map((function(e,t){return e=ib(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{nb[e]={value:e}})),Object.defineProperties(eb,nb),Object.defineProperty(tb,"isAxiosError",{value:!0}),eb.from=(e,t,n,r,i,s)=>{const o=Object.create(tb);return $E.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),eb.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const ob=$E.toFlatObject($E,{},null,(function(e){return/^is[A-Z]/.test(e)}));function ab(e,t,n){if(!$E.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=$E.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!$E.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&$E.isSpecCompliantForm(t);if(!$E.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if($E.isDate(e))return e.toISOString();if(!a&&$E.isBlob(e))throw new eb("Blob is not supported. Use a Buffer instead.");return $E.isArrayBuffer(e)||$E.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"==typeof e)if($E.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if($E.isArray(e)&&function(e){return $E.isArray(e)&&!e.some(rb)}(e)||($E.isFileList(e)||$E.endsWith(n,"[]"))&&(a=$E.toArray(e)))return n=ib(n),a.forEach((function(e,r){!$E.isUndefined(e)&&null!==e&&t.append(!0===o?sb([n],r,s):null===o?n:n+"[]",c(e))})),!1;return!!rb(e)||(t.append(sb(i,n,s),c(e)),!1)}const d=[],u=Object.assign(ob,{defaultVisitor:l,convertValue:c,isVisitable:rb});if(!$E.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!$E.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),$E.forEach(n,(function(n,s){!0===(!($E.isUndefined(n)||null===n)&&i.call(t,n,$E.isString(s)?s.trim():s,r,u))&&e(n,r?r.concat(s):[s])})),d.pop()}}(e),t}function cb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function lb(e,t){this._pairs=[],e&&ab(e,this,t)}const db=lb.prototype;function ub(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function hb(e,t,n){if(!t)return e;const r=n&&n.encode||ub,i=n&&n.serialize;let s;if(s=i?i(t,n):$E.isURLSearchParams(t)?t.toString():new lb(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}db.append=function(e,t){this._pairs.push([e,t])},db.toString=function(e){const t=e?function(t){return e.call(this,t,cb)}:cb;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var pb=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$E.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},fb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mb={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:lb,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const gb="undefined"!=typeof window&&"undefined"!=typeof document,_b=(vb="undefined"!=typeof navigator&&navigator.product,gb&&["ReactNative","NativeScript","NS"].indexOf(vb)<0);var vb;const yb="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var Eb={...Object.freeze({__proto__:null,hasBrowserEnv:gb,hasStandardBrowserEnv:_b,hasStandardBrowserWebWorkerEnv:yb}),...mb};function bb(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;return s=!s&&$E.isArray(r)?r.length:s,a?($E.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o):(r[s]&&$E.isObject(r[s])||(r[s]=[]),t(e,n,r[s],i)&&$E.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o)}if($E.isFormData(e)&&$E.isFunction(e.entries)){const n={};return $E.forEachEntry(e,((e,r)=>{t(function(e){return $E.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const Tb={transitional:fb,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=$E.isObject(e);if(i&&$E.isHTMLForm(e)&&(e=new FormData(e)),$E.isFormData(e))return r?JSON.stringify(bb(e)):e;if($E.isArrayBuffer(e)||$E.isBuffer(e)||$E.isStream(e)||$E.isFile(e)||$E.isBlob(e))return e;if($E.isArrayBufferView(e))return e.buffer;if($E.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ab(e,new Eb.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Eb.isNode&&$E.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=$E.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ab(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if($E.isString(e))try{return(t||JSON.parse)(e),$E.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Tb.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&$E.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw eb.from(e,eb.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Eb.classes.FormData,Blob:Eb.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$E.forEach(["delete","get","head","post","put","patch"],(e=>{Tb.headers[e]={}}));var Sb=Tb;const wb=$E.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Cb=Symbol("internals");function Rb(e){return e&&String(e).trim().toLowerCase()}function Ib(e){return!1===e||null==e?e:$E.isArray(e)?e.map(Ib):String(e)}function Nb(e,t,n,r,i){return $E.isFunction(r)?r.call(this,t,n):(i&&(t=n),$E.isString(t)?$E.isString(r)?-1!==t.indexOf(r):$E.isRegExp(r)?r.test(t):void 0:void 0)}class Ob{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Rb(t);if(!i)throw new Error("header name must be a non-empty string");const s=$E.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=Ib(e))}const s=(e,t)=>$E.forEach(e,((e,n)=>i(e,n,t)));return $E.isPlainObject(e)||e instanceof this.constructor?s(e,t):$E.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&wb[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=Rb(e)){const n=$E.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if($E.isFunction(t))return t.call(this,e,n);if($E.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Rb(e)){const n=$E.findKey(this,e);return!(!n||void 0===this[n]||t&&!Nb(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Rb(e)){const i=$E.findKey(n,e);!i||t&&!Nb(0,n[i],i,t)||(delete n[i],r=!0)}}return $E.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Nb(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return $E.forEach(this,((r,i)=>{const s=$E.findKey(n,i);if(s)return t[s]=Ib(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Ib(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return $E.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&$E.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Cb]=this[Cb]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Rb(e);t[r]||(function(e,t){const n=$E.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return $E.isArray(e)?e.forEach(r):r(e),this}}Ob.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),$E.reduceDescriptors(Ob.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),$E.freezeMethods(Ob);var Ab=Ob;function kb(e,t){const n=this||Sb,r=t||n,i=Ab.from(r.headers);let s=r.data;return $E.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function xb(e){return!(!e||!e.__CANCEL__)}function Pb(e,t,n){eb.call(this,null==e?"canceled":e,eb.ERR_CANCELED,t,n),this.name="CanceledError"}$E.inherits(Pb,eb,{__CANCEL__:!0});var Db=Eb.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];$E.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),$E.isString(r)&&o.push("path="+r),$E.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Lb(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Mb=Eb.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=$E.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function jb(e,t){let n=0;const r=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[o];i||(i=c),n[s]=a,r[s]=c;let d=o,u=0;for(;d!==s;)u+=n[d++],d%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-i<t)return;const h=l&&c-l;return h?Math.round(1e3*u/h):void 0}}(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,c=r(a);n=s;const l={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&s<=o?(o-s)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}var Ub="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=Ab.from(e.headers).normalize();let s,o,{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}if($E.isFormData(r))if(Eb.hasStandardBrowserEnv||Eb.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(o=i.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let d=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const u=Lb(e.baseURL,e.url);function h(){if(!d)return;const r=Ab.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new eb("Request failed with status code "+n.status,[eb.ERR_BAD_REQUEST,eb.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:r,config:e,request:d}),d=null}if(d.open(e.method.toUpperCase(),hb(u,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,"onloadend"in d?d.onloadend=h:d.onreadystatechange=function(){d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))&&setTimeout(h)},d.onabort=function(){d&&(n(new eb("Request aborted",eb.ECONNABORTED,e,d)),d=null)},d.onerror=function(){n(new eb("Network Error",eb.ERR_NETWORK,e,d)),d=null},d.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||fb;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new eb(t,r.clarifyTimeoutError?eb.ETIMEDOUT:eb.ECONNABORTED,e,d)),d=null},Eb.hasStandardBrowserEnv&&(c&&$E.isFunction(c)&&(c=c(e)),c||!1!==c&&Mb(u))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&Db.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in d&&$E.forEach(i.toJSON(),(function(e,t){d.setRequestHeader(t,e)})),$E.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),a&&"json"!==a&&(d.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",jb(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",jb(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{d&&(n(!t||t.type?new Pb(null,e,d):t),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const p=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);p&&-1===Eb.protocols.indexOf(p)?n(new eb("Unsupported protocol "+p+":",eb.ERR_BAD_REQUEST,e)):d.send(r||null)}))};const Fb={http:null,xhr:Ub};$E.forEach(Fb,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Bb=e=>"- ".concat(e),Vb=e=>$E.isFunction(e)||null===e||!1===e;var Gb={getAdapter:e=>{e=$E.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!Vb(n)&&(r=Fb[(t=String(n)).toLowerCase()],void 0===r))throw new eb("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));throw new eb("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Bb).join("\n"):" "+Bb(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r},adapters:Fb};function Hb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pb(null,e)}function Wb(e){return Hb(e),e.headers=Ab.from(e.headers),e.data=kb.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Gb.getAdapter(e.adapter||Sb.adapter)(e).then((function(t){return Hb(e),t.data=kb.call(e,e.transformResponse,t),t.headers=Ab.from(t.headers),t}),(function(t){return xb(t)||(Hb(e),t&&t.response&&(t.response.data=kb.call(e,e.transformResponse,t.response),t.response.headers=Ab.from(t.response.headers))),Promise.reject(t)}))}const zb=e=>e instanceof Ab?e.toJSON():e;function qb(e,t){t=t||{};const n={};function r(e,t,n){return $E.isPlainObject(e)&&$E.isPlainObject(t)?$E.merge.call({caseless:n},e,t):$E.isPlainObject(t)?$E.merge({},t):$E.isArray(t)?t.slice():t}function i(e,t,n){return $E.isUndefined(t)?$E.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!$E.isUndefined(t))return r(void 0,t)}function o(e,t){return $E.isUndefined(t)?$E.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(zb(e),zb(t),!0)};return $E.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=c[r]||i,o=s(e[r],t[r],r);$E.isUndefined(o)&&s!==a||(n[r]=o)})),n}const Kb="1.6.7",Yb={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Yb[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Jb={};Yb.transitional=function(e,t,n){function r(e,t){return"[Axios v"+Kb+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new eb(r(i," has been removed"+(t?" in "+t:"")),eb.ERR_DEPRECATED);return t&&!Jb[i]&&(Jb[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};var Xb={assertOptions:function(e,t,n){if("object"!=typeof e)throw new eb("options must be an object",eb.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new eb("option "+s+" must be "+n,eb.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new eb("Unknown option "+s,eb.ERR_BAD_OPTION)}},validators:Yb};const Zb=Xb.validators;let Qb=class{constructor(e){this.defaults=e,this.interceptors={request:new pb,response:new pb}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=qb(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Xb.assertOptions(n,{silentJSONParsing:Zb.transitional(Zb.boolean),forcedJSONParsing:Zb.transitional(Zb.boolean),clarifyTimeoutError:Zb.transitional(Zb.boolean)},!1),null!=r&&($E.isFunction(r)?t.paramsSerializer={serialize:r}:Xb.assertOptions(r,{encode:Zb.function,serialize:Zb.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&$E.merge(i.common,i[t.method]);i&&$E.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Ab.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let d,u=0;if(!a){const e=[Wb.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),d=e.length,l=Promise.resolve(t);u<d;)l=l.then(e[u++],e[u++]);return l}d=o.length;let h=t;for(u=0;u<d;){const t=o[u++],n=o[u++];try{h=t(h)}catch(e){n.call(this,e);break}}try{l=Wb.call(this,h)}catch(e){return Promise.reject(e)}for(u=0,d=c.length;u<d;)l=l.then(c[u++],c[u++]);return l}getUri(e){return hb(Lb((e=qb(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};$E.forEach(["delete","get","head","options"],(function(e){Qb.prototype[e]=function(t,n){return this.request(qb(n||{},{method:e,url:t,data:(n||{}).data}))}})),$E.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(qb(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Qb.prototype[e]=t(),Qb.prototype[e+"Form"]=t(!0)}));var $b=Qb;class eT{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new Pb(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new eT((function(t){e=t})),cancel:e}}}var tT=eT;const nT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nT).forEach((e=>{let[t,n]=e;nT[n]=t}));var rT=nT;const iT=function e(t){const n=new $b(t),r=yE($b.prototype.request,n);return $E.extend(r,$b.prototype,n,{allOwnKeys:!0}),$E.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(qb(t,n))},r}(Sb);iT.Axios=$b,iT.CanceledError=Pb,iT.CancelToken=tT,iT.isCancel=xb,iT.VERSION=Kb,iT.toFormData=ab,iT.AxiosError=eb,iT.Cancel=iT.CanceledError,iT.all=function(e){return Promise.all(e)},iT.spread=function(e){return function(t){return e.apply(null,t)}},iT.isAxiosError=function(e){return $E.isObject(e)&&!0===e.isAxiosError},iT.mergeConfig=qb,iT.AxiosHeaders=Ab,iT.formToJSON=e=>bb($E.isHTMLForm(e)?new FormData(e):e),iT.getAdapter=Gb.getAdapter,iT.HttpStatusCode=rT,iT.default=iT;var sT=iT;function oT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oT(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let cT,lT=0,dT=0;function uT(e,t,n,r){return new cv(((i,s)=>{t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),lT+=$y(t.data)):n&&(t.data.size?lT+=t.data.size:t.data instanceof FormData?lT+=eE(t.data):lT+=$y(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,sT.request(t).then((e=>{"string"==typeof e.data?dT+=$y(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?dT+=e.data.byteLength:dT+=$y(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((e=>{sT.isCancel(e)?s(new zv(Wv.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?s(new zv(Wv.NETWORK_TIMEOUT,e.message)):e.response?s(new zv(Wv.NETWORK_RESPONSE_ERROR,e.response.status)):s(new zv(Wv.NETWORK_ERROR,e.message))}))}))}async function hT(e,t){const n=new Blob([t.data],{type:"buffer"});return await uT(e,aT(aT({},t),{},{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}const pT=()=>"HTTPS"===(cT||cT||(cT=(window.location.protocol.split(":")[0]||"").toUpperCase(),cT)),fT=()=>void 0!==window.isSecureContext,mT=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){const e=t[1],n=t[2];return"".concat(e,".").concat(n)}const n=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(n&&n[1]&&n[2]){const e=n[1],t=n[2];return"".concat(e,".").concat(100*(Number(t)+1))}return"4.0.0.999"}("4.20.2"),gT=function(){try{return!0===JSON.parse("true")}catch(e){return!0}}();var _T;!function(e){e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn"}(_T||(_T={}));const vT="v4.20.2-0-g8ae7fdad(3/20/2024, 4:48:46 PM)",yT={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:100,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,DISABLE_FEC:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,ENABLE_DATASTREAM_2:!1,DATASTREAM_MAX_RETRANSMITS:10,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,ENABLE_INSTANT_VIDEO:!1,ENABLE_NTP_REPORT:!1,USE_XR:!1,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],PLUGIN_INFO:[]};function ET(e,t,n){var r,i;Nr(r=Object.keys(yT)).call(r,e)&&(!n&&Nr(i=Object.keys(TT)).call(i,e)||(yT[e]=t,"ENABLE_VIDEO_SEI"===e&&!0===t&&(yT.ENABLE_ENCODED_TRANSFORM=!0)))}function bT(e){return yT[e]}const TT={};function ST(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ST(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ST(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var CT,RT,IT;!function(e){e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE"}(CT||(CT={}));class NT{constructor(e,t,n,r){sh(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:n,clientId:r,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1,useP2P:!1,p2pTransport:_T.Default}}dispatch(e){this.state=function(e,t){switch(t.type){case CT.SET_SESSION_ID:return wT(wT({},e),{},{sessionId:t.sessionId});case CT.SET_P2P_ID:return wT(wT({},e),{},{p2pId:t.p2pId});case CT.SET_UID:return wT(wT({},e),{},{uid:t.uid});case CT.SET_INT_UID:return wT(wT({},e),{},{intUid:t.intUid});case CT.SET_PUB_ID:return wT(wT({},e),{},{pubId:t.pubId});case CT.KEY_METRIC_CLIENT_CREATED:return wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{clientCreated:t.metric})});case CT.KEY_METRIC_JOIN_START:return wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{joinStart:t.metric})});case CT.AVOID_JOIN_START:return wT(wT({},e),{},{avoidJoinStart:t.avoidJoinStart});case CT.KEY_METRIC_JOIN_END:return wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{joinEnd:t.metric})});case CT.KEY_METRIC_REQUEST_AP_START:return wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{requestAPStart:t.metric})});case CT.KEY_METRIC_REQUEST_AP_END:return wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{requestAPEnd:t.metric})});case CT.KEY_METRIC_JOIN_GATEWAY_START:return wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case CT.KEY_METRIC_JOIN_GATEWAY_END:return wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case CT.KEY_METRIC_PEER_CONNECTION_START:return wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case CT.KEY_METRIC_PEER_CONNECTION_END:return wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case CT.KEY_METRIC_DESCRIPTION_START:return wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{descriptionStart:t.metric})});case CT.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case CT.KEY_METRIC_ICE_CONNECTION_END:return wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case CT.KEY_METRIC_PUBLISH:{const n=e.keyMetrics.publish,r=n.findIndex((e=>e.trackId===t.metric.trackId));return-1!==r?(n[r]=wT(wT({},n[r]),t.metric),wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{publish:[...n]})})):wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{publish:[...e.keyMetrics.publish,t.metric]})})}case CT.KEY_METRIC_SUBSCRIBE:{const n=e.keyMetrics.subscribe,r=n.findIndex((e=>e.userId===t.metric.userId&&e.type===t.metric.type));return-1!==r?(n[r]=wT(wT({},n[r]),t.metric),wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{subscribe:[...n]})})):wT(wT({},e),{},{keyMetrics:wT(wT({},e.keyMetrics),{},{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}case CT.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case CT.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof t.index?e.joinChannelServiceRecords=[...e.joinChannelServiceRecords,t.record]:(e.joinChannelServiceRecords[t.index]=wT(wT({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=[...e.joinChannelServiceRecords]),e;case CT.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case CT.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case CT.SET_USE_DATACHANNEL:return wT(wT({},e),{},{useDataChannel:t.val});case CT.SET_USE_P2P:return wT(wT({},e),{},{useP2P:t.val});case CT.SET_TRANSPORT_TYPE:return wT(wT({},e),{},{p2pTransport:t.val});default:return e}}(this.state,e)}set sessionId(e){this.dispatch({type:CT.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:CT.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:CT.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:CT.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:CT.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:CT.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:CT.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(e){this.dispatch({type:CT.SET_USE_DATACHANNEL,val:e})}get useDataChannel(){return this.state.useDataChannel}set useP2P(e){this.dispatch({type:CT.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:CT.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:CT.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:CT.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:CT.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:CT.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:CT.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:CT.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:CT.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:CT.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:CT.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:CT.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:CT.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:CT.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,n,r){this.dispatch({type:CT.KEY_METRIC_PUBLISH,metric:wT(wT({trackId:e,type:t},n&&{publishStart:n}),r&&{publishEnd:r})})}subscribe(e,t,n,r,i,s,o){this.dispatch({type:CT.KEY_METRIC_SUBSCRIBE,metric:wT(wT(wT(wT(wT({userId:e,type:t},n&&{subscribeStart:n}),r&&{subscribeEnd:r}),i&&{firstFrame:i}),s&&{streamAdded:s}),o&&{firstDecoded:o})})}massSubscribe(e,t,n,r){e.forEach((e=>{this.dispatch({type:CT.KEY_METRIC_SUBSCRIBE,metric:wT(wT(wT({userId:e.userId,type:e.type},t&&{subscribeStart:t}),n&&{subscribeEnd:n}),r&&{firstFrame:r})})}))}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){"gateway"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((e=>e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2"))));try{return"number"!=typeof t?(this.dispatch({type:CT.RECORD_JOIN_CHANNEL_SERVICE,record:wT(wT({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:CT.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:CT.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:CT.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch(e){return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:CT.AVOID_JOIN_START,avoidJoinStart:e})}}!function(e){e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1"}(RT||(RT={})),function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"}(IT||(IT={}));const OT=128,AT=96,kT=1e3,xT=10;let PT=0;const DT=new class extends ly{reportLogUploadError(e){this.emit("REPORT_LOG_UPLOAD",e)}};class LT{constructor(e){sh(this,"logger",void 0),sh(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}}function MT(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function jT(){const e=new Date,t=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const UT={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},FT=Date.now(),BT=e=>{for(const t in UT)if(Object.prototype.hasOwnProperty.call(UT,t)&&UT[t]===e)return t;return"DEFAULT"},VT=new class{constructor(){sh(this,"proxyServerURL",void 0),sh(this,"logLevel",UT.DEBUG),sh(this,"uploadState","collecting"),sh(this,"uploadLogWaitingList",[]),sh(this,"uploadLogUploadingList",[]),sh(this,"uploadErrorCount",0),sh(this,"currentLogID",0),sh(this,"url",void 0),sh(this,"extLog",((e,t)=>{this.appendLogToWaitingList(e,...t)}))}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[UT.DEBUG].concat(t);this.log.apply(this,r)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[UT.INFO].concat(t);this.log.apply(this,r)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[UT.WARNING].concat(t);this.log.apply(this,r)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[UT.ERROR].concat(t);this.log.apply(this,r)}upload(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[UT.DEBUG].concat(t);this.uploadLog.apply(this,r)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){ET("UPLOAD_LOG",!0)}disableLogUpload(){ET("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new LT(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-FT<100)return void setTimeout((()=>{this.log(...t)}),Date.now()-FT);const r=Math.max(0,Math.min(4,t[0]));if(t[0]=MT()+" Agora-SDK [".concat(BT(r),"]:"),this.appendLogToWaitingList(r,...t),r<this.logLevel)return;const i=MT()+" %cAgora-SDK [".concat(BT(r),"]:");let s=[];if(!bT("USE_NEW_LOG"))switch(r){case UT.DEBUG:s=[i,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,s);break;case UT.INFO:s=[i,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,s);break;case UT.WARNING:s=[i,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,s);break;case UT.ERROR:s=[i,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,s)}}uploadLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-FT<100)return void setTimeout((()=>{this.uploadLog(...t)}),Date.now()-FT);const r=Math.max(0,Math.min(4,t[0]));t[0]=MT()+" Agora-SDK [".concat(BT(r),"]:"),this.appendLogToWaitingList(r,...t)}appendLogToWaitingList(e){if(!bT("UPLOAD_LOG"))return;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Array.isArray(n[0])?n[0][0]=jT()+" Agora-SDK [".concat(BT(e),"]:"):n[0]=jT()+" Agora-SDK [".concat(BT(e),"]:");let i="";n.forEach((e=>{"object"==typeof e&&(e=JSON.stringify(e)),i+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,t={sdk_version:mT,process_id:bT("PROCESS_ID"),payload:JSON.stringify(e)};return _E((async()=>{const e=await sT.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(bT("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(bT("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if("OK"!==e.data){const t=new Error("unexpected upload log response");throw t.response=e,t}}),(()=>(this.uploadLogUploadingList=[],!1)),(e=>(e.response?DT.reportLogUploadError({status:e.response.status,data:e.response.data,headers:e.response.headers,message:e.message}):e.request?DT.reportLogUploadError({status:e.request.status,message:e.message}):DT.reportLogUploadError({status:-1,message:e.message}),!0)),{timeout:bT("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:bT("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,bT("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then((()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout((()=>this.uploadLogInterval()),bT("UPLOAD_LOG_INTERVAL"))})).catch((e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout((()=>this.uploadLogInterval()),bT("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout((()=>this.uploadLogInterval()),bT("UPLOAD_LOG_RETRY_INTERVAL_V1"))})))}};var GT,HT;function WT(e){return Xv(e.reportId,"params.reportId",0,100,!1),Xv(e.category,"params.category",0,100,!1),Xv(e.event,"params.event",0,100,!1),Xv(e.label,"params.label",0,100,!1),Yv(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}!function(e){e.FREE="free",e.UPLOADING="uploading"}(GT||(GT={})),function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}(HT||(HT={}));const zT={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};var qT,KT,YT,JT;function XT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XT(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities"}(qT||(qT={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities"}(KT||(KT={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(YT||(YT={})),function(e){e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(JT||(JT={}));class QT{constructor(){sh(this,"baseInfoMap",new Map),sh(this,"proxyServer",void 0),sh(this,"eventUploadTimer",void 0),sh(this,"setSessionIdTimer",void 0),sh(this,"url",void 0),sh(this,"backupUrl",void 0),sh(this,"_appId",void 0),sh(this,"keyEventUploadPendingItems",[]),sh(this,"normalEventUploadPendingItems",[]),sh(this,"apiInvokeUploadPendingItems",[]),sh(this,"apiInvokeCount",0),sh(this,"ltsList",[]),sh(this,"lastSendNormalEventTime",Date.now()),sh(this,"customReportCounterTimer",void 0),sh(this,"customReportCount",0),sh(this,"extApiInvoke",(async e=>{for(const t of e){const e=ZT(ZT({},t),{},{sid:null,invokeId:++this.apiInvokeCount,tag:py.TRACER});this.sendApiInvoke(e)}})),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),bT("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),bT("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(e){return this.baseInfoMap.get(e)}adjustSessionStartTime(e){if(!this.baseInfoMap.has(e)&&!this.baseInfoMap.get(e))return void VT.error("adjust session ".concat(e," start time, sid is not exist or info is undefined"));const t=this.baseInfoMap.get(e),n=Date.now(),r=t.startTime;t.startTime=n,VT.debug("rewrite session ".concat(e," startTime: ").concat(n," , ").concat(n-r,"ms")),this.baseInfoMap.set(e,t)}setAppId(e){this._appId=e}reportApiInvoke(e,t,n){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const r=Date.now();this.apiInvokeCount+=1;const i=this.apiInvokeCount,s=()=>({tag:t.tag,invokeId:i,sid:e,name:t.name,apiInvokeTime:r,options:t.options,states:t.states||null}),o=!!bT("SHOW_REPORT_INVOKER_LOG");o&&VT.info("".concat(t.name," start"),t.options);let a=!1;nE(t.timeout).then((()=>{a||(this.sendApiInvoke(ZT(ZT({},s()),{},{error:Wv.API_INVOKE_TIMEOUT,success:!1})),VT.debug("".concat(t.name," timeout")))}));const c=new zv(Wv.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const r=()=>{if(a)throw c;return a=!0,this.sendApiInvoke(ZT(ZT({},s()),{},{success:!0},t.reportResult&&{result:e})),o&&VT.info("".concat(t.name," onSuccess")),e};return n?aE(r,t.name+"Success",n,(()=>a=!0)):r()},onError:e=>{const r=()=>{if(a)throw e;a=!0,this.sendApiInvoke(ZT(ZT({},s()),{},{success:!1,error:e})),o&&VT.info("".concat(t.name," onFailure"),e.toString())};return n?aE(r,t.name+"Error",n,(()=>a=!0)):r()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const n=Date.now(),r=this.createBaseInfo(e,n);r.cname=t.cname;const i=Object.assign({},{willUploadConsoleLog:bT("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:gT?"global":"oversea",areas:bT("AREAS")&&bT("AREAS").join(",")},t.extend),{stringUid:s,channelProfile:o,channelMode:a,isABTestSuccess:c,lsid:l,clientRole:d}=t,u=Date.now(),h=ZT(ZT({},r),{},{eventType:qT.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:vT,lts:u,elapse:u-n,extend:JSON.stringify(i),mode:t.mode,process:bT("PROCESS_ID"),appType:bT("APP_TYPE"),success:!0,version:mT,stringUid:s,channelProfile:o,channelMode:a,isABTestSuccess:c,lsid:l,clientType:20,clientRole:d,serviceId:bT("PROCESS_ID"),extensionID:bT("PLUGIN_INFO").join(",")||""});this.send({type:KT.SESSION,data:h},!0)}joinChooseServer(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=ZT(ZT({},r),{},{eventType:qT.JOIN_CHOOSE_SERVER,lts:i,eventElapse:i-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:i-n.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3});this.send({type:KT.JOIN_CHOOSE_SERVER,data:s},!0)}reqUserAccount(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=ZT(ZT({},r),{},{eventType:qT.REQ_USER_ACCOUNT,lts:i,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:i-n.startTime,eventElapse:i-t.lts,extend:JSON.stringify(t.extend)});this.send({type:KT.REQ_USER_ACCOUNT,data:s},!0)}joinGateway(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info;t.vid&&(r.vid=t.vid),r.uid=t.uid,r.cid=t.cid;const i=Date.now(),{firstSuccess:s,avoidJoinStartTime:o,isProxy:a,addr:c}=t,l=i-(s&&o?o:n.startTime),d=ZT(ZT({},r),{},{eventType:qT.JOIN_GATEWAY,lts:i,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:l,eventElapse:i-t.lts,firstSuccess:s,signalChannel:t.signalChannel}),u=d.success?1:0;if(t.succ&&(n.lastJoinSuccessTime=i),s)this.send({type:KT.JOIN_GATEWAY,data:d},!0);else{let e;if(c)if(a){const t=c.match(/h=(\d{1,3}-){3}\d{1,3}/g),n=c.match(/p=[0-9]{1,6}/g);e={isSuccess:u,gatewayIp:t&&t.length?t[0].split("=")[1].replace(/-/g,"."):"",port:n&&n.length?n[0].split("=")[1]:"",isProxy:a?1:0}}else{const t=c.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),n=c.match(/(:|p=)[0-9]{1,6}/g);e={isSuccess:u,gatewayIp:t&&t.length?t[0].split("//")[1].replace(/-/g,"."):"",port:n&&n.length?n[0].split(/:|p=/g)[1]:"",isProxy:a?1:0}}else e={isSuccess:u,gatewayIp:"",port:"",isProxy:a?1:0};delete d.success,delete d.eventType,delete d.firstSuccess,d.vid=Number(d.vid);const t=Object.assign({},d,e,{eventType:qT.REJOIN_GATEWAY});this.send({type:KT.RE_JOIN_GATEWAY,data:t},!0)}}joinChannelTimeout(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=Date.now(),i=ZT(ZT({},n.info),{},{lts:r,timeout:t,elapse:r-n.startTime});this.send({type:KT.JOIN_CHANNEL_TIMEOUT,data:i},!0)}publish(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=ZT(ZT({},r),{},{eventType:qT.PUBLISH,lts:i,eventElapse:t.eventElapse,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:KT.PUBLISH,data:s},!0)}subscribe(e,t,n){const r=this.baseInfoMap.get(e);if(!r)return;const i=r.info,s=Date.now(),o=ZT(ZT({},i),{},{eventType:qT.SUBSCRIBE,lts:s,eventElapse:t.eventElapse,elapse:s-r.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid},n&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof t.peerid?o.peerSuid=t.peerid:o.peer=t.peerid,this.send({type:KT.SUBSCRIBE,data:o},!0)}wsCompressorInit(e){var t;const n=[...ph(t=this.baseInfoMap).call(t)],r=n.length?n[0]:"UnableToGetSid",i=this.baseInfoMap.get(r);if(!i)return;const s=i.info,o=Date.now(),a=ZT(ZT({},s),{},{eventType:qT.WS_COMPRESSOR_INIT,lts:o,eventElapse:e.eventElapse,elapse:o-i.startTime,status:e.status?1:2});this.send({type:KT.WS_COMPRESSOR_INIT,data:a},!0)}firstRemoteVideoDecode(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const s=i.info,o=Date.now(),a=ZT(ZT(ZT({},s),r),{},{elapse:o-i.startTime,eventType:t,lts:o,firstDecodeFrame:Math.max(o-i.startTime,0),apEnd:Math.max(r.apEnd-i.startTime,0),apStart:Math.max(r.apStart-i.startTime,0),joinGwEnd:Math.max(r.joinGwEnd-i.startTime,0),joinGwStart:Math.max(r.joinGwStart-i.startTime,0),pcEnd:Math.max(r.pcEnd-i.startTime,0),pcStart:Math.max(r.pcStart-i.startTime,0),subscriberEnd:Math.max(r.subscriberEnd-i.startTime,0),subscriberStart:Math.max(r.subscriberStart-i.startTime,0),videoAddNotify:Math.max(r.videoAddNotify-i.startTime,0)});this.send({type:n,data:a},!0)}firstRemoteFrame(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const s=i.info,o=Date.now(),a=ZT(ZT(ZT({},s),r),{},{elapse:o-i.startTime,eventType:t,lts:o});this.send({type:n,data:a},!0)}pcStats(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=ZT(ZT(ZT({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),elapse:i-n.startTime,eventType:qT.PC_STATS,lts:i});this.send({type:KT.PC_STATS,data:s},!0)}updateRemoteRTPCapabilities(e,t){if(e){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=ZT(ZT(ZT({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),eventType:qT.UPDATE_REMOTE_RTPCAPABILITIES,lts:i});this.send({type:KT.UPDATE_REMOTE_RTPCAPABILITIES,data:s},!0)}}onGatewayStream(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const s=i.info,o=Date.now(),a=ZT(ZT(ZT({},s),r),{},{eventType:t,lts:o});this.send({type:n,data:a},!0)}streamSwitch(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=ZT(ZT({},r),{},{eventType:qT.STREAM_SWITCH,lts:i,isDual:t.isdual,elapse:i-n.startTime,success:t.succ});this.send({type:KT.STREAM_SWITCH,data:s},!0)}requestProxyAppCenter(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=ZT(ZT({},r),{},{eventType:qT.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:KT.REQUEST_PROXY_APPCENTER,data:s},!0)}requestProxyWorkerManager(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=ZT(ZT({},r),{},{eventType:qT.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:KT.REQUEST_PROXY_WORKER_MANAGER,data:s},!0)}setProxyServer(e){this.proxyServer=e,e?VT.debug("reportProxyServerurl: ".concat(e)):VT.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=ZT(ZT({},r),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:KT.PEER_PUBLISH_STATUS,data:s},!0)}workerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=function(e,t,n){const r=e[t];if(!r||"string"!=typeof r)return[e];e[t]="";const i=$y(JSON.stringify(e));let s=0;const o=[];let a=0;for(let c=0;c<r.length;c++)a+=r.charCodeAt(c)<=127?1:3,a<=n-i||(o[o.length]=Gy(Gy({},e),{},{[t]:r.substring(s,c)}),s=c,a=r.charCodeAt(c)<=127?1:3);return s!==r.length-1&&(o[o.length]=Gy(Gy({},e),{},{[t]:r.substring(s)})),o}(ZT(ZT(ZT({},r),t),{},{elapse:i-n.startTime,lts:i,productType:"WebRTC"}),"payload",1300);s.forEach((e=>this.send({type:KT.WORKER_EVENT,data:e},!0)))}apworkerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=ZT(ZT(ZT({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:KT.AP_WORKER_EVENT,data:s},!0)}joinWebProxyAP(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=ZT(ZT(ZT({},r),t),{},{elapse:i-n.startTime,lts:i,extend:t.extend||void 0});this.send({type:KT.JOIN_WEB_PROXY_AP,data:s},!0)}WebSocketQuit(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),s=ZT(ZT(ZT({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:KT.WEBSOCKET_QUIT,data:s},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>bT("CUSTOM_REPORT_LIMIT"))throw new zv(Wv.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3));const n=Date.now(),r=t.map((t=>({type:KT.USER_ANALYTICS,data:ZT(ZT({sid:e},t),{},{lts:n})})));try{bT("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(r):await this.postDataToStatsCollector(r)}catch(e){throw VT.error("send custom report message failed",e.toString()),new zv(Wv.CUSTOM_REPORT_SEND_FAILED,e.message)}}sendApiInvoke(e){const t=bT("NOT_REPORT_EVENT");if(e.tag&&Nr(t)&&Nr(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:r,uid:i,cid:s}=n.info;let o;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof zv){const{code:t,message:n}=e.error;o=t||n||e.error.toString()}else o=e.error.toString();const a={invokeId:e.invokeId,sid:e.sid,cname:r,cid:s,uid:i,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?o:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:KT.API_INVOKE,data:a},!1),!0}appendSessionId(){QT.__CLIENT_LIST__.forEach((e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let n=0;n<t;n++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(Object.assign({},t)))}}}))}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>bT("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const n=[],r=[];for(;e.length;){const t=e.shift();n.length<20?n.push(t):r.push(t)}e.push(...r);for(const s of[...n]){var i;-1!==this.ltsList.indexOf(s.data.lts)?(s.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(s.data.lts)):(this.ltsList.push(s.data.lts),ep(i=this.ltsList).call(i,((e,t)=>e-t)))}return t||(this.lastSendNormalEventTime=Date.now()),bT("ENABLE_EVENT_REPORT")?(n.length&&(bT("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((e=>n=>{bT("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(e):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(e),this.normalEventUploadPendingItems.length>bT("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-bT("NORMAL_EVENT_QUEUE_CAPACITY")),VT.warning("report: drop normal events"))))})(n)),e):e}async postDataToStatsCollector2(e){Ny.networkState===vy.OFFLINE&&await cv.race([Ny.onlineWaiter,nE(2*mE.maxRetryTimeout)]);const t=e=>{let t=new Uint8Array;return e.forEach((e=>{const n=sy(JSON.stringify(e.data)),r=new ArrayBuffer(5),i=(e=>{let t=0;return Object.entries(KT).forEach((n=>{let[r,i]=n;i===e.type&&(t=EventNameToID[r])})),t})(e),s=new DataView(r);s.setUint16(0,n.byteLength,!0),s.setUint8(2,255&i),s.setUint8(3,i>>>8&255),s.setUint8(4,i>>>16&255),t=oy(t,new Uint8Array(r)),t=oy(t,n)})),t},n="event";let r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(bT("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(n):"https://".concat(bT("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(n);for(let i=0;i<2;i+=1){1===i&&(r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(bT("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(n):"https://".concat(bT("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(n));try{await uT(r,{timeout:1e4,data:t(e),headers:ZT(ZT({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(e){if(1===i)throw e;continue}return}}async postDataToStatsCollector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:e.map((e=>JSON.stringify(e))),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(e[0])};Ny.networkState===vy.OFFLINE&&await cv.race([Ny.onlineWaiter,nE(2*mE.maxRetryTimeout)]);const r=t?"/events/proto-raws":"/events/messages";let i=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(bT("EVENT_REPORT_DOMAIN"),"&p=").concat(bT("STATS_COLLECTOR_PORT"),"&d=").concat(r):"https://".concat(bT("EVENT_REPORT_DOMAIN"),":").concat(bT("STATS_COLLECTOR_PORT")).concat(r));for(let s=0;s<2;s+=1){1===s&&(i=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(bT("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(bT("STATS_COLLECTOR_PORT"),"&d=").concat(r):"https://".concat(bT("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(bT("STATS_COLLECTOR_PORT")).concat(r)));try{t?await hT(i,{timeout:1e4,data:n}):await uT(i,{timeout:1e4,data:n})}catch(t){if(1===s)throw t;continue}return}}createBaseInfo(e,t){const n=Object.assign({},zT);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}reportResourceTiming(e,t){const n=performance.getEntriesByName(e),r=n[n.length-1];r&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:r,tag:py.TRACER}).onSuccess()}}function $T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){const i=r.value;if("function"==typeof i){const s=e.className||t.__className__||("AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name);r.value=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];let a=r;if(e.argsMap)try{a=e.argsMap(this,...r)}catch(e){VT.warning(e),a=[]}try{JSON.stringify(a)}catch(e){VT.warning("arguments for method ".concat(s,".").concat(String(n)," not serializable for apiInvoke.")),a=[]}const c=(e.report||eS).reportApiInvoke(this._sessionId||null,{name:"".concat(s,".").concat(String(n)),options:a,tag:py.TRACER,reportResult:e.reportResult},e.throttleTime);try{const t=i.apply(this,r);return t instanceof cv?t.then((t=>(c.onSuccess(e.reportResult&&t),t))).catch((e=>{throw c.onError(e),e})):(c.onSuccess(e.reportResult&&t),t)}catch(e){throw c.onError(e),e}}}return r}}sh(QT,"__CLIENT_LIST__",[]);const eS=new QT;DT.on("REPORT_LOG_UPLOAD",(e=>{e.networkState=Ny.networkState,eS.reportApiInvoke(null,{name:"logUploadError",options:e,tag:py.TRACER})}));const tS=["CHINA","GLOBAL"],nS=function(){const e="us".concat("erna","me"),t="pa".concat("sswo","rd"),n=["t","s","t"];n.splice(1,0,"e");const r=n.join(""),i=[];for(let a=0;a<6;a++)i.push("1");const s=i.join(""),o={};return o[e]=r,o[t]=s,Object.assign(o,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=nS,gT||(yT.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],yT.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],yT.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],yT.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],yT.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],yT.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],yT.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",yT.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",yT.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",yT.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",yT.AREAS=["NORTH_AMERICA","OVERSEA"]);const rS=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],iS=[];function sS(e,t){return!!t&&iS.some((n=>n.uid===e&&n.channelName===t))}QT.__CLIENT_LIST__=iS;var oS,aS,cS,lS,dS,uS,hS,pS,fS,mS,gS,_S,vS,yS,ES,bS,TS,SS=Xn("Array").values,wS=ur,CS=$e,RS=u,IS=SS,NS=Array.prototype,OS={DOMTokenList:!0,NodeList:!0},AS=r((function(e){var t=e.values;return e===NS||RS(NS,e)&&t===NS.values||CS(OS,wS(e))?IS:t}));function kS(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function xS(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}!function(e){e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY"}(oS||(oS={})),function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(aS||(aS={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(cS||(cS={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(lS||(lS={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(dS||(dS={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(uS||(uS={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(hS||(hS={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(pS||(pS={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_CONNECTING="datachannel_connecting",e.DATACHANNEL_FAILBACK="datachannel_failback",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream"}(fS||(fS={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag"}(mS||(mS={})),function(e){e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats"}(gS||(gS={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list"}(_S||(_S={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(vS||(vS={})),function(e){e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY"}(yS||(yS={})),function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"}(ES||(ES={}));class PS extends zv{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2?arguments[2]:void 0),sh(this,"name","AgoraRTCException")}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return super.print(e,VT)}throw(){super.throw(VT)}}function DS(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw VT.error("Invalid Channel Name ".concat(e)),new PS(Wv.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function LS(e){if(!("number"==typeof(t=e)&&Math.floor(t)===t&&0<=t&&t<=4294967295||$v(e,1,255)))throw new PS(Wv.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var t;"string"==typeof e&&VT.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}!function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(bS||(bS={})),function(e){e[e.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",e[e.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",e[e.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",e[e.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",e[e.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",e[e.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",e[e.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",e[e.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",e[e.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(TS||(TS={}));const MS={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},jS={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function US(e,t){Xv(e.url,"".concat(t,".url"),1,1e3,!1),Qv(e.x)||Yv(e.x,"".concat(t,".x"),0,1e4),Qv(e.y)||Yv(e.y,"".concat(t,".y"),0,1e4),Qv(e.width)||Yv(e.width,"".concat(t,".width"),0,1e4),Qv(e.height)||Yv(e.height,"".concat(t,".height"),0,1e4),Qv(e.zOrder)||Yv(e.zOrder,"".concat(t,".zOrder"),0,255),Qv(e.alpha)||Yv(e.alpha,"".concat(t,".alpha"),0,1,!1)}const FS={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},BS={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};var VS,GS,HS,WS,zS,qS,KS,YS,JS,XS,ZS,QS,$S,ew;function tw(e){if(!e.channelName)throw new PS(Wv.INVALID_PARAMS,"invalid channelName in info");if("number"!=typeof e.uid)throw new PS(Wv.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&Xv(e.token,"info.token",1,2047),LS(e.uid),DS(e.channelName),!0}!function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(VS||(VS={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(GS||(GS={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(HS||(HS={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(WS||(WS={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(zS||(zS={})),function(e){e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(qS||(qS={})),function(e){e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(KS||(KS={})),function(e){e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(YS||(YS={})),function(e){e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low"}(JS||(JS={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_FAILBACK="datachannel_failback",e.RESET_SIGNAL="reset-signal"}(XS||(XS={})),function(e){e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON"}(ZS||(ZS={})),function(e){e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7"}(QS||(QS={})),function(e){e[e.websocket=0]="websocket",e[e.datachannel=1]="datachannel"}($S||($S={})),function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS"}(ew||(ew={}));const nw=[ew.AFRICA,ew.ASIA,ew.CHINA,ew.EUROPE,ew.GLOBAL,ew.INDIA,ew.JAPAN,ew.NORTH_AMERICA,ew.OCEANIA,ew.OVERSEA,ew.SOUTH_AMERICA];var rw;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL"}(rw||(rw={}));const iw={CHINA:{},ASIA:{CODE:rw.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:rw.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:rw.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:rw.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:rw.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:rw.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:rw.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:rw.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:rw.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:rw.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:rw.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:rw.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:rw.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};var sw,ow,aw,cw,lw,dw,uw,hw,pw,fw,mw,gw,_w,vw,yw,Ew,bw,Tw,Sw,ww,Cw,Rw,Iw,Nw;gT&&(iw.CHINA={CODE:rw.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(sw||(sw={}));class Ow extends ly{constructor(e,t){super(),sh(this,"onICEConnectionStateChange",void 0),sh(this,"onConnectionStateChange",void 0),sh(this,"onDTLSTransportStateChange",void 0),sh(this,"onDTLSTransportError",void 0),sh(this,"onICETransportStateChange",void 0),sh(this,"onFirstAudioReceived",void 0),sh(this,"onFirstVideoReceived",void 0),sh(this,"onFirstAudioDecoded",void 0),sh(this,"onFirstVideoDecoded",void 0),sh(this,"onFirstVideoDecodedTimeout",void 0),sh(this,"onSelectedLocalCandidateChanged",void 0),sh(this,"onSelectedRemoteCandidateChanged",void 0)}}class Aw extends Ow{constructor(e,t){super(e,t)}}!function(e){e.SEND="sendonly",e.RECV="recvonly",e.SENDRECV="sendrecv",e.INACTIVE="inactive"}(ow||(ow={})),function(e){e.VIDEO="video",e.AUDIO="audio"}(aw||(aw={})),function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY"}(cw||(cw={})),function(e){e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(lw||(lw={})),function(e){e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack"}(dw||(dw={})),function(e){e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected"}(uw||(uw={})),function(e){e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE"}(hw||(hw={})),function(e){e.MUTE_LOCAL_VIDEO="mute_local_video",e.MUTE_LOCAL_AUDIO="mute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.MUTE_REMOTE_VIDEO="mute_remote_video",e.MUTE_REMOTE_AUDIO="mute_remote_audio",e.UNMUTE_REMOTE_VIDEO="unmute_remote_video",e.UNMUTE_REMOTE_AUDIO="unmute_remote_audio"}(pw||(pw={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(fw||(fw={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(mw||(mw={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(gw||(gw={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(_w||(_w={})),function(e){e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback"}(vw||(vw={})),function(e){e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation"}(yw||(yw={})),function(e){e[e.APP_TYPE_INVALID_VALUE=-1]="APP_TYPE_INVALID_VALUE",e[e.APP_TYPE_NATIVE=0]="APP_TYPE_NATIVE",e[e.APP_TYPE_NATIVE_COCOS=1]="APP_TYPE_NATIVE_COCOS",e[e.APP_TYPE_NATIVE_UNITY=2]="APP_TYPE_NATIVE_UNITY",e[e.APP_TYPE_NATIVE_ELECTRON=3]="APP_TYPE_NATIVE_ELECTRON",e[e.APP_TYPE_NATIVE_FLUTTER=4]="APP_TYPE_NATIVE_FLUTTER",e[e.APP_TYPE_NATIVE_UNREAL=5]="APP_TYPE_NATIVE_UNREAL",e[e.APP_TYPE_NATIVE_XAMARIN=6]="APP_TYPE_NATIVE_XAMARIN",e[e.APP_TYPE_NATIVE_API_CLOUD=7]="APP_TYPE_NATIVE_API_CLOUD",e[e.APP_TYPE_NATIVE_REACT_NATIVE=8]="APP_TYPE_NATIVE_REACT_NATIVE",e[e.APP_TYPE_NATIVE_PYTHON=9]="APP_TYPE_NATIVE_PYTHON",e[e.APP_TYPE_NATIVE_COCOS_CREATOR=10]="APP_TYPE_NATIVE_COCOS_CREATOR",e[e.APP_TYPE_NATIVE_RUST=11]="APP_TYPE_NATIVE_RUST",e[e.APP_TYPE_NATIVE_C_SHARP=12]="APP_TYPE_NATIVE_C_SHARP",e[e.APP_TYPE_NATIVE_CEF=13]="APP_TYPE_NATIVE_CEF",e[e.APP_TYPE_NATIVE_UNI_APP=14]="APP_TYPE_NATIVE_UNI_APP",e[e.APP_TYPE_WEBRTC=1e3]="APP_TYPE_WEBRTC",e[e.APP_TYPE_WEBRTC_REACT=1001]="APP_TYPE_WEBRTC_REACT",e[e.APP_TYPE_WEBRTC_VUE=1002]="APP_TYPE_WEBRTC_VUE",e[e.APP_TYPE_WEBRTC_ANGULAR=1003]="APP_TYPE_WEBRTC_ANGULAR"}(Ew||(Ew={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(bw||(bw={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(Tw||(Tw={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(Sw||(Sw={})),function(e){e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check"}(ww||(ww={})),function(e){e.ABORT="abort"}(Cw||(Cw={})),function(e){e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video"}(Rw||(Rw={})),function(e){e[e.SUCCESS=1]="SUCCESS",e[e.FAILED=0]="FAILED"}(Iw||(Iw={})),function(e){e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed"}(Nw||(Nw={}));const kw={[cS.ACCESS_POINT]:{[uS.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[uS.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[uS.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[uS.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[uS.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[uS.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[uS.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[uS.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[uS.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[uS.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[uS.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[uS.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[uS.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[uS.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[uS.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[uS.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[uS.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[uS.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[cS.UNILBS]:{[dS.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[dS.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[dS.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[dS.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[dS.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[dS.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[dS.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[dS.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[dS.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[dS.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[dS.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[dS.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[cS.STRING_UID_ALLOCATOR]:{[lS.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[lS.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[lS.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function xw(e){const t=kw[Math.floor(e/1e4)];if(!t)return{desc:"unkonw error",retry:!1};const n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===cS.ACCESS_POINT){const t=e%1e4;if("1"===t.toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return n}const Pw={[hS.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[hS.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[hS.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[hS.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[hS.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[hS.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[hS.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[hS.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[hS.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[hS.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[hS.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[hS.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[hS.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[hS.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[hS.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[hS.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[hS.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[hS.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[hS.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[hS.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[hS.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[hS.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[hS.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[hS.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[hS.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[hS.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[hS.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[hS.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[hS.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[hS.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[hS.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[hS.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[hS.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[hS.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[hS.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[hS.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[hS.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[hS.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[hS.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[hS.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[hS.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[hS.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[hS.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[hS.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[hS.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[hS.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[hS.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[hS.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[hS.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[hS.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[hS.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[hS.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[hS.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[hS.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[hS.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[hS.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[hS.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[hS.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[hS.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[hS.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[hS.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[hS.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[hS.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function Dw(e){return Pw[e]||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}function Lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lw(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jw(e){return e.every((e=>e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING))}function Uw(e,t){if("string"==typeof e)return e;const{proxy:n,host:r,port:i}=e;if(t){const e=bT("JOIN_GATEWAY_FALLBACK_PORT")||443;return 443===e?"wss://".concat(r,"/ws/?p=").concat(Number(i)+150):"wss://".concat(r,":").concat(e,"/ws/?p=").concat(Number(i)+150)}return n?"wss://".concat(n,"/ws/?h=").concat(r,"&p=").concat(i):"wss://".concat(r,":").concat(i)}const Fw=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,Bw=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,Vw=/wss:\/\/(.+):([0-9]+)\/?/,Gw=/wss:\/\/(.[^\/]+)\/?/;let Hw=0;class Ww{constructor(e,t){sh(this,"id",0),sh(this,"store",void 0),sh(this,"recordIndex",void 0),sh(this,"websockets",[]),sh(this,"try443PortDuration",2e3),sh(this,"forceCloseWSDuration",5e3),sh(this,"try443PortTimeout",null),sh(this,"forceCloseTimeout",null),sh(this,"isTry443PortFailed",!1),sh(this,"isNormalPortFailed",!1),sh(this,"useDoubleDomain",!1),sh(this,"useProxy",!1),sh(this,"startTime",Date.now()),this.id=++Hw,this.try443PortDuration=bT("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach((e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()})),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var e;const t=Date.now()-this.startTime;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];VT.debug("[choose-best-ws ".concat(null===(e=this.store)||void 0===e?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:"),...r)}createWebSocket(e,t,n){this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:n});const r=bT("GATEWAY_DOMAINS"),i=Date.now(),s=[],o=r.find((t=>{var n;return Nr(n=e.host).call(n,t)}));o||(this.useDoubleDomain=!1);const a=[];if(this.useDoubleDomain)r.forEach((n=>{a.push(Uw(Mw(Mw({},e),{},{host:e.host.replace(o,n)}),t))}));else{const n=Mw({},e);if(t&&o){const e=r.find((e=>e!==o));e&&(n.host=n.host.replace(o,e))}a.push(Uw(n,t))}try{a.forEach((e=>{const t=new WebSocket(e);t.binaryType="arraybuffer",s.push(t),this.logger("ws is connecting:",t.url)}))}catch(r){if(this.logger("ws create failed"),s.forEach((e=>e.close())),s.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,n);if(!t&&443!==Number(e.port))return this.createWebSocket(e,!0,n);throw new PS(Wv.WS_ERR,"init websocket failed! Error: ".concat(r.toString()))}const c=dv();return this.store&&this.store.recordJoinChannelService({urls:s.map((e=>e.url)),service:"gateway"},this.recordIndex),s.forEach((e=>{e.onopen=()=>{this.logger("onopen: ws ".concat(e.url," open cost ").concat(Date.now()-i,"ms")),this.websockets.forEach((t=>{t!==e&&(t.onopen=null,t.onclose=null,t.onmessage=null,t.close(),this.logger("close backup websocket: ".concat(t.url)))})),this.websockets.length=0,c.resolve(e)},e.onclose=n=>{this.logger("onclose: ws ".concat(e.url," closed cost ").concat(Date.now()-i,"ms state: ").concat(e.readyState)),t?this.isTry443PortFailed=jw(s):this.isNormalPortFailed=jw(s),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),(t&&this.isTry443PortFailed||!t&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(n.reason)),c.reject({code:n.code,reason:ZS.A_ROUND_WS_FAILED}))},e.onmessage=t=>this.logger("".concat(e.url," onmessage: ").concat(t.data))})),this.websockets.push(...s),n||(()=>{const n=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",c.isResolved),this.websockets.forEach((e=>e.readyState!==WebSocket.OPEN&&e.close()))};if(t||this.useProxy)return this.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(n,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout((()=>{if(this.logger("2s timeout, isWebsocket created: ",c.isResolved),c.isResolved)return n();Ev().os===fv.MAC_OS&&Nv()&&n(),this.createWebSocket(e,!0,!0).then((e=>c.resolve(e))).catch((e=>{this.isNormalPortFailed&&c.reject(e),this.logger("try 443 port to create ws failed")})),this.forceCloseTimeout=window.setTimeout(n,this.forceCloseWSDuration)}),this.try443PortDuration)})(),c.promise}chooseBestWebsocket(e,t,n,r){return this.useDoubleDomain=!!t,"string"==typeof e&&(e=function(e){let t,n,r;return[,t,n,r]=e.match(Fw)||[],t||([,n,r]=e.match(Bw)||[]),n&&r||([,n,r]=e.match(Vw)||[]),n&&r||([,n]=e.match(Gw)||[]),n||VT.warning("un-destructible url: ",e),{proxy:t,host:n,port:r||"443"}}(e)),this.recordIndex=r,this.useProxy=!!e.proxy,n&&this.useProxy&&(VT.warn("cannot use 443 only when use proxy"),n=!1),this.createWebSocket(e,!!n,!1).finally((()=>this.clearTimeout()))}}function zw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class qw extends ly{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Nr(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(ES.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(ES.CONNECTED):"closed"===this._state?this.emit(ES.CLOSED):"failed"===this._state&&this.emit(ES.FAILED))}resetReconnectCount(e){VT.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0;super(),sh(this,"connectionID",0),sh(this,"currentURLIndex",0),sh(this,"urls",[]),sh(this,"_reconnectMode","tryNext"),sh(this,"reconnectReason",void 0),sh(this,"_initMutex",new pE("websocket")),sh(this,"name",void 0),sh(this,"_state","closed"),sh(this,"reconnectInterrupter",void 0),sh(this,"websocket",void 0),sh(this,"retryConfig",void 0),sh(this,"reconnectCount",0),sh(this,"forceCloseTimeout",5e3),sh(this,"onlineReconnectListener",void 0),sh(this,"useCompress",void 0),sh(this,"tryDoubleDomain",!1),sh(this,"use443PortOnly",!1),sh(this,"wsInflateLength",0),sh(this,"wsDeflateLength",0),sh(this,"closeEstablishingWs",(()=>{})),sh(this,"store",void 0),sh(this,"joinGatewayRecordIndex",void 0),this.store=s,this.name=e,this.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zw(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this.useCompress=n,this.tryDoubleDomain=r,this.use443PortOnly=i;const{timeout:o,timeoutFactor:a}=t,c=Math.max(300,Math.floor(3*o/5)),l=Math.max(1.2,Math.floor(8*a)/10);vy.ONLINE&&(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l),Ny.on(yy.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===vy.ONLINE?(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l):(this.retryConfig.timeout=o,this.retryConfig.timeoutFactor=a))}))}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=await this._initMutex.lock();this.forceCloseTimeout=t,this.urls=e,this.state="connecting";try{const e=dv(),t=this.urls[this.currentURLIndex];this.createWebSocketConnection(t).then(e.resolve).catch(e.reject),this.once(ES.CLOSED,(()=>{e.reject(new zv(Wv.WS_DISCONNECT))})),this.once(ES.CONNECTED,e.resolve),await e.promise}catch(e){}finally{n()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?setTimeout((()=>e.close()),500):e.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void VT.warning("[".concat(this.name,"] can not reconnect, no websocket"));void 0!==e&&(this.reconnectMode=e),VT.debug("[".concat(this.name,"] reconnect is triggered initiative")),"number"==typeof this.joinGatewayRecordIndex&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);const n=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),n&&n.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new zv(Wv.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new zv(Wv.WS_ERR,"send websocket message error"+e.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;const n=dv();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const r=e=>{var t;null===(t=this.store)||void 0===t||t.signalChannelOpen(),VT.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),n.resolve()},i=async e=>{var t;if(VT.debug("[".concat(this.name,"] websocket close ").concat(null===(t=this.websocket)||void 0===t?void 0:t.url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)n.reject(new zv(Wv.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close();else{"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const t=Ry(this,ES.WILL_RECONNECT,this.reconnectMode,e.reason)||this.reconnectMode,r=await this.reconnectWithAction(t);if("closed"===this.state)return void VT.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!r)return n.reject(new zv(Wv.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),this.close(!0);n.resolve()}},s=e=>{this.emit(ES.ON_MESSAGE,e)},o=e=>{VT.warn("[".concat(this.connectionID,"] ws open error ").concat(e))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),bT("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=bT("GATEWAY_WSS_ADDRESS")),VT.debug("[".concat(this.name,"] start connect, url:"),e);const a=null===(t=this.store)||void 0===t?void 0:t.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var c;const t=await this.chooseBestWebsocketConnection(e);this.websocket=t,r&&r(this.websocket.url),this.websocket.onclose=i,this.websocket.onmessage=s,this.websocket.onerror=o,null===(c=this.store)||void 0===c||c.recordJoinChannelService({endTs:Date.now(),status:"success"},a),this.joinGatewayRecordIndex=a}catch(e){const t="closed"===this.state,r=e instanceof zv,s=r&&e.code===Wv.WS_ABORT,o=r&&e.code===Wv.WS_ERR,c=r?e.message:e&&(e.reason||e.toString());VT.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(c)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:s?"aborted":"error",errors:[e]},a),t||o?(n.reject(t?new zv(Wv.WS_DISCONNECT,"websocket is closed: ".concat(c)):new zv(Wv.WS_ERR,"init websocket failed: ".concat(c))),o&&VT.error("[".concat(this.name,"] init websocket failed: ").concat(c))):i&&i(e)}return n.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(0===this.urls.length)return!1;if("closed"===this.state)return!1;VT.warning("[choose-best-ws] action: =>",e),this.onlineReconnectListener||Ny.isOnline||!Ny.onlineWaiter||(this.onlineReconnectListener=Ny.onlineWaiter.then((()=>{this.onlineReconnectListener=void 0})));let n=!0;if(this.reconnectInterrupter=()=>n=!1,t){const t=gE(this.reconnectCount,this.retryConfig);VT.debug("[".concat(this.name,"] wait ").concat(t,"ms to reconnect websocket, mode: ").concat(e)),await cv.race([nE(t),this.onlineReconnectListener||new cv((()=>{}))])}if("closed"===this._state||!n)return!1;this.reconnectCount+=1;const r=async(e,t)=>{this.emit(ES.RECONNECT_CREATE_CONNECTION,t),await this.createWebSocketConnection(e)};try{if("retry"===e)this.emit(ES.RECONNECT_WAITTING_FINISH,e),await r(this.urls[this.currentURLIndex],e);else if("tryNext"===e){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);VT.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit(ES.RECONNECT_WAITTING_FINISH,e),await r(this.urls[this.currentURLIndex],e)}else"recover"===e&&(VT.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(ES.RECONNECT_WAITTING_FINISH,e),this.urls=await wy(this,ES.REQUEST_NEW_URLS),this.currentURLIndex=0,await r(this.urls[this.currentURLIndex],e))}catch(n){var i;VT.error("[".concat(this.name,"] reconnect failed ").concat(n&&n.toString()));const r=null==n||null===(i=n.data)||void 0===i?void 0:i.desc;return Array.isArray(r)&&Nr(r).call(r,"dynamic key expired")?(this.emit(ES.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}}class Kw extends qw{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){const n=dv(),r=function(e,t){return new Ww(e,t)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{VT.debug("[choose-best-ws] close establishing websockets"),r.closeAllWebsockets(),n.reject(new zv(Wv.WS_ABORT,"choose best websocket aborted"))};const i=bT("GATEWAY_DOMAINS");return VT.debug("[choose-best-ws] currentDomain: ",e,", domains: ",i,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),r.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(n.resolve).catch(n.reject),n.promise.finally((()=>{this.closeEstablishingWs=void 0}))}}class Yw extends qw{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new cv(((n,r)=>{let i=!1;const s=[];this.closeEstablishingWs=()=>{VT.debug("[choose-best-ws] close establishing websockets"),s.forEach((e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),r(new zv(Wv.WS_ABORT,"choose best websocket aborted"))};const o=bT("GATEWAY_DOMAINS");let a;const c=e.indexOf("?h="),l=o.find((t=>-1!==c?Nr(e).call(e,t,c):Nr(e).call(e,t)));VT.debug("[choose-best-ws] currentDomain: ",l,", domains: ",o);let d=!this.tryDoubleDomain||!l;if(!d&&l){var u;const h=Date.now();try{o.forEach((t=>{const n=-1===c?e.replace(l,t):e.substr(0,c)+e.substr(c).replace(l,t),r=new WebSocket(n);r.binaryType="arraybuffer",s.push(r),VT.debug("[choose-best-ws] ws is connecting:",r.url)}))}catch(e){for(VT.debug("[choose-best-ws] ws create failed, fallback to single url"),s.forEach((e=>e.close()));s.length;)s.pop();d=!0}null===(u=this.store)||void 0===u||u.recordJoinChannelService({urls:s.map((e=>e.url)),service:"gateway"},t),s.forEach((e=>{e.onopen=()=>{if(i)return;const t=Date.now()-h;VT.debug("[choose-best-ws] ws open cost ".concat(t,"ms")),s.filter((t=>t!==e)).forEach((e=>{VT.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()})),i=!0,n(e)},e.onclose=e=>{a=e,i||s.find((e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)))||(VT.debug("[choose-best-ws] all websocket is closed"),i=!0,r(a))},e.onmessage=t=>{VT.debug("[choose-best-ws]".concat(e.url," onmessage: ").concat(t.data))}})),nE(this.forceCloseTimeout).then((()=>{s.forEach((e=>{e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(d){var h;let i;VT.debug("[choose-best-ws] use single url: ",e),null===(h=this.store)||void 0===h||h.recordJoinChannelService({urls:[e],service:"gateway"},t);try{i=new WebSocket(e),s.push(i),i.binaryType="arraybuffer"}catch(e){const n=new zv(Wv.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return VT.error("[".concat(this.name,"]").concat(n)),void r(n)}i.onopen=()=>{n(i)},i.onclose=e=>{r(e)},i.onmessage=e=>{VT.debug("[choose-best-ws]".concat(i.url," onmessage: ").concat(e.data))},nE(this.forceCloseTimeout).then((()=>{i&&i.readyState!==WebSocket.OPEN&&i.close()}))}})).then((e=>(this.closeEstablishingWs=void 0,e))).catch((e=>{throw this.closeEstablishingWs=void 0,e}))}}class Jw extends ly{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===pS.CONNECTED?this.emit(fS.WS_CONNECTED):e===pS.RECONNECTING?this.emit(fS.WS_RECONNECTING,this._websocketReconnectReason):e===pS.CLOSED&&this.emit(fS.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),sh(this,"_disconnectedReason",void 0),sh(this,"_websocketReconnectReason",void 0),sh(this,"_connectionState",pS.CLOSED),sh(this,"reconnectToken",void 0),sh(this,"websocket",void 0),sh(this,"openConnectionTime",void 0),sh(this,"clientId",void 0),sh(this,"lastMsgTime",Date.now()),sh(this,"uploadCache",[]),sh(this,"uploadCacheInterval",void 0),sh(this,"rttRolling",new vE(5)),sh(this,"pingpongTimer",void 0),sh(this,"wsInflateDataTimer",void 0),sh(this,"pingpongTimeoutCount",0),sh(this,"joinResponse",void 0),sh(this,"multiIpOption",void 0),sh(this,"initError",void 0),sh(this,"spec",void 0),sh(this,"store",void 0),sh(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(fS.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){if(this.emit(t._type,t._message),t._type===_S.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===_S.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(my.UID_BANNED);break;case 15:this.close(my.IP_BANNED);break;case 16:this.close(my.CHANNEL_BANNED)}if(t._type===_S.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case hS.ERR_LICENSE_MISSING:this.close(my.LICENSE_MISSING);break;case hS.ERR_LICENSE_EXPIRED:this.close(my.LICENSE_EXPIRED);break;case hS.ERR_LICENSE_MINUTES_EXCEEDED:this.close(my.LICENSE_MINUTES_EXCEEDED);break;case hS.ERR_LICENSE_PERIOD_INVALID:this.close(my.LICENSE_PERIOD_INVALID);break;case hS.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(my.LICENSE_MULTIPLE_SDK_SERVICE);break;case hS.ERR_LICENSE_ILLEGAL:this.close(my.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new Kw("gateway-".concat(this.clientId),this.spec.retryConfig,!0,bT("JOIN_GATEWAY_USE_DUAL_DOMAIN"),bT("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===pS.CONNECTED&&this.reconnect("retry",_y.OFFLINE)}))}async request(e,t,n,r){const i=rE(6,""),s={_id:i,_type:e,_message:t},o=this.websocket.connectionID,a=()=>new cv(((t,n)=>{if(this.connectionState===pS.CONNECTED)return t();const r=()=>{this.off(fS.WS_CLOSED,i),t()},i=()=>{this.off(fS.WS_CONNECTED,r),n(new PS(Wv.WS_ABORT))};this.once(fS.WS_CONNECTED,r),this.once(fS.WS_CLOSED,i),e!==mS.PUBLISH&&e!==mS.PUBLISH_DATASTREAM&&e!==mS.SUBSCRIBE&&e!==mS.SUBSCRIBE_DATASTREAM&&e!==mS.UNSUBSCRIBE&&e!==mS.UNSUBSCRIBE_DATASTREAM&&e!==mS.UNPUBLISH&&e!==mS.UNPUBLISH_DATASTREAM&&e!==mS.CONTROL&&e!==mS.RESTART_ICE||this.once(fS.DISCONNECT_P2P,(()=>{n(new PS(Wv.DISCONNECT_P2P))})),e!==mS.PUBLISH&&e!==mS.RESTART_ICE||this.once(fS.ABORT_P2P_EXECUTION,(()=>{n(new PS(Wv.DISCONNECT_P2P))}))}));if(this.connectionState!==pS.CONNECTING&&this.connectionState!==pS.RECONNECTING||e===mS.JOIN||e===mS.REJOIN||await a(),this.websocket.sendMessage(s,!0),r)return;const c=new cv(((n,r)=>{let s=!1;const a=(r,i)=>{s=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(fS.WS_CLOSED,c),this.off(fS.WS_RECONNECTING,c),this.emit(fS.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new PS(Wv.WS_ABORT,"type: ".concat(e))),this.off(fS.WS_CLOSED,c),this.off(fS.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(fS.WS_CLOSED,c),this.once(fS.WS_RECONNECTING,c),nE(bT("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==o||s||(VT.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(fS.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===pS.CLOSED||e===mS.LEAVE)throw new PS(Wv.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===mS.JOIN||e===mS.REJOIN?null:(await a(),await this.request(e,t))}if(l.isSuccess)return l.message;const d=Number(l.message.error_code||l.message.code),u=Dw(d),h=new PS(Wv.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(l.message.error_str),{code:d,data:l.message});return"success"===u.action?l.message:(VT.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(d,", message: ").concat(u.desc,", action: ").concat(u.action)),d===hS.ERR_TOO_MANY_BROADCASTERS?e===mS.JOIN||e===mS.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===u.action?h.throw():"quit"===u.action?(this.initError=h,this.close(),h.throw()):(d===hS.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,VT.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",_y.MULTI_IP)):this.reconnect(u.action,_y.SERVER_ERROR),e===mS.JOIN||e===mS.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new cv((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void VT.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(gS.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=bT("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==pS.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),bT("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new cv(((t,n)=>{this.once(fS.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(fS.WS_CLOSED,(()=>n(this.initError||new PS(Wv.WS_ABORT)))),this.connectionState=pS.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval((()=>{this.handleWsInflateData()}),2e4)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||my.LEAVE,this.connectionState=pS.CLOSED,VT.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===my.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new Kw("gateway-".concat(this.clientId),this.spec.retryConfig,!0,bT("JOIN_GATEWAY_USE_DUAL_DOMAIN"),bT("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(fS.ABORT_P2P_EXECUTION);const e=await wy(this,fS.REQUEST_JOIN_INFO),t=await this.request(mS.JOIN,e);if(!t)return this.emit(fS.REPORT_JOIN_GATEWAY,ZS.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(fS.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=pS.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new PS(Wv.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=Iy(this,fS.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(mS.REJOIN,e);return!!t&&(this.connectionState=pS.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(_S.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(_S.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(_S.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(_S.MUTE_AUDIO,{uid:e.uid}):this.emit(_S.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(_S.MUTE_VIDEO,{uid:e.uid}):this.emit(_S.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(_S.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(_S.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(_S.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(_S.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(_S.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){VT.debug("[".concat(this.clientId,"] receive notification: "),e);const t=Dw(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(my.UID_BANNED),void this.close()):void this.reconnect(t.action,_y.SERVER_ERROR);VT.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=bT("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(VT.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>bT("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",_y.TIMEOUT):this.request(mS.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),bT("REPORT_STATS")&&this.send(mS.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(gS.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(ES.RECONNECT_WAITTING_FINISH,(e=>{this.emit(fS.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(ES.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(fS.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(ES.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ES.CLOSED,(()=>{this.connectionState=pS.CLOSED})),this.websocket.on(ES.FAILED,(()=>{this._disconnectedReason=my.NETWORK_ERROR,this.connectionState=pS.CLOSED})),this.websocket.on(ES.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===pS.CONNECTED?this.connectionState=pS.RECONNECTING:this.connectionState=pS.CONNECTING})),this.websocket.on(ES.WILL_RECONNECT,((e,t,n)=>{const r=Iy(this,fS.IS_P2P_DISCONNECTED),i=r||"retry"!==e;r&&"retry"===e&&(VT.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e="tryNext",t=ZS.P2P_DISCONNECTED),i&&(VT.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(e)),this.emit(fS.REPORT_JOIN_GATEWAY,t||ZS.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(fS.NEED_RENEW_SESSION),this.emit(fS.DISCONNECT_P2P)),n(e)})),this.websocket.on(ES.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{VT.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",_y.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(fS.REPORT_JOIN_GATEWAY,e.message||e.code||ZS.UNKNOWN_REASON,this.url||""),e instanceof PS&&e.code===Wv.UNEXPECTED_RESPONSE&&e.data.code===hS.ERR_NO_AUTHORIZED)return VT.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",_y.SERVER_ERROR);VT.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",_y.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(ES.REQUEST_NEW_URLS,((e,t)=>{wy(this,fS.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(ES.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(_S.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}var Xw="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",Zw=X,Qw=fr,$w=Xw,eC=d("".replace),tC=RegExp("^["+$w+"]+"),nC=RegExp("(^|[^"+$w+"])["+$w+"]+$"),rC=function(e){return function(t){var n=Qw(Zw(t));return 1&e&&(n=eC(n,tC,"")),2&e&&(n=eC(n,nC,"$1")),n}},iC={start:rC(1),end:rC(2),trim:rC(3)},sC=Jl.PROPER,oC=i,aC=Xw,cC=iC.trim;An({target:"String",proto:!0,forced:function(e){return oC((function(){return!!aC[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||sC&&aC[e].name!==e}))}("trim")},{trim:function(){return cC(this)}});var lC,dC,uC=Xn("String").trim,hC=u,pC=uC,fC=String.prototype,mC=r((function(e){var t=e.trim;return"string"==typeof e||e===fC||hC(fC,e)&&t===fC.trim?pC:t}));function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gC(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vC(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(bT("TURN_DOMAIN")):(VT.info("Unidentified as ip: ".concat(e,", use as host")),e)}function yC(e,t){e.addresses||(e.addresses=[]);const n=function(e,t){if(bT("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return e.map((e=>{let{ip:t,port:n}=e;return{address:"".concat(t,":").concat(n)}}));const n=bT("GATEWAY_DOMAINS");let r=n[1]&&Nr(t).call(t,n[1])?1:0;return e.map((e=>{let{domain_prefix:t,port:i,ip:s}=e;if(t)return{address:"".concat(t,".").concat(n[r++%n.length],":").concat(i)};const o=/^[\.\:\d]+$/.test(s),a=o?"".concat(s.replace(/[^\d]/g,"-"),".").concat(n[r++%n.length],":").concat(i):"".concat(s,":").concat(i);return o||VT.info("Unidentified as ip: ".concat(s,", use as host")),{ip:s,port:i,address:a}}))}(e.addresses,t),r=Array.isArray(e.detail)&&e.detail[18];if(r&&"string"==typeof r){const e=r.split(";");for(let t=0;t<e.length;t++){var i;const r=mC(i=e[t]).call(i);n[t]&&r&&(n[t].ip6=r)}}return{gatewayAddrs:n,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function EC(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function bC(e){const t=e._encoderConfig;if(!t)return{};const n={resolution:t.width&&t.height?"".concat(EC(t.width),"x").concat(EC(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return"number"==typeof t.frameRate?(n.maxFrameRate=t.frameRate,n.minFrameRate=t.frameRate):t.frameRate&&(n.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,n.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),n}function TC(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function SC(e,t){let n,r,i;switch(t){case lC.CHOOSE_SERVER:r=4096,i="choose server";break;case lC.CLOUD_PROXY:r=1048576,i="proxy";break;case lC.CLOUD_PROXY_5:r=4194304,i="proxy5";break;case lC.CLOUD_PROXY_FALLBACK:r=4194310,i="proxy fallback";break;default:throw new PS(Wv.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((t=>{t.buffer&&t.buffer.flag===r&&(n={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((e=>_C(_C({},e),{},{ticket:t.buffer.cert}))),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:_C(_C({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!n)throw new PS(Wv.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return n}async function wC(e,t){return await cv.all(e.addresses.map((async e=>({address:vC(e.ip),tcpport:e.port,udpport:e.port,username:t&&bT("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():nS.username,password:t&&bT("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await cy(t.toString()):nS.password}))))}function CC(e,t){const n=t._videoHeight||t.getMediaStreamTrack(!0).getSettings().height;return n?Math.max(n/EC(e.height),1):(VT.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function RC(e){let{candidateType:t,relayProtocol:n,type:r,address:i,port:s,protocol:o}=e;return"local-candidate"===r?{candidateType:t,relayProtocol:n,protocol:o}:{candidateType:t,relayProtocol:n,address:i,port:s,protocol:o}}function IC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(lC||(lC={}));class NC extends ly{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Nr(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(vw.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(vw.CONNECTED):"closed"===this._state?this.emit(vw.CLOSED):"failed"===this._state&&this.emit(vw.FAILED))}constructor(e,t,n,r){super(),sh(this,"connectionID",0),sh(this,"currentURLIndex",0),sh(this,"reconnectReason",void 0),sh(this,"_reconnectMode","tryNext"),sh(this,"_name",void 0),sh(this,"_state","closed"),sh(this,"_retryConfig",void 0),sh(this,"_reconnectCount",0),sh(this,"_forceCloseTimeout",5e3),sh(this,"_onlineReconnectListener",void 0),sh(this,"_closeEstablishingTransmitter",(()=>{})),sh(this,"_store",void 0),sh(this,"_joinChannelServiceRecordIndex",void 0),sh(this,"_useCompress",void 0),sh(this,"_inflateLength",0),sh(this,"_deflateLength",0),this._store=r,this._name=e,this._retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IC(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this._useCompress=n}resetReconnectCount(e){VT.debug("".concat(this._name," reset reconnect count, reason: ").concat(e)),this._reconnectCount=0}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const e=this._transmitter;t?setTimeout((()=>e.close()),500):e.close(),this._transmitter=void 0}this.state=e?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(e,t){if(!this._transmitter)return void VT.warning("[".concat(this._name,"] can not reconnect, no websocket"));var n;void 0!==e&&(this.reconnectMode=e),VT.debug("[".concat(this._name,"] reconnect is triggered initiative")),"number"==typeof this._joinChannelServiceRecordIndex&&(null===(n=this._store)||void 0===n||n.recordJoinChannelService({status:"error",errors:[new Error(t)]},this._joinChannelServiceRecordIndex));const r=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),r&&r.bind(this._transmitter)({code:9999,reason:t})}getInflateData(){const e=this._inflateLength,t=this._deflateLength;return this.clearInflateData(),{inflateLength:e,deflateLength:t}}setInflateData(e){this._deflateLength=this._deflateLength+e.originLength,this._inflateLength=this._inflateLength+e.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}!function(e){e[e.Default=0]="Default",e[e.Ack=1]="Ack"}(dC||(dC={}));class OC{constructor(e,t,n){sh(this,"version",1),sh(this,"initialRTO",void 0),sh(this,"maxBatchAckCount",void 0),sh(this,"maxRTO",void 0),sh(this,"initialRTT",void 0),sh(this,"ID",void 0),sh(this,"rtt",void 0),sh(this,"packetNumber",1),sh(this,"rtoRatioMap",new Map),sh(this,"timeoutMap",new Map),sh(this,"unorderedPacketQueue",[]),sh(this,"batchAckPacketQueue",[]),sh(this,"lastOrderedPacketNumber",0),sh(this,"batchAckTimer",void 0),sh(this,"sendImpl",void 0),sh(this,"receiveImpl",void 0),this.sendImpl=e,this.receiveImpl=t,this.ID=rE(7,"transmitter-"),this.initialRTO=void 0!==(null==n?void 0:n.initialRTO)?n.initialRTO:bT("TRANSMITTER_INITIAL_RTO"),this.initialRTT=void 0!==(null==n?void 0:n.initialRTT)?n.initialRTT:bT("TRANSMITTER_INITIAL_RTT"),this.rtt=void 0!==(null==n?void 0:n.initialRTT)?n.initialRTT:bT("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=void 0!==(null==n?void 0:n.maxBatchAckCount)?n.maxBatchAckCount:bT("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=void 0!==(null==n?void 0:n.maxRTO)?n.maxRTO:bT("TRANSMITTER_MAX_RTO")}packetize(e,t){return{type:dC.Default,version:this.version,packetNumber:t,payload:e}}serialize(e){switch(e.type){case dC.Default:{let t;t="string"==typeof e.payload?(new TextEncoder).encode(e.payload):e.payload;const n=new ArrayBuffer(t.length+15),r=new DataView(n);return r.setUint16(0,e.version),r.setUint8(2,e.type),r.setUint32(3,e.packetNumber),ty(r,7,BigInt(e.sendTs)),new Uint8Array(r.buffer).set(t,15),n}case dC.Ack:{const t=new ArrayBuffer(16),n=new DataView(t);return n.setUint16(0,e.version),n.setUint8(2,e.type),n.setUint32(3,e.maxAckPacketNumber),n.setUint8(7,e.shift),ty(n,8,BigInt(e.ackSendTs)),t}}}deserialize(e){const t=new DataView(e),n=t.getUint16(0),r=t.getUint8(2);switch(r){case dC.Default:{const i=t.getUint32(3),s=ey(t,7),o=e.slice(15),a=(new TextDecoder).decode(o);return{version:n,type:r,packetNumber:i,sendTs:Number(s),payload:a}}case dC.Ack:{const e=t.getUint32(3),i=t.getUint8(7),s=ey(t,8);return{version:n,type:r,maxAckPacketNumber:e,shift:i,ackSendTs:Number(s)}}default:throw VT.error("[".concat(this.ID,"] Unrecognized packet type ").concat(r)),new Error("Unrecognized packet type ".concat(r))}}sendMessage(e){const t=this.packetize(e,this.packetNumber);this.packetNumber=4294967295===this.packetNumber?1:this.packetNumber+1;const n=this.calculateRTO(t),r=window.setTimeout((()=>{this.resendMessage(t)}),n);this.timeoutMap.set(t.packetNumber,r),this.sendPacket(t)}onData(e){const t=this.deserialize(e);t.type===dC.Default?this.ack(t):t.type===dC.Ack&&(this.updateRTT(t,Math.round(performance.now())),this.clearRTO(t))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach((e=>{let[t,n]=e;window.clearTimeout(n)})),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,void 0!==this.batchAckTimer&&window.clearTimeout(this.batchAckTimer)}resendMessage(e){const t=this.calculateRTO(e),n=window.setTimeout((()=>{this.resendMessage(e)}),t);this.timeoutMap.set(e.packetNumber,n),this.sendPacket(e)}calculateRTO(e){const t=this.rtoRatioMap.get(e.packetNumber);if(void 0===t)return this.rtoRatioMap.set(e.packetNumber,1),this.initialRTO;{const n=9*this.rtt/8*t;return this.rtoRatioMap.set(e.packetNumber,t+1),n>this.maxRTO?this.maxRTO:n}}updateRTT(e,t){const n=e.ackSendTs;this.rtt=this.rtt*(7/8)+(t-n-this.rtt)/8}ack(e){if(e.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(e):(this.batchAckPacketQueue.push(e),this.batchAckTimer=window.setTimeout((()=>{this.batchAck()}),this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(e.payload);;){const e=this.unorderedPacketQueue[0];if(!e){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(e.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(e.packetNumber<=this.lastOrderedPacketNumber){const t={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:dC.Ack,version:this.version};this.sendPacket(t)}else if(e.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[e.packetNumber-this.lastOrderedPacketNumber-2]=e;const t={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:dC.Ack,version:this.version};this.sendPacket(t)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const e={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:dC.Ack,version:this.version};this.sendPacket(e),this.batchAckPacketQueue=[]}sendPacket(e){e.type===dC.Default&&(e.sendTs=Math.round(performance.now()));const t=this.serialize(e);this.sendImpl(t)}clearRTO(e){for(let t=e.maxAckPacketNumber-e.shift;t<=e.maxAckPacketNumber;t++){const e=this.timeoutMap.get(t);void 0!==e&&window.clearTimeout(e),this.timeoutMap.delete(t),this.rtoRatioMap.delete(t)}}}class AC extends NC{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0),sh(this,"_initMutex",void 0),sh(this,"_reconnectInterrupter",void 0),sh(this,"_url",void 0),sh(this,"_transmitter",void 0),sh(this,"_addresses",void 0),sh(this,"_reliableTransmission",void 0),this._initMutex=new pE("datachannel");const{timeout:n,timeoutFactor:r}=t,i=Math.max(300,Math.floor(3*n/5)),s=Math.max(1.2,Math.floor(8*r)/10);vy.ONLINE&&(this._retryConfig.timeout=i,this._retryConfig.timeoutFactor=s),Ny.on(yy.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===vy.ONLINE?(this._retryConfig.timeout=i,this._retryConfig.timeoutFactor=s):(this._retryConfig.timeout=n,this._retryConfig.timeoutFactor=r))}))}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;this._forceCloseTimeout=t;const n=(t,n)=>{this._addresses=e,this.currentURLIndex=this._addresses.findIndex((e=>e.fingerprint||bT("FINGERPRINT")));const r=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(r).then(t).catch(n),this.once(vw.CLOSED,(()=>n(new PS(Wv.WS_DISCONNECT)))),this.once(vw.CONNECTED,(()=>t()))};return this._initMutex.lock().then((e=>new cv(((e,t)=>{n(e,t)})).then((()=>{e()})).catch((()=>{e()}))))}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new PS(Wv.WS_ABORT,"datachannel is not ready");try{t||(e=JSON.stringify(e)),this._reliableTransmission.sendMessage(e)}catch(e){throw new PS(Wv.WS_ERR,"send datachannel signal message error"+e.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(e){const t=JSON.stringify(e);return{compressed:t,compressedLength:t.length,origin:e}}sendMessageWithUint8Array(e){return{compressed:e,compressedLength:e.byteLength,origin:e}}createTransmitterConnection(e){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(e.ip,":").concat(e.port),new cv(((t,n)=>{var r;const i=()=>{VT.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),t()},s=async e=>{var r;if(null===(r=this._closeEstablishingTransmitter)||void 0===r||r.call(this),VT.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const r=Ry(this,vw.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,i=await this.reconnectWithAction(r);if("closed"===this.state)return void VT.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!i)return n(new PS(Wv.WS_DISCONNECT,"datachannel reconnect failed: ".concat(e.code))),void this.close(!0);t()}else n(new PS(Wv.WS_DISCONNECT,"datachannel close: ".concat(e.code))),this.close()},o=e=>{var t;null===(t=this._reliableTransmission)||void 0===t||t.onData(e.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),VT.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(e)));const a=null===(r=this._store)||void 0===r?void 0:r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),c=Date.now();wy(this,vw.TO_CONNECT_DATACHANNEL,e).then((e=>{var t,n;if(!e)throw new Error("transmissonInfo not exist yet");const{transmitter:r,close:l}=e;this._transmitter=r,null===(t=this._store)||void 0===t||t.signalChannelOpen();const d=Date.now()-c;VT.debug("[choose dc] dc open cost ".concat(d,"ms")),this._reliableTransmission=new OC((e=>{var t;this._transmitter&&"open"===this._transmitter.readyState&&(null===(t=this._transmitter)||void 0===t||t.send(e))}),(e=>{"string"==typeof e&&this.emit(vw.ON_MESSAGE,e)})),this._closeEstablishingTransmitter=()=>{var e;null===(e=this._reliableTransmission)||void 0===e||e.close(),this._reliableTransmission=void 0,l()},i&&i(),r.onclose=s,r.onmessage=o,null===(n=this._store)||void 0===n||n.recordJoinChannelService({endTs:Date.now(),status:"success"},a),this._joinChannelServiceRecordIndex=a})).catch((e=>{var t;if(null===(t=this._store)||void 0===t||t.recordJoinChannelService({endTs:Date.now(),status:e instanceof PS&&e.code===Wv.WS_ABORT?"aborted":"error",errors:[e]},a),"closed"!==this.state){if(e instanceof PS&&e.code===Wv.WS_ERR){const t=new PS(Wv.WS_ERR,"init datachannel failed! Error: ".concat(e.toString()));return VT.error("[".concat(this._name,"]").concat(t)),void n(t)}s&&s(e)}else n(new PS(Wv.WS_DISCONNECT,"datachannel is closed: ".concat(e.toString())))}))}))}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount)return!1;if(!this._addresses)return!1;if("closed"===this.state)return!1;this._onlineReconnectListener||Ny.networkState!==vy.OFFLINE||(this._onlineReconnectListener=Ny.onlineWaiter&&Ny.onlineWaiter.then((()=>{this._onlineReconnectListener=void 0})));let n=!0;if(this._reconnectInterrupter=()=>{n=!1},t){const t=gE(this._reconnectCount,this._retryConfig);VT.debug("[".concat(this._name,"] wait ").concat(t,"ms to reconnect datachannel, mode: ").concat(e)),await cv.race([nE(t),this._onlineReconnectListener||new cv((()=>{}))])}if("closed"===this.state||!n)return!1;this._reconnectCount+=1;const r=async(e,t)=>{this.emit(vw.RECONNECT_CREATE_CONNECTION,t),await this.createTransmitterConnection(e)};try{if("retry"===e){const t=this._addresses[this.currentURLIndex];this.emit(vw.RECONNECT_WAITTING_FINISH,e),await r(t,e)}else if("tryNext"===e){this.currentURLIndex+=1;for(let e=this.currentURLIndex;e<this._addresses.length;e++){if(this._addresses[e].fingerprint||bT("FINGERPRINT")){this.currentURLIndex=e;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return VT.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);VT.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const t=this._addresses[this.currentURLIndex];this.emit(vw.RECONNECT_WAITTING_FINISH,e),await r(t,e)}else"recover"===e&&(VT.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(vw.RECONNECT_WAITTING_FINISH,e),this.emit(vw.FAILBACK));return!0}catch(n){var i,s;return VT.error("[".concat(this._name,"] reconnect failed"),n.toString()),null!=n&&null!==(i=n.data)&&void 0!==i&&i.desc&&Array.isArray(n.data.desc)&&n.data.desc.length&&Nr(s=n.data.desc).call(s,"dynamic key expired")?(this.emit(vw.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(e,t)}}}class kC extends ly{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===pS.CONNECTED?this.emit(fS.WS_CONNECTED):e===pS.RECONNECTING?this.emit(fS.WS_RECONNECTING,this._websocketReconnectReason):e===pS.CLOSED&&this.emit(fS.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),sh(this,"_disconnectedReason",void 0),sh(this,"_websocketReconnectReason",void 0),sh(this,"_connectionState",pS.CLOSED),sh(this,"reconnectToken",void 0),sh(this,"websocket",void 0),sh(this,"openConnectionTime",void 0),sh(this,"clientId",void 0),sh(this,"lastMsgTime",Date.now()),sh(this,"uploadCache",[]),sh(this,"uploadCacheInterval",void 0),sh(this,"rttRolling",new vE(5)),sh(this,"pingpongTimer",void 0),sh(this,"inflateDataTimer",void 0),sh(this,"pingpongTimeoutCount",0),sh(this,"joinResponse",void 0),sh(this,"multiIpOption",void 0),sh(this,"initError",void 0),sh(this,"spec",void 0),sh(this,"store",void 0),sh(this,"onWebsocketMessage",(e=>{if(e instanceof ArrayBuffer)return void this.emit(fS.ON_BINARY_DATA,e);const t=JSON.parse(e);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")&&(this.emit(t._type,t._message),t._type===_S.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===_S.ON_USER_BANNED))switch(t._message.error_code){case 14:this.close(my.UID_BANNED);break;case 15:this.close(my.IP_BANNED);break;case 16:this.close(my.CHANNEL_BANNED)}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new AC("gateway-".concat(this.clientId),this.spec.retryConfig,!0,t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===pS.CONNECTED&&this.reconnect("retry",_w.OFFLINE)}))}async request(e,t,n,r){const i=rE(6,""),s={_id:i,_type:e,_message:t},o=this.websocket.connectionID,a=()=>new cv(((t,n)=>{if(this.connectionState===pS.CONNECTED)return t();const r=()=>{this.off(fS.WS_CLOSED,i),t()},i=()=>{this.off(fS.WS_CONNECTED,r),n(new PS(Wv.WS_ABORT))};this.once(fS.WS_CONNECTED,r),this.once(fS.WS_CLOSED,i),e!==mS.PUBLISH&&e!==mS.SUBSCRIBE&&e!==mS.UNSUBSCRIBE&&e!==mS.UNPUBLISH&&e!==mS.CONTROL&&e!==mS.RESTART_ICE||this.once(fS.DISCONNECT_P2P,(()=>{n(new PS(Wv.DISCONNECT_P2P))})),e!==mS.PUBLISH&&e!==mS.RESTART_ICE||this.once(fS.ABORT_P2P_EXECUTION,(()=>{n(new PS(Wv.DISCONNECT_P2P))}))}));if(this.connectionState!==pS.CONNECTING&&this.connectionState!==pS.RECONNECTING||e===mS.JOIN||e===mS.REJOIN||await a(),e===mS.LEAVE&&(this.websocket.unbindDcCloseEventListener(),r=!0),this.websocket.sendMessage(s,!0,!1),r)return;const c=new cv(((n,r)=>{let s=!1;const a=(r,i)=>{s=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(fS.WS_CLOSED,c),this.off(fS.WS_RECONNECTING,c),this.emit(fS.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new PS(Wv.WS_ABORT,"type: ".concat(e))),this.off(fS.WS_CLOSED,c),this.off(fS.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(fS.WS_CLOSED,c),this.once(fS.WS_RECONNECTING,c),nE(bT("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==o||s||(VT.warning("dc request timeout, type: ".concat(e)),this.emit(fS.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===pS.CLOSED||e===mS.LEAVE)throw new PS(Wv.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===mS.JOIN||e===mS.REJOIN?null:(await a(),await this.request(e,t))}if(l.isSuccess)return l.message;const d=Number(l.message.error_code||l.message.code),u=Dw(d),h=new PS(Wv.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(l.message.error_str),{code:d,data:l.message});return"success"===u.action?l.message:(VT.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(d,", message: ").concat(u.desc,", action: ").concat(u.action)),d===hS.ERR_TOO_MANY_BROADCASTERS?e===mS.JOIN||e===mS.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===u.action?h.throw():"quit"===u.action?(this.initError=h,this.close(),h.throw()):(d===hS.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,VT.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",_w.MULTI_IP)):this.reconnect(u.action,_w.SERVER_ERROR),e===mS.JOIN||e===mS.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new cv((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void VT.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(gS.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=bT("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==pS.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),bT("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new cv(((n,r)=>{this.once(fS.WS_CONNECTED,(()=>n(this.joinResponse))),this.once(fS.WS_CLOSED,(()=>r(this.initError||new PS(Wv.WS_ABORT)))),this.connectionState=pS.CONNECTING,this.websocket.init(e).catch(r),this.websocket.once(vw.FAILBACK,(()=>{void 0===this.openConnectionTime&&r(new PS(Wv.INIT_DATACHANNEL_TIMEOUT))})),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval((()=>{this.handleInflateData()}),2e4),setTimeout((()=>{t&&void 0===this.openConnectionTime&&(VT.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),r(new PS(Wv.INIT_DATACHANNEL_TIMEOUT)))}),bT("DC_JOIN_WITH_FAILBACK"))}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||my.LEAVE,this.connectionState=pS.CLOSED,VT.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),e===my.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new AC("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(fS.ABORT_P2P_EXECUTION);const e=await wy(this,fS.DATACHANNEL_CONNECTING),t=await this.request(mS.JOIN,e);if(!t)return this.emit(fS.REPORT_JOIN_GATEWAY,Wv.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(fS.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=pS.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new PS(Wv.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=Iy(this,fS.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(mS.REJOIN,e);return!!t&&(this.connectionState=pS.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(_S.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(_S.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(_S.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(_S.MUTE_AUDIO,{uid:e.uid}):this.emit(_S.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(_S.MUTE_VIDEO,{uid:e.uid}):this.emit(_S.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(_S.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(_S.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(_S.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(_S.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(_S.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){VT.debug("[".concat(this.clientId,"] receive notification: "),e);const t=Dw(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(my.UID_BANNED),void this.close()):void this.reconnect(t.action,_w.SERVER_ERROR);VT.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=bT("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(VT.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>bT("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",_w.TIMEOUT):this.request(mS.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),bT("REPORT_STATS")&&this.send(mS.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleInflateData(){const{inflateLength:e,deflateLength:t}=this.websocket.getInflateData();0!==e&&0!==t&&this.upload(gS.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(vw.RECONNECT_WAITTING_FINISH,(e=>{this.emit(fS.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(vw.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(fS.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(vw.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(vw.CLOSED,(()=>{this.connectionState=pS.CLOSED})),this.websocket.on(vw.FAILED,(()=>{this._disconnectedReason=my.NETWORK_ERROR,this.connectionState=pS.CLOSED})),this.websocket.on(vw.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===pS.CONNECTED?this.connectionState=pS.RECONNECTING:this.connectionState=pS.CONNECTING})),this.websocket.on(vw.WILL_RECONNECT,((e,t)=>{if(Iy(this,fS.IS_P2P_DISCONNECTED)&&"retry"===e)return VT.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(fS.NEED_RENEW_SESSION),this.emit(fS.DISCONNECT_P2P),t("tryNext");"retry"!==e&&(VT.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0,this.emit(fS.NEED_RENEW_SESSION),this.emit(fS.DISCONNECT_P2P)),t(e)})),this.websocket.on(vw.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{VT.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",_w.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(fS.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof PS&&e.code===Wv.UNEXPECTED_RESPONSE&&e.data.code===hS.ERR_NO_AUTHORIZED)return VT.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",_w.SERVER_ERROR);VT.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",_w.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(vw.REQUEST_NEW_URLS,((e,t)=>{wy(this,fS.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(vw.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(_S.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on(vw.TO_CONNECT_DATACHANNEL,(async(e,t,n)=>wy(this,fS.DATACHANNEL_PRECONNECT,e).then(t).catch(n))),this.websocket.on(vw.FAILBACK,(()=>{void 0!==this.openConnectionTime&&this.emit(fS.DATACHANNEL_FAILBACK)}))}}class xC extends ly{constructor(e,t){super(),sh(this,"signal",void 0),sh(this,"token",void 0),sh(this,"tokenTimeout",void 0),sh(this,"tokenInterval",void 0),sh(this,"_sequence",0),sh(this,"userMap",new Map),sh(this,"encoder",new TextEncoder),this.signal=e,this.token=t;const n=()=>{this.signal.connectionState===pS.CONNECTED&&this.check(),0===this.userMap.size?this.tokenInterval=window.setTimeout(n,1e3):this.tokenInterval=window.setTimeout(n,3*bT("P2P_TOKEN_INTERVAL"))};n()}async send(e,t,n,r,i){var s,o,a;if(0===this.userMap.size)return;const c=Array.from(AS(s=this.userMap).call(s))[0].token;"string"!=typeof t&&(t=JSON.stringify(t)),r=null!==(o=r)&&void 0!==o?o:rE(6,""),i=null!==(a=i)&&void 0!==a?a:this._sequence++;const l={_id:r,_type:e,_seq:i,_message:t,token:"".concat(this.token,"_").concat(c)};bT("SHOW_P2P_LOG")&&VT.debug("send message",l,"noNeedResponse : ".concat(n)),this.splitMessage(JSON.stringify(l)).forEach((e=>{this.signal.request(mS.DATA_STREAM,{payload:Zy(this.encoder.encode(e))})}));const d=new cv(((t,i)=>{const s=window.setTimeout((()=>{this.off("res-@".concat(r,"_ack"),o),this.off("res-@".concat(r),c),this.off(Cw.ABORT,a),VT.debug("[external-signal] request timeout, type: ".concat(e,", requestId: ").concat(r)),0===this.userMap.size?i(new zv(Wv.INVALID_REMOTE_USER)):i(new zv(Wv.TIMEOUT))}),bT("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),o=()=>{s&&window.clearTimeout(s),this.off(Cw.ABORT,a),n&&t()},a=()=>{s&&window.clearTimeout(s),this.off("res-@".concat(r,"_ack"),o),this.off("res-@".concat(r),c),i(new zv(Wv.EXTERNAL_SIGNAL_ABORT,"type: ".concat(e,", requestId: ").concat(r)))};this.once(Cw.ABORT,a),this.once("res-@".concat(r,"_ack"),o);const c=(n,c)=>{d=!0,s&&window.clearTimeout(s),this.off("res-@".concat(r,"_ack"),o),this.off(Cw.ABORT,a),"success"===n?t(c):i(new zv(Wv.P2P_MESSAGE_FAILED,"request ".concat(e," failed, requestId: ").concat(r)))};let d=!1;n||(this.once("res-@".concat(r),c),nE(bT("SIGNAL_REQUEST_TIMEOUT")).then((()=>{d||VT.warning("external_signal request timeout, type: ".concat(e,", requestId: ").concat(r,", ").concat(l))})))}));try{return await d}catch(s){if(s.code===Wv.TIMEOUT)return await this.send(e,t,n,r,i);throw s}}onMessage(e){var t;const{_uid:n}=e;let r,i=this.userMap.get(n);if(i)r=i.splitMessageMap;else{if(this.userMap.size>0||!("_type"in e)||e._type!==ww.CHECK)return;const{token:t}=e;r=new Map,i={uid:n,isStart:!0,token:t,splitMessageMap:r,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(n,i),this.signal.emit(_S.ON_USER_ONLINE,{uid:n}),this.handleUserOnline()}if("id"in e&&"total"in e){var s;const{id:t,total:i}=e,o=null!==(s=r.get(t))&&void 0!==s?s:[];if(o.push(e),r.has(t)||r.set(t,o),o.length!==i)return;{const i=ep(o).call(o,((e,t)=>e.index-t.index)).map((e=>e.payload)).join("");r.delete(t),(e=JSON.parse(i))._uid=n}}const{_type:o,token:a}=e;if(Nr(t=[ww.ACK,ww.CHECK]).call(t,o))return o===ww.CHECK&&this.handleCheckToken(i,a),void this.receiveMessage(e);a==="".concat(i.token,"_").concat(this.token)?this.handleReceivedMessage(e):VT.debug('Receive unexpected message", '.concat(a,", cur_token: ").concat(i.token,"_").concat(this.token),e)}check(){const e={_id:rE(6,""),token:this.token,_type:ww.CHECK};bT("SHOW_P2P_LOG")&&VT.debug("send message",e),this.signal.request(mS.DATA_STREAM,{payload:Zy(this.encoder.encode(JSON.stringify(e)))})}ack(e){const t={_id:e,_type:ww.ACK,token:this.token};bT("SHOW_P2P_LOG")&&VT.debug("send message",t),this.signal.request(mS.DATA_STREAM,{payload:Zy(this.encoder.encode(JSON.stringify(t)))})}response(e,t,n){this.send(ww.RESPONSE,JSON.stringify({success:!n,message:t}),!0,e)}handleReceivedMessage(e){const t=()=>{this.userMap.forEach((e=>{const{receivedMessagesMap:t,nextExpectedSequenceNumber:n}=e;for(;t.has(n);){const r=t.get(n);t.delete(n),this.receiveMessage(r),e.nextExpectedSequenceNumber++}}))};if(!e)return void t();const{_uid:n,_seq:r}=e,i=this.userMap.get(n),{receivedMessagesMap:s,isStart:o,nextExpectedSequenceNumber:a}=i;if(r<a)return this.ack(e._id),void VT.debug("[external-signal] receive old message, seq: ".concat(r,", ").concat(e._message));s.set(r,e),o&&r===a&&(this.receiveMessage(e),s.delete(a),i.nextExpectedSequenceNumber++,t())}receiveMessage(e){const{_id:t,_type:n,_message:r,_uid:i}=e;if(bT("SHOW_P2P_LOG")&&VT.debug("receive message",e),t){let s;switch(e._type!==ww.ACK&&(r&&(s=JSON.parse(r)),this.ack(e._id)),e._type){case ww.CANDIDATE:case ww.CONTROL:this.signal.emit(n,s,i);break;case ww.PUBLISH:case ww.UNPUBLISH:case ww.RESTART_ICE:case ww.CALL:s.uid=i,wy(this.signal,n,s).then((t=>{this.response(e._id,t)})).catch((()=>{this.response(e._id,void 0,!0)}));break;case ww.ACK:this.getListeners("res-@".concat(t,"_ack")).length>0&&this.emit("res-@".concat(t,"_ack"));break;case ww.RESPONSE:{const{success:e,message:n}=s;this.emit("res-@".concat(t),e?"success":"failed",n);break}}}}splitMessage(e){if(e.length<xC.MAX_MESSAGE_SIZE)return[e];const t=[],{remoteToken:n}=JSON.parse(e),r=rE(6,"");let i=0,s=800;const o=Math.ceil(e.length/s);for(;e.length>0;){i++;const a={id:r,index:i,total:o,payload:e.slice(0,s),token:"".concat(this.token,"_").concat(n)};JSON.stringify(a).length>xC.MAX_MESSAGE_SIZE?s-=50:(t.push(a),e=e.slice(s))}return t.map((e=>JSON.stringify(e)))}handleCheckToken(e,t){return e.token!==t?(VT.debug("token changed, from ".concat(e.token," to ").concat(t)),this.reset(e.uid,t),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout((()=>{VT.debug("token timeout, ".concat(t)),this.reset(e.uid)}),bT("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const e=await wy(this.signal,ww.CALL,void 0),t=await this.send(ww.CALL,e);this.signal.emit(fS.P2P_CONNECTION,t,!0)}async reset(e,t){const n=this.userMap.get(e);n&&(this.emit(Cw.ABORT),this.signal.emit(_S.ON_USER_OFFLINE,{uid:n.uid,reason:Nw.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),t||(VT.debug("change local token from ".concat(t," to ").concat(t)),this.token=rE(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(Cw.ABORT)}}sh(xC,"MAX_SIZE",1),sh(xC,"MAX_MESSAGE_SIZE",1024);class PC extends ly{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===pS.CONNECTED?this.emit(fS.WS_CONNECTED):e===pS.RECONNECTING?this.emit(fS.WS_RECONNECTING,this._websocketReconnectReason):e===pS.CLOSED&&this.emit(fS.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),sh(this,"_disconnectedReason",void 0),sh(this,"_websocketReconnectReason",void 0),sh(this,"_connectionState",pS.CLOSED),sh(this,"reconnectToken",void 0),sh(this,"p2pToken",void 0),sh(this,"websocket",void 0),sh(this,"openConnectionTime",void 0),sh(this,"clientId",void 0),sh(this,"lastMsgTime",Date.now()),sh(this,"uploadCache",[]),sh(this,"uploadCacheInterval",void 0),sh(this,"rttRolling",new vE(5)),sh(this,"pingpongTimer",void 0),sh(this,"pingpongTimeoutCount",0),sh(this,"joinResponse",void 0),sh(this,"multiIpOption",void 0),sh(this,"initError",void 0),sh(this,"spec",void 0),sh(this,"store",void 0),sh(this,"_external_signal",void 0),sh(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(fS.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){switch(t._type){case _S.ON_DATA_STREAM:return void this.handleDataStream(t._message);case _S.MUTE_AUDIO:case _S.MUTE_VIDEO:case _S.ON_P2P_LOST:case _S.ON_USER_ONLINE:return;case _S.ON_USER_OFFLINE:const{uid:e}=t._message;return VT.debug("[".concat(this.clientId,"] user-offline uid: ").concat(e)),void this._external_signal.reset(e)}if(this.emit(t._type,t._message),t._type===_S.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===_S.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(my.UID_BANNED);break;case 15:this.close(my.IP_BANNED);break;case 16:this.close(my.CHANNEL_BANNED)}if(t._type===_S.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case hS.ERR_LICENSE_MISSING:this.close(my.LICENSE_MISSING);break;case hS.ERR_LICENSE_EXPIRED:this.close(my.LICENSE_EXPIRED);break;case hS.ERR_LICENSE_MINUTES_EXCEEDED:this.close(my.LICENSE_MINUTES_EXCEEDED);break;case hS.ERR_LICENSE_PERIOD_INVALID:this.close(my.LICENSE_PERIOD_INVALID);break;case hS.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(my.LICENSE_MULTIPLE_SDK_SERVICE);break;case hS.ERR_LICENSE_ILLEGAL:this.close(my.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new Kw("gateway-".concat(this.clientId),this.spec.retryConfig,!0,bT("JOIN_GATEWAY_USE_DUAL_DOMAIN"),bT("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===pS.CONNECTED&&this.reconnect("retry",_y.OFFLINE)})),this.p2pToken=rE(6,""),this._external_signal=new xC(this,this.p2pToken)}async request(e,t,n,r){const i=rE(6,""),s={_id:i,_type:e,_message:t},o=this.websocket.connectionID,a=()=>new cv(((e,t)=>{if(this.connectionState===pS.CONNECTED)return e();const n=()=>{this.off(fS.WS_CLOSED,r),e()},r=()=>{this.off(fS.WS_CONNECTED,n),t(new zv(Wv.WS_ABORT))};this.once(fS.WS_CONNECTED,n),this.once(fS.WS_CLOSED,r)}));if(this.connectionState!==pS.CONNECTING&&this.connectionState!==pS.RECONNECTING||e===mS.JOIN||e===mS.REJOIN||await a(),this.websocket.sendMessage(s,!0),r)return;const c=new cv(((n,r)=>{let s=!1;const a=(r,i)=>{s=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(fS.WS_CLOSED,c),this.off(fS.WS_RECONNECTING,c),this.emit(fS.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new zv(Wv.WS_ABORT,"type: ".concat(e))),this.off(fS.WS_CLOSED,c),this.off(fS.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(fS.WS_CLOSED,c),this.once(fS.WS_RECONNECTING,c),nE(bT("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==o||s||(VT.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(fS.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===pS.CLOSED||e===mS.LEAVE)throw new zv(Wv.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===mS.JOIN||e===mS.REJOIN?null:(await a(),await this.request(e,t))}if(l.isSuccess)return l.message;const d=Number(l.message.error_code||l.message.code),u=Dw(d),h=new zv(Wv.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(l.message.error_str),{code:d,data:l.message});return"success"===u.action?l.message:(VT.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(d,", message: ").concat(u.desc,", action: ").concat(u.action)),d===hS.ERR_TOO_MANY_BROADCASTERS?e===mS.JOIN||e===mS.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===u.action?h.throw():"quit"===u.action?(this.initError=h,this.close(),h.throw()):(d===hS.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,VT.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",_y.MULTI_IP)):this.reconnect(u.action,_y.SERVER_ERROR),e===mS.JOIN||e===mS.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new cv((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void VT.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(gS.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=bT("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==pS.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),bT("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}async sendExtensionMessage(e,t,n){return await this._external_signal.send(e,t,n)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new cv(((t,n)=>{this.once(fS.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(fS.WS_CLOSED,(()=>n(this.initError||new zv(Wv.WS_ABORT)))),this.connectionState=pS.CONNECTING,this.websocket.init(e).catch(n)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||my.LEAVE,this.connectionState=pS.CLOSED,VT.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===my.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new Kw("gateway-".concat(this.clientId),this.spec.retryConfig,!0,bT("JOIN_GATEWAY_USE_DUAL_DOMAIN"),bT("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents()),this.p2pToken=rE(6,""),this._external_signal.clear(),this._external_signal=new xC(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(fS.ABORT_P2P_EXECUTION);const e=await wy(this,fS.REQUEST_JOIN_INFO),t=await this.request(mS.JOIN,e);if(!t)return this.emit(fS.REPORT_JOIN_GATEWAY,Wv.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(fS.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=pS.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;const n=Xy(e.payload),r=(new TextDecoder).decode(n),i=JSON.parse(r);"total"in i&&"id"in i||Nr(t=Object.values(ww)).call(t,i._type)?(i._uid=e.uid,this._external_signal.onMessage(i)):this.emit(_S.ON_DATA_STREAM,e)}catch(t){this.emit(_S.ON_DATA_STREAM,e)}}handleNotification(e){VT.debug("[".concat(this.clientId,"] receive notification: "),e);const t=Dw(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(my.UID_BANNED),void this.close()):void this.reconnect(t.action,_y.SERVER_ERROR);VT.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=bT("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(VT.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>bT("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",_y.TIMEOUT):this.request(mS.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),bT("REPORT_STATS")&&this.send(mS.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWebsocketEvents(){this.websocket.on(ES.RECONNECT_WAITTING_FINISH,(e=>{this.emit(fS.WS_RECONNECT_WAITTING_FINISH,e)})),this.websocket.on(ES.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(fS.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(ES.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ES.CLOSED,(()=>{this.connectionState=pS.CLOSED})),this.websocket.on(ES.FAILED,(()=>{this._disconnectedReason=my.NETWORK_ERROR,this.connectionState=pS.CLOSED})),this.websocket.on(ES.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===pS.CONNECTED?this.connectionState=pS.RECONNECTING:this.connectionState=pS.CONNECTING})),this.websocket.on(ES.WILL_RECONNECT,((e,t,n)=>{"retry"!==e?(VT.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0,this.emit(fS.NEED_RENEW_SESSION)):VT.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),n(e)})),this.websocket.on(ES.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.join().catch((e=>{if(this.emit(fS.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof zv&&e.code===Wv.UNEXPECTED_RESPONSE&&e.data.code===hS.ERR_NO_AUTHORIZED)return VT.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",_y.SERVER_ERROR);VT.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",_y.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(ES.REQUEST_NEW_URLS,((e,t)=>{wy(this,fS.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(ES.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(_S.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}function DC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DC(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const MC=new Map;class jC extends ly{get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(XS.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(XS.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){VT.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),sh(this,"store",void 0),sh(this,"joinInfo",void 0),sh(this,"key",void 0),sh(this,"ntpOffset",0),sh(this,"signal",void 0),sh(this,"role",void 0),sh(this,"inChannelInfo",{joinAt:null,duration:0}),sh(this,"spec",void 0),sh(this,"_state","DISCONNECTED"),sh(this,"_statsCollector",void 0),sh(this,"_disconnectedReason",void 0),sh(this,"isSignalRecover",!1),sh(this,"hasChangeBGPAddress",!1),sh(this,"trafficStatsInterval",void 0),sh(this,"networkQualityInterval",void 0),sh(this,"_joinGatewayStartTime",0),sh(this,"_signalTimeout",!1),sh(this,"_clientRoleOptions",void 0),sh(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?new PC(LC(LC({},t),{},{retryConfig:t.websocketRetryConfig}),e):this.store.useDataChannel?new kC(LC(LC({},t),{},{retryConfig:t.websocketRetryConfig}),e):new Jw(LC(LC({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,n){if(this.signal instanceof kC){let t=!1;"disabled"!==e.cloudProxyServer?(VT.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(e.cloudProxyServer,")")),t=!0):"".concat(e.apResponse.cid,"_").concat(e.apResponse.cert).length>255||"".concat(e.apResponse.cid,"_").concat(e.apResponse.cert).length<22?(VT.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),t=!0):e.apResponse.addresses.some((e=>e.fingerprint))||bT("FINGERPRINT")||(VT.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),t=!0),t&&this.resetSignal()}this.store.joinGatewayStart(),"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const r=Date.now();let i=MC.get(e.cname);if(i||(i=new Map,MC.set(e.cname,i)),this._isProactiveJoin=!0,i.has(e.uid)){const t=new PS(Wv.UID_CONFLICT);throw eS.joinGateway(e.sid,{lts:r,succ:!1,ec:t.message,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:this.signal instanceof kC?"1":"0"}),this._isProactiveJoin=!1,t}i.set(e.uid,!0),this.joinInfo=e,this.key=t;let s=0;this.joinGatewayStartTime=r;const o=e.proxyServer;try{let t;if(VT.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof kC?"datachannel":"websocket"," join uid ").concat(s)),this.signal instanceof kC)t=await this.signal.init(e.apResponse.addresses,n);else{const r=e.gatewayAddrs.map((t=>{let{address:n}=t;const[r,i]=n.split(":"),s={host:r,port:i};return e.proxyServer&&(s.proxy=e.proxyServer),s}));t=await this.signal.init(r,n)}s=t.uid,VT.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof kC?"datachannel":"websocket"," join uid ").concat(s," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(t){if(t&&t.code===Wv.INIT_WEBSOCKET_TIMEOUT)throw VT.warning("[".concat(this.store.clientId,"] User join failed"),t.toString()),t;if(t&&t.code===Wv.INIT_DATACHANNEL_TIMEOUT)throw VT.warning("[".concat(this.store.clientId,"] User join datachannel failed"),t.toString()),this.resetSignal(),t;throw VT.error("[".concat(this.store.clientId,"] User join failed"),t.toString()),eS.joinGateway(e.sid,{lts:r,succ:!1,ec:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!o,signalChannel:this.signal instanceof kC?"1":"0"}),this._isProactiveJoin=!1,i.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),VT.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((()=>{this.updateTrafficStats().catch((e=>{VT.warning("[".concat(this.store.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(XS.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(XS.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(XS.NETWORK_QUALITY,{uplinkNetworkQuality:TC(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:TC(this._statsCollector.trafficStats.B_dnq)}):this.emit(XS.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),s}async leave(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if("DISCONNECTED"!==this.state){t!==my.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==pS.CONNECTED||await function(e,t){return t===1/0?e:cv.race([e,tE(t)])}(this.signal.request(mS.LEAVE,void 0,!0),3e3)}catch(e){VT.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e)}this.signal.close(t),t!==my.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new PS(Wv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const r={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:bT("PUB_EXTEND"),twcc:!!bT("PUBLISH_TWCC"),rtx:!!bT("USE_PUB_RTX")};try{return(await this.signal.request(mS.PUBLISH,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===hS.ERR_PUBLISH_REQUEST_INVALID)return VT.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),r.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw r}}async publishDataChannel(e,t,n){var r;if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new PS(Wv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const i={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:null!==(r=t.maxRetransmits)&&void 0!==r?r:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(mS.PUBLISH_DATASTREAM,i,!0)}catch(r){if(n&&r.data&&r.data.code===hS.ERR_PUBLISH_REQUEST_INVALID)return VT.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),r.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw r}}async unpublish(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new PS(Wv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(mS.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(e){VT.warning("[".concat(this.store.clientId,"] unpublish warning: "),e)}}async unpublishDataChannel(e){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new PS(Wv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await cv.all(e.map((e=>this.signal.request(mS.UNPUBLISH_DATASTREAM,{channel_id:e},!0))))}catch(e){VT.warning("unpublish datachannels warning: ",e)}}async presubscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new PS(Wv.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!bT("SUBSCRIBE_TWCC"),rtx:!!bT("USE_SUB_RTX")||void 0,extend:bT("SUB_EXTEND"),svc:Array.isArray(bT("SVC"))&&0!==bT("SVC").length?bT("SVC"):void 0};try{return await this.signal.request(mS.PRE_SUBSCRIBE,r,!0)}catch(r){if(n&&r.data&&r.data.code===hS.ERR_SUBSCRIBE_REQUEST_INVALID)return VT.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),r.toString()),this.presubscribe(e,t,!1);throw r}}async subscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new PS(Wv.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!bT("SUBSCRIBE_TWCC"),rtx:!!bT("USE_SUB_RTX"),extend:bT("SUB_EXTEND"),ssrcId:t.ssrcId,svc:Array.isArray(bT("SVC"))&&0!==bT("SVC").length?bT("SVC"):void 0};try{return(await this.signal.request(mS.SUBSCRIBE,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===hS.ERR_SUBSCRIBE_REQUEST_INVALID)return VT.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),r.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw r}}async subscribeDataChannel(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new PS(Wv.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const r={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(mS.SUBSCRIBE_DATASTREAM,r,!0)}catch(r){if(n&&r.data&&r.data.code===hS.ERR_SUBSCRIBE_REQUEST_INVALID)return VT.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),r.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw r}}async subscribeAll(e,t){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new PS(Wv.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const n={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!bT("USE_SUB_RTX")};try{return await this.signal.request(mS.SUBSCRIBE_STREAMS,n,!0)}catch(n){if(t&&n.data&&n.data.code===hS.ERR_SUBSCRIBE_REQUEST_INVALID)return VT.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),n.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw n}}async setVideoProfile(e){const t=function(e){if(!(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width))return;let t=e.frameRate,n=e.width,r=e.height,i=!0;return"number"!=typeof t&&(t=t.exact||t.ideal||t.max||t.min||0,t||(i=!1)),"number"!=typeof n&&(n=n.exact||n.ideal||n.max||n.min||0,n||(i=!1)),"number"!=typeof r&&(r=r.exact||r.ideal||r.max||r.min||0,t||(i=!1)),i?{stream_type:0,width:n,height:r,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}(e);if(t)return this.signal.request(mS.SET_VIDEO_PROFILE,t);VT.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(mS.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(e){VT.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),e)}}async unsubscribeDataChannel(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new PS(Wv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await cv.all(e.map((e=>this.signal.request(mS.UNSUBSCRIBE_DATASTREAM,{stream_id:e,uid:t},!0))))}catch(e){VT.warning("unsubscribeDataChannel warning: ",e)}}async massUnsubscribe(e){try{await this.signal.request(mS.UNSUBSCRIBE_STREAMS,e,!0)}catch(e){VT.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),e)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=e;return{gatewayEstablishParams:await this.signal.request(mS.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(mS.GATEWAY_INFO)}async renewToken(e){await this.signal.request(mS.RENEW_TOKEN,e),this.key=e.token}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),"CONNECTED"!==this.state)return void(this.role=e);let n,r=0;"audience"===e?this._clientRoleOptions&&this._clientRoleOptions.delay?(n=this._clientRoleOptions.delay,r=1):r=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:r=0,await this.signal.request(mS.SET_CLIENT_ROLE,{role:e,level:r,delay:n,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(mS.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(mS.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(mS.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(mS.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(mS.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,n){if(this.signal instanceof PC)return this.signal.sendExtensionMessage(e,t,n)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),LC({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(mS.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=MC.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){let t;return t=e.startsWith("dc")?e.match(/(dc\:\/\/)?([^:]+):(\d+)/):e.match(/(wss\:\/\/)?([^:]+):(\d+)/),t?{username:nS.username,password:nS.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(LC(LC({},nS),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if("CONNECTED"!==this.state)return;const e=await this.signal.request(mS.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),null!=e.ntp_offset&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach((e=>{const t=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find((t=>t.peer_uid===e.peer_uid));t&&t.B_st!==e.B_st&&zy((()=>{this.emit(XS.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new PS(Wv.UNEXPECTED_ERROR,"can not generate join message, no join info");const t=Object.assign({},this.joinInfo.apResponse);let n=bT("REPORT_APP_SCENARIO");if("string"!=typeof n)try{n=JSON.stringify(n)}catch(e){n=void 0}n&&n.length>128&&(n=void 0);const r=LC({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:mT,browser:navigator.userAgent,process_id:bT("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:bT("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:n,attributes:{userAttributes:{enablePublishedUserList:bT("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:bT("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:"number"==typeof bT("SUBSCRIBE_AUDIO_FILTER_TOPN")?bT("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:"boolean"==typeof bT("ENABLE_PUBLISH_AUDIO_FILTER")?bT("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:"boolean"==typeof bT("ENABLE_USER_LICENSE_CHECK")?bT("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:!0===bT("USE_PUB_RTX")||!0===bT("USE_SUB_RTX")||void 0,disableFEC:bT("DISABLE_FEC"),enableNTPReport:!!bT("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!bT("ENABLE_INSTANT_VIDEO")||void 0,enableDataStream2:"boolean"==typeof bT("ENABLE_DATASTREAM_2")?bT("ENABLE_DATASTREAM_2"):void 0,rtm2Flag:"number"==typeof this.joinInfo.rtmFlag?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!bT("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:"boolean"==typeof bT("USE_XR")?bT("USE_XR"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(r.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(r.aes_mode=this.joinInfo.aesmode,bT("ENCRYPT_AES")?(r.aes_secret=this.joinInfo.aespassword,r.aes_encrypt=!0):r.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(r.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(r.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(r.default_video_stream=this.joinInfo.defaultVideoStream),r}getRejoinMessage(){if(!this.joinInfo)throw new PS(Wv.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(fS.WS_RECONNECT_WAITTING_FINISH,(e=>{var t;Nr(t=["tryNext","recover"]).call(t,e)&&this.joinInfo&&eS.adjustSessionStartTime(this.joinInfo.sid)})),this.signal.on(fS.WS_RECONNECT_CREATE_CONNECTION,(e=>{this.joinGatewayStartTime=Date.now()})),this.signal.on(fS.WS_RECONNECTING,(e=>{this.joinInfo&&eS.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||_y.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",eS.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:"live"===this.spec.mode?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:"audience"===this.role?2:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())})),this.signal.on(fS.WS_CLOSED,(e=>{let t;switch(e){case my.LEAVE:t=_y.LEAVE;break;case my.UID_BANNED:case my.IP_BANNED:case my.CHANNEL_BANNED:case my.SERVER_ERROR:t=_y.SERVER_ERROR;break;case my.FALLBACK:t=_y.FALLBACK;break;case my.LICENSE_MISSING:case my.LICENSE_EXPIRED:case my.LICENSE_MINUTES_EXCEEDED:case my.LICENSE_PERIOD_INVALID:case my.LICENSE_MULTIPLE_SDK_SERVICE:case my.LICENSE_ILLEGAL:case my.TOKEN_EXPIRE:t=e;break;default:t=_y.NETWORK_ERROR}VT.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(t||"undefined -> "+_y.NETWORK_ERROR)),this.joinInfo&&eS.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===my.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==my.FALLBACK&&(this.state="DISCONNECTED"),this.reset()})),this.signal.on(fS.WS_CONNECTED,(()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(VT.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),eS.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof kC?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&1===this.joinInfo.setLocalAPVersion)){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void VT.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));ET("EVENT_REPORT_DOMAIN",e[1]),ET("EVENT_REPORT_BACKUP_DOMAIN",e[1]),ET("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}})),this.signal.on(_S.ON_UPLINK_STATS,(e=>{this._statsCollector.updateUplinkStats(e)})),this.signal.on(fS.REQUEST_RECOVER,((e,t,n)=>{if(!this.joinInfo)return n(new PS(Wv.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,wy(this,XS.REQUEST_NEW_GATEWAY_LIST).then(t).catch(n)})),this.signal.on(fS.REQUEST_JOIN_INFO,(async e=>{var t;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));const{iceParameters:n,dtlsParameters:r,rtpCapabilities:i}=await wy(this,XS.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(t=this.joinInfo)||void 0===t?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:n,dtlsParameters:r,rtpCapabilities:i,version:"2"}}))})),this.signal.on(fS.REQUEST_REJOIN_INFO,(e=>{e(this.getRejoinMessage())})),this.signal.on(fS.REPORT_JOIN_GATEWAY,((e,t)=>{this.joinInfo&&(eS.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:e,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof kC?"1":"0"}),this._isProactiveJoin=!1)})),this.signal.on(fS.IS_P2P_DISCONNECTED,(e=>{e(Iy(this,XS.IS_P2P_DISCONNECTED))})),this.signal.on(fS.DISCONNECT_P2P,(()=>{this.emit(XS.DISCONNECT_P2P)})),this.signal.on(fS.NEED_RENEW_SESSION,(()=>{this.emit(XS.NEED_RENEW_SESSION)})),this.signal.on(fS.REQUEST_SUCCESS,(()=>{this._signalTimeout=!1})),this.signal.on(fS.REQUEST_TIMEOUT,(()=>{this._signalTimeout=!0})),this.signal.on(fS.JOIN_RESPONSE,(e=>{const t=this.getCurrentGatewayAddress();this.emit(XS.JOIN_RESPONSE,e,t)})),this.signal.on(fS.DATACHANNEL_PRECONNECT,(async(e,t,n)=>{this.updateTurnConfigFromSignal();const r=this.getCurrentGatewayAddress();return wy(this,XS.DATACHANNEL_PRECONNECT,e,r).then(t).catch(n)})),this.signal.on(fS.DATACHANNEL_CONNECTING,(async e=>{const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=await wy(this,XS.REQUEST_DC_CONNECTION_PARAMS);e(this.getJoinMessage({ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:r,version:"2"}}))})),this.signal.on(fS.DATACHANNEL_FAILBACK,(()=>{VT.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(XS.DATACHANNEL_FAILBACK)}))}async tryUnsubBeforeResub(e,t){try{await this.signal.request(mS.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),e),e}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(mS.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(e){throw VT.warning("unsubscribe datachannel warning",e),e}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(mS.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),e),e}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(mS.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(e){throw VT.warning("unpublish datastream warning: ",e),e}}async tryMassUnsubBeforeResub(e){const t={users:e.map((e=>({stream_id:e.stream_id,stream_type:e.stream_type})))};try{await this.signal.request(mS.UNSUBSCRIBE_STREAMS,t,!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),e),e}}async muteLocal(e,t){const n={action:e.find((e=>e.stream_type===JS.Audio))?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(mS.CONTROL,n,!0,!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),e),e}}async unmuteLocal(e,t){const n={action:e.find((e=>e.stream_type===JS.Audio))?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(mS.CONTROL,n,!0,!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),e),e}}async muteRemote(e,t){const n={action:e===aw.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(mS.CONTROL,n,!0,!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),e),e}}async unmuteRemote(e,t){const n={action:e===aw.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(mS.CONTROL,n,!0,!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),e),e}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(mS.RESTART_ICE,t,!0)}catch(e){throw VT.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),e),e}}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,_y.P2P_FAILED)}getCurrentGatewayAddress(){var e;if(!bT("GATEWAY_WSS_ADDRESS"))return null!==(e=this.joinInfo)&&void 0!==e&&e.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(mS.SET_PARAMETER,{enablePublishAudioFilter:e})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(my.FALLBACK)),this.store.useDataChannel=!1,this.signal=new Jw(LC(LC({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(XS.RESET_SIGNAL,$S.websocket)}}let UC=0,FC=0;function BC(e,t,n,r){return new cv(((i,s)=>{t.timeout=t.timeout||bT("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),UC+=$y(t.data)):n&&(t.data.size?UC+=t.data.size:t.data instanceof FormData?UC+=eE(t.data):UC+=$y(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,sT.request(t).then((e=>{"string"==typeof e.data?FC+=$y(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?FC+=e.data.byteLength:FC+=$y(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((e=>{sT.isCancel(e)?s(new PS(Wv.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?s(new PS(Wv.NETWORK_TIMEOUT,e.message)):e.response?s(new PS(Wv.NETWORK_RESPONSE_ERROR,e.response.status)):s(new PS(Wv.NETWORK_ERROR,e.message))}))}))}!function(){var e;function n(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},s=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=s;e=e.split(".");for(var r=0;r<e.length-1;r++){var o=e[r];if(!(o in n))break e;n=n[o]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:n(e)}}if(o("Symbol",(function(e){function t(e,t){this.A=e,i(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var o=s[t[r]];"function"==typeof o&&"function"!=typeof o.prototype[e]&&i(o.prototype,e,{configurable:!0,writable:!0,value:function(){return a(n(this))}})}return e})),"function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var l;e:{var d={};try{d.__proto__={a:!0},l=d.a;break e}catch(e){}l=!1}r=l?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var u=r;function h(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function f(e,t){return e.h=3,{value:t}}function m(e){this.g=new h,this.G=e}function g(e,t,n,r){try{var i=t.call(e.g.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.m=!1,i;var s=i.value}catch(t){return e.g.j=null,e.g.s(t),_(e)}return e.g.j=null,r.call(e.g,s),_(e)}function _(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function v(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){p(e.g);var n=e.g.j;return n?g(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),_(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function y(e,t){return t=new v(new m(t)),u&&e.prototype&&u(t,e.prototype),t}if(h.prototype.o=function(e){this.v=e},h.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},h.prototype.return=function(e){this.l={return:e},this.h=this.u},m.prototype.o=function(e){return p(this.g),this.g.j?g(this,this.g.j.next,e,this.g.o):(this.g.o(e),_(this))},m.prototype.s=function(e){return p(this.g),this.g.j?g(this,this.g.j.throw,e,this.g.o):(this.g.s(e),_(this))},o("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var E=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},b=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},T=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},S=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},w="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,C=w.FormData,R=w.XMLHttpRequest&&w.XMLHttpRequest.prototype.send,I=w.Request&&w.fetch,N=w.navigator&&w.navigator.sendBeacon,O=w.Element&&w.Element.prototype,A=w.Symbol&&Symbol.toStringTag;A&&(Blob.prototype[A]||(Blob.prototype[A]="Blob"),"File"in w&&!File.prototype[A]&&(File.prototype[A]="File"));try{new File([],"")}catch(e){w.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),A&&Object.defineProperty(e,A,{value:"File"}),e}}var k=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},x=function(e){this.i=[];var t=this;e&&E(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];E(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?E(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?b(e.value):e.value,t.append(e.name,n))}))};if((e=x.prototype).append=function(e,t,n){S(arguments,2),this.i.push(T(e,t,n))},e.delete=function(e){S(arguments,1);var t=[];e=String(e),E(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},e.entries=function e(){var t,n=this;return y(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=f(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){S(arguments,1);for(var n=c(this),r=n.next();!r.done;r=n.next()){var i=c(r.value);r=i.next().value,i=i.next().value,e.call(t,i,r,this)}},e.get=function(e){S(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},e.getAll=function(e){S(arguments,1);var t=[];return e=String(e),E(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},e.has=function(e){S(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,n,r,i=this;return y(e,(function(e){if(1==e.h&&(t=c(i),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,f(e,c(r).next().value));n=t.next(),e.h=2}))},e.set=function(e,t,n){S(arguments,2),e=String(e);var r=[],i=T(e,t,n),s=!0;E(this.i,(function(t){t[0]===e?s&&(s=!r.push(i)):r.push(t)})),s&&r.push(i),this.i=r},e.values=function e(){var t,n,r,i,s=this;return y(e,(function(e){if(1==e.h&&(t=c(s),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,(i=c(r)).next(),f(e,i.next().value));n=t.next(),e.h=2}))},x.prototype._asNative=function(){for(var e=new C,t=c(this),n=t.next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.append(n,r)}return e},x.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,r){return"string"==typeof e?t.push(n+k(b(r))+'"\r\n\r\n'+b(e)+"\r\n"):t.push(n+k(b(r))+'"; filename="'+k(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},x.prototype[Symbol.iterator]=function(){return this.entries()},x.prototype.toString=function(){return"[object FormData]"},O&&!O.matches&&(O.matches=O.matchesSelector||O.mozMatchesSelector||O.msMatchesSelector||O.oMatchesSelector||O.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),A&&(x.prototype[A]="FormData"),R){var P=w.XMLHttpRequest.prototype.setRequestHeader;w.XMLHttpRequest.prototype.setRequestHeader=function(e,t){P.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},w.XMLHttpRequest.prototype.send=function(e){e instanceof x?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),R.call(this,e)):R.call(this,e)}}I&&(w.fetch=function(e,t){return t&&t.body&&t.body instanceof x&&(t.body=t.body._blob()),I.call(this,e,t)}),N&&(w.navigator.sendBeacon=function(e,t){return t instanceof x&&(t=t._asNative()),N.call(this,e,t)}),w.FormData=x}}();const VC=()=>{const e=bT("AREAS");return 0===e.length&&e.push(ew.GLOBAL),By(e).call(e,((e,t,n)=>{const r=GC(t);return r?0===n?r:"".concat(e,",").concat(r):e}),"")},GC=e=>e===ew.OVERSEA?"".concat(rw.ASIA,",").concat(rw.EUROPE,",").concat(rw.AFRICA,",").concat(rw.NORTH_AMERICA,",").concat(rw.SOUTH_AMERICA,",").concat(rw.OCEANIA):rw[e],HC=e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((e=>{const n=iw[e],r=Object.keys(n);r&&r.map((e=>{"CODE"!==e&&(t[e]=t[e].concat(n[e]))}))})),t},WC={GLOBAL:{ASIA:[ew.CHINA,ew.JAPAN,ew.INDIA,ew.KOREA,ew.HKMC],EUROPE:[],NORTH_AMERICA:[ew.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},zC=Object.keys(WC[ew.GLOBAL]),qC=[ew.CHINA,ew.NORTH_AMERICA,ew.EUROPE,ew.ASIA,ew.JAPAN,ew.INDIA,ew.OCEANIA,ew.SOUTH_AMERICA,ew.AFRICA,ew.KOREA,ew.HKMC,ew.US],KC=function(e,t){let n=[];if(Nr(e).call(e,ew.GLOBAL)){const s=[ew.GLOBAL,ew.OVERSEA],o=Object.keys(iw);if(t===ew.GLOBAL)throw new PS(Wv.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===ew.CHINA)n=[ew.OVERSEA];else if(i=t,Nr(zC).call(zC,i)){const e=(r=t,WC[ew.GLOBAL][r]||[]),i=[...s,t,...e];n=o.filter((e=>!Nr(i).call(i,e)))}else if(function(e){let t=!1;return zC.forEach((n=>{var r;Nr(r=WC[ew.GLOBAL][n]).call(r,e)&&(t=!0)})),t}(t)){const e=function(e){let t;return zC.forEach((n=>{var r;Nr(r=WC[ew.GLOBAL][n]).call(r,e)&&(t=n)})),t}(t),r=[...s,e,t];n=o.filter((e=>!Nr(r).call(r,e)))}else n=e;n=function(e){const t=[];return qC.forEach((n=>{Nr(e).call(e,n)&&t.push(n)})),t.concat(e.filter((e=>!Nr(qC).call(qC,e))))}(n)}else n=e;var r,i;return n};function YC(e){var t,n;if(!e&&Nr(t=bT("AREAS")).call(t,ew.EXTENSIONS))return VT.debug("update area from ap : reset"),void JC(tS,!0);if(!Nr(n=bT("AREAS")).call(n,ew.GLOBAL)||!e)return;let r=iw.EXTENSIONS;r&&(r={CODE:GC(ew.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},VT.debug("update area from ap success: ".concat(e,",config is "),r),ET("AREAS",[ew.EXTENSIONS],!0),Object.keys(r).map((e=>{ET(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?r[e][0]:r[e])})))}function JC(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=eS.reportApiInvoke(null,{name:hy.SET_AREA,options:e,tag:py.TRACER});try{let r=[];if("string"==typeof e&&(r=[e]),Array.isArray(e)&&(e.forEach((e=>{if(!Nr(nw).call(nw,e))throw new PS(Wv.INVALID_PARAMS,"invalid area code")})),r=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:t,excludedArea:n}=e;if(!t)throw new PS(Wv.INVALID_PARAMS,"area code is needed");let i=t;"string"==typeof t&&(i=[t]),r=n?KC(i,n):i}if(!t){if(TT.AREAS){const e=new PS(Wv.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return n.onError(e),void VT.warning("setArea is prohibited because of config-distribute")}if(Nr(r).call(r,ew.GLOBAL)&&bT("AREAS")===ew.EXTENSIONS){const e=new PS(Wv.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return n.onError(e),void VT.warning("setArea is prohibited because of ap extensions")}}ET("AREAS",r,t);const i=HC(r);Object.keys(i).map((e=>{ET(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?i[e][0]:i[e])})),VT.debug("set area success:",r.join(","))}catch(e){throw n.onError(e),e}n.onSuccess()}function XC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XC(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let QC=1;function $C(e,t,n,r,i){QC+=1;const s={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:QC,requestId:QC,version:mT,cname:n.cname},o={service_name:t,json_body:JSON.stringify(s)};let a,c,l=e[0];return _E((async()=>{a=Date.now();const e=await BC(l,{data:o,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Date.now()-a,0!==e.code){const t=new PS(Wv.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw VT.error(t.toString()),t}const n=JSON.parse(e.json_body);if(200!==n.code){const e=new PS(Wv.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(n.code,", reason: ").concat(n.reason),{code:n.code,responseTime:c});throw VT.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new PS(Wv.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:n.code,responseTime:c});throw VT.error(e.toString()),e}const i=function(e,t){return{addressList:e.servers.map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(bT("WORKER_DOMAIN"),":").concat(e.wss,"?serviceName=").concat(encodeURIComponent(t)))),workerToken:e.workerToken,vid:e.vid}}(n,t);return bT("LIVE_STREAMING_ADDRESS")&&(i.addressList=bT("LIVE_STREAMING_ADDRESS")instanceof Array?bT("LIVE_STREAMING_ADDRESS"):[bT("LIVE_STREAMING_ADDRESS")]),ZC(ZC({},i),{},{responseTime:c})}),((r,i)=>(eS.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(r.addressList),firstSuccess:0===i,responseTime:c,serverIp:e[i%e.length]}),!1)),((r,i)=>(eS.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:c,serverIp:e[i%e.length]}),!!(r.code!==Wv.OPERATION_ABORTED&&r.code!==Wv.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(l=e[(i+1)%e.length],!0))),i)}let eR=1;function tR(e,t,n,r){let{url:i,areaCode:s}=e;const o=Date.now();let a;const[c,l]=oR(t,s,[lC.CHOOSE_SERVER]);let d=Ny.networkState;return _E((async()=>{d&&Ny.networkState===vy.OFFLINE&&Ny.onlineWaiter&&await cv.race([Ny.onlineWaiter,nE(r&&r.maxRetryTimeout||mE.maxRetryTimeout)]),d=Ny.networkState;const{data:e,headers:s}=await BC(i,{data:c,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);a="1"===s.http3?1:-1,eS.reportResourceTiming(i,t.sid),rR(e,i,t,o,[lC.CHOOSE_SERVER],a);const l=SC(e,lC.CHOOSE_SERVER);return iR(l),yC(l,i)}),(e=>(e&&eS.joinChooseServer(t.sid,{lts:o,succ:!0,csAddr:i,opid:l,serverList:e.gatewayAddrs.map((e=>e.address)),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[lC.CHOOSE_SERVER].toString(),isHttp3:a}),!1)),(e=>e.code!==Wv.OPERATION_ABORTED&&(e.code===Wv.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(eS.joinChooseServer(t.sid,{lts:o,succ:!1,csAddr:i,serverList:null,opid:l,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[lC.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:d}),isHttp3:a}),VT.warning("[".concat(t.clientId,"] Choose server network error, retry"),e),!0))),r)}function nR(e,t,n,r){let i,{url:s,areaCode:o,serviceIds:a}=e;const c=Date.now(),[l,d]=oR(t,o,a);let u;return _E((async()=>{u&&Ny.networkState===vy.OFFLINE&&Ny.onlineWaiter&&await cv.race([Ny.onlineWaiter,nE(r&&r.maxRetryTimeout||mE.maxRetryTimeout)]),u=Ny.networkState;const{data:e,headers:o}=await BC(s,{data:l,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);i="1"===o.http3?1:-1,eS.reportResourceTiming(s,t.sid),rR(e,s,t,c,a,i);const d=SC(e,lC.CHOOSE_SERVER),h=SC(e,"proxy5"===t.cloudProxyServer?lC.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?lC.CLOUD_PROXY:lC.CLOUD_PROXY_FALLBACK);return iR(d),{gatewayInfo:yC(d,s),proxyInfo:h,url:s}}),(e=>(e.gatewayInfo&&eS.joinChooseServer(t.sid,{lts:c,succ:!0,csAddr:s,serverList:e.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,opid:d,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:a.toString(),isHttp3:i}),e.proxyInfo&&eS.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:s,turnServerAddrList:e.proxyInfo.addresses.map((e=>e.ip)).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:a.toString()}),!1)),(e=>e.code!==Wv.OPERATION_ABORTED&&(e.code===Wv.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(eS.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:s,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:a.toString(),extend:JSON.stringify({networkState:u})}),VT.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),e),!0))),r)}const rR=(e,t,n,r,i,s)=>{const o=[],a=o=>{4096===o.flag?eS.joinChooseServer(n.sid,{lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:o.error.message,csIp:o.error.data&&o.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:s}):1048576!==o.flag&&4194304!==o.flag&&4194310!==o.flag||eS.joinWebProxyAP(n.sid,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:o.error.code,eventType:n.cloudProxyServer,unilbsServerIds:i.toString()})};if(e.response_body.forEach((t=>{const n=t.buffer.code;if(23===t.uri&&0===n&&!t.buffer.edges_services)if(4194310===t.buffer.flag)VT.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),t.buffer.edges_services=[];else{const n={error:new PS(Wv.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};o.push(n),a(n)}if(0!==n){const r=xw(n),i={error:new PS(Wv.CAN_NOT_GET_GATEWAY_SERVER,r.desc,{desc:r.desc,retry:r.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?VT.warning(i.error.toString()):o.push(i),a(i)}})),o.length)throw VT.warning("[".concat(n.clientId,"] multi unilbs ").concat(t," failed, ").concat(o.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message,", retry: ").concat(e.error.data.retry))).join(" | "))),new PS(Wv.CAN_NOT_GET_GATEWAY_SERVER,o.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message))).join(" | "),{retry:!!o.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(o.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})},iR=e=>{var t,n,r,i;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new PS(Wv.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(bT("AP_AREA")&&(null!==(r=e.detail)&&void 0!==r&&r[23]&&"string"==typeof(null===(i=e.detail)||void 0===i?void 0:i[23])?YC(e.detail[23].toLowerCase()):YC()),null!==(t=e.detail)&&void 0!==t&&t[19]&&"string"==typeof(null===(n=e.detail)||void 0===n?void 0:n[19])){const t=e.detail[19],n=null==t?void 0:t.split(";");for(let r=0;r<n.length;r++){var s;const t=mC(s=n[r]).call(s);e.addresses[r]&&n&&(e.addresses[r].fingerprint=t)}}if(bT("GATEWAY_ADDRESS")&&bT("GATEWAY_ADDRESS").length>0){VT.debug("assign gateway address to",bT("GATEWAY_ADDRESS"));const t=bT("GATEWAY_ADDRESS").map((t=>{var n,r;const i=null!==(n=null===(r=e.addresses.find((e=>e.ip===t.ip&&e.port===t.port)))||void 0===r?void 0:r.fingerprint)&&void 0!==n?n:"";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:i}}));e.addresses=t}},sR=(e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){const e=xw(t.buffer.code);throw new PS(Wv.UPDATE_TICKET_FAILED,"[".concat(t.buffer.code,"]: ").concat(e.desc),{retry:e.retry})}return t.buffer.ticket}throw VT.debug("update ticket request received ap response without response body:",t),new PS(Wv.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},oR=(e,t,n)=>{const r=Math.floor(Math.random()*10**12),i={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:ZC({6:e.stringUid,11:t,12:bT("USE_NEW_TOKEN")?"1":void 0,22:t},e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:n,uid:e.uid||0}}]};i.request_bodies.forEach((t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));const s=new FormData;return s.append("request",JSON.stringify(i)),[s,r]},aR=(e,t)=>{const n=Math.floor(Math.random()*10**12),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((e=>({ip:e.ip,port:e.port})))}}]},i=new FormData;return i.append("request",JSON.stringify(r)),[i,n]};let cR=0;function lR(e){return cv.all(e.map((e=>e.then((e=>{throw e}),(e=>e))))).then((e=>{throw e}),(e=>e))}const dR=async e=>{let{fragementLength:t,referenceList:n,asyncMapHandler:r,allFailedhandler:i,promisesCollector:s}=e,o=0;const a=t;let c,l=0;const d=async()=>{const e=(()=>{const e=o*a,t=e+a;return n.slice(e,t).map(r)})();s&&s.push(...e);try{c=await lR(e)}catch(e){if(l+=a,o++,!(l>=n.length))return void await d();i(e)}e.forEach((e=>e.cancel()))};return await d(),c};async function uR(e,t,n,r){const i=async function(e,t,n,r){let i=null;const s=[],o=async()=>{const i=bT("WEBCS_DOMAIN").slice(0,bT("AJAX_REQUEST_CONCURRENT")).map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:VC()}))),o=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),a=await dR({fragementLength:bT("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(VT.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),tR(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},o),e[0]},promisesCollector:s});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},o),a},a=async()=>{if(await nE(1e3),null!==i)return i;const o=bT("WEBCS_DOMAIN_BACKUP_LIST").map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:VC()}))),a=r.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((e=>e.url))}),c=await dR({fragementLength:bT("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:r=>(VT.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),tR(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},a),e[0]},promisesCollector:s});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},a),c};try{return i=await lR([o(),a()]),s.length&&s.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),i}catch(e){throw e[0]}}(e,t,n,r);return{gatewayInfo:await i}}async function hR(e,t,n,r,i){const s=e.cloudProxyServer;if("disabled"===s){if(!r)return;if(e.useLocalAccessPoint)return await uR(e,t,n,i);if(bT("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:r,proxyInfo:s}=await mR(e,t,n,i);if(e.turnServer&&"auto"!==e.turnServer.mode)return{gatewayInfo:r};const a=s.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||nS.tcpport,udpport:e.udpport||nS.udpport,username:e.username||nS.username,password:e.password||nS.password,forceturn:!1,security:!0})));if(i.useP2P){var o;const t=null!==(o=e.uid)&&void 0!==o?o:r.uid,n="glb:".concat(t.toString()),i=await cy(n),c=s.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||nS.tcpport,udpport:e.udpport||nS.udpport,username:n,password:i,forceturn:!1,security:!0})));a.push(...c)}return e.turnServer={mode:"manual",servers:a},{gatewayInfo:r}}return await uR(e,t,n,i)}const{proxyInfo:a,gatewayInfo:c}=await mR(e,t,n,i),l={gatewayInfo:c},d=a.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===s?void 0:e.tcpport?e.tcpport:nS.tcpport,udpport:"proxy4"===s?void 0:e.udpport?e.udpport:nS.udpport,username:e.username||nS.username,password:e.password||nS.password,forceturn:"proxy4"!==s,security:"proxy5"===s})));if(i.useP2P){var u;const t=null!==(u=e.uid)&&void 0!==u?u:c.uid,n="glb:".concat(t.toString()),r=await cy(n),i=a.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===s?void 0:e.tcpport||nS.tcpport,udpport:"proxy4"===s?void 0:e.udpport||nS.udpport,username:n,password:r,forceturn:"proxy4"!==s,security:"proxy5"===s})));d.push(...i)}return e.turnServer={mode:"manual",servers:d},VT.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(s)),l}async function pR(e,t,n,r,i){const s=bT("ACCOUNT_REGISTER").slice(0,bT("AJAX_REQUEST_CONCURRENT"));let o=[];o=t.proxyServer?s.map((e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"))):s.map((e=>"https://".concat(e,"/api/v1")));const a=null==i?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:o});try{const s=await async function(e,t,n,r,i){const s=Date.now(),o={sid:n.sid,opid:10,appid:n.appId,string_uid:t};let a=e[0];const c=await _E((()=>BC(a+"".concat(-1===a.indexOf("?")?"?":"&","action=stringuid"),{data:o,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})),((n,r)=>{if(0===n.code){if(n.uid<=0||n.uid>=Math.pow(2,32))throw VT.error("Invalid Uint Uid ".concat(t," => ").concat(n.uid),n),eS.reqUserAccount(o.sid,{lts:s,success:!1,serverAddr:a,stringUid:o.string_uid,uid:n.uid,errorCode:Wv.INVALID_UINT_UID_FROM_STRING_UID,extend:o}),new PS(Wv.INVALID_UINT_UID_FROM_STRING_UID);return eS.reqUserAccount(o.sid,{lts:s,success:!0,serverAddr:a,stringUid:o.string_uid,uid:n.uid,errorCode:null,extend:o}),!1}const i=xw(n.code);return i.retry&&(a=e[(r+1)%e.length]),eS.reqUserAccount(o.sid,{lts:s,success:!1,serverAddr:a,stringUid:o.string_uid,uid:n.uid,errorCode:i.desc,extend:o}),i.retry}),((t,n)=>t.code!==Wv.OPERATION_ABORTED&&(eS.reqUserAccount(o.sid,{lts:s,success:!1,serverAddr:a,stringUid:o.string_uid,uid:null,errorCode:t.code,extend:o}),a=e[(n+1)%e.length],!0)),i);if(0!==c.code){const e=xw(c.code);throw new PS(Wv.UNEXPECTED_RESPONSE,e.desc)}return c}(o,e,t,n,r);return null==i||i.recordJoinChannelService({status:"success",endTs:Date.now()},a),s.uid}catch(e){throw null==i||i.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[e]},a),e}}async function fR(e,t,n){const r=bT("CDS_AP").slice(0,bT("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1"):"https://".concat(t,"/api/v1?action=config"))),i=r.map((r=>function(e,t,n,r){const i=Ev(),s={flag:64,cipher_method:0,features:{device:i.name,system:i.os,system_general:navigator.userAgent,vendor:t.appId,version:mT,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return _E((()=>BC(e,{data:s,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})),void 0,(e=>e.code!==Wv.OPERATION_ABORTED),r)}(r,e,t,n)));let s=null,o=null,a={};try{s=await lR(i)}catch(e){if(e.code===Wv.OPERATION_ABORTED)throw e;o=e}if(i.forEach((e=>e.cancel())),eS.reportApiInvoke(e.sid,{name:hy.REQUEST_CONFIG_DISTRIBUTE,options:{error:o,res:s}}).onSuccess(),s&&s.test_tags)try{a=function(e){if(!e.test_tags)return{};const t=e.test_tags,n=Object.keys(t),r={};return n.forEach((e=>{var n;const i=mC(n=e.slice(4)).call(n),s=JSON.parse(t[e])[1];r[i]=s})),r}(s)}catch(e){}return a}async function mR(e,t,n,r){const i=bT("PROXY_SERVER_TYPE3"),s=(e,t,n)=>{let r=n||i;return Array.isArray(r)&&(r=t%2==0?i[1]:i[0]),"https://".concat(r,"/ap/?url=").concat(e)};let o=null;const a=[],c=async()=>{const i=bT("WEBCS_DOMAIN").slice(0,bT("AJAX_REQUEST_CONCURRENT")).map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?s("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):s("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:VC(),serviceIds:[lC.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?lC.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?lC.CLOUD_PROXY:lC.CLOUD_PROXY_FALLBACK]}})),o=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),c=await dR({fragementLength:bT("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(VT.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),nR(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},o),e[0]},promisesCollector:a});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},o),c},l=async()=>{if(await nE(1e3),null!==o)return o;const i=bT("WEBCS_DOMAIN_BACKUP_LIST").map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?s("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):s("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:VC(),serviceIds:[lC.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?lC.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?lC.CLOUD_PROXY:lC.CLOUD_PROXY_FALLBACK]}})),c=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),l=await dR({fragementLength:bT("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(VT.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),nR(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},c),e[0]},promisesCollector:a});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},c),l};let d,u,h;try{({gatewayInfo:d,proxyInfo:u,url:h}=await lR([c(),l()]))}catch(e){throw e[0]}if(a.length&&a.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),!d||!u)throw new PS(Wv.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=h,"disabled"!==e.cloudProxyServer&&Array.isArray(i)&&h){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(h)[1];Nr(i).call(i,t)&&(e.proxyServer=t,VT.setProxyServer(t),eS.setProxyServer(t))}return o={gatewayInfo:d,proxyInfo:await wC(u,d.uid)},o}async function gR(e,t,n,r){const i=bT("UAP_AP").slice(0,bT("AJAX_REQUEST_CONCURRENT")).map((e=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")));return await $C(i,e,t,n,r)}async function _R(e,t,n){const r=bT("UAP_AP").slice(0,bT("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap"))),i=r.map((r=>function(e,t,n,r){const i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:mT,cname:t.cname,uid:t.uid.toString(),requestId:eR,seq:eR};eR+=1;const s={service_name:"tele_channel",json_body:JSON.stringify(i)};return _E((async()=>{const t=await BC(e,{data:s,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==t.code){const e=new PS(Wv.UNEXPECTED_RESPONSE,"cross channel ap error, code"+t.code,{retry:!0});throw VT.error(e.toString()),e}const r=JSON.parse(t.json_body);if(200!==r.code){const e=new PS(Wv.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(r.code,", reason: ").concat(r.reason));throw VT.error(e.toString()),e}if(!r.servers||0===r.servers.length){const e=new PS(Wv.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw VT.error(e.toString()),e}return{vid:r.vid,workerToken:r.workerToken,addressList:(bT("CHANNEL_MEDIA_RELAY_SERVERS")||r.servers).map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(bT("WORKER_DOMAIN"),":").concat(e.wss)))}}),void 0,(e=>!!(e.code!==Wv.OPERATION_ABORTED&&e.code!==Wv.UNEXPECTED_RESPONSE||e.data&&e.data.retry)),r)}(r,e,t,n)));try{const e=await lR(i);return i.forEach((e=>e.cancel())),e}catch(e){throw e[0]}}async function vR(e,t,n){let r=null;const i=[],s=async s=>{const o=bT(s?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2")));return s&&(await nE(1e3),null!==r)?r:await dR({fragementLength:bT("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:r=>(VT.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(s?"backup":""," choose_server:"),r),function(e,t,n,r){const[i]=aR(t,[lC.CHOOSE_SERVER]);let s=Ny.networkState;return _E((async()=>{s&&Ny.networkState===vy.OFFLINE&&Ny.onlineWaiter&&await cv.race([Ny.onlineWaiter,nE(r&&r.maxRetryTimeout||mE.maxRetryTimeout)]),s=Ny.networkState;const t=await BC(e,{data:i,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);return sR(t,e)}),(()=>!1),(e=>e.code!==Wv.OPERATION_ABORTED&&(e.code===Wv.UPDATE_TICKET_FAILED?e.data.retry:(VT.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0))),r)}(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:i})};try{return r=await lR([s(!1),s(!0)]),i.length&&i.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),r}catch(e){throw e[0]}}function yR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ER(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yR(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class bR extends ly{get isSuccess(){return!!this.configs}constructor(){super(),sh(this,"configs",void 0),sh(this,"joinInfo",void 0),sh(this,"cancelToken",void 0),sh(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),sh(this,"interval",void 0),sh(this,"mutex",new pE("config-distribute")),sh(this,"mutableParamsRead",!1)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),bT("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval((()=>{this.updateConfigDistribute()}),bT("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,eS.reportApiInvoke(null,{options:void 0,name:hy.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:py.TRACER}).onSuccess(JSON.stringify(TT))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void VT.debug("[config-distribute] get config distribute interrupted have no joininfo");let e;const t=await this.mutex.lock();try{e=await fR(this.joinInfo,this.cancelToken,this.retryConfig),VT.debug("[config-distribute] get config distribute",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(e){const t=new PS(Wv.NETWORK_RESPONSE_ERROR,e);VT.warning("[config-distribute] ".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(sw.UPDATE_BITRATE_LIMIT,e):this.emit(sw.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&ER({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;const n=ep(t=Object.keys(e).filter((e=>/^webrtc_ng_global_parameter/.test(e)))).call(t);for(let i=0;i<n.length;i++)for(let t=n.length-1;t>i;t--){const r=n[t];if("number"==typeof e[r].__priority){const i=e[r].__priority,s=n[t-1];if("number"==typeof e[s].__priority){if(!(i>e[s].__priority))continue;{const e=r;n[t]=n[t-1],n[t-1]=e}}else{const e=r;n[t]=n[t-1],n[t-1]=e}}}const r={};n.forEach((t=>{const n=e[t],i=n.__expires;Object.keys(n).forEach((e=>{"__priority"===e||"__expires"===e||Object.prototype.hasOwnProperty.call(r,e)||(r[e]=ER({value:n[e]},i&&{expires:i}))}))}));try{!function(e){try{const t=Date.now();Object.keys(e).forEach((n=>{switch(n){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":if(Object.prototype.hasOwnProperty.call(yT,n)){const{value:r,expires:i}=e[n];if(i&&i<=t)return;TT[n]=r,yT[n]=r,VT.debug("Update global parameters from config distribute",n,r)}}}))}catch(t){VT.error("Error update config immediately: ".concat(e),t.message)}}(r);const e=JSON.stringify(r),t=window.btoa(e);window.localStorage.setItem("websdk_ng_global_parameter",t),VT.debug("Caching global parameters ".concat(e))}catch(e){VT.error("Error caching global parameters:",e.message)}}}const TR={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1};function SR(){return TR}var wR;function CR(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function RR(e,t,n,r,i){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:i}}function IR(e,t,n,r,i){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:i}}function NR(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}!function(e){e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change"}(wR||(wR={}));const OR={"90p":RR(160,90),"90p_1":RR(160,90),"120p":RR(160,120,15,30,65),"120p_1":RR(160,120,15,30,65),"120p_3":RR(120,120,15,30,50),"120p_4":RR(212,120),"180p":RR(320,180,15,30,140),"180p_1":RR(320,180,15,30,140),"180p_3":RR(180,180,15,30,100),"180p_4":RR(240,180,15,30,120),"240p":RR(320,240,15,40,200),"240p_1":RR(320,240,15,40,200),"240p_3":RR(240,240,15,40,140),"240p_4":RR(424,240,15,40,220),"360p":RR(640,360,15,80,400),"360p_1":RR(640,360,15,80,400),"360p_3":RR(360,360,15,80,260),"360p_4":RR(640,360,30,80,600),"360p_6":RR(360,360,30,80,400),"360p_7":RR(480,360,15,80,320),"360p_8":RR(480,360,30,80,490),"360p_9":RR(640,360,15,80,800),"360p_10":RR(640,360,24,80,800),"360p_11":RR(640,360,24,80,1e3),"480p":RR(640,480,15,100,500),"480p_1":RR(640,480,15,100,500),"480p_2":RR(640,480,30,100,1e3),"480p_3":RR(480,480,15,100,400),"480p_4":RR(640,480,30,100,750),"480p_6":RR(480,480,30,100,600),"480p_8":RR(848,480,15,100,610),"480p_9":RR(848,480,30,100,930),"480p_10":RR(640,480,10,100,400),"720p":RR(1280,720,15,120,1130),"720p_auto":RR(1280,720,30,900,3e3),"720p_1":RR(1280,720,15,120,1130),"720p_2":RR(1280,720,30,120,2e3),"720p_3":RR(1280,720,30,120,1710),"720p_5":RR(960,720,15,120,910),"720p_6":RR(960,720,30,120,1380),"1080p":RR(1920,1080,15,120,2080),"1080p_1":RR(1920,1080,15,120,2080),"1080p_2":RR(1920,1080,30,120,3e3),"1080p_3":RR(1920,1080,30,120,3150),"1080p_5":RR(1920,1080,60,120,4780),"1440p":RR(2560,1440,30,120,4850),"1440p_1":RR(2560,1440,30,120,4850),"1440p_2":RR(2560,1440,60,120,7350),"4k":RR(3840,2160,30,120,8910),"4k_1":RR(3840,2160,30,120,8910),"4k_3":RR(3840,2160,60,120,13500)},AR=[{scaleResolutionDownBy:2,width:1280,height:720,frameRate:30,bitrateMin:300,bitrateMax:900},{scaleResolutionDownBy:1.333333,width:1280,height:720,frameRate:30,bitrateMin:600,bitrateMax:2e3},{scaleResolutionDownBy:1,width:1280,height:720,frameRate:30,bitrateMin:900,bitrateMax:3e3}],kR={"480p":IR(640,480,5),"480p_1":IR(640,480,5),"480p_2":IR(640,480,30),"480p_3":IR(640,480,15),"720p":IR(1280,720,5),"720p_auto":RR(1280,720,30,900,3e3),"720p_1":IR(1280,720,5),"720p_2":IR(1280,720,30),"720p_3":IR(1280,720,15),"1080p":IR(1920,1080,5),"1080p_1":IR(1920,1080,5),"1080p_2":IR(1920,1080,30),"1080p_3":IR(1920,1080,15)},xR={"1SL1TL":NR(1,1),"3SL3TL":NR(3,3),"2SL3TL":NR(2,3)};function PR(e){return e||(e="480p_1"),"string"==typeof e?Object.assign({},OR[e]):e}function DR(e){return"string"==typeof e?Object.assign({},kR[e]):e}function LR(e){return"string"==typeof e?Object.assign({},xR[e]):e}const MR={speech_low_quality:CR(16e3,!1),speech_standard:CR(32e3,!1,18),music_standard:CR(48e3,!1),standard_stereo:CR(48e3,!0,56),high_quality:CR(48e3,!1,128),high_quality_stereo:CR(48e3,!0,192)};function jR(e){return"string"==typeof e?Object.assign({},MR[e]):e}const UR=[];function FR(e){return Kv(e,"mediaSource",["screen","window","application"]),!0}var BR,VR,GR,HR,WR,zR,qR,KR,YR,JR;!function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track"}(BR||(BR={})),function(e){e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream"}(VR||(VR={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(GR||(GR={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(HR||(HR={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY"}(WR||(WR={})),function(e){e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received"}(zR||(zR={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed"}(qR||(qR={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed"}(KR||(KR={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source"}(YR||(YR={})),function(e){e.UPDATE_TRACK_SOURCE="update-track-source"}(JR||(JR={}));const XR={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},ZR={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},QR={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},$R={uplinkNetworkQuality:0,downlinkNetworkQuality:0},eI={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};var tI,nI,rI,iI,sI,oI;!function(e){e.ON_TRACK="on_track",e.ON_NODE="on_node"}(tI||(tI={})),function(e){e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints"}(nI||(nI={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(rI||(rI={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(iI||(iI={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata"}(sI||(sI={})),function(e){e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen"}(oI||(oI={}));const aI={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};var cI;!function(e){e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error"}(cI||(cI={}));class lI extends ly{constructor(e,t){super(),sh(this,"_ID",void 0),sh(this,"_rtpTransceiver",void 0),sh(this,"_lowRtpTransceiver",void 0),sh(this,"_hints",[]),sh(this,"_isClosed",!1),sh(this,"_originMediaStreamTrack",void 0),sh(this,"_mediaStreamTrack",void 0),sh(this,"_external",{}),this._ID=t||rE(8,"track-"),this._originMediaStreamTrack=e,this._mediaStreamTrack=e,function(e){Nr(UR).call(UR,e)||UR.push(e)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){if(!e){const e=eS.reportApiInvoke(null,{name:hy.GET_MEDIA_STREAM_TRACK,options:[],tag:py.TRACER});this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?e.onSuccess(this._mediaStreamTrack.label):e.onSuccess("")}return this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===GR.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){const t=UR.indexOf(e);-1!==t&&UR.splice(t,1)}(this),this.emit(qR.CLOSED),this.removeAllListeners(zR.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===GR.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(zR.TRANSCEIVER_UPDATED,e,t)}}class dI extends lI{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),sh(this,"_enabled",!0),sh(this,"_muted",!1),sh(this,"_isExternalTrack",!1),sh(this,"_isClosed",!1),sh(this,"_enabledMutex",void 0),sh(this,"processor",void 0),sh(this,"_handleTrackEnded",(()=>{this.onTrackEnded()})),this._enabledMutex=new pE("".concat(this.getTrackId())),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,VT.debug("[".concat(this.getTrackId(),"] close")),this.emit(BR.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isExternalTrack=n,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Cy(this,BR.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){VT.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(qR.TRACK_ENDED)}stateCheck(e,t){if(VT.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),qv(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new zv(Wv.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",VT);if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new zv(Wv.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",VT)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():cv.resolve([])}}function uI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const hI=window.AudioContext||window.webkitAudioContext;let pI=null;const fI=new class extends ly{constructor(){super(...arguments),sh(this,"prevState",void 0),sh(this,"curState",void 0),sh(this,"currentTime",void 0),sh(this,"currentTimeStuckAt",void 0),sh(this,"interruptDetectorTrack",void 0),sh(this,"onLocalAudioTrackMute",(()=>{VT.info("ios15-interruption-start"),this.emit(wR.IOS_15_16_INTERRUPTION_START)})),sh(this,"onLocalAudioTrackUnmute",(async()=>{VT.info("ios15-interruption-end"),"running"!==this.curState||this.duringInterruption?VT.info("ios15-interruption-end-canceled"):(pI&&await pI.suspend(),this.emit(wR.IOS_15_16_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){VT.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){VT.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function mI(){if(!hI)return void VT.error("your browser is not support web audio");VT.info("create audio context");const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uI(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},bT("WEBAUDIO_INIT_OPTIONS"));VT.debug("audio context init option:",JSON.stringify(e)),pI=new hI(e),fI.curState=pI.state,pI.onstatechange=()=>{fI.prevState=fI.curState,fI.curState=pI?pI.state:void 0;const{prevState:e,curState:t}=fI,n="running"===t,r="interrupted"===t,i="running"===e,s="suspended"===e,o="interrupted"===e,a=Ev().osVersion;(Ov()||Uv())&&i&&r&&(VT.info("ios".concat(a,"-interruption-start")),fI.emit(wR.IOS_INTERRUPTION_START)),(Ov()||Uv())&&(s||o)&&n&&(VT.info("ios".concat(a,"-interruption-end")),fI.emit(wR.IOS_INTERRUPTION_END)),e!==t&&fI.emit(wR.STATE_CHANGE,t,e)},setInterval((()=>{var e;const t=null===(e=pI)||void 0===e?void 0:e.currentTime;fI.currentTime!==t?(fI.currentTimeStuckAt&&(VT.debug("AudioContext current time resume at ".concat(t)),fI.currentTimeStuckAt=void 0),fI.currentTime=t):(t!==fI.currentTimeStuckAt&&(eS.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:t},tag:py.TRACER}).onSuccess(),VT.warning("AudioContext current time stuck at ".concat(t))),fI.currentTimeStuckAt=t)}),5e3),async function(e){const t=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let n,r=!1,i=!1,s=!1;function o(t){"running"===e.state?a(!1):Ov()||Uv()?"suspended"===e.state&&(a(!0),t&&e.resume().then(l,l)):"closed"!==e.state&&(a(!0),t&&e.resume().then(l,l))}function a(e){if(r!==e){r=e;for(let n=0,r=t;n<r.length;n+=1){const t=r[n];e?window.addEventListener(t,d,{capture:!0,passive:!0}):window.removeEventListener(t,d,{capture:!0,passive:!0})}}}function c(){o(!0)}function l(){o(!1)}function d(){o(!0)}function u(e){if(!s)if(n.paused)if(e){let t;h(!1),s=!0;try{t=n.play(),t?t.then(p,p):(n.addEventListener("playing",p),n.addEventListener("abort",p),n.addEventListener("error",p))}catch(e){p()}}else h(!0);else h(!1)}function h(e){if(i!==e){i=e;for(let n=0,r=t;n<r.length;n++){const t=r[n];e?window.addEventListener(t,f,{capture:!0,passive:!0}):window.removeEventListener(t,f,{capture:!0,passive:!0})}}}function p(){n.removeEventListener("playing",p),n.removeEventListener("abort",p),n.removeEventListener("error",p),s=!1,u(!1)}function f(){u(!0)}if(Ov()){const t=e.createMediaStreamDestination(),r=document.createElement("div");r.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=r.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=t.stream,u(!0)}fI.on(wR.STATE_CHANGE,c),o(!1)}(pI)}function gI(){if(!pI){if(mI(),!pI)throw new zv(Wv.NOT_SUPPORTED,"can not create audio context");return pI}return pI}function _I(e){if(function(){if(null!==vI)return vI;const e=gI(),t=e.createBufferSource(),n=e.createGain(),r=e.createGain();t.connect(n),t.connect(r),t.disconnect(n);let i=!1;try{t.disconnect(n)}catch(e){i=!0}return t.disconnect(),vI=i,i}())return;const t=e.connect,n=e.disconnect;e.connect=(n,r,i)=>{var s;return e._inputNodes||(e._inputNodes=[]),Nr(s=e._inputNodes).call(s,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,r,i)):t.call(e,n,r)),e},e.disconnect=(r,i,s)=>{n.call(e),r?Hy(e._inputNodes,r):e._inputNodes=[];for(const n of e._inputNodes)t.call(e,n)}}let vI=null;function yI(e,t){let n=!1;const r=1/t;if(bT("DISABLE_WEBAUDIO")){const t=window.setInterval((()=>{n?window.clearInterval(t):e(performance.now()/1e3)}),1e3*r)}else{const t=gI();let i=t.createGain();i.gain.value=0,i.connect(t.destination);const s=()=>{if(n)return void(i=null);const o=t.createOscillator();o.onended=s,o.connect(i),o.start(0),o.stop(t.currentTime+r),e(t.currentTime)};s()}return()=>{n=!0}}class EI{constructor(){sh(this,"context",void 0),sh(this,"analyserNode",void 0),sh(this,"sourceNode",void 0),this.context=gI(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode)return 0;if(!this.context||Ov()||Uv()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{const t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(let n=0;n<e.length;++n)e[n]=t[n]/128-1}const t=By(e).call(e,((e,t)=>e+t*t),0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){VT.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class bI extends ly{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var n;null===(n=this.sourceNode)||void 0===n||n.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),sh(this,"outputNode",void 0),sh(this,"outputTrack",void 0),sh(this,"isPlayed",!1),sh(this,"context",void 0),sh(this,"audioBufferNode",void 0),sh(this,"destNode",void 0),sh(this,"audioOutputLevel",0),sh(this,"volumeLevelAnalyser",void 0),sh(this,"_processedNode",void 0),sh(this,"playNode",void 0),sh(this,"isDestroyed",!1),sh(this,"onNoAudioInput",void 0),sh(this,"isNoAudioInput",!1),sh(this,"_noAudioInputCount",0),this.context=gI(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),_I(this.outputNode),this.volumeLevelAnalyser=new EI}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(YR.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const n=e.outputBuffer.getChannelData(t);for(let e=0;e<n.length;e+=1)n[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!SR().webAudioMediaStreamDest)throw new zv(Wv.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&zy((()=>{fI.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Ov()||Uv()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume();const t=this.volumeLevelAnalyser.getAnalyserNode();let n;t.getFloatTimeDomainData?(n=new Float32Array(t.fftSize),t.getFloatTimeDomainData(n)):(n=new Uint8Array(t.fftSize),t.getByteTimeDomainData(n));let r=!1;for(let i=0;i<n.length;i++)0!==n[i]&&(r=!0);return r?(this.isNoAudioInput=!1,!0):(await nE(200),await this.checkHasAudioInput(e?e+1:1)&&r)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class TI extends bI{get isFreeze(){return!1}constructor(e,t,n){var r;if(super(),sh(this,"sourceNode",void 0),sh(this,"track",void 0),sh(this,"clonedTrack",void 0),sh(this,"audioElement",void 0),sh(this,"isCurrentTrackCloned",!1),sh(this,"isRemoteTrack",!1),sh(this,"originVolumeLevelAnalyser",void 0),sh(this,"rebuildWebAudio",(async()=>{if(VT.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void VT.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then((()=>VT.info("resume success"))),VT.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),_I(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const n=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(n,this.context.currentTime),_I(this.outputNode),this.emit(YR.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()})),"audio"!==e.kind)throw new zv(Wv.UNEXPECTED_ERROR);this.track=e;const i=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(i),_I(this.sourceNode),n){const e=n.clone();e.enabled=!0,this.clonedTrack=e,VT.debug("create an unmuted track ".concat(e.id," from the original track ").concat(n.id," to get the volume"));const t=this.context.createMediaStreamSource(new MediaStream([e]));_I(t),this.originVolumeLevelAnalyser=new EI,this.originVolumeLevelAnalyser.updateSource(t)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=i;const s=Ev();t&&s.os===fv.IOS&&Number(null===(r=s.osVersion)||void 0===r?void 0:r.split(".")[0])<15&&(fI.on(wR.STATE_CHANGE,(()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()})),this.checkHasAudioInput().then((e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)})))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),_I(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(YR.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),fI.off("state-change",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){const t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),VT.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));const n=this.context.createMediaStreamSource(new MediaStream([t]));_I(n),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(n)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function SI(e,t,n){const r=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,i={audio:!!n&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:r(t.height,1080),maxWidth:r(t.width,1920)}}};return t.frameRate&&"number"!=typeof t.frameRate?(i.video.mandatory.maxFrameRate=t.frameRate.max,i.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(i.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(i)}async function wI(e,t){const n=await CI(e.mediaSource),{sourceId:r,audio:i}=await function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new cv(((n,r)=>{const i=document.createElement("div");i.innerText="share screen",i.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const s=document.createElement("div");s.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const o=document.createElement("div");o.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",o.setAttribute("style","height: 12%;");const a=document.createElement("div");a.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const c=document.createElement("div");c.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const l=document.createElement("button");l.innerHTML="cancel",l.setAttribute("style","width: 85px;"),l.onclick=()=>{document.body.removeChild(h);const e=new Error("NotAllowedError");e.name="NotAllowedError",r(e)};let d=t;const u=document.createElement("div");if(t){const e=document.createElement("input");e.setAttribute("type","checkbox");const t=document.createElement("span");e.setAttribute("style","margin-right: 6px;"),t.innerText="Share audio",e.checked=d,e.onchange=()=>{d=e.checked},u.appendChild(e),u.appendChild(t)}c.appendChild(u),c.appendChild(l),s.appendChild(o),s.appendChild(a),s.appendChild(c);const h=document.createElement("div");h.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),h.appendChild(i),h.appendChild(s),document.body.appendChild(h),e.map((e=>{if(e.id){const t=document.createElement("div");t.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let r=e.thumbnail;try{const{width:e}=r.getSize();e>1920&&(r=r.resize({width:1920}))}catch(e){throw e&&e.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),e}t.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",t.onclick=()=>{document.body.removeChild(h),n({sourceId:e.id,audio:d})},a.appendChild(t)}}))}))}(n,t);return await SI(r,e,i)}async function CI(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);const n=uy();if(!n)throw console.error("failed to fetch electron, please mount it to window"),new zv(Wv.ELECTRON_IS_NULL);let r=null;try{var i;r=(null===(i=n.desktopCapturer)||void 0===i?void 0:i.getSources({types:t}))||n.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch(e){r=null}r&&r.then||(r=new cv(((e,r)=>{n.desktopCapturer.getSources({types:t},((t,n)=>{t?r(t):e(n)}))})));try{return await r}catch(e){throw new zv(Wv.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}function RI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const II=new pE("safari");let NI=!1,OI=!1;async function AI(e,t){let n=0,r=null;for(;n<2;)try{r=await kI(e,t,n>0);break}catch(e){if(e instanceof zv)throw VT.error("[".concat(t,"] ").concat(e.toString())),e;const r=xI(e.name||e.code||e,e.message);if(r.code===Wv.MEDIA_OPTION_INVALID){VT.debug("[".concat(t,"] detect media option invalid, retry")),n+=1,await nE(500);continue}throw VT.error("[".concat(t,"] ").concat(r.toString())),r}if(!r)throw new zv(Wv.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return r}async function kI(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new zv(Wv.NOT_SUPPORTED,"can not find getUserMedia");n&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const r=SR(),i=new MediaStream;if(e.audioSource&&i.addTrack(e.audioSource),e.videoSource&&i.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return VT.debug("Using Video Source/ Audio Source"),i;if(e.screen)if(uy())e.screen.sourceId?PI(i,await SI(e.screen.sourceId,e.screen,e.screenAudio)):PI(i,await wI(e.screen,e.screenAudio));else if(Rv()&&e.screen.extensionId&&e.screen.mandatory){if(!r.getStreamFromExtension)throw new zv(Wv.NOT_SUPPORTED,"This browser does not support screen sharing");VT.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));const n=await(o=e.screen.extensionId,a=t,new cv(((e,t)=>{try{chrome.runtime.sendMessage(o,{getStream:!0},(n=>{if(!n||!n.streamId)return VT.error("[".concat(a,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new zv(Wv.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(e){VT.error("[".concat(a,"] AgoraRTC screensharing plugin is not accessible(").concat(o,")"),e.toString()),t(new zv(Wv.CHROME_PLUGIN_NOT_INSTALL))}})));e.screen.mandatory.chromeMediaSourceId=n,PI(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(r.getDisplayMedia){var s;e.screen.mediaSource&&FR(e.screen.mediaSource);const n={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:null!==(s=e.screen.displaySurface)&&void 0!==s?s:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource},{selfBrowserSurface:r,surfaceSwitching:o,systemAudio:a}=e.screen,c={selfBrowserSurface:r,surfaceSwitching:o,systemAudio:a};!r&&delete c.selfBrowserSurface,!o&&delete c.surfaceSwitching,!a&&delete c.systemAudio,VT.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:n,audio:!!e.screenAudio,controls:c}));const l=await navigator.mediaDevices.getDisplayMedia(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RI(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({video:n,audio:!!e.screenAudio},c));PI(i,l)}else{if(!Nv())throw VT.error("[".concat(t,"] This browser does not support screenSharing")),new zv(Wv.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&FR(e.screen.mediaSource);const n={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};VT.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(n))),PI(i,await navigator.mediaDevices.getUserMedia(n))}}var o,a;if(!e.video&&!e.audio)return i;let c={video:e.video,audio:e.audio},l=bT("MEDIA_DEVICE_CONSTRAINTS");if(l)try{"string"==typeof l&&(l=JSON.parse(l)),c=lE(c,l)}catch(e){}VT.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(c)),Ev();let d,u=null;(Iv()||Ov()||Sv())&&(u=await II.lock());try{d=await navigator.mediaDevices.getUserMedia(c)}catch(e){throw u&&u(),e}return c.audio&&(NI=!0),c.video&&(OI=!0),PI(i,d),u&&u(),i}function xI(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new zv(Wv.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new zv(Wv.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new zv(Wv.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new zv(Wv.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new zv(Wv.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new zv(Wv.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return VT.error("getUserMedia unexpected error",e),new zv(Wv.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function PI(e,t){const n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],i=t.getVideoTracks()[0],s=t.getAudioTracks()[0];s&&(r&&e.removeTrack(r),e.addTrack(s)),i&&(n&&e.removeTrack(n),e.addTrack(i))}const DI=new class extends ly{get state(){return this._state}set state(e){e!==this._state&&(this.emit(iI.STATE_CHANGE,e),this._state=e)}constructor(){super(),sh(this,"_state",rI.IDLE),sh(this,"isAccessMicrophonePermission",!1),sh(this,"isAccessCameraPermission",!1),sh(this,"lastAccessMicrophonePermission",!1),sh(this,"lastAccessCameraPermission",!1),sh(this,"checkdeviceMatched",!1),sh(this,"deviceInfoMap",new Map),this.init().then((()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval((()=>{(bT("ENUMERATE_DEVICES_INTERVAL")||(Gv()||bv()===fv.HARMONY_OS)&&Vv())&&this.updateDevicesInfo()}),bT("ENUMERATE_DEVICES_INTERVAL_TIME"))})).catch((e=>VT.error(e.toString())))}async enumerateDevices(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new zv(Wv.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const r=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(r);let s=!this.isAccessMicrophonePermission&&e,o=!this.isAccessCameraPermission&&t;i.audio&&(s=!1),i.video&&(o=!1);let a=null,c=null,l=null;if(!n&&(s||o)){if(II.isLocked&&(VT.debug("[device manager] wait GUM lock"),(await II.lock())(),VT.debug("[device manager] GUM unlock")),NI&&(s=!1,this.isAccessMicrophonePermission=!0),OI&&(o=!1,this.isAccessCameraPermission=!0),VT.debug("[device manager] check media device permissions",e,t,s,o),s&&o){try{l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=xI(e.name||e.code||e,e.message);if(t.code===Wv.PERMISSION_DENIED)throw t;VT.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(s){try{a=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){const t=xI(e.name||e.code||e,e.message);if(t.code===Wv.PERMISSION_DENIED)throw t;VT.warning("getUserMedia failed in getDevices",t)}this.isAccessMicrophonePermission=!0}else if(o){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){const t=xI(e.name||e.code||e,e.message);if(t.code===Wv.PERMISSION_DENIED)throw t;VT.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0}VT.debug("[device manager] mic permission",e,"cam permission",t)}try{const e=await navigator.mediaDevices.enumerateDevices();return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),l&&l.getTracks().forEach((e=>e.stop())),a=null,c=null,l=null,e}catch(e){return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),l&&l.getTracks().forEach((e=>e.stop())),a=null,c=null,l=null,new zv(Wv.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audioinput"===e.kind))}async getCamerasDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter((e=>"videoinput"===e.kind))}async getSpeakers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audiooutput"===e.kind))}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach((n=>{n.device.label===e&&(t=n.device.deviceId)})),t}async getDeviceById(e){const t=(await this.enumerateDevices(!0,!0,!0)).find((t=>t.deviceId===e));if(!t)throw new zv(Wv.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=rI.INITING;try{await this.updateDevicesInfo(),this.state=rI.INITEND}catch(e){throw VT.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=rI.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new zv(Wv.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),n=[];if(e[0]&&e[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const t=e.find((e=>"audioinput"===e.kind&&"default"===e.deviceId)),n=e.find((e=>"audiooutput"===e.kind&&"default"===e.deviceId));t&&n?n.groupId===t.groupId?VT.debug("[device-check] default input ".concat(t.label," and output ").concat(n.label," is the same group")):VT.warning("[device-check] default input ".concat(t.label," and output ").concat(n.label," is not the same group")):VT.debug("[device-check] default input or output not found")}const r=this.checkMediaDeviceInfoIsOk(e);if(e.forEach((e=>{if(!e.deviceId)return;const r=this.deviceInfoMap.get("".concat(e.kind,"_").concat(e.deviceId));if("ACTIVE"!==(r?r.state:"INACTIVE")){const r={initAt:t,updateAt:t,device:e,state:"ACTIVE"};this.deviceInfoMap.set("".concat(e.kind,"_").concat(e.deviceId),r),n.push(r)}r&&(r.updateAt=t)})),this.deviceInfoMap.forEach(((e,r)=>{"ACTIVE"===e.state&&e.updateAt!==t&&(e.state="INACTIVE",n.push(e))})),this.state!==rI.INITEND)return r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));n.forEach((e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(iI.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(iI.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(iI.PLAYOUT_DEVICE_CHANGED,e)}})),r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=e.filter((e=>"audioinput"===e.kind)),n=e.filter((e=>"videoinput"===e.kind)),r={audio:!1,video:!1};for(const i of t)if(i.label&&i.deviceId){r.audio=!0;break}for(const i of n)if(i.label&&i.deviceId){r.video=!0;break}return r}};let LI=!1;const MI=new class extends ly{constructor(){super(...arguments),sh(this,"onAutoplayFailed",void 0),sh(this,"onAudioAutoplayFailed",void 0)}};function jI(){if(Ev(),!LI){const e=t=>{t.preventDefault(),LI=!1,Hv()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};LI=!0,Hv()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),VT.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),MI.onAutoplayFailed?MI.onAutoplayFailed():MI.onAudioAutoplayFailed?VT.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):VT.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),MI.emit("autoplay-failed")}}function UI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UI(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BI(e,t,n,r){if(!e)return;const i=eS.getBaseInfoBySessionId(e);if(!i)return;const s=i.info,o=Date.now(),a=FI(FI({},s),{},{vid:void 0===s.vid?0:Number(s.vid),lts:o,elapse:o-i.startTime,cbRegistered:MI.onAutoplayFailed||MI.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:r,extend:void 0});eS.send({type:KT.AUTOPLAY_FAILED,data:a},!0)}const VI=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],GI=new class{constructor(){sh(this,"onAutoplayFailed",void 0),sh(this,"elementMap",new Map),sh(this,"elementStateMap",new Map),sh(this,"elementsNeedToResume",[]),sh(this,"sinkIdMap",new Map),sh(this,"autoResumeAfterInterruption",(e=>{Array.from(this.elementMap.entries()).forEach((t=>{let[n,r]=t;const i=this.elementStateMap.get(n),s=r.srcObject.getAudioTracks()[0],o=s&&s.readyState;if(VT.debug("resume after interrupted, ele: ".concat(i," audio: ").concat(o," ").concat(e)),"live"===o){if(e)return r.pause(),void r.play();if("running"===fI.curState)return Lv()?(r.pause(),void r.play()):void(i&&"paused"===i&&r.play())}}))})),sh(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{Array.from(this.elementMap.entries()).forEach((e=>{let[t,n]=e;const r=n.srcObject.getAudioTracks()[0];r&&"live"===r.readyState&&(VT.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),n.pause(),n.play())}))})),this.autoResumeAudioElement(),fI.on(wR.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),fI.on(wR.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),fI.on(wR.STATE_CHANGE,(()=>{Ov()&&"suspended"===fI.prevState&&"running"===fI.curState&&this.autoResumeAfterInterruption()}))}async setSinkID(e,t){const n=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),n)try{await n.setSinkId(t)}catch(e){throw new zv(Wv.PERMISSION_DENIED,"can not set sink id: "+e.toString())}}play(e,t,n,r){if(this.elementMap.has(t))return;const i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,sI.INIT),this.setVolume(t,n);const s=this.sinkIdMap.get(t);if(s)try{i.setSinkId(s).catch((e=>{VT.warning("[".concat(t,"] set sink id failed"),e.toString())}))}catch(e){VT.warning("[".concat(t,"] set sink id failed"),e.toString())}const o=i.play();o&&o.then&&o.catch((e=>{r&&BI(r,"audio",e.message,t),VT.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(VT.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),zy((()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),jI()})))}))}updateTrack(e,t){const n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&"playing"===this.elementStateMap.get(e)}setVolume(e,t){const n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)}stop(e){const t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;const n=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(n,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){VI.forEach((n=>{t.addEventListener(n,(n=>{const r=this.elementStateMap.get(e),i="pause"===n.type?"paused":n.type;if(VT.debug("[".concat(e,"] audio-element-status change ").concat(r," => ").concat(i)),"error"===n.type){const n=null==t?void 0:t.error;n&&VT.error("[".concat(e,"] media error, code: ").concat(n.code,", message: ").concat(n.message))}this.elementStateMap.set(e,i)}))}))}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach((e=>{e.play().then((e=>{VT.debug("Auto resume audio element success")})).catch((e=>{VT.warning("Auto resume audio element failed!",e)}))})),this.elementsNeedToResume=[]};new cv((e=>{document.body?e():window.addEventListener("load",(()=>e()))})).then((()=>{Hv()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))}))}};function HI(){return function(e,t,n){const r=n.value;return"function"==typeof r&&(n.value=function(){this._isClosed&&new zv(Wv.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",VT);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=r.apply(this,t);return i instanceof cv?new cv(((e,t)=>{i.then(e).catch(t)})):i}),n}}function WI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WI(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class qI extends ly{constructor(e){super(),sh(this,"name","VideoProcessorDestination"),sh(this,"ID","0"),sh(this,"_source",void 0),sh(this,"videoContext",void 0),sh(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new zv(Wv.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new zv(Wv.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(tI.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(tI.ON_TRACK,void 0)}}class KI extends ly{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),sh(this,"constraintsMap",new Map),sh(this,"statsRegistry",[]),sh(this,"usageRegistry",[]),sh(this,"trackId",void 0),sh(this,"direction",void 0),sh(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await wy(this,nI.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var n;return VT.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Cy(this,nI.REQUEST_UPDATE_CONSTRAINTS,Array.from(AS(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return VT.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),Cy(this,nI.REQUEST_UPDATE_CONSTRAINTS,Array.from(AS(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:r,cb:i}of this.statsRegistry)try{const s=i();e.push({processorID:t,processorName:n,type:r,stats:s})}catch(e){VT.error(new zv(Wv.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof cv&&(n=await n),e.push(zI(zI({},n),{},{direction:this.direction}))}catch(e){VT.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class YI extends ly{constructor(e){super(),sh(this,"name","AudioProcessorDestination"),sh(this,"ID","0"),sh(this,"inputTrack",void 0),sh(this,"inputNode",void 0),sh(this,"audioProcessorContext",void 0),sh(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new zv(Wv.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new zv(Wv.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(tI.ON_TRACK,void 0),this.emit(tI.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(tI.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(tI.ON_NODE,this.inputNode))}}class JI extends ly{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,n){super(),sh(this,"constraintsMap",new Map),sh(this,"statsRegistry",[]),sh(this,"audioContext",void 0),sh(this,"trackId",void 0),sh(this,"direction",void 0),sh(this,"usageRegistry",[]),sh(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=n}async getConstraints(){return wy(this,nI.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var n;return VT.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Cy(this,nI.REQUEST_UPDATE_CONSTRAINTS,Array.from(AS(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),Cy(this,nI.REQUEST_UPDATE_CONSTRAINTS,Array.from(AS(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:r,cb:i}of this.statsRegistry)try{const s=i();e.push({processorID:t,processorName:n,type:r,stats:s})}catch(e){VT.error(new zv(Wv.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof cv&&(n=await n),e.push(zI(zI({},n),{},{direction:this.direction}))}catch(e){VT.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class XI extends ly{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),sh(this,"context",void 0),sh(this,"processSourceNode",void 0),sh(this,"outputTrack",void 0),sh(this,"processedNode",void 0),sh(this,"clonedTrack",void 0),sh(this,"outputNode",void 0),this.outputNode=new ZI}setVolume(){}createOutputTrack(){throw new zv(Wv.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class ZI{disconnect(){}connect(){}}function QI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QI(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class eN extends dI{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?GI.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,n,r){super(e,n),sh(this,"trackMediaType","audio"),sh(this,"_encoderConfig",void 0),sh(this,"_trackSource",void 0),sh(this,"_enabled",!0),sh(this,"_volume",100),sh(this,"_useAudioElement",!0),sh(this,"_bypassWebAudio",!1),sh(this,"processor",void 0),sh(this,"_processorContext",void 0),sh(this,"_processorDestination",void 0),sh(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!r,this._trackSource=new XI,bT("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),bT("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),Iv()&&!pI?setTimeout((()=>this.initWebAudio())):this.initWebAudio()}setVolume(e){Yv(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&GI.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void VT.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,Cy(this,BR.NEED_REPLACE_TRACK,this).then((()=>{VT.debug("[".concat(this.getTrackId(),"] replace web audio track success"))})).catch((e=>{VT.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)})))}catch(e){}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!Rv()&&bT("RESTRICTION_SET_PLAYBACK_DEVICE"))throw new zv(Wv.NOT_SUPPORTED,"your browser does not support setting the audio output device");await GI.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,n){return this._setEnabled(e,t,n)}async _setEnabled(e,t,n){if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(VT.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{n||(this._enabled=!0),await Cy(this,BR.NEED_ENABLE_TRACK,this),VT.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(e){throw n||(this._enabled=!1),VT.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}}else{this._originMediaStreamTrack.enabled=!1,n||(this._enabled=!1);try{await Cy(this,BR.NEED_DISABLE_TRACK,this)}catch(e){throw n||(this._enabled=!0),VT.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,VT.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await Cy(this,BR.NEED_MUTE_TRACK,this):await Cy(this,BR.NEED_UNMUTE_TRACK,this))}getStats(){return Jy((()=>{VT.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),Ry(this,BR.GET_STATS)||$I({},XR)}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(YR.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(YR.ON_AUDIO_BUFFER),this._source.on(YR.ON_AUDIO_BUFFER,(t=>e(t)))}play(){VT.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(VT.debug("[".concat(this.getTrackId(),"] start audio playback in element")),GI.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){VT.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?GI.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];VT.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&GI.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Cy(this,BR.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return cv.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new zv(Wv.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new zv(Wv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(tI.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e),await Cy(this,BR.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Cy(this,BR.NEED_REPLACE_TRACK,this))})),e.on(tI.ON_NODE,(e=>{this._source.processedNode=e}))}unbindProcessorDestinationEvents(e){e.removeAllListeners(tI.ON_TRACK),e.removeAllListeners(tI.ON_NODE)}bindProcessorContextEvents(e){e.on(nI.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}unbindProcessorContextEvents(e){e.removeAllListeners(nI.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof XI&&(this._trackSource=new TI(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const e=new JI(this._source.context,this.getTrackId(),"local"),t=new YI(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(YR.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})})),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(GI.stop(this.getTrackId()),this._source.play()),Cy(this,BR.NEED_REPLACE_MIXING_TRACK,this).then((()=>{VT.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))})).catch((e=>{VT.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),e)}))),{processorContext:e,processorDestination:t}}}kS([$T({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),xS("design:type",Function),xS("design:paramtypes",[Number]),xS("design:returntype",void 0)],eN.prototype,"setVolume",null),kS([$T({argsMap:(e,t)=>[e.getTrackId(),t]}),HI(),xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],eN.prototype,"setPlaybackDevice",null),kS([fE("LocalAudioTrack","_enabledMutex"),$T({argsMap:(e,t)=>[e.getTrackId(),t]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Boolean,Object,Boolean]),xS("design:returntype",cv)],eN.prototype,"setEnabled",null),kS([fE("LocalAudioTrack","_enabledMutex"),$T({argsMap:(e,t)=>[e.getTrackId(),t]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Boolean]),xS("design:returntype",cv)],eN.prototype,"setMuted",null),kS([HI(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",Object)],eN.prototype,"getStats",null),kS([HI(),xS("design:type",Function),xS("design:paramtypes",[Object,Number]),xS("design:returntype",void 0)],eN.prototype,"setAudioFrameCallback",null),kS([$T({argsMap:e=>[e.getTrackId()]}),HI(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],eN.prototype,"play",null),kS([$T({argsMap:e=>[e.getTrackId()]}),HI(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],eN.prototype,"stop",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],eN.prototype,"close",null),kS([$T({argsMap:(e,t)=>[e.getTrackId(),t.name]}),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",Object)],eN.prototype,"pipe",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],eN.prototype,"unpipe",null);class tN extends eN{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,n,r){super(e,t.encoderConfig?jR(t.encoderConfig):{},r,bT("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),sh(this,"_config",void 0),sh(this,"_deviceName","default"),sh(this,"_constraints",void 0),sh(this,"_originalConstraints",void 0),sh(this,"_enabled",!0),this._config=t,this._constraints=n,this._originalConstraints=n,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),(Lv()||Mv())&&fI.bindInterruptDetectorTrack(this)}async setDevice(e){if(VT.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{const t=await DI.getDeviceById(e),n={};n.audio=$I({},this._constraints),n.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let r=null;try{r=await AI(n,this.getTrackId())}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await AI({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await DI.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}VT.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,n){if(t)return VT.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(VT.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){var r;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(r=this._source.clonedTrack)||void 0===r||r.stop(),n||(this._enabled=!1);try{await Cy(this,BR.NEED_DISABLE_TRACK,this)}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),e}return}const i=$I({},this._constraints),s=DI.searchDeviceIdByName(this._deviceName);s&&!i.deviceId&&(i.deviceId=s);try{n||(this._enabled=!0);const e=await AI({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await Cy(this,BR.NEED_ENABLE_TRACK,this)}catch(e){throw n||(this._enabled=!1),VT.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}VT.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(Lv()||Mv())&&fI.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ov()||Uv())&&this._enabled&&!this._isClosed&&fI.duringInterruption){const e=async()=>{fI.off(wR.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(VT.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};fI.on(wR.IOS_INTERRUPTION_END,e)}else VT.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(qR.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=DI.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId=n),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();const e=await AI({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(nI.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}}))}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(nI.REQUEST_UPDATE_CONSTRAINTS)}}kS([$T({argsMap:(e,t)=>[e.getTrackId(),t]}),HI(),xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],tN.prototype,"setDevice",null),kS([fE("MicrophoneAudioTrack","_enabledMutex"),$T({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Boolean,Boolean,Boolean]),xS("design:returntype",cv)],tN.prototype,"setEnabled",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],tN.prototype,"close",null);class nN extends eN{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,n,r){super(t.createOutputTrack(),n,r),sh(this,"source",void 0),sh(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(YR.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.safeEmit(qR.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){Yv(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}kS([$T({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",void 0)],nN.prototype,"startProcessAudioBuffer",null),kS([$T({argsMap:e=>[e.getTrackId()]}),HI(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],nN.prototype,"pauseProcessAudioBuffer",null),kS([$T({argsMap:e=>[e.getTrackId()]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Number]),xS("design:returntype",void 0)],nN.prototype,"seekAudioBuffer",null),kS([$T({argsMap:e=>[e.getTrackId()]}),HI(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],nN.prototype,"resumeProcessAudioBuffer",null),kS([$T({argsMap:e=>[e.getTrackId()]}),HI(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],nN.prototype,"stopProcessAudioBuffer",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],nN.prototype,"close",null),kS([$T({argsMap:e=>[e.getTrackId()]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Number]),xS("design:returntype",void 0)],nN.prototype,"setAudioBufferPlaybackSpeed",null);class rN extends eN{get __className__(){return"MixingAudioTrack"}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}constructor(){const e=gI().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,rE(8,"track-mix-")),sh(this,"trackList",void 0),sh(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}hasAudioTrack(e){return-1!==this.trackList.indexOf(e)}addAudioTrack(e){-1===this.trackList.indexOf(e)?(VT.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):VT.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){if(-1!==this.trackList.indexOf(e)){VT.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}Hy(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){const e={};this.trackList.forEach((t=>{t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}_updateRtpTransceiver(e){this._rtpTransceiver!==e&&(this._rtpTransceiver=e,this.trackList.forEach((t=>{t instanceof rN?t.emit(zR.TRANSCEIVER_UPDATED,e):t._updateRtpTransceiver(e)})))}}function iN(e){const t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});const n=PR(e.encoderConfig);return null!=n.width&&(t.width=n.width),null!=n.height&&(t.height=n.height),!Bv()&&n.frameRate&&(t.frameRate=n.frameRate),Ev().name===mv.EDGE&&"object"==typeof t.frameRate&&(t.frameRate.max=60),Nv()&&(t.frameRate={ideal:30,max:30}),t}function sN(e){const t={};if(Bv()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,Rv()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){const n=jR(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),Gv()&&(t.sampleRate=void 0),t}class oN extends bI{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(YR.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),sh(this,"audioBuffer",void 0),sh(this,"sourceNode",void 0),sh(this,"startPlayTime",0),sh(this,"startPlayOffset",0),sh(this,"pausePlayTime",0),sh(this,"options",void 0),sh(this,"currentLoopCount",0),sh(this,"currentPlaybackSpeed",100),sh(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):VT.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&("playing"===this.currentState&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const aN=new Map;async function cN(e,t){let n=null;if("string"==typeof e){const t=aN.get(e);if(t)return VT.debug("use cached audio resource: ",e),t;try{n=(await _E((()=>sT.get(e,{responseType:"arraybuffer"})),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new zv(Wv.FETCH_AUDIO_FILE_FAILED,e.toString())}}else{const t=new cv(((t,n)=>{const r=new FileReader;r.onload=e=>{e.target?t(e.target.result):n(new zv(Wv.READ_LOCAL_AUDIO_FILE_ERROR))},r.onerror=()=>{n(new zv(Wv.READ_LOCAL_AUDIO_FILE_ERROR))},r.readAsArrayBuffer(e)}));n=await t}const r=await function(e){const t=gI();return new cv(((n,r)=>{t.decodeAudioData(e,(e=>{n(e)}),(e=>{r(new zv(Wv.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(n);return"string"==typeof e&&t&&aN.set(e,r),r}const lN=e=>{const t=document.createElement("canvas");return t.width=2,t.height=2,new cv(((n,r)=>{t.toBlob((async e=>{if(t.remove(),e){const r=await dN(e);n({buffer:r,width:t.width,height:t.height})}else r(new zv(Wv.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,1)}))},dN=async e=>{const t=await e.arrayBuffer();return new Uint8Array(t)};function uN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uN(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class pN{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(VT.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(VT.debug("[".concat(this.trackId,"] video-status change ").concat(this._videoState," => ").concat(e)),this._videoState=e,null===(t=this.onVideoStateChanged)||void 0===t||t.call(this,this.videoState))}constructor(e){sh(this,"trackId",void 0),sh(this,"config",void 0),sh(this,"onFirstVideoFrameDecoded",void 0),sh(this,"onVideoStateChanged",void 0),sh(this,"freezeTimeCounterList",[]),sh(this,"renderFreezeAccTime",0),sh(this,"isKeepLastFrame",!1),sh(this,"timeUpdatedCount",0),sh(this,"freezeTime",0),sh(this,"playbackTime",0),sh(this,"lastTimeUpdatedTime",0),sh(this,"autoplayFailed",!1),sh(this,"videoTrack",void 0),sh(this,"videoElement",void 0),sh(this,"cacheVideoElement",void 0),sh(this,"_videoState",oI.VideoStateStopped),sh(this,"videoElementCheckInterval",void 0),sh(this,"videoElementFreezeTimeout",void 0),sh(this,"_videoElementStatus",sI.NONE),sh(this,"isGettingVideoDimensions",!1),sh(this,"startGetVideoDimensions",(()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return VT.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(e,500)};!this.isGettingVideoDimensions&&e()})),sh(this,"autoResumeAfterInterruption",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===fI.curState&&(VT.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(Tv())),jv()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),sh(this,"handleVideoEvents",(e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=sI.PLAYING;break;case"loadeddata":if(this.videoState=oI.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch(e){}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=sI.CANPLAY;break;case"stalled":this.videoElementStatus=sI.STALLED;break;case"suspend":this.videoElementStatus=sI.SUSPEND;break;case"pause":this.videoElementStatus=sI.PAUSED,Ov()||Uv()||Iv()&&this.autoplayFailed||!this.videoTrack||"live"!==this.videoTrack.readyState||(VT.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=sI.WAITING;break;case"abort":this.videoElementStatus=sI.ABORT;break;case"ended":this.videoElementStatus=sI.ENDED;break;case"emptied":this.videoElementStatus=sI.EMPTIED;break;case"error":{this.videoElementStatus=sI.ERROR;const e=this.videoElement.error;e&&VT.error("[".concat(this.trackId,"] media error, code: ").concat(e.code,", message: ").concat(e.message));break}case"timeupdate":{const e=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime,n=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=e,kN.lastVisibleTime<kN.lastHiddenTime||n<kN.lastHiddenTime||n<kN.lastVisibleTime)return;for(t>bT("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;){this.playbackTime-=6e3;const e=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(e),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}})),sh(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&(VT.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(Tv())),jv()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),fI.on(wR.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),fI.on(wR.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return null!==(e=this.videoElement.parentElement)&&void 0!==e?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){const t=this.videoElement.play();t&&t.catch&&t.catch((t=>{e&&BI(e,"video",t.message,this.trackId),"NotAllowedError"===t.name?(VT.warning("detected video element autoplay failed",t),this.autoplayFailed=!0,this.handleAutoPlayFailed()):VT.warning("[".concat(this.trackId,"] play warning: "),t)}));const n=Ev();if(("Safari"===n.name&&15===Number(n.version)||Lv())&&t&&t.then){const e=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(e).catch(e)}}getCurrentFrame(){const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext("2d");if(!t)return VT.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const n=t.getImageData(0,0,e.width,e.height);return e.remove(),n}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const r=n.getContext("2d");return r?(r.drawImage(this.videoElement,0,0,n.width,n.height),new cv(((r,i)=>{n.toBlob((async e=>{if(n.remove(),e){const t=await dN(e);r({buffer:t,width:n.width,height:n.height})}else i(new zv(Wv.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,t<0?.1:t>1?1:t)}))):await lN(e)}destroy(){fI.off(wR.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),fI.off(wR.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=oI.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=sI.INIT,!this.videoElementCheckInterval&&(fN.forEach((e=>{this.videoElement.addEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((()=>{(function(e){return e!==document.body&&document.body.contains(e)})(this.videoElement)||(this.videoElementStatus=sI.DESTROYED)}),1e3),bT("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let n;const r=()=>{"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",r),this.videoElementFreezeTimeout=window.setTimeout(i,bT("VIDEO_FREEZE_DURATION")))},i=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===oI.VideoStateDecoding&&("visible"===document.visibilityState?this.videoState=oI.VideoStateFrozen:document.addEventListener("visibilitychange",r))},s=(e,t)=>{if(this.videoElementStatus===sI.PLAYING){if(n){const e=t.presentationTime-n.presentationTime;this.videoState===oI.VideoStateStarting&&(this.videoState=oI.VideoStateDecoding),this.videoState===oI.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(i,bT("VIDEO_FREEZE_DURATION"))),e<bT("VIDEO_FREEZE_DURATION")&&this.videoState===oI.VideoStateFrozen&&(this.videoState=oI.VideoStateDecoding),e>bT("VIDEO_FREEZE_DURATION")&&kN.lastVisibleTime>=kN.lastHiddenTime&&n.timestamp>kN.lastVisibleTime&&n.timestamp>kN.lastHiddenTime&&(this.renderFreezeAccTime+=e)}n=hN(hN({},t),{},{timestamp:e})}var r,o;bT("ENABLE_VIDEO_FRAME_CALLBACK")&&(null===(r=(o=this.videoElement).requestVideoFrameCallback)||void 0===r||r.call(o,s))};null===(e=(t=this.videoElement).requestVideoFrameCallback)||void 0===e||e.call(t,s)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),Gv()&&(this.videoElement.poster="noposter");const n=Ev();"Safari"===n.name&&15===Number(n.version)||Lv()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Nv()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Nv()&&this.videoElement.load());const r=this.videoElement.play();void 0!==r&&r.catch((e=>{VT.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())}))}resetVideoElement(){fN.forEach((e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=sI.NONE}handleAutoPlayFailed(){const e=t=>{t.preventDefault(),this.videoElement.play().then((()=>{VT.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))})).catch((e=>{VT.error(e)})),this.autoplayFailed=!1,Hv()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};Hv()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),jI()}}const fN=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class mN extends pN{constructor(e){super(e),sh(this,"container",void 0),sh(this,"slot",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,n):await lN(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",bT("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var e;if(null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=document.createElement("video")}}resetVideoElement(){var e;null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}function gN(e){return new cv(((t,n)=>{let r=!1;const i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);const s=Ov()?"canplay":"playing";i.addEventListener(s,(()=>{const e=i.videoWidth,n=i.videoHeight;!e&&Nv()||(r=!0,i.srcObject=null,i.remove(),t([e,n]))})),i.srcObject=new MediaStream([e]),i.play().catch(sE),setTimeout((()=>{r||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))}),4e3)}))}const _N=async(e,t,n)=>{const r=function(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.slice(n,n+2),16));return Uint8Array.from(t)}(function(e){const t="0123456789abcdef";function n(e){let n,r="";for(n=0;n<=3;n++)r+=t.charAt(e>>8*n+4&15)+t.charAt(e>>8*n&15);return r}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,s,o){return r(function(e,t){return e<<t|e>>>32-t}(r(r(t,e),r(i,o)),s),n)}function s(e,t,n,r,s,o,a){return i(t&n|~t&r,e,t,s,o,a)}function o(e,t,n,r,s,o,a){return i(t&r|n&~r,e,t,s,o,a)}function a(e,t,n,r,s,o,a){return i(t^n^r,e,t,s,o,a)}function c(e,t,n,r,s,o,a){return i(n^(t|~r),e,t,s,o,a)}const l=function(e){let t;const n=1+(e.length+8>>6),r=new Array(16*n);for(t=0;t<16*n;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<t%4*8;return r[t>>2]|=128<<t%4*8,r[16*n-2]=8*e.length,r}(e);let d,u,h,p,f,m=1732584193,g=-271733879,_=-1732584194,v=271733878;for(d=0;d<l.length;d+=16)u=m,h=g,p=_,f=v,m=s(m,g,_,v,l[d+0],7,-680876936),v=s(v,m,g,_,l[d+1],12,-389564586),_=s(_,v,m,g,l[d+2],17,606105819),g=s(g,_,v,m,l[d+3],22,-1044525330),m=s(m,g,_,v,l[d+4],7,-176418897),v=s(v,m,g,_,l[d+5],12,1200080426),_=s(_,v,m,g,l[d+6],17,-1473231341),g=s(g,_,v,m,l[d+7],22,-45705983),m=s(m,g,_,v,l[d+8],7,1770035416),v=s(v,m,g,_,l[d+9],12,-1958414417),_=s(_,v,m,g,l[d+10],17,-42063),g=s(g,_,v,m,l[d+11],22,-1990404162),m=s(m,g,_,v,l[d+12],7,1804603682),v=s(v,m,g,_,l[d+13],12,-40341101),_=s(_,v,m,g,l[d+14],17,-1502002290),g=s(g,_,v,m,l[d+15],22,1236535329),m=o(m,g,_,v,l[d+1],5,-165796510),v=o(v,m,g,_,l[d+6],9,-1069501632),_=o(_,v,m,g,l[d+11],14,643717713),g=o(g,_,v,m,l[d+0],20,-373897302),m=o(m,g,_,v,l[d+5],5,-701558691),v=o(v,m,g,_,l[d+10],9,38016083),_=o(_,v,m,g,l[d+15],14,-660478335),g=o(g,_,v,m,l[d+4],20,-405537848),m=o(m,g,_,v,l[d+9],5,568446438),v=o(v,m,g,_,l[d+14],9,-1019803690),_=o(_,v,m,g,l[d+3],14,-187363961),g=o(g,_,v,m,l[d+8],20,1163531501),m=o(m,g,_,v,l[d+13],5,-1444681467),v=o(v,m,g,_,l[d+2],9,-51403784),_=o(_,v,m,g,l[d+7],14,1735328473),g=o(g,_,v,m,l[d+12],20,-1926607734),m=a(m,g,_,v,l[d+5],4,-378558),v=a(v,m,g,_,l[d+8],11,-2022574463),_=a(_,v,m,g,l[d+11],16,1839030562),g=a(g,_,v,m,l[d+14],23,-35309556),m=a(m,g,_,v,l[d+1],4,-1530992060),v=a(v,m,g,_,l[d+4],11,1272893353),_=a(_,v,m,g,l[d+7],16,-155497632),g=a(g,_,v,m,l[d+10],23,-1094730640),m=a(m,g,_,v,l[d+13],4,681279174),v=a(v,m,g,_,l[d+0],11,-358537222),_=a(_,v,m,g,l[d+3],16,-722521979),g=a(g,_,v,m,l[d+6],23,76029189),m=a(m,g,_,v,l[d+9],4,-640364487),v=a(v,m,g,_,l[d+12],11,-421815835),_=a(_,v,m,g,l[d+15],16,530742520),g=a(g,_,v,m,l[d+2],23,-995338651),m=c(m,g,_,v,l[d+0],6,-198630844),v=c(v,m,g,_,l[d+7],10,1126891415),_=c(_,v,m,g,l[d+14],15,-1416354905),g=c(g,_,v,m,l[d+5],21,-57434055),m=c(m,g,_,v,l[d+12],6,1700485571),v=c(v,m,g,_,l[d+3],10,-1894986606),_=c(_,v,m,g,l[d+10],15,-1051523),g=c(g,_,v,m,l[d+1],21,-2054922799),m=c(m,g,_,v,l[d+8],6,1873313359),v=c(v,m,g,_,l[d+15],10,-30611744),_=c(_,v,m,g,l[d+6],15,-1560198380),g=c(g,_,v,m,l[d+13],21,1309151649),m=c(m,g,_,v,l[d+4],6,-145523070),v=c(v,m,g,_,l[d+11],10,-1120210379),_=c(_,v,m,g,l[d+2],15,718787259),g=c(g,_,v,m,l[d+9],21,-343485551),m=r(m,u),g=r(g,h),_=r(_,p),v=r(v,f);return n(m)+n(g)+n(_)+n(v)}(""+t+n)).slice(0,16),i=r.slice(0,12),s=await window.crypto.subtle.importKey("raw",r,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},s,e))},vN=async(e,t,n)=>await _N(e.buffer,t,n);function yN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yN(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class bN extends dI{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==sI.PLAYING)}get processorContext(){return this._processorContext}set processorContext(e){this._processorContext=e}get __className__(){return"LocalVideoTrack"}constructor(e,t,n,r,i,s){if(super(e,i),sh(this,"trackMediaType","video"),sh(this,"_player",void 0),sh(this,"isUseScaleResolutionDownBy",!1),sh(this,"_videoVisibleTimer",null),sh(this,"_statsTimer",null),sh(this,"_previousVideoVisibleStatus",void 0),sh(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),sh(this,"_encoderConfig",void 0),sh(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),sh(this,"_optimizationMode",void 0),sh(this,"_videoHeight",void 0),sh(this,"_videoWidth",void 0),sh(this,"_forceBitrateLimit",void 0),sh(this,"_enabled",!0),sh(this,"processorDestination",void 0),sh(this,"_processorContext",void 0),Iv()){const{width:t,height:n}=e.getSettings();this._videoWidth=t,this._videoHeight=n}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=t,this._scalabilityMode=n,this._optimizationMode=r,this._hints=s||[],-1===this._hints.indexOf(VR.SCREEN_TRACK))this.updateBitrateFromProfile();else if(function(e,t,n){const r=Ev();return!(r.name!==e||!r.osVersion)&&(n?Number(r.version)>=t&&Number(r.version)<=n:Number(r.version)===t)}(mv.CHROME,115)&&-1!==bv().indexOf("Windows")){const t=function(e,t){if("VideoFrame"in window&&"TransformStream"in window&&SR().supportWebRTCInsertableStream){const n=new MediaStreamTrackProcessor(e),r=new MediaStreamTrackGenerator({kind:"video"});let i,s,o=Date.now();const a=()=>{c&&(clearInterval(c),c=void 0),i&&(i.close(),i=void 0),e.stop(),s=void 0,r.removeEventListener("ended",a)};let c=window.setInterval((()=>{if(s&&i&&Date.now()-o>(null!=t?t:1e3))try{"live"===r.readyState?s.enqueue(i.clone()):a()}catch(e){a()}}),null!=t?t:1e3);const l=new TransformStream({transform:(e,t)=>{"live"===r.readyState?(s=t,o=Date.now(),void 0===i?(i=e,t.enqueue(e.clone())):(t.enqueue(i),i=e)):e.close()}});return r.addEventListener("ended",a),n.readable.pipeThrough(l).pipeTo(r.writable),r}}(e);t&&(VT.info("local screen video track begin to inject frame"),this._mediaStreamTrack=t)}t&&-1!==this._hints.indexOf(VR.CUSTOM_TRACK)&&this.setEncoderConfiguration(t),this._processorContext=new KI(this.getTrackId(),"local"),this.processorDestination=new qI(this.processorContext),this.bindProcessorDestinationEvents()}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(VT.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}VT.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=EN(EN(EN({},this._getDefaultPlayerConfig()),t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new pN(n):this._player=new mN(n),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(qR.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),bT("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._statsTimer&&(this.isUseScaleResolutionDownBy=!1,window.clearInterval(this._statsTimer),this._statsTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,VT.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(VT.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await Cy(this,BR.NEED_DISABLE_TRACK,this)}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}return t||(this._enabled=!1),void VT.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Cy(this,BR.NEED_ENABLE_TRACK,this)}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}VT.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,VT.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await Cy(this,BR.NEED_MUTE_TRACK,this):await Cy(this,BR.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(e,t){if(!this._enabled)throw new zv(Wv.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if("720p_auto"===e?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),e=PR(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),e.width||e.height||e.frameRate){const t=iN({encoderConfig:e});(Iv()||Ov()||Uv())&&(t.deviceId=void 0),VT.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(t));try{await this._originMediaStreamTrack.applyConstraints(t),this.updateMediaStreamTrackResolution()}catch(e){const t=new zv(Wv.UNEXPECTED_ERROR,e.toString());throw VT.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}}this._encoderConfig=e,-1===this._hints.indexOf(VR.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Cy(this,BR.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(VT)}}getStats(){return Jy((()=>{VT.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),Ry(this,BR.GET_STATS)||EN({},ZR)}async setBeautyEffect(e){VT.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(e,t):await lN(e)}async setBitrateLimit(e){if(VT.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await Cy(this,BR.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(VT)}}}async setOptimizationMode(e){if("motion"!==e&&"detail"!==e&&"balanced"!==e)return void VT.error(Wv.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const t=this._optimizationMode;try{this._optimizationMode=e,await Cy(this,BR.SET_OPTIMIZATION_MODE,this)}catch(e){throw this._optimizationMode=t,VT.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}VT.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(e,")"))}setScalabiltyMode(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return VT.error(Wv.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=e,VT.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")"))}updateMediaStreamTrackResolution(){gN(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(sE)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(e){if(!this._enabled)throw new zv(Wv.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");VT.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(e)),e=PR(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),this._encoderConfig=e,-1===this._hints.indexOf(VR.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Cy(this,BR.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(VT)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:e,height:t,frameRate:n}=this.getMediaStreamTrackSettings();if(!e||!t||!n)return;const{bitrateMax:r,bitrateMin:i}=this._encoderConfig;if(null==i||null==r){const{max:s,min:o}=function(e,t,n,r,i){const s=bT("BITRATE_ADAPTER_TYPE");if("DEFAULT_BITRATE"===s)return{min:r,max:i};if(void 0===i){var o;const a=Math.floor(200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75));i="STANDARD_BITRATE"===s?4*a:2*a,r=null!==(o=r)&&void 0!==o?o:a}else{var a;r=null!==(a=r)&&void 0!==a?a:Math.floor(i/10)}return{min:r,max:i}}(e,t,n,i,r);this._encoderConfig.bitrateMin=o,this._encoderConfig.bitrateMax=s,VT.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(e,", h: ").concat(t,", fps: ").concat(n,"] => [brMax: ").concat(s,", brMin: ").concat(o,"]"))}}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:s}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&s instanceof HTMLElement){const e=iy.checkOneElementVisible(i),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=eS.reportApiInvoke(null,{tag:py.TRACER,name:hy.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new zv(Wv.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}async renewMediaStreamTrack(e){}pipe(e){if(this.processor===e)return e;if(e._source)throw new zv(Wv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._encoderConfig;e&&(n=EN(EN({},n),PR(e))),n=Ky(n);const r=rE(8,"track-video-cloned-"),i=new bN(t?this._mediaStreamTrack.clone():this._mediaStreamTrack,n,Ky(this._scalabilityMode),this._optimizationMode,r,Ky(this._hints));return e&&n&&i.setEncoderConfiguration(n),VT.debug("clone video track from ".concat(this.getTrackId()," to ").concat(r,", clone ").concat(t)),i}async replaceTrack(e,t){if(!(e instanceof MediaStreamTrack))throw new zv(Wv.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if("video"!==e.kind)throw new zv(Wv.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(e,t,!0),this.updateMediaStreamTrackResolution()}startMonitorStats(){if(!Iv()&&!Ov())return;this._statsTimer&&window.clearInterval(this._statsTimer);let e=2,t=AR[e],n=-1,r=Date.now();const i=e=>{e>2||e<0||(r=Date.now(),t=AR[e],this.setSenderConfiguration(t))};this.isUseScaleResolutionDownBy=!0,this._statsTimer=window.setInterval((()=>{const s=this.getStats(),o=Ry(this,BR.GET_RTC_STATS);if(s.sendPackets>0&&o){-1===n&&(n=Date.now());const a=Date.now();if(a-n<1e3||a-r<bT("PROFILE_SWITCH_INTERVAL"))return;const c=s.sendFrameRate,l=.6*t.frameRate,d=.9*t.frameRate;"number"==typeof c&&c>0&&c<l?e>0&&(e--,i(e),VT.debug("[".concat(this.getTrackId(),"] step down for fps ").concat(c,", switchProfile to ").concat(e))):o.OutgoingAvailableBandwidth<t.bitrateMin?e>0&&(e--,i(e),VT.debug("[".concat(this.getTrackId(),"] step down for OutgoingAvailableBandwidth ").concat(o.OutgoingAvailableBandwidth,", bitrateMin ").concat(t.bitrateMin,", switchProfile to ").concat(e))):"number"==typeof c&&c>d&&e<AR.length-1&&o.OutgoingAvailableBandwidth>1.2*AR[e+1].bitrateMin&&(e++,i(e),VT.debug("[".concat(this.getTrackId(),"] step up for fps ").concat(c,", OutgoingAvailableBandwidth ").concat(o.OutgoingAvailableBandwidth,", switchProfile to ").concat(e)))}}),bT("CHECK_LOCAL_STATS_INTERVAL"))}sendSeiData(e){if(Jy((()=>{eS.reportApiInvoke(null,{name:hy.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:py.TRACER}).onSuccess("")}),this._mediaStreamTrack.id||this.getTrackId()),!bT("ENABLE_VIDEO_SEI")||!bT("ENABLE_ENCODED_TRANSFORM"))return void VT.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(e instanceof Uint8Array==0)return new zv(Wv.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const t=this.getRTCRtpTransceiver();if(!t)return void VT.warning("Video track is not published, SEI can not be send");const n=t.sender.getParameters();if(0===n.codecs.length)return;const r=n.codecs[0].mimeType.toLocaleLowerCase();"video/h264"===r?this.safeEmit("sei-to-send",e):VT.warning("SEI is not supported by ".concat(r))}bindProcessorDestinationEvents(){this.processorDestination.on(tI.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(),await Cy(this,BR.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Cy(this,BR.NEED_REPLACE_TRACK,this))}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(tI.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(nI.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(nI.REQUEST_CONSTRAINTS)}}kS([$T({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Object,Object]),xS("design:returntype",void 0)],bN.prototype,"play",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],bN.prototype,"stop",null),kS([fE("LocalVideoTrack","_enabledMutex"),$T({argsMap:(e,t)=>[e.getTrackId(),t]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Boolean,Boolean]),xS("design:returntype",cv)],bN.prototype,"setEnabled",null),kS([fE("LocalVideoTrack","_enabledMutex"),$T({argsMap:(e,t)=>[e.getTrackId(),t]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Boolean]),xS("design:returntype",cv)],bN.prototype,"setMuted",null),kS([$T({argsMap:(e,t)=>[e.getTrackId(),t]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Object,Boolean]),xS("design:returntype",cv)],bN.prototype,"setEncoderConfiguration",null),kS([HI(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",Object)],bN.prototype,"getStats",null),kS([$T({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Boolean,Object]),xS("design:returntype",cv)],bN.prototype,"setBeautyEffect",null),kS([HI(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",ImageData)],bN.prototype,"getCurrentFrameData",null),kS([HI(),xS("design:type",Function),xS("design:paramtypes",[String,Number]),xS("design:returntype",cv)],bN.prototype,"getCurrentFrameImage",null),kS([HI(),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],bN.prototype,"setBitrateLimit",null),kS([HI(),xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],bN.prototype,"setOptimizationMode",null),kS([HI(),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",void 0)],bN.prototype,"setScalabiltyMode",null),kS([HI(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],bN.prototype,"updateMediaStreamTrackResolution",null),kS([$T({argsMap:(e,t)=>[e.getTrackId(),t.name]}),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",Object)],bN.prototype,"pipe",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],bN.prototype,"unpipe",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],bN.prototype,"close",null),kS([$T({argsMap:(e,t,n)=>[e.getTrackId(),t.label,n]}),xS("design:type",Function),xS("design:paramtypes",[MediaStreamTrack,Boolean]),xS("design:returntype",cv)],bN.prototype,"replaceTrack",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],bN.prototype,"startMonitorStats",null);class TN extends bN{get __className__(){return"CameraVideoTrack"}constructor(e,t,n,r,i,s){super(e,PR(t.encoderConfig),r,i,s),sh(this,"_config",void 0),sh(this,"_originalConstraints",void 0),sh(this,"_constraints",void 0),sh(this,"_enabled",!0),sh(this,"_deviceName","default"),sh(this,"tryResumeVideoForIOS15_16WeChat",(async()=>{(Lv()||Mv())&&!function(){const e=Ev();if(e.os!==fv.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=2}()&&Fv()&&this._enabled&&!this._isClosed&&(VT.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())})),this._config=t,this._originalConstraints=n,this._constraints=n,this._deviceName=e.label,this._encoderConfig=PR(this._config.encoderConfig),fI.on(wR.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),fI.on(wR.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(e){return"string"==typeof e?this._setDeviceById(e):e.deviceId?this._setDeviceById(e.deviceId):e.facingMode?this._setDeviceByFacingModel(e.facingMode):void 0}async _setDeviceById(e){if(VT.info("[".concat(this.getTrackId(),"] set device to ").concat(e)),this._enabled)try{const t=await DI.getDeviceById(e),n={};n.video=EN({},this._constraints),n.video.deviceId={exact:e},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let r=null;try{r=await AI(n,this.getTrackId())}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await AI({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await DI.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}VT.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(e){VT.info("[".concat(this.getTrackId(),"] set facingMode ").concat(e));const t={video:EN(EN({},this._constraints),{},{deviceId:void 0,facingMode:{exact:e}})};if(this._enabled){this._originMediaStreamTrack.stop();let e=null;try{e=await AI(t,this.getTrackId())}catch(t){throw VT.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),t.toString()),e=await AI({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),t}await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=e,this._config.cameraId=void 0,this._constraints=EN({},t.video),VT.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(VT.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const e=await AI({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1)}await Cy(this,BR.NEED_ENABLE_TRACK,this)}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),e}this.updateMediaStreamTrackResolution(),VT.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),t||(this._enabled=!1);try{await Cy(this,BR.NEED_DISABLE_TRACK,this)}catch(e){throw VT.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}VT.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(e,t){if(!this._enabled)throw new zv(Wv.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");"720p_auto"===e?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),e=PR(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin);const n=qy(this._config);n.encoderConfig=e;const r=iN(n);(Iv()||Ov()||Uv())&&(r.deviceId=void 0),VT.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(r));try{await this._originMediaStreamTrack.applyConstraints(r),this.updateMediaStreamTrackResolution()}catch(e){const t=new zv(Wv.UNEXPECTED_ERROR,e.toString());throw VT.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}this._config=n,this._constraints=r,this._originalConstraints=r,this._encoderConfig=e,-1===this._hints.indexOf(VR.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Cy(this,BR.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(VT)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ov()||Uv())&&this._enabled&&!this._isClosed&&fI.duringInterruption){const e=async()=>{fI.off(wR.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(VT.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};fI.on(wR.IOS_INTERRUPTION_END,e)}else VT.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(qR.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=DI.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId={exact:n}),this._enabled){const e=await AI({video:t},this.getTrackId());this._constraints=t,await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),fI.off(wR.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),fI.off(wR.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._encoderConfig;e&&(n=EN(EN({},n),PR(e))),n=Ky(n);const r=rE(8,"track-cam-cloned-"),i=new TN(t?this._mediaStreamTrack.clone():this._mediaStreamTrack,Ky(EN(EN({},this._config),{},{encoderConfig:n})),Ky(this._constraints),Ky(this._scalabilityMode),this._optimizationMode,r);return e&&n&&i.setEncoderConfiguration(n),VT.debug("clone track from ".concat(this.getTrackId()," to ").concat(r,", clone ").concat(t)),i}bindProcessorContextEvents(){this.processorContext.on(nI.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}})),this.processorContext.on(nI.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}}function SN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SN(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CN(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=wN(wN({},r),{},{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?VT.debug("[".concat(e,"] set content hint to"),n.optimizationMode):VT.debug("[".concat(e,"] set content hint failed")))):VT.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}function RN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RN(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}kS([$T({argsMap:(e,t)=>[e.getTrackId(),t]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],TN.prototype,"setDevice",null),kS([fE("CameraVideoTrack","_enabledMutex"),$T({argsMap:(e,t)=>[e.getTrackId(),t]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Boolean,Boolean]),xS("design:returntype",cv)],TN.prototype,"setEnabled",null),kS([$T({argsMap:(e,t)=>[e.getTrackId(),t]}),HI(),xS("design:type",Function),xS("design:paramtypes",[Object,Boolean]),xS("design:returntype",cv)],TN.prototype,"setEncoderConfiguration",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],TN.prototype,"close",null);class NN extends lI{getUserId(){return this._userId}constructor(e,t,n,r){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(r.clientId,"_").concat(rE(5,""))),sh(this,"_userId",void 0),sh(this,"_uintId",void 0),sh(this,"_isDestroyed",!1),sh(this,"store",void 0),sh(this,"processor",void 0),this._userId=t,this._uintId=n,this.store=r}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,VT.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}class ON extends NN{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==sI.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,n,r){super(e,t,n,r),sh(this,"_videoVisibleTimer",null),sh(this,"_previousVideoVisibleStatus",void 0),sh(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),sh(this,"trackMediaType","video"),sh(this,"_videoWidth",void 0),sh(this,"_videoHeight",void 0),sh(this,"_player",void 0),sh(this,"processorDestination",void 0),sh(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new KI(this.getTrackId(),"remote"),this.processorDestination=new qI(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Jy((()=>{VT.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),Ry(this,BR.GET_STATS)||IN({},eI)}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(VT.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}VT.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=IN(IN({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new pN(n):this._player=new mN(n),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(KR.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=e=>{this.safeEmit(KR.VIDEO_STATE_CHANGED,e)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(KR.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),bT("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,VT.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){gN(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(sE)}_updatePlayerSource(){VT.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:s}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&s instanceof HTMLElement){const e=iy.checkOneElementVisible(i),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=eS.reportApiInvoke(null,{tag:py.TRACER,name:hy.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new zv(Wv.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new zv(Wv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(tI.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(tI.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(zR.SEI_RECEIVED,e)}}kS([$T({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),xS("design:type",Function),xS("design:paramtypes",[Object,Object]),xS("design:returntype",void 0)],ON.prototype,"play",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],ON.prototype,"stop",null),kS([$T({argsMap:(e,t)=>[e.getTrackId(),t.name]}),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",Object)],ON.prototype,"pipe",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],ON.prototype,"unpipe",null);class AN extends NN{get isPlaying(){return this._useAudioElement?GI.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,n,r){super(e,t,n,r),sh(this,"trackMediaType","audio"),sh(this,"_source",void 0),sh(this,"_useAudioElement",!0),sh(this,"_volume",100),sh(this,"processorContext",void 0),sh(this,"processorDestination",void 0),sh(this,"_played",!1),sh(this,"_bypassWebAudio",!1),bT("DISABLE_WEBAUDIO")?(this._source=new XI,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new TI(e,!0),bT("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(YR.RECEIVE_TRACK_BUFFER,(()=>{this.safeEmit(KR.FIRST_FRAME_DECODED)})),this.processorContext=new JI(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new YI(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(YR.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})}))}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(YR.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(YR.ON_AUDIO_BUFFER),this._source.on(YR.ON_AUDIO_BUFFER,(t=>e(t)))}setVolume(e){this._volume=e,this._useAudioElement?GI.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!Rv()&&bT("RESTRICTION_SET_PLAYBACK_DEVICE"))throw new zv(Wv.NOT_SUPPORTED,"your browser does not support setting the audio output device");await GI.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Jy((()=>{VT.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),Ry(this,BR.GET_STATS)||IN({},QR)}play(){VT.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(VT.debug("[".concat(this.getTrackId(),"] use audio element to play")),GI.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){VT.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?GI.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];VT.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&GI.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new zv(Wv.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new zv(Wv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new zv(Wv.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(tI.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})),this.processorDestination.on(tI.ON_NODE,(e=>{this._source.processedNode=e;const t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(tI.ON_TRACK),this.processorDestination.removeAllListeners(tI.ON_NODE)}}kS([$T({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),xS("design:type",Function),xS("design:paramtypes",[Number]),xS("design:returntype",void 0)],AN.prototype,"setVolume",null),kS([$T({argsMap:(e,t)=>[e.getTrackId(),t]}),xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],AN.prototype,"setPlaybackDevice",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],AN.prototype,"play",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],AN.prototype,"stop",null),kS([$T({argsMap:(e,t)=>[e.getTrackId(),t.name]}),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",Object)],AN.prototype,"pipe",null),kS([$T({argsMap:e=>[e.getTrackId()]}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],AN.prototype,"unpipe",null);const kN=new class extends ly{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),sh(this,"_lastHiddenTime",0),sh(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),VT.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)}))}};function xN(e){let t=e.length;for(;--t>=0;)e[t]=0}const PN=256,DN=286,LN=30,MN=15,jN=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),UN=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),FN=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),BN=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),VN=new Array(576);xN(VN);const GN=new Array(60);xN(GN);const HN=new Array(512);xN(HN);const WN=new Array(256);xN(WN);const zN=new Array(29);xN(zN);const qN=new Array(LN);function KN(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let YN,JN,XN;function ZN(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}xN(qN);const QN=e=>e<256?HN[e]:HN[256+(e>>>7)],$N=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},eO=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,$N(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},tO=(e,t,n)=>{eO(e,n[2*t],n[2*t+1])},nO=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},rO=(e,t,n)=>{const r=new Array(16);let i,s,o=0;for(i=1;i<=MN;i++)o=o+n[i-1]<<1,r[i]=o;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=nO(r[t]++,t))}},iO=e=>{let t;for(t=0;t<DN;t++)e.dyn_ltree[2*t]=0;for(t=0;t<LN;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},sO=e=>{e.bi_valid>8?$N(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},oO=(e,t,n,r)=>{const i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},aO=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&oO(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!oO(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},cO=(e,t,n)=>{let r,i,s,o,a=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+a++],r+=(255&e.pending_buf[e.sym_buf+a++])<<8,i=e.pending_buf[e.sym_buf+a++],0===r?tO(e,i,t):(s=WN[i],tO(e,s+PN+1,t),o=jN[s],0!==o&&(i-=zN[s],eO(e,i,o)),r--,s=QN(r),tO(e,s,n),o=UN[s],0!==o&&(r-=qN[s],eO(e,r,o)))}while(a<e.sym_next);tO(e,256,t)},lO=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[2*c+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)aO(e,n,o);c=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],aO(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[2*c]=n[2*o]+n[2*a],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[2*o+1]=n[2*a+1]=c,e.heap[1]=c++,aO(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,d,u,h,p,f,m=0;for(h=0;h<=MN;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)d=e.heap[l],h=n[2*n[2*d+1]+1]+1,h>c&&(h=c,m++),n[2*d+1]=h,d>r||(e.bl_count[h]++,p=0,d>=a&&(p=o[d-a]),f=n[2*d],e.opt_len+=f*(h+p),s&&(e.static_len+=f*(i[2*d+1]+p)));if(0!==m){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,m-=2}while(m>0);for(h=c;0!==h;h--)for(d=e.bl_count[h];0!==d;)u=e.heap[--l],u>r||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),d--)}})(e,t),rO(n,l,e.bl_count)},dO=(e,t,n)=>{let r,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++a<c&&i===o||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4))},uO=(e,t,n)=>{let r,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++a<c&&i===o)){if(a<l)do{tO(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(tO(e,i,e.bl_tree),a--),tO(e,16,e.bl_tree),eO(e,a-3,2)):a<=10?(tO(e,17,e.bl_tree),eO(e,a-3,3)):(tO(e,18,e.bl_tree),eO(e,a-11,7));a=0,s=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4)}};let hO=!1;const pO=(e,t,n,r)=>{eO(e,0+(r?1:0),3),sO(e),$N(e,n),$N(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var fO=e=>{hO||((()=>{let e,t,n,r,i;const s=new Array(16);for(n=0,r=0;r<28;r++)for(zN[r]=n,e=0;e<1<<jN[r];e++)WN[n++]=r;for(WN[n-1]=r,i=0,r=0;r<16;r++)for(qN[r]=i,e=0;e<1<<UN[r];e++)HN[i++]=r;for(i>>=7;r<LN;r++)for(qN[r]=i<<7,e=0;e<1<<UN[r]-7;e++)HN[256+i++]=r;for(t=0;t<=MN;t++)s[t]=0;for(e=0;e<=143;)VN[2*e+1]=8,e++,s[8]++;for(;e<=255;)VN[2*e+1]=9,e++,s[9]++;for(;e<=279;)VN[2*e+1]=7,e++,s[7]++;for(;e<=287;)VN[2*e+1]=8,e++,s[8]++;for(rO(VN,287,s),e=0;e<LN;e++)GN[2*e+1]=5,GN[2*e]=nO(e,5);YN=new KN(VN,jN,257,DN,MN),JN=new KN(GN,UN,0,LN,MN),XN=new KN(new Array(0),FN,0,19,7)})(),hO=!0),e.l_desc=new ZN(e.dyn_ltree,YN),e.d_desc=new ZN(e.dyn_dtree,JN),e.bl_desc=new ZN(e.bl_tree,XN),e.bi_buf=0,e.bi_valid=0,iO(e)},mO=(e,t,n,r)=>{let i,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<PN;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),lO(e,e.l_desc),lO(e,e.d_desc),o=(e=>{let t;for(dO(e,e.dyn_ltree,e.l_desc.max_code),dO(e,e.dyn_dtree,e.d_desc.max_code),lO(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*BN[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?pO(e,t,n,r):4===e.strategy||s===i?(eO(e,2+(r?1:0),3),cO(e,VN,GN)):(eO(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(eO(e,t-257,5),eO(e,n-1,5),eO(e,r-4,4),i=0;i<r;i++)eO(e,e.bl_tree[2*BN[i]+1],3);uO(e,e.dyn_ltree,t-1),uO(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),cO(e,e.dyn_ltree,e.dyn_dtree)),iO(e),r&&sO(e)},gO=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(WN[n]+PN+1)]++,e.dyn_dtree[2*QN(t)]++),e.sym_next===e.sym_end),_O={_tr_init:fO,_tr_stored_block:pO,_tr_flush_block:mO,_tr_tally:gO,_tr_align:e=>{eO(e,2,3),tO(e,256,VN),(e=>{16===e.bi_valid?($N(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},vO=(e,t,n,r)=>{let i=65535&e,s=e>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+t[r++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16};const yO=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var EO=(e,t,n,r)=>{const i=yO,s=r+n;e^=-1;for(let o=r;o<s;o++)e=e>>>8^i[255&(e^t[o])];return~e},bO={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},TO={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:SO,_tr_stored_block:wO,_tr_flush_block:CO,_tr_tally:RO,_tr_align:IO}=_O,{Z_NO_FLUSH:NO,Z_PARTIAL_FLUSH:OO,Z_FULL_FLUSH:AO,Z_FINISH:kO,Z_BLOCK:xO,Z_OK:PO,Z_STREAM_END:DO,Z_STREAM_ERROR:LO,Z_DATA_ERROR:MO,Z_BUF_ERROR:jO,Z_DEFAULT_COMPRESSION:UO,Z_FILTERED:FO,Z_HUFFMAN_ONLY:BO,Z_RLE:VO,Z_FIXED:GO,Z_DEFAULT_STRATEGY:HO,Z_UNKNOWN:WO,Z_DEFLATED:zO}=TO,qO=286,KO=30,YO=19,JO=2*qO+1,XO=15,ZO=258,QO=262,$O=42,eA=113,tA=666,nA=(e,t)=>(e.msg=bO[t],t),rA=e=>2*e-(e>4?9:0),iA=e=>{let t=e.length;for(;--t>=0;)e[t]=0},sA=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let oA=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const aA=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},cA=(e,t)=>{CO(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,aA(e.strm)},lA=(e,t)=>{e.pending_buf[e.pending++]=t},dA=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},uA=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=vO(e.adler,t,i,n):2===e.state.wrap&&(e.adler=EO(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},hA=(e,t)=>{let n,r,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-QO?e.strstart-(e.w_size-QO):0,l=e.window,d=e.w_mask,u=e.prev,h=e.strstart+ZO;let p=l[s+o-1],f=l[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,l[n+o]===f&&l[n+o-1]===p&&l[n]===l[s]&&l[++n]===l[s+1]){s+=2,n++;do{}while(l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&s<h);if(r=ZO-(h-s),s=h-ZO,r>o){if(e.match_start=t,o=r,r>=a)break;p=l[s+o-1],f=l[s+o]}}}while((t=u[t&d])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead},pA=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-QO)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),sA(e),r+=t),0===e.strm.avail_in)break;if(n=uA(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=oA(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=oA(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<QO&&0!==e.strm.avail_in)},fA=(e,t)=>{let n,r,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,a=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<s&&(0===n&&t!==kO||t===NO||n!==r+e.strm.avail_in))break;o=t===kO&&n===r+e.strm.avail_in?1:0,wO(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,aA(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(uA(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==NO&&t!==kO&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(uA(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,s=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=s||(r||t===kO)&&t!==NO&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,o=t===kO&&0===e.strm.avail_in&&n===r?1:0,wO(e,e.block_start,n,o),e.block_start+=n,aA(e.strm)),o?3:1)},mA=(e,t)=>{let n,r;for(;;){if(e.lookahead<QO){if(pA(e),e.lookahead<QO&&t===NO)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=oA(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-QO&&(e.match_length=hA(e,n)),e.match_length>=3)if(r=RO(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=oA(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=oA(e,e.ins_h,e.window[e.strstart+1]);else r=RO(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(cA(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===kO?(cA(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(cA(e,!1),0===e.strm.avail_out)?1:2},gA=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<QO){if(pA(e),e.lookahead<QO&&t===NO)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=oA(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-QO&&(e.match_length=hA(e,n),e.match_length<=5&&(e.strategy===FO||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=RO(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=oA(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(cA(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=RO(e,0,e.window[e.strstart-1]),r&&cA(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=RO(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===kO?(cA(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(cA(e,!1),0===e.strm.avail_out)?1:2};function _A(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const vA=[new _A(0,0,0,0,fA),new _A(4,4,8,4,mA),new _A(4,5,16,8,mA),new _A(4,6,32,32,mA),new _A(4,4,16,16,gA),new _A(8,16,32,32,gA),new _A(8,16,128,128,gA),new _A(8,32,128,256,gA),new _A(32,128,258,1024,gA),new _A(32,258,258,4096,gA)];function yA(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=zO,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*JO),this.dyn_dtree=new Uint16Array(2*(2*KO+1)),this.bl_tree=new Uint16Array(2*(2*YO+1)),iA(this.dyn_ltree),iA(this.dyn_dtree),iA(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(XO+1),this.heap=new Uint16Array(2*qO+1),iA(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*qO+1),iA(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const EA=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==$O&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==eA&&t.status!==tA?1:0},bA=e=>{if(EA(e))return nA(e,LO);e.total_in=e.total_out=0,e.data_type=WO;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?$O:eA,e.adler=2===t.wrap?0:1,t.last_flush=-2,SO(t),PO},TA=e=>{const t=bA(e);var n;return t===PO&&((n=e.state).window_size=2*n.w_size,iA(n.head),n.max_lazy_match=vA[n.level].max_lazy,n.good_match=vA[n.level].good_length,n.nice_match=vA[n.level].nice_length,n.max_chain_length=vA[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},SA=(e,t,n,r,i,s)=>{if(!e)return LO;let o=1;if(t===UO&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==zO||r<8||r>15||t<0||t>9||s<0||s>GO||8===r&&1!==o)return nA(e,LO);8===r&&(r=9);const a=new yA;return e.state=a,a.strm=e,a.status=$O,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=s,a.method=n,TA(e)};var wA=(e,t)=>{if(EA(e)||t>xO||t<0)return e?nA(e,LO):LO;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===tA&&t!==kO)return nA(e,0===e.avail_out?jO:LO);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(aA(e),0===e.avail_out)return n.last_flush=-1,PO}else if(0===e.avail_in&&rA(t)<=rA(r)&&t!==kO)return nA(e,jO);if(n.status===tA&&0!==e.avail_in)return nA(e,jO);if(n.status===$O&&0===n.wrap&&(n.status=eA),n.status===$O){let t=zO+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=BO||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,dA(n,t),0!==n.strstart&&(dA(n,e.adler>>>16),dA(n,65535&e.adler)),e.adler=1,n.status=eA,aA(e),0!==n.pending)return n.last_flush=-1,PO}if(57===n.status)if(e.adler=0,lA(n,31),lA(n,139),lA(n,8),n.gzhead)lA(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),lA(n,255&n.gzhead.time),lA(n,n.gzhead.time>>8&255),lA(n,n.gzhead.time>>16&255),lA(n,n.gzhead.time>>24&255),lA(n,9===n.level?2:n.strategy>=BO||n.level<2?4:0),lA(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(lA(n,255&n.gzhead.extra.length),lA(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=EO(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(lA(n,0),lA(n,0),lA(n,0),lA(n,0),lA(n,0),lA(n,9===n.level?2:n.strategy>=BO||n.level<2?4:0),lA(n,3),n.status=eA,aA(e),0!==n.pending)return n.last_flush=-1,PO;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=EO(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,aA(e),0!==n.pending)return n.last_flush=-1,PO;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=EO(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=EO(e.adler,n.pending_buf,n.pending-r,r)),aA(e),0!==n.pending)return n.last_flush=-1,PO;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,lA(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=EO(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=EO(e.adler,n.pending_buf,n.pending-r,r)),aA(e),0!==n.pending)return n.last_flush=-1,PO;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,lA(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=EO(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(aA(e),0!==n.pending))return n.last_flush=-1,PO;lA(n,255&e.adler),lA(n,e.adler>>8&255),e.adler=0}if(n.status=eA,aA(e),0!==n.pending)return n.last_flush=-1,PO}if(0!==e.avail_in||0!==n.lookahead||t!==NO&&n.status!==tA){let r=0===n.level?fA(n,t):n.strategy===BO?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(pA(e),0===e.lookahead)){if(t===NO)return 1;break}if(e.match_length=0,n=RO(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(cA(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===kO?(cA(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(cA(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===VO?((e,t)=>{let n,r,i,s;const o=e.window;for(;;){if(e.lookahead<=ZO){if(pA(e),e.lookahead<=ZO&&t===NO)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=e.strstart+ZO;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=ZO-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=RO(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=RO(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(cA(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===kO?(cA(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(cA(e,!1),0===e.strm.avail_out)?1:2})(n,t):vA[n.level].func(n,t);if(3!==r&&4!==r||(n.status=tA),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),PO;if(2===r&&(t===OO?IO(n):t!==xO&&(wO(n,0,0,!1),t===AO&&(iA(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),aA(e),0===e.avail_out))return n.last_flush=-1,PO}return t!==kO?PO:n.wrap<=0?DO:(2===n.wrap?(lA(n,255&e.adler),lA(n,e.adler>>8&255),lA(n,e.adler>>16&255),lA(n,e.adler>>24&255),lA(n,255&e.total_in),lA(n,e.total_in>>8&255),lA(n,e.total_in>>16&255),lA(n,e.total_in>>24&255)):(dA(n,e.adler>>>16),dA(n,65535&e.adler)),aA(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?PO:DO)},CA=(e,t)=>{let n=t.length;if(EA(e))return LO;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==$O||r.lookahead)return LO;if(1===i&&(e.adler=vO(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(iA(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,pA(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=oA(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,pA(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,r.wrap=i,PO},RA={deflateInit:(e,t)=>SA(e,t,zO,15,8,HO),deflateInit2:SA,deflateReset:TA,deflateResetKeep:bA,deflateSetHeader:(e,t)=>EA(e)||2!==e.state.wrap?LO:(e.state.gzhead=t,PO),deflate:wA,deflateEnd:e=>{if(EA(e))return LO;const t=e.state.status;return e.state=null,t===eA?nA(e,MO):PO},deflateSetDictionary:CA,deflateInfo:"pako deflate (from Nodeca project)"};const IA=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var NA={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)IA(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let t=e[r];n.set(t,i),i+=t.length}return n}};let OA=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){OA=!1}const AA=new Uint8Array(256);for(let n=0;n<256;n++)AA[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;AA[254]=AA[254]=1;var kA={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,s,o=e.length,a=0;for(i=0;i<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const s=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){s[i++]=t;continue}let o=AA[t];if(o>4)s[i++]=65533,r+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&r<n;)t=t<<6|63&e[r++],o--;o>1?s[i++]=65533:t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&OA)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(s,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+AA[e[n]]>t?n:t}},xA=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const PA=Object.prototype.toString,{Z_NO_FLUSH:DA,Z_SYNC_FLUSH:LA,Z_FULL_FLUSH:MA,Z_FINISH:jA,Z_OK:UA,Z_STREAM_END:FA,Z_DEFAULT_COMPRESSION:BA,Z_DEFAULT_STRATEGY:VA,Z_DEFLATED:GA}=TO;function HA(e){this.options=NA.assign({level:BA,method:GA,chunkSize:16384,windowBits:15,memLevel:8,strategy:VA},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xA,this.strm.avail_out=0;let n=RA.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==UA)throw new Error(bO[n]);if(t.header&&RA.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?kA.string2buf(t.dictionary):"[object ArrayBuffer]"===PA.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=RA.deflateSetDictionary(this.strm,e),n!==UA)throw new Error(bO[n]);this._dict_set=!0}}function WA(e,t){const n=new HA(t);if(n.push(e,!0),n.err)throw n.msg||bO[n.err];return n.result}HA.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?jA:DA,"string"==typeof e?n.input=kA.string2buf(e):"[object ArrayBuffer]"===PA.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===LA||s===MA)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=RA.deflate(n,s),i===FA)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=RA.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===UA;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},HA.prototype.onData=function(e){this.chunks.push(e)},HA.prototype.onEnd=function(e){e===UA&&(this.result=NA.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var zA={Deflate:HA,deflate:WA,deflateRaw:function(e,t){return(t=t||{}).raw=!0,WA(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,WA(e,t)},constants:TO};const qA=16209;var KA=function(e,t){let n,r,i,s,o,a,c,l,d,u,h,p,f,m,g,_,v,y,E,b,T,S,w,C;const R=e.state;n=e.next_in,w=e.input,r=n+(e.avail_in-5),i=e.next_out,C=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),a=R.dmax,c=R.wsize,l=R.whave,d=R.wnext,u=R.window,h=R.hold,p=R.bits,f=R.lencode,m=R.distcode,g=(1<<R.lenbits)-1,_=(1<<R.distbits)-1;e:do{p<15&&(h+=w[n++]<<p,p+=8,h+=w[n++]<<p,p+=8),v=f[h&g];t:for(;;){if(y=v>>>24,h>>>=y,p-=y,y=v>>>16&255,0===y)C[i++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=f[(65535&v)+(h&(1<<y)-1)];continue t}if(32&y){R.mode=16191;break e}e.msg="invalid literal/length code",R.mode=qA;break e}E=65535&v,y&=15,y&&(p<y&&(h+=w[n++]<<p,p+=8),E+=h&(1<<y)-1,h>>>=y,p-=y),p<15&&(h+=w[n++]<<p,p+=8,h+=w[n++]<<p,p+=8),v=m[h&_];n:for(;;){if(y=v>>>24,h>>>=y,p-=y,y=v>>>16&255,!(16&y)){if(0==(64&y)){v=m[(65535&v)+(h&(1<<y)-1)];continue n}e.msg="invalid distance code",R.mode=qA;break e}if(b=65535&v,y&=15,p<y&&(h+=w[n++]<<p,p+=8,p<y&&(h+=w[n++]<<p,p+=8)),b+=h&(1<<y)-1,b>a){e.msg="invalid distance too far back",R.mode=qA;break e}if(h>>>=y,p-=y,y=i-s,b>y){if(y=b-y,y>l&&R.sane){e.msg="invalid distance too far back",R.mode=qA;break e}if(T=0,S=u,0===d){if(T+=c-y,y<E){E-=y;do{C[i++]=u[T++]}while(--y);T=i-b,S=C}}else if(d<y){if(T+=c+d-y,y-=d,y<E){E-=y;do{C[i++]=u[T++]}while(--y);if(T=0,d<E){y=d,E-=y;do{C[i++]=u[T++]}while(--y);T=i-b,S=C}}}else if(T+=d-y,y<E){E-=y;do{C[i++]=u[T++]}while(--y);T=i-b,S=C}for(;E>2;)C[i++]=S[T++],C[i++]=S[T++],C[i++]=S[T++],E-=3;E&&(C[i++]=S[T++],E>1&&(C[i++]=S[T++]))}else{T=i-b;do{C[i++]=C[T++],C[i++]=C[T++],C[i++]=C[T++],E-=3}while(E>2);E&&(C[i++]=C[T++],E>1&&(C[i++]=C[T++]))}break}}break}}while(n<r&&i<o);E=p>>3,n-=E,p-=E<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<o?o-i+257:257-(i-o),R.hold=h,R.bits=p};const YA=15,JA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),XA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ZA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),QA=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var $A=(e,t,n,r,i,s,o,a)=>{const c=a.bits;let l,d,u,h,p,f,m=0,g=0,_=0,v=0,y=0,E=0,b=0,T=0,S=0,w=0,C=null;const R=new Uint16Array(16),I=new Uint16Array(16);let N,O,A,k=null;for(m=0;m<=YA;m++)R[m]=0;for(g=0;g<r;g++)R[t[n+g]]++;for(y=c,v=YA;v>=1&&0===R[v];v--);if(y>v&&(y=v),0===v)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(_=1;_<v&&0===R[_];_++);for(y<_&&(y=_),T=1,m=1;m<=YA;m++)if(T<<=1,T-=R[m],T<0)return-1;if(T>0&&(0===e||1!==v))return-1;for(I[1]=0,m=1;m<YA;m++)I[m+1]=I[m]+R[m];for(g=0;g<r;g++)0!==t[n+g]&&(o[I[t[n+g]]++]=g);if(0===e?(C=k=o,f=20):1===e?(C=JA,k=XA,f=257):(C=ZA,k=QA,f=0),w=0,g=0,m=_,p=s,E=y,b=0,u=-1,S=1<<y,h=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){N=m-b,o[g]+1<f?(O=0,A=o[g]):o[g]>=f?(O=k[o[g]-f],A=C[o[g]-f]):(O=96,A=0),l=1<<m-b,d=1<<E,_=d;do{d-=l,i[p+(w>>b)+d]=N<<24|O<<16|A}while(0!==d);for(l=1<<m-1;w&l;)l>>=1;if(0!==l?(w&=l-1,w+=l):w=0,g++,0==--R[m]){if(m===v)break;m=t[n+o[g]]}if(m>y&&(w&h)!==u){for(0===b&&(b=y),p+=_,E=m-b,T=1<<E;E+b<v&&(T-=R[E+b],!(T<=0));)E++,T<<=1;if(S+=1<<E,1===e&&S>852||2===e&&S>592)return 1;u=w&h,i[u]=y<<24|E<<16|p-s}}return 0!==w&&(i[p+w]=m-b<<24|64<<16),a.bits=y,0};const{Z_FINISH:ek,Z_BLOCK:tk,Z_TREES:nk,Z_OK:rk,Z_STREAM_END:ik,Z_NEED_DICT:sk,Z_STREAM_ERROR:ok,Z_DATA_ERROR:ak,Z_MEM_ERROR:ck,Z_BUF_ERROR:lk,Z_DEFLATED:dk}=TO,uk=16180,hk=16190,pk=16191,fk=16192,mk=16194,gk=16199,_k=16200,vk=16206,yk=16209,Ek=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function bk(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Tk=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<uk||t.mode>16211?1:0},Sk=e=>{if(Tk(e))return ok;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=uk,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,rk},wk=e=>{if(Tk(e))return ok;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Sk(e)},Ck=(e,t)=>{let n;if(Tk(e))return ok;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ok:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,wk(e))},Rk=(e,t)=>{if(!e)return ok;const n=new bk;e.state=n,n.strm=e,n.window=null,n.mode=uk;const r=Ck(e,t);return r!==rk&&(e.state=null),r};let Ik,Nk,Ok=!0;const Ak=e=>{if(Ok){Ik=new Int32Array(512),Nk=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for($A(1,e.lens,0,288,Ik,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;$A(2,e.lens,0,32,Nk,0,e.work,{bits:5}),Ok=!1}e.lencode=Ik,e.lenbits=9,e.distcode=Nk,e.distbits=5},kk=(e,t,n,r)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var xk=(e,t)=>{let n,r,i,s,o,a,c,l,d,u,h,p,f,m,g,_,v,y,E,b,T,S,w=0;const C=new Uint8Array(4);let R,I;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Tk(e)||!e.output||!e.input&&0!==e.avail_in)return ok;n=e.state,n.mode===pk&&(n.mode=fk),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,l=n.hold,d=n.bits,u=a,h=c,S=rk;e:for(;;)switch(n.mode){case uk:if(0===n.wrap){n.mode=fk;break}for(;d<16;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&l,C[1]=l>>>8&255,n.check=EO(n.check,C,2,0),l=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=yk;break}if((15&l)!==dk){e.msg="unknown compression method",n.mode=yk;break}if(l>>>=4,d-=4,T=8+(15&l),0===n.wbits&&(n.wbits=T),T>15||T>n.wbits){e.msg="invalid window size",n.mode=yk;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:pk,l=0,d=0;break;case 16181:for(;d<16;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(n.flags=l,(255&n.flags)!==dk){e.msg="unknown compression method",n.mode=yk;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=yk;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,n.check=EO(n.check,C,2,0)),l=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,C[2]=l>>>16&255,C[3]=l>>>24&255,n.check=EO(n.check,C,4,0)),l=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,n.check=EO(n.check,C,2,0)),l=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,n.check=EO(n.check,C,2,0)),l=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(p=n.length,p>a&&(p=a),p&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+p),T)),512&n.flags&&4&n.wrap&&(n.check=EO(n.check,r,p,s)),a-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;p=0;do{T=r[s+p++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T))}while(T&&p<a);if(512&n.flags&&4&n.wrap&&(n.check=EO(n.check,r,p,s)),a-=p,s+=p,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;p=0;do{T=r[s+p++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T))}while(T&&p<a);if(512&n.flags&&4&n.wrap&&(n.check=EO(n.check,r,p,s)),a-=p,s+=p,T)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=yk;break}l=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=pk;break;case 16189:for(;d<32;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}e.adler=n.check=Ek(l),l=0,d=0,n.mode=hk;case hk:if(0===n.havedict)return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=l,n.bits=d,sk;e.adler=n.check=1,n.mode=pk;case pk:if(t===tk||t===nk)break e;case fk:if(n.last){l>>>=7&d,d-=7&d,n.mode=vk;break}for(;d<3;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}switch(n.last=1&l,l>>>=1,d-=1,3&l){case 0:n.mode=16193;break;case 1:if(Ak(n),n.mode=gk,t===nk){l>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=yk}l>>>=2,d-=2;break;case 16193:for(l>>>=7&d,d-=7&d;d<32;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=yk;break}if(n.length=65535&l,l=0,d=0,n.mode=mk,t===nk)break e;case mk:n.mode=16195;case 16195:if(p=n.length,p){if(p>a&&(p=a),p>c&&(p=c),0===p)break e;i.set(r.subarray(s,s+p),o),a-=p,s+=p,c-=p,o+=p,n.length-=p;break}n.mode=pk;break;case 16196:for(;d<14;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(n.nlen=257+(31&l),l>>>=5,d-=5,n.ndist=1+(31&l),l>>>=5,d-=5,n.ncode=4+(15&l),l>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=yk;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}n.lens[N[n.have++]]=7&l,l>>>=3,d-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},S=$A(0,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,S){e.msg="invalid code lengths set",n.mode=yk;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;w=n.lencode[l&(1<<n.lenbits)-1],g=w>>>24,_=w>>>16&255,v=65535&w,!(g<=d);){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(v<16)l>>>=g,d-=g,n.lens[n.have++]=v;else{if(16===v){for(I=g+2;d<I;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(l>>>=g,d-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=yk;break}T=n.lens[n.have-1],p=3+(3&l),l>>>=2,d-=2}else if(17===v){for(I=g+3;d<I;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}l>>>=g,d-=g,T=0,p=3+(7&l),l>>>=3,d-=3}else{for(I=g+7;d<I;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}l>>>=g,d-=g,T=0,p=11+(127&l),l>>>=7,d-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=yk;break}for(;p--;)n.lens[n.have++]=T}}if(n.mode===yk)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=yk;break}if(n.lenbits=9,R={bits:n.lenbits},S=$A(1,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,S){e.msg="invalid literal/lengths set",n.mode=yk;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},S=$A(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,S){e.msg="invalid distances set",n.mode=yk;break}if(n.mode=gk,t===nk)break e;case gk:n.mode=_k;case _k:if(a>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=l,n.bits=d,KA(e,h),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,l=n.hold,d=n.bits,n.mode===pk&&(n.back=-1);break}for(n.back=0;w=n.lencode[l&(1<<n.lenbits)-1],g=w>>>24,_=w>>>16&255,v=65535&w,!(g<=d);){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(_&&0==(240&_)){for(y=g,E=_,b=v;w=n.lencode[b+((l&(1<<y+E)-1)>>y)],g=w>>>24,_=w>>>16&255,v=65535&w,!(y+g<=d);){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}l>>>=y,d-=y,n.back+=y}if(l>>>=g,d-=g,n.back+=g,n.length=v,0===_){n.mode=16205;break}if(32&_){n.back=-1,n.mode=pk;break}if(64&_){e.msg="invalid literal/length code",n.mode=yk;break}n.extra=15&_,n.mode=16201;case 16201:if(n.extra){for(I=n.extra;d<I;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;w=n.distcode[l&(1<<n.distbits)-1],g=w>>>24,_=w>>>16&255,v=65535&w,!(g<=d);){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(0==(240&_)){for(y=g,E=_,b=v;w=n.distcode[b+((l&(1<<y+E)-1)>>y)],g=w>>>24,_=w>>>16&255,v=65535&w,!(y+g<=d);){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}l>>>=y,d-=y,n.back+=y}if(l>>>=g,d-=g,n.back+=g,64&_){e.msg="invalid distance code",n.mode=yk;break}n.offset=v,n.extra=15&_,n.mode=16203;case 16203:if(n.extra){for(I=n.extra;d<I;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=yk;break}n.mode=16204;case 16204:if(0===c)break e;if(p=h-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=yk;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=i,f=o-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do{i[o++]=m[f++]}while(--p);0===n.length&&(n.mode=_k);break;case 16205:if(0===c)break e;i[o++]=n.length,c--,n.mode=_k;break;case vk:if(n.wrap){for(;d<32;){if(0===a)break e;a--,l|=r[s++]<<d,d+=8}if(h-=c,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?EO(n.check,i,h,o-h):vO(n.check,i,h,o-h)),h=c,4&n.wrap&&(n.flags?l:Ek(l))!==n.check){e.msg="incorrect data check",n.mode=yk;break}l=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=yk;break}l=0,d=0}n.mode=16208;case 16208:S=ik;break e;case yk:S=ak;break e;case 16210:return ck;default:return ok}return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=l,n.bits=d,(n.wsize||h!==e.avail_out&&n.mode<yk&&(n.mode<vk||t!==ek))&&kk(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?EO(n.check,i,h,e.next_out-h):vO(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===pk?128:0)+(n.mode===gk||n.mode===mk?256:0),(0===u&&0===h||t===ek)&&S===rk&&(S=lk),S},Pk={inflateReset:wk,inflateReset2:Ck,inflateResetKeep:Sk,inflateInit:e=>Rk(e,15),inflateInit2:Rk,inflate:xk,inflateEnd:e=>{if(Tk(e))return ok;let t=e.state;return t.window&&(t.window=null),e.state=null,rk},inflateGetHeader:(e,t)=>{if(Tk(e))return ok;const n=e.state;return 0==(2&n.wrap)?ok:(n.head=t,t.done=!1,rk)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,s;return Tk(e)?ok:(r=e.state,0!==r.wrap&&r.mode!==hk?ok:r.mode===hk&&(i=1,i=vO(i,t,n,0),i!==r.check)?ak:(s=kk(e,t,n,n),s?(r.mode=16210,ck):(r.havedict=1,rk)))},inflateInfo:"pako inflate (from Nodeca project)"},Dk=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Lk=Object.prototype.toString,{Z_NO_FLUSH:Mk,Z_FINISH:jk,Z_OK:Uk,Z_STREAM_END:Fk,Z_NEED_DICT:Bk,Z_STREAM_ERROR:Vk,Z_DATA_ERROR:Gk,Z_MEM_ERROR:Hk}=TO;function Wk(e){this.options=NA.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xA,this.strm.avail_out=0;let n=Pk.inflateInit2(this.strm,t.windowBits);if(n!==Uk)throw new Error(bO[n]);if(this.header=new Dk,Pk.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=kA.string2buf(t.dictionary):"[object ArrayBuffer]"===Lk.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Pk.inflateSetDictionary(this.strm,t.dictionary),n!==Uk)))throw new Error(bO[n])}function zk(e,t){const n=new Wk(t);if(n.push(e),n.err)throw n.msg||bO[n.err];return n.result}Wk.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?jk:Mk,"[object ArrayBuffer]"===Lk.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Pk.inflate(n,o),s===Bk&&i&&(s=Pk.inflateSetDictionary(n,i),s===Uk?s=Pk.inflate(n,o):s===Gk&&(s=Bk));n.avail_in>0&&s===Fk&&n.state.wrap>0&&0!==e[n.next_in];)Pk.inflateReset(n),s=Pk.inflate(n,o);switch(s){case Vk:case Gk:case Bk:case Hk:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||s===Fk))if("string"===this.options.to){let e=kA.utf8border(n.output,n.next_out),t=n.next_out-e,i=kA.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==Uk||0!==a){if(s===Fk)return s=Pk.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Wk.prototype.onData=function(e){this.chunks.push(e)},Wk.prototype.onEnd=function(e){e===Uk&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=NA.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var qk={Inflate:Wk,inflate:zk,inflateRaw:function(e,t){return(t=t||{}).raw=!0,zk(e,t)},ungzip:zk,constants:TO};const{Deflate:Kk,deflate:Yk,deflateRaw:Jk,gzip:Xk}=zA,{Inflate:Zk,inflate:Qk,inflateRaw:$k,ungzip:ex}=qk;var tx,nx=Yk,rx=Qk;!function(e){e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE"}(tx||(tx={}));class ix{constructor(){sh(this,"_sequence",0),sh(this,"_startTime",Date.now()),sh(this,"isUseOneByte",!0)}get startTime(){const e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){const t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){const n=new Uint8Array(4);n.set([1,0,0,0]);const r={id:0,length:4,data:n.buffer},i={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[r]};t.commonPacketHeader.extension=1,t.extension=i,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;bT("SHOW_DATASTREAM2_LOG")&&VT.debug("send data header: ".concat(JSON.stringify(t.commonPacketHeader)));const n=new ArrayBuffer(t.commonPacketHeader.length),r=new Uint8Array(n),i=new DataView(n);let s=0;if(i.setUint16(s,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),s+=2,i.setUint32(s,t.commonPacketHeader.sequence,!0),s+=4,i.setUint16(s,t.commonStreamHeader,!0),s+=2,t.extension){const e=this.serializeExtension(t.extension);r.set(new Uint8Array(e),s),s+=e.byteLength}if(r.set(new Uint8Array(t.payload),s),s+=t.payload.byteLength,s!==t.commonPacketHeader.length)throw Error("serialize error!");return n}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);const t=new DataView(e);let n=0;const r=t.getUint16(n,!0);n+=2;const i={length:16383&r,reserved:(16384&r)>>14,extension:(32768&r)>>15,sequence:t.getUint16(n+2,!0)<<16|t.getUint16(n,!0)};let s,o;if(n+=4,bT("SHOW_DATASTREAM2_LOG")&&VT.debug("receive data header: ".concat(JSON.stringify(i))),t.getUint16(n,!0),n+=2,i.extension){o=this.deserializeExtension(e.slice(n)),n+=2+o.length,s=e.slice(n);let t=!1;if(o.datas.length>0){const e=o.datas.find((e=>0===e.id));e&&(t=1==(1&new DataView(e.data).getUint32(0,!0)))}s=t?this.decompress(s):s}else s=e.slice(8);return s}serializeExtension(e){const{profile:t,length:n,datas:r}=e,i=new ArrayBuffer(n+2),s=new Uint8Array(i),o=new DataView(i);let a=0;if(o.setUint8(a++,t),o.setUint8(a++,n),r.forEach((e=>{t?(o.setUint8(a++,e.id),o.setUint8(a++,e.length),s.set(new Uint8Array(e.data),a),a+=e.data.byteLength):(o.setUint8(a++,e.id|e.length<<4),s.set(new Uint8Array(e.data),a),a+=e.data.byteLength)})),a!==n+2)throw Error("serialize extension error, is ".concat(a,"!==").concat(n+2));return i}deserializeExtension(e){const t=new DataView(e);let n=0;const r=t.getUint8(n);n++;const i=t.getUint8(n);n++;const s=r===tx.TWO_BYTE,o=[],a=new DataView(e,2);let c=0;for(;c<i;){let e=0,t=0,n=new ArrayBuffer(0);s?(e=a.getUint8(c),c++,t=a.getUint8(c),c++):(e=15&a.getUint8(c),t=a.getUint8(c)>>4,c++),t>0&&(n=a.buffer.slice(c+2,c+2+t),c+=n.byteLength),o.push({id:e,length:t,data:n})}if(c!==i)throw Error("parse error");return{profile:r,length:i,datas:o}}decompress(e){return rx(new Uint8Array(e))}compress(e){return nx(new Uint8Array(e))}}class sx extends ly{constructor(e,t){super(),sh(this,"_version",1),sh(this,"_type",3),sh(this,"_config",void 0),sh(this,"_originDataChannel",void 0),sh(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),sh(this,"_dataStreamPacketHandler",void 0),sh(this,"_datachannelEventMap",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader(),this._dataStreamPacketHandler=new ix}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return bT("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.readyState)&&void 0!==e?e:"connecting"}get _originDataChannelId(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.id)&&void 0!==e?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new cv(((e,t)=>{if(this._originDataChannel){"open"===this._originDataChannel.readyState&&e();const n=setTimeout((()=>{var e;t(new zv(Wv.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat(null===(e=this._originDataChannel)||void 0===e?void 0:e.id)))}),1e4);this._originDataChannel.onopen=()=>{clearTimeout(n),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(n),new zv(Wv.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new zv(Wv.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))}))}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){const e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[cI.OPEN,cI.CLOSE,cI.ERROR].forEach((t=>{const n=()=>{this.emit(t)};this._datachannelEventMap.set(t,n),e.addEventListener(t,n)}))}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach((t=>{let[n,r]=t;e.removeEventListener(n,r)})),this._datachannelEventMap.clear()}}class ox extends sx{constructor(e){super(e),sh(this,"_messageListener",void 0),this._messageListener=e=>{if(e.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const t=e.data.slice(0,this._dataStreamPacketHeader.byteLength),n=new DataView(t).getUint8(3);if(n!==this.id)return void(bT("SHOW_DATASTREAM2_LOG")&&VT.debug("invalid datachannel id: ".concat(n," !== ").concat(this.id)));let r=e.data.slice(this._dataStreamPacketHeader.byteLength);r=this._dataStreamPacketHandler.deserialize(r),this.emit(cI.MESSAGE,r)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class ax extends sx{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);const n=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);n.set(new Uint8Array(this._dataStreamPacketHeader),0),n.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(n.buffer)}}}var cx=i,lx=pt("iterator"),dx=!cx((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2"),r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),n.delete("a",2),!e.toJSON||!n.has("a",1)||n.has("a",2)||!t.size&&!0||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[lx]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),ux=jo,hx=An,px=p,fx=D,mx=d,gx=k,_x=dx,vx=jo,yx=Fo,Ex=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:ux(e,r,t[r],n);return e},bx=la,Tx=bd,Sx=Ca,wx=Lf,Cx=O,Rx=$e,Ix=Zt,Nx=ur,Ox=rn,Ax=ne,kx=fr,xx=yo,Px=V,Dx=Bp,Lx=Pp,Mx=zf,jx=bh,Ux=pt("iterator"),Fx="URLSearchParams",Bx=Fx+"Iterator",Vx=Sx.set,Gx=Sx.getterFor(Fx),Hx=Sx.getterFor(Bx),Wx=Object.getOwnPropertyDescriptor,zx=function(e){if(!gx)return px[e];var t=Wx(px,e);return t&&t.value},qx=zx("fetch"),Kx=zx("Request"),Yx=zx("Headers"),Jx=Kx&&Kx.prototype,Xx=Yx&&Yx.prototype,Zx=px.RegExp,Qx=px.TypeError,$x=px.decodeURIComponent,eP=px.encodeURIComponent,tP=mx("".charAt),nP=mx([].join),rP=mx([].push),iP=mx("".replace),sP=mx([].shift),oP=mx([].splice),aP=mx("".split),cP=mx("".slice),lP=/\+/g,dP=Array(4),uP=function(e){return dP[e-1]||(dP[e-1]=Zx("((?:%[\\da-f]{2}){"+e+"})","gi"))},hP=function(e){try{return $x(e)}catch(t){return e}},pP=function(e){var t=iP(e,lP," "),n=4;try{return $x(t)}catch(e){for(;n;)t=iP(t,uP(n--),hP);return t}},fP=/[!'()~]|%20/g,mP={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},gP=function(e){return mP[e]},_P=function(e){return iP(eP(e),fP,gP)},vP=Tx((function(e,t){Vx(this,{type:Bx,iterator:Dx(Gx(e).entries),kind:t})}),"Iterator",(function(){var e=Hx(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),yP=function(e){this.entries=[],this.url=null,void 0!==e&&(Ax(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===tP(e,0)?cP(e,1):e:kx(e)))};yP.prototype={type:Fx,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,s,o,a,c=Lx(e);if(c)for(n=(t=Dx(e,c)).next;!(r=fx(n,t)).done;){if(s=(i=Dx(Ox(r.value))).next,(o=fx(s,i)).done||(a=fx(s,i)).done||!fx(s,i).done)throw Qx("Expected sequence with length 2");rP(this.entries,{key:kx(o.value),value:kx(a.value)})}else for(var l in e)Rx(e,l)&&rP(this.entries,{key:l,value:kx(e[l])})},parseQuery:function(e){if(e)for(var t,n,r=aP(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=aP(t,"="),rP(this.entries,{key:pP(sP(n)),value:pP(nP(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],rP(n,_P(e.key)+"="+_P(e.value));return nP(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var EP=function(){wx(this,bP);var e=Vx(this,new yP(arguments.length>0?arguments[0]:void 0));gx||(this.size=e.entries.length)},bP=EP.prototype;if(Ex(bP,{append:function(e,t){var n=Gx(this);Mx(arguments.length,2),rP(n.entries,{key:kx(e),value:kx(t)}),gx||this.length++,n.updateURL()},delete:function(e){for(var t=Gx(this),n=Mx(arguments.length,1),r=t.entries,i=kx(e),s=n<2?void 0:arguments[1],o=void 0===s?s:kx(s),a=0;a<r.length;){var c=r[a];if(c.key!==i||void 0!==o&&c.value!==o)a++;else if(oP(r,a,1),void 0!==o)break}gx||(this.size=r.length),t.updateURL()},get:function(e){var t=Gx(this).entries;Mx(arguments.length,1);for(var n=kx(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=Gx(this).entries;Mx(arguments.length,1);for(var n=kx(e),r=[],i=0;i<t.length;i++)t[i].key===n&&rP(r,t[i].value);return r},has:function(e){for(var t=Gx(this).entries,n=Mx(arguments.length,1),r=kx(e),i=n<2?void 0:arguments[1],s=void 0===i?i:kx(i),o=0;o<t.length;){var a=t[o++];if(a.key===r&&(void 0===s||a.value===s))return!0}return!1},set:function(e,t){var n=Gx(this);Mx(arguments.length,1);for(var r,i=n.entries,s=!1,o=kx(e),a=kx(t),c=0;c<i.length;c++)(r=i[c]).key===o&&(s?oP(i,c--,1):(s=!0,r.value=a));s||rP(i,{key:o,value:a}),gx||(this.size=i.length),n.updateURL()},sort:function(){var e=Gx(this);jx(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=Gx(this).entries,r=Ix(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new vP(this,"keys")},values:function(){return new vP(this,"values")},entries:function(){return new vP(this,"entries")}},{enumerable:!0}),vx(bP,Ux,bP.entries,{name:"entries"}),vx(bP,"toString",(function(){return Gx(this).serialize()}),{enumerable:!0}),gx&&yx(bP,"size",{get:function(){return Gx(this).entries.length},configurable:!0,enumerable:!0}),bx(EP,Fx),hx({global:!0,constructor:!0,forced:!_x},{URLSearchParams:EP}),!_x&&Cx(Yx)){var TP=mx(Xx.has),SP=mx(Xx.set),wP=function(e){if(Ax(e)){var t,n=e.body;if(Nx(n)===Fx)return t=e.headers?new Yx(e.headers):new Yx,TP(t,"content-type")||SP(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),xx(e,{body:Px(0,kx(n)),headers:Px(0,t)})}return e};if(Cx(qx)&&hx({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return qx(e,arguments.length>1?wP(arguments[1]):{})}}),Cx(Kx)){var CP=function(e){return wx(this,Jx),new Kx(e,arguments.length>1?wP(arguments[1]):{})};Jx.constructor=CP,CP.prototype=Jx,hx({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:CP})}}var RP,IP={URLSearchParams:EP,getState:Gx},NP=k,OP=d,AP=D,kP=i,xP=Ks,PP=Lo,DP=L,LP=Xe,MP=q,jP=Object.assign,UP=Object.defineProperty,FP=OP([].concat),BP=!jP||kP((function(){if(NP&&1!==jP({b:1},jP(UP({},"a",{enumerable:!0,get:function(){UP(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=jP({},e)[n]||xP(jP({},t)).join("")!=r}))?function(e,t){for(var n=LP(e),r=arguments.length,i=1,s=PP.f,o=DP.f;r>i;)for(var a,c=MP(arguments[i++]),l=s?FP(xP(c),s(c)):xP(c),d=l.length,u=0;d>u;)a=l[u++],NP&&!AP(o,c,a)||(n[a]=c[a]);return n}:jP,VP=rn,GP=Wp,HP=Zt,WP=D,zP=Xe,qP=function(e,t,n,r){try{return r?t(VP(n)[0],n[1]):t(n)}catch(t){GP(e,"throw",t)}},KP=Ip,YP=us,JP=Gn,XP=Ki,ZP=Bp,QP=Pp,$P=Array,eD=d,tD=2147483647,nD=/[^\0-\u007E]/,rD=/[.\u3002\uFF0E\uFF61]/g,iD="Overflow: input needs wider integers to process",sD=RangeError,oD=eD(rD.exec),aD=Math.floor,cD=String.fromCharCode,lD=eD("".charCodeAt),dD=eD([].join),uD=eD([].push),hD=eD("".replace),pD=eD("".split),fD=eD("".toLowerCase),mD=function(e){return e+22+75*(e<26)},gD=function(e,t,n){var r=0;for(e=n?aD(e/700):e>>1,e+=aD(e/t);e>455;)e=aD(e/35),r+=36;return aD(r+36*e/(e+38))},_D=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=lD(e,n++);if(i>=55296&&i<=56319&&n<r){var s=lD(e,n++);56320==(64512&s)?uD(t,((1023&i)<<10)+(1023&s)+65536):(uD(t,i),n--)}else uD(t,i)}return t}(e);var n,r,i=e.length,s=128,o=0,a=72;for(n=0;n<e.length;n++)(r=e[n])<128&&uD(t,cD(r));var c=t.length,l=c;for(c&&uD(t,"-");l<i;){var d=tD;for(n=0;n<e.length;n++)(r=e[n])>=s&&r<d&&(d=r);var u=l+1;if(d-s>aD((tD-o)/u))throw sD(iD);for(o+=(d-s)*u,s=d,n=0;n<e.length;n++){if((r=e[n])<s&&++o>tD)throw sD(iD);if(r==s){for(var h=o,p=36;;){var f=p<=a?1:p>=a+26?26:p-a;if(h<f)break;var m=h-f,g=36-f;uD(t,cD(mD(f+m%g))),h=aD(m/g),p+=36}uD(t,cD(mD(h))),a=gD(o,u,l==c),o=0,l++}}o++,s++}return dD(t,"")},vD=An,yD=k,ED=dx,bD=p,TD=Zt,SD=d,wD=jo,CD=Fo,RD=Lf,ID=$e,ND=BP,OD=function(e){var t=zP(e),n=YP(this),r=arguments.length,i=r>1?arguments[1]:void 0,s=void 0!==i;s&&(i=HP(i,r>2?arguments[2]:void 0));var o,a,c,l,d,u,h=QP(t),p=0;if(!h||this===$P&&KP(h))for(o=JP(t),a=n?new this(o):$P(o);o>p;p++)u=s?i(t[p],p):t[p],XP(a,p,u);else for(d=(l=ZP(t,h)).next,a=n?new this:[];!(c=WP(d,l)).done;p++)u=s?qP(l,i,[c.value,p],!0):c.value,XP(a,p,u);return a.length=p,a},AD=Oo,kD=qu.codeAt,xD=function(e){var t,n,r=[],i=pD(hD(fD(e),rD,"."),".");for(t=0;t<i.length;t++)n=i[t],uD(r,oD(nD,n)?"xn--"+_D(n):n);return dD(r,".")},PD=fr,DD=la,LD=zf,MD=IP,jD=Ca,UD=jD.set,FD=jD.getterFor("URL"),BD=MD.URLSearchParams,VD=MD.getState,GD=bD.URL,HD=bD.TypeError,WD=bD.parseInt,zD=Math.floor,qD=Math.pow,KD=SD("".charAt),YD=SD(/./.exec),JD=SD([].join),XD=SD(1..toString),ZD=SD([].pop),QD=SD([].push),$D=SD("".replace),eL=SD([].shift),tL=SD("".split),nL=SD("".slice),rL=SD("".toLowerCase),iL=SD([].unshift),sL="Invalid scheme",oL="Invalid host",aL="Invalid port",cL=/[a-z]/i,lL=/[\d+-.a-z]/i,dL=/\d/,uL=/^0x/i,hL=/^[0-7]+$/,pL=/^\d+$/,fL=/^[\da-f]+$/i,mL=/[\0\t\n\r #%/:<>?@[\\\]^|]/,gL=/[\0\t\n\r #/:<>?@[\\\]^|]/,_L=/^[\u0000-\u0020]+/,vL=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,yL=/[\t\n\r]/g,EL=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)iL(t,e%256),e=zD(e/256);return JD(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,s=0;s<8;s++)0!==e[s]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=s),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=XD(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},bL={},TL=ND({},bL,{" ":1,'"':1,"<":1,">":1,"`":1}),SL=ND({},TL,{"#":1,"?":1,"{":1,"}":1}),wL=ND({},SL,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),CL=function(e,t){var n=kD(e,0);return n>32&&n<127&&!ID(t,e)?e:encodeURIComponent(e)},RL={ftp:21,file:null,http:80,https:443,ws:80,wss:443},IL=function(e,t){var n;return 2==e.length&&YD(cL,KD(e,0))&&(":"==(n=KD(e,1))||!t&&"|"==n)},NL=function(e){var t;return e.length>1&&IL(nL(e,0,2))&&(2==e.length||"/"===(t=KD(e,2))||"\\"===t||"?"===t||"#"===t)},OL=function(e){return"."===e||"%2e"===rL(e)},AL={},kL={},xL={},PL={},DL={},LL={},ML={},jL={},UL={},FL={},BL={},VL={},GL={},HL={},WL={},zL={},qL={},KL={},YL={},JL={},XL={},ZL=function(e,t,n){var r,i,s,o=PD(e);if(t){if(i=this.parse(o))throw HD(i);this.searchParams=null}else{if(void 0!==n&&(r=new ZL(n,!0)),i=this.parse(o,null,r))throw HD(i);(s=VD(new BD)).bindURL(this),this.searchParams=s}};ZL.prototype={type:"URL",parse:function(e,t,n){var r,i,s,o,a,c=this,l=t||AL,d=0,u="",h=!1,p=!1,f=!1;for(e=PD(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=$D(e,_L,""),e=$D(e,vL,"$1")),e=$D(e,yL,""),r=OD(e);d<=r.length;){switch(i=r[d],l){case AL:if(!i||!YD(cL,i)){if(t)return sL;l=xL;continue}u+=rL(i),l=kL;break;case kL:if(i&&(YD(lL,i)||"+"==i||"-"==i||"."==i))u+=rL(i);else{if(":"!=i){if(t)return sL;u="",l=xL,d=0;continue}if(t&&(c.isSpecial()!=ID(RL,u)||"file"==u&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=u,t)return void(c.isSpecial()&&RL[c.scheme]==c.port&&(c.port=null));u="","file"==c.scheme?l=HL:c.isSpecial()&&n&&n.scheme==c.scheme?l=PL:c.isSpecial()?l=jL:"/"==r[d+1]?(l=DL,d++):(c.cannotBeABaseURL=!0,QD(c.path,""),l=YL)}break;case xL:if(!n||n.cannotBeABaseURL&&"#"!=i)return sL;if(n.cannotBeABaseURL&&"#"==i){c.scheme=n.scheme,c.path=AD(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=XL;break}l="file"==n.scheme?HL:LL;continue;case PL:if("/"!=i||"/"!=r[d+1]){l=LL;continue}l=UL,d++;break;case DL:if("/"==i){l=FL;break}l=KL;continue;case LL:if(c.scheme=n.scheme,i==RP)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=AD(n.path),c.query=n.query;else if("/"==i||"\\"==i&&c.isSpecial())l=ML;else if("?"==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=AD(n.path),c.query="",l=JL;else{if("#"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=AD(n.path),c.path.length--,l=KL;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=AD(n.path),c.query=n.query,c.fragment="",l=XL}break;case ML:if(!c.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=KL;continue}l=FL}else l=UL;break;case jL:if(l=UL,"/"!=i||"/"!=KD(u,d+1))continue;d++;break;case UL:if("/"!=i&&"\\"!=i){l=FL;continue}break;case FL:if("@"==i){h&&(u="%40"+u),h=!0,s=OD(u);for(var m=0;m<s.length;m++){var g=s[m];if(":"!=g||f){var _=CL(g,wL);f?c.password+=_:c.username+=_}else f=!0}u=""}else if(i==RP||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(h&&""==u)return"Invalid authority";d-=OD(u).length+1,u="",l=BL}else u+=i;break;case BL:case VL:if(t&&"file"==c.scheme){l=zL;continue}if(":"!=i||p){if(i==RP||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(c.isSpecial()&&""==u)return oL;if(t&&""==u&&(c.includesCredentials()||null!==c.port))return;if(o=c.parseHost(u))return o;if(u="",l=qL,t)return;continue}"["==i?p=!0:"]"==i&&(p=!1),u+=i}else{if(""==u)return oL;if(o=c.parseHost(u))return o;if(u="",l=GL,t==VL)return}break;case GL:if(!YD(dL,i)){if(i==RP||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()||t){if(""!=u){var v=WD(u,10);if(v>65535)return aL;c.port=c.isSpecial()&&v===RL[c.scheme]?null:v,u=""}if(t)return;l=qL;continue}return aL}u+=i;break;case HL:if(c.scheme="file","/"==i||"\\"==i)l=WL;else{if(!n||"file"!=n.scheme){l=KL;continue}if(i==RP)c.host=n.host,c.path=AD(n.path),c.query=n.query;else if("?"==i)c.host=n.host,c.path=AD(n.path),c.query="",l=JL;else{if("#"!=i){NL(JD(AD(r,d),""))||(c.host=n.host,c.path=AD(n.path),c.shortenPath()),l=KL;continue}c.host=n.host,c.path=AD(n.path),c.query=n.query,c.fragment="",l=XL}}break;case WL:if("/"==i||"\\"==i){l=zL;break}n&&"file"==n.scheme&&!NL(JD(AD(r,d),""))&&(IL(n.path[0],!0)?QD(c.path,n.path[0]):c.host=n.host),l=KL;continue;case zL:if(i==RP||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&IL(u))l=KL;else if(""==u){if(c.host="",t)return;l=qL}else{if(o=c.parseHost(u))return o;if("localhost"==c.host&&(c.host=""),t)return;u="",l=qL}continue}u+=i;break;case qL:if(c.isSpecial()){if(l=KL,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=RP&&(l=KL,"/"!=i))continue}else c.fragment="",l=XL;else c.query="",l=JL;break;case KL:if(i==RP||"/"==i||"\\"==i&&c.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(a=rL(a=u))||"%2e."===a||".%2e"===a||"%2e%2e"===a?(c.shortenPath(),"/"==i||"\\"==i&&c.isSpecial()||QD(c.path,"")):OL(u)?"/"==i||"\\"==i&&c.isSpecial()||QD(c.path,""):("file"==c.scheme&&!c.path.length&&IL(u)&&(c.host&&(c.host=""),u=KD(u,0)+":"),QD(c.path,u)),u="","file"==c.scheme&&(i==RP||"?"==i||"#"==i))for(;c.path.length>1&&""===c.path[0];)eL(c.path);"?"==i?(c.query="",l=JL):"#"==i&&(c.fragment="",l=XL)}else u+=CL(i,SL);break;case YL:"?"==i?(c.query="",l=JL):"#"==i?(c.fragment="",l=XL):i!=RP&&(c.path[0]+=CL(i,bL));break;case JL:t||"#"!=i?i!=RP&&("'"==i&&c.isSpecial()?c.query+="%27":c.query+="#"==i?"%23":CL(i,bL)):(c.fragment="",l=XL);break;case XL:i!=RP&&(c.fragment+=CL(i,TL))}d++}},parseHost:function(e){var t,n,r;if("["==KD(e,0)){if("]"!=KD(e,e.length-1))return oL;if(t=function(e){var t,n,r,i,s,o,a,c=[0,0,0,0,0,0,0,0],l=0,d=null,u=0,h=function(){return KD(e,u)};if(":"==h()){if(":"!=KD(e,1))return;u+=2,d=++l}for(;h();){if(8==l)return;if(":"!=h()){for(t=n=0;n<4&&YD(fL,h());)t=16*t+WD(h(),16),u++,n++;if("."==h()){if(0==n)return;if(u-=n,l>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;u++}if(!YD(dL,h()))return;for(;YD(dL,h());){if(s=WD(h(),10),null===i)i=s;else{if(0==i)return;i=10*i+s}if(i>255)return;u++}c[l]=256*c[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==h()){if(u++,!h())return}else if(h())return;c[l++]=t}else{if(null!==d)return;u++,d=++l}}if(null!==d)for(o=l-d,l=7;0!=l&&o>0;)a=c[l],c[l--]=c[d+o-1],c[d+--o]=a;else if(8!=l)return;return c}(nL(e,1,-1)),!t)return oL;this.host=t}else if(this.isSpecial()){if(e=xD(e),YD(mL,e))return oL;if(t=function(e){var t,n,r,i,s,o,a,c=tL(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(s=10,i.length>1&&"0"==KD(i,0)&&(s=YD(uL,i)?16:8,i=nL(i,8==s?1:2)),""===i)o=0;else{if(!YD(10==s?pL:8==s?hL:fL,i))return e;o=WD(i,s)}QD(n,o)}for(r=0;r<t;r++)if(o=n[r],r==t-1){if(o>=qD(256,5-t))return null}else if(o>255)return null;for(a=ZD(n),r=0;r<n.length;r++)a+=n[r]*qD(256,3-r);return a}(e),null===t)return oL;this.host=t}else{if(YD(gL,e))return oL;for(t="",n=OD(e),r=0;r<n.length;r++)t+=CL(n[r],bL);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return ID(RL,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&IL(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,s=e.port,o=e.path,a=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=EL(i),null!==s&&(l+=":"+s)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?o[0]:o.length?"/"+JD(o,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw HD(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new QL(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+EL(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(PD(e)+":",AL)},getUsername:function(){return this.username},setUsername:function(e){var t=OD(PD(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=CL(t[n],wL)}},getPassword:function(){return this.password},setPassword:function(e){var t=OD(PD(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=CL(t[n],wL)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?EL(e):EL(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,BL)},getHostname:function(){var e=this.host;return null===e?"":EL(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,VL)},getPort:function(){var e=this.port;return null===e?"":PD(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=PD(e))?this.port=null:this.parse(e,GL))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+JD(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,qL))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=PD(e))?this.query=null:("?"==KD(e,0)&&(e=nL(e,1)),this.query="",this.parse(e,JL)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=PD(e))?("#"==KD(e,0)&&(e=nL(e,1)),this.fragment="",this.parse(e,XL)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var QL=function(e){var t=RD(this,$L),n=LD(arguments.length,1)>1?arguments[1]:void 0,r=UD(t,new ZL(e,!1,n));yD||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},$L=QL.prototype,eM=function(e,t){return{get:function(){return FD(this)[e]()},set:t&&function(e){return FD(this)[t](e)},configurable:!0,enumerable:!0}};if(yD&&(CD($L,"href",eM("serialize","setHref")),CD($L,"origin",eM("getOrigin")),CD($L,"protocol",eM("getProtocol","setProtocol")),CD($L,"username",eM("getUsername","setUsername")),CD($L,"password",eM("getPassword","setPassword")),CD($L,"host",eM("getHost","setHost")),CD($L,"hostname",eM("getHostname","setHostname")),CD($L,"port",eM("getPort","setPort")),CD($L,"pathname",eM("getPathname","setPathname")),CD($L,"search",eM("getSearch","setSearch")),CD($L,"searchParams",eM("getSearchParams")),CD($L,"hash",eM("getHash","setHash"))),wD($L,"toJSON",(function(){return FD(this).serialize()}),{enumerable:!0}),wD($L,"toString",(function(){return FD(this).serialize()}),{enumerable:!0}),GD){var tM=GD.createObjectURL,nM=GD.revokeObjectURL;tM&&wD(QL,"createObjectURL",TD(tM,GD)),nM&&wD(QL,"revokeObjectURL",TD(nM,GD))}DD(QL,"URL"),vD({global:!0,constructor:!0,forced:!ED,sham:!yD},{URL:QL});var rM=An,iM=i,sM=zf,oM=fr,aM=dx,cM=ce("URL");rM({target:"URL",stat:!0,forced:!(aM&&iM((function(){cM.canParse()})))},{canParse:function(e){var t=sM(arguments.length,1),n=oM(e),r=t<2||void 0===arguments[1]?void 0:oM(arguments[1]);try{return!!new cM(n,r)}catch(e){return!1}}});var lM=r(re.URL);function dM(){const e=new Blob([atob("ZnVuY3Rpb24gZShlKXtjb25zdCB0PW5ldyBEYXRhVmlldyhlLmRhdGEpO2lmKDA9PT10LmdldFVpbnQ4KDApJiYwPT09dC5nZXRVaW50OCgxKSYmMD09PXQuZ2V0VWludDgoMikmJjE9PT10LmdldFVpbnQ4KDMpJiY2PT09dC5nZXRVaW50OCg0KSl7bGV0IG49NixyPTAsbz0wO2Zvcig7MjU1PT09KG89dC5nZXRVaW50OChuKyspKTspcis9MjU1O3IrPW87Y29uc3QgYT1mdW5jdGlvbihlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLG89W10sYT0wO2Zvcig7YTxuOylhKzM8biYmMD09PXJbYV0mJjA9PT1yW2ErMV0mJjM9PT1yW2ErMl0mJigwPT09clthKzNdfHwxPT09clthKzNdfHwyPT09clthKzNdfHwzPT09clthKzNdKT8oby5wdXNoKHJbYV0sclthKzFdLHJbYSszXSksYSs9NCk6KG8ucHVzaChyW2FdKSxhKyspO3JldHVybiBuZXcgVWludDhBcnJheShvKX0oZS5kYXRhLG4scik7cmV0dXJuIG5ldyBVaW50OEFycmF5KGEpfXJldHVybiBudWxsfWZ1bmN0aW9uIHQoZSx0KXtjb25zdCBuPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZS5sZW5ndGg7bGV0IG49W10scj0wO2Zvcig7cjx0OylyKzI8dCYmMD09PWVbcl0mJjA9PT1lW3IrMV0mJigwPT09ZVtyKzJdfHwxPT09ZVtyKzJdfHwyPT09ZVtyKzJdfHwzPT09ZVtyKzJdKT8obi5wdXNoKGVbcl0sZVtyKzFdLDMsZVtyKzJdKSxyKz0zKToobi5wdXNoKGVbcl0pLHIrKyk7cmV0dXJuIG5ldyBVaW50OEFycmF5KG4pfSh0KSxyPW4ubGVuZ3RoLG89TWF0aC5mbG9vcihyLzI1NSksYT1yJTI1NSxzPW5ldyBVaW50OEFycmF5KDYrbysxK3IrZS5ieXRlTGVuZ3RoKTtzWzBdPTAsc1sxXT0wLHNbMl09MCxzWzNdPTEsc1s0XT02LHNbNV09MTAxO2xldCBpPTA7Zm9yKDtpPG87KXNbNitpXT0yNTUsaSsrO3JldHVybiBzWzYraV09YSxpKysscy5zZXQobiw2K2kpLHMuc2V0KG5ldyBVaW50OEFycmF5KGUpLDYraStyKSxzLmJ1ZmZlcn1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlNhZmFyaSIpPi0xJiYtMT09PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiQ2hyb21lIikmJihzZWxmLm9ucnRjdHJhbnNmb3JtPW49Pntjb25zdCByPW4udHJhbnNmb3JtZXI7bGV0IG89W107ci5vcHRpb25zLnBvcnQub25tZXNzYWdlPWU9PntlLmRhdGEuc2VpJiZvLnB1c2goZS5kYXRhLnNlaSl9LHNlbGYucG9zdE1lc3NhZ2UoInN0YXJ0ZWQiKTtjb25zdCBhPXIucmVhZGFibGUuZ2V0UmVhZGVyKCkscz1yLndyaXRhYmxlLmdldFdyaXRlcigpOyJyeCI9PT1yLm9wdGlvbnMubmFtZT9mdW5jdGlvbiB0KG4pe2EucmVhZCgpLnRoZW4oKHI9PntpZighci5kb25lKXtpZihyLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpe2NvbnN0IHQ9ZShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7YS5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1vLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout((()=>lM.revokeObjectURL(e)),0),new Worker(lM.createObjectURL(e))}const uM=new Map,hM=new Map;async function pM(e){if(!SR().supportWebRTCEncodedTransform)return void VT.warning("browser not support audio encoded transform");if(hM.has(e))return;const t={track:e.track};if(Rv()){if(!e.createEncodedStreams)return void VT.warning("browser not support createEncodedStreams() API");let r=null;try{r=e.createEncodedStreams()}catch(e){return void VT.error("create audio-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(r,i){t.controller||(t.controller=i),e.track&&e.track.id!==t.track.id&&(VT.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n)),i.enqueue(r)}});r.readable.pipeThrough(i).pipeTo(r.writable)}else if(Iv()){if("undefined"==typeof RTCRtpScriptTransform)return void VT.warning("browser not support RTCRtpScriptTransform");const r=dM(),i=new MessageChannel;await new cv((e=>r.onmessage=t=>{"registered"===t.data&&e(void 0)}));const s=new RTCRtpScriptTransform(r,{name:"rx",port:i.port2},[i.port2]);e.transform=s,await new cv((e=>r.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=r=>{var i;r.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==t.track.id&&(VT.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n))},t.worker=r}function n(){e.track.removeEventListener("ended",n),function(e){const t=hM.get(e);if(t){hM.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){VT.warning(e&&e.message)}}}(e)}hM.set(e,t),e.track.addEventListener("ended",n)}function fM(e){const t=new DataView(e.data);if(0===t.getUint8(0)&&0===t.getUint8(1)&&0===t.getUint8(2)&&1===t.getUint8(3)&&6===t.getUint8(4)){let n=6,r=0,i=0;for(;255===(i=t.getUint8(n++));)r+=255;r+=i;const s=function(e,t,n){let r=new Uint8Array(e,t,n),i=[],s=0;for(;s<n;)s+3<n&&0===r[s]&&0===r[s+1]&&3===r[s+2]&&(0===r[s+3]||1===r[s+3]||2===r[s+3]||3===r[s+3])?(i.push(r[s],r[s+1],r[s+3]),s+=4):(i.push(r[s]),s++);return new Uint8Array(i)}(e.data,n,r);return new Uint8Array(s)}return null}function mM(e,t){const n=function(e){const t=e.length;let n=[],r=0;for(;r<t;)r+2<t&&0===e[r]&&0===e[r+1]&&(0===e[r+2]||1===e[r+2]||2===e[r+2]||3===e[r+2])?(n.push(e[r],e[r+1],3,e[r+2]),r+=3):(n.push(e[r]),r++);return new Uint8Array(n)}(t),r=n.length,i=Math.floor(r/255),s=r%255,o=new Uint8Array(6+i+1+r+e.byteLength);o[0]=0,o[1]=0,o[2]=0,o[3]=1,o[4]=6,o[5]=101;let a=0;for(;a<i;)o[6+a]=255,a++;return o[6+a]=s,a++,o.set(n,6+a),o.set(new Uint8Array(e),6+a+r),o.buffer}const gM=new Map,_M=new Map;async function vM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!SR().supportWebRTCEncodedTransform)return void VT.warning("browser not support video encoded transform");if(!e.track)return;if(_M.has(e)){const n=_M.get(e);return void(n&&(n.onSei=t.onSei))}const n={track:e.track,onSei:t.onSei};if(Rv()){if(!e.createEncodedStreams)return void VT.warning("browser not support createEncodedStreams() API");let t=null;try{t=e.createEncodedStreams()}catch(e){return void VT.error("create video-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(t,i){n.controller||(n.controller=i),e.track&&e.track.id!==n.track.id&&(VT.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const s=fM(t);s&&n.onSei&&n.onSei(s),i.enqueue(t)}});t.readable.pipeThrough(i).pipeTo(t.writable)}else if(Iv()){if("undefined"==typeof RTCRtpScriptTransform)return void VT.warning("browser not support RTCRtpScriptTransform");const t=dM(),i=new MessageChannel;await new cv((e=>t.onmessage=t=>{"registered"===t.data&&e(void 0)}));const s=new RTCRtpScriptTransform(t,{name:"rx",port:i.port2},[i.port2]);e.transform=s,await new cv((e=>t.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id?(VT.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r)):t.data.sei&&n.onSei&&n.onSei(t.data.sei)},n.worker=t}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}!function(e){const t=_M.get(e);if(t){_M.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){VT.warning(e&&e.message)}}}(e)}_M.set(e,n),e.track.addEventListener("ended",r)}!function(){const e=Ev();TR.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),TR.getStreamFromExtension=e.name===mv.CHROME&&Number(e.version)>34,TR.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),TR.supportMinBitrate=e.name===mv.CHROME||e.name===mv.EDGE,TR.supportSetRtpSenderParameters=function(){const e=Ev();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Vv()||!(!Iv()&&!Sv())||e.name===mv.FIREFOX&&Number(e.version)>=64)}(),e.name===mv.SAFARI&&(Number(e.version)>=14?TR.supportDualStream=!0:TR.supportDualStream=!1),TR.webAudioMediaStreamDest=function(){const e=Ev();return!(e.name===mv.SAFARI&&Number(e.version)<12)}(),TR.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,TR.supportWebGL="undefined"!=typeof WebGLRenderingContext,TR.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Vv()||(TR.webAudioWithAEC=!0),TR.supportShareAudio=function(){const e=Ev();return(e.os===fv.WIN_10||e.os===fv.WIN_81||e.os===fv.WIN_7||e.os===fv.LINUX||e.os===fv.MAC_OS||e.os===fv.CHROMIUM_OS)&&e.name===mv.CHROME&&Number(e.version)>=74}(),TR.supportDataChannel=!!(Av(76)||function(e){const t=Ev();return!(t.name!==mv.FIREFOX||!t.osVersion)&&Number(t.version)>=e}(68)||function(e){const t=Ev();return!(t.name!==mv.SAFARI||!t.osVersion)&&Number(t.version)>=e}(14)),TR.supportPCSetConfiguration=function(){const e=window.RTCPeerConnection;return!Nv()&&!!e&&e.prototype.setConfiguration instanceof Function}(),TR.supportWebRTCEncodedTransform=function(){const e=Ev();return"Chrome"===e.name&&Number(e.version)>=86||"Safari"===e.name&&Number(e.version)>=15}(),TR.supportWebRTCInsertableStream=function(){const e=Ev();return(e.name===mv.CHROME||e.name===mv.EDGE)&&Number(e.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),zy((()=>{TR.supportDualStreamEncoding=function(){const e=Ev();return!!bT("DISABLE_WEBAUDIO")||"Safari"===e.name&&Number(e.version)>=14||!!("Chrome"===e.name&&/Windows/i.test(e.os||"")&&Number(e.version)>=100&&bT("CHROME_DUAL_STREAM_USE_ENCODING"))}(),VT.info("browser compatibility",JSON.stringify(TR),JSON.stringify(e))}))}();class yM extends ly{constructor(){super(...arguments),sh(this,"resultStorage",new Map)}setLocalAudioStats(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}setLocalVideoStats(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}setRemoteAudioStats(e,t){const n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))}record(e,t,n){if(bT("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const r=this.resultStorage.get(e);if(r&&(r.result.push(n),r.result.length>=5)){var i;const n=Nr(i=r.result).call(i,!0);r.isPrevNormal&&!n&&this.emit("exception",EM[e],e,t),!r.isPrevNormal&&n&&this.emit("exception",EM[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=n,r.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof rN&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=EC(t._encoderConfig.frameRate));const r=e.captureFrameRate;return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof rN&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const EM={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},bM=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}measureFromPublishStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}};function TM(e,t){this.v=e,this.k=t}function SM(e){return new TM(e,0)}var wM=av,CM=hg;An({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var e=CM.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var RM=hg,IM=Km;An({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=RM.f(this),n=IM(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var NM=r(wM),OM=Bo.f("asyncIterator"),AM=r(OM);function kM(e){var t,n;function r(t,n){try{var s=e[t](n),o=s.value,a=o instanceof TM;NM.resolve(a?o.v:o).then((function(n){if(a){var c="return"===t?"return":"next";if(!o.k||n.done)return r(c,n);n=e[c](n).value}i(s.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new NM((function(s,o){var a={key:e,arg:i,resolve:s,reject:o,next:null};n?n=n.next=a:(t=n=a,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function xM(e){return function(){return new kM(e.apply(this,arguments))}}kM.prototype["function"==typeof ju&&AM||"@@asyncIterator"]=function(){return this},kM.prototype.next=function(e){return this._invoke("next",e)},kM.prototype.throw=function(e){return this._invoke("throw",e)},kM.prototype.return=function(e){return this._invoke("return",e)};var PM=r(re.Object.getOwnPropertySymbols),DM=An,LM=Kn.indexOf,MM=Sh,jM=C([].indexOf),UM=!!jM&&1/jM([1],1,-0)<0;DM({target:"Array",proto:!0,forced:UM||!MM("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return UM?jM(this,e,t)||0:LM(this,e,t)}});var FM=Xn("Array").indexOf,BM=u,VM=FM,GM=Array.prototype,HM=r((function(e){var t=e.indexOf;return e===GM||BM(GM,e)&&t===GM.indexOf?VM:t})),WM=Xe,zM=Ks;An({target:"Object",stat:!0,forced:i((function(){zM(1)}))},{keys:function(e){return zM(WM(e))}});var qM=r(re.Object.keys);function KM(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=qM(e);for(r=0;r<s.length;r++)n=s[r],HM(t).call(t,n)>=0||(i[n]=e[n]);return i}(e,t);if(PM){var s=PM(e);for(r=0;r<s.length;r++)n=s[r],HM(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var YM={exports:{}};!function(e,t){e.exports=(()=>{var e={8:(e,t,n)=>{n.r(t),n.d(t,{Parser:()=>T,Printer:()=>I,parse:()=>k,print:()=>x});const r="\n",i="".concat("\r").concat(r),s=" ";let o;function a(e){return e>="0"&&e<="9"}function c(e){return e>="!"&&e<="~"}function l(e){return c(e)||e>="\x80"&&e<="\xff"}function d(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function u(e){return e>="1"&&e<="9"}function h(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function p(e){return"d"===e||"h"===e||"m"===e||"s"===e}function f(e){return e>"\x01"&&e<"\t"||e>"\v"&&e<"\f"||e>"\x0e"&&e<"\xff"}function m(e){return h(e)||a(e)||"+"===e||"/"===e}function g(e){return a(e)||h(e)||"+"===e||"/"===e||"-"===e||"_"===e}function _(e){return h(e)||a(e)||"+"===e||"/"===e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(o||(o={}));class b{consumeText(e,t){let n=t;for(;n<e.length;){const t=e[n];if("\0"===t||"\r"===t||t===r)break;n+=1}if(n-t==0)throw new Error("Invalid text, at ".concat(e));return n}consumeUnicastAddress(e,t,n){return this.consumeTill(e,t,s)}consumeOneOrMore(e,t,n){let r=t;for(;n(e[r]);)r++;if(r-t==0)throw new Error("Invalid rule at ".concat(t,"."));return r}consumeSpace(e,t){if(e[t]===s)return t+1;throw new Error("Invalid space at ".concat(t,"."))}consumeIP4Address(e,t){let n=t;for(let r=0;r<4;r++)if(n=this.consumeDecimalUChar(e,n),3!==r){if("."!==e[n])throw new Error("Invalid IP4 address.");n++}return n}consumeDecimalUChar(e,t){let n=t;for(let i=0;i<3&&a(e[n]);i++,n++);if(n-t==0)throw new Error("Invalid decimal uchar.");const r=parseInt(e.slice(t,n));if(r>=0&&r<=255)return n;throw new Error("Invalid decimal uchar")}consumeIP6Address(e,t){let n=this.consumeHexpart(e,t);return":"===e[n]?(n+=1,n=this.consumeIP4Address(e,n),n):n}consumeHexpart(e,t){let n=t;if(":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}if(n=this.consumeHexseq(e,n),":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}return n}consumeHexseq(e,t){let n=t;for(;n=this.consumeHex4(e,n),":"===e[n]&&":"!==e[n+1];)n+=1;return n}consumeHex4(e,t){let n=0;for(;n<4;n++)if(!((r=e[t+n])>="0"&&r<="9"||r>="a"&&r<="f"||r>="A"&&r<="F")){if(0===n)throw new Error("Invalid hex 4");break}var r;return t+n}consumeFQDN(e,t){let n=t;for(;a(e[n])||h(e[n])||"-"===e[n]||"."===e[n];)n+=1;if(n-t<4)throw new Error("Invalid FQDN");return n}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,l)}consumeMulticastAddress(e,t,n){switch(n){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(n){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const n=this.consumeHexpart(e,t);return"/"===e[n]?this.consumeInteger(e,n+1):n}consumeIP4MulticastAddress(e,t){let n=t+3;const r=e.slice(t,n),i=parseInt(r);if(i<224||i>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let s=0;s<3;s++){if("."!==e[n])throw new Error("Invalid IP4 multicast address.");n+=1,n=this.consumeDecimalUChar(e,n)}return"/"===e[n]&&(n+=1),n=this.consumeTTL(e,n),"/"===e[n]&&(n=this.consumeInteger(e,n)),n}consumeInteger(e,t){if(!u(e[t]))throw new Error("Invalid integer.");for(t+=1;a(e[t]);)t+=1;return t}consumeTTL(e,t){if("0"===e[t])return t+1;if(!u(e[t]))throw new Error("Invalid TTL.");t+=1;for(let n=0;n<2&&a(e[t]);n++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,d)}consumeTime(e,t){let n=t;if("0"===e[n])return n+1;for(u(e[n])&&(n+=1);a(e[n]);)n++;if(n-t<10)throw new Error("Invalid time");return n}consumeAddress(e,t){return this.consumeTill(e,t,s)}consumeTypedTime(e,t){let n=t;return n=this.consumeOneOrMore(e,n,a),p(e[n])?n+1:n}consumeRepeatInterval(e,t){if(!u(e[t]))throw new Error("Invalid repeat interval");for(t+=1;a(e[t]);)t+=1;return p(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,a)}consume(e,t,n){for(let r=0;r<n.length;r++){if(t+r>=e.length)throw new Error("consume exceeding value length");if(e[t+r]!==n[r])throw new Error("consume ".concat(n," failed at ").concat(r))}return t+n.length}consumeTill(e,t,n){let r=t;for(;r<e.length&&("string"!=typeof n||e[r]!==n)&&("function"!=typeof n||!n(e[r]));)r++;return r}}class T extends b{constructor(){super(),E(this,"records",[]),E(this,"currentLine",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter((e=>!!e.trim())).map(this.parseLine),this.currentLine=0;const n=this.parseVersion(),r=this.parseOrigin(),i=this.parseSessionName(),s=this.parseInformation(),o=this.parseUri(),a=this.parseEmail(),c=this.parsePhone(),l=this.parseConnection(),d=this.parseBandWidth(),u=this.parseTimeFields(),h=this.parseKey(),p=this.parseSessionAttribute(),f=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:n,origin:r,sessionName:i,information:s,uri:o,emails:a,phones:c,connection:l,bandwidths:d,timeFields:u,key:h,attributes:p,mediaDescriptions:f}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===r)return"\r"===e[t-1]?i:r;throw new Error("Invalid newline character.")}parseLine(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const n=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:n,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new w;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==o.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(t,(e=>d(e)&&":"!==e)),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,n.attValue=this.extractOneOrMore(t,f)),e.parse(n),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new C(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==o.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(e,(e=>d(e)&&":"!==e)),_cur:0};":"===e.value[e.cur]&&(e.cur+=1,n.attValue=this.extractOneOrMore(e,f)),t.parse(n),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===o.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const e=this.getCurrentRecord();if(e.type===o.ZONE_ADJUSTMENTS){const t=[];for(;;)try{const n=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let r=!1;"-"===e.value[e.cur]&&(r=!0,e.cur+=1);const i=this.extract(e,this.consumeTypedTime);t.push({time:n,typedTime:i,back:r})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==o.REPEAT)break;{const n=this.extract(t,this.consumeRepeatInterval),r=this.parseTypedTime(t);e.push({repeatInterval:n,typedTimes:r}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:n}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==o.BANDWIDTH)break;{const n=this.extractOneOrMore(t,d);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;const r=this.extractOneOrMore(t,a);e.push({bwtype:n,bandwidth:r}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==o.VERSION)throw new Error("first sdp record must be version");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,a));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==o.ORIGIN)throw new Error("second line of sdp must be origin");const t=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const s=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:n,sessVersion:r,nettype:i,addrtype:s,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===o.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==o.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===o.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==o.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==o.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===o.CONNECTION){const t=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const r=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:n,address:r}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let n=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,n+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const r=[];for(r.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,r.push(this.extract(e,this.consumeToken));if(0===r.length)throw new Error("Invalid proto");const i=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:n,protos:r,fmts:i}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===o.TIME;){const t=this.parseTime(),n=this.parseRepeat(),r=this.parseZone();e.push({time:t,repeats:n,zones:r})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===o.MEDIA;){const t=this.parseMedia(),n=this.parseInformation(),r=this.parseConnections(),i=this.parseBandWidth(),s=this.parseKey(),o=this.parseMediaAttributes(t);e.push({media:t,information:n,connections:r,bandwidths:i,key:s,attributes:o})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===o.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t}extract(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const s=t.call(this,e.value,e.cur,...r),o=e.value.slice(e.cur,s);return e.cur=s,o}extractOneOrMore(e,t){const n=this.consumeOneOrMore(e.value,e.cur,t),r=e.value.slice(e.cur,n);return e.cur=n,r}consumeSpaceForRecord(e){if(e.value[e.cur]!==s)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}class S extends b{constructor(){super(...arguments),E(this,"attributes",void 0),E(this,"digested",!1)}extractOneOrMore(e,t,n){const r=this.consumeOneOrMore(e.attValue,e._cur,t),i=e.attValue.slice(e._cur,r),[s,o]=n||[];if("number"==typeof s&&i.length<s)throw new Error("error in length, should be more or equal than ".concat(s," characters."));if("number"==typeof o&&i.length>o)throw new Error("error in length, should be less or equal than ".concat(o," characters."));return e._cur=r,i}consumeAttributeSpace(e){if(e.attValue[e._cur]!==s)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}extract(e,t){if(!e.attValue)throw new Error("Nothing to extract from attValue.");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const s=t.call(this,e.attValue,e._cur,...r),o=e.attValue.slice(e._cur,s);return e._cur=s,o}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let n=0;n<t.length;n++)if(t[n]!==e.attValue[e._cur+n])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,m,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,m,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,m));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:n})}parseExtmap(e){const t=this.extractOneOrMore(e,a);let n;"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),n=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeTill,s),i=y(y({entry:parseInt(t,10)},n&&{direction:n}),{},{extensionName:r});this.peekChar(e)===s&&(this.consumeAttributeSpace(e),i.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(i)}parseSetup(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}class w extends S{constructor(){super(...arguments),E(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===s;)this.consumeAttributeSpace(e),n.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:n})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,g)}parseIdentity(e){const t=this.extractOneOrMore(e,_),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===s;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");const r=this.extractOneOrMore(e,(e=>e!==s&&f(e)));n.push({name:t,value:r})}this.attributes.identities.push({assertionValue:t,extensions:n})}parseMsidSemantic(e){this.peekChar(e)===s&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}{const n=this.extract(e,this.consumeTill,s);t.identifierList.push(n)}}this.attributes.msidSemantic=t}}class C extends S{constructor(e){super(),E(this,"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}parseCandidate(e){const t=this.extractOneOrMore(e,m,[1,32]);this.consumeAttributeSpace(e);const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extractOneOrMore(e,a,[1,10]);this.consumeAttributeSpace(e);const o=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const l=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);const d={foundation:t,componentId:n,transport:r,priority:i,connectionAddress:o,port:l,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),d.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),d.relPort=this.extract(e,this.consumePort));this.peekChar(e)===s;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),d.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(d)}parseRemoteCandidate(e){const t=[];for(;;){const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumePort);t.push({componentId:n,connectionAddress:r,port:i});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");const r={encodingName:n,clockRate:this.extractOneOrMore(e,a)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),r.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const i=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));i?i.rtpMap=r:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:r,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,a);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,":");let r;":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),r=this.extract(e,this.consumeTill));const i=this.attributes.ssrcs.find((e=>e.ssrcId===parseInt(t,10)));i?i.attributes[n]=r:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[n]:r}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,s);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill),r={};n.split(";").forEach((e=>{let[t,n]=e.split("=");t=t.trim();const i="string"==typeof n?n.trim():null;"string"==typeof t&&t.length>0&&(r[t]=i)}));const i=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));i?i.fmtp={parameters:r}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:r}})}parseFmtParameters(e){const t={},n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");for(t[n]=r;";"===e.attValue[e._cur];){const n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");t[n]=r}return t}parseRtcpFb(e){let t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,s),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,s);let r;if("trr-int"===n)r={type:n,interval:this.extract(e,this.consumeTill)};else{const t={type:n};this.peekChar(e)===s&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===s&&(t.additional=this.extract(e,this.consumeTill))),r=t}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(r);else{const e=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));e?e.rtcpFeedbacks.push(r):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[r]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===s&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,d),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,d),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,d,[1,64])};this.peekChar(e)===s&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,d,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,(e=>h(e)||a(e)||"_"===e||"-"===e));this.consumeAttributeSpace(e);const n={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===s){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");const t=[];for(;;){const n=this.extract(e,this.consumeToken);t.push(n);try{this.extract(e,this.consume,",")}catch(e){break}}n.payloads=t,this.peekChar(e)===s&&this.extract(e,this.consume,s)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case"depend":{const r={type:t,rids:this.extract(e,this.consume,"=").split(",")};n.params.push(r);break}default:{const r={type:t};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),r.val=this.extract(e,this.consumeTill,";")),n.params.push(r)}}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(n)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,a,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,a,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);n.push(parseInt(t,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:n})}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class I{constructor(){R(this,"eol",i)}print(e,t){let n="";return t&&(this.eol=t),n+=this.printVersion(e.version),n+=this.printOrigin(e.origin),n+=this.printSessionName(e.sessionName),n+=this.printInformation(e.information),n+=this.printUri(e.uri),n+=this.printEmail(e.emails),n+=this.printPhone(e.phones),n+=this.printConnection(e.connection),n+=this.printBandwidth(e.bandwidths),n+=this.printTimeFields(e.timeFields),n+=this.printKey(e.key),n+=this.printSessionAttributes(e.attributes),n+=this.printMediaDescription(e.mediaDescriptions),n}printVersion(e){return"v=".concat(e).concat(this.eol)}printOrigin(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?"s=".concat(e).concat(this.eol):""}printInformation(e){return e?"i=".concat(e).concat(this.eol):""}printUri(e){return e?"u=".concat(e).concat(this.eol):""}printEmail(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printPhone(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printConnection(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}printBandwidth(e){let t="";for(const n of e)t+="b=".concat(n.bwtype,":").concat(n.bandwidth).concat(this.eol);return t}printTimeFields(e){let t="";for(const n of e){t+="t=".concat(n.time.startTime," ").concat(n.time.startTime).concat(this.eol);for(const e of n.repeats)t+="r=".concat(e.repeatInterval," ").concat(e.typedTimes.join(" ")).concat(this.eol);n.zoneAdjustments&&(t+="z=",t+="z=".concat(n.zoneAdjustments.map((e=>"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime))).join(" ")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?"k=".concat(e).concat(this.eol):""}printAttributes(e){let t="";for(const n of e)t+="a=".concat(n.attField).concat(n.attValue?":".concat(n.attValue):"").concat(this.eol);return t}printMediaDescription(e){let t="";for(const n of e)t+=this.printMedia(n.media),t+=this.printInformation(n.information),t+=this.printConnections(n.connections),t+=this.printBandwidth(n.bandwidths),t+=this.printKey(n.key),t+=this.printMediaAttributes(n);return t}printConnections(e){let t="";for(const n of e)t+=this.printConnection(n);return t}printMedia(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}printSessionAttributes(e){return new O(this.eol).print(e)}printMediaAttributes(e){return new A(this.eol).print(e)}}class N{constructor(e){R(this,"eol",void 0),this.eol=e}printIceUfrag(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?"":"a=ice-options:".concat(e.join(s)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map((e=>"a=fingerprint:".concat(e.hashFunction).concat(s).concat(e.fingerprint))).join(this.eol)+this.eol:""}printExtmap(e){return e.map((e=>"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(s).concat(e.extensionName).concat(e.extensionAttributes?"".concat(s).concat(e.extensionAttributes):"").concat(this.eol))).join("")}printSetup(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}printUnrecognized(e){return e.map((e=>"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(this.eol))).join("")}}class O extends N{print(e){let t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t="";return e.length>0&&(t+=e.map((e=>"a=group:".concat(e.semantic).concat(e.identificationTag.map((e=>"".concat(s).concat(e))).join("")).concat(this.eol))).join("")),t}printIceLite(e){return void 0===e?"":"a=ice-lite"+this.eol}printTlsId(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}printIdentity(e){return 0===e.length?"":e.map((e=>"a=identity:".concat(e.assertionValue).concat(e.extensions.map((e=>"".concat(s).concat(e.name).concat(e.value?"=".concat(e.value):"")))))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return"";let t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(s,"*"):e.identifierList.length>0&&(t+=e.identifierList.map((e=>"".concat(s).concat(e)))),t+this.eol}}class A extends N{print(e){const t=e.attributes;let n="";return n+=this.printRTCP(t.rtcp),n+=this.printIceUfrag(t.iceUfrag),n+=this.printIcePwd(t.icePwd),n+=this.printIceOptions(t.iceOptions),n+=this.printCandidates(t.candidates),n+=this.printRemoteCandidatesList(t.remoteCandidatesList),n+=this.printEndOfCandidates(t.endOfCandidates),n+=this.printFingerprints(t.fingerprints),n+=this.printSetup(t.setup),n+=this.printMid(t.mid),n+=this.printExtmap(t.extmaps),n+=this.printRTPRelated(t),n+=this.printPtime(t.ptime),n+=this.printMaxPtime(t.maxPtime),n+=this.printDirection(t.direction),n+=this.printSSRCGroups(t.ssrcGroups),n+=this.printSSRC(t.ssrcs),n+=this.printRTCPMux(t.rtcpMux),n+=this.printRTCPMuxOnly(t.rtcpMuxOnly),n+=this.printRTCPRsize(t.rtcpRsize),n+=this.printMSId(t.msids),n+=this.printImageattr(t.imageattr),n+=this.printRid(t.rids),n+=this.printSimulcast(t.simulcast),n+=this.printSCTPPort(t.sctpPort),n+=this.printMaxMessageSize(t.maxMessageSize),n+=this.printUnrecognized(t.unrecognized),n}printCandidates(e){return e.map((e=>"a=candidate:".concat(e.foundation).concat(s).concat(e.componentId).concat(s).concat(e.transport).concat(s).concat(e.priority).concat(s).concat(e.connectionAddress).concat(s).concat(e.port).concat(s,"typ").concat(s).concat(e.type).concat(e.relAddr?"".concat(s,"raddr").concat(s).concat(e.relAddr):"").concat(e.relPort?"".concat(s,"rport").concat(s).concat(e.relPort):"").concat(Object.keys(e.extension).map((t=>"".concat(s).concat(t).concat(s).concat(e.extension[t]))).join("")).concat(this.eol))).join("")}printRemoteCandidatesList(e){return e.map((e=>"a=remote-candidates:".concat(e.join(s)).concat(this.eol))).join("")}printEndOfCandidates(e){return void 0===e?"":"a=end-of-candidates"+this.eol}printRTPRelated(e){if(!e.payloads)return"";const t=e.payloads;let n="";n+=e.rtcpFeedbackWildcards.map((e=>this.printRTCPFeedback("*",e))).join("");for(const r of t)n+=this.printRtpMap(r.payloadType,r.rtpMap),n+=this.printFmtp(r.payloadType,r.fmtp),n+=r.rtcpFeedbacks.map((e=>this.printRTCPFeedback(r.payloadType,e))).join("");return n}printFmtp(e,t){if(!t)return"";const n=Object.keys(t.parameters);return 1===n.length&&null===t.parameters[n[0]]?"a=fmtp:".concat(e).concat(s).concat(n[0]).concat(this.eol):"a=fmtp:".concat(e).concat(s).concat(Object.keys(t.parameters).map((e=>"".concat(e,"=").concat(t.parameters[e]))).join(";")).concat(this.eol)}printRtpMap(e,t){return t?"a=rtpmap:".concat(e).concat(s).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(e,t){let n="a=rtcp-fb:".concat(e).concat(s),r=t;return"trr-int"===r.type?n+="ttr-int".concat(s).concat(r.interval):(n+="".concat(r.type),r.parameter&&(n+="".concat(s).concat(r.parameter),r.additional&&(n+="".concat(s).concat(r.additional)))),n+this.eol}printPtime(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}printDirection(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}printSSRC(e){return e.map((e=>Object.keys(e.attributes).map((t=>"a=ssrc:".concat(e.ssrcId.toString(10)).concat(s).concat(t).concat(e.attributes[t]?":".concat(e.attributes[t]):"").concat(this.eol))).join(""))).join("")}printRTCPMux(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(e){if(void 0===e)return"";let t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(s).concat(e.netType)),e.addressType&&(t+="".concat(s).concat(e.addressType)),e.address&&(t+="".concat(s).concat(e.address)),t+this.eol}printMSId(e){return e.map((e=>"a=msid:".concat(e.id).concat(e.appdata?"".concat(s).concat(e.appdata):"").concat(this.eol))).join("")}printImageattr(e){return e.map((e=>"a=imageattr:".concat(e).concat(this.eol))).join("")}printRid(e){return e.map((e=>{let t="a=rid:".concat(e.id).concat(s).concat(e.direction);return e.payloads&&(t+="".concat(s,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(t+="".concat(s).concat(e.params.map((e=>"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val))).join(";"))),t+this.eol})).join("")}printSimulcast(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}printSCTPPort(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?"":"a=max-message-size:".concat(e).concat(this.eol)}printMid(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map((e=>"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map((e=>"".concat(s).concat(e.toString(10)))).join("")).concat(this.eol))).join("")}}function k(e){return(new T).parse(e)}function x(e,t){return(new I).print(e,t)}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8)})()}(YM);var JM=YM.exports;function XM(e){if(Array.isArray(e))return e.map((e=>e));if(!ZM(e))return e;const t={};for(const n in e){const r=e[n];ZM(r)||Array.isArray(r)?t[n]=XM(r):t[n]=r}return t}function ZM(e){return!("object"!=typeof e||Array.isArray(e)||!e)}class QM{constructor(e){sh(this,"input",[]),sh(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const $M={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},ej={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:$M,remoteCandidate:$M}},tj={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},nj={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},rj={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},ij={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function sj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sj(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class aj{constructor(e,t){sh(this,"onFirstVideoReceived",void 0),sh(this,"onFirstVideoDecoded",void 0),sh(this,"onFirstAudioReceived",void 0),sh(this,"onFirstVideoDecodedTimeout",void 0),sh(this,"onFirstAudioDecoded",void 0),sh(this,"onSelectedLocalCandidateChanged",void 0),sh(this,"onSelectedRemoteCandidateChanged",void 0),sh(this,"videoIsReady",!1),sh(this,"videoIsReady2",{}),sh(this,"pc",void 0),sh(this,"options",void 0),sh(this,"intervalTimer",void 0),sh(this,"stats",XM(ej)),sh(this,"isFirstVideoReceived",{}),sh(this,"isFirstVideoDecoded",{}),sh(this,"isFirstAudioReceived",{}),sh(this,"isFirstAudioDecoded",{}),sh(this,"isFirstVideoDecodedTimeout",{}),sh(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval((async()=>{this.updateStats()}),this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new cv((e=>{e({local:oj({},$M),remote:oj({},$M)})}))}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const t=this.lossRateWindowStats.length,n=["videoSend","audioSend","videoRecv","audioRecv"];let r=0,i=0,s=0,o=0;for(const a of n)e[a].forEach(((e,n)=>{if(!this.lossRateWindowStats[t-1][a][n]||!this.lossRateWindowStats[0][a][n])return;const c=this.lossRateWindowStats[t-1][a][n].packets-this.lossRateWindowStats[0][a][n].packets,l=this.lossRateWindowStats[t-1][a][n].packetsLost-this.lossRateWindowStats[0][a][n].packetsLost;"videoSend"===a||"audioSend"===a?(r+=c,s+=l):(i+=c,o+=l),Number.isNaN(c)||Number.isNaN(c)?e.packetLostRate=0:e.packetLostRate=c<=0||l<=0?0:l/(c+l)}));e.sendPacketLossRate=r<=0||s<=0?0:s/(r+s),e.recvPacketLossRate=i<=0||o<=0?0:o/(i+o)}}function cj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cj(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class dj extends aj{constructor(){super(...arguments),sh(this,"_stats",ej),sh(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=XM(ej);const n=t.filter((e=>"ssrc"===e.type));this.processSSRCStats(n);const r=t.find((e=>"VideoBwe"===e.type));r&&this.processBandwidthStats(r),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach((e=>{var t;const n=Nr(t=e.id).call(t,"send");switch("".concat(e.mediaType,"_").concat(n?"send":"recv")){case"video_send":{const t=XM(nj);t.codec=e.googCodecName,t.adaptionChangeReason="none",e.googCpuLimitedResolution&&(t.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(t.adaptionChangeReason="bandwidth"),t.avgEncodeMs=Number(e.googAvgEncodeMs),t.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.firsCount=Number(e.googFirReceived),t.nacksCount=Number(e.googNacksReceived),t.plisCount=Number(e.googPlisReceived),t.frameCount=Number(e.framesEncoded),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.videoSend.push(t),this._stats.rtt=t.rttMs;break}case"video_recv":{const t=XM(tj),n=this.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(t.codec=e.googCodecName,t.targetDelayMs=Number(e.googTargetDelayMs),t.renderDelayMs=Number(e.googRenderDelayMs),t.currentDelayMs=Number(e.googCurrentDelayMs),t.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),t.decodeMs=Number(e.googDecodeMs),t.maxDecodeMs=Number(e.googMaxDecodeMs),t.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},t.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},t.decodeFrameRate=Number(e.googFrameRateDecoded),t.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},t.jitterBufferMs=Number(e.googJitterBufferMs),t.firsCount=Number(e.googFirsSent),t.nacksCount=Number(e.googNacksSent),t.plisCount=Number(e.googPlisSent),t.framesDecodeCount=Number(e.framesDecoded),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,t.decodedFrame.width,t.decodedFrame.height),this.isFirstVideoDecoded[t.ssrc]=!0),n){const r=n.stats,i=Date.now()-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=i,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc,10))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<n.stats.framesDecodeCount&&(t.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:lj({},t),lts:Date.now()}),this._stats.videoRecv.push(t);break}case"audio_recv":{const t=XM(ij);t.codec=e.googCodecName,t.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,t.decodingCNG=Number(e.googDecodingCNG),t.decodingCTN=Number(e.googDecodingCTN),t.decodingCTSG=Number(e.googDecodingCTSG),t.decodingNormal=Number(e.googDecodingNormal),t.decodingPLC=Number(e.googDecodingPLC),t.decodingPLCCNG=Number(e.googDecodingPLCCNG),t.expandRate=Number(e.googExpandRate),t.accelerateRate=Number(e.googAccelerateRate),t.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),t.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),t.speechExpandRate=Number(e.googSpeechExpandRate),t.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),t.jitterBufferMs=Number(e.googJitterBufferMs),t.jitterMs=Number(e.googJitterReceived),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),t.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.decodingNormal>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),this._stats.audioRecv.push(t);break}case"audio_send":{const t=XM(rj);t.codec=e.googCodecName,t.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,t.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),t.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),t.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),t.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.rtt=t.rttMs,this._stats.audioSend.push(t);break}}}))}_getStats(){return new cv(((e,t)=>{this.pc.getStats(e,t)}))}statsResponsesToObjects(e){const t=[];return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t.push(n)})),t}}function uj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uj(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class pj extends aj{constructor(){super(...arguments),sh(this,"_stats",ej),sh(this,"report",void 0),sh(this,"lastDecodeVideoReceiverStats",new Map),sh(this,"lastVideoFramesRecv",new Map),sh(this,"lastVideoFramesSent",new Map),sh(this,"lastVideoFramesDecode",new Map),sh(this,"lastVideoJBDelay",new Map),sh(this,"lastAudioJBDelay",new Map),sh(this,"mediaBytesSent",new Map),sh(this,"mediaBytesRetransmit",new Map),sh(this,"mediaBytesTargetEncode",new Map),sh(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=XM(ej),this.report.forEach((e=>{switch(e.type){case aS.OUTBOUND:case aS.INBOUND:{const t=e.mediaType||e.kind,n=!t&&"frameWidth"in e,r=!t&&!("frameWidth"in e);e.type===aS.OUTBOUND?"audio"===t||r?this.processAudioOutboundStats(e):("video"===t||n)&&this.processVideoOutboundStats(e):e.type===aS.INBOUND&&("audio"===t||r?this.processAudioInboundStats(e):("video"===t||n)&&this.processVideoInboundStats(e));break}case aS.TRANSPORT:{const t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case aS.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const e=await this.pc.getStats(),t={local:hj({},$M),remote:hj({},$M)};return e.forEach((n=>{let r;if(n.type===aS.TRANSPORT&&(r=e.get(n.selectedCandidatePairId)),n.type===aS.CANDIDATE_PAIR&&n.selected&&(r=n),r){const n=(e,t)=>{e.type=t.type,e.id=t.id,t.address&&(e.address=t.address),t.candidateType&&(e.candidateType=t.candidateType),t.port&&(e.port=t.port),t.priority&&(e.priority=t.priority),t.protocol&&(e.protocol=t.protocol),t.relayProtocol&&(e.relayProtocol=t.relayProtocol)};if(r.localCandidateId){const i=e.get(r.localCandidateId);i&&n(t.local,i)}if(r.remoteCandidateId){const i=e.get(r.remoteCandidateId);i&&n(t.remote,i)}}})),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){const t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){const t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===aS.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===aS.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===aS.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(hj({},t),hj({},this.stats.selectedCandidatePair.localCandidate)),e.type===aS.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(hj({},t),hj({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find((t=>t.ssrc===e.ssrc));t||(t=XM(ij),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),"number"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples)}processVideoInboundStats(e){let t=this._stats.videoRecv.find((t=>t.ssrc===e.ssrc));t||(t=XM(tj),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay;const n=this.lastDecodeVideoReceiverStats.get(t.ssrc),r=this.lastVideoFramesDecode.get(t.ssrc),i=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){const e=t.decodedFrame?t.decodedFrame.width:0,n=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,e,n),this.isFirstVideoDecoded[t.ssrc]=!0}if(n){const r=n.stats,s=i-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&s>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=s,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<r.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(n.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-n.qpSum)/(e.framesDecoded-n.stats.framesDecodeCount))}r&&i-r.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-r.count)/((i-r.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:t.decodeFrameRate})):r?t.decodeFrameRate=r.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:hj({},t),lts:n?n.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find((t=>t.ssrc===e.ssrc));t||(t=XM(nj),this._stats.videoSend.push(t));const n=this.mediaBytesSent.get(e.ssrc);if(n)n.add(e.bytesSent);else{const t=new QM(10);t.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,t)}if(void 0!==e.retransmittedBytesSent){const t=this.mediaBytesRetransmit.get(e.ssrc);if(t)t.add(e.retransmittedBytesSent);else{const t=new QM(10);t.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,t)}}if(e.totalEncodedBytesTarget){const t=this.mediaBytesTargetEncode.get(e.ssrc);if(t)t.add(e.totalEncodedBytesTarget);else{const t=new QM(10);t.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,t)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){const n=this.lastEncoderMs.get(e.ssrc);if(!n||n.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{const r=e.framesEncoded-n.lastFrameCount,i=e.totalEncodeTime-n.lastEncoderTime;t.avgEncodeMs=1e3*i/r}}if(e.framesEncoded&&e.qpSum){const n=this.lastEncoderMs.get(e.ssrc);!n||n.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-n.lastQpSum)/(e.framesEncoded-n.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,aS.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find((t=>t.ssrc===e.ssrc));if(t||(t=XM(rj),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,aS.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}findRemoteStatsId(e,t){var n;const r=Array.from(AS(n=this.report).call(n)).find((n=>n.type===t&&n.ssrc===e));return r?r.id:null}processVideoMediaSource(e,t){const n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})}processAudioMediaSource(e,t){const n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)}processVideoTrackSenderStats(e,t,n){var r,i,s,o;const a=t?this.report.get(t):void 0,c=null!==(r=null==a?void 0:a.framesSent)&&void 0!==r?r:e.framesSent;if("number"!=typeof c)return;let l=null!==(i=null==a?void 0:a.frameWidth)&&void 0!==i?i:e.frameWidth,d=null!==(s=null==a?void 0:a.frameHeight)&&void 0!==s?s:e.frameHeight,u=null!==(o=null==a?void 0:a.framesPerSecond)&&void 0!==o?o:e.framesPerSecond;if("number"==typeof l&&"number"==typeof d||(l=0,d=0),null==u){const e=Date.now(),t=this.lastVideoFramesSent.get(n.ssrc);t&&e-t.lts>=800?(u=Math.round((c-t.count)/((e-t.lts)/1e3)),this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:u})):t?u=t.rate:this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:0})}n.sentFrame={width:l,height:d,frameRate:Math.max(0,u)}}processVideoTrackReceiverStats(e,t,n){var r,i,s,o,a;const c=t?this.report.get(t):void 0,l=null!==(r=null==c?void 0:c.framesReceived)&&void 0!==r?r:e.framesReceived,d=null!==(i=null==c?void 0:c.frameWidth)&&void 0!==i?i:e.frameWidth,u=null!==(s=null==c?void 0:c.frameHeight)&&void 0!==s?s:e.frameHeight,h=null!==(o=null==c?void 0:c.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,p=null!==(a=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount;if("number"==typeof l){const e=this.lastVideoFramesRecv.get(n.ssrc),t=Date.now();n.framesReceivedCount=l;let r=0;e&&t-e.lts>=800?(r=Math.round((l-e.count)/((t-e.lts)/1e3)),this.lastVideoFramesRecv.set(n.ssrc,{count:l,lts:t,rate:r})):e?r=e.rate:this.lastVideoFramesRecv.set(n.ssrc,{count:l,lts:t,rate:0}),n.receivedFrame={width:d||0,height:u||0,frameRate:r||0},n.decodedFrame={width:d||0,height:u||0,frameRate:n.decodeFrameRate||0},n.outputFrame={width:d||0,height:u||0,frameRate:n.decodeFrameRate||0}}if(h&&p){const e=this.lastVideoJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=p-e.jitterBufferEmittedCount;r>0&&(t=1e3*(h-e.jitterBufferDelay)/r),n.jitterBufferMs=t,n.currentDelayMs=Math.round(t),this.lastVideoJBDelay.set(n.ssrc,{jitterBufferDelay:h,jitterBufferEmittedCount:p,jitterBufferMs:n.currentDelayMs})}}processAudioTrackSenderStats(e,t,n){var r,i,s,o;const a=t?this.report.get(t):void 0,c=null!==(r=null!==(i=null==a?void 0:a.echoReturnLoss)&&void 0!==i?i:e.echoReturnLoss)&&void 0!==r?r:0,l=null!==(s=null!==(o=null==a?void 0:a.echoReturnLossEnhancement)&&void 0!==o?o:e.echoReturnLossEnhancement)&&void 0!==s?s:0;n.aecReturnLoss=c,n.aecReturnLossEnhancement=l}processAudioTrackReceiverStats(e,t,n){var r,i,s,o,a,c,l;const d=t?this.report.get(t):void 0,u=null!==(r=null==d?void 0:d.removedSamplesForAcceleration)&&void 0!==r?r:e.removedSamplesForAcceleration,h=null!==(i=null==d?void 0:d.totalSamplesReceived)&&void 0!==i?i:e.totalSamplesReceived,p=null!==(s=null==d?void 0:d.jitterBufferDelay)&&void 0!==s?s:e.jitterBufferDelay,f=null!==(o=null==d?void 0:d.jitterBufferEmittedCount)&&void 0!==o?o:e.jitterBufferEmittedCount,m=null!==(a=null==d?void 0:d.audioLevel)&&void 0!==a?a:null==e?void 0:e.audioLevel,g=null!==(c=null==d?void 0:d.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,_=null!==(l=null==d?void 0:d.concealedSamples)&&void 0!==l?l:e.concealedSamples;if(u&&h&&(n.accelerateRate=u/h),p&&f){const e=this.lastAudioJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=f-e.jitterBufferEmittedCount;r>0&&(t=1e3*(p-e.jitterBufferDelay)/r),n.jitterBufferMs=Math.round(t),this.lastAudioJBDelay.set(n.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:f,jitterBufferMs:n.jitterBufferMs})}n.outputLevel=m;let v=1920;g&&h&&(v=h/g/50,n.receivedFrames=Math.round(h/v)),_&&(n.droppedFrames=Math.round(_/v))}processRemoteInboundStats(e,t){const n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime),n.jitter&&(t.jitterMs=1e3*n.jitter),n.timestamp&&(t.timestamp=n.timestamp))}getCodecFromCodecStats(e){const t=this.report.get(e);if(!t)return"";const n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""}updateSendBitrate(){let e=0,t=null,n=null;this.mediaBytesSent.forEach((t=>{e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((e=>{t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((e=>{n=null===n?e.diffMean():n+e.diffMean()}));const r=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*r/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))}}class fj extends aj{updateStats(){return cv.resolve()}}function mj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4;const s=function(){const e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return e&&e[0]?Number(e[0].split("/")[1]):null}();return s?s<76?new dj(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new pj(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):function(e){return!!window.RTCStatsReport&&e.getStats()instanceof cv}(e)?new pj(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new fj(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i})}function gj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gj(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;const{filterRTX:i,filterVideoFec:s,filterAudioFec:o,filterAudioCodec:a,filterVideoCodec:c}=t,{useXR:l}=n;let d=[],u=[],h=[],p=[],f=!1,m=!1;if(JM.parse(e).mediaDescriptions.forEach((e=>{r&&r!==e.attributes.direction||("video"!==e.media.mediaType||f||(u=e.attributes.payloads,p=e.attributes.extmaps,f=!0),"audio"!==e.media.mediaType||m||(d=e.attributes.payloads,h=e.attributes.extmaps,m=!0))})),!p||0===u.length)throw new Error("Cannot get video capabilities from SDP.");if(!h||0===d.length)throw new Error("Cannot get audio capabilities from SDP.");u.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),l&&e.rtcpFeedbacks.push({type:"rrtr"})})),d.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),l&&e.rtcpFeedbacks.push({type:"rrtr"})})),i&&(d=d.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),u=u.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),s&&(u=u.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),o&&(d=d.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),a&&(null==a?void 0:a.length)>0&&(d=d.filter((e=>{var t;return Nr(a).call(a,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),c&&(null==c?void 0:c.length)>0&&(u=u.filter((e=>{var t;return Nr(c).call(c,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")})));const g=bT("UNSUPPORTED_VIDEO_CODEC");return g&&g.length>0&&(u=u.filter((e=>!(e.rtpMap&&Nr(g).call(g,e.rtpMap.encodingName.toLowerCase()))))),{audioCodecs:d,videoCodecs:u,audioExtensions:h,videoExtensions:p}}function yj(e){const t=JM.parse(e);let n,r;for(const i of t.mediaDescriptions){if(!n){const e=i.attributes.iceUfrag,t=i.attributes.icePwd;if(!e||!t)throw new Error("Cannot get iceUfrag or icePwd from SDP.");n={iceUfrag:e,icePwd:t}}if(!r){const e=i.attributes.fingerprints;e.length>0&&(r={fingerprints:e})}}if(!r&&t.attributes.fingerprints.length>0&&(r={fingerprints:t.attributes.fingerprints}),!r||!n)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:n,dtlsParameters:r}}function Ej(e,t){const n=[],r=e.attributes.ssrcGroups.filter((e=>"FID"===e.semantic)),i=e.attributes.ssrcGroups.find((e=>"SIM"===e.semantic)),s=e.attributes.ssrcs;if(i)i.ssrcIds.forEach((e=>{var i;const s=null===(i=r.find((t=>t.ssrcIds[0]===e)))||void 0===i?void 0:i.ssrcIds[1];n.push({ssrcId:e,rtx:t?s:void 0})}));else if(r.length>0){const e=r[0].ssrcIds[0],i=r[0].ssrcIds[1];n.push({ssrcId:e,rtx:t?i:void 0})}else{if(0===s.length)throw new Error("No ssrcs found on local media description.");n.push({ssrcId:s[0].ssrcId})}return n}function bj(e,t){const{cname:n}=e;let r;t&&t.ip&&"number"==typeof t.port?(r=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],VT.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(r.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),VT.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):r=e.iceParameters.candidates.map((e=>({foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}})));const i={fingerprints:e.dtlsParameters.fingerprints.map((e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint})))},s={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let o;switch(e.dtlsParameters.role){case"server":o="passive";break;case"client":o="active";break;case"auto":o="actpass"}return{dtlsParameters:i,iceParameters:s,candidates:r,rtpCapabilities:xj(e.rtpCapabilities),setup:o,cname:n}}function Tj(e,t,n){const r=[],i=[];return e.forEach((e=>{let{ssrcId:s,rtx:o}=e;const a=rE(8,"track-"),c={ssrcId:s,attributes:_j({label:a,mslabel:n=n||rE(10,""),msid:"".concat(n," ").concat(a)},t&&{cname:t})};if(r.push(c),void 0!==o){const e={ssrcId:o,attributes:_j({label:a,mslabel:n,msid:"".concat(n," ").concat(a)},t&&{cname:t})};r.push(e),i.push({semantic:"FID",ssrcIds:[s,o]})}})),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map((e=>{let{ssrcId:t}=e;return t}))}),{ssrcs:r,ssrcGroups:i}}function Sj(e,t){t instanceof eN&&e.attributes.payloads.forEach((e=>{var n;const r=null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase();if(!r||-1===["opus","pcmu","pcma","g722"].indexOf(r))return;e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";const i=t._encoderConfig;i&&"pcmu"!==r&&"pcma"!==r&&"g722"!==r&&(i.bitrate&&!Nv()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*i.bitrate))),i.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(i.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(i.sampleRate)),i.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))}))}function wj(e){const t=e.attributes.unrecognized.findIndex((e=>"x-google-flag"===e.attField&&"conference"===e.attValue));-1!==t&&e.attributes.unrecognized.splice(t,1)}function Cj(e,t){var n;if(!(t instanceof bN&&t._encoderConfig&&-1===t._hints.indexOf(VR.SCREEN_TRACK)))return;const r=t._encoderConfig;SR().supportMinBitrate&&r.bitrateMin&&e.attributes.payloads.forEach((e=>{var t,n;Nr(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(r.bitrateMin))})),SR().supportMinBitrate&&!Nr(n=t._hints).call(n,VR.LOW_STREAM)&&r.bitrateMax&&e.attributes.payloads.forEach((e=>{var t,n;Nr(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(bT("X_GOOGLE_START_BITRATE")||Math.floor(r.bitrateMax)))}))}function Rj(e){if("video"!==e.media.mediaType)return;const t=Ev();if(t.name!==mv.SAFARI&&t.os!==fv.IOS)return;const n=e.attributes.extmaps.findIndex((e=>/video-orientation/g.test(e.extensionName)));-1!==n&&e.attributes.extmaps.splice(n,1)}function Ij(e,t,n){if(!t)return;let r,i;if("video"===e.media.mediaType?(r=n.videoExtensions,i=n.videoCodecs):(r=n.audioExtensions,i=n.audioCodecs),!0===t.twcc){const t=r.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));if(t){e.attributes.extmaps.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"});const n=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))))))}(i,e.attributes.payloads);n.forEach((e=>{e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))||e.rtcpFeedbacks.push({type:"transport-cc"})}))}}else if(!1===t.twcc){const t=e.attributes.extmaps.findIndex((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}if(!0===t.remb){const t=r.find((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName));if(t){e.attributes.extmaps.find((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName))||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"});const n=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))))))}(i,e.attributes.payloads);n.forEach((e=>{e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))||e.rtcpFeedbacks.push({type:"goog-remb"})}))}}else if(!1===t.remb){const t=e.attributes.extmaps.findIndex((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"goog-remb"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}function Nj(e,t,n){if(Nv())return;if("video"!==e.media.mediaType)return;if(!(t instanceof bN))return;if("vp9"!==n&&"vp8"!==n)return;if("vp8"===n&&!bT("SIMULCAST"))return;if(void 0===t._scalabilityMode||t._scalabilityMode.numSpatialLayers<=1)return;const r="vp8"===n?2:t._scalabilityMode.numSpatialLayers,i=e.attributes.ssrcs[0],s=e.attributes.ssrcGroups.find((e=>"FID"===e.semantic&&e.ssrcIds[0]===i.ssrcId)),o={semantic:"SIM",ssrcIds:[i.ssrcId]};for(let a=1;a<r;a++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+a,attributes:qy(i.attributes)}),o.ssrcIds.push(i.ssrcId+a),s&&(e.attributes.ssrcs.push({ssrcId:s.ssrcIds[1]+a,attributes:qy(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+a,s.ssrcIds[1]+a]}));e.attributes.ssrcGroups.unshift(o)}async function Oj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new RTCPeerConnection;n.addTransceiver("video",{direction:"sendonly"}),n.addTransceiver("audio",{direction:"sendonly"}),n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"});const r=(await n.createOffer()).sdp,{send:i,recv:s,sendrecv:o}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=vj(n,e,t,"sendonly"),i=vj(n,e,t,"recvonly"),s={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(kj(r,i,"videoExtensions",s,o,a),kj(r,i,"videoCodecs",s,o,a),kj(r,i,"audioExtensions",s,o,a),kj(r,i,"audioCodecs",s,o,a),bT("RAISE_H264_BASELINE_PRIORITY")){const e=a.videoCodecs.findIndex((e=>{var t,n;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"===(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])}));if(-1!==e){const t=a.videoCodecs.findIndex((e=>{var t;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())}));if(t<e){VT.debug("raising H264 baseline profile priority");const n=a.videoCodecs[e];a.videoCodecs.splice(e,1),a.videoCodecs.splice(t,0,n)}-1!==t&&(o.videoCodecs=o.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))}))),-1!==t&&bT("FILTER_SEND_H264_BASELINE")&&(s.videoCodecs=s.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))})))}}return{send:s,recv:o,sendrecv:a}}(e,t,r);try{n.close()}catch(e){}return{send:i,recv:s,sendrecv:o}}function Aj(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=vj(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"recvonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(kj(e,t,"videoExtensions",n,r,i),kj(e,t,"videoCodecs",n,r,i),kj(e,t,"audioExtensions",n,r,i),kj(e,t,"audioCodecs",n,r,i),bT("RAISE_H264_BASELINE_PRIORITY")){const e=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){VT.debug("raising H264 baseline profile priority");const n=i.videoCodecs[e];i.videoCodecs.splice(e,1),i.videoCodecs.splice(t,0,n)}-1!==t&&(r.videoCodecs=r.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:i}}function kj(e,t,n,r,i,s){if("videoExtensions"===n||"audioExtensions"===n){const o=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.entry===t.entry&&e.extensionName===t.extensionName)return o.push(n),!0}))?s[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===o.indexOf(t)&&i[n].push(e)}))}if("videoCodecs"===n||"audioCodecs"===n){const o=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return o.push(n),!0}))?s[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===o.indexOf(t)&&i[n].push(e)}))}}function xj(e){const{send:t,recv:n,sendrecv:r}=e;if(!r){if(!t||!n)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:n}}let i,s;return t?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...t.audioCodecs,...r.audioCodecs],i.videoCodecs=[...t.videoCodecs,...r.videoCodecs],i.audioExtensions=[...t.audioExtensions,...r.audioExtensions],i.videoExtensions=[...t.videoExtensions,...r.videoExtensions]):i=r,n?(s={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},s.audioCodecs=[...n.audioCodecs,...r.audioCodecs],s.videoCodecs=[...n.videoCodecs,...r.videoCodecs],s.audioExtensions=[...n.audioExtensions,...r.audioExtensions],s.videoExtensions=[...n.videoExtensions,...r.videoExtensions]):s=r,{send:i,recv:s}}function Pj(e){"audio"===e.media.mediaType&&e.attributes.payloads.filter((e=>{var t;return"opus"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((e=>{e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"}))}function Dj(e){e.mediaDescriptions.forEach((e=>{"video"!==e.media.mediaType&&"audio"!==e.media.mediaType||e.attributes.payloads.forEach((e=>{-1===e.rtcpFeedbacks.findIndex((e=>"rrtr"===e.type))&&e.rtcpFeedbacks.push({type:"rrtr"})}))}))}function Lj(e,t,n,r){let i=[];if(e===aw.VIDEO){if(bT("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(i=t.videoCodecs.filter((e=>{var t;return Nr(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)&&e&&e.fmtp&&e.fmtp.parameters["profile-level-id"]===bT("H264_PROFILE_LEVEL_ID")}))),!Array.isArray(i)||0===i.length){let e=[];const s=[],o=[];n.videoCodecs.forEach((t=>{var n,i,a;Nr(n=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").call(n,r)&&e.push(t),Nr(i=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").call(i,"vp8")&&s.push(t),Nr(a=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").call(a,"h264")&&o.push(t)})),0===e.length&&(0!==s.length?(e=s,VT.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: vp8"))):0!==o.length&&(e=o,VT.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: h264")))),0!==e.length&&(i=t.videoCodecs.filter((t=>e.some((e=>e.payloadType===t.payloadType)))))}if(bT("USE_PUB_RTX")){const e=i.map((e=>e.payloadType.toString())),n=t.videoCodecs.filter((t=>t.rtpMap&&"rtx"===t.rtpMap.encodingName&&Nr(e).call(e,t.fmtp&&t.fmtp.parameters.apt||"")));i=[...i,...n]}0===i.length&&(VT.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),i=t.videoCodecs)}else i=t.audioCodecs.filter((e=>{var t;return Nr(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)})),0===i.length&&(VT.warning("codec ".concat(r," not included in rtpCapabilities, fallback to opus")),i=t.audioCodecs.filter((e=>{var t;return Nr(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,"opus")})));return i}let Mj=class{get localCapabilities(){return qy(this._localCapabilities)}get rtpCapabilities(){return qy(this._rtpCapabilities)}get candidates(){return qy(this._candidates)}get iceParameters(){return qy(this._iceParameters)}get dtlsParameters(){return qy(this._dtlsParameters)}constructor(e){sh(this,"sessionDesc",void 0),sh(this,"_localCapabilities",void 0),sh(this,"_rtpCapabilities",void 0),sh(this,"_candidates",void 0),sh(this,"_iceParameters",void 0),sh(this,"_dtlsParameters",void 0),sh(this,"setup",void 0),sh(this,"currentMidIndex",void 0),sh(this,"cname","o/i14u9pJrxRKAsu"),sh(this,"firefoxSsrcMidMap",new Map),e=qy(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,localCapabilities:s,direction:o,setup:a,videoCodec:c,audioCodec:l}=e;let d;this.setup=a,d=o===yS.RECEIVE_ONLY?JM.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"):JM.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"),this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=s;const u=o===yS.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,h=o===yS.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,p=o===yS.RECEIVE_ONLY?i.send.videoCodecs:Lj(aw.VIDEO,u,h,c),f=o===yS.RECEIVE_ONLY?i.send.audioCodecs:Lj(aw.AUDIO,u,h,l);for(const m of d.mediaDescriptions){if(m.attributes.iceUfrag=t.iceUfrag,m.attributes.icePwd=t.icePwd,m.attributes.fingerprints=n.fingerprints,m.attributes.candidates=r,m.attributes.setup=this.setup,"application"===m.media.mediaType&&(m.attributes.sctpPort="5000"),"video"===m.media.mediaType&&(m.media.fmts=p.map((e=>e.payloadType.toString(10))),m.attributes.payloads=p,m.attributes.extmaps=u.videoExtensions,bT("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:4e4,rtx:bT("USE_SUB_RTX")?40001:void 0}],this.cname);m.attributes.ssrcs=e,m.attributes.ssrcGroups=t}if("audio"===m.media.mediaType&&(m.media.fmts=f.map((e=>e.payloadType.toString(10))),m.attributes.payloads=f,m.attributes.extmaps=u.audioExtensions,Pj(m),bT("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:2e4}],this.cname);m.attributes.ssrcs=e,m.attributes.ssrcGroups=t}}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}toString(){return JM.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every((e=>this.hasMid(e))):this.sessionDesc.mediaDescriptions.some((t=>t.attributes.mid===e))}send(e,t,n,r,i){n=n.replace(/ /g,"-");const{ssrcs:s,ssrcGroups:o}=Tj(t,this.cname,bT("SYNC_GROUP")?n:void 0),a=this.findPreloadMediaDesc(s);if(a){if(Nv()&&this.firefoxSsrcMidMap.set(s[0].ssrcId,a.attributes.mid),i&&(i.twcc||i.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(a,i),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,s,r);let n;return-1===t?(n=this.createOrRecycleSendMedia(e,s,o,"sendonly",r,i),this.updateBundleMids()):(n=qy(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=s,n.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,i)),Nv()&&this.firefoxSsrcMidMap.set(s[0].ssrcId,n.attributes.mid),{needExchangeSDP:!0,mid:n.attributes.mid}}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{e.attributes.ssrcs=[]})),this.updateBundleMids()}receive(e,t,n){const r=[];return e.forEach((e=>{const i=e._mediaStreamTrack.kind,s=this.findAvailableRecvMediaIndex(i);let o,a=!1;-1===s?(a=!0,o=this.createOrRecycleRecvMedia(e,[],"recvonly",t,n),this.updateBundleMids()):(o=qy(this.sessionDesc.mediaDescriptions[s]),o.attributes.direction="recvonly"),r.push({mid:o.attributes.mid,needCreateTransceiver:a})})),r}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}addRemoteCandidate(e){const{foundation:t,protocol:n,address:r,port:i,type:s,relatedAddress:o,relatedPort:a,priority:c}=new RTCIceCandidate(e),l={foundation:null!=t?t:"",componentId:"1",transport:null!=n?n:"",priority:c?c+"":"",connectionAddress:null!=r?r:"",port:i?i+"":"",type:s?s+"":"",relAddr:null!=o?o:"",relPort:a?a+"":"",extension:{}};this.candidates.some((e=>e.priority===l.priority&&e.connectionAddress===l.connectionAddress&&e.port===l.port))||(this._candidates.push(l),this.sessionDesc.mediaDescriptions.forEach((e=>{e.attributes.candidates=this.candidates})))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,n,r,i){const s=e._mediaStreamTrack.kind,o=this.rtpCapabilities.recv,a=Lj(s,o,this.localCapabilities.send,s===aw.AUDIO?i:r),c=s===aw.VIDEO?o.videoExtensions:o.audioExtensions,l="".concat(++this.currentMidIndex);let d={media:{mediaType:s,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};d=this.mungRecvMediaDsec(d,e);const u=this.findFirstClosedMedia(s);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Nr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Nr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}findAvailableMediaIndex(e,t,n){return this.sessionDesc.mediaDescriptions.findIndex((r=>{const i=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if(Nv()){if(i){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!e||e!==r.attributes.mid)}return!1}return i&&r.attributes.mid===n}))}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex((t=>{const n=t.media.mediaType===e&&"0"!==t.media.port&&("recvonly"===t.attributes.direction||"sendrecv"===t.attributes.direction);return"0"!==t.attributes.mid&&"1"!==t.attributes.mid&&n}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}restartICE(e){e=qy(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}createOrRecycleSendMedia(e,t,n,r,i,s){const o=this.rtpCapabilities.send,a=e===aw.VIDEO?o.videoCodecs:o.audioCodecs,c=e===aw.VIDEO?o.videoExtensions:o.audioExtensions;Nv()&&(i="".concat(++this.currentMidIndex));let l={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:i}};l=this.mungSendMediaDesc(l,s);const d=this.findFirstClosedMedia(e);if(d){const e=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}mungRecvMediaDsec(e,t,n){const r=qy(e);return wj(r),Sj(r,t),Cj(r,t),Rj(r),Ij(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=qy(e);return Ij(n,t,this.localCapabilities.recv),Pj(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>Nv()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}};const jj=["sdp"];function Uj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uj(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Bj=class e extends Ow{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[]}set isInRestartIce(e){this._isInRestartIce=e}get isInRestartIce(){return this._isInRestartIce}constructor(t,n,r){super(t,n),sh(this,"direction",void 0),sh(this,"name",void 0),sh(this,"store",void 0),sh(this,"spec",void 0),sh(this,"peerConnection",void 0),sh(this,"initialOffer",void 0),sh(this,"transport",void 0),sh(this,"statsFilter",void 0),sh(this,"localCandidateCount",0),sh(this,"allCandidatesReceived",!1),sh(this,"localCandidateAddress",null),sh(this,"useXR",bT("USE_XR")),sh(this,"filter",{filterRTX:!bT("USE_PUB_RTX")&&!bT("USE_SUB_RTX"),filterVideoFec:bT("FILTER_VIDEO_FEC"),filterAudioFec:bT("FILTER_AUDIO_FEC")}),sh(this,"extension",{useXR:this.useXR}),sh(this,"_isInRestartIce",!1),sh(this,"mutex",new pE("P2PConnection-mutex")),sh(this,"onLocalCandidate",void 0),sh(this,"remoteSDP",void 0),sh(this,"pendingCandidates",[]),sh(this,"localCapabilities",void 0),sh(this,"isReady",!1),sh(this,"restartCnt",0),sh(this,"curTurnServerIndex",0),this.store=n,this.spec=t,this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t,n.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=null!=r?r:yS.SEND_ONLY,this.name=this.direction===yS.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=mj(this.peerConnection,bT("STATS_UPDATE_INTERVAL"),void 0,Nv()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(e){try{const t=await Oj(this.filter,this.extension);if(this.localCapabilities=xj(t),e){const{sdp:t}=e,n=KM(e,jj),r=function(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=vj(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"sendonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(kj(t,e,"videoExtensions",n,r,i),kj(t,e,"videoCodecs",n,r,i),kj(t,e,"audioExtensions",n,r,i),kj(t,e,"audioCodecs",n,r,i),bT("RAISE_H264_BASELINE_PRIORITY")){const e=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){VT.debug("raising H264 baseline profile priority");const n=i.videoCodecs[e];i.videoCodecs.splice(e,1),i.videoCodecs.splice(t,0,n)}-1!==t&&bT("FILTER_SEND_H264_BASELINE")&&(n.videoCodecs=n.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:i}}(this.filter,this.extension,t);this.remoteSDP=new Mj({remoteIceParameters:n.iceParameters,remoteDtlsParameters:n.dtlsParameters,candidates:[],remoteRTPCapabilities:r,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const i=await this.peerConnection.createAnswer();if(!i.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const s=yj(i.sdp);await this.peerConnection.setLocalDescription(i);const o=await Aj(this.filter,this.extension,i.sdp);this.localCapabilities=xj(o);const a=this.peerConnection.getTransceivers()[0];return null!=a&&a.receiver&&a.receiver.transport&&this.tryBindTransportEvents(a.receiver.transport),Fj(Fj({},s),{},{sdp:i.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=yj(e.sdp);return this.initialOffer=e,Fj(Fj({},t),{},{sdp:e.sdp})}}catch(e){throw new zv(Wv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:t,iceParameters:n,dtlsParameters:r}=e,i=await Aj(this.filter,this.extension,t);this.remoteSDP=new Mj({remoteIceParameters:n,remoteDtlsParameters:r,candidates:[],remoteRTPCapabilities:i,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const s=this.peerConnection.getTransceivers()[0];null!=s&&s.sender&&s.sender.transport&&this.tryBindTransportEvents(s.sender.transport)}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async addRemoteCandidate(e){try{e&&this.pendingCandidates.push(e),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach((e=>{this.peerConnection.addIceCandidate(e)})),this.pendingCandidates=[])}catch(e){throw new zv(Wv.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(e.toString()))}}send(e,t,n){var r=this;return xM((function*(){const i=yield SM(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const i=[],s=r.remoteSDP.receive(e,t,n);e.forEach(((e,t)=>{if(s[t].needCreateTransceiver){const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});i.push(t),e._updateRtpTransceiver(t)}else{const n=r.peerConnection.getTransceivers().find((e=>e.mid===s[t].mid));if(!n)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(s[t].mid));i.push(n),e._updateRtpTransceiver(n)}})),Nv()&&!0===bT("SIMULCAST")&&(yield SM(r.applySimulcastForFirefox(i,e)));const o=s.map((e=>e.mid)),a=yield SM(r.peerConnection.createOffer()),c=r.mungSendOfferSDP(a.sdp,e,o),l=JM.parse(c),d=o.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return Ej(t,bT("USE_PUB_RTX"))})),u=i.map(((e,t)=>{const n=o[t];return{localSSRC:d[t],id:n}}));yield SM(r.peerConnection.setLocalDescription({type:"offer",sdp:c}));try{yield u}catch(e){const n=r.remoteSDP.toString();throw yield SM(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield SM(r.peerConnection.setRemoteDescription({type:"answer",sdp:n})),yield SM(r.stopSending(o,!0)),e}yield SM(r.applySimulcastEncodings(i,e)),yield SM(r.applySendEncodings(i,e));const h=r.remoteSDP.toString(),p=r.logSDPExchange(c,"offer","local","send");return null==p||p(h),yield SM(r.setRemoteDescription({type:"answer",sdp:h})),i.map(((e,t)=>{const n=o[t];return{localSSRC:d[t],id:n}}))}catch(e){throw e instanceof zv?e:new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length (".concat(t.length,") doesn't match mids' length (").concat(e.length,") when trying to call P2PConnection.stopSending."));t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:s}=this.remoteSDP.send(e,t,n,r);if(s){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),s=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(s||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:s}),VT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else VT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."));const o=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!o||null===o.mid)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:o.receiver.track,mid:o.mid,transceiver:o}}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async mockReceive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:s}=this.remoteSDP.send(e,t,n,r);if(s){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),s=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(s||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:s}),VT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else VT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."))}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===_T.Auto&&(this.store.p2pTransport=_T.SdRtn,SR().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,SR().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:t}=yj(e.sdp);return this.store.descriptionStart(),this.direction===yS.SEND_ONLY&&await this.peerConnection.setLocalDescription(e),t}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===yS.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const e=await this.peerConnection.createAnswer();if(!e.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:t}=yj(e.sdp);return await this.peerConnection.setLocalDescription(e),t}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}close(){var e;this.peerConnection.close(),this.peerConnection.onicecandidate=null,null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),s=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==s||s(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?Nv()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:Fj(Fj({},$M),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:Fj(Fj({},$M),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e,t;Nr(e=["connected","completed"]).call(e,this.peerConnection.iceConnectionState)&&(this.isReady=!1),null===(t=this.onICEConnectionStateChange)||void 0===t||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;"connected"===this.peerConnection.connectionState&&(this.restartCnt=0),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=e=>{var t;e.candidate?(e.candidate.candidate&&(this.localCandidateAddress=e.candidate.address,null===(t=this.onLocalCandidate)||void 0===t||t.call(this,e.candidate.toJSON())),this.localCandidateCount+=1):(this.allCandidatesReceived=!0,VT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i={iceServers:[]};var s;return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(by(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers,n,r)),bT("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway,n,r)),Nr(s=[_T.Relay,_T.SdRtn]).call(s,n)&&(i.iceTransportPolicy="relay"),bT("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(i.iceTransportPolicy="relay")})))),bT("ENABLE_ENCODED_TRANSFORM")&&SR().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),VT.debug("P2PConnection p2pTransport is ".concat(n)),i}static turnServerConfigToIceServers(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[],i=e.filter((e=>e.tcpport));VT.debug("P2PConnection turnServers is ".concat(i,", current index is ").concat(n));const s=i.length>n?i[n]:i[0];switch(t){case _T.SdRtn:const t=e.filter((e=>{var t;return Nr(t=e.username).call(t,"glb:")&&e.turnServerURL==e.turnServerURL})),i=t.length>n?t[n]:t[0];i&&(r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turn:".concat(vC(i.turnServerURL),":").concat(i.tcpport,"?transport=udp")}),r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turns:".concat(vC(i.turnServerURL),":").concat(i.tcpport,"?transport=tcp")}));break;case _T.Relay:s&&(r.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=udp")}),r.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(vC(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}));break;default:s&&(r.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=udp")}),r.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(vC(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}),r.push({username:s.username,credential:s.password,credentialType:"password",urls:"stun:".concat(s.turnServerURL,":").concat(s.tcpport)}))}return r}tryBindTransportEvents(e){if(e){this.transport=e,e.onstatechange=()=>{var t;null!=e&&e.state&&(null===(t=this.onDTLSTransportStateChange)||void 0===t||t.call(this,e.state))},e.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const t=e.iceTransport;t&&(t.onstatechange=()=>{const t=null==e?void 0:e.iceTransport.state;var n;t&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,t))},t.getSelectedCandidatePair&&(t.onselectedcandidatepairchange=()=>{if(t.getSelectedCandidatePair()){const{local:e,remote:n}=t.getSelectedCandidatePair();VT.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))),!t)return VT.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return VT.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!SR().supportSetRtpSenderParameters)return VT.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const r={},i={};switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(e._encoderConfig){var s;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(i.maxBitrate=1e3*t),Nr(s=e._hints).call(s,VR.LOW_STREAM)&&(n&&(i.maxFramerate=EC(n)),r&&r>=1&&(i.scaleResolutionDownBy=r))}if(bT("DSCP_TYPE")&&Vv()){var o;const e=bT("DSCP_TYPE");Nr(o=["very-low","low","medium","high"]).call(o,e)&&(i.networkPriority=e)}const a=t.getParameters(),c=null===(n=a.encodings)||void 0===n?void 0:n[0];Nv()&&!c&&(r.encodings=[i]),c&&Object.assign(c,i),Object.assign(a,r),VT.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!SR().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];i instanceof bN&&!this.isVP8Simulcast(i)&&await this.updateRtpSenderEncodings(i,r.sender)}}catch(e){VT.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=JM.parse(e);return t.forEach(((e,t)=>{const i=n[t],s=r.mediaDescriptions.find((e=>e.attributes.mid===i));s&&(Sj(s,e),Nj(s,e,this.store.codec))})),JM.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,s,o;const c=e[a],l=t[a];if(l instanceof bN&&!Nr(n=l._hints).call(n,VR.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(s=l._scalabilityMode)&&void 0!==s&&s.numSpatialLayers&&(null===(o=l._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!Nv()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof bN&&this.isVP8Simulcast(r)){const t=e[n],i={},s={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];const o=t.sender.getParameters();await t.sender.setParameters(Object.assign(o,i))}}}isVP8Simulcast(e){var t,n,r,i,s;return!!(e instanceof bN&&bT("SIMULCAST")&&"vp8"===this.store.codec&&!Nr(t=e._hints).call(t,VR.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(s=e._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(bT("SDP_LOGGING"))return VT.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async e=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}async getRemoteSSRC(e,t){var n,r;if(t=null!==(n=t)&&void 0!==n?n:null===(r=this.currentRemoteDescription)||void 0===r?void 0:r.sdp){var i;const n=null===(i=JM.parse(t).mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===i?void 0:i.attributes.ssrcs;return null==n?void 0:n[0].ssrcId}}async setRemoteDescription(e){var t;await this.peerConnection.setRemoteDescription(e),Nr(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(e,t,n){const r=JM.parse(e),i=r.mediaDescriptions.find((e=>e.attributes.mid===t));return i&&(n===aw.AUDIO&&"audio"===i.media.mediaType&&Pj(i),this.useXR&&Dj(r)),JM.print(r)}};function Vj(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return await r.apply(this,s)}finally{n()}},n}function Gj(e,t){let n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=EC(t.width),r.height=EC(t.height);const i=EC(t.framerate||15);document.body.append(n),document.body.append(r);let s=e._mediaStreamTrack;n.srcObject=new MediaStream([s]),n.play();const o=r.getContext("2d");if(!o)throw new PS(Wv.UNEXPECTED_ERROR,"can not get canvas context");const a=SR(),c=r.captureStream(a.supportRequestFrame?0:i).getVideoTracks()[0];c.canvas||(c.canvas=r),r.startCapture=()=>{if(!n)return r.stopCapture&&r.stopCapture();if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){const e=n.videoWidth,t=n.videoHeight/e,i=r.width*t;Math.abs(i-r.height)>=2&&(VT.debug("adjust low stream resolution","".concat(r.width,"x").concat(r.height," -> ").concat(r.width,"x").concat(i)),r.height=i)}o.drawImage(n,0,0,r.width,r.height),c.requestFrame&&c.requestFrame(),s!==e._mediaStreamTrack&&(s=e._mediaStreamTrack,n.srcObject=new MediaStream([s]))},r.stopCapture=yI((()=>r.startCapture&&r.startCapture()),i);const l=c.stop;return c.stop=()=>{l.call(c),n&&(n.remove(),n.srcObject=null,n=null),r&&(r.width=0,r.remove(),r.stopCapture&&r.stopCapture(),r.startCapture=void 0,r.stopCapture=void 0,r=null),VT.debug("clean low stream renderer")},c}var Hj,Wj,zj,qj,Kj,Yj,Jj,Xj,Zj,Qj,$j;kS([Vj,xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],Bj.prototype,"establish",null),kS([Vj,xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],Bj.prototype,"connect",null),kS([Vj,xS("design:type",Function),xS("design:paramtypes",[String,Array,String,String]),xS("design:returntype",cv)],Bj.prototype,"receive",null),kS([Vj,xS("design:type",Function),xS("design:paramtypes",[String,Array,String,String]),xS("design:returntype",cv)],Bj.prototype,"mockReceive",null),kS([Vj,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],Bj.prototype,"stopReceiving",null),kS([Vj,xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],Bj.prototype,"restartICE",null),kS([Vj,xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],Bj.prototype,"close",null),kS([Vj,xS("design:type",Function),xS("design:paramtypes",[String,dI]),xS("design:returntype",cv)],Bj.prototype,"updateEncoderConfig",null),kS([Vj,xS("design:type",Function),xS("design:paramtypes",[String,dI]),xS("design:returntype",cv)],Bj.prototype,"updateSendParameters",null),kS([Vj,xS("design:type",Function),xS("design:paramtypes",[dI,String]),xS("design:returntype",cv)],Bj.prototype,"replaceTrack",null),kS([Vj,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],Bj.prototype,"muteLocal",null),kS([Vj,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],Bj.prototype,"unmuteLocal",null),function(e){e[e.HEIGHT=2033]="HEIGHT",e[e.FRAME_RATE=2034]="FRAME_RATE",e[e.WIDTH=2035]="WIDTH"}(Hj||(Hj={})),function(e){e[e.HEIGHT=2072]="HEIGHT",e[e.FRAME_RATE=2074]="FRAME_RATE",e[e.WIDTH=2076]="WIDTH"}(Wj||(Wj={})),function(e){e[e.FRAME_RATE=2002]="FRAME_RATE",e[e.WIDTH=2003]="WIDTH",e[e.HEIGHT=2004]="HEIGHT",e[e.PACKAGE_LOST=2005]="PACKAGE_LOST",e[e.AVG_ENCODE=2007]="AVG_ENCODE",e[e.NACKS=2009]="NACKS",e[e.PLIS=2010]="PLIS",e[e.FIRS=2011]="FIRS",e[e.BITRATE=2012]="BITRATE",e[e.PACKAGE_RATE=2031]="PACKAGE_RATE",e[e.ADAPTATION=2032]="ADAPTATION",e[e.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",e[e.BANDWIDTH=2061]="BANDWIDTH",e[e.RETRANSMIT=2062]="RETRANSMIT",e[e.TARGET_ENCODED=2064]="TARGET_ENCODED",e[e.TRANSMIT=2066]="TRANSMIT",e[e.FREEZE=2082]="FREEZE",e[e.DISABLED=2095]="DISABLED",e[e.PLAYER_STATUS=2128]="PLAYER_STATUS",e[e.QP_SUM=2143]="QP_SUM"}(zj||(zj={})),function(e){e[e.BITRATE=2069]="BITRATE",e[e.PACKAGE_LOST=2070]="PACKAGE_LOST",e[e.PACKAGE_RATE=2071]="PACKAGE_RATE",e[e.HEIGHT=2073]="HEIGHT",e[e.FRAME_RATE=2075]="FRAME_RATE",e[e.WIDTH=2077]="WIDTH"}(qj||(qj={})),function(e){e[e.JITTER=-1]="JITTER",e[e.PACKAGE_LOST=2014]="PACKAGE_LOST",e[e.WIDTH=2018]="WIDTH",e[e.HEIGHT=2019]="HEIGHT",e[e.FRAME_RATE=2020]="FRAME_RATE",e[e.JITTER_BUFFER=2023]="JITTER_BUFFER",e[e.CURRENT_DELAY=2024]="CURRENT_DELAY",e[e.NACKS=2026]="NACKS",e[e.PLIS=2027]="PLIS",e[e.FIRS=2028]="FIRS",e[e.BITRATE=2029]="BITRATE",e[e.PACKAGE_RATE=2078]="PACKAGE_RATE",e[e.FREEZE=2084]="FREEZE",e[e.DISABLED=2101]="DISABLED",e[e.PLAYER_STATUS=2129]="PLAYER_STATUS",e[e.QP_SUM=2144]="QP_SUM",e[e.I_FRAME_DELAY=2149]="I_FRAME_DELAY"}(Kj||(Kj={})),function(e){e[e.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",e[e.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",e[e.FREEZE_TIME=2109]="FREEZE_TIME",e[e.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER"}(Yj||(Yj={})),function(e){e[e.PCM_LEVEL=2104]="PCM_LEVEL"}(Jj||(Jj={})),function(e){e[e.PACKAGE_LOST=-1]="PACKAGE_LOST",e[e.LEVEL=2038]="LEVEL",e[e.BITRATE=2039]="BITRATE",e[e.PACKAGE_RATE=2040]="PACKAGE_RATE",e[e.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",e[e.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",e[e.FREEZE=2081]="FREEZE",e[e.DISABLED=2096]="DISABLED"}(Xj||(Xj={})),function(e){e[e.BITRATE=2044]="BITRATE",e[e.PACKAGE_LOST=2045]="PACKAGE_LOST",e[e.PACKAGE_RATE=2046]="PACKAGE_RATE",e[e.CURRENT_DELAY=2047]="CURRENT_DELAY",e[e.JITTER_BUFFER=2054]="JITTER_BUFFER",e[e.JITTER=2055]="JITTER",e[e.FREEZE=2083]="FREEZE",e[e.DISABLED=2102]="DISABLED",e[e.PCM_LEVEL=2105]="PCM_LEVEL",e[e.PLAYER_STATUS=2130]="PLAYER_STATUS",e[e.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES"}(Zj||(Zj={})),function(e){e[e.FREEZE_TIME=-1]="FREEZE_TIME",e[e.LEVEL=2043]="LEVEL"}(Qj||(Qj={})),function(e){e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE"}($j||($j={}));const eU=1e3,tU=3;function nU(e,t,n){null!=n&&Number.isFinite(n)&&(e[t]=Math.round(Math.max(0,n)))}function rU(e){const t={[$j.CONN_TYPE]:0,[$j.RTT]:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{const n=e.selectedCandidatePair.localCandidate.relayProtocol;"udp"===n&&(t[$j.CONN_TYPE]=1),"tcp"===n&&(t[$j.CONN_TYPE]=3),"tls"===n&&(t[$j.CONN_TYPE]=4);break}case"srflx":t[$j.CONN_TYPE]=2}return t}class iU extends ly{constructor(e){super(),sh(this,"store",void 0),sh(this,"uploadWRTCStatsTimer",void 0),sh(this,"uploadOutboundDenoiserStatsTimer",void 0),sh(this,"uploadExtStatsTimer",void 0),sh(this,"uploadExtUsageStatsTimer",void 0),sh(this,"uploadInboundExtStatsTimer",void 0),sh(this,"requestStats",void 0),sh(this,"requestTransportStats",void 0),sh(this,"requestLocalMedia",void 0),sh(this,"requestRemoteMedia",void 0),sh(this,"requestAllTracks",void 0),sh(this,"requestVideoIsReady",void 0),sh(this,"requestUploadStats",void 0),sh(this,"requestUpload",void 0),sh(this,"uploadOutboundStarted",!1),sh(this,"uploadInboundStarted",!1),sh(this,"uploadTransportStarted",!1),sh(this,"uploadExtensionUsageStarted",!1),sh(this,"lastRecvStats",void 0),sh(this,"lastSendStats",void 0),sh(this,"lastFullRecvStats",void 0),sh(this,"lastFullSendStats",void 0),sh(this,"needUploadRenderFreezeTime",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;let t,n;if(this.uploadTransportStarted&&(t=this.requestStats(),this.store.useP2P&&(n=this.requestStats(!0))),!t&&this.uploadOutboundStarted&&(t=this.requestStats()),!n&&this.uploadInboundStarted&&(n=this.requestStats(!0)),t||n){const r={};if(this.uploadTransportStarted&&t){const i=this.getTransportStats(t,n,e);i&&(r.misc=[i])}if(this.uploadOutboundStarted&&t){const n=this.getOutboundStats(t,e?this.lastSendStats:this.lastFullSendStats,e);n&&(r.outbound=[n])}if(this.uploadInboundStarted&&n){const t=this.getInboundStats(n,e?this.lastRecvStats:this.lastFullRecvStats,e);t&&(r.inbound=t)}this.requestUploadStats(r)}this.lastRecvStats=n,this.lastSendStats=t,e||(this.lastFullRecvStats=n,this.lastFullSendStats=t)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let e=1;this.uploadWRTCStatsTimer=window.setInterval((()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(e!==tU),++e===tU+1&&(e=1)}),eU)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,n){if(!this.requestStats)return;if(n)return null==e.rtt?void 0:{addition:{[$j.RTT]:e.rtt,[$j.CONN_TYPE]:void 0}};const r=rU(e);if(this.store.useP2P){if(t){const e=rU(t);r[$j.CONN_TYPE]+=e[$j.CONN_TYPE]<<3}r[$j.CONN_TYPE]+=110}else r[$j.CONN_TYPE]+=100;return{addition:r}}getOutboundStats(e,t,n){if(!this.requestUploadStats||!this.requestLocalMedia)return;const r=this.requestLocalMedia();if(!r||0===r.length)return;let i,s,o;return r.forEach((r=>{let[a,{track:c,ssrcs:l}]=r;switch(a){case dw.LocalVideoLowTrack:case dw.LocalVideoTrack:if(a===dw.LocalVideoTrack){const r=function(e,t,n,r,i){const s=t.videoSend.find((t=>t.ssrc===e));if(!s)return;const o={},{sentFrame:a,inputFrame:c}=s;if(c&&a){const e=c.frameRate,t=a.frameRate;o[zj.FREEZE]=function(e,t){let n=!0;return n=!(e<=5)&&(e<=10?t<3:e<=20?t<4:t<5),n}(e,t)?1:0}if(nU(o,zj.QP_SUM,s.qpSumPerFrame),i)return o;switch(a&&(nU(o,zj.HEIGHT,a.height),nU(o,zj.WIDTH,a.width),nU(o,zj.FRAME_RATE,a.frameRate)),o[zj.DISABLED]=r._originMediaStreamTrack&&!r._originMediaStreamTrack.enabled||r._mediaStreamTrack&&!r._mediaStreamTrack.enabled?1:0,s.adaptionChangeReason){case"none":o[zj.ADAPTATION]=0;break;case"cpu":o[zj.ADAPTATION]=1;break;case"bandwidth":o[zj.ADAPTATION]=2;break;case"other":o[zj.ADAPTATION]=3}o[zj.PLAYER_STATUS]=aI[r._player?r._player.videoElementStatus:"uninit"],nU(o,zj.NACKS,s.nacksCount),nU(o,zj.PLIS,s.plisCount),nU(o,zj.FIRS,s.firsCount),nU(o,zj.AVG_ENCODE,s.avgEncodeMs);const l=n&&n.videoSend.find((t=>t.ssrc===e));if(l){let e=i?eU:eU*tU;l.timestamp&&s.timestamp&&(e=s.timestamp-l.timestamp),null!=l.packets&&null!=s.packets&&nU(o,zj.PACKAGE_RATE,1e3*(s.packets-l.packets)/e),null!=s.packetsLost&&null!=l.packetsLost&&nU(o,zj.PACKAGE_LOST,s.packetsLost-l.packetsLost),null!=l.bytes&&null!=s.bytes&&nU(o,zj.BITRATE,8*(s.bytes-l.bytes)/e)}return o}(l[0].ssrcId,e,t,c,n),i=n?null:function(e,t,n){const r=t.videoSend.find((t=>t.ssrc===e));if(!r)return null;const i={},s=r.inputFrame,o=s&&s.height||n&&n._videoHeight||0,a=s&&s.width||n&&n._videoWidth||0,c=s&&s.frameRate||0;return nU(i,Hj.HEIGHT,o),nU(i,Hj.WIDTH,a),nU(i,Hj.FRAME_RATE,c),i}(l[0].ssrcId,e,c),o=n?null:function(e){const t={};return nU(t,zj.RETRANSMIT,e.bitrate.retransmit),nU(t,zj.TARGET_ENCODED,e.bitrate.targetEncoded),nU(t,zj.ACTUAL_ENCODED,e.bitrate.actualEncoded),nU(t,zj.TRANSMIT,e.bitrate.transmit),nU(t,zj.BANDWIDTH,e.sendBandwidth),t}(e);s=Object.assign({},r,i,o)}else o=n?void 0:function(e,t,n){const r=t.videoSend.find((t=>t.ssrc===e));if(!r)return;const i={},s=r.sentFrame;if(s&&(nU(i,qj.HEIGHT,s.height),nU(i,qj.WIDTH,s.width),nU(i,qj.FRAME_RATE,s.frameRate)),n){const t=n.videoSend.find((t=>t.ssrc===e));if(t){let e=eU*tU;t.timestamp&&r.timestamp&&(e=r.timestamp-t.timestamp),null!=t.packets&&null!=r.packets&&nU(i,qj.PACKAGE_RATE,1e3*(r.packets-t.packets)/e),null!=r.packetsLost&&null!=t.packetsLost&&nU(i,qj.PACKAGE_LOST,r.packetsLost-t.packetsLost),null!=t.bytes&&null!=r.bytes&&nU(i,qj.BITRATE,8*(r.bytes-t.bytes)/e)}}return i}(l[0].ssrcId,e,t);break;case dw.LocalAudioTrack:i=n?void 0:function(e,t,n,r){const i=t.audioSend.find((t=>t.ssrc===e));if(!i)return;const s={};s[Xj.DISABLED]=r._originMediaStreamTrack&&!r._originMediaStreamTrack.enabled||r._mediaStreamTrack&&!r._mediaStreamTrack.enabled?1:0;const o=r._source.getAccurateVolumeLevel(),a=i.inputLevel;nU(s,Xj.LEVEL,100*(null==a?o:a)),nU(s,Jj.PCM_LEVEL,100*o),nU(s,Xj.AEC_RETURN_LOSS,i.aecReturnLoss),nU(s,Xj.AEC_RETURN_LOSS_ENH,i.aecReturnLossEnhancement),s[Xj.FREEZE]=0;const c=n&&n.audioSend.find((t=>t.ssrc===e));if(c){let e=eU*tU;c.timestamp&&i.timestamp&&(e=i.timestamp-c.timestamp),null!=c.bytes&&null!=i.bytes&&nU(s,Xj.BITRATE,8*(i.bytes-c.bytes)/e),null!=c.packets&&null!=i.packets&&nU(s,Xj.PACKAGE_RATE,1e3*(i.packets-c.packets)/e)}return s}(l[0].ssrcId,e,t,c)}})),{high:s,low:o,audio:i}}getInboundStats(e,t,n){if(!this.requestRemoteMedia)return;const r=this.requestRemoteMedia()||[],i=[];return r.forEach((r=>{let[s,o]=r;const a={peer:s.uid};if(o.has(aw.VIDEO)&&s.videoTrack){const r=s._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(s._videoSSRC)||!1,i=s.videoTrack?function(e,t,n,r,i,s,o){const a=t.videoRecv.find((t=>t.ssrc===e));if(!a)return;const c={},{receivedFrame:l,outputFrame:d,decodeFrameRate:u}=a,h=n&&n.videoRecv.find((t=>t.ssrc===e));if(c[Kj.FREEZE]=i&&gU.isRemoteVideoFreeze(r,a,h)?1:0,nU(c,Yj.FRAME_RATE_DECODE,u),nU(c,Kj.QP_SUM,a.qpSumPerFrame),a.framesRateFirefox&&nU(c,Kj.FRAME_RATE,a.framesRateFirefox),l&&nU(c,Kj.FRAME_RATE,l.frameRate),h){const e=t.timestamp-n.timestamp||(o?eU:tU*eU);null!=a.packetsLost&&null!=h.packetsLost&&nU(c,Kj.PACKAGE_LOST,a.packetsLost-h.packetsLost),null!=h.bytes&&null!=a.bytes&&nU(c,Kj.BITRATE,8*(a.bytes-h.bytes)/e),null!=h.packets&&null!=a.packets&&nU(c,Kj.PACKAGE_RATE,1e3*(a.packets-h.packets)/e)}if(o)return c;if(l?(nU(c,Kj.HEIGHT,l.height),nU(c,Kj.WIDTH,l.width)):r&&(nU(c,Kj.HEIGHT,r._videoHeight||0),nU(c,Kj.WIDTH,r._videoWidth||0)),d&&nU(c,Yj.FRAME_RATE_RENDER,d.frameRate),nU(c,Kj.JITTER_BUFFER,a.jitterBufferMs),nU(c,Kj.CURRENT_DELAY,a.currentDelayMs),nU(c,Kj.FIRS,a.firsCount),nU(c,Kj.NACKS,a.nacksCount),nU(c,Kj.PLIS,a.plisCount),r){c[Kj.DISABLED]=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?0:1;const e=r._player;if(e){const{freezeTimeCounterList:t,renderFreezeAccTime:n}=e;if(t&&t.length>0&&nU(c,Yj.FREEZE_TIME,t.splice(0,1)[0]),s&&"visible"===kN.visibility){const t=Math.min(6e3,n);e.renderFreezeAccTime=Math.max(0,n-t),nU(c,Yj.FREEZE_TIME_RENDER,t)}}}if(c[Kj.PLAYER_STATUS]=aI[r._player?r._player.videoElementStatus:"uninit"],h&&void 0!==a.totalInterFrameDelay&&void 0!==a.totalSquaredInterFrameDelay&&void 0!==h.totalInterFrameDelay&&void 0!==h.totalSquaredInterFrameDelay){const e=a.totalInterFrameDelay-h.totalInterFrameDelay,t=a.totalSquaredInterFrameDelay-h.totalSquaredInterFrameDelay,n=a.framesDecodeCount-h.framesDecodeCount,r=e/n*1e3,i=Math.round(1e3*Math.sqrt((t-Math.pow(e,2)/n)/n));!isNaN(i)&&r+i>Math.max(3*r,r+150)&&(c[Kj.I_FRAME_DELAY]=i)}return c}(s._videoSSRC,e,t,s.videoTrack,!0===r,this.needUploadRenderFreezeTime,n):void 0;i&&(a.video=i)}if(o.has(aw.AUDIO)&&s.audioTrack){const r=s.audioTrack?function(e,t,n,r,i){const s=t.audioRecv.find((t=>t.ssrc===e));if(!s)return;const o={},a=n&&n.audioRecv.find((t=>t.ssrc===e)),{receivedFrames:c,droppedFrames:l}=s;var d;if(nU(o,Zj.JITTER,s.jitterMs),null!=c&&null!=l&&(o[Zj.FREEZE]=0===(d=c)||100*l/d>20?1:0),a){const e=t.timestamp-n.timestamp||(i?eU:eU*tU);null!=s.packets&&null!=a.packets&&nU(o,Zj.PACKAGE_RATE,1e3*(s.packets-a.packets)/e),null!=a.bytes&&null!=s.bytes&&nU(o,Zj.BITRATE,8*(s.bytes-a.bytes)/e),null!=s.packetsLost&&null!=a.packetsLost&&nU(o,Zj.PACKAGE_LOST,s.packetsLost-a.packetsLost)}if(i)return o;const u=r._source.getAccurateVolumeLevel(),h=s.outputLevel;if(nU(o,Qj.LEVEL,100*(null==h?u:h)),nU(o,Zj.PCM_LEVEL,100*u),r&&(o[Zj.DISABLED]=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?0:1),nU(o,Zj.JITTER_BUFFER,s.jitterBufferMs),nU(o,Zj.CURRENT_DELAY,s.jitterBufferMs),o[Zj.PLAYER_STATUS]=aI[GI.getPlayerState(r.getTrackId())],a){const e=s.concealedSamples-a.concealedSamples;e>0&&nU(o,Zj.CONCEALED_SAMPLES,e)}return o}(s._audioSSRC,e,t,s.audioTrack,n):void 0;r&&(a.audio=r)}(a.video||a.audio)&&i.push(a)})),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,i}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval((()=>{if(!this.requestAllTracks||!this.requestUpload)return;const e=(this.requestAllTracks()||[]).find((e=>e instanceof tN));if(e&&e._external.getDenoiserStats){const t=e._external.getDenoiserStats();t&&this.requestUpload(gS.DENOISER_STATS,t)}}),2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval((()=>{this.requestAllTracks&&this.requestUpload&&this.requestAllTracks().forEach((e=>{e.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval((()=>{this.requestUpload&&this.requestRemoteMedia&&(this.requestRemoteMedia()||[]).forEach((e=>{let[t,n]=e;n.has(aw.VIDEO)&&t.videoTrack&&t.videoTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)})),n.has(aw.AUDIO)&&t.audioTrack&&t.audioTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const e=new Map;this.uploadExtUsageStatsTimer=window.setInterval((async()=>{const t=Date.now(),n={connectionInterval:bT("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:t};let r=[];const i=this.requestAllTracks&&this.requestAllTracks()||[];for(const e of i)!e.muted&&e.enabled&&(r=r.concat(await e.getProcessorUsage()));const s=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[e,c]of s)c.has(aw.VIDEO)&&e.videoTrack&&(r=r.concat(await e.videoTrack.getProcessorUsage())),c.has(aw.AUDIO)&&e.audioTrack&&(r=r.concat(await e.audioTrack.getProcessorUsage()));if(0===r.length)return;n.details=function(e,t){const n={};for(const{id:o,value:a,level:c,direction:l}of e){var r;const e=null!==(r=t.get(o))&&void 0!==r?r:0,d=2===a?e+bT("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:e;var i,s;t.set(o,d),n[o]?(2===a&&(n[o].value=a),c>n[o].level&&(n[o].level=c),"remote"===l&&(n[o].remoteUidCount+=1),n[o].totalTs=null!==(i=t.get(o))&&void 0!==i?i:0):n[o]={value:a,level:c,remoteUidCount:"local"===l?0:1,totalTs:null!==(s=t.get(o))&&void 0!==s?s:0}}return Object.keys(n).map((e=>{const{level:t,value:r,totalTs:i}=n[e];return{id:e,level:t,value:r,totalTs:i}}))}(r,e);const o=Date.now(),a=o>t?o:t+1;this.requestUpload&&this.requestUpload(gS.EXTENSION_USAGE_STATS,{usageStats:n,sendTs:a})}),bT("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}}class sU{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){sh(this,"uid",void 0),sh(this,"_uintid",void 0),sh(this,"_trust_in_room_",!0),sh(this,"_trust_audio_enabled_state_",!0),sh(this,"_trust_video_enabled_state_",!0),sh(this,"_trust_audio_mute_state_",!0),sh(this,"_trust_video_mute_state_",!0),sh(this,"_audio_muted_",!1),sh(this,"_video_muted_",!1),sh(this,"_audio_enabled_",!0),sh(this,"_video_enabled_",!0),sh(this,"_audio_added_",!1),sh(this,"_video_added_",!1),sh(this,"_is_pre_created",!1),sh(this,"_video_pre_subscribed",!1),sh(this,"_audio_pre_subscribed",!1),sh(this,"_trust_video_stream_added_state_",!0),sh(this,"_trust_audio_stream_added_state_",!0),sh(this,"_audioTrack",void 0),sh(this,"_videoTrack",void 0),sh(this,"_dataChannels",[]),sh(this,"_audioSSRC",void 0),sh(this,"_videoSSRC",void 0),sh(this,"_audioOrtc",void 0),sh(this,"_videoOrtc",void 0),sh(this,"_cname",void 0),sh(this,"_rtxSsrcId",void 0),sh(this,"_videoMid",void 0),sh(this,"_audioMid",void 0),this.uid=e,this._uintid=t}}var oU;function aU(e,t){var n;let r;switch(t){case dw.LocalAudioTrack:r=JS.Audio;break;case dw.LocalVideoTrack:r=Nr(n=e._hints).call(n,VR.SCREEN_TRACK)?JS.Screen:JS.High;break;case dw.LocalVideoLowTrack:r=JS.Low}return r}function cU(e){const t=SR();if(e.some((e=>e._bypassWebAudio)))throw new zv(Wv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new zv(Wv.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function lU(e,t){cU(e);const n=t||new rN;return e.forEach((e=>n.addAudioTrack(e))),n}function dU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY"}(oU||(oU={}));class hU extends ly{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(hw.StateChange,t,this._state)}constructor(e,t){super(),sh(this,"store",void 0),sh(this,"statsUploader",void 0),sh(this,"sendConnection",void 0),sh(this,"recvConnection",void 0),sh(this,"localTrackMap",new Map),sh(this,"remoteUserMap",new Map),sh(this,"localDataChannels",[]),sh(this,"pendingLocalTracks",[]),sh(this,"pendingRemoteTracks",[]),sh(this,"statsCollector",void 0),sh(this,"dtlsFailedCount",0),sh(this,"sendMutex",new pE("P2PChannel2-send-mutex")),sh(this,"recvMutex",new pE("P2PChannel2-recv-mutex")),sh(this,"_state",uw.Disconnected),sh(this,"_restartStates",["disconnected","failed"]),sh(this,"reconnectInterval",void 0),sh(this,"uploadUnplinkStarted",!1),sh(this,"uploadDownlinkStarted",!1),sh(this,"uplinkStateUploadInterval",void 0),sh(this,"downlinkStatsUploadInterval",void 0),sh(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==uw.Connected)return void n(new zv(Wv.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const o=r.find((e=>"videoLowTrack"===e[0]));o&&o[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));let a=!1;var i,s;a="video"===e.trackMediaType?!(null===(i=this.localTrackMap.get(dw.LocalAudioTrack))||void 0===i||!i.track._muted):void 0===(null===(s=this.localTrackMap.get(dw.LocalVideoTrack))||void 0===s?void 0:s.id);const c=this.createMuteMessage(r);await Cy(this,hw.RequestMuteLocal,c);const l="video"===e.trackMediaType?Rw.MUTE_LOCAL_VIDEO:Rw.MUTE_LOCAL_AUDIO;await Cy(this,hw.RequestP2PMuteLocal,{action:l,message:c,isMuteAll:a}),t()}catch(e){n(e)}finally{r()}})),sh(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==uw.Connected)return void n(new zv(Wv.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();await this.sendConnection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const i=this.createUnmuteMessage(r),s="video"===e.trackMediaType?Rw.UNMUTE_LOCAL_VIDEO:Rw.UNMUTE_LOCAL_AUDIO;await Cy(this,hw.RequestP2PMuteLocal,{action:s,message:i}),t()}catch(e){n(e)}finally{r()}})),sh(this,"handleUpdateVideoEncoder",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{const n=this.localTrackMap.get(dw.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==uw.Connected)return void t();const{id:r,track:i}=n;r&&(await this.sendConnection.updateSendParameters(r,i),await this.sendConnection.updateEncoderConfig(r,i),this.emit(hw.UpdateVideoEncoder,i)),t()}catch(e){n(e)}finally{r()}})),sh(this,"handleSetOptimizationMode",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleSetOptimizationMode");try{const n=this.localTrackMap.get(dw.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==uw.Connected)return;const{id:r,track:i}=n;r&&await this.sendConnection.updateSendParameters(r,i),t()}catch(e){n(e)}finally{r()}})),sh(this,"handleReplaceTrack",(async(e,t,n,r)=>{let i;VT.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var s;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.sendConnection||!n||void 0===n[1].id||this.state!==uw.Connected)return void t();if(await(null===(s=this.sendConnection)||void 0===s?void 0:s.replaceTrack(e,n[1].id)),n[0]===dw.LocalVideoTrack&&SR().supportDualStreamEncoding){const t=this.localTrackMap.get(dw.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new cv(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var o;null===(o=i)||void 0===o||o()}})),sh(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),sh(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),sh(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),sh(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new iU(e),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval((()=>{[this.sendConnection,this.recvConnection].forEach((e=>{e&&("disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))}))}),bT("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new zv(Wv.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e,t,n,r,i,s){throw new zv(Wv.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let n;try{if(t){this.recvConnection&&(VT.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),n=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new Bj(e,this.store,yS.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const r=await this.recvConnection.establish(t);return{iceParameters:r.iceParameters,dtlsParameters:r.dtlsParameters,sdp:r.sdp}}{this.state=uw.New,this.sendConnection&&(VT.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),n=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new Bj(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const t=await this.sendConnection.establish();return{iceParameters:t.iceParameters,dtlsParameters:t.dtlsParameters,sdp:t.sdp}}}finally{n&&n()}}async p2pConnect(e){if(!this.sendConnection)throw new zv(Wv.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=uw.Connected}async addRemoteCandidate(e,t){if(t===yS.RECEIVE_ONLY){if(!this.sendConnection)throw new zv(Wv.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new zv(Wv.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,n){var r=this;return xM((function*(){const i=yield SM(r.sendMutex.lock("From P2PChannel.publish"));try{if(!r.sendConnection||r.state!==uw.Connected){r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(t))}r.store.pubId=r.store.pubId+1,bM.markPublishStart(r.store.clientId,r.store.pubId);const i=r.filterTobePublishedTracks(e,t,n);if(0===i.length)return void(yield SM(r.tryToUnmuteAudio(e)));i.forEach((e=>{let{track:t,type:n}=e;const i=Date.now();r.store.publish(t.getTrackId(),n===dw.LocalAudioTrack?"audio":"video",i)})),r.bindLocalTrackEvents(i);const s=yield SM(r.sendConnection.send(i.map((e=>{let{track:t}=e;return t})),r.store.codec,r.store.audioCodec)),o=(yield SM(s.next())).value,a=r.createGatewayPublishMessage(i,o);try{yield a}catch(e){throw s.throw(e),(null==e?void 0:e.code)===Wv.WS_ABORT&&i.forEach((e=>{let{track:t}=e;-1===r.pendingLocalTracks.indexOf(t)&&r.pendingLocalTracks.push(t)})),r.unbindLocalTrackEvents(i),e}yield SM(s.next()),i.forEach((e=>{let{type:t}=e;r.statsCollector.addLocalStats(t)})),r.statsUploader.startUploadOutboundStats(),r.assignLocalTracks(i,o),i.forEach((e=>{let{track:t,type:n}=e;const i=Date.now();r.store.publish(t.getTrackId(),n===dw.LocalAudioTrack?"audio":"video",void 0,i)})),r.startUploadUplinkState()}finally{i()}}))()}async unpublish(e){if(!this.sendConnection||this.state!==uw.Connected)return void(0===e.length?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter((t=>!Nr(e).call(e,t))));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));n&&n[1].track.close();const r=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===uw.Connected)return n&&n[1].track.close(),r;e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}))}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const e=()=>{const e=[],t=[];Array.from(this.localTrackMap.entries()).forEach((n=>{let[r,{track:i,ssrcs:s}]=n;const o={stream_type:aU(i,r),ssrcs:s};i._muted||!i._enabled?e.push(o):t.push(o)})),e.length>0&&e.forEach((e=>{Cy(this,hw.RequestMuteLocal,[e])})),t.length>0&&t.forEach((e=>{Cy(this,hw.RequestUnmuteLocal,[e])}))};e(),this.uplinkStateUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return xM((function*(){throw new zv(Wv.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")}))()}async republish(){this.pendingLocalTracks.length>0&&(VT.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await wy(this,hw.RequestRePublish,this.pendingLocalTracks),this.emit(hw.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new zv(Wv.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,n,r){var i;if(!this.recvConnection)throw new zv(Wv.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if(null!==(i=this.remoteUserMap.get(e))&&void 0!==i&&i.has(t))return;const{track:s,mid:o,transceiver:a}=await this.recvConnection.receive(t,[{ssrcId:n}],String(e.uid),r);t===aw.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(s):(e._audioTrack=new AN(s,e.uid,e._uintid,this.store),VT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),a&&e._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=n,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(s):(e._videoTrack=new ON(s,e.uid,e._uintid,this.store),VT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),a&&e._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._videoTrack));const c=this.remoteUserMap.get(e);c?c.set(t,o):this.remoteUserMap.set(e,new Map([[t,o]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const l=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:i}=n;return r.uid===e.uid&&t===i}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(hw.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,n,r){if(!this.recvConnection)throw new zv(Wv.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:n}],String(e.uid),r)}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:i}=n;return void 0!==t?r.uid===e.uid&&t===i:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.recvConnection||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===aw.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===aw.VIDEO){var i;null===(i=e._videoTrack)||void 0===i||i._destroy(),e._videoTrack=void 0}})),!this.recvConnection)return;const i=this.filterTobeUnSubscribedTracks(e,t);0!==i.length&&(await this.recvConnection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),i.forEach((e=>{let[t,{kind:r}]=e;var i,s;if(r===aw.VIDEO&&t._videoSSRC&&(null===(i=this.recvConnection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===aw.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(s=t._videoTrack)||void 0===s||s._destroy(),t._videoTrack=void 0);else if(r===aw.AUDIO){var o;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(o=t._audioTrack)||void 0===o||o._destroy(),t._audioTrack=void 0)}})),i.forEach((e=>{let[,{kind:t}]=e;Cy(this,hw.RequestP2PMuteRemote,t)})))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const e=()=>Array.from(this.remoteUserMap.entries()).forEach((e=>{let[,t]=e;[aw.VIDEO,aw.AUDIO].forEach((e=>{t.has(e)?Cy(this,hw.RequestP2PUnmuteRemote,e):Cy(this,hw.RequestP2PMuteRemote,e)}))}));e(),this.downlinkStatsUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new zv(Wv.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new zv(Wv.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new zv(Wv.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new zv(Wv.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);if(!n)return void VT.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void VT.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===aw.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.recvConnection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||VT.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):VT.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(dw.LocalAudioTrack);if((null==t?void 0:t.track)instanceof rN){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==dw.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===dw.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===dw.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}reportPublishEvent(e,t,n,r,i){if(e){const n=this.localTrackMap.get(dw.LocalAudioTrack),s=r?this.localTrackMap.get(dw.LocalVideoLowTrack):this.localTrackMap.get(dw.LocalVideoTrack);eS.publish(this.store.sessionId,{eventElapse:bM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==s?void 0:s.track.getTrackLabel(),screenshare:-1!==(null==s?void 0:s.track._hints.indexOf(VR.SCREEN_TRACK)),audio:!!n,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var s;n||(n=[]);const o=n.find((e=>e instanceof eN)),a=r?null===(s=this.localTrackMap.get(dw.LocalVideoTrack))||void 0===s?void 0:s.track:n.find((e=>e instanceof bN));eS.publish(this.store.sessionId,{eventElapse:bM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==o?void 0:o.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(VR.SCREEN_TRACK)),audio:!!o,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===aw.VIDEO?n._videoSSRC:n._audioSSRC;i&&eS.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===aw.VIDEO,audio:r===aw.AUDIO,peerid:n.uid,subscribeRequestid:r===aw.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:bM.measureFromSubscribeStart(this.store.clientId,i)})}reset(){VT.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new pE("P2PChannel2-send-mutex"),this.sendMutex=new pE("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(dw.LocalAudioTrack);if((null==e?void 0:e.track)instanceof rN){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=uw.Disconnected}getStats(e){var t,n;return e?null===(n=this.recvConnection)||void 0===n?void 0:n.getStats():null===(t=this.sendConnection)||void 0===t?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.recvConnection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(dw.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(dw.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof bN||t&&t.track instanceof eN?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(dw.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=ep(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(VT.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=uw.Reconnecting,bT("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case dw.LocalVideoTrack:Nr(t=r._hints).call(t,VR.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case dw.LocalAudioTrack:r instanceof rN?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case dw.LocalVideoLowTrack:}})),this.emit(hw.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(ph(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(hw.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),VT.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof sU?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let n,r;if(e===yS.SEND_ONLY){if(!this.sendConnection)throw new zv(Wv.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");n=await this.sendMutex.lock("From P2PChannel.restartICE"),r=this.sendConnection}else{if(!this.recvConnection)throw new zv(Wv.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");n=await this.recvMutex.lock("From P2PChannel.restartICE"),r=this.recvConnection}try{if(t){const e=await r.restartICE(t);return r.isInRestartIce=!1,e}{const e=await r.restartICE();if(e){const t=await wy(this,hw.RequestP2PRestartICE,{direction:yS.RECEIVE_ONLY,iceParameter:e});await r.restartICE(t),r.isInRestartIce=!1}}}finally{n()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const e=this.sendConnection.getStats(),t=this.localTrackMap.get(dw.LocalVideoTrack),n=this.localTrackMap.get(dw.LocalAudioTrack),r=e.videoSend.find((e=>{var n;return e.ssrc===(null==t||null===(n=t.ssrcs)||void 0===n?void 0:n[0].ssrcId)})),i=e.audioSend.find((e=>{var t;return e.ssrc===(null==n||null===(t=n.ssrcs)||void 0===t?void 0:t[0].ssrcId)}));if(!r||!i)return 1;const s=Ry(this,hw.NeedSignalRTT),o=r?r.rttMs:void 0,a=i?i.rttMs:void 0,c=o&&a?(o+a)/2:o||a,l=(c&&s?(c+s)/2:c||s)||0,d=100*e.sendPacketLossRate*.7/50+.3*l/1500,u=d<.17?1:d<.36?2:d<.59?3:d<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(VR.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return rS[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const e=this.recvConnection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const i=r._audioSSRC,s=r._videoSSRC,o=e.audioRecv.find((e=>e.ssrc===i)),a=e.videoRecv.find((e=>e.ssrc===s));if(!o&&!a)return void(t+=1);const c=Ry(this,hw.NeedSignalRTT),l=e.rtt,d=(l&&c?(l+c)/2:l||c)||0,u=o?o.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*d/1500;u&&(p=.6*h*100/50+.2*d/1500+.2*u/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new cv(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}filterTobePublishedTracks(e,t,n){const r=[],i=SR(),s=this.getAllTracks();e=Wy(e=e.filter((e=>-1===s.indexOf(e))));let o=!1,a=!1;for(const c of e){if(c instanceof bN&&(this.localTrackMap.has(dw.LocalVideoTrack)||o?new zv(Wv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:dw.LocalVideoTrack}),o=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:dw.LocalVideoLowTrack})}if(c instanceof eN){const e=this.localTrackMap.get(dw.LocalAudioTrack);if(e){if(!(e.track instanceof rN))throw new zv(Wv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new zv(Wv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0)}else if(a){const e=r.find((e=>{let{type:t}=e;return t===dw.LocalAudioTrack}));if(!(e.track instanceof rN))throw new zv(Wv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new zv(Wv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c)}else{if(!i.webAudioMediaStreamDest||c instanceof rN||c._bypassWebAudio)r.push({track:c,type:dw.LocalAudioTrack});else{const e=new rN;e.addAudioTrack(c),r.push({track:e,type:dw.LocalAudioTrack})}a=!0}}}return r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=Wy(e=e.filter((e=>-1!==n.indexOf(e))));for(const r of e){if(r instanceof eN){const e=this.localTrackMap.get(dw.LocalAudioTrack);if(!e)continue;e.track instanceof rN?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([dw.LocalAudioTrack,e]),e.track.close())):t.push([dw.LocalAudioTrack,e])}if(r instanceof bN){const e=this.localTrackMap.get(dw.LocalVideoTrack);if(!e)continue;t.push([dw.LocalVideoTrack,e]);const n=this.localTrackMap.get(dw.LocalVideoLowTrack);n&&t.push([dw.LocalVideoLowTrack,n])}}return t}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case dw.LocalVideoTrack:t.addListener(BR.GET_STATS,this.handleGetLocalVideoStats),t.addListener(BR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(BR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(BR.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(BR.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.addListener(BR.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(BR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(BR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case dw.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case dw.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof rN?e.trackList.forEach((e=>{e.addListener(BR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(BR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(BR.GET_STATS,this.handleGetLocalAudioStats),e.addListener(BR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(BR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(BR.GET_STATS,this.handleGetLocalAudioStats),e.addListener(BR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(BR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(BR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(BR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(BR.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case dw.LocalVideoTrack:t.off(BR.GET_STATS,this.handleGetLocalVideoStats),t.off(BR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(BR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(BR.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(BR.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.off(BR.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(BR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(BR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case dw.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case dw.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof rN?e.trackList.forEach((e=>{e.off(BR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(BR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(BR.GET_STATS,this.handleGetLocalAudioStats),e.off(BR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(BR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(BR.GET_STATS,this.handleGetLocalAudioStats),e.off(BR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(BR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(BR.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(BR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(BR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof ON&&t.addListener(BR.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof AN&&t.addListener(BR.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(BR.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(aw.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(aw.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let i,{track:s,type:o}=e;switch(o){case dw.LocalAudioTrack:i=JS.Audio;break;case dw.LocalVideoTrack:i=Nr(r=s._hints).call(r,VR.SCREEN_TRACK)?JS.Screen:JS.High;break;case dw.LocalVideoLowTrack:i=JS.Low}return{kind:o===dw.LocalAudioTrack?aw.AUDIO:aw.VIDEO,stream_type:i,mid:t[n].id,ssrcs:t[n].localSSRC,isMuted:s.muted||!s.enabled}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:s,id:o}]=e;switch(r){case dw.LocalVideoTrack:n=Nr(t=i._hints).call(t,VR.SCREEN_TRACK)?JS.Screen:JS.High;break;case dw.LocalAudioTrack:n=JS.Audio;break;case dw.LocalVideoLowTrack:n=JS.Low}return{stream_type:n,ssrcs:s,mid:o}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:i}=e;this.localTrackMap.set(i,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var n;VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(hw.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(e.isInRestartIce=!1),Nr(n=this._restartStates).call(n,t)&&!e.isInRestartIce&&("disconnected"===t&&await nE(800),"disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),eS.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:py.TRACER}).onSuccess(),this.emit(hw.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(KR.FIRST_FRAME_DECODED),eS.firstRemoteFrame(this.store.sessionId,qT.FIRST_AUDIO_DECODE,KT.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:bM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&eS.firstRemoteFrame(this.store.sessionId,qT.FIRST_AUDIO_RECEIVED,KT.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:bM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&eS.firstRemoteFrame(this.store.sessionId,qT.FIRST_VIDEO_RECEIVED,KT.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:bM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(hw.ConnectionTypeChange,n),VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(RC(t))," -> ").concat(JSON.stringify(RC(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(RC(t))," -> ").concat(JSON.stringify(RC(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(hw.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){const t=e===yS.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,VT.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===yS.SEND_ONLY?this.restartICE(e):wy(this,hw.RequestP2PRestartICE,{direction:yS.SEND_ONLY}))}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(dw.LocalAudioTrack);if(e instanceof eN&&(null==n?void 0:n.track)instanceof rN)return n.track.isActive||t.push([dw.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===dw.LocalVideoTrack)){const e=this.localTrackMap.get(dw.LocalVideoLowTrack);e&&t.push([dw.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(dw.LocalAudioTrack);if(e instanceof eN&&(null==n?void 0:n.track)instanceof rN)return n.track.isActive&&t.push([dw.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===dw.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(dw.LocalVideoLowTrack);e&&t.push([dw.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:s,id:o}]=e;switch(r){case dw.LocalAudioTrack:n=JS.Audio;break;case dw.LocalVideoTrack:n=Nr(t=i._hints).call(t,VR.SCREEN_TRACK)?JS.Screen:JS.High;break;case dw.LocalVideoLowTrack:n=JS.Low}return{stream_type:n,ssrcs:s,mid:o}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:s,id:o}]=e;switch(r){case dw.LocalAudioTrack:n=JS.Audio;break;case dw.LocalVideoTrack:n=Nr(t=i._hints).call(t,VR.SCREEN_TRACK)?JS.Screen:JS.High;break;case dw.LocalVideoLowTrack:n=JS.Low}return{stream_type:n,ssrcs:s,mid:o}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((t=>{let[r,i]=t;n.push([e,{kind:r,id:i}])}));return n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:i}]=e;switch(r){case aw.VIDEO:return void(n._videoSSRC&&t.push({stream_type:aw.VIDEO,ssrcId:n._videoSSRC}));case aw.AUDIO:return void(n._audioSSRC&&t.push({stream_type:aw.AUDIO,ssrcId:n._audioSSRC}))}})),t}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(dw.LocalVideoTrack),n=this.localTrackMap.get(dw.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return"connected"!==e&&"connected"!==t}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof eN){const n=this.filterTobeUnmutedTracks(e[t]);if(0===n.length)continue;const r=this.createUnmuteMessage(n);return void await Cy(this,hw.RequestUnmuteLocal,r)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter((e=>{let[,{ssrcs:t}]=e;return!!t})),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.recvConnection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(hw.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(hw.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await nE(gE(this.dtlsFailedCount,mE)),this.emit(hw.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(dw.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof bN))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof bN)).length>1)throw new zv(Wv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof eN)).length>1&&(e.some((e=>e instanceof eN&&e._bypassWebAudio))||!SR().webAudioMediaStreamDest))throw new zv(Wv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof bN&&this.pendingLocalTracks.some((e=>e instanceof bN)))throw new zv(Wv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof eN&&this.pendingLocalTracks.some((e=>e instanceof eN))&&(!SR().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof eN&&e._bypassWebAudio))))throw new zv(Wv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!bT("DISABLE_DUAL_STREAM_USE_ENCODING")&&SR().supportDualStreamEncoding,r=uU(uU({},{width:160,height:120,framerate:15,bitrate:50}),t);let i;i=n?e._mediaStreamTrack.clone():Gj(e,r);const s=rE(8,"track-low-"),o=new bN(i,uU(uU({},n&&{scaleResolutionDownBy:CC(r,e)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}),void 0,void 0,s);return o.on(zR.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,GR.LOW_STREAM)})),o._hints.push(VR.LOW_STREAM),e.addListener(BR.NEED_CLOSE,(()=>{o.close()})),o}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,n,r){var i;const s=Array.from(ph(i=this.remoteUserMap).call(i)).find((t=>t._videoSSRC===e));if(s){r||this.store.subscribe(s.uid,"video",void 0,void 0,void 0,void 0,Date.now());const i=this.store.keyMetrics,o=i.subscribe.find((e=>e.userId===s.uid&&"video"===e.type));eS.firstRemoteVideoDecode(this.store.sessionId,qT.FIRST_VIDEO_DECODE,KT.FIRST_VIDEO_DECODE,{peer:s._uintid,videowidth:t,videoheight:n,subscribeElapse:bM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:i.requestAPEnd||0,apStart:i.requestAPStart||0,joinGwEnd:i.joinGatewayEnd||0,joinGwStart:i.joinGatewayStart||0,pcEnd:i.peerConnectionEnd||0,pcStart:i.peerConnectionStart||0,subscriberEnd:(null==o?void 0:o.subscribeEnd)||0,subscriberStart:(null==o?void 0:o.subscribeStart)||0,videoAddNotify:(null==o?void 0:o.streamAdded)||0,state:r?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.recvConnection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const s=await this.recvConnection.getRemoteSSRC(i);return void 0!==s&&s!==n}resetConnection(e){VT.debug("[".concat(this.store.clientId,"] [P2PChannel2] reset connection to ").concat(e)),this.state===uw.Connected?(VT.debug("[".concat(this.store.clientId,"] [P2PChannel2] fallback to websocket but P2PChannel2 state still connected, disconnect first")),this.disconnectForReconnect()):(this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0))}async publishDataChannel(e){throw new zv(Wv.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new zv(Wv.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new zv(Wv.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new zv(Wv.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new zv(Wv.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new zv(Wv.NOT_SUPPORTED)}async preConnect(e,t,n,r,i,s){throw new zv(Wv.NOT_SUPPORTED)}getEstablishParams(){throw new zv(Wv.NOT_SUPPORTED)}async reSubscribe(e){throw new zv(Wv.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new zv(Wv.NOT_SUPPORTED)}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===dw.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,GR.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}}function pU(e){return function(t,n,r){const i=t[n];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return r.value=async function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];switch(e){case oU.SEND_ONLY:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e()}}case oU.RECEIVE_ONLY:{const e=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e()}}default:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n)),t=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e(),t()}}}},r}}function fU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}kS([pU(oU.SEND_ONLY),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],hU.prototype,"p2pConnect",null),kS([pU(oU.SEND_ONLY),xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],hU.prototype,"unpublish",null),kS([pU(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",cv)],hU.prototype,"unpublishLowStream",null),kS([pU(oU.RECEIVE_ONLY),xS("design:type",Function),xS("design:paramtypes",[sU,String,Number,String]),xS("design:returntype",cv)],hU.prototype,"subscribe",null),kS([pU(oU.RECEIVE_ONLY),xS("design:type",Function),xS("design:paramtypes",[sU,String,Number,String]),xS("design:returntype",cv)],hU.prototype,"mockSubscribe",null),kS([pU(oU.RECEIVE_ONLY),xS("design:type",Function),xS("design:paramtypes",[sU,String,Boolean]),xS("design:returntype",cv)],hU.prototype,"unsubscribe",null),kS([pU(oU.RECEIVE_ONLY),xS("design:type",Function),xS("design:paramtypes",[sU,String]),xS("design:returntype",cv)],hU.prototype,"muteRemote",null),kS([pU(oU.RECEIVE_ONLY),xS("design:type",Function),xS("design:paramtypes",[sU,String]),xS("design:returntype",cv)],hU.prototype,"unmuteRemote",null),kS([pU(oU.RECEIVE_ONLY),xS("design:type",Function),xS("design:paramtypes",[sU,String]),xS("design:returntype",cv)],hU.prototype,"hasRemoteMediaWithLock",null),kS([pU(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",cv)],hU.prototype,"disconnectForReconnect",null),kS([pU(oU.RECEIVE_ONLY),xS("design:type",Function),xS("design:paramtypes",[sU,String,Number]),xS("design:returntype",cv)],hU.prototype,"remoteMediaSsrcChanged",null);class gU{constructor(e){sh(this,"store",void 0),sh(this,"onStatsException",void 0),sh(this,"onUploadPublishDuration",void 0),sh(this,"onStatsChanged",void 0),sh(this,"localStats",new Map),sh(this,"remoteStats",new Map),sh(this,"updateStatsInterval",void 0),sh(this,"trafficStats",void 0),sh(this,"trafficStatsPeerList",[]),sh(this,"uplinkStats",void 0),sh(this,"exceptionMonitor",void 0),sh(this,"p2pChannel",void 0),sh(this,"scalabilityMode",oS.L1T1),sh(this,"updateStats",(()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))})),this.store=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new yM,this.exceptionMonitor.on("exception",((e,t,n)=>{this.onStatsException&&this.onStatsException(e,t,n)}))}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(dw.LocalAudioTrack)||mU({},XR)}getLocalVideoTrackStats(){return this.localStats.get(dw.LocalVideoTrack)||mU({},ZR)}getRemoteAudioTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppad+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.audioStats;i&&(n[e]=t(e,i))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{audioStats:i}]=e;i&&(n[r]=t(r,i))}));return n}getRemoteNetworkQualityStats(e){const t={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.networkStats;r&&(t[e]=r)}else Array.from(this.remoteStats.entries()).forEach((e=>{let[n,{networkStats:r}]=e;r&&(t[n]=r)}));return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppvd+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.videoStats;i&&(n[e]=t(e,i))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{videoStats:i}]=e;i&&(n[r]=t(r,i))}));return n}getRTCStats(){let e=0,t=0,n=0,r=0;const i=this.localStats.get(dw.LocalAudioTrack);i&&(e+=i.sendBytes,t+=i.sendBitrate);const s=this.localStats.get(dw.LocalVideoTrack);s&&(e+=s.sendBytes,t+=s.sendBitrate);const o=this.localStats.get(dw.LocalVideoLowTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate),this.remoteStats.forEach((e=>{let{audioStats:t,videoStats:i}=e;t&&(n+=t.receiveBytes,r+=t.receiveBitrate),i&&(n+=i.receiveBytes,r+=i.receiveBitrate)}));let a=1;return this.trafficStats&&(a+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:a,SendBitrate:t,SendBytes:e,RecvBytes:n,RecvBitrate:r,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){e.peer_delay=e.peer_delay.filter((e=>void 0!==e.B_ppad||void 0!==e.B_ppvd)),e.peer_delay.filter((e=>-1===this.trafficStatsPeerList.indexOf(e.peer_uid))).forEach((e=>{var t;const n=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),r=null!=n&&n.videoSSRC?bM.measureFromSubscribeStart(this.store.clientId,n.videoSSRC):0,i=null!=n&&n.audioSSRC?bM.measureFromSubscribeStart(this.store.clientId,n.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,r>i?r:i),this.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}updateUplinkStats(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&VT.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,n){if(!e)return!1;const r=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,i=!n||t.framesDecodeCount>n.framesDecodeCount;return r||!i}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}updateLocalStats(e){Array.from(this.localStats.entries()).forEach((t=>{let[n,r]=t;switch(n){case dw.LocalVideoTrack:case dw.LocalVideoLowTrack:{const t=r,s=mU({},ZR),o=e.getStats(),a=e.getLocalMedia(n);if(o){const n=o.videoSend.find((e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId)));if(n){const r=e.getLocalVideoSize(),i=e.getEncoderConfig(dw.LocalVideoTrack);"H264"!==n.codec&&"H265"!==n.codec&&"VP8"!==n.codec&&"VP9"!==n.codec&&"AV1X"!==n.codec&&"AV1"!==n.codec||(s.codecType=n.codec),s.sendBytes=n.bytes,s.sendBitrate=t?8*Math.max(0,s.sendBytes-t.sendBytes):0,n.inputFrame?(s.captureFrameRate=n.inputFrame.frameRate,s.captureResolutionHeight=n.inputFrame.height,s.captureResolutionWidth=n.inputFrame.width):r&&(s.captureResolutionWidth=r.width,s.captureResolutionHeight=r.height),n.sentFrame?(s.sendFrameRate=n.sentFrame.frameRate,s.sendResolutionHeight=n.sentFrame.height,s.sendResolutionWidth=n.sentFrame.width):r&&(s.sendResolutionWidth=r.width,s.sendResolutionHeight=r.height),n.avgEncodeMs&&(s.encodeDelay=n.avgEncodeMs),i&&i.bitrateMax&&(s.targetSendBitrate=1e3*i.bitrateMax),s.sendPackets=n.packets,s.sendPacketsLost=n.packetsLost,s.sendJitterMs=n.jitterMs,s.sendRttMs=n.rttMs,s.totalDuration=t?t.totalDuration+1:1,s.totalFreezeTime=t?t.totalFreezeTime:0,this.isLocalVideoFreeze(n)&&(s.totalFreezeTime+=1),n.scalabilityMode&&this.scalabilityMode!==n.scalabilityMode&&(VT.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(n.scalabilityMode)),this.scalabilityMode=n.scalabilityMode)}this.trafficStats&&(s.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var i;this.localStats.set(n,s),((null==t?void 0:t.sendResolutionWidth)!==s.sendResolutionWidth||(null==t?void 0:t.sendResolutionHeight)!==s.sendResolutionHeight)&&(null===(i=this.onStatsChanged)||void 0===i||i.call(this,"resolution",{width:s.sendResolutionWidth,height:s.sendResolutionHeight})),s&&a&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,a.track,s);break}case dw.LocalAudioTrack:{const t=r,i=mU({},XR),s=e.getStats(),o=e.getLocalMedia(n);if(s){const n=s.audioSend.find((e=>e.ssrc===(null==o?void 0:o.ssrcs[0].ssrcId)));if(n){if("opus"!==n.codec&&"aac"!==n.codec&&"PCMU"!==n.codec&&"PCMA"!==n.codec&&"G722"!==n.codec||(i.codecType=n.codec),n.inputLevel)i.sendVolumeLevel=Math.round(32767*n.inputLevel);else{const t=e.getLocalAudioVolume();t&&(i.sendVolumeLevel=Math.round(32767*t))}i.sendBytes=n.bytes,i.sendPackets=n.packets,i.sendPacketsLost=n.packetsLost,i.sendJitterMs=n.jitterMs,i.sendRttMs=n.rttMs,i.sendBitrate=t?8*Math.max(0,i.sendBytes-t.sendBytes):0}}this.trafficStats&&(i.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(dw.LocalAudioTrack,i),i&&o&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,o.track,i);break}}}))}updateRemoteStats(e){Array.from(this.remoteStats.entries()).forEach((t=>{var n,r;let[i,{videoStats:s,audioStats:o,videoPcStats:a}]=t;const c=o,l=s,d=a,u=mU({},QR),h=mU({},eI),p=mU({},$R),{audioTrack:f,videoTrack:m,audioSSRC:g,videoSSRC:_}=e.getRemoteMedia(i);let v;v=e instanceof hU?e.getStats(!0):e.getStats();const y=null===(n=v)||void 0===n?void 0:n.audioRecv.find((e=>e.ssrc===g)),E=null===(r=v)||void 0===r?void 0:r.videoRecv.find((e=>e.ssrc===_)),b=this.trafficStats&&this.trafficStats.peer_delay.find((e=>e.peer_uid===i));if(y&&("opus"!==y.codec&&"aac"!==y.codec&&"PCMU"!==y.codec&&"PCMA"!==y.codec&&"G722"!==y.codec||(u.codecType=y.codec),y.outputLevel?u.receiveLevel=Math.round(32767*y.outputLevel):f&&(u.receiveLevel=Math.round(32767*f.getVolumeLevel())),u.receiveBytes=y.bytes,u.receivePackets=y.packets,u.receivePacketsLost=y.packetsLost,u.packetLossRate=u.receivePacketsLost/(u.receivePackets+u.receivePacketsLost),u.receiveBitrate=c?8*Math.max(0,u.receiveBytes-c.receiveBytes):0,u.totalDuration=c?c.totalDuration+1:1,u.totalFreezeTime=c?c.totalFreezeTime:0,u.freezeRate=u.totalFreezeTime/u.totalDuration,u.receiveDelay=y.jitterBufferMs,u.totalDuration>10&&gU.isRemoteAudioFreeze(f)&&(u.totalFreezeTime+=1)),E){"H264"!==E.codec&&"H265"!==E.codec&&"VP8"!==E.codec&&"VP9"!==E.codec&&"AV1X"!==E.codec&&"AV1"!==E.codec||(h.codecType=E.codec),h.receiveBytes=E.bytes,h.receiveBitrate=l?8*Math.max(0,h.receiveBytes-l.receiveBytes):0,h.decodeFrameRate=E.decodeFrameRate<0?0:E.decodeFrameRate,h.renderFrameRate=E.decodeFrameRate<0?0:E.decodeFrameRate,E.outputFrame&&(h.renderFrameRate=E.outputFrame.frameRate),E.receivedFrame?(h.receiveFrameRate=E.receivedFrame.frameRate,h.receiveResolutionHeight=E.receivedFrame.height,h.receiveResolutionWidth=E.receivedFrame.width):m&&(h.receiveResolutionHeight=m._videoHeight||0,h.receiveResolutionWidth=m._videoWidth||0),void 0!==E.framesRateFirefox&&(h.receiveFrameRate=Math.round(E.framesRateFirefox)),h.receivePackets=E.packets,h.receivePacketsLost=E.packetsLost,h.packetLossRate=h.receivePacketsLost/(h.receivePackets+h.receivePacketsLost),h.totalDuration=l?l.totalDuration+1:1,h.totalFreezeTime=l?l.totalFreezeTime:0,h.receiveDelay=E.jitterBufferMs||0;const t=!!_&&e.getRemoteVideoIsReady(_);m&&t&&gU.isRemoteVideoFreeze(m,E,d)&&(h.totalFreezeTime+=1),h.freezeRate=h.totalFreezeTime/h.totalDuration}b&&(u.end2EndDelay=b.B_ad,h.end2EndDelay=b.B_vd,u.transportDelay=b.B_ed,h.transportDelay=b.B_ed,u.currentPacketLossRate=b.B_ealr4/100,h.currentPacketLossRate=b.B_evlr4/100,p.uplinkNetworkQuality=b.B_punq?b.B_punq:0,p.downlinkNetworkQuality=b.B_pdnq?b.B_pdnq:0),this.remoteStats.set(i,{audioStats:u,videoStats:h,videoPcStats:E,networkStats:p}),f&&this.exceptionMonitor.setRemoteAudioStats(f,u),m&&this.exceptionMonitor.setRemoteVideoStats(m,h)}))}}function _U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_U(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class yU extends ly{constructor(e,t,n,r){super(),sh(this,"spec",void 0),sh(this,"token",void 0),sh(this,"websocket",void 0),sh(this,"pingpongTimer",void 0),sh(this,"reconnectMode","retry"),sh(this,"serviceMode",void 0),sh(this,"reqId",0),sh(this,"commandReqId",0),sh(this,"handleWebSocketOpen",(()=>{this.reconnectMode="retry",this.startPingPong()})),sh(this,"handleWebSocketMessage",(e=>{if(!e.data)return;const t=JSON.parse(e.data);t.requestId?this.emit("@".concat(t.requestId,"-").concat(t.sid),t):this.serviceMode===bS.INJECT?this.emit(VS.INJECT_STREAM_STATUS,t):(eS.workerEvent(this.spec.sid,{actionType:"status",serverCode:t.code,workerType:this.serviceMode===bS.TRANSCODE?1:2}),this.emit(VS.PUBLISH_STREAM_STATUS,t))})),this.spec=t,this.token=e,this.serviceMode=r,this.websocket=new Yw("live-streaming",n),this.websocket.on(ES.CONNECTED,this.handleWebSocketOpen),this.websocket.on(ES.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(ES.REQUEST_NEW_URLS,((e,t)=>{wy(this,VS.REQUEST_NEW_ADDRESS).then(e).catch(t)})),this.websocket.on(ES.RECONNECTING,(()=>{this.websocket.reconnectMode=this.reconnectMode}))}init(e){return this.websocket.init(e)}async request(e,t,n,r){this.reqId+=1,"request"===e&&(this.commandReqId+=1);const i=this.commandReqId,s=this.reqId;if(!s||!this.websocket)throw new PS(Wv.UNEXPECTED_ERROR);const o=vU({command:e,sdkVersion:"4.20.2"===mT?"0.0.1":mT,seq:s,requestId:s,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if("closed"===this.websocket.state)throw new PS(Wv.WS_DISCONNECT);const a=()=>new cv(((e,t)=>{this.websocket.once(ES.CLOSED,(()=>t(new PS(Wv.WS_ABORT)))),this.websocket.once(ES.CONNECTED,e)}));"connected"!==this.websocket.state&&await a(),o.clientRequest&&(o.clientRequest.workerToken=this.token);const c=new cv(((e,t)=>{const n=()=>{t(new PS(Wv.WS_ABORT))};this.websocket.once(ES.RECONNECTING,n),this.websocket.once(ES.CLOSED,n),this.once("@".concat(s,"-").concat(this.spec.sid),(t=>{e(t)}))}));r&&eS.workerEvent(this.spec.sid,vU(vU({},r),{},{requestId:i,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));const l=Date.now();this.websocket.sendMessage(o);let d=null;try{d=await c}catch(r){if("closed"===this.websocket.state)throw r;return await a(),await this.request(e,t,n)}return r&&eS.workerEvent(this.spec.sid,vU(vU({},r),{},{requestId:i,actionType:"response",payload:JSON.stringify(d.serverResponse),serverCode:d.code,success:200===d.code,responseTime:Date.now()-l})),200!==d.code&&this.handleResponseError(d),d}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const e="4.20.2"===mT?"0.0.1":mT;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case HS.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void VT.warning("live stream response already exists stream");case HS.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case HS.LIVE_STREAM_RESPONSE_BAD_STREAM:case HS.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new PS(Wv.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case HS.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new PS(Wv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case HS.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new PS(Wv.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case HS.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new PS(Wv.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(VS.WARNING,t,e.serverResponse.url)}case HS.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new PS(Wv.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(VS.WARNING,t,e.serverResponse.url)}case HS.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new PS(Wv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case HS.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new PS(Wv.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case HS.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new PS(Wv.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(VS.WARNING,t,e.serverResponse.url)}case HS.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new PS(Wv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case HS.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new PS(Wv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case HS.LIVE_STREAM_RESPONSE_WORKER_LOST:case HS.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new PS(Wv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case HS.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new PS(Wv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new PS(Wv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case HS.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case HS.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case HS.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case HS.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new PS(Wv.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(sE)}),6e3)}}function EU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class TU extends ly{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mE;super(),sh(this,"onLiveStreamWarning",void 0),sh(this,"onLiveStreamError",void 0),sh(this,"onInjectStatusChange",void 0),sh(this,"spec",void 0),sh(this,"retryTimeout",1e4),sh(this,"connection",void 0),sh(this,"httpRetryConfig",void 0),sh(this,"wsRetryConfig",void 0),sh(this,"streamingTasks",new Map),sh(this,"isStartingStreamingTask",!1),sh(this,"taskMutex",new pE("live-streaming")),sh(this,"cancelToken",sT.CancelToken.source()),sh(this,"transcodingConfig",void 0),sh(this,"injectConfig",bU({},BS)),sh(this,"injectLoopTimes",0),sh(this,"uapResponse",void 0),sh(this,"lastTaskId",1),sh(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=n,this.wsRetryConfig=t}async setTranscodingConfig(e){const t=bU(bU({},FS),e);66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(VT.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((e=>bU(bU(bU({},MS),e),{},{zOrder:e.zOrder?e.zOrder+1:1})))),function(e){Qv(e.width)||Yv(e.width,"config.width",0,1e4),Qv(e.height)||Yv(e.height,"config.height",0,1e4),Qv(e.videoBitrate)||Yv(e.videoBitrate,"config.videoBitrate",1,1e6),Qv(e.videoFrameRate)||Yv(e.videoFrameRate,"config.videoFrameRate"),Qv(e.lowLatency)||qv(e.lowLatency,"config.lowLatency"),Qv(e.audioSampleRate)||Kv(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Qv(e.audioBitrate)||Yv(e.audioBitrate,"config.audioBitrate",1,128),Qv(e.audioChannels)||Kv(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),Qv(e.videoGop)||Yv(e.videoGop,"config.videoGop"),Qv(e.videoCodecProfile)||Kv(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Qv(e.userCount)||Yv(e.userCount,"config.userCount",0,17),Qv(e.backgroundColor)||Yv(e.backgroundColor,"config.backgroundColor",0,16777215),Qv(e.userConfigExtraInfo)||Xv(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!Qv(e.transcodingUsers)&&(Zv(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach(((e,t)=>{LS(e.uid),Qv(e.x)||Yv(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),Qv(e.y)||Yv(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),Qv(e.width)||Yv(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),Qv(e.height)||Yv(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),Qv(e.zOrder)||Yv(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),Qv(e.alpha)||Yv(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),Qv(e.watermark)||US(e.watermark,"watermark"),Qv(e.backgroundImage)||US(e.backgroundImage,"backgroundImage"),e.images&&!Qv(e.images)&&(Zv(e.images,"config.images"),e.images.forEach(((e,t)=>{US(e,"images[".concat(t,"]"))})))}(t);const n=[];t.images&&n.push(...t.images.map((e=>bU(bU(bU({},jS),e),{},{zOrder:255})))),t.backgroundImage&&(n.push(bU(bU(bU({},jS),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(n.push(bU(bU(bU({},jS),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=n,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((e=>bU({},e))),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);const r=(t.userConfigs||[]).map((e=>"number"==typeof e.uid?cv.resolve(e.uid):pR(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig)));if((await cv.all(r)).forEach(((e,n)=>{t.userConfigs&&t.userConfigs[n]&&(t.userConfigs[n].uid=e)})),this.transcodingConfig=t,this.connection)try{var i;const e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(AS(i=this.streamingTasks).call(i)).map((e=>e.taskId)).join("#")});VT.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(e.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(e){if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((t=>{VT.warning("[".concat(this.spec.clientId,"] live streaming receive error"),e.toString(),"try to republish",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then((()=>{VT.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(t.url," success"))})).catch((e=>{VT.error("[".concat(this.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)}))}))}}setInjectStreamConfig(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t}async startLiveStreamingTask(e,t,n){var r;if(Array.from(AS(r=this.streamingTasks).call(r)).find((e=>e.mode===bS.INJECT))&&t===bS.INJECT)return new PS(Wv.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&t===bS.TRANSCODE)throw new PS(Wv.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let i={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};VT.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));const s=await this.taskMutex.lock();if(!this.connection&&n)return void s();if(this.streamingTasks.get(e)&&!n)return s(),new PS(Wv.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw s(),e}switch(t){case bS.TRANSCODE:i.transcodingConfig=bU({},this.transcodingConfig);break;case bS.RAW:break;case bS.INJECT:i={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(i.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const o=this.lastTaskId++;try{const r=new cv(((t,r)=>{nE(this.retryTimeout).then((()=>{if(n)return r(n);const t=this.statusError.get(e);return t?(this.statusError.delete(e),r(t)):void 0}))})),a=await cv.race([this.connection.request("request",{clientRequest:i},!0,{url:e,command:"PublishStream",workerType:t===bS.TRANSCODE?1:2,requestByUser:!n,tid:o.toString()}),r]);this.isStartingStreamingTask=!1,VT.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(a.code)),this.streamingTasks.set(e,{clientRequest:i,mode:t,url:e,taskId:o}),s()}catch(r){if(s(),this.isStartingStreamingTask=!1,!r.data||!r.data.retry||n)throw r;return r.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,r)):await this.startLiveStreamingTask(e,t,r)}}stopLiveStreamingTask(e){return new cv(((t,n)=>{const r=this.streamingTasks.get(e);if(!r||!this.connection)return new PS(Wv.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const i=r.mode;r.abortTask=()=>{VT.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:i===bS.INJECT?"UninjectStream":"UnpublishStream",url:r.url}},!1,{url:e,command:"UnPublishStream",workerType:i===bS.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then((n=>{VT.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(n.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&i!==bS.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),t(),i===bS.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(TS.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,e)})).catch(n)}))}async controlInjectStream(e,t,n,r){const i=this.streamingTasks.get(e);if(!i||!this.connection||i.mode!==bS.INJECT)throw new PS(Wv.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:n,position:r}})).serverResponse}resetAllTask(){var e;const t=Array.from(AS(e=this.streamingTasks).call(e));this.terminate();for(const n of t)this.startLiveStreamingTask(n.url,n.mode).catch((e=>{this.onLiveStreamError&&this.onLiveStreamError(n.url,e)}))}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=sT.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new PS(Wv.UNEXPECTED_ERROR,"live streaming connection has already connected");const t=await wy(this,GS.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new yU(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(VS.WARNING,((e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e))),this.connection.on(VS.PUBLISH_STREAM_STATUS,(e=>this.handlePublishStreamServer(e))),this.connection.on(VS.INJECT_STREAM_STATUS,(e=>this.handleInjectStreamServerStatus(e))),this.connection.on(VS.REQUEST_NEW_ADDRESS,((t,n)=>{if(!this.connection)return n(new PS(Wv.UNEXPECTED_ERROR,"can not get new live streaming address list"));wy(this,GS.REQUEST_WORKER_MANAGER_LIST,e).then((e=>{this.uapResponse=e,t(e.addressList)})).catch(n)})),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||"empty_url",n=this.streamingTasks.get(t),r=e.reason;switch(e.code){case HS.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case HS.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case HS.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case HS.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const r=new PS(Wv.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(n)return VT.error(r.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,r);if(!this.isStartingStreamingTask)return;this.statusError.set(t,r)}case HS.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new PS(Wv.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,r);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case HS.LIVE_STREAM_RESPONSE_WORKER_LOST:case HS.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var i;if(!this.connection)return;this.connection.tryNextAddress();const t=Array.from(AS(i=this.streamingTasks).call(i));for(const n of t)n.abortTask?n.abortTask():(VT.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),this.startLiveStreamingTask(n.url,n.mode,new PS(Wv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((()=>{VT.debug("[".concat(this.spec.clientId,"] republish live stream success"),n.url)})).catch((e=>{VT.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(n.url,e)})));return}}}handleInjectStreamServerStatus(e){const t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(TS.INJECT_STREAM_STATUS_START_SUCCESS,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(TS.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(TS.INJECT_STREAM_STATUS_START_UNAUTHORIZED,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(TS.INJECT_STREAM_STATUS_BROKEN,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(TS.INJECT_STREAM_STATUS_START_TIMEOUT,t,n),void this.streamingTasks.delete(n);default:return void VT.debug("inject stream server status",e)}}hasUrl(e){return this.streamingTasks.has(e)}}class SU{constructor(){sh(this,"destChannelMediaInfos",new Map),sh(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){tw(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){tw(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){DS(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function wU(e){if(!(e instanceof SU))return new PS(Wv.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();return t?0===n.size?new PS(Wv.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new PS(Wv.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class CU extends ly{constructor(e,t,n){super(),sh(this,"ws",void 0),sh(this,"requestId",1),sh(this,"heartBeatTimer",void 0),sh(this,"joinInfo",void 0),sh(this,"clientId",void 0),sh(this,"onOpen",(()=>{this.emit("open"),this.startHeartBeatCheck()})),sh(this,"onClose",(e=>{this.emit("close"),this.dispose()})),sh(this,"onMessage",(e=>{const t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit("status",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit("req_".concat(t.requestId),t)})),this.joinInfo=e,this.clientId=t,this.ws=new Yw("cross-channel-".concat(this.clientId),n),this.ws.on(ES.RECONNECTING,(()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")})),this.ws.on(ES.CONNECTED,this.onOpen),this.ws.on(ES.ON_MESSAGE,this.onMessage),this.ws.on(ES.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new cv(((t,n)=>{const r=window.setTimeout((()=>{n(new PS(Wv.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);this.once(e,(i=>{window.clearTimeout(r),i.state&&0!==i.state?n(new PS(Wv.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)})),this.once("dispose",(()=>{window.clearTimeout(r),n(new PS(Wv.WS_ABORT))}))}))}async request(e){if("closed"===this.ws.state)throw new PS(Wv.WS_DISCONNECT);const t=()=>new cv(((e,t)=>{this.ws.once(ES.CLOSED,(()=>t(new PS(Wv.WS_ABORT)))),this.ws.once(ES.CONNECTED,e)}));"connected"!==this.ws.state&&await t();const n=this.sendMessage(e),r=new cv(((e,t)=>{const r=()=>{t(new PS(Wv.WS_ABORT))};this.ws.once(ES.RECONNECTING,r),this.ws.once(ES.CLOSED,r),this.once("req_".concat(n),e),nE(3e3).then((()=>{this.removeAllListeners("req_".concat(n)),this.ws.off(ES.RECONNECTING,r),this.ws.off(ES.CLOSED,r),t(new PS(Wv.TIMEOUT,"cross channel ws request timeout"))}))})),i=await r;if(!i||200!==i.code)throw new PS(Wv.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(i)));return i}async connect(e){this.ws.removeAllListeners(ES.REQUEST_NEW_URLS),this.ws.on(ES.REQUEST_NEW_URLS,(t=>{t(e)})),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class RU extends ly{set state(e){e!==this._state&&(e!==KS.RELAY_STATE_FAILURE&&(this.errorCode=YS.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,n,r,i){super(),sh(this,"joinInfo",void 0),sh(this,"sid",void 0),sh(this,"clientId",void 0),sh(this,"cancelToken",sT.CancelToken.source()),sh(this,"workerToken",void 0),sh(this,"requestId",0),sh(this,"signal",void 0),sh(this,"prevChannelMediaConfig",void 0),sh(this,"httpRetryConfig",void 0),sh(this,"_resolution",void 0),sh(this,"_state",KS.RELAY_STATE_IDLE),sh(this,"errorCode",YS.RELAY_OK),sh(this,"onStatus",(e=>{VT.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event",qS.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&this.emit("event",qS.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode=YS.SRC_TOKEN_EXPIRED,this.state=KS.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode=YS.DEST_TOKEN_EXPIRED,this.state=KS.RELAY_STATE_FAILURE))})),sh(this,"onReconnect",(async()=>{VT.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",qS.NETWORK_DISCONNECTED),this.state=KS.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch((e=>{this.state!==KS.RELAY_STATE_IDLE&&(VT.error("auto restart channel media relay failed",e.toString()),this.errorCode=YS.SERVER_CONNECTION_LOST,this.state=KS.RELAY_STATE_FAILURE)}))})),this.joinInfo=e,this.clientId=t,this.sid=iE(),this.signal=new CU(this.joinInfo,this.clientId,n),this.httpRetryConfig=r,this._resolution=i}async startChannelMediaRelay(e){if(this.state!==KS.RELAY_STATE_IDLE)throw new PS(Wv.INVALID_OPERATION);this.state=KS.RELAY_STATE_CONNECTING,await this.connect(),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&"SetSourceChannel"===e.data.serverResponse.command)throw new PS(Wv.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&"SetDestChannelStatus"===e.serverResponse.command)throw new PS(Wv.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&"StartPacketTransfer"===e.serverResponse.command)throw new PS(Wv.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==KS.RELAY_STATE_RUNNING)throw new PS(Wv.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==KS.RELAY_STATE_RUNNING)throw new PS(Wv.INVALID_OPERATION);const t=this.genMessage(zS.SetVideoProfile);await this.signal.request(t),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),VT.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=KS.RELAY_STATE_IDLE,this.dispose()}dispose(){VT.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=sT.CancelToken.source(),this.state=KS.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await _R(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",qS.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(zS.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const n=this.genMessage(zS.SetSdkProfile,e);await this.signal.request(n),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const r=this.genMessage(zS.SetSourceChannel,e);await this.signal.request(r),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",qS.PACKET_JOINED_SRC_CHANNEL),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const i=this.genMessage(zS.SetSourceUserId,e);await this.signal.request(i),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const s=this.genMessage(zS.SetDestChannel,e);await this.signal.request(s),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",qS.PACKET_JOINED_DEST_CHANNEL),VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const o=this.genMessage(zS.StartPacketTransfer,e);await this.signal.request(o),this.emit("event",qS.PACKET_SENT_TO_DEST_CHANNEL),this.state=KS.RELAY_STATE_RUNNING,VT.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){const t=this.genMessage(zS.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",qS.PACKET_UPDATE_DEST_CHANNEL),VT.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const e=this.genMessage(zS.StopPacketTransfer);await this.signal.request(e),VT.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){const n=[],r=[],i=[];this.requestId+=1;const s={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:mT,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.20.2"===s.sdkVersion&&(s.sdkVersion="0.0.1");let o=null,a=null;switch(e){case zS.SetSdkProfile:return s.clientRequest={command:"SetSdkProfile",type:"multi_channel"},s;case zS.SetSourceChannel:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new PS(Wv.UNEXPECTED_ERROR,"can not find source config");return s.clientRequest={command:"SetSourceChannel",uid:"0",channelName:a.channelName,token:a.token||this.joinInfo.appId},s;case zS.SetSourceUserId:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new PS(Wv.UNEXPECTED_ERROR,"can not find source config");return s.clientRequest={command:"SetSourceUserId",uid:a.uid+""},s;case zS.SetDestChannel:if(o=t&&t.getDestChannelMediaInfo(),!o)throw new PS(Wv.UNEXPECTED_ERROR,"can not find dest config");return o.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),s.clientRequest={command:"SetDestChannel",channelName:n,uid:r,token:i},s;case zS.StartPacketTransfer:return s.clientRequest={command:"StartPacketTransfer"},s;case zS.Reconnect:return s.clientRequest={command:"Reconnect"},s;case zS.StopPacketTransfer:return s.clientRequest={command:"StopPacketTransfer"},s;case zS.UpdateDestChannel:if(o=t&&t.getDestChannelMediaInfo(),!o)throw new PS(Wv.UNEXPECTED_ERROR,"can not find dest config");return o.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),s.clientRequest={command:"UpdateDestChannel",channelName:n,uid:r,token:i},s;case zS.SetVideoProfile:s.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return s}}function IU(e){var t={},n=!1;function r(t,r){return n=!0,{done:!1,value:new TM(r=new NM((function(n){n(e[t](r))})),1)}}return t[void 0!==ju&&th||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}var NU=r(OM);function OU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class PU extends Aw{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Nr(t=Object.keys(RT)).call(t,e)})))]}constructor(e,t){super(e,t),sh(this,"store",void 0),sh(this,"peerConnection",void 0),sh(this,"remoteSDP",void 0),sh(this,"initialOffer",void 0),sh(this,"statsFilter",void 0),sh(this,"useRTX",!1),sh(this,"localCapabilities",void 0),sh(this,"localCandidateCount",0),sh(this,"allCandidatesReceived",!1),sh(this,"establishPromise",void 0),sh(this,"mutex",new pE("P2PConnection-mutex")),this.store=t,this.peerConnection=new RTCPeerConnection(PU.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=mj(this.peerConnection,bT("STATS_UPDATE_INTERVAL"),void 0,Nv()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=yj(e.sdp),n=vj(e.sdp,{filterRTX:!this.useRTX,filterVideoFec:bT("FILTER_VIDEO_FEC"),filterAudioFec:bT("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=n,this.initialOffer=e,xU(xU({},t),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:n},offerSDP:e.sdp})}catch(e){throw new zv(Wv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,r,i,s){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(e){sh(this,"sessionDesc",void 0),sh(this,"localCapabilities",void 0),sh(this,"rtpCapabilities",void 0),sh(this,"candidates",void 0),sh(this,"iceParameters",void 0),sh(this,"dtlsParameters",void 0),sh(this,"setup",void 0),sh(this,"currentMidIndex",void 0),sh(this,"cname",void 0),e=qy(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:s,localCapabilities:o,sdkCodec:a,cname:c}=e,l=JM.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=i,this.candidates=r,this.iceParameters=t,this.dtlsParameters=n,this.setup=s,this.localCapabilities=o,this.cname=c;for(let d=0;d<l.mediaDescriptions.length;d++){const e=l.mediaDescriptions[d];if(e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=n.fingerprints,e.attributes.candidates=r,e.attributes.setup=s,"video"===e.media.mediaType){e.media.fmts=i.videoCodecs.map((e=>e.payloadType.toString(10)));let t=i.videoCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Nr(n=t.encodingName.toLowerCase()).call(n,a)}));0===t.length&&(t=i.videoCodecs),e.attributes.payloads=t,e.attributes.extmaps=i.videoExtensions}"audio"===e.media.mediaType&&(e.media.fmts=i.audioCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=i.audioCodecs,e.attributes.extmaps=i.audioExtensions),l.mediaDescriptions[d]=this.mungMediaDesc(e)}this.sessionDesc=l,this.currentMidIndex=l.mediaDescriptions.length-1}toString(){return JM.print(this.sessionDesc)}send(e,t,n){const{ssrcs:r,ssrcGroups:i}=Tj(t,this.cname),s=this.sessionDesc.mediaDescriptions.find((t=>e===aw.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType)),o=r[0].attributes.label,a=r[0].attributes.mslabel;return s.attributes.ssrcs=s.attributes.ssrcs.concat(r),s.attributes.ssrcGroups=s.attributes.ssrcGroups.concat(i),{id:o,mslabel:a}}batchSend(e){return e.map((e=>{let{kind:t,ssrcMsg:n}=e;return this.send(t,n,void 0)}))}stopSending(e){this.sessionDesc.mediaDescriptions.forEach((t=>{const n=[],r=[],i=[];t.attributes.ssrcs.forEach((t=>{Nr(e).call(e,t.attributes.label||"")?i.push(t):n.push(t)})),t.attributes.ssrcGroups.forEach((e=>{var t;Nr(t=i.map((e=>e.ssrcId))).call(t,e.ssrcIds[0])||r.push(e)})),t.attributes.ssrcs=n,t.attributes.ssrcGroups=r}))}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}receive(e,t,n){e.forEach(((e,t)=>{const n=e._mediaStreamTrack,r=this.sessionDesc.mediaDescriptions.findIndex((e=>e.attributes.mid===n.kind)),i=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],e);this.sessionDesc.mediaDescriptions[r]=i}))}stopReceiving(e){}updateCandidates(e){e===cw.TCP?this.candidates.forEach((e=>{-1===this.candidates.findIndex((t=>"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port))&&this.candidates.push(AU(AU({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this.candidates=this.candidates.filter((e=>"tcp"!==e.transport));for(const t of this.sessionDesc.mediaDescriptions)t.attributes.candidates=this.candidates}restartICE(e){e=qy(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}mungRecvMediaDsec(e,t){const n=qy(e);return Sj(n,t),Cj(n,t),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,n){const r=this.sessionDesc.mediaDescriptions.find((t=>e===aw.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid));if(r){const e=r.attributes.ssrcs.find((e=>e.attributes.label===t));var i;e&&(e.attributes.label=n,null===(i=e.attributes.msid)||void 0===i||i.replace(t,n))}}mungMediaDesc(e){const t=qy(e);return wj(t),function(e){const t=e.attributes.extmaps.find((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t}getSSRC(e){for(const t of this.sessionDesc.mediaDescriptions)for(const n of t.attributes.ssrcs)if(n.attributes.label===e)return[n]}}({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:r.send,remoteSetup:i,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:s});const o=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){throw new zv(Wv.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}send(e,t){var n=this;return xM((function*(){const r=yield SM(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const r=e.map((e=>n.peerConnection.addTrack(e._mediaStreamTrack))),i=yield SM(n.peerConnection.createOffer()),s=JM.parse(i.sdp),o=e.map((e=>{const t=e._mediaStreamTrack,r=s.mediaDescriptions.find((e=>e.attributes.mid===t.kind));if(!r)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,n){const r=e.attributes.ssrcs.filter((e=>e.attributes.label===t)),i=e.attributes.ssrcGroups;if(0===r.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(i&&r.length>1){const e=i.find((e=>-1!==e.ssrcIds.indexOf(r[0].ssrcId)));return e?[{ssrcId:e.ssrcIds[0],rtx:n?e.ssrcIds[1]:void 0}]:[{ssrcId:r[0].ssrcId}]}return[{ssrcId:r[0].ssrcId}]}(r,t.id,n.useRTX)}));let a;try{a=yield o}catch(e){throw r.forEach((e=>{Iv()&&e.replaceTrack(null),n.peerConnection.removeTrack(e)})),e}const c=n.mungSendOfferSDP(i.sdp,e);n.remoteSDP.receive(e,t,a);const l=n.remoteSDP.toString();return yield SM(n.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield SM(n.applySendEncodings(r,e)),yield SM(n.peerConnection.setRemoteDescription({type:"answer",sdp:l})),e.map(((e,t)=>{const n=e._mediaStreamTrack.id;return{localSSRC:o[t],id:n}}))}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async stopSending(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{Iv()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{id:n,mslabel:i}=this.remoteSDP.send(e,t,r),s=new cv(((t,r)=>{const s=setTimeout((()=>{r(new Error("Cannot receive track, id: ".concat(n)))}),1e4),o=r=>{const a=Ev();if(("Safari"===a.name&&11===Number(a.version)||Ov())&&r.track.id!==n&&r.streams[0].id===i){var c;const i=r.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,n,r.track.id),this.peerConnection.removeEventListener("track",o),clearTimeout(s),void t(i)}if(r.track.id===n)return this.peerConnection.removeEventListener("track",o),clearTimeout(s),void t(r.track)};this.peerConnection.addEventListener("track",o)})),o=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const a=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(a),{track:await s,id:n}}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("sender' length doesn't match mids' length.");t.map((e=>{if(Iv()&&e.track)e.track.enabled=!1;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!1)),e.setParameters(t)}}))}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Senders' length doesn't match mids' length.");t.map((async e=>{if(Iv()&&e.track)e.track.enabled=!0;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!0)),await e.setParameters(t)}}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return xM((function*(){const n=yield SM(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(SR().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===cw.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(VT.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===cw.RELAY)return;e!==cw.RELAY&&t.remoteSDP.updateCandidates(e);const n=yield SM(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=yj(n.sdp),{remoteIceParameters:i}=yield r.iceParameters;t.remoteSDP.restartICE(i);const s=t.remoteSDP.toString();yield SM(t.peerConnection.setLocalDescription(n)),yield SM(t.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(e){VT.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const e=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const r=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getSenders().filter((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e}));1===n.length&&await this.applySendEncodings(n,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getSenders().find((e=>{var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t}));n&&await n.replaceTrack(e._mediaStreamTrack)}createDataChannels(e,t){throw new zv(Wv.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(e){throw new zv(Wv.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,VT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,VT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),bT("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[],sdpSemantics:"plan-b"};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(by(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...PU.turnServerConfigToIceServers(e.turnServer.servers)),bT("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...PU.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e._mediaStreamTrack.id}))),!t)return VT.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(!SR().supportSetRtpSenderParameters)return VT.warn("Browser not support set rtp-sender parameters");const r={},i={};if(e instanceof bN)switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(bT("DSCP_TYPE")&&Vv()){var s;const e=bT("DSCP_TYPE");Nr(s=["very-low","low","medium","high"]).call(s,e)&&(i.networkPriority=e)}const o=t.getParameters(),a=null===(n=o.encodings)||void 0===n?void 0:n[0];a&&Object.assign(a,i),Object.assign(o,r),VT.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(o.encodings))),await t.setParameters(o)}async applySendEncodings(e,t){try{if(!SR().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];r&&i&&await this.updateRtpSenderEncodings(i,r)}}catch(e){VT.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t){const n=JM.parse(e);return t.forEach(((e,t)=>{const r=e._mediaStreamTrack,i=n.mediaDescriptions.find((e=>e.attributes.mid===r.kind));i&&Sj(i,e)})),JM.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const t=this.remoteSDP.batchSend(e).map(((t,n)=>{let{id:r,mslabel:i}=t;const{kind:s}=e[n];return new cv(((e,t)=>{const n=setTimeout((()=>{t(new Error("Cannot receive track, id: ".concat(r)))}),1e4),o=t=>{const a=Ev();if("Safari"===a.name&&11===Number(a.version)&&t.track.id!==r&&t.streams[0].id===i){var c;const i=t.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(s,r,t.track.id),this.peerConnection.removeEventListener("track",o),clearTimeout(n),void e({track:i,id:r})}if(t.track.id===r)return this.peerConnection.removeEventListener("track",o),clearTimeout(n),void e({track:t.track,id:r})};this.peerConnection.addEventListener("track",o)}))})),n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const r=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(r),await cv.all(t)}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(e){if(SR().supportPCSetConfiguration){const t=PU.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}function DU(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("Locking from P2PConnection.".concat(t));try{for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return await r.apply(this,s)}finally{n()}},n}function LU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}kS([DU,xS("design:type",Function),xS("design:paramtypes",[Object,Object,Array,Object,String,String]),xS("design:returntype",cv)],PU.prototype,"connect",null),kS([DU,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],PU.prototype,"stopSending",null),kS([DU,xS("design:type",Function),xS("design:paramtypes",[String,Array,String,Object]),xS("design:returntype",cv)],PU.prototype,"receive",null),kS([DU,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],PU.prototype,"stopReceiving",null),kS([DU,xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],PU.prototype,"muteRemote",null),kS([DU,xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],PU.prototype,"unmuteRemote",null),kS([DU,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],PU.prototype,"muteLocal",null),kS([DU,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],PU.prototype,"unmuteLocal",null),kS([DU,xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],PU.prototype,"close",null),kS([DU,xS("design:type",Function),xS("design:paramtypes",[String,dI]),xS("design:returntype",cv)],PU.prototype,"updateEncoderConfig",null),kS([DU,xS("design:type",Function),xS("design:paramtypes",[String,dI]),xS("design:returntype",cv)],PU.prototype,"updateSendParameters",null),kS([DU,xS("design:type",Function),xS("design:paramtypes",[dI,String]),xS("design:returntype",cv)],PU.prototype,"replaceTrack",null),kS([DU,xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],PU.prototype,"getRemoteSSRC",null);const jU="9",UU=4e4;function FU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class VU extends Aw{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Nr(t=Object.keys(RT)).call(t,e)})))]}constructor(e,t){super(e,t),sh(this,"store",void 0),sh(this,"peerConnection",void 0),sh(this,"remoteSDP",void 0),sh(this,"initialOffer",void 0),sh(this,"transportEventReceiver",void 0),sh(this,"statsFilter",void 0),sh(this,"useXR",bT("USE_XR")),sh(this,"localCapabilities",void 0),sh(this,"remoteCodecs",void 0),sh(this,"localCandidateCount",0),sh(this,"allCandidatesReceived",!1),sh(this,"dataStreamChannelMap",new Map),sh(this,"establishPromise",void 0),sh(this,"recoveredDataChannelIds",[]),sh(this,"currentDataChannelId",1),sh(this,"mutex",new pE("P2PConnection-mutex")),this.store=t,this.peerConnection=new RTCPeerConnection(VU.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=mj(this.peerConnection,bT("STATS_UPDATE_INTERVAL"),void 0,Nv()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,this.remoteSDP)if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(e);const n=this.remoteSDP.toString();null==t||t(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}else VT.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");else VT.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(t))}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=yj(e.sdp),n=await Oj({filterRTX:!bT("USE_PUB_RTX")&&!bT("USE_SUB_RTX"),filterVideoFec:bT("FILTER_VIDEO_FEC"),filterAudioFec:bT("FILTER_AUDIO_FEC"),filterVideoCodec:bT("FILTER_VIDEO_CODEC")},{useXR:this.useXR});return this.localCapabilities=xj(n),this.initialOffer=e,BU(BU({},t),{},{rtpCapabilities:n,offerSDP:e.sdp})}catch(e){throw new zv(Wv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,r,i,s){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{get localCapabilities(){return qy(this._localCapabilities)}get rtpCapabilities(){return qy(this._rtpCapabilities)}get candidates(){return qy(this._candidates)}get iceParameters(){return qy(this._iceParameters)}get dtlsParameters(){return qy(this._dtlsParameters)}constructor(e){sh(this,"sessionDesc",void 0),sh(this,"_localCapabilities",void 0),sh(this,"_rtpCapabilities",void 0),sh(this,"_candidates",void 0),sh(this,"_iceParameters",void 0),sh(this,"_dtlsParameters",void 0),sh(this,"setup",void 0),sh(this,"currentMidIndex",void 0),sh(this,"cname",void 0),sh(this,"firefoxSsrcMidMap",new Map),e=qy(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:s,localCapabilities:o,cname:a}=e,c=JM.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=o,this.setup=s,this.cname=a;const l=this.rtpCapabilities.send;for(const d of c.mediaDescriptions){if(d.attributes.iceUfrag=t.iceUfrag,d.attributes.icePwd=t.icePwd,d.attributes.fingerprints=n.fingerprints,d.attributes.candidates=r,d.attributes.setup=s,"video"===d.media.mediaType&&(d.media.fmts=l.videoCodecs.map((e=>e.payloadType.toString(10))),d.attributes.payloads=l.videoCodecs,d.attributes.extmaps=l.videoExtensions,bT("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:UU,rtx:bT("USE_SUB_RTX")?40001:void 0}],this.cname);d.attributes.ssrcs=e,d.attributes.ssrcGroups=t}if("audio"===d.media.mediaType&&(d.media.fmts=l.audioCodecs.map((e=>e.payloadType.toString(10))),d.attributes.payloads=l.audioCodecs,d.attributes.extmaps=l.audioExtensions,Pj(d),bT("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:2e4}],this.cname);d.attributes.ssrcs=e,d.attributes.ssrcGroups=t}}this.sessionDesc=c,this.currentMidIndex=c.mediaDescriptions.length-1}preloadRemoteMedia(){const e=bT("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send;for(let s=1;s<e;s++){const e=2*s+2e4,o=2*s+UU,{ssrcs:a,ssrcGroups:c}=Tj([{ssrcId:e}],this.cname),{ssrcs:l,ssrcGroups:d}=Tj([{ssrcId:o,rtx:bT("USE_SUB_RTX")?o+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:jU,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:d,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*s)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:jU,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:a,ssrcGroups:c,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*s+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return JM.print(this.sessionDesc)}send(e,t,n,r){const{ssrcs:i,ssrcGroups:s}=Tj(t,this.cname,bT("SYNC_GROUP")?n:void 0),o=this.findPreloadMediaDesc(i);if(o){if(Nv()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,o.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(o);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(o,r),{mid:o.attributes.mid,needExchangeSDP:!0}}return{mid:o.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,i);let n;return-1===t||1===t&&(Iv()||Pv())||0===t&&bT("USE_SUB_RTX")||Dv()?(n=this.createOrRecycleSendMedia(e,i,s,"sendonly",r),this.updateBundleMids()):(n=qy(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=i,n.attributes.ssrcGroups=s,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,r)),Nv()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,n.attributes.mid),{mid:n.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:n,mslabel:r}=e;return this.send(t,n,r)})),n=[];let r=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:i}=e;i&&(r=!0),n.push(t)})),{mids:n,needExchangeSDP:r}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{"0"===e.attributes.mid||Nv()||Dv()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Nr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Nr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}receive(e,t,n,r){e.forEach(((e,i)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[i])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}updateCandidates(e){const t=this._candidates.filter((e=>"udp"===e.transport));if(e===cw.TCP){if(0===t.length)return;if(bT("TCP_CANDIDATE_ONLY")){const e=this._candidates.filter((e=>"tcp"===e.transport));t.forEach((t=>{-1===e.findIndex((e=>e.connectionAddress===t.connectionAddress))&&e.push(MU(MU({},t),{},{foundation:"tcpcandidate",priority:Number(t.priority)-1+"",transport:"tcp",port:Number(t.port)+90+""}))})),this._candidates=e}else{const e=[];t.forEach((t=>{e.push(MU(MU({},t),{},{foundation:"tcpcandidate",priority:Number(t.priority)-1+"",transport:"tcp",port:Number(t.port)+90+""}))})),this._candidates=[...t,...e]}}else if(e===cw.RELAY){if(0!==t.length)return;{const e=this._candidates.filter((e=>"tcp"===e.transport));e.forEach((e=>{t.push(MU(MU({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=[...t,...e]}}else 0===t.length?(this._candidates.filter((e=>"tcp"===e.transport)).forEach((e=>{t.push(MU(MU({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=t):this._candidates=this._candidates.filter((e=>"tcp"!==e.transport));for(const n of this.sessionDesc.mediaDescriptions)n.attributes.candidates=this.candidates}restartICE(e){e=qy(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const r=n.media.mediaType===e&&"0"!==n.media.port&&("sendonly"===n.attributes.direction||"sendrecv"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(Nv()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==n.attributes.mid&&"1"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return r}))}createOrRecycleDataChannel(){for(const n of this.sessionDesc.mediaDescriptions)if("application"===n.media.mediaType)return{mediaDesc:n,needExchangeSDP:!1};this.currentMidIndex+=1;const e="".concat(this.currentMidIndex),t={media:{mediaType:"application",port:jU,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(e),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,n,r,i,s){const o=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=Lj(o,a,this.localCapabilities.send,o===aw.VIDEO?r:i),l=o===aw.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const d="".concat(this.currentMidIndex);let u={media:{mediaType:o,port:jU,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(d)}};u=this.mungRecvMediaDsec(u,e,s);const h=this.findFirstClosedMedia(o);if(h){const e=this.sessionDesc.mediaDescriptions.indexOf(h);this.sessionDesc.mediaDescriptions[e]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}updateRemoteCodec(e,t,n){const r=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Nr(t=Object.keys(RT)).call(t,e)})))],i=new Set(t);if(r.every((e=>i.has(e))))return VT.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;const s=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var n;return Nr(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))));if(0===s.length)return VT.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(r," codecs: ").concat(t)),!1;const o=[...new Set(s.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")))];let a;if(VT.debug("updateRemoteCodec, from ".concat(r," to ").concat(o)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((e=>"video"===e.media.mediaType&&"recvonly"===e.attributes.direction));else if(a=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Nr(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction)),a.length!==e.length)return VT.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;this._rtpCapabilities.recv.videoCodecs=s;const c=this.localCapabilities.send,l=this.rtpCapabilities.recv,d=Lj(aw.VIDEO,l,c,n);return a.forEach((e=>{const t=d.map((e=>e.payloadType.toString(10)));VT.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from ").concat(e.attributes.payloads," to ").concat(d)),e.attributes.payloads=d,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,n,r,i){const s=this.rtpCapabilities.send,o=e===aw.VIDEO?s.videoCodecs:s.audioCodecs,a=e===aw.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let l={media:{mediaType:e,port:jU,protos:["UDP","TLS","RTP","SAVPF"],fmts:o.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:o,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};l=this.mungSendMediaDesc(l,i);const d=this.findFirstClosedMedia(e);if(d){const e=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,n){const r=qy(e);return wj(r),Sj(r,t),Cj(r,t),Rj(r),Ij(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=qy(e);return Ij(n,t,this.localCapabilities.recv),Pj(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>Nv()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:r,remoteSetup:i,localCapabilities:this.localCapabilities,cname:s}),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const o=this.remoteSDP.toString(),a=JM.parse(this.initialOffer.sdp),c=a.mediaDescriptions.find((e=>"audio"===e.media.mediaType));c&&Pj(c),this.useXR&&Dj(a);const l=JM.print(a),d=this.logSDPExchange(l||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),null==d||d(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o});const u=this.peerConnection.getTransceivers()[0];if(null!=u&&u.receiver&&this.tryBindTransportEvents(u.receiver),bT("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}send(e,t,n){var r=this;return xM((function*(){const i=yield SM(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const s=[];e.forEach((e=>{const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});s.push(t),e._updateRtpTransceiver(t)})),Nv()&&!0===bT("SIMULCAST")&&(yield SM(r.applySimulcastForFirefox(s,e)));const o=yield SM(r.peerConnection.createOffer()),a=r.remoteSDP.predictReceivingMids(e.length),c=r.mungSendOfferSDP(o.sdp,e,a),l=JM.parse(c),d=a.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return Ej(t,bT("USE_PUB_RTX"))}));let u;try{u=yield d}catch(i){u=[],r.remoteSDP.receive(e,t,n,u);const s=r.remoteSDP.toString();throw yield SM(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield SM(r.peerConnection.setRemoteDescription({type:"answer",sdp:s})),yield SM(r.stopSending(a,!0)),i}r.remoteSDP.receive(e,t,n,u);const h=r.remoteSDP.toString(),p=r.logSDPExchange(c,"offer","local","send");return yield SM(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield SM(r.applySimulcastEncodings(s,e)),yield SM(r.applySendEncodings(s,e)),null==p||p(h),yield SM(r.peerConnection.setRemoteDescription({type:"answer",sdp:h})),s.map(((e,t)=>{const n=a[t];return{localSSRC:d[t],id:n,transceiver:e}}))}catch(e){throw e instanceof zv?e:new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(e);if(n&&"open"===n.readyState)VT.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const t=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if("number"!=typeof t)throw new Error("create DataChannel error, because cannot get dc id");n=this.peerConnection.createDataChannel("datastream-channel",{id:t,negotiated:!0,ordered:!1,maxRetransmits:bT("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(e,n)}t.forEach((e=>{e._updateOriginDataChannel(n)}));const{needExchangeSDP:r}=this.remoteSDP.sendDataChannel();if(r){const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),VT.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else VT.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(e){throw e instanceof zv?e:new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return t&&(t.id&&this.recoveredDataChannelIds.push(t.id),t.close()),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof zv?e:new zv(Wv.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(e.toString()))}}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:s}=this.remoteSDP.send(e,t,n,r);if(s){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),s=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(s||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:s}),VT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else VT.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."));const o=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!o)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:o.receiver.track,id:i,transceiver:o}}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:n}=this.remoteSDP.batchSend(e);if(n){const e=this.remoteSDP.toString(),t=this.logSDPExchange(e,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const n=await this.peerConnection.createAnswer();null==t||t(n.sdp||""),await this.peerConnection.setLocalDescription(n),VT.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))}else VT.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));return t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e,transceiver:t}}))}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async(e,t)=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return xM((function*(){const n=yield SM(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(SR().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===cw.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(VT.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===cw.RELAY)return;t.remoteSDP.updateCandidates(e);const n=yield SM(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=yj(n.sdp),{remoteIceParameters:i}=yield r.iceParameters;t.remoteSDP.restartICE(i);const s=t.remoteSDP.toString(),o=t.logSDPExchange(n.sdp||"","offer","local","restartICE");t.store.descriptionStart(),yield SM(t.peerConnection.setLocalDescription(n)),null==o||o(s),yield SM(t.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(e){VT.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),s=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==s||s(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new zv(Wv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?Nv()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:BU(BU({},$M),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:BU(BU({},$M),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,VT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,VT.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),bT("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[]};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(by(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...VU.turnServerConfigToIceServers(e.turnServer.servers)),bT("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...VU.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),bT("FORCE_TURN_TCP")?t.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),bT("ENABLE_ENCODED_TRANSFORM")&&SR().supportWebRTCEncodedTransform&&(t.encodedInsertableStreams=!0),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(vC(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!bT("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}tryBindTransportEvents(e){const t=e.transport;if(t){this.transportEventReceiver=e,t.onstatechange=()=>{var e;null!=t&&t.state&&(null===(e=this.onDTLSTransportStateChange)||void 0===e||e.call(this,t.state))},t.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const n=t.iceTransport;n&&(n.onstatechange=()=>{const e=null==t?void 0:t.iceTransport.state;var n;e&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,e))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){const{local:e,remote:t}=n.getSelectedCandidatePair();VT.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:t.type,protocol:t.protocol,address:t.address,port:t.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))),!t)return VT.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return VT.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!SR().supportSetRtpSenderParameters)return VT.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const r={},i={};switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(e._encoderConfig){var s;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(i.maxBitrate=1e3*t),(Nr(s=e._hints).call(s,VR.LOW_STREAM)||e.isUseScaleResolutionDownBy)&&(n&&(i.maxFramerate=EC(n)),r&&r>=1&&(i.scaleResolutionDownBy=r))}if(bT("DSCP_TYPE")&&Vv()){var o;const e=bT("DSCP_TYPE");Nr(o=["very-low","low","medium","high"]).call(o,e)&&(i.networkPriority=e)}const a=t.getParameters(),c=null===(n=a.encodings)||void 0===n?void 0:n[0];Nv()&&!c&&(r.encodings=[i]),c&&Object.assign(c,i),Object.assign(a,r),VT.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!SR().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];i instanceof bN&&!this.isVP8Simulcast(i)&&await this.updateRtpSenderEncodings(i,r.sender)}}catch(e){VT.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=JM.parse(e);return t.forEach(((e,t)=>{const i=n[t],s=r.mediaDescriptions.find((e=>e.attributes.mid===i));s&&(Sj(s,e),Nj(s,e,this.store.codec))})),JM.print(r)}mungReceiveAnswerSDP(e,t,n){const r=JM.parse(e),i=r.mediaDescriptions.find((e=>e.attributes.mid===t));return i&&(n===aw.AUDIO&&"audio"===i.media.mediaType&&Pj(i),this.useXR&&Dj(r)),JM.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,s,o;const c=e[a],l=t[a];if(l instanceof bN&&!Nr(n=l._hints).call(n,VR.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(s=l._scalabilityMode)&&void 0!==s&&s.numSpatialLayers&&(null===(o=l._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!Nv()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof bN&&this.isVP8Simulcast(r)){const t=e[n],i={},s={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];const o=t.sender.getParameters();await t.sender.setParameters(Object.assign(o,i))}}}isVP8Simulcast(e){var t,n,r,i,s;return!!(e instanceof bN&&bT("SIMULCAST")&&"vp8"===this.store.codec&&!Nr(t=e._hints).call(t,VR.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(s=e._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(bT("SDP_LOGGING"))return VT.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(e){if(SR().supportPCSetConfiguration){const t=VU.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}function GU(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return await r.apply(this,s)}finally{n()}},n}function HU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}kS([GU,xS("design:type",Function),xS("design:paramtypes",[Array,Array]),xS("design:returntype",cv)],VU.prototype,"updateRemoteRTPCapabilities",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[Object,Object,Array,Object,String,String]),xS("design:returntype",cv)],VU.prototype,"connect",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[Object,Array]),xS("design:returntype",cv)],VU.prototype,"createDataChannels",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[String,Array,String,Object]),xS("design:returntype",cv)],VU.prototype,"receive",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],VU.prototype,"batchReceive",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],VU.prototype,"stopReceiving",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],VU.prototype,"muteRemote",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],VU.prototype,"unmuteRemote",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],VU.prototype,"muteLocal",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],VU.prototype,"unmuteLocal",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],VU.prototype,"close",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[String,dI]),xS("design:returntype",cv)],VU.prototype,"updateEncoderConfig",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[String,dI]),xS("design:returntype",cv)],VU.prototype,"updateSendParameters",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[dI,String]),xS("design:returntype",cv)],VU.prototype,"replaceTrack",null),kS([GU,xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],VU.prototype,"getRemoteSSRC",null);const zU="v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0\na=msid-semantic: WMS\na=ice-lite\nm=application 9 UDP/DTLS/SCTP webrtc-datachannel\nc=IN IP4 127.0.0.1\na=mid:0\n",qU="9",KU=2e4,YU=4e4;class JU{get localCapabilities(){return qy(this._localCapabilities)}get rtpCapabilities(){return qy(this._rtpCapabilities)}get candidates(){return qy(this._candidates)}get iceParameters(){return qy(this._iceParameters)}get dtlsParameters(){return qy(this._dtlsParameters)}constructor(e){sh(this,"sessionDesc",void 0),sh(this,"_localCapabilities",void 0),sh(this,"_rtpCapabilities",void 0),sh(this,"_candidates",void 0),sh(this,"_iceParameters",void 0),sh(this,"_dtlsParameters",void 0),sh(this,"setup",void 0),sh(this,"currentMidIndex",void 0),sh(this,"cname",void 0),sh(this,"firefoxSsrcMidMap",new Map),e=qy(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:s,localCapabilities:o,cname:a}=e,c=JM.parse(zU);this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=o,this.setup=s,this.cname=a;const l=this.rtpCapabilities.send;for(const d of c.mediaDescriptions){if(d.attributes.iceUfrag=t.iceUfrag,d.attributes.icePwd=t.icePwd,d.attributes.fingerprints=n.fingerprints,d.attributes.candidates=r,d.attributes.setup=s,"application"===d.media.mediaType&&(d.attributes.sctpPort="5000"),"video"===d.media.mediaType&&(d.media.fmts=l.videoCodecs.map((e=>e.payloadType.toString(10))),d.attributes.payloads=l.videoCodecs,d.attributes.extmaps=l.videoExtensions,bT("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:YU,rtx:bT("USE_SUB_RTX")?40001:void 0}],this.cname);d.attributes.ssrcs=e,d.attributes.ssrcGroups=t}if("audio"===d.media.mediaType&&(d.media.fmts=l.audioCodecs.map((e=>e.payloadType.toString(10))),d.attributes.payloads=l.audioCodecs,d.attributes.extmaps=l.audioExtensions,Pj(d),bT("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:KU}],this.cname);d.attributes.ssrcs=e,d.attributes.ssrcGroups=t}}this.sessionDesc=c,this.currentMidIndex=c.mediaDescriptions.length-1}updateRemoteRTPCapabilities(e){const t=JM.parse(zU);this._rtpCapabilities=e;const n=this.rtpCapabilities.send;for(const r of t.mediaDescriptions){if(r.attributes.iceUfrag=this._iceParameters.iceUfrag,r.attributes.icePwd=this._iceParameters.icePwd,r.attributes.fingerprints=this._dtlsParameters.fingerprints,r.attributes.candidates=this._candidates,r.attributes.setup=this.setup,"application"===r.media.mediaType&&(r.attributes.sctpPort="5000"),"video"===r.media.mediaType&&(r.media.fmts=n.videoCodecs.map((e=>e.payloadType.toString(10))),r.attributes.payloads=n.videoCodecs,r.attributes.extmaps=n.videoExtensions,bT("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:YU,rtx:bT("USE_SUB_RTX")?40001:void 0}],this.cname);r.attributes.ssrcs=e,r.attributes.ssrcGroups=t}if("audio"===r.media.mediaType&&(r.media.fmts=n.audioCodecs.map((e=>e.payloadType.toString(10))),r.attributes.payloads=n.audioCodecs,r.attributes.extmaps=n.audioExtensions,bT("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=Tj([{ssrcId:KU}],this.cname);r.attributes.ssrcs=e,r.attributes.ssrcGroups=t}}this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1}preloadRemoteMedia(e){this.rtpCapabilities;const t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send;for(let s=1;s<e;s++){const e=2*s+KU,o=2*s+YU,{ssrcs:a,ssrcGroups:c}=Tj([{ssrcId:e}],this.cname),{ssrcs:l,ssrcGroups:d}=Tj([{ssrcId:o,rtx:bT("USE_SUB_RTX")?o+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:qU,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:d,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*s-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:qU,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:a,ssrcGroups:c,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*s)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return JM.print(this.sessionDesc)}send(e,t,n,r){const{ssrcs:i,ssrcGroups:s}=Tj(t,this.cname,bT("SYNC_GROUP")?n:void 0),o=this.findPreloadMediaDesc(i);if(o){if(Nv()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,o.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(o);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(o,r),{mid:o.attributes.mid,needExchangeSDP:!0}}return{mid:o.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,i);let n;return-1===t||Iv()||Ov()||Pv()||0===t&&bT("USE_SUB_RTX")?(n=this.createOrRecycleSendMedia(e,i,s,"sendonly",r),this.updateBundleMids()):(n=qy(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=i,n.attributes.ssrcGroups=s,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,r)),Nv()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,n.attributes.mid),{mid:n.attributes.mid,needExchangeSDP:!0}}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:n,mslabel:r}=e;return this.send(t,n,r)})),n=[];let r=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:i}=e;i&&(r=!0),n.push(t)})),{mids:n,needExchangeSDP:r}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{"0"===e.attributes.mid||Nv()||Iv()||Ov()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Nr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Nr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}receive(e,t,n,r){e.forEach(((e,i)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[i])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}updateCandidates(e){e===cw.TCP?this._candidates.forEach((e=>{-1===this._candidates.findIndex((t=>"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port))&&this._candidates.push(WU(WU({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this._candidates=this._candidates.filter((e=>"tcp"!==e.transport));for(const t of this.sessionDesc.mediaDescriptions)t.attributes.candidates=this.candidates}restartICE(e){e=qy(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const r=n.media.mediaType===e&&"0"!==n.media.port&&("sendonly"===n.attributes.direction||"sendrecv"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(Nv()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==n.attributes.mid&&"1"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return r}))}createOrRecycleRecvMedia(e,t,n,r,i,s){const o=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=Lj(o,a,this.localCapabilities.send,o===aw.VIDEO?r:i),l=o===aw.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const d="".concat(this.currentMidIndex);let u={media:{mediaType:o,port:qU,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(d)}};u=this.mungRecvMediaDsec(u,e,s);const h=this.findFirstClosedMedia(o);if(h){const e=this.sessionDesc.mediaDescriptions.indexOf(h);this.sessionDesc.mediaDescriptions[e]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}updateRemoteCodec(e,t,n){const r=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Nr(t=Object.keys(RT)).call(t,e)})))],i=new Set(t);if(r.every((e=>i.has(e))))return VT.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;const s=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var n;return Nr(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))));if(0===s.length)return VT.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(r," codecs: ").concat(t)),!1;const o=[...new Set(s.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")))];let a;if(VT.debug("updateRemoteCodec, from ".concat(r," to ").concat(o)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((e=>"video"===e.media.mediaType&&"recvonly"===e.attributes.direction));else if(a=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Nr(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction)),a.length!==e.length)return VT.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;this._rtpCapabilities.recv.videoCodecs=s;const c=this.localCapabilities.send,l=this.rtpCapabilities.recv,d=Lj(aw.VIDEO,l,c,n);return a.forEach((e=>{const t=d.map((e=>e.payloadType.toString(10)));VT.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from ").concat(e.attributes.payloads," to ").concat(d)),e.attributes.payloads=d,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,n,r,i){const s=this.rtpCapabilities.send,o=e===aw.VIDEO?s.videoCodecs:s.audioCodecs,a=e===aw.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let l={media:{mediaType:e,port:qU,protos:["UDP","TLS","RTP","SAVPF"],fmts:o.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:o,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};l=this.mungSendMediaDesc(l,i);const d=this.findFirstClosedMedia(e);if(d){const e=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,n){const r=qy(e);return wj(r),Sj(r,t),Cj(r,t),Rj(r),Ij(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=qy(e);return Ij(n,t,this.localCapabilities.recv),Pj(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>Nv()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}function XU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XU(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class QU extends Aw{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get localCodecs(){let e;return this.localCapabilities&&(e=xj(this.localCapabilities)),[...new Set(e&&e.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Nr(t=Object.keys(RT)).call(t,e)})))]}constructor(e,t,n){super(e,t),sh(this,"store",void 0),sh(this,"peerConnection",void 0),sh(this,"remoteSDP",void 0),sh(this,"initialOffer",void 0),sh(this,"transportEventReceiver",void 0),sh(this,"statsFilter",void 0),sh(this,"useXR",bT("USE_XR")),sh(this,"localCapabilities",void 0),sh(this,"localCandidateCount",0),sh(this,"allCandidatesReceived",!1),sh(this,"remoteCodecs",void 0),sh(this,"dataStreamChannelMap",new Map),sh(this,"establishPromise",void 0),sh(this,"mutex",new pE("NVExtentionsConnection-mutex")),sh(this,"rtcMedia",void 0),this.store=t,this.peerConnection=n,this.statsFilter=mj(this.peerConnection,bT("STATS_UPDATE_INTERVAL"),void 0,Nv()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(e){try{const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=yj(e.sdp),n=await Oj({filterRTX:!bT("USE_PUB_RTX")&&!bT("USE_SUB_RTX"),filterVideoFec:bT("FILTER_VIDEO_FEC"),filterAudioFec:bT("FILTER_AUDIO_FEC"),filterVideoCodec:bT("FILTER_VIDEO_CODEC")},{useXR:this.useXR});return this.localCapabilities=n,this.initialOffer=e,ZU(ZU({},t),{},{rtpCapabilities:n,offerSDP:e.sdp})}catch(e){throw new PS(Wv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,r,i,s){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new JU({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:r,remoteSetup:i,localCapabilities:xj(this.localCapabilities),cname:s});const o=this.remoteSDP.toString(),a=JM.parse(this.initialOffer.sdp),c=a.mediaDescriptions.find((e=>"audio"===e.media.mediaType));c&&Pj(c),this.useXR&&Dj(a);const l=JM.print(a),d=this.logSDPExchange(l||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),null==d||d(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new PS(Wv.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,this.remoteSDP)if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(e);const n=this.remoteSDP.toString();null==t||t(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}else VT.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");else VT.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(t))}async updateRemoteConnect(e){var t,n,r,i;null===(t=this.remoteSDP)||void 0===t||t.updateRemoteRTPCapabilities(e),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&(null===(i=this.remoteSDP)||void 0===i||i.updateRemoteCodec([],this.remoteCodecs,this.store.codec)),null===(n=this.remoteSDP)||void 0===n||n.preloadRemoteMedia(2);const s=null===(r=this.remoteSDP)||void 0===r?void 0:r.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const o=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(o),VT.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(e,t,n){var r=this;return xM((function*(){const i=yield SM(r.mutex.lock("From NVExtentionsConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const s=[];e.forEach((e=>{const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});s.push(t)})),Nv()&&!0===bT("SIMULCAST")&&(yield SM(r.applySimulcastForFirefox(s,e)));const o=yield SM(r.peerConnection.createOffer()),a=r.remoteSDP.predictReceivingMids(e.length),c=r.mungSendOfferSDP(o.sdp,e,a),l=JM.parse(c),d=a.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return Ej(t,bT("USE_PUB_RTX"))}));let u;try{u=yield d}catch(i){u=[],r.remoteSDP.receive(e,t,n,u);const s=r.remoteSDP.toString();throw yield SM(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield SM(r.peerConnection.setRemoteDescription({type:"answer",sdp:s})),yield SM(r.stopSending(a,!0)),i}r.remoteSDP.receive(e,t,n,u);const h=r.remoteSDP.toString(),p=r.logSDPExchange(c,"offer","local","send");return yield SM(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield SM(r.applySimulcastEncodings(s,e)),yield SM(r.applySendEncodings(s,e)),null==p||p(h),yield SM(r.peerConnection.setRemoteDescription({type:"answer",sdp:h})),s.map(((e,t)=>{const n=a[t];return{localSSRC:d[t],id:n,transceiver:e}}))}catch(e){throw e instanceof PS?e:new PS(Wv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new PS(Wv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(e);return n&&"open"===n.readyState?VT.debug("[P2PConnection] Channels are already available and can be reused directly."):(n=this.peerConnection.createDataChannel("datastream-channel",{ordered:!1,maxRetransmits:bT("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(e,n)),void t.forEach((e=>{e._updateOriginDataChannel(n)}))}catch(e){throw e instanceof PS?e:new PS(Wv.DATACHANNEL_FAILED,"NVExtentionsConnection.createDataChannels failed; ".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return null==t||t.close(),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof PS?e:new PS(Wv.DATACHANNEL_FAILED,"NVExtentionsConnection.stopDataChannels failed; ".concat(e.toString()))}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:s}=this.remoteSDP.send(e,t,n,r);if(s){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),s=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(s||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:s}),VT.debug("[NVExtentionsConnection] receive ".concat(e," by exchanging SDP."))}else VT.debug("[NVExtentionsConnection] receive ".concat(e," no need to exchange SDP."));const o=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!o)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:o.receiver.track,id:i}}catch(e){throw new PS(Wv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:n}=this.remoteSDP.batchSend(e);if(n){const e=this.remoteSDP.toString(),t=this.logSDPExchange(e,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const n=await this.peerConnection.createAnswer();null==t||t(n.sdp||""),await this.peerConnection.setLocalDescription(n),VT.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else VT.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e}}))}catch(e){throw new PS(Wv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new PS(Wv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new PS(Wv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new PS(Wv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new PS(Wv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async(e,t)=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new PS(Wv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return xM((function*(){const n=yield SM(t.mutex.lock("From NVExtentionsConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(SR().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===cw.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(VT.debug("restartICE change iceTransportPolicy from [".concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===cw.RELAY)return;e!==cw.RELAY&&t.remoteSDP.updateCandidates(e);const n=yield SM(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=yj(n.sdp),{remoteIceParameters:i}=yield r.iceParameters;t.remoteSDP.restartICE(i);const s=t.remoteSDP.toString(),o=t.logSDPExchange(n.sdp||"","offer","local","restartICE");yield SM(t.peerConnection.setLocalDescription(n)),null==o||o(s),yield SM(t.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(e){VT.warning("restart ICE failed, abort operation",e)}finally{n()}}))()}close(){var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),s=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==s||s(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new PS(Wv.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?Nv()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}getP2PConnectionParams(){var e;if(null===(e=this.peerConnection.currentLocalDescription)||void 0===e||!e.sdp||!this.localCapabilities)throw new Error;return ZU(ZU({},yj(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,VT.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,VT.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),bT("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[]};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(by(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...QU.turnServerConfigToIceServers(e.turnServer.servers)),bT("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...QU.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),bT("FORCE_TURN_TCP")?t.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(vC(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!bT("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}async applySendEncodings(e,t){try{if(!SR().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let d=0;d<e.length;d++){const u=e[d],h=t[d];if(h&&h instanceof bN){var n,r,i;if(this.isVP8Simulcast(h))continue;const e={},t={};switch(h._optimizationMode){case"motion":e.degradationPreference="maintain-framerate";break;case"detail":e.degradationPreference="maintain-resolution";break;default:e.degradationPreference="balanced"}var s,o,a,c;if(null!==(n=h._encoderConfig)&&void 0!==n&&n.bitrateMax&&(t.maxBitrate=1e3*(null===(s=h._encoderConfig)||void 0===s?void 0:s.bitrateMax)),Nr(r=h._hints).call(r,VR.LOW_STREAM)&&(null!==(o=h._encoderConfig)&&void 0!==o&&o.frameRate&&(t.maxFramerate=EC(h._encoderConfig.frameRate)),null!==(a=h._encoderConfig)&&void 0!==a&&a.scaleResolutionDownBy&&(null===(c=h._encoderConfig)||void 0===c?void 0:c.scaleResolutionDownBy)>1&&(t.scaleResolutionDownBy=h._encoderConfig.scaleResolutionDownBy)),bT("DSCP_TYPE")&&Vv()){var l;const e=bT("DSCP_TYPE");Nr(l=["very-low","low","medium","high"]).call(l,e)&&(t.networkPriority=e)}const d=u.sender.getParameters(),p=null===(i=d.encodings)||void 0===i?void 0:i[0];Nv()&&!p&&(e.encodings=[t]),p&&Object.assign(p,t),Object.assign(d,e),await u.sender.setParameters(d)}}}catch(e){VT.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,t,n){const r=JM.parse(e);return t.forEach(((e,t)=>{const i=n[t],s=r.mediaDescriptions.find((e=>e.attributes.mid===i));s&&(Sj(s,e),Nj(s,e,this.store.codec))})),JM.print(r)}mungReceiveAnswerSDP(e,t,n){const r=JM.parse(e),i=r.mediaDescriptions.find((e=>e.attributes.mid===t));return i&&n===aw.AUDIO&&"audio"===i.media.mediaType&&Pj(i),this.useXR&&Dj(r),JM.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,s,o;const c=e[a],l=t[a];if(l instanceof bN&&!Nr(n=l._hints).call(n,VR.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(s=l._scalabilityMode)&&void 0!==s&&s.numSpatialLayers&&(null===(o=l._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!Nv()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof bN&&this.isVP8Simulcast(r)){const t=e[n],i={},s={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];const o=t.sender.getParameters();await t.sender.setParameters(Object.assign(o,i))}}}isVP8Simulcast(e){var t,n,r,i,s;return!!(e instanceof bN&&bT("SIMULCAST")&&"vp8"===this.store.codec&&!Nr(t=e._hints).call(t,VR.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(s=e._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(bT("SDP_LOGGING"))return VT.upload("exchanging ".concat(n," ").concat(t," SDP during NVExtentionsConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(e){if(SR().supportPCSetConfiguration){const t=QU.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}function $U(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From NVExtentionsConnection.".concat(t));try{for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return await r.apply(this,s)}finally{n()}},n}function eF(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=NU,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new tF(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function tF(e){function t(e){if(Object(e)!==e)return cv.reject(new TypeError(e+" is not an object."));var t=e.done;return cv.resolve(e.value).then((function(e){return{value:e,done:t}}))}return tF=function(e){this.s=e,this.n=e.next},tF.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?cv.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?cv.reject(e):t(n.apply(this.s,arguments))}},new tF(e)}kS([$U,xS("design:type",Function),xS("design:paramtypes",[Object,Object,Array,Object,String,String]),xS("design:returntype",cv)],QU.prototype,"connect",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[Array,Array]),xS("design:returntype",cv)],QU.prototype,"updateRemoteRTPCapabilities",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],QU.prototype,"updateRemoteConnect",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[Object,Array]),xS("design:returntype",cv)],QU.prototype,"createDataChannels",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[String,Array,String,Object]),xS("design:returntype",cv)],QU.prototype,"receive",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],QU.prototype,"batchReceive",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],QU.prototype,"stopReceiving",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],QU.prototype,"muteRemote",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],QU.prototype,"unmuteRemote",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],QU.prototype,"muteLocal",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],QU.prototype,"unmuteLocal",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],QU.prototype,"close",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[String,dI]),xS("design:returntype",cv)],QU.prototype,"updateEncoderConfig",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[String,dI]),xS("design:returntype",cv)],QU.prototype,"updateSendParameters",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[dI,String]),xS("design:returntype",cv)],QU.prototype,"replaceTrack",null),kS([$U,xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],QU.prototype,"getRemoteSSRC",null);class nF extends Aw{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get localCodecs(){return this._p2pConnection.localCodecs}constructor(e,t){super(e,t),sh(this,"store",void 0),sh(this,"peerConnection",void 0),sh(this,"cname",void 0),sh(this,"mutex",new pE("DataChannelConnection-mutex")),sh(this,"dataChannel",void 0),sh(this,"_p2pConnection",void 0),sh(this,"establishPromise",void 0),sh(this,"_nvMedia",void 0),this.store=t,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(nF.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new QU(e,t,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var e;const t=null===(e=this._nvMedia)||void 0===e?void 0:e.getLocalRtpCapabilities();return await this._p2pConnection.establish(t)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(e,t,n,r,i,s){return this.cname=s,await this._p2pConnection.connect(e,t,n,r,i,s),await new cv(((e,t)=>{const r=setTimeout((()=>{this.closeSignal(),t(new PS(Wv.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(n))))}),2e3);this.dataChannel.onopen=()=>{if("open"===this.dataChannel.readyState)return clearTimeout(r),void e()},this.dataChannel.onerror=e=>{this.closeSignal(),t(e)}})),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}async updateRemoteRTPCapabilities(e,t){return this._p2pConnection.updateRemoteRTPCapabilities(e,t)}send(e,t,n){var r=this;return xM((function*(){const i=yield SM(r.mutex.lock("From DataChannelConnection.send"));try{return yield*IU(eF(r._p2pConnection.send(e,t,n)))}finally{i()}}))()}async stopSending(e,t){return this._p2pConnection.stopSending(e,t)}async createDataChannels(e,t){return this._p2pConnection.createDataChannels(e,t)}async stopDataChannels(e){return this._p2pConnection.stopDataChannels(e)}async receive(e,t,n,r){return this._nvMedia?(VT.debug("[DataChannelConnection] receive ".concat(e," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(e,t,this.cname)):(VT.debug("[DataChannelConnection] receive ".concat(e," by WebRTC.")),await this._p2pConnection.receive(e,t,n,r))}async batchReceive(e){return[...await this._p2pConnection.batchReceive(e)]}async stopReceiving(e){return await this._p2pConnection.stopReceiving(e)}async muteRemote(e){return await this._p2pConnection.muteRemote(e)}async unmuteRemote(e){return await this._p2pConnection.unmuteRemote(e)}async muteLocal(e){return await this._p2pConnection.muteLocal(e)}async unmuteLocal(e){return await this._p2pConnection.unmuteLocal(e)}restartICE(e){var t=this;return xM((function*(){return yield*IU(eF(t._p2pConnection.restartICE(e)))}))()}close(){var e;null===(e=this._nvMedia)||void 0===e||e.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(e){return this._p2pConnection.getRemoteVideoIsReady(e)}updateRemoteConnect(e){var t;null===(t=this._nvMedia)||void 0===t||t.setRemoteRtpCapabilities(e),this._p2pConnection.updateRemoteConnect(e)}async updateEncoderConfig(e,t){return await this._p2pConnection.updateEncoderConfig(e,t)}async updateSendParameters(e,t){return await this._p2pConnection.updateSendParameters(e,t)}setStatsRemoteVideoIsReady(e,t){this._p2pConnection.setStatsRemoteVideoIsReady(e,t)}async replaceTrack(e,t){return await this._p2pConnection.replaceTrack(e,t)}async getRemoteSSRC(e){return this._p2pConnection.getRemoteSSRC(e)}logSDPExchange(e,t,n,r){if(bT("SDP_LOGGING"))return VT.upload("exchanging ".concat(n," ").concat(t," SDP during DataChannelConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}static resolvePCConfiguration(e){const t={iceServers:[]};return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(by(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...nF.turnServerConfigToIceServers(e.turnServer.servers)),bT("USE_TURN_SERVER_OF_GATEWAY")&&t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...nF.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),bT("FORCE_TURN_TCP")?t.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(t.iceTransportPolicy="relay")})))),t}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(vC(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!bT("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=e=>{var t;return null===(t=this.onICEConnectionStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onConnectionStateChange=e=>{var t;return null===(t=this.onConnectionStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onDTLSTransportStateChange=e=>{var t;return null===(t=this.onDTLSTransportStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onDTLSTransportError=e=>{var t;return null===(t=this.onDTLSTransportError)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onICETransportStateChange=e=>{var t;return null===(t=this.onICETransportStateChange)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstAudioReceived=e=>{var t;return null===(t=this.onFirstAudioReceived)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstVideoReceived=e=>{var t;return null===(t=this.onFirstVideoReceived)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstAudioDecoded=e=>{var t;return null===(t=this.onFirstAudioDecoded)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onFirstVideoDecoded=(e,t,n)=>{var r;return null===(r=this.onFirstVideoDecoded)||void 0===r?void 0:r.call(this,e,t,n)},this._p2pConnection.onFirstVideoDecodedTimeout=e=>{var t;return null===(t=this.onFirstVideoDecodedTimeout)||void 0===t?void 0:t.call(this,e)},this._p2pConnection.onSelectedLocalCandidateChanged=(e,t)=>{var n;return null===(n=this.onSelectedLocalCandidateChanged)||void 0===n?void 0:n.call(this,e,t)},this._p2pConnection.onSelectedRemoteCandidateChanged=(e,t)=>{var n;return null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n?void 0:n.call(this,e,t)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}setConfiguration(e){this._p2pConnection.setConfiguration(e)}}function rF(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From DataChannelConnection.".concat(t));try{for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return await r.apply(this,s)}finally{n()}},n}function iF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iF(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oF(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=NU,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new aF(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function aF(e){function t(e){if(Object(e)!==e)return cv.reject(new TypeError(e+" is not an object."));var t=e.done;return cv.resolve(e.value).then((function(e){return{value:e,done:t}}))}return aF=function(e){this.s=e,this.n=e.next},aF.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?cv.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?cv.reject(e):t(n.apply(this.s,arguments))}},new aF(e)}kS([rF,xS("design:type",Function),xS("design:paramtypes",[Object,Object,Array,Object,String,String]),xS("design:returntype",cv)],nF.prototype,"connect",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[Array,Array]),xS("design:returntype",cv)],nF.prototype,"updateRemoteRTPCapabilities",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[Object,Array]),xS("design:returntype",cv)],nF.prototype,"createDataChannels",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[String,Array,String,Object]),xS("design:returntype",cv)],nF.prototype,"receive",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],nF.prototype,"stopReceiving",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],nF.prototype,"muteRemote",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],nF.prototype,"unmuteRemote",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],nF.prototype,"muteLocal",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],nF.prototype,"unmuteLocal",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],nF.prototype,"close",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[String,dI]),xS("design:returntype",cv)],nF.prototype,"updateEncoderConfig",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[String,dI]),xS("design:returntype",cv)],nF.prototype,"updateSendParameters",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[dI,String]),xS("design:returntype",cv)],nF.prototype,"replaceTrack",null),kS([rF,xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],nF.prototype,"getRemoteSSRC",null);class cF extends ly{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(hw.StateChange,t,this._state)}constructor(e,t){super(),sh(this,"store",void 0),sh(this,"statsUploader",void 0),sh(this,"connection",void 0),sh(this,"localTrackMap",new Map),sh(this,"remoteUserMap",new Map),sh(this,"localDataChannels",[]),sh(this,"remoteDataChannelMap",new Map),sh(this,"pendingLocalTracks",[]),sh(this,"pendingRemoteTracks",[]),sh(this,"pendingLocalDataChannels",[]),sh(this,"pendingRemoteDataChannels",[]),sh(this,"statsCollector",void 0),sh(this,"isPlanB",!1),sh(this,"shouldForwardP2PCreation",void 0),sh(this,"iceFailedCount",0),sh(this,"dtlsFailedCount",0),sh(this,"mutex",new pE("P2PChannel-mutex")),sh(this,"_state",uw.Disconnected),sh(this,"_pcStatsUploadType",bT("NEW_ICE_RESTART")?lw.FIRST_CONNECTION:lw.OLD_FIRST_CONNECTION),sh(this,"_isInRestartIce",!1),sh(this,"_isStartRestartIce",!1),sh(this,"_restartStates",["disconnected","failed"]),sh(this,"_restartTimer",void 0),sh(this,"_isFirstConnected",!0),sh(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==uw.Connected)return void n(new zv(Wv.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const i=r.find((e=>"videoLowTrack"===e[0]));i&&i[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const s=this.createMuteMessage(r);await Cy(this,hw.RequestMuteLocal,s),t()}catch(e){n(e)}finally{r()}})),sh(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==uw.Connected)return void n(new zv(Wv.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();const i=r.find((e=>"videoLowTrack"===e[0]));if(i){const t=i[1];if(t.track._originMediaStreamTrack.stop(),!bT("DISABLE_DUAL_STREAM_USE_ENCODING")&&SR().supportDualStreamEncoding){const n=e._mediaStreamTrack.clone();t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}else{const n=Gj(e,Iy(this,hw.RequestLowStreamParameter));t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}await new cv(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}await this.connection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const s=this.createUnmuteMessage(r);await Cy(this,hw.RequestUnmuteLocal,s),t()}catch(e){n(e)}finally{r()}})),sh(this,"handleUpdateVideoEncoder",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const n=this.localTrackMap.get(dw.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==uw.Connected)return void t();const{id:r,track:i}=n;await this.connection.updateSendParameters(r,i),await this.connection.updateEncoderConfig(r,i),this.emit(hw.UpdateVideoEncoder,i),t()}catch(e){n(e)}finally{r()}})),sh(this,"handleSetOptimizationMode",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const n=this.localTrackMap.get(dw.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==uw.Connected)return;const{id:r,track:i}=n;await this.connection.updateSendParameters(r,i),t()}catch(e){n(e)}finally{r()}})),sh(this,"handleReplaceMixingTrack",(async(e,t,n,r)=>{if(!this.connection||this.state!==uw.Connected)return void t();const i=lU([e]);let s;VT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(i.getTrackId(),"]")),"boolean"==typeof r&&r||(s=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(e,i),t()}catch(e){n(e)}finally{var o;null===(o=s)||void 0===o||o()}})),sh(this,"handleReplaceTrack",(async(e,t,n,r)=>{let i;VT.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var s;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.connection||!n||this.state!==uw.Connected)return void t();if(await(null===(s=this.connection)||void 0===s?void 0:s.replaceTrack(e,n[1].id)),this.isPlanB){const t=n[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(n[0],t)}if(n[0]===dw.LocalVideoTrack&&!bT("DISABLE_DUAL_STREAM_USE_ENCODING")&&SR().supportDualStreamEncoding){const t=this.localTrackMap.get(dw.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new cv(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var o;null===(o=i)||void 0===o||o()}})),sh(this,"handleGetRTCStats",(e=>{e(this.statsCollector.getRTCStats())})),sh(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),sh(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),sh(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),sh(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new iU(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!SR().supportUnifiedPlan||bT("CHROME_FORCE_PLAN_B")&&Vv(),this.shouldForwardP2PCreation=bT("FORWARD_P2P_CREATION")&&SR().supportPCSetConfiguration&&function(){const e=bv();return e===fv.ANDROID||e===fv.IOS||e===fv.HARMONY_OS}(),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new nF({},this.store):this.isPlanB?new PU({},this.store):new VU({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e,t){var n;this.state=uw.New;const r=this.shouldForwardP2PCreation&&"closed"===(null===(n=this.connection)||void 0===n?void 0:n.peerConnectionState);if(this.shouldForwardP2PCreation&&!r||(r&&this.connection&&(VT.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new nF(e,this.store):this.isPlanB?new PU(e,this.store):new VU(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new zv(Wv.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=bT("NEW_ICE_RESTART")?lw.FIRST_CONNECTION:lw.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e,t,n,r,i,s){if(!this.connection)throw new zv(Wv.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof nF?this.connection.updateRemoteConnect(r):(this.store.peerConnectionStart(),await this.connection.connect(e,t,n,r,i,s),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=uw.Connected)}updateRemoteRTPCapabilities(e){const t=Array.from(this.localTrackMap.entries()).filter((e=>{var t;let[n]=e;return Nr(t=[dw.LocalVideoLowTrack,dw.LocalVideoTrack]).call(t,n)})),n=t.map((e=>{let[,{id:t}]=e;return t})),r=t.map((e=>{let[t]=e;return t}));if(this.connection instanceof VU){if(eS.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(r),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!Nr(e).call(e,this.store.codec)){const t=["vp8","h264"].find((t=>Nr(e).call(e,t)));t&&(this.store.codec=t,VT.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(t,".")))}this.connection.updateRemoteRTPCapabilities(n,e)}}async preConnect(e,t,n,r,i,s){if(!this.connection)throw new zv(Wv.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const o=await this.connection.connect(e,t,n,r,i,s);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=uw.Connected,o}getEstablishParams(){if(this.connection instanceof nF)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}async publishDataChannel(e){if(!this.connection||this.state!==uw.Connected){if(this.state===uw.Disconnected)throw new zv(Wv.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return void e.forEach((e=>{var t;Nr(t=this.pendingLocalDataChannels).call(t,e)||this.pendingLocalDataChannels.push(e)}))}const t=this.filterTobePublishedDataChannels(e);0!==t.length&&(t.forEach((e=>{const t=Date.now();this.store.publish(e.id.toString(),"datachannel",t)})),await this.connection.createDataChannels(this.store.uid,t),t.forEach((e=>{this.localDataChannels.push(e);const t=Date.now();this.store.publish(e.id+"","datachannel",void 0,t)})))}publish(e,t,n){var r=this;return xM((function*(){const i=yield SM(r.mutex.lock("From P2PChannel.publish"));try{if(!r.connection||r.state!==uw.Connected){if(r.state===uw.Disconnected)throw new zv(Wv.UNEXPECTED_ERROR,"PeerConnection already disconnected.");r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(t))}r.store.pubId=r.store.pubId+1,bM.markPublishStart(r.store.clientId,r.store.pubId);const i=r.filterTobePublishedTracks(e,t,n);if(0===i.length)return void(yield SM(r.tryToUnmuteAudio(e)));yield*IU(oF(r.doPublish(r.connection,i)))}finally{i()}}))()}doPublish(e,t){var n=this;return xM((function*(){t.forEach((e=>{let{track:t,type:r}=e;const i=Date.now();n.store.publish(t.getTrackId(),r===dw.LocalAudioTrack?"audio":"video",i)})),n.bindLocalTrackEvents(t);const r=t.map((e=>{let{track:t}=e;return t})),i=yield SM(e.send(t.map((e=>{let{track:t}=e;return t})),n.store.codec,n.store.audioCodec)),s=(yield SM(i.next())).value,o=n.createGatewayPublishMessage(t,s);let a;try{a=yield o}catch(e){throw i.throw(e),(null==e?void 0:e.code)===Wv.WS_ABORT&&t.forEach((e=>{let{track:t}=e;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(t),e}const c=n.mapPubResToRemoteConfig(o,a),l=(yield SM(i.next(c))).value,d=bT("ENABLE_VIDEO_SEI");r.forEach((async e=>{const t=e.getRTCRtpTransceiver();t&&d&&(e.trackMediaType===aw.VIDEO?await async function(e,t){if(!SR().supportWebRTCEncodedTransform)return void VT.warning("browser not support video encoded transform");if(gM.has(e))return;if(!e.track)return;const n={track:e.track};if(Rv()){if(!e.createEncodedStreams)return void VT.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(e){return void VT.error("create video-encoded-streams error",e&&e.message)}let s=[];t.on("sei-to-send",(e=>{s.push(e)}));const o=new TransformStream({transform(t,i){n.controller||(n.controller=i),e.track&&e.track.id!==n.track.id&&(VT.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const o=s.shift();o&&(t.data=mM(t.data,o)),i.enqueue(t)}});i.readable.pipeThrough(o).pipeTo(i.writable)}else{if(!Iv())return;{if("undefined"==typeof RTCRtpScriptTransform)return void VT.warning("browser not support RTCRtpScriptTransform");const i=dM(),s=new MessageChannel;await new cv((e=>i.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(i,{name:"tx",port:s.port2},[s.port2]);e.transform=o,await new cv((e=>i.onmessage=t=>{"started"===t.data&&e(void 0)})),t.on("sei-to-send",(e=>{s.port1.postMessage({sei:e})})),s.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id&&(VT.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r))},n.worker=i}}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}const t=gM.get(e);if(t){gM.delete(e);try{var n,i;null===(n=t.controller)||void 0===n||n.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){VT.warning(e&&e.message)}}}gM.set(e,n),e.track.addEventListener("ended",r)}(t.sender,e):e.trackMediaType===aw.AUDIO&&await async function(e){if(!SR().supportWebRTCEncodedTransform)return void VT.warning("browser not support audio encoded transform");if(uM.has(e))return;if(!e.track)return;const t={track:e.track};if(Rv()){if(!e.createEncodedStreams)return void VT.warning("browser not support createEncodedStreams() API");let r=null;try{r=e.createEncodedStreams()}catch(e){return void VT.error("create audio-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(r,i){t.controller||(t.controller=i),e.track&&e.track.id!==t.track.id&&(VT.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n)),i.enqueue(r)}});r.readable.pipeThrough(i).pipeTo(r.writable)}else if(Iv()){if("undefined"==typeof RTCRtpScriptTransform)return void VT.warning("browser not support RTCRtpScriptTransform");const r=dM(),i=new MessageChannel;await new cv((e=>r.onmessage=t=>{"registered"===t.data&&e(void 0)}));const s=new RTCRtpScriptTransform(r,{name:"tx",port:i.port2},[i.port2]);e.transform=s,await new cv((e=>r.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=r=>{var i;r.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==t.track.id&&(VT.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n))},t.worker=r}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",n)}const t=uM.get(e);if(t){uM.delete(e);try{var r,i;null===(r=t.controller)||void 0===r||r.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){VT.warning(e&&e.message)}}}uM.set(e,t),e.track.addEventListener("ended",n)}(t.sender))})),t.forEach((e=>{let{type:t}=e;n.statsCollector.addLocalStats(t)})),n.assignLocalTracks(t,l),n.statsUploader.startUploadOutboundStats(),t.forEach((e=>{let{track:t,type:r}=e;const i=Date.now();n.store.publish(t.getTrackId(),r===dw.LocalAudioTrack?"audio":"video",void 0,i)}))}))()}async updateVideoStreamParameter(e,t){const n=this.localTrackMap.get(t);if(!n)return;if(!(n.track instanceof bN))return VT.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof VU||this.connection instanceof PU))return VT.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");const{track:r}=n,i=function(e,t){const n={};return e.height&&e.width&&(n.scaleResolutionDownBy=CC(e,t)),n.maxFramerate=e.framerate?EC(e.framerate):void 0,n.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,n}(e,r);if(r._encoderConfig||(r._encoderConfig={}),t!==dw.LocalVideoLowTrack||!bT("DISABLE_DUAL_STREAM_USE_ENCODING")&&SR().supportDualStreamEncoding)null!=i.scaleResolutionDownBy&&(r._encoderConfig.scaleResolutionDownBy=i.scaleResolutionDownBy);else{const t=r._originMediaStreamTrack;if(!t.canvas)return VT.warn("[".concat(r.getTrackId(),"] no canvas on track"));!function(e,t){const n=e.canvas;t.width&&(n.width=EC(t.width)),t.height&&(n.height=EC(t.height)),t.framerate&&(n.stopCapture&&n.stopCapture(),n.stopCapture=yI((()=>{!n.startCapture&&n.stopCapture&&n.stopCapture(),n.startCapture&&n.startCapture()}),EC(t.framerate)))}(t,e)}null!=i.maxBitrate&&(r._encoderConfig.bitrateMax=i.maxBitrate/1e3),null!=i.maxFramerate&&(r._encoderConfig.frameRate&&"object"==typeof r._encoderConfig.frameRate?r._encoderConfig.frameRate.max=i.maxFramerate:r._encoderConfig.frameRate={max:i.maxFramerate}),VT.debug("[".concat(r.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(r._encoderConfig))),await this.connection.updateRtpSenderEncodings(r)}publishLowStream(e){var t=this;return xM((function*(){if(!t.connection||t.state!==uw.Connected)return;const n=yield SM(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const n=t.localTrackMap.get(dw.LocalVideoTrack);if(!n)throw new zv(Wv.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(dw.LocalVideoLowTrack))throw new zv(Wv.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));const i=[{track:t.getLowVideoTrack(n.track,e),type:dw.LocalVideoLowTrack}];if(yield*IU(oF(t.doPublish(t.connection,i))),n.track.muted||!n.track.enabled){var r;const e=null===(r=t.localTrackMap.get(dw.LocalVideoLowTrack))||void 0===r?void 0:r.id;void 0!==e&&(yield SM(t.connection.muteLocal([e])))}}finally{n()}}))()}async republish(){this.pendingLocalTracks.length>0&&(VT.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await wy(this,hw.RequestRePublish,this.pendingLocalTracks),this.emit(hw.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(VT.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await wy(this,hw.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let t=this.pendingRemoteTracks.length-1;t>=0;t--){const{user:e,kind:n}=this.pendingRemoteTracks[t];(n!==aw.AUDIO||e._audio_added_&&e._audioSSRC)&&(n!==aw.VIDEO||e._video_added_&&e._videoSSRC)||this.pendingRemoteTracks.splice(t,1)}if(e)await wy(this,hw.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:t,kind:n}of this.pendingRemoteTracks)await this.subscribe(t,n,n===aw.VIDEO?t._videoSSRC:t._audioSSRC);this.pendingRemoteTracks.forEach((e=>{let{user:t}=e;this.emit(hw.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==uw.Connected)return void e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));return n&&n[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==uw.Connected)return void e.forEach((e=>{const t=this.pendingLocalDataChannels.indexOf(e);-1!==t&&this.pendingLocalDataChannels.splice(t,1)}));const t=this.filterTobeUnpublishedDataChannels(e);return 0!==t.length?(t.forEach((e=>{const t=this.localDataChannels.indexOf(e);-1!==t&&this.localDataChannels.splice(t,1)})),0===this.localDataChannels.length&&await this.connection.stopDataChannels(this.store.uid),t.map((e=>e.id))):void 0}async unpublishLowStream(){if(!this.connection||this.state!==uw.Connected)return;const e=this.localTrackMap.get(dw.LocalVideoLowTrack);if(!e)return;e.track.close();const t=[[dw.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const n=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadOutboundStats(),n}async subscribeDataChannel(e,t){if(!this.connection||this.state!==uw.Connected)throw new zv(Wv.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const n=t.filter((t=>{var n;return!(null!==(n=this.remoteDataChannelMap.get(e))&&void 0!==n&&n.get(t.id))}));if(0!==n.length)return await this.connection.createDataChannels(e.uid,n),n.forEach((t=>{var n;this.remoteDataChannelMap.has(e)?null===(n=this.remoteDataChannelMap.get(e))||void 0===n||n.set(t.id,t):this.remoteDataChannelMap.set(e,new Map([[t.id,t]]));const r=this.pendingRemoteDataChannels.findIndex((n=>{let{user:r,id:i}=n;return r.uid===e.uid&&i===t.id}));-1!==r&&this.pendingRemoteDataChannels.splice(r,1)})),n.map((e=>e.id))}async subscribe(e,t,n,r,i){var s;if(!this.connection||this.state!==uw.Connected)throw new zv(Wv.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(null!==(s=this.remoteUserMap.get(e))&&void 0!==s&&s.has(t))return;let o,a,c;if(i){const n=i.find((e=>{let{stream_type:n}=e;return n===t}));if(!n)throw new zv(Wv.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));const r=await this.connection.receive(t,n.ssrcs,String(e._uintid),n.attributes);this.connection instanceof VU&&(c=r.transceiver),o=r.track,a=r.id}else{const i=await this.connection.receive(t,[{ssrcId:n,rtx:r}],String(e._uintid),void 0);this.connection instanceof VU&&(c=i.transceiver),o=i.track,a=i.id}t===aw.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new AN(o,e.uid,e._uintid,this.store),VT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new ON(o,e.uid,e._uintid,this.store),VT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),bT("ENABLE_VIDEO_SEI")&&c&&(t==aw.VIDEO?await vM(c.receiver,{onSei:t=>{var n;null===(n=e._videoTrack)||void 0===n||n._onSei(t)}}):t==aw.AUDIO&&await pM(c.receiver));const l=this.remoteUserMap.get(e);l?l.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();const d=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:i}=n;return r.uid===e.uid&&t===i}));-1!==d&&(this.pendingRemoteTracks.splice(d,1),this.emit(hw.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==uw.Connected)throw new zv(Wv.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter((e=>{var t;let{user:n,mediaType:r}=e;return!(null!==(t=this.remoteUserMap.get(n))&&void 0!==t&&t.has(r))}));const t=await this.connection.batchReceive(e.map((e=>{let{user:t,mediaType:n,ssrcId:r,rtxSsrcId:i}=e;return{kind:n,ssrcMsg:[{ssrcId:r,rtx:i}],mslabel:String(t._uintid)}})));e.forEach(((e,n)=>{let{user:r,mediaType:i}=e;const{track:s,id:o,transceiver:a}=t[n];i===aw.AUDIO?(r._audioTrack?r._audioTrack._updateOriginMediaStreamTrack(s):(r._audioTrack=new AN(s,r.uid,r._uintid,this.store),VT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(r._audioTrack.getTrackId()))),a&&r._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(r,r._audioTrack)):(r._videoTrack?r._videoTrack._updateOriginMediaStreamTrack(s):(r._videoTrack=new ON(s,r.uid,r._uintid,this.store),VT.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(r._videoTrack.getTrackId()))),a&&r._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(r,r._videoTrack));const c=this.remoteUserMap.get(r);c?c.set(i,o):this.remoteUserMap.set(r,new Map([[i,o]])),this.statsCollector.addRemoteStats(r.uid),this.statsUploader.startUploadInboundStats();const l=this.pendingRemoteTracks.findIndex((e=>{let{user:t,kind:n}=e;return t.uid===r.uid&&i===n}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(hw.MediaReconnectEnd,r.uid))}))}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:i}=n;return void 0!==t?r.uid===e.uid&&t===i:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===uw.Connected||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===aw.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===aw.VIDEO){var i;null===(i=e._videoTrack)||void 0===i||i._destroy(),e._videoTrack=void 0}})),!this.connection||this.state!==uw.Connected)return;const i=this.filterTobeUnSubscribedTracks(e,t);if(0===i.length)return;await this.connection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t})));const s=this.createUnsubscribeMessage(i);return this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),i.forEach((e=>{let[t,{kind:r}]=e;var i,s;if(r===aw.VIDEO&&t._videoSSRC&&(null===(i=this.connection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===aw.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(s=t._videoTrack)||void 0===s||s._destroy(),t._videoTrack=void 0);else if(r===aw.AUDIO){var o;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(o=t._audioTrack)||void 0===o||o._destroy(),t._audioTrack=void 0)}})),s}async unsubscribeDataChannel(e,t){if(t.forEach((e=>{const t=this.pendingRemoteDataChannels.findIndex((t=>t.id===e.id));-1!==t&&this.pendingRemoteDataChannels.splice(t,1)})),!this.connection)return;const n=this.filterTobeUnSubscribedDataChannels(e,t);if(0===n.length)return;t.forEach((e=>{e._close()}));const r=this.remoteDataChannelMap.get(e);return n.forEach((e=>{r&&r.delete(e.id)})),r&&0===r.size&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),n.map((e=>e.id))}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(const{user:i,mediaType:s}of e){const e=this.pendingRemoteTracks.filter((e=>{let{user:t,kind:n}=e;return void 0!==s?t.uid===i.uid&&s===n:t.uid===i.uid}));e.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),t=t.concat(e)}if(!this.connection||this.state!==uw.Connected)return void t.forEach((e=>{let{user:t,kind:n}=e;var r;if(n===aw.AUDIO)null===(r=t._audioTrack)||void 0===r||r._destroy(),t._audioTrack=void 0;else if(n===aw.VIDEO){var i;null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0}}));const n=By(e).call(e,((e,t)=>{let{user:n,mediaType:r}=t;const i=this.filterTobeUnSubscribedTracks(n,r);return e.concat(i)}),[]);if(0===n.length)return;await this.connection.stopReceiving(n.map((e=>{let[,{id:t}]=e;return t})));const r=this.createUnsubscribeAllMessage(n);return this.withdrawRemoteTracks(n),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),n.forEach((e=>{let[t,{kind:n}]=e;var r,i;if(n===aw.VIDEO&&t._videoSSRC&&(null===(r=this.connection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),n===aw.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0;else if(n===aw.AUDIO){var s;this.unbindRemoteTrackEvents(t._audioTrack),null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0}})),r}async muteRemote(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);if(!n)return void VT.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void VT.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===aw.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.connection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||VT.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):VT.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(dw.LocalAudioTrack);if((null==t?void 0:t.track)instanceof rN){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==dw.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===dw.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===dw.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,n,r,i){if(e){const n=this.localTrackMap.get(dw.LocalAudioTrack),s=r?this.localTrackMap.get(dw.LocalVideoLowTrack):this.localTrackMap.get(dw.LocalVideoTrack);eS.publish(this.store.sessionId,{eventElapse:bM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==s?void 0:s.track.getTrackLabel(),screenshare:-1!==(null==s?void 0:s.track._hints.indexOf(VR.SCREEN_TRACK)),audio:!!n,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var s;n||(n=[]);const o=n.find((e=>e instanceof eN)),a=r?null===(s=this.localTrackMap.get(dw.LocalVideoTrack))||void 0===s?void 0:s.track:n.find((e=>e instanceof bN));eS.publish(this.store.sessionId,{eventElapse:bM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==o?void 0:o.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(VR.SCREEN_TRACK)),audio:!!o,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===aw.VIDEO?n._videoSSRC:n._audioSSRC;i&&eS.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===aw.VIDEO,audio:r===aw.AUDIO,peerid:n.uid,subscribeRequestid:r===aw.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:bM.measureFromSubscribeStart(this.store.clientId,i)})}reset(){VT.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new pE("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new nF({},this.store):this.isPlanB?new PU({},this.store):new VU({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(dw.LocalAudioTrack);if((null==e?void 0:e.track)instanceof rN){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=uw.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(dw.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(dw.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof bN||t&&t.track instanceof eN?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(dw.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=ep(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.connection&&(VT.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=uw.Reconnecting,bT("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new nF({},this.store):this.isPlanB?new PU({},this.store):new VU({},this.store),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case dw.LocalVideoTrack:Nr(t=r._hints).call(t,VR.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case dw.LocalAudioTrack:r instanceof rN?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case dw.LocalVideoLowTrack:}})),this.emit(hw.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(ph(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(hw.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),0!==this.localDataChannels.length&&(this.localDataChannels.forEach((e=>{this.pendingLocalDataChannels.push(e)})),this.localDataChannels.length=0),0!==this.remoteDataChannelMap.size&&(Array.from(this.remoteDataChannelMap.entries()).forEach((e=>{let[t,n]=e;Array.from(ph(n).call(n)).forEach((e=>{this.setPendingRemoteDataChannel(t,e)}))})),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),VT.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(const n of this.pendingRemoteDataChannels){const{user:r,id:i}=n;if((e instanceof sU?e.uid:e)===r.uid&&i===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof sU?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return xM((function*(){if(!t.connection||t.state!==uw.Connected||t.connection instanceof nF)return;const n=yield SM(t.mutex.lock("From P2PChannel.restartICE"));let r;try{r=yield SM(t.connection.restartICE(e));const n=yield SM(r.next());if(n.done)return;const i=n.value,s=yield i;switch(t.reportPCDisconnectedOrFailed(e),e){case cw.TCP:t._pcStatsUploadType=lw.TCP_RESTART;break;case cw.RELAY:t._pcStatsUploadType=lw.RELAY_RESTART;break;default:t._pcStatsUploadType=lw.OLD_RESTART}t._isInRestartIce=!0,r.next(s)}catch(e){var i;null===(i=r)||void 0===i||i.throw(e)}finally{n()}}))()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),t=this.localTrackMap.get(dw.LocalVideoTrack),n=this.localTrackMap.get(dw.LocalAudioTrack),r=e.videoSend.find((e=>e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId))),i=e.audioSend.find((e=>e.ssrc===(null==n?void 0:n.ssrcs[0].ssrcId)));if(!r||!i)return 1;const s=Ry(this,hw.NeedSignalRTT),o=r?r.rttMs:void 0,a=i?i.rttMs:void 0,c=o&&a?(o+a)/2:o||a,l=(c&&s?(c+s)/2:c||s)||0,d=100*e.sendPacketLossRate*.7/50+.3*l/1500,u=d<.17?1:d<.36?2:d<.59?3:d<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(VR.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return rS[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const i=r._audioSSRC,s=r._videoSSRC,o=e.audioRecv.find((e=>e.ssrc===i)),a=e.videoRecv.find((e=>e.ssrc===s));if(!o&&!a)return void(t+=1);const c=Ry(this,hw.NeedSignalRTT),l=e.rtt,d=(l&&c?(l+c)/2:l||c)||0,u=o?o.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*d/1500;u&&(p=.6*h*100/50+.2*d/1500+.2*u/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new cv(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}async replaceTrack(e,t){var n;if(VT.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==uw.Connected)return;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!r)return;const i=r[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:i}]),this.bindLocalTrackEvents([{track:t,type:i}]),r[1].track=t),await(null===(n=this.connection)||void 0===n?void 0:n.replaceTrack(t,r[1].id)),this.isPlanB){const e=r[1];e.id=t._mediaStreamTrack.id,this.localTrackMap.set(i,e)}if(i===dw.LocalVideoTrack&&!bT("DISABLE_DUAL_STREAM_USE_ENCODING")&&SR().supportDualStreamEncoding){const t=this.localTrackMap.get(dw.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new cv(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}}filterTobePublishedTracks(e,t,n){const r=[],i=this.getAllTracks();e=Wy(e=e.filter((e=>-1===i.indexOf(e))));let s,o=!1;const a=this.localTrackMap.get(dw.LocalAudioTrack);for(const c of e){if(c instanceof bN&&(this.localTrackMap.has(dw.LocalVideoTrack)||o?new zv(Wv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:dw.LocalVideoTrack}),o=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:dw.LocalVideoLowTrack})}if(c instanceof eN)if(a){const e=a.track;if(e instanceof rN)cU([c]),e.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0);else{const t=lU([e,c]);VT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(t.getTrackId(),"]")),this.replaceTrack(e,t)}}else s instanceof rN?(cU([c]),s.addAudioTrack(c)):s=s||!c._useAudioElement&&SR().webAudioMediaStreamDest&&!c._bypassWebAudio?lU(s?[c,s]:[c]):c}return s&&(VT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(s.getTrackId(),"]")),r.push({track:s,type:dw.LocalAudioTrack})),r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=Wy(e=e.filter((e=>-1!==n.indexOf(e))));for(const r of e){if(r instanceof eN){const e=this.localTrackMap.get(dw.LocalAudioTrack);if(!e)continue;e.track instanceof rN?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([dw.LocalAudioTrack,e]),e.track.close())):t.push([dw.LocalAudioTrack,e])}if(r instanceof bN){const e=this.localTrackMap.get(dw.LocalVideoTrack);if(!e)continue;t.push([dw.LocalVideoTrack,e]);const n=this.localTrackMap.get(dw.LocalVideoLowTrack);n&&t.push([dw.LocalVideoLowTrack,n])}}return t}filterTobePublishedDataChannels(e){return(e=Wy(e)).filter((e=>-1===this.localDataChannels.findIndex((t=>t.id===e.id))))}filterTobeUnpublishedDataChannels(e){return(e=(e=Wy(e)).filter((e=>-1!==this.localDataChannels.indexOf(e)))).filter((e=>e._originDataChannel))}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case dw.LocalVideoTrack:t.addListener(BR.GET_STATS,this.handleGetLocalVideoStats),t.addListener(BR.GET_RTC_STATS,this.handleGetRTCStats),t.addListener(BR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(BR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(BR.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(BR.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.addListener(BR.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(BR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(BR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case dw.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case dw.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof rN?e.trackList.forEach((e=>{e.addListener(BR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(BR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(BR.GET_STATS,this.handleGetLocalAudioStats),e.addListener(BR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(BR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(BR.GET_STATS,this.handleGetLocalAudioStats),e.addListener(BR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(BR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(BR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(BR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(BR.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(BR.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case dw.LocalVideoTrack:t.off(BR.GET_STATS,this.handleGetLocalVideoStats),t.off(BR.GET_RTC_STATS,this.handleGetRTCStats),t.off(BR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(BR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(BR.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(BR.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.off(BR.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(BR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(BR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case dw.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case dw.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof rN?e.trackList.forEach((e=>{e.off(BR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(BR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(BR.GET_STATS,this.handleGetLocalAudioStats),e.off(BR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(BR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(BR.GET_STATS,this.handleGetLocalAudioStats),e.off(BR.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(BR.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(BR.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(BR.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(BR.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(BR.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof ON&&t.addListener(BR.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof AN&&t.addListener(BR.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(BR.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(aw.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(aw.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let i,s,{track:o,type:a}=e;switch(a){case dw.LocalAudioTrack:i=JS.Audio,s={dtx:o instanceof tN&&o._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case dw.LocalVideoTrack:i=Nr(r=o._hints).call(r,VR.SCREEN_TRACK)?JS.Screen:JS.High,s=sF(sF({},bC(o)),{},{codec:this.store.codec});break;case dw.LocalVideoLowTrack:i=JS.Low,s=sF(sF({},bC(o)),{},{codec:this.store.codec})}return{stream_type:i,attributes:s,ssrcs:t[n]}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:s,id:o}]=e;switch(r){case dw.LocalVideoTrack:n=Nr(t=i._hints).call(t,VR.SCREEN_TRACK)?JS.Screen:JS.High;break;case dw.LocalAudioTrack:n=JS.Audio;break;case dw.LocalVideoLowTrack:n=JS.Low}return{stream_type:n,ssrcs:s,mid:o}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:i}=e;this.localTrackMap.set(i,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(hw.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),bT("NEW_ICE_RESTART")){var n;if(Nr(n=this._restartStates).call(n,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const t=t=>{"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(VT.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(t)),"CONNECTED"===Ry(this,hw.QueryClientConnectionState)&&this.emit(hw.RequestRestartICE,t))},n=()=>{"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),VT.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout((()=>this.emit(hw.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())},r=bT("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout((()=>{if(bT("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&SR().supportPCSetConfiguration)t(cw.RELAY),this._restartTimer=window.setTimeout(n,r);else if(Nv())t(cw.UDP),this._restartTimer=window.setTimeout(n,4e3);else{if(t(cw.TCP),SR().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout((()=>{t(cw.RELAY),this._restartTimer=window.setTimeout(n,r)}),r));this._restartTimer=window.setTimeout(n,r)}}),800))}}else{if("disconnected"===t&&"disconnected"===e.iceConnectionState)return setTimeout((()=>{"disconnected"===e.iceConnectionState&&bT("ICE_RESTART")&&"CONNECTED"===Ry(this,hw.QueryClientConnectionState)&&this.emit(hw.RequestRestartICE)}),800),void setTimeout((()=>{"disconnected"===e.peerConnectionState&&(VT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout((()=>this.emit(hw.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())}),4e3);"failed"===t&&(VT.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout((()=>this.emit(hw.P2PLost)),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),eS.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:py.TRACER}).onSuccess(),this.emit(hw.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(KR.FIRST_FRAME_DECODED),eS.firstRemoteFrame(this.store.sessionId,qT.FIRST_AUDIO_DECODE,KT.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:bM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&eS.firstRemoteFrame(this.store.sessionId,qT.FIRST_AUDIO_RECEIVED,KT.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:bM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(ph(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&eS.firstRemoteFrame(this.store.sessionId,qT.FIRST_VIDEO_RECEIVED,KT.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:bM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(hw.ConnectionTypeChange,n),VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(RC(t))," -> ").concat(JSON.stringify(RC(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{VT.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(RC(t))," -> ").concat(JSON.stringify(RC(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(dw.LocalAudioTrack);if(e instanceof eN&&(null==n?void 0:n.track)instanceof rN)return n.track.isActive||t.push([dw.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===dw.LocalVideoTrack)){const e=this.localTrackMap.get(dw.LocalVideoLowTrack);e&&t.push([dw.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(dw.LocalAudioTrack);if(e instanceof eN&&(null==n?void 0:n.track)instanceof rN)return n.track.isActive&&t.push([dw.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===dw.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(dw.LocalVideoLowTrack);e&&t.push([dw.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:s,id:o}]=e;switch(r){case dw.LocalAudioTrack:n=JS.Audio;break;case dw.LocalVideoTrack:n=Nr(t=i._hints).call(t,VR.SCREEN_TRACK)?JS.Screen:JS.High;break;case dw.LocalVideoLowTrack:n=JS.Low}return{stream_type:n,ssrcs:s,mid:o}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:s,id:o}]=e;switch(r){case dw.LocalAudioTrack:n=JS.Audio;break;case dw.LocalVideoTrack:n=Nr(t=i._hints).call(t,VR.SCREEN_TRACK)?JS.Screen:JS.High;break;case dw.LocalVideoLowTrack:n=JS.Low}return{stream_type:n,ssrcs:s,mid:o}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((t=>{let[r,i]=t;n.push([e,{kind:r,id:i}])}));return n}filterTobeUnSubscribedDataChannels(e,t){const n=[];return t.forEach((t=>{var r;null!==(r=this.remoteDataChannelMap.get(e))&&void 0!==r&&r.has(t.id)&&n.push(t)})),n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:i}]=e;switch(r){case aw.VIDEO:return void(n._videoSSRC&&t.push({stream_type:aw.VIDEO,ssrcId:n._videoSSRC}));case aw.AUDIO:return void(n._audioSSRC&&t.push({stream_type:aw.AUDIO,ssrcId:n._audioSSRC}))}})),t}createUnsubscribeAllMessage(e){const t=new Map;return e.forEach((e=>{let[n,{kind:r}]=e;if(t.has(n)){let e=t.get(n);r===aw.VIDEO?e|=QS.Video:e|=QS.Audio,t.set(n,e)}else r===aw.VIDEO?t.set(n,QS.Video):t.set(n,QS.Audio)})),{users:Array.from(t.entries()).map((e=>{let[t,n]=e;return{stream_id:t.uid,stream_type:n}}))}}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(dw.LocalVideoTrack),n=this.localTrackMap.get(dw.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(e,t){return e.map(((e,n)=>{var r;let{stream_type:i}=e;return null===(r=t.find((e=>{let{stream_type:t}=e;return i===t})))||void 0===r?void 0:r.attributes}))}async tryToUnmuteAudio(e){for(let n=0;n<e.length;n++)if(e[n]instanceof eN){var t;const r=this.filterTobeUnmutedTracks(e[n]);if(0===r.length)continue;await(null===(t=this.connection)||void 0===t?void 0:t.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t}))));const i=this.createUnmuteMessage(r);return void await Cy(this,hw.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(hw.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(hw.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await nE(gE(this.dtlsFailedCount,mE)),this.emit(hw.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await wy(this,hw.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(hw.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(dw.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof bN))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof bN)).length>1)throw new zv(Wv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof eN)).length>1&&(e.some((e=>e instanceof eN&&e._bypassWebAudio))||!SR().webAudioMediaStreamDest))throw new zv(Wv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof bN&&this.pendingLocalTracks.some((e=>e instanceof bN)))throw new zv(Wv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof eN&&this.pendingLocalTracks.some((e=>e instanceof eN))&&(!SR().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof eN&&e._bypassWebAudio))))throw new zv(Wv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!bT("DISABLE_DUAL_STREAM_USE_ENCODING")&&SR().supportDualStreamEncoding,r=sF(sF({},{width:160,height:120,framerate:15,bitrate:50}),t);let i;i=n?e._mediaStreamTrack.clone():Gj(e,r);const s=rE(8,"track-low-"),o=new bN(i,sF(sF({},n&&{scaleResolutionDownBy:CC(r,e)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}),void 0,void 0,s);return o.on(zR.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,GR.LOW_STREAM)})),o._hints.push(VR.LOW_STREAM),e.on("sei-to-send",(e=>{o.emit("sei-to-send",e)})),e.addListener(BR.NEED_CLOSE,(()=>{o.close()})),o}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.connection&&this.connection instanceof VU){var i,s,o,a;const c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:l,dtlsTransportState:d,peerConnectionState:u}=this.connection,{local:h,remote:p}=await this.connection.getSelectedCandidatePair();eS.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:l,dtlsstate:d,connectionstate:u,intSucc:t?1:2,error:r,selectedLocalCandidateProtocol:null!==(i=null==h?void 0:h.protocol)&&void 0!==i?i:"",selectedLocalCandidateType:null!==(s=h.candidateType)&&void 0!==s?s:"",selectedLocalCandidateAddress:"".concat(h.address,":").concat(h.port),selectedRemoteCandidateProtocol:null!==(o=p.protocol)&&void 0!==o?o:"",selectedRemoteCandidateType:null!==(a=p.candidateType)&&void 0!==a?a:"",selectedRemoteCandidateAddress:"".concat(p.address,":").concat(p.port),restartCnt:n})}}reportVideoFirstFrameDecoded(e,t,n,r){var i;const s=Array.from(ph(i=this.remoteUserMap).call(i)).find((t=>t._videoSSRC===e));if(s){r||this.store.subscribe(s.uid,"video",void 0,void 0,void 0,void 0,Date.now());const i=this.store.keyMetrics,o=i.subscribe.find((e=>e.userId===s.uid&&"video"===e.type));eS.firstRemoteVideoDecode(this.store.sessionId,qT.FIRST_VIDEO_DECODE,KT.FIRST_VIDEO_DECODE,{peer:s._uintid,videowidth:t,videoheight:n,subscribeElapse:bM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:i.requestAPEnd||0,apStart:i.requestAPStart||0,joinGwEnd:i.joinGatewayEnd||0,joinGwStart:i.joinGatewayStart||0,pcEnd:i.peerConnectionEnd||0,pcStart:i.peerConnectionStart||0,subscriberEnd:(null==o?void 0:o.subscribeEnd)||0,subscriberStart:(null==o?void 0:o.subscribeStart)||0,videoAddNotify:(null==o?void 0:o.streamAdded)||0,state:r?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.connection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const s=await this.connection.getRemoteSSRC(i);return void 0!==s&&s!==n}resetConnection(e){VT.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(e)),this.state===uw.Connected?(VT.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=e===$S.datachannel?new nF({},this.store):this.isPlanB?new PU({},this.store):new VU({},this.store),this.bindConnectionEvents(this.connection)))}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===dw.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,GR.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof VU&&("disconnected"!==this.connection.iceConnectionState&&"checking"!==this.connection.iceConnectionState&&"failed"!==this.connection.iceConnectionState||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===lw.TCP_RESTART&&e===cw.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,lw.DISCONNECTED_OR_FAILED)))}}function lF(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PChannel.".concat(t));try{for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return await r.apply(this,s)}finally{n()}},n}function dF(e){let t=bF();return function(e,t){let n=e.appId;void 0!==n&&(LF(t,10),NF(t,n));let r=e.cid;void 0!==r&&(LF(t,16),LF(t,r));let i=e.cname;void 0!==i&&(LF(t,26),NF(t,i));let s=e.deviceId;void 0!==s&&(LF(t,34),NF(t,s));let o=e.elapse;void 0!==o&&(LF(t,40),MF(t,o));let a=e.fileSize;void 0!==a&&(LF(t,48),MF(t,yF(a)));let c=e.height;void 0!==c&&(LF(t,56),MF(t,yF(c)));let l=e.jpg;void 0!==l&&(LF(t,66),LF(t,l.length),function(e,t){let n=CF(e,t.length);e.bytes.set(t,n)}(t,l));let d=e.networkType;void 0!==d&&(LF(t,72),MF(t,yF(d)));let u=e.osType;void 0!==u&&(LF(t,80),MF(t,yF(u)));let h=e.requestId;void 0!==h&&(LF(t,90),NF(t,h));let p=e.sdkVersion;void 0!==p&&(LF(t,98),NF(t,p));let f=e.sequence;void 0!==f&&(LF(t,104),MF(t,yF(f)));let m=e.sid;void 0!==m&&(LF(t,114),NF(t,m));let g=e.timestamp;void 0!==g&&(LF(t,120),MF(t,g));let _=e.uid;void 0!==_&&(LF(t,128),LF(t,_));let v=e.vid;void 0!==v&&(LF(t,136),LF(t,v));let y=e.width;void 0!==y&&(LF(t,144),MF(t,yF(y)));let E=e.service;void 0!==E&&(LF(t,152),LF(t,E));let b=e.callbackData;void 0!==b&&(LF(t,162),NF(t,b));let T=e.jpgEncryption;void 0!==T&&(LF(t,168),LF(t,T));let S=e.requestType;void 0!==S&&(LF(t,176),LF(t,S));let w=e.scorePorn;void 0!==w&&(LF(t,185),PF(t,w));let C=e.scoreSexy;void 0!==C&&(LF(t,193),PF(t,C));let R=e.scoreNeutral;void 0!==R&&(LF(t,201),PF(t,R));let I=e.scene;void 0!==I&&(LF(t,208),LF(t,I));let N=e.ossFilePrefix;void 0!==N&&(LF(t,218),NF(t,N));let O=e.serviceVendor;if(void 0!==O)for(let A of O){LF(t,226);let e=bF();pF(A,e),LF(t,e.limit),OF(t,e),TF(e)}}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function uF(e){return function(e){let t={};e:for(;!wF(e);){let n=DF(e);switch(n>>>3){case 0:break e;case 1:t.code=DF(e);break;case 2:t.msg=IF(e,DF(e));break;case 3:{let n=fF(e);t.data=hF(e),e.limit=n;break}default:mF(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function hF(e){let t={};e:for(;!wF(e);){let n=DF(e);switch(n>>>3){case 0:break e;case 1:t.requestId=IF(e,DF(e));break;case 2:t.requestType=DF(e)>>>0;break;case 3:t.scorePorn=xF(e);break;case 4:t.scoreSexy=xF(e);break;case 5:t.scoreNeutral=xF(e);break;case 6:t.requestScene=DF(e)>>>0;break;case 7:t.scene=DF(e)>>>0;break;default:mF(e,7&n)}}return t}function pF(e,t){let n=e.service;void 0!==n&&(LF(t,8),LF(t,n));let r=e.vendor;void 0!==r&&(LF(t,16),LF(t,r));let i=e.token;void 0!==i&&(LF(t,26),NF(t,i));let s=e.callbackUrl;void 0!==s&&(LF(t,34),NF(t,s))}function fF(e){let t=DF(e),n=e.limit;return e.limit=e.offset+t,n}function mF(e,t){switch(t){case 0:for(;128&AF(e););break;case 2:SF(e,DF(e));break;case 5:SF(e,4);break;case 1:SF(e,8);break;default:throw new Error("Unimplemented type: "+t)}}kS([lF,xS("design:type",Function),xS("design:paramtypes",[Object,Boolean]),xS("design:returntype",cv)],cF.prototype,"startP2PConnection",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[Object,Object,Array,Object,String,String]),xS("design:returntype",cv)],cF.prototype,"connect",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",void 0)],cF.prototype,"updateRemoteRTPCapabilities",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[Object,Object,Array,Object,String,String]),xS("design:returntype",cv)],cF.prototype,"preConnect",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],cF.prototype,"publishDataChannel",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],cF.prototype,"unpublish",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],cF.prototype,"unpublishDataChannel",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",cv)],cF.prototype,"unpublishLowStream",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[sU,Array]),xS("design:returntype",cv)],cF.prototype,"subscribeDataChannel",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[sU,String,Number,Number,Array]),xS("design:returntype",cv)],cF.prototype,"subscribe",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],cF.prototype,"massSubscribe",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[sU,String,Boolean]),xS("design:returntype",cv)],cF.prototype,"unsubscribe",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[sU,Array]),xS("design:returntype",cv)],cF.prototype,"unsubscribeDataChannel",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],cF.prototype,"massUnsubscribe",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[sU,String]),xS("design:returntype",cv)],cF.prototype,"muteRemote",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[sU,String]),xS("design:returntype",cv)],cF.prototype,"unmuteRemote",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[sU,String]),xS("design:returntype",cv)],cF.prototype,"hasRemoteMediaWithLock",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",cv)],cF.prototype,"disconnectForReconnect",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],cF.prototype,"updateBitrateLimit",null),kS([lF,xS("design:type",Function),xS("design:paramtypes",[sU,String,Number]),xS("design:returntype",cv)],cF.prototype,"remoteMediaSsrcChanged",null);let gF=new Float32Array(1);new Uint8Array(gF.buffer);let _F=new Float64Array(1),vF=new Uint8Array(_F.buffer);function yF(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let EF=[];function bF(){const e=EF.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function TF(e){EF.push(e)}function SF(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function wF(e){return e.offset>=e.limit}function CF(e,t){let n=e.bytes,r=e.offset,i=e.limit,s=r+t;if(s>n.length){let t=new Uint8Array(2*s);t.set(n),e.bytes=t}return e.offset=s,s>i&&(e.limit=s),r}function RF(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function IF(e,t){let n=RF(e,t),r=String.fromCharCode,i=e.bytes,s="\ufffd",o="";for(let a=0;a<t;a++){let e,c,l,d,u=i[a+n];0==(128&u)?o+=r(u):192==(224&u)?a+1>=t?o+=s:(e=i[a+n+1],128!=(192&e)?o+=s:(d=(31&u)<<6|63&e,d<128?o+=s:(o+=r(d),a++))):224==(240&u)?a+2>=t?o+=s:(e=i[a+n+1],c=i[a+n+2],32896!=(49344&(e|c<<8))?o+=s:(d=(15&u)<<12|(63&e)<<6|63&c,d<2048||d>=55296&&d<=57343?o+=s:(o+=r(d),a+=2))):240==(248&u)?a+3>=t?o+=s:(e=i[a+n+1],c=i[a+n+2],l=i[a+n+3],8421504!=(12632256&(e|c<<8|l<<16))?o+=s:(d=(7&u)<<18|(63&e)<<12|(63&c)<<6|63&l,d<65536||d>1114111?o+=s:(d-=65536,o+=r(55296+(d>>10),56320+(1023&d)),a+=3))):o+=s}return o}function NF(e,t){let n=t.length,r=0;for(let o=0;o<n;o++){let e=t.charCodeAt(o);e>=55296&&e<=56319&&o+1<n&&(e=(e<<10)+t.charCodeAt(++o)-56613888),r+=e<128?1:e<2048?2:e<65536?3:4}LF(e,r);let i=CF(e,r),s=e.bytes;for(let o=0;o<n;o++){let e=t.charCodeAt(o);e>=55296&&e<=56319&&o+1<n&&(e=(e<<10)+t.charCodeAt(++o)-56613888),e<128?s[i++]=e:(e<2048?s[i++]=e>>6&31|192:(e<65536?s[i++]=e>>12&15|224:(s[i++]=e>>18&7|240,s[i++]=e>>12&63|128),s[i++]=e>>6&63|128),s[i++]=63&e|128)}}function OF(e,t){let n=CF(e,t.limit),r=e.bytes,i=t.bytes;for(let s=0,o=t.limit;s<o;s++)r[s+n]=i[s]}function AF(e){return e.bytes[RF(e,1)]}function kF(e,t){let n=CF(e,1);e.bytes[n]=t}function xF(e){let t=RF(e,8),n=e.bytes;return vF[0]=n[t++],vF[1]=n[t++],vF[2]=n[t++],vF[3]=n[t++],vF[4]=n[t++],vF[5]=n[t++],vF[6]=n[t++],vF[7]=n[t++],_F[0]}function PF(e,t){let n=CF(e,8),r=e.bytes;_F[0]=t,r[n++]=vF[0],r[n++]=vF[1],r[n++]=vF[2],r[n++]=vF[3],r[n++]=vF[4],r[n++]=vF[5],r[n++]=vF[6],r[n++]=vF[7]}function DF(e){let t,n=0,r=0;do{t=AF(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function LF(e,t){for(t>>>=0;t>=128;)kF(e,127&t|128),t>>>=7;kF(e,t)}function MF(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,s=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,o=CF(e,s),a=e.bytes;switch(s){case 10:a[o+9]=i>>>7&1;case 9:a[o+8]=9!==s?128|i:127&i;case 8:a[o+7]=8!==s?r>>>21|128:r>>>21&127;case 7:a[o+6]=7!==s?r>>>14|128:r>>>14&127;case 6:a[o+5]=6!==s?r>>>7|128:r>>>7&127;case 5:a[o+4]=5!==s?128|r:127&r;case 4:a[o+3]=4!==s?n>>>21|128:n>>>21&127;case 3:a[o+2]=3!==s?n>>>14|128:n>>>14&127;case 2:a[o+1]=2!==s?n>>>7|128:n>>>7&127;case 1:a[o]=1!==s?128|n:127&n}}function jF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const UF=new Map([["moderation",1],["supervise",2]]);class FF extends ly{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(gw.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=By(t=e.map((e=>UF.get(e)||0))).call(t,((e,t)=>e+t)),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this.qualityRatio}),6e4))}constructor(e){super(),sh(this,"name","AgoraRTCVideoContentInspect"),sh(this,"_connectionState",fw.CONNECTING),sh(this,"_innerConnectionState",void 0),sh(this,"sequence",0),sh(this,"inspectStartTime",void 0),sh(this,"workerManagerConnection",void 0),sh(this,"workerConnection",void 0),sh(this,"workerMessageLengthLimit",void 0),sh(this,"inspectIntervalMinimum",void 0),sh(this,"qualityRatio",void 0),sh(this,"_connectInfo",void 0),sh(this,"_cancelTokenSource",sT.CancelToken.source()),sh(this,"_retryConfig",void 0),sh(this,"wmSequence",0),sh(this,"inspectInterval",void 0),sh(this,"inspectTimer",null),sh(this,"ossFilePrefix",void 0),sh(this,"extraInfo",void 0),sh(this,"_inspectType",void 0),sh(this,"_inspectMode",void 0),sh(this,"_quality",1),sh(this,"qualityTimer",null),sh(this,"_inspectId",void 0),sh(this,"_needWorkUrlOnly",!1),sh(this,"inspectImage",(()=>{if(this.connectionState!==fw.CONNECTED)throw new PS(Wv.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval((()=>{this.connectionState===fw.CONNECTED?this.requestToInspectImage():VT.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)}),this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()})),this._inspectId=rE(5,"inspect-"),this.workerMessageLengthLimit=bT("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=bT("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=bT("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new Yw("worker-manager-"+this._inspectId,mE),this.on(gw.STATE_CHANGE,((e,t)=>{this._innerConnectionState=e,VT.debug("[".concat(this._inspectId,"] Inspect operation :").concat(mw[e]," ").concat(t||""))})),this.handleWorkerManagerEvents(),this.workerConnection=new Yw("worker-"+this._inspectId,mE),this.handleWorkerEvents()}async init(e,t){this.emit(gw.STATE_CHANGE,mw.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new cv(((r,i)=>{this.on(gw.CONNECTION_STATE_CHANGE,((e,t)=>{t===fw.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorkerManager(e)})).catch((e=>{i(e)}))}))}async requestAP(e,t,n){const r=bT("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),i=await function(e,t,n,r){let{appId:i,areaCode:s,cname:o,sid:a,token:c,uid:l}=t;cR++;const d="image_moderation_api",u={service_name:d,json_body:JSON.stringify({appId:i,areaCode:s,cname:o,command:"allocateEdge",requestId:cR,seq:cR,sid:a,token:c,ts:Date.now(),uid:l+""})};let h,p,f=e[0];return _E((async()=>{h=Date.now();const e=await BC(f,{data:u,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-h,0!==e.code){const t=new PS(Wv.UNEXPECTED_RESPONSE,"image inspect ap error, code"+e.code,{retry:!0,responseTime:p});throw VT.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new PS(Wv.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw VT.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new PS(Wv.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:t.code,responseTime:p});throw VT.error(e.toString()),e}const r=bT("VIDEO_INSPECT_WORKER_MANAGER_HOST"),i=bT("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(i||n)})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,responseTime:p}}),((t,n)=>(eS.apworkerEvent(a,{success:!0,sc:200,serviceName:d,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1)),((t,n)=>(eS.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:d,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==Wv.OPERATION_ABORTED&&t.code!==Wv.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(f=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(gw.STATE_CHANGE,mw.AP_CONNECTED);const{addressList:s}=i;return this.wmSequence++,s}async connectWorkerManager(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._needWorkUrlOnly=t,this.emit(gw.STATE_CHANGE,mw.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(ES.CONNECTED,(async()=>{this.emit(gw.STATE_CHANGE,mw.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.20.2",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(ES.CLOSED,(()=>{this._innerConnectionState<mw.GET_WORKER_MANAGER_RESPONSE&&VT.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))})),this.workerManagerConnection.on(ES.FAILED,(()=>{this._innerConnectionState<mw.GET_WORKER_MANAGER_RESPONSE&&VT.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))})),this.workerManagerConnection.on(ES.RECONNECTING,(()=>{this._innerConnectionState<mw.GET_WORKER_MANAGER_RESPONSE&&VT.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))})),this.workerManagerConnection.on(ES.ON_MESSAGE,(async e=>{this.emit(gw.STATE_CHANGE,mw.GET_WORKER_MANAGER_RESPONSE);const t=this.workerManagerConnection.url;this.workerManagerConnection.close();const n=JSON.parse(e.data);if(200!==n.code)throw VT.error("[".concat(this._inspectId,"] Unexpected code ").concat(n.code," from worker manager")),new PS(Wv.UNEXPECTED_RESPONSE,"response code of worker is unexpected",n);if(!(n.serverResponse&&n.serverResponse.portWss&&t))throw VT.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(n))),new PS(Wv.UNEXPECTED_RESPONSE,"response content of worker is unexpected",n);{const e=bT("VIDEO_INSPECT_WORKER_PORT")||n.serverResponse.portWss,r=t.replace(/:\d+\/?$/,":".concat(e));this.emit(gw.STATE_CHANGE,mw.CONNECT_WORKER,r),this._needWorkUrlOnly?this.emit(gw.REQUEST_NEW_WORKER_URL,r):await this.connectWorker(r)}})),this.workerManagerConnection.on(ES.WILL_RECONNECT,((e,t,n)=>{n(e)})),this.workerManagerConnection.on(ES.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}handleWorkerEvents(){this.workerConnection.on(ES.CONNECTED,(async()=>{this.emit(gw.STATE_CHANGE,mw.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=fw.CONNECTED})),this.workerConnection.on(ES.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const n=uF(new Uint8Array(e.data));if(bT("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&VT.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(n)),200===n.code){if(Array.isArray(this.inspectType)&&1===this.inspectType.length&&"supervise"===this.inspectType[0])return void this.emit(gw.INSPECT_RESULT,void 0,void 0);if(n.data&&n.data.scorePorn&&n.data.scoreSexy&&n.data.scoreNeutral){var t;const e={porn:n.data.scorePorn,sexy:n.data.scoreSexy,neutral:n.data.scoreNeutral},r=By(t=Object.keys(e)).call(t,((t,n)=>e[t]>e[n]?t:n),"porn"),i=Object.keys(e).find((e=>e===r));this.emit(gw.INSPECT_RESULT,i)}else this.emit(gw.INSPECT_RESULT,void 0,new PS(Wv.UNEXPECTED_RESPONSE,n.code+"","There is an unexpected data on message"))}else this.emit(gw.INSPECT_RESULT,void 0,new PS(Wv.UNEXPECTED_RESPONSE,n.code+"",n.msg))}else VT.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(gw.INSPECT_RESULT,void 0,new PS(Wv.UNEXPECTED_RESPONSE,"invalid worker message type"))})),this.workerConnection.on(ES.CLOSED,(()=>{this.connectionState=fw.CLOSED})),this.workerConnection.on(ES.FAILED,(()=>{this.connectionState=fw.CLOSED})),this.workerConnection.on(ES.RECONNECTING,(()=>{this.connectionState=this.connectionState===fw.CONNECTED?fw.RECONNECTING:fw.CONNECTING})),this.workerConnection.on(ES.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this.workerConnection.on(ES.REQUEST_NEW_URLS,((e,t)=>{this.workerManagerConnection.close(),this.once(gw.REQUEST_NEW_WORKER_URL,(t=>{e([t])})),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then((e=>{this.connectWorkerManager(e,!0)})).catch((e=>{t(e)}))}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){this.sequence++;const e=Ry(this,gw.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(gw.INSPECT_RESULT,void 0,new PS(Wv.INVALID_OPERATION,"Only the track being played can be inspected"));const n=await this.generateRequestData(e,t);this.workerConnection.sendMessage(n,!0,!0)}else this.emit(gw.INSPECT_RESULT,void 0,new PS(Wv.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:n,cname:r,cid:i,vid:s,sid:o,uid:a}=t;const c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),d=await vN(l,n,r),u=this.sequence+"-"+i+"-"+a+"-"+c+"-"+rE(12,""),h={appId:n,cid:i,cname:r,deviceId:"",elapse:FF.intToLong(Number(c-this.inspectStartTime)),fileSize:d.byteLength,jpgEncryption:2,height:l.height,width:l.width,jpg:d,networkType:6,osType:7,requestId:u,sdkVersion:"4.20.2",sequence:this.sequence,sid:o,timestamp:FF.intToLong(c),uid:a,vid:s,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};void 0===this.extraInfo&&delete h.callbackData,void 0===this.ossFilePrefix&&delete h.ossFilePrefix;const p=dF(h);if(p.byteLength<this.workerMessageLengthLimit){if(bT("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jF(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h);delete e.jpg,VT.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(e))}return p}{const t=this.quality*this.qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:i,vid:s,sid:o,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=sT.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=fw.CLOSED,this.emit(gw.STATE_CHANGE,mw.CLOSED)}}function BF(e){let t=function(){const e=WF.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(e,t){let n=e.appId;void 0!==n&&(tB(t,10),ZF(t,n));let r=e.cid;void 0!==r&&(tB(t,16),tB(t,r));let i=e.cname;void 0!==i&&(tB(t,26),ZF(t,i));let s=e.deviceId;void 0!==s&&(tB(t,34),ZF(t,s));let o=e.elapse;void 0!==o&&(tB(t,40),rB(t,o));let a=e.fileSize;void 0!==a&&(tB(t,48),rB(t,HF(a)));let c=e.height;void 0!==c&&(tB(t,56),rB(t,HF(c)));let l=e.jpg;void 0!==l&&(tB(t,66),tB(t,l.length),JF(t,l));let d=e.networkType;void 0!==d&&(tB(t,72),rB(t,HF(d)));let u=e.osType;void 0!==u&&(tB(t,80),rB(t,HF(u)));let h=e.requestId;void 0!==h&&(tB(t,90),ZF(t,h));let p=e.sdkVersion;void 0!==p&&(tB(t,98),ZF(t,p));let f=e.sequence;void 0!==f&&(tB(t,104),rB(t,HF(f)));let m=e.sid;void 0!==m&&(tB(t,114),ZF(t,m));let g=e.timestamp;void 0!==g&&(tB(t,120),rB(t,g));let _=e.uid;void 0!==_&&(tB(t,128),tB(t,_));let v=e.vid;void 0!==v&&(tB(t,136),tB(t,v));let y=e.width;void 0!==y&&(tB(t,144),rB(t,HF(y)));let E=e.service;void 0!==E&&(tB(t,152),tB(t,E));let b=e.callbackData;void 0!==b&&(tB(t,162),tB(t,b.length),JF(t,b));let T=e.ticket;void 0!==T&&(tB(t,170),ZF(t,T));let S=e.vendorConfigs;void 0!==S&&(tB(t,178),ZF(t,S))}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function VF(e){return function(e){let t={};e:for(;!qF(e);){let n=eB(e);switch(n>>>3){case 0:break e;case 1:t.code=eB(e);break;case 2:t.msg=XF(e,eB(e));break;case 3:t.requestId=XF(e,eB(e));break;case 4:t.timestamp=nB(e,!1);break;default:GF(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function GF(e,t){switch(t){case 0:for(;128&QF(e););break;case 2:zF(e,eB(e));break;case 5:zF(e,4);break;case 1:zF(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function HF(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let WF=[];function zF(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function qF(e){return e.offset>=e.limit}function KF(e,t){let n=e.bytes,r=e.offset,i=e.limit,s=r+t;if(s>n.length){let t=new Uint8Array(2*s);t.set(n),e.bytes=t}return e.offset=s,s>i&&(e.limit=s),r}function YF(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function JF(e,t){let n=KF(e,t.length);e.bytes.set(t,n)}function XF(e,t){let n=YF(e,t),r=String.fromCharCode,i=e.bytes,s="\ufffd",o="";for(let a=0;a<t;a++){let e,c,l,d,u=i[a+n];0==(128&u)?o+=r(u):192==(224&u)?a+1>=t?o+=s:(e=i[a+n+1],128!=(192&e)?o+=s:(d=(31&u)<<6|63&e,d<128?o+=s:(o+=r(d),a++))):224==(240&u)?a+2>=t?o+=s:(e=i[a+n+1],c=i[a+n+2],32896!=(49344&(e|c<<8))?o+=s:(d=(15&u)<<12|(63&e)<<6|63&c,d<2048||d>=55296&&d<=57343?o+=s:(o+=r(d),a+=2))):240==(248&u)?a+3>=t?o+=s:(e=i[a+n+1],c=i[a+n+2],l=i[a+n+3],8421504!=(12632256&(e|c<<8|l<<16))?o+=s:(d=(7&u)<<18|(63&e)<<12|(63&c)<<6|63&l,d<65536||d>1114111?o+=s:(d-=65536,o+=r(55296+(d>>10),56320+(1023&d)),a+=3))):o+=s}return o}function ZF(e,t){let n=t.length,r=0;for(let o=0;o<n;o++){let e=t.charCodeAt(o);e>=55296&&e<=56319&&o+1<n&&(e=(e<<10)+t.charCodeAt(++o)-56613888),r+=e<128?1:e<2048?2:e<65536?3:4}tB(e,r);let i=KF(e,r),s=e.bytes;for(let o=0;o<n;o++){let e=t.charCodeAt(o);e>=55296&&e<=56319&&o+1<n&&(e=(e<<10)+t.charCodeAt(++o)-56613888),e<128?s[i++]=e:(e<2048?s[i++]=e>>6&31|192:(e<65536?s[i++]=e>>12&15|224:(s[i++]=e>>18&7|240,s[i++]=e>>12&63|128),s[i++]=e>>6&63|128),s[i++]=63&e|128)}}function QF(e){return e.bytes[YF(e,1)]}function $F(e,t){let n=KF(e,1);e.bytes[n]=t}function eB(e){let t,n=0,r=0;do{t=QF(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function tB(e,t){for(t>>>=0;t>=128;)$F(e,127&t|128),t>>>=7;$F(e,t)}function nB(e,t){let n,r=0,i=0,s=0;return n=QF(e),r=127&n,128&n&&(n=QF(e),r|=(127&n)<<7,128&n&&(n=QF(e),r|=(127&n)<<14,128&n&&(n=QF(e),r|=(127&n)<<21,128&n&&(n=QF(e),i=127&n,128&n&&(n=QF(e),i|=(127&n)<<7,128&n&&(n=QF(e),i|=(127&n)<<14,128&n&&(n=QF(e),i|=(127&n)<<21,128&n&&(n=QF(e),s=127&n,128&n&&(n=QF(e),s|=(127&n)<<7))))))))),{low:r|i<<28,high:i>>>4|s<<24,unsigned:t}}function rB(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,s=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,o=KF(e,s),a=e.bytes;switch(s){case 10:a[o+9]=i>>>7&1;case 9:a[o+8]=9!==s?128|i:127&i;case 8:a[o+7]=8!==s?r>>>21|128:r>>>21&127;case 7:a[o+6]=7!==s?r>>>14|128:r>>>14&127;case 6:a[o+5]=6!==s?r>>>7|128:r>>>7&127;case 5:a[o+4]=5!==s?128|r:127&r;case 4:a[o+3]=4!==s?n>>>21|128:n>>>21&127;case 3:a[o+2]=3!==s?n>>>14|128:n>>>14&127;case 2:a[o+1]=2!==s?n>>>7|128:n>>>7&127;case 1:a[o]=1!==s?128|n:127&n}}const iB={},sB={},oB=4294967296,aB=oB*oB,cB=aB/2,lB=fB(0,!0),dB=fB(0),uB=mB(0,-2147483648,!1),hB=mB(-1,2147483647,!1),pB=mB(-1,-1,!0);function fB(e,t){let n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=sB[e],r)?r:(n=mB(e,0,!0),i&&(sB[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=iB[e],r)?r:(n=mB(e,e<0?-1:0,!1),i&&(iB[e]=n),n)}function mB(e,t,n){return{low:0|e,high:0|t,unsigned:!!n}}function gB(e,t){if(isNaN(e))return t?lB:dB;if(t){if(e<0)return lB;if(e>=aB)return pB}else{if(e<=-cB)return uB;if(e+1>=cB)return hB}return e<0?t?lB:dB:mB(e%oB|0,e/oB|0,t)}function _B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class vB extends ly{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(Tw.CONNECTION_STATE_CHANGE,e,t)}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this._qualityRatio}),6e4))}constructor(e){var t;super(),sh(this,"name","AgoraRTCImageModeration"),sh(this,"_connectionState",bw.CONNECTING),sh(this,"_sequence",0),sh(this,"_moderationStartTime",void 0),sh(this,"_workerConnection",void 0),sh(this,"_workerMessageLengthLimit",void 0),sh(this,"_qualityRatio",void 0),sh(this,"_connectInfo",void 0),sh(this,"_cancelTokenSource",sT.CancelToken.source()),sh(this,"_retryConfig",void 0),sh(this,"_moderationInterval",void 0),sh(this,"_moderationTimer",null),sh(this,"_moderationMode",1),sh(this,"_quality",1),sh(this,"_qualityTimer",null),sh(this,"_ticket",void 0),sh(this,"_moderationIntervalMinimum",void 0),sh(this,"_uploadFailedNum",0),sh(this,"_uploadNum",0),sh(this,"_uploadTimer",null),sh(this,"_extraInfo",void 0),sh(this,"_vendor",""),sh(this,"_encoder",new TextEncoder),sh(this,"_moderationId",void 0),sh(this,"inspectImage",(()=>{if(this.connectionState!==bw.CONNECTED)throw new PS(Wv.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval((()=>{this.connectionState===bw.CONNECTED?this.requestToInspectImage():VT.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)}),this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()})),this._moderationId=rE(5,"image-moderation-"),this._workerMessageLengthLimit=bT("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=bT("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),this._qualityRatio=bT("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new Yw("worker-"+this._moderationId,mE),this.on(Tw.STATE_CHANGE,((e,t)=>{VT.debug("[".concat(this._moderationId,"] Moderation operation :").concat(Sw[e]," ").concat(t||""))})),this.handleWorkerEvents()}async init(e,t){this.emit(Tw.STATE_CHANGE,Sw.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new cv(((r,i)=>{this.on(Tw.CONNECTION_STATE_CHANGE,((e,t)=>{e===bw.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorker(e)})).catch((e=>{i(e)}))}))}updateConfig(e){var t;this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),VT.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(e))),this.connectionState===bw.CONNECTED&&this.inspectImage()}async requestAP(e,t,n){const r=bT("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),i=await function(e,t,n,r){let{appId:i,areaCode:s,cname:o,sid:a,token:c,uid:l}=t;cR++;const d="moderation_plugin",u={service_name:d,json_body:JSON.stringify({appId:i,areaCode:s,cname:o,command:"allocateEdge",requestId:cR,seq:cR,sid:a,appToken:c,ts:Date.now(),uid:l+""})};let h,p,f=e[0];return _E((async()=>{h=Date.now();const e=await BC(f,{data:u,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-h,0!==e.code){const t=new PS(Wv.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+e.code,{retry:!0,responseTime:p});throw VT.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new PS(Wv.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw VT.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new PS(Wv.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:t.code,responseTime:p});throw VT.error(e.toString()),e}if(!t.servers.some((e=>!!e.wss))){const e=new PS(Wv.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:t.code,responseTime:p});throw VT.error(e.toString()),e}const r=bT("IMAGE_MODERATION_WORKER_HOST");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(n,"/moderation")})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,ticket:t.appTicket,responseTime:p}}),((t,n)=>(eS.apworkerEvent(a,{success:!0,sc:200,serviceName:d,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1)),((t,n)=>(eS.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:d,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==Wv.OPERATION_ABORTED&&t.code!==Wv.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(f=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(Tw.STATE_CHANGE,Sw.AP_CONNECTED);const{addressList:s,ticket:o}=i;return this._ticket=o,s}async connectWorker(e){this.emit(Tw.STATE_CHANGE,Sw.CONNECT_WORKER),await this._workerConnection.init(e,1e4)}handleWorkerEvents(){this._workerConnection.on(ES.CONNECTED,(async()=>{this.emit(Tw.STATE_CHANGE,Sw.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=bw.CONNECTED})),this._workerConnection.on(ES.CLOSED,(()=>{this.connectionState=bw.CLOSED})),this._workerConnection.on(ES.FAILED,(()=>{this.connectionState=bw.CLOSED})),this._workerConnection.on(ES.RECONNECTING,(()=>{this.connectionState=this.connectionState===bw.CONNECTED?bw.RECONNECTING:bw.CONNECTING})),this._workerConnection.on(ES.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const t=VF(new Uint8Array(e.data));bT("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&VT.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(t)),this._uploadNum++,void 0===t.code||0===t.code||(this._uploadFailedNum++,VT.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(t.code,", msg is ").concat(t.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout((()=>{eS.reportApiInvoke(this._connectInfo.sid||null,{name:hy.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,t.code],tag:py.TRACER}).onError(new PS(Wv.IMAGE_MODERATION_UPLOAD_FAILED,t.msg)),this._uploadTimer=null}),bT("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else VT.error("[".concat(this._moderationId,"] Unexpected message type from worker"))})),this._workerConnection.on(ES.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this._workerConnection.on(ES.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){const e=Ry(this,Tw.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void(bT("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&VT.debug("Only the track being played can be inspected"));this._sequence++;const n=await this.generateRequestData(e,t);this._workerConnection.sendMessage(n,!0,!0)}else bT("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&VT.debug("Only the track being published can be inspected")}async generateRequestData(e,t){let{appId:n,cname:r,cid:i,vid:s,sid:o,uid:a}=t;const c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),d=await vN(l,n,r),u=this._sequence+"-"+i+"-"+a+"-"+c+"-"+rE(12,""),h={appId:n,cid:i,cname:r,deviceId:"",elapse:vB.intToLong(Number(c-this._moderationStartTime)),fileSize:l.buffer.byteLength,height:l.height,width:l.width,jpg:d,networkType:6,osType:7,requestId:u,sdkVersion:"4.20.2",sequence:this._sequence,sid:o,timestamp:gB(c),uid:a,vid:s,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};void 0===this._extraInfo&&delete h.callbackData;const p=BF(h);if(p.byteLength<this._workerMessageLengthLimit){if(bT("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_B(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h);delete e.jpg,VT.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(e))}return p}{const t=this.quality*this._qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:i,vid:s,sid:o,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=sT.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=bw.CLOSED,this.emit(Tw.STATE_CHANGE,Sw.CLOSED)}}function yB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yB(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const bB=Date.now(),TB=20,SB=new Map,wB=new Map;async function CB(e){const t=SB.get(e),n=Array.isArray(t)&&t[t.length-1],r=wB.get(e);if(!n)return void(r.isSyncing=!1);const i={uid:n.uid,payload:n.payload};0===r.firstRecvTs&&(r.firstRecvTs=n.recvTs,r.firstSendTs=n.sendTs);const s=n.sendTs-r.firstSendTs,o=s-(Date.now()-r.firstRecvTs);o>0&&(r.firstRecvTs=Date.now()-s);let a=n.mediaDelay+o;a<=0?(t.pop(),RB(n.context,i),a=0):a=Math.min(a,TB),setTimeout((()=>t.length&&CB(e)),a)}function RB(e,t){e.safeEmit(gy.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function IB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return RB(n,{uid:e.uid,payload:e.payload});const r="".concat(n.id,"-").concat(e.uid),i=SB.get(r)||[],s=i.findIndex((t=>e.sendTs>=t.sendTs)),o=EB(EB({},e),{},{context:n,mediaDelay:t,recvTs:Date.now()});-1===s?i.push(o):i.splice(s,0,o),SB.set(r,i);let a=!1;var c;wB.has(r)?a=!(null===(c=wB.get(r))||void 0===c||!c.isSyncing):wB.set(r,{isSyncing:a,firstRecvTs:0,firstSendTs:0}),a||CB(r)}const NB=Ev().name;function OB(){return!function(e,t,n){const r=Ev();if(r.os!==fv.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}(16,0,!0)&&!function(e,t,n){const r=Ev();if(r.name!==mv.SAFARI||!r.osVersion)return!1;const i=r.version.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}(16,0,!0)}function AB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AB(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}pE.setLogger(VT);class xB extends ly{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return(null===(e=this._config)||void 0===e?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e){let t;if(super(),sh(this,"store",void 0),sh(this,"_uid",void 0),sh(this,"_channelName",void 0),sh(this,"_uintUid",void 0),sh(this,"_users",[]),sh(this,"_config",void 0),sh(this,"_clientId",void 0),sh(this,"_appId",void 0),sh(this,"_sessionId",null),sh(this,"_key",void 0),sh(this,"_rtmConfig",{}),sh(this,"_joinInfo",void 0),sh(this,"_gateway",void 0),sh(this,"_statsCollector",void 0),sh(this,"_configDistribute",void 0),sh(this,"_leaveMutex",new pE("client-leave")),sh(this,"_publishMutex",new pE("client-publish")),sh(this,"_renewTokenMutex",new pE("client-renewtoken")),sh(this,"_subscribeMutex",new pE("client-subscribe")),sh(this,"_encryptionMode","none"),sh(this,"_encryptionSecret",null),sh(this,"_encryptionSalt",null),sh(this,"_encryptDataStream",!1),sh(this,"_encryptDataStreamKey",null),sh(this,"_encryptDataStreamIv",null),sh(this,"_proxyServer",void 0),sh(this,"_turnServer",{servers:[],mode:"auto"}),sh(this,"_cloudProxyServerMode","disabled"),sh(this,"_isDualStreamEnabled",!1),sh(this,"_defaultStreamFallbackType",void 0),sh(this,"_lowStreamParameter",void 0),sh(this,"_streamFallbackTypeCacheMap",new Map),sh(this,"_remoteStreamTypeCacheMap",new Map),sh(this,"_axiosCancelSource",sT.CancelToken.source()),sh(this,"_audioVolumeIndicationInterval",void 0),sh(this,"_networkQualityInterval",void 0),sh(this,"_userOfflineTimeout",void 0),sh(this,"_streamRemovedTimeout",void 0),sh(this,"_injectStreamingClient",void 0),sh(this,"_liveTranscodeStreamingClient",void 0),sh(this,"_liveRawStreamingClient",void 0),sh(this,"_channelMediaRelayClient",void 0),sh(this,"_networkQualitySensitivity","normal"),sh(this,"_p2pChannel",void 0),sh(this,"_useLocalAccessPoint",!1),sh(this,"_setLocalAPVersion",void 0),sh(this,"_joinAndNotLeaveYet",!1),sh(this,"_numberOfJoinCount",0),sh(this,"_remoteDefaultVideoStreamType",void 0),sh(this,"_inspect",void 0),sh(this,"_moderation",void 0),sh(this,"_license",void 0),sh(this,"_pendingPublishedUsers",[]),sh(this,"ntpAlignErrorCount",0),sh(this,"remoteInboundOffset",0),sh(this,"_handleLocalTrackEnable",((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),sh(this,"_handleLocalTrackDisable",((e,t,n)=>{this.unpublish(e).then(t).catch(n)})),sh(this,"_handleUserOnline",(e=>{if(bT("BLOCK_LOCAL_CLIENT")&&sS(e.uid,this.channelName))return void VT.debug("[".concat(e.uid,"] will be ignored in local"));this.isStringUID&&"string"!=typeof e.uid&&VT.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const t=this._users.find((t=>t.uid===e.uid));if(t)t._trust_in_room_=!0,t._is_pre_created&&(t._is_pre_created=!1,this.safeEmit(gy.USER_JOINED,t));else{const t=new sU(e.uid,e.uint_id||e.uid);this._users.push(t),VT.debug("[".concat(this._clientId,"] user online"),e.uid),this.safeEmit(gy.USER_JOINED,t)}})),sh(this,"_handleUserOffline",(e=>{if(bT("BLOCK_LOCAL_CLIENT")&&sS(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));t&&(this._handleRemoveStream(e),this._handleRemoveDataChannels(e),t._audio_pre_subscribed||t._video_pre_subscribed?t._is_pre_created=!0:Hy(this._users,t),this._remoteStreamTypeCacheMap.delete(t.uid),this._streamFallbackTypeCacheMap.delete(t.uid),VT.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.safeEmit(gy.USER_LEAVED,t,e.reason))})),sh(this,"_handleAddAudioOrVideoStream",((e,t,n,r,i,s,o)=>{if(bT("BLOCK_LOCAL_CLIENT")&&sS(t,this.channelName))return;const a=this._users.find((e=>e.uid===t));if(!a)return void VT.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));VT.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(a.uid,e,void 0,void 0,void 0,Date.now());const c="audio"===e?a.hasAudio:a.hasVideo;a._uintid||(a._uintid=i||t),"audio"===e?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,"audio"===e?(a._audio_added_=!0,void 0!==n&&(a._audioSSRC=n),void 0!==r&&(a._cname=r),s&&(a._audioOrtc=s)):(a._video_added_=!0,void 0!==n&&(a._videoSSRC=n),void 0!==r&&(a._cname=r),void 0!==o&&(a._rtxSsrcId=o),s&&(a._videoOrtc=s)),("audio"===e?a.hasAudio:a.hasVideo)&&!c&&(VT.info("[".concat(this._clientId,"] remote user ").concat(a.uid," published ").concat(e)),this.safeEmit(gy.USER_PUBLISHED,a,e)),"video"===e?eS.onGatewayStream(this._sessionId,qT.ON_ADD_VIDEO_STREAM,KT.ON_ADD_VIDEO_STREAM,{peer:i||t,ssrc:a._videoSSRC}):eS.onGatewayStream(this._sessionId,qT.ON_ADD_AUDIO_STREAM,KT.ON_ADD_AUDIO_STREAM,{peer:i||t,ssrc:a._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(a,e,n).then((t=>{if(t&&(VT.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof cF))return this._p2pChannel.unsubscribe(a,e,!0).then((()=>this._subscribe(a,e,!0).catch((e=>{VT.error("[".concat(this._clientId,"] resubscribe error"),e.toString())}))))})),this._p2pChannel.hasPendingRemoteMedia(a,e)&&(VT.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after reconnect.")),this._subscribe(a,e,!0).catch((e=>{VT.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),sh(this,"_handleRemoveStream",(e=>{if(bT("BLOCK_LOCAL_CLIENT")&&sS(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));if(!t)return void VT.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));VT.debug("[".concat(this._clientId,"] stream removed with uid ").concat(e.uid));let n=()=>{};t.hasAudio&&t.hasVideo?n=()=>{VT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(gy.USER_UNPUBLISHED,t,"audio"),VT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(gy.USER_UNPUBLISHED,t,"video")}:t.hasVideo?n=()=>{VT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(gy.USER_UNPUBLISHED,t,"video")}:t.hasAudio&&(n=()=>{VT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(gy.USER_UNPUBLISHED,t,"audio")}),t._video_pre_subscribed||t._audio_pre_subscribed||(t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,this._p2pChannel instanceof cF&&this._p2pChannel.unsubscribe(t).then((e=>{if(e)return this._gateway.unsubscribe(e,t.uid)})),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0),eS.onGatewayStream(this._sessionId,qT.ON_REMOVE_STREAM,KT.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),n()})),sh(this,"_handleSetStreamLocalEnable",((e,t,n)=>{if(bT("BLOCK_LOCAL_CLIENT")&&sS(t,this.channelName))return;const r=this._users.find((e=>e.uid===t));if(!r)return void VT.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));VT.debug("[".concat(this._clientId,"] local ").concat(e," ").concat(n?"enabled":"disabled"," with uid ").concat(t));const i="audio"===e?r.hasAudio:r.hasVideo;if("audio"===e){r._trust_audio_enabled_state_=!0;const e=r._audio_enabled_;if(r._audio_enabled_=n,r._audio_enabled_===e)return;{const e=r._audio_enabled_?"enable-local-audio":"disable-local-audio";VT.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(gy.USER_INFO_UPDATED,t,e)}}else{r._trust_video_enabled_state_=!0;const e=r._video_enabled_;if(r._video_enabled_=n,r._video_enabled_===e)return;{const e=r._video_enabled_?"enable-local-video":"disable-local-video";VT.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(gy.USER_INFO_UPDATED,t,e)}}const s="audio"===e?r.hasAudio:r.hasVideo;return i!==s?!i&&s?(VT.info("[".concat(this._clientId,"] remote user ").concat(t," published ").concat(e)),void this.safeEmit(gy.USER_PUBLISHED,r,e)):("video"===e&&r._videoTrack&&r._videoTrack._destroy(),"audio"===e&&r._audioTrack,this._p2pChannel.muteRemote(r,e),VT.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished ").concat(e)),void this.safeEmit(gy.USER_UNPUBLISHED,r,e)):void 0})),sh(this,"_handleMuteStream",((e,t,n)=>{if(bT("BLOCK_LOCAL_CLIENT")&&sS(e,this.channelName))return;VT.debug("[".concat(this._clientId,"] receive mute message"),e,t,n);const r=this._users.find((t=>t.uid===e));if(!r)return void VT.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(e));const i="audio"===t?r.hasAudio:r.hasVideo;if("audio"===t){r._trust_audio_mute_state_=!0;const t=r._audio_muted_;if(r._audio_muted_=n,r._audio_muted_===t)return;{const t=r._audio_muted_?"mute-audio":"unmute-audio";VT.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(gy.USER_INFO_UPDATED,e,t)}}else{r._trust_video_mute_state_=!0;const t=r._video_muted_;if(r._video_muted_=n,r._video_muted_===t)return;{const t=r._video_muted_?"mute-video":"unmute-video";VT.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(gy.USER_INFO_UPDATED,e,t)}}const s="audio"===t?r.hasAudio:r.hasVideo;if(i!==s){if(!i&&s)return("audio"===t?r._audioSSRC:r._videoSSRC)?(VT.info("[".concat(this._clientId,"] remote user ").concat(e," published ").concat(t)),void this.safeEmit(gy.USER_PUBLISHED,r,t)):void VT.warning("[".concat(this._clientId,"] remote user ").concat(e," receive ").concat(t," unmute message  before add stream message, ").concat(t," SSRC doesn't exist yet."));"video"===t&&r._videoTrack&&!r._video_pre_subscribed&&r._videoTrack._destroy(),"audio"===t&&r._audioTrack,this._p2pChannel.muteRemote(r,t),VT.info("[".concat(this._clientId,"] remote user ").concat(e," unpublished ").concat(t)),this.safeEmit(gy.USER_UNPUBLISHED,r,t)}})),sh(this,"_handleP2PLost",(async e=>{VT.debug("[".concat(this._clientId,"] receive p2p lost"),e),parseInt(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():VT.warning("[".concat(this._clientId,"] P2PLost stream not found"),e)})),sh(this,"_handleTokenWillExpire",(()=>{VT.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(gy.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),sh(this,"_handleBeforeUnload",(e=>{"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),VT.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))})),sh(this,"_handleUpdateNetworkQuality",(()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.safeEmit(gy.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(gy.NETWORK_QUALITY,e)})),sh(this,"_handleP2PAddAudioOrVideoStream",((e,t,n,r)=>{const i=this._users.find((e=>e.uid===t));if(!i)return void VT.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));VT.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(i.uid,e,void 0,void 0,void 0,Date.now());const s="audio"===e?i.hasAudio:i.hasVideo;"audio"===e?i._trust_audio_stream_added_state_=!0:i._trust_video_stream_added_state_=!0,"audio"===e?(i._audio_added_=!0,void 0!==n&&(i._audioSSRC=n),void 0!==r&&(i._audioMid=r)):(i._video_added_=!0,void 0!==n&&(i._videoSSRC=n),void 0!==r&&(i._videoMid=r)),("audio"===e?i.hasAudio:i.hasVideo)&&!s&&(VT.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published ").concat(e)),this.safeEmit(gy.USER_PUBLISHED,i,e)),this._p2pChannel.hasPendingRemoteMedia(i,e)&&(VT.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(i.uid," after reconnect.")),this._subscribe(i,e,!0).catch((e=>{VT.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),this._config=e,this._clientId=rE(5,"client-"),this.store=new NT(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),VT.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(mT," build: ").concat(vT,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{Sy(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(e){VT.warning("[".concat(this._clientId,"] ").concat(e.toString()))}this._statsCollector=new gU(this.store),this._statsCollector.onStatsException=(e,t,n)=>{VT.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(e,", msg: ").concat(t,", uid: ").concat(n)),this.safeEmit(gy.EXCEPTION,{code:e,msg:t,uid:n})},this._statsCollector.onUploadPublishDuration=(e,t,n,r)=>{const i=this._users.find((t=>t.uid===e));i&&eS.peerPublishStatus(this._sessionId,{subscribeElapse:r,audioPublishDuration:t,videoPublishDuration:n,peer:i._uintid})},this.store.useDataChannel=SR().supportDataChannel&&bT("SIGNAL_CHANNEL"),this.store.useP2P="p2p"===e.mode,this._gateway=new jC(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||mE,httpRetryConfig:e.httpRetryConfig||mE,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._configDistribute=new bR,this.store.useP2P?(this._p2pChannel=new hU(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new cF(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,n,r,i){let s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];ET("JOIN_GATEWAY_USE_443PORT_ONLY",s),ET("JOIN_GATEWAY_USE_DUAL_DOMAIN",o);const a=this._gateway.signal.websocket;return a instanceof Kw&&(a.use443PortOnly=s,a.tryDoubleDomain=o),async function(e,t,n){uv.get(e)||uv.set(e,[]),hv.get(e)||hv.set(e,t),pv.get(e)||pv.set(e,0);const r=uv.get(e),i=hv.get(e);if(!r||!i)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(pv.get(e)===i){const e=dv();r.push(e),await e.promise}pv.set(e,pv.get(e)+1);for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];const c=await n(...o);return pv.set(e,pv.get(e)-1),pv.get(e)===i-1&&r.length>0&&(r[0].resolve(),r.shift()),0===pv.get(e)&&(uv.set(e,[]),hv.set(e,0),pv.set(e,0)),c}("client.join",bT("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,n,r,i)}async join(e,t,n,r,i){const s=++this._numberOfJoinCount;this.store.joinStart(),r&&(this.store.uid=r);const o=pT(),a=fT()?window.isSecureContext:"Browser Not Support";if(!fT()&&!o||!window.isSecureContext){const e="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";VT.warning(e)}const c=iE();"DISCONNECTED"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),VT.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const l=eS.reportApiInvoke(c,{name:hy.JOIN,options:[e,t,n,r],states:{isHttps:o,isSecureContext:a},tag:py.TRACER});eS.setAppId(e);try{if(!n&&null!==n)throw new PS(Wv.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&Xv(n,"token",1,2047),Xv(e,"appid",1,2047),DS(t),r&&LS(r),i&&Xv(i,"optionalInfo",1,2047)}catch(e){throw l.onError(e),e}if(VT.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(s)),this._leaveMutex.isLocked&&(VT.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),VT.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,"DISCONNECTED"!==this.connectionState){const e=new PS(Wv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw l.onError(e),e}this._sessionId||(this._sessionId=c,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const d=kB(kB({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof r?r:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(d.setLocalAPVersion=this._setLocalAPVersion),"string"==typeof r&&(d.stringUid=r,this._uintUid?(d.uid=this._uintUid,this._uintUid=void 0):d.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret){if(d.aesmode=this._encryptionMode,d.aespassword=await ay(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new PS(Wv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(d.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&("aes-128-gcm2"===this._encryptionMode||"aes-256-gcm2"===this._encryptionMode))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const e=new TextEncoder,t=bT("USE_PURE_ENCRYPTION_MASTER_KEY")?e.encode(d.appId+this._encryptionSecret+this._encryptionSecret):e.encode(d.appId+d.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),i="aes-128-gcm2"===e?128:256,s=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:kT,hash:"SHA-256",salt:n},r,i+AT);return new Uint8Array(s).subarray(i/8)}(this._encryptionMode,t,Xy(this._encryptionSalt)),this._encryptDataStreamKey=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),i="aes-128-gcm2"===e?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:kT,hash:"SHA-256",salt:n},r,{name:"AES-GCM",length:i},!0,["encrypt","decrypt"])}(this._encryptionMode,t,Xy(this._encryptionSalt))}else a?VT.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):VT.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,VT.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:d.stringUid});const u=this._sessionId;setTimeout((()=>{"CONNECTING"===this.connectionState&&u===this._sessionId&&eS.joinChannelTimeout(this._sessionId,5)}),5e3);try{var h;let r;const i=d.cloudProxyServer;if(Nr(h=["proxy3","proxy4","proxy5"]).call(h,i)){const e=bT("PROXY_SERVER_TYPE3");Array.isArray(e)?d.proxyServer=e[0]:d.proxyServer=e}if(eS.setProxyServer(d.proxyServer),VT.setProxyServer(d.proxyServer),this.store.requestAPStart(),d.stringUid&&!d.uid){let e;[e,r]=await cv.all([pR(d.stringUid,d,this._axiosCancelSource.token,this._config.httpRetryConfig||mE,this.store),hR(d,this._axiosCancelSource.token,this._config.httpRetryConfig||mE,!0,this.store)]),VT.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(d.stringUid," => ").concat(e)),d.uid=e,r.gatewayInfo.uid=e,r.gatewayInfo.res.uid=e}else r=await hR(d,this._axiosCancelSource.token,this._config.httpRetryConfig||mE,!0,this.store);if(!this._joinAndNotLeaveYet)throw new PS(Wv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout((()=>{this._configDistribute.startGetConfigDistribute(d,this._axiosCancelSource.token),this._configDistribute.on(sw.UPDATE_BITRATE_LIMIT,(e=>{this._p2pChannel.updateBitrateLimit(e)}))}),0),this._key=n||e;const s=r.gatewayInfo,o=d.uid?d.uid:s.uid;this._joinInfo=kB(kB({},d),{},{cid:s.cid,uid:o,vid:s.vid,apResponse:s.res,uni_lbs_ip:s.uni_lbs_ip,gatewayAddrs:s.gatewayAddrs}),this.store.intUid=o;const a=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new PS(Wv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));l.onSuccess(a),this._appId=e,this._channelName=d.cname,this._uid=a,this.store.uid=a,setTimeout((()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Iv()?"beforeunload":"pagehide",this._handleBeforeUnload)}),0);const c=d.stringUid?"string uid: ".concat(d.stringUid,",uid: ").concat(d.uid):"uid: ".concat(this._uid);return VT.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(c)),setTimeout((()=>{VT.startUpload()}),5e3),this.store.joinEnd(),p=this,Nr(iS).call(iS,p)||iS.push(p),a}catch(e){const t=Array.isArray(e)?e[0]:e;throw t&&t.code===Wv.OPERATION_ABORTED?VT.warning("[".concat(this._clientId,"] join number: ").concat(s,", Joining channel failed, rollback"),t):VT.error("[".concat(this._clientId,"] join number: ").concat(s,", Joining channel failed, rollback"),t),t.code!==Wv.OPERATION_ABORTED&&this._numberOfJoinCount===s&&(this._gateway.state="DISCONNECTED",this._reset()),l.onError(t),t}var p}_joinGateway(){if(!this._joinInfo||!this._key)throw new PS(Wv.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!bT("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then((e=>e)).catch((e=>{if(e.code===Wv.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,my.FALLBACK),e;if(e.code===Wv.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,my.FALLBACK),e;throw e})).then((e=>{if(e instanceof PS){if(e.code===Wv.INIT_WEBSOCKET_TIMEOUT){if(VT.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new PS(Wv.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const e=bT("PROXY_SERVER_TYPE3");if(Array.isArray(e))if(this._joinInfo.apUrl){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),n=t.slice(t.length-2).join(".");e.forEach((e=>{this._joinInfo&&Nr(e).call(e,n)&&(this._joinInfo.proxyServer=e)})),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=e[0])}else this._joinInfo.proxyServer=e[0];else this._joinInfo.proxyServer=e;const t=bT("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return t&&t[1]&&"443"!==t[1]&&VT.setProxyServer(this._joinInfo.proxyServer),"443"!==bT("STATS_COLLECTOR_PORT").toString()&&eS.setProxyServer(this._joinInfo.proxyServer),eS.reportApiInvoke(this._sessionId,{name:hy.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:py.TRACER}).onSuccess(),this.safeEmit(gy.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),bT("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach((e=>{"forceturn"in e&&(e.forceturn=!0)})),this._gateway.join(this._joinInfo,this._key)}if(VT.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new PS(Wv.INVALID_OPERATION);return eS.reportApiInvoke(this._sessionId,{name:hy.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:py.TRACER}).onSuccess(),this._joinGateway()}return e})).then((e=>e))}async leave(){VT.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Iv()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(e){const t=iS.indexOf(e);-1!==t&&iS.splice(t,1)}(this);const e=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return VT.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave("CONNECTED"!==this.connectionState),VT.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(e)){if(!(e instanceof dI))return this._publishDataChannel(e);e=[e]}if(0===e.length)throw new PS(Wv.INVALID_PARAMS,"param list is empty");const n=e;if("audience"===this._gateway.role)throw new PS(Wv.INVALID_OPERATION,"audience can not publish stream");for(const i of n){if(!(i instanceof dI))throw new PS(Wv.INVALID_PARAMS,"parameter is not local track");if(!i._enabled&&t)throw new PS(Wv.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()))}VT.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))));const r=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&n.forEach((e=>{const t=this._configDistribute.getBitrateLimit();e instanceof bN&&t&&e.setBitrateLimit(t.uplink)}));try{await this._publishHighStream(n),VT.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))))}catch(e){throw VT.error("[".concat(this._clientId,"] publish error"),e.toString()),e}finally{r()}}async _publishDataChannel(e){Yv(e.id,"id",0,65535,!0),qv(e.ordered,"ordered"),Xv(e.metadata,"metadata",0,512),VT.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));const t=await this._publishMutex.lock();try{if(-1!==this._p2pChannel.getAllDataChannels().findIndex((t=>t.id===e.id)))throw new PS(Wv.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||void 0===this._uid)throw new PS(Wv.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&bT("FORCE_TURN")&&!bT("TURN_ENABLE_TCP")&&!bT("TURN_ENABLE_UDP"))throw new PS(Wv.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const t=new ax(e);if(await this._p2pChannel.publishDataChannel([t]),!this._p2pChannel.isP2PDisconnected()){if("number"!=typeof t._originDataChannelId)throw VT.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new PS(Wv.CREATE_DATACHANNEL_ERROR);try{const n={streamId:e.id,ordered:e.ordered,maxRetransmits:bT("DATASTREAM_MAX_RETRANSMITS"),metadata:e.metadata,channelId:t._originDataChannelId};await this._gateway.publishDataChannel(this._uid,n,!0),await t._waitTillOpen()}catch(e){if(e.code!==Wv.DISCONNECT_P2P)throw e}}return VT.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(t.id)),t}catch(e){throw VT.error("[".concat(this._clientId,"] publish datachannels error"),e.toString()),e}finally{t()}}async unpublish(e){if(!this._joinInfo||void 0===this._uid)throw new PS(Wv.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof dI))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);VT.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map((e=>"".concat(e.getTrackId()," ")))," "));const n=await this._publishMutex.lock();try{if(this._p2pChannel instanceof hU){const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.sendExtensionMessage(ww.UNPUBLISH,{unpubMsg:e},!0)}else{const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.unpublish(e,this._uid),VT.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map((e=>"".concat(e.getTrackId())))))}}catch(e){throw VT.error("[".concat(this._clientId,"] unpublish error"),e.toString()),e}finally{n&&n()}}async _unpublishDataChannel(e){void 0!==e&&0!==e.length||(e=this._p2pChannel.getAllDataChannels()),VT.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map((e=>"".concat(e.id," ")))," "));const t=await this._publishMutex.lock();try{const t=await this._p2pChannel.unpublishDataChannel(e);t&&await this._gateway.unpublishDataChannel(t),VT.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map((e=>"".concat(e.id)))))}catch(e){throw VT.error("[".concat(this._clientId,"] unpublish dataChannel error"),e.toString()),e}finally{t&&t()}}async subscribe(e,t,n){return"datachannel"===t?this._subscribeDataChannel(e,n):this._subscribe(e,t)}async presubscribe(e,t){if(Kv(t,"mediaType",["audio","video"]),this._p2pChannel instanceof hU)throw new PS(Wv.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"can't presub when not join");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const n=t===aw.AUDIO,r=t===aw.VIDEO,i=await this._subscribeMutex.lock();try{const{ssrcId:i,ortc:s,rtxSsrcId:o,cname:a,uint_id:c}=await this._gateway.presubscribe(e,t,!0);if(null==i)throw new PS(Wv.UNEXPECTED_RESPONSE,"no ssrc id");let l=this._users.find((t=>t.uid===e));l||(l=new sU(e,c||e),l._is_pre_created=!0,this._users.push(l)),a&&(l._cname=a),l._uintid||(l._uintid=c||e),n&&(l._audioSSRC=i,l._audio_pre_subscribed=!0,s&&(l._audioOrtc=s)),r&&(l._videoSSRC=i,l._video_pre_subscribed=!0,s&&(l._videoOrtc=s),null!=o&&(l._rtxSsrcId=o)),VT.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(i)),await this._p2pChannel.subscribe(l,t,i,o,s);const d=n?l._audioTrack:l._videoTrack;if(!d)throw new PS(Wv.UNEXPECTED_ERROR,"can not find remote track in user");return n&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0),r&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0),d}catch(t){throw VT.error("[".concat(this._clientId,"] presub user ").concat(e," error"),t),t}finally{i()}}async _subscribeDataChannel(e,t){var n;if(Yv(t,"channelId",0,65535,!0),!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e)))throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new PS(Wv.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&0===e._dataChannels.length)throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new PS(Wv.INVALID_REMOTE_USER,"user is not published");const r=null===(n=e._dataChannels)||void 0===n?void 0:n.find((e=>e.id===t));if(!r)throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new PS(Wv.REMOTE_USER_IS_NOT_PUBLISHED);const i=await this._subscribeMutex.lock();VT.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{const n=await this._p2pChannel.subscribeDataChannel(e,[r]);if(n&&Nr(n).call(n,r.id))try{var s;if("number"!=typeof r._originDataChannelId)throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new PS(Wv.CREATE_DATACHANNEL_ERROR);const t={id:r.id,datachannelId:r._originDataChannelId,ordered:r.ordered,maxRetransmits:r.maxRetransmits,metadata:null!==(s=r.metadata)&&void 0!==s?s:""};await this._gateway.subscribeDataChannel(e.uid,t,!0),await r._waitTillOpen()}catch(t){if((null==t?void 0:t.code)!==Wv.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[r]),t;await this._p2pChannel.unsubscribeDataChannel(e,[r]),this._p2pChannel.setPendingRemoteDataChannel(e,r.id)}return VT.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),r}finally{i()}}async _p2pSubscribe(e,t,n){if(Kv(t,"mediaType",["audio","video"]),!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e))){const t=new PS(Wv.INVALID_REMOTE_USER,"user is not in the channel");throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new PS(Wv.INVALID_REMOTE_USER,"user is not published");throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!n&&("audio"===t&&!e.hasAudio||"video"===t&&!e.hasVideo)){const n=new PS(Wv.REMOTE_USER_IS_NOT_PUBLISHED);throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}const r=await this._subscribeMutex.lock();VT.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const n="audio"===t?e._audioSSRC:e._videoSSRC,r="audio"===t?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof hU&&await this._p2pChannel.subscribe(e,t,n,r)}catch(e){throw e}VT.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{VT.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const n="audio"===t?e._audioTrack:e._videoTrack;if(!n)throw new PS(Wv.UNEXPECTED_ERROR,"can not find remote track in user object");return n}catch(t){throw VT.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{r()}}async _subscribe(e,t,n){if(this._p2pChannel instanceof hU)return this._p2pSubscribe(e,t);if(Kv(t,"mediaType",["audio","video"]),!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e))){const t=new PS(Wv.INVALID_REMOTE_USER,"user is not in the channel");throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new PS(Wv.INVALID_REMOTE_USER,"user is not published");throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!(n||("audio"!==t||e.hasAudio&&void 0!==e._audioSSRC)&&("video"!==t||e.hasVideo&&void 0!==e._videoSSRC))){const n=new PS(Wv.REMOTE_USER_IS_NOT_PUBLISHED);throw VT.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}let r="audio"===t?e._audioSSRC:e._videoSSRC,i="audio"===t?e._audioOrtc:e._videoOrtc,s="video"===t?e._rtxSsrcId:void 0,o={stream_type:"audio"===t?aw.AUDIO:aw.VIDEO,ssrcId:r};const a=await this._subscribeMutex.lock();VT.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const a="audio"===t?e._audioSSRC:e._videoSSRC;void 0!==a&&a!==r&&(r=a,i="audio"===t?e._audioOrtc:e._videoOrtc,s="video"===t?e._rtxSsrcId:void 0,o={stream_type:"audio"===t?aw.AUDIO:aw.VIDEO,ssrcId:r}),bM.markSubscribeStart(this.store.clientId,r),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,r,s,i);try{await this._gateway.subscribe(e.uid,o,!0)}catch(n){if((null==n?void 0:n.code)!==Wv.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),n;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(n){throw this._p2pChannel.reportSubscribeEvent(!1,null==n?void 0:n.code,e,t),n}VT.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{VT.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const a="audio"===t?e._audioTrack:e._videoTrack;if(!a)throw new PS(Wv.UNEXPECTED_ERROR,"can not find remote track in user object");return a}catch(t){throw VT.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{a()}}async massSubscribe(e){if(Zv(e,"subscribeList"),!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const t=Date.now(),n=new Map,r=await this._subscribeMutex.lock();VT.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; ")));const i=(e=[...e]).map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n}})),s=await this._p2pChannel.globalLock();try{var o;for(let t=e.length-1;t>=0;t--){const r=e[t],{user:s,mediaType:o}=r;if(Kv(o,"mediaType",["audio","video"]),!s){const e=new PS(Wv.INVALID_PARAMS,"user property does not exist in subscribeList item");throw VT.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),e}if(!this._users.find((e=>e===s))){const n=new PS(Wv.INVALID_REMOTE_USER,"user is not in the channel");VT.error("[".concat(this._clientId,"] can not massSubscribe ").concat(s.uid,", this user is not in the channel")),i[t].error=n,e.splice(t,1);continue}if("audio"===o&&(!s.hasAudio||void 0===s._audioSSRC)||"video"===o&&(!s.hasVideo||void 0===s._videoSSRC)){const n=new PS(Wv.REMOTE_USER_IS_NOT_PUBLISHED);VT.error("[".concat(this._clientId,"] can not subscribe ").concat(s.uid," with mediaType ").concat(o,", remote user is not published")),i[t].error=n,e.splice(t,1);continue}const a=QS.Video|QS.LwoVideo,c=n.get(s);if(c){if("video"===o?c&a:c&QS.Audio){e.splice(t,1),VT.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(s.uid,", mediaType:").concat(o," twice"));continue}n.set(s,c|("video"===o?a:QS.Audio))}else n.set(s,"video"===o?a:QS.Audio)}for(let t=e.length-1;t>=0;t--){const r=e[t],{user:i,mediaType:s}=r,o=QS.Video|QS.LwoVideo;if(this._p2pChannel.hasRemoteMedia(i,s)){await this._p2pChannel.unmuteRemoteNoLock(i,s);const r=n.get(i);n.set(i,"video"===s?r^o:r^QS.Audio),e.splice(t,1)}}this.store.massSubscribe(e.map((e=>({userId:e.user.uid,type:e.mediaType}))),t);const r=By(o=Array.from(n.entries())).call(o,((e,t)=>{let[n,r]=t;if(0===r)return e;const i={stream_id:n.uid,stream_type:r};return r&QS.Audio&&(i.audio_ssrc=n._audioSSRC),r&QS.Video&&(i.video_ssrc=n._videoSSRC),e.push(i),e}),[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n,ssrcId:n===aw.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:n===aw.VIDEO?t._rtxSsrcId:void 0}})));const n=new Map;if(r.length>0){const e=await this._gateway.subscribeAll(r,!0);((null==e?void 0:e.users)||[]).forEach((e=>{let{stream_id:t,video_error_code:r,audio_error_code:i,error_code:s}=e;(r||i||s)&&n.set(t,{video_error_code:r,audio_error_code:i,error_code:s})}))}if(Array.from(n.entries()).length>0){const e=[];Array.from(n.entries()).forEach((t=>{let[n,r]=t;const i=this.remoteUsers.find((e=>e.uid===n));if(i){let t;r.error_code||r.video_error_code&&r.audio_error_code?t=void 0:r.video_error_code?t=aw.VIDEO:r.audio_error_code&&(t=aw.AUDIO),e.push({user:i,mediaType:t})}})),e.length>0&&await this._p2pChannel.massUnsubscribeNoLock(e)}for(const e of i){const t=n.get(e.user.uid);if(t){const n=t.error_code||"audio"===e.mediaType&&t.audio_error_code||"video"===e.mediaType&&t.video_error_code;if(n){const t=Dw(n);VT.error("user:".concat(e.user.uid," mediaType:").concat(e.mediaType," has massSubscribe error ").concat(t.desc)),e.error=new PS(Wv.SUBSCRIBE_FAILED,"code ".concat(n,": ").concat(t.desc))}}e.error||("video"===e.mediaType?e.track=e.user.videoTrack:e.track=e.user.audioTrack)}return this.store.massSubscribe(i.filter((e=>!e.error)).map((e=>({userId:e.user.uid,type:e.mediaType}))),void 0,Date.now()),i.forEach((e=>{var n;eS.subscribe(this.store.sessionId,{succ:!!e.error,ec:(null===(n=e.error)||void 0===n?void 0:n.code)||null,video:e.mediaType===aw.VIDEO,audio:e.mediaType===aw.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===aw.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t)},!0)})),VT.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),i}catch(t){throw await this._p2pChannel.massUnsubscribeNoLock(e),t}}finally{s(),r()}}async unsubscribe(e,t,n){if(t||this.store.useP2P){if("datachannel"===t)return this._unsubscribeDataChannel(e,n)}else await this._unsubscribeDataChannel(e,n);if(t&&Kv(t,"mediaType",["audio","video"]),!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find((t=>t===e))){const t=new PS(Wv.INVALID_REMOTE_USER,"user is not in the channel");throw VT.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}VT.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));const r=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof hU)await this._p2pChannel.unsubscribe(e,t);else{const n=await this._p2pChannel.unsubscribe(e,t);n&&await this._gateway.unsubscribe(n,e.uid),t&&"audio"!==t||(e._audio_pre_subscribed=!1),t&&"video"!==t||(e._video_pre_subscribed=!1),e._is_pre_created&&Hy(this._users,e),VT.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(t){if(t.code===Wv.DISCONNECT_P2P)return void VT.warning("disconnecting p2p, abort unsubscribe request.");throw VT.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}finally{r()}}async _unsubscribeDataChannel(e,t){if(t&&Yv(t,"id",0,65535,!0),!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find((t=>t===e))){const t=new PS(Wv.INVALID_REMOTE_USER,"user is not in the channel");throw VT.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}let n;if("number"==typeof t){const r=e._dataChannels.find((e=>e.id===t));r&&(n=[r])}else n=e._dataChannels;if(void 0===n){const n=new PS(Wv.REMOTE_USER_IS_NOT_PUBLISHED);throw VT.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),n}VT.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(n.map((e=>e.id))));try{const t=await this._p2pChannel.unsubscribeDataChannel(e,n);t&&await this._gateway.unsubscribeDataChannel(t,e.uid),VT.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(t))}catch(t){if(t.code===Wv.DISCONNECT_P2P)return void VT.warning("disconnecting p2p, abort unsubscribe request.");throw VT.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}}async massUnsubscribe(e){if(Zv(e,"unsubscribeList"),!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");VT.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),e=[...e];const t=new Map;for(let n=e.length-1;n>=0;n--){const{user:r,mediaType:i}=e[n];if(!r){const e=new PS(Wv.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw VT.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),e}if(Kv(i,"mediaType",["video","audio",void 0]),!this._users.find((e=>e===r))){VT.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(r.uid,", user is not in the channel")),e.splice(n,1);continue}const s=QS.Video|QS.LwoVideo;if(t.has(r)){const o=t.get(r);let a;switch(i){case"video":a=o&s;break;case"audio":a=o&QS.Audio;break;default:a=o&(QS.Audio|s)}if(a){VT.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(r.uid,",mediaType:").concat(i," twice.")),e.splice(n,1);continue}i?"audio"===i?t.set(r,o|QS.Audio):"video"===i&&t.set(r,o|s):t.set(r,o|QS.Audio|s)}else i?"audio"===i?t.set(r,QS.Audio):"video"===i&&t.set(r,s):t.set(r,QS.Audio|s)}try{const t=await this._p2pChannel.massUnsubscribe(e);t&&await this._gateway.massUnsubscribe(t),VT.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join()))}catch(e){if(e.code===Wv.DISCONNECT_P2P)return void VT.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw VT.error("[".concat(this._clientId,"] massUnsubscribe error"),e.toString()),e}}async setLowStreamParameter(e){!function(e){if(!e)throw new zv(Wv.INVALID_PARAMS);Qv(e.width)||Jv(e.width,"streamParameter.width"),Qv(e.height)||Jv(e.height,"streamParameter.height"),Qv(e.framerate)||Jv(e.framerate,"streamParameter.framerate"),Qv(e.bitrate)||Yv(e.bitrate,"streamParameter.bitrate")}(e),(!e.width&&e.height||e.width&&!e.height)&&VT.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),VT.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));const t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,dw.LocalVideoLowTrack)}async enableDualStream(){if(!SR().supportDualStream)throw eS.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new PS(Wv.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new PS(Wv.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw eS.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,eS.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),VT.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(dw.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw eS.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,eS.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),VT.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(e){Kv(e,"role",["audience","host"])}(e),t&&Sy(t),"rtc"===this.mode||"p2p"===this.mode)throw VT.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new PS(Wv.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&"host"===e)throw new PS(Wv.INVALID_OPERATION,"host mode can not set audience latency level");if("audience"===e&&this._p2pChannel.hasLocalMedia())throw new PS(Wv.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(e,t),this._config.role=e,VT.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}getRemoteInboundOffset(){var e;const t=null===(e=this._p2pChannel.getStats())||void 0===e?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;const n=t.timestamp-Date.now();return Math.abs(n)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?n:0}getNtpWallTimeInMs(){return"visible"===document.visibilityState&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(Xv(e,"proxyServer"),!t){if("DISCONNECTED"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new PS(Wv.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,eS.setProxyServer(this._proxyServer),VT.setProxyServer(this._proxyServer),VT.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if("DISCONNECTED"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new PS(Wv.INVALID_OPERATION,"You have already set the proxy")}if(by(e))return this._turnServer={servers:e,mode:"original-manual"},void VT.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map((e=>e.urls)).join(","),"."));e.forEach((e=>Ty(e))),this._turnServer={servers:e,mode:"manual"},VT.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if("DISCONNECTED"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"you should set license before join channel");if(Xv(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new PS(Wv.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,VT.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if("DISCONNECTED"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw new PS(Wv.INVALID_OPERATION,"You have already set the proxy");const t=[3,4,5];let n;switch(void 0===e&&(e=3),e){case 1:case 2:throw new PS(Wv.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:n="proxy3";break;case 4:n="proxy4";break;case 5:n="proxy5";break;default:throw new PS(Wv.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=n,this.store.cloudProxyServerMode=n,VT.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if("DISCONNECTED"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"Stop proxy server after leave channel");eS.setProxyServer(),VT.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",VT.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new PS(Wv.INVALID_PARAMS,"accessPoints is required.");Zv(e.accessPoints.serverList,"accessPoints.serverList"),Xv(e.accessPoints.domain,"accessPoints.domain");const t=(e,t)=>{Yv(e,t,0,65535,!0)};let n=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),n=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new PS(Wv.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");bT("CLOSE_AFB_FOR_LOCAL_AP")&&(ET("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),ET("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const r=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,s=e.accessPoints.serverList.map((e=>r.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(i):e)),o=s.map((e=>"".concat(e,":").concat(n)));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,ET("WEBCS_DOMAIN",o),ET("WEBCS_DOMAIN_BACKUP_LIST",o),ET("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(Zv(e.report.hostname,"report.hostname"),ET("EVENT_REPORT_DOMAIN",e.report.hostname[0]),ET("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(ET("EVENT_REPORT_DOMAIN",s[0]),ET("EVENT_REPORT_BACKUP_DOMAIN",s[1]||s[0]));let a=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),a=e.report.port),ET("STATS_COLLECTOR_PORT",a),e.report?ET("ENABLE_EVENT_REPORT",!0):ET("ENABLE_EVENT_REPORT",!1);let c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(Zv(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=s[0];let l=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),l=e.log.port),ET("LOG_UPLOAD_SERVER","".concat(c,":").concat(l));let d=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(Zv(e.cds.hostname,"cds.hostname"),d=e.cds.hostname):d=s;let u=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),u=e.cds.port),ET("CDS_AP",d.map((e=>"".concat(e,":").concat(u)))),e.cds?ET("ENABLE_CONFIG_DISTRIBUTE",!0):ET("ENABLE_CONFIG_DISTRIBUTE",!1),VT.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(Zv(e,"serverList"),Xv(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new PS(Wv.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map((e=>n.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(t):e)),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,ET("WEBCS_DOMAIN",e),ET("WEBCS_DOMAIN_BACKUP_LIST",e),ET("GATEWAY_DOMAINS",[t]),ET("EVENT_REPORT_DOMAIN",e[0]),ET("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),ET("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),VT.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(Kv(e,"streamType",[0,1]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(e){throw VT.error("[".concat(this._clientId,"] set default remote video stream type error"),e.toString()),e}else VT.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){Kv(t,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout((()=>{const t=this._users.find((t=>t.uid===e));t&&t.videoTrack&&t.videoTrack.updateMediaStreamTrackResolution()}),2e3)}catch(e){throw VT.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}VT.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){Kv(t,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw VT.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}VT.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,n,r){!function(e){Kv(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),Xv(t,"secret");const i=["aes-128-gcm2","aes-256-gcm2"];if(Nr(i).call(i,e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new PS(Wv.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new PS(Wv.INVALID_PARAMS,"current encrypt mode does not need salt");if(r){if(qv(r,"encryptDataStream"),!Nr(i).call(i,e))throw new PS(Wv.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||VT.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=Zy(n))}async renewToken(e){if(Xv(e,"token",1,2047),!this._key||!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"renewToken should not be called before user join");const t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const n=await this._renewTokenMutex.lock();try{if(bT("USE_NEW_TOKEN")){VT.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const t=await vR(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||mE);VT.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:t})}else VT.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});VT.debug("[".concat(this._clientId,"] renewToken success"))}catch(e){throw this._key=t,this._joinInfo.token=t,VT.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}finally{n()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?VT.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval((()=>{const e=this._p2pChannel.getAudioLevels();this.safeEmit(gy.VOLUME_INDICATOR,e)}),bT("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if("h264"!==this.codec)throw new PS(Wv.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new PS(Wv.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new PS(Wv.LIVE_STREAMING_TASK_CONFLICT);const n=t?bS.TRANSCODE:bS.RAW;return this._createLiveStreamingClient(n).startLiveStreamingTask(e,n)}setLiveTranscoding(e){return this._createLiveStreamingClient(bS.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((t=>t&&t.hasUrl(e)));if(!t.length)throw new PS(Wv.INVALID_PARAMS,"can not find live streaming url to stop");await cv.all(t.map((t=>t&&t.stopLiveStreamingTask(e))))}async addInjectStreamUrl(e,t){if(!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const n=this._createLiveStreamingClient(bS.INJECT);n.setInjectStreamConfig(t,0),await n.startLiveStreamingTask(e,bS.INJECT)}async removeInjectStreamUrl(){var e;const t=this._createLiveStreamingClient(bS.INJECT),n=Array.from(AS(e=t.streamingTasks).call(e)).find((e=>e.mode===bS.INJECT));if(!this._joinInfo||!n)throw new PS(Wv.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await t.stopLiveStreamingTask(n.url)}async startChannelMediaRelay(e){wU(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}async updateChannelMediaRelay(e){wU(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}async stopChannelMediaRelay(){const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"can not send data stream, not joined");if(("string"==typeof e||e instanceof Uint8Array)&&(e={payload:e}),"string"==typeof e.payload){const t=new TextEncoder;e.payload=t.encode(e.payload)}let r=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Nr(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(r=!0,e.payload=await async function(e,t,n){var r;const i=By(r=Array.from(n)).call(r,((e,t)=>e+t),0),s={serverTs:0,seq:PT++,length:n.length,checkSum:i},o=new Uint8Array(dE(i,2)),a=new ArrayBuffer(xT),c=new DataView(a);c.setUint32(0,s.serverTs),c.setUint16(4,s.seq),c.setUint16(6,s.length),c.setUint16(8,s.checkSum);const l=16-n.length%16;n=Qy(n,new Uint8Array(l));const d=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:e,tagLength:OT,additionalData:o},t,n);return Qy(new Uint8Array(a),new Uint8Array(d))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new PS(Wv.INVALID_PARAMS,r?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(mS.DATA_STREAM,{payload:Zy(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-bB},!n)}sendMetadata(e){if(!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new PS(Wv.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(mS.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Zy(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(WT),!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"can not send custom report, not joined");await eS.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){Kv(t.spatialLayer,"spatialLayer",[0,1,2,3]),Kv(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw VT.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}async setRTMConfig(e){const{apRTM:t=!1,rtmFlag:n}=e;if(qv(t,"apRTM"),Yv(n,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=n,VT.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState)&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=n,this._gateway.setRTM2Flag(n)}_reset(){if(VT.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=sT.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach((e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach((e=>e._close())),e._dataChannels.length=0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new pE("client-publish"),this._subscribeMutex=new pE("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(e){}if(this._moderation)try{this.setImageModeration(!1)}catch(e){}}_startSession(e,t){var n;const r=e||iE();e?VT.debug("[".concat(this._clientId,"] new Session ").concat(r)):VT.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(r));const i=e?"":this._sessionId||"";this._sessionId=r,this.store.sessionId=r;const s={lts:(new Date).getTime(),mode:this.mode,stringUid:(null==t?void 0:t.stringUid)||(null===(n=this._joinInfo)||void 0===n?void 0:n.stringUid),channelProfile:"live"===this.mode?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:i,clientRole:"audience"===this.role?2:1};t?eS.sessionInit(this._sessionId,kB({cname:t.channel,appid:t.appId},s)):this._joinInfo?eS.sessionInit(this._sessionId,kB({cname:this._joinInfo.cname,appid:this._joinInfo.appId},s)):this._gateway.joinInfo&&eS.sessionInit(this._sessionId,kB({cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId},s)),this._joinInfo&&(this._joinInfo.sid=r),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=r)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new PS(Wv.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&bT("FORCE_TURN")&&!bT("TURN_ENABLE_TCP")&&!bT("TURN_ENABLE_UDP"))throw new PS(Wv.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");VT.debug("[".concat(this._clientId,"] publish high stream"));try{const n=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof hU){const t=(await n.next()).value;if(t){try{await this._gateway.sendExtensionMessage(ww.PUBLISH,t,!0)}catch(e){throw n.throw(e),e}await n.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const r=(await n.next()).value;if(r){var t;let i;try{i=await this._gateway.publish(this._uid,r,!0)}catch(e){if(e.code!==Wv.DISCONNECT_P2P)throw n.throw(e),e}await n.next((null===(t=i)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t instanceof bN&&t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig),!t.muted&&t.enabled||await this._p2pChannel.muteLocalTrack(t)}}catch(t){if(this._p2pChannel.reportPublishEvent(!1,null==t?void 0:t.code,e),(null==t?void 0:t.code)===Wv.WS_ABORT)return;throw t}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new PS(Wv.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new PS(Wv.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));VT.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),n=(await e.next()).value;if(n){var t;let r;try{r=await this._gateway.publish(this._uid,n,!0)}catch(t){if(t.code!==Wv.DISCONNECT_P2P)throw e.throw(t),t}e.next((null===(t=r)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(e){if(this._p2pChannel.reportPublishEvent(!1,null==e?void 0:e.code,void 0,!0),(null==e?void 0:e.code)===Wv.WS_ABORT)return;throw e}}_createLiveStreamingClient(e){if(!this._joinInfo||!this._appId)return new PS(Wv.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const t=()=>new TU(this._joinInfo,this._config.websocketRetryConfig||mE,this._config.httpRetryConfig||mE),n=e=>{e.onLiveStreamError=(e,t)=>{eS.reportApiInvoke(this._sessionId,{name:hy.ON_LIVE_STREAM_ERROR,options:[e,t],tag:py.TRACER}).onSuccess(),this.safeEmit(gy.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{eS.reportApiInvoke(this._sessionId,{name:hy.ON_LIVE_STREAM_WARNING,options:[e,t],tag:py.TRACER}).onSuccess(),this.safeEmit(gy.LIVE_STREAMING_WARNING,e,t)},e.on(GS.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new PS(Wv.INVALID_OPERATION,"can not find join info to get worker manager"));gR(e,this._joinInfo,this._axiosCancelSource.token,mE).then(t).catch(n)}))};switch(e){case bS.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=t(),n(this._liveRawStreamingClient)),this._liveRawStreamingClient;case bS.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=t(),n(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case bS.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=t(),this._injectStreamingClient.on(GS.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new PS(Wv.INVALID_OPERATION,"can not find join info to get worker manager"));gR(e,this._joinInfo,this._axiosCancelSource.token,mE).then(t).catch(n)})),this._injectStreamingClient.onInjectStatusChange=(e,t,n)=>{this.safeEmit(gy.INJECT_STREAM_STATUS,e,t,n)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo)return new PS(Wv.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:e,sendResolutionHeight:t}=this.getLocalVideoStats(),n={width:e,height:t};this._channelMediaRelayClient=new RU(this._joinInfo,this._clientId,this._config.websocketRetryConfig||mE,this._config.httpRetryConfig||mE,n),this._channelMediaRelayClient.on("state",(e=>{e===KS.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.safeEmit(gy.CHANNEL_MEDIA_RELAY_STATE,e)})),this._channelMediaRelayClient.on("event",(e=>{this.safeEmit(gy.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._statsCollector.onStatsChanged=(e,t)=>{var n;"resolution"===e&&(null===(n=this._channelMediaRelayClient)||void 0===n||n.setVideoProfile(t))}}return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){const{added:n,deleted:r}=e,i=[];Array.isArray(n)&&n.length>0&&n.forEach((e=>{const{uid:n,stream_id:r,ordered:s,max_retrans_times:o,metadata:a}=e,c=this._users.find((e=>e._uintid===n));if(c){if(VT.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(n)),Nr(i).call(i,c)||i.push(c),c._uintid||(c._uintid=n),-1===c._dataChannels.findIndex((t=>t.id===e.stream_id))){const e={id:r,ordered:!!s,maxRetransmits:o,metadata:a},n=new ox(e);c._dataChannels.push(n),VT.info("[".concat(this._clientId,"] remote user ").concat(c.uid," published datachannel")),t||this.safeEmit(gy.USER_PUBLISHED,c,"datachannel",e)}this._p2pChannel.hasPendingRemoteDataChannel(c,e.stream_id)&&(VT.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(c.uid," after reconnect.")),this._subscribeDataChannel(c,e.stream_id).catch((e=>{VT.error("[".concat(this._clientId,"] resubscribe datachannel error"),e.toString())})))}else VT.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"))})),t&&(this.safeEmit(gy.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(r)&&r.length>0&&r.forEach((e=>{const{uid:t,stream_id:n}=e,r=this._users.find((e=>e._uintid===t));if(!r)return void VT.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const i=r._dataChannels.find((t=>t.id===e.stream_id));i&&(VT.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(t)),this._p2pChannel.unsubscribeDataChannel(r,[i]).then((e=>{if(r._dataChannels=r._dataChannels.filter((e=>e!==i)),e)return this._gateway.unsubscribeDataChannel(e,r.uid)})),VT.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished datachannel ,id:").concat(i.id)),this.safeEmit(gy.USER_UNPUBLISHED,r,"datachannel",i._config))}))}_handleRemoveDataChannels(e){const t=this._users.find((t=>t.uid===e.uid));if(t){if(void 0!==t._dataChannels&&t._dataChannels.length>0){VT.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));const n=()=>{VT.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach((e=>{this.safeEmit(gy.USER_UNPUBLISHED,t,"datachannel",e._config)}))};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then((e=>{if(e)return this._gateway.unsubscribeDataChannel(e,t.uid)})),n()}}else VT.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(XS.DISCONNECT_P2P,(async()=>{await this._p2pChannel.disconnectForReconnect()})),this._gateway.on(XS.CONNECTION_STATE_CHANGE,((e,t,n)=>{var r;if(n===my.FALLBACK)return;const i=()=>{this.safeEmit(gy.CONNECTION_STATE_CHANGE,e,t,n)};if(eS.reportApiInvoke(this._sessionId||(null===(r=this._gateway.joinInfo)||void 0===r?void 0:r.sid)||null,{name:hy.CONNECTION_STATE_CHANGE,options:[e,t,n],tag:py.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:n})),VT.info("[".concat(this._clientId,"] connection state change: ").concat(t," -> ").concat(e)),"DISCONNECTED"===e)return this._reset(),void i();if("RECONNECTING"===e)this._users.forEach((e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._is_pre_created||(e._audio_pre_subscribed||(e._audioSSRC=void 0,e._audioOrtc=void 0),e._video_pre_subscribed||(e._videoSSRC=void 0,e._videoOrtc=void 0,e._rtxSsrcId=void 0),e._cname=void 0)})),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var s;this._streamFallbackTypeCacheMap.forEach(((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch((e=>{VT.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e)}))})),this._remoteStreamTypeCacheMap.forEach(((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch((e=>{VT.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e)}))})),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(s=this._joinInfo)||void 0===s?void 0:s.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then((()=>{VT.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))})).catch((e=>{VT.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(e))})),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter((e=>!e._trust_in_room_)).forEach((e=>{VT.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(e.uid)),this._handleUserOffline({uid:e.uid})})))}),3e3),this._streamRemovedTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach((e=>{e._trust_audio_mute_state_||(VT.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,aw.AUDIO,!1)),e._trust_video_mute_state_||(VT.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,aw.VIDEO,!1)),e._trust_audio_enabled_state_||(VT.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),e._trust_video_enabled_state_||(VT.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_video_stream_added_state_||(VT.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(e.uid)),this._handleResetAddStream(e,"video")),e._trust_audio_stream_added_state_||(VT.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(e.uid)),this._handleResetAddStream(e,"audio")),e._video_added_||e._audio_added_||(VT.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))})))}),1e3))}i()})),this._gateway.on(XS.REQUEST_NEW_GATEWAY_LIST,((e,t)=>{if(!this._joinInfo)return t(new PS(Wv.UNEXPECTED_ERROR,"can not recover, no join info"));uR(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||mE,this.store).then((t=>{this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res,this._joinInfo.gatewayAddrs=t.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=t.gatewayInfo.uni_lbs_ip);const n=[];t.gatewayInfo.gatewayAddrs.forEach((e=>{let{address:t}=e;const[r,i]=t.split(":");this._joinInfo&&this._joinInfo.proxyServer?n.push({proxy:this._joinInfo.proxyServer,host:r,port:i}):n.push({host:r,port:i})})),e(n)})).catch(t)})),this._gateway.on(XS.NETWORK_QUALITY,(e=>{"normal"===this._networkQualitySensitivity&&this.safeEmit(gy.NETWORK_QUALITY,e)})),this._gateway.on(XS.STREAM_TYPE_CHANGE,((e,t)=>{this.safeEmit(gy.STREAM_TYPE_CHANGED,e,t),eS.reportApiInvoke(this._sessionId,{name:hy.STREAM_TYPE_CHANGE,options:[e,t],tag:py.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))})),this._gateway.on(XS.IS_P2P_DISCONNECTED,(e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)})),this._gateway.on(XS.NEED_RENEW_SESSION,(()=>{this._startSession()})),this._gateway.on(XS.REQUEST_P2P_CONNECTION_PARAMS,(async(e,t,n)=>{try{t(await this._p2pChannel.startP2PConnection(e))}catch(e){n(e)}})),this._gateway.on(XS.JOIN_RESPONSE,((e,t)=>{if(this.store.useP2P)return;const{dtlsParameters:n,iceParameters:r,candidates:i,rtpCapabilities:s,setup:o,cname:a}=bj(e.ortc,t);this._p2pChannel.connect(r,n,i,s,o,a)})),this._gateway.on(XS.REQUEST_DC_CONNECTION_PARAMS,(e=>{e(this._p2pChannel.getEstablishParams())})),this._gateway.on(XS.RESET_SIGNAL,(e=>{this._p2pChannel.resetConnection(e),this._handleGatewaySignalEvents()})),this._gateway.on(XS.DATACHANNEL_FAILBACK,(()=>{this._joinGateway()})),this._gateway.on(XS.DATACHANNEL_PRECONNECT,(async(e,t,n,r)=>{var i,s,o,a,c,l;await this._p2pChannel.startP2PConnection({turnServer:null===(i=this._joinInfo)||void 0===i?void 0:i.turnServer},!0);const d=function(e,t){let n;return t&&t.ip&&"number"==typeof t.port?(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],VT.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),VT.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],n}(e,t);return this._p2pChannel.preConnect({iceUfrag:"".concat(null===(s=this._joinInfo)||void 0===s?void 0:s.apResponse.cid,"_").concat(null===(o=this._joinInfo)||void 0===o?void 0:o.apResponse.cert),icePwd:"".concat(null===(a=this._joinInfo)||void 0===a?void 0:a.apResponse.cid,"_").concat(null===(c=this._joinInfo)||void 0===c?void 0:c.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(l=bT("FINGERPRINT"))&&void 0!==l?l:e.fingerprint}]},d,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(n).catch(r)}))}_handleGatewaySignalEvents(){this._gateway.signal.on(_S.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(_S.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(_S.ON_ADD_AUDIO_STREAM,(e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc))),this._gateway.signal.on(_S.ON_ADD_VIDEO_STREAM,(e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId))),this._gateway.signal.on(_S.ON_REMOTE_DATASTREAM_UPDATE,(e=>{this._handleUpdateDataChannel(e)})),this._gateway.signal.on(_S.ON_REMOTE_FULL_DATASTREAM_INFO,(e=>{this._handleUpdateDataChannel({added:e.datastreams,deleted:[]},!0)})),this._gateway.signal.on(_S.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(_S.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(_S.MUTE_AUDIO,(e=>this._handleMuteStream(e.uid,aw.AUDIO,!0))),this._gateway.signal.on(_S.UNMUTE_AUDIO,(e=>this._handleMuteStream(e.uid,aw.AUDIO,!1))),this._gateway.signal.on(_S.MUTE_VIDEO,(e=>this._handleMuteStream(e.uid,aw.VIDEO,!0))),this._gateway.signal.on(_S.UNMUTE_VIDEO,(e=>this._handleMuteStream(e.uid,aw.VIDEO,!1))),this._gateway.signal.on(_S.RECEIVE_METADATA,(e=>{const t=Xy(e.metadata);this.safeEmit(gy.RECEIVE_METADATA,e.uid,t)})),this._gateway.signal.on(_S.ON_DATA_STREAM,(async e=>{var t;if(!e)return;let n=Xy(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Nr(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<xT)throw new PS(Wv.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(xT));const t=await async function(e,t,n){const r=n.subarray(0,xT),i=r.slice(8,xT),s=(i[0]<<8)+i[1],o=(r[6]<<8)+r[7],a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:e,tagLength:OT,additionalData:new Uint8Array(dE(s,2))},t,n.subarray(xT));return new Uint8Array(a).subarray(0,o)}(this._encryptDataStreamIv,this._encryptDataStreamKey,n);n=t}let r=0;if(e.ordered||e.syncWithAudio){const t=this._p2pChannel.getStats(),n=this.remoteUsers.find((t=>t.uid===e.uid)),i=null==t?void 0:t.audioRecv.find((e=>e.ssrc===(null==n?void 0:n._audioSSRC)));r=null==i?void 0:i.jitterBufferMs}null==r&&(r=0),IB(kB(kB({},e),{},{payload:n}),r,{id:this._clientId,onStreamMessage:"function"==typeof this.onStreamMessage?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})})),this._gateway.signal.on(_S.ON_CRYPT_ERROR,(()=>{Jy((()=>{VT.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(gy.CRYPT_ERROR)}),this._sessionId)})),this._gateway.signal.on(_S.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(_S.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{VT.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,my.TOKEN_EXPIRE),this.safeEmit(gy.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()})),this._gateway.signal.on(_S.ON_STREAM_FALLBACK_UPDATE,(e=>{VT.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(gy.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")})),this._gateway.signal.on(_S.ON_PUBLISH_STREAM,(e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),VT.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))})),this._gateway.signal.on(_S.ENABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)})),this._gateway.signal.on(_S.DISABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)})),this._gateway.signal.on(fS.REQUEST_TIMEOUT,((e,t)=>{if(this._joinInfo)switch(e){case mS.PUBLISH:{if(!t)return;const e=t.ortc;if(e){var n,r;const i=e.some((e=>{let{stream_type:t}=e;return t===JS.Audio})),s=e.some((e=>{let{stream_type:t}=e;return t!==JS.Audio})),o=e.some((e=>{let{stream_type:t}=e;return t===JS.Screen||t===JS.ScreenLow}));"offer"===t.state&&eS.publish(this._joinInfo.sid,{eventElapse:bM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:Wv.TIMEOUT,audio:i,video:s,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:o,audioName:i?null===(n=e.find((e=>{let{stream_type:t}=e;return t===JS.Audio})))||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId.toString():void 0,videoName:s?null===(r=e.find((e=>{let{stream_type:t}=e;return t!==JS.Audio})))||void 0===r||null===(r=r.ssrcs[0])||void 0===r?void 0:r.ssrcId.toString():void 0})}break}case mS.SUBSCRIBE:t&&eS.subscribe(this._joinInfo.sid,{succ:!1,ec:Wv.TIMEOUT,audio:t.stream_type===aw.AUDIO,video:t.stream_type===aw.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:bM.measureFromSubscribeStart(this.store.clientId,t.ssrcId)})}})),this._gateway.signal.on(_S.ON_P2P_OK,(e=>{this.uid,this._uid})),this._gateway.signal.on(_S.ON_PUBLISHED_USER_LIST,(e=>{if(null==e||!e.users)return;bT("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter((e=>!sS(e.string_id||e.stream_id,this.channelName))));const t=[],n=[];for(const r of e.users){let e=this._users.find((e=>e._uintid===r.stream_id));e?e._trust_in_room_=!0:(e=new sU(r.string_id||r.stream_id,r.stream_id),this._users.push(e),0===this.getListeners(gy.PUBLISHED_USER_LIST).length&&(VT.debug("[".concat(this._clientId,"] user online"),r.stream_id),this.safeEmit(gy.USER_JOINED,e)));const i=QS.Audio&r.stream_type,s=(QS.Video|QS.LwoVideo)&r.stream_type,o=0!=(65280&r.stream_type),a=i&&e.hasAudio,c=s&&e.hasVideo;s&&(e._trust_video_stream_added_state_=!0,e._video_added_=!0,e._videoSSRC=r.video_ssrc,e._rtxSsrcId=r.video_rtx),i&&(e._trust_audio_stream_added_state_=!0,e._audio_added_=!0,e._audioSSRC=r.audio_ssrc),i&&!a&&0===this.getListeners(gy.PUBLISHED_USER_LIST).length&&(VT.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published audio")),this.safeEmit(gy.USER_PUBLISHED,e,"audio")),s&&!c&&0===this.getListeners(gy.PUBLISHED_USER_LIST).length&&(VT.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published video")),this.safeEmit(gy.USER_PUBLISHED,e,"video")),(i&&!a||s&&!c||o)&&t.push(e),s&&this._p2pChannel.hasPendingRemoteMedia(e,"video")&&n.push({user:e,mediaType:"video"}),i&&this._p2pChannel.hasPendingRemoteMedia(e,"audio")&&n.push({user:e,mediaType:"audio"})}n.length>0&&(VT.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(n.map((e=>"user: ".concat(e.user.uid,", mediaType: ").concat(e.mediaType))).join("; ")," ")),this.massSubscribe(n).catch((e=>{VT.error("[".concat(this._clientId,"] mass resubscribe error"),e.toString())}))),this.getListeners(gy.PUBLISHED_USER_LIST).length>0?bT("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(VT.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map((e=>e.uid)).join(", "))),this.safeEmit(gy.PUBLISHED_USER_LIST,t)):VT.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map((e=>e.uid)).join(", ")))})),this._gateway.signal.on(_S.ON_RTP_CAPABILITY_CHANGE,(e=>{const{video_codec:t}=e;this._p2pChannel instanceof cF&&this._p2pChannel.updateRemoteRTPCapabilities(t.map((e=>e.toLowerCase())).filter((e=>{var t;return Nr(t=Object.keys(RT)).call(t,e)})))}))}_handleP2PEvents(){this._gateway.signal.on(_S.ON_USER_OFFLINE,(()=>{this._p2pChannel.disconnectForReconnect()})),this._gateway.signal.on(ww.PUBLISH,((e,t,n)=>{const{uid:r}=e;e.forEach((e=>{const{kind:i,ssrcs:s,mid:o,isMuted:a}=e;this._handleP2PAddAudioOrVideoStream(i,r,s[0].ssrcId,o);const c=this._users.find((e=>e.uid===r));return c&&this._p2pChannel instanceof hU?this._p2pChannel.mockSubscribe(c,i,s[0].ssrcId,o).then((()=>{t()})).catch(n):t(),this._handleMuteStream(r,i,!!a)}))})),this._gateway.signal.on(ww.CALL,(async(e,t,n)=>{if(this._p2pChannel instanceof hU)try{var r;t(await this._p2pChannel.startP2P({turnServer:null===(r=this._joinInfo)||void 0===r?void 0:r.turnServer},e))}catch(e){n(e)}})),this._gateway.signal.on(fS.P2P_CONNECTION,(async e=>{this._p2pChannel instanceof hU&&await this._p2pChannel.p2pConnect(e)})),this._gateway.signal.on(ww.UNPUBLISH,(async(e,t,n)=>{if(this._p2pChannel instanceof hU){const{unpubMsg:r,uid:i}=e,s=this._users.find((e=>e.uid===i));if(!s)return VT.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i)),void t();try{r.forEach((async e=>{let{stream_type:t}=e;const n=t===JS.Audio?aw.AUDIO:aw.VIDEO;await this._p2pChannel.unsubscribe(s,n),this._handleMuteStream(i,n,!0)})),t()}catch(e){n(e)}}})),this._gateway.signal.on(ww.CONTROL,(async(e,t)=>{const{action:n}=e;switch(n){case Rw.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,aw.VIDEO,!0);break;case Rw.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,aw.AUDIO,!0);break;case Rw.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,aw.VIDEO,!1);break;case Rw.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,aw.AUDIO,!1)}})),this._gateway.signal.on(ww.RESTART_ICE,(async(e,t,n)=>{if(this._p2pChannel instanceof hU)try{const{direction:n,iceParameter:r}=e;n!==yS.SEND_ONLY||r?t(await this._p2pChannel.restartICE(n,r)):(this._p2pChannel.handleDisconnect(n),t())}catch(e){n(e)}})),this._gateway.signal.on(ww.CANDIDATE,(e=>{if(this._p2pChannel instanceof hU){const{candidate:t,direction:n}=e;this._p2pChannel.addRemoteCandidate(t,n)}})),this._p2pChannel.on(hw.RequestP2PRestartICE,(async(e,t,n)=>{try{const{direction:n}=e;t(await this._gateway.sendExtensionMessage(ww.RESTART_ICE,e,n===yS.SEND_ONLY))}catch(e){n(e)}})),this._p2pChannel.on(hw.LocalCandidate,(e=>{this._gateway.sendExtensionMessage(ww.CANDIDATE,JSON.stringify(e),!0)})),this._p2pChannel.on(hw.RequestP2PMuteLocal,(async(e,t,n)=>{try{await this._gateway.sendExtensionMessage(ww.CONTROL,e,!0),t()}catch(e){n(e)}})),this._p2pChannel.on(hw.RequestP2PUnmuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===Wv.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(hw.RequestP2PMuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===Wv.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(hw.StateChange,((e,t)=>{t===uw.Connected&&this._p2pChannel.republish()}))}_handleP2PChannelEvents(){this._p2pChannel.on(hw.RequestMuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===Wv.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(hw.RequestUnmuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===Wv.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(hw.RequestRePublish,((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),this._p2pChannel.on(hw.RequestRePublishDataChannel,((e,t,n)=>{cv.all(e.map((async e=>{await this._p2pChannel.publishDataChannel([e]);const t={streamId:e.id,ordered:e.ordered,maxRetransmits:e.maxRetransmits,metadata:e.metadata,channelId:e._originDataChannelId};try{await this._gateway.publishDataChannel(this._uid,t,!0)}catch(e){if(e.code!==Wv.DISCONNECT_P2P)throw e}}))).then(t).catch(n)})),this._p2pChannel.on(hw.RequestReSubscribe,(async(e,t,n)=>{try{for(const{user:t,kind:n}of e)n===aw.VIDEO?await this.subscribe(t,"video"):await this.subscribe(t,"audio");t()}catch(e){n(e)}})),this._p2pChannel.on(hw.RequestUpload,((e,t)=>{this._gateway.upload(e,t)})),this._p2pChannel.on(hw.RequestUploadStats,(e=>{this._gateway.uploadWRTCStats(e)})),this._p2pChannel.on(hw.MediaReconnectStart,(e=>{this.safeEmit(gy.MEDIA_RECONNECT_START,e)})),this._p2pChannel.on(hw.MediaReconnectEnd,(e=>{this.safeEmit(gy.MEDIA_RECONNECT_END,e)})),this._p2pChannel.on(hw.NeedSignalRTT,(e=>{e(this._gateway.getSignalRTT())})),this._p2pChannel.on(hw.RequestRestartICE,(async e=>{if(this._p2pChannel instanceof hU)return;const t=await this._p2pChannel.restartICE(e),n=await t.next();if(n.done)return;const r=n.value;let i;try{i=await this._gateway.restartICE({iceParameters:r})}catch(e){return void t.throw(e)}const{iceParameters:s}=function(e){const t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(i);await t.next({remoteIceParameters:s})})),this._p2pChannel.on(hw.RequestReconnect,(async()=>{this._gateway.reconnect()})),this._p2pChannel.on(hw.RequestReconnectPC,(async()=>{var e;const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:i,gatewayAddress:s}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:n,rtpCapabilities:r}),{dtlsParameters:o,iceParameters:a,candidates:c,rtpCapabilities:l,setup:d,cname:u}=bj(i,s);await this._p2pChannel.connect(a,o,c,l,d,u),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()})),this._p2pChannel.on(hw.RequestUnpublishForReconnectPC,(async(e,t,n)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):n()})),this._p2pChannel.on(hw.P2PLost,(()=>{this.safeEmit(gy.P2P_LOST,this.store.uid)})),this._p2pChannel.on(hw.UpdateVideoEncoder,(e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)})),this._p2pChannel.on(hw.ConnectionTypeChange,(e=>{this.safeEmit(gy.IS_USING_CLOUD_PROXY,e)})),this._p2pChannel.on(hw.RequestLowStreamParameter,(e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(hw.QueryClientConnectionState,(e=>{e(this.connectionState)}))}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if("CONNECTED"!==this.connectionState||!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new PS(Wv.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!e)throw new PS(Wv.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!e.inspectType||!Array.isArray(e.inspectType))throw new PS(Wv.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const t=[...new Set(e.inspectType)];t.forEach((e=>{var t;if(!Nr(t=["supervise","moderation"]).call(t,e))throw new PS(Wv.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(e," is not a valid inspect type."))})),e.inspectType=t}if(e&&e.extraInfo&&e.extraInfo.length>1024)throw new PS(Wv.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const t=new FF(e);this._inspect=t,this.handleVideoInspectEvents(this._inspect),await t.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},mE)}catch(e){throw Array.isArray(e)?e[0]:e}}async disableContentInspect(){if(!this._inspect)throw new PS(Wv.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(qv(e,"enabled"),e){if(!t)throw new PS(Wv.INVALID_PARAMS,"[".concat(this._clientId,"] config is necessary"));if(Yv(t.interval,"interval",1e3,1/0),t&&t.extraInfo&&t.extraInfo.length>1024)throw new PS(Wv.INVALID_PARAMS,"[".concat(this._clientId,"] config.extraInfo length cannot exceed 1024 bytes"));if(t&&t.vendor&&t.vendor.length>1024)throw new PS(Wv.INVALID_PARAMS,"[".concat(this._clientId,"] config.vendor length cannot exceed 1024 bytes"));if("CONNECTED"!==this.connectionState||!this._joinInfo)throw new PS(Wv.INVALID_OPERATION,"[".concat(this._clientId,'] can not enable image moderation, not joined"'));try{if(this._moderation)return void this._moderation.updateConfig(t);const e=new vB(t);this._moderation=e,this.handleImageModerationEvents(this._moderation),await e.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},mE)}catch(e){throw Array.isArray(e)?e[0]:e}}else{if(!this._moderation)throw new PS(Wv.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}}setP2PTransport(e){if(function(e){Kv(e,"transport",["default","auto","relay","sd-rtn"])}(e),"p2p"!==this.mode)throw new PS(Wv.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,VT.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}handleImageModerationEvents(e){e.on(Tw.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(gy.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,n),t===bw.CONNECTED){if("CONNECTED"!==this.connectionState)throw this.setImageModeration(!1),new PS(Wv.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}})),e.on(Tw.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}handleVideoInspectEvents(e){e.on(gw.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(gy.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,n),n===fw.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.safeEmit(gy.CONTENT_INSPECT_ERROR,new PS(Wv.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}})),e.on(gw.INSPECT_RESULT,((e,t)=>{var n;if((null==t?void 0:t.code)===Wv.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return VT.debug("Stop inspect content because that has left channel"),null==this||null===(n=this._inspect)||void 0===n||n.close(),void(this._inspect=void 0);this.safeEmit(gy.CONTENT_INSPECT_RESULT,e,t)})),e.on(gw.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}getJoinChannelServiceRecords(){return VT.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){qv(e,"enabled"),ET("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}}kS([$T(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",cv)],xB.prototype,"leave",null),kS([$T({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof dI))return[t];t=[t]}return t.map((e=>e?Object(e).toString():"null"))}}),xS("design:type",Function),xS("design:paramtypes",[Object,Boolean]),xS("design:returntype",cv)],xB.prototype,"publish",null),kS([$T({argsMap:(e,t)=>(t||(t=[]),t instanceof ax?[t.getChannelId()]:(Array.isArray(t)||(t=[t]),t.map((e=>e.getTrackId()))))}),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],xB.prototype,"unpublish",null),kS([$T({argsMap:(e,t,n,r)=>[t.uid,n,r]}),xS("design:type",Function),xS("design:paramtypes",[sU,String,Number]),xS("design:returntype",cv)],xB.prototype,"subscribe",null),kS([$T({argsMap:(e,t,n)=>[t,n]}),xS("design:type",Function),xS("design:paramtypes",[Object,String]),xS("design:returntype",cv)],xB.prototype,"presubscribe",null),kS([$T({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return[null==t?void 0:t.uid,n]}))}),xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],xB.prototype,"massSubscribe",null),kS([$T({argsMap:(e,t,n,r)=>[t.uid,n,r]}),xS("design:type",Function),xS("design:paramtypes",[sU,String,Number]),xS("design:returntype",cv)],xB.prototype,"unsubscribe",null),kS([$T({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return{uid:null==t?void 0:t.uid,mediaType:n}}))}),xS("design:type",Function),xS("design:paramtypes",[Array]),xS("design:returntype",cv)],xB.prototype,"massUnsubscribe",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],xB.prototype,"setLowStreamParameter",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",cv)],xB.prototype,"enableDualStream",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",cv)],xB.prototype,"disableDualStream",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[String,Object]),xS("design:returntype",cv)],xB.prototype,"setClientRole",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[String,Boolean]),xS("design:returntype",void 0)],xB.prototype,"setProxyServer",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Object,Boolean]),xS("design:returntype",void 0)],xB.prototype,"setTurnServer",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",void 0)],xB.prototype,"setLicense",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Number]),xS("design:returntype",void 0)],xB.prototype,"startProxyServer",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],xB.prototype,"stopProxyServer",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",void 0)],xB.prototype,"setLocalAccessPointsV2",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Array,String]),xS("design:returntype",void 0)],xB.prototype,"setLocalAccessPoints",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Number]),xS("design:returntype",cv)],xB.prototype,"setRemoteDefaultVideoStreamType",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Object,Number]),xS("design:returntype",cv)],xB.prototype,"setRemoteVideoStreamType",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Object,Number]),xS("design:returntype",cv)],xB.prototype,"setStreamFallbackOption",null),kS([$T({argsMap:(e,t)=>[t]}),xS("design:type",Function),xS("design:paramtypes",[String,String,Uint8Array,Boolean]),xS("design:returntype",void 0)],xB.prototype,"setEncryptionConfig",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],xB.prototype,"renewToken",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",void 0)],xB.prototype,"enableAudioVolumeIndicator",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[String,Boolean]),xS("design:returntype",cv)],xB.prototype,"startLiveStreaming",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],xB.prototype,"setLiveTranscoding",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",cv)],xB.prototype,"stopLiveStreaming",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[String,Object]),xS("design:returntype",cv)],xB.prototype,"addInjectStreamUrl",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",cv)],xB.prototype,"removeInjectStreamUrl",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[SU]),xS("design:returntype",cv)],xB.prototype,"startChannelMediaRelay",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[SU]),xS("design:returntype",cv)],xB.prototype,"updateChannelMediaRelay",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",cv)],xB.prototype,"stopChannelMediaRelay",null),kS([$T({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],xB.prototype,"sendCustomReportMessage",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Object,Object]),xS("design:returntype",cv)],xB.prototype,"pickSVCLayer",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],xB.prototype,"setRTMConfig",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Object]),xS("design:returntype",cv)],xB.prototype,"enableContentInspect",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",cv)],xB.prototype,"disableContentInspect",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Boolean,Object]),xS("design:returntype",cv)],xB.prototype,"setImageModeration",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[String]),xS("design:returntype",void 0)],xB.prototype,"setP2PTransport",null),kS([$T({reportResult:!0}),xS("design:type",Function),xS("design:paramtypes",[]),xS("design:returntype",Array)],xB.prototype,"getJoinChannelServiceRecords",null),kS([$T(),xS("design:type",Function),xS("design:paramtypes",[Boolean]),xS("design:returntype",cv)],xB.prototype,"setPublishAudioFilterEnabled",null);class PB{constructor(e,t){sh(this,"id",0),sh(this,"element",void 0),sh(this,"peerPair",void 0),sh(this,"context",void 0),sh(this,"audioPlayerElement",void 0),sh(this,"audioTrack",void 0),PB.count+=1,this.id=PB.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const n="offer"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(n),"complete"===e.iceGatheringState?e.localDescription:new cv((t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}}))},t=async(e,t)=>await e.setRemoteDescription(t);try{const n=await e(this.peerPair[0],"offer");await t(this.peerPair[1],n);const r=await e(this.peerPair[1],"answer");await t(this.peerPair[0],r)}catch(e){throw new PS(Wv.LOCAL_AEC_ERROR,e.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(t)}catch(e){throw new PS(Wv.LOCAL_AEC_ERROR,e.toString()).print()}if(!t)throw new PS(Wv.LOCAL_AEC_ERROR,"no dest node when local aec").print();const n=t.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){VT.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((e=>{e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0}}sh(PB,"count",0);const DB=window.AudioContext||window.webkitAudioContext;class LB{constructor(){sh(this,"units",[]),sh(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return VT.debug("the system does not need to process local aec"),-1;this.context||(this.context=new DB);let t=this.units.find((t=>t&&t.getElement()===e));return t||(t=new PB(e,this.context),this.units.push(t)),t.startEchoCancellation(),VT.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return Ev().name!==mv.SAFARI}}kS([$T({report:eS}),xS("design:type",Function),xS("design:paramtypes",[HTMLAudioElement]),xS("design:returntype",Number)],LB.prototype,"processExternalMediaAEC",null);const MB=new LB;function jB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jB(Object(n),!0).forEach((function(t){sh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const FB=window||document;function BB(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!FB)return;const n=GB._cspEventHandlerPointer;if(n&&t)return void console.error(n,t);const r=e=>{if(!(e&&e.blockedURI&&(GB.onSecurityPolicyViolation||GB.getListeners(yw.SECURITY_POLICY_VIOLATION).length>0)))return;const t=e.blockedURI;bT("CSP_DETECTED_HOSTNAME_LIST").some((e=>Nr(t).call(t,e)))&&(GB.onSecurityPolicyViolation&&"function"==typeof GB.onSecurityPolicyViolation&&GB.onSecurityPolicyViolation(e),GB.getListeners(yw.SECURITY_POLICY_VIOLATION).length>0&&GB.safeEmit(yw.SECURITY_POLICY_VIOLATION,e))};n&&FB.removeEventListener("securitypolicyviolation",n),(t||e&&"function"==typeof e||GB.getListeners(yw.SECURITY_POLICY_VIOLATION).length>0)&&FB.addEventListener("securitypolicyviolation",r),GB._cspEventHandlerPointer=r}ET("PROCESS_ID","process-".concat(rE(8,""),"-").concat(rE(4,""),"-").concat(rE(4,""),"-").concat(rE(4,""),"-").concat(rE(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void VT.error("Error loading sdk config",e.message)}if(e)try{const t=JSON.parse(window.atob(e)),n=Date.now();VT.debug("Loading global parameters from cache",t),Object.keys(t).forEach((e=>{if(Object.prototype.hasOwnProperty.call(yT,e)){const{value:r,expires:i}=t[e];if(i&&i<=n)return;TT[e]=r,yT[e]=r}}))}catch(t){VT.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(TT.AREAS)&&TT.AREAS.length>0&&JC(TT.AREAS,!0);const VB=(e,t,n)=>{VT.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),ET(e,t,n)},GB=function(e){const t=new ly,n=e,r={getListeners:t.getListeners.bind(t),on:(e,n)=>(function(e,t){e===yw.SECURITY_POLICY_VIOLATION&&BB(t,!0)}(e,n),t.on.bind(t)(e,n)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return UB(UB({},n),r)}({__TRACK_LIST__:UR,VERSION:mT,BUILD:vT,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:VB,getParameter:bT,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;t.addTransceiver("video",{direction:"recvonly"}),t.addTransceiver("audio",{direction:"recvonly"});const n=(await t.createOffer()).sdp;if(!n)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ H265/i)&&t.video.push("H265"),e.match(/ opus/i)&&t.audio.push("OPUS"),e.match(/ PCMU/i)&&t.audio.push("PCMU"),e.match(/ PCMA/i)&&t.audio.push("PCMA"),e.match(/ G722/i)&&t.audio.push("G722"),t}(n)}catch(e){throw new PS(Wv.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return e},checkSystemRequirements:function(){const e=eS.reportApiInvoke(null,{name:hy.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:py.TRACER});let t=!1;try{const e=window.RTCPeerConnection,n=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket;t=!!(e&&n&&r)}catch(e){return VT.error("check system requirement failed: ",e),!1}let n=!1;const r=Ev();r.name===mv.CHROME&&Number(r.version)>=58&&(!Cv()||wv())&&(n=!0),r.name===mv.FIREFOX&&Number(r.version)>=56&&(n=!0),r.name===mv.OPERA&&Number(r.version)>=45&&(n=!0),r.name===mv.SAFARI&&Number(r.version)>=11&&(n=!0),(Fv()||Ev().name===mv.QQ)&&(n=!0),VT.debug("checkSystemRequirements, api:",t,"browser",n);const i=t&&n;return e.onSuccess(i),i},getDevices:function(e){return DI.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return DI.getRecordingDevices(e)},getCameras:function(e){return DI.getCamerasDevices(e)},getElectronScreenSources:CI,getPlaybackDevices:function(e){return DI.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const n=eS.reportApiInvoke(null,{name:hy.CREATE_CLIENT,options:[t],tag:py.TRACER});try{!function(e){Kv(e.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),Kv(e.mode,"config.mode",["rtc","live","p2p"]),void 0!==e.audioCodec&&Kv(e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==e.proxyServer&&Xv(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&Ty(e.turnServer),void 0!==e.httpRetryConfig&&Ey(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&Ey(e.websocketRetryConfig)}(t)}catch(e){throw n.onError(e),e}return OB()||("vp9"===t.codec&&(t.codec="vp8",VT.debug("browser not support vp9, force use vp8")),ET("UNSUPPORTED_VIDEO_CODEC",["vp9"])),void 0===t.audioCodec&&(t.audioCodec="opus"),n.onSuccess(),new xB(kB(kB({forceWaitGatewayResponse:!0},t),{},{role:Nr(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=eS.reportApiInvoke(null,{tag:py.TRACER,name:hy.CREATE_CAM_VIDEO_TRACK,options:[wN({},e)]}),n=iN(e),r=rE(8,"track-cam-");let i=null;const s="720p_auto"===e.encoderConfig;VT.info("start create camera video track with config",JSON.stringify(e),"trackId",r);try{i=(await AI({video:n},r)).getVideoTracks()[0]||null}catch(e){throw t.onError(e),e}if(!i){const e=new zv(Wv.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw(VT)}e.optimizationMode&&CN(r,i,e,PR(e.encoderConfig));const o=new TN(i,e,n,e.scalabiltyMode?LR(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r);return s&&o.startMonitorStats(),t.onSuccess(o.getTrackId()),VT.info("create camera video success, trackId:",r),o},createCustomVideoTrack:function(e){const t=eS.reportApiInvoke(null,{tag:py.TRACER,name:hy.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new bN(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?LR(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,rE(8,"track-cus-"),[VR.CUSTOM_TRACK]);return t.onSuccess(n.getTrackId()),VT.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const n=eS.reportApiInvoke(null,{tag:py.TRACER,name:hy.CREATE_SCREEN_VIDEO_TRACK,options:[wN({},e),t]}),r="720p_auto"===e.encoderConfig;e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const i=function(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&Rv()&&(t.extensionId=e.extensionId);const{displaySurface:n,selfBrowserSurface:r,surfaceSwitching:i,systemAudio:s}=e;(Av(107)||kv(107)||xv(93))&&(n&&(Kv(n,"displaySurface",["browser","window","monitor"]),t.displaySurface=n),r?(Kv(r,"selfBrowserSurface",["exclude","include"]),t.selfBrowserSurface=r):t.selfBrowserSurface="include",i&&(Kv(i,"surfaceSwitching",["exclude","include"]),t.surfaceSwitching=i)),(Av(105)||kv(105)||xv(91))&&s&&(Kv(s,"systemAudio",["exclude","include"]),t.systemAudio=s),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const o=e.encoderConfig?DR(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:o?o.width:void 0,maxHeight:o?o.height:void 0},o&&(o.frameRate&&("number"==typeof o.frameRate?(t.mandatory.maxFrameRate=o.frameRate,t.mandatory.minFrameRate=o.frameRate):(t.mandatory.maxFrameRate=o.frameRate.max||o.frameRate.ideal||o.frameRate.exact||void 0,t.mandatory.minFrameRate=o.frameRate.min||o.frameRate.ideal||o.frameRate.exact||void 0),t.frameRate=o.frameRate),o.width&&(t.width=o.width),o.height&&(t.height=o.height)),t}(e),s=rE(8,"track-scr-v-");let o=null,a=null;const c=SR();if(!c.supportShareAudio&&"enable"===t){const e=new zv(Wv.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return n.onError(e),e.throw(VT)}VT.info("start create screen video track with config",e,"withAudio",t,"trackId",s);try{const e=await AI({screen:i,screenAudio:"auto"===t?c.supportShareAudio:"enable"===t},s);o=e.getVideoTracks()[0]||null,a=e.getAudioTracks()[0]||null}catch(e){throw n.onError(e),e}if(!o){const e=new zv(Wv.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(e),e.throw(VT)}if(!a&&"enable"===t){o&&o.stop();const e=new zv(Wv.SHARE_AUDIO_NOT_ALLOWED);return n.onError(e),e.throw(VT)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(CN(s,o,e,e.encoderConfig&&DR(e.encoderConfig)||void 0),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const l=new bN(o,e.encoderConfig?DR(e.encoderConfig):{},e.scalabiltyMode?LR(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,s,[VR.SCREEN_TRACK]);if(r&&l.startMonitorStats(),!a)return n.onSuccess(l.getTrackId()),VT.info("create screen video track success","video:",l.getTrackId()),l;const d=new eN(a,void 0,rE(8,"track-scr-a-"),!1);return n.onSuccess([l.getTrackId(),d.getTrackId()]),VT.info("create screen video track success","video:",l.getTrackId(),"audio:",d.getTrackId()),[l,d]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=eS.reportApiInvoke(null,{tag:py.TRACER,name:hy.CREATE_MIC_AND_CAM_TRACKS,options:[e,t]}),r="720p_auto"===t.encoderConfig,i=iN(t),s=sN(e),o=rE(8,"track-mic-"),a=rE(8,"track-cam-");let c=null,l=null;VT.info("start create camera video track(".concat(a,") and microphone audio track(").concat(o,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{const e=await AI({audio:s,video:i},"".concat(o,"-").concat(a));c=e.getAudioTracks()[0],l=e.getVideoTracks()[0]}catch(e){throw n.onError(e),e}if(!c||!l){const e=new zv(Wv.UNEXPECTED_ERROR,"can not find tracks in media stream");return n.onError(e),e.throw(VT)}t.optimizationMode&&CN(a,l,t,PR(t.encoderConfig));const d=new tN(c,e,s,o),u=new TN(l,t,i,t.scalabiltyMode?LR(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,a);return r&&u.startMonitorStats(),n.onSuccess([d.getTrackId(),u.getTrackId()]),VT.info("create camera video track(".concat(a,") and microphone audio track(").concat(o,") success")),[d,u]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=eS.reportApiInvoke(null,{tag:py.TRACER,name:hy.CREATE_MIC_AUDIO_TRACK,options:[e]}),n=sN(e),r=rE(8,"track-mic-");let i=null;VT.info("start create microphone audio track with config",JSON.stringify(e),"trackId",r);try{i=(await AI({audio:n},r)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}if(!i){const e=new zv(Wv.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw(VT)}const s=new tN(i,e,n,r);return t.onSuccess(s.getTrackId()),VT.info("create microphone audio track success, trackId:",r),s},createCustomAudioTrack:function(e){const t=eS.reportApiInvoke(null,{tag:py.TRACER,name:hy.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new eN(e.mediaStreamTrack,e.encoderConfig?jR(e.encoderConfig):{},rE(8,"track-cus-"),!1);return VT.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:async function(e){var t;const{cacheOnlineFile:n,encoderConfig:r}=e;let{source:i}=e;const s={source:i instanceof AudioBuffer?"AudioBuffer":i instanceof File?null!==(t=File.name)&&void 0!==t?t:"File":i,cacheOnlineFile:n,encoderConfig:r},o=eS.reportApiInvoke(null,{tag:py.TRACER,name:hy.CREATE_BUFFER_AUDIO_TRACK,options:[s]});if(bT("DISABLE_WEBAUDIO"))throw new zv(Wv.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const a=rE(8,"track-buf-");VT.info("start create buffer source audio track with config",JSON.stringify(s),"trackId",a);const c=i;if(!(i instanceof AudioBuffer))try{i=await cN(i,n)}catch(e){return o.onError(e),e.throw(VT)}const l=new oN(i),d=new nN(c,l,r?jR(r):{},a);return VT.info("create buffer source audio track success, trackId:",a),o.onSuccess(d.getTrackId()),d},setAppType:function(e){if(VT.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw VT.debug("Invalid appType"),new PS(Wv.INVALID_PARAMS,"invalid app type",e);ET("APP_TYPE",Math.floor(e))},setLogLevel:function(e){VT.setLogLevel(e)},enableLogUpload:function(){bT("USE_NEW_LOG")?ET("UPLOAD_LOG",!0):VT.enableLogUpload()},disableLogUpload:function(){bT("USE_NEW_LOG")?ET("UPLOAD_LOG",!1):VT.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new SU},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=eS.reportApiInvoke(null,{tag:py.TRACER,name:hy.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof eN||e instanceof AN)){const e=new PS(Wv.INVALID_TRACK,"the parameter is not a audio track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof eN?e.getTrackLabel():"remote_track",i=e.getVolumeLevel();let s=i,o=i;const a=Date.now();return new cv((i=>{const c=setInterval((()=>{const l=e.getVolumeLevel();s=l>s?l:s,o=l<o?l:o;const d=s-o>1e-4,u=Date.now()-a;if(d||u>t){clearInterval(c);const t=d,o={duration:u,deviceLabel:r,maxVolumeLevel:s,result:t};VT.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(o))),n.onSuccess(o),i(t)}}),200)}))},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=eS.reportApiInvoke(null,{tag:py.TRACER,name:hy.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof bN||e instanceof ON)){const e=new PS(Wv.INVALID_TRACK,"the parameter is not a video track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof bN?e.getTrackLabel():"remote_track",i=e.getMediaStreamTrack(!0),s=document.createElement("video");s.style.width="1px",s.style.height="1px",s.setAttribute("muted",""),s.muted=!0,s.setAttribute("playsinline",""),s.controls=!1,(Iv()||Sv())&&(s.style.opacity="0.01",s.style.position="fixed",s.style.left="0",s.style.top="0",document.body.appendChild(s)),s.srcObject=new MediaStream([i]),s.play();const o=document.createElement("canvas");o.width=160,o.height=120;let a=0,c=0;try{const e=Date.now();a=await function(e,t,n,r){let i,s=0,o=null;return new cv(((a,c)=>{function l(){s>r&&i&&(i(),a(s));const t=n.getContext("2d");if(!t){const e=new PS(Wv.UNEXPECTED_ERROR,"can not get canvas 2d context.");return VT.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const l=t.getImageData(0,0,n.width,n.height),d=Math.floor(l.data.length/3);if(o){for(let e=0;e<d;e+=3)if(l.data[e]!==o[e])return s+=1,void(o=l.data);o=l.data}else o=l.data}setTimeout((()=>{i&&(i(),a(s))}),t),i=yI((()=>{l()}),30)}))}(s,t,o,4),c=Date.now()-e}catch(e){throw n.onError(e),e}NB===mv.SAFARI&&(s.pause(),s.remove()),s.srcObject=null;const l=a>4,d={duration:c,changedPicNum:a,deviceLabel:r,result:l};return VT.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(d))),n.onSuccess(d),l},setArea:JC,audioElementPlayCenter:GI,resumeAudioContext:function(){GI.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){MB.processExternalMediaAEC(e)},registerExtensions:function(e){const t=bT("PLUGIN_INFO")||[];e.forEach((e=>{"name"in e&&!Nr(t).call(t,e.name)&&t.push(e.name);const n=e;n.__registered__=!0,n.logger.hookLog=VT.extLog,n.reporter.hookApiInvoke=eS.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach((e=>{n.parameters[e]=bT(e)}))})),VB("PLUGIN_INFO",t)},ChannelMediaRelayError:YS,ChannelMediaRelayEvent:qS,ChannelMediaRelayState:KS,RemoteStreamFallbackType:WR,RemoteStreamType:HR,ConnectionDisconnectedReason:my,AudienceLatencyLevelType:fy,AREAS:ew});return Object.defineProperties(GB,{onAudioAutoplayFailed:{get:()=>MI.onAudioAutoplayFailed,set:e=>{MI.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>MI.onAutoplayFailed,set:e=>{MI.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>GB._onSecurityPolicyViolation,set(e){GB._onSecurityPolicyViolation=e,BB(e)}},__CLIENT_LIST__:{get:()=>bT("SHOW_GLOBAL_CLIENT_LIST")?iS:[]}}),DI.on(iI.CAMERA_DEVICE_CHANGED,(e=>{VT.info("camera device changed",JSON.stringify(e)),GB.onCameraChanged&&GB.onCameraChanged(e),GB.safeEmit(yw.CAMERA_CHANGED,e)})),DI.on(iI.RECORDING_DEVICE_CHANGED,(e=>{VT.info("microphone device changed",JSON.stringify(e)),GB.onMicrophoneChanged&&GB.onMicrophoneChanged(e),GB.safeEmit(yw.MICROPHONE_CHANGED,e)})),DI.on(iI.PLAYOUT_DEVICE_CHANGED,(e=>{VT.debug("playout device changed",JSON.stringify(e)),GB.onPlaybackDeviceChanged&&GB.onPlaybackDeviceChanged(e),GB.safeEmit(yw.PLAYBACK_DEVICE_CHANGED,e)})),GI.onAutoplayFailed=()=>{VT.info("detect audio element autoplay failed"),MI.onAudioAutoplayFailed&&MI.onAudioAutoplayFailed()},fI.on("autoplay-failed",(()=>{VT.info("detect webaudio autoplay failed"),MI.onAudioAutoplayFailed&&MI.onAudioAutoplayFailed(),GB.safeEmit(yw.AUTOPLAY_FAILED)})),fI.on(wR.STATE_CHANGE,((e,t)=>{VT.info("audio context state changed: ".concat(t," => ").concat(e)),GB.onAudioContextStateChanged&&GB.onAudioContextStateChanged(e,t),GB.safeEmit(yw.AUDIO_CONTEXT_STATE_CHANGED,e,t)})),Ny.on(yy.NETWORK_STATE_CHANGE,((e,t)=>{VT.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))})),window&&(window.__ARTC__=GB),GB}()},8885:function(e){e.exports=function(){"use strict";const e=new Map,t={set(t,n,r){e.has(t)||e.set(t,new Map);const i=e.get(t);i.has(n)||0===i.size?i.set(n,r):console.error("Bootstrap doesn't allow more than one instance per element. Bound instance: ".concat(Array.from(i.keys())[0],"."))},get:(t,n)=>e.has(t)&&e.get(t).get(n)||null,remove(t,n){if(!e.has(t))return;const r=e.get(t);r.delete(n),0===r.size&&e.delete(t)}},n="transitionend",r=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,((e,t)=>"#".concat(CSS.escape(t))))),e),i=e=>{e.dispatchEvent(new Event(n))},s=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),o=e=>s(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(r(e)):null,a=e=>{if(!s(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const t=e.closest("summary");if(t&&t.parentNode!==n)return!1;if(null===t)return!1}return t},c=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),l=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?l(e.parentNode):null},d=()=>{},u=e=>{e.offsetHeight},h=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,p=[],f=()=>"rtl"===document.documentElement.dir,m=e=>{var t;t=()=>{const t=h();if(t){const n=e.NAME,r=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=r,e.jQueryInterface)}},"loading"===document.readyState?(p.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of p)e()})),p.push(t)):t()},g=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return"function"==typeof e?e(...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]):t},_=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&!arguments[2])return void g(e);const r=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const r=Number.parseFloat(t),i=Number.parseFloat(n);return r||i?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(t)+5;let s=!1;const o=r=>{let{target:i}=r;i===t&&(s=!0,t.removeEventListener(n,o),g(e))};t.addEventListener(n,o),setTimeout((()=>{s||i(t)}),r)},v=(e,t,n,r)=>{const i=e.length;let s=e.indexOf(t);return-1===s?!n&&r?e[i-1]:e[0]:(s+=n?1:-1,r&&(s=(s+i)%i),e[Math.max(0,Math.min(s,i-1))])},y=/[^.]*(?=\..*)\.|.*/,E=/\..*/,b=/::\d+$/,T={};let S=1;const w={mouseenter:"mouseover",mouseleave:"mouseout"},C=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function R(e,t){return t&&"".concat(t,"::").concat(S++)||e.uidEvent||S++}function I(e){const t=R(e);return e.uidEvent=t,T[t]=T[t]||{},T[t]}function N(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===n))}function O(e,t,n){const r="string"==typeof t,i=r?n:t||n;let s=P(e);return C.has(s)||(s=e),[r,i,s]}function A(e,t,n,r,i){if("string"!=typeof t||!e)return;let[s,o,a]=O(t,n,r);if(t in w){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};o=e(o)}const c=I(e),l=c[a]||(c[a]={}),d=N(l,o,s?n:null);if(d)return void(d.oneOff=d.oneOff&&i);const u=R(o,t.replace(y,"")),h=s?function(e,t,n){return function r(i){const s=e.querySelectorAll(t);for(let{target:o}=i;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return L(i,{delegateTarget:o}),r.oneOff&&D.off(e,i.type,t,n),n.apply(o,[i])}}(e,n,o):function(e,t){return function n(r){return L(r,{delegateTarget:e}),n.oneOff&&D.off(e,r.type,t),t.apply(e,[r])}}(e,o);h.delegationSelector=s?n:null,h.callable=o,h.oneOff=i,h.uidEvent=u,l[u]=h,e.addEventListener(a,h,s)}function k(e,t,n,r,i){const s=N(t[n],r,i);s&&(e.removeEventListener(n,s,Boolean(i)),delete t[n][s.uidEvent])}function x(e,t,n,r){const i=t[n]||{};for(const[s,o]of Object.entries(i))s.includes(r)&&k(e,t,n,o.callable,o.delegationSelector)}function P(e){return e=e.replace(E,""),w[e]||e}const D={on(e,t,n,r){A(e,t,n,r,!1)},one(e,t,n,r){A(e,t,n,r,!0)},off(e,t,n,r){if("string"!=typeof t||!e)return;const[i,s,o]=O(t,n,r),a=o!==t,c=I(e),l=c[o]||{},d=t.startsWith(".");if(void 0===s){if(d)for(const n of Object.keys(c))x(e,c,n,t.slice(1));for(const[n,r]of Object.entries(l)){const i=n.replace(b,"");a&&!t.includes(i)||k(e,c,o,r.callable,r.delegationSelector)}}else{if(!Object.keys(l).length)return;k(e,c,o,s,i?n:null)}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const r=h();let i=null,s=!0,o=!0,a=!1;t!==P(t)&&r&&(i=r.Event(t,n),r(e).trigger(i),s=!i.isPropagationStopped(),o=!i.isImmediatePropagationStopped(),a=i.isDefaultPrevented());const c=L(new Event(t,{bubbles:s,cancelable:!0}),n);return a&&c.preventDefault(),o&&e.dispatchEvent(c),c.defaultPrevented&&i&&i.preventDefault(),c}};function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const[n,r]of Object.entries(t))try{e[n]=r}catch(t){Object.defineProperty(e,n,{configurable:!0,get:()=>r})}return e}function M(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function j(e){return e.replace(/[A-Z]/g,(e=>"-".concat(e.toLowerCase())))}const U={setDataAttribute(e,t,n){e.setAttribute("data-bs-".concat(j(t)),n)},removeDataAttribute(e,t){e.removeAttribute("data-bs-".concat(j(t)))},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const r of n){let n=r.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=M(e.dataset[r])}return t},getDataAttribute:(e,t)=>M(e.getAttribute("data-bs-".concat(j(t))))};class F{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const n=s(t)?U.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...s(t)?U.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.DefaultType;for(const[r,i]of Object.entries(t)){const t=e[r],o=s(t)?"element":null==(n=t)?"".concat(n):Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(o))throw new TypeError("".concat(this.constructor.NAME.toUpperCase(),': Option "').concat(r,'" provided type "').concat(o,'" but expected type "').concat(i,'".'))}var n}}class B extends F{constructor(e,n){super(),(e=o(e))&&(this._element=e,this._config=this._getConfig(n),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),D.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t){_(e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return t.get(o(e),this.DATA_KEY)}static getOrCreateInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return"bs.".concat(this.NAME)}static get EVENT_KEY(){return".".concat(this.DATA_KEY)}static eventName(e){return"".concat(e).concat(this.EVENT_KEY)}}const V=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n="#".concat(n.split("#")[1])),t=n&&"#"!==n?n.trim():null}return t?t.split(",").map((e=>r(e))).join(","):null},G={find:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(t,e)},children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const n=[];let r=e.parentNode.closest(t);for(;r;)n.push(r),r=r.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>"".concat(e,':not([tabindex^="-"])'))).join(",");return this.find(t,e).filter((e=>!c(e)&&a(e)))},getSelectorFromElement(e){const t=V(e);return t&&G.findOne(t)?t:null},getElementFromSelector(e){const t=V(e);return t?G.findOne(t):null},getMultipleElementsFromSelector(e){const t=V(e);return t?G.find(t):[]}},H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";const n="click.dismiss".concat(e.EVENT_KEY),r=e.NAME;D.on(document,n,'[data-bs-dismiss="'.concat(r,'"]'),(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),c(this))return;const i=G.getElementFromSelector(this)||this.closest(".".concat(r));e.getOrCreateInstance(i)[t]()}))},W=".bs.alert",z="close".concat(W),q="closed".concat(W);class K extends B{static get NAME(){return"alert"}close(){if(D.trigger(this._element,z).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),D.trigger(this._element,q),this.dispose()}static jQueryInterface(e){return this.each((function(){const t=K.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}H(K,"close"),m(K);const Y='[data-bs-toggle="button"]';class J extends B{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each((function(){const t=J.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}D.on(document,"click.bs.button.data-api",Y,(e=>{e.preventDefault();const t=e.target.closest(Y);J.getOrCreateInstance(t).toggle()})),m(J);const X=".bs.swipe",Z="touchstart".concat(X),Q="touchmove".concat(X),$="touchend".concat(X),ee="pointerdown".concat(X),te="pointerup".concat(X),ne={endCallback:null,leftCallback:null,rightCallback:null},re={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ie extends F{constructor(e,t){super(),this._element=e,e&&ie.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ne}static get DefaultType(){return re}static get NAME(){return"swipe"}dispose(){D.off(this._element,X)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),g(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&g(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(D.on(this._element,ee,(e=>this._start(e))),D.on(this._element,te,(e=>this._end(e))),this._element.classList.add("pointer-event")):(D.on(this._element,Z,(e=>this._start(e))),D.on(this._element,Q,(e=>this._move(e))),D.on(this._element,$,(e=>this._end(e))))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const se=".bs.carousel",oe=".data-api",ae="next",ce="prev",le="left",de="right",ue="slide".concat(se),he="slid".concat(se),pe="keydown".concat(se),fe="mouseenter".concat(se),me="mouseleave".concat(se),ge="dragstart".concat(se),_e="load".concat(se).concat(oe),ve="click".concat(se).concat(oe),ye="carousel",Ee="active",be=".active",Te=".carousel-item",Se=be+Te,we={ArrowLeft:de,ArrowRight:le},Ce={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Re={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ie extends B{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=G.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ye&&this.cycle()}static get Default(){return Ce}static get DefaultType(){return Re}static get NAME(){return"carousel"}next(){this._slide(ae)}nextWhenVisible(){!document.hidden&&a(this._element)&&this.next()}prev(){this._slide(ce)}pause(){this._isSliding&&i(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?D.one(this._element,he,(()=>this.cycle())):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void D.one(this._element,he,(()=>this.to(e)));const n=this._getItemIndex(this._getActive());if(n===e)return;const r=e>n?ae:ce;this._slide(r,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&D.on(this._element,pe,(e=>this._keydown(e))),"hover"===this._config.pause&&(D.on(this._element,fe,(()=>this.pause())),D.on(this._element,me,(()=>this._maybeEnableCycle()))),this._config.touch&&ie.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of G.find(".carousel-item img",this._element))D.on(t,ge,(e=>e.preventDefault()));const e={leftCallback:()=>this._slide(this._directionToOrder(le)),rightCallback:()=>this._slide(this._directionToOrder(de)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new ie(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=we[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=G.findOne(be,this._indicatorsElement);t.classList.remove(Ee),t.removeAttribute("aria-current");const n=G.findOne('[data-bs-slide-to="'.concat(e,'"]'),this._indicatorsElement);n&&(n.classList.add(Ee),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._isSliding)return;const n=this._getActive(),r=e===ae,i=t||v(this._getItems(),n,r,this._config.wrap);if(i===n)return;const s=this._getItemIndex(i),o=t=>D.trigger(this._element,t,{relatedTarget:i,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:s});if(o(ue).defaultPrevented)return;if(!n||!i)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=i;const c=r?"carousel-item-start":"carousel-item-end",l=r?"carousel-item-next":"carousel-item-prev";i.classList.add(l),u(i),n.classList.add(c),i.classList.add(c),this._queueCallback((()=>{i.classList.remove(c,l),i.classList.add(Ee),n.classList.remove(Ee,l,c),this._isSliding=!1,o(he)}),n,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return G.findOne(Se,this._element)}_getItems(){return G.find(Te,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return f()?e===le?ce:ae:e===le?ae:ce}_orderToDirection(e){return f()?e===ce?le:de:e===ce?de:le}static jQueryInterface(e){return this.each((function(){const t=Ie.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}else t.to(e)}))}}D.on(document,ve,"[data-bs-slide], [data-bs-slide-to]",(function(e){const t=G.getElementFromSelector(this);if(!t||!t.classList.contains(ye))return;e.preventDefault();const n=Ie.getOrCreateInstance(t),r=this.getAttribute("data-bs-slide-to");return r?(n.to(r),void n._maybeEnableCycle()):"next"===U.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),D.on(window,_e,(()=>{const e=G.find('[data-bs-ride="carousel"]');for(const t of e)Ie.getOrCreateInstance(t)})),m(Ie);const Ne=".bs.collapse",Oe="show".concat(Ne),Ae="shown".concat(Ne),ke="hide".concat(Ne),xe="hidden".concat(Ne),Pe="click".concat(Ne,".data-api"),De="show",Le="collapse",Me="collapsing",je=":scope .".concat(Le," .").concat(Le),Ue='[data-bs-toggle="collapse"]',Fe={parent:null,toggle:!0},Be={parent:"(null|element)",toggle:"boolean"};class Ve extends B{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const n=G.find(Ue);for(const r of n){const e=G.getSelectorFromElement(r),t=G.find(e).filter((e=>e===this._element));null!==e&&t.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Fe}static get DefaultType(){return Be}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((e=>e!==this._element)).map((e=>Ve.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;if(D.trigger(this._element,Oe).defaultPrevented)return;for(const r of e)r.hide();const t=this._getDimension();this._element.classList.remove(Le),this._element.classList.add(Me),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n="scroll".concat(t[0].toUpperCase()+t.slice(1));this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Me),this._element.classList.add(Le,De),this._element.style[t]="",D.trigger(this._element,Ae)}),this._element,!0),this._element.style[t]="".concat(this._element[n],"px")}hide(){if(this._isTransitioning||!this._isShown())return;if(D.trigger(this._element,ke).defaultPrevented)return;const e=this._getDimension();this._element.style[e]="".concat(this._element.getBoundingClientRect()[e],"px"),u(this._element),this._element.classList.add(Me),this._element.classList.remove(Le,De);for(const t of this._triggerArray){const e=G.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Me),this._element.classList.add(Le),D.trigger(this._element,xe)}),this._element,!0)}_isShown(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains(De)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=o(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Ue);for(const t of e){const e=G.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=G.find(je,this._config.parent);return G.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const n of e)n.classList.toggle("collapsed",!t),n.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const n=Ve.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e]()}}))}}D.on(document,Pe,Ue,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const t of G.getMultipleElementsFromSelector(this))Ve.getOrCreateInstance(t,{toggle:!1}).toggle()})),m(Ve);var Ge="top",He="bottom",We="right",ze="left",qe="auto",Ke=[Ge,He,We,ze],Ye="start",Je="end",Xe="clippingParents",Ze="viewport",Qe="popper",$e="reference",et=Ke.reduce((function(e,t){return e.concat([t+"-"+Ye,t+"-"+Je])}),[]),tt=[].concat(Ke,[qe]).reduce((function(e,t){return e.concat([t,t+"-"+Ye,t+"-"+Je])}),[]),nt="beforeRead",rt="read",it="afterRead",st="beforeMain",ot="main",at="afterMain",ct="beforeWrite",lt="write",dt="afterWrite",ut=[nt,rt,it,st,ot,at,ct,lt,dt];function ht(e){return e?(e.nodeName||"").toLowerCase():null}function pt(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ft(e){return e instanceof pt(e).Element||e instanceof Element}function mt(e){return e instanceof pt(e).HTMLElement||e instanceof HTMLElement}function gt(e){return"undefined"!=typeof ShadowRoot&&(e instanceof pt(e).ShadowRoot||e instanceof ShadowRoot)}const _t={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];mt(i)&&ht(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});mt(r)&&ht(r)&&(Object.assign(r.style,s),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};function vt(e){return e.split("-")[0]}var yt=Math.max,Et=Math.min,bt=Math.round;function Tt(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function St(){return!/^((?!chrome|android).)*safari/i.test(Tt())}function wt(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&mt(e)&&(i=e.offsetWidth>0&&bt(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&bt(r.height)/e.offsetHeight||1);var o=(ft(e)?pt(e):window).visualViewport,a=!St()&&n,c=(r.left+(a&&o?o.offsetLeft:0))/i,l=(r.top+(a&&o?o.offsetTop:0))/s,d=r.width/i,u=r.height/s;return{width:d,height:u,top:l,right:c+d,bottom:l+u,left:c,x:c,y:l}}function Ct(e){var t=wt(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Rt(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&gt(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function It(e){return pt(e).getComputedStyle(e)}function Nt(e){return["table","td","th"].indexOf(ht(e))>=0}function Ot(e){return((ft(e)?e.ownerDocument:e.document)||window.document).documentElement}function At(e){return"html"===ht(e)?e:e.assignedSlot||e.parentNode||(gt(e)?e.host:null)||Ot(e)}function kt(e){return mt(e)&&"fixed"!==It(e).position?e.offsetParent:null}function xt(e){for(var t=pt(e),n=kt(e);n&&Nt(n)&&"static"===It(n).position;)n=kt(n);return n&&("html"===ht(n)||"body"===ht(n)&&"static"===It(n).position)?t:n||function(e){var t=/firefox/i.test(Tt());if(/Trident/i.test(Tt())&&mt(e)&&"fixed"===It(e).position)return null;var n=At(e);for(gt(n)&&(n=n.host);mt(n)&&["html","body"].indexOf(ht(n))<0;){var r=It(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function Pt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Dt(e,t,n){return yt(e,Et(t,n))}function Lt(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Mt(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}const jt={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=vt(n.placement),c=Pt(a),l=[ze,We].indexOf(a)>=0?"height":"width";if(s&&o){var d=function(e,t){return Lt("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Mt(e,Ke))}(i.padding,n),u=Ct(s),h="y"===c?Ge:ze,p="y"===c?He:We,f=n.rects.reference[l]+n.rects.reference[c]-o[c]-n.rects.popper[l],m=o[c]-n.rects.reference[c],g=xt(s),_=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,y=d[h],E=_-u[l]-d[p],b=_/2-u[l]/2+v,T=Dt(y,b,E),S=c;n.modifiersData[r]=((t={})[S]=T,t.centerOffset=T-b,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&Rt(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ut(e){return e.split("-")[1]}var Ft={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Bt(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,o=e.offsets,a=e.position,c=e.gpuAcceleration,l=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=o.x,p=void 0===h?0:h,f=o.y,m=void 0===f?0:f,g="function"==typeof d?d({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var _=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),y=ze,E=Ge,b=window;if(l){var T=xt(n),S="clientHeight",w="clientWidth";T===pt(n)&&"static"!==It(T=Ot(n)).position&&"absolute"===a&&(S="scrollHeight",w="scrollWidth"),(i===Ge||(i===ze||i===We)&&s===Je)&&(E=He,m-=(u&&T===b&&b.visualViewport?b.visualViewport.height:T[S])-r.height,m*=c?1:-1),i!==ze&&(i!==Ge&&i!==He||s!==Je)||(y=We,p-=(u&&T===b&&b.visualViewport?b.visualViewport.width:T[w])-r.width,p*=c?1:-1)}var C,R=Object.assign({position:a},l&&Ft),I=!0===d?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:bt(n*i)/i||0,y:bt(r*i)/i||0}}({x:p,y:m},pt(n)):{x:p,y:m};return p=I.x,m=I.y,c?Object.assign({},R,((C={})[E]=v?"0":"",C[y]=_?"0":"",C.transform=(b.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",C)):Object.assign({},R,((t={})[E]=v?m+"px":"",t[y]=_?p+"px":"",t.transform="",t))}const Vt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,c=void 0===a||a,l={placement:vt(t.placement),variation:Ut(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Bt(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Bt(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Gt={passive:!0};const Ht={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=void 0===i||i,o=r.resize,a=void 0===o||o,c=pt(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&l.forEach((function(e){e.addEventListener("scroll",n.update,Gt)})),a&&c.addEventListener("resize",n.update,Gt),function(){s&&l.forEach((function(e){e.removeEventListener("scroll",n.update,Gt)})),a&&c.removeEventListener("resize",n.update,Gt)}},data:{}};var Wt={left:"right",right:"left",bottom:"top",top:"bottom"};function zt(e){return e.replace(/left|right|bottom|top/g,(function(e){return Wt[e]}))}var qt={start:"end",end:"start"};function Kt(e){return e.replace(/start|end/g,(function(e){return qt[e]}))}function Yt(e){var t=pt(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Jt(e){return wt(Ot(e)).left+Yt(e).scrollLeft}function Xt(e){var t=It(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Zt(e){return["html","body","#document"].indexOf(ht(e))>=0?e.ownerDocument.body:mt(e)&&Xt(e)?e:Zt(At(e))}function Qt(e,t){var n;void 0===t&&(t=[]);var r=Zt(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),s=pt(r),o=i?[s].concat(s.visualViewport||[],Xt(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(Qt(At(o)))}function $t(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function en(e,t,n){return t===Ze?$t(function(e,t){var n=pt(e),r=Ot(e),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;var l=St();(l||!l&&"fixed"===t)&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a+Jt(e),y:c}}(e,n)):ft(t)?function(e,t){var n=wt(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):$t(function(e){var t,n=Ot(e),r=Yt(e),i=null==(t=e.ownerDocument)?void 0:t.body,s=yt(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=yt(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Jt(e),c=-r.scrollTop;return"rtl"===It(i||n).direction&&(a+=yt(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}(Ot(e)))}function tn(e){var t,n=e.reference,r=e.element,i=e.placement,s=i?vt(i):null,o=i?Ut(i):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(s){case Ge:t={x:a,y:n.y-r.height};break;case He:t={x:a,y:n.y+n.height};break;case We:t={x:n.x+n.width,y:c};break;case ze:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var l=s?Pt(s):null;if(null!=l){var d="y"===l?"height":"width";switch(o){case Ye:t[l]=t[l]-(n[d]/2-r[d]/2);break;case Je:t[l]=t[l]+(n[d]/2-r[d]/2)}}return t}function nn(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,s=n.strategy,o=void 0===s?e.strategy:s,a=n.boundary,c=void 0===a?Xe:a,l=n.rootBoundary,d=void 0===l?Ze:l,u=n.elementContext,h=void 0===u?Qe:u,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,_=Lt("number"!=typeof g?g:Mt(g,Ke)),v=h===Qe?$e:Qe,y=e.rects.popper,E=e.elements[f?v:h],b=function(e,t,n,r){var i="clippingParents"===t?function(e){var t=Qt(At(e)),n=["absolute","fixed"].indexOf(It(e).position)>=0&&mt(e)?xt(e):e;return ft(n)?t.filter((function(e){return ft(e)&&Rt(e,n)&&"body"!==ht(e)})):[]}(e):[].concat(t),s=[].concat(i,[n]),o=s[0],a=s.reduce((function(t,n){var i=en(e,n,r);return t.top=yt(i.top,t.top),t.right=Et(i.right,t.right),t.bottom=Et(i.bottom,t.bottom),t.left=yt(i.left,t.left),t}),en(e,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(ft(E)?E:E.contextElement||Ot(e.elements.popper),c,d,o),T=wt(e.elements.reference),S=tn({reference:T,element:y,strategy:"absolute",placement:i}),w=$t(Object.assign({},y,S)),C=h===Qe?w:T,R={top:b.top-C.top+_.top,bottom:C.bottom-b.bottom+_.bottom,left:b.left-C.left+_.left,right:C.right-b.right+_.right},I=e.modifiersData.offset;if(h===Qe&&I){var N=I[i];Object.keys(R).forEach((function(e){var t=[We,He].indexOf(e)>=0?1:-1,n=[Ge,He].indexOf(e)>=0?"y":"x";R[e]+=N[n]*t}))}return R}function rn(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?tt:c,d=Ut(r),u=d?a?et:et.filter((function(e){return Ut(e)===d})):Ke,h=u.filter((function(e){return l.indexOf(e)>=0}));0===h.length&&(h=u);var p=h.reduce((function(t,n){return t[n]=nn(e,{placement:n,boundary:i,rootBoundary:s,padding:o})[vt(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}const sn={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0===o||o,c=n.fallbackPlacements,l=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,_=vt(g),v=c||(_!==g&&f?function(e){if(vt(e)===qe)return[];var t=zt(e);return[Kt(e),t,Kt(t)]}(g):[zt(g)]),y=[g].concat(v).reduce((function(e,n){return e.concat(vt(n)===qe?rn(t,{placement:n,boundary:d,rootBoundary:u,padding:l,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),E=t.rects.reference,b=t.rects.popper,T=new Map,S=!0,w=y[0],C=0;C<y.length;C++){var R=y[C],I=vt(R),N=Ut(R)===Ye,O=[Ge,He].indexOf(I)>=0,A=O?"width":"height",k=nn(t,{placement:R,boundary:d,rootBoundary:u,altBoundary:h,padding:l}),x=O?N?We:ze:N?He:Ge;E[A]>b[A]&&(x=zt(x));var P=zt(x),D=[];if(s&&D.push(k[I]<=0),a&&D.push(k[x]<=0,k[P]<=0),D.every((function(e){return e}))){w=R,S=!1;break}T.set(R,D)}if(S)for(var L=function(e){var t=y.find((function(t){var n=T.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return w=t,"break"},M=f?3:1;M>0&&"break"!==L(M);M--);t.placement!==w&&(t.modifiersData[r]._skip=!0,t.placement=w,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function on(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function an(e){return[Ge,We,He,ze].some((function(t){return e[t]>=0}))}const cn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,o=nn(t,{elementContext:"reference"}),a=nn(t,{altBoundary:!0}),c=on(o,r),l=on(a,i,s),d=an(c),u=an(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},ln={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=void 0===i?[0,0]:i,o=tt.reduce((function(e,n){return e[n]=function(e,t,n){var r=vt(e),i=[ze,Ge].indexOf(r)>=0?-1:1,s="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[ze,We].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(n,t.rects,s),e}),{}),a=o[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=o}},dn={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=tn({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},un={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0!==o&&o,c=n.boundary,l=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=nn(t,{boundary:c,rootBoundary:l,padding:u,altBoundary:d}),_=vt(t.placement),v=Ut(t.placement),y=!v,E=Pt(_),b="x"===E?"y":"x",T=t.modifiersData.popperOffsets,S=t.rects.reference,w=t.rects.popper,C="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,R="number"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),I=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,N={x:0,y:0};if(T){if(s){var O,A="y"===E?Ge:ze,k="y"===E?He:We,x="y"===E?"height":"width",P=T[E],D=P+g[A],L=P-g[k],M=p?-w[x]/2:0,j=v===Ye?S[x]:w[x],U=v===Ye?-w[x]:-S[x],F=t.elements.arrow,B=p&&F?Ct(F):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},G=V[A],H=V[k],W=Dt(0,S[x],B[x]),z=y?S[x]/2-M-W-G-R.mainAxis:j-W-G-R.mainAxis,q=y?-S[x]/2+M+W+H+R.mainAxis:U+W+H+R.mainAxis,K=t.elements.arrow&&xt(t.elements.arrow),Y=K?"y"===E?K.clientTop||0:K.clientLeft||0:0,J=null!=(O=null==I?void 0:I[E])?O:0,X=P+q-J,Z=Dt(p?Et(D,P+z-J-Y):D,P,p?yt(L,X):L);T[E]=Z,N[E]=Z-P}if(a){var Q,$="x"===E?Ge:ze,ee="x"===E?He:We,te=T[b],ne="y"===b?"height":"width",re=te+g[$],ie=te-g[ee],se=-1!==[Ge,ze].indexOf(_),oe=null!=(Q=null==I?void 0:I[b])?Q:0,ae=se?re:te-S[ne]-w[ne]-oe+R.altAxis,ce=se?te+S[ne]+w[ne]-oe-R.altAxis:ie,le=p&&se?function(e,t,n){var r=Dt(e,t,n);return r>n?n:r}(ae,te,ce):Dt(p?ae:re,te,p?ce:ie);T[b]=le,N[b]=le-te}t.modifiersData[r]=N}},requiresIfExists:["offset"]};function hn(e,t,n){void 0===n&&(n=!1);var r,i,s=mt(t),o=mt(t)&&function(e){var t=e.getBoundingClientRect(),n=bt(t.width)/e.offsetWidth||1,r=bt(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=Ot(t),c=wt(e,o,n),l={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(s||!s&&!n)&&(("body"!==ht(t)||Xt(a))&&(l=(r=t)!==pt(r)&&mt(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:Yt(r)),mt(t)?((d=wt(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):a&&(d.x=Jt(a))),{x:c.left+l.scrollLeft-d.x,y:c.top+l.scrollTop-d.y,width:c.width,height:c.height}}function pn(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}var fn={placement:"bottom",modifiers:[],strategy:"absolute"};function mn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function gn(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,s=void 0===i?fn:i;return function(e,t,n){void 0===n&&(n=s);var i,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},fn,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],l=!1,d={state:a,setOptions:function(n){var i="function"==typeof n?n(a.options):n;u(),a.options=Object.assign({},s,a.options,i),a.scrollParents={reference:ft(e)?Qt(e):e.contextElement?Qt(e.contextElement):[],popper:Qt(t)};var o,l,h=function(e){var t=pn(e);return ut.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((o=[].concat(r,a.options.modifiers),l=o.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(l).map((function(e){return l[e]}))));return a.orderedModifiers=h.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var s=i({state:a,name:t,instance:d,options:r});c.push(s||function(){})}})),d.update()},forceUpdate:function(){if(!l){var e=a.elements,t=e.reference,n=e.popper;if(mn(t,n)){a.rects={reference:hn(t,xt(n),"fixed"===a.options.strategy),popper:Ct(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var i=a.orderedModifiers[r],s=i.fn,o=i.options,c=void 0===o?{}:o,u=i.name;"function"==typeof s&&(a=s({state:a,options:c,name:u,instance:d})||a)}else a.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){d.forceUpdate(),e(a)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(i())}))}))),o}),destroy:function(){u(),l=!0}};if(!mn(e,t))return d;function u(){c.forEach((function(e){return e()})),c=[]}return d.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d}}var _n=gn(),vn=gn({defaultModifiers:[Ht,dn,Vt,_t]}),yn=gn({defaultModifiers:[Ht,dn,Vt,_t,ln,sn,un,jt,cn]});const En=Object.freeze(Object.defineProperty({__proto__:null,afterMain:at,afterRead:it,afterWrite:dt,applyStyles:_t,arrow:jt,auto:qe,basePlacements:Ke,beforeMain:st,beforeRead:nt,beforeWrite:ct,bottom:He,clippingParents:Xe,computeStyles:Vt,createPopper:yn,createPopperBase:_n,createPopperLite:vn,detectOverflow:nn,end:Je,eventListeners:Ht,flip:sn,hide:cn,left:ze,main:ot,modifierPhases:ut,offset:ln,placements:tt,popper:Qe,popperGenerator:gn,popperOffsets:dn,preventOverflow:un,read:rt,reference:$e,right:We,start:Ye,top:Ge,variationPlacements:et,viewport:Ze,write:lt},Symbol.toStringTag,{value:"Module"})),bn="dropdown",Tn=".bs.dropdown",Sn=".data-api",wn="ArrowUp",Cn="ArrowDown",Rn="hide".concat(Tn),In="hidden".concat(Tn),Nn="show".concat(Tn),On="shown".concat(Tn),An="click".concat(Tn).concat(Sn),kn="keydown".concat(Tn).concat(Sn),xn="keyup".concat(Tn).concat(Sn),Pn="show",Dn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ln="".concat(Dn,".").concat(Pn),Mn=".dropdown-menu",jn=f()?"top-end":"top-start",Un=f()?"top-start":"top-end",Fn=f()?"bottom-end":"bottom-start",Bn=f()?"bottom-start":"bottom-end",Vn=f()?"left-start":"right-start",Gn=f()?"right-start":"left-start",Hn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Wn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class zn extends B{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=G.next(this._element,Mn)[0]||G.prev(this._element,Mn)[0]||G.findOne(Mn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Hn}static get DefaultType(){return Wn}static get NAME(){return bn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(c(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!D.trigger(this._element,Nn,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))D.on(e,"mouseover",d);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Pn),this._element.classList.add(Pn),D.trigger(this._element,On,e)}}hide(){if(c(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!D.trigger(this._element,Rn,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))D.off(e,"mouseover",d);this._popper&&this._popper.destroy(),this._menu.classList.remove(Pn),this._element.classList.remove(Pn),this._element.setAttribute("aria-expanded","false"),U.removeDataAttribute(this._menu,"popper"),D.trigger(this._element,In,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!s(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError("".concat(bn.toUpperCase(),': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'));return e}_createPopper(){if(void 0===En)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:s(this._config.reference)?e=o(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=yn(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Pn)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Vn;if(e.classList.contains("dropstart"))return Gn;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Un:jn:t?Bn:Fn}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(U.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...g(this._config.popperConfig,[e])}}_selectMenuItem(e){let{key:t,target:n}=e;const r=G.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((e=>a(e)));r.length&&v(r,n,t===Cn,!r.includes(n)).focus()}static jQueryInterface(e){return this.each((function(){const t=zn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=G.find(Ln);for(const n of t){const t=zn.getInstance(n);if(!t||!1===t._config.autoClose)continue;const r=e.composedPath(),i=r.includes(t._menu);if(r.includes(t._element)||"inside"===t._config.autoClose&&!i||"outside"===t._config.autoClose&&i)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const s={relatedTarget:t._element};"click"===e.type&&(s.clickEvent=e),t._completeHide(s)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),n="Escape"===e.key,r=[wn,Cn].includes(e.key);if(!r&&!n)return;if(t&&!n)return;e.preventDefault();const i=this.matches(Dn)?this:G.prev(this,Dn)[0]||G.next(this,Dn)[0]||G.findOne(Dn,e.delegateTarget.parentNode),s=zn.getOrCreateInstance(i);if(r)return e.stopPropagation(),s.show(),void s._selectMenuItem(e);s._isShown()&&(e.stopPropagation(),s.hide(),i.focus())}}D.on(document,kn,Dn,zn.dataApiKeydownHandler),D.on(document,kn,Mn,zn.dataApiKeydownHandler),D.on(document,An,zn.clearMenus),D.on(document,xn,zn.clearMenus),D.on(document,An,Dn,(function(e){e.preventDefault(),zn.getOrCreateInstance(this).toggle()})),m(zn);const qn="backdrop",Kn="show",Yn="mousedown.bs.".concat(qn),Jn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Xn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Zn extends F{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Jn}static get DefaultType(){return Xn}static get NAME(){return qn}show(e){if(!this._config.isVisible)return void g(e);this._append();const t=this._getElement();this._config.isAnimated&&u(t),t.classList.add(Kn),this._emulateAnimation((()=>{g(e)}))}hide(e){this._config.isVisible?(this._getElement().classList.remove(Kn),this._emulateAnimation((()=>{this.dispose(),g(e)}))):g(e)}dispose(){this._isAppended&&(D.off(this._element,Yn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=o(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),D.on(e,Yn,(()=>{g(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(e){_(e,this._getElement(),this._config.isAnimated)}}const Qn=".bs.focustrap",$n="focusin".concat(Qn),er="keydown.tab".concat(Qn),tr="backward",nr={autofocus:!0,trapElement:null},rr={autofocus:"boolean",trapElement:"element"};class ir extends F{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return nr}static get DefaultType(){return rr}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),D.off(document,Qn),D.on(document,$n,(e=>this._handleFocusin(e))),D.on(document,er,(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,D.off(document,Qn))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const n=G.focusableChildren(t);0===n.length?t.focus():this._lastTabNavDirection===tr?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?tr:"forward")}}const sr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",or=".sticky-top",ar="padding-right",cr="margin-right";class lr{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ar,(t=>t+e)),this._setElementAttributes(sr,ar,(t=>t+e)),this._setElementAttributes(or,cr,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ar),this._resetElementAttributes(sr,ar),this._resetElementAttributes(or,cr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const r=this.getWidth();this._applyManipulationCallback(e,(e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+r)return;this._saveInitialAttribute(e,t);const i=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,"".concat(n(Number.parseFloat(i)),"px"))}))}_saveInitialAttribute(e,t){const n=e.style.getPropertyValue(t);n&&U.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,(e=>{const n=U.getDataAttribute(e,t);null!==n?(U.removeDataAttribute(e,t),e.style.setProperty(t,n)):e.style.removeProperty(t)}))}_applyManipulationCallback(e,t){if(s(e))t(e);else for(const n of G.find(e,this._element))t(n)}}const dr=".bs.modal",ur="hide".concat(dr),hr="hidePrevented".concat(dr),pr="hidden".concat(dr),fr="show".concat(dr),mr="shown".concat(dr),gr="resize".concat(dr),_r="click.dismiss".concat(dr),vr="mousedown.dismiss".concat(dr),yr="keydown.dismiss".concat(dr),Er="click".concat(dr,".data-api"),br="modal-open",Tr="show",Sr="modal-static",wr={backdrop:!0,focus:!0,keyboard:!0},Cr={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Rr extends B{constructor(e,t){super(e,t),this._dialog=G.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new lr,this._addEventListeners()}static get Default(){return wr}static get DefaultType(){return Cr}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||D.trigger(this._element,fr,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(br),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){this._isShown&&!this._isTransitioning&&(D.trigger(this._element,ur).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Tr),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){D.off(window,dr),D.off(this._dialog,dr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Zn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ir({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=G.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),u(this._element),this._element.classList.add(Tr),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,D.trigger(this._element,mr,{relatedTarget:e})}),this._dialog,this._isAnimated())}_addEventListeners(){D.on(this._element,yr,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),D.on(window,gr,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),D.on(this._element,vr,(e=>{D.one(this._element,_r,(t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(br),this._resetAdjustments(),this._scrollBar.reset(),D.trigger(this._element,pr)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(D.trigger(this._element,hr).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(Sr)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Sr),this._queueCallback((()=>{this._element.classList.remove(Sr),this._queueCallback((()=>{this._element.style.overflowY=t}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=t>0;if(n&&!e){const e=f()?"paddingLeft":"paddingRight";this._element.style[e]="".concat(t,"px")}if(!n&&e){const e=f()?"paddingRight":"paddingLeft";this._element.style[e]="".concat(t,"px")}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const n=Rr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e](t)}}))}}D.on(document,Er,'[data-bs-toggle="modal"]',(function(e){const t=G.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),D.one(t,fr,(e=>{e.defaultPrevented||D.one(t,pr,(()=>{a(this)&&this.focus()}))}));const n=G.findOne(".modal.show");n&&Rr.getInstance(n).hide(),Rr.getOrCreateInstance(t).toggle(this)})),H(Rr),m(Rr);const Ir=".bs.offcanvas",Nr=".data-api",Or="load".concat(Ir).concat(Nr),Ar="show",kr="showing",xr="hiding",Pr=".offcanvas.show",Dr="show".concat(Ir),Lr="shown".concat(Ir),Mr="hide".concat(Ir),jr="hidePrevented".concat(Ir),Ur="hidden".concat(Ir),Fr="resize".concat(Ir),Br="click".concat(Ir).concat(Nr),Vr="keydown.dismiss".concat(Ir),Gr={backdrop:!0,keyboard:!0,scroll:!1},Hr={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Wr extends B{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Gr}static get DefaultType(){return Hr}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||D.trigger(this._element,Dr,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new lr).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(kr),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ar),this._element.classList.remove(kr),D.trigger(this._element,Lr,{relatedTarget:e})}),this._element,!0))}hide(){this._isShown&&(D.trigger(this._element,Mr).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(xr),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(Ar,xr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new lr).reset(),D.trigger(this._element,Ur)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Zn({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():D.trigger(this._element,jr)}:null})}_initializeFocusTrap(){return new ir({trapElement:this._element})}_addEventListeners(){D.on(this._element,Vr,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():D.trigger(this._element,jr))}))}static jQueryInterface(e){return this.each((function(){const t=Wr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}D.on(document,Br,'[data-bs-toggle="offcanvas"]',(function(e){const t=G.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this))return;D.one(t,Ur,(()=>{a(this)&&this.focus()}));const n=G.findOne(Pr);n&&n!==t&&Wr.getInstance(n).hide(),Wr.getOrCreateInstance(t).toggle(this)})),D.on(window,Or,(()=>{for(const e of G.find(Pr))Wr.getOrCreateInstance(e).show()})),D.on(window,Fr,(()=>{for(const e of G.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Wr.getOrCreateInstance(e).hide()})),H(Wr),m(Wr);const zr={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},qr=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Kr=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Yr=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?!qr.has(n)||Boolean(Kr.test(e.nodeValue)):t.filter((e=>e instanceof RegExp)).some((e=>e.test(n)))},Jr={allowList:zr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Xr={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Zr={entry:"(string|element|function|null)",selector:"(string|element)"};class Qr extends F{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Jr}static get DefaultType(){return Xr}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((e=>this._resolvePossibleFunction(e))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,i]of Object.entries(this._config.content))this._setContent(e,i,r);const t=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&t.classList.add(...n.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,n]of Object.entries(e))super._typeCheckConfig({selector:t,entry:n},Zr)}_setContent(e,t,n){const r=G.findOne(n,e);r&&((t=this._resolvePossibleFunction(t))?s(t)?this._putElementInTemplate(o(t),r):this._config.html?r.innerHTML=this._maybeSanitize(t):r.textContent=t:r.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);const r=(new window.DOMParser).parseFromString(e,"text/html"),i=[].concat(...r.body.querySelectorAll("*"));for(const s of i){const e=s.nodeName.toLowerCase();if(!Object.keys(t).includes(e)){s.remove();continue}const n=[].concat(...s.attributes),r=[].concat(t["*"]||[],t[e]||[]);for(const t of n)Yr(t,r)||s.removeAttribute(t.nodeName)}return r.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return g(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const $r=new Set(["sanitize","allowList","sanitizeFn"]),ei="fade",ti="show",ni=".modal",ri="hide.bs.modal",ii="hover",si="focus",oi={AUTO:"auto",TOP:"top",RIGHT:f()?"left":"right",BOTTOM:"bottom",LEFT:f()?"right":"left"},ai={allowList:zr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},ci={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class li extends B{constructor(e,t){if(void 0===En)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ai}static get DefaultType(){return ci}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),D.off(this._element.closest(ni),ri,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=D.trigger(this._element,this.constructor.eventName("show")),t=(l(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(n),D.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(ti),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))D.on(i,"mouseover",d);this._queueCallback((()=>{D.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!D.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ti),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))D.off(e,"mouseover",d);this._activeTrigger.click=!1,this._activeTrigger[si]=!1,this._activeTrigger[ii]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),D.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(ei,ti),t.classList.add("bs-".concat(this.constructor.NAME,"-auto"));const n=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",n),this._isAnimated()&&t.classList.add(ei),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Qr({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ei)}_isShown(){return this.tip&&this.tip.classList.contains(ti)}_createPopper(e){const t=g(this._config.placement,[this,e,this._element]),n=oi[t.toUpperCase()];return yn(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return g(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...g(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)D.on(this._element,this.constructor.eventName("click"),this._config.selector,(e=>{this._initializeOnDelegatedTarget(e).toggle()}));else if("manual"!==t){const e=t===ii?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=t===ii?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");D.on(this._element,e,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?si:ii]=!0,t._enter()})),D.on(this._element,n,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?si:ii]=t._element.contains(e.relatedTarget),t._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},D.on(this._element.closest(ni),ri,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=U.getDataAttributes(this._element);for(const n of Object.keys(t))$r.has(n)&&delete t[n];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:o(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,n]of Object.entries(this._config))this.constructor.Default[t]!==n&&(e[t]=n);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each((function(){const t=li.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}m(li);const di={...li.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ui={...li.DefaultType,content:"(null|string|element|function)"};class hi extends li{static get Default(){return di}static get DefaultType(){return ui}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each((function(){const t=hi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}m(hi);const pi=".bs.scrollspy",fi="activate".concat(pi),mi="click".concat(pi),gi="load".concat(pi,".data-api"),_i="active",vi="[href]",yi=".nav-link",Ei="".concat(yi,", .nav-item > ").concat(yi,", .list-group-item"),bi={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ti={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Si extends B{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return bi}static get DefaultType(){return Ti}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=o(e.target)||document.body,e.rootMargin=e.offset?"".concat(e.offset,"px 0px -30%"):e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map((e=>Number.parseFloat(e)))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(D.off(this._config.target,mi),D.on(this._config.target,mi,vi,(e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const n=this._rootElement||window,r=t.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:r,behavior:"smooth"});n.scrollTop=r}})))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((e=>this._observerCallback(e)),e)}_observerCallback(e){const t=e=>this._targetLinks.get("#".concat(e.target.id)),n=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},r=(this._rootElement||document.documentElement).scrollTop,i=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const s of e){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(s));continue}const e=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&e){if(n(s),!r)return}else i||e||n(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=G.find(vi,this._config.target);for(const t of e){if(!t.hash||c(t))continue;const e=G.findOne(decodeURI(t.hash),this._element);a(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(_i),this._activateParents(e),D.trigger(this._element,fi,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))G.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(_i);else for(const t of G.parents(e,".nav, .list-group"))for(const e of G.prev(t,Ei))e.classList.add(_i)}_clearActiveClass(e){e.classList.remove(_i);const t=G.find("".concat(vi,".").concat(_i),e);for(const n of t)n.classList.remove(_i)}static jQueryInterface(e){return this.each((function(){const t=Si.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}D.on(window,gi,(()=>{for(const e of G.find('[data-bs-spy="scroll"]'))Si.getOrCreateInstance(e)})),m(Si);const wi=".bs.tab",Ci="hide".concat(wi),Ri="hidden".concat(wi),Ii="show".concat(wi),Ni="shown".concat(wi),Oi="click".concat(wi),Ai="keydown".concat(wi),ki="load".concat(wi),xi="ArrowLeft",Pi="ArrowRight",Di="ArrowUp",Li="ArrowDown",Mi="Home",ji="End",Ui="active",Fi="fade",Bi="show",Vi=".dropdown-toggle",Gi=":not(".concat(Vi,")"),Hi='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Wi=".nav-link".concat(Gi,", .list-group-item").concat(Gi,', [role="tab"]').concat(Gi,", ").concat(Hi),zi=".".concat(Ui,'[data-bs-toggle="tab"], .').concat(Ui,'[data-bs-toggle="pill"], .').concat(Ui,'[data-bs-toggle="list"]');class qi extends B{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),D.on(this._element,Ai,(e=>this._keydown(e))))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),n=t?D.trigger(t,Ci,{relatedTarget:e}):null;D.trigger(e,Ii,{relatedTarget:t}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Ui),this._activate(G.getElementFromSelector(e)),this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),D.trigger(e,Ni,{relatedTarget:t})):e.classList.add(Bi)}),e,e.classList.contains(Fi)))}_deactivate(e,t){e&&(e.classList.remove(Ui),e.blur(),this._deactivate(G.getElementFromSelector(e)),this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),D.trigger(e,Ri,{relatedTarget:t})):e.classList.remove(Bi)}),e,e.classList.contains(Fi)))}_keydown(e){if(![xi,Pi,Di,Li,Mi,ji].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter((e=>!c(e)));let n;if([Mi,ji].includes(e.key))n=t[e.key===Mi?0:t.length-1];else{const r=[Pi,Li].includes(e.key);n=v(t,e.target,r,!0)}n&&(n.focus({preventScroll:!0}),qi.getOrCreateInstance(n).show())}_getChildren(){return G.find(Wi,this._parent)}_getActiveElem(){return this._getChildren().find((e=>this._elemIsActive(e)))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const n of t)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",t),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=G.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby","".concat(e.id)))}_toggleDropDown(e,t){const n=this._getOuterElement(e);if(!n.classList.contains("dropdown"))return;const r=(e,r)=>{const i=G.findOne(e,n);i&&i.classList.toggle(r,t)};r(Vi,Ui),r(".dropdown-menu",Bi),n.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}_elemIsActive(e){return e.classList.contains(Ui)}_getInnerElement(e){return e.matches(Wi)?e:G.findOne(Wi,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each((function(){const t=qi.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}D.on(document,Oi,Hi,(function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this)||qi.getOrCreateInstance(this).show()})),D.on(window,ki,(()=>{for(const e of G.find(zi))qi.getOrCreateInstance(e)})),m(qi);const Ki=".bs.toast",Yi="mouseover".concat(Ki),Ji="mouseout".concat(Ki),Xi="focusin".concat(Ki),Zi="focusout".concat(Ki),Qi="hide".concat(Ki),$i="hidden".concat(Ki),es="show".concat(Ki),ts="shown".concat(Ki),ns="hide",rs="show",is="showing",ss={animation:"boolean",autohide:"boolean",delay:"number"},os={animation:!0,autohide:!0,delay:5e3};class as extends B{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return os}static get DefaultType(){return ss}static get NAME(){return"toast"}show(){D.trigger(this._element,es).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ns),u(this._element),this._element.classList.add(rs,is),this._queueCallback((()=>{this._element.classList.remove(is),D.trigger(this._element,ts),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(D.trigger(this._element,Qi).defaultPrevented||(this._element.classList.add(is),this._queueCallback((()=>{this._element.classList.add(ns),this._element.classList.remove(is,rs),D.trigger(this._element,$i)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(rs),super.dispose()}isShown(){return this._element.classList.contains(rs)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){D.on(this._element,Yi,(e=>this._onInteraction(e,!0))),D.on(this._element,Ji,(e=>this._onInteraction(e,!1))),D.on(this._element,Xi,(e=>this._onInteraction(e,!0))),D.on(this._element,Zi,(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=as.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}return H(as),m(as),{Alert:K,Button:J,Carousel:Ie,Collapse:Ve,Dropdown:zn,Modal:Rr,Offcanvas:Wr,Popover:hi,ScrollSpy:Si,Tab:qi,Toast:as,Tooltip:li}}()},219:(e,t,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var l=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var o=d(n);u&&(o=o.concat(u(n)));for(var a=c(t),m=c(n),g=0;g<o.length;++g){var _=o[g];if(!s[_]&&(!r||!r[_])&&(!m||!m[_])&&(!a||!a[_])){var v=h(n,_);try{l(t,_,v)}catch(y){}}}}return t}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,_=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,E=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case u:case s:case a:case o:case p:return e;default:switch(e=e&&e.$$typeof){case l:case h:case g:case m:case c:return e;default:return t}}case i:return t}}}function T(e){return b(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=h,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return T(e)||b(e)===d},t.isConcurrentMode=T,t.isContextConsumer=function(e){return b(e)===l},t.isContextProvider=function(e){return b(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===s},t.isLazy=function(e){return b(e)===g},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===a},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===u||e===a||e===o||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===h||e.$$typeof===v||e.$$typeof===y||e.$$typeof===E||e.$$typeof===_)},t.typeOf=b},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},2740:e=>{"use strict";e.exports=function(e,t,n,r,i,s,o,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,s,o,a],d=0;(c=new Error(t.replace(/%s/g,(function(){return l[d++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},6178:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function i(e){t=e}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(a(e,t))return!1;return!0}function l(e){return void 0===e}function d(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,r=[],i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function p(e,t){for(var n in t)a(t,n)&&(e[n]=t[n]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,r){return Yn(e,t,n,r,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function g(e){return null==e._pf&&(e._pf=m()),e._pf}function _(e){var t=null,r=!1,i=e._d&&!isNaN(e._d.getTime());return i&&(t=g(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?i:(e._isValid=i,e._isValid)}function v(e){var t=f(NaN);return null!=e?p(g(t),e):g(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var y=r.momentProperties=[],E=!1;function b(e,t){var n,r,i,s=y.length;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=g(t)),l(t._locale)||(e._locale=t._locale),s>0)for(n=0;n<s;n++)l(i=t[r=y[n]])||(e[r]=i);return e}function T(e){b(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===E&&(E=!0,r.updateOffset(this),E=!1)}function S(e){return e instanceof T||null!=e&&null!=e._isAMomentObject}function w(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function C(e,t){var n=!0;return p((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,s,o,c=[],l=arguments.length;for(s=0;s<l;s++){if(i="","object"===typeof arguments[s]){for(o in i+="\n["+s+"] ",arguments[0])a(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[s];c.push(i)}w(e+"\nArguments: "+Array.prototype.slice.call(c).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var R,I={};function N(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),I[e]||(w(t),I[e]=!0)}function O(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function A(e){var t,n;for(n in e)a(e,n)&&(O(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function k(e,t){var n,r=p({},e);for(n in t)a(t,n)&&(o(e[n])&&o(t[n])?(r[n]={},p(r[n],e[n]),p(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)a(e,n)&&!a(t,n)&&o(e[n])&&(r[n]=p({},r[n]));return r}function x(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,R=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)a(e,t)&&n.push(t);return n};var P={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function D(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return O(r)?r.call(t,n):r}function L(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var M=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,j=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},F={};function B(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(F[e]=i),t&&(F[t[0]]=function(){return L(i.apply(this,arguments),t[1],t[2])}),n&&(F[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function G(e){var t,n,r=e.match(M);for(t=0,n=r.length;t<n;t++)F[r[t]]?r[t]=F[r[t]]:r[t]=V(r[t]);return function(t){var i,s="";for(i=0;i<n;i++)s+=O(r[i])?r[i].call(t,e):r[i];return s}}function H(e,t){return e.isValid()?(t=W(t,e.localeData()),U[t]=U[t]||G(t),U[t](e)):e.localeData().invalidDate()}function W(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(j.lastIndex=0;n>=0&&j.test(e);)e=e.replace(j,r),j.lastIndex=0,n-=1;return e}var z={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function q(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(M).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var K="Invalid date";function Y(){return this._invalidDate}var J="%d",X=/\d{1,2}/;function Z(e){return this._ordinal.replace("%d",e)}var Q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function $(e,t,n,r){var i=this._relativeTime[n];return O(i)?i(e,t,n,r):i.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return O(n)?n(t):n.replace(/%s/i,t)}var te={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ne(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function re(e){var t,n,r={};for(n in e)a(e,n)&&(t=ne(n))&&(r[t]=e[n]);return r}var ie={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function se(e){var t,n=[];for(t in e)a(e,t)&&n.push({unit:t,priority:ie[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}var oe,ae=/\d/,ce=/\d\d/,le=/\d{3}/,de=/\d{4}/,ue=/[+-]?\d{6}/,he=/\d\d?/,pe=/\d\d\d\d?/,fe=/\d\d\d\d\d\d?/,me=/\d{1,3}/,ge=/\d{1,4}/,_e=/[+-]?\d{1,6}/,ve=/\d+/,ye=/[+-]?\d+/,Ee=/Z|[+-]\d\d:?\d\d/gi,be=/Z|[+-]\d\d(?::?\d\d)?/gi,Te=/[+-]?\d+(\.\d{1,3})?/,Se=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,we=/^[1-9]\d?/,Ce=/^([1-9]\d|\d)/;function Re(e,t,n){oe[e]=O(t)?t:function(e,r){return e&&n?n:t}}function Ie(e,t){return a(oe,e)?oe[e](t._strict,t._locale):new RegExp(Ne(e))}function Ne(e){return Oe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}function Oe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ae(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ke(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=Ae(t)),n}oe={};var xe={};function Pe(e,t){var n,r,i=t;for("string"===typeof e&&(e=[e]),d(t)&&(i=function(e,n){n[t]=ke(e)}),r=e.length,n=0;n<r;n++)xe[e[n]]=i}function De(e,t){Pe(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function Le(e,t,n){null!=t&&a(xe,e)&&xe[e](t,n._a,n,e)}function Me(e){return e%4===0&&e%100!==0||e%400===0}var je=0,Ue=1,Fe=2,Be=3,Ve=4,Ge=5,He=6,We=7,ze=8;function qe(e){return Me(e)?366:365}B("Y",0,0,(function(){var e=this.year();return e<=9999?L(e,4):"+"+e})),B(0,["YY",2],0,(function(){return this.year()%100})),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),Re("Y",ye),Re("YY",he,ce),Re("YYYY",ge,de),Re("YYYYY",_e,ue),Re("YYYYYY",_e,ue),Pe(["YYYYY","YYYYYY"],je),Pe("YYYY",(function(e,t){t[je]=2===e.length?r.parseTwoDigitYear(e):ke(e)})),Pe("YY",(function(e,t){t[je]=r.parseTwoDigitYear(e)})),Pe("Y",(function(e,t){t[je]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return ke(e)+(ke(e)>68?1900:2e3)};var Ke,Ye=Xe("FullYear",!0);function Je(){return Me(this.year())}function Xe(e,t){return function(n){return null!=n?(Qe(this,e,n),r.updateOffset(this,t),this):Ze(this,e)}}function Ze(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Qe(e,t,n){var r,i,s,o,a;if(e.isValid()&&!isNaN(n)){switch(r=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}s=n,o=e.month(),a=29!==(a=e.date())||1!==o||Me(s)?a:28,i?r.setUTCFullYear(s,o,a):r.setFullYear(s,o,a)}}function $e(e){return O(this[e=ne(e)])?this[e]():this}function et(e,t){if("object"===typeof e){var n,r=se(e=re(e)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(O(this[e=ne(e)]))return this[e](t);return this}function tt(e,t){return(e%t+t)%t}function nt(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=tt(t,12);return e+=(t-n)/12,1===n?Me(e)?29:28:31-n%7%2}Ke=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},B("M",["MM",2],"Mo",(function(){return this.month()+1})),B("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),B("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),Re("M",he,we),Re("MM",he,ce),Re("MMM",(function(e,t){return t.monthsShortRegex(e)})),Re("MMMM",(function(e,t){return t.monthsRegex(e)})),Pe(["M","MM"],(function(e,t){t[Ue]=ke(e)-1})),Pe(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[Ue]=i:g(n).invalidMonth=e}));var rt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),it="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),st=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ot=Se,at=Se;function ct(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||st).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}function lt(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[st.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function dt(e,t,n){var r,i,s,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ke.call(this._shortMonthsParse,o))?i:null:-1!==(i=Ke.call(this._longMonthsParse,o))?i:null:"MMM"===t?-1!==(i=Ke.call(this._shortMonthsParse,o))||-1!==(i=Ke.call(this._longMonthsParse,o))?i:null:-1!==(i=Ke.call(this._longMonthsParse,o))||-1!==(i=Ke.call(this._shortMonthsParse,o))?i:null}function ut(e,t,n){var r,i,s;if(this._monthsParseExact)return dt.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ht(e,t){if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=ke(t);else if(!d(t=e.localeData().monthsParse(t)))return e;var n=t,r=e.date();return r=r<29?r:Math.min(r,nt(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function pt(e){return null!=e?(ht(this,e),r.updateOffset(this,!0),this):Ze(this,"Month")}function ft(){return nt(this.year(),this.month())}function mt(e){return this._monthsParseExact?(a(this,"_monthsRegex")||_t.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=ot),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function gt(e){return this._monthsParseExact?(a(this,"_monthsRegex")||_t.call(this),e?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=at),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function _t(){function e(e,t){return t.length-e.length}var t,n,r,i,s=[],o=[],a=[];for(t=0;t<12;t++)n=f([2e3,t]),r=Oe(this.monthsShort(n,"")),i=Oe(this.months(n,"")),s.push(r),o.push(i),a.push(i),a.push(r);s.sort(e),o.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function vt(e,t,n,r,i,s,o){var a;return e<100&&e>=0?(a=new Date(e+400,t,n,r,i,s,o),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,n,r,i,s,o),a}function yt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Et(e,t,n){var r=7+t-n;return-(7+yt(e,0,r).getUTCDay()-t)%7+r-1}function bt(e,t,n,r,i){var s,o,a=1+7*(t-1)+(7+n-r)%7+Et(e,r,i);return a<=0?o=qe(s=e-1)+a:a>qe(e)?(s=e+1,o=a-qe(e)):(s=e,o=a),{year:s,dayOfYear:o}}function Tt(e,t,n){var r,i,s=Et(e.year(),t,n),o=Math.floor((e.dayOfYear()-s-1)/7)+1;return o<1?r=o+St(i=e.year()-1,t,n):o>St(e.year(),t,n)?(r=o-St(e.year(),t,n),i=e.year()+1):(i=e.year(),r=o),{week:r,year:i}}function St(e,t,n){var r=Et(e,t,n),i=Et(e+1,t,n);return(qe(e)-r+i)/7}function wt(e){return Tt(e,this._week.dow,this._week.doy).week}B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),Re("w",he,we),Re("ww",he,ce),Re("W",he,we),Re("WW",he,ce),De(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=ke(e)}));var Ct={dow:0,doy:6};function Rt(){return this._week.dow}function It(){return this._week.doy}function Nt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Ot(e){var t=Tt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function At(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function kt(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function xt(e,t){return e.slice(t,7).concat(e.slice(0,t))}B("d",0,"do","day"),B("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),B("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),B("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),Re("d",he),Re("e",he),Re("E",he),Re("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Re("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Re("dddd",(function(e,t){return t.weekdaysRegex(e)})),De(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:g(n).invalidWeekday=e})),De(["d","e","E"],(function(e,t,n,r){t[r]=ke(e)}));var Pt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Dt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Lt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Mt=Se,jt=Se,Ut=Se;function Ft(e,t){var n=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?xt(n,this._week.dow):e?n[e.day()]:n}function Bt(e){return!0===e?xt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Vt(e){return!0===e?xt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Gt(e,t,n){var r,i,s,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ke.call(this._weekdaysParse,o))?i:null:"ddd"===t?-1!==(i=Ke.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=Ke.call(this._minWeekdaysParse,o))?i:null:"dddd"===t?-1!==(i=Ke.call(this._weekdaysParse,o))||-1!==(i=Ke.call(this._shortWeekdaysParse,o))||-1!==(i=Ke.call(this._minWeekdaysParse,o))?i:null:"ddd"===t?-1!==(i=Ke.call(this._shortWeekdaysParse,o))||-1!==(i=Ke.call(this._weekdaysParse,o))||-1!==(i=Ke.call(this._minWeekdaysParse,o))?i:null:-1!==(i=Ke.call(this._minWeekdaysParse,o))||-1!==(i=Ke.call(this._weekdaysParse,o))||-1!==(i=Ke.call(this._shortWeekdaysParse,o))?i:null}function Ht(e,t,n){var r,i,s;if(this._weekdaysParseExact)return Gt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Wt(e){if(!this.isValid())return null!=e?this:NaN;var t=Ze(this,"Day");return null!=e?(e=At(e,this.localeData()),this.add(e-t,"d")):t}function zt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function qt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=kt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Kt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Xt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Mt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Yt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Xt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=jt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Jt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Xt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ut),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Xt(){function e(e,t){return t.length-e.length}var t,n,r,i,s,o=[],a=[],c=[],l=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),r=Oe(this.weekdaysMin(n,"")),i=Oe(this.weekdaysShort(n,"")),s=Oe(this.weekdays(n,"")),o.push(r),a.push(i),c.push(s),l.push(r),l.push(i),l.push(s);o.sort(e),a.sort(e),c.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Zt(){return this.hours()%12||12}function Qt(){return this.hours()||24}function $t(e,t){B(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}B("H",["HH",2],0,"hour"),B("h",["hh",2],0,Zt),B("k",["kk",2],0,Qt),B("hmm",0,0,(function(){return""+Zt.apply(this)+L(this.minutes(),2)})),B("hmmss",0,0,(function(){return""+Zt.apply(this)+L(this.minutes(),2)+L(this.seconds(),2)})),B("Hmm",0,0,(function(){return""+this.hours()+L(this.minutes(),2)})),B("Hmmss",0,0,(function(){return""+this.hours()+L(this.minutes(),2)+L(this.seconds(),2)})),$t("a",!0),$t("A",!1),Re("a",en),Re("A",en),Re("H",he,Ce),Re("h",he,we),Re("k",he,we),Re("HH",he,ce),Re("hh",he,ce),Re("kk",he,ce),Re("hmm",pe),Re("hmmss",fe),Re("Hmm",pe),Re("Hmmss",fe),Pe(["H","HH"],Be),Pe(["k","kk"],(function(e,t,n){var r=ke(e);t[Be]=24===r?0:r})),Pe(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Pe(["h","hh"],(function(e,t,n){t[Be]=ke(e),g(n).bigHour=!0})),Pe("hmm",(function(e,t,n){var r=e.length-2;t[Be]=ke(e.substr(0,r)),t[Ve]=ke(e.substr(r)),g(n).bigHour=!0})),Pe("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Be]=ke(e.substr(0,r)),t[Ve]=ke(e.substr(r,2)),t[Ge]=ke(e.substr(i)),g(n).bigHour=!0})),Pe("Hmm",(function(e,t,n){var r=e.length-2;t[Be]=ke(e.substr(0,r)),t[Ve]=ke(e.substr(r))})),Pe("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Be]=ke(e.substr(0,r)),t[Ve]=ke(e.substr(r,2)),t[Ge]=ke(e.substr(i))}));var nn=/[ap]\.?m?\.?/i,rn=Xe("Hours",!0);function sn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var on,an={calendar:P,longDateFormat:z,invalidDate:K,ordinal:J,dayOfMonthOrdinalParse:X,relativeTime:Q,months:rt,monthsShort:it,week:Ct,weekdays:Pt,weekdaysMin:Lt,weekdaysShort:Dt,meridiemParse:nn},cn={},ln={};function dn(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function un(e){return e?e.toLowerCase().replace("_","-"):e}function hn(e){for(var t,n,r,i,s=0;s<e.length;){for(t=(i=un(e[s]).split("-")).length,n=(n=un(e[s+1]))?n.split("-"):null;t>0;){if(r=fn(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&dn(i,n)>=t-1)break;t--}s++}return on}function pn(e){return!(!e||!e.match("^[^/\\\\]*$"))}function fn(t){var n=null;if(void 0===cn[t]&&e&&e.exports&&pn(t))try{n=on._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),mn(n)}catch(r){cn[t]=null}return cn[t]}function mn(e,t){var n;return e&&((n=l(t)?vn(e):gn(e,t))?on=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),on._abbr}function gn(e,t){if(null!==t){var n,r=an;if(t.abbr=e,null!=cn[e])N("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=cn[e]._config;else if(null!=t.parentLocale)if(null!=cn[t.parentLocale])r=cn[t.parentLocale]._config;else{if(null==(n=fn(t.parentLocale)))return ln[t.parentLocale]||(ln[t.parentLocale]=[]),ln[t.parentLocale].push({name:e,config:t}),null;r=n._config}return cn[e]=new x(k(r,t)),ln[e]&&ln[e].forEach((function(e){gn(e.name,e.config)})),mn(e),cn[e]}return delete cn[e],null}function _n(e,t){if(null!=t){var n,r,i=an;null!=cn[e]&&null!=cn[e].parentLocale?cn[e].set(k(cn[e]._config,t)):(null!=(r=fn(e))&&(i=r._config),t=k(i,t),null==r&&(t.abbr=e),(n=new x(t)).parentLocale=cn[e],cn[e]=n),mn(e)}else null!=cn[e]&&(null!=cn[e].parentLocale?(cn[e]=cn[e].parentLocale,e===mn()&&mn(e)):null!=cn[e]&&delete cn[e]);return cn[e]}function vn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return on;if(!s(e)){if(t=fn(e))return t;e=[e]}return hn(e)}function yn(){return R(cn)}function En(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[Ue]<0||n[Ue]>11?Ue:n[Fe]<1||n[Fe]>nt(n[je],n[Ue])?Fe:n[Be]<0||n[Be]>24||24===n[Be]&&(0!==n[Ve]||0!==n[Ge]||0!==n[He])?Be:n[Ve]<0||n[Ve]>59?Ve:n[Ge]<0||n[Ge]>59?Ge:n[He]<0||n[He]>999?He:-1,g(e)._overflowDayOfYear&&(t<je||t>Fe)&&(t=Fe),g(e)._overflowWeeks&&-1===t&&(t=We),g(e)._overflowWeekday&&-1===t&&(t=ze),g(e).overflow=t),e}var bn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sn=/Z|[+-]\d\d(?::?\d\d)?/,wn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Cn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Rn=/^\/?Date\((-?\d+)/i,In=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Nn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function On(e){var t,n,r,i,s,o,a=e._i,c=bn.exec(a)||Tn.exec(a),l=wn.length,d=Cn.length;if(c){for(g(e).iso=!0,t=0,n=l;t<n;t++)if(wn[t][1].exec(c[1])){i=wn[t][0],r=!1!==wn[t][2];break}if(null==i)return void(e._isValid=!1);if(c[3]){for(t=0,n=d;t<n;t++)if(Cn[t][1].exec(c[3])){s=(c[2]||" ")+Cn[t][0];break}if(null==s)return void(e._isValid=!1)}if(!r&&null!=s)return void(e._isValid=!1);if(c[4]){if(!Sn.exec(c[4]))return void(e._isValid=!1);o="Z"}e._f=i+(s||"")+(o||""),Vn(e)}else e._isValid=!1}function An(e,t,n,r,i,s){var o=[kn(e),it.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return s&&o.push(parseInt(s,10)),o}function kn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function xn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Pn(e,t,n){return!e||Dt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(g(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Dn(e,t,n){if(e)return Nn[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function Ln(e){var t,n=In.exec(xn(e._i));if(n){if(t=An(n[4],n[3],n[2],n[5],n[6],n[7]),!Pn(n[1],t,e))return;e._a=t,e._tzm=Dn(n[8],n[9],n[10]),e._d=yt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function Mn(e){var t=Rn.exec(e._i);null===t?(On(e),!1===e._isValid&&(delete e._isValid,Ln(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function jn(e,t,n){return null!=e?e:null!=t?t:n}function Un(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Fn(e){var t,n,r,i,s,o=[];if(!e._d){for(r=Un(e),e._w&&null==e._a[Fe]&&null==e._a[Ue]&&Bn(e),null!=e._dayOfYear&&(s=jn(e._a[je],r[je]),(e._dayOfYear>qe(s)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=yt(s,0,e._dayOfYear),e._a[Ue]=n.getUTCMonth(),e._a[Fe]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Be]&&0===e._a[Ve]&&0===e._a[Ge]&&0===e._a[He]&&(e._nextDay=!0,e._a[Be]=0),e._d=(e._useUTC?yt:vt).apply(null,o),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Be]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(g(e).weekdayMismatch=!0)}}function Bn(e){var t,n,r,i,s,o,a,c,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(s=1,o=4,n=jn(t.GG,e._a[je],Tt(Jn(),1,4).year),r=jn(t.W,1),((i=jn(t.E,1))<1||i>7)&&(c=!0)):(s=e._locale._week.dow,o=e._locale._week.doy,l=Tt(Jn(),s,o),n=jn(t.gg,e._a[je],l.year),r=jn(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(c=!0):null!=t.e?(i=t.e+s,(t.e<0||t.e>6)&&(c=!0)):i=s),r<1||r>St(n,s,o)?g(e)._overflowWeeks=!0:null!=c?g(e)._overflowWeekday=!0:(a=bt(n,r,i,s,o),e._a[je]=a.year,e._dayOfYear=a.dayOfYear)}function Vn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],g(e).empty=!0;var t,n,i,s,o,a,c,l=""+e._i,d=l.length,u=0;for(c=(i=W(e._f,e._locale).match(M)||[]).length,t=0;t<c;t++)s=i[t],(n=(l.match(Ie(s,e))||[])[0])&&((o=l.substr(0,l.indexOf(n))).length>0&&g(e).unusedInput.push(o),l=l.slice(l.indexOf(n)+n.length),u+=n.length),F[s]?(n?g(e).empty=!1:g(e).unusedTokens.push(s),Le(s,n,e)):e._strict&&!n&&g(e).unusedTokens.push(s);g(e).charsLeftOver=d-u,l.length>0&&g(e).unusedInput.push(l),e._a[Be]<=12&&!0===g(e).bigHour&&e._a[Be]>0&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[Be]=Gn(e._locale,e._a[Be],e._meridiem),null!==(a=g(e).era)&&(e._a[je]=e._locale.erasConvertYear(a,e._a[je])),Fn(e),En(e)}else Ln(e);else On(e)}function Gn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function Hn(e){var t,n,r,i,s,o,a=!1,c=e._f.length;if(0===c)return g(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<c;i++)s=0,o=!1,t=b({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Vn(t),_(t)&&(o=!0),s+=g(t).charsLeftOver,s+=10*g(t).unusedTokens.length,g(t).score=s,a?s<r&&(r=s,n=t):(null==r||s<r||o)&&(r=s,n=t,o&&(a=!0));p(e,n||t)}function Wn(e){if(!e._d){var t=re(e._i),n=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Fn(e)}}function zn(e){var t=new T(En(qn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function qn(e){var t=e._i,n=e._f;return e._locale=e._locale||vn(e._l),null===t||void 0===n&&""===t?v({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),S(t)?new T(En(t)):(u(t)?e._d=t:s(n)?Hn(e):n?Vn(e):Kn(e),_(e)||(e._d=null),e))}function Kn(e){var t=e._i;l(t)?e._d=new Date(r.now()):u(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Mn(e):s(t)?(e._a=h(t.slice(0),(function(e){return parseInt(e,10)})),Fn(e)):o(t)?Wn(e):d(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Yn(e,t,n,r,i){var a={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(o(e)&&c(e)||s(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=r,zn(a)}function Jn(e,t,n,r){return Yn(e,t,n,r,!1)}r.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Xn=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Jn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()})),Zn=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Jn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:v()}));function Qn(e,t){var n,r;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Jn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function $n(){return Qn("isBefore",[].slice.call(arguments,0))}function er(){return Qn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1,i=nr.length;for(t in e)if(a(e,t)&&(-1===Ke.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==ke(e[nr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function sr(){return Nr(NaN)}function or(e){var t=re(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||t.isoWeek||0,o=t.day||0,a=t.hour||0,c=t.minute||0,l=t.second||0,d=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+d+1e3*l+6e4*c+1e3*a*60*60,this._days=+o+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=vn(),this._bubble()}function ar(e){return e instanceof or}function cr(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function lr(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&ke(e[r])!==ke(t[r]))&&o++;return o+s}function dr(e,t){B(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+L(~~(e/60),2)+t+L(~~e%60,2)}))}dr("Z",":"),dr("ZZ",""),Re("Z",be),Re("ZZ",be),Pe(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=hr(be,e)}));var ur=/([\+\-]|\d\d)/gi;function hr(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(ur)||["-",0,0])[1]+ke(n[2]))?0:"+"===n[0]?r:-r}function pr(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(S(e)||u(e)?e.valueOf():Jn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Jn(e).local()}function fr(e){return-Math.round(e._d.getTimezoneOffset())}function mr(e,t,n){var i,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=hr(be,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=fr(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),s!==e&&(!t||this._changeInProgress?Pr(this,Nr(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:fr(this)}function gr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function _r(e){return this.utcOffset(0,e)}function vr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(fr(this),"m")),this}function yr(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=hr(Ee,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Er(e){return!!this.isValid()&&(e=e?Jn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function br(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Tr(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,t={};return b(t,this),(t=qn(t))._a?(e=t._isUTC?f(t._a):Jn(t._a),this._isDSTShifted=this.isValid()&&lr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Sr(){return!!this.isValid()&&!this._isUTC}function wr(){return!!this.isValid()&&this._isUTC}function Cr(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Rr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ir=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Nr(e,t){var n,r,i,s=e,o=null;return ar(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:d(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(o=Rr.exec(e))?(n="-"===o[1]?-1:1,s={y:0,d:ke(o[Fe])*n,h:ke(o[Be])*n,m:ke(o[Ve])*n,s:ke(o[Ge])*n,ms:ke(cr(1e3*o[He]))*n}):(o=Ir.exec(e))?(n="-"===o[1]?-1:1,s={y:Or(o[2],n),M:Or(o[3],n),w:Or(o[4],n),d:Or(o[5],n),h:Or(o[6],n),m:Or(o[7],n),s:Or(o[8],n)}):null==s?s={}:"object"===typeof s&&("from"in s||"to"in s)&&(i=kr(Jn(s.from),Jn(s.to)),(s={}).ms=i.milliseconds,s.M=i.months),r=new or(s),ar(e)&&a(e,"_locale")&&(r._locale=e._locale),ar(e)&&a(e,"_isValid")&&(r._isValid=e._isValid),r}function Or(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Ar(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function kr(e,t){var n;return e.isValid()&&t.isValid()?(t=pr(t,e),e.isBefore(t)?n=Ar(e,t):((n=Ar(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function xr(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(N(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Pr(this,Nr(n,r),e),this}}function Pr(e,t,n,i){var s=t._milliseconds,o=cr(t._days),a=cr(t._months);e.isValid()&&(i=null==i||i,a&&ht(e,Ze(e,"Month")+a*n),o&&Qe(e,"Date",Ze(e,"Date")+o*n),s&&e._d.setTime(e._d.valueOf()+s*n),i&&r.updateOffset(e,o||a))}Nr.fn=or.prototype,Nr.invalid=sr;var Dr=xr(1,"add"),Lr=xr(-1,"subtract");function Mr(e){return"string"===typeof e||e instanceof String}function jr(e){return S(e)||u(e)||Mr(e)||d(e)||Fr(e)||Ur(e)||null===e||void 0===e}function Ur(e){var t,n,r=o(e)&&!c(e),i=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],l=s.length;for(t=0;t<l;t+=1)n=s[t],i=i||a(e,n);return r&&i}function Fr(e){var t=s(e),n=!1;return t&&(n=0===e.filter((function(t){return!d(t)&&Mr(e)})).length),t&&n}function Br(e){var t,n,r=o(e)&&!c(e),i=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<s.length;t+=1)n=s[t],i=i||a(e,n);return r&&i}function Vr(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Gr(e,t){1===arguments.length&&(arguments[0]?jr(arguments[0])?(e=arguments[0],t=void 0):Br(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Jn(),i=pr(n,this).startOf("day"),s=r.calendarFormat(this,i)||"sameElse",o=t&&(O(t[s])?t[s].call(this,n):t[s]);return this.format(o||this.localeData().calendar(s,this,Jn(n)))}function Hr(){return new T(this)}function Wr(e,t){var n=S(e)?e:Jn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function zr(e,t){var n=S(e)?e:Jn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function qr(e,t,n,r){var i=S(e)?e:Jn(e),s=S(t)?t:Jn(t);return!!(this.isValid()&&i.isValid()&&s.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(s,n):!this.isAfter(s,n))}function Kr(e,t){var n,r=S(e)?e:Jn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Yr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Jr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Xr(e,t,n){var r,i,s;if(!this.isValid())return NaN;if(!(r=pr(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=ne(t)){case"year":s=Zr(this,r)/12;break;case"month":s=Zr(this,r);break;case"quarter":s=Zr(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:Ae(s)}function Zr(e,t){if(e.date()<t.date())return-Zr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Qr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function $r(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,i="moment",s="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",s="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=s+'[")]',this.format(e+t+n+r)}function ti(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=H(this,e);return this.localeData().postformat(t)}function ni(e,t){return this.isValid()&&(S(e)&&e.isValid()||Jn(e).isValid())?Nr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ri(e){return this.from(Jn(),e)}function ii(e,t){return this.isValid()&&(S(e)&&e.isValid()||Jn(e).isValid())?Nr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function si(e){return this.to(Jn(),e)}function oi(e){var t;return void 0===e?this._locale._abbr:(null!=(t=vn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ai=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ci(){return this._locale}var li=1e3,di=60*li,ui=60*di,hi=3506328*ui;function pi(e,t){return(e%t+t)%t}function fi(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-hi:new Date(e,t,n).valueOf()}function mi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-hi:Date.UTC(e,t,n)}function gi(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:fi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=pi(t+(this._isUTC?0:this.utcOffset()*di),ui);break;case"minute":t=this._d.valueOf(),t-=pi(t,di);break;case"second":t=this._d.valueOf(),t-=pi(t,li)}return this._d.setTime(t),r.updateOffset(this,!0),this}function _i(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:fi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=ui-pi(t+(this._isUTC?0:this.utcOffset()*di),ui)-1;break;case"minute":t=this._d.valueOf(),t+=di-pi(t,di)-1;break;case"second":t=this._d.valueOf(),t+=li-pi(t,li)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function vi(){return this._d.valueOf()-6e4*(this._offset||0)}function yi(){return Math.floor(this.valueOf()/1e3)}function Ei(){return new Date(this.valueOf())}function bi(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ti(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Si(){return this.isValid()?this.toISOString():null}function wi(){return _(this)}function Ci(){return p({},g(this))}function Ri(){return g(this).overflow}function Ii(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ni(e,t){var n,i,s,o=this._eras||vn("en")._eras;for(n=0,i=o.length;n<i;++n)switch("string"===typeof o[n].since&&(s=r(o[n].since).startOf("day"),o[n].since=s.valueOf()),typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":s=r(o[n].until).startOf("day").valueOf(),o[n].until=s.valueOf()}return o}function Oi(e,t,n){var r,i,s,o,a,c=this.eras();for(e=e.toUpperCase(),r=0,i=c.length;r<i;++r)if(s=c[r].name.toUpperCase(),o=c[r].abbr.toUpperCase(),a=c[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return c[r];break;case"NNNN":if(s===e)return c[r];break;case"NNNNN":if(a===e)return c[r]}else if([s,o,a].indexOf(e)>=0)return c[r]}function Ai(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function ki(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function xi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Pi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Di(){var e,t,n,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=s[e].since<=s[e].until?1:-1,i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return(this.year()-r(s[e].since).year())*n+s[e].offset;return this.year()}function Li(e){return a(this,"_erasNameRegex")||Gi.call(this),e?this._erasNameRegex:this._erasRegex}function Mi(e){return a(this,"_erasAbbrRegex")||Gi.call(this),e?this._erasAbbrRegex:this._erasRegex}function ji(e){return a(this,"_erasNarrowRegex")||Gi.call(this),e?this._erasNarrowRegex:this._erasRegex}function Ui(e,t){return t.erasAbbrRegex(e)}function Fi(e,t){return t.erasNameRegex(e)}function Bi(e,t){return t.erasNarrowRegex(e)}function Vi(e,t){return t._eraYearOrdinalRegex||ve}function Gi(){var e,t,n,r,i,s=[],o=[],a=[],c=[],l=this.eras();for(e=0,t=l.length;e<t;++e)n=Oe(l[e].name),r=Oe(l[e].abbr),i=Oe(l[e].narrow),o.push(n),s.push(r),a.push(i),c.push(n),c.push(r),c.push(i);this._erasRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+o.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function Hi(e,t){B(0,[e,e.length],0,t)}function Wi(e){return Xi.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function zi(e){return Xi.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function qi(){return St(this.year(),1,4)}function Ki(){return St(this.isoWeekYear(),1,4)}function Yi(){var e=this.localeData()._week;return St(this.year(),e.dow,e.doy)}function Ji(){var e=this.localeData()._week;return St(this.weekYear(),e.dow,e.doy)}function Xi(e,t,n,r,i){var s;return null==e?Tt(this,r,i).year:(t>(s=St(e,r,i))&&(t=s),Zi.call(this,e,t,n,r,i))}function Zi(e,t,n,r,i){var s=bt(e,t,n,r,i),o=yt(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Qi(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}B("N",0,0,"eraAbbr"),B("NN",0,0,"eraAbbr"),B("NNN",0,0,"eraAbbr"),B("NNNN",0,0,"eraName"),B("NNNNN",0,0,"eraNarrow"),B("y",["y",1],"yo","eraYear"),B("y",["yy",2],0,"eraYear"),B("y",["yyy",3],0,"eraYear"),B("y",["yyyy",4],0,"eraYear"),Re("N",Ui),Re("NN",Ui),Re("NNN",Ui),Re("NNNN",Fi),Re("NNNNN",Bi),Pe(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?g(n).era=i:g(n).invalidEra=e})),Re("y",ve),Re("yy",ve),Re("yyy",ve),Re("yyyy",ve),Re("yo",Vi),Pe(["y","yy","yyy","yyyy"],je),Pe(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[je]=n._locale.eraYearOrdinalParse(e,i):t[je]=parseInt(e,10)})),B(0,["gg",2],0,(function(){return this.weekYear()%100})),B(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Hi("gggg","weekYear"),Hi("ggggg","weekYear"),Hi("GGGG","isoWeekYear"),Hi("GGGGG","isoWeekYear"),Re("G",ye),Re("g",ye),Re("GG",he,ce),Re("gg",he,ce),Re("GGGG",ge,de),Re("gggg",ge,de),Re("GGGGG",_e,ue),Re("ggggg",_e,ue),De(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=ke(e)})),De(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),B("Q",0,"Qo","quarter"),Re("Q",ae),Pe("Q",(function(e,t){t[Ue]=3*(ke(e)-1)})),B("D",["DD",2],"Do","date"),Re("D",he,we),Re("DD",he,ce),Re("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Pe(["D","DD"],Fe),Pe("Do",(function(e,t){t[Fe]=ke(e.match(he)[0])}));var $i=Xe("Date",!0);function es(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}B("DDD",["DDDD",3],"DDDo","dayOfYear"),Re("DDD",me),Re("DDDD",le),Pe(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=ke(e)})),B("m",["mm",2],0,"minute"),Re("m",he,Ce),Re("mm",he,ce),Pe(["m","mm"],Ve);var ts=Xe("Minutes",!1);B("s",["ss",2],0,"second"),Re("s",he,Ce),Re("ss",he,ce),Pe(["s","ss"],Ge);var ns,rs,is=Xe("Seconds",!1);for(B("S",0,0,(function(){return~~(this.millisecond()/100)})),B(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),B(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),B(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),B(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),B(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),B(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),Re("S",me,ae),Re("SS",me,ce),Re("SSS",me,le),ns="SSSS";ns.length<=9;ns+="S")Re(ns,ve);function ss(e,t){t[He]=ke(1e3*("0."+e))}for(ns="S";ns.length<=9;ns+="S")Pe(ns,ss);function os(){return this._isUTC?"UTC":""}function as(){return this._isUTC?"Coordinated Universal Time":""}rs=Xe("Milliseconds",!1),B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var cs=T.prototype;function ls(e){return Jn(1e3*e)}function ds(){return Jn.apply(null,arguments).parseZone()}function us(e){return e}cs.add=Dr,cs.calendar=Gr,cs.clone=Hr,cs.diff=Xr,cs.endOf=_i,cs.format=ti,cs.from=ni,cs.fromNow=ri,cs.to=ii,cs.toNow=si,cs.get=$e,cs.invalidAt=Ri,cs.isAfter=Wr,cs.isBefore=zr,cs.isBetween=qr,cs.isSame=Kr,cs.isSameOrAfter=Yr,cs.isSameOrBefore=Jr,cs.isValid=wi,cs.lang=ai,cs.locale=oi,cs.localeData=ci,cs.max=Zn,cs.min=Xn,cs.parsingFlags=Ci,cs.set=et,cs.startOf=gi,cs.subtract=Lr,cs.toArray=bi,cs.toObject=Ti,cs.toDate=Ei,cs.toISOString=$r,cs.inspect=ei,"undefined"!==typeof Symbol&&null!=Symbol.for&&(cs[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),cs.toJSON=Si,cs.toString=Qr,cs.unix=yi,cs.valueOf=vi,cs.creationData=Ii,cs.eraName=ki,cs.eraNarrow=xi,cs.eraAbbr=Pi,cs.eraYear=Di,cs.year=Ye,cs.isLeapYear=Je,cs.weekYear=Wi,cs.isoWeekYear=zi,cs.quarter=cs.quarters=Qi,cs.month=pt,cs.daysInMonth=ft,cs.week=cs.weeks=Nt,cs.isoWeek=cs.isoWeeks=Ot,cs.weeksInYear=Yi,cs.weeksInWeekYear=Ji,cs.isoWeeksInYear=qi,cs.isoWeeksInISOWeekYear=Ki,cs.date=$i,cs.day=cs.days=Wt,cs.weekday=zt,cs.isoWeekday=qt,cs.dayOfYear=es,cs.hour=cs.hours=rn,cs.minute=cs.minutes=ts,cs.second=cs.seconds=is,cs.millisecond=cs.milliseconds=rs,cs.utcOffset=mr,cs.utc=_r,cs.local=vr,cs.parseZone=yr,cs.hasAlignedHourOffset=Er,cs.isDST=br,cs.isLocal=Sr,cs.isUtcOffset=wr,cs.isUtc=Cr,cs.isUTC=Cr,cs.zoneAbbr=os,cs.zoneName=as,cs.dates=C("dates accessor is deprecated. Use date instead.",$i),cs.months=C("months accessor is deprecated. Use month instead",pt),cs.years=C("years accessor is deprecated. Use year instead",Ye),cs.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gr),cs.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Tr);var hs=x.prototype;function ps(e,t,n,r){var i=vn(),s=f().set(r,t);return i[n](s,e)}function fs(e,t,n){if(d(e)&&(t=e,e=void 0),e=e||"",null!=t)return ps(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=ps(e,r,n,"month");return i}function ms(e,t,n,r){"boolean"===typeof e?(d(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,d(t)&&(n=t,t=void 0),t=t||"");var i,s=vn(),o=e?s._week.dow:0,a=[];if(null!=n)return ps(t,(n+o)%7,r,"day");for(i=0;i<7;i++)a[i]=ps(t,(i+o)%7,r,"day");return a}function gs(e,t){return fs(e,t,"months")}function _s(e,t){return fs(e,t,"monthsShort")}function vs(e,t,n){return ms(e,t,n,"weekdays")}function ys(e,t,n){return ms(e,t,n,"weekdaysShort")}function Es(e,t,n){return ms(e,t,n,"weekdaysMin")}hs.calendar=D,hs.longDateFormat=q,hs.invalidDate=Y,hs.ordinal=Z,hs.preparse=us,hs.postformat=us,hs.relativeTime=$,hs.pastFuture=ee,hs.set=A,hs.eras=Ni,hs.erasParse=Oi,hs.erasConvertYear=Ai,hs.erasAbbrRegex=Mi,hs.erasNameRegex=Li,hs.erasNarrowRegex=ji,hs.months=ct,hs.monthsShort=lt,hs.monthsParse=ut,hs.monthsRegex=gt,hs.monthsShortRegex=mt,hs.week=wt,hs.firstDayOfYear=It,hs.firstDayOfWeek=Rt,hs.weekdays=Ft,hs.weekdaysMin=Vt,hs.weekdaysShort=Bt,hs.weekdaysParse=Ht,hs.weekdaysRegex=Kt,hs.weekdaysShortRegex=Yt,hs.weekdaysMinRegex=Jt,hs.isPM=tn,hs.meridiem=sn,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===ke(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=C("moment.lang is deprecated. Use moment.locale instead.",mn),r.langData=C("moment.langData is deprecated. Use moment.localeData instead.",vn);var bs=Math.abs;function Ts(){var e=this._data;return this._milliseconds=bs(this._milliseconds),this._days=bs(this._days),this._months=bs(this._months),e.milliseconds=bs(e.milliseconds),e.seconds=bs(e.seconds),e.minutes=bs(e.minutes),e.hours=bs(e.hours),e.months=bs(e.months),e.years=bs(e.years),this}function Ss(e,t,n,r){var i=Nr(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function ws(e,t){return Ss(this,e,t,1)}function Cs(e,t){return Ss(this,e,t,-1)}function Rs(e){return e<0?Math.floor(e):Math.ceil(e)}function Is(){var e,t,n,r,i,s=this._milliseconds,o=this._days,a=this._months,c=this._data;return s>=0&&o>=0&&a>=0||s<=0&&o<=0&&a<=0||(s+=864e5*Rs(Os(a)+o),o=0,a=0),c.milliseconds=s%1e3,e=Ae(s/1e3),c.seconds=e%60,t=Ae(e/60),c.minutes=t%60,n=Ae(t/60),c.hours=n%24,o+=Ae(n/24),a+=i=Ae(Ns(o)),o-=Rs(Os(i)),r=Ae(a/12),a%=12,c.days=o,c.months=a,c.years=r,this}function Ns(e){return 4800*e/146097}function Os(e){return 146097*e/4800}function As(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Ns(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Os(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function ks(e){return function(){return this.as(e)}}var xs=ks("ms"),Ps=ks("s"),Ds=ks("m"),Ls=ks("h"),Ms=ks("d"),js=ks("w"),Us=ks("M"),Fs=ks("Q"),Bs=ks("y"),Vs=xs;function Gs(){return Nr(this)}function Hs(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function Ws(e){return function(){return this.isValid()?this._data[e]:NaN}}var zs=Ws("milliseconds"),qs=Ws("seconds"),Ks=Ws("minutes"),Ys=Ws("hours"),Js=Ws("days"),Xs=Ws("months"),Zs=Ws("years");function Qs(){return Ae(this.days()/7)}var $s=Math.round,eo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function to(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function no(e,t,n,r){var i=Nr(e).abs(),s=$s(i.as("s")),o=$s(i.as("m")),a=$s(i.as("h")),c=$s(i.as("d")),l=$s(i.as("M")),d=$s(i.as("w")),u=$s(i.as("y")),h=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||o<=1&&["m"]||o<n.m&&["mm",o]||a<=1&&["h"]||a<n.h&&["hh",a]||c<=1&&["d"]||c<n.d&&["dd",c];return null!=n.w&&(h=h||d<=1&&["w"]||d<n.w&&["ww",d]),(h=h||l<=1&&["M"]||l<n.M&&["MM",l]||u<=1&&["y"]||["yy",u])[2]=t,h[3]=+e>0,h[4]=r,to.apply(null,h)}function ro(e){return void 0===e?$s:"function"===typeof e&&($s=e,!0)}function io(e,t){return void 0!==eo[e]&&(void 0===t?eo[e]:(eo[e]=t,"s"===e&&(eo.ss=t-1),!0))}function so(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,s=eo;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(i=e),"object"===typeof t&&(s=Object.assign({},eo,t),null!=t.s&&null==t.ss&&(s.ss=t.s-1)),r=no(this,!i,s,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var oo=Math.abs;function ao(e){return(e>0)-(e<0)||+e}function co(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,s,o,a,c=oo(this._milliseconds)/1e3,l=oo(this._days),d=oo(this._months),u=this.asSeconds();return u?(e=Ae(c/60),t=Ae(e/60),c%=60,e%=60,n=Ae(d/12),d%=12,r=c?c.toFixed(3).replace(/\.?0+$/,""):"",i=u<0?"-":"",s=ao(this._months)!==ao(u)?"-":"",o=ao(this._days)!==ao(u)?"-":"",a=ao(this._milliseconds)!==ao(u)?"-":"",i+"P"+(n?s+n+"Y":"")+(d?s+d+"M":"")+(l?o+l+"D":"")+(t||e||c?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(c?a+r+"S":"")):"P0D"}var lo=or.prototype;return lo.isValid=ir,lo.abs=Ts,lo.add=ws,lo.subtract=Cs,lo.as=As,lo.asMilliseconds=xs,lo.asSeconds=Ps,lo.asMinutes=Ds,lo.asHours=Ls,lo.asDays=Ms,lo.asWeeks=js,lo.asMonths=Us,lo.asQuarters=Fs,lo.asYears=Bs,lo.valueOf=Vs,lo._bubble=Is,lo.clone=Gs,lo.get=Hs,lo.milliseconds=zs,lo.seconds=qs,lo.minutes=Ks,lo.hours=Ys,lo.days=Js,lo.weeks=Qs,lo.months=Xs,lo.years=Zs,lo.humanize=so,lo.toISOString=co,lo.toString=co,lo.toJSON=co,lo.locale=oi,lo.localeData=ci,lo.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",co),lo.lang=ai,B("X",0,0,"unix"),B("x",0,0,"valueOf"),Re("x",ye),Re("X",Te),Pe("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Pe("x",(function(e,t,n){n._d=new Date(ke(e))})),r.version="2.30.1",i(Jn),r.fn=cs,r.min=$n,r.max=er,r.now=tr,r.utc=f,r.unix=ls,r.months=gs,r.isDate=u,r.locale=mn,r.invalid=v,r.duration=Nr,r.isMoment=S,r.weekdays=vs,r.parseZone=ds,r.localeData=vn,r.isDuration=ar,r.monthsShort=_s,r.weekdaysMin=Es,r.defineLocale=gn,r.updateLocale=_n,r.locales=yn,r.weekdaysShort=ys,r.normalizeUnits=ne,r.relativeTimeRounding=ro,r.relativeTimeThreshold=io,r.calendarFormat=Vr,r.prototype=cs,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},9197:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(3534),s=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},3534:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,s,o){var a=i||"<<anonymous>>",c=o||r;if(null==n[r])return t?new Error("Required "+s+" `"+c+"` was not specified in `"+a+"`."):null;for(var l=arguments.length,d=Array(l>6?l-6:0),u=6;u<l;u++)d[u-6]=arguments[u];return e.apply(void 0,[n,r,a,s,c].concat(d))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5429:(e,t,n)=>{e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports=n(5043)},function(e,t){e.exports=n(6178)},function(e,t){e.exports=n(7950)},function(e,t,n){e.exports=n(5)()},function(e,t,n){e.exports=n(7)},function(e,t,n){"use strict";var r=n(6);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";n.r(t);var r=n(3),i=n.n(r),s=n(1),o=n.n(s),a=n(0),c=n.n(a);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e){var t=e.onClickPrev,n=e.onClickSwitch,r=e.onClickNext,i=e.switchContent,s=e.switchColSpan,o=e.switchProps;return c.a.createElement("tr",null,c.a.createElement("th",{className:"rdtPrev",onClick:t},c.a.createElement("span",null,"\u2039")),c.a.createElement("th",l({className:"rdtSwitch",colSpan:s,onClick:n},o),i),c.a.createElement("th",{className:"rdtNext",onClick:r},c.a.createElement("span",null,"\u203a")))}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,n)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(i,e);var t,n,r=f(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return _(m(e=r.call.apply(r,[this].concat(n))),"_setDate",(function(t){e.props.updateDate(t)})),e}return t=i,(n=[{key:"render",value:function(){return c.a.createElement("div",{className:"rdtDays"},c.a.createElement("table",null,c.a.createElement("thead",null,this.renderNavigation(),this.renderDayHeaders()),c.a.createElement("tbody",null,this.renderDays()),this.renderFooter()))}},{key:"renderNavigation",value:function(){var e=this,t=this.props.viewDate,n=t.localeData();return c.a.createElement(d,{onClickPrev:function(){return e.props.navigate(-1,"months")},onClickSwitch:function(){return e.props.showView("months")},onClickNext:function(){return e.props.navigate(1,"months")},switchContent:n.months(t)+" "+t.year(),switchColSpan:5,switchProps:{"data-value":this.props.viewDate.month()}})}},{key:"renderDayHeaders",value:function(){var e=function(e){var t=e.firstDayOfWeek(),n=[],r=0;return e._weekdaysMin.forEach((function(e){n[(7+r++-t)%7]=e})),n}(this.props.viewDate.localeData()).map((function(e,t){return c.a.createElement("th",{key:e+t,className:"dow"},e)}));return c.a.createElement("tr",null,e)}},{key:"renderDays",value:function(){var e=this.props.viewDate,t=e.clone().startOf("month"),n=e.clone().endOf("month"),r=[[],[],[],[],[],[]],i=e.clone().subtract(1,"months");i.date(i.daysInMonth()).startOf("week");for(var s=i.clone().add(42,"d"),o=0;i.isBefore(s);)y(r,o++).push(this.renderDay(i,t,n)),i.add(1,"d");return r.map((function(e,t){return c.a.createElement("tr",{key:"".concat(s.month(),"_").concat(t)},e)}))}},{key:"renderDay",value:function(e,t,n){var r=this.props.selectedDate,i={key:e.format("M_D"),"data-value":e.date(),"data-month":e.month(),"data-year":e.year()},s="rdtDay";return e.isBefore(t)?s+=" rdtOld":e.isAfter(n)&&(s+=" rdtNew"),r&&e.isSame(r,"day")&&(s+=" rdtActive"),e.isSame(this.props.moment(),"day")&&(s+=" rdtToday"),this.props.isValidDate(e)?i.onClick=this._setDate:s+=" rdtDisabled",i.className=s,this.props.renderDay(i,e.clone(),r&&r.clone())}},{key:"renderFooter",value:function(){var e=this;if(this.props.timeFormat){var t=this.props.viewDate;return c.a.createElement("tfoot",null,c.a.createElement("tr",null,c.a.createElement("td",{onClick:function(){return e.props.showView("time")},colSpan:7,className:"rdtTimeToggle"},t.format(this.props.timeFormat))))}}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(c.a.Component);function y(e,t){return e[Math.floor(t/7)]}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var i=C(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,n)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}_(v,"defaultProps",{isValidDate:function(){return!0},renderDay:function(e,t){return c.a.createElement("td",e,t.date())}});var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(i,e);var t,n,r=S(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(w(e=r.call.apply(r,[this].concat(n))),"_updateSelectedMonth",(function(t){e.props.updateDate(t)})),e}return t=i,(n=[{key:"render",value:function(){return c.a.createElement("div",{className:"rdtMonths"},c.a.createElement("table",null,c.a.createElement("thead",null,this.renderNavigation())),c.a.createElement("table",null,c.a.createElement("tbody",null,this.renderMonths())))}},{key:"renderNavigation",value:function(){var e=this,t=this.props.viewDate.year();return c.a.createElement(d,{onClickPrev:function(){return e.props.navigate(-1,"years")},onClickSwitch:function(){return e.props.showView("years")},onClickNext:function(){return e.props.navigate(1,"years")},switchContent:t,switchColSpan:"2"})}},{key:"renderMonths",value:function(){for(var e=[[],[],[]],t=0;t<12;t++)I(e,t).push(this.renderMonth(t));return e.map((function(e,t){return c.a.createElement("tr",{key:t},e)}))}},{key:"renderMonth",value:function(e){var t,n=this.props.selectedDate,r="rdtMonth";this.isDisabledMonth(e)?r+=" rdtDisabled":t=this._updateSelectedMonth,n&&n.year()===this.props.viewDate.year()&&n.month()===e&&(r+=" rdtActive");var i={key:e,className:r,"data-value":e,onClick:t};return this.props.renderMonth?this.props.renderMonth(i,e,this.props.viewDate.year(),this.props.selectedDate&&this.props.selectedDate.clone()):c.a.createElement("td",i,this.getMonthText(e))}},{key:"isDisabledMonth",value:function(e){var t=this.props.isValidDate;if(!t)return!1;for(var n=this.props.viewDate.clone().set({month:e}),r=n.endOf("month").date()+1;r-- >1;)if(t(n.date(r)))return!1;return!0}},{key:"getMonthText",value:function(e){var t,n=this.props.viewDate;return(t=n.localeData().monthsShort(n.month(e)).substring(0,3)).charAt(0).toUpperCase()+t.slice(1)}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(c.a.Component);function I(e,t){return t<4?e[0]:t<8?e[1]:e[2]}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,n)}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(i,e);var t,n,r=k(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return D(x(e=r.call.apply(r,[this].concat(n))),"disabledYearsCache",{}),D(x(e),"_updateSelectedYear",(function(t){e.props.updateDate(t)})),e}return t=i,(n=[{key:"render",value:function(){return c.a.createElement("div",{className:"rdtYears"},c.a.createElement("table",null,c.a.createElement("thead",null,this.renderNavigation())),c.a.createElement("table",null,c.a.createElement("tbody",null,this.renderYears())))}},{key:"renderNavigation",value:function(){var e=this,t=this.getViewYear();return c.a.createElement(d,{onClickPrev:function(){return e.props.navigate(-10,"years")},onClickSwitch:function(){return e.props.showView("years")},onClickNext:function(){return e.props.navigate(10,"years")},switchContent:"".concat(t,"-").concat(t+9)})}},{key:"renderYears",value:function(){for(var e=this.getViewYear(),t=[[],[],[]],n=e-1;n<e+11;n++)M(t,n-e).push(this.renderYear(n));return t.map((function(e,t){return c.a.createElement("tr",{key:t},e)}))}},{key:"renderYear",value:function(e){var t,n=this.getSelectedYear(),r="rdtYear";this.isDisabledYear(e)?r+=" rdtDisabled":t=this._updateSelectedYear,n===e&&(r+=" rdtActive");var i={key:e,className:r,"data-value":e,onClick:t};return this.props.renderYear(i,e,this.props.selectedDate&&this.props.selectedDate.clone())}},{key:"getViewYear",value:function(){return 10*parseInt(this.props.viewDate.year()/10,10)}},{key:"getSelectedYear",value:function(){return this.props.selectedDate&&this.props.selectedDate.year()}},{key:"isDisabledYear",value:function(e){var t=this.disabledYearsCache;if(void 0!==t[e])return t[e];var n=this.props.isValidDate;if(!n)return!1;for(var r=this.props.viewDate.clone().set({year:e}),i=r.endOf("year").dayOfYear()+1;i-- >1;)if(n(r.dayOfYear(i)))return t[e]=!1,!1;return t[e]=!0,!0}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(c.a.Component);function M(e,t){return t<3?e[0]:t<7?e[1]:e[2]}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var i=V(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}D(L,"defaultProps",{renderYear:function(e,t){return c.a.createElement("td",e,t)}});var z={hours:{min:0,max:23,step:1},minutes:{min:0,max:59,step:1},seconds:{min:0,max:59,step:1},milliseconds:{min:0,max:999,step:1}},q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(i,e);var t,n,r=B(i);function i(e){var t,n,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).constraints=(n=e.timeConstraints,s={},Object.keys(z).forEach((function(e){s[e]=H(H({},z[e]),n[e]||{})})),s),t.state=t.getTimeParts(e.selectedDate||e.viewDate),t}return t=i,(n=[{key:"render",value:function(){var e=this,t=[],n=this.state;return this.getCounters().forEach((function(r,i){i&&"ampm"!==r&&t.push(c.a.createElement("div",{key:"sep".concat(i),className:"rdtCounterSeparator"},":")),t.push(e.renderCounter(r,n[r]))})),c.a.createElement("div",{className:"rdtTime"},c.a.createElement("table",null,this.renderHeader(),c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("div",{className:"rdtCounters"},t))))))}},{key:"renderCounter",value:function(e,t){var n=this;return"hours"===e&&this.isAMPM()&&0==(t=(t-1)%12+1)&&(t=12),"ampm"===e&&(t=-1!==this.props.timeFormat.indexOf(" A")?this.props.viewDate.format("A"):this.props.viewDate.format("a")),c.a.createElement("div",{key:e,className:"rdtCounter"},c.a.createElement("span",{className:"rdtBtn",onMouseDown:function(t){return n.onStartClicking(t,"increase",e)}},"\u25b2"),c.a.createElement("div",{className:"rdtCount"},t),c.a.createElement("span",{className:"rdtBtn",onMouseDown:function(t){return n.onStartClicking(t,"decrease",e)}},"\u25bc"))}},{key:"renderHeader",value:function(){var e=this;if(this.props.dateFormat){var t=this.props.selectedDate||this.props.viewDate;return c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",{className:"rdtSwitch",colSpan:"4",onClick:function(){return e.props.showView("days")}},t.format(this.props.dateFormat))))}}},{key:"onStartClicking",value:function(e,t,n){var r=this;if(!e||!e.button||0===e.button){if("ampm"===n)return this.toggleDayPart();var i={},s=document.body;i[n]=this[t](n),this.setState(i),this.timer=setTimeout((function(){r.increaseTimer=setInterval((function(){i[n]=r[t](n),r.setState(i)}),70)}),500),this.mouseUpListener=function(){clearTimeout(r.timer),clearInterval(r.increaseTimer),r.props.setTime(n,parseInt(r.state[n],10)),s.removeEventListener("mouseup",r.mouseUpListener),s.removeEventListener("touchend",r.mouseUpListener)},s.addEventListener("mouseup",this.mouseUpListener),s.addEventListener("touchend",this.mouseUpListener)}}},{key:"toggleDayPart",value:function(){var e=parseInt(this.state.hours,10);e>=12?e-=12:e+=12,this.props.setTime("hours",e)}},{key:"increase",value:function(e){var t=this.constraints[e],n=parseInt(this.state[e],10)+t.step;return n>t.max&&(n=t.min+(n-(t.max+1))),K(e,n)}},{key:"decrease",value:function(e){var t=this.constraints[e],n=parseInt(this.state[e],10)-t.step;return n<t.min&&(n=t.max+1-(t.min-n)),K(e,n)}},{key:"getCounters",value:function(){var e=[],t=this.props.timeFormat;return-1!==t.toLowerCase().indexOf("h")&&(e.push("hours"),-1!==t.indexOf("m")&&(e.push("minutes"),-1!==t.indexOf("s")&&(e.push("seconds"),-1!==t.indexOf("S")&&e.push("milliseconds")))),this.isAMPM()&&e.push("ampm"),e}},{key:"isAMPM",value:function(){return-1!==this.props.timeFormat.toLowerCase().indexOf(" a")}},{key:"getTimeParts",value:function(e){var t=e.hours();return{hours:K("hours",t),minutes:K("minutes",e.minutes()),seconds:K("seconds",e.seconds()),milliseconds:K("milliseconds",e.milliseconds()),ampm:t<12?"am":"pm"}}},{key:"componentDidUpdate",value:function(e){this.props.selectedDate?this.props.selectedDate!==e.selectedDate&&this.setState(this.getTimeParts(this.props.selectedDate)):e.viewDate!==this.props.viewDate&&this.setState(this.getTimeParts(this.props.viewDate))}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(c.a.Component);function K(e,t){for(var n={hours:1,minutes:2,seconds:2,milliseconds:3},r=t+"";r.length<n[e];)r="0"+r;return r}var Y=n(2);function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t,n){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n))}var Q,$,ee=(void 0===Q&&(Q=0),function(){return++Q}),te={},ne={},re=["touchstart","touchmove"];function ie(e,t){var n=null;return-1!==re.indexOf(t)&&$&&(n={passive:!e.props.preventDefault}),n}function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}function he(e,t){return(he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var i=me(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fe(e)}(this,n)}}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return we}));var _e="years",ve="months",ye="days",Ee="time",be=i.a,Te=function(){},Se=be.oneOfType([be.instanceOf(o.a),be.instanceOf(Date),be.string]),we=function(e){ue(n,e);var t=pe(n);function n(e){var r;return ce(this,n),ge(fe(r=t.call(this,e)),"_renderCalendar",(function(){var e=r.props,t=r.state,n={viewDate:t.viewDate.clone(),selectedDate:r.getSelectedDate(),isValidDate:e.isValidDate,updateDate:r._updateDate,navigate:r._viewNavigate,moment:o.a,showView:r._showView};switch(t.currentView){case _e:return n.renderYear=e.renderYear,c.a.createElement(L,n);case ve:return n.renderMonth=e.renderMonth,c.a.createElement(R,n);case ye:return n.renderDay=e.renderDay,n.timeFormat=r.getFormat("time"),c.a.createElement(v,n);default:return n.dateFormat=r.getFormat("date"),n.timeFormat=r.getFormat("time"),n.timeConstraints=e.timeConstraints,n.setTime=r._setTime,c.a.createElement(q,n)}})),ge(fe(r),"_showView",(function(e,t){var n=(t||r.state.viewDate).clone(),i=r.props.onBeforeNavigate(e,r.state.currentView,n);i&&r.state.currentView!==i&&(r.props.onNavigate(i),r.setState({currentView:i}))})),ge(fe(r),"viewToMethod",{days:"date",months:"month",years:"year"}),ge(fe(r),"nextView",{days:"time",months:"days",years:"months"}),ge(fe(r),"_updateDate",(function(e){var t=r.state.currentView,n=r.getUpdateOn(r.getFormat("date")),i=r.state.viewDate.clone();i[r.viewToMethod[t]](parseInt(e.target.getAttribute("data-value"),10)),"days"===t&&(i.month(parseInt(e.target.getAttribute("data-month"),10)),i.year(parseInt(e.target.getAttribute("data-year"),10)));var s={viewDate:i};t===n?(s.selectedDate=i.clone(),s.inputValue=i.format(r.getFormat("datetime")),void 0===r.props.open&&r.props.input&&r.props.closeOnSelect&&r._closeCalendar(),r.props.onChange(i.clone())):r._showView(r.nextView[t],i),r.setState(s)})),ge(fe(r),"_viewNavigate",(function(e,t){var n=r.state.viewDate.clone();n.add(e,t),e>0?r.props.onNavigateForward(e,t):r.props.onNavigateBack(-e,t),r.setState({viewDate:n})})),ge(fe(r),"_setTime",(function(e,t){var n=(r.getSelectedDate()||r.state.viewDate).clone();n[e](t),r.props.value||r.setState({selectedDate:n,viewDate:n.clone(),inputValue:n.format(r.getFormat("datetime"))}),r.props.onChange(n)})),ge(fe(r),"_openCalendar",(function(){r.isOpen()||r.setState({open:!0},r.props.onOpen)})),ge(fe(r),"_closeCalendar",(function(){r.isOpen()&&r.setState({open:!1},(function(){r.props.onClose(r.state.selectedDate||r.state.inputValue)}))})),ge(fe(r),"_handleClickOutside",(function(){var e=r.props;e.input&&r.state.open&&void 0===e.open&&e.closeOnClickOutside&&r._closeCalendar()})),ge(fe(r),"_onInputFocus",(function(e){r.callHandler(r.props.inputProps.onFocus,e)&&r._openCalendar()})),ge(fe(r),"_onInputChange",(function(e){if(r.callHandler(r.props.inputProps.onChange,e)){var t=e.target?e.target.value:e,n=r.localMoment(t,r.getFormat("datetime")),i={inputValue:t};n.isValid()?(i.selectedDate=n,i.viewDate=n.clone().startOf("month")):i.selectedDate=null,r.setState(i,(function(){r.props.onChange(n.isValid()?n:r.state.inputValue)}))}})),ge(fe(r),"_onInputKeyDown",(function(e){r.callHandler(r.props.inputProps.onKeyDown,e)&&9===e.which&&r.props.closeOnTab&&r._closeCalendar()})),ge(fe(r),"_onInputClick",(function(e){r.callHandler(r.props.inputProps.onClick,e)&&r._openCalendar()})),r.state=r.getInitialState(),r}return de(n,[{key:"render",value:function(){return c.a.createElement(Re,{className:this.getClassName(),onClickOut:this._handleClickOutside},this.renderInput(),c.a.createElement("div",{className:"rdtPicker"},this.renderView()))}},{key:"renderInput",value:function(){if(this.props.input){var e=ae(ae({type:"text",className:"form-control",value:this.getInputValue()},this.props.inputProps),{},{onFocus:this._onInputFocus,onChange:this._onInputChange,onKeyDown:this._onInputKeyDown,onClick:this._onInputClick});return this.props.renderInput?c.a.createElement("div",null,this.props.renderInput(e,this._openCalendar,this._closeCalendar)):c.a.createElement("input",e)}}},{key:"renderView",value:function(){return this.props.renderView(this.state.currentView,this._renderCalendar)}},{key:"getInitialState",value:function(){var e=this.props,t=this.getFormat("datetime"),n=this.parseDate(e.value||e.initialValue,t);return this.checkTZ(),{open:!e.input,currentView:e.initialViewMode||this.getInitialView(),viewDate:this.getInitialViewDate(n),selectedDate:n&&n.isValid()?n:void 0,inputValue:this.getInitialInputValue(n)}}},{key:"getInitialViewDate",value:function(e){var t,n=this.props.initialViewDate;if(n){if((t=this.parseDate(n,this.getFormat("datetime")))&&t.isValid())return t;Ce('The initialViewDated given "'+n+'" is not valid. Using current date instead.')}else if(e&&e.isValid())return e.clone();return this.getInitialDate()}},{key:"getInitialDate",value:function(){var e=this.localMoment();return e.hour(0).minute(0).second(0).millisecond(0),e}},{key:"getInitialView",value:function(){var e=this.getFormat("date");return e?this.getUpdateOn(e):Ee}},{key:"parseDate",value:function(e,t){var n;return e&&"string"==typeof e?n=this.localMoment(e,t):e&&(n=this.localMoment(e)),n&&!n.isValid()&&(n=null),n}},{key:"getClassName",value:function(){var e="rdt",t=this.props,n=t.className;return Array.isArray(n)?e+=" "+n.join(" "):n&&(e+=" "+n),t.input||(e+=" rdtStatic"),this.isOpen()&&(e+=" rdtOpen"),e}},{key:"isOpen",value:function(){return!this.props.input||(void 0===this.props.open?this.state.open:this.props.open)}},{key:"getUpdateOn",value:function(e){return this.props.updateOnView?this.props.updateOnView:e.match(/[lLD]/)?ye:-1!==e.indexOf("M")?ve:-1!==e.indexOf("Y")?_e:ye}},{key:"getLocaleData",value:function(){var e=this.props;return this.localMoment(e.value||e.defaultValue||new Date).localeData()}},{key:"getDateFormat",value:function(){var e=this.getLocaleData(),t=this.props.dateFormat;return!0===t?e.longDateFormat("L"):t||""}},{key:"getTimeFormat",value:function(){var e=this.getLocaleData(),t=this.props.timeFormat;return!0===t?e.longDateFormat("LT"):t||""}},{key:"getFormat",value:function(e){if("date"===e)return this.getDateFormat();if("time"===e)return this.getTimeFormat();var t=this.getDateFormat(),n=this.getTimeFormat();return t&&n?t+" "+n:t||n}},{key:"updateTime",value:function(e,t,n,r){var i={},s=r?"selectedDate":"viewDate";i[s]=this.state[s].clone()[e](t,n),this.setState(i)}},{key:"localMoment",value:function(e,t,n){var r=null;return r=(n=n||this.props).utc?o.a.utc(e,t,n.strictParsing):n.displayTimeZone?o.a.tz(e,t,n.displayTimeZone):o()(e,t,n.strictParsing),n.locale&&r.locale(n.locale),r}},{key:"checkTZ",value:function(){var e=this.props.displayTimeZone;!e||this.tzWarning||o.a.tz||(this.tzWarning=!0,Ce('displayTimeZone prop with value "'+e+'" is used but moment.js timezone is not loaded.',"error"))}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=!1,n=this.props;["locale","utc","displayZone","dateFormat","timeFormat"].forEach((function(r){e[r]!==n[r]&&(t=!0)})),t&&this.regenerateDates(),n.value&&n.value!==e.value&&this.setViewDate(n.value),this.checkTZ()}}},{key:"regenerateDates",value:function(){var e=this.props,t=this.state.viewDate.clone(),n=this.state.selectedDate&&this.state.selectedDate.clone();e.locale&&(t.locale(e.locale),n&&n.locale(e.locale)),e.utc?(t.utc(),n&&n.utc()):e.displayTimeZone?(t.tz(e.displayTimeZone),n&&n.tz(e.displayTimeZone)):(t.locale(),n&&n.locale());var r={viewDate:t,selectedDate:n};n&&n.isValid()&&(r.inputValue=n.format(this.getFormat("datetime"))),this.setState(r)}},{key:"getSelectedDate",value:function(){if(void 0===this.props.value)return this.state.selectedDate;var e=this.parseDate(this.props.value,this.getFormat("datetime"));return!(!e||!e.isValid())&&e}},{key:"getInitialInputValue",value:function(e){var t=this.props;return t.inputProps.value?t.inputProps.value:e&&e.isValid()?e.format(this.getFormat("datetime")):t.value&&"string"==typeof t.value?t.value:t.initialValue&&"string"==typeof t.initialValue?t.initialValue:""}},{key:"getInputValue",value:function(){var e=this.getSelectedDate();return e?e.format(this.getFormat("datetime")):this.state.inputValue}},{key:"setViewDate",value:function(e){var t;return e&&(t="string"==typeof e?this.localMoment(e,this.getFormat("datetime")):this.localMoment(e))&&t.isValid()?void this.setState({viewDate:t}):Ce("Invalid date passed to the `setViewDate` method: "+e)}},{key:"navigate",value:function(e){this._showView(e)}},{key:"callHandler",value:function(e,t){return!e||!1!==e(t)}}]),n}(c.a.Component);function Ce(e,t){var n="undefined"!=typeof window&&window.console;n&&(t||(t="warn"),n[t]("***react-datetime:"+e))}ge(we,"propTypes",{value:Se,initialValue:Se,initialViewDate:Se,initialViewMode:be.oneOf([_e,ve,ye,Ee]),onOpen:be.func,onClose:be.func,onChange:be.func,onNavigate:be.func,onBeforeNavigate:be.func,onNavigateBack:be.func,onNavigateForward:be.func,updateOnView:be.string,locale:be.string,utc:be.bool,displayTimeZone:be.string,input:be.bool,dateFormat:be.oneOfType([be.string,be.bool]),timeFormat:be.oneOfType([be.string,be.bool]),inputProps:be.object,timeConstraints:be.object,isValidDate:be.func,open:be.bool,strictParsing:be.bool,closeOnSelect:be.bool,closeOnTab:be.bool,renderView:be.func,renderInput:be.func,renderDay:be.func,renderMonth:be.func,renderYear:be.func}),ge(we,"defaultProps",{onOpen:Te,onClose:Te,onCalendarOpen:Te,onCalendarClose:Te,onChange:Te,onNavigate:Te,onBeforeNavigate:function(e){return e},onNavigateBack:Te,onNavigateForward:Te,dateFormat:!0,timeFormat:!0,utc:!1,className:"",input:!0,inputProps:{},timeConstraints:{},isValidDate:function(){return!0},strictParsing:!0,closeOnSelect:!1,closeOnTab:!0,closeOnClickOutside:!0,renderView:function(e,t){return t()}}),ge(we,"moment",o.a);var Re=function(e,t){var n,r,i=e.displayName||e.name||"Component";return r=n=function(n){var r,s;function o(e){var r;return(r=n.call(this,e)||this).__outsideClickHandler=function(e){if("function"!=typeof r.__clickOutsideHandlerProp){var t=r.getInstance();if("function"!=typeof t.props.handleClickOutside){if("function"!=typeof t.handleClickOutside)throw new Error("WrappedComponent: "+i+" lacks a handleClickOutside(event) function for processing outside click events.");t.handleClickOutside(e)}else t.props.handleClickOutside(e)}else r.__clickOutsideHandlerProp(e)},r.__getComponentNode=function(){var e=r.getInstance();return t&&"function"==typeof t.setClickOutsideRef?t.setClickOutsideRef()(e):"function"==typeof e.setClickOutsideRef?e.setClickOutsideRef():Object(Y.findDOMNode)(e)},r.enableOnClickOutside=function(){if("undefined"!=typeof document&&!ne[r._uid]){void 0===$&&($=function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),e}}()),ne[r._uid]=!0;var e=r.props.eventTypes;e.forEach||(e=[e]),te[r._uid]=function(e){var t;null!==r.componentNode&&(r.props.preventDefault&&e.preventDefault(),r.props.stopPropagation&&e.stopPropagation(),r.props.excludeScrollbar&&(t=e,document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY)||function(e,t,n){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&Z(e,t,n))return!0;e=e.parentNode||e.host}return e}(e.composed&&e.composedPath&&e.composedPath().shift()||e.target,r.componentNode,r.props.outsideClickIgnoreClass)===document&&r.__outsideClickHandler(e))},e.forEach((function(e){document.addEventListener(e,te[r._uid],ie(X(r),e))}))}},r.disableOnClickOutside=function(){delete ne[r._uid];var e=te[r._uid];if(e&&"undefined"!=typeof document){var t=r.props.eventTypes;t.forEach||(t=[t]),t.forEach((function(t){return document.removeEventListener(t,e,ie(X(r),t))})),delete te[r._uid]}},r.getRef=function(e){return r.instanceRef=e},r._uid=ee(),r}s=n,(r=o).prototype=Object.create(s.prototype),r.prototype.constructor=r,J(r,s);var c=o.prototype;return c.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},c.componentDidMount=function(){if("undefined"!=typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"==typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!=typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+i+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},c.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},c.componentWillUnmount=function(){this.disableOnClickOutside()},c.render=function(){var t=this.props;t.excludeScrollbar;var n=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,Object(a.createElement)(e,n)},o}(a.Component),n.displayName="OnClickOutside("+i+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:"ignore-react-onclickoutside",preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},r}(function(e){ue(n,e);var t=pe(n);function n(){var e;ce(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return ge(fe(e=t.call.apply(t,[this].concat(i))),"container",c.a.createRef()),e}return de(n,[{key:"render",value:function(){return c.a.createElement("div",{className:this.props.className,ref:this.container},this.props.children)}},{key:"handleClickOutside",value:function(e){this.props.onClickOut(e)}},{key:"setClickOutsideRef",value:function(){return this.container.current}}]),n}(c.a.Component))}])},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var _=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(_,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(_,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(_,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),I=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,j=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case T:return"Portal";case C:return"Profiler";case w:return"StrictMode";case O:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case R:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=z(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var _e=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Se=null,we=null;function Ce(e){if(e=yi(e)){if("function"!==typeof Te)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Te(e.stateNode,e.type,t))}}function Re(e){Se?we?we.push(e):we=[e]:Se=e}function Ie(){if(Se){var e=Se,t=we;if(we=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ne(e,t){return e(t)}function Oe(){}var Ae=!1;function ke(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ne(e,t,n)}finally{Ae=!1,(null!==Se||null!==we)&&(Oe(),Ie())}}function xe(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(d)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(de){Pe=!1}function Le(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(d){this.onError(d)}}var Me=!1,je=null,Ue=!1,Fe=null,Be={onError:function(e){Me=!0,je=e}};function Ve(e,t,n,r,i,s,o,a,c){Me=!1,je=null,Le.apply(Be,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ge(e)!==e)throw Error(s(188))}function ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ze=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ut(a):0!==(s&=o)&&(r=ut(s))}else 0!==(o=n&~i)?r=ut(o):0!==s&&(r=ut(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _t(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function Et(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,Tt,St,wt,Ct,Rt=!1,It=[],Nt=null,Ot=null,At=null,kt=new Map,xt=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&Tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=vi(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&Tt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ee=r,n.target.dispatchEvent(r),Ee=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Bt(){Rt=!1,null!==Nt&&Ut(Nt)&&(Nt=null),null!==Ot&&Ut(Ot)&&(Ot=null),null!==At&&Ut(At)&&(At=null),kt.forEach(Ft),xt.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Rt||(Rt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Gt(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&Vt(Nt,e),null!==Ot&&Vt(Ot,e),null!==At&&Vt(At,e),kt.forEach(t),xt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)jt(n),null===n.blockedOn&&Pt.shift()}var Ht=E.ReactCurrentBatchConfig,Wt=!0;function zt(e,t,n,r){var i=yt,s=Ht.transition;Ht.transition=null;try{yt=1,Kt(e,t,n,r)}finally{yt=i,Ht.transition=s}}function qt(e,t,n,r){var i=yt,s=Ht.transition;Ht.transition=null;try{yt=4,Kt(e,t,n,r)}finally{yt=i,Ht.transition=s}}function Kt(e,t,n,r){if(Wt){var i=Jt(e,t,n,r);if(null===i)Wr(e,t,r,Yt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nt=Mt(Nt,e,t,n,r,i),!0;case"dragenter":return Ot=Mt(Ot,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return kt.set(s,Mt(kt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,xt.set(s,Mt(xt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=yi(i);if(null!==s&&bt(s),null===(s=Jt(e,t,n,r))&&Wr(e,t,r,Yt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Yt=null;function Jt(e,t,n,r){if(Yt=null,null!==(e=vi(e=be(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(ln),un=j({},ln,{view:0,detail:0}),hn=sn(un),pn=j({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=sn(pn),mn=sn(j({},pn,{dataTransfer:0})),gn=sn(j({},un,{relatedTarget:0})),_n=sn(j({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=j({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=sn(vn),En=sn(j({},ln,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return wn}var Rn=j({},un,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(Rn),Nn=sn(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=sn(j({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),An=sn(j({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xn=sn(kn),Pn=[9,13,27,32],Dn=d&&"CompositionEvent"in window,Ln=null;d&&"documentMode"in document&&(Ln=document.documentMode);var Mn=d&&"TextEvent"in window&&!Ln,jn=d&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function zn(e,t,n,r){Re(r),0<(t=qr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Yn(e){Ur(e,0)}function Jn(e){if(K(Ei(e)))return e}function Xn(e,t){if("change"===e)return t}var Zn=!1;if(d){var Qn;if(d){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Qn=$n}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Kn=qn=null)}function nr(e){if("value"===e.propertyName&&Jn(Kn)){var t=[];zn(t,Kn,e,be(e)),ke(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Kn)}function sr(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dr(n,s);var o=dr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,_r=null,vr=null,yr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&cr(vr,r)||(vr=r,0<(r=qr(_r,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Sr={},wr={};function Cr(e){if(Sr[e])return Sr[e];if(!Tr[e])return e;var t,n=Tr[e];for(t in n)if(n.hasOwnProperty(t)&&t in wr)return Sr[e]=n[t];return e}d&&(wr=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);var Rr=Cr("animationend"),Ir=Cr("animationiteration"),Nr=Cr("animationstart"),Or=Cr("transitionend"),Ar=new Map,kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){Ar.set(e,t),c(t,[e])}for(var Pr=0;Pr<kr.length;Pr++){var Dr=kr[Pr];xr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}xr(Rr,"onAnimationEnd"),xr(Ir,"onAnimationIteration"),xr(Nr,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(Or,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,l){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(s(198));var d=je;Me=!1,je=null,Ue||(Ue=!0,Fe=d)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;jr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;jr(i,a,l),s=c}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Xt(t)){case 1:var i=zt;break;case 4:i=qt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}ke((function(){var r=s,i=be(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var c=dn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=In;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=On;break;case Rr:case Ir:case Nr:c=_n;break;case Or:c=An;break;case"scroll":c=hn;break;case"wheel":c=xn;break;case"copy":case"cut":case"paste":c=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Nn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==a?a+"Capture":null:a;d=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=xe(f,h))&&d.push(zr(f,m,p)))),u)break;f=f.return}0<d.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Ee||!(l=n.relatedTarget||n.fromElement)||!vi(l)&&!l[fi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?vi(l):null)&&(l!==(u=Ge(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(d=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=Nn,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==c?a:Ei(c),p=null==l?a:Ei(l),(a=new d(m,f+"leave",c,n,i)).target=u,a.relatedTarget=p,m=null,vi(i)===r&&((d=new d(h,f+"enter",l,n,i)).target=p,d.relatedTarget=u,m=d),u=m,c&&l)e:{for(h=l,f=0,p=d=c;p;p=Kr(p))f++;for(p=0,m=h;m;m=Kr(m))p++;for(;0<f-p;)d=Kr(d),f--;for(;0<p-f;)h=Kr(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Kr(d),h=Kr(h)}d=null}else d=null;null!==c&&Yr(o,a,c,d,!1),null!==l&&null!==u&&Yr(o,u,l,d,!0)}if("select"===(c=(a=r?Ei(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Xn;else if(Wn(a))if(Zn)g=or;else{g=ir;var _=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?zn(o,g,n,i):(_&&_(e,a,r),"focusout"===e&&(_=a._wrapperState)&&_.controlled&&"number"===a.type&&ee(a,"number",a.value)),_=r?Ei(r):window,e){case"focusin":(Wn(_)||"true"===_.contentEditable)&&(gr=_,_r=r,vr=null);break;case"focusout":vr=_r=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,Er(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":Er(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Gn?Bn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(jn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Gn&&(v=en()):(Qt="value"in(Zt=i)?Zt.value:Zt.textContent,Gn=!0)),0<(_=qr(r,y)).length&&(y=new En(y,e,null,n,i),o.push({event:y,listeners:_}),v?y.data=v:null!==(v=Vn(n))&&(y.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Dn&&Bn(e,t)?(e=en(),$t=Qt=Zt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=xe(e,n))&&r.unshift(zr(e,s,i)),null!=(s=xe(e,t))&&r.push(zr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=xe(n,s))&&o.unshift(zr(n,c,a)):i||null!=(c=xe(n,s))&&o.push(zr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Xr,"")}function Qr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(s(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Gt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),hi="__reactFiber$"+ui,pi="__reactProps$"+ui,fi="__reactContainer$"+ui,mi="__reactEvents$"+ui,gi="__reactListeners$"+ui,_i="__reactHandles$"+ui;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[hi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ei(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[pi]||null}var Ti=[],Si=-1;function wi(e){return{current:e}}function Ci(e){0>Si||(e.current=Ti[Si],Ti[Si]=null,Si--)}function Ri(e,t){Si++,Ti[Si]=e.current,e.current=t}var Ii={},Ni=wi(Ii),Oi=wi(!1),Ai=Ii;function ki(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function xi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ci(Oi),Ci(Ni)}function Di(e,t,n){if(Ni.current!==Ii)throw Error(s(168));Ri(Ni,t),Ri(Oi,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,H(e)||"Unknown",i));return j({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ai=Ni.current,Ri(Ni,e),Ri(Oi,Oi.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ci(Oi),Ci(Ni),Ri(Ni,e)):Ci(Oi),Ri(Oi,n)}var Ui=null,Fi=!1,Bi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function Gi(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=yt;try{var n=Ui;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke($e,Gi),i}finally{yt=t,Bi=!1}}return null}var Hi=[],Wi=0,zi=null,qi=0,Ki=[],Yi=0,Ji=null,Xi=1,Zi="";function Qi(e,t){Hi[Wi++]=qi,Hi[Wi++]=zi,zi=e,qi=t}function $i(e,t,n){Ki[Yi++]=Xi,Ki[Yi++]=Zi,Ki[Yi++]=Ji,Ji=e;var r=Xi;e=Zi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Zi=s+e}else Xi=1<<s|n<<i|r,Zi=e}function es(e){null!==e.return&&(Qi(e,1),$i(e,1,0))}function ts(e){for(;e===zi;)zi=Hi[--Wi],Hi[Wi]=null,qi=Hi[--Wi],Hi[Wi]=null;for(;e===Ji;)Ji=Ki[--Yi],Ki[Yi]=null,Zi=Ki[--Yi],Ki[Yi]=null,Xi=Ki[--Yi],Ki[Yi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=xl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Xi,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=xl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(cs(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!is)return ds(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=li(e.nextSibling)}function ps(){rs=ns=null,is=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ms=E.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var _s=wi(null),vs=null,ys=null,Es=null;function bs(){Es=ys=vs=null}function Ts(e){var t=_s.current;Ci(_s),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ws(e,t){vs=e,Es=ys=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ea=!0),e.firstContext=null)}function Cs(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===ys){if(null===vs)throw Error(s(308));ys=e,vs.dependencies={lanes:0,firstContext:e}}else ys=ys.next=e;return t}var Rs=null;function Is(e){null===Rs?Rs=[e]:Rs.push(e)}function Ns(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Is(t)):(n.next=i.next,i.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function ks(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ps(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Oc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Os(e,n)}return null===(i=r.interleaved)?(t.next=t,Is(r)):(t.next=i.next,i.next=t),r.interleaved=t,Os(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function js(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===o?s=l:o.next=l,o=c;var d=e.alternate;null!==d&&((a=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===a?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=c))}if(null!==s){var u=i.baseState;for(o=0,d=l=c=null,a=s;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=j({},u,h);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(l=d=p,c=u):d=d.next=p,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(c=u),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);jc|=o,e.lanes=o,e.memoizedState=u}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Fs=(new r.Component).refs;function Bs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vs={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Ps(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Ps(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Ps(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ds(e,i,r))&&(rl(t,e,r,n),Ls(t,e,r))}};function Gs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function Hs(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"===typeof s&&null!==s?s=Cs(s):(i=xi(t)?Ai:Ni.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?ki(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function zs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fs,ks(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Cs(s):(s=xi(t)?Ai:Ni.current,i.context=ki(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Bs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vs.enqueueReplaceState(i,i.state,null),js(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function qs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Fs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ks(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ys(e){return(0,e._init)(e._payload)}function Js(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===S?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===x&&Ys(s)===t.type)?((r=i(t,n.props)).ref=qs(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=qs(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=qs(e,null,t),n.return=e,n;case T:return(t=Fl(t,e.mode,n)).return=e,t;case x:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ml(t,e.mode,n,null)).return=e,t;Ks(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?l(e,t,n,r):null;case T:return n.key===i?d(e,t,n,r):null;case x:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:u(e,t,n,r,null);Ks(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return u(t,e=e.get(n)||null,r,i,null);Ks(t,r)}return null}function m(i,s,a,c){for(var l=null,d=null,u=s,m=s=0,g=null;null!==u&&m<a.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var _=p(i,u,a[m],c);if(null===_){null===u&&(u=g);break}e&&u&&null===_.alternate&&t(i,u),s=o(_,s,m),null===d?l=_:d.sibling=_,d=_,u=g}if(m===a.length)return n(i,u),is&&Qi(i,m),l;if(null===u){for(;m<a.length;m++)null!==(u=h(i,a[m],c))&&(s=o(u,s,m),null===d?l=u:d.sibling=u,d=u);return is&&Qi(i,m),l}for(u=r(i,u);m<a.length;m++)null!==(g=f(u,i,m,a[m],c))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),s=o(g,s,m),null===d?l=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(i,e)})),is&&Qi(i,m),l}function g(i,a,c,l){var d=L(c);if("function"!==typeof d)throw Error(s(150));if(null==(c=d.call(c)))throw Error(s(151));for(var u=d=null,m=a,g=a=0,_=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(_=m,m=null):_=m.sibling;var y=p(i,m,v.value,l);if(null===y){null===m&&(m=_);break}e&&m&&null===y.alternate&&t(i,m),a=o(y,a,g),null===u?d=y:u.sibling=y,u=y,m=_}if(v.done)return n(i,m),is&&Qi(i,g),d;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=h(i,v.value,l))&&(a=o(v,a,g),null===u?d=v:u.sibling=v,u=v);return is&&Qi(i,g),d}for(m=r(i,m);!v.done;g++,v=c.next())null!==(v=f(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===u?d=v:u.sibling=v,u=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Qi(i,g),d}return function e(r,s,o,c){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var l=o.key,d=s;null!==d;){if(d.key===l){if((l=o.type)===S){if(7===d.tag){n(r,d.sibling),(s=i(d,o.props.children)).return=r,r=s;break e}}else if(d.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===x&&Ys(l)===d.type){n(r,d.sibling),(s=i(d,o.props)).ref=qs(r,d,o),s.return=r,r=s;break e}n(r,d);break}t(r,d),d=d.sibling}o.type===S?((s=Ml(o.props.children,r.mode,c,o.key)).return=r,r=s):((c=Ll(o.type,o.key,o.props,null,r.mode,c)).ref=qs(r,s,o),c.return=r,r=c)}return a(r);case T:e:{for(d=o.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fl(o,r.mode,c)).return=r,r=s}return a(r);case x:return e(r,s,(d=o._init)(o._payload),c)}if(te(o))return m(r,s,o,c);if(L(o))return g(r,s,o,c);Ks(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Ul(o,r.mode,c)).return=r,r=s),a(r)):n(r,s)}}var Xs=Js(!0),Zs=Js(!1),Qs={},$s=wi(Qs),eo=wi(Qs),to=wi(Qs);function no(e){if(e===Qs)throw Error(s(174));return e}function ro(e,t){switch(Ri(to,t),Ri(eo,e),Ri($s,Qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci($s),Ri($s,t)}function io(){Ci($s),Ci(eo),Ci(to)}function so(e){no(to.current);var t=no($s.current),n=ce(t,e.type);t!==n&&(Ri(eo,e),Ri($s,n))}function oo(e){eo.current===e&&(Ci($s),Ci(eo))}var ao=wi(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function uo(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=E.ReactCurrentDispatcher,po=E.ReactCurrentBatchConfig,fo=0,mo=null,go=null,_o=null,vo=!1,yo=!1,Eo=0,bo=0;function To(){throw Error(s(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function wo(e,t,n,r,i,o){if(fo=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ca,e=n(r,i),yo){o=0;do{if(yo=!1,Eo=0,25<=o)throw Error(s(301));o+=1,_o=go=null,t.updateQueue=null,ho.current=la,e=n(r,i)}while(yo)}if(ho.current=oa,t=null!==go&&null!==go.next,fo=0,_o=go=mo=null,vo=!1,t)throw Error(s(300));return e}function Co(){var e=0!==Eo;return Eo=0,e}function Ro(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_o?mo.memoizedState=_o=e:_o=_o.next=e,_o}function Io(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===_o?mo.memoizedState:_o.next;if(null!==t)_o=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===_o?mo.memoizedState=_o=e:_o=_o.next=e}return _o}function No(e,t){return"function"===typeof t?t(e):t}function Oo(e){var t=Io(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=a=null,l=null,d=o;do{var u=d.lane;if((fo&u)===u)null!==l&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===l?(c=l=h,a=r):l=l.next=h,mo.lanes|=u,jc|=u}d=d.next}while(null!==d&&d!==o);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(Ea=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,jc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Io(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(Ea=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ko(){}function xo(e,t){var n=mo,r=Io(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,Ea=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==_o&&1&_o.memoizedState.tag){if(n.flags|=2048,Fo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ac)throw Error(s(349));0!==(30&fo)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&jo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&jo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function jo(e){var t=Os(e,1);null!==t&&rl(t,e,1,-1)}function Uo(e){var t=Ro();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Io().memoizedState}function Vo(e,t,n,r){var i=Ro();mo.flags|=e,i.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Go(e,t,n,r){var i=Io();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Fo(t,n,s,r))}mo.flags|=e,i.memoizedState=Fo(1|t,n,s,r)}function Ho(e,t){return Vo(8390656,8,e,t)}function Wo(e,t){return Go(2048,8,e,t)}function zo(e,t){return Go(4,2,e,t)}function qo(e,t){return Go(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Yo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Go(4,4,Ko.bind(null,t,e),n)}function Jo(){}function Xo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qo(e,t,n){return 0===(21&fo)?(e.baseState&&(e.baseState=!1,Ea=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,jc|=n,e.baseState=!0),t)}function $o(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=po.transition;po.transition={};try{e(!1),t()}finally{yt=n,po.transition=r}}function ea(){return Io().memoizedState}function ta(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Ns(e,t,n,r))){rl(n,e,r,tl()),sa(n,t,r)}}function na(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var c=t.interleaved;return null===c?(i.next=i,Is(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ns(e,t,i,r))&&(rl(n,e,r,i=tl()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){yo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Cs,useCallback:To,useContext:To,useEffect:To,useImperativeHandle:To,useInsertionEffect:To,useLayoutEffect:To,useMemo:To,useReducer:To,useRef:To,useState:To,useDebugValue:To,useDeferredValue:To,useTransition:To,useMutableSource:To,useSyncExternalStore:To,useId:To,unstable_isNewReconciler:!1},aa={readContext:Cs,useCallback:function(e,t){return Ro().memoizedState=[e,void 0===t?null:t],e},useContext:Cs,useEffect:Ho,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Ro();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ro();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ro().memoizedState=e},useState:Uo,useDebugValue:Jo,useDeferredValue:function(e){return Ro().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=$o.bind(null,e[1]),Ro().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=Ro();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ac)throw Error(s(349));0!==(30&fo)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ho(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ro(),t=Ac.identifierPrefix;if(is){var n=Zi;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=Eo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:Cs,useCallback:Xo,useContext:Cs,useEffect:Wo,useImperativeHandle:Yo,useInsertionEffect:zo,useLayoutEffect:qo,useMemo:Zo,useReducer:Oo,useRef:Bo,useState:function(){return Oo(No)},useDebugValue:Jo,useDeferredValue:function(e){return Qo(Io(),go.memoizedState,e)},useTransition:function(){return[Oo(No)[0],Io().memoizedState]},useMutableSource:ko,useSyncExternalStore:xo,useId:ea,unstable_isNewReconciler:!1},la={readContext:Cs,useCallback:Xo,useContext:Cs,useEffect:Wo,useImperativeHandle:Yo,useInsertionEffect:zo,useLayoutEffect:qo,useMemo:Zo,useReducer:Ao,useRef:Bo,useState:function(){return Ao(No)},useDebugValue:Jo,useDeferredValue:function(e){var t=Io();return null===go?t.memoizedState=e:Qo(t,go.memoizedState,e)},useTransition:function(){return[Ao(No)[0],Io().memoizedState]},useMutableSource:ko,useSyncExternalStore:xo,useId:ea,unstable_isNewReconciler:!1};function da(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Ps(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zc||(zc=!0,qc=r),ha(0,t)},n}function ma(e,t,n){(n=Ps(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Kc?Kc=new Set([this]):Kc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Rl.bind(null,e,t,n),t.then(e,e))}function _a(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ps(-1,1)).tag=2,Ds(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=E.ReactCurrentOwner,Ea=!1;function ba(e,t,n,r){t.child=null===e?Zs(t,null,n,r):Xs(t,e.child,n,r)}function Ta(e,t,n,r,i){n=n.render;var s=t.ref;return ws(t,i),r=wo(e,t,n,r,s,i),n=Co(),null===e||Ea?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,za(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,wa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return za(e,t,i)}return t.flags|=1,(e=Dl(s,r)).ref=t.ref,e.return=t,t.child=e}function wa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(Ea=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,za(e,t,i);0!==(131072&e.flags)&&(Ea=!0)}}return Ia(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ri(Dc,Pc),Pc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ri(Dc,Pc),Pc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ri(Dc,Pc),Pc|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ri(Dc,Pc),Pc|=r;return ba(e,t,i,n),t.child}function Ra(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,n,r,i){var s=xi(n)?Ai:Ni.current;return s=ki(t,s),ws(t,i),n=wo(e,t,n,r,s,i),r=Co(),null===e||Ea?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,za(e,t,i))}function Na(e,t,n,r,i){if(xi(n)){var s=!0;Mi(t)}else s=!1;if(ws(t,i),null===t.stateNode)Wa(e,t),Hs(t,n,r),zs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Cs(l):l=ki(t,l=xi(n)?Ai:Ni.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&Ws(t,o,r,l),As=!1;var h=t.memoizedState;o.state=h,js(t,r,o,i),c=t.memoizedState,a!==r||h!==c||Oi.current||As?("function"===typeof d&&(Bs(t,n,d,r),c=t.memoizedState),(a=As||Gs(t,n,a,r,h,c,l))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,xs(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:gs(t.type,a),o.props=l,u=t.pendingProps,h=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=Cs(c):c=ki(t,c=xi(n)?Ai:Ni.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==u||h!==c)&&Ws(t,o,r,c),As=!1,h=t.memoizedState,o.state=h,js(t,r,o,i);var f=t.memoizedState;a!==u||h!==f||Oi.current||As?("function"===typeof p&&(Bs(t,n,p,r),f=t.memoizedState),(l=As||Gs(t,n,l,r,h,f,c)||!1)?(d||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Oa(e,t,n,r,s,i)}function Oa(e,t,n,r,i,s){Ra(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),za(e,t,s);r=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xs(t,e.child,null,s),t.child=Xs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function ka(e,t,n,r,i){return ps(),fs(i),t.flags|=256,ba(e,t,n,r),t.child}var xa,Pa,Da,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ri(ao,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=jl(c,i,0,null),e=Ml(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ja(n),t.memoizedState=Ma,e):Fa(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=jl({mode:"visible",children:r.children},i,0,null),(o=Ml(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xs(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Ba(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(c=0!==(a&e.childLanes),Ea||c){if(null!==(r=Ac)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Os(e,i),rl(r,e,i,-1))}return gl(),Ba(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Yi++]=Xi,Ki[Yi++]=Zi,Ki[Yi++]=Ji,Xi=e.id,Zi=e.overflow,Ji=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(a){a=i.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Dl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dl(r,a):(a=Ml(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?ja(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Dl(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=jl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&fs(r),Xs(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function Ga(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ha(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ri(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===co(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ga(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ga(t,!0,n,null,s);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function za(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ya(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return xi(t.type)&&Pi(),Ka(t),null;case 3:return r=t.stateNode,io(),Ci(Oi),Ci(Ni),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(al(ss),ss=null))),Pa(e,t),Ka(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=no($s.current),us(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var c in ve(n,o),i=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Fr("scroll",r)}switch(n){case"input":q(r),$(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[hi]=t,e[pi]=r,xa(e,t,!1,!1),t.stateNode=e;e:{switch(c=ye(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":X(e,r),i=J(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ve(n,i),l=i)if(l.hasOwnProperty(o)){var d=l[o];"style"===o?ge(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===o?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Fr("scroll",e):null!=d&&y(e,o,d,c))}switch(n){case"input":q(e),$(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no($s.current),us(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ka(t),null;case 13:if(Ci(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,o=!1;else if(o=us(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ss&&(al(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Lc&&(Lc=3):gl())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return io(),Pa(e,t),null===e&&Gr(t.stateNode.containerInfo),Ka(t),null;case 10:return Ts(t.type._context),Ka(t),null;case 19:if(Ci(ao),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)qa(o,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,qa(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ri(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>Hc&&(t.flags|=128,r=!0,qa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=co(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!is)return Ka(t),null}else 2*Ze()-o.renderingStartTime>Hc&&1073741824!==n&&(t.flags|=128,r=!0,qa(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=ao.current,Ri(ao,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pc)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ja(e,t){switch(ts(t),t.tag){case 1:return xi(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ci(Oi),Ci(Ni),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ci(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(ao),null;case 4:return io(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}xa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($s.current);var s,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(d in ve(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var c=i[d];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(a.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var l=r[d];if(c=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&l!==c&&(null!=l||null!=c))if("style"===d)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(d,n)),n=l;else"dangerouslySetInnerHTML"===d?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(d,l)):"children"===d?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(d,""+l):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(a.hasOwnProperty(d)?(null!=l&&"onScroll"===d&&Fr("scroll",e),o||c===l||(o=[])):(o=o||[]).push(d,l))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xa=!1,Za=!1,Qa="function"===typeof WeakSet?WeakSet:Set,$a=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cl(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){Cl(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tc(t,n,s)}i=i.next}while(i!==r)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[_i])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function dc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dc(e,t,n),e=e.sibling;null!==e;)dc(e,t,n),e=e.sibling}var uc=null,hc=!1;function pc(e,t,n){for(n=n.child;null!==n;)fc(e,t,n),n=n.sibling}function fc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Za||ec(n,t);case 6:var r=uc,i=hc;uc=null,pc(e,t,n),hc=i,null!==(uc=r)&&(hc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(hc?(e=uc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Gt(e)):ci(uc,n.stateNode));break;case 4:r=uc,i=hc,uc=n.stateNode.containerInfo,hc=!0,pc(e,t,n),uc=r,hc=i;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tc(n,t,o),i=i.next}while(i!==r)}pc(e,t,n);break;case 1:if(!Za&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cl(n,t,a)}pc(e,t,n);break;case 21:pc(e,t,n);break;case 22:1&n.mode?(Za=(r=Za)||null!==n.memoizedState,pc(e,t,n),Za=r):pc(e,t,n);break;default:pc(e,t,n)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qa),t.forEach((function(t){var r=Ol.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,hc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,hc=!0;break e}c=c.return}if(null===uc)throw Error(s(160));fc(o,a,i),uc=null,hc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(d){Cl(i,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)_c(t,e),t=t.sibling}function _c(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),vc(e),4&r){try{rc(3,e,e.return),ic(3,e)}catch(g){Cl(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Cl(e,e.return,g)}}break;case 1:gc(t,e),vc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),vc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Cl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&Z(i,o),ye(c,a);var d=ye(c,o);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];"style"===u?ge(i,h):"dangerouslySetInnerHTML"===u?ue(i,h):"children"===u?he(i,h):y(i,u,h,d)}switch(c){case"input":Q(i,o);break;case"textarea":se(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Cl(e,e.return,g)}}break;case 6:if(gc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Cl(e,e.return,g)}}break;case 3:if(gc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(g){Cl(e,e.return,g)}break;case 4:default:gc(t,e),vc(e);break;case 13:gc(t,e),vc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Gc=Ze())),4&r&&mc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Za=(d=Za)||u,gc(t,e),Za=d):gc(t,e),vc(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for($a=e,u=e.child;null!==u;){for(h=$a=u;null!==$a;){switch(f=(p=$a).child,p.tag){case 0:case 11:case 14:case 15:rc(4,p,p.return);break;case 1:ec(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cl(r,n,g)}}break;case 5:ec(p,p.return);break;case 22:if(null!==p.memoizedState){Tc(h);continue}}null!==f?(f.return=p,$a=f):Tc(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=h.stateNode,a=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Cl(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Cl(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gc(t,e),vc(e),4&r&&mc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),dc(e,cc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lc(e,cc(e),o);break;default:throw Error(s(161))}}catch(a){Cl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){$a=e,Ec(e,t,n)}function Ec(e,t,n){for(var r=0!==(1&e.mode);null!==$a;){var i=$a,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xa;if(!o){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Za;a=Xa;var l=Za;if(Xa=o,(Za=c)&&!l)for($a=i;null!==$a;)c=(o=$a).child,22===o.tag&&null!==o.memoizedState?Sc(i):null!==c?(c.return=o,$a=c):Sc(i);for(;null!==s;)$a=s,Ec(s,t,n),s=s.sibling;$a=i,Xa=a,Za=l}bc(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,$a=s):bc(e)}}function bc(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Za||ic(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Za)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Gt(h)}}}break;default:throw Error(s(163))}Za||512&t.flags&&sc(t)}catch(p){Cl(t,t.return,p)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function Tc(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function Sc(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){Cl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Cl(t,i,c)}}var s=t.return;try{sc(t)}catch(c){Cl(t,s,c)}break;case 5:var o=t.return;try{sc(t)}catch(c){Cl(t,o,c)}}}catch(c){Cl(t,t.return,c)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var wc,Cc=Math.ceil,Rc=E.ReactCurrentDispatcher,Ic=E.ReactCurrentOwner,Nc=E.ReactCurrentBatchConfig,Oc=0,Ac=null,kc=null,xc=0,Pc=0,Dc=wi(0),Lc=0,Mc=null,jc=0,Uc=0,Fc=0,Bc=null,Vc=null,Gc=0,Hc=1/0,Wc=null,zc=!1,qc=null,Kc=null,Yc=!1,Jc=null,Xc=0,Zc=0,Qc=null,$c=-1,el=0;function tl(){return 0!==(6&Oc)?Ze():-1!==$c?$c:$c=Ze()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Oc)&&0!==xc?xc&-xc:null!==ms.transition?(0===el&&(el=mt()),el):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rl(e,t,n,r){if(50<Zc)throw Zc=0,Qc=null,Error(s(185));_t(e,n,r),0!==(2&Oc)&&e===Ac||(e===Ac&&(0===(2&Oc)&&(Uc|=n),4===Lc&&cl(e,xc)),il(e,r),1===n&&0===Oc&&0===(1&t.mode)&&(Hc=Ze()+500,Fi&&Gi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=i[o];-1===c?0!==(a&n)&&0===(a&r)||(i[o]=pt(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Ac?xc:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(ll.bind(null,e)):Vi(ll.bind(null,e)),oi((function(){0===(6&Oc)&&Gi()})),n=null;else{switch(Et(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Al(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if($c=-1,el=0,0!==(6&Oc))throw Error(s(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var r=ht(e,e===Ac?xc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=_l(e,r);else{t=r;var i=Oc;Oc|=2;var o=ml();for(Ac===e&&xc===t||(Wc=null,Hc=Ze()+500,pl(e,t));;)try{yl();break}catch(c){fl(e,c)}bs(),Rc.current=o,Oc=i,null!==kc?t=0:(Ac=null,xc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ol(e,i))),1===t)throw n=Mc,pl(e,0),cl(e,r),il(e,Ze()),n;if(6===t)cl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=_l(e,r))&&(0!==(o=ft(e))&&(r=o,t=ol(e,o))),1===t))throw n=Mc,pl(e,0),cl(e,r),il(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Tl(e,Vc,Wc);break;case 3:if(cl(e,r),(130023424&r)===r&&10<(t=Gc+500-Ze())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Tl.bind(null,e,Vc,Wc),t);break}Tl(e,Vc,Wc);break;case 4:if(cl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cc(r/1960))-r)){e.timeoutHandle=ri(Tl.bind(null,e,Vc,Wc),r);break}Tl(e,Vc,Wc);break;default:throw Error(s(329))}}}return il(e,Ze()),e.callbackNode===n?sl.bind(null,e):null}function ol(e,t){var n=Bc;return e.current.memoizedState.isDehydrated&&(pl(e,t).flags|=256),2!==(e=_l(e,t))&&(t=Vc,Vc=n,null!==t&&al(t)),e}function al(e){null===Vc?Vc=e:Vc.push.apply(Vc,e)}function cl(e,t){for(t&=~Fc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Oc))throw Error(s(327));Sl();var t=ht(e,0);if(0===(1&t))return il(e,Ze()),null;var n=_l(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Mc,pl(e,0),cl(e,t),il(e,Ze()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tl(e,Vc,Wc),il(e,Ze()),null}function dl(e,t){var n=Oc;Oc|=1;try{return e(t)}finally{0===(Oc=n)&&(Hc=Ze()+500,Fi&&Gi())}}function ul(e){null!==Jc&&0===Jc.tag&&0===(6&Oc)&&Sl();var t=Oc;Oc|=1;var n=Nc.transition,r=yt;try{if(Nc.transition=null,yt=1,e)return e()}finally{yt=r,Nc.transition=n,0===(6&(Oc=t))&&Gi()}}function hl(){Pc=Dc.current,Ci(Dc)}function pl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==kc)for(n=kc.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ci(Oi),Ci(Ni),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ci(ao);break;case 10:Ts(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Ac=e,kc=e=Dl(e.current,null),xc=Pc=t,Lc=0,Mc=null,Fc=Uc=jc=0,Vc=Bc=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(r=(n=Rs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Rs=null}return e}function fl(e,t){for(;;){var n=kc;try{if(bs(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(fo=0,_o=go=mo=null,yo=!1,Eo=0,Ic.current=null,null===n||null===n.return){Lc=1,Mc=t,kc=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=xc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var d=l,u=c,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=_a(a);if(null!==f){f.flags&=-257,va(f,a,c,0,t),1&f.mode&&ga(o,d,t),l=d;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ga(o,d,t),gl();break e}l=Error(s(426))}else if(is&&1&c.mode){var _=_a(a);if(null!==_){0===(65536&_.flags)&&(_.flags|=256),va(_,a,c,0,t),fs(da(l,c));break e}}o=l=da(l,c),4!==Lc&&(Lc=2),null===Bc?Bc=[o]:Bc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,fa(0,l,t));break e;case 1:c=l;var v=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Kc||!Kc.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,c,t));break e}}o=o.return}while(null!==o)}bl(n)}catch(E){t=E,kc===n&&null!==n&&(kc=n=n.return);continue}break}}function ml(){var e=Rc.current;return Rc.current=oa,null===e?oa:e}function gl(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ac||0===(268435455&jc)&&0===(268435455&Uc)||cl(Ac,xc)}function _l(e,t){var n=Oc;Oc|=2;var r=ml();for(Ac===e&&xc===t||(Wc=null,pl(e,t));;)try{vl();break}catch(i){fl(e,i)}if(bs(),Oc=n,Rc.current=r,null!==kc)throw Error(s(261));return Ac=null,xc=0,Lc}function vl(){for(;null!==kc;)El(kc)}function yl(){for(;null!==kc&&!Je();)El(kc)}function El(e){var t=wc(e.alternate,e,Pc);e.memoizedProps=e.pendingProps,null===t?bl(e):kc=t,Ic.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ya(n,t,Pc)))return void(kc=n)}else{if(null!==(n=Ja(n,t)))return n.flags&=32767,void(kc=n);if(null===e)return Lc=6,void(kc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(kc=t);kc=t=e}while(null!==t);0===Lc&&(Lc=5)}function Tl(e,t,n){var r=yt,i=Nc.transition;try{Nc.transition=null,yt=1,function(e,t,n,r){do{Sl()}while(null!==Jc);if(0!==(6&Oc))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Ac&&(kc=Ac=null,xc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yc||(Yc=!0,Al(tt,(function(){return Sl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Nc.transition,Nc.transition=null;var a=yt;yt=1;var c=Oc;Oc|=4,Ic.current=null,function(e,t){if(ei=Wt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,c=-1,l=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(c=a+i),h!==o||0!==r&&3!==h.nodeType||(l=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++d===i&&(c=a),p===o&&++u===r&&(l=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,_=m.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),_);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=t.stateNode.containerInfo;1===E.nodeType?E.textContent="":9===E.nodeType&&E.documentElement&&E.removeChild(E.documentElement);break;default:throw Error(s(163))}}catch(b){Cl(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}m=nc,nc=!1}(e,n),_c(n,e),fr(ti),Wt=!!ei,ti=ei=null,e.current=n,yc(n,e,i),Xe(),Oc=c,yt=a,Nc.transition=o}else e.current=n;if(Yc&&(Yc=!1,Jc=e,Xc=i),o=e.pendingLanes,0===o&&(Kc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zc)throw zc=!1,e=qc,qc=null,e;0!==(1&Xc)&&0!==e.tag&&Sl(),o=e.pendingLanes,0!==(1&o)?e===Qc?Zc++:(Zc=0,Qc=e):Zc=0,Gi()}(e,t,n,r)}finally{Nc.transition=i,yt=r}return null}function Sl(){if(null!==Jc){var e=Et(Xc),t=Nc.transition,n=yt;try{if(Nc.transition=null,yt=16>e?16:e,null===Jc)var r=!1;else{if(e=Jc,Jc=null,Xc=0,0!==(6&Oc))throw Error(s(331));var i=Oc;for(Oc|=4,$a=e.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var d=c[l];for($a=d;null!==$a;){var u=$a;switch(u.tag){case 0:case 11:case 15:rc(8,u,o)}var h=u.child;if(null!==h)h.return=u,$a=h;else for(;null!==$a;){var p=(u=$a).sibling,f=u.return;if(oc(u),u===d){$a=null;break}if(null!==p){p.return=f,$a=p;break}$a=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(null!==g)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else e:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:rc(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,$a=v;break e}$a=o.return}}var y=e.current;for($a=y;null!==$a;){var E=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==E)E.return=a,$a=E;else e:for(a=y;null!==$a;){if(0!==(2048&(c=$a).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(T){Cl(c,c.return,T)}if(c===a){$a=null;break e}var b=c.sibling;if(null!==b){b.return=c.return,$a=b;break e}$a=c.return}}if(Oc=i,Gi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(T){}r=!0}return r}finally{yt=n,Nc.transition=t}}return!1}function wl(e,t,n){e=Ds(e,t=fa(0,t=da(n,t),1),1),t=tl(),null!==e&&(_t(e,1,t),il(e,t))}function Cl(e,t,n){if(3===e.tag)wl(e,e,n);else for(;null!==t;){if(3===t.tag){wl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kc||!Kc.has(r))){t=Ds(t,e=ma(t,e=da(n,e),1),1),e=tl(),null!==t&&(_t(t,1,e),il(t,e));break}}t=t.return}}function Rl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(xc&n)===n&&(4===Lc||3===Lc&&(130023424&xc)===xc&&500>Ze()-Gc?pl(e,0):Fc|=n),il(e,t)}function Il(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=tl();null!==(e=Os(e,t))&&(_t(e,t,n),il(e,n))}function Nl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Il(e,n)}function Ol(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Il(e,n)}function Al(e,t){return Ke(e,t)}function kl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xl(e,t,n,r){return new kl(e,t,n,r)}function Pl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=xl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Pl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Ml(n.children,i,o,t);case w:a=8,i|=8;break;case C:return(e=xl(12,n,t,2|i)).elementType=C,e.lanes=o,e;case O:return(e=xl(13,n,t,i)).elementType=O,e.lanes=o,e;case A:return(e=xl(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return jl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case R:a=10;break e;case I:a=9;break e;case N:a=11;break e;case k:a=14;break e;case x:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=xl(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ml(e,t,n,r){return(e=xl(7,e,r,t)).lanes=n,e}function jl(e,t,n,r){return(e=xl(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=xl(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=xl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vl(e,t,n,r,i,s,o,a,c){return e=new Bl(e,t,n,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=xl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ks(s),e}function Gl(e){if(!e)return Ii;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(xi(n))return Li(e,n,t)}return t}function Hl(e,t,n,r,i,s,o,a,c){return(e=Vl(n,r,!0,e,0,s,0,a,c)).context=Gl(null),n=e.current,(s=Ps(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Ds(n,s,i),e.current.lanes=i,_t(e,i,r),il(e,r),e}function Wl(e,t,n,r){var i=t.current,s=tl(),o=nl(i);return n=Gl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ps(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ds(i,t,o))&&(rl(e,i,o,s),Ls(e,i,o)),o}function zl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ql(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kl(e,t){ql(e,t),(e=e.alternate)&&ql(e,t)}wc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oi.current)Ea=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ea=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),ps();break;case 5:so(t);break;case 1:xi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ri(_s,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ri(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(Ri(ao,1&ao.current),null!==(e=za(e,t,n))?e.sibling:null);Ri(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ha(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ri(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return za(e,t,n)}(e,t,n);Ea=0!==(131072&e.flags)}else Ea=!1,is&&0!==(1048576&t.flags)&&$i(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=ki(t,Ni.current);ws(t,n),i=wo(null,t,r,e,i,n);var o=Co();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ks(t),i.updater=Vs,t.stateNode=i,i._reactInternals=t,zs(t,r,e,n),t=Oa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===k)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ia(null,t,r,e,n);break e;case 1:t=Na(null,t,r,e,n);break e;case 11:t=Ta(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Na(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,xs(e,t),js(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=ka(e,t,r,n,i=da(Error(s(423)),t));break e}if(r!==i){t=ka(e,t,r,n,i=da(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Zs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=za(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ra(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xs(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ri(_s,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Oi.current){t=za(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Ps(-1,n&-n)).tag=2;var d=o.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),d.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ss(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ss(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ws(t,n),r=r(i=Cs(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Sa(e,t,r,i=gs(r.type,i),n);case 15:return wa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Wa(e,t),t.tag=1,xi(r)?(e=!0,Mi(t)):e=!1,ws(t,n),Hs(t,r,i),zs(t,r,i,n),Oa(null,t,r,!0,e,n);case 19:return Ha(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Yl="function"===typeof reportError?reportError:function(e){console.error(e)};function Jl(e){this._internalRoot=e}function Xl(e){this._internalRoot=e}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $l(){}function ed(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=zl(o);a.call(e)}}Wl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=zl(o);s.call(e)}}var o=Hl(t,r,e,0,null,!1,0,"",$l);return e._reactRootContainer=o,e[fi]=o.current,Gr(8===e.nodeType?e.parentNode:e),ul(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=zl(c);a.call(e)}}var c=Vl(e,0,!1,null,0,!1,0,"",$l);return e._reactRootContainer=c,e[fi]=c.current,Gr(8===e.nodeType?e.parentNode:e),ul((function(){Wl(t,c,n,r)})),c}(n,t,e,i,r);return zl(o)}Xl.prototype.render=Jl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wl(e,t,null,null)},Xl.prototype.unmount=Jl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul((function(){Wl(null,e,null,null)})),t[fi]=null}},Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=wt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&jt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),il(t,Ze()),0===(6&Oc)&&(Hc=Ze()+500,Gi()))}break;case 13:ul((function(){var t=Os(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Kl(e,1)}},Tt=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)rl(t,e,134217728,tl());Kl(e,134217728)}},St=function(e){if(13===e.tag){var t=nl(e),n=Os(e,t);if(null!==n)rl(n,e,t,tl());Kl(e,t)}},wt=function(){return yt},Ct=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},Te=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(s(90));K(r),Q(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=dl,Oe=ul;var td={usingClientEntryPoint:!1,Events:[yi,Ei,bi,Re,Ie,dl]},nd={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rd={bundleType:nd.bundleType,version:nd.version,rendererPackageName:nd.rendererPackageName,rendererConfig:nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ze(e))?null:e.stateNode},findFiberByHostInstance:nd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{it=id.inject(rd),st=id}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=td,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:T,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zl(e))throw Error(s(299));var n=!1,r="",i=Yl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vl(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Jl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=ze(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,n){if(!Ql(t))throw Error(s(200));return ed(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Yl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Hl(t,null,e,1,null!=n?n:null,i,0,o,a),e[fi]=t.current,Gr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xl(t)},t.render=function(e,t,n){if(!Ql(t))throw Error(s(200));return ed(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ql(e))throw Error(s(40));return!!e._reactRootContainer&&(ul((function(){ed(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=dl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ql(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ed(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},5082:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case s:case a:case o:case h:case p:return e;default:switch(e=e&&e.$$typeof){case d:case l:case u:case m:case f:case c:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.ForwardRef=u,t.Memo=f},2086:(e,t,n)=>{"use strict";e.exports=n(5082)},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,d=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:d,props:s,_owner:a.current}}t.Fragment=s,t.jsx=l,t.jsxs=l},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=_.prototype;var E=y.prototype=new v;E.constructor=y,m(E,_.prototype),E.isPureReactComponent=!0;var b=Array.isArray,T=Object.prototype.hasOwnProperty,S={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)T.call(t,i)&&!w.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){for(var l=Array(c),d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function R(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function O(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===s?"."+N(c,0):s,b(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),O(o,t,i,"",(function(e){return e}))):null!=o&&(R(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",b(e))for(var l=0;l<e.length;l++){var d=s+N(a=e[l],l);c+=O(a,t,i,d,o)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),l=0;!(a=e.next()).done;)c+=O(a=a.value,t,i,d=s+N(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return O(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function k(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var x={current:null},P={transition:null},D={ReactCurrentDispatcher:x,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=_,t.Fragment=i,t.Profiler=o,t.PureComponent=y,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)T.call(t,l)&&!w.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return x.current.useCallback(e,t)},t.useContext=function(e){return x.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return x.current.useDeferredValue(e)},t.useEffect=function(e,t){return x.current.useEffect(e,t)},t.useId=function(){return x.current.useId()},t.useImperativeHandle=function(e,t,n){return x.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return x.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.current.useMemo(e,t)},t.useReducer=function(e,t,n){return x.current.useReducer(e,t,n)},t.useRef=function(e){return x.current.useRef(e)},t.useState=function(e){return x.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return x.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return x.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,c=e[a],l=a+1,d=e[l];if(0>s(c,n))l<i&&0>s(d,c)?(e[r]=d,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>s(d,n)))break e;e[r]=d,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],d=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,_="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function E(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(l,t)}t=r(d)}}function b(e){if(g=!1,E(e),!m)if(null!==r(l))m=!0,P(T);else{var t=r(d);null!==t&&D(b,t.startTime-e)}}function T(e,n){m=!1,g&&(g=!1,v(R),R=-1),f=!0;var s=p;try{for(E(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!O());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(l)&&i(l),E(n)}else i(l);h=r(l)}if(null!==h)var c=!0;else{var u=r(d);null!==u&&D(b,u.startTime-n),c=!1}return c}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,w=!1,C=null,R=-1,I=5,N=-1;function O(){return!(t.unstable_now()-N<I)}function A(){if(null!==C){var e=t.unstable_now();N=e;var n=!0;try{n=C(!0,e)}finally{n?S():(w=!1,C=null)}}else w=!1}if("function"===typeof y)S=function(){y(A)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,x=k.port2;k.port1.onmessage=A,S=function(){x.postMessage(null)}}else S=function(){_(A,0)};function P(e){C=e,w||(w=!0,S())}function D(e,n){R=_((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,P(T))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(d,e),null===r(l)&&e===r(d)&&(g?(v(R),R=-1):g=!0,D(b,s-o))):(e.sortIndex=a,n(l,e),m||f||(m=!0,P(T))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},6440:e=>{"use strict";var t=function(){};e.exports=t},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},8139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{A:()=>r})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var i=Object.create(null);__webpack_require__.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,__webpack_require__.d(i,s),i}})(),__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="/";var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{hasBrowserEnv:()=>MD,hasStandardBrowserEnv:()=>jD,hasStandardBrowserWebWorkerEnv:()=>FD});var t,n=__webpack_require__(5043),r=__webpack_require__.t(n,2),i=__webpack_require__(4391),s=__webpack_require__(7950),o=__webpack_require__.t(s,2);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,d=s.history,f=t.Pop,m=null,g=_();function _(){return(d.state||{idx:null}).idx}function v(){f=t.Pop;let e=_(),n=null==e?null:e-g;g=e,m&&m({action:f,location:E.location,delta:n})}function y(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,d.replaceState(a({},d.state,{idx:g}),""));let E={get action(){return f},get location(){return e(s,d)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(c,v),m=e,()=>{s.removeEventListener(c,v),m=null}},createHref:e=>n(s,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;let i=h(E.location,e,n);r&&r(i,e),g=_()+1;let a=u(i,g),c=E.createHref(i);try{d.pushState(a,"",c)}catch(pv){if(pv instanceof DOMException&&"DataCloneError"===pv.name)throw pv;s.location.assign(c)}o&&m&&m({action:f,location:E.location,delta:1})},replace:function(e,n){f=t.Replace;let i=h(E.location,e,n);r&&r(i,e),g=_();let s=u(i,g),a=E.createHref(i);d.replaceState(s,"",a),o&&m&&m({action:f,location:E.location,delta:0})},go:e=>d.go(e)};return E}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function _(e,t,n){void 0===n&&(n="/");let r=k(("string"===typeof t?f(t):t).pathname||"/",n);if(null==r)return null;let i=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=A(r);s=N(i[o],e)}return s}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(l(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=M([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),v(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:I(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=y(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const E=/^:[\w-]+$/,b=3,T=2,S=1,w=10,C=-2,R=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(R)&&(r+=C),t&&(r+=T),n.filter((e=>!R(e))).reduce(((e,t)=>e+(E.test(t)?b:""===t?S:w)),r)}function N(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},c);if(!l)return null;Object.assign(r,l.params);let d=e.route;s.push({params:r,pathname:M([i,l.pathname]),pathnameBase:j(M([i,l.pathnameBase])),route:d}),"/"!==l.pathnameBase&&(i=M([i,l.pathnameBase]))}return s}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function A(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(pv){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+pv+")."),e}}function k(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function x(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function D(e,t){let n=P(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=a({},e),l(!i.pathname||!i.pathname.includes("?"),x("?","pathname","search",i)),l(!i.pathname||!i.pathname.includes("#"),x("#","pathname","hash",i)),l(!i.search||!i.search.includes("#"),x("#","search","hash",i)));let s,o=""===e||""===i.pathname,c=o?"/":i.pathname;if(null==c)s=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:U(r),hash:F(i)}}(i,s),u=c&&"/"!==c&&c.endsWith("/"),h=(o||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const M=e=>e.join("/").replace(/\/\/+/g,"/"),j=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],G=(new Set(V),["get",...V]);new Set(G),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const W=n.createContext(null);const z=n.createContext(null);const q=n.createContext(null);const K=n.createContext(null);const Y=n.createContext({outlet:null,matches:[],isDataRoute:!1});const J=n.createContext(null);function X(){return null!=n.useContext(K)}function Z(){return X()||l(!1),n.useContext(K).location}function Q(e){n.useContext(q).static||n.useLayoutEffect(e)}function $(){let{isDataRoute:e}=n.useContext(Y);return e?function(){let{router:e}=ue(le.UseNavigateStable),t=pe(de.UseNavigateStable),r=n.useRef(!1);Q((()=>{r.current=!0}));let i=n.useCallback((function(n,i){void 0===i&&(i={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,H({fromRouteId:t},i)))}),[e,t]);return i}():function(){X()||l(!1);let e=n.useContext(W),{basename:t,future:r,navigator:i}=n.useContext(q),{matches:s}=n.useContext(Y),{pathname:o}=Z(),a=JSON.stringify(D(s,r.v7_relativeSplatPath)),c=n.useRef(!1);Q((()=>{c.current=!0}));let d=n.useCallback((function(n,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof n)return void i.go(n);let s=L(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:M([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e]);return d}()}const ee=n.createContext(null);function te(){let{matches:e}=n.useContext(Y),t=e[e.length-1];return t?t.params:{}}function ne(e,t){let{relative:r}=void 0===t?{}:t,{future:i}=n.useContext(q),{matches:s}=n.useContext(Y),{pathname:o}=Z(),a=JSON.stringify(D(s,i.v7_relativeSplatPath));return n.useMemo((()=>L(e,JSON.parse(a),o,"path"===r)),[e,a,o,r])}function re(e,r,i,s){X()||l(!1);let{navigator:o}=n.useContext(q),{matches:a}=n.useContext(Y),c=a[a.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,p=Z();if(r){var m;let e="string"===typeof r?f(r):r;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||l(!1),h=e}else h=p;let g=h.pathname||"/",v=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=_(e,{pathname:v});let E=ce(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:M([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:M([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return r&&E?n.createElement(K.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},E):E}function ie(){let e=function(){var e;let t=n.useContext(J),r=he(de.UseRouteError),i=pe(de.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[i]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:s},r):null,null)}const se=n.createElement(ie,null);class oe extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(Y.Provider,{value:this.props.routeContext},n.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:r,children:i}=e,s=n.useContext(W);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(Y.Provider,{value:t},i)}function ce(e,t,r,i){var s;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var o;if(null==(o=r)||!o.errors)return null;e=r.matches}let a=e,c=null==(s=r)?void 0:s.errors;if(null!=c){let e=a.findIndex((e=>e.route.id&&(null==c?void 0:c[e.route.id])));e>=0||l(!1),a=a.slice(0,Math.min(a.length,e+1))}let d=!1,u=-1;if(r&&i&&i.v7_partialHydration)for(let n=0;n<a.length;n++){let e=a[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=n),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){d=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,l=!1,h=null,p=null;var f;r&&(o=c&&i.route.id?c[i.route.id]:void 0,h=i.route.errorElement||se,d&&(u<0&&0===s?(f="route-fallback",!1||fe[f]||(fe[f]=!0),l=!0,p=null):u===s&&(l=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?h:l?p:i.route.Component?n.createElement(i.route.Component,null):i.route.element?i.route.element:e,n.createElement(ae,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:t})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?n.createElement(oe,{location:r.location,revalidation:r.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function ue(e){let t=n.useContext(W);return t||l(!1),t}function he(e){let t=n.useContext(z);return t||l(!1),t}function pe(e){let t=function(e){let t=n.useContext(Y);return t||l(!1),t}(),r=t.matches[t.matches.length-1];return r.route.id||l(!1),r.route.id}const fe={};r.startTransition;function me(e){return function(e){let t=n.useContext(Y).outlet;return t?n.createElement(ee.Provider,{value:e},t):t}(e.context)}function ge(e){l(!1)}function _e(e){let{basename:r="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:c=!1,future:d}=e;X()&&l(!1);let u=r.replace(/^\/*/,"/"),h=n.useMemo((()=>({basename:u,navigator:a,static:c,future:H({v7_relativeSplatPath:!1},d)})),[u,d,a,c]);"string"===typeof s&&(s=f(s));let{pathname:p="/",search:m="",hash:g="",state:_=null,key:v="default"}=s,y=n.useMemo((()=>{let e=k(p,u);return null==e?null:{location:{pathname:e,search:m,hash:g,state:_,key:v},navigationType:o}}),[u,p,m,g,_,v,o]);return null==y?null:n.createElement(q.Provider,{value:h},n.createElement(K.Provider,{children:i,value:y}))}function ve(e){let{children:t,location:n}=e;return re(ye(t),n)}new Promise((()=>{}));n.Component;function ye(e,t){void 0===t&&(t=[]);let r=[];return n.Children.forEach(e,((e,i)=>{if(!n.isValidElement(e))return;let s=[...t,i];if(e.type===n.Fragment)return void r.push.apply(r,ye(e.props.children,s));e.type!==ge&&l(!1),e.props.index&&e.props.children&&l(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ye(e.props.children,s)),r.push(o)})),r}function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}function be(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Te=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(AL){}new Map;const Se=r.startTransition;o.flushSync,r.useId;function we(e){let{basename:t,children:r,future:i,window:s}=e,o=n.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),m((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=f(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:p(t))}),(function(e,t){d("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}({window:s,v5Compat:!0}));let a=o.current,[c,l]=n.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},g=n.useCallback((e=>{u&&Se?Se((()=>l(e))):l(e)}),[l,u]);return n.useLayoutEffect((()=>a.listen(g)),[a,g]),n.createElement(_e,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:a,future:i})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Re=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=n.forwardRef((function(e,t){let r,{onClick:i,relative:s,reloadDocument:o,replace:a,state:c,target:d,to:u,preventScrollReset:h,unstable_viewTransition:f}=e,m=be(e,Te),{basename:g}=n.useContext(q),_=!1;if("string"===typeof u&&Re.test(u)&&(r=u,Ce))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=k(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:_=!0}catch(AL){}let v=function(e,t){let{relative:r}=void 0===t?{}:t;X()||l(!1);let{basename:i,navigator:s}=n.useContext(q),{hash:o,pathname:a,search:c}=ne(e,{relative:r}),d=a;return"/"!==i&&(d="/"===a?i:M([i,a])),s.createHref({pathname:d,search:c,hash:o})}(u,{relative:s}),y=function(e,t){let{target:r,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:c}=void 0===t?{}:t,l=$(),d=Z(),u=ne(e,{relative:a});return n.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:p(d)===p(u);l(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:c})}}),[d,l,u,i,s,r,e,o,a,c])}(u,{replace:a,state:c,target:d,preventScrollReset:h,relative:s,unstable_viewTransition:f});return n.createElement("a",Ee({},m,{href:r||v,onClick:_||o?i:function(e){i&&i(e),e.defaultPrevented||y(e)},ref:t,target:d}))}));var Ne,Oe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ne||(Ne={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Oe||(Oe={}));var Ae=__webpack_require__(579);const ke=()=>(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsxs)("footer",{children:[(0,Ae.jsx)("div",{className:"footer-top",children:(0,Ae.jsx)("div",{className:"container",children:(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-5",children:[(0,Ae.jsx)("h5",{children:"Useful Links"}),(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-sm-6",children:(0,Ae.jsxs)("ul",{className:"list-unstyled",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/",children:[(0,Ae.jsx)("i",{className:"fa fa-caret-right"})," Home"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/about-us",children:[(0,Ae.jsx)("i",{className:"fa fa-caret-right"})," About Us"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/contact-us",children:[(0,Ae.jsx)("i",{className:"fa fa-caret-right"})," Contact Us"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/privacy-policy",children:[(0,Ae.jsx)("i",{className:"fa fa-caret-right"})," Privacy Policy"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/faq",children:[(0,Ae.jsx)("i",{className:"fa fa-caret-right"})," FAQs"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"#.",children:[(0,Ae.jsx)("i",{className:"fa fa-caret-right"})," Blog"]})})]})}),(0,Ae.jsx)("div",{className:"col-sm-6",children:(0,Ae.jsxs)("ul",{className:"list-unstyled",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/terms-and-conditions",children:[(0,Ae.jsx)("i",{className:"fa fa-caret-right"})," Terms & Conditions"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"#.",children:[(0,Ae.jsx)("i",{className:"fa fa-caret-right"})," Refund & Cancellation Policy"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/customer_support",children:[(0,Ae.jsx)("i",{className:"fa fa-caret-right"})," Customer Support"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/disclaimer",children:[(0,Ae.jsx)("i",{className:"fa fa-caret-right"})," Disclaimer"]})})]})})]})]}),(0,Ae.jsxs)("div",{className:"col-md-3",children:[(0,Ae.jsx)("h5",{children:"Social Links"}),(0,Ae.jsxs)("ul",{className:"social-icon",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"#.",title:"",target:"_blank",children:(0,Ae.jsx)("p",{children:(0,Ae.jsx)("i",{className:"fa fa-facebook-f"})})})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"#.",title:"",target:"_blank",className:"mx-1",children:(0,Ae.jsx)("p",{children:(0,Ae.jsx)("i",{className:"fa fa-twitter"})})})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"#.",title:"",target:"_blank",children:(0,Ae.jsx)("p",{children:(0,Ae.jsx)("i",{className:"fa fa-linkedin"})})})})]}),(0,Ae.jsx)("h5",{className:"mt20",children:"Download App"}),(0,Ae.jsx)(Ie,{to:"#",children:(0,Ae.jsx)("img",{src:"./assets/images/google-play.png",width:120,alt:""})}),(0,Ae.jsx)(Ie,{to:"#",children:(0,Ae.jsx)("img",{src:"./assets/images/app-store.png",width:120,alt:"",className:"mx-1"})})]}),(0,Ae.jsxs)("div",{className:"col-md-4 addressBx",children:[(0,Ae.jsx)("h5",{children:"Office Address"}),(0,Ae.jsxs)("ul",{children:[(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-home"})," ",(0,Ae.jsx)("span",{className:"text16",children:"Dizital"})]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-map-marker"}),"P\xf6seldorfer Weg 13, 20148 Hamburg"]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-phone"})," ",(0,Ae.jsx)(Ie,{to:"tel:03341816636",children:"+4901728250794"})]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-envelope"})," ",(0,Ae.jsx)(Ie,{to:"mailto:support@dzital.de",children:"ak@dzital.com"})]})]})]})]})})}),(0,Ae.jsx)("div",{className:"footer-bottom",children:(0,Ae.jsx)("div",{className:"container",children:(0,Ae.jsx)("div",{className:"row",children:(0,Ae.jsx)("div",{className:"col-xs-12",align:"center",children:"\xa9 copyright 2023 dzital.de All rights reserved."})})})})]})});var xe=__webpack_require__(8139),Pe=__webpack_require__.n(xe);const De=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},Le=n.createContext(null);var Me=__webpack_require__(8168),je=__webpack_require__(8587);__webpack_require__(2740);function Ue(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Fe(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Be(e,t){return Object.keys(t).reduce((function(r,i){var s,o=r,a=o[Ue(i)],c=o[i],l=(0,je.A)(o,[Ue(i),i].map(Fe)),d=t[i],u=function(e,t,r){var i=(0,n.useRef)(void 0!==e),s=(0,n.useState)(t),o=s[0],a=s[1],c=void 0!==e,l=i.current;return i.current=c,!c&&l&&o!==t&&a(t),[c?e:o,(0,n.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),a(e)}),[r])]}(c,a,e[d]),h=u[0],p=u[1];return(0,Me.A)({},l,((s={})[i]=h,s[d]=p,s))}),e)}function Ve(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function Ge(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function He(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Ve.__suppressDeprecationWarning=!0,Ge.__suppressDeprecationWarning=!0,He.__suppressDeprecationWarning=!0;const We=["xxl","xl","lg","md","sm","xs"],ze="xs",qe=n.createContext({prefixes:{},breakpoints:We,minBreakpoint:ze}),{Consumer:Ke,Provider:Ye}=qe;function Je(e,t){const{prefixes:r}=(0,n.useContext)(qe);return e||r[t]||t}function Xe(){const{dir:e}=(0,n.useContext)(qe);return"rtl"===e}const Ze=n.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i,...s}=e;n=Je(n,"navbar-brand");const o=i||(s.href?"a":"span");return(0,Ae.jsx)(o,{...s,ref:t,className:Pe()(r,n)})}));Ze.displayName="NavbarBrand";const Qe=Ze;function $e(e){return e&&e.ownerDocument||document}function et(e,t){return function(e){var t=$e(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var tt=/([A-Z])/g;var nt=/^ms-/;function rt(e){return function(e){return e.replace(tt,"-$1").toLowerCase()}(e).replace(nt,"-ms-")}var it=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const st=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(rt(t))||et(e).getPropertyValue(rt(t));Object.keys(t).forEach((function(i){var s=t[i];s||0===s?!function(e){return!(!e||!it.test(e))}(i)?n+=rt(i)+": "+s+";":r+=i+"("+s+") ":e.style.removeProperty(rt(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ot(e,t)}function at(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ot(e,t)}const ct=!1,lt=n.createContext(null);var dt="unmounted",ut="exited",ht="entering",pt="entered",ft="exiting",mt=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(i=ut,r.appearStatus=ht):i=pt:i=t.unmountOnExit||t.mountOnEnter?dt:ut,r.state={status:i},r.nextCallback=null,r}at(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===dt?{status:ut}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==ht&&n!==pt&&(t=ht):n!==ht&&n!==pt||(t=ft)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===ht){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ut&&this.setState({status:dt})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[s.findDOMNode(this),r],o=i[0],a=i[1],c=this.getTimeouts(),l=r?c.appear:c.enter;!e&&!n||ct?this.safeSetState({status:pt},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:ht},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:pt},(function(){t.props.onEntered(o,a)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!ct?(this.props.onExit(r),this.safeSetState({status:ft},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:ut},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:ut},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===dt)return null;var t=this.props,r=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,je.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return n.createElement(lt.Provider,{value:null},"function"===typeof r?r(e,i):n.cloneElement(n.Children.only(r),i))},t}(n.Component);function gt(){}mt.contextType=lt,mt.propTypes={},mt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:gt,onEntering:gt,onEntered:gt,onExit:gt,onExiting:gt,onExited:gt},mt.UNMOUNTED=dt,mt.EXITED=ut,mt.ENTERING=ht,mt.ENTERED=pt,mt.EXITING=ft;const _t=mt,vt=!("undefined"===typeof window||!window.document||!window.document.createElement);var yt=!1,Et=!1;try{var bt={get passive(){return yt=!0},get once(){return Et=yt=!0}};vt&&(window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,!0))}catch(AL){}const Tt=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Et){var i=r.once,s=r.capture,o=n;!Et&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=o),e.addEventListener(t,o,yt?r:s)}e.addEventListener(t,n,r)};const St=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const wt=function(e,t,n,r){return Tt(e,t,n,r),function(){St(e,t,n,r)}};function Ct(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),s=wt(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),s()}}function Rt(e,t,n,r){null==n&&(n=function(e){var t=st(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=Ct(e,n,r),s=wt(e,"transitionend",t);return function(){i(),s()}}function It(e,t){const n=st(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function Nt(e,t){const n=It(e,"transitionDuration"),r=It(e,"transitionDelay"),i=Rt(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}const Ot=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>null!=e)).reduce(((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)};function At(e){e.offsetHeight}const kt=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const xt=function(e,t){return(0,n.useMemo)((()=>function(e,t){const n=kt(e),r=kt(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])};const Pt=n.forwardRef(((e,t)=>{let{onEnter:r,onEntering:i,onEntered:o,onExit:a,onExiting:c,onExited:l,addEndListener:d,children:u,childRef:h,...p}=e;const f=(0,n.useRef)(null),m=xt(f,h),g=e=>{var t;m((t=e)&&"setState"in t?s.findDOMNode(t):null!=t?t:null)},_=e=>t=>{e&&f.current&&e(f.current,t)},v=(0,n.useCallback)(_(r),[r]),y=(0,n.useCallback)(_(i),[i]),E=(0,n.useCallback)(_(o),[o]),b=(0,n.useCallback)(_(a),[a]),T=(0,n.useCallback)(_(c),[c]),S=(0,n.useCallback)(_(l),[l]),w=(0,n.useCallback)(_(d),[d]);return(0,Ae.jsx)(_t,{ref:t,...p,onEnter:v,onEntered:E,onEntering:y,onExit:b,onExited:S,onExiting:T,addEndListener:w,nodeRef:f,children:"function"===typeof u?(e,t)=>u(e,{...t,ref:g}):n.cloneElement(u,{ref:g})})})),Dt=Pt,Lt={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Mt(e,t){const n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=Lt[e];return n+parseInt(st(t,r[0]),10)+parseInt(st(t,r[1]),10)}const jt={[ut]:"collapse",[ft]:"collapsing",[ht]:"collapsing",[pt]:"collapse show"},Ut=n.forwardRef(((e,t)=>{let{onEnter:r,onEntering:i,onEntered:s,onExit:o,onExiting:a,className:c,children:l,dimension:d="height",in:u=!1,timeout:h=300,mountOnEnter:p=!1,unmountOnExit:f=!1,appear:m=!1,getDimensionValue:g=Mt,..._}=e;const v="function"===typeof d?d():d,y=(0,n.useMemo)((()=>Ot((e=>{e.style[v]="0"}),r)),[v,r]),E=(0,n.useMemo)((()=>Ot((e=>{const t="scroll".concat(v[0].toUpperCase()).concat(v.slice(1));e.style[v]="".concat(e[t],"px")}),i)),[v,i]),b=(0,n.useMemo)((()=>Ot((e=>{e.style[v]=null}),s)),[v,s]),T=(0,n.useMemo)((()=>Ot((e=>{e.style[v]="".concat(g(v,e),"px"),At(e)}),o)),[o,g,v]),S=(0,n.useMemo)((()=>Ot((e=>{e.style[v]=null}),a)),[v,a]);return(0,Ae.jsx)(Dt,{ref:t,addEndListener:Nt,..._,"aria-expanded":_.role?u:null,onEnter:y,onEntering:E,onEntered:b,onExit:T,onExiting:S,childRef:l.ref,in:u,timeout:h,mountOnEnter:p,unmountOnExit:f,appear:m,children:(e,t)=>n.cloneElement(l,{...t,className:Pe()(c,l.props.className,jt[e],"width"===v&&"collapse-horizontal")})})})),Ft=Ut,Bt=n.createContext(null);Bt.displayName="NavbarContext";const Vt=Bt,Gt=n.forwardRef(((e,t)=>{let{children:r,bsPrefix:i,...s}=e;i=Je(i,"navbar-collapse");const o=(0,n.useContext)(Vt);return(0,Ae.jsx)(Ft,{in:!(!o||!o.expanded),...s,children:(0,Ae.jsx)("div",{ref:t,className:i,children:r})})}));Gt.displayName="NavbarCollapse";const Ht=Gt;const Wt=function(e){const t=(0,n.useRef)(e);return(0,n.useEffect)((()=>{t.current=e}),[e]),t};function zt(e){const t=Wt(e);return(0,n.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}const qt=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:i,children:s,label:o="Toggle navigation",as:a="button",onClick:c,...l}=e;r=Je(r,"navbar-toggler");const{onToggle:d,expanded:u}=(0,n.useContext)(Vt)||{},h=zt((e=>{c&&c(e),d&&d()}));return"button"===a&&(l.type="button"),(0,Ae.jsx)(a,{...l,ref:t,onClick:h,"aria-label":o,className:Pe()(i,r,!u&&"collapsed"),children:s||(0,Ae.jsx)("span",{className:"".concat(r,"-icon")})})}));qt.displayName="NavbarToggle";const Kt=qt,Yt="undefined"!==typeof __webpack_require__.g&&__webpack_require__.g.navigator&&"ReactNative"===__webpack_require__.g.navigator.product,Jt="undefined"!==typeof document||Yt?n.useLayoutEffect:n.useEffect,Xt=new WeakMap,Zt=(e,t)=>{if(!e||!t)return;const n=Xt.get(t)||new Map;Xt.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function Qt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const r=Zt(e,t),[i,s]=(0,n.useState)((()=>!!r&&r.matches));return Jt((()=>{let n=Zt(e,t);if(!n)return s(!1);let r=Xt.get(t);const i=()=>{s(n.matches)};return n.refCount++,n.addListener(i),i(),()=>{n.removeListener(i),n.refCount--,n.refCount<=0&&(null==r||r.delete(n.media)),n=void 0}}),[e]),i}const $t=function(e){const t=Object.keys(e);function r(e,t){return e===t?t:e?"".concat(e," and ").concat(t):t}function i(n){const r=function(e){return t[Math.min(t.indexOf(e)+1,t.length-1)]}(n);let i=e[r];return i="number"===typeof i?"".concat(i-.2,"px"):"calc(".concat(i," - 0.2px)"),"(max-width: ".concat(i,")")}return function(t,s,o){let a;"object"===typeof t?(a=t,o=s,s=!0):(s=s||!0,a={[t]:s});let c=(0,n.useMemo)((()=>Object.entries(a).reduce(((t,n)=>{let[s,o]=n;return"up"!==o&&!0!==o||(t=r(t,function(t){let n=e[t];return"number"===typeof n&&(n="".concat(n,"px")),"(min-width: ".concat(n,")")}(s))),"down"!==o&&!0!==o||(t=r(t,i(s))),t}),"")),[JSON.stringify(a)]);return Qt(c,o)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),en=$t;function tn(e){void 0===e&&(e=$e());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(AL){return e.body}}function nn(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function rn(){const e=(0,n.useRef)(!0),t=(0,n.useRef)((()=>e.current));return(0,n.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}function sn(e){const t=function(e){const t=(0,n.useRef)(e);return t.current=e,t}(e);(0,n.useEffect)((()=>()=>t.current()),[])}function on(e){const t=(0,n.useRef)(null);return(0,n.useEffect)((()=>{t.current=e})),t.current}const an="data-rr-ui-";function cn(e){return"".concat(an).concat(e)}const ln=cn("modal-open");const dn=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(st(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(ln,""),st(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(ln),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},un=(0,n.createContext)(vt?window:void 0);un.Provider;function hn(){return(0,n.useContext)(un)}const pn=(e,t)=>vt?null==e?(t||$e()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const fn=function(e){let{children:t,in:r,onExited:i,mountOnEnter:s,unmountOnExit:o}=e;const a=(0,n.useRef)(null),c=(0,n.useRef)(r),l=zt(i);(0,n.useEffect)((()=>{r?c.current=!0:l(a.current)}),[r,l]);const d=xt(a,t.ref),u=(0,n.cloneElement)(t,{ref:d});return r?u:o||!c.current&&s?null:u},mn=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function gn(e){let{onEnter:t,onEntering:r,onEntered:i,onExit:s,onExiting:o,onExited:a,addEndListener:c,children:l}=e,d=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,mn);const u=(0,n.useRef)(null),h=xt(u,"function"===typeof l?null:l.ref),p=e=>t=>{e&&u.current&&e(u.current,t)},f=(0,n.useCallback)(p(t),[t]),m=(0,n.useCallback)(p(r),[r]),g=(0,n.useCallback)(p(i),[i]),_=(0,n.useCallback)(p(s),[s]),v=(0,n.useCallback)(p(o),[o]),y=(0,n.useCallback)(p(a),[a]),E=(0,n.useCallback)(p(c),[c]);return Object.assign({},d,{nodeRef:u},t&&{onEnter:f},r&&{onEntering:m},i&&{onEntered:g},s&&{onExit:_},o&&{onExiting:v},a&&{onExited:y},c&&{addEndListener:E},{children:"function"===typeof l?(e,t)=>l(e,Object.assign({},t,{ref:h})):(0,n.cloneElement)(l,{ref:h})})}const _n=["component"];const vn=n.forwardRef(((e,t)=>{let{component:n}=e;const r=gn(function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,_n));return(0,Ae.jsx)(n,Object.assign({ref:t},r))})),yn=vn;function En(e){let{children:t,in:r,onExited:i,onEntered:s,transition:o}=e;const[a,c]=(0,n.useState)(!r);r&&a&&c(!1);const l=function(e){let{in:t,onTransition:r}=e;const i=(0,n.useRef)(null),s=(0,n.useRef)(!0),o=zt(r);return Jt((()=>{if(!i.current)return;let e=!1;return o({in:t,element:i.current,initial:s.current,isStale:()=>e}),()=>{e=!0}}),[t,o]),Jt((()=>(s.current=!1,()=>{s.current=!0})),[]),i}({in:!!r,onTransition:e=>{Promise.resolve(o(e)).then((()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(c(!0),null==i||i(e.element)))}),(t=>{throw e.in||c(!0),t}))}}),d=xt(l,t.ref);return a&&!r?null:(0,n.cloneElement)(t,{ref:d})}function bn(e,t,n){return e?(0,Ae.jsx)(yn,Object.assign({},n,{component:e})):t?(0,Ae.jsx)(En,Object.assign({},n,{transition:t})):(0,Ae.jsx)(fn,Object.assign({},n))}const Tn=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let Sn;function wn(e){const t=hn(),r=e||function(e){return Sn||(Sn=new dn({ownerDocument:null==e?void 0:e.document})),Sn}(t),i=(0,n.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>r.add(i.current),remove:()=>r.remove(i.current),isTopModal:()=>r.isTopModal(i.current),setDialogRef:(0,n.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,n.useCallback)((e=>{i.current.backdrop=e}),[])})}const Cn=(0,n.forwardRef)(((e,t)=>{let{show:r=!1,role:i="dialog",className:o,style:a,children:c,backdrop:l=!0,keyboard:d=!0,onBackdropClick:u,onEscapeKeyDown:h,transition:p,runTransition:f,backdropTransition:m,runBackdropTransition:g,autoFocus:_=!0,enforceFocus:v=!0,restoreFocus:y=!0,restoreFocusOptions:E,renderDialog:b,renderBackdrop:T=(e=>(0,Ae.jsx)("div",Object.assign({},e))),manager:S,container:w,onShow:C,onHide:R=(()=>{}),onExit:I,onExited:N,onExiting:O,onEnter:A,onEntering:k,onEntered:x}=e,P=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Tn);const D=hn(),L=function(e,t){const r=hn(),[i,s]=(0,n.useState)((()=>pn(e,null==r?void 0:r.document)));if(!i){const t=pn(e);t&&s(t)}return(0,n.useEffect)((()=>{t&&i&&t(i)}),[t,i]),(0,n.useEffect)((()=>{const t=pn(e);t!==i&&s(t)}),[e,i]),i}(w),M=wn(S),j=rn(),U=on(r),[F,B]=(0,n.useState)(!r),V=(0,n.useRef)(null);(0,n.useImperativeHandle)(t,(()=>M),[M]),vt&&!U&&r&&(V.current=tn(null==D?void 0:D.document)),r&&F&&B(!1);const G=zt((()=>{if(M.add(),Y.current=wt(document,"keydown",q),K.current=wt(document,"focus",(()=>setTimeout(W)),!0),C&&C(),_){var e,t;const n=tn(null!=(e=null==(t=M.dialog)?void 0:t.ownerDocument)?e:null==D?void 0:D.document);M.dialog&&n&&!nn(M.dialog,n)&&(V.current=n,M.dialog.focus())}})),H=zt((()=>{var e;(M.remove(),null==Y.current||Y.current(),null==K.current||K.current(),y)&&(null==(e=V.current)||null==e.focus||e.focus(E),V.current=null)}));(0,n.useEffect)((()=>{r&&L&&G()}),[r,L,G]),(0,n.useEffect)((()=>{F&&H()}),[F,H]),sn((()=>{H()}));const W=zt((()=>{if(!v||!j()||!M.isTopModal())return;const e=tn(null==D?void 0:D.document);M.dialog&&e&&!nn(M.dialog,e)&&M.dialog.focus()})),z=zt((e=>{e.target===e.currentTarget&&(null==u||u(e),!0===l&&R())})),q=zt((e=>{d&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&M.isTopModal()&&(null==h||h(e),e.defaultPrevented||R())})),K=(0,n.useRef)(),Y=(0,n.useRef)();if(!L)return null;const J=Object.assign({role:i,ref:M.setDialogRef,"aria-modal":"dialog"===i||void 0},P,{style:a,className:o,tabIndex:-1});let X=b?b(J):(0,Ae.jsx)("div",Object.assign({},J,{children:n.cloneElement(c,{role:"document"})}));X=bn(p,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!r,onExit:I,onExiting:O,onExited:function(){B(!0),null==N||N(...arguments)},onEnter:A,onEntering:k,onEntered:x,children:X});let Z=null;return l&&(Z=T({ref:M.setBackdropRef,onClick:z}),Z=bn(m,g,{in:!!r,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Z})),(0,Ae.jsx)(Ae.Fragment,{children:s.createPortal((0,Ae.jsxs)(Ae.Fragment,{children:[Z,X]}),L)})}));Cn.displayName="Modal";const Rn=Object.assign(Cn,{Manager:dn}),In={[ht]:"show",[pt]:"show"},Nn=n.forwardRef(((e,t)=>{let{className:r,children:i,transitionClasses:s={},onEnter:o,...a}=e;const c={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},l=(0,n.useCallback)(((e,t)=>{At(e),null==o||o(e,t)}),[o]);return(0,Ae.jsx)(Dt,{ref:t,addEndListener:Nt,...c,onEnter:l,childRef:i.ref,children:(e,t)=>n.cloneElement(i,{...t,className:Pe()("fade",r,i.props.className,In[e],s[e])})})}));Nn.displayName="Fade";const On=Nn,An=n.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Je(r,"offcanvas-body"),(0,Ae.jsx)(i,{ref:t,className:Pe()(n,r),...s})}));An.displayName="OffcanvasBody";const kn=An,xn={[ht]:"show",[pt]:"show"},Pn=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:i,children:s,in:o=!1,mountOnEnter:a=!1,unmountOnExit:c=!1,appear:l=!1,...d}=e;return r=Je(r,"offcanvas"),(0,Ae.jsx)(Dt,{ref:t,addEndListener:Nt,in:o,mountOnEnter:a,unmountOnExit:c,appear:l,...d,childRef:s.ref,children:(e,t)=>n.cloneElement(s,{...t,className:Pe()(i,s.props.className,(e===ht||e===ft)&&"".concat(r,"-toggling"),xn[e])})})}));Pn.displayName="OffcanvasToggling";const Dn=Pn,Ln=n.createContext({onHide(){}});var Mn=__webpack_require__(5173),jn=__webpack_require__.n(Mn);const Un={"aria-label":jn().string,onClick:jn().func,variant:jn().oneOf(["white"])},Fn=n.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":i="Close",...s}=e;return(0,Ae.jsx)("button",{ref:t,type:"button",className:Pe()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":i,...s})}));Fn.displayName="CloseButton",Fn.propTypes=Un;const Bn=Fn,Vn=n.forwardRef(((e,t)=>{let{closeLabel:r="Close",closeVariant:i,closeButton:s=!1,onHide:o,children:a,...c}=e;const l=(0,n.useContext)(Ln),d=zt((()=>{null==l||l.onHide(),null==o||o()}));return(0,Ae.jsxs)("div",{ref:t,...c,children:[a,s&&(0,Ae.jsx)(Bn,{"aria-label":r,variant:i,onClick:d})]})})),Gn=Vn,Hn=n.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:s=!1,...o}=e;return n=Je(n,"offcanvas-header"),(0,Ae.jsx)(Gn,{ref:t,...o,className:Pe()(r,n),closeLabel:i,closeButton:s})}));Hn.displayName="OffcanvasHeader";const Wn=Hn,zn=e=>n.forwardRef(((t,n)=>(0,Ae.jsx)("div",{...t,ref:n,className:Pe()(t.className,e)}))),qn=zn("h5"),Kn=n.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=qn,...s}=e;return r=Je(r,"offcanvas-title"),(0,Ae.jsx)(i,{ref:t,className:Pe()(n,r),...s})}));Kn.displayName="OffcanvasTitle";const Yn=Kn;var Jn=Function.prototype.bind.call(Function.prototype.call,[].slice);function Xn(e,t){return Jn(e.querySelectorAll(t))}function Zn(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Qn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",$n=".sticky-top",er=".navbar-toggler";class tr extends dn{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,st(t,{[e]:"".concat(parseFloat(st(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],st(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Xn(t,Qn).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),Xn(t,$n).forEach((t=>this.adjustAndStore(s,t,-e.scrollBarWidth))),Xn(t,er).forEach((t=>this.adjustAndStore(s,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=Zn(n.className,r):n.setAttribute("class",Zn(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Xn(t,Qn).forEach((e=>this.restore(i,e))),Xn(t,$n).forEach((e=>this.restore(s,e))),Xn(t,er).forEach((e=>this.restore(s,e)))}}let nr;function rr(e){return nr||(nr=new tr(e)),nr}const ir=tr;function sr(e){return(0,Ae.jsx)(Dn,{...e})}function or(e){return(0,Ae.jsx)(On,{...e})}const ar=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:i,children:s,"aria-labelledby":o,placement:a="start",responsive:c,show:l=!1,backdrop:d=!0,keyboard:u=!0,scroll:h=!1,onEscapeKeyDown:p,onShow:f,onHide:m,container:g,autoFocus:_=!0,enforceFocus:v=!0,restoreFocus:y=!0,restoreFocusOptions:E,onEntered:b,onExit:T,onExiting:S,onEnter:w,onEntering:C,onExited:R,backdropClassName:I,manager:N,renderStaticNode:O=!1,...A}=e;const k=(0,n.useRef)();r=Je(r,"offcanvas");const{onToggle:x}=(0,n.useContext)(Vt)||{},[P,D]=(0,n.useState)(!1),L=en(c||"xs","up");(0,n.useEffect)((()=>{D(c?l&&!L:l)}),[l,c,L]);const M=zt((()=>{null==x||x(),null==m||m()})),j=(0,n.useMemo)((()=>({onHide:M})),[M]);const U=(0,n.useCallback)((e=>(0,Ae.jsx)("div",{...e,className:Pe()("".concat(r,"-backdrop"),I)})),[I,r]),F=e=>(0,Ae.jsx)("div",{...e,...A,className:Pe()(i,c?"".concat(r,"-").concat(c):r,"".concat(r,"-").concat(a)),"aria-labelledby":o,children:s});return(0,Ae.jsxs)(Ae.Fragment,{children:[!P&&(c||O)&&F({}),(0,Ae.jsx)(Ln.Provider,{value:j,children:(0,Ae.jsx)(Rn,{show:P,ref:t,backdrop:d,container:g,keyboard:u,autoFocus:_,enforceFocus:v&&!h,restoreFocus:y,restoreFocusOptions:E,onEscapeKeyDown:p,onShow:f,onHide:M,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==w||w(e,...n)},onEntering:C,onEntered:b,onExit:T,onExiting:S,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==R||R(...n)},manager:N||(h?(k.current||(k.current=new ir({handleContainerOverflow:!1})),k.current):rr()),transition:sr,backdropTransition:or,renderBackdrop:U,renderDialog:F})})]})}));ar.displayName="Offcanvas";const cr=Object.assign(ar,{Body:kn,Header:Wn,Title:Yn}),lr=n.forwardRef(((e,t)=>{const r=(0,n.useContext)(Vt);return(0,Ae.jsx)(cr,{ref:t,show:!(null==r||!r.expanded),...e,renderStaticNode:!0})}));lr.displayName="NavbarOffcanvas";const dr=lr,ur=n.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...s}=e;return r=Je(r,"navbar-text"),(0,Ae.jsx)(i,{ref:t,className:Pe()(n,r),...s})}));ur.displayName="NavbarText";const hr=ur,pr=n.forwardRef(((e,t)=>{const{bsPrefix:r,expand:i=!0,variant:s="light",bg:o,fixed:a,sticky:c,className:l,as:d="nav",expanded:u,onToggle:h,onSelect:p,collapseOnSelect:f=!1,...m}=Be(e,{expanded:"onToggle"}),g=Je(r,"navbar"),_=(0,n.useCallback)((function(){null==p||p(...arguments),f&&u&&(null==h||h(!1))}),[p,f,u,h]);void 0===m.role&&"nav"!==d&&(m.role="navigation");let v="".concat(g,"-expand");"string"===typeof i&&(v="".concat(v,"-").concat(i));const y=(0,n.useMemo)((()=>({onToggle:()=>null==h?void 0:h(!u),bsPrefix:g,expanded:!!u,expand:i})),[g,u,i,h]);return(0,Ae.jsx)(Vt.Provider,{value:y,children:(0,Ae.jsx)(Le.Provider,{value:_,children:(0,Ae.jsx)(d,{ref:t,...m,className:Pe()(l,g,i&&v,s&&"".concat(g,"-").concat(s),o&&"bg-".concat(o),c&&"sticky-".concat(c),a&&"fixed-".concat(a))})})})}));pr.displayName="Navbar";const fr=Object.assign(pr,{Brand:Qe,Collapse:Ht,Offcanvas:dr,Text:hr,Toggle:Kt}),mr=n.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:i="div",className:s,...o}=e;const a=Je(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,Ae.jsx)(i,{ref:t,...o,className:Pe()(s,r?"".concat(a).concat(c):a)})}));mr.displayName="Container";const gr=mr;__webpack_require__(9197);function _r(){const[,e]=(0,n.useReducer)((e=>!e),!1);return e}const vr=n.createContext(null);vr.displayName="NavContext";const yr=vr,Er=n.createContext(null),br=["as","disabled"];function Tr(e){let{tagName:t,disabled:n,href:r,target:i,rel:s,role:o,onClick:a,tabIndex:c=0,type:l}=e;t||(t=null!=r||null!=i||null!=s?"a":"button");const d={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},d];const u=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?s:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},d]}const Sr=n.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,br);const[s,{tagName:o}]=Tr(Object.assign({tagName:n,disabled:r},i));return(0,Ae.jsx)(o,Object.assign({},i,s,{ref:t}))}));Sr.displayName="Button";const wr=Sr,Cr=["as","active","eventKey"];function Rr(e){let{key:t,onClick:r,active:i,id:s,role:o,disabled:a}=e;const c=(0,n.useContext)(Le),l=(0,n.useContext)(yr),d=(0,n.useContext)(Er);let u=i;const h={role:o};if(l){o||"tablist"!==l.role||(h.role="tab");const e=l.getControllerId(null!=t?t:null),n=l.getControlledId(null!=t?t:null);h[cn("event-key")]=t,h.id=e||s,u=null==i&&null!=t?l.activeKey===t:i,!u&&(null!=d&&d.unmountOnExit||null!=d&&d.mountOnEnter)||(h["aria-controls"]=n)}return"tab"===h.role&&(h["aria-selected"]=u,u||(h.tabIndex=-1),a&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=zt((e=>{a||(null==r||r(e),null!=t&&c&&!e.isPropagationStopped()&&c(t,e))})),[h,{isActive:u}]}const Ir=n.forwardRef(((e,t)=>{let{as:n=wr,active:r,eventKey:i}=e,s=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Cr);const[o,a]=Rr(Object.assign({key:De(i,s.href),active:r},s));return o[cn("active")]=a.isActive,(0,Ae.jsx)(n,Object.assign({},s,o,{ref:t}))}));Ir.displayName="NavItem";const Nr=Ir,Or=["as","onSelect","activeKey","role","onKeyDown"];const Ar=()=>{},kr=cn("event-key"),xr=n.forwardRef(((e,t)=>{let{as:r="div",onSelect:i,activeKey:s,role:o,onKeyDown:a}=e,c=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Or);const l=_r(),d=(0,n.useRef)(!1),u=(0,n.useContext)(Le),h=(0,n.useContext)(Er);let p,f;h&&(o=o||"tablist",s=h.activeKey,p=h.getControlledId,f=h.getControllerId);const m=(0,n.useRef)(null),g=e=>{const t=m.current;if(!t)return null;const n=Xn(t,"[".concat(kr,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const i=n.indexOf(r);if(-1===i)return null;let s=i+e;return s>=n.length&&(s=0),s<0&&(s=n.length-1),n[s]},_=(e,t)=>{null!=e&&(null==i||i(e,t),null==u||u(e,t))};(0,n.useEffect)((()=>{if(m.current&&d.current){const e=m.current.querySelector("[".concat(kr,"][aria-selected=true]"));null==e||e.focus()}d.current=!1}));const v=xt(t,m);return(0,Ae.jsx)(Le.Provider,{value:_,children:(0,Ae.jsx)(yr.Provider,{value:{role:o,activeKey:De(s),getControlledId:p||Ar,getControllerId:f||Ar},children:(0,Ae.jsx)(r,Object.assign({},c,{onKeyDown:e=>{if(null==a||a(e),!h)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=g(-1);break;case"ArrowRight":case"ArrowDown":t=g(1);break;default:return}var n;t&&(e.preventDefault(),_(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),d.current=!0,l())},ref:v,role:o}))})})}));xr.displayName="Nav";const Pr=Object.assign(xr,{Item:Nr}),Dr=n.createContext(null);Dr.displayName="CardHeaderContext";const Lr=Dr,Mr=n.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Je(r,"nav-item"),(0,Ae.jsx)(i,{ref:t,className:Pe()(n,r),...s})}));Mr.displayName="NavItem";const jr=Mr;function Ur(){return(0,n.useState)(null)}new WeakMap;const Fr=["onKeyDown"];const Br=n.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Fr);const[i]=Tr(Object.assign({tagName:"a"},r)),s=zt((e=>{i.onKeyDown(e),null==n||n(e)}));return(o=r.href)&&"#"!==o.trim()&&"button"!==r.role?(0,Ae.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,Ae.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:s}));var o}));Br.displayName="Anchor";const Vr=Br,Gr=n.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i=Vr,active:s,eventKey:o,disabled:a=!1,...c}=e;n=Je(n,"nav-link");const[l,d]=Rr({key:De(o,c.href),active:s,disabled:a,...c});return(0,Ae.jsx)(i,{...c,...l,ref:t,disabled:a,className:Pe()(r,n,a&&"disabled",d.isActive&&"active")})}));Gr.displayName="NavLink";const Hr=Gr,Wr=n.forwardRef(((e,t)=>{const{as:r="div",bsPrefix:i,variant:s,fill:o=!1,justify:a=!1,navbar:c,navbarScroll:l,className:d,activeKey:u,...h}=Be(e,{activeKey:"onSelect"}),p=Je(i,"nav");let f,m,g=!1;const _=(0,n.useContext)(Vt),v=(0,n.useContext)(Lr);return _?(f=_.bsPrefix,g=null==c||c):v&&({cardHeaderBsPrefix:m}=v),(0,Ae.jsx)(Pr,{as:r,ref:t,activeKey:u,className:Pe()(d,{[p]:!g,["".concat(f,"-nav")]:g,["".concat(f,"-nav-scroll")]:g&&l,["".concat(m,"-").concat(s)]:!!m,["".concat(p,"-").concat(s)]:!!s,["".concat(p,"-fill")]:o,["".concat(p,"-justified")]:a}),...h})}));Wr.displayName="Nav";const zr=Object.assign(Wr,{Item:jr,Link:Hr}),qr=(0,n.createContext)(),Kr=()=>(0,n.useContext)(qr),Yr=n.forwardRef(((e,t)=>{let{bsPrefix:n,variant:r,animation:i="border",size:s,as:o="div",className:a,...c}=e;n=Je(n,"spinner");const l="".concat(n,"-").concat(i);return(0,Ae.jsx)(o,{ref:t,...c,className:Pe()(a,l,s&&"".concat(l,"-").concat(s),r&&"text-".concat(r))})}));Yr.displayName="Spinner";const Jr=Yr;const Xr=__webpack_require__.p+"static/media/theme-color-logo.bf55eda374e82c3cda9bab8a08a9abf4.svg";const Zr=__webpack_require__.p+"static/media/user-Profil-icon.1799ea636bdd9de53cdd6b5b76e2d766.svg";const Qr=__webpack_require__.p+"static/media/map-marker-icon.fa9e8102c6f1b6ed0772a0cd64f7f1b5.svg";const $r=__webpack_require__.p+"static/media/white-search-icon.da1f0489fa7377e5ca7b2d1ee0b4f2aa.svg";function ei(e,t,r){const i=(0,n.useRef)(void 0!==e),[s,o]=(0,n.useState)(t),a=void 0!==e,c=i.current;return i.current=a,!a&&c&&s!==t&&o(t),[a?e:s,(0,n.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,...s]=t;let a=null==r?void 0:r(i,...s);return o(i),a}),[r])]}const ti=n.createContext(null);var ni=Object.prototype.hasOwnProperty;function ri(e,t,n){for(n of e.keys())if(ii(n,t))return n}function ii(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&ii(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((i=r)&&"object"===typeof i&&!(i=ri(t,i)))return!1;if(!t.has(i))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((i=r[0])&&"object"===typeof i&&!(i=ri(t,i)))return!1;if(!ii(r[1],t.get(i)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(ni.call(e,n)&&++r&&!ni.call(t,n))return!1;if(!(n in t)||!ii(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}const si=function(e){const t=rn();return[e[0],(0,n.useCallback)((n=>{if(t())return e[1](n)}),[t,e[1]])]};function oi(e){return e.split("-")[0]}function ai(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ci(e){return e instanceof ai(e).Element||e instanceof Element}function li(e){return e instanceof ai(e).HTMLElement||e instanceof HTMLElement}function di(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ai(e).ShadowRoot||e instanceof ShadowRoot)}var ui=Math.max,hi=Math.min,pi=Math.round;function fi(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function mi(){return!/^((?!chrome|android).)*safari/i.test(fi())}function gi(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&li(e)&&(i=e.offsetWidth>0&&pi(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&pi(r.height)/e.offsetHeight||1);var o=(ci(e)?ai(e):window).visualViewport,a=!mi()&&n,c=(r.left+(a&&o?o.offsetLeft:0))/i,l=(r.top+(a&&o?o.offsetTop:0))/s,d=r.width/i,u=r.height/s;return{width:d,height:u,top:l,right:c+d,bottom:l+u,left:c,x:c,y:l}}function _i(e){var t=gi(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function vi(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&di(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function yi(e){return e?(e.nodeName||"").toLowerCase():null}function Ei(e){return ai(e).getComputedStyle(e)}function bi(e){return["table","td","th"].indexOf(yi(e))>=0}function Ti(e){return((ci(e)?e.ownerDocument:e.document)||window.document).documentElement}function Si(e){return"html"===yi(e)?e:e.assignedSlot||e.parentNode||(di(e)?e.host:null)||Ti(e)}function wi(e){return li(e)&&"fixed"!==Ei(e).position?e.offsetParent:null}function Ci(e){for(var t=ai(e),n=wi(e);n&&bi(n)&&"static"===Ei(n).position;)n=wi(n);return n&&("html"===yi(n)||"body"===yi(n)&&"static"===Ei(n).position)?t:n||function(e){var t=/firefox/i.test(fi());if(/Trident/i.test(fi())&&li(e)&&"fixed"===Ei(e).position)return null;var n=Si(e);for(di(n)&&(n=n.host);li(n)&&["html","body"].indexOf(yi(n))<0;){var r=Ei(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function Ri(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ii(e,t,n){return ui(e,hi(t,n))}function Ni(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Oi(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var Ai="top",ki="bottom",xi="right",Pi="left",Di="auto",Li=[Ai,ki,xi,Pi],Mi="start",ji="end",Ui="clippingParents",Fi="viewport",Bi="popper",Vi="reference",Gi=Li.reduce((function(e,t){return e.concat([t+"-"+Mi,t+"-"+ji])}),[]),Hi=[].concat(Li,[Di]).reduce((function(e,t){return e.concat([t,t+"-"+Mi,t+"-"+ji])}),[]),Wi=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];const zi={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=oi(n.placement),c=Ri(a),l=[Pi,xi].indexOf(a)>=0?"height":"width";if(s&&o){var d=function(e,t){return Ni("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Oi(e,Li))}(i.padding,n),u=_i(s),h="y"===c?Ai:Pi,p="y"===c?ki:xi,f=n.rects.reference[l]+n.rects.reference[c]-o[c]-n.rects.popper[l],m=o[c]-n.rects.reference[c],g=Ci(s),_=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,y=d[h],E=_-u[l]-d[p],b=_/2-u[l]/2+v,T=Ii(y,b,E),S=c;n.modifiersData[r]=((t={})[S]=T,t.centerOffset=T-b,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&vi(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qi(e){return e.split("-")[1]}var Ki={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Yi(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,o=e.offsets,a=e.position,c=e.gpuAcceleration,l=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=o.x,p=void 0===h?0:h,f=o.y,m=void 0===f?0:f,g="function"===typeof d?d({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var _=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),y=Pi,E=Ai,b=window;if(l){var T=Ci(n),S="clientHeight",w="clientWidth";if(T===ai(n)&&"static"!==Ei(T=Ti(n)).position&&"absolute"===a&&(S="scrollHeight",w="scrollWidth"),i===Ai||(i===Pi||i===xi)&&s===ji)E=ki,m-=(u&&T===b&&b.visualViewport?b.visualViewport.height:T[S])-r.height,m*=c?1:-1;if(i===Pi||(i===Ai||i===ki)&&s===ji)y=xi,p-=(u&&T===b&&b.visualViewport?b.visualViewport.width:T[w])-r.width,p*=c?1:-1}var C,R=Object.assign({position:a},l&&Ki),I=!0===d?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:pi(n*i)/i||0,y:pi(r*i)/i||0}}({x:p,y:m},ai(n)):{x:p,y:m};return p=I.x,m=I.y,c?Object.assign({},R,((C={})[E]=v?"0":"",C[y]=_?"0":"",C.transform=(b.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",C)):Object.assign({},R,((t={})[E]=v?m+"px":"",t[y]=_?p+"px":"",t.transform="",t))}const Ji={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,c=void 0===a||a,l={placement:oi(t.placement),variation:qi(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Yi(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Yi(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Xi={passive:!0};const Zi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=void 0===i||i,o=r.resize,a=void 0===o||o,c=ai(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&l.forEach((function(e){e.addEventListener("scroll",n.update,Xi)})),a&&c.addEventListener("resize",n.update,Xi),function(){s&&l.forEach((function(e){e.removeEventListener("scroll",n.update,Xi)})),a&&c.removeEventListener("resize",n.update,Xi)}},data:{}};var Qi={left:"right",right:"left",bottom:"top",top:"bottom"};function $i(e){return e.replace(/left|right|bottom|top/g,(function(e){return Qi[e]}))}var es={start:"end",end:"start"};function ts(e){return e.replace(/start|end/g,(function(e){return es[e]}))}function ns(e){var t=ai(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function rs(e){return gi(Ti(e)).left+ns(e).scrollLeft}function is(e){var t=Ei(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function ss(e){return["html","body","#document"].indexOf(yi(e))>=0?e.ownerDocument.body:li(e)&&is(e)?e:ss(Si(e))}function os(e,t){var n;void 0===t&&(t=[]);var r=ss(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),s=ai(r),o=i?[s].concat(s.visualViewport||[],is(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(os(Si(o)))}function as(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function cs(e,t,n){return t===Fi?as(function(e,t){var n=ai(e),r=Ti(e),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;var l=mi();(l||!l&&"fixed"===t)&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a+rs(e),y:c}}(e,n)):ci(t)?function(e,t){var n=gi(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):as(function(e){var t,n=Ti(e),r=ns(e),i=null==(t=e.ownerDocument)?void 0:t.body,s=ui(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=ui(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+rs(e),c=-r.scrollTop;return"rtl"===Ei(i||n).direction&&(a+=ui(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}(Ti(e)))}function ls(e,t,n,r){var i="clippingParents"===t?function(e){var t=os(Si(e)),n=["absolute","fixed"].indexOf(Ei(e).position)>=0&&li(e)?Ci(e):e;return ci(n)?t.filter((function(e){return ci(e)&&vi(e,n)&&"body"!==yi(e)})):[]}(e):[].concat(t),s=[].concat(i,[n]),o=s[0],a=s.reduce((function(t,n){var i=cs(e,n,r);return t.top=ui(i.top,t.top),t.right=hi(i.right,t.right),t.bottom=hi(i.bottom,t.bottom),t.left=ui(i.left,t.left),t}),cs(e,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ds(e){var t,n=e.reference,r=e.element,i=e.placement,s=i?oi(i):null,o=i?qi(i):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(s){case Ai:t={x:a,y:n.y-r.height};break;case ki:t={x:a,y:n.y+n.height};break;case xi:t={x:n.x+n.width,y:c};break;case Pi:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var l=s?Ri(s):null;if(null!=l){var d="y"===l?"height":"width";switch(o){case Mi:t[l]=t[l]-(n[d]/2-r[d]/2);break;case ji:t[l]=t[l]+(n[d]/2-r[d]/2)}}return t}function us(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,s=n.strategy,o=void 0===s?e.strategy:s,a=n.boundary,c=void 0===a?Ui:a,l=n.rootBoundary,d=void 0===l?Fi:l,u=n.elementContext,h=void 0===u?Bi:u,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,_=Ni("number"!==typeof g?g:Oi(g,Li)),v=h===Bi?Vi:Bi,y=e.rects.popper,E=e.elements[f?v:h],b=ls(ci(E)?E:E.contextElement||Ti(e.elements.popper),c,d,o),T=gi(e.elements.reference),S=ds({reference:T,element:y,strategy:"absolute",placement:i}),w=as(Object.assign({},y,S)),C=h===Bi?w:T,R={top:b.top-C.top+_.top,bottom:C.bottom-b.bottom+_.bottom,left:b.left-C.left+_.left,right:C.right-b.right+_.right},I=e.modifiersData.offset;if(h===Bi&&I){var N=I[i];Object.keys(R).forEach((function(e){var t=[xi,ki].indexOf(e)>=0?1:-1,n=[Ai,ki].indexOf(e)>=0?"y":"x";R[e]+=N[n]*t}))}return R}const hs={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0===o||o,c=n.fallbackPlacements,l=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,_=oi(g),v=c||(_===g||!f?[$i(g)]:function(e){if(oi(e)===Di)return[];var t=$i(e);return[ts(e),t,ts(t)]}(g)),y=[g].concat(v).reduce((function(e,n){return e.concat(oi(n)===Di?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?Hi:c,d=qi(r),u=d?a?Gi:Gi.filter((function(e){return qi(e)===d})):Li,h=u.filter((function(e){return l.indexOf(e)>=0}));0===h.length&&(h=u);var p=h.reduce((function(t,n){return t[n]=us(e,{placement:n,boundary:i,rootBoundary:s,padding:o})[oi(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:d,rootBoundary:u,padding:l,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),E=t.rects.reference,b=t.rects.popper,T=new Map,S=!0,w=y[0],C=0;C<y.length;C++){var R=y[C],I=oi(R),N=qi(R)===Mi,O=[Ai,ki].indexOf(I)>=0,A=O?"width":"height",k=us(t,{placement:R,boundary:d,rootBoundary:u,altBoundary:h,padding:l}),x=O?N?xi:Pi:N?ki:Ai;E[A]>b[A]&&(x=$i(x));var P=$i(x),D=[];if(s&&D.push(k[I]<=0),a&&D.push(k[x]<=0,k[P]<=0),D.every((function(e){return e}))){w=R,S=!1;break}T.set(R,D)}if(S)for(var L=function(e){var t=y.find((function(t){var n=T.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return w=t,"break"},M=f?3:1;M>0;M--){if("break"===L(M))break}t.placement!==w&&(t.modifiersData[r]._skip=!0,t.placement=w,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ps(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function fs(e){return[Ai,xi,ki,Pi].some((function(t){return e[t]>=0}))}const ms={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=void 0===i?[0,0]:i,o=Hi.reduce((function(e,n){return e[n]=function(e,t,n){var r=oi(e),i=[Pi,Ai].indexOf(r)>=0?-1:1,s="function"===typeof n?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Pi,xi].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(n,t.rects,s),e}),{}),a=o[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=o}};const gs={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0!==o&&o,c=n.boundary,l=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=us(t,{boundary:c,rootBoundary:l,padding:u,altBoundary:d}),_=oi(t.placement),v=qi(t.placement),y=!v,E=Ri(_),b="x"===E?"y":"x",T=t.modifiersData.popperOffsets,S=t.rects.reference,w=t.rects.popper,C="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,R="number"===typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),I=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,N={x:0,y:0};if(T){if(s){var O,A="y"===E?Ai:Pi,k="y"===E?ki:xi,x="y"===E?"height":"width",P=T[E],D=P+g[A],L=P-g[k],M=p?-w[x]/2:0,j=v===Mi?S[x]:w[x],U=v===Mi?-w[x]:-S[x],F=t.elements.arrow,B=p&&F?_i(F):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},G=V[A],H=V[k],W=Ii(0,S[x],B[x]),z=y?S[x]/2-M-W-G-R.mainAxis:j-W-G-R.mainAxis,q=y?-S[x]/2+M+W+H+R.mainAxis:U+W+H+R.mainAxis,K=t.elements.arrow&&Ci(t.elements.arrow),Y=K?"y"===E?K.clientTop||0:K.clientLeft||0:0,J=null!=(O=null==I?void 0:I[E])?O:0,X=P+q-J,Z=Ii(p?hi(D,P+z-J-Y):D,P,p?ui(L,X):L);T[E]=Z,N[E]=Z-P}if(a){var Q,$="x"===E?Ai:Pi,ee="x"===E?ki:xi,te=T[b],ne="y"===b?"height":"width",re=te+g[$],ie=te-g[ee],se=-1!==[Ai,Pi].indexOf(_),oe=null!=(Q=null==I?void 0:I[b])?Q:0,ae=se?re:te-S[ne]-w[ne]-oe+R.altAxis,ce=se?te+S[ne]+w[ne]-oe-R.altAxis:ie,le=p&&se?function(e,t,n){var r=Ii(e,t,n);return r>n?n:r}(ae,te,ce):Ii(p?ae:re,te,p?ce:ie);T[b]=le,N[b]=le-te}t.modifiersData[r]=N}},requiresIfExists:["offset"]};function _s(e,t,n){void 0===n&&(n=!1);var r=li(t),i=li(t)&&function(e){var t=e.getBoundingClientRect(),n=pi(t.width)/e.offsetWidth||1,r=pi(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),s=Ti(t),o=gi(e,i,n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&(("body"!==yi(t)||is(s))&&(a=function(e){return e!==ai(e)&&li(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:ns(e);var t}(t)),li(t)?((c=gi(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=rs(s))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function vs(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function ys(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Es={placement:"bottom",modifiers:[],strategy:"absolute"};function bs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Ts(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,s=void 0===i?Es:i;return function(e,t,n){void 0===n&&(n=s);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Es,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],a=!1,c={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;l(),i.options=Object.assign({},s,i.options,a),i.scrollParents={reference:ci(e)?os(e):e.contextElement?os(e.contextElement):[],popper:os(t)};var d=function(e){var t=vs(e);return Wi.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=d.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,s=e.effect;if("function"===typeof s){var a=s({state:i,name:t,instance:c,options:r}),l=function(){};o.push(a||l)}})),c.update()},forceUpdate:function(){if(!a){var e=i.elements,t=e.reference,n=e.popper;if(bs(t,n)){i.rects={reference:_s(t,Ci(n),"fixed"===i.options.strategy),popper:_i(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var s=i.orderedModifiers[r],o=s.fn,l=s.options,d=void 0===l?{}:l,u=s.name;"function"===typeof o&&(i=o({state:i,options:d,name:u,instance:c})||i)}else i.reset=!1,r=-1}}},update:ys((function(){return new Promise((function(e){c.forceUpdate(),e(i)}))})),destroy:function(){l(),a=!0}};if(!bs(e,t))return c;function l(){o.forEach((function(e){return e()})),o=[]}return c.setOptions(n).then((function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)})),c}}const Ss=Ts({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,o=us(t,{elementContext:"reference"}),a=us(t,{altBoundary:!0}),c=ps(o,r),l=ps(a,i,s),d=fs(c),u=fs(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ds({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Ji,Zi,ms,hs,gs,zi]}),ws=["enabled","placement","strategy","modifiers"];const Cs={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Rs={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:e=>{let{state:t}=e;return()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const t=(e.getAttribute("aria-describedby")||"").split(",").filter((e=>e.trim()!==n.id));t.length?e.setAttribute("aria-describedby",t.join(",")):e.removeAttribute("aria-describedby")}}},fn:e=>{let{state:t}=e;var n;const{popper:r,reference:i}=t.elements,s=null==(n=r.getAttribute("role"))?void 0:n.toLowerCase();if(r.id&&"tooltip"===s&&"setAttribute"in i){const e=i.getAttribute("aria-describedby");if(e&&-1!==e.split(",").indexOf(r.id))return;i.setAttribute("aria-describedby",e?"".concat(e,",").concat(r.id):r.id)}}},Is=[];const Ns=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{enabled:i=!0,placement:s="bottom",strategy:o="absolute",modifiers:a=Is}=r,c=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(r,ws);const l=(0,n.useRef)(a),d=(0,n.useRef)(),u=(0,n.useCallback)((()=>{var e;null==(e=d.current)||e.update()}),[]),h=(0,n.useCallback)((()=>{var e;null==(e=d.current)||e.forceUpdate()}),[]),[p,f]=si((0,n.useState)({placement:s,update:u,forceUpdate:h,attributes:{},styles:{popper:{},arrow:{}}})),m=(0,n.useMemo)((()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:e=>{let{state:t}=e;const n={},r={};Object.keys(t.elements).forEach((e=>{n[e]=t.styles[e],r[e]=t.attributes[e]})),f({state:t,styles:n,attributes:r,update:u,forceUpdate:h,placement:t.placement})}})),[u,h,f]),g=(0,n.useMemo)((()=>(ii(l.current,a)||(l.current=a),l.current)),[a]);return(0,n.useEffect)((()=>{d.current&&i&&d.current.setOptions({placement:s,strategy:o,modifiers:[...g,m,Cs]})}),[o,s,m,i,g]),(0,n.useEffect)((()=>{if(i&&null!=e&&null!=t)return d.current=Ss(e,t,Object.assign({},c,{placement:s,strategy:o,modifiers:[...g,Rs,m]})),()=>{null!=d.current&&(d.current.destroy(),d.current=void 0,f((e=>Object.assign({},e,{attributes:{},styles:{popper:{}}}))))}}),[i,e,t]),p};var Os=__webpack_require__(6440),As=__webpack_require__.n(Os);const ks=()=>{};const xs=e=>e&&("current"in e?e.current:e),Ps={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};const Ds=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ks,{disabled:r,clickTrigger:i="click"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,n.useRef)(!1),o=(0,n.useRef)(!1),a=(0,n.useCallback)((t=>{const n=xs(e);As()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!n||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||!function(e){return 0===e.button}(t)||!!nn(n,t.target)||o.current,o.current=!1}),[e]),c=zt((t=>{const n=xs(e);n&&nn(n,t.target)&&(o.current=!0)})),l=zt((e=>{s.current||t(e)}));(0,n.useEffect)((()=>{var t,n;if(r||null==e)return;const s=$e(xs(e)),o=s.defaultView||window;let d=null!=(t=o.event)?t:null==(n=o.parent)?void 0:n.event,u=null;Ps[i]&&(u=wt(s,Ps[i],c,!0));const h=wt(s,i,a,!0),p=wt(s,i,(e=>{e!==d?l(e):d=void 0}));let f=[];return"ontouchstart"in s.documentElement&&(f=[].slice.call(s.body.children).map((e=>wt(e,"mousemove",ks)))),()=>{null==u||u(),h(),p(),f.forEach((e=>e()))}}),[e,r,i,a,c,l])};function Ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e)?e:Object.keys(e).map((t=>(e[t].name=t,e[t])))}function Ms(e){let{enabled:t,enableEvents:n,placement:r,flip:i,offset:s,fixed:o,containerPadding:a,arrowElement:c,popperConfig:l={}}=e;var d,u,h,p,f;const m=function(e){const t={};return Array.isArray(e)?(null==e||e.forEach((e=>{t[e.name]=e})),t):e||t}(l.modifiers);return Object.assign({},l,{placement:r,enabled:t,strategy:o?"fixed":l.strategy,modifiers:Ls(Object.assign({},m,{eventListeners:{enabled:n,options:null==(d=m.eventListeners)?void 0:d.options},preventOverflow:Object.assign({},m.preventOverflow,{options:a?Object.assign({padding:a},null==(u=m.preventOverflow)?void 0:u.options):null==(h=m.preventOverflow)?void 0:h.options}),offset:{options:Object.assign({offset:s},null==(p=m.offset)?void 0:p.options)},arrow:Object.assign({},m.arrow,{enabled:!!c,options:Object.assign({},null==(f=m.arrow)?void 0:f.options,{element:c})}),flip:Object.assign({enabled:!!i},m.flip)}))})}const js=["children"];const Us=()=>{};function Fs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,n.useContext)(ti),[r,i]=Ur(),s=(0,n.useRef)(!1),{flip:o,offset:a,rootCloseEvent:c,fixed:l=!1,placement:d,popperConfig:u={},enableEventListeners:h=!0,usePopper:p=!!t}=e,f=null==(null==t?void 0:t.show)?!!e.show:t.show;f&&!s.current&&(s.current=!0);const{placement:m,setMenu:g,menuElement:_,toggleElement:v}=t||{},y=Ns(v,_,Ms({placement:d||m||"bottom-start",enabled:p,enableEvents:null==h?f:h,offset:a,flip:o,fixed:l,arrowElement:r,popperConfig:u})),E=Object.assign({ref:g||Us,"aria-labelledby":null==v?void 0:v.id},y.attributes.popper,{style:y.styles.popper}),b={show:f,placement:m,hasShown:s.current,toggle:null==t?void 0:t.toggle,popper:p?y:null,arrowProps:p?Object.assign({ref:i},y.attributes.arrow,{style:y.styles.arrow}):{}};return Ds(_,(e=>{null==t||t.toggle(!1,e)}),{clickTrigger:c,disabled:!f}),[E,b]}function Bs(e){let{children:t}=e,n=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,js);const[r,i]=Fs(n);return(0,Ae.jsx)(Ae.Fragment,{children:t(r,i)})}Bs.displayName="DropdownMenu",Bs.defaultProps={usePopper:!0};const Vs=Bs,Gs={prefix:String(Math.round(1e10*Math.random())),current:0},Hs=n.createContext(Gs),Ws=n.createContext(!1);let zs=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),qs=new WeakMap;function Ks(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,n.useContext)(Hs),r=(0,n.useRef)(null);if(null===r.current&&!e){var i,s;let e=null===(s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===s||null===(i=s.ReactCurrentOwner)||void 0===i?void 0:i.current;if(e){let n=qs.get(e);null==n?qs.set(e,{id:t.current,state:e.memoizedState}):e.memoizedState!==n.state&&(t.current=n.id,qs.delete(e))}r.current=++t.current}return r.current}const Ys="function"===typeof n.useId?function(e){let t=n.useId(),[r]=(0,n.useState)("function"===typeof n.useSyncExternalStore?n.useSyncExternalStore(Zs,Js,Xs):(0,n.useContext)(Ws)),i=r?"react-aria":"react-aria".concat(Gs.prefix);return e||"".concat(i,"-").concat(t)}:function(e){let t=(0,n.useContext)(Hs);t!==Gs||zs||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let r=Ks(!!e),i="react-aria".concat(t.prefix);return e||"".concat(i,"-").concat(r)};function Js(){return!1}function Xs(){return!0}function Zs(e){return()=>{}}const Qs=e=>{var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},$s=()=>{};function eo(){const e=Ys(),{show:t=!1,toggle:r=$s,setToggle:i,menuElement:s}=(0,n.useContext)(ti)||{},o=(0,n.useCallback)((e=>{r(!t,e)}),[t,r]),a={id:e,ref:i||$s,onClick:o,"aria-expanded":!!t};return s&&Qs(s)&&(a["aria-haspopup"]=!0),[a,{show:t,toggle:r}]}function to(e){let{children:t}=e;const[n,r]=eo();return(0,Ae.jsx)(Ae.Fragment,{children:t(n,r)})}to.displayName="DropdownToggle";const no=to,ro=["eventKey","disabled","onClick","active","as"];function io(e){let{key:t,href:r,active:i,disabled:s,onClick:o}=e;const a=(0,n.useContext)(Le),c=(0,n.useContext)(yr),{activeKey:l}=c||{},d=De(t,r),u=null==i&&null!=t?De(l)===d:i;return[{onClick:zt((e=>{s||(null==o||o(e),a&&!e.isPropagationStopped()&&a(d,e))})),"aria-disabled":s||void 0,"aria-selected":u,[cn("dropdown-item")]:""},{isActive:u}]}const so=n.forwardRef(((e,t)=>{let{eventKey:n,disabled:r,onClick:i,active:s,as:o=wr}=e,a=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,ro);const[c]=io({key:n,href:a.href,disabled:r,onClick:i,active:s});return(0,Ae.jsx)(o,Object.assign({},a,{ref:t},c))}));so.displayName="DropdownItem";const oo=so;function ao(){const e=_r(),t=(0,n.useRef)(null),r=(0,n.useCallback)((n=>{t.current=n,e()}),[e]);return[t,r]}function co(e){let{defaultShow:t,show:r,onSelect:i,onToggle:s,itemSelector:o="* [".concat(cn("dropdown-item"),"]"),focusFirstItemOnShow:a,placement:c="bottom-start",children:l}=e;const d=hn(),[u,h]=ei(r,t,s),[p,f]=ao(),m=p.current,[g,_]=ao(),v=g.current,y=on(u),E=(0,n.useRef)(null),b=(0,n.useRef)(!1),T=(0,n.useContext)(Le),S=(0,n.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?void 0:t.type;h(e,{originalEvent:t,source:n})}),[h]),w=zt(((e,t)=>{null==i||i(e,t),S(!1,t,"select"),t.isPropagationStopped()||null==T||T(e,t)})),C=(0,n.useMemo)((()=>({toggle:S,placement:c,show:u,menuElement:m,toggleElement:v,setMenu:f,setToggle:_})),[S,c,u,m,v,f,_]);m&&y&&!u&&(b.current=m.contains(m.ownerDocument.activeElement));const R=zt((()=>{v&&v.focus&&v.focus()})),I=zt((()=>{const e=E.current;let t=a;if(null==t&&(t=!(!p.current||!Qs(p.current))&&"keyboard"),!1===t||"keyboard"===t&&!/^key.+$/.test(e))return;const n=Xn(p.current,o)[0];n&&n.focus&&n.focus()}));(0,n.useEffect)((()=>{u?I():b.current&&(b.current=!1,R())}),[u,b,R,I]),(0,n.useEffect)((()=>{E.current=null}));const N=(e,t)=>{if(!p.current)return null;const n=Xn(p.current,o);let r=n.indexOf(e)+t;return r=Math.max(0,Math.min(r,n.length)),n[r]};return function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=zt(r);(0,n.useEffect)((()=>{const n="function"===typeof e?e():e;return n.addEventListener(t,s,i),()=>n.removeEventListener(t,s,i)}),[e])}((0,n.useCallback)((()=>d.document),[d]),"keydown",(e=>{var t,n;const{key:r}=e,i=e.target,s=null==(t=p.current)?void 0:t.contains(i),o=null==(n=g.current)?void 0:n.contains(i);if(/input|textarea/i.test(i.tagName)&&(" "===r||"Escape"!==r&&s||"Escape"===r&&"search"===i.type))return;if(!s&&!o)return;if("Tab"===r&&(!p.current||!u))return;E.current=e.type;const a={originalEvent:e,source:e.type};switch(r){case"ArrowUp":{const t=N(i,-1);return t&&t.focus&&t.focus(),void e.preventDefault()}case"ArrowDown":if(e.preventDefault(),u){const e=N(i,1);e&&e.focus&&e.focus()}else h(!0,a);return;case"Tab":Tt(i.ownerDocument,"keyup",(e=>{var t;("Tab"!==e.key||e.target)&&null!=(t=p.current)&&t.contains(e.target)||h(!1,a)}),{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),h(!1,a)}})),(0,Ae.jsx)(Le.Provider,{value:w,children:(0,Ae.jsx)(ti.Provider,{value:C,children:l})})}co.displayName="Dropdown",co.Menu=Vs,co.Toggle=no,co.Item=oo;const lo=co,uo=n.createContext({});uo.displayName="DropdownContext";const ho=uo,po=n.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="hr",role:s="separator",...o}=e;return r=Je(r,"dropdown-divider"),(0,Ae.jsx)(i,{ref:t,className:Pe()(n,r),role:s,...o})}));po.displayName="DropdownDivider";const fo=po,mo=n.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",role:s="heading",...o}=e;return r=Je(r,"dropdown-header"),(0,Ae.jsx)(i,{ref:t,className:Pe()(n,r),role:s,...o})}));mo.displayName="DropdownHeader";const go=mo,_o=n.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,eventKey:i,disabled:s=!1,onClick:o,active:a,as:c=Vr,...l}=e;const d=Je(n,"dropdown-item"),[u,h]=io({key:i,href:l.href,disabled:s,onClick:o,active:a});return(0,Ae.jsx)(c,{...l,...u,ref:t,className:Pe()(r,d,h.isActive&&"active",s&&"disabled")})}));_o.displayName="DropdownItem";const vo=_o,yo=n.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...s}=e;return r=Je(r,"dropdown-item-text"),(0,Ae.jsx)(i,{ref:t,className:Pe()(n,r),...s})}));yo.displayName="DropdownItemText";const Eo=yo,bo=n.createContext(null);bo.displayName="InputGroupContext";const To=bo;function So(e,t){return e}function wo(e,t,n){let r=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?r=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?r=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t?r=e?n?"right-end":"left-end":n?"right-start":"left-start":"down-centered"===t?r="bottom":"up-centered"===t&&(r="top"),r}const Co=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:i,align:s,rootCloseEvent:o,flip:a=!0,show:c,renderOnMount:l,as:d="div",popperConfig:u,variant:h,...p}=e,f=!1;const m=(0,n.useContext)(Vt),g=Je(r,"dropdown-menu"),{align:_,drop:v,isRTL:y}=(0,n.useContext)(ho);s=s||_;const E=(0,n.useContext)(To),b=[];if(s)if("object"===typeof s){const e=Object.keys(s);if(e.length){const t=e[0],n=s[t];f="start"===n,b.push("".concat(g,"-").concat(t,"-").concat(n))}}else"end"===s&&(f=!0);const T=wo(f,v,y),[S,{hasShown:w,popper:C,show:R,toggle:I}]=Fs({flip:a,rootCloseEvent:o,show:c,usePopper:!m&&0===b.length,offset:[0,2],popperConfig:u,placement:T});if(S.ref=xt(So(t),S.ref),Jt((()=>{R&&(null==C||C.update())}),[R]),!w&&!l&&!E)return null;"string"!==typeof d&&(S.show=R,S.close=()=>null==I?void 0:I(!1),S.align=s);let N=p.style;return null!=C&&C.placement&&(N={...p.style,...S.style},p["x-placement"]=C.placement),(0,Ae.jsx)(d,{...p,...S,style:N,...(b.length||m)&&{"data-bs-popper":"static"},className:Pe()(i,g,R&&"show",f&&"".concat(g,"-end"),h&&"".concat(g,"-").concat(h),...b)})}));Co.displayName="DropdownMenu";const Ro=Co,Io=n.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:s,active:o=!1,disabled:a=!1,className:c,...l}=e;const d=Je(r,"btn"),[u,{tagName:h}]=Tr({tagName:n,disabled:a,...l}),p=h;return(0,Ae.jsx)(p,{...u,...l,ref:t,disabled:a,className:Pe()(c,d,o&&"active",i&&"".concat(d,"-").concat(i),s&&"".concat(d,"-").concat(s),l.href&&a&&"disabled")})}));Io.displayName="Button";const No=Io,Oo=n.forwardRef(((e,t)=>{let{bsPrefix:r,split:i,className:s,childBsPrefix:o,as:a=No,...c}=e;const l=Je(r,"dropdown-toggle"),d=(0,n.useContext)(ti);void 0!==o&&(c.bsPrefix=o);const[u]=eo();return u.ref=xt(u.ref,So(t)),(0,Ae.jsx)(a,{className:Pe()(s,l,i&&"".concat(l,"-split"),(null==d?void 0:d.show)&&"show"),...u,...c})}));Oo.displayName="DropdownToggle";const Ao=Oo,ko=n.forwardRef(((e,t)=>{const{bsPrefix:r,drop:i="down",show:s,className:o,align:a="start",onSelect:c,onToggle:l,focusFirstItemOnShow:d,as:u="div",navbar:h,autoClose:p=!0,...f}=Be(e,{show:"onToggle"}),m=(0,n.useContext)(To),g=Je(r,"dropdown"),_=Xe(),v=zt(((e,t)=>{var n,r;var i;(null==(n=t.originalEvent)||null==(r=n.target)?void 0:r.classList.contains("dropdown-toggle"))&&"mousedown"===t.source||(t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),i=t.source,(!1===p?"click"===i:"inside"===p?"rootClose"!==i:"outside"!==p||"select"!==i)&&(null==l||l(e,t)))})),y=wo("end"===a,i,_),E=(0,n.useMemo)((()=>({align:a,drop:i,isRTL:_})),[a,i,_]),b={down:g,"down-centered":"".concat(g,"-center"),up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return(0,Ae.jsx)(ho.Provider,{value:E,children:(0,Ae.jsx)(lo,{placement:y,show:s,onSelect:c,onToggle:v,focusFirstItemOnShow:d,itemSelector:".".concat(g,"-item:not(.disabled):not(:disabled)"),children:m?f.children:(0,Ae.jsx)(u,{...f,ref:t,className:Pe()(o,s&&"show",b[i])})})})}));ko.displayName="Dropdown";const xo=Object.assign(ko,{Toggle:Ao,Menu:Ro,Item:vo,ItemText:Eo,Divider:fo,Header:go}),Po=jn().oneOf(["start","end"]),Do=jn().oneOfType([Po,jn().shape({sm:Po}),jn().shape({md:Po}),jn().shape({lg:Po}),jn().shape({xl:Po}),jn().shape({xxl:Po}),jn().object]),Lo={id:jn().string,href:jn().string,onClick:jn().func,title:jn().node.isRequired,disabled:jn().bool,align:Do,menuRole:jn().string,renderMenuOnMount:jn().bool,rootCloseEvent:jn().string,menuVariant:jn().oneOf(["dark"]),flip:jn().bool,bsPrefix:jn().string,variant:jn().string,size:jn().string},Mo=n.forwardRef(((e,t)=>{let{title:n,children:r,bsPrefix:i,rootCloseEvent:s,variant:o,size:a,menuRole:c,renderMenuOnMount:l,disabled:d,href:u,id:h,menuVariant:p,flip:f,...m}=e;return(0,Ae.jsxs)(xo,{ref:t,...m,children:[(0,Ae.jsx)(Ao,{id:h,href:u,size:a,variant:o,disabled:d,childBsPrefix:i,children:n}),(0,Ae.jsx)(Ro,{role:c,renderOnMount:l,rootCloseEvent:s,variant:p,flip:f,children:r})]})}));Mo.displayName="DropdownButton",Mo.propTypes=Lo;const jo=Mo,Uo=n.forwardRef(((e,t)=>{let{bsPrefix:n,size:r,vertical:i=!1,className:s,role:o="group",as:a="div",...c}=e;const l=Je(n,"btn-group");let d=l;return i&&(d="".concat(l,"-vertical")),(0,Ae.jsx)(a,{...c,ref:t,role:o,className:Pe()(s,d,r&&"".concat(l,"-").concat(r))})}));Uo.displayName="ButtonGroup";const Fo=Uo,Bo=()=>{const[e,t]=(0,n.useState)(!1);return(0,Ae.jsxs)("li",{className:"dropdown",children:[(0,Ae.jsxs)(Ie,{className:"me-3 dropdown-toggle hidden-arrow",id:"navbarDropdownMenuLink",role:"button",onClick:()=>{t(!e)},"aria-expanded":e?"true":"false",children:[(0,Ae.jsx)("i",{className:"fas fa-bell"}),(0,Ae.jsx)("span",{className:"badge rounded-pill badge-notification bg-danger",children:"1"})]}),(0,Ae.jsx)("div",{style:{minWidth:"350px"},className:"notification-list-content ".concat(e?"show":""),children:(0,Ae.jsxs)("div",{className:"notification-list-item",children:[(0,Ae.jsx)("div",{className:"notification-list-img",children:(0,Ae.jsx)("img",{src:"https://i.imgur.com/zYxDCQT.jpg",alt:"user"})}),(0,Ae.jsxs)("div",{className:"notification-list-detail",children:[(0,Ae.jsxs)("p",{children:[(0,Ae.jsx)("b",{children:"John Doe"})," reacted to your post"]}),(0,Ae.jsx)("p",{className:"text-muted",children:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Unde, dolorem."}),(0,Ae.jsx)("p",{className:"text-muted",children:(0,Ae.jsx)("small",{children:"10 mins ago"})})]})]})})]})};const Vo=function(){const{userData:e,serviceList:t,getSubServiceList:r,subServiceList:i,isLogIn:s}=Kr(),[o,a]=(0,n.useState)(null),[c,l]=(0,n.useState)("Loading..."),[d,u]=(0,n.useState)(!0),[h,p]=(0,n.useState)(null),[f,m]=(0,n.useState)(!1),[g,_]=(0,n.useState)("Choose Category"),[v,y]=(0,n.useState)(null),[E,b]=(0,n.useState)(),[T,S]=(0,n.useState)(!0),[w,C]=(0,n.useState)(""),R=$(),I=async()=>{try{await new Promise(((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{const{latitude:n,longitude:r}=t.coords;a({latitude:n,longitude:r}),localStorage.setItem("lat",JSON.stringify(n)),localStorage.setItem("lon",JSON.stringify(r)),u(!1),e({latitude:n,longitude:r})}),(e=>{u(!1),t(e)})):(u(!1),t(new Error("Geolocation is not supported")))}));const e=o.latitude,t=o.longitude,n="8d1d16020bfb4d1994ea0f1ce0ca60ca",r=await fetch("https://api.opencagedata.com/geocode/v1/json?q=".concat(e,"+").concat(t,"&key=").concat(n)),i=await r.json();if(i.results&&i.results.length>0){const e=i.results[0].components.country;l(e)}else l("NA")}catch(pv){l("NA")}};(0,n.useEffect)((()=>{I()}),[d]);const N=e=>{p(e),r(e)},O=()=>{p(null)},A=()=>{p(null)},k=()=>{m(!1)},x=e=>{_(e.title),b(e.slug),y(e._id),S(!1)},P=e=>{const t=e.target.value;C(t)},D=e=>{e.preventDefault(),w&&(R("/".concat(E,"?category_id=").concat(v,"&search=").concat(w||"")),C(""),m(!1))};return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsxs)("section",{className:"sticky-top",children:[(0,Ae.jsx)(fr,{expand:"lg",bg:"light",className:"border-bottom border-1",children:(0,Ae.jsxs)(gr,{children:[(0,Ae.jsx)(fr.Brand,{as:Ie,to:"/",children:(0,Ae.jsx)("img",{src:Xr,alt:"logo",style:{width:"82px"}})}),(0,Ae.jsx)("div",{className:"newSearchBx d-none d-lg-block",children:(0,Ae.jsxs)("form",{className:"input-group width100 custom-form",onSubmit:D,children:[(0,Ae.jsx)("div",{className:"input-group-prepend",children:(0,Ae.jsx)(jo,{as:Fo,variant:"outline-primary",title:g,id:"dropdown-menu-align-right",className:"custom-dropdown",style:{width:"170px"},children:Array.isArray(t)&&t.map((e=>(0,Ae.jsx)(xo.Item,{eventKey:e._id,onClick:()=>x(e),active:v===e._id,style:{width:"170px"},children:e.title},e._id)))})}),(0,Ae.jsx)("input",{type:"text",onChange:P,value:w,disabled:T,className:"form-control custom-input",placeholder:"Search..."}),(0,Ae.jsx)("div",{className:"input-group-append",children:(0,Ae.jsx)("button",{className:"btn btn-primary custom-search-button",type:"submit",id:"button-addon2",children:(0,Ae.jsx)("img",{src:$r,style:{width:"22px"}})})})]})}),(0,Ae.jsxs)("ul",{className:"navListInline",children:[s&&(0,Ae.jsx)(Bo,{}),!0===d?(0,Ae.jsx)(Jr,{animation:"border",variant:"info",size:"sm",className:"ms-2"},"spinner"):(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/",className:"nav-link",children:[(0,Ae.jsx)("img",{src:Qr,style:{marginTop:"-4px",width:"18px"}})," ",c," "]})},"location"),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/",className:"nav-link",children:[(0,Ae.jsx)("i",{className:"fa fa-language"})," ",(0,Ae.jsx)("span",{children:"English"})]})},"language"),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/account",className:"nav-link",children:[(0,Ae.jsx)("img",{src:Zr,style:{marginTop:"-4px",width:"18px"}})," ",(0,Ae.jsx)("span",{children:e._id?"".concat(e.name):"Log In"})]})},"account")]})]})}),(0,Ae.jsx)(fr,{expand:"lg",className:"bg-theme mainNav",children:(0,Ae.jsx)(gr,{children:(0,Ae.jsx)(fr.Collapse,{id:"basic-navbar-nav",children:(0,Ae.jsx)(zr,{className:"me-auto mb-2 mb-lg-16",children:Array.isArray(t)&&(null===t||void 0===t?void 0:t.map((e=>(0,Ae.jsxs)("li",{className:"nav-item dropdown mega-dropdown",onMouseEnter:()=>N(e._id),onMouseLeave:O,children:[(0,Ae.jsx)(Ie,{className:"navList dropdown-toggle",role:"button",onClick:()=>R("/".concat(e.slug,"?category_id=").concat(e._id)),"data-bs-toggle":"dropdown","aria-expanded":h===e._id,children:e.title}),(0,Ae.jsx)("div",{className:"dropdown-menu mega-dropdown-menu container ".concat(h===e._id?"show":""),onMouseEnter:()=>N(e._id),onMouseLeave:O,children:(0,Ae.jsx)("div",{className:"row",children:Array.isArray(i)&&(null===i||void 0===i?void 0:i.map((t=>(0,Ae.jsx)("div",{className:"col-md-3",children:(0,Ae.jsx)("ul",{className:"linkList",children:(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/".concat(e.slug,"?sub_category=").concat(t._id),onClick:A,children:t.title})})})},t._id))))})})]},e._id))))})})})}),(0,Ae.jsx)("section",{className:"p-2 bg-theme d-block d-lg-none",children:(0,Ae.jsx)(gr,{children:(0,Ae.jsxs)("button",{className:"btn btn-primary text-white",onClick:()=>m(!f),"aria-controls":"offCanvasSidebar","aria-expanded":f?"true":"false",children:[(0,Ae.jsx)("i",{className:"fas fa-bars"})," Menu"]})})})]}),(0,Ae.jsxs)("div",{className:"offcanvas offcanvas-start ".concat(f?"show":""),"data-bs-scroll":"true",tabIndex:-1,id:"offCanvasSidebar","aria-labelledby":"offCanvasSidebarLabel",children:[(0,Ae.jsxs)("div",{className:"offcanvas-header",children:[(0,Ae.jsxs)("form",{className:"input-group width100",onSubmit:D,children:[(0,Ae.jsx)("div",{className:"input-group-prepend",children:(0,Ae.jsx)(jo,{as:Fo,variant:"outline-primary",title:g,id:"dropdown-menu-align-right",className:"custom-dropdown",style:{width:"170px"},children:Array.isArray(t)&&t.map((e=>(0,Ae.jsx)(xo.Item,{eventKey:e._id,onClick:()=>x(e),active:v===e._id,style:{width:"170px"},children:e.title},e._id)))})}),(0,Ae.jsx)("input",{type:"text",onChange:P,value:w,disabled:T,className:"form-control custom-input",placeholder:"Search..."}),(0,Ae.jsx)("div",{className:"input-group-append",children:(0,Ae.jsx)("button",{className:"btn btn-primary custom-search-button",type:"submit",id:"button-addon2",children:(0,Ae.jsx)("i",{className:"fa fa-search"})})})]}),(0,Ae.jsx)("button",{type:"button",onClick:()=>m(!1),className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),(0,Ae.jsx)("hr",{className:"m0"}),(0,Ae.jsx)("div",{className:"offcanvas-body",children:Array.isArray(t)&&(null===t||void 0===t?void 0:t.map((e=>(0,Ae.jsx)("div",{className:"accordion accordion-flush mobileMegaMenuBx",id:"megaMenuPart",children:(0,Ae.jsxs)("div",{className:"accordion-item",children:[(0,Ae.jsx)("h2",{className:"accordion-header",children:(0,Ae.jsx)("button",{onClick:()=>{r(null===e||void 0===e?void 0:e._id),m(!0)},className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#categoryItem1".concat(e._id),"aria-expanded":"false","aria-controls":"categoryItem1",children:e.title})}),(0,Ae.jsx)("div",{id:"categoryItem1".concat(e._id),className:"accordion-collapse collapse","data-bs-parent":"#megaMenuPart",children:(0,Ae.jsx)("div",{children:(0,Ae.jsx)("div",{className:"row",children:(0,Ae.jsx)("div",{className:"col-md-3",children:Array.isArray(i)&&(null===i||void 0===i?void 0:i.map((t=>(0,Ae.jsx)("ul",{className:"linkList",children:(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/".concat(e.slug,"?sub_category=").concat(t._id),onClick:k,children:t.title})})},"mobile_".concat(t._id)))))})})})})]})},"mobile_".concat(e._id)))))})]})]})},Go=__webpack_require__.p+"static/media/Ad.6240261e0d77ac4574e0.jpg",Ho=()=>(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"col-md-1 adBx",children:(0,Ae.jsx)("div",{className:"sticky-top",children:(0,Ae.jsx)("img",{src:Go,alt:""})})})}),Wo=()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),2e3),t(!1)})()}),[]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"About Us"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:"About Us"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),!1===e?(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-8",children:(0,Ae.jsxs)("div",{className:"aboutus-content sticky-top",children:[(0,Ae.jsxs)("h1",{children:["Welcome to ",(0,Ae.jsx)("span",{children:"Dzital"})]}),(0,Ae.jsx)("h4",{children:"Your tagline goes here"}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here."}),(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6 col-xs-12",children:(0,Ae.jsxs)("div",{className:"serviceBoxItem text-center",children:[(0,Ae.jsx)("img",{src:"./assets/images/vision.png",alt:""}),(0,Ae.jsx)("div",{className:"title",children:(0,Ae.jsx)("h4",{children:"Vision"})}),(0,Ae.jsx)("div",{className:"text",children:(0,Ae.jsx)("span",{children:"Lorem ipsum dolor sit amet, id quo eruditi eloquentiam. Assum decore te sed. Elitr scripta ocurreret qui ad."})})]})}),(0,Ae.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6 col-xs-12",children:(0,Ae.jsxs)("div",{className:"serviceBoxItem text-center",children:[(0,Ae.jsx)("img",{src:"./assets/images/mission.png",alt:""}),(0,Ae.jsx)("div",{className:"title",children:(0,Ae.jsx)("h4",{children:"Mission"})}),(0,Ae.jsx)("div",{className:"text",children:(0,Ae.jsx)("span",{children:"Lorem ipsum dolor sit amet, id quo eruditi eloquentiam. Assum decore te sed. Elitr scripta ocurreret qui ad."})})]})})]})]})}),(0,Ae.jsxs)("div",{className:"col-md-4",children:[(0,Ae.jsx)("img",{src:"./assets/images/home-search.jpg",width:"100%",alt:""}),(0,Ae.jsx)("img",{src:"./assets/images/job-search.jpg",width:"100%",alt:""}),(0,Ae.jsx)("img",{src:"./assets/images/ecommerce.jpg",width:"100%",alt:""}),(0,Ae.jsx)("img",{src:"./assets/images/vehicle-search.jpg",width:"100%",alt:""}),(0,Ae.jsx)("img",{src:"./assets/images/online-education.jpg",width:"100%",alt:""})]})]})}),(0,Ae.jsx)(Ho,{})]})})})]})};function zo(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function qo(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((n=>{"undefined"===typeof e[n]?e[n]=t[n]:zo(t[n])&&zo(e[n])&&Object.keys(t[n]).length>0&&qo(e[n],t[n])}))}const Ko={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Yo(){const e="undefined"!==typeof document?document:{};return qo(e,Ko),e}const Jo={document:Ko,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function Xo(){const e="undefined"!==typeof window?window:{};return qo(e,Jo),e}function Zo(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function Qo(){return Date.now()}function $o(e,t){void 0===t&&(t="x");const n=Xo();let r,i,s;const o=function(e){const t=Xo();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map((e=>e.replace(",","."))).join(", ")),s=new n.WebKitCSSMatrix("none"===i?"":i)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),"x"===t&&(i=n.WebKitCSSMatrix?s.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(i=n.WebKitCSSMatrix?s.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),i||0}function ea(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function ta(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let r=1;r<arguments.length;r+=1){const i=r<0||arguments.length<=r?void 0:arguments[r];if(void 0!==i&&null!==i&&(n=i,!("undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?n instanceof HTMLElement:n&&(1===n.nodeType||11===n.nodeType)))){const n=Object.keys(Object(i)).filter((e=>t.indexOf(e)<0));for(let t=0,r=n.length;t<r;t+=1){const r=n[t],s=Object.getOwnPropertyDescriptor(i,r);void 0!==s&&s.enumerable&&(ea(e[r])&&ea(i[r])?i[r].__swiper__?e[r]=i[r]:ta(e[r],i[r]):!ea(e[r])&&ea(i[r])?(e[r]={},i[r].__swiper__?e[r]=i[r]:ta(e[r],i[r])):e[r]=i[r])}}}var n;return e}function na(e,t,n){e.style.setProperty(t,n)}function ra(e){let{swiper:t,targetPosition:n,side:r}=e;const i=Xo(),s=-t.translate;let o,a=null;const c=t.params.speed;t.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(t.cssModeFrameID);const l=n>s?"next":"prev",d=(e,t)=>"next"===l&&e>=t||"prev"===l&&e<=t,u=()=>{o=(new Date).getTime(),null===a&&(a=o);const e=Math.max(Math.min((o-a)/c,1),0),l=.5-Math.cos(e*Math.PI)/2;let h=s+l*(n-s);if(d(h,n)&&(h=n),t.wrapperEl.scrollTo({[r]:h}),d(h,n))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout((()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[r]:h})})),void i.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=i.requestAnimationFrame(u)};u()}function ia(e){return e.querySelector(".swiper-slide-transform")||e.shadowRoot&&e.shadowRoot.querySelector(".swiper-slide-transform")||e}function sa(e,t){return void 0===t&&(t=""),[...e.children].filter((e=>e.matches(t)))}function oa(e){try{return void console.warn(e)}catch(t){}}function aa(e,t){void 0===t&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:function(e){return void 0===e&&(e=""),e.trim().split(" ").filter((e=>!!e.trim()))}(t)),n}function ca(e,t){return Xo().getComputedStyle(e,null).getPropertyValue(t)}function la(e){let t,n=e;if(n){for(t=0;null!==(n=n.previousSibling);)1===n.nodeType&&(t+=1);return t}}function da(e,t,n){const r=Xo();return n?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function ua(e){return(Array.isArray(e)?e:[e]).filter((e=>!!e))}let ha,pa,fa;function ma(){return ha||(ha=function(){const e=Xo(),t=Yo();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),ha}function ga(e){return void 0===e&&(e={}),pa||(pa=function(e){let{userAgent:t}=void 0===e?{}:e;const n=ma(),r=Xo(),i=r.navigator.platform,s=t||r.navigator.userAgent,o={ios:!1,android:!1},a=r.screen.width,c=r.screen.height,l=s.match(/(Android);?[\s\/]+([\d.]+)?/);let d=s.match(/(iPad).*OS\s([\d_]+)/);const u=s.match(/(iPod)(.*OS\s([\d_]+))?/),h=!d&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===i;let f="MacIntel"===i;return!d&&f&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf("".concat(a,"x").concat(c))>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),f=!1),l&&!p&&(o.os="android",o.android=!0),(d||h||u)&&(o.os="ios",o.ios=!0),o}(e)),pa}function _a(){return fa||(fa=function(){const e=Xo(),t=ga();let n=!1;function r(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(r()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,r]=t.split("Version/")[1].split(" ")[0].split(".").map((e=>Number(e)));n=e<16||16===e&&r<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),s=r();return{isSafari:n||s,needPerspectiveFix:n,need3dFix:s||i&&t.ios,isWebView:i}}()),fa}var va={on(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;const i=n?"unshift":"push";return e.split(" ").forEach((e=>{r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},once(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;function i(){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];t.apply(r,s)}return i.__emitterProxy=t,r.on(e,i,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;const r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((e=>{"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach(((r,i)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,n,r;for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];"string"===typeof s[0]||Array.isArray(s[0])?(t=s[0],n=s.slice(1,s.length),r=e):(t=s[0].events,n=s[0].data,r=s[0].context||e),n.unshift(r);return(Array.isArray(t)?t:t.split(" ")).forEach((t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach((e=>{e.apply(r,[t,...n])})),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach((e=>{e.apply(r,n)}))})),e}};const ya=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=t.closest(e.isElement?"swiper-slide":".".concat(e.params.slideClass));if(n){let t=n.querySelector(".".concat(e.params.lazyPreloaderClass));!t&&e.isElement&&(n.shadowRoot?t=n.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)):requestAnimationFrame((()=>{n.shadowRoot&&(t=n.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)),t&&t.remove())}))),t&&t.remove()}},Ea=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},ba=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const r="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),i=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const n=i,s=[n-t];return s.push(...Array.from({length:t}).map(((e,t)=>n+r+t))),void e.slides.forEach(((t,n)=>{s.includes(t.column)&&Ea(e,n)}))}const s=i+r-1;if(e.params.rewind||e.params.loop)for(let o=i-t;o<=s+t;o+=1){const t=(o%n+n)%n;(t<i||t>s)&&Ea(e,t)}else for(let o=Math.max(i-t,0);o<=Math.min(s+t,n-1);o+=1)o!==i&&(o>s||o<i)&&Ea(e,o)};var Ta={updateSize:function(){const e=this;let t,n;const r=e.el;t="undefined"!==typeof e.params.width&&null!==e.params.width?e.params.width:r.clientWidth,n="undefined"!==typeof e.params.height&&null!==e.params.height?e.params.height:r.clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(ca(r,"padding-left")||0,10)-parseInt(ca(r,"padding-right")||0,10),n=n-parseInt(ca(r,"padding-top")||0,10)-parseInt(ca(r,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t,n){return parseFloat(t.getPropertyValue(e.getDirectionLabel(n))||0)}const n=e.params,{wrapperEl:r,slidesEl:i,size:s,rtlTranslate:o,wrongRTL:a}=e,c=e.virtual&&n.virtual.enabled,l=c?e.virtual.slides.length:e.slides.length,d=sa(i,".".concat(e.params.slideClass,", swiper-slide")),u=c?e.virtual.slides.length:d.length;let h=[];const p=[],f=[];let m=n.slidesOffsetBefore;"function"===typeof m&&(m=n.slidesOffsetBefore.call(e));let g=n.slidesOffsetAfter;"function"===typeof g&&(g=n.slidesOffsetAfter.call(e));const _=e.snapGrid.length,v=e.slidesGrid.length;let y=n.spaceBetween,E=-m,b=0,T=0;if("undefined"===typeof s)return;"string"===typeof y&&y.indexOf("%")>=0?y=parseFloat(y.replace("%",""))/100*s:"string"===typeof y&&(y=parseFloat(y)),e.virtualSize=-y,d.forEach((e=>{o?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""})),n.centeredSlides&&n.cssMode&&(na(r,"--swiper-centered-offset-before",""),na(r,"--swiper-centered-offset-after",""));const S=n.grid&&n.grid.rows>1&&e.grid;let w;S?e.grid.initSlides(d):e.grid&&e.grid.unsetSlides();const C="auto"===n.slidesPerView&&n.breakpoints&&Object.keys(n.breakpoints).filter((e=>"undefined"!==typeof n.breakpoints[e].slidesPerView)).length>0;for(let R=0;R<u;R+=1){let r;if(w=0,d[R]&&(r=d[R]),S&&e.grid.updateSlide(R,r,d),!d[R]||"none"!==ca(r,"display")){if("auto"===n.slidesPerView){C&&(d[R].style[e.getDirectionLabel("width")]="");const i=getComputedStyle(r),s=r.style.transform,o=r.style.webkitTransform;if(s&&(r.style.transform="none"),o&&(r.style.webkitTransform="none"),n.roundLengths)w=e.isHorizontal()?da(r,"width",!0):da(r,"height",!0);else{const e=t(i,"width"),n=t(i,"padding-left"),s=t(i,"padding-right"),o=t(i,"margin-left"),a=t(i,"margin-right"),c=i.getPropertyValue("box-sizing");if(c&&"border-box"===c)w=e+o+a;else{const{clientWidth:t,offsetWidth:i}=r;w=e+n+s+o+a+(i-t)}}s&&(r.style.transform=s),o&&(r.style.webkitTransform=o),n.roundLengths&&(w=Math.floor(w))}else w=(s-(n.slidesPerView-1)*y)/n.slidesPerView,n.roundLengths&&(w=Math.floor(w)),d[R]&&(d[R].style[e.getDirectionLabel("width")]="".concat(w,"px"));d[R]&&(d[R].swiperSlideSize=w),f.push(w),n.centeredSlides?(E=E+w/2+b/2+y,0===b&&0!==R&&(E=E-s/2-y),0===R&&(E=E-s/2-y),Math.abs(E)<.001&&(E=0),n.roundLengths&&(E=Math.floor(E)),T%n.slidesPerGroup===0&&h.push(E),p.push(E)):(n.roundLengths&&(E=Math.floor(E)),(T-Math.min(e.params.slidesPerGroupSkip,T))%e.params.slidesPerGroup===0&&h.push(E),p.push(E),E=E+w+y),e.virtualSize+=w+y,b=w,T+=1}}if(e.virtualSize=Math.max(e.virtualSize,s)+g,o&&a&&("slide"===n.effect||"coverflow"===n.effect)&&(r.style.width="".concat(e.virtualSize+y,"px")),n.setWrapperSize&&(r.style[e.getDirectionLabel("width")]="".concat(e.virtualSize+y,"px")),S&&e.grid.updateWrapperSize(w,h),!n.centeredSlides){const t=[];for(let r=0;r<h.length;r+=1){let i=h[r];n.roundLengths&&(i=Math.floor(i)),h[r]<=e.virtualSize-s&&t.push(i)}h=t,Math.floor(e.virtualSize-s)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-s)}if(c&&n.loop){const t=f[0]+y;if(n.slidesPerGroup>1){const r=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),i=t*n.slidesPerGroup;for(let e=0;e<r;e+=1)h.push(h[h.length-1]+i)}for(let r=0;r<e.virtual.slidesBefore+e.virtual.slidesAfter;r+=1)1===n.slidesPerGroup&&h.push(h[h.length-1]+t),p.push(p[p.length-1]+t),e.virtualSize+=t}if(0===h.length&&(h=[0]),0!==y){const t=e.isHorizontal()&&o?"marginLeft":e.getDirectionLabel("marginRight");d.filter(((e,t)=>!(n.cssMode&&!n.loop)||t!==d.length-1)).forEach((e=>{e.style[t]="".concat(y,"px")}))}if(n.centeredSlides&&n.centeredSlidesBounds){let e=0;f.forEach((t=>{e+=t+(y||0)})),e-=y;const t=e-s;h=h.map((e=>e<=0?-m:e>t?t+g:e))}if(n.centerInsufficientSlides){let e=0;if(f.forEach((t=>{e+=t+(y||0)})),e-=y,e<s){const t=(s-e)/2;h.forEach(((e,n)=>{h[n]=e-t})),p.forEach(((e,n)=>{p[n]=e+t}))}}if(Object.assign(e,{slides:d,snapGrid:h,slidesGrid:p,slidesSizesGrid:f}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){na(r,"--swiper-centered-offset-before","".concat(-h[0],"px")),na(r,"--swiper-centered-offset-after","".concat(e.size/2-f[f.length-1]/2,"px"));const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+n))}if(u!==l&&e.emit("slidesLengthChange"),h.length!==_&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==v&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!c&&!n.cssMode&&("slide"===n.effect||"fade"===n.effect)){const t="".concat(n.containerModifierClass,"backface-hidden"),r=e.el.classList.contains(t);u<=n.maxBackfaceHiddenSlides?r||e.el.classList.add(t):r&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,n=[],r=t.virtual&&t.params.virtual.enabled;let i,s=0;"number"===typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const o=e=>r?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach((e=>{n.push(e)}));else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){const e=t.activeIndex+i;if(e>t.slides.length&&!r)break;n.push(o(e))}else n.push(o(t.activeIndex));for(i=0;i<n.length;i+=1)if("undefined"!==typeof n[i]){const e=n[i].offsetHeight;s=e>s?e:s}(s||0===s)&&(t.wrapperEl.style.height="".concat(s,"px"))},updateSlidesOffset:function(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=(e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop)-n-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:r,rtlTranslate:i,snapGrid:s}=t;if(0===r.length)return;"undefined"===typeof r[0].swiperSlideOffset&&t.updateSlidesOffset();let o=-e;i&&(o=e),r.forEach((e=>{e.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass)})),t.visibleSlidesIndexes=[],t.visibleSlides=[];let a=n.spaceBetween;"string"===typeof a&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*t.size:"string"===typeof a&&(a=parseFloat(a));for(let c=0;c<r.length;c+=1){const e=r[c];let l=e.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=r[0].swiperSlideOffset);const d=(o+(n.centeredSlides?t.minTranslate():0)-l)/(e.swiperSlideSize+a),u=(o-s[0]+(n.centeredSlides?t.minTranslate():0)-l)/(e.swiperSlideSize+a),h=-(o-l),p=h+t.slidesSizesGrid[c],f=h>=0&&h<=t.size-t.slidesSizesGrid[c];(h>=0&&h<t.size-1||p>1&&p<=t.size||h<=0&&p>=t.size)&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(c),r[c].classList.add(n.slideVisibleClass)),f&&r[c].classList.add(n.slideFullyVisibleClass),e.progress=i?-d:d,e.originalProgress=i?-u:u}},updateProgress:function(e){const t=this;if("undefined"===typeof e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:s,isEnd:o,progressLoop:a}=t;const c=s,l=o;if(0===r)i=0,s=!0,o=!0;else{i=(e-t.minTranslate())/r;const n=Math.abs(e-t.minTranslate())<1,a=Math.abs(e-t.maxTranslate())<1;s=n||i<=0,o=a||i>=1,n&&(i=0),a&&(i=1)}if(n.loop){const n=t.getSlideIndexByData(0),r=t.getSlideIndexByData(t.slides.length-1),i=t.slidesGrid[n],s=t.slidesGrid[r],o=t.slidesGrid[t.slidesGrid.length-1],c=Math.abs(e);a=c>=i?(c-i)/o:(c+o-s)/o,a>1&&(a-=1)}Object.assign(t,{progress:i,progressLoop:a,isBeginning:s,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),s&&!c&&t.emit("reachBeginning toEdge"),o&&!l&&t.emit("reachEnd toEdge"),(c&&!s||l&&!o)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,slidesEl:r,activeIndex:i}=e,s=e.virtual&&n.virtual.enabled,o=e.grid&&n.grid&&n.grid.rows>1,a=e=>sa(r,".".concat(n.slideClass).concat(e,", swiper-slide").concat(e))[0];let c,l,d;if(t.forEach((e=>{e.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)})),s)if(n.loop){let t=i-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),c=a('[data-swiper-slide-index="'.concat(t,'"]'))}else c=a('[data-swiper-slide-index="'.concat(i,'"]'));else o?(c=t.filter((e=>e.column===i))[0],d=t.filter((e=>e.column===i+1))[0],l=t.filter((e=>e.column===i-1))[0]):c=t[i];c&&(c.classList.add(n.slideActiveClass),o?(d&&d.classList.add(n.slideNextClass),l&&l.classList.add(n.slidePrevClass)):(d=function(e,t){const n=[];for(;e.nextElementSibling;){const r=e.nextElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}(c,".".concat(n.slideClass,", swiper-slide"))[0],n.loop&&!d&&(d=t[0]),d&&d.classList.add(n.slideNextClass),l=function(e,t){const n=[];for(;e.previousElementSibling;){const r=e.previousElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}(c,".".concat(n.slideClass,", swiper-slide"))[0],n.loop&&0===!l&&(l=t[t.length-1]),l&&l.classList.add(n.slidePrevClass))),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:r,params:i,activeIndex:s,realIndex:o,snapIndex:a}=t;let c,l=e;const d=e=>{let n=e-t.virtual.slidesBefore;return n<0&&(n=t.virtual.slides.length+n),n>=t.virtual.slides.length&&(n-=t.virtual.slides.length),n};if("undefined"===typeof l&&(l=function(e){const{slidesGrid:t,params:n}=e,r=e.rtlTranslate?e.translate:-e.translate;let i;for(let s=0;s<t.length;s+=1)"undefined"!==typeof t[s+1]?r>=t[s]&&r<t[s+1]-(t[s+1]-t[s])/2?i=s:r>=t[s]&&r<t[s+1]&&(i=s+1):r>=t[s]&&(i=s);return n.normalizeSlideIndex&&(i<0||"undefined"===typeof i)&&(i=0),i}(t)),r.indexOf(n)>=0)c=r.indexOf(n);else{const e=Math.min(i.slidesPerGroupSkip,l);c=e+Math.floor((l-e)/i.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),l===s&&!t.params.loop)return void(c!==a&&(t.snapIndex=c,t.emit("snapIndexChange")));if(l===s&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=d(l));const u=t.grid&&i.grid&&i.grid.rows>1;let h;if(t.virtual&&i.virtual.enabled&&i.loop)h=d(l);else if(u){const e=t.slides.filter((e=>e.column===l))[0];let n=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(n)&&(n=Math.max(t.slides.indexOf(e),0)),h=Math.floor(n/i.grid.rows)}else if(t.slides[l]){const e=t.slides[l].getAttribute("data-swiper-slide-index");h=e?parseInt(e,10):l}else h=l;Object.assign(t,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:h,previousIndex:s,activeIndex:l}),t.initialized&&ba(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(o!==h&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const n=this,r=n.params;let i=e.closest(".".concat(r.slideClass,", swiper-slide"));!i&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach((e=>{!i&&e.matches&&e.matches(".".concat(r.slideClass,", swiper-slide"))&&(i=e)}));let s,o=!1;if(i)for(let a=0;a<n.slides.length;a+=1)if(n.slides[a]===i){o=!0,s=a;break}if(!i||!o)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=s,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var Sa={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:n,translate:r,wrapperEl:i}=this;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let s=$o(i,e);return s+=this.cssOverflowAdjustment(),n&&(s=-s),s||0},setTranslate:function(e,t){const n=this,{rtlTranslate:r,params:i,wrapperEl:s,progress:o}=n;let a,c=0,l=0;n.isHorizontal()?c=r?-e:e:l=e,i.roundLengths&&(c=Math.floor(c),l=Math.floor(l)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?c:l,i.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-c:-l:i.virtualTranslate||(n.isHorizontal()?c-=n.cssOverflowAdjustment():l-=n.cssOverflowAdjustment(),s.style.transform="translate3d(".concat(c,"px, ").concat(l,"px, ").concat(0,"px)"));const d=n.maxTranslate()-n.minTranslate();a=0===d?0:(e-n.minTranslate())/d,a!==o&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const c=s.minTranslate(),l=s.maxTranslate();let d;if(d=r&&e>c?c:r&&e<l?l:e,s.updateProgress(d),o.cssMode){const e=s.isHorizontal();if(0===t)a[e?"scrollLeft":"scrollTop"]=-d;else{if(!s.support.smoothScroll)return ra({swiper:s,targetPosition:-d,side:e?"left":"top"}),!0;a.scrollTo({[e?"left":"top"]:-d,behavior:"smooth"})}return!0}return 0===t?(s.setTransition(0),s.setTranslate(d),n&&(s.emit("beforeTransitionStart",t,i),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(d),n&&(s.emit("beforeTransitionStart",t,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}};function wa(e){let{swiper:t,runCallbacks:n,direction:r,step:i}=e;const{activeIndex:s,previousIndex:o}=t;let a=r;if(a||(a=s>o?"next":s<o?"prev":"reset"),t.emit("transition".concat(i)),n&&s!==o){if("reset"===a)return void t.emit("slideResetTransition".concat(i));t.emit("slideChangeTransition".concat(i)),"next"===a?t.emit("slideNextTransition".concat(i)):t.emit("slidePrevTransition".concat(i))}}var Ca={setTransition:function(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration="".concat(e,"ms"),n.wrapperEl.style.transitionDelay=0===e?"0ms":""),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),wa({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;n.animating=!1,r.cssMode||(n.setTransition(0),wa({swiper:n,runCallbacks:e,direction:t,step:"End"}))}};var Ra={slideTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"string"===typeof e&&(e=parseInt(e,10));const s=this;let o=e;o<0&&(o=0);const{params:a,snapGrid:c,slidesGrid:l,previousIndex:d,activeIndex:u,rtlTranslate:h,wrapperEl:p,enabled:f}=s;if(s.animating&&a.preventInteractionOnTransition||!f&&!r&&!i||s.destroyed)return!1;const m=Math.min(s.params.slidesPerGroupSkip,o);let g=m+Math.floor((o-m)/s.params.slidesPerGroup);g>=c.length&&(g=c.length-1);const _=-c[g];if(a.normalizeSlideIndex)for(let y=0;y<l.length;y+=1){const e=-Math.floor(100*_),t=Math.floor(100*l[y]),n=Math.floor(100*l[y+1]);"undefined"!==typeof l[y+1]?e>=t&&e<n-(n-t)/2?o=y:e>=t&&e<n&&(o=y+1):e>=t&&(o=y)}if(s.initialized&&o!==u){if(!s.allowSlideNext&&(h?_>s.translate&&_>s.minTranslate():_<s.translate&&_<s.minTranslate()))return!1;if(!s.allowSlidePrev&&_>s.translate&&_>s.maxTranslate()&&(u||0)!==o)return!1}let v;if(o!==(d||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(_),v=o>u?"next":o<u?"prev":"reset",h&&-_===s.translate||!h&&_===s.translate)return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==a.effect&&s.setTranslate(_),"reset"!==v&&(s.transitionStart(n,v),s.transitionEnd(n,v)),!1;if(a.cssMode){const e=s.isHorizontal(),n=h?_:-_;if(0===t){const t=s.virtual&&s.params.virtual.enabled;t&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),t&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame((()=>{p[e?"scrollLeft":"scrollTop"]=n}))):p[e?"scrollLeft":"scrollTop"]=n,t&&requestAnimationFrame((()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1}))}else{if(!s.support.smoothScroll)return ra({swiper:s,targetPosition:n,side:e?"left":"top"}),!0;p.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return s.setTransition(t),s.setTranslate(_),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,r),s.transitionStart(n,v),0===t?s.transitionEnd(n,v):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,v))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,r){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"string"===typeof e){e=parseInt(e,10)}const i=this;if(i.destroyed)return;const s=i.grid&&i.params.grid&&i.params.grid.rows>1;let o=e;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)o+=i.virtual.slidesBefore;else{let e;if(s){const t=o*i.params.grid.rows;e=i.slides.filter((e=>1*e.getAttribute("data-swiper-slide-index")===t))[0].column}else e=i.getSlideIndexByData(o);const t=s?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:n}=i.params;let r=i.params.slidesPerView;"auto"===r?r=i.slidesPerViewDynamic():(r=Math.ceil(parseFloat(i.params.slidesPerView,10)),n&&r%2===0&&(r+=1));let a=t-e<r;if(n&&(a=a||e<Math.ceil(r/2)),a){const r=n?e<i.activeIndex?"prev":"next":e-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:r,slideTo:!0,activeSlideIndex:"next"===r?e+1:e-t+1,slideRealIndex:"next"===r?i.realIndex:void 0})}if(s){const e=o*i.params.grid.rows;o=i.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0].column}else o=i.getSlideIndexByData(o)}return requestAnimationFrame((()=>{i.slideTo(o,t,n,r)})),i},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this,{enabled:i,params:s,animating:o}=r;if(!i||r.destroyed)return r;let a=s.slidesPerGroup;"auto"===s.slidesPerView&&1===s.slidesPerGroup&&s.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const c=r.activeIndex<s.slidesPerGroupSkip?1:a,l=r.virtual&&s.virtual.enabled;if(s.loop){if(o&&!l&&s.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&s.cssMode)return requestAnimationFrame((()=>{r.slideTo(r.activeIndex+c,e,t,n)})),!0}return s.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+c,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this,{params:i,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:c,animating:l}=r;if(!c||r.destroyed)return r;const d=r.virtual&&i.virtual.enabled;if(i.loop){if(l&&!d&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const h=u(a?r.translate:-r.translate),p=s.map((e=>u(e)));let f=s[p.indexOf(h)-1];if("undefined"===typeof f&&i.cssMode){let e;s.forEach(((t,n)=>{h>=t&&(e=n)})),"undefined"!==typeof e&&(f=s[e>0?e-1:e])}let m=0;if("undefined"!==typeof f&&(m=o.indexOf(f),m<0&&(m=r.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(m=m-r.slidesPerViewDynamic("previous",!0)+1,m=Math.max(m,0))),i.rewind&&r.isBeginning){const i=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(i,e,t,n)}return i.loop&&0===r.activeIndex&&i.cssMode?(requestAnimationFrame((()=>{r.slideTo(m,e,t,n)})),!0):r.slideTo(m,e,t,n)},slideReset:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this;if(!r.destroyed)return r.slideTo(r.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===r&&(r=.5);const i=this;if(i.destroyed)return;let s=i.activeIndex;const o=Math.min(i.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/i.params.slidesPerGroup),c=i.rtlTranslate?i.translate:-i.translate;if(c>=i.snapGrid[a]){const e=i.snapGrid[a];c-e>(i.snapGrid[a+1]-e)*r&&(s+=i.params.slidesPerGroup)}else{const e=i.snapGrid[a-1];c-e<=(i.snapGrid[a]-e)*r&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,e,t,n)},slideToClickedSlide:function(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,r="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let i,s=e.clickedIndex;const o=e.isElement?"swiper-slide":".".concat(t.slideClass);if(t.loop){if(e.animating)return;i=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?s<e.loopedSlides-r/2||s>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),s=e.getSlideIndex(sa(n,"".concat(o,'[data-swiper-slide-index="').concat(i,'"]'))[0]),Zo((()=>{e.slideTo(s)}))):e.slideTo(s):s>e.slides.length-r?(e.loopFix(),s=e.getSlideIndex(sa(n,"".concat(o,'[data-swiper-slide-index="').concat(i,'"]'))[0]),Zo((()=>{e.slideTo(s)}))):e.slideTo(s)}else e.slideTo(s)}};var Ia={loopCreate:function(e){const t=this,{params:n,slidesEl:r}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;const i=()=>{sa(r,".".concat(n.slideClass,", swiper-slide")).forEach(((e,t)=>{e.setAttribute("data-swiper-slide-index",t)}))},s=t.grid&&n.grid&&n.grid.rows>1,o=n.slidesPerGroup*(s?n.grid.rows:1),a=t.slides.length%o!==0,c=s&&t.slides.length%n.grid.rows!==0,l=e=>{for(let r=0;r<e;r+=1){const e=t.isElement?aa("swiper-slide",[n.slideBlankClass]):aa("div",[n.slideClass,n.slideBlankClass]);t.slidesEl.append(e)}};if(a){if(n.loopAddBlankSlides){l(o-t.slides.length%o),t.recalcSlides(),t.updateSlides()}else oa("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(c){if(n.loopAddBlankSlides){l(n.grid.rows-t.slides.length%n.grid.rows),t.recalcSlides(),t.updateSlides()}else oa("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();t.loopFix({slideRealIndex:e,direction:n.centeredSlides?void 0:"next"})},loopFix:function(e){let{slideRealIndex:t,slideTo:n=!0,direction:r,setTranslate:i,activeSlideIndex:s,byController:o,byMousewheel:a}=void 0===e?{}:e;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:l,allowSlidePrev:d,allowSlideNext:u,slidesEl:h,params:p}=c,{centeredSlides:f}=p;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&p.virtual.enabled)return n&&(p.centeredSlides||0!==c.snapIndex?p.centeredSlides&&c.snapIndex<p.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0):c.slideTo(c.virtual.slides.length,0,!1,!0)),c.allowSlidePrev=d,c.allowSlideNext=u,void c.emit("loopFix");let m=p.slidesPerView;"auto"===m?m=c.slidesPerViewDynamic():(m=Math.ceil(parseFloat(p.slidesPerView,10)),f&&m%2===0&&(m+=1));const g=p.slidesPerGroupAuto?m:p.slidesPerGroup;let _=g;_%g!==0&&(_+=g-_%g),_+=p.loopAdditionalSlides,c.loopedSlides=_;const v=c.grid&&p.grid&&p.grid.rows>1;l.length<m+_?oa("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):v&&"row"===p.grid.fill&&oa("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const y=[],E=[];let b=c.activeIndex;"undefined"===typeof s?s=c.getSlideIndex(l.filter((e=>e.classList.contains(p.slideActiveClass)))[0]):b=s;const T="next"===r||!r,S="prev"===r||!r;let w=0,C=0;const R=v?Math.ceil(l.length/p.grid.rows):l.length,I=(v?l[s].column:s)+(f&&"undefined"===typeof i?-m/2+.5:0);if(I<_){w=Math.max(_-I,g);for(let e=0;e<_-I;e+=1){const t=e-Math.floor(e/R)*R;if(v){const e=R-t-1;for(let t=l.length-1;t>=0;t-=1)l[t].column===e&&y.push(t)}else y.push(R-t-1)}}else if(I+m>R-_){C=Math.max(I-(R-2*_),g);for(let e=0;e<C;e+=1){const t=e-Math.floor(e/R)*R;v?l.forEach(((e,n)=>{e.column===t&&E.push(n)})):E.push(t)}}if(c.__preventObserver__=!0,requestAnimationFrame((()=>{c.__preventObserver__=!1})),S&&y.forEach((e=>{l[e].swiperLoopMoveDOM=!0,h.prepend(l[e]),l[e].swiperLoopMoveDOM=!1})),T&&E.forEach((e=>{l[e].swiperLoopMoveDOM=!0,h.append(l[e]),l[e].swiperLoopMoveDOM=!1})),c.recalcSlides(),"auto"===p.slidesPerView?c.updateSlides():v&&(y.length>0&&S||E.length>0&&T)&&c.slides.forEach(((e,t)=>{c.grid.updateSlide(t,e,c.slides)})),p.watchSlidesProgress&&c.updateSlidesOffset(),n)if(y.length>0&&S){if("undefined"===typeof t){const e=c.slidesGrid[b],t=c.slidesGrid[b+w]-e;a?c.setTranslate(c.translate-t):(c.slideTo(b+Math.ceil(w),0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else if(i){const e=v?y.length/p.grid.rows:y.length;c.slideTo(c.activeIndex+e,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(E.length>0&&T)if("undefined"===typeof t){const e=c.slidesGrid[b],t=c.slidesGrid[b-C]-e;a?c.setTranslate(c.translate-t):(c.slideTo(b-C,0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else{const e=v?E.length/p.grid.rows:E.length;c.slideTo(c.activeIndex-e,0,!1,!0)}if(c.allowSlidePrev=d,c.allowSlideNext=u,c.controller&&c.controller.control&&!o){const e={slideRealIndex:t,direction:r,setTranslate:i,activeSlideIndex:s,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach((t=>{!t.destroyed&&t.params.loop&&t.loopFix({...e,slideTo:t.params.slidesPerView===p.slidesPerView&&n})})):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...e,slideTo:c.controller.control.params.slidesPerView===p.slidesPerView&&n})}c.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const r=[];e.slides.forEach((e=>{const t="undefined"===typeof e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;r[t]=e})),e.slides.forEach((e=>{e.removeAttribute("data-swiper-slide-index")})),r.forEach((e=>{n.append(e)})),e.recalcSlides(),e.slideTo(e.realIndex,0)}};var Na={setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame((()=>{t.__preventObserver__=!1}))},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame((()=>{e.__preventObserver__=!1})))}};function Oa(e,t,n){const r=Xo(),{params:i}=e,s=i.edgeSwipeDetection,o=i.edgeSwipeThreshold;return!s||!(n<=o||n>=r.innerWidth-o)||"prevent"===s&&(t.preventDefault(),!0)}function Aa(e){const t=this,n=Yo();let r=e;r.originalEvent&&(r=r.originalEvent);const i=t.touchEventsData;if("pointerdown"===r.type){if(null!==i.pointerId&&i.pointerId!==r.pointerId)return;i.pointerId=r.pointerId}else"touchstart"===r.type&&1===r.targetTouches.length&&(i.touchId=r.targetTouches[0].identifier);if("touchstart"===r.type)return void Oa(t,r,r.targetTouches[0].pageX);const{params:s,touches:o,enabled:a}=t;if(!a)return;if(!s.simulateTouch&&"mouse"===r.pointerType)return;if(t.animating&&s.preventInteractionOnTransition)return;!t.animating&&s.cssMode&&s.loop&&t.loopFix();let c=r.target;if("wrapper"===s.touchEventsTarget&&!t.wrapperEl.contains(c))return;if("which"in r&&3===r.which)return;if("button"in r&&r.button>0)return;if(i.isTouched&&i.isMoved)return;const l=!!s.noSwipingClass&&""!==s.noSwipingClass,d=r.composedPath?r.composedPath():r.path;l&&r.target&&r.target.shadowRoot&&d&&(c=d[0]);const u=s.noSwipingSelector?s.noSwipingSelector:".".concat(s.noSwipingClass),h=!(!r.target||!r.target.shadowRoot);if(s.noSwiping&&(h?function(e,t){return void 0===t&&(t=this),function t(n){if(!n||n===Yo()||n===Xo())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(e);return r||n.getRootNode?r||t(n.getRootNode().host):null}(t)}(u,c):c.closest(u)))return void(t.allowClick=!0);if(s.swipeHandler&&!c.closest(s.swipeHandler))return;o.currentX=r.pageX,o.currentY=r.pageY;const p=o.currentX,f=o.currentY;if(!Oa(t,r,p))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=f,i.touchStartTime=Qo(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1);let m=!0;c.matches(i.focusableElements)&&(m=!1,"SELECT"===c.nodeName&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==c&&n.activeElement.blur();const g=m&&t.allowTouchMove&&s.touchStartPreventDefault;!s.touchStartForcePreventDefault&&!g||c.isContentEditable||r.preventDefault(),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.animating&&!s.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",r)}function ka(e){const t=Yo(),n=this,r=n.touchEventsData,{params:i,touches:s,rtlTranslate:o,enabled:a}=n;if(!a)return;if(!i.simulateTouch&&"mouse"===e.pointerType)return;let c,l=e;if(l.originalEvent&&(l=l.originalEvent),"pointermove"===l.type){if(null!==r.touchId)return;if(l.pointerId!==r.pointerId)return}if("touchmove"===l.type){if(c=[...l.changedTouches].filter((e=>e.identifier===r.touchId))[0],!c||c.identifier!==r.touchId)return}else c=l;if(!r.isTouched)return void(r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l));const d=c.pageX,u=c.pageY;if(l.preventedByNestedSwiper)return s.startX=d,void(s.startY=u);if(!n.allowTouchMove)return l.target.matches(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(s,{startX:d,startY:u,currentX:d,currentY:u}),r.touchStartTime=Qo()));if(i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(u<s.startY&&n.translate<=n.maxTranslate()||u>s.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(d<s.startX&&n.translate<=n.maxTranslate()||d>s.startX&&n.translate>=n.minTranslate())return;if(t.activeElement&&l.target===t.activeElement&&l.target.matches(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);r.allowTouchCallbacks&&n.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=d,s.currentY=u;const h=s.currentX-s.startX,p=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(h**2+p**2)<n.params.threshold)return;if("undefined"===typeof r.isScrolling){let e;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:h*h+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(h))/Math.PI,r.isScrolling=n.isHorizontal()?e>i.touchAngle:90-e>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),"undefined"===typeof r.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(r.startMoving=!0)),r.isScrolling)return void(r.isTouched=!1);if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let f=n.isHorizontal()?h:p,m=n.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;i.oneWayMovement&&(f=Math.abs(f)*(o?1:-1),m=Math.abs(m)*(o?1:-1)),s.diff=f,f*=i.touchRatio,o&&(f=-f,m=-m);const g=n.touchesDirection;n.swipeDirection=f>0?"prev":"next",n.touchesDirection=m>0?"prev":"next";const _=n.params.loop&&!i.cssMode,v="next"===n.touchesDirection&&n.allowSlideNext||"prev"===n.touchesDirection&&n.allowSlidePrev;if(!r.isMoved){if(_&&v&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(e)}r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}if((new Date).getTime(),r.isMoved&&r.allowThresholdMove&&g!==n.touchesDirection&&_&&v&&Math.abs(f)>=1)return Object.assign(s,{startX:d,startY:u,currentX:d,currentY:u,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,void(r.startTranslate=r.currentTranslate);n.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=f+r.startTranslate;let y=!0,E=i.resistanceRatio;if(i.touchReleaseOnEdges&&(E=0),f>0?(_&&v&&r.allowThresholdMove&&r.currentTranslate>(i.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(y=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+f)**E))):f<0&&(_&&v&&r.allowThresholdMove&&r.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-("auto"===i.slidesPerView?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(y=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-f)**E))),y&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(f)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,void(s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}i.followFinger&&!i.cssMode&&((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function xa(e){const t=this,n=t.touchEventsData;let r,i=e;i.originalEvent&&(i=i.originalEvent);if("touchend"===i.type||"touchcancel"===i.type){if(r=[...i.changedTouches].filter((e=>e.identifier===n.touchId))[0],!r||r.identifier!==n.touchId)return}else{if(null!==n.touchId)return;if(i.pointerId!==n.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)){if(!(["pointercancel","contextmenu"].includes(i.type)&&(t.browser.isSafari||t.browser.isWebView)))return}n.pointerId=null,n.touchId=null;const{params:s,touches:o,rtlTranslate:a,slidesGrid:c,enabled:l}=t;if(!l)return;if(!s.simulateTouch&&"mouse"===i.pointerType)return;if(n.allowTouchCallbacks&&t.emit("touchEnd",i),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&s.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);s.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const d=Qo(),u=d-n.touchStartTime;if(t.allowClick){const e=i.path||i.composedPath&&i.composedPath();t.updateClickedSlide(e&&e[0]||i.target,e),t.emit("tap click",i),u<300&&d-n.lastClickTime<300&&t.emit("doubleTap doubleClick",i)}if(n.lastClickTime=Qo(),Zo((()=>{t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===o.diff&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let h;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,h=s.followFinger?a?t.translate:-t.translate:-n.currentTranslate,s.cssMode)return;if(s.freeMode&&s.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:h});const p=h>=-t.maxTranslate()&&!t.params.loop;let f=0,m=t.slidesSizesGrid[0];for(let E=0;E<c.length;E+=E<s.slidesPerGroupSkip?1:s.slidesPerGroup){const e=E<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;"undefined"!==typeof c[E+e]?(p||h>=c[E]&&h<c[E+e])&&(f=E,m=c[E+e]-c[E]):(p||h>=c[E])&&(f=E,m=c[c.length-1]-c[c.length-2])}let g=null,_=null;s.rewind&&(t.isBeginning?_=s.virtual&&s.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(g=0));const v=(h-c[f])/m,y=f<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(u>s.longSwipesMs){if(!s.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(v>=s.longSwipesRatio?t.slideTo(s.rewind&&t.isEnd?g:f+y):t.slideTo(f)),"prev"===t.swipeDirection&&(v>1-s.longSwipesRatio?t.slideTo(f+y):null!==_&&v<0&&Math.abs(v)>s.longSwipesRatio?t.slideTo(_):t.slideTo(f))}else{if(!s.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(i.target===t.navigation.nextEl||i.target===t.navigation.prevEl)?i.target===t.navigation.nextEl?t.slideTo(f+y):t.slideTo(f):("next"===t.swipeDirection&&t.slideTo(null!==g?g:f+y),"prev"===t.swipeDirection&&t.slideTo(null!==_?_:f))}}function Pa(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:s}=e,o=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const a=o&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||a?e.params.loop&&!o?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout((()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()}),500)),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}function Da(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function La(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:r}=e;if(!r)return;let i;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const s=e.maxTranslate()-e.minTranslate();i=0===s?0:(e.translate-e.minTranslate())/s,i!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Ma(e){const t=this;ya(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function ja(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const Ua=(e,t)=>{const n=Yo(),{params:r,el:i,wrapperEl:s,device:o}=e,a=!!r.nested,c="on"===t?"addEventListener":"removeEventListener",l=t;n[c]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:a}),i[c]("touchstart",e.onTouchStart,{passive:!1}),i[c]("pointerdown",e.onTouchStart,{passive:!1}),n[c]("touchmove",e.onTouchMove,{passive:!1,capture:a}),n[c]("pointermove",e.onTouchMove,{passive:!1,capture:a}),n[c]("touchend",e.onTouchEnd,{passive:!0}),n[c]("pointerup",e.onTouchEnd,{passive:!0}),n[c]("pointercancel",e.onTouchEnd,{passive:!0}),n[c]("touchcancel",e.onTouchEnd,{passive:!0}),n[c]("pointerout",e.onTouchEnd,{passive:!0}),n[c]("pointerleave",e.onTouchEnd,{passive:!0}),n[c]("contextmenu",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[c]("click",e.onClick,!0),r.cssMode&&s[c]("scroll",e.onScroll),r.updateOnWindowResize?e[l](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",Pa,!0):e[l]("observerUpdate",Pa,!0),i[c]("load",e.onLoad,{capture:!0})};var Fa={attachEvents:function(){const e=this,{params:t}=e;e.onTouchStart=Aa.bind(e),e.onTouchMove=ka.bind(e),e.onTouchEnd=xa.bind(e),e.onDocumentTouchStart=ja.bind(e),t.cssMode&&(e.onScroll=La.bind(e)),e.onClick=Da.bind(e),e.onLoad=Ma.bind(e),Ua(e,"on")},detachEvents:function(){Ua(this,"off")}};const Ba=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var Va={setBreakpoint:function(){const e=this,{realIndex:t,initialized:n,params:r,el:i}=e,s=r.breakpoints;if(!s||s&&0===Object.keys(s).length)return;const o=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(!o||e.currentBreakpoint===o)return;const a=(o in s?s[o]:void 0)||e.originalParams,c=Ba(e,r),l=Ba(e,a),d=r.enabled;c&&!l?(i.classList.remove("".concat(r.containerModifierClass,"grid"),"".concat(r.containerModifierClass,"grid-column")),e.emitContainerClasses()):!c&&l&&(i.classList.add("".concat(r.containerModifierClass,"grid")),(a.grid.fill&&"column"===a.grid.fill||!a.grid.fill&&"column"===r.grid.fill)&&i.classList.add("".concat(r.containerModifierClass,"grid-column")),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((t=>{if("undefined"===typeof a[t])return;const n=r[t]&&r[t].enabled,i=a[t]&&a[t].enabled;n&&!i&&e[t].disable(),!n&&i&&e[t].enable()}));const u=a.direction&&a.direction!==r.direction,h=r.loop&&(a.slidesPerView!==r.slidesPerView||u),p=r.loop;u&&n&&e.changeDirection(),ta(e.params,a);const f=e.params.enabled,m=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),d&&!f?e.disable():!d&&f&&e.enable(),e.currentBreakpoint=o,e.emit("_beforeBreakpoint",a),n&&(h?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!p&&m?(e.loopCreate(t),e.updateSlides()):p&&!m&&e.loopDestroy()),e.emit("breakpoint",a)},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),!e||"container"===t&&!n)return;let r=!1;const i=Xo(),s="window"===t?i.innerHeight:n.clientHeight,o=Object.keys(e).map((e=>{if("string"===typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:s*t,point:e}}return{value:e,point:e}}));o.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let a=0;a<o.length;a+=1){const{point:e,value:s}=o[a];"window"===t?i.matchMedia("(min-width: ".concat(s,"px)")).matches&&(r=e):s<=n.clientWidth&&(r=e)}return r||"max"}};var Ga={addClasses:function(){const e=this,{classNames:t,params:n,rtl:r,el:i,device:s}=e,o=function(e,t){const n=[];return e.forEach((e=>{"object"===typeof e?Object.keys(e).forEach((r=>{e[r]&&n.push(t+r)})):"string"===typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...o),i.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e.classList.remove(...t),this.emitContainerClasses()}};var Ha={checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:r}=n;if(r){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*r;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},Wa={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function za(e,t){return function(n){void 0===n&&(n={});const r=Object.keys(n)[0],i=n[r];"object"===typeof i&&null!==i?(!0===e[r]&&(e[r]={enabled:!0}),"navigation"===r&&e[r]&&e[r].enabled&&!e[r].prevEl&&!e[r].nextEl&&(e[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&e[r]&&e[r].enabled&&!e[r].el&&(e[r].auto=!0),r in e&&"enabled"in i?("object"!==typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),ta(t,n)):ta(t,n)):ta(t,n)}}const qa={eventsEmitter:va,update:Ta,translate:Sa,transition:Ca,slide:Ra,loop:Ia,grabCursor:Na,events:Fa,breakpoints:Va,checkOverflow:Ha,classes:Ga},Ka={};class Ya{constructor(){let e,t;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?t=r[0]:[e,t]=r,t||(t={}),t=ta({},t),e&&!t.el&&(t.el=e);const s=Yo();if(t.el&&"string"===typeof t.el&&s.querySelectorAll(t.el).length>1){const e=[];return s.querySelectorAll(t.el).forEach((n=>{const r=ta({},t,{el:n});e.push(new Ya(r))})),e}const o=this;o.__swiper__=!0,o.support=ma(),o.device=ga({userAgent:t.userAgent}),o.browser=_a(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const a={};o.modules.forEach((e=>{e({params:t,swiper:o,extendParams:za(t,a),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})}));const c=ta({},Wa,a);return o.params=ta({},c,Ka,t),o.originalParams=ta({},o.params),o.passedParams=ta({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach((e=>{o.on(e,o.params.on[e])})),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===o.params.direction,isVertical:()=>"vertical"===o.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,r=la(sa(t,".".concat(n.slideClass,", swiper-slide"))[0]);return la(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0])}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=sa(e,".".concat(t.slideClass,", swiper-slide"))}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach((n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:n,slides:r,slidesGrid:i,slidesSizesGrid:s,size:o,activeIndex:a}=this;let c=1;if("number"===typeof n.slidesPerView)return n.slidesPerView;if(n.centeredSlides){let e,t=r[a]?Math.ceil(r[a].swiperSlideSize):0;for(let n=a+1;n<r.length;n+=1)r[n]&&!e&&(t+=Math.ceil(r[n].swiperSlideSize),c+=1,t>o&&(e=!0));for(let n=a-1;n>=0;n-=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,c+=1,t>o&&(e=!0))}else if("current"===e)for(let l=a+1;l<r.length;l+=1){(t?i[l]+s[l]-i[a]<o:i[l]-i[a]<o)&&(c+=1)}else for(let l=a-1;l>=0;l-=1){i[a]-i[l]<o&&(c+=1)}return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function r(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let i;if(n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach((t=>{t.complete&&ya(e,t)})),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),n.freeMode&&n.freeMode.enabled&&!n.cssMode)r(),n.autoHeight&&e.updateAutoHeight();else{if(("auto"===n.slidesPerView||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const t=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;i=e.slideTo(t.length-1,0,!1,!0)}else i=e.slideTo(e.activeIndex,0,!1,!0);i||r()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.el.classList.remove("".concat(n.params.containerModifierClass).concat(r)),n.el.classList.add("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach((t=>{"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="rtl"):(t.el.classList.remove("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if("string"===typeof n&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>".".concat((t.params.wrapperClass||"").trim().split(" ").join("."));let i=(()=>{if(n&&n.shadowRoot&&n.shadowRoot.querySelector){return n.shadowRoot.querySelector(r())}return sa(n,r())[0]})();return!i&&t.params.createElements&&(i=aa("div",t.params.wrapperClass),n.append(i),sa(n,".".concat(t.params.slideClass)).forEach((e=>{i.append(e)}))),Object.assign(t,{el:n,wrapperEl:i,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:i,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:"rtl"===n.dir.toLowerCase()||"rtl"===ca(n,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===ca(n,"direction")),wrongRTL:"-webkit-box"===ca(i,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const n=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&n.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach((e=>{e.complete?ya(t,e):e.addEventListener("load",(e=>{ya(t,e.target)}))})),ba(t),t.initialized=!0,ba(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const n=this,{params:r,el:i,wrapperEl:s,slides:o}=n;return"undefined"===typeof n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttribute("style"),s.removeAttribute("style"),o&&o.length&&o.forEach((e=>{e.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")}))),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((e=>{n.off(e)})),!1!==e&&(n.el.swiper=null,function(e){const t=e;Object.keys(t).forEach((e=>{try{t[e]=null}catch(AL){}try{delete t[e]}catch(AL){}}))}(n)),n.destroyed=!0),null}static extendDefaults(e){ta(Ka,e)}static get extendedDefaults(){return Ka}static get defaults(){return Wa}static installModule(e){Ya.prototype.__modules__||(Ya.prototype.__modules__=[]);const t=Ya.prototype.__modules__;"function"===typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach((e=>Ya.installModule(e))),Ya):(Ya.installModule(e),Ya)}}Object.keys(qa).forEach((e=>{Object.keys(qa[e]).forEach((t=>{Ya.prototype[t]=qa[e][t]}))})),Ya.use([function(e){let{swiper:t,on:n,emit:r}=e;const i=Xo();let s=null,o=null;const a=()=>{t&&!t.destroyed&&t.initialized&&(r("beforeResize"),r("resize"))},c=()=>{t&&!t.destroyed&&t.initialized&&r("orientationchange")};n("init",(()=>{t.params.resizeObserver&&"undefined"!==typeof i.ResizeObserver?t&&!t.destroyed&&t.initialized&&(s=new ResizeObserver((e=>{o=i.requestAnimationFrame((()=>{const{width:n,height:r}=t;let i=n,s=r;e.forEach((e=>{let{contentBoxSize:n,contentRect:r,target:o}=e;o&&o!==t.el||(i=r?r.width:(n[0]||n).inlineSize,s=r?r.height:(n[0]||n).blockSize)})),i===n&&s===r||a()}))})),s.observe(t.el)):(i.addEventListener("resize",a),i.addEventListener("orientationchange",c))})),n("destroy",(()=>{o&&i.cancelAnimationFrame(o),s&&s.unobserve&&t.el&&(s.unobserve(t.el),s=null),i.removeEventListener("resize",a),i.removeEventListener("orientationchange",c)}))},function(e){let{swiper:t,extendParams:n,on:r,emit:i}=e;const s=[],o=Xo(),a=function(e,n){void 0===n&&(n={});const r=new(o.MutationObserver||o.WebkitMutationObserver)((e=>{if(t.__preventObserver__)return;if(1===e.length)return void i("observerUpdate",e[0]);const n=function(){i("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(n):o.setTimeout(n,0)}));r.observe(e,{attributes:"undefined"===typeof n.attributes||n.attributes,childList:"undefined"===typeof n.childList||n.childList,characterData:"undefined"===typeof n.characterData||n.characterData}),s.push(r)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",(()=>{if(t.params.observer){if(t.params.observeParents){const e=function(e,t){const n=[];let r=e.parentElement;for(;r;)t?r.matches(t)&&n.push(r):n.push(r),r=r.parentElement;return n}(t.hostEl);for(let t=0;t<e.length;t+=1)a(e[t])}a(t.hostEl,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}})),r("destroy",(()=>{s.forEach((e=>{e.disconnect()})),s.splice(0,s.length)}))}]);const Ja=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Xa(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)&&!e.__swiper__}function Za(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>n.indexOf(e)<0)).forEach((n=>{"undefined"===typeof e[n]?e[n]=t[n]:Xa(t[n])&&Xa(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:Za(e[n],t[n]):e[n]=t[n]}))}function Qa(e){return void 0===e&&(e={}),e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function $a(e){return void 0===e&&(e={}),e.pagination&&"undefined"===typeof e.pagination.el}function ec(e){return void 0===e&&(e={}),e.scrollbar&&"undefined"===typeof e.scrollbar.el}function tc(e){void 0===e&&(e="");const t=e.split(" ").map((e=>e.trim())).filter((e=>!!e)),n=[];return t.forEach((e=>{n.indexOf(e)<0&&n.push(e)})),n.join(" ")}function nc(e){return void 0===e&&(e=""),e?e.includes("swiper-wrapper")?e:"swiper-wrapper ".concat(e):"swiper-wrapper"}function rc(){return rc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rc.apply(this,arguments)}function ic(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function sc(e){const t=[];return n.Children.toArray(e).forEach((e=>{ic(e)?t.push(e):e.props&&e.props.children&&sc(e.props.children).forEach((e=>t.push(e)))})),t}function oc(e){const t=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return n.Children.toArray(e).forEach((e=>{if(ic(e))t.push(e);else if(e.props&&e.props.slot&&r[e.props.slot])r[e.props.slot].push(e);else if(e.props&&e.props.children){const n=sc(e.props.children);n.length>0?n.forEach((e=>t.push(e))):r["container-end"].push(e)}else r["container-end"].push(e)})),{slides:t,slots:r}}function ac(e,t){return"undefined"===typeof window?(0,n.useEffect)(e,t):(0,n.useLayoutEffect)(e,t)}const cc=(0,n.createContext)(null),lc=(0,n.createContext)(null),dc=(0,n.forwardRef)((function(e,t){let{className:r,tag:i="div",wrapperTag:s="div",children:o,onSwiper:a,...c}=void 0===e?{}:e,l=!1;const[d,u]=(0,n.useState)("swiper"),[h,p]=(0,n.useState)(null),[f,m]=(0,n.useState)(!1),g=(0,n.useRef)(!1),_=(0,n.useRef)(null),v=(0,n.useRef)(null),y=(0,n.useRef)(null),E=(0,n.useRef)(null),b=(0,n.useRef)(null),T=(0,n.useRef)(null),S=(0,n.useRef)(null),w=(0,n.useRef)(null),{params:C,passedParams:R,rest:I,events:N}=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);const n={on:{}},r={},i={};Za(n,Wa),n._emitClasses=!0,n.init=!1;const s={},o=Ja.map((e=>e.replace(/_/,""))),a=Object.assign({},e);return Object.keys(a).forEach((a=>{"undefined"!==typeof e[a]&&(o.indexOf(a)>=0?Xa(e[a])?(n[a]={},i[a]={},Za(n[a],e[a]),Za(i[a],e[a])):(n[a]=e[a],i[a]=e[a]):0===a.search(/on[A-Z]/)&&"function"===typeof e[a]?t?r["".concat(a[2].toLowerCase()).concat(a.substr(3))]=e[a]:n.on["".concat(a[2].toLowerCase()).concat(a.substr(3))]=e[a]:s[a]=e[a])})),["navigation","pagination","scrollbar"].forEach((e=>{!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:i,rest:s,events:r}}(c),{slides:O,slots:A}=oc(o),k=()=>{m(!f)};Object.assign(C.on,{_containerClasses(e,t){u(t)}});const x=()=>{Object.assign(C.on,N),l=!0;const e={...C};if(delete e.wrapperClass,v.current=new Ya(e),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=O;const e={cache:!1,slides:O,renderExternal:p,renderExternalUpdate:!1};Za(v.current.params.virtual,e),Za(v.current.originalParams.virtual,e)}};_.current||x(),v.current&&v.current.on("_beforeBreakpoint",k);return(0,n.useEffect)((()=>()=>{v.current&&v.current.off("_beforeBreakpoint",k)})),(0,n.useEffect)((()=>{!g.current&&v.current&&(v.current.emitSlidesClasses(),g.current=!0)})),ac((()=>{if(t&&(t.current=_.current),_.current)return v.current.destroyed&&x(),function(e,t){let{el:n,nextEl:r,prevEl:i,paginationEl:s,scrollbarEl:o,swiper:a}=e;Qa(t)&&r&&i&&(a.params.navigation.nextEl=r,a.originalParams.navigation.nextEl=r,a.params.navigation.prevEl=i,a.originalParams.navigation.prevEl=i),$a(t)&&s&&(a.params.pagination.el=s,a.originalParams.pagination.el=s),ec(t)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(n)}({el:_.current,nextEl:b.current,prevEl:T.current,paginationEl:S.current,scrollbarEl:w.current,swiper:v.current},C),a&&!v.current.destroyed&&a(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}}),[]),ac((()=>{!l&&N&&v.current&&Object.keys(N).forEach((e=>{v.current.on(e,N[e])}));const e=function(e,t,n,r,i){const s=[];if(!t)return s;const o=e=>{s.indexOf(e)<0&&s.push(e)};if(n&&r){const e=r.map(i),t=n.map(i);e.join("")!==t.join("")&&o("children"),r.length!==n.length&&o("children")}return Ja.filter((e=>"_"===e[0])).map((e=>e.replace(/_/,""))).forEach((n=>{if(n in e&&n in t)if(Xa(e[n])&&Xa(t[n])){const r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?o(n):(r.forEach((r=>{e[n][r]!==t[n][r]&&o(n)})),i.forEach((r=>{e[n][r]!==t[n][r]&&o(n)})))}else e[n]!==t[n]&&o(n)})),s}(R,y.current,O,E.current,(e=>e.key));return y.current=R,E.current=O,e.length&&v.current&&!v.current.destroyed&&function(e){let{swiper:t,slides:n,passedParams:r,changedParams:i,nextEl:s,prevEl:o,scrollbarEl:a,paginationEl:c}=e;const l=i.filter((e=>"children"!==e&&"direction"!==e&&"wrapperClass"!==e)),{params:d,pagination:u,navigation:h,scrollbar:p,virtual:f,thumbs:m}=t;let g,_,v,y,E,b,T,S;i.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&d.thumbs&&!d.thumbs.swiper&&(g=!0),i.includes("controller")&&r.controller&&r.controller.control&&d.controller&&!d.controller.control&&(_=!0),i.includes("pagination")&&r.pagination&&(r.pagination.el||c)&&(d.pagination||!1===d.pagination)&&u&&!u.el&&(v=!0),i.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||a)&&(d.scrollbar||!1===d.scrollbar)&&p&&!p.el&&(y=!0),i.includes("navigation")&&r.navigation&&(r.navigation.prevEl||o)&&(r.navigation.nextEl||s)&&(d.navigation||!1===d.navigation)&&h&&!h.prevEl&&!h.nextEl&&(E=!0);const w=e=>{t[e]&&(t[e].destroy(),"navigation"===e?(t.isElement&&(t[e].prevEl.remove(),t[e].nextEl.remove()),d[e].prevEl=void 0,d[e].nextEl=void 0,t[e].prevEl=void 0,t[e].nextEl=void 0):(t.isElement&&t[e].el.remove(),d[e].el=void 0,t[e].el=void 0))};i.includes("loop")&&t.isElement&&(d.loop&&!r.loop?b=!0:!d.loop&&r.loop?T=!0:S=!0),l.forEach((e=>{if(Xa(d[e])&&Xa(r[e]))Object.assign(d[e],r[e]),"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e||!("enabled"in r[e])||r[e].enabled||w(e);else{const t=r[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?d[e]=r[e]:!1===t&&w(e)}})),l.includes("controller")&&!_&&t.controller&&t.controller.control&&d.controller&&d.controller.control&&(t.controller.control=d.controller.control),i.includes("children")&&n&&f&&d.virtual.enabled?(f.slides=n,f.update(!0)):i.includes("virtual")&&f&&d.virtual.enabled&&(n&&(f.slides=n),f.update(!0)),i.includes("children")&&n&&d.loop&&(S=!0),g&&m.init()&&m.update(!0);_&&(t.controller.control=d.controller.control),v&&(!t.isElement||c&&"string"!==typeof c||(c=document.createElement("div"),c.classList.add("swiper-pagination"),c.part.add("pagination"),t.el.appendChild(c)),c&&(d.pagination.el=c),u.init(),u.render(),u.update()),y&&(!t.isElement||a&&"string"!==typeof a||(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),t.el.appendChild(a)),a&&(d.scrollbar.el=a),p.init(),p.updateSize(),p.setTranslate()),E&&(t.isElement&&(s&&"string"!==typeof s||(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=t.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),t.el.appendChild(s)),o&&"string"!==typeof o||(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=t.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),t.el.appendChild(o))),s&&(d.navigation.nextEl=s),o&&(d.navigation.prevEl=o),h.init(),h.update()),i.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),i.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),i.includes("direction")&&t.changeDirection(r.direction,!1),(b||S)&&t.loopDestroy(),(T||S)&&t.loopCreate(),t.update()}({swiper:v.current,slides:O,passedParams:R,changedParams:e,nextEl:b.current,prevEl:T.current,scrollbarEl:w.current,paginationEl:S.current}),()=>{N&&v.current&&Object.keys(N).forEach((e=>{v.current.off(e,N[e])}))}})),ac((()=>{(e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())})(v.current)}),[h]),n.createElement(i,rc({ref:_,className:tc("".concat(d).concat(r?" ".concat(r):""))},I),n.createElement(lc.Provider,{value:v.current},A["container-start"],n.createElement(s,{className:nc(C.wrapperClass)},A["wrapper-start"],C.virtual?function(e,t,r){if(!r)return null;const i=e=>{let n=e;return e<0?n=t.length+e:n>=t.length&&(n-=t.length),n},s=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:"".concat(r.offset,"px")}:{top:"".concat(r.offset,"px")},{from:o,to:a}=r,c=e.params.loop?-t.length:0,l=e.params.loop?2*t.length:t.length,d=[];for(let n=c;n<l;n+=1)n>=o&&n<=a&&d.push(t[i(n)]);return d.map(((t,r)=>n.cloneElement(t,{swiper:e,style:s,key:t.props.virtualIndex||t.key||"slide-".concat(r)})))}(v.current,O,h):O.map(((e,t)=>n.cloneElement(e,{swiper:v.current,swiperSlideIndex:t}))),A["wrapper-end"]),Qa(C)&&n.createElement(n.Fragment,null,n.createElement("div",{ref:T,className:"swiper-button-prev"}),n.createElement("div",{ref:b,className:"swiper-button-next"})),ec(C)&&n.createElement("div",{ref:w,className:"swiper-scrollbar"}),$a(C)&&n.createElement("div",{ref:S,className:"swiper-pagination"}),A["container-end"]))}));dc.displayName="Swiper";const uc=(0,n.forwardRef)((function(e,t){let{tag:r="div",children:i,className:s="",swiper:o,zoom:a,lazy:c,virtualIndex:l,swiperSlideIndex:d,...u}=void 0===e?{}:e;const h=(0,n.useRef)(null),[p,f]=(0,n.useState)("swiper-slide"),[m,g]=(0,n.useState)(!1);function _(e,t,n){t===h.current&&f(n)}ac((()=>{if("undefined"!==typeof d&&(h.current.swiperSlideIndex=d),t&&(t.current=h.current),h.current&&o){if(!o.destroyed)return o.on("_slideClass",_),()=>{o&&o.off("_slideClass",_)};"swiper-slide"!==p&&f("swiper-slide")}})),ac((()=>{o&&h.current&&!o.destroyed&&f(o.getSlideClasses(h.current))}),[o]);const v={isActive:p.indexOf("swiper-slide-active")>=0,isVisible:p.indexOf("swiper-slide-visible")>=0,isPrev:p.indexOf("swiper-slide-prev")>=0,isNext:p.indexOf("swiper-slide-next")>=0},y=()=>"function"===typeof i?i(v):i;return n.createElement(r,rc({ref:h,className:tc("".concat(p).concat(s?" ".concat(s):"")),"data-swiper-slide-index":l,onLoad:()=>{g(!0)}},u),a&&n.createElement(cc.Provider,{value:v},n.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof a?a:void 0},y(),c&&!m&&n.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&n.createElement(cc.Provider,{value:v},y(),c&&!m&&n.createElement("div",{className:"swiper-lazy-preloader"})))}));function hc(e){let{swiper:t,extendParams:n,on:r,emit:i}=e;function s(e){let n;return e&&"string"===typeof e&&t.isElement&&(n=t.el.querySelector(e),n)?n:(e&&("string"===typeof e&&(n=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&"string"===typeof e&&n.length>1&&1===t.el.querySelectorAll(e).length&&(n=t.el.querySelector(e))),e&&!n?e:n)}function o(e,n){const r=t.params.navigation;(e=ua(e)).forEach((e=>{e&&(e.classList[n?"add":"remove"](...r.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=n),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](r.lockClass))}))}function a(){const{nextEl:e,prevEl:n}=t.navigation;if(t.params.loop)return o(n,!1),void o(e,!1);o(n,t.isBeginning&&!t.params.rewind),o(e,t.isEnd&&!t.params.rewind)}function c(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),i("navigationPrev"))}function l(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),i("navigationNext"))}function d(){const e=t.params.navigation;if(t.params.navigation=function(e,t,n,r){return e.params.createElements&&Object.keys(r).forEach((i=>{if(!n[i]&&!0===n.auto){let s=sa(e.el,".".concat(r[i]))[0];s||(s=aa("div",r[i]),s.className=r[i],e.el.append(s)),n[i]=s,t[i]=s}})),n}(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let n=s(e.nextEl),r=s(e.prevEl);Object.assign(t.navigation,{nextEl:n,prevEl:r}),n=ua(n),r=ua(r);const i=(n,r)=>{n&&n.addEventListener("click","next"===r?l:c),!t.enabled&&n&&n.classList.add(...e.lockClass.split(" "))};n.forEach((e=>i(e,"next"))),r.forEach((e=>i(e,"prev")))}function u(){let{nextEl:e,prevEl:n}=t.navigation;e=ua(e),n=ua(n);const r=(e,n)=>{e.removeEventListener("click","next"===n?l:c),e.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach((e=>r(e,"next"))),n.forEach((e=>r(e,"prev")))}n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null},r("init",(()=>{!1===t.params.navigation.enabled?h():(d(),a())})),r("toEdge fromEdge lock unlock",(()=>{a()})),r("destroy",(()=>{u()})),r("enable disable",(()=>{let{nextEl:e,prevEl:n}=t.navigation;e=ua(e),n=ua(n),t.enabled?a():[...e,...n].filter((e=>!!e)).forEach((e=>e.classList.add(t.params.navigation.lockClass)))})),r("click",((e,n)=>{let{nextEl:r,prevEl:s}=t.navigation;r=ua(r),s=ua(s);const o=n.target;if(t.params.navigation.hideOnClick&&!s.includes(o)&&!r.includes(o)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===o||t.pagination.el.contains(o)))return;let e;r.length?e=r[0].classList.contains(t.params.navigation.hiddenClass):s.length&&(e=s[0].classList.contains(t.params.navigation.hiddenClass)),i(!0===e?"navigationShow":"navigationHide"),[...r,...s].filter((e=>!!e)).forEach((e=>e.classList.toggle(t.params.navigation.hiddenClass)))}}));const h=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),u()};Object.assign(t.navigation,{enable:()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),d(),a()},disable:h,update:a,init:d,destroy:u})}function pc(e){let t,n,{swiper:r,extendParams:i,on:s,emit:o,params:a}=e;r.autoplay={running:!1,paused:!1,timeLeft:0},i({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let c,l,d,u,h,p,f,m,g=a&&a.autoplay?a.autoplay.delay:3e3,_=a&&a.autoplay?a.autoplay.delay:3e3,v=(new Date).getTime();function y(e){r&&!r.destroyed&&r.wrapperEl&&e.target===r.wrapperEl&&(r.wrapperEl.removeEventListener("transitionend",y),m||C())}const E=()=>{if(r.destroyed||!r.autoplay.running)return;r.autoplay.paused?l=!0:l&&(_=c,l=!1);const e=r.autoplay.paused?c:v+_-(new Date).getTime();r.autoplay.timeLeft=e,o("autoplayTimeLeft",e,e/g),n=requestAnimationFrame((()=>{E()}))},b=e=>{if(r.destroyed||!r.autoplay.running)return;cancelAnimationFrame(n),E();let i="undefined"===typeof e?r.params.autoplay.delay:e;g=r.params.autoplay.delay,_=r.params.autoplay.delay;const s=(()=>{let e;if(e=r.virtual&&r.params.virtual.enabled?r.slides.filter((e=>e.classList.contains("swiper-slide-active")))[0]:r.slides[r.activeIndex],!e)return;return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(s)&&s>0&&"undefined"===typeof e&&(i=s,g=s,_=s),c=i;const a=r.params.speed,l=()=>{r&&!r.destroyed&&(r.params.autoplay.reverseDirection?!r.isBeginning||r.params.loop||r.params.rewind?(r.slidePrev(a,!0,!0),o("autoplay")):r.params.autoplay.stopOnLastSlide||(r.slideTo(r.slides.length-1,a,!0,!0),o("autoplay")):!r.isEnd||r.params.loop||r.params.rewind?(r.slideNext(a,!0,!0),o("autoplay")):r.params.autoplay.stopOnLastSlide||(r.slideTo(0,a,!0,!0),o("autoplay")),r.params.cssMode&&(v=(new Date).getTime(),requestAnimationFrame((()=>{b()}))))};return i>0?(clearTimeout(t),t=setTimeout((()=>{l()}),i)):requestAnimationFrame((()=>{l()})),i},T=()=>{v=(new Date).getTime(),r.autoplay.running=!0,b(),o("autoplayStart")},S=()=>{r.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(n),o("autoplayStop")},w=(e,n)=>{if(r.destroyed||!r.autoplay.running)return;clearTimeout(t),e||(f=!0);const i=()=>{o("autoplayPause"),r.params.autoplay.waitForTransition?r.wrapperEl.addEventListener("transitionend",y):C()};if(r.autoplay.paused=!0,n)return p&&(c=r.params.autoplay.delay),p=!1,void i();const s=c||r.params.autoplay.delay;c=s-((new Date).getTime()-v),r.isEnd&&c<0&&!r.params.loop||(c<0&&(c=0),i())},C=()=>{r.isEnd&&c<0&&!r.params.loop||r.destroyed||!r.autoplay.running||(v=(new Date).getTime(),f?(f=!1,b(c)):b(),r.autoplay.paused=!1,o("autoplayResume"))},R=()=>{if(r.destroyed||!r.autoplay.running)return;const e=Yo();"hidden"===e.visibilityState&&(f=!0,w(!0)),"visible"===e.visibilityState&&C()},I=e=>{"mouse"===e.pointerType&&(f=!0,m=!0,r.animating||r.autoplay.paused||w(!0))},N=e=>{"mouse"===e.pointerType&&(m=!1,r.autoplay.paused&&C())};s("init",(()=>{r.params.autoplay.enabled&&(r.params.autoplay.pauseOnMouseEnter&&(r.el.addEventListener("pointerenter",I),r.el.addEventListener("pointerleave",N)),Yo().addEventListener("visibilitychange",R),T())})),s("destroy",(()=>{r.el.removeEventListener("pointerenter",I),r.el.removeEventListener("pointerleave",N),Yo().removeEventListener("visibilitychange",R),r.autoplay.running&&S()})),s("_freeModeStaticRelease",(()=>{(u||f)&&C()})),s("_freeModeNoMomentumRelease",(()=>{r.params.autoplay.disableOnInteraction?S():w(!0,!0)})),s("beforeTransitionStart",((e,t,n)=>{!r.destroyed&&r.autoplay.running&&(n||!r.params.autoplay.disableOnInteraction?w(!0,!0):S())})),s("sliderFirstMove",(()=>{!r.destroyed&&r.autoplay.running&&(r.params.autoplay.disableOnInteraction?S():(d=!0,u=!1,f=!1,h=setTimeout((()=>{f=!0,u=!0,w(!0)}),200)))})),s("touchEnd",(()=>{if(!r.destroyed&&r.autoplay.running&&d){if(clearTimeout(h),clearTimeout(t),r.params.autoplay.disableOnInteraction)return u=!1,void(d=!1);u&&r.params.cssMode&&C(),u=!1,d=!1}})),s("slideChange",(()=>{!r.destroyed&&r.autoplay.running&&(p=!0)})),Object.assign(r.autoplay,{start:T,stop:S,pause:w,resume:C})}function fc(e,t){const n=ia(t);return n!==t&&(n.style.backfaceVisibility="hidden",n.style["-webkit-backface-visibility"]="hidden"),n}function mc(e){let{swiper:t,duration:n,transformElements:r,allSlides:i}=e;const{activeIndex:s}=t;if(t.params.virtualTranslate&&0!==n){let e,n=!1;e=i?r:r.filter((e=>{const n=e.classList.contains("swiper-slide-transform")?(e=>{if(!e.parentElement)return t.slides.filter((t=>t.shadowRoot&&t.shadowRoot===e.parentNode))[0];return e.parentElement})(e):e;return t.getSlideIndex(n)===s})),e.forEach((e=>{!function(e,t){t&&e.addEventListener("transitionend",(function n(r){r.target===e&&(t.call(e,r),e.removeEventListener("transitionend",n))}))}(e,(()=>{if(n)return;if(!t||t.destroyed)return;n=!0,t.animating=!1;const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(e)}))}))}}function gc(e){let{swiper:t,extendParams:n,on:r}=e;n({fadeEffect:{crossFade:!1}});!function(e){const{effect:t,swiper:n,on:r,setTranslate:i,setTransition:s,overwriteParams:o,perspective:a,recreateShadows:c,getEffectParams:l}=e;let d;r("beforeInit",(()=>{if(n.params.effect!==t)return;n.classNames.push("".concat(n.params.containerModifierClass).concat(t)),a&&a()&&n.classNames.push("".concat(n.params.containerModifierClass,"3d"));const e=o?o():{};Object.assign(n.params,e),Object.assign(n.originalParams,e)})),r("setTranslate",(()=>{n.params.effect===t&&i()})),r("setTransition",((e,r)=>{n.params.effect===t&&s(r)})),r("transitionEnd",(()=>{if(n.params.effect===t&&c){if(!l||!l().slideShadows)return;n.slides.forEach((e=>{e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((e=>e.remove()))})),c()}})),r("virtualUpdate",(()=>{n.params.effect===t&&(n.slides.length||(d=!0),requestAnimationFrame((()=>{d&&n.slides&&n.slides.length&&(i(),d=!1)})))}))}({effect:"fade",swiper:t,on:r,setTranslate:()=>{const{slides:e}=t;t.params.fadeEffect;for(let n=0;n<e.length;n+=1){const e=t.slides[n];let r=-e.swiperSlideOffset;t.params.virtualTranslate||(r-=t.translate);let i=0;t.isHorizontal()||(i=r,r=0);const s=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(e.progress),0):1+Math.min(Math.max(e.progress,-1),0),o=fc(0,e);o.style.opacity=s,o.style.transform="translate3d(".concat(r,"px, ").concat(i,"px, 0px)")}},setTransition:e=>{const n=t.slides.map((e=>ia(e)));n.forEach((t=>{t.style.transitionDuration="".concat(e,"ms")})),mc({swiper:t,duration:e,transformElements:n,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!t.params.cssMode})})}uc.displayName="SwiperSlide";const _c=()=>(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"fsMainSlider",children:(0,Ae.jsx)("div",{className:"container",children:(0,Ae.jsxs)("div",{className:"row justify-content-center",children:[(0,Ae.jsx)("div",{className:"col-md-6 centerBx",children:(0,Ae.jsxs)("div",{className:"",children:[(0,Ae.jsxs)("h1",{children:["Find the right ",(0,Ae.jsx)("i",{children:"freelance"})," service, right away"]}),(0,Ae.jsxs)("form",{className:"input-group width100",children:[(0,Ae.jsx)("input",{placeholder:"Search...",type:"text",className:"form-control"}),(0,Ae.jsx)("button",{type:"button",id:"button-addon2",className:"btn btn-primary text-white",children:(0,Ae.jsx)("i",{className:"fa fa-search text-white","aria-hidden":"true"})})]}),(0,Ae.jsx)("div",{align:"left",children:(0,Ae.jsxs)("ul",{className:"bannerPopularList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)("b",{children:"Popular : "})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Content Writer"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Photographer"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Web Developer"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"UI/UX"})})]})})]})}),(0,Ae.jsx)("div",{className:"col-md-1",align:"center"}),(0,Ae.jsx)("div",{className:"col-md-5",align:"center",children:(0,Ae.jsxs)(dc,{spaceBetween:0,slidesPerView:1,loop:!0,autoplay:{delay:2500,disableOnInteraction:!1},modules:[gc,pc],effect:"fade",onSlideChange:()=>"",onSwiper:e=>"",children:[(0,Ae.jsx)(uc,{children:(0,Ae.jsx)("img",{src:"./assets/images/banner-M-1.webp",alt:""})}),(0,Ae.jsx)(uc,{children:(0,Ae.jsx)("img",{src:"./assets/images/banner-M-2.webp",alt:""})}),(0,Ae.jsx)(uc,{children:(0,Ae.jsx)("img",{src:"./assets/images/banner-M-3.webp",alt:""})}),(0,Ae.jsx)(uc,{children:(0,Ae.jsx)("img",{src:"./assets/images/banner-M-4.webp",alt:""})})]})})]})})})}),vc=__webpack_require__.p+"static/media/no-poster.de8cb0a7786e6bf2b2de.png",yc=e=>{let{item:t}=e;const{goodsList:r,wishListAdd:i,wishListRemove:s,userData:o}=Kr(),[a,c]=(0,n.useState)([]);return(0,n.useEffect)((()=>{if(r&&Array.isArray(r)){let e={};r.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[r]),(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",children:[(0,Ae.jsxs)("div",{className:"imgBx",children:[(0,Ae.jsx)(Ie,{to:"/product-detail/".concat(t._id),children:(0,Ae.jsx)("img",{src:t.photo||vc,className:"card-img-top allImg",alt:""})}),t.userId===o._id?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){s(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(t.product_id),children:(0,Ae.jsx)("i",{className:a[t.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:(0,Ae.jsx)(Ie,{to:"/product-detail/".concat(t._id),children:null===t||void 0===t?void 0:t.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description})]})]})},t._id)})},Ec=e=>{let{item:t,index:n}=e;const{goodsList:r}=Kr(),i=n%2!==0;return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"mt-4 ".concat(i?"bg-light":""),children:(0,Ae.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Ae.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Ae.jsx)("h4",{className:"m-0",children:t.title}),(0,Ae.jsx)(Ie,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Ae.jsx)("aside",{className:"row pt-2",children:Array.isArray(r)&&r.slice(0,4).map(((e,t)=>(0,Ae.jsx)(yc,{item:e},t)))},t._id)]})})})},bc=e=>{let{item:t}=e;const{fashion:r,wishListAdd:i,wishListRemove:s,userData:o}=Kr(),[a,c]=(0,n.useState)([]);return(0,n.useEffect)((()=>{if(r&&Array.isArray(r)){let e={};r.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[r]),(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"",children:(0,Ae.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Ae.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Ae.jsx)("h4",{children:"Fashion & Beauty"}),(0,Ae.jsx)(Ie,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Ae.jsx)("aside",{className:"row pt-2",children:Array.isArray(r)&&r.slice(0,4).map((e=>(0,Ae.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",children:[(0,Ae.jsxs)("div",{className:"imgBx",children:[(0,Ae.jsx)(Ie,{to:"/Fashion-Beauty-Details/".concat(e._id),children:(0,Ae.jsx)("img",{src:e.photo||vc,className:"card-img-top allImg",alt:""})}),e.userId===o._id?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){s(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(e.product_id),children:(0,Ae.jsx)("i",{className:a[e.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:(0,Ae.jsx)(Ie,{to:"/Fashion-Beauty-Details/".concat(e._id),children:e.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})},e._id)))})]})})})},Tc=e=>{let{item:t}=e;const{lesson:r,wishListAdd:i,wishListRemove:s,userData:o}=Kr(),[a,c]=(0,n.useState)([]);return(0,n.useEffect)((()=>{if(r&&Array.isArray(r)){let e={};r.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[r]),(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"bg-light",children:(0,Ae.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Ae.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Ae.jsx)("h4",{children:"Lessons & Courses"}),(0,Ae.jsx)(Ie,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Ae.jsx)("aside",{className:"row pt-2 ",children:Array.isArray(r)&&r.slice(0,4).map((e=>(0,Ae.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",children:[(0,Ae.jsxs)("div",{className:"imgBx",children:[(0,Ae.jsx)(Ie,{to:"/lessons-courses-detail/".concat(e._id),children:(0,Ae.jsx)("img",{src:e.image||vc,className:"card-img-top allImg",alt:""})}),e.userId===o._id?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){s(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(e.product_id),children:(0,Ae.jsx)("i",{className:a[e.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:(0,Ae.jsx)(Ie,{to:"/lessons-courses-detail/".concat(e._id),children:e.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})},e._id)))})]})})})},Sc=e=>{let{item:t}=e;const{jobList:r,wishListAdd:i,wishListRemove:s,userData:o}=Kr(),[a,c]=(0,n.useState)({});return(0,n.useEffect)((()=>{if(r&&Array.isArray(r)){let e={};r.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[r]),(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"",children:(0,Ae.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Ae.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Ae.jsx)("h4",{className:"m-0",children:t.title}),(0,Ae.jsx)(Ie,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Ae.jsx)("aside",{className:"row pt-2",children:Array.isArray(r)&&r.slice(0,4).map((e=>(0,Ae.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",children:[(0,Ae.jsxs)("div",{className:"imgBx",children:[(0,Ae.jsx)(Ie,{to:"/job-detail/".concat(e._id),children:(0,Ae.jsx)("img",{src:e.image||vc,className:"card-img-top allImg",alt:""})}),e.userId===o._id?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){s(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(e.product_id),children:(0,Ae.jsx)("i",{className:a[e.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:(0,Ae.jsx)(Ie,{to:"/job-detail/".concat(e._id),children:null===e||void 0===e?void 0:e.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})},e._id)))})]})})})},wc=()=>(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"bg-light",children:(0,Ae.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Ae.jsx)("h4",{children:"Top cities"}),(0,Ae.jsxs)("div",{className:"row cityLink border-bottom border-1 mt-3 mb-3",children:[(0,Ae.jsx)("div",{className:"col",children:(0,Ae.jsxs)("ul",{className:"list-unstyled",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Berlin"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Bremen"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Dortmund"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Dresden"})})]})}),(0,Ae.jsx)("div",{className:"col",children:(0,Ae.jsxs)("ul",{className:"list-unstyled",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Duisburg"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Dusseldorf"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Eat"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Frankfurt am Main"})})]})}),(0,Ae.jsx)("div",{className:"col",children:(0,Ae.jsxs)("ul",{className:"list-unstyled",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Hamburg"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Hanover"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Cologne"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Leipzig"})})]})}),(0,Ae.jsx)("div",{className:"col",children:(0,Ae.jsxs)("ul",{className:"list-unstyled",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Munich"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Nuremberg (Central Fri)"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Saarbr\xfccken"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{children:"Stuttgart"})})]})})]}),(0,Ae.jsx)("h4",{children:"Important Info"}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})})}),Cc=e=>{let{item:t}=e;const{freelancerList:r,wishListAdd:i,wishListRemove:s,userData:o}=Kr(),[a,c]=(0,n.useState)([]);return(0,n.useEffect)((()=>{if(r&&Array.isArray(r)){let e={};r.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[r]),(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"bg-light",children:(0,Ae.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Ae.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Ae.jsx)("h4",{className:"m-0",children:t.title}),(0,Ae.jsx)(Ie,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Ae.jsx)("aside",{className:"row pt-2",children:Array.isArray(r)&&r.slice(0,4).map((e=>(0,Ae.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",children:[(0,Ae.jsxs)("div",{className:"imgBx",children:[(0,Ae.jsx)(Ie,{to:"/freelancer-detail/".concat(e._id),children:(0,Ae.jsx)("img",{src:e.image||vc,className:"card-img-top allImg",alt:""})}),e.userId===o._id?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){s(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(e.product_id),children:(0,Ae.jsx)("i",{className:a[e.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:(0,Ae.jsx)(Ie,{to:"/freelancer-detail/".concat(e._id),children:e.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})},e._id)))})]})})})},Rc=e=>{let{item:t}=e;const{property:r,wishListAdd:i,wishListRemove:s,userData:o}=Kr(),[a,c]=(0,n.useState)([]);return(0,n.useEffect)((()=>{if(r&&Array.isArray(r)){let e={};r.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[r]),(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"",children:(0,Ae.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Ae.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Ae.jsx)("h4",{className:"m-0",children:t.title}),(0,Ae.jsx)(Ie,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Ae.jsx)("aside",{className:"row pt-2",children:Array.isArray(r)&&r.slice(0,4).map((e=>(0,Ae.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",children:[(0,Ae.jsxs)("div",{className:"imgBx",children:[(0,Ae.jsx)(Ie,{to:"/realstate-detail/".concat(e._id),children:(0,Ae.jsx)("img",{src:e.photo||vc,className:"card-img-top allImg",alt:""})}),e.userId===o._id?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){s(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(e.product_id),children:(0,Ae.jsx)("i",{className:a[e.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:(0,Ae.jsx)(Ie,{to:"/realstate-detail/".concat(e._id),children:e.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})},e._id)))})]})})})},Ic=e=>{let{item:t}=e;const{electronicsList:r,wishListAdd:i,wishListRemove:s,userData:o}=Kr(),[a,c]=(0,n.useState)([]);return(0,n.useEffect)((()=>{if(r&&Array.isArray(r)){let e={};r.forEach((t=>{e[t.product_id]=t.isWishlist})),c(e)}}),[r]),(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"bg-light",children:(0,Ae.jsxs)("article",{className:"container pt-4 pb-4",children:[(0,Ae.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Ae.jsx)("h4",{className:"m-0",children:t.title}),(0,Ae.jsx)(Ie,{className:"text text-decoration-none ",to:"/".concat(t.slug,"?category_id=").concat(t._id),onMouseEnter:e=>e.target.style.color="var(--theme-color)",onMouseLeave:e=>e.target.style.color="black",children:"View All"})]}),(0,Ae.jsx)("aside",{className:"row pt-2 ",children:Array.isArray(r)&&r.slice(0,4).map((e=>(0,Ae.jsx)("div",{className:"col-md-3 col-12 proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",children:[(0,Ae.jsxs)("div",{className:"imgBx  ",children:[(0,Ae.jsx)(Ie,{to:"/Electronics-detail/".concat(e._id),children:(0,Ae.jsx)("img",{src:e.photo||vc,className:"card-img-top allImg ",alt:""})}),e.userId===o._id?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{if(a[e]){s(e);const t={...a};t[e]=!1,c(t)}else i(e),c((t=>({...t,[e]:!t[e]})))})(e.product_id),children:(0,Ae.jsx)("i",{className:a[e.product_id]?"fa fa-heart text-danger":"fa fa-heart-o"})})]}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:(0,Ae.jsx)(Ie,{to:"/Electronics-detail/".concat(e._id),children:e.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})},e._id)))})]})})})},Nc=()=>{const{serviceList:e}=Kr();return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(_c,{}),(0,Ae.jsxs)("div",{className:"bgtheme",children:[Array.isArray(e)&&e.map(((e,t)=>{switch(e.slug){case"goods_of_all_kinds":return(0,Ae.jsx)(Ec,{item:e,index:t},t);case"fashion_beauty":return(0,Ae.jsx)(bc,{item:e,index:t},t);case"lesson_courses":return(0,Ae.jsx)(Tc,{item:e,index:t},t);case"jobs":return(0,Ae.jsx)(Sc,{item:e,index:t},t);case"freelancer":return(0,Ae.jsx)(Cc,{item:e,index:t},t);case"real_estate":return(0,Ae.jsx)(Rc,{item:e,index:t},t);case"electronics":return(0,Ae.jsx)(Ic,{item:e,index:t},t);default:return null}})),(0,Ae.jsx)(wc,{})]})]})};function Oc(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Oc(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const Ac=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Oc(e))&&(r&&(r+=" "),r+=t);return r},kc=e=>"number"==typeof e&&!isNaN(e),xc=e=>"string"==typeof e,Pc=e=>"function"==typeof e,Dc=e=>xc(e)||Pc(e)?e:null,Lc=e=>(0,n.isValidElement)(e)||xc(e)||Pc(e)||kc(e);function Mc(e){let{enter:t,exit:r,appendPosition:i=!1,collapse:s=!0,collapseDuration:o=300}=e;return function(e){let{children:a,position:c,preventExitTransition:l,done:d,nodeRef:u,isIn:h}=e;const p=i?"".concat(t,"--").concat(c):t,f=i?"".concat(r,"--").concat(c):r,m=(0,n.useRef)(0);return(0,n.useLayoutEffect)((()=>{const e=u.current,t=p.split(" "),n=r=>{r.target===u.current&&(e.dispatchEvent(new Event("d")),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===m.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,n.useEffect)((()=>{const e=u.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t,n){void 0===n&&(n=300);const{scrollHeight:r,style:i}=e;requestAnimationFrame((()=>{i.minHeight="initial",i.height=r+"px",i.transition="all ".concat(n,"ms"),requestAnimationFrame((()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,d,o):d()};h||(l?t():(m.current=1,e.className+=" ".concat(f),e.addEventListener("animationend",t)))}),[h]),n.createElement(n.Fragment,null,a)}}function jc(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const Uc={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter((e=>e!==t));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach((t=>{const n=setTimeout((()=>{t(...[].slice.call(arguments,1))}),0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)}))}},Fc=e=>{let{theme:t,type:r,...i}=e;return n.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(r,")"),...i})},Bc={info:function(e){return n.createElement(Fc,{...e},n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return n.createElement(Fc,{...e},n.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return n.createElement(Fc,{...e},n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return n.createElement(Fc,{...e},n.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return n.createElement("div",{className:"Toastify__spinner"})}};function Vc(e){const[,t]=(0,n.useReducer)((e=>e+1),0),[r,i]=(0,n.useState)([]),s=(0,n.useRef)(null),o=(0,n.useRef)(new Map).current,a=e=>-1!==r.indexOf(e),c=(0,n.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:a,getToast:e=>o.get(e)}).current;function l(e){let{containerId:t}=e;const{limit:n}=c.props;!n||t&&c.containerId!==t||(c.count-=c.queue.length,c.queue=[])}function d(e){i((t=>null==e?[]:t.filter((t=>t!==e))))}function u(){const{toastContent:e,toastProps:t,staleId:n}=c.queue.shift();p(e,t,n)}function h(e,r){let{delay:i,staleId:a,...l}=r;if(!Lc(e)||function(e){return!s.current||c.props.enableMultiContainer&&e.containerId!==c.props.containerId||o.has(e.toastId)&&null==e.updateId}(l))return;const{toastId:h,updateId:f,data:m}=l,{props:g}=c,_=()=>d(h),v=null==f;v&&c.count++;const y={...g,style:g.toastStyle,key:c.toastKey++,...Object.fromEntries(Object.entries(l).filter((e=>{let[t,n]=e;return null!=n}))),toastId:h,updateId:f,data:m,closeToast:_,isIn:!1,className:Dc(l.className||g.toastClassName),bodyClassName:Dc(l.bodyClassName||g.bodyClassName),progressClassName:Dc(l.progressClassName||g.progressClassName),autoClose:!l.isLoading&&(E=l.autoClose,b=g.autoClose,!1===E||kc(E)&&E>0?E:b),deleteToast(){const e=jc(o.get(h),"removed");o.delete(h),Uc.emit(4,e);const n=c.queue.length;if(c.count=null==h?c.count-c.displayedToast:c.count-1,c.count<0&&(c.count=0),n>0){const e=null==h?c.props.limit:1;if(1===n||1===e)c.displayedToast++,u();else{const t=e>n?n:e;c.displayedToast=t;for(let e=0;e<t;e++)u()}}else t()}};var E,b;y.iconOut=function(e){let{theme:t,type:r,isLoading:i,icon:s}=e,o=null;const a={theme:t,type:r};return!1===s||(Pc(s)?o=s(a):(0,n.isValidElement)(s)?o=(0,n.cloneElement)(s,a):xc(s)||kc(s)?o=s:i?o=Bc.spinner():(e=>e in Bc)(r)&&(o=Bc[r](a))),o}(y),Pc(l.onOpen)&&(y.onOpen=l.onOpen),Pc(l.onClose)&&(y.onClose=l.onClose),y.closeButton=g.closeButton,!1===l.closeButton||Lc(l.closeButton)?y.closeButton=l.closeButton:!0===l.closeButton&&(y.closeButton=!Lc(g.closeButton)||g.closeButton);let T=e;(0,n.isValidElement)(e)&&!xc(e.type)?T=(0,n.cloneElement)(e,{closeToast:_,toastProps:y,data:m}):Pc(e)&&(T=e({closeToast:_,toastProps:y,data:m})),g.limit&&g.limit>0&&c.count>g.limit&&v?c.queue.push({toastContent:T,toastProps:y,staleId:a}):kc(i)?setTimeout((()=>{p(T,y,a)}),i):p(T,y,a)}function p(e,t,n){const{toastId:r}=t;n&&o.delete(n);const s={content:e,props:t};o.set(r,s),i((e=>[...e,r].filter((e=>e!==n)))),Uc.emit(4,jc(s,null==s.props.updateId?"added":"updated"))}return(0,n.useEffect)((()=>(c.containerId=e.containerId,Uc.cancelEmit(3).on(0,h).on(1,(e=>s.current&&d(e))).on(5,l).emit(2,c),()=>{o.clear(),Uc.emit(3,c)})),[]),(0,n.useEffect)((()=>{c.props=e,c.isToastActive=a,c.displayedToast=r.length})),{getToastToRender:function(t){const n=new Map,r=Array.from(o.values());return e.newestOnTop&&r.reverse(),r.forEach((e=>{const{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},containerRef:s,isToastActive:a}}function Gc(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function Hc(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function Wc(e){const[t,r]=(0,n.useState)(!1),[i,s]=(0,n.useState)(!1),o=(0,n.useRef)(null),a=(0,n.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,c=(0,n.useRef)(e),{autoClose:l,pauseOnHover:d,closeToast:u,onClick:h,closeOnClick:p}=e;function f(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),a.didMove=!1,document.addEventListener("mousemove",v),document.addEventListener("mouseup",y),document.addEventListener("touchmove",v),document.addEventListener("touchend",y);const n=o.current;a.canCloseOnClick=!0,a.canDrag=!0,a.boundingRect=n.getBoundingClientRect(),n.style.transition="",a.x=Gc(t.nativeEvent),a.y=Hc(t.nativeEvent),"x"===e.draggableDirection?(a.start=a.x,a.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(a.start=a.y,a.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function m(t){if(a.boundingRect){const{top:n,bottom:r,left:i,right:s}=a.boundingRect;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&a.x>=i&&a.x<=s&&a.y>=n&&a.y<=r?_():g()}}function g(){r(!0)}function _(){r(!1)}function v(n){const r=o.current;a.canDrag&&r&&(a.didMove=!0,t&&_(),a.x=Gc(n),a.y=Hc(n),a.delta="x"===e.draggableDirection?a.x-a.start:a.y-a.start,a.start!==a.x&&(a.canCloseOnClick=!1),r.style.transform="translate".concat(e.draggableDirection,"(").concat(a.delta,"px)"),r.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance)))}function y(){document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",y);const t=o.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return s(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate".concat(e.draggableDirection,"(0)"),t.style.opacity="1"}}(0,n.useEffect)((()=>{c.current=e})),(0,n.useEffect)((()=>(o.current&&o.current.addEventListener("d",g,{once:!0}),Pc(e.onOpen)&&e.onOpen((0,n.isValidElement)(e.children)&&e.children.props),()=>{const e=c.current;Pc(e.onClose)&&e.onClose((0,n.isValidElement)(e.children)&&e.children.props)})),[]),(0,n.useEffect)((()=>(e.pauseOnFocusLoss&&(document.hasFocus()||_(),window.addEventListener("focus",g),window.addEventListener("blur",_)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",g),window.removeEventListener("blur",_))})),[e.pauseOnFocusLoss]);const E={onMouseDown:f,onTouchStart:f,onMouseUp:m,onTouchEnd:m};return l&&d&&(E.onMouseEnter=_,E.onMouseLeave=g),p&&(E.onClick=e=>{h&&h(e),a.canCloseOnClick&&u()}),{playToast:g,pauseToast:_,isRunning:t,preventExitTransition:i,toastRef:o,eventHandlers:E}}function zc(e){let{closeToast:t,theme:r,ariaLabel:i="close"}=e;return n.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(r),type:"button",onClick:e=>{e.stopPropagation(),t(e)},"aria-label":i},n.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},n.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function qc(e){let{delay:t,isRunning:r,closeToast:i,type:s="default",hide:o,className:a,style:c,controlledProgress:l,progress:d,rtl:u,isIn:h,theme:p}=e;const f=o||l&&0===d,m={...c,animationDuration:"".concat(t,"ms"),animationPlayState:r?"running":"paused",opacity:f?0:1};l&&(m.transform="scaleX(".concat(d,")"));const g=Ac("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(p),"Toastify__progress-bar--".concat(s),{"Toastify__progress-bar--rtl":u}),_=Pc(a)?a({rtl:u,type:s,defaultClassName:g}):Ac(g,a);return n.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:_,style:m,[l&&d>=1?"onTransitionEnd":"onAnimationEnd"]:l&&d<1?null:()=>{h&&i()}})}const Kc=e=>{const{isRunning:t,preventExitTransition:r,toastRef:i,eventHandlers:s}=Wc(e),{closeButton:o,children:a,autoClose:c,onClick:l,type:d,hideProgressBar:u,closeToast:h,transition:p,position:f,className:m,style:g,bodyClassName:_,bodyStyle:v,progressClassName:y,progressStyle:E,updateId:b,role:T,progress:S,rtl:w,toastId:C,deleteToast:R,isIn:I,isLoading:N,iconOut:O,closeOnClick:A,theme:k}=e,x=Ac("Toastify__toast","Toastify__toast-theme--".concat(k),"Toastify__toast--".concat(d),{"Toastify__toast--rtl":w},{"Toastify__toast--close-on-click":A}),P=Pc(m)?m({rtl:w,position:f,type:d,defaultClassName:x}):Ac(x,m),D=!!S||!c,L={closeToast:h,type:d,theme:k};let M=null;return!1===o||(M=Pc(o)?o(L):(0,n.isValidElement)(o)?(0,n.cloneElement)(o,L):zc(L)),n.createElement(p,{isIn:I,done:R,position:f,preventExitTransition:r,nodeRef:i},n.createElement("div",{id:C,onClick:l,className:P,...s,style:g,ref:i},n.createElement("div",{...I&&{role:T},className:Pc(_)?_({type:d}):Ac("Toastify__toast-body",_),style:v},null!=O&&n.createElement("div",{className:Ac("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!N})},O),n.createElement("div",null,a)),M,n.createElement(qc,{...b&&!D?{key:"pb-".concat(b)}:{},rtl:w,theme:k,delay:c,isRunning:t,isIn:I,closeToast:h,hide:u,type:d,style:E,className:y,controlledProgress:D,progress:S||0})))},Yc=function(e,t){return void 0===t&&(t=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},Jc=Mc(Yc("bounce",!0)),Xc=(Mc(Yc("slide",!0)),Mc(Yc("zoom")),Mc(Yc("flip"))),Zc=(0,n.forwardRef)(((e,t)=>{const{getToastToRender:r,containerRef:i,isToastActive:s}=Vc(e),{className:o,style:a,rtl:c,containerId:l}=e;function d(e){const t=Ac("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":c});return Pc(o)?o({position:e,rtl:c,defaultClassName:t}):Ac(t,Dc(o))}return(0,n.useEffect)((()=>{t&&(t.current=i.current)}),[]),n.createElement("div",{ref:i,className:"Toastify",id:l},r(((e,t)=>{const r=t.length?{...a}:{...a,pointerEvents:"none"};return n.createElement("div",{className:d(e),style:r,key:"container-".concat(e)},t.map(((e,r)=>{let{content:i,props:o}=e;return n.createElement(Kc,{...o,isIn:s(o.toastId),style:{...o.style,"--nth":r+1,"--len":t.length},key:"toast-".concat(o.key)},i)})))})))}));Zc.displayName="ToastContainer",Zc.defaultProps={position:"top-right",transition:Jc,autoClose:5e3,closeButton:zc,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let Qc,$c=new Map,el=[],tl=1;function nl(){return""+tl++}function rl(e){return e&&(xc(e.toastId)||kc(e.toastId))?e.toastId:nl()}function il(e,t){return $c.size>0?Uc.emit(0,e,t):el.push({content:e,options:t}),t.toastId}function sl(e,t){return{...t,type:t&&t.type||e,toastId:rl(t)}}function ol(e){return(t,n)=>il(t,sl(e,n))}function al(e,t){return il(e,sl("default",t))}al.loading=(e,t)=>il(e,sl("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),al.promise=function(e,t,n){let r,{pending:i,error:s,success:o}=t;i&&(r=xc(i)?al.loading(i,n):al.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(e,t,i)=>{if(null==t)return void al.dismiss(r);const s={type:e,...a,...n,data:i},o=xc(t)?{render:t}:t;return r?al.update(r,{...s,...o}):al(o.render,{...s,...o}),i},l=Pc(e)?e():e;return l.then((e=>c("success",o,e))).catch((e=>c("error",s,e))),l},al.success=ol("success"),al.info=ol("info"),al.error=ol("error"),al.warning=ol("warning"),al.warn=al.warning,al.dark=(e,t)=>il(e,sl("default",{theme:"dark",...t})),al.dismiss=e=>{$c.size>0?Uc.emit(1,e):el=el.filter((t=>null!=e&&t.options.toastId!==e))},al.clearWaitingQueue=function(e){return void 0===e&&(e={}),Uc.emit(5,e)},al.isActive=e=>{let t=!1;return $c.forEach((n=>{n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},al.update=function(e,t){void 0===t&&(t={}),setTimeout((()=>{const n=function(e,t){let{containerId:n}=t;const r=$c.get(n||Qc);return r&&r.getToast(e)}(e,t);if(n){const{props:r,content:i}=n,s={delay:100,...r,...t,toastId:t.toastId||e,updateId:nl()};s.toastId!==e&&(s.staleId=e);const o=s.render||i;delete s.render,il(o,s)}}),0)},al.done=e=>{al.update(e,{progress:1})},al.onChange=e=>(Uc.on(4,e),()=>{Uc.off(4,e)}),al.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},al.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Uc.on(2,(e=>{Qc=e.containerId||e,$c.set(Qc,e),el.forEach((e=>{Uc.emit(0,e.content,e.options)})),el=[]})).on(3,(e=>{$c.delete(e.containerId||e),0===$c.size&&Uc.off(0).off(1).off(5)}));const cl=e=>{let{title:t,param:n}=e;return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:t})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:n})]})})]})})})})},ll=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Ae.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Ae.jsx)(Ie,{className:"navbar-brand",to:"#sideBarCollapse",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Ae.jsx)("i",{className:"navbar-toggler",children:(0,Ae.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Ae.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Ae.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Ae.jsx)("div",{children:n&&n.length>0&&(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("div",{className:"headBx",children:e.attribute},e._id),(0,Ae.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Ae.jsx)("ul",{className:"list-group list-group-flush",children:(0,Ae.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Ae.jsxs)("label",{children:[(0,Ae.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}})," ",n.value]})})},n._id)))})]})},e._id)}))})})]})})},dl=e=>{let{item:t}=e;const{wishListAdd:r,wishListRemove:i,userData:s}=Kr(),[o,a]=(0,n.useState)(t.isWishlist);return(0,Ae.jsx)("div",{className:"col col-lg-4 proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",style:{height:"350px"},children:[(0,Ae.jsxs)("div",{className:"imgBx",children:[(0,Ae.jsx)(Ie,{to:"/product-detail/".concat(t._id),children:(0,Ae.jsx)("img",{src:null===t||void 0===t?void 0:t.photo,className:"card-img-top allImg",alt:""})}),s._id===t.userId?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{o?i(e):r(e),a(!o)})(t.product_id),children:(0,Ae.jsx)("i",{className:"fa ".concat(o?"fa-heart text-danger":"fa-heart-o")})})]}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:(0,Ae.jsx)(Ie,{to:"/product-detail/".concat(t._id),children:t.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description})]})]},t._id)})};function ul(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ul(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const hl=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ul(e))&&(r&&(r+=" "),r+=t);return r};function pl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}function fl(e,t){const n=(0,Me.A)({},t);return Object.keys(e).forEach((r=>{if(r.toString().match(/^(components|slots)$/))n[r]=(0,Me.A)({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},s=t[r];n[r]={},s&&Object.keys(s)?i&&Object.keys(i)?(n[r]=(0,Me.A)({},s),Object.keys(i).forEach((e=>{n[r][e]=fl(i[e],s[e])}))):n[r]=s:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}function ml(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?fl(t.components[n].defaultProps,r):r}var gl=__webpack_require__(8280),_l=__webpack_require__(5756);const vl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=n.useContext(_l.T);return t&&(r=t,0!==Object.keys(r).length)?t:e;var r},yl=(0,gl.A)();const El=function(){return vl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:yl)};function bl(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,s=El(r);i&&(s=s[i]||s);return ml({theme:s,name:n,props:t})}var Tl=__webpack_require__(6632),Sl=__webpack_require__(3216),wl=__webpack_require__(7758),Cl=__webpack_require__(8812);function Rl(e,t){return(0,Me.A)({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Il=__webpack_require__(7266);const Nl={black:"#000",white:"#fff"},Ol={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Al={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},kl={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},xl={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Pl={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Dl={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Ll={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Ml=["mode","contrastThreshold","tonalOffset"],jl={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Nl.white,default:Nl.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Ul={text:{primary:Nl.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Nl.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Fl(e,t,n,r){const i=r.light||r,s=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,Il.a)(e.main,i):"dark"===t&&(e.dark=(0,Il.e$)(e.main,s)))}function Bl(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=(0,je.A)(e,Ml),s=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Pl[200],light:Pl[50],dark:Pl[400]}:{main:Pl[700],light:Pl[400],dark:Pl[800]}}(t),o=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Al[200],light:Al[50],dark:Al[400]}:{main:Al[500],light:Al[300],dark:Al[700]}}(t),a=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:kl[500],light:kl[300],dark:kl[700]}:{main:kl[700],light:kl[400],dark:kl[800]}}(t),c=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Dl[400],light:Dl[300],dark:Dl[700]}:{main:Dl[700],light:Dl[500],dark:Dl[900]}}(t),l=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Ll[400],light:Ll[300],dark:Ll[700]}:{main:Ll[800],light:Ll[500],dark:Ll[900]}}(t),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:xl[400],light:xl[300],dark:xl[700]}:{main:"#ed6c02",light:xl[500],dark:xl[900]}}(t);function u(e){return(0,Il.eM)(e,Ul.text.primary)>=n?Ul.text.primary:jl.text.primary}const h=e=>{let{color:t,name:n,mainShade:i=500,lightShade:s=300,darkShade:o=700}=e;if(t=(0,Me.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,Tl.A)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,Tl.A)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return Fl(t,"light",s,r),Fl(t,"dark",o,r),t.contrastText||(t.contrastText=u(t.main)),t},p={dark:Ul,light:jl};return(0,Sl.A)((0,Me.A)({common:(0,Me.A)({},Nl),mode:t,primary:h({color:s,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:d,name:"warning"}),info:h({color:c,name:"info"}),success:h({color:l,name:"success"}),grey:Ol,contrastThreshold:n,getContrastText:u,augmentColor:h,tonalOffset:r},p[t]),i)}const Vl=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const Gl={textTransform:"uppercase"},Hl='"Roboto", "Helvetica", "Arial", sans-serif';function Wl(e,t){const n="function"===typeof t?t(e):t,{fontFamily:r=Hl,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:c=700,htmlFontSize:l=16,allVariants:d,pxToRem:u}=n,h=(0,je.A)(n,Vl);const p=i/14,f=u||(e=>"".concat(e/l*p,"rem")),m=(e,t,n,i,s)=>{return(0,Me.A)({fontFamily:r,fontWeight:e,fontSize:f(t),lineHeight:n},r===Hl?{letterSpacing:"".concat((o=i/t,Math.round(1e5*o)/1e5),"em")}:{},s,d);var o},g={h1:m(s,96,1.167,-1.5),h2:m(s,60,1.2,-.5),h3:m(o,48,1.167,0),h4:m(o,34,1.235,.25),h5:m(o,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(o,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(o,16,1.5,.15),body2:m(o,14,1.43,.15),button:m(a,14,1.75,.4,Gl),caption:m(o,12,1.66,.4),overline:m(o,12,2.66,1,Gl),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,Sl.A)((0,Me.A)({htmlFontSize:l,pxToRem:f,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:c},g),h,{clone:!1})}function zl(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const ql=["none",zl(0,2,1,-1,0,1,1,0,0,1,3,0),zl(0,3,1,-2,0,2,2,0,0,1,5,0),zl(0,3,3,-2,0,3,4,0,0,1,8,0),zl(0,2,4,-1,0,4,5,0,0,1,10,0),zl(0,3,5,-1,0,5,8,0,0,1,14,0),zl(0,3,5,-1,0,6,10,0,0,1,18,0),zl(0,4,5,-2,0,7,10,1,0,2,16,1),zl(0,5,5,-3,0,8,10,1,0,3,14,2),zl(0,5,6,-3,0,9,12,1,0,3,16,2),zl(0,6,6,-3,0,10,14,1,0,4,18,3),zl(0,6,7,-4,0,11,15,1,0,4,20,3),zl(0,7,8,-4,0,12,17,2,0,5,22,4),zl(0,7,8,-4,0,13,19,2,0,5,24,4),zl(0,7,9,-4,0,14,21,2,0,5,26,4),zl(0,8,9,-5,0,15,22,2,0,6,28,5),zl(0,8,10,-5,0,16,24,2,0,6,30,5),zl(0,8,11,-5,0,17,26,2,0,6,32,5),zl(0,9,11,-5,0,18,28,2,0,7,34,6),zl(0,9,12,-6,0,19,29,2,0,7,36,6),zl(0,10,13,-6,0,20,31,3,0,8,38,7),zl(0,10,13,-6,0,21,33,3,0,8,40,7),zl(0,10,14,-6,0,22,35,3,0,8,42,7),zl(0,11,14,-7,0,23,36,3,0,9,44,8),zl(0,11,15,-7,0,24,38,3,0,9,46,8)],Kl=["duration","easing","delay"],Yl={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Jl={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Xl(e){return"".concat(Math.round(e),"ms")}function Zl(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function Ql(e){const t=(0,Me.A)({},Yl,e.easing),n=(0,Me.A)({},Jl,e.duration);return(0,Me.A)({getAutoHeightDuration:Zl,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:s=t.easeInOut,delay:o=0}=r;(0,je.A)(r,Kl);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof i?i:Xl(i)," ").concat(s," ").concat("string"===typeof o?o:Xl(o)))).join(",")}},e,{easing:t,duration:n})}const $l={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},ed=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function td(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:r={},typography:i={}}=e,s=(0,je.A)(e,ed);if(e.vars)throw new Error((0,Tl.A)(18));const o=Bl(n),a=(0,gl.A)(e);let c=(0,Sl.A)(a,{mixins:Rl(a.breakpoints,t),palette:o,shadows:ql.slice(),typography:Wl(o,i),transitions:Ql(r),zIndex:(0,Me.A)({},$l)});c=(0,Sl.A)(c,s);for(var l=arguments.length,d=new Array(l>1?l-1:0),u=1;u<l;u++)d[u-1]=arguments[u];return c=d.reduce(((e,t)=>(0,Sl.A)(e,t)),c),c.unstable_sxConfig=(0,Me.A)({},wl.A,null==s?void 0:s.unstable_sxConfig),c.unstable_sx=function(e){return(0,Cl.A)({sx:e,theme:this})},c}const nd=td,rd=nd(),id="$$material";function sd(e){let{props:t,name:n}=e;return bl({props:t,name:n,defaultTheme:rd,themeId:id})}const od=e=>e,ad=(()=>{let e=od;return{configure(t){e=t},generate:t=>e(t),reset(){e=od}}})(),cd={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ld(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r=cd[t];return r?"".concat(n,"-").concat(r):"".concat(ad.generate(e),"-").concat(t)}function dd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=ld(e,t,n)})),r}function ud(e){return ld("MuiPagination",e)}dd("MuiPagination",["root","ul","outlined","text"]);const hd=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function pd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{boundaryCount:t=1,componentName:r="usePagination",count:i=1,defaultPage:s=1,disabled:o=!1,hideNextButton:a=!1,hidePrevButton:c=!1,onChange:l,page:d,showFirstButton:u=!1,showLastButton:h=!1,siblingCount:p=1}=e,f=(0,je.A)(e,hd),[m,g]=function(e){let{controlled:t,default:r,name:i,state:s="value"}=e;const{current:o}=n.useRef(void 0!==t),[a,c]=n.useState(r);return[o?t:a,n.useCallback((e=>{o||c(e)}),[])]}({controlled:d,default:s,name:r,state:"page"}),_=(e,t)=>{d||g(t),l&&l(e,t)},v=(e,t)=>{const n=t-e+1;return Array.from({length:n},((t,n)=>e+n))},y=v(1,Math.min(t,i)),E=v(Math.max(i-t+1,t+1),i),b=Math.max(Math.min(m-p,i-t-2*p-1),t+2),T=Math.min(Math.max(m+p,t+2*p+2),E.length>0?E[0]-2:i-1),S=[...u?["first"]:[],...c?[]:["previous"],...y,...b>t+2?["start-ellipsis"]:t+1<i-t?[t+1]:[],...v(b,T),...T<i-t-1?["end-ellipsis"]:i-t>t?[i-t]:[],...E,...a?[]:["next"],...h?["last"]:[]],w=e=>{switch(e){case"first":return 1;case"previous":return m-1;case"next":return m+1;case"last":return i;default:return null}},C=S.map((e=>"number"===typeof e?{onClick:t=>{_(t,e)},type:"page",page:e,selected:e===m,disabled:o,"aria-current":e===m?"true":void 0}:{onClick:t=>{_(t,w(e))},type:e,page:w(e),selected:!1,disabled:o||-1===e.indexOf("ellipsis")&&("next"===e||"last"===e?m>=i:m<=1)}));return(0,Me.A)({items:C},f)}const fd=n.createContext();function md(e){return ld("MuiPaginationItem",e)}const gd=dd("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]);var _d=__webpack_require__(8052);const vd=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},yd=e=>vd(e)&&"classes"!==e,Ed=(0,_d.Ay)({themeId:id,defaultTheme:rd,rootShouldForwardProp:yd});const bd=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{!function(e,t){"function"===typeof e?e(t):e&&(e.current=t)}(t,e)}))}),t)},Td="undefined"!==typeof window?n.useLayoutEffect:n.useEffect;const Sd=function(e){const t=n.useRef(e);return Td((()=>{t.current=e})),n.useRef((function(){return(0,t.current)(...arguments)})).current},wd=Sd,Cd={};const Rd=[];class Id{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Id}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function Nd(){const e=function(e,t){const r=n.useRef(Cd);return r.current===Cd&&(r.current=e(t)),r}(Id.create).current;var t;return t=e.disposeEffect,n.useEffect(t,Rd),e}let Od=!0,Ad=!1;const kd=new Id,xd={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Pd(e){e.metaKey||e.altKey||e.ctrlKey||(Od=!0)}function Dd(){Od=!1}function Ld(){"hidden"===this.visibilityState&&Ad&&(Od=!0)}function Md(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(pv){}return Od||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!xd[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const jd=function(){const e=n.useCallback((e=>{null!=e&&function(e){e.addEventListener("keydown",Pd,!0),e.addEventListener("mousedown",Dd,!0),e.addEventListener("pointerdown",Dd,!0),e.addEventListener("touchstart",Dd,!0),e.addEventListener("visibilitychange",Ld,!0)}(e.ownerDocument)}),[]),t=n.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!Md(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(Ad=!0,kd.start(100,(()=>{Ad=!1})),t.current=!1,!0)},ref:e}};function Ud(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Fd(e,t){var r=Object.create(null);return e&&n.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return t&&(0,n.isValidElement)(e)?t(e):e}(e)})),r}function Bd(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Vd(e,t,r){var i=Fd(e.children),s=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),s=[];for(var o in e)o in t?s.length&&(i[o]=s,s=[]):s.push(o);var a={};for(var c in t){if(i[c])for(r=0;r<i[c].length;r++){var l=i[c][r];a[i[c][r]]=n(l)}a[c]=n(c)}for(r=0;r<s.length;r++)a[s[r]]=n(s[r]);return a}(t,i);return Object.keys(s).forEach((function(o){var a=s[o];if((0,n.isValidElement)(a)){var c=o in t,l=o in i,d=t[o],u=(0,n.isValidElement)(d)&&!d.props.in;!l||c&&!u?l||!c||u?l&&c&&(0,n.isValidElement)(d)&&(s[o]=(0,n.cloneElement)(a,{onExited:r.bind(null,a),in:d.props.in,exit:Bd(a,"exit",e),enter:Bd(a,"enter",e)})):s[o]=(0,n.cloneElement)(a,{in:!1}):s[o]=(0,n.cloneElement)(a,{onExited:r.bind(null,a),in:!0,exit:Bd(a,"exit",e),enter:Bd(a,"enter",e)})}})),s}var Gd=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Hd=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}at(t,e);var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var r,i,s=t.children,o=t.handleExited;return{children:t.firstRender?(r=e,i=o,Fd(r.children,(function(e){return(0,n.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:Bd(e,"appear",r),enter:Bd(e,"enter",r),exit:Bd(e,"exit",r)})}))):Vd(e,s,o),firstRender:!1}},r.handleExited=function(e,t){var n=Fd(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,Me.A)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,t=e.component,r=e.childFactory,i=(0,je.A)(e,["component","childFactory"]),s=this.state.contextValue,o=Gd(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===t?n.createElement(lt.Provider,{value:s},o):n.createElement(lt.Provider,{value:s},n.createElement(t,i,o))},t}(n.Component);Hd.propTypes={},Hd.defaultProps={component:"div",childFactory:function(e){return e}};const Wd=Hd;var zd=__webpack_require__(3290);const qd=function(e){const{className:t,classes:r,pulsate:i=!1,rippleX:s,rippleY:o,rippleSize:a,in:c,onExited:l,timeout:d}=e,[u,h]=n.useState(!1),p=hl(t,r.ripple,r.rippleVisible,i&&r.ripplePulsate),f={width:a,height:a,top:-a/2+o,left:-a/2+s},m=hl(r.child,u&&r.childLeaving,i&&r.childPulsate);return c||u||h(!0),n.useEffect((()=>{if(!c&&null!=l){const e=setTimeout(l,d);return()=>{clearTimeout(e)}}}),[l,c,d]),(0,Ae.jsx)("span",{className:p,style:f,children:(0,Ae.jsx)("span",{className:m})})};const Kd=dd("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var Yd,Jd,Xd,Zd;const Qd=["center","classes","className"];let $d,eu,tu,nu;const ru=(0,zd.i7)($d||($d=Yd||(Yd=Ud(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),iu=(0,zd.i7)(eu||(eu=Jd||(Jd=Ud(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),su=(0,zd.i7)(tu||(tu=Xd||(Xd=Ud(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),ou=Ed("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),au=Ed(qd,{name:"MuiTouchRipple",slot:"Ripple"})(nu||(nu=Zd||(Zd=Ud(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Kd.rippleVisible,ru,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),Kd.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),Kd.child,Kd.childLeaving,iu,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),Kd.childPulsate,su,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),cu=n.forwardRef((function(e,t){const r=sd({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=(0,je.A)(r,Qd),[c,l]=n.useState([]),d=n.useRef(0),u=n.useRef(null);n.useEffect((()=>{u.current&&(u.current(),u.current=null)}),[c]);const h=n.useRef(!1),p=Nd(),f=n.useRef(null),m=n.useRef(null),g=n.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:o}=e;l((e=>[...e,(0,Ae.jsx)(au,{classes:{ripple:hl(s.ripple,Kd.ripple),rippleVisible:hl(s.rippleVisible,Kd.rippleVisible),ripplePulsate:hl(s.ripplePulsate,Kd.ripplePulsate),child:hl(s.child,Kd.child),childLeaving:hl(s.childLeaving,Kd.childLeaving),childPulsate:hl(s.childPulsate,Kd.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},d.current)])),d.current+=1,u.current=o}),[s]),_=n.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:s=i||t.pulsate,fakeElement:o=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&h.current)return void(h.current=!1);"touchstart"===(null==e?void 0:e.type)&&(h.current=!0);const a=o?null:m.current,c=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let l,d,u;if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(c.width/2),d=Math.round(c.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;l=Math.round(t-c.left),d=Math.round(n-c.top)}if(s)u=Math.sqrt((2*c.width**2+c.height**2)/3),u%2===0&&(u+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-l),l)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-d),d)+2;u=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===f.current&&(f.current=()=>{g({pulsate:r,rippleX:l,rippleY:d,rippleSize:u,cb:n})},p.start(80,(()=>{f.current&&(f.current(),f.current=null)}))):g({pulsate:r,rippleX:l,rippleY:d,rippleSize:u,cb:n})}),[i,g,p]),v=n.useCallback((()=>{_({},{pulsate:!0})}),[_]),y=n.useCallback(((e,t)=>{if(p.clear(),"touchend"===(null==e?void 0:e.type)&&f.current)return f.current(),f.current=null,void p.start(0,(()=>{y(e,t)}));f.current=null,l((e=>e.length>0?e.slice(1):e)),u.current=t}),[p]);return n.useImperativeHandle(t,(()=>({pulsate:v,start:_,stop:y})),[v,_,y]),(0,Ae.jsx)(ou,(0,Me.A)({className:hl(Kd.root,s.root,o),ref:m},a,{children:(0,Ae.jsx)(Wd,{component:null,exit:!0,children:c})}))})),lu=cu;function du(e){return ld("MuiButtonBase",e)}const uu=dd("MuiButtonBase",["root","disabled","focusVisible"]),hu=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],pu=Ed("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(uu.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),fu=n.forwardRef((function(e,t){const r=sd({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:c="button",disabled:l=!1,disableRipple:d=!1,disableTouchRipple:u=!1,focusRipple:h=!1,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:_,onFocus:v,onFocusVisible:y,onKeyDown:E,onKeyUp:b,onMouseDown:T,onMouseLeave:S,onMouseUp:w,onTouchEnd:C,onTouchMove:R,onTouchStart:I,tabIndex:N=0,TouchRippleProps:O,touchRippleRef:A,type:k}=r,x=(0,je.A)(r,hu),P=n.useRef(null),D=n.useRef(null),L=bd(D,A),{isFocusVisibleRef:M,onFocus:j,onBlur:U,ref:F}=jd(),[B,V]=n.useState(!1);l&&B&&V(!1),n.useImperativeHandle(i,(()=>({focusVisible:()=>{V(!0),P.current.focus()}})),[]);const[G,H]=n.useState(!1);n.useEffect((()=>{H(!0)}),[]);const W=G&&!d&&!l;function z(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return wd((r=>{t&&t(r);return!n&&D.current&&D.current[e](r),!0}))}n.useEffect((()=>{B&&h&&!d&&G&&D.current.pulsate()}),[d,h,B,G]);const q=z("start",T),K=z("stop",g),Y=z("stop",_),J=z("stop",w),X=z("stop",(e=>{B&&e.preventDefault(),S&&S(e)})),Z=z("start",I),Q=z("stop",C),$=z("stop",R),ee=z("stop",(e=>{U(e),!1===M.current&&V(!1),f&&f(e)}),!1),te=wd((e=>{P.current||(P.current=e.currentTarget),j(e),!0===M.current&&(V(!0),y&&y(e)),v&&v(e)})),ne=()=>{const e=P.current;return c&&"button"!==c&&!("A"===e.tagName&&e.href)},re=n.useRef(!1),ie=wd((e=>{h&&!re.current&&B&&D.current&&" "===e.key&&(re.current=!0,D.current.stop(e,(()=>{D.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),E&&E(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!l&&(e.preventDefault(),m&&m(e))})),se=wd((e=>{h&&" "===e.key&&D.current&&B&&!e.defaultPrevented&&(re.current=!1,D.current.stop(e,(()=>{D.current.pulsate(e)}))),b&&b(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let oe=c;"button"===oe&&(x.href||x.to)&&(oe=p);const ae={};"button"===oe?(ae.type=void 0===k?"button":k,ae.disabled=l):(x.href||x.to||(ae.role="button"),l&&(ae["aria-disabled"]=l));const ce=bd(t,F,P);const le=(0,Me.A)({},r,{centerRipple:s,component:c,disabled:l,disableRipple:d,disableTouchRipple:u,focusRipple:h,tabIndex:N,focusVisible:B}),de=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,s=pl({root:["root",t&&"disabled",n&&"focusVisible"]},du,i);return n&&r&&(s.root+=" ".concat(r)),s})(le);return(0,Ae.jsxs)(pu,(0,Me.A)({as:oe,className:hl(de.root,a),ownerState:le,onBlur:ee,onClick:m,onContextMenu:K,onFocus:te,onKeyDown:ie,onKeyUp:se,onMouseDown:q,onMouseLeave:X,onMouseUp:J,onDragLeave:Y,onTouchEnd:Q,onTouchMove:$,onTouchStart:Z,ref:ce,tabIndex:l?-1:N,type:k},ae,x,{children:[o,W?(0,Ae.jsx)(lu,(0,Me.A)({ref:L,center:s},O)):null]}))})),mu=fu;const gu=__webpack_require__(410).A;function _u(e){return ld("MuiSvgIcon",e)}dd("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const vu=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],yu=Ed("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(gu(n.color))],t["fontSize".concat(gu(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,s,o,a,c,l,d,u,h,p,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(s=t.transitions)||null==(s=s.duration)?void 0:s.shorter}),fontSize:{inherit:"inherit",small:(null==(o=t.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(c=t.typography)||null==(l=c.pxToRem)?void 0:l.call(c,24))||"1.5rem",large:(null==(d=t.typography)||null==(u=d.pxToRem)?void 0:u.call(d,35))||"2.1875rem"}[n.fontSize],color:null!=(h=null==(p=(t.vars||t).palette)||null==(p=p[n.color])?void 0:p.main)?h:{action:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),Eu=n.forwardRef((function(e,t){const r=sd({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:c="medium",htmlColor:l,inheritViewBox:d=!1,titleAccess:u,viewBox:h="0 0 24 24"}=r,p=(0,je.A)(r,vu),f=n.isValidElement(i)&&"svg"===i.type,m=(0,Me.A)({},r,{color:o,component:a,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:h,hasSvgAsChild:f}),g={};d||(g.viewBox=h);const _=(e=>{const{color:t,fontSize:n,classes:r}=e;return pl({root:["root","inherit"!==t&&"color".concat(gu(t)),"fontSize".concat(gu(n))]},_u,r)})(m);return(0,Ae.jsxs)(yu,(0,Me.A)({as:a,className:hl(_.root,s),focusable:"false",color:l,"aria-hidden":!u||void 0,role:u?"img":void 0,ref:t},g,p,f&&i.props,{ownerState:m,children:[f?i.props.children:i,u?(0,Ae.jsx)("title",{children:u}):null]}))}));Eu.muiName="SvgIcon";const bu=Eu;function Tu(e,t){function r(n,r){return(0,Ae.jsx)(bu,(0,Me.A)({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))}return r.muiName=bu.muiName,n.memo(n.forwardRef(r))}const Su=Tu((0,Ae.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),wu=Tu((0,Ae.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Cu=Tu((0,Ae.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Ru=Tu((0,Ae.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Iu=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Nu=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat(gu(n.size))],"text"===n.variant&&t["text".concat(gu(n.color))],"outlined"===n.variant&&t["outlined".concat(gu(n.color))],"rounded"===n.shape&&t.rounded,"page"===n.type&&t.page,("start-ellipsis"===n.type||"end-ellipsis"===n.type)&&t.ellipsis,("previous"===n.type||"next"===n.type)&&t.previousNext,("first"===n.type||"last"===n.type)&&t.firstLast]},Ou=Ed("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Nu})((e=>{let{theme:t,ownerState:n}=e;return(0,Me.A)({},t.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",["&.".concat(gd.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"small"===n.size&&{minWidth:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===n.size&&{minWidth:40,borderRadius:20,padding:"0 10px",fontSize:t.typography.pxToRem(15)})})),Au=Ed(mu,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Nu})((e=>{let{theme:t,ownerState:n}=e;return(0,Me.A)({},t.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,["&.".concat(gd.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(gd.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(gd.selected)]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Il.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},["&.".concat(gd.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Il.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},["&.".concat(gd.disabled)]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},"small"===n.size&&{minWidth:26,height:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===n.size&&{minWidth:40,height:40,borderRadius:20,padding:"0 10px",fontSize:t.typography.pxToRem(15)},"rounded"===n.shape&&{borderRadius:(t.vars||t).shape.borderRadius})}),(e=>{let{theme:t,ownerState:n}=e;return(0,Me.A)({},"text"===n.variant&&{["&.".concat(gd.selected)]:(0,Me.A)({},"standard"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}},["&.".concat(gd.focusVisible)]:{backgroundColor:(t.vars||t).palette[n.color].dark}},{["&.".concat(gd.disabled)]:{color:(t.vars||t).palette.action.disabled}})},"outlined"===n.variant&&{border:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(gd.selected)]:(0,Me.A)({},"standard"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.5)"):(0,Il.X4)(t.palette[n.color].main,.5)),backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.activatedOpacity,")"):(0,Il.X4)(t.palette[n.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / calc(").concat(t.vars.palette.action.activatedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Il.X4)(t.palette[n.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(gd.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / calc(").concat(t.vars.palette.action.activatedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Il.X4)(t.palette[n.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{["&.".concat(gd.disabled)]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})})),ku=Ed("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})((e=>{let{theme:t,ownerState:n}=e;return(0,Me.A)({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},"small"===n.size&&{fontSize:t.typography.pxToRem(18)},"large"===n.size&&{fontSize:t.typography.pxToRem(22)})})),xu=n.forwardRef((function(e,t){const r=sd({props:e,name:"MuiPaginationItem"}),{className:i,color:s="standard",component:o,components:a={},disabled:c=!1,page:l,selected:d=!1,shape:u="circular",size:h="medium",slots:p={},type:f="page",variant:m="text"}=r,g=(0,je.A)(r,Iu),_=(0,Me.A)({},r,{color:s,disabled:c,selected:d,shape:u,size:h,type:f,variant:m}),v=(()=>{const e=n.useContext(fd);return null!=e&&e})(),y=(e=>{const{classes:t,color:n,disabled:r,selected:i,size:s,shape:o,type:a,variant:c}=e;return pl({root:["root","size".concat(gu(s)),c,o,"standard"!==n&&"color".concat(gu(n)),"standard"!==n&&"".concat(c).concat(gu(n)),r&&"disabled",i&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[a]],icon:["icon"]},md,t)})(_),E=(v?{previous:p.next||a.next||Ru,next:p.previous||a.previous||Cu,last:p.first||a.first||Su,first:p.last||a.last||wu}:{previous:p.previous||a.previous||Cu,next:p.next||a.next||Ru,first:p.first||a.first||Su,last:p.last||a.last||wu})[f];return"start-ellipsis"===f||"end-ellipsis"===f?(0,Ae.jsx)(Ou,{ref:t,ownerState:_,className:hl(y.root,i),children:"\u2026"}):(0,Ae.jsxs)(Au,(0,Me.A)({ref:t,ownerState:_,component:o,disabled:c,className:hl(y.root,i)},g,{children:["page"===f&&l,E?(0,Ae.jsx)(ku,{as:E,ownerState:_,className:y.icon}):null]}))})),Pu=xu,Du=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Lu=Ed("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),Mu=Ed("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function ju(e,t,n){return"page"===e?"".concat(n?"":"Go to ","page ").concat(t):"Go to ".concat(e," page")}const Uu=n.forwardRef((function(e,t){const n=sd({props:e,name:"MuiPagination"}),{boundaryCount:r=1,className:i,color:s="standard",count:o=1,defaultPage:a=1,disabled:c=!1,getItemAriaLabel:l=ju,hideNextButton:d=!1,hidePrevButton:u=!1,renderItem:h=(e=>(0,Ae.jsx)(Pu,(0,Me.A)({},e))),shape:p="circular",showFirstButton:f=!1,showLastButton:m=!1,siblingCount:g=1,size:_="medium",variant:v="text"}=n,y=(0,je.A)(n,Du),{items:E}=pd((0,Me.A)({},n,{componentName:"Pagination"})),b=(0,Me.A)({},n,{boundaryCount:r,color:s,count:o,defaultPage:a,disabled:c,getItemAriaLabel:l,hideNextButton:d,hidePrevButton:u,renderItem:h,shape:p,showFirstButton:f,showLastButton:m,siblingCount:g,size:_,variant:v}),T=(e=>{const{classes:t,variant:n}=e;return pl({root:["root",n],ul:["ul"]},ud,t)})(b);return(0,Ae.jsx)(Lu,(0,Me.A)({"aria-label":"pagination navigation",className:hl(T.root,i),ownerState:b,ref:t},y,{children:(0,Ae.jsx)(Mu,{className:T.ul,ownerState:b,children:E.map(((e,t)=>(0,Ae.jsx)("li",{children:h((0,Me.A)({},e,{color:s,"aria-label":l(e.type,e.page,e.selected),shape:p,size:_,variant:v}))},t)))})}))})),Fu=Uu;var Bu=__webpack_require__(7713);const Vu=["ownerState"],Gu=["variants"],Hu=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Wu(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const zu=(0,gl.A)(),qu=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function Ku(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function Yu(e){return e?(t,n)=>n[e]:null}function Ju(e,t){let{ownerState:n}=t,r=(0,je.A)(t,Vu);const i="function"===typeof e?e((0,Me.A)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap((e=>Ju(e,(0,Me.A)({ownerState:n},r))));if(i&&"object"===typeof i&&Array.isArray(i.variants)){const{variants:e=[]}=i;let t=(0,je.A)(i,Gu);return e.forEach((e=>{let i=!0;"function"===typeof e.props?i=e.props((0,Me.A)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)})),i&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,Me.A)({ownerState:n},r,n)):e.style))})),t}return i}const Xu=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=zu,rootShouldForwardProp:r=Wu,slotShouldForwardProp:i=Wu}=e,s=e=>(0,Cl.A)((0,Me.A)({},e,{theme:Ku((0,Me.A)({},e,{defaultTheme:n,themeId:t}))}));return s.__mui_systemSx=!0,function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Bu.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:a,slot:c,skipVariantsResolver:l,skipSx:d,overridesResolver:u=Yu(qu(c))}=o,h=(0,je.A)(o,Hu),p=void 0!==l?l:c&&"Root"!==c&&"root"!==c||!1,f=d||!1;let m=Wu;"Root"===c||"root"===c?m=r:c?m=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=(0,Bu.default)(e,(0,Me.A)({shouldForwardProp:m,label:undefined},h)),_=e=>"function"===typeof e&&e.__emotion_real!==e||(0,Sl.Q)(e)?r=>Ju(e,(0,Me.A)({},r,{theme:Ku({theme:r.theme,defaultTheme:n,themeId:t})})):e,v=function(r){let i=_(r);for(var o=arguments.length,c=new Array(o>1?o-1:0),l=1;l<o;l++)c[l-1]=arguments[l];const d=c?c.map(_):[];a&&u&&d.push((e=>{const r=Ku((0,Me.A)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[a]||!r.components[a].styleOverrides)return null;const i=r.components[a].styleOverrides,s={};return Object.entries(i).forEach((t=>{let[n,i]=t;s[n]=Ju(i,(0,Me.A)({},e,{theme:r}))})),u(e,s)})),a&&!p&&d.push((e=>{var r;const i=Ku((0,Me.A)({},e,{defaultTheme:n,themeId:t}));return Ju({variants:null==i||null==(r=i.components)||null==(r=r[a])?void 0:r.variants},(0,Me.A)({},e,{theme:i}))})),f||d.push(s);const h=d.length-c.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const m=g(i,...d);return e.muiName&&(m.muiName=e.muiName),m};return g.withConfig&&(v.withConfig=g.withConfig),v}}(),Zu=Xu;var Qu=__webpack_require__(8698),$u=__webpack_require__(9751),eh=__webpack_require__(8604);const th=["component","direction","spacing","divider","children","className","useFlexGap"],nh=(0,gl.A)(),rh=Zu("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function ih(e){return bl({props:e,name:"MuiStack",defaultTheme:nh})}function sh(e,t){const r=n.Children.toArray(e).filter(Boolean);return r.reduce(((e,i,s)=>(e.push(i),s<r.length-1&&e.push(n.cloneElement(t,{key:"separator-".concat(s)})),e)),[])}const oh=e=>{let{ownerState:t,theme:n}=e,r=(0,Me.A)({display:"flex",flexDirection:"column"},(0,$u.NI)({theme:n},(0,$u.kW)({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=(0,eh.LX)(n),i=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),s=(0,$u.kW)({values:t.direction,base:i}),o=(0,$u.kW)({values:t.spacing,base:i});"object"===typeof s&&Object.keys(s).forEach(((e,t,n)=>{if(!s[e]){const r=t>0?s[n[t-1]]:"column";s[e]=r}}));const a=(n,r)=>{return t.useFlexGap?{gap:(0,eh._W)(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((i=r?s[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]))]:(0,eh._W)(e,n)}};var i};r=(0,Sl.A)(r,(0,$u.NI)({theme:n},o,a))}return r=(0,$u.iZ)(n.breakpoints,r),r};const ah=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=rh,useThemeProps:r=ih,componentName:i="MuiStack"}=e,s=t(oh),o=n.forwardRef((function(e,t){const n=r(e),o=(0,Qu.A)(n),{component:a="div",direction:c="column",spacing:l=0,divider:d,children:u,className:h,useFlexGap:p=!1}=o,f=(0,je.A)(o,th),m={direction:c,spacing:l,useFlexGap:p},g=pl({root:["root"]},(e=>ld(i,e)),{});return(0,Ae.jsx)(s,(0,Me.A)({as:a,ownerState:m,ref:t,className:hl(g.root,h)},f,{children:d?sh(u,d):u}))}));return o}({createStyledComponent:Ed("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>sd({props:e,name:"MuiStack"})}),ch=ah,lh=e=>{let{col:t}=e;const n=Z();let r="/jobs"===n.pathname||"/freelancer"===n.pathname?170:250,i="/freelancer"===n.pathname?"170px":"100%";return(0,Ae.jsx)("div",{className:"col-md-".concat(t," mb-4 overflow-hidden "),style:{minHeight:r,width:"/freelancer"===n.pathname&&"100%"},children:(0,Ae.jsx)("div",{className:"card placeholder-glow p-1","aria-hidden":"true",style:{height:"100%",borderRadius:8},children:(0,Ae.jsx)("div",{className:"placeholder ",style:{height:i,borderRadius:4}})})})},dh=e=>{let{col:t}=e;return(0,Ae.jsx)("div",{className:"col-md-".concat(t," mb-4 overflow-hidden "),style:{aspectRatio:1},children:(0,Ae.jsxs)("div",{className:"card placeholder-glow p-1","aria-hidden":"true",style:{height:"100%",borderRadius:8},children:[(0,Ae.jsx)("div",{className:"placeholder",style:{height:"50%",borderRadius:4}}),(0,Ae.jsxs)("div",{className:"d-grid gap-3 p-2",children:[(0,Ae.jsxs)("p",{className:"card-text placeholder-glow",children:[(0,Ae.jsx)("span",{className:"placeholder col-7"}),(0,Ae.jsx)("span",{className:"placeholder col-4"}),(0,Ae.jsx)("span",{className:"placeholder col-4"}),(0,Ae.jsx)("span",{className:"placeholder col-6"}),(0,Ae.jsx)("span",{className:"placeholder col-8"})]}),(0,Ae.jsx)("button",{tabIndex:"-1",className:"btn btn-primary disabled placeholder col-6"})]})]})})},uh=()=>(0,Ae.jsx)("div",{className:"mb-3 overflow-hidden ",children:(0,Ae.jsxs)("div",{className:"card placeholder-glow p-1 responsble-skeleton","aria-hidden":"true",children:[(0,Ae.jsx)("div",{className:"placeholder outer-div"}),(0,Ae.jsxs)("div",{className:"d-flex gap-3 p-2 position-relative ",style:{flex:1,flexDirection:"column"},children:[(0,Ae.jsx)("span",{className:"placeholder",style:{height:20,width:"80%"}}),(0,Ae.jsx)("span",{className:"placeholder",style:{height:20,width:"70%"}}),(0,Ae.jsx)("span",{className:"placeholder",style:{height:20,width:"50%"}}),(0,Ae.jsx)("button",{tabIndex:"-1",className:"btn btn-primary disabled placeholder position-absolute ",style:{height:30,width:"60%",bottom:"6px"}})]})]})}),hh=e=>{let{des:t}=e;const n=$();return(0,Ae.jsx)("div",{children:(0,Ae.jsx)("section",{className:"py-3 py-md-2 min-vh-90 d-flex justify-content-center align-items-center",children:(0,Ae.jsxs)("div",{className:"text-center",children:[(0,Ae.jsxs)("h2",{className:"d-flex justify-content-center align-items-center gap-2 mb-4",children:[(0,Ae.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAR4AAAC4CAMAAAACJXOjAAAC91BMVEUAAACCgoGAgIB1dXWQkJB6enp3d3eAgIB2dnZ8fHx4eHh1dXV5eXl2dnaAgICAgIB/f393d3dBQUF4eHh3d3dxcXH/4QB2dnZ2dnZ3d3d0dHR4eHh5eXlNTU14eHj/4AB6enp4eHhubm5ycnIoc/F6enp3d3d2dnZ3d3d2dnYqc/B1dXUudvLSuAEodfEpdPF1dXXZ3N0oc/BCQkIpdPJqamrpzhBOTk4qdvEqdO4odPF0dHTWuwNvb2/U1NQ8PDzUugHV1dXWuwGtra0pdPH12AmwsLD83QRAQEAoc/HWvAJCQkIpdPLjxgLHvi6NjY3VvAQrdvTVuwXUugbavA/UugHVugE+Pj4oc/HVugE+Pj49PT0odPHXvQFOTk5BQUGZrnVKSkpMTEwpdfHZvQnw8PD///88PDz/3wAoc/DQtgHNzc3/Q0P+/v762wT+3gH83AP42Qbx1Az//fP11wn8/P3t0RD93QLjyRjozRSPgzDYwSPdxR7y8vH09PT6+vr4+Pjv0g7z1QrrzxL/4A3//ff/++f/+MiPj4/t7e3o6Ojk5OT6+fnd3d3Y2Nj32Qj/UFD21wHszwH29vb/bm732Af/++P/+tv/9Kr/4hv8+/v39/f/7Gktdu3/4RU+ftvi0CJymJ+KpIPPxzbp0xrv1xT83QTh4eCmsmTbyivB1/w4euD38tlGgtBUicD/iIihsGrWyi/z2RD01gn/+vrr6+oyeOXu6tPT09NCgNNOhsf/lJT/fHyVqXi3ulG8vU322yD32wzp8f6Brff/9fVNi/P6+PI5f/L++ub/zs7/u7v/9rpdjrZgj7N5nJZ9nZLGwkFkXzPq0CXnzBX/5ub69uPc29nm4cjb18Bbjbj/tLRjkLBmkqyWlpaCoI7/Zmb/RkaPhDfjyymThSf73RD1+f/V5P2qyPqoxvnx7+no5uF+ptTn49PY1tLh3c6qqJ7/8ZeEoYqPjYLa14H/XV3Uy0ZKSDjYwzZ6cS7XwCu0oiPPuB/XvhcK7zUgAAAAZXRSTlMAAgQLBxceECcGMUY7UA4KFBy0JBMJXxoiKw81Sp9ArREYKiX9IDhCLk7nPif7WVg899K6Si+3pFvzqVhVNPLy8vDGu7ixsK+rnpmNg31yWEI+NiYR6OHZ19fW0MSxqZmHYEMlG8s279AAAAqLSURBVHja7NpXiBNBGMDxjRrLS6xR8cWI+qiiqKAIiih2sXexbxxxk1j2zpZcLFhj757Ru0uxd1QU7Ii9Y8PeBcWK3Qe/mWQ12exad0x2dv9c7iFv92Pmm5tNOJ1Weei/V78Tx2pa8Cyo0YFjNE14htVoxLGZNjzM+mjDA7XnWEwjHqgdx2Ba8UCtOfbShodZH+14oL4WjrE05IGaFuHYShseZn005YF6duFYSlseqBtTPhrzQF0Hc+ykNQ/UpDPHTNrwMOujPQ9Ug5kHQBR4IGYeAFHhYecBhxY8nvmpMXJ/Bx4qleeYyOQxebTjWTXqrzplFB7+r5pm8pg8Jo/JY/KYPIoZgceSQVV2J7dKSIgij7pMIfzKlFpkq+V2wwv6b/81YxaAKVGoBKlIJtTCo5TL5YLf2R4AwkS0eSQcCLPY7SVLFs6MmrtUAyH4IUD0eeIrp4gdYGy2SlCxTKj5XIUWQyMgTBRfQZR5LNgGcDCNw1GuVClrZlR/knI7Ro8ejY1iuwx8qPJYCI+9MNiUs1qrVChdtHTRjKj+ROVGQmAEQi6PiwxqqjwwdfDScZSyAk3FimWrFs+M6k9WKSsLjEAIfFzYhxqPpFOycKVy1oH9ejV26qH3Fx58xUKTRmMgD5xfFHksJUrYQadqS6eeejA2K+7jyabIQ44s0KnX3amvLoyZnAU+wIN9qPFYYGvZHEV7O/XWx0vYh2yvbHo8+NByWNs49dfnS5MnjoT57KHHAzqweMpV1MdMlm8v8CHbCw4vSjywtwoXsw5w6rEvY8ZmwfIh04fa6rHbHFX0uLeczpcvnu/evXHj5cvHjx+fqtqpf+MpWalUBX0d6lK31syaOcPr8+eIokDneQ851a1Fyzj12K3ZhCc3ZwVNHscPniG6SOKZPnvNzJ1DfAsD1FYPnszlqlTXKc+VNbMIzwpRpMJjscBk1i/PHOCZ4aXNU6GiXnlg+Jg8v+Lx0xrNlkKEp6yueeBkp8dT0lZKrzz3Pq27fzEc2X7o4cMpP+lfeUrrlGfc+An4WoFvXT+9VLgjLpNHsUMHzm7eE0Row96bW/NMnuS25e9CCe1dGzV5vpeXj+Rt2m/yxNsaRAqdiZg8UPQcUm7TOpNn6KHTSK1d/U2e/B+rpWB/KG/b+a1ngiheg0FG59knUVwPDZWKFEhAPWzG5jkv7aP9SW+HpR3X0Ng8mxFp9duV30ue1x2NzLMfkY4d5r+3JHkm9TEwj3sTwlVbz6fyuOILq64BeN5cu3b1Kv4oZ+PSxGoj0hE+hQfaFp8+BuBRed5zBOGCh5V4pO3VoJBheY5Ki0eRJxQfzkblOYxI6xV5oNUI19aoPI8R6ZEaz1mEa2VUnvWxU51X49mHcM2MyvME4Y6q8qxFuDpG5XmqD57YNycEUczx+8zNlZR3YY7AJyTkLPRqz3PvA3yQc/EgtDyhd4gkqvGcS/do9gYEPiUh4P0/l4rwLw72PWk+2P0Cr5jgp8kj//ufLUvs1VCpddKlKz08PpFXTfT9D57XCLdh+1DFbscuFUXSw5Mr8D9JyKXPIz0MK1DUyQum80oa4H9RgD5PNHZtCG5T0Mm+gUi10sKzItni5J15i07IfFZQ5oHWItKeSCpPASLVsaSDJyDTGQ7dlfsEqPNENyHS5rBcZx+SBnMaeHJlEHeG47bwsnLp8kAHUKzVoaS3t+ejWHW4NPD45FN5HuFZlDKffZR5pOMJys/7sabWrkbxqtVMA4/Iq/DIE6nzRM9IEsHTW0NhV2TdgbMbEKTmQ5/Hz6vxpOSnywNF9qLU1H3o83iF3+cRvHR5oO03NfDRkCfAq/KkFqDMA7kLkFJBJR/6PF7hT3gEL20eKPSNvft3aRiIAjg+uzgpKv6YnKQgiIN/hf/FZbuxODWXRUTplq1dQi1UEYxCdLABEUpA5yKof4GCm3+AR4NYybsHB14Sfe+7FTp9aHq59B59KuCcXZxC38/ueULPhscL3fPobs9/4vT0Piz69tksj0fZ8SgHPFD9k5ec4/qmd5y/KdoAfFzzSDse6YQHbq9/Gd1Nvd4FfBzz+B7CA+X/xsPU98fB29VrK8uyfXPFacAG4OOWJ7DlCaocGgB83PIoWx5VJc+0z3YZPE1bnmalPNqHeRCeL5/1nVIuLmnLIyvm0T65DvOAPNoH1XF/cX1MeNJaXly6xpbWqZBnOOF5dskzODoUfrfdkeYOajDupiCCUap1hh6YKu+uuQY8AYwwvh97cAEpHt+zzCfFI6SdjhS0eJQdjyLGE4IKySiBeUJiPC1pWLliCT5MJcYDPYqPjfc9bUGNx/hDTgp9eMjxGH8GjKGbHno8oglvKh6ADQVFnsIRhCTW51eKmwrpk+QR3aJEAqxbXUGTB1i9wFWLKk9+eA6vI+jy1OLoZY15Sj24u7qytry0uDA3Oz9j/2f0///Y91/kwYcGmAcZOWEebGCJeZBxN+YxxjzmmAeNedCYB4150JgHjXnQmAeNedCYB4150Jjns71zWW0biMIwHV1HdjQjLCFpbIpUoYvxxqaYLkICJZBt3qBLddFnyFPkZfJ4/TWRmpLFMC4YqssH3tmL8/HPEeeMwEoWPUoWPUoWPUoWPUoWPUoWPUoWPUoWPUoWPUoWPUoWPUoWPUrGo+fTR4hpCG4X4/xf0l4PF8yk5ENh/6SGEHz+xmR+ZtnuSPXs66opAssxIkrJO7JOcJkcgl9RQjvMAYbwxEk6Xj2eW+ahMJjZQztQJoq9QJCUI71EEWPGH3wnzINN+vXnGPm2X629NAmsUPjGAGNRJC1JQRfYIdSMmOH7vhDCeSMLeR6UbjNSPTerw7Zxk9jiYeZIUBoKNFiEbqTvB1+kkAM3Thhybg3keWwnbrMdq55djfi4ZRDn1gDnYejAEARRlK3beKiJ5CAtMBLYA2WSFGnjrUeq53a/OlRe4xZJaQ9AVY4w+Ub/ONMKDyGwE1owkxSF++Wd8/muOtTj1PPjFn7q493d+fxekFsUiZ1bmYAflK2lB0crMkR7bX7p0V4dO0a77h73uukxcbLa6/If6SnK2ML5MvXSQwjC4/D22rxq2Xltr04KP9xBfAjRCg9lfpa31+b5VcfOc3t1vHQT5JnPqE58useWIcK4nQ3bxi1jdB+TauvhM9JTeXJU1dWDzuxYwUs7E17eZg0HvfkCPad2JpyO20GP/uEKHtuZ8CDTo3e4QN97yu/tLLj/jN5T9r1Hd2ca5vbTLPzcP3VzvJ2HPkN49PRERmYFSfp4mnh/fjk91IdKdubMiDT1yJ0y4lOkHgbQ1W633+9vJgeK2u1W0k6B8Ah0Zt2Zi0Z+hu4DP9vqeKjrejVBUNbhWG09OVNkfkR1J/Z+6d4tv9IGhqr1+rieGCiogpsmdRO7m0iZSWR69OLTzew8t8uNm6ZN402SpklTd1PaOe/mdc3wQI/c+MDP20Ys2RTuJCk2SWIHWPbAjtz2QI9ufCjOl4AguU4N7AkSyFUq5AicLDqER7P79Mt4kclt/CThPISbfhGv6Dyqq5xOEXAmhwBQo7jGUd9WAEQIihgzJgljUNMFB6gbj/oeGZiTg6pvkPXfQpgwivcP9BxNnst8/AZI58giajggQAAAAABJRU5ErkJggg==",alt:""}),(0,Ae.jsx)("i",{className:"bi bi-exclamation-circle-fill text-danger display-4"})]}),(0,Ae.jsx)("h3",{className:"h2 mb-2",children:"Sorry, no results found!"}),(0,Ae.jsx)("p",{className:"mb-5",children:t}),(0,Ae.jsx)("button",{className:"btn bsb-btn-5xl btn-dark bg-primary rounded-pill px-5 fs-6 m-0",onClick:()=>{n(-1)},children:"Go Back"})]})})})},ph=()=>{const{goodsList:e,getAttributeFilterList:t,getGoodsProduct:r,totalItem:i,listLoading:s}=Kr(),[o,a]=(0,n.useState)(1),c=Math.ceil((null===i||void 0===i?void 0:i.goods)/10),l=Z(),d=new URLSearchParams(l.search),u=d.get("sub_category"),h=d.get("category_id"),p=d.get("search"),[f,m]=(0,n.useState)([]),g={keyword_search:p,page:o,limit:10};(0,n.useEffect)((()=>{(async()=>{u?await r(g,u,f):await r(g,"",f)})()}),[p,o,u,f]),(0,n.useEffect)((()=>{(async()=>{u&&await t({sub:u}),h&&await t({main:h})})()}),[p,u,h]);return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(cl,{title:"Goods of all kinds List Page",param:"Goods of all kinds"}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-2",children:(0,Ae.jsx)(ll,{onFilter:(e,t,n)=>{if(!0===e.target.checked){const e=f.findIndex((e=>e.attribute===t));if(-1!==e){const t=[...f];t[e].value.push(n),m(t)}else{const e=[...f,{attribute:t,value:[n]}];m(e)}}else{const e=f.map((e=>(e.attribute===t&&(e.value=e.value.filter((e=>e!==n))),e))).filter((e=>e.value.length>0));m(e)}}})}),(0,Ae.jsxs)("div",{className:"col-md-8",children:[(0,Ae.jsx)("aside",{className:"row pt-2",children:s.goods?Array.from({length:6}).map(((e,t)=>(0,Ae.jsx)(dh,{col:4},t))):0===e.length?(0,Ae.jsx)(hh,{des:"Please check the spelling or try searching for something else. Thank you!"}):Array.isArray(e)&&e.map(((e,t)=>(0,Ae.jsx)(dl,{item:e},t)))}),(0,Ae.jsx)("div",{align:"center",children:(0,Ae.jsx)(ch,{spacing:2,children:(0,Ae.jsx)(Fu,{count:c,page:o,onChange:(e,t)=>a(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Ae.jsx)(Ho,{})]})})})]})},fh=!1,mh=!1,gh="${JSCORE_VERSION}",_h=function(e,t){if(!e)throw vh(t)},vh=function(e){return new Error("Firebase Database ("+gh+") INTERNAL ASSERT FAILED: "+e)},yh=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Eh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,d=(3&t)<<4|o>>4;let u=(15&o)<<2|c>>6,h=63&c;a||(h=64,s||(u=64)),r.push(n[l],n[d],n[u],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(yh(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new bh;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class bh extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Th=function(e){const t=yh(e);return Eh.encodeByteArray(t,!0)},Sh=function(e){return Th(e).replace(/\./g,"")},wh=function(e){try{return Eh.decodeString(e,!0)}catch(AL){console.error("base64Decode failed: ",AL)}return null};function Ch(e){return Rh(void 0,e)}function Rh(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Rh(e[n],t[n]));return e}const Ih=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof __webpack_require__.g)return __webpack_require__.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Nh=()=>{try{return Ih()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(AL){return}const t=e&&wh(e[1]);return t&&JSON.parse(t)})()}catch(AL){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(AL))}},Oh=e=>{var t,n;return null===(n=null===(t=Nh())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ah=e=>{const t=Oh(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},kh=()=>{var e;return null===(e=Nh())||void 0===e?void 0:e.config},xh=e=>{var t;return null===(t=Nh())||void 0===t?void 0:t["_".concat(e)]};class Ph{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Dh(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Sh(JSON.stringify({alg:"none",type:"JWT"})),Sh(JSON.stringify(s)),""].join(".")}function Lh(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Mh(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lh())}function jh(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Uh(){return!0===fh||!0===mh}function Fh(){try{return"object"===typeof indexedDB}catch(AL){return!1}}class Bh extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Bh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vh.prototype.create)}}class Vh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Gh,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Bh(n,s,t)}}const Gh=/\{\$([^}]+)}/g;function Hh(e){return JSON.parse(e)}function Wh(e){return JSON.stringify(e)}const zh=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=Hh(wh(s[0])||""),n=Hh(wh(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(AL){}return{header:t,claims:n,data:r,signature:i}};function qh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Kh(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Yh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Jh(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Xh(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Zh(n)&&Zh(s)){if(!Xh(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Zh(e){return null!==e&&"object"===typeof e}function Qh(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function $h(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function ep(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class tp{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let d=0;d<16;d++)n[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)n[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const e=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(r=c^o&(a^c),i=1518500249):(r=o^a^c,i=1859775393):d<60?(r=o&a|c&(o|a),i=2400959708):(r=o^a^c,i=3395469782);const e=(s<<5|s>>>27)+r+l+i+n[d]&4294967295;l=c,c=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class np{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=rp),void 0===r.error&&(r.error=rp),void 0===r.complete&&(r.complete=rp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(AL){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(AL){"undefined"!==typeof console&&console.error&&console.error(AL)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function rp(){}function ip(e,t){return"".concat(e," failed: ").concat(t," argument ")}const sp=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function op(e){return e&&e._delegate?e._delegate:e}class ap{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const cp="[DEFAULT]";class lp{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ph;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(AL){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(AL){if(r)return null;throw AL}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:cp})}catch(AL){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(AL){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cp;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cp;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cp;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dp(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cp;return this.component?this.component.multipleInstances?e:cp:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function dp(e){return e===cp?void 0:e}class up{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const hp=[];var pp;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(pp||(pp={}));const fp={debug:pp.DEBUG,verbose:pp.VERBOSE,info:pp.INFO,warn:pp.WARN,error:pp.ERROR,silent:pp.SILENT},mp=pp.INFO,gp={[pp.DEBUG]:"log",[pp.VERBOSE]:"log",[pp.INFO]:"info",[pp.WARN]:"warn",[pp.ERROR]:"error"},_p=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=gp[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class vp{constructor(e){this.name=e,this._logLevel=mp,this._logHandler=_p,this._userLogHandler=null,hp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pp))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?fp[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pp.DEBUG,...t),this._logHandler(this,pp.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pp.VERBOSE,...t),this._logHandler(this,pp.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pp.INFO,...t),this._logHandler(this,pp.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pp.WARN,...t),this._logHandler(this,pp.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pp.ERROR,...t),this._logHandler(this,pp.ERROR,...t)}}const yp=(e,t)=>t.some((t=>e instanceof t));let Ep,bp;const Tp=new WeakMap,Sp=new WeakMap,wp=new WeakMap,Cp=new WeakMap,Rp=new WeakMap;let Ip={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Sp.get(e);if("objectStoreNames"===t)return e.objectStoreNames||wp.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ap(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Np(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(bp||(bp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(kp(this),n),Ap(Tp.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ap(e.apply(kp(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(kp(this),t,...r);return wp.set(s,t.sort?t.sort():[t]),Ap(s)}}function Op(e){return"function"===typeof e?Np(e):(e instanceof IDBTransaction&&function(e){if(Sp.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Sp.set(e,t)}(e),yp(e,Ep||(Ep=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ip):e)}function Ap(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ap(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Tp.set(t,e)})).catch((()=>{})),Rp.set(t,e),t}(e);if(Cp.has(e))return Cp.get(e);const t=Op(e);return t!==e&&(Cp.set(e,t),Rp.set(t,e)),t}const kp=e=>Rp.get(e);const xp=["get","getKey","getAll","getAllKeys","count"],Pp=["put","add","delete","clear"],Dp=new Map;function Lp(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Dp.get(t))return Dp.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Pp.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!xp.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Dp.set(t,s),s}Ip=(e=>({...e,get:(t,n,r)=>Lp(t,n)||e.get(t,n,r),has:(t,n)=>!!Lp(t,n)||e.has(t,n)}))(Ip);class Mp{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const jp="@firebase/app",Up="0.9.29",Fp=new vp("@firebase/app"),Bp="@firebase/app-compat",Vp="@firebase/analytics-compat",Gp="@firebase/analytics",Hp="@firebase/app-check-compat",Wp="@firebase/app-check",zp="@firebase/auth",qp="@firebase/auth-compat",Kp="@firebase/database",Yp="@firebase/database-compat",Jp="@firebase/functions",Xp="@firebase/functions-compat",Zp="@firebase/installations",Qp="@firebase/installations-compat",$p="@firebase/messaging",ef="@firebase/messaging-compat",tf="@firebase/performance",nf="@firebase/performance-compat",rf="@firebase/remote-config",sf="@firebase/remote-config-compat",of="@firebase/storage",af="@firebase/storage-compat",cf="@firebase/firestore",lf="@firebase/firestore-compat",df="firebase",uf="[DEFAULT]",hf={[jp]:"fire-core",[Bp]:"fire-core-compat",[Gp]:"fire-analytics",[Vp]:"fire-analytics-compat",[Wp]:"fire-app-check",[Hp]:"fire-app-check-compat",[zp]:"fire-auth",[qp]:"fire-auth-compat",[Kp]:"fire-rtdb",[Yp]:"fire-rtdb-compat",[Jp]:"fire-fn",[Xp]:"fire-fn-compat",[Zp]:"fire-iid",[Qp]:"fire-iid-compat",[$p]:"fire-fcm",[ef]:"fire-fcm-compat",[tf]:"fire-perf",[nf]:"fire-perf-compat",[rf]:"fire-rc",[sf]:"fire-rc-compat",[of]:"fire-gcs",[af]:"fire-gcs-compat",[cf]:"fire-fst",[lf]:"fire-fst-compat","fire-js":"fire-js",[df]:"fire-js-all"},pf=new Map,ff=new Map;function mf(e,t){try{e.container.addComponent(t)}catch(AL){Fp.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),AL)}}function gf(e){const t=e.name;if(ff.has(t))return Fp.debug("There were multiple attempts to register component ".concat(t,".")),!1;ff.set(t,e);for(const n of pf.values())mf(n,e);return!0}function _f(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const vf=new Vh("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yf{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ap("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vf.create("app-deleted",{appName:this._name})}}const Ef="10.9.0";function bf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:uf,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw vf.create("bad-app-name",{appName:String(i)});if(n||(n=kh()),!n)throw vf.create("no-options");const s=pf.get(i);if(s){if(Xh(n,s.options)&&Xh(r,s.config))return s;throw vf.create("duplicate-app",{appName:i})}const o=new up(i);for(const c of ff.values())o.addComponent(c);const a=new yf(n,r,o);return pf.set(i,a),a}function Tf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uf;const t=pf.get(e);if(!t&&e===uf&&kh())return bf();if(!t)throw vf.create("no-app",{appName:e});return t}function Sf(e,t,n){var r;let i=null!==(r=hf[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Fp.warn(e.join(" "))}gf(new ap("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const wf="firebase-heartbeat-database",Cf=1,Rf="firebase-heartbeat-store";let If=null;function Nf(){return If||(If=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Ap(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Ap(o.result),e.oldVersion,e.newVersion,Ap(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(wf,Cf,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Rf)}catch(AL){console.warn(AL)}}}).catch((e=>{throw vf.create("idb-open",{originalErrorMessage:e.message})}))),If}async function Of(e,t){try{const n=(await Nf()).transaction(Rf,"readwrite"),r=n.objectStore(Rf);await r.put(t,Af(e)),await n.done}catch(AL){if(AL instanceof Bh)Fp.warn(AL.message);else{const t=vf.create("idb-set",{originalErrorMessage:null===AL||void 0===AL?void 0:AL.message});Fp.warn(t.message)}}}function Af(e){return"".concat(e.name,"!").concat(e.options.appId)}class kf{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Pf(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xf();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=xf(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Df(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Df(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Sh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function xf(){return(new Date).toISOString().substring(0,10)}class Pf{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Fh()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(pv){t(pv)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Nf()).transaction(Rf),n=await t.objectStore(Rf).get(Af(e));return await t.done,n}catch(AL){if(AL instanceof Bh)Fp.warn(AL.message);else{const t=vf.create("idb-get",{originalErrorMessage:null===AL||void 0===AL?void 0:AL.message});Fp.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Of(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Of(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Df(e){return Sh(JSON.stringify({version:2,heartbeats:e})).length}var Lf;Lf="",gf(new ap("platform-logger",(e=>new Mp(e)),"PRIVATE")),gf(new ap("heartbeat",(e=>new kf(e)),"PRIVATE")),Sf(jp,Up,Lf),Sf(jp,Up,"esm2017"),Sf("fire-js","");Sf("firebase","10.9.0","app");function Mf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function jf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Uf=jf,Ff=new Vh("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bf=new vp("@firebase/auth");function Vf(e){if(Bf.logLevel<=pp.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Bf.error("Auth (".concat(Ef,"): ").concat(e),...n)}}function Gf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw qf(e,...n)}function Hf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qf(e,...n)}function Wf(e,t,n){const r=Object.assign(Object.assign({},Uf()),{[t]:n});return new Vh("auth","Firebase",r).create(t,{appName:e.name})}function zf(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Gf(e,"argument-error"),Wf(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function qf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Ff.create(e,...n)}function Kf(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw qf(t,...r)}}function Yf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Vf(t),new Error(t)}function Jf(e,t){e||Yf(t)}function Xf(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Zf(){return"http:"===Qf()||"https:"===Qf()}function Qf(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function $f(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Zf()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class em{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jf(t>e,"Short delay should be less than long delay!"),this.isMobile=Mh()||jh()}get(){return $f()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tm(e,t){Jf(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class nm{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Yf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Yf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Yf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rm={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},im=new em(3e4,6e4);function sm(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function om(e,t,n,r){return am(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Qh(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),nm.fetch()(lm(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function am(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},rm),t);try{const t=new um(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw hm(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw hm(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw hm(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw hm(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Wf(e,a,o);Gf(e,a)}}catch(AL){if(AL instanceof Bh)throw AL;Gf(e,"network-request-failed",{message:String(AL)})}}async function cm(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await om(e,t,n,r,i);return"mfaPendingCredential"in s&&Gf(e,"multi-factor-auth-required",{_serverResponse:s}),s}function lm(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?tm(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function dm(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class um{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Hf(this.auth,"network-request-failed"))),im.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function hm(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Hf(e,t,r);return i.customData._tokenResponse=n,i}function pm(e){return void 0!==e&&void 0!==e.enterprise}class fm{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return dm(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function mm(e,t){return om(e,"GET","/v2/recaptchaConfig",sm(e,t))}function gm(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(AL){}}function _m(e){return 1e3*Number(e)}function vm(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Vf("JWT malformed, contained fewer than 3 sections"),null;try{const e=wh(n);return e?JSON.parse(e):(Vf("Failed to decode base64 JWT payload"),null)}catch(AL){return Vf("Caught error parsing JWT payload as JSON",null===AL||void 0===AL?void 0:AL.toString()),null}}async function ym(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(AL){throw AL instanceof Bh&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(AL)&&e.auth.currentUser===e&&await e.auth.signOut(),AL}}class Em{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(AL){return void((null===AL||void 0===AL?void 0:AL.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class bm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gm(this.lastLoginAt),this.creationTime=gm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Tm(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ym(e,async function(e,t){return om(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Kf(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Mf(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const d=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!d&&u,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bm(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,p)}class Sm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Kf(e.idToken,"internal-error"),Kf("undefined"!==typeof e.idToken,"internal-error"),Kf("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=vm(e);return Kf(t,"internal-error"),Kf("undefined"!==typeof t.exp,"internal-error"),Kf("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Kf(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await am(e,{},(async()=>{const n=Qh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=lm(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",nm.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Sm;return n&&(Kf("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Kf("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Kf("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sm,this.toJSON())}_performRefresh(){return Yf("not implemented")}}function wm(e,t){Kf("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Cm{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Mf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Em(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new bm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ym(this,this.stsTokenManager.getToken(this.auth,e));return Kf(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=op(e),r=await n.getIdToken(t),i=vm(r);Kf(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:gm(_m(i.auth_time)),issuedAtTime:gm(_m(i.iat)),expirationTime:gm(_m(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=op(e);await Tm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Kf(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cm(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Kf(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Tm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ym(this,async function(e,t){return om(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,_=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:y,isAnonymous:E,providerData:b,stsTokenManager:T}=t;Kf(v&&T,e,"internal-error");const S=Sm.fromJSON(this.name,T);Kf("string"===typeof v,e,"internal-error"),wm(d,e.name),wm(u,e.name),Kf("boolean"===typeof y,e,"internal-error"),Kf("boolean"===typeof E,e,"internal-error"),wm(h,e.name),wm(p,e.name),wm(f,e.name),wm(m,e.name),wm(g,e.name),wm(_,e.name);const w=new Cm({uid:v,auth:e,email:u,emailVerified:y,displayName:d,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:_});return b&&Array.isArray(b)&&(w.providerData=b.map((e=>Object.assign({},e)))),m&&(w._redirectEventId=m),w}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Sm;r.updateFromServerResponse(t);const i=new Cm({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Tm(i),i}}const Rm=new Map;function Im(e){Jf(e instanceof Function,"Expected a class definition");let t=Rm.get(e);return t?(Jf(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Rm.set(e,t),t)}class Nm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Nm.type="NONE";const Om=Nm;function Am(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class km{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Am(this.userKey,r.apiKey,i),this.fullPersistenceKey=Am("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Cm._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new km(Im(Om),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Im(Om);const s=Am(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=Cm._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new km(i,e,n)):new km(i,e,n)}}function xm(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Mm(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Pm(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Um(t))return"Blackberry";if(Fm(t))return"Webos";if(Dm(t))return"Safari";if((t.includes("chrome/")||Lm(t))&&!t.includes("edge/"))return"Chrome";if(jm(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Pm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lh();return/firefox\//i.test(e)}function Dm(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lh()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lh();return/crios\//i.test(e)}function Mm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lh();return/iemobile/i.test(e)}function jm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lh();return/android/i.test(e)}function Um(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lh();return/blackberry/i.test(e)}function Fm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lh();return/webos/i.test(e)}function Bm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lh();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Vm(){return function(){const e=Lh();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Gm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lh();return Bm(e)||jm(e)||Fm(e)||Um(e)||/windows phone/i.test(e)||Mm(e)}function Hm(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=xm(Lh());break;case"Worker":t="".concat(xm(Lh()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ef,"/").concat(r)}class Wm{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(AL){r(AL)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(AL){t.reverse();for(const n of t)try{n()}catch(Wc){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===AL||void 0===AL?void 0:AL.message})}}}class zm{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class qm{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ym(this),this.idTokenSubscription=new Ym(this),this.beforeStateQueue=new Wm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ff,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Im(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await km.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(AL){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(AL){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(AL)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Kf(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(AL){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tm(e)}catch(AL){if((null===AL||void 0===AL?void 0:AL.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?op(e):null;return t&&Kf(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Kf(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Im(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return om(e,"GET","/v2/passwordPolicy",sm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new zm(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return om(e,"POST","/v2/accounts:revokeToken",sm(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Im(e)||this._popupRedirectResolver;Kf(t,this,"argument-error"),this.redirectPersistenceManager=await km.create(this,[Im(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Kf(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Kf(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Bf.logLevel<=pp.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Bf.warn("Auth (".concat(Ef,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Km(e){return op(e)}class Ym{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new np(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Kf(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xm(e){return Jm.loadJS(e)}function Zm(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Qm{constructor(e){this.type="recaptcha-enterprise",this.auth=Km(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;pm(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{mm(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new fm(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&pm(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Jm.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Xm(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function $m(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Qm(e);let s;try{s=await i.verify(n)}catch(pv){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function eg(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await $m(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await $m(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function tg(e,t,n){const r=Km(e);Kf(r._canInitEmulator,r,"emulator-config-failed"),Kf(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ng(t),{host:o,port:a}=function(e){const t=ng(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:rg(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:rg(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ng(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function rg(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ig{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yf("not implemented")}_getIdTokenResponse(e){return Yf("not implemented")}_linkToIdToken(e,t){return Yf("not implemented")}_getReauthenticationResolver(e){return Yf("not implemented")}}async function sg(e,t){return om(e,"POST","/v1/accounts:signUp",t)}async function og(e,t){return cm(e,"POST","/v1/accounts:signInWithPassword",sm(e,t))}async function ag(e,t){return om(e,"POST","/v1/accounts:sendOobCode",sm(e,t))}async function cg(e,t){return ag(e,t)}class lg extends ig{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new lg(e,t,"password")}static _fromEmailAndCode(e,t){return new lg(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return eg(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",og);case"emailLink":return async function(e,t){return cm(e,"POST","/v1/accounts:signInWithEmailLink",sm(e,t))}(e,{email:this._email,oobCode:this._password});default:Gf(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return eg(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sg);case"emailLink":return async function(e,t){return cm(e,"POST","/v1/accounts:signInWithEmailLink",sm(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Gf(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function dg(e,t){return cm(e,"POST","/v1/accounts:signInWithIdp",sm(e,t))}class ug extends ig{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ug(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gf("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Mf(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new ug(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return dg(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,dg(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,dg(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qh(t)}return e}}const hg={USER_NOT_FOUND:"user-not-found"};class pg extends ig{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new pg({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new pg({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return cm(e,"POST","/v1/accounts:signInWithPhoneNumber",sm(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await cm(e,"POST","/v1/accounts:signInWithPhoneNumber",sm(e,t));if(n.temporaryProof)throw hm(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return cm(e,"POST","/v1/accounts:signInWithPhoneNumber",sm(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),hg)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new pg({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class fg{constructor(e){var t,n,r,i,s,o;const a=$h(ep(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Kf(c&&l&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=$h(ep(e)).link,n=t?$h(ep(t)).deep_link_id:null,r=$h(ep(e)).deep_link_id;return(r?$h(ep(r)).link:null)||r||n||t||e}(e);try{return new fg(t)}catch(n){return null}}}class mg{constructor(){this.providerId=mg.PROVIDER_ID}static credential(e,t){return lg._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=fg.parseLink(t);return Kf(n,"argument-error"),lg._fromEmailAndCode(e,n.code,n.tenantId)}}mg.PROVIDER_ID="password",mg.EMAIL_PASSWORD_SIGN_IN_METHOD="password",mg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class gg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _g extends gg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class vg extends _g{constructor(){super("facebook.com")}static credential(e){return ug._fromParams({providerId:vg.PROVIDER_ID,signInMethod:vg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vg.credentialFromTaggedObject(e)}static credentialFromError(e){return vg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return vg.credential(t.oauthAccessToken)}catch(n){return null}}}vg.FACEBOOK_SIGN_IN_METHOD="facebook.com",vg.PROVIDER_ID="facebook.com";class yg extends _g{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ug._fromParams({providerId:yg.PROVIDER_ID,signInMethod:yg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return yg.credentialFromTaggedObject(e)}static credentialFromError(e){return yg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return yg.credential(n,r)}catch(i){return null}}}yg.GOOGLE_SIGN_IN_METHOD="google.com",yg.PROVIDER_ID="google.com";class Eg extends _g{constructor(){super("github.com")}static credential(e){return ug._fromParams({providerId:Eg.PROVIDER_ID,signInMethod:Eg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eg.credentialFromTaggedObject(e)}static credentialFromError(e){return Eg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Eg.credential(t.oauthAccessToken)}catch(n){return null}}}Eg.GITHUB_SIGN_IN_METHOD="github.com",Eg.PROVIDER_ID="github.com";class bg extends _g{constructor(){super("twitter.com")}static credential(e,t){return ug._fromParams({providerId:bg.PROVIDER_ID,signInMethod:bg.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bg.credentialFromTaggedObject(e)}static credentialFromError(e){return bg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return bg.credential(n,r)}catch(i){return null}}}bg.TWITTER_SIGN_IN_METHOD="twitter.com",bg.PROVIDER_ID="twitter.com";class Tg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Cm._fromIdTokenResponse(e,n,r),s=Sg(n);return new Tg({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Sg(n);return new Tg({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Sg(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class wg extends Bh{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,wg.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new wg(e,t,n,r)}}function Cg(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw wg._fromErrorAndOperation(e,n,t,r);throw n}))}async function Rg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ym(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Tg._forOperation(e,"link",r)}async function Ig(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await ym(e,Cg(r,i,t,e),n);Kf(s.idToken,r,"internal-error");const o=vm(s.idToken);Kf(o,r,"internal-error");const{sub:a}=o;return Kf(e.uid===a,r,"user-mismatch"),Tg._forOperation(e,i,s)}catch(AL){throw(null===AL||void 0===AL?void 0:AL.code)==="auth/".concat("user-not-found")&&Gf(r,"user-mismatch"),AL}}async function Ng(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Cg(e,r,t),s=await Tg._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Og(e,t,n){var r;Kf((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Kf("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Kf(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Kf(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}new WeakMap;const Ag="__sak";class kg{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ag,"1"),this.storage.removeItem(Ag),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class xg extends kg{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Lh();return Dm(e)||Bm(e)}()&&function(){try{return!(!window||window===window.top)}catch(AL){return!1}}(),this.fallbackToPolling=Gm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Vm()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xg.type="LOCAL";const Pg=xg;class Dg extends kg{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Dg.type="SESSION";const Lg=Dg;class Mg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Mg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function jg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Mg.receivers=[];class Ug{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=jg("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Fg(){return window}function Bg(){return"undefined"!==typeof Fg().WorkerGlobalScope&&"function"===typeof Fg().importScripts}const Vg="firebaseLocalStorageDb",Gg="firebaseLocalStorage",Hg="fbase_key";class Wg{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function zg(e,t){return e.transaction([Gg],t?"readwrite":"readonly").objectStore(Gg)}function qg(){const e=indexedDB.open(Vg,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Gg,{keyPath:Hg})}catch(AL){n(AL)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Gg)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Vg);return new Wg(e).toPromise()}(),t(await qg()))}))}))}async function Kg(e,t,n){const r=zg(e,!0).put({[Hg]:t,value:n});return new Wg(r).toPromise()}function Yg(e,t){const n=zg(e,!0).delete(t);return new Wg(n).toPromise()}class Jg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await qg()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(AL){if(t++>3)throw AL;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mg._getInstance(Bg()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ug(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qg();return await Kg(e,Ag,"1"),await Yg(e,Ag),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Kg(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=zg(e,!1).get(t),r=await new Wg(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Yg(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=zg(e,!1).getAll();return new Wg(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Jg.type="LOCAL";const Xg=Jg;Zm("rcb"),new em(3e4,6e4);const Zg="recaptcha";async function Qg(e,t,n){var r;const i=await n.verify();try{let s;if(Kf("string"===typeof i,e,"argument-error"),Kf(n.type===Zg,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Kf("enroll"===t.type,e,"internal-error");const n=await function(e,t){return om(e,"POST","/v2/accounts/mfaEnrollment:start",sm(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Kf("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Kf(n,e,"missing-multi-factor-info");const o=await function(e,t){return om(e,"POST","/v2/accounts/mfaSignIn:start",sm(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return om(e,"POST","/v1/accounts:sendVerificationCode",sm(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class $g{constructor(e){this.providerId=$g.PROVIDER_ID,this.auth=Km(e)}verifyPhoneNumber(e,t){return Qg(this.auth,e,op(t))}static credential(e,t){return pg._fromVerification(e,t)}static credentialFromResult(e){const t=e;return $g.credentialFromTaggedObject(t)}static credentialFromError(e){return $g.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?pg._fromTokenResponse(n,r):null}}function e_(e,t){return t?Im(t):(Kf(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}$g.PROVIDER_ID="phone",$g.PHONE_SIGN_IN_METHOD="phone";class t_ extends ig{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return dg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return dg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function n_(e){return Ng(e.auth,new t_(e),e.bypassAuthState)}function r_(e){const{auth:t,user:n}=e;return Kf(n,t,"internal-error"),Ig(n,new t_(e),e.bypassAuthState)}async function i_(e){const{auth:t,user:n}=e;return Kf(n,t,"internal-error"),Rg(n,new t_(e),e.bypassAuthState)}class s_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(AL){this.reject(AL)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(AL){this.reject(AL)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n_;case"linkViaPopup":case"linkViaRedirect":return i_;case"reauthViaPopup":case"reauthViaRedirect":return r_;default:Gf(this.auth,"internal-error")}}resolve(e){Jf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const o_=new em(2e3,1e4);async function a_(e,t,n){const r=Km(e);zf(e,t,gg);const i=e_(r,n);return new c_(r,"signInViaPopup",t,i).executeNotNull()}class c_ extends s_{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,c_.currentPopupAction&&c_.currentPopupAction.cancel(),c_.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Kf(e,this.auth,"internal-error"),e}async onExecution(){Jf(1===this.filter.length,"Popup operations only handle one event");const e=jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Hf(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Hf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,c_.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Hf(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,o_.get())};e()}}c_.currentPopupAction=null;const l_="pendingRedirect",d_=new Map;class u_ extends s_{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=d_.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=f_(t),r=p_(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(AL){e=()=>Promise.reject(AL)}d_.set(this.auth._key(),e)}return this.bypassAuthState||d_.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function h_(e,t){d_.set(e._key(),t)}function p_(e){return Im(e._redirectPersistence)}function f_(e){return Am(l_,e.config.apiKey,e.name)}async function m_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Km(e),i=e_(r,t),s=new u_(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class g_{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v_(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!v_(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Hf(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(__(e))}saveEventToCache(e){this.cachedEventUids.add(__(e)),this.lastProcessedEventTime=Date.now()}}function __(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function v_(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const y_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E_=/^https?/;async function b_(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return om(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(T_(r))return}catch(n){}Gf(e,"unauthorized-domain")}function T_(e){const t=Xf(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!E_.test(n))return!1;if(y_.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const S_=new em(3e4,6e4);function w_(){const e=Fg().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function C_(e){return new Promise(((t,n)=>{var r,i,s;function o(){w_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{w_(),n(Hf(e,"network-request-failed"))},timeout:S_.get()})}if(null===(i=null===(r=Fg().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Fg().gapi)||void 0===s?void 0:s.load)){const t=Zm("iframefcb");return Fg()[t]=()=>{gapi.load?o():n(Hf(e,"network-request-failed"))},Xm("".concat(Jm.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw R_=null,e}))}let R_=null;const I_=new em(5e3,15e3),N_="__/auth/iframe",O_="emulator/auth/iframe",A_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x_(e){const t=e.config;Kf(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?tm(t,O_):"https://".concat(e.config.authDomain,"/").concat(N_),r={apiKey:t.apiKey,appName:e.name,v:Ef},i=k_.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Qh(r).slice(1))}async function P_(e){const t=await function(e){return R_=R_||C_(e),R_}(e),n=Fg().gapi;return Kf(n,e,"internal-error"),t.open({where:document.body,url:x_(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A_,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Hf(e,"network-request-failed"),s=Fg().setTimeout((()=>{r(i)}),I_.get());function o(){Fg().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const D_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class L_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(AL){}}}function M_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},D_),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Lh().toLowerCase();n&&(a=Lm(l)?"_blank":n),Pm(l)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Bm(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lh())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new L_(null);const u=window.open(t||"",a,d);Kf(u,e,"popup-blocked");try{u.focus()}catch(AL){}return new L_(u)}const j_="__/auth/handler",U_="emulator/auth/handler",F_=encodeURIComponent("fac");async function B_(e,t,n,r,i,s){Kf(e.config.authDomain,e,"auth-domain-config-required"),Kf(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ef,eventId:i};if(t instanceof gg){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Yh(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof _g){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const d of Object.keys(a))void 0===a[d]&&delete a[d];const c=await e._getAppCheckToken(),l=c?"#".concat(F_,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(j_);return tm(t,U_)}(e),"?").concat(Qh(a).slice(1)).concat(l)}const V_="webStorageSupport";const G_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lg,this._completeRedirectFn=m_,this._overrideRedirectResult=h_}async _openPopup(e,t,n,r){var i;Jf(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return M_(e,await B_(e,t,n,Xf(),r),jg())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Fg().location.href=e}(await B_(e,t,n,Xf(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Jf(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await P_(e),n=new g_(e);return t.register("authEvent",(t=>{Kf(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(V_,{type:V_},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[V_];void 0!==i&&t(!!i),Gf(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=b_(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Gm()||Dm()||Bm()}};var H_="@firebase/auth",W_="1.6.2";class z_{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Kf(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const q_=xh("authIdTokenMaxAge")||300;let K_=null;var Y_;!function(e){Jm=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Hf("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Y_="Browser",gf(new ap("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Kf(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:Y_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hm(Y_)},l=new qm(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Im);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),gf(new ap("auth-internal",(e=>(e=>new z_(e))(Km(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Sf(H_,W_,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Y_)),Sf(H_,W_,"esm2017");const J_="@firebase/database",X_="1.0.3";let Z_="";function Q_(e){Z_=e}class $_{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Wh(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Hh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ev{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return qh(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const tv=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new $_(t)}}catch(AL){}return new ev},nv=tv("localStorage"),rv=tv("sessionStorage"),iv=new vp("@firebase/database"),sv=function(){let e=1;return function(){return e++}}(),ov=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,_h(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new tp;n.update(t);const r=n.digest();return Eh.encodeByteArray(r)},av=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=av.apply(null,n):e+="object"===typeof n?Wh(n):n,e+=" "}return e};let cv=null,lv=!0;const dv=function(e,t){_h(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(iv.logLevel=pp.VERBOSE,cv=iv.log.bind(iv),t&&rv.set("logging_enabled",!0)):"function"===typeof e?cv=e:(cv=null,rv.remove("logging_enabled"))},uv=function(){if(!0===lv&&(lv=!1,null===cv&&!0===rv.get("logging_enabled")&&dv(!0)),cv){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=av.apply(null,t);cv(r)}},hv=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];uv(e,...n)}},pv=function(){const e="FIREBASE INTERNAL ERROR: "+av(...arguments);iv.error(e)},fv=function(){const e="FIREBASE FATAL ERROR: ".concat(av(...arguments));throw iv.error(e),new Error(e)},mv=function(){const e="FIREBASE WARNING: "+av(...arguments);iv.warn(e)},gv=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},_v="[MIN_NAME]",vv="[MAX_NAME]",yv=function(e,t){if(e===t)return 0;if(e===_v||t===vv)return-1;if(t===_v||e===vv)return 1;{const n=Iv(e),r=Iv(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Ev=function(e,t){return e===t?0:e<t?-1:1},bv=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Wh(t))},Tv=function(e){if("object"!==typeof e||null===e)return Wh(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Wh(t[r]),n+=":",n+=Tv(e[t[r]]);return n+="}",n},Sv=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function wv(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Cv=function(e){_h(!gv(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const c=a.join("");let l="";for(o=0;o<64;o+=8){let e=parseInt(c.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()};const Rv=new RegExp("^-?(0*)\\d{1,10}$"),Iv=function(e){if(Rv.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Nv=function(e){try{e()}catch(AL){setTimeout((()=>{const t=AL.stack||"";throw mv("Exception was thrown by user callback.",t),AL}),Math.floor(0))}},Ov=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Av{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){mv('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class kv{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(uv("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mv(e)}}class xv{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}xv.OWNER="owner";const Pv="5",Dv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Lv="ac",Mv="websocket",jv="long_polling";class Uv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nv.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&nv.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function Fv(e,t,n){let r;if(_h("string"===typeof t,"typeof type must == string"),_h("object"===typeof n,"typeof params must == object"),t===Mv)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==jv)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return wv(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class Bv{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;qh(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ch(this.counters_)}}const Vv={},Gv={};function Hv(e){const t=e.toString();return Vv[t]||(Vv[t]=new Bv),Vv[t]}class Wv{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Nv((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const zv="start";class qv{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hv(e),this.stats_=Hv(t),this.urlFn=e=>(this.appCheckToken&&(e[Lv]=this.appCheckToken),Fv(t,jv,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Wv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Uh()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Kv((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,c]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===zv)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[zv]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Pv,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Lv]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Dv.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){qv.forceAllow_=!0}static forceDisallow(){qv.forceDisallow_=!0}static isAvailable(){return!Uh()&&(!!qv.forceAllow_||!qv.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Wh(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Th(t),r=Sv(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Uh())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Wh(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Kv{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Uh())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=sv(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Kv.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(AL){uv("frame writing exception"),AL.stack&&uv(AL.stack),uv(AL)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||uv("No IE domain setting required")}catch(AL){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Uh()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{uv("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(AL){}}),Math.floor(1))}}let Yv=null;"undefined"!==typeof MozWebSocket?Yv=MozWebSocket:"undefined"!==typeof WebSocket&&(Yv=WebSocket);class Jv{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hv(this.connId),this.stats_=Hv(t),this.connURL=Jv.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Pv,!Uh()&&"undefined"!==typeof location&&location.hostname&&Dv.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Lv]=r),i&&(s.p=i),Fv(e,Mv,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nv.set("previous_websocket_failure",!0);try{let e;if(Uh()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Pv,"/").concat(Z_,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Yv(this.connURL,[],e)}catch(AL){this.log_("Error instantiating WebSocket.");const t=AL.message||AL.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Jv.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Yv&&!Jv.forceDisallow_}static previouslyFailed(){return nv.isInMemoryStorage||!0===nv.get("previous_websocket_failure")}markConnectionHealthy(){nv.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Hh(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(_h(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Wh(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Sv(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(AL){this.log_("Exception thrown from WebSocket.send():",AL.message||AL.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Jv.responsesRequiredToBeHealthy=2,Jv.healthyTimeout=3e4;class Xv{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[qv,Jv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Jv&&Jv.isAvailable();let n=t&&!Jv.previouslyFailed();if(e.webSocketOnly&&(t||mv("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Jv];else{const e=this.transports_=[];for(const t of Xv.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Xv.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xv.globalTransportInitialized_=!1;class Zv{constructor(e,t,n,r,i,s,o,a,c,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hv("c:"+this.id+":"),this.transportManager_=new Xv(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ov((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=bv("t",e),n=bv("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=bv("t",e),n=bv("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=bv("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?pv("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pv("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Pv!==n&&mv("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Ov((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ov((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nv.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Qv{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class $v{constructor(e){this.allowedEvents_=e,this.listeners_={},_h(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){_h(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class ey extends $v{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Mh()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new ey}getInitialEvent(e){return _h("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const ty=32,ny=768;class ry{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function iy(){return new ry("")}function sy(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function oy(e){return e.pieces_.length-e.pieceNum_}function ay(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ry(e.pieces_,t)}function cy(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ly(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function dy(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ry(t,0)}function uy(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ry)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ry(n,0)}function hy(e){return e.pieceNum_>=e.pieces_.length}function py(e,t){const n=sy(e),r=sy(t);if(null===n)return t;if(n===r)return py(ay(e),ay(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function fy(e,t){if(oy(e)!==oy(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function my(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(oy(e)>oy(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class gy{constructor(e,t){this.errorPrefix_=t,this.parts_=ly(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=sp(this.parts_[n]);_y(this)}}function _y(e){if(e.byteLength_>ny)throw new Error(e.errorPrefix_+"has a key path longer than "+ny+" bytes ("+e.byteLength_+").");if(e.parts_.length>ty)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ty+") or object contains a cycle "+vy(e))}function vy(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class yy extends $v{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new yy}getInitialEvent(e){return _h("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ey=1e3;class by extends Qv{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=by.nextPersistentConnectionId_++,this.log_=hv("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ey,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Uh())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yy.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ey.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Wh(i)),_h(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Ph,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),_h(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),_h(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;by.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&qh(e,"w")){const n=Kh(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();mv("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=zh(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=zh(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),_h(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Wh(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):pv("Unrecognized action received from server: "+Wh(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){_h(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ey,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ey,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ey),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+by.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},c=function(e){_h(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:c};const l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);s?uv("getToken() completed but was canceled"):(uv("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=c&&c.token,o=new Zv(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{mv(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(pv){this.log_("Failed to get token: "+pv),s||(this.repoInfo_.nodeAdmin&&mv(pv),a())}}}interrupt(e){uv("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){uv("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Yh(this.interruptReasons_)&&(this.reconnectDelay_=Ey,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Tv(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new ry(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){uv("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){uv("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Uh()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Z_.replace(/\./g,"-")]=1,Mh()?e["framework.cordova"]=1:jh()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ey.getInstance().currentlyOnline();return Yh(this.interruptReasons_)&&e}}by.nextPersistentConnectionId_=0,by.nextConnectionId_=0;class Ty{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ty(e,t)}}class Sy{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Ty(_v,e),r=new Ty(_v,t);return 0!==this.compare(n,r)}minPost(){return Ty.MIN}}let wy;class Cy extends Sy{static get __EMPTY_NODE(){return wy}static set __EMPTY_NODE(e){wy=e}compare(e,t){return yv(e.name,t.name)}isDefinedOn(e){throw vh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ty.MIN}maxPost(){return new Ty(vv,wy)}makePost(e,t){return _h("string"===typeof e,"KeyIndex indexValue must always be a string."),new Ty(e,wy)}toString(){return".key"}}const Ry=new Cy;class Iy{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ny{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ny.RED,this.left=null!=r?r:Oy.EMPTY_NODE,this.right=null!=i?i:Oy.EMPTY_NODE}copy(e,t,n,r,i){return new Ny(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Oy.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Oy.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ny.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ny.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ny.RED=!0,Ny.BLACK=!1;class Oy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oy.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Oy(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ny.BLACK,null,null))}remove(e){return new Oy(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ny.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Iy(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Iy(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Iy(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Iy(this.root_,null,this.comparator_,!0,e)}}function Ay(e,t){return yv(e.name,t.name)}function ky(e,t){return yv(e,t)}let xy;Oy.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Ny(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Py=function(e){return"number"===typeof e?"number:"+Cv(e):"string:"+e},Dy=function(e){if(e.isLeafNode()){const t=e.val();_h("string"===typeof t||"number"===typeof t||"object"===typeof t&&qh(t,".sv"),"Priority must be a string or number.")}else _h(e===xy||e.isEmpty(),"priority of unexpected type.");_h(e===xy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ly,My,jy;class Uy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uy.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,_h(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Dy(this.priorityNode_)}static set __childrenNodeConstructor(e){Ly=e}static get __childrenNodeConstructor(){return Ly}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Uy(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Uy.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return hy(e)?this:".priority"===sy(e)?this.priorityNode_:Uy.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Uy.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=sy(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(_h(".priority"!==n||1===oy(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Uy.__childrenNodeConstructor.EMPTY_NODE.updateChild(ay(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Py(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Cv(this.value_):this.value_,this.lazyHash_=ov(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Uy.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Uy.__childrenNodeConstructor?-1:(_h(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Uy.VALUE_TYPE_ORDER.indexOf(t),i=Uy.VALUE_TYPE_ORDER.indexOf(n);return _h(r>=0,"Unknown leaf type: "+t),_h(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Uy.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Fy=new class extends Sy{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?yv(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ty.MIN}maxPost(){return new Ty(vv,new Uy("[PRIORITY-POST]",jy))}makePost(e,t){const n=My(e);return new Ty(t,new Uy("[PRIORITY-POST]",n))}toString(){return".priority"}},By=Math.log(2);class Vy{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/By,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Gy=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Ny(a,o.node,Ny.BLACK,null,null);{const c=parseInt(s/2,10)+t,l=i(t,c),d=i(c+1,r);return o=e[c],a=n?n(o):o,new Ny(a,o.node,Ny.BLACK,l,d)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const l=i(s+1,a),d=e[s],u=n?n(d):d;c(new Ny(u,d.node,r,null,l))},c=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Ny.BLACK):(a(r,Ny.BLACK),a(r,Ny.RED))}return s}(new Vy(e.length));return new Oy(r||t,s)};let Hy;const Wy={};class zy{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return _h(Wy&&Fy,"ChildrenNode.ts has not been loaded"),Hy=Hy||new zy({".priority":Wy},{".priority":Fy}),Hy}get(e){const t=Kh(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Oy?t:null}hasIndex(e){return qh(this.indexSet_,e.toString())}addIndex(e,t){_h(e!==Ry,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Ty.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?Gy(n,e.getCompare()):Wy;const a=e.toString(),c=Object.assign({},this.indexSet_);c[a]=e;const l=Object.assign({},this.indexes_);return l[a]=s,new zy(l,c)}addToIndexes(e,t){const n=Jh(this.indexes_,((n,r)=>{const i=Kh(this.indexSet_,r);if(_h(i,"Missing index implementation for "+r),n===Wy){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Ty.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Gy(n,i.getCompare())}return Wy}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Ty(e.name,r))),i.insert(e,e.node)}}));return new zy(n,this.indexSet_)}removeFromIndexes(e,t){const n=Jh(this.indexes_,(n=>{if(n===Wy)return n;{const r=t.get(e.name);return r?n.remove(new Ty(e.name,r)):n}}));return new zy(n,this.indexSet_)}}let qy;class Ky{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Dy(this.priorityNode_),this.children_.isEmpty()&&_h(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qy||(qy=new Ky(new Oy(ky),null,zy.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qy}updatePriority(e){return this.children_.isEmpty()?this:new Ky(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?qy:t}}getChild(e){const t=sy(e);return null===t?this:this.getImmediateChild(t).getChild(ay(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(_h(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Ty(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?qy:this.priorityNode_;return new Ky(r,s,i)}}updateChild(e,t){const n=sy(e);if(null===n)return t;{_h(".priority"!==sy(e)||1===oy(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(ay(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Fy,((s,o)=>{t[s]=o.val(e),n++,i&&Ky.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Py(this.getPriority().val())+":"),this.forEachChild(Fy,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":ov(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Ty(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ty(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ty(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Ty.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Ty.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Yy?-1:0}withIndex(e){if(e===Ry||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ky(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ry||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Fy),n=t.getIterator(Fy);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Ry?null:this.indexMap_.get(e.toString())}}Ky.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Yy=new class extends Ky{constructor(){super(new Oy(ky),Ky.EMPTY_NODE,zy.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ky.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ty,{MIN:{value:new Ty(_v,Ky.EMPTY_NODE)},MAX:{value:new Ty(vv,Yy)}}),Cy.__EMPTY_NODE=Ky.EMPTY_NODE,Uy.__childrenNodeConstructor=Ky,xy=Yy,function(e){jy=e}(Yy);const Jy=!0;function Xy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Ky.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),_h(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Uy(e,Xy(t))}if(e instanceof Array||!Jy){let n=Ky.EMPTY_NODE;return wv(e,((t,r)=>{if(qh(e,t)&&"."!==t.substring(0,1)){const e=Xy(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Xy(t))}{const n=[];let r=!1;if(wv(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Xy(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Ty(e,i)))}})),0===n.length)return Ky.EMPTY_NODE;const i=Gy(n,Ay,(e=>e.name),ky);if(r){const e=Gy(n,Fy.getCompare());return new Ky(i,Xy(t),new zy({".priority":e},{".priority":Fy}))}return new Ky(i,Xy(t),zy.Default)}}!function(e){My=e}(Xy);class Zy extends Sy{constructor(e){super(),this.indexPath_=e,_h(!hy(e)&&".priority"!==sy(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?yv(e.name,t.name):i}makePost(e,t){const n=Xy(e),r=Ky.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ty(t,r)}maxPost(){const e=Ky.EMPTY_NODE.updateChild(this.indexPath_,Yy);return new Ty(vv,e)}toString(){return ly(this.indexPath_,0).join("/")}}const Qy=new class extends Sy{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?yv(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ty.MIN}maxPost(){return Ty.MAX}makePost(e,t){const n=Xy(e);return new Ty(t,n)}toString(){return".value"}};function $y(e){return{type:"value",snapshotNode:e}}function eE(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function tE(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function nE(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class rE{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){_h(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(tE(t,o)):_h(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(eE(t,n)):s.trackChildChange(nE(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Fy,((e,r)=>{t.hasChild(e)||n.trackChildChange(tE(e,r))})),t.isLeafNode()||t.forEachChild(Fy,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(nE(t,r,i))}else n.trackChildChange(eE(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ky.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class iE{constructor(e){this.indexedFilter_=new rE(e.getIndex()),this.index_=e.getIndex(),this.startPost_=iE.getStartPost_(e),this.endPost_=iE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new Ty(t,n))||(n=Ky.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Ky.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Ky.EMPTY_NODE);const i=this;return t.forEachChild(Fy,((e,t)=>{i.matches(new Ty(e,t))||(r=r.updateImmediateChild(e,Ky.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class sE{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new iE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new Ty(t,n))||(n=Ky.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Ky.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Ky.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Ky.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Ky.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;_h(o.numChildren()===this.limit_,"");const a=new Ty(t,n),c=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),l=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let d=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=d&&(d.name===t||o.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);const u=null==d?1:s(d,a);if(l&&!n.isEmpty()&&u>=0)return null!=i&&i.trackChildChange(nE(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(tE(t,e));const n=o.updateImmediateChild(t,Ky.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(eE(d.name,d.node)),n.updateImmediateChild(d.name,d.node)):n}}return n.isEmpty()?e:l&&s(c,a)>=0?(null!=i&&(i.trackChildChange(tE(c.name,c.node)),i.trackChildChange(eE(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(c.name,Ky.EMPTY_NODE)):e}}class oE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fy}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return _h(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return _h(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_v}hasEnd(){return this.endSet_}getIndexEndValue(){return _h(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return _h(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vv}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return _h(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fy}copy(){const e=new oE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function aE(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Fy?n="$priority":e.index_===Qy?n="$value":e.index_===Ry?n="$key":(_h(e.index_ instanceof Zy,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Wh(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Wh(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Wh(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Wh(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Wh(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function cE(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Fy&&(t.i=e.index_.toString()),t}class lE extends Qv{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=hv("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(_h(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=lE.getListenId_(e,n),o={};this.listens_[s]=o;const a=aE(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),Kh(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=lE.getListenId_(e,t);delete this.listens_[n]}get(e){const t=aE(e._queryParams),n=e._path.toString(),r=new Ph;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Qh(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=Hh(a.responseText)}catch(AL){mv("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&mv("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class dE{constructor(){this.rootNode_=Ky.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function uE(){return{value:null,children:new Map}}function hE(e,t,n){if(hy(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=sy(t);e.children.has(r)||e.children.set(r,uE());hE(e.children.get(r),t=ay(t),n)}}function pE(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{pE(r,new ry(t.toString()+"/"+e),n)}))}class fE{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&wv(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class mE{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new fE(e);const n=1e4+2e4*Math.random();Ov(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;wv(e,((e,r)=>{r>0&&qh(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Ov(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var gE;function _E(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(gE||(gE={}));class vE{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=gE.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(hy(this.path)){if(null!=this.affectedTree.value)return _h(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ry(e));return new vE(iy(),t,this.revert)}}return _h(sy(this.path)===e,"operationForChild called for unrelated child."),new vE(ay(this.path),this.affectedTree,this.revert)}}class yE{constructor(e,t){this.source=e,this.path=t,this.type=gE.LISTEN_COMPLETE}operationForChild(e){return hy(this.path)?new yE(this.source,iy()):new yE(this.source,ay(this.path))}}class EE{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=gE.OVERWRITE}operationForChild(e){return hy(this.path)?new EE(this.source,iy(),this.snap.getImmediateChild(e)):new EE(this.source,ay(this.path),this.snap)}}class bE{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=gE.MERGE}operationForChild(e){if(hy(this.path)){const t=this.children.subtree(new ry(e));return t.isEmpty()?null:t.value?new EE(this.source,iy(),t.value):new bE(this.source,iy(),t)}return _h(sy(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new bE(this.source,ay(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class TE{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(hy(e))return this.isFullyInitialized()&&!this.filtered_;const t=sy(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class SE{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function wE(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw vh("Should only compare child_ events.");const r=new Ty(t.childName,t.snapshotNode),i=new Ty(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function CE(e,t){return{eventCache:e,serverCache:t}}function RE(e,t,n,r){return CE(new TE(t,n,r),e.serverCache)}function IE(e,t,n,r){return CE(e.eventCache,new TE(t,n,r))}function NE(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function OE(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let AE;class kE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(AE||(AE=new Oy(Ev)),AE);this.value=e,this.children=t}static fromObject(e){let t=new kE(null);return wv(e,((e,n)=>{t=t.set(new ry(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:iy(),value:this.value};if(hy(e))return null;{const n=sy(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(ay(e),t);if(null!=i){return{path:uy(new ry(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(hy(e))return this;{const t=sy(e),n=this.children.get(t);return null!==n?n.subtree(ay(e)):new kE(null)}}set(e,t){if(hy(e))return new kE(t,this.children);{const n=sy(e),r=(this.children.get(n)||new kE(null)).set(ay(e),t),i=this.children.insert(n,r);return new kE(this.value,i)}}remove(e){if(hy(e))return this.children.isEmpty()?new kE(null):new kE(null,this.children);{const t=sy(e),n=this.children.get(t);if(n){const r=n.remove(ay(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new kE(null):new kE(this.value,i)}return this}}get(e){if(hy(e))return this.value;{const t=sy(e),n=this.children.get(t);return n?n.get(ay(e)):null}}setTree(e,t){if(hy(e))return t;{const n=sy(e),r=(this.children.get(n)||new kE(null)).setTree(ay(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new kE(this.value,i)}}fold(e){return this.fold_(iy(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(uy(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,iy(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(hy(e))return null;{const r=sy(e),i=this.children.get(r);return i?i.findOnPath_(ay(e),uy(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,iy(),t)}foreachOnPath_(e,t,n){if(hy(e))return this;{this.value&&n(t,this.value);const r=sy(e),i=this.children.get(r);return i?i.foreachOnPath_(ay(e),uy(t,r),n):new kE(null)}}foreach(e){this.foreach_(iy(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(uy(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class xE{constructor(e){this.writeTree_=e}static empty(){return new xE(new kE(null))}}function PE(e,t,n){if(hy(t))return new xE(new kE(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=py(i,t);return s=s.updateChild(o,n),new xE(e.writeTree_.set(i,s))}{const r=new kE(n),i=e.writeTree_.setTree(t,r);return new xE(i)}}}function DE(e,t,n){let r=e;return wv(n,((e,n)=>{r=PE(r,uy(t,e),n)})),r}function LE(e,t){if(hy(t))return xE.empty();{const n=e.writeTree_.setTree(t,new kE(null));return new xE(n)}}function ME(e,t){return null!=jE(e,t)}function jE(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(py(n.path,t)):null}function UE(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Fy,((e,n)=>{t.push(new Ty(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Ty(e,n.value))})),t}function FE(e,t){if(hy(t))return e;{const n=jE(e,t);return new xE(null!=n?new kE(n):e.writeTree_.subtree(t))}}function BE(e){return e.writeTree_.isEmpty()}function VE(e,t){return GE(iy(),e.writeTree_,t)}function GE(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(_h(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=GE(uy(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(uy(e,".priority"),r)),n}}function HE(e,t){return nb(t,e)}function WE(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));_h(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&zE(t,r.path)?i=!1:my(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=KE(e.allWrites,qE,iy()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=LE(e.visibleWrites,r.path);else{wv(r.children,(t=>{e.visibleWrites=LE(e.visibleWrites,uy(r.path,t))}))}return!0}return!1}function zE(e,t){if(e.snap)return my(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&my(uy(e.path,n),t))return!0;return!1}function qE(e){return e.visible}function KE(e,t,n){let r=xE.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)my(n,e)?(t=py(n,e),r=PE(r,t,s.snap)):my(e,n)&&(t=py(e,n),r=PE(r,iy(),s.snap.getChild(t)));else{if(!s.children)throw vh("WriteRecord should have .snap or .children");if(my(n,e))t=py(n,e),r=DE(r,t,s.children);else if(my(e,n))if(t=py(e,n),hy(t))r=DE(r,iy(),s.children);else{const e=Kh(s.children,sy(t));if(e){const n=e.getChild(ay(t));r=PE(r,iy(),n)}}}}}return r}function YE(e,t,n,r,i){if(r||i){const s=FE(e.visibleWrites,t);if(!i&&BE(s))return n;if(i||null!=n||ME(s,iy())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(my(e.path,t)||my(t,e.path))};return VE(KE(e.allWrites,s,t),n||Ky.EMPTY_NODE)}return null}{const r=jE(e.visibleWrites,t);if(null!=r)return r;{const r=FE(e.visibleWrites,t);if(BE(r))return n;if(null!=n||ME(r,iy())){return VE(r,n||Ky.EMPTY_NODE)}return null}}}function JE(e,t,n,r){return YE(e.writeTree,e.treePath,t,n,r)}function XE(e,t){return function(e,t,n){let r=Ky.EMPTY_NODE;const i=jE(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Fy,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=FE(e.visibleWrites,t);return n.forEachChild(Fy,((e,t)=>{const n=VE(FE(i,new ry(e)),t);r=r.updateImmediateChild(e,n)})),UE(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return UE(FE(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function ZE(e,t,n,r){return function(e,t,n,r,i){_h(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=uy(t,n);if(ME(e.visibleWrites,s))return null;{const t=FE(e.visibleWrites,s);return BE(t)?i.getChild(n):VE(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function QE(e,t){return function(e,t){return jE(e.visibleWrites,t)}(e.writeTree,uy(e.treePath,t))}function $E(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const c=FE(e.visibleWrites,t),l=jE(c,iy());if(null!=l)a=l;else{if(null==n)return[];a=VE(c,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let c=n.getNext();for(;c&&e.length<i;)0!==t(c,r)&&e.push(c),c=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function eb(e,t,n){return function(e,t,n,r){const i=uy(t,n),s=jE(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return VE(FE(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function tb(e,t){return nb(uy(e.treePath,t),e.writeTree)}function nb(e,t){return{treePath:e,writeTree:t}}class rb{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;_h("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),_h(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,nE(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,tE(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,eE(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw vh("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,nE(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const ib=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class sb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new TE(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eb(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:OE(this.viewCache_),i=$E(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function ob(e,t,n,r,i){const s=new rb;let o,a;if(n.type===gE.OVERWRITE){const c=n;c.source.fromUser?o=lb(e,t,c.path,c.snap,r,i,s):(_h(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!hy(c.path),o=cb(e,t,c.path,c.snap,r,i,a,s))}else if(n.type===gE.MERGE){const c=n;c.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,c)=>{const l=uy(n,r);db(t,sy(l))&&(a=lb(e,a,l,c,i,s,o))})),r.foreach(((r,c)=>{const l=uy(n,r);db(t,sy(l))||(a=lb(e,a,l,c,i,s,o))})),a}(e,t,c.path,c.children,r,i,s):(_h(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=hb(e,t,c.path,c.children,r,i,a,s))}else if(n.type===gE.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=QE(r,n))return t;{const a=new sb(r,t,i),c=t.eventCache.getNode();let l;if(hy(n)||".priority"===sy(n)){let n;if(t.serverCache.isFullyInitialized())n=JE(r,OE(t));else{const e=t.serverCache.getNode();_h(e instanceof Ky,"serverChildren would be complete if leaf node"),n=XE(r,e)}l=e.filter.updateFullNode(c,n,s)}else{const i=sy(n);let d=eb(r,i,t.serverCache);null==d&&t.serverCache.isCompleteForChild(i)&&(d=c.getImmediateChild(i)),l=null!=d?e.filter.updateChild(c,i,d,ay(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,Ky.EMPTY_NODE,ay(n),a,s):c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=JE(r,OE(t)),o.isLeafNode()&&(l=e.filter.updateFullNode(l,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=QE(r,iy()),RE(t,l,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=QE(i,n))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=r.value){if(hy(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return cb(e,t,n,c.getNode().getChild(n),i,s,a,o);if(hy(n)){let r=new kE(null);return c.getNode().forEachChild(Ry,((e,t)=>{r=r.set(new ry(e),t)})),hb(e,t,n,r,i,s,a,o)}return t}{let l=new kE(null);return r.foreach(((e,t)=>{const r=uy(n,e);c.isCompleteForPath(r)&&(l=l.set(e,c.getNode().getChild(r)))})),hb(e,t,n,l,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==gE.LISTEN_COMPLETE)throw vh("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=IE(t,s.getNode(),s.isFullyInitialized()||hy(n),s.isFiltered());return ab(e,o,n,r,ib,i)}(e,t,n.path,r,s)}const c=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=NE(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push($y(NE(t)))}}(t,o,c),{viewCache:o,changes:c}}function ab(e,t,n,r,i,s){const o=t.eventCache;if(null!=QE(r,n))return t;{let a,c;if(hy(n))if(_h(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=OE(t),i=XE(r,n instanceof Ky?n:Ky.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=JE(r,OE(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const l=sy(n);if(".priority"===l){_h(1===oy(n),"Can't have a priority with additional path components");const i=o.getNode();c=t.serverCache.getNode();const s=ZE(r,n,i,c);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const d=ay(n);let u;if(o.isCompleteForChild(l)){c=t.serverCache.getNode();const e=ZE(r,n,o.getNode(),c);u=null!=e?o.getNode().getImmediateChild(l).updateChild(d,e):o.getNode().getImmediateChild(l)}else u=eb(r,l,t.serverCache);a=null!=u?e.filter.updateChild(o.getNode(),l,u,d,i,s):o.getNode()}}return RE(t,a,o.isFullyInitialized()||hy(n),e.filter.filtersNodes())}}function cb(e,t,n,r,i,s,o,a){const c=t.serverCache;let l;const d=o?e.filter:e.filter.getIndexedFilter();if(hy(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){const e=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),e,null)}else{const e=sy(n);if(!c.isCompleteForPath(n)&&oy(n)>1)return t;const i=ay(n),s=c.getNode().getImmediateChild(e).updateChild(i,r);l=".priority"===e?d.updatePriority(c.getNode(),s):d.updateChild(c.getNode(),e,s,i,ib,null)}const u=IE(t,l,c.isFullyInitialized()||hy(n),d.filtersNodes());return ab(e,u,n,i,new sb(i,u,s),a)}function lb(e,t,n,r,i,s,o){const a=t.eventCache;let c,l;const d=new sb(i,t,s);if(hy(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,o),c=RE(t,l,!0,e.filter.filtersNodes());else{const i=sy(n);if(".priority"===i)l=e.filter.updatePriority(t.eventCache.getNode(),r),c=RE(t,l,a.isFullyInitialized(),a.isFiltered());else{const s=ay(n),l=a.getNode().getImmediateChild(i);let u;if(hy(s))u=r;else{const e=d.getCompleteChild(i);u=null!=e?".priority"===cy(s)&&e.getChild(dy(s)).isEmpty()?e:e.updateChild(s,r):Ky.EMPTY_NODE}if(l.equals(u))c=t;else{c=RE(t,e.filter.updateChild(a.getNode(),i,u,s,d,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function db(e,t){return e.eventCache.isCompleteForChild(t)}function ub(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function hb(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c,l=t;c=hy(n)?r:new kE(null).setTree(n,r);const d=t.serverCache.getNode();return c.children.inorderTraversal(((n,r)=>{if(d.hasChild(n)){const c=ub(0,t.serverCache.getNode().getImmediateChild(n),r);l=cb(e,l,new ry(n),c,i,s,o,a)}})),c.children.inorderTraversal(((n,r)=>{const c=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!d.hasChild(n)&&!c){const c=ub(0,t.serverCache.getNode().getImmediateChild(n),r);l=cb(e,l,new ry(n),c,i,s,o,a)}})),l}class pb{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new rE(n.getIndex()),i=(s=n).loadsAllData()?new rE(s.getIndex()):s.hasLimit()?new sE(s):new iE(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,c=r.updateFullNode(Ky.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(Ky.EMPTY_NODE,a.getNode(),null),d=new TE(c,o.isFullyInitialized(),r.filtersNodes()),u=new TE(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=CE(u,d),this.eventGenerator_=new SE(this.query_)}get query(){return this.query_}}function fb(e,t){const n=OE(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!hy(t)&&!n.getImmediateChild(sy(t)).isEmpty())?n.getChild(t):null}function mb(e){return 0===e.eventRegistrations_.length}function gb(e,t,n){const r=[];if(n){_h(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function _b(e,t,n,r){t.type===gE.MERGE&&null!==t.source.queryId&&(_h(OE(e.viewCache_),"We should always have a full cache before handling merges"),_h(NE(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=ob(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,_h(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),_h(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),_h(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,vb(e,s.changes,s.viewCache.eventCache.getNode(),null)}function vb(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),wE(e,i,"child_removed",t,r,n),wE(e,i,"child_added",t,r,n),wE(e,i,"child_moved",s,r,n),wE(e,i,"child_changed",t,r,n),wE(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let yb,Eb;class bb{constructor(){this.views=new Map}}function Tb(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return _h(null!=s,"SyncTree gave us an op for an invalid query."),_b(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(_b(s,t,n,r));return i}}function Sb(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=JE(n,i?r:null),s=!1;e?s=!0:r instanceof Ky?(e=XE(n,r),s=!1):(e=Ky.EMPTY_NODE,s=!1);const o=CE(new TE(e,s,!1),new TE(r,i,!1));return new pb(t,o)}return o}function wb(e,t,n,r,i,s){const o=Sb(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Fy,((e,t)=>{r.push(eE(e,t))}));return n.isFullyInitialized()&&r.push($y(n.getNode())),vb(e,r,n.getNode(),t)}(o,n)}function Cb(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=Ab(e);if("default"===i)for(const[c,l]of e.views.entries())o=o.concat(gb(l,n,r)),mb(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{const t=e.views.get(i);t&&(o=o.concat(gb(t,n,r)),mb(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!Ab(e)&&s.push(new(_h(yb,"Reference.ts has not been loaded"),yb)(t._repo,t._path)),{removed:s,events:o}}function Rb(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Ib(e,t){let n=null;for(const r of e.views.values())n=n||fb(r,t);return n}function Nb(e,t){if(t._queryParams.loadsAllData())return kb(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Ob(e,t){return null!=Nb(e,t)}function Ab(e){return null!=kb(e)}function kb(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let xb=1;class Pb{constructor(e){this.listenProvider_=e,this.syncPointTree_=new kE(null),this.pendingWriteTree_={visibleWrites:xE.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Db(e,t,n,r,i){return function(e,t,n,r,i){_h(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=PE(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Vb(e,new EE({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Lb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(WE(e.pendingWriteTree_,t)){let t=new kE(null);return null!=r.snap?t=t.set(iy(),!0):wv(r.children,(e=>{t=t.set(new ry(e),!0)})),Vb(e,new vE(r.path,t,n))}return[]}function Mb(e,t,n){return Vb(e,new EE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function jb(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||Ob(o,t))){const c=Cb(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const l=c.removed;if(a=c.events,!i){const n=-1!==l.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>Ab(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&Ab(t)){return[kb(t)]}{let e=[];return t&&(e=Rb(t)),wv(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=Wb(e,r);e.listenProvider_.startListening(Xb(i),zb(e,i),s.hashFn,s.onComplete)}}}if(!i&&l.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Xb(t),n)}else l.forEach((t=>{const n=e.queryToTagMap.get(qb(t));e.listenProvider_.stopListening(Xb(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=qb(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,l)}return a}function Ub(e,t,n,r){const i=Kb(e,r);if(null!=i){const r=Yb(i),s=r.path,o=r.queryId,a=py(s,t);return Jb(e,s,new EE(_E(o),a,n))}return[]}function Fb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=py(e,i);s=s||Ib(t,n),o=o||Ab(t)}));let a,c=e.syncPointTree_.get(i);if(c?(o=o||Ab(c),s=s||Ib(c,iy())):(c=new bb,e.syncPointTree_=e.syncPointTree_.set(i,c)),null!=s)a=!0;else{a=!1,s=Ky.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=Ib(t,iy());n&&(s=s.updateImmediateChild(e,n))}))}const l=Ob(c,t);if(!l&&!t._queryParams.loadsAllData()){const n=qb(t);_h(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=xb++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let d=wb(c,t,n,HE(e.pendingWriteTree_,i),s,a);if(!l&&!o&&!r){const n=Nb(c,t);d=d.concat(function(e,t,n){const r=t._path,i=zb(e,t),s=Wb(e,n),o=e.listenProvider_.startListening(Xb(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)_h(!Ab(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!hy(e)&&t&&Ab(t))return[kb(t).query];{let e=[];return t&&(e=e.concat(Rb(t).map((e=>e.query)))),wv(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Xb(r),zb(e,r))}}return o}(e,t,n))}return d}function Bb(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Ib(n,py(e,t));if(r)return r}));return YE(r,t,i,n,!0)}function Vb(e,t){return Gb(t,e.syncPointTree_,null,HE(e.pendingWriteTree_,iy()))}function Gb(e,t,n,r){if(hy(e.path))return Hb(e,t,n,r);{const i=t.get(iy());null==n&&null!=i&&(n=Ib(i,iy()));let s=[];const o=sy(e.path),a=e.operationForChild(o),c=t.children.get(o);if(c&&a){const e=n?n.getImmediateChild(o):null,t=tb(r,o);s=s.concat(Gb(a,c,e,t))}return i&&(s=s.concat(Tb(i,e,r,n))),s}}function Hb(e,t,n,r){const i=t.get(iy());null==n&&null!=i&&(n=Ib(i,iy()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=tb(r,t),c=e.operationForChild(t);c&&(s=s.concat(Hb(c,i,o,a)))})),i&&(s=s.concat(Tb(i,e,r,n))),s}function Wb(e,t){const n=t.query,r=zb(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Ky.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=Kb(e,n);if(r){const n=Yb(r),i=n.path,s=n.queryId,o=py(i,t);return Jb(e,i,new yE(_E(s),o))}return[]}(e,n._path,r):function(e,t){return Vb(e,new yE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return jb(e,n,null,r)}}}}function zb(e,t){const n=qb(t);return e.queryToTagMap.get(n)}function qb(e){return e._path.toString()+"$"+e._queryIdentifier}function Kb(e,t){return e.tagToQueryMap.get(t)}function Yb(e){const t=e.indexOf("$");return _h(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ry(e.substr(0,t))}}function Jb(e,t,n){const r=e.syncPointTree_.get(t);_h(r,"Missing sync point for query tag that we're tracking");return Tb(r,n,HE(e.pendingWriteTree_,t),null)}function Xb(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(_h(Eb,"Reference.ts has not been loaded"),Eb)(e._repo,e._path):e}class Zb{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Zb(t)}node(){return this.node_}}class Qb{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=uy(this.path_,e);return new Qb(this.syncTree_,t)}node(){return Bb(this.syncTree_,this.path_)}}const $b=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},eT=function(e,t,n){return e&&"object"===typeof e?(_h(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?tT(e[".sv"],t,n):"object"===typeof e[".sv"]?nT(e[".sv"],t):void _h(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},tT=function(e,t,n){if("timestamp"===e)return n.timestamp;_h(!1,"Unexpected server value: "+e)},nT=function(e,t,n){e.hasOwnProperty("increment")||_h(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&_h(!1,"Unexpected increment value: "+r);const i=t.node();if(_h(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},rT=function(e,t,n,r){return sT(t,new Qb(n,e),r)},iT=function(e,t,n){return sT(e,new Zb(t),n)};function sT(e,t,n){const r=e.getPriority().val(),i=eT(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=eT(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Uy(s,Xy(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Uy(i))),r.forEachChild(Fy,((e,r)=>{const i=sT(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class oT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function aT(e,t){let n=t instanceof ry?t:new ry(t),r=e,i=sy(n);for(;null!==i;){const e=Kh(r.node.children,i)||{children:{},childCount:0};r=new oT(i,r,e),n=ay(n),i=sy(n)}return r}function cT(e){return e.node.value}function lT(e,t){e.node.value=t,fT(e)}function dT(e){return e.node.childCount>0}function uT(e,t){wv(e.node.children,((n,r)=>{t(new oT(n,e,r))}))}function hT(e,t,n,r){n&&!r&&t(e),uT(e,(e=>{hT(e,t,!0,r)})),n&&r&&t(e)}function pT(e){return new ry(null===e.parent?e.name:pT(e.parent)+"/"+e.name)}function fT(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===cT(e)&&!dT(e)}(n),i=qh(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,fT(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,fT(e))}(e.parent,e.name,e)}const mT=/[\[\].#$\/\u0000-\u001F\u007F]/,gT=/[\[\].#$\u0000-\u001F\u007F]/,_T=10485760,vT=function(e){return"string"===typeof e&&0!==e.length&&!mT.test(e)},yT=function(e){return"string"===typeof e&&0!==e.length&&!gT.test(e)},ET=function(e,t,n,r){r&&void 0===t||bT(ip(e,"value"),t,n)},bT=function(e,t,n){const r=n instanceof ry?new gy(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+vy(r));if("function"===typeof t)throw new Error(e+"contains a function "+vy(r)+" with contents = "+t.toString());if(gv(t))throw new Error(e+"contains "+t.toString()+" "+vy(r));if("string"===typeof t&&t.length>_T/3&&sp(t)>_T)throw new Error(e+"contains a string greater than "+_T+" utf8 bytes "+vy(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(wv(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!vT(t)))throw new Error(e+" contains an invalid key ("+t+") "+vy(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=sp(t),_y(e)}(r,t),bT(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=sp(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+vy(r)+" in addition to actual children.")}},TT=function(e,t,n,r){if((!r||void 0!==n)&&!yT(n))throw new Error(ip(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ST=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),TT(e,t,n,r)},wT=function(e,t){if(".info"===sy(t))throw new Error(e+" failed = Can't modify data under /.info/")},CT=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!vT(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),yT(e)}(n))throw new Error(ip(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class RT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function IT(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||fy(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function NT(e,t,n){IT(e,n),AT(e,(e=>fy(e,t)))}function OT(e,t,n){IT(e,n),AT(e,(e=>my(e,t)||my(t,e)))}function AT(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(kT(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function kT(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();cv&&uv("event: "+n.toString()),Nv(r)}}}const xT="repo_interrupt",PT=25;class DT{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new RT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=uE(),this.transactionQueueTree_=new oT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function LT(e,t,n){if(e.stats_=Hv(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new lE(e.repoInfo_,((t,n,r,i)=>{UT(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>FT(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Wh(n)}catch(AL){throw new Error("Invalid authOverride provided: "+AL)}}e.persistentConnection_=new by(e.repoInfo_,t,((t,n,r,i)=>{UT(e,t,n,r,i)}),(t=>{FT(e,t)}),(t=>{!function(e,t){wv(t,((t,n)=>{BT(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return Gv[n]||(Gv[n]=t()),Gv[n]}(e.repoInfo_,(()=>new mE(e.stats_,e.server_))),e.infoData_=new dE,e.infoSyncTree_=new Pb({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Mb(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),BT(e,"connected",!1),e.serverSyncTree_=new Pb({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);OT(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function MT(e){const t=e.infoData_.getNode(new ry(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function jT(e){return $b({timestamp:MT(e)})}function UT(e,t,n,r,i){e.dataUpdateCount++;const s=new ry(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=Jh(n,(e=>Xy(e)));o=function(e,t,n,r){const i=Kb(e,r);if(i){const r=Yb(i),s=r.path,o=r.queryId,a=py(s,t),c=kE.fromObject(n);return Jb(e,s,new bE(_E(o),a,c))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Xy(n);o=Ub(e.serverSyncTree_,s,t,i)}else if(r){const t=Jh(n,(e=>Xy(e)));o=function(e,t,n){const r=kE.fromObject(n);return Vb(e,new bE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Xy(n);o=Mb(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=JT(e,s)),OT(e.eventQueue_,a,o)}function FT(e,t){BT(e,"connected",t),!1===t&&function(e){zT(e,"onDisconnectEvents");const t=jT(e),n=uE();pE(e.onDisconnect_,iy(),((r,i)=>{const s=rT(r,i,e.serverSyncTree_,t);hE(n,r,s)}));let r=[];pE(n,iy(),((t,n)=>{r=r.concat(Mb(e.serverSyncTree_,t,n));const i=eS(e,t);JT(e,i)})),e.onDisconnect_=uE(),OT(e.eventQueue_,iy(),r)}(e)}function BT(e,t,n){const r=new ry("/.info/"+t),i=Xy(n);e.infoData_.updateSnapshot(r,i);const s=Mb(e.infoSyncTree_,r,i);OT(e.eventQueue_,r,s)}function VT(e){return e.nextWriteId_++}function GT(e,t,n,r,i){zT(e,"set",{path:t.toString(),value:n,priority:r});const s=jT(e),o=Xy(n,r),a=Bb(e.serverSyncTree_,t),c=iT(o,a,s),l=VT(e),d=Db(e.serverSyncTree_,t,c,l,!0);IT(e.eventQueue_,d),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||mv("set at "+t+" failed: "+n);const o=Lb(e.serverSyncTree_,l,!s);OT(e.eventQueue_,t,o),qT(e,i,n,r)}));const u=eS(e,t);JT(e,u),OT(e.eventQueue_,u,[])}function HT(e,t,n){let r;r=".info"===sy(t._path)?jb(e.infoSyncTree_,t,n):jb(e.serverSyncTree_,t,n),NT(e.eventQueue_,t._path,r)}function WT(e){e.persistentConnection_&&e.persistentConnection_.interrupt(xT)}function zT(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];uv(t,...r)}function qT(e,t,n,r){t&&Nv((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function KT(e,t,n){return Bb(e.serverSyncTree_,t,n)||Ky.EMPTY_NODE}function YT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||$T(e,t),cT(t)){const n=ZT(e,t);_h(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=KT(e,t,r);let s=i;const o=i.hash();for(let l=0;l<n.length;l++){const e=n[l];_h(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=py(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),c=t;e.server_.put(c.toString(),a,(r=>{zT(e,"transaction put response",{path:c.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Lb(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();$T(e,aT(e.transactionQueueTree_,t)),YT(e,e.transactionQueueTree_),OT(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Nv(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{mv("transaction at "+c.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}JT(e,t)}}),o)}(e,pT(t),n)}else dT(t)&&uT(t,(t=>{YT(e,t)}))}function JT(e,t){const n=XT(e,t),r=pT(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let c=0;c<t.length;c++){const s=t[c],l=py(n,s.path);let d,u=!1;if(_h(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)u=!0,d=s.abortReason,i=i.concat(Lb(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=PT)u=!0,d="maxretry",i=i.concat(Lb(e.serverSyncTree_,s.currentWriteId,!0));else{const n=KT(e,s.path,o);s.currentInputSnapshot=n;const r=t[c].update(n.val());if(void 0!==r){bT("transaction failed: Data returned ",r,s.path);let t=Xy(r);"object"===typeof r&&null!=r&&qh(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,c=jT(e),l=iT(t,n,c);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=l,s.currentWriteId=VT(e),o.splice(o.indexOf(a),1),i=i.concat(Db(e.serverSyncTree_,s.path,l,s.currentWriteId,s.applyLocally)),i=i.concat(Lb(e.serverSyncTree_,a,!0))}else u=!0,d="nodata",i=i.concat(Lb(e.serverSyncTree_,s.currentWriteId,!0))}OT(e.eventQueue_,n,i),i=[],u&&(t[c].status=2,a=t[c].unwatcher,setTimeout(a,Math.floor(0)),t[c].onComplete&&("nodata"===d?r.push((()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot))):r.push((()=>t[c].onComplete(new Error(d),!1,null)))))}var a;$T(e,e.transactionQueueTree_);for(let c=0;c<r.length;c++)Nv(r[c]);YT(e,e.transactionQueueTree_)}(e,ZT(e,n),r),r}function XT(e,t){let n,r=e.transactionQueueTree_;for(n=sy(t);null!==n&&void 0===cT(r);)r=aT(r,n),n=sy(t=ay(t));return r}function ZT(e,t){const n=[];return QT(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function QT(e,t,n){const r=cT(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);uT(t,(t=>{QT(e,t,n)}))}function $T(e,t){const n=cT(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,lT(t,n.length>0?n:void 0)}uT(t,(t=>{$T(e,t)}))}function eS(e,t){const n=pT(XT(e,t)),r=aT(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{tS(e,t)})),tS(e,r),hT(r,(t=>{tS(e,t)})),n}function tS(e,t){const n=cT(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(_h(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(_h(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Lb(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?lT(t,void 0):n.length=s+1,OT(e.eventQueue_,pT(t),i);for(let e=0;e<r.length;e++)Nv(r[e])}}const nS=function(e,t){const n=rS(e),r=n.namespace;"firebase.com"===n.domain&&fv(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||fv("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&mv("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Uv(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ry(n.pathString)}},rS=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",c=443;if("string"===typeof e){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let d=e.indexOf("/");-1===d&&(d=e.length);let u=e.indexOf("?");-1===u&&(u=e.length),t=e.substring(0,Math.min(d,u)),d<u&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(AL){}t+="/"+e}return t}(e.substring(d,u)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):mv("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,u)));l=t.indexOf(":"),l>=0?(o="https"===a||"wss"===a,c=parseInt(t.substring(l+1),10)):l=t.length;const p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in h&&(s=h.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},iS="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class sS{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Wh(this.snapshot.exportVal())}}class oS{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class aS{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return _h(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class cS{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return hy(this._path)?null:cy(this._path)}get ref(){return new lS(this._repo,this._path)}get _queryIdentifier(){const e=cE(this._queryParams),t=Tv(e);return"{}"===t?"default":t}get _queryObject(){return cE(this._queryParams)}isEqual(e){if(!((e=op(e))instanceof cS))return!1;const t=this._repo===e._repo,n=fy(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class lS extends cS{constructor(e,t){super(e,t,new oE,!1)}get parent(){const e=dy(this._path);return null===e?null:new lS(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class dS{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ry(e),n=hS(this.ref,e);return new dS(this._node.getChild(t),n,Fy)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new dS(n,hS(this.ref,t),Fy))))}hasChild(e){const t=new ry(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function uS(e,t){return(e=op(e))._checkNotDeleted("ref"),void 0!==t?hS(e._root,t):e._root}function hS(e,t){return null===sy((e=op(e))._path)?ST("child","path",t,!1):TT("child","path",t,!1),new lS(e._repo,uy(e._path,t))}function pS(e,t){e=op(e),wT("set",e._path),ET("set",t,e._path,!1);const n=new Ph;return GT(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}class fS{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new sS("value",this,new dS(e.snapshotNode,new lS(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oS(this,e,t):null}matches(e){return e instanceof fS&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class mS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oS(this,e,t):null}createEvent(e,t){_h(null!=e.childName,"Child events should have a childName.");const n=hS(new lS(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new sS(e.type,this,new dS(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof mS&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function gS(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{HT(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new aS(n,s||void 0),a="value"===t?new fS(o):new mS(t,o);return function(e,t,n){let r;r=".info"===sy(t._path)?Fb(e.infoSyncTree_,t,n):Fb(e.serverSyncTree_,t,n),NT(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>HT(e._repo,e,a)}function _S(e,t,n,r){return gS(e,"value",t,n,r)}!function(e){_h(!yb,"__referenceConstructor has already been defined"),yb=e}(lS),function(e){_h(!Eb,"__referenceConstructor has already been defined"),Eb=e}(lS);const vS="FIREBASE_DATABASE_EMULATOR_HOST",yS={};let ES=!1;function bS(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||fv("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),uv("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,c=nS(s,i),l=c.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[vS]),a?(o=!0,s="http://".concat(a,"?ns=").concat(l.namespace),c=nS(s,i),l=c.repoInfo):o=!c.repoInfo.secure;const d=i&&o?new xv(xv.OWNER):new kv(e.name,e.options,t);CT("Invalid Firebase Database URL",c),hy(c.path)||fv("Database URL must point to the root of a Firebase Database (not including a child path).");const u=function(e,t,n,r){let i=yS[t.name];i||(i={},yS[t.name]=i);let s=i[e.toURLString()];s&&fv("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new DT(e,ES,n,r),i[e.toURLString()]=s,s}(l,e,d,new Av(e.name,n));return new TS(u,e)}class TS{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(LT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new lS(this._repo,iy())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=yS[t];n&&n[e.key]===e||fv("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),WT(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&fv("Cannot call "+e+" on a deleted database.")}}by.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},by.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Q_(Ef),gf(new ap("database",((e,t)=>{let{instanceIdentifier:n}=t;return bS(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Sf(J_,X_,e),Sf(J_,X_,"esm2017")}();var SS,wS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},CS={},RS=RS||{},IS=wS||self;function NS(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function OS(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var AS="closure_uid_"+(1e9*Math.random()>>>0),kS=0;function xS(e,t,n){return e.call.apply(e.bind,arguments)}function PS(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function DS(e,t,n){return(DS=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xS:PS).apply(null,arguments)}function LS(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function MS(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function jS(){this.s=this.s,this.o=this.o}jS.prototype.s=!1,jS.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,AS)&&e[AS]||(e[AS]=++kS))},jS.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const US=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function FS(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function BS(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(NS(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function VS(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}VS.prototype.h=function(){this.defaultPrevented=!0};var GS=function(){if(!IS.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};IS.addEventListener("test",e,t),IS.removeEventListener("test",e,t)}catch(n){}return e}();function HS(e){return/^[\s\xa0]*$/.test(e)}function WS(){var e=IS.navigator;return e&&(e=e.userAgent)?e:""}function zS(e){return-1!=WS().indexOf(e)}function qS(e){return qS[" "](e),e}qS[" "]=function(){};var KS,YS,JS=zS("Opera"),XS=zS("Trident")||zS("MSIE"),ZS=zS("Edge"),QS=ZS||XS,$S=zS("Gecko")&&!(-1!=WS().toLowerCase().indexOf("webkit")&&!zS("Edge"))&&!(zS("Trident")||zS("MSIE"))&&!zS("Edge"),ew=-1!=WS().toLowerCase().indexOf("webkit")&&!zS("Edge");function tw(){var e=IS.document;return e?e.documentMode:void 0}e:{var nw="",rw=function(){var e=WS();return $S?/rv:([^\);]+)(\)|;)/.exec(e):ZS?/Edge\/([\d\.]+)/.exec(e):XS?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ew?/WebKit\/(\S+)/.exec(e):JS?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(rw&&(nw=rw?rw[1]:""),XS){var iw=tw();if(null!=iw&&iw>parseFloat(nw)){KS=String(iw);break e}}KS=nw}if(IS.document&&XS){var sw=tw();YS=sw||(parseInt(KS,10)||void 0)}else YS=void 0;var ow=YS;function aw(e,t){if(VS.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if($S){e:{try{qS(t.nodeName);var i=!0;break e}catch(Lc){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:cw[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&aw.$.h.call(this)}}MS(aw,VS);var cw={2:"touch",3:"pen",4:"mouse"};aw.prototype.h=function(){aw.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var lw="closure_listenable_"+(1e6*Math.random()|0),dw=0;function uw(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++dw,this.fa=this.ia=!1}function hw(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function pw(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function fw(e){const t={};for(const n in e)t[n]=e[n];return t}const mw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gw(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<mw.length;t++)n=mw[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _w(e){this.src=e,this.g={},this.h=0}function vw(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=US(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(hw(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function yw(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}_w.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=yw(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new uw(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Ew="closure_lm_"+(1e6*Math.random()|0),bw={};function Tw(e,t,n,r,i){if(r&&r.once)return ww(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Tw(e,t[s],n,r,i);return null}return n=kw(n),e&&e[lw]?e.O(t,n,OS(r)?!!r.capture:!!r,i):Sw(e,t,n,!1,r,i)}function Sw(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=OS(i)?!!i.capture:!!i,a=Ow(e);if(a||(e[Ew]=a=new _w(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Nw;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)GS||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Iw(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ww(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ww(e,t[s],n,r,i);return null}return n=kw(n),e&&e[lw]?e.P(t,n,OS(r)?!!r.capture:!!r,i):Sw(e,t,n,!0,r,i)}function Cw(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Cw(e,t[s],n,r,i);else r=OS(r)?!!r.capture:!!r,n=kw(n),e&&e[lw]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=yw(s=e.g[t],n,r,i))&&(hw(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Ow(e))&&(t=e.g[t.toString()],e=-1,t&&(e=yw(t,n,r,i)),(n=-1<e?t[e]:null)&&Rw(n))}function Rw(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[lw])vw(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Iw(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ow(t))?(vw(n,e),0==n.h&&(n.src=null,t[Ew]=null)):hw(e)}}}function Iw(e){return e in bw?bw[e]:bw[e]="on"+e}function Nw(e,t){if(e.fa)e=!0;else{t=new aw(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Rw(e),e=n.call(r,t)}return e}function Ow(e){return(e=e[Ew])instanceof _w?e:null}var Aw="__closure_events_fn_"+(1e9*Math.random()>>>0);function kw(e){return"function"===typeof e?e:(e[Aw]||(e[Aw]=function(t){return e.handleEvent(t)}),e[Aw])}function xw(){jS.call(this),this.i=new _w(this),this.S=this,this.J=null}function Pw(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new VS(t,e);else if(t instanceof VS)t.target=t.target||e;else{var i=t;gw(t=new VS(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Dw(o,r,!0,t)&&i}if(i=Dw(o=t.g=e,r,!0,t)&&i,i=Dw(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Dw(o=t.g=n[s],r,!1,t)&&i}function Dw(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&vw(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}MS(xw,jS),xw.prototype[lw]=!0,xw.prototype.removeEventListener=function(e,t,n,r){Cw(this,e,t,n,r)},xw.prototype.N=function(){if(xw.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)hw(n[r]);delete t.g[e],t.h--}}this.J=null},xw.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},xw.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Lw=IS.JSON.stringify;function Mw(){var e=Hw;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var jw=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Uw),(e=>e.reset()));class Uw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Fw(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Bw(e){IS.setTimeout((()=>{throw e}),0)}let Vw,Gw=!1,Hw=new class{constructor(){this.h=this.g=null}add(e,t){const n=jw.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ww=()=>{const e=IS.Promise.resolve(void 0);Vw=()=>{e.then(zw)}};var zw=()=>{for(var e;e=Mw();){try{e.h.call(e.g)}catch(n){Bw(n)}var t=jw;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Gw=!1};function qw(e,t){xw.call(this),this.h=e||1,this.g=t||IS,this.j=DS(this.qb,this),this.l=Date.now()}function Kw(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Yw(e,t,n){if("function"===typeof e)n&&(e=DS(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=DS(e.handleEvent,e)}return 2147483647<Number(t)?-1:IS.setTimeout(e,t||0)}function Jw(e){e.g=Yw((()=>{e.g=null,e.i&&(e.i=!1,Jw(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}MS(qw,xw),(SS=qw.prototype).ga=!1,SS.T=null,SS.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Pw(this,"tick"),this.ga&&(Kw(this),this.start()))}},SS.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},SS.N=function(){qw.$.N.call(this),Kw(this),delete this.g};class Xw extends jS{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Jw(this)}N(){super.N(),this.g&&(IS.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zw(e){jS.call(this),this.h=e,this.g={}}MS(Zw,jS);var Qw=[];function $w(e,t,n,r){Array.isArray(n)||(n&&(Qw[0]=n.toString()),n=Qw);for(var i=0;i<n.length;i++){var s=Tw(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function eC(e){pw(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Rw(e)}),e),e.g={}}function tC(){this.g=!0}function nC(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Lw(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Zw.prototype.N=function(){Zw.$.N.call(this),eC(this)},Zw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tC.prototype.Ea=function(){this.g=!1},tC.prototype.info=function(){};var rC={},iC=null;function sC(){return iC=iC||new xw}function oC(e){VS.call(this,rC.Ta,e)}function aC(e){const t=sC();Pw(t,new oC(t))}function cC(e,t){VS.call(this,rC.STAT_EVENT,e),this.stat=t}function lC(e){const t=sC();Pw(t,new cC(t,e))}function dC(e,t){VS.call(this,rC.Ua,e),this.size=t}function uC(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return IS.setTimeout((function(){e()}),t)}rC.Ta="serverreachability",MS(oC,VS),rC.STAT_EVENT="statevent",MS(cC,VS),rC.Ua="timingevent",MS(dC,VS);var hC={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},pC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fC(){}function mC(e){return e.h||(e.h=e.i())}function gC(){}fC.prototype.h=null;var _C,vC={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function yC(){VS.call(this,"d")}function EC(){VS.call(this,"c")}function bC(){}function TC(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Zw(this),this.P=wC,e=QS?125:void 0,this.V=new qw(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new SC}function SC(){this.i=null,this.g="",this.h=!1}MS(yC,VS),MS(EC,VS),MS(bC,fC),bC.prototype.g=function(){return new XMLHttpRequest},bC.prototype.i=function(){return{}},_C=new bC;var wC=45e3,CC={},RC={};function IC(e,t,n){e.L=1,e.A=qC(VC(t)),e.u=n,e.S=!0,NC(e,null)}function NC(e,t){e.G=Date.now(),xC(e),e.B=VC(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),sR(n.i,"t",r),e.o=0,n=e.l.J,e.h=new SC,e.g=oI(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Xw(DS(e.Pa,e,e.g),e.O)),$w(e.U,e.g,"readystatechange",e.nb),t=e.I?fw(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),aC(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var d=l[0];l=l[1];var u=d.split("_");o=2<=u.length&&"type"==u[1]?o+(d+"=")+l+"&":o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function OC(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function AC(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=kC(e,n),r==RC){4==t&&(e.s=4,lC(14),i=!1),nC(e.j,e.m,null,"[Incomplete Response]");break}if(r==CC){e.s=4,lC(15),nC(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}nC(e.j,e.m,r,null),jC(e,r)}OC(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,lC(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),QR(t),t.M=!0,lC(11))):(nC(e.j,e.m,n,"[Invalid Chunked Response]"),MC(e),LC(e))}function kC(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?RC:(n=Number(t.substring(n,r)),isNaN(n)?CC:(r+=1)+n>t.length?RC:(t=t.slice(r,r+n),e.o=r+n,t))}function xC(e){e.Y=Date.now()+e.P,PC(e,e.P)}function PC(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=uC(DS(e.lb,e),t)}function DC(e){e.C&&(IS.clearTimeout(e.C),e.C=null)}function LC(e){0==e.l.H||e.J||tI(e.l,e)}function MC(e){DC(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Kw(e.V),eC(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function jC(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||hR(n.i,e)))if(!e.K&&hR(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(Dc){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;eI(n),WR(n)}ZR(n),lC(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=uC(DS(n.ib,n),6e3));if(1>=uR(n.i)&&n.oa){try{n.oa()}catch(Dc){}n.oa=void 0}}else rI(n,11)}else if((e.K||n.g==e)&&eI(n),!HS(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const d=l[5];null!=d&&"number"===typeof d&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(pR(s,s.h),s.h=null))}if(r.F){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,zC(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=sI(r,r.J?r.pa:null,r.Y),o.K){fR(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(DC(a),xC(a)),r.g=o}else XR(r);0<n.j.length&&qR(n)}else"stop"!=l[0]&&"close"!=l[0]||rI(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?rI(n,7):HR(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}aC()}catch(Dc){}}function UC(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(NS(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(NS(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(NS(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(SS=TC.prototype).setTimeout=function(e){this.P=e},SS.nb=function(e){e=e.target;const t=this.M;t&&3==jR(e)?t.l():this.Pa(e)},SS.Pa=function(e){try{if(e==this.g)e:{const d=jR(this.g);var t=this.g.Ia();this.g.da();if(!(3>d)&&(3!=d||QS||this.g&&(this.h.h||this.g.ja()||UR(this.g)))){this.J||4!=d||7==t||aC(),DC(this);var n=this.g.da();this.ca=n;t:if(OC(this)){var r=UR(this.g);e="";var i=r.length,s=4==jR(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){MC(this),LC(this);var o="";break t}this.h.i=new IS.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!HS(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,lC(12),MC(this),LC(this);break e}nC(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jC(this,n)}this.S?(AC(this,d,o),QS&&this.i&&3==d&&($w(this.U,this.V,"tick",this.mb),this.V.start())):(nC(this.j,this.m,o,null),jC(this,o)),4==d&&MC(this),this.i&&!this.J&&(4==d?tI(this.l,this):(this.i=!1,xC(this)))}else(function(e){const t={};e=(e.g&&2<=jR(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(HS(e[r]))continue;var n=Fw(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,lC(12)):(this.s=0,lC(13)),MC(this),LC(this)}}}catch(kc){}},SS.mb=function(){if(this.g){var e=jR(this.g),t=this.g.ja();this.o<t.length&&(DC(this),AC(this,e,t),this.i&&4!=e&&xC(this))}},SS.cancel=function(){this.J=!0,MC(this)},SS.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(aC(),lC(17)),MC(this),this.s=2,LC(this)):PC(this,this.Y-e)};var FC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function BC(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof BC){this.h=e.h,GC(this,e.j),this.s=e.s,this.g=e.g,HC(this,e.m),this.l=e.l;var t=e.i,n=new tR;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),WC(this,n),this.o=e.o}else e&&(t=String(e).match(FC))?(this.h=!1,GC(this,t[1]||"",!0),this.s=KC(t[2]||""),this.g=KC(t[3]||"",!0),HC(this,t[4]),this.l=KC(t[5]||"",!0),WC(this,t[6]||"",!0),this.o=KC(t[7]||"")):(this.h=!1,this.i=new tR(null,this.h))}function VC(e){return new BC(e)}function GC(e,t,n){e.j=n?KC(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function HC(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function WC(e,t,n){t instanceof tR?(e.i=t,function(e,t){t&&!e.j&&(nR(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(rR(this,t),sR(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=YC(t,$C)),e.i=new tR(t,e.h))}function zC(e,t,n){e.i.set(t,n)}function qC(e){return zC(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function KC(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function YC(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,JC),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function JC(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}BC.prototype.toString=function(){var e=[],t=this.j;t&&e.push(YC(t,XC,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(YC(t,XC,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(YC(n,"/"==n.charAt(0)?QC:ZC,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",YC(n,eR)),e.join("")};var XC=/[#\/\?@]/g,ZC=/[#\?:]/g,QC=/[#\?]/g,$C=/[#\?@]/g,eR=/#/g;function tR(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function nR(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function rR(e,t){nR(e),t=oR(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function iR(e,t){return nR(e),t=oR(e,t),e.g.has(t)}function sR(e,t,n){rR(e,t),0<n.length&&(e.i=null,e.g.set(oR(e,t),FS(n)),e.h+=n.length)}function oR(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(SS=tR.prototype).add=function(e,t){nR(this),this.i=null,e=oR(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},SS.forEach=function(e,t){nR(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},SS.ta=function(){nR(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},SS.Z=function(e){nR(this);let t=[];if("string"===typeof e)iR(this,e)&&(t=t.concat(this.g.get(oR(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},SS.set=function(e,t){return nR(this),this.i=null,iR(this,e=oR(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},SS.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},SS.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var aR=class{constructor(e,t){this.g=e,this.map=t}};function cR(e){this.l=e||lR,IS.PerformanceNavigationTiming?e=0<(e=IS.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(IS.g&&IS.g.Ka&&IS.g.Ka()&&IS.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lR=10;function dR(e){return!!e.h||!!e.g&&e.g.size>=e.j}function uR(e){return e.h?1:e.g?e.g.size:0}function hR(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function pR(e,t){e.g?e.g.add(t):e.h=t}function fR(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function mR(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return FS(e.i)}cR.prototype.cancel=function(){if(this.i=mR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var gR,_R=class{stringify(e){return IS.JSON.stringify(e,void 0)}parse(e){return IS.JSON.parse(e,void 0)}};function vR(){this.g=new _R}function yR(e,t,n){const r=n||"";try{UC(e,(function(e,n){let i=e;OS(e)&&(i=Lw(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(AL){throw t.push(r+"type="+encodeURIComponent("_badmap")),AL}}function ER(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Lc){}}function bR(e){this.l=e.ec||null,this.j=e.ob||!1}function TR(e,t){xw.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=SR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}MS(bR,fC),bR.prototype.g=function(){return new TR(this.l,this.j)},bR.prototype.i=(gR={},function(){return gR}),MS(TR,xw);var SR=0;function wR(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function CR(e){e.readyState=4,e.l=null,e.j=null,e.A=null,RR(e)}function RR(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(SS=TR.prototype).open=function(e,t){if(this.readyState!=SR)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,RR(this)},SS.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||IS).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},SS.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,CR(this)),this.readyState=SR},SS.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,RR(this)),this.g&&(this.readyState=3,RR(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof IS.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wR(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},SS.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?CR(this):RR(this),3==this.readyState&&wR(this)}},SS.Za=function(e){this.g&&(this.response=this.responseText=e,CR(this))},SS.Ya=function(e){this.g&&(this.response=e,CR(this))},SS.ka=function(){this.g&&CR(this)},SS.setRequestHeader=function(e,t){this.v.append(e,t)},SS.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},SS.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(TR.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var IR=IS.JSON.parse;function NR(e){xw.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=OR,this.L=this.M=!1}MS(NR,xw);var OR="",AR=/^https?$/i,kR=["POST","PUT"];function xR(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,PR(e),LR(e)}function PR(e){e.F||(e.F=!0,Pw(e,"complete"),Pw(e,"error"))}function DR(e){if(e.h&&"undefined"!=typeof RS&&(!e.C[1]||4!=jR(e)||2!=e.da()))if(e.v&&4==jR(e))Yw(e.La,0,e);else if(Pw(e,"readystatechange"),4==jR(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(FC)[1]||null;!i&&IS.self&&IS.self.location&&(i=IS.self.location.protocol.slice(0,-1)),r=!AR.test(i?i.toLowerCase():"")}n=r}if(n)Pw(e,"complete"),Pw(e,"success");else{e.m=6;try{var s=2<jR(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",PR(e)}}finally{LR(e)}}}function LR(e,t){if(e.g){MR(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Pw(e,"ready");try{n.onreadystatechange=r}catch(AL){}}}function MR(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(IS.clearTimeout(e.A),e.A=null)}function jR(e){return e.g?e.g.readyState:0}function UR(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case OR:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Gc){return null}}function FR(e){let t="";return pw(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function BR(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=FR(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):zC(e,t,n))}function VR(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function GR(e){this.Ga=0,this.j=[],this.l=new tC,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=VR("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=VR("baseRetryDelayMs",5e3,e),this.hb=VR("retryDelaySeedMs",1e4,e),this.eb=VR("forwardChannelMaxRetries",2,e),this.xa=VR("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new cR(e&&e.concurrentRequestLimit),this.Ja=new vR,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function HR(e){if(zR(e),3==e.H){var t=e.W++,n=VC(e.I);if(zC(n,"SID",e.K),zC(n,"RID",t),zC(n,"TYPE","terminate"),YR(e,n),(t=new TC(e,e.l,t)).L=2,t.A=qC(VC(n)),n=!1,IS.navigator&&IS.navigator.sendBeacon)try{n=IS.navigator.sendBeacon(t.A.toString(),"")}catch(xc){}!n&&IS.Image&&((new Image).src=t.A,n=!0),n||(t.g=oI(t.l,null),t.g.ha(t.A)),t.G=Date.now(),xC(t)}iI(e)}function WR(e){e.g&&(QR(e),e.g.cancel(),e.g=null)}function zR(e){WR(e),e.u&&(IS.clearTimeout(e.u),e.u=null),eI(e),e.i.cancel(),e.m&&("number"===typeof e.m&&IS.clearTimeout(e.m),e.m=null)}function qR(e){if(!dR(e.i)&&!e.m){e.m=!0;var t=e.Na;Vw||Ww(),Gw||(Vw(),Gw=!0),Hw.add(t,e),e.C=0}}function KR(e,t){var n;n=t?t.m:e.W++;const r=VC(e.I);zC(r,"SID",e.K),zC(r,"RID",n),zC(r,"AID",e.V),YR(e,r),e.o&&e.s&&BR(r,e.o,e.s),n=new TC(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=JR(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),pR(e.i,n),IC(n,r,t)}function YR(e,t){e.na&&pw(e.na,(function(e,n){zC(t,n,e)})),e.h&&UC({},(function(e,n){zC(t,n,e)}))}function JR(e,t,n){n=Math.min(e.j.length,n);var r=e.h?DS(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{yR(a,e,"req"+n+"_")}catch(zc){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function XR(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Vw||Ww(),Gw||(Vw(),Gw=!0),Hw.add(t,e),e.A=0}}function ZR(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=uC(DS(e.Ma,e),nI(e,e.A)),e.A++,!0)}function QR(e){null!=e.B&&(IS.clearTimeout(e.B),e.B=null)}function $R(e){e.g=new TC(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=VC(e.wa);zC(t,"RID","rpc"),zC(t,"SID",e.K),zC(t,"AID",e.V),zC(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&zC(t,"TO",e.qa),zC(t,"TYPE","xmlhttp"),YR(e,t),e.o&&e.s&&BR(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=qC(VC(t)),n.u=null,n.S=!0,NC(n,e)}function eI(e){null!=e.v&&(IS.clearTimeout(e.v),e.v=null)}function tI(e,t){var n=null;if(e.g==t){eI(e),QR(e),e.g=null;var r=2}else{if(!hR(e.i,t))return;n=t.F,fR(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Pw(r=sC(),new dC(r,n)),qR(e)}else XR(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(uR(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=uC(DS(e.Na,e,t),nI(e,e.C)),e.C++,!0))}(e,t)||2==r&&ZR(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:rI(e,5);break;case 4:rI(e,10);break;case 3:rI(e,6);break;default:rI(e,2)}}function nI(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function rI(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=DS(e.pb,e);n||(n=new BC("//www.google.com/images/cleardot.gif"),IS.location&&"http"==IS.location.protocol||GC(n,"https"),qC(n)),function(e,t){const n=new tC;if(IS.Image){const r=new Image;r.onload=LS(ER,n,r,"TestLoadImage: loaded",!0,t),r.onerror=LS(ER,n,r,"TestLoadImage: error",!1,t),r.onabort=LS(ER,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=LS(ER,n,r,"TestLoadImage: timeout",!1,t),IS.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else lC(2);e.H=0,e.h&&e.h.za(t),iI(e),zR(e)}function iI(e){if(e.H=0,e.ma=[],e.h){const t=mR(e.i);0==t.length&&0==e.j.length||(BS(e.ma,t),BS(e.ma,e.j),e.i.i.length=0,FS(e.j),e.j.length=0),e.h.ya()}}function sI(e,t,n){var r=n instanceof BC?VC(n):new BC(n);if(""!=r.g)t&&(r.g=t+"."+r.g),HC(r,r.m);else{var i=IS.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new BC(null);r&&GC(s,r),t&&(s.g=t),i&&HC(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&zC(r,n,t),zC(r,"VER",e.ra),YR(e,r),r}function oI(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new NR(new bR({ob:n})):new NR(e.va)).Oa(e.J),t}function aI(){}function cI(){if(XS&&!(10<=Number(ow)))throw Error("Environmental error: no available transport.")}function lI(e,t){xw.call(this),this.g=new GR(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!HS(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!HS(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hI(this)}function dI(e){yC.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function uI(){EC.call(this),this.status=1}function hI(e){this.g=e}function pI(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function fI(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function mI(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(SS=NR.prototype).Oa=function(e){this.M=e},SS.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():_C.g(),this.C=this.u?mC(this.u):mC(_C),this.g.onreadystatechange=DS(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(Lc){return void xR(this,Lc)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=IS.FormData&&e instanceof IS.FormData,!(0<=US(kR,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{MR(this),0<this.B&&((this.L=function(e){return XS&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=DS(this.ua,this)):this.A=Yw(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(Lc){xR(this,Lc)}},SS.ua=function(){"undefined"!=typeof RS&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pw(this,"timeout"),this.abort(8))},SS.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Pw(this,"complete"),Pw(this,"abort"),LR(this))},SS.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),LR(this,!0)),NR.$.N.call(this)},SS.La=function(){this.s||(this.G||this.v||this.l?DR(this):this.kb())},SS.kb=function(){DR(this)},SS.isActive=function(){return!!this.g},SS.da=function(){try{return 2<jR(this)?this.g.status:-1}catch(gR){return-1}},SS.ja=function(){try{return this.g?this.g.responseText:""}catch(gR){return""}},SS.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),IR(t)}},SS.Ia=function(){return this.m},SS.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(SS=GR.prototype).ra=8,SS.H=1,SS.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new TC(this,this.l,e);let s=this.s;if(this.U&&(s?(s=fw(s),gw(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=JR(this,i,t),zC(n=VC(this.I),"RID",e),zC(n,"CVER",22),this.F&&zC(n,"X-HTTP-Session-Id",this.F),YR(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(FR(s)))+"&"+t:this.o&&BR(n,this.o,s)),pR(this.i,i),this.bb&&zC(n,"TYPE","init"),this.P?(zC(n,"$req",t),zC(n,"SID","null"),i.aa=!0,IC(i,n,null)):IC(i,n,t),this.H=2}}else 3==this.H&&(e?KR(this,e):0==this.j.length||dR(this.i)||KR(this))},SS.Ma=function(){if(this.u=null,$R(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=uC(DS(this.jb,this),e)}},SS.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,lC(10),WR(this),$R(this))},SS.ib=function(){null!=this.v&&(this.v=null,WR(this),ZR(this),lC(19))},SS.pb=function(e){e?(this.l.info("Successfully pinged google.com"),lC(2)):(this.l.info("Failed to ping google.com"),lC(1))},SS.isActive=function(){return!!this.h&&this.h.isActive(this)},(SS=aI.prototype).Ba=function(){},SS.Aa=function(){},SS.za=function(){},SS.ya=function(){},SS.isActive=function(){return!0},SS.Va=function(){},cI.prototype.g=function(e,t){return new lI(e,t)},MS(lI,xw),lI.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;lC(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=sI(e,null,e.Y),qR(e)},lI.prototype.close=function(){HR(this.g)},lI.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Lw(e),e=n);t.j.push(new aR(t.fb++,e)),3==t.H&&qR(t)},lI.prototype.N=function(){this.g.h=null,delete this.j,HR(this.g),delete this.g,lI.$.N.call(this)},MS(dI,yC),MS(uI,EC),MS(hI,aI),hI.prototype.Ba=function(){Pw(this.g,"a")},hI.prototype.Aa=function(e){Pw(this.g,new dI(e))},hI.prototype.za=function(e){Pw(this.g,new uI)},hI.prototype.ya=function(){Pw(this.g,"b")},MS(pI,(function(){this.blockSize=-1})),pI.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},pI.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)fI(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){fI(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){fI(this,r),i=0;break}}this.h=i,this.i+=t},pI.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var gI={};function _I(e){return-128<=e&&128>e?function(e,t){var n=gI;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new mI([0|e],0>e?-1:0)})):new mI([0|e],0>e?-1:0)}function vI(e){if(isNaN(e)||!isFinite(e))return EI;if(0>e)return CI(vI(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=yI;return new mI(t,0)}var yI=4294967296,EI=_I(0),bI=_I(1),TI=_I(16777216);function SI(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function wI(e){return-1==e.h}function CI(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new mI(n,~e.h).add(bI)}function RI(e,t){return e.add(CI(t))}function II(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function NI(e,t){this.g=e,this.h=t}function OI(e,t){if(SI(t))throw Error("division by zero");if(SI(e))return new NI(EI,EI);if(wI(e))return t=OI(CI(e),t),new NI(CI(t.g),CI(t.h));if(wI(t))return t=OI(e,CI(t)),new NI(CI(t.g),t.h);if(30<e.g.length){if(wI(e)||wI(t))throw Error("slowDivide_ only works with positive integers.");for(var n=bI,r=t;0>=r.X(e);)n=AI(n),r=AI(r);var i=kI(n,1),s=kI(r,1);for(r=kI(r,2),n=kI(n,2);!SI(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=kI(r,1),n=kI(n,1)}return t=RI(e,i.R(t)),new NI(i,t)}for(i=EI;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=vI(n)).R(t);wI(o)||0<o.X(e);)o=(s=vI(n-=r)).R(t);SI(s)&&(s=bI),i=i.add(s),e=RI(e,o)}return new NI(i,e)}function AI(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new mI(n,e.h)}function kI(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new mI(i,e.h)}(SS=mI.prototype).ea=function(){if(wI(this))return-CI(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:yI+r)*t,t*=yI}return e},SS.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(SI(this))return"0";if(wI(this))return"-"+CI(this).toString(e);for(var t=vI(Math.pow(e,6)),n=this,r="";;){var i=OI(n,t).g,s=((0<(n=RI(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(SI(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},SS.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},SS.X=function(e){return wI(e=RI(this,e))?-1:SI(e)?0:1},SS.abs=function(){return wI(this)?CI(this):this},SS.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new mI(n,-2147483648&n[n.length-1]?-1:0)},SS.R=function(e){if(SI(this)||SI(e))return EI;if(wI(this))return wI(e)?CI(this).R(CI(e)):CI(CI(this).R(e));if(wI(e))return CI(this.R(CI(e)));if(0>this.X(TI)&&0>e.X(TI))return vI(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,II(n,2*r+2*i),n[2*r+2*i+1]+=s*c,II(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,II(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,II(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new mI(n,0)},SS.gb=function(e){return OI(this,e).h},SS.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new mI(n,this.h&e.h)},SS.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new mI(n,this.h|e.h)},SS.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new mI(n,this.h^e.h)},cI.prototype.createWebChannel=cI.prototype.g,lI.prototype.send=lI.prototype.u,lI.prototype.open=lI.prototype.m,lI.prototype.close=lI.prototype.close,hC.NO_ERROR=0,hC.TIMEOUT=8,hC.HTTP_ERROR=6,pC.COMPLETE="complete",gC.EventType=vC,vC.OPEN="a",vC.CLOSE="b",vC.ERROR="c",vC.MESSAGE="d",xw.prototype.listen=xw.prototype.O,NR.prototype.listenOnce=NR.prototype.P,NR.prototype.getLastError=NR.prototype.Sa,NR.prototype.getLastErrorCode=NR.prototype.Ia,NR.prototype.getStatus=NR.prototype.da,NR.prototype.getResponseJson=NR.prototype.Wa,NR.prototype.getResponseText=NR.prototype.ja,NR.prototype.send=NR.prototype.ha,NR.prototype.setWithCredentials=NR.prototype.Oa,pI.prototype.digest=pI.prototype.l,pI.prototype.reset=pI.prototype.reset,pI.prototype.update=pI.prototype.j,mI.prototype.add=mI.prototype.add,mI.prototype.multiply=mI.prototype.R,mI.prototype.modulo=mI.prototype.gb,mI.prototype.compare=mI.prototype.X,mI.prototype.toNumber=mI.prototype.ea,mI.prototype.toString=mI.prototype.toString,mI.prototype.getBits=mI.prototype.D,mI.fromNumber=vI,mI.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return CI(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=vI(Math.pow(n,8)),i=EI,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=vI(Math.pow(n,o)),i=i.R(o).add(vI(a))):i=(i=i.R(r)).add(vI(a))}return i};CS.createWebChannelTransport=function(){return new cI},CS.getStatEventTarget=function(){return sC()},CS.ErrorCode=hC,CS.EventType=pC,CS.Event=rC,CS.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},CS.FetchXmlHttpFactory=bR,CS.WebChannel=gC,CS.XhrIo=NR,CS.Md5=pI;var xI=CS.Integer=mI;const PI="@firebase/firestore";class DI{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}DI.UNAUTHENTICATED=new DI(null),DI.GOOGLE_CREDENTIALS=new DI("google-credentials-uid"),DI.FIRST_PARTY=new DI("first-party-uid"),DI.MOCK_USER=new DI("mock-user");let LI="10.9.0";const MI=new vp("@firebase/firestore");function jI(e){if(MI.logLevel<=pp.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(BI);MI.debug("Firestore (".concat(LI,"): ").concat(e),...i)}}function UI(e){if(MI.logLevel<=pp.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(BI);MI.error("Firestore (".concat(LI,"): ").concat(e),...i)}}function FI(e){if(MI.logLevel<=pp.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(BI);MI.warn("Firestore (".concat(LI,"): ").concat(e),...i)}}function BI(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function VI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(LI,") INTERNAL ASSERTION FAILED: ")+e;throw UI(t),new Error(t)}function GI(e,t){e||VI()}const HI={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class WI extends Bh{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class zI{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class qI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class KI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(DI.UNAUTHENTICATED)))}shutdown(){}}class YI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class JI{constructor(e){this.t=e,this.currentUser=DI.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new zI;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zI,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{jI("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(jI("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zI)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(jI("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(GI("string"==typeof t.accessToken),new qI(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return GI(null===e||"string"==typeof e),new DI(e)}}class XI{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=DI.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ZI{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new XI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(DI.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class QI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $I{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&jI("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,jI("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{jI("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):jI("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(GI("string"==typeof e.token),this.R=e.token,new QI(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function eN(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class tN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=eN(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function nN(e,t){return e<t?-1:e>t?1:0}class rN{constructor(e,t,n){void 0===t?t=0:t>e.length&&VI(),void 0===n?n=e.length-t:n>e.length-t&&VI(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===rN.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rN?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class iN extends rN{construct(e,t,n){return new iN(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new WI(HI.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new iN(e)}static emptyPath(){return new iN([])}}class sN{constructor(e){this.path=e}static fromPath(e){return new sN(iN.fromString(e))}static fromName(e){return new sN(iN.fromString(e).popFirst(5))}static empty(){return new sN(iN.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===iN.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return iN.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new sN(new iN(e.slice()))}}class oN{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}oN.UNKNOWN_ID=-1;function aN(e){return"IndexedDbTransactionError"===e.name}class cN{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function lN(e){return 0===e&&1/e==-1/0}cN._e=-1;const dN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],uN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hN=uN;class pN{constructor(e,t){this.comparator=e,this.root=t||mN.EMPTY}insert(e,t){return new pN(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mN.BLACK,null,null))}remove(e){return new pN(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mN.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fN(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fN(this.root,e,this.comparator,!1)}getReverseIterator(){return new fN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fN(this.root,e,this.comparator,!0)}}class fN{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mN{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:mN.RED,this.left=null!=r?r:mN.EMPTY,this.right=null!=i?i:mN.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new mN(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mN.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return mN.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mN.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mN.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw VI();if(this.right.isRed())throw VI();const e=this.left.check();if(e!==this.right.check())throw VI();return e+(this.isRed()?0:1)}}mN.EMPTY=null,mN.RED=!0,mN.BLACK=!1,mN.EMPTY=new class{constructor(){this.size=0}get key(){throw VI()}get value(){throw VI()}get color(){throw VI()}get left(){throw VI()}get right(){throw VI()}copy(e,t,n,r,i){return this}insert(e,t,n){return new mN(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gN{constructor(e){this.comparator=e,this.data=new pN(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _N(this.data.getIterator())}getIteratorFrom(e){return new _N(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof gN))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gN(this.comparator);return t.data=e,t}}class _N{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class yN{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new vN("Invalid base64 string: "+e):e}}(e);return new yN(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new yN(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nN(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yN.EMPTY_BYTE_STRING=new yN("");new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function EN(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function bN(e){return"string"==typeof e?yN.fromBase64String(e):yN.fromUint8Array(e)}class TN{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class SN{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new SN("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof SN&&e.projectId===this.projectId&&e.database===this.database}}function wN(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}new pN(sN.comparator);new pN(sN.comparator);new pN(sN.comparator),new gN(sN.comparator);new gN(nN);var CN,RN;(RN=CN||(CN={}))[RN.OK=0]="OK",RN[RN.CANCELLED=1]="CANCELLED",RN[RN.UNKNOWN=2]="UNKNOWN",RN[RN.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",RN[RN.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",RN[RN.NOT_FOUND=5]="NOT_FOUND",RN[RN.ALREADY_EXISTS=6]="ALREADY_EXISTS",RN[RN.PERMISSION_DENIED=7]="PERMISSION_DENIED",RN[RN.UNAUTHENTICATED=16]="UNAUTHENTICATED",RN[RN.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",RN[RN.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",RN[RN.ABORTED=10]="ABORTED",RN[RN.OUT_OF_RANGE=11]="OUT_OF_RANGE",RN[RN.UNIMPLEMENTED=12]="UNIMPLEMENTED",RN[RN.INTERNAL=13]="INTERNAL",RN[RN.UNAVAILABLE=14]="UNAVAILABLE",RN[RN.DATA_LOSS=15]="DATA_LOSS";new xI([4294967295,4294967295],0);Error;class IN{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(EN(e.integerValue));else if("doubleValue"in e){const n=EN(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),lN(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(bN(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?wN(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):VI()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),sN.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}IN.bt=new IN;new Uint8Array(0);class NN{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new NN(e,NN.DEFAULT_COLLECTION_PERCENTILE,NN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}NN.DEFAULT_COLLECTION_PERCENTILE=10,NN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,NN.DEFAULT=new NN(41943040,NN.DEFAULT_COLLECTION_PERCENTILE,NN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),NN.DISABLED=new NN(-1,0,0);function ON(){return"undefined"!=typeof document?document:null}class AN{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&jI("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class kN{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new zI,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new kN(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new WI(HI.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xN(e,t){if(UI("AsyncQueue","".concat(t,": ").concat(e)),aN(e))return new WI(HI.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var PN,DN;(DN=PN||(PN={})).j_="default",DN.Cache="cache";class LN{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=DI.UNAUTHENTICATED,this.clientId=tN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{jI("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(jI("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new WI(HI.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zI;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=xN(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}function MN(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const jN=new Map;function UN(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":VI()}function FN(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new WI(HI.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=UN(e);throw new WI(HI.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class BN{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new WI(HI.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new WI(HI.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new WI(HI.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MN(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new WI(HI.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new WI(HI.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new WI(HI.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class VN{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new WI(HI.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new WI(HI.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BN(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new KI;switch(e.type){case"firstParty":return new ZI(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new WI(HI.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jN.get(e);t&&(jI("ComponentProvider","Removing Datastore"),jN.delete(e),t.terminate())}(this),Promise.resolve()}}class GN{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new AN(this,"async_queue_retry"),this.cu=()=>{const e=ON();e&&jI("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=ON();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=ON();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new zI;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(AL){if(!aN(AL))throw AL;jI("AsyncQueue","Operation failed with retryable error: "+AL)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw UI("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const r=kN.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(r),r}lu(){this.ou&&VI()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}class HN extends VN{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new GN,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||WN(this),this._firestoreClient.terminate()}}function WN(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new TN(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,MN(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new LN(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}new RegExp("[~\\*/\\[\\]]");new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){LI=e}(Ef),gf(new ap("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new HN(new JI(e.getProvider("auth-internal")),new $I(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new WI(HI.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new SN(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Sf(PI,"4.5.0",e),Sf(PI,"4.5.0","esm2017")}();const zN=bf({apiKey:"AIzaSyAKWIIExMaVrxQ858PYKyLrj271uBSJy9c",authDomain:"dzital-38fcb.firebaseapp.com",databaseURL:"https://dzital-38fcb-default-rtdb.europe-west1.firebasedatabase.app",projectId:"dzital-38fcb",storageBucket:"dzital-38fcb.appspot.com",messagingSenderId:"1037771428251",appId:"1:1037771428251:web:8c6533617d284fb301113e"}),qN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tf();const t=_f(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=_f(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Xh(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Gf(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:G_,persistence:[Xg,Pg,Lg]}),r=xh("authTokenSyncURL");if(r&&r.match(/^\/[^\/].*/)){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>q_)return;const r=null===t||void 0===t?void 0:t.token;K_!==r&&(K_=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){op(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){op(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const s=Oh("auth");return s&&tg(n,"http://".concat(s)),n}(zN),KN=new yg,YN=new vg,JN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tf(),t=arguments.length>1?arguments[1]:void 0;const n=_f(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Ah("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=op(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&fv("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&fv('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new xv(xv.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Dh(r.mockUserToken,e.app.options.projectId);s=new xv(t)}!function(e,t,n,r){e.repoInfo_=new Uv("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(n,...e)}return n}(zN);!function(e,t){const n="string"==typeof e?e:t||"(default)",r=_f("object"==typeof e?e:Tf(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Ah("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=FN(e,VN))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&FI("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=DI.MOCK_USER;else{t=Dh(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new WI(HI.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new DI(s)}e._authCredentials=new YI(new qI(t,n))}}(r,...e)}}(zN);var XN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ZN=n.createContext&&n.createContext(XN),QN=["attr","size","title"];function $N(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function eO(){return eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eO.apply(this,arguments)}function tO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tO(Object(n),!0).forEach((function(t){rO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iO(e){return e&&e.map(((e,t)=>n.createElement(e.tag,nO({key:t},e.attr),iO(e.child))))}function sO(e){return t=>n.createElement(oO,eO({attr:nO({},e.attr)},t),iO(e.child))}function oO(e){var t=t=>{var r,{attr:i,size:s,title:o}=e,a=$N(e,QN),c=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",eO({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,a,{className:r,style:nO(nO({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&n.createElement("title",null,o),e.children)};return void 0!==ZN?n.createElement(ZN.Consumer,null,(e=>t(e))):t(XN)}function aO(e){return sO({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function cO(e){return sO({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(e)}function lO(e){return sO({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function dO(e){return sO({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(e)}function uO(e){return sO({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(e)}function hO(e){return sO({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function pO(e){return sO({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function fO(e){return sO({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function mO(e){return sO({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M268.2 381.4l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48c-10.7 4.6-16.5 16.1-13.9 27.5l24 104c2.5 10.8 12.1 18.6 23.4 18.6 100.7 0 193.7-32.4 269.7-86.9l-80-61.8c-10.9 6.5-22.1 12.7-33.6 18.1zm365.6 76.7L475.1 335.5C537.9 256.4 576 156.9 576 48c0-11.2-7.7-20.9-18.6-23.4l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-12.2 26.1-27.9 50.3-46 72.8L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3z"},child:[]}]})(e)}function gO(e){return sO({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"},child:[]}]})(e)}function _O(e){return sO({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"},child:[]}]})(e)}function vO(e){return sO({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"},child:[]}]})(e)}function yO(e){return sO({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"},child:[]}]})(e)}const EO=()=>{const{LoginUser:e,SocialLoginUser:t}=Kr(),[r,i]=(0,n.useState)(""),[s,o]=(0,n.useState)(""),[a,c]=(0,n.useState)(""),[l,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!1);return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{className:"box-form",children:[(0,Ae.jsx)("div",{className:"left",style:{background:"url(./assets/images/login-bg.jpg) center bottom"},children:(0,Ae.jsxs)("div",{className:"overlay",children:[(0,Ae.jsx)("h1",{children:"Success starts here"}),(0,Ae.jsxs)("ul",{children:[(0,Ae.jsx)("li",{children:"Over 600 categories"}),(0,Ae.jsx)("li",{children:"Pay per project, not per hour"}),(0,Ae.jsx)("li",{children:"Access to talent and businesses across the globe"})]})]})}),(0,Ae.jsxs)("div",{className:"right",children:[(0,Ae.jsx)("h3",{children:"Sign in to your account"}),(0,Ae.jsxs)("div",{className:"formBx mt-5",children:[(0,Ae.jsx)("div",{className:"formBx",children:(0,Ae.jsxs)("form",{className:"px-md-1 ",children:[(0,Ae.jsxs)("div",{className:"form-outline mb-3",children:[(0,Ae.jsx)("label",{htmlFor:"",children:(0,Ae.jsx)("b",{children:"Email or username"})}),(0,Ae.jsx)("input",{type:"email",value:r,onChange:e=>{i(e.target.value)},className:"form-control",required:!0})]}),(0,Ae.jsxs)("div",{className:"form-outline mb-4",children:[(0,Ae.jsx)("label",{htmlFor:"",children:(0,Ae.jsx)("b",{children:"Password"})}),(0,Ae.jsxs)("div",{className:"input-group mb-3",children:[(0,Ae.jsx)("input",{type:u?"text":"password",value:s,onChange:e=>{o(e.target.value)},className:"form-control",placeholder:"Password","aria-describedby":"password-toggle",required:!0}),(0,Ae.jsx)("span",{className:"input-group-text",id:"password-toggle",onClick:()=>{h(!u)},children:u?(0,Ae.jsx)(yO,{}):(0,Ae.jsx)(hO,{})})]})]}),(0,Ae.jsxs)("div",{className:"row mb-2",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("button",{type:"submit",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:t=>{if(t.preventDefault(),!r||!s)return void al.info("Please fill in all required fields");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?e(r,s):al.info("Please input a valid Email")},children:"Continue"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("p",{className:"mt-1",align:"right",children:(0,Ae.jsx)(Ie,{className:"text14 text-muted",onClick:()=>{d(!l)},to:"#",children:"Forgot Password"})})})]}),l&&(0,Ae.jsxs)("div",{className:"form-outline mb-3",children:[(0,Ae.jsx)("label",{htmlFor:"",children:(0,Ae.jsx)("b",{children:"Recipient's email"})}),(0,Ae.jsx)("input",{type:"email",value:a,onChange:e=>c(e.target.value),className:"form-control",required:!0})]}),l&&(0,Ae.jsx)("div",{className:"row mb-2",children:(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("button",{type:"button",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:e=>{e.preventDefault(),a?async function(e,t,n){const r=Km(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Og(r,i,n),await eg(r,i,"getOobCode",cg)}(qN,a).then((()=>{al.success("Password reset email sent. Please check your mail."),c(""),d(!1)})).catch((e=>{al.error("Error sending password reset email")})):al.info("Please enter your email")},children:"Send Reset Email"})})})]})}),(0,Ae.jsx)("h4",{className:"text-muted mb40 ",align:"center",children:"OR"}),(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-sm-12 col-lg-6",children:(0,Ae.jsxs)(Ie,{onClick:()=>{a_(qN,KN).then((e=>{t(e.user.email,e.user.uid,"google",e.user.displayName,e.user.photoURL)})).catch((e=>{}))},className:"btn btn-light width100 mb20 d-flex gap-1 mb-20 align-items-center justify-content-center",to:"#.",children:[(0,Ae.jsx)("img",{src:"./assets/images/google.svg",width:"16",alt:"",className:"google-icon"}),(0,Ae.jsx)("span",{children:"Google"})]})}),(0,Ae.jsx)("div",{className:"col-sm-12 col-lg-6",children:(0,Ae.jsxs)("button",{className:"btn btn-light width100 mb20 d-flex gap-1 mb-20 align-items-center justify-content-center",onClick:()=>{a_(qN,YN).then((e=>{t(e.user.email,e.user.uid,"facebook")})).catch((e=>{}))},children:[(0,Ae.jsx)("img",{src:"./assets/images/facebook.svg",width:16,alt:""}),(0,Ae.jsx)("span",{children:"Facebook"})]})})]}),(0,Ae.jsxs)("p",{className:"text text-center",children:["Don't An have Accout ? ",(0,Ae.jsx)(Ie,{to:"/singup",children:" SignUp"})," "]})]}),(0,Ae.jsx)("p",{className:"text14 text-muted",children:"By joining, you agree to the Dzital Terms of Service and to occasionally receive emails from us. Please read our Privacy Policy to learn how we use your personal data."})]})]})}),(0,Ae.jsx)(Ho,{})]})})})})},bO=()=>{const{LoginUser:e}=Kr(),[t,r]=(0,n.useState)(""),[i,s]=(0,n.useState)("");return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{className:"box-form",children:[(0,Ae.jsx)("div",{className:"left",style:{background:"url(./assets/images/login-bg.jpg) center bottom"},children:(0,Ae.jsxs)("div",{className:"overlay",children:[(0,Ae.jsx)("h1",{children:"Success starts here"}),(0,Ae.jsxs)("ul",{children:[(0,Ae.jsx)("li",{children:"Over 600 categories"}),(0,Ae.jsx)("li",{children:"Pay per project, not per hour"}),(0,Ae.jsx)("li",{children:"Access to talent and businesses across the globe"})]})]})}),(0,Ae.jsxs)("div",{className:"right",children:[(0,Ae.jsx)("p",{className:"mb5",children:(0,Ae.jsxs)(Ie,{className:"text-muted",to:"/login",children:[(0,Ae.jsx)("i",{className:"fa fa-long-arrow-left"})," Back"]})}),(0,Ae.jsxs)("div",{className:"formBx",children:[(0,Ae.jsxs)("form",{className:"px-md-1 mt30",children:[(0,Ae.jsxs)("div",{className:"form-outline mb-3",children:[(0,Ae.jsx)("label",{htmlFor:"",children:(0,Ae.jsx)("b",{children:"Email or username"})}),(0,Ae.jsx)("input",{type:"email",value:t,onChange:e=>{r(e.target.value)},className:"form-control",required:!0})]}),(0,Ae.jsxs)("div",{className:"form-outline mb-4",children:[(0,Ae.jsx)("label",{htmlFor:"",children:(0,Ae.jsx)("b",{children:"Password"})}),(0,Ae.jsx)("input",{type:"password",value:i,onChange:e=>{s(e.target.value)},className:"form-control",required:!0})]}),(0,Ae.jsxs)("div",{className:"row mb-2",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("button",{type:"submit",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:n=>{if(n.preventDefault(),!t||!i)return void al.info("Please fill in all required fields");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?e(t,i):al.info("Please input a valid Email")},children:"Continue"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("p",{className:"mt-1",align:"right",children:(0,Ae.jsx)(Ie,{className:"text14 text-muted","data-bs-toggle":"collapse",to:"#forgotPassword",children:"Forgot Password"})})})]})]}),(0,Ae.jsxs)("div",{className:"input-group collapse",id:"forgotPassword",children:[(0,Ae.jsx)("input",{type:"text",className:"form-control",placeholder:"Recipient's username","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),(0,Ae.jsx)("button",{className:"btn btnTheme",style:{backgroundColor:"var(--theme-color)"},type:"button",id:"button-addon2",children:"Button"})]})]}),(0,Ae.jsx)("p",{className:"text14 text-muted",children:"By joining, you agree to the Dzital Terms of Service and to occasionally receive emails from us. Please read our Privacy Policy to learn how we use your personal data."})]})]})}),(0,Ae.jsx)(Ho,{})]})})})})},TO=__webpack_require__.p+"static/media/user.eca20e66104f9ff91cf6.jpg",SO=e=>{let{preview:t}=e;const{userData:n,LogOut:r}=Kr(),{image:i,name:s}=n||{};return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsxs)("div",{className:"profile-sidebar  w-full",children:[(0,Ae.jsx)("div",{className:"profile-userpic d-flex justify-content-center align-items-center",children:(0,Ae.jsx)("img",{src:t||i||TO,className:"img-fluid rounded-circle",alt:"",style:{maxHeight:"120px",minHeight:"110px",maxWidth:"120px"}})}),(0,Ae.jsx)("div",{className:"profile-usertitle",children:(0,Ae.jsx)("div",{className:"profile-usertitle-name",children:s})}),(0,Ae.jsxs)("div",{className:"profile-userbuttons d-flex ",children:[(0,Ae.jsx)(Ie,{to:"/account",className:"btn btnTheme small-text",style:{background:"var(--theme-color)"},children:"Personal Info"}),(0,Ae.jsx)(Ie,{to:"/packages",className:"btn btn-warning small-text",children:"Upgrade to Premium"})]}),(0,Ae.jsx)("div",{className:"profile-usermenu",children:(0,Ae.jsxs)("ul",{className:"nav",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/change-password",children:[(0,Ae.jsx)("i",{className:"fa fa-lock"})," Password & Security"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/my-post",children:[(0,Ae.jsx)("i",{className:"fa fa-address-card-o"})," My Post"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/my-Order",children:[(0,Ae.jsx)("i",{className:"fa fa-address-card-o"})," My Order"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/add-post",children:[(0,Ae.jsx)("i",{className:"fa fa-address-card-o"})," Add Post"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/wishlist",children:[(0,Ae.jsx)("i",{className:"fa fa-heart-o"})," Wishlist"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"/cart",children:[(0,Ae.jsx)("i",{className:"fa-solid fa-cart-shopping"})," Cart"]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{to:"#",onClick:()=>r(),children:[(0,Ae.jsx)("i",{className:"fa fa-power-off"})," Sign Out"]})})]})})]})})},wO=()=>{const{userData:e,updateProfile:t}=Kr(),[r,i]=(0,n.useState)(""),[s,o]=(0,n.useState)(""),[a,c]=(0,n.useState)(""),[l,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[p,f]=(0,n.useState)(null),[m,g]=(0,n.useState)(""),{email:_,image:v,mobile:y,name:E,bio:b,address:T}=e||{};return(0,n.useEffect)((()=>{o(b)}),[b]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(cl,{param:"Accounts"}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-3",children:(0,Ae.jsx)(SO,{preview:m})}),(0,Ae.jsxs)("div",{className:"col-md-7",children:[(0,Ae.jsx)("div",{className:"card border-0",children:(0,Ae.jsxs)("div",{className:"card card-body border-0",children:[(0,Ae.jsx)("h2",{className:"titleText",children:"Personal Info"}),(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-9 mt-2",children:[(0,Ae.jsx)("label",{className:"mb-1",children:(0,Ae.jsx)("b",{children:"Short Bio"})}),(0,Ae.jsx)("div",{children:(0,Ae.jsx)("textarea",{className:"form-control",rows:3,value:s,onChange:e=>o(e.target.value)})})]}),(0,Ae.jsx)("div",{className:"col-md-3 mt-2",children:(0,Ae.jsxs)("div",{className:"fileBx",children:[(0,Ae.jsx)("input",{type:"file",name:"uploadfile",id:"img",style:{display:"none"},accept:"image/*",onChange:e=>{const t=e.target.files[0];if(!t)return;if(t.size>921600)return al.error("File size exceeds the limit. Please choose a smaller file."),f(null),void g(null);f(t),g(URL.createObjectURL(t))}}),(0,Ae.jsx)("label",{htmlFor:"img",children:"Click me to upload image"})]})})]})]})}),(0,Ae.jsxs)("div",{className:"card border-0 mt-4",children:[(0,Ae.jsxs)("div",{className:"card card-body border-0 profileBx",children:[(0,Ae.jsxs)("div",{className:"item mb20",children:[(0,Ae.jsxs)(Ie,{className:"nameTag collapsed","data-bs-toggle":"collapse","data-bs-target":"#fullName",children:["Full Name"," ",(0,Ae.jsx)("i",{className:"fa fa-pencil-square-o",style:{cursor:"pointer"},title:"Edit"}),(0,Ae.jsx)("h5",{className:"mb5",children:E})]}),(0,Ae.jsx)("div",{className:"collapse",id:"fullName",children:(0,Ae.jsx)("input",{type:"text",className:"form-control",value:r,onChange:e=>i(e.target.value)})})]}),(0,Ae.jsxs)("div",{className:"item mb20",children:[(0,Ae.jsxs)(Ie,{className:"nameTag collapsed","data-bs-toggle":"collapse","data-bs-target":"#emailId",children:["Email ID",(0,Ae.jsx)("i",{className:"fa fa-pencil-square-o",style:{cursor:"pointer"},title:"Edit"}),(0,Ae.jsx)("h5",{className:"mb5",children:_})]}),(0,Ae.jsx)("div",{className:"collapse",id:"emailId",children:(0,Ae.jsx)("input",{type:"email",className:"form-control",value:l,onChange:e=>d(e.target.value)})})]}),(0,Ae.jsxs)("div",{className:"item mb20",children:[(0,Ae.jsxs)(Ie,{className:"nameTag collapsed","data-bs-toggle":"collapse","data-bs-target":"#phoneNumber",children:["Phone Number",(0,Ae.jsx)("i",{className:"fa fa-pencil-square-o",style:{cursor:"pointer"},title:"Edit"}),(0,Ae.jsx)("h5",{className:"mb5",children:y})]}),(0,Ae.jsx)("div",{className:"collapse",id:"phoneNumber",children:(0,Ae.jsx)("input",{type:"number",className:"form-control",value:u,onChange:e=>h(e.target.value)})})]}),(0,Ae.jsxs)("div",{className:"item mb20",children:[(0,Ae.jsxs)(Ie,{className:"nameTag collapsed","data-bs-toggle":"collapse","data-bs-target":"#address",children:["Address",(0,Ae.jsx)("i",{className:"fa fa-pencil-square-o",style:{cursor:"pointer"},title:"Edit"}),(0,Ae.jsx)("h5",{className:"mb5",children:T})]}),(0,Ae.jsx)("div",{className:"collapse",id:"address",children:(0,Ae.jsx)("input",{type:"text",className:"form-control",value:a,onChange:e=>c(e.target.value)})})]})]}),(0,Ae.jsx)("button",{className:"btn  mt-2",style:{background:"var(--theme-color)"},onClick:()=>{t(r||E,l||_,p||v,u||y,s||b,a||T)},children:"Update"})]})]}),(0,Ae.jsx)(Ho,{})]})})})]})},CO=e=>{let{peerUser:t}=e;const{isLogIn:n,getCallDetail:r}=Kr(),i=$();return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsxs)("div",{className:"card card-sm",children:[(0,Ae.jsx)("div",{className:"card-body p5",children:(0,Ae.jsxs)("div",{className:"",children:[(0,Ae.jsxs)("button",{onClick:()=>{return e="/message?peerUser=".concat(t),void(n?i(e):(al("please Login first"),setTimeout((()=>{i("/login?redirect=".concat(e.split("/")[1]))}),1e3)));var e},className:"btn btn-secondary btn-sm mb5 mt5",children:[(0,Ae.jsx)("i",{className:"fa fa-comments"})," Text Chat"]}),(0,Ae.jsxs)(Ie,{to:"/voice-call",className:"btn btn-success btn-sm  mb5 mt5 mx-1",children:[(0,Ae.jsx)("i",{className:"fa fa-phone"})," Voice Call"]}),(0,Ae.jsxs)("button",{className:"btn btn-danger btn-sm  mb5 mt5",onClick:()=>{r([t],"video")},children:[(0,Ae.jsx)("i",{className:"fa fa-video-camera"})," Video Call"]}),(0,Ae.jsxs)(Ie,{className:"btn btn-primary btn-sm  mb5 mt5 mx-1","data-bs-target":"#supplierModal","data-bs-toggle":"modal",children:[(0,Ae.jsx)("i",{className:"fa fa-user-o"})," Contact To Supplier"]})]})}),(0,Ae.jsx)("div",{className:"modal fade supplierModal",id:"supplierModal",tabIndex:-1,children:(0,Ae.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:(0,Ae.jsxs)("div",{className:"modal-content",children:[(0,Ae.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"}),(0,Ae.jsx)("div",{className:"modal-body",children:(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-8",children:[(0,Ae.jsxs)("h1",{className:"modal-title fs-6",children:[(0,Ae.jsx)("b",{children:"Get Latest Price"})," by adding Link few details of your requirement"]}),(0,Ae.jsx)("hr",{className:"mt-2"}),(0,Ae.jsx)("label",{children:(0,Ae.jsx)("b",{children:"Quantity"})}),(0,Ae.jsxs)("div",{className:"input-group mt-1 mb-4",style:{maxWidth:200},children:[(0,Ae.jsx)("input",{type:"number",className:"form-control"}),(0,Ae.jsx)("span",{className:"input-group-text bg-theme",id:"basic-addon2",style:{background:"var(--theme-color)"},children:"Pieces"})]}),(0,Ae.jsx)("label",{children:(0,Ae.jsx)("b",{children:"Requirement Details"})}),(0,Ae.jsx)("div",{className:"input-group mt-1 mb-4",style:{maxWidth:400},children:(0,Ae.jsx)("textarea",{className:"form-control",name:"",id:"",cols:30,rows:3,placeholder:"Additional Details About Your Requirement",defaultValue:""})}),(0,Ae.jsx)("button",{className:"btn btnTheme btn-sm",type:"button",style:{minWidth:150,background:"var(--theme-color)"},children:"Next"}),(0,Ae.jsx)("hr",{className:"mt-4"}),(0,Ae.jsxs)("div",{className:"mt-3",children:[(0,Ae.jsx)("h5",{children:"Your contact information"}),(0,Ae.jsxs)("h6",{children:[(0,Ae.jsx)("i",{className:"fa fa-user-o"})," ",(0,Ae.jsx)("b",{children:"Mr."})," Ramesh Singh"]}),(0,Ae.jsxs)("h6",{children:[(0,Ae.jsx)("i",{className:"fa fa-phone"})," ",(0,Ae.jsx)("b",{children:"+91"})," 1234567890 \xa0 | \xa0 ",(0,Ae.jsx)("i",{className:"fa fa-envelope-o"})," ","ramesh@gmail.com"]})]})]}),(0,Ae.jsxs)("div",{className:"col-md-4",children:[(0,Ae.jsx)("img",{src:"assets/images/iPhone-1.jpg",alt:"",style:{maxWidth:"100%"}}),(0,Ae.jsxs)("div",{className:"",children:[(0,Ae.jsx)("h5",{className:"fs-5",children:"Iphone 14 refurbished mobiles,bill and warranty available"}),(0,Ae.jsx)("h2",{children:"\u20ac799"}),(0,Ae.jsx)("h6",{children:"Highlights"}),(0,Ae.jsxs)("ul",{className:"text14",style:{marginLeft:"-10px"},children:[(0,Ae.jsx)("li",{children:"128 GB ROM"}),(0,Ae.jsx)("li",{children:"6.1 inch Super Retina XDR Display"}),(0,Ae.jsx)("li",{children:"12MP + 12MP"}),(0,Ae.jsx)("li",{children:"A15 Bionic Chip, 6 Core Processor Processor"})]})]})]})]})})]})})})]})})},RO=e=>{let{isOpen:t,onClose:n,onOpenModal:r}=e;const i=window.location.href,s=encodeURIComponent(document.title),o={facebook:"https://www.facebook.com/sharer/sharer.php?u=".concat(i),twitter:"https://twitter.com/intent/tweet?url=".concat(i),linkedin:"https://www.linkedin.com/sharing/share-offsite/?url=".concat(i,"&title=").concat(s),instagram:"https://www.instagram.com/share?url=".concat(i),whatsapp:"https://api.whatsapp.com/send?text=".concat(i)};return(0,Ae.jsxs)("div",{className:"modal ".concat(t?"show":""," "),tabIndex:"-1",role:"dialog",style:{display:t?"block":"none"},children:[(0,Ae.jsx)("div",{className:"modal-dialog",role:"document",children:(0,Ae.jsxs)("div",{className:"modal-content",children:[(0,Ae.jsxs)("div",{className:"modal-header",children:[(0,Ae.jsx)("h5",{className:"modal-title",children:"Share Link"}),(0,Ae.jsx)("button",{type:"button",className:"close",onClick:n,"aria-label":"Close",children:(0,Ae.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,Ae.jsxs)("div",{className:"modal-body",children:[(0,Ae.jsx)("p",{children:"Share this link:"}),(0,Ae.jsx)("input",{type:"text",className:"form-control mb-2",value:window.location.href,readOnly:!0}),(0,Ae.jsx)("p",{children:"Share on:"}),(0,Ae.jsxs)("div",{className:"social-icons",children:[(0,Ae.jsx)("a",{href:o.facebook,target:"_blank",rel:"noopener noreferrer",children:(0,Ae.jsx)(aO,{className:"mr-2"})}),(0,Ae.jsx)("a",{href:o.twitter,target:"_blank",rel:"noopener noreferrer",children:(0,Ae.jsx)(dO,{className:"mr-2"})}),(0,Ae.jsx)("a",{href:o.linkedin,target:"_blank",rel:"noopener noreferrer",children:(0,Ae.jsx)(lO,{className:"mr-2"})}),(0,Ae.jsx)("a",{href:o.instagram,target:"_blank",rel:"noopener noreferrer",children:(0,Ae.jsx)(cO,{className:"mr-2"})}),(0,Ae.jsx)("a",{href:o.whatsapp,target:"_blank",rel:"noopener noreferrer",children:(0,Ae.jsx)(uO,{})})]})]}),(0,Ae.jsx)("div",{className:"modal-footer",children:(0,Ae.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{navigator.clipboard.writeText(i).then((()=>{})).catch((e=>{console.error("Failed to copy link to clipboard:",e)}))},children:"Copy Link"})})]})}),(0,Ae.jsx)("div",{className:"share-icon",onClick:r,children:(0,Ae.jsx)(gO,{})})]})},IO=e=>{let{initialDetail:t}=e;const{id:r}=te(),{getGoodsProductDetails:i,goodsItems:s,setGoodsItems:o,wishListAdd:a,wishListRemove:c,BidAdd:l,getReletedProduct:d,reletedList:u,cartListAdd:h,userData:p}=Kr(),[f,m]=(0,n.useState)(!1),[g,_]=(0,n.useState)(!1),[v,y]=(0,n.useState)("--:--:--"),[E,b]=(0,n.useState)("--:--:--"),[T,S]=(0,n.useState)(!1),[w,C]=(0,n.useState)(""),[R,I]=(0,n.useState)(1),[N,O]=(0,n.useState)(""),[A,k]=(0,n.useState)(null),{description:x,image_1:P,image_2:D,image_3:L,photo:M,product_id:j,title:U,attribute_values:F,bid_now:B,bid_start_price:V,bid_increament_value:G,bid_entry:H,bid_start_date:W,bid_end_date:z,isWishlist:q,category_id:K,category_name:Y,category_slug:J,sub_category_id:X,userId:Z}=s.data||{};(0,n.useEffect)((()=>{void 0!==q&&m(q)}),[q]);(0,n.useEffect)((()=>{!t&&r&&(async()=>{await i(r)})(),t&&t.data&&t.data._id&&o(t)}),[r,t]),(0,n.useEffect)((()=>{const e=_S(uS(JN,"bet_entry/"+r),(e=>{k(e.val())}));return()=>{e()}}),[r]);const Q=H||(null===A||void 0===A?void 0:A.bet_entry)||0+G||0,$=e=>{O(e>=Q?(0,Ae.jsx)("button",{className:"btn btn-link",children:"Amount is valid. (".concat(e,")")}):(0,Ae.jsx)("button",{className:"btn btn-link",children:"Bid must be at least ".concat(Q)}))};(0,n.useEffect)((()=>{const e=new Date(W).getTime(),t=setInterval((()=>{const n=(new Date).getTime(),r=e-n;if(r<=0)clearInterval(t),b("Bid_Start");else{const e=Math.floor(r/36e5),t=Math.floor(r%36e5/6e4),n=Math.floor(r%6e4/1e3),i="".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"));b(i)}}),1e3);return()=>clearInterval(t)}),[W]),(0,n.useEffect)((()=>{const e=new Date(z).getTime(),t=setInterval((()=>{const n=(new Date).getTime(),r=e-n;if(r<=0)clearInterval(t),y("Time's up!"),S(!0);else{S(!1);const e=Math.floor(r/36e5),t=Math.floor(r%36e5/6e4),n=Math.floor(r%6e4/1e3),i="".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"));y(i)}}),1e3);return()=>clearInterval(t)}),[v]);const ee=[M,P,D,L],ne=e=>{if(!Array.isArray(F))return null;const t=F.find((t=>t.attribute===e));return t?t.value:null},re=ne("Price"),ie=ne("Brand");return(0,n.useEffect)((()=>{j&&K&&d(K,X,j)}),[j,K,X]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsx)("aside",{className:"row",children:(0,Ae.jsx)("div",{className:"col-md-12",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/".concat(J,"?category_id=").concat(K),children:Y})}),(0,Ae.jsxs)("li",{className:"active",children:[" Detail Page Of ",U]})]})})})})}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),s.isLoad&&(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!s.isLoad&&(0,Ae.jsxs)("div",{className:"col-md-10",children:[(0,Ae.jsx)("div",{className:"card",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-5",children:(0,Ae.jsx)("div",{className:"swiper mainBannerSwiper",children:(0,Ae.jsx)(dc,{loop:!0,navigation:!0,modules:[hc],className:"mySwiper",children:Array.isArray(ee)&&ee.map(((e,t)=>(0,Ae.jsx)(uc,{children:(0,Ae.jsx)(Ie,{className:"swiper-slide",children:(0,Ae.jsx)("img",{src:e,alt:"",loading:"lazy"})})},t)))})})}),(0,Ae.jsxs)("div",{className:"col-md-7",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-10 col-sm-12",children:[(0,Ae.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Ae.jsx)("h2",{children:ie||""})}),(0,Ae.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Ae.jsx)("div",{children:(0,Ae.jsx)("h4",{className:"text-muted",children:U})})})]}),(0,Ae.jsxs)("div",{className:"col-md-2 col-sm-12",align:"right",children:[(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>{_(!0)},children:(0,Ae.jsx)("i",{className:"fa fa-share-alt text20"})}),(0,Ae.jsx)(RO,{isOpen:g,onClose:()=>{_(!1)}}),p._id===Z?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{f?(c(e),m(!1)):(a(e),m(!0))})(j),children:(0,Ae.jsx)("i",{className:!0===f?"fa fa-heart text-danger":"fa fa-heart-o"})})]})]}),(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-5 col-sm-12",children:[(0,Ae.jsx)("h5",{className:"text-success",children:"Special price"}),(0,Ae.jsx)("h5",{children:(0,Ae.jsxs)("span",{className:"text28",children:[(0,Ae.jsx)("i",{className:"fa fa-inr",children:" "})," ",B?V:re||"Not Disclosed"]})})]}),p._id===Z?"":(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(CO,{peerUser:Z}),B&&(0,Ae.jsx)(Ae.Fragment,{children:"Bid_Start"===E?(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsxs)("ul",{children:[(0,Ae.jsx)("li",{children:(0,Ae.jsxs)("span",{children:[" ",(0,Ae.jsxs)("h5",{children:["Bid Start Price : ",V||0]})]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)("span",{children:[" ",(0,Ae.jsxs)("h5",{children:["Highest Bid Price : ",(null===A||void 0===A?void 0:A.bet_entry)||0]})]})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)("span",{children:(0,Ae.jsxs)("h5",{children:["Bid Ending In(HH:MM:SS) :"," ",(0,Ae.jsxs)("span",{className:"text text-success",children:[" ",v]})]})})})]}),(0,Ae.jsx)("label",{htmlFor:"bid",children:(0,Ae.jsx)("h5",{children:"Bid Your Amount"})}),(0,Ae.jsxs)("div",{className:"d-flex justify-content-center item-center",children:[(0,Ae.jsxs)("span",{className:"w-50",children:[(0,Ae.jsx)("input",{type:"number",id:"bid",style:{width:"150px"},className:"pb-2",value:w,onChange:e=>{const t=parseFloat(e.target.value);C(t),$(t)}}),(0,Ae.jsx)("br",{}),(0,Ae.jsxs)("span",{children:["Suggestion : ",H||(null===A||void 0===A?void 0:A.bet_entry)||0+G]}),(0,Ae.jsx)("br",{}),(0,Ae.jsxs)("span",{className:"text text-success",children:["Increment in multipule of : ",G]})]}),(0,Ae.jsx)("button",{disabled:T,className:"btn ".concat(T?"btn-dark":"btn-success"),style:{width:"50%",height:"40px"},onClick:async e=>{e.preventDefault();try{if(w>=Q)if(w<=100*Q){const e=await l(parseFloat(w),j);200===(null===e||void 0===e?void 0:e.status)?(await pS(uS(JN,"bet_entry/"+r),{bet_entry:w}),await i(r),C("")):al.warning("Entered value must be equal to or greater than ".concat(Q))}else al.warning("Entered value must be at most 100 times ".concat(100*Q));else al.warning("Entered value must be equal to or greater than ".concat(Q))}catch(pv){console.log("Error",pv)}},children:"Bid"})]}),(0,Ae.jsx)("hr",{})]}):(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("span",{children:(0,Ae.jsxs)("h5",{children:["Bid start In (HH:MM:SS):"," ",(0,Ae.jsxs)("span",{className:"text text-success",children:[" ",E]})]})})})})]})]})]})]}),B?"":(0,Ae.jsx)("div",{className:"col-md-7 d-flex gap-5 align-items-center ",children:(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-5",children:(0,Ae.jsxs)("div",{className:"input-group",children:[(0,Ae.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{R>1&&I(R-1)},children:"-"}),(0,Ae.jsx)("input",{type:"number",className:"form-control",value:R,readOnly:!0}),(0,Ae.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{I(R+1)},children:"+"})]})}),(0,Ae.jsx)("div",{className:"col-md-5",children:(0,Ae.jsx)("button",{className:"btn btn-primary text-white",onClick:()=>{re?h(j,R,+re):al.warning("Price is not defined")},children:"Add To Cart"})})]})}),(0,Ae.jsx)("h5",{className:"mt30",children:"Product Description"}),(0,Ae.jsx)("p",{children:x}),(0,Ae.jsx)("hr",{}),Array.isArray(F)&&F.map((e=>(0,Ae.jsxs)("p",{children:[(0,Ae.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]})}),(0,Ae.jsx)("h4",{className:"mt20",children:"Related Products"}),(0,Ae.jsx)("hr",{className:"mt0"}),(0,Ae.jsx)("div",{className:"swiper productSlider",children:(0,Ae.jsx)(dc,{loop:!0,slidesPerView:5,spaceBetween:20,keyboard:{enabled:!0},autoplay:{delay:3e3},breakpoints:{320:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:3,spaceBetween:15},768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:5,spaceBetween:15}},navigation:!0,modules:[hc],className:"mySwiper",children:u.map((e=>(0,Ae.jsx)(uc,{children:(0,Ae.jsx)("div",{className:"swiper-slide proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",children:[(0,Ae.jsx)("div",{className:"imgBx",children:(0,Ae.jsx)(Ie,{to:"/product/related-product/".concat(e._id),children:(0,Ae.jsx)("img",{src:e.image,className:"card-img-top",alt:""})})}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h4",{className:"card-title",children:(0,Ae.jsx)(Ie,{children:e.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})})},e._id)))})})]}),(0,Ae.jsx)(Ho,{})]})})})]})};const NO=function(){const e=$(),{isLogIn:t,loading:n}=Kr();return!0===n?(0,Ae.jsx)("div",{className:"d-flex align-items-center justify-content-center vh-100",children:(0,Ae.jsx)(Jr,{animation:"border",role:"status",variant:"info",children:(0,Ae.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):t?(0,Ae.jsx)(me,{}):(e("/login"),(0,Ae.jsx)(EO,{}))},OO=e=>{let{item:t}=e;const{wishListAdd:r,wishListRemove:i,userData:s}=Kr(),[o,a]=(0,n.useState)(t.isWishlist);return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"card mb-3 realestateItem",children:(0,Ae.jsxs)("div",{className:"row g-0",children:[(0,Ae.jsx)("div",{className:"col-md-4",children:(0,Ae.jsx)(Ie,{to:"/realstate-detail/".concat(t._id),children:(0,Ae.jsx)("img",{src:t.photo,className:"img-fluid rounded-start allImg",style:{height:"220px"},alt:"...",width:400})})}),(0,Ae.jsx)("div",{className:"col-md-8",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:(0,Ae.jsx)(Ie,{to:"/realstate-detail/".concat(t._id),children:t.title})}),(0,Ae.jsx)("div",{className:"row",children:s._id===t.userId?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{o?i(e):r(e),a(!o)})(t.product_id),children:(0,Ae.jsx)("i",{className:"fa ".concat(o?"fa-heart text-danger":"fa-heart-o")})})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description}),(0,Ae.jsx)(Ie,{className:"btn btnTheme",style:{background:"var(--theme-color)"},to:"/realstate-detail/".concat(t._id),children:"View Property >>"})]})})]},t._id)})})},AO=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Ae.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Ae.jsx)(Ie,{className:"navbar-brand",to:"#sideBarCollapse",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Ae.jsx)("i",{className:"navbar-toggler",children:(0,Ae.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Ae.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Ae.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("div",{className:"headBx",children:e.attribute}),(0,Ae.jsx)("div",{className:"listBx",children:(0,Ae.jsxs)("select",{name:"status",className:"form-control",title:"Status",onChange:n=>{t(n,e.attribute)},children:[(0,Ae.jsx)("option",{value:"any",children:"Any"}),Array.isArray(n)&&n.map((e=>(0,Ae.jsx)("option",{value:e.value,children:e.value},e._id)))]})})]},e._id)}))})})]})})},kO=()=>{const{property:e,getAttributeFilterList:t,totalItem:r,getProperty:i,listLoading:s}=Kr(),[o,a]=(0,n.useState)(1),c=Math.ceil((null===r||void 0===r?void 0:r.RealEstate)/12),l=Z(),d=new URLSearchParams(l.search),u=d.get("sub_category"),h=d.get("category_id"),p=d.get("search"),[f,m]=(0,n.useState)([]),g={keyword_search:p,page:o,limit:12};(0,n.useEffect)((()=>{(async()=>{u?await i(g,u,f):await i(g,"",f)})()}),[p,o,u,f]),(0,n.useEffect)((()=>{(async()=>{u&&await t({sub:u}),h&&await t({main:h})})()}),[p,u,h]);return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(cl,{title:"Real Estate List Page",param:"Real Estate"}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-2",children:(0,Ae.jsx)(AO,{onFilter:(e,t,n)=>{const r=n||e.target.value||"",i=e.target.checked;if(console.log(r),"any"===r){const e=f.filter((e=>e.attribute!==t));m(e)}else(i||r)&&m([...f,{attribute:t,value:r}])}})}),(0,Ae.jsxs)("div",{className:"col-md-8",children:[s.RealEstate?Array.from({length:3}).map(((e,t)=>(0,Ae.jsx)(uh,{},t))):0===e.length?(0,Ae.jsx)(hh,{des:"Please check the spelling or try searching for something else. Thank you!."}):e.map(((e,t)=>(0,Ae.jsx)(OO,{item:e},t))),(0,Ae.jsx)("div",{align:"center",children:(0,Ae.jsx)(ch,{spacing:2,children:(0,Ae.jsx)(Fu,{count:c,page:o,onChange:(e,t)=>a(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Ae.jsx)(Ho,{})]})})})]})},xO=e=>{let{img:t}=e;const[r,i]=(0,n.useState)(0);return(0,Ae.jsxs)("div",{id:"fashionGalleryCarousel",className:"carousel slide","data-bs-ride":"carousel",children:[(0,Ae.jsx)("div",{className:"carousel-inner",children:Array.isArray(t)&&t.map(((e,t)=>(0,Ae.jsx)("div",{className:"carousel-item ".concat(t===r?"active":""),children:(0,Ae.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{maxHeight:"600px",maxWidth:"600px",overflow:"hidden",margin:"auto"},children:(0,Ae.jsx)("img",{src:e,height:"600",width:"600",style:{objectFit:"cover"},alt:"Slide ".concat(t)})})},t)))}),(0,Ae.jsxs)("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#fashionGalleryCarousel","data-bs-slide":"prev",children:[(0,Ae.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),(0,Ae.jsx)("span",{className:"visually-hidden",children:"Previous"})]}),(0,Ae.jsxs)("button",{className:"carousel-control-next",type:"button","data-bs-target":"#fashionGalleryCarousel","data-bs-slide":"next",children:[(0,Ae.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),(0,Ae.jsx)("span",{className:"visually-hidden",children:"Next"})]}),(0,Ae.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Array.isArray(t)&&t.map(((e,t)=>(0,Ae.jsx)("div",{className:"mx-1",onClick:()=>(e=>{i(e)})(t),style:{cursor:"pointer"},children:(0,Ae.jsx)("img",{src:e,height:"100",width:"100",style:{objectFit:"cover",border:r===t?"2px solid gray":"1px solid gray"},alt:"Thumbnail ".concat(t)})},t)))})]})},PO=e=>{let{initialDetail:t}=e;const{id:r}=te(),{getPropertyDetail:i,propertyDetail:s,setPropertyDetail:o,wishListAdd:a,wishListRemove:c,reletedList:l,getReletedProduct:d,userData:u}=Kr(),[h,p]=(0,n.useState)(!1),[f,m]=(0,n.useState)(!1);(0,n.useEffect)((()=>{!t&&r&&(async()=>{await i(r)})(),t&&t.data&&t.data._id&&o(t)}),[r,t]);const{description:g,image_1:_,image_2:v,image_3:y,photo:E,title:b,product_id:T,attribute_values:S,isWishlist:w,category_id:C,category_name:R,category_slug:I,sub_category_id:N,userId:O}=s.data||{},A=[E,_,v,y];(0,n.useEffect)((()=>{void 0!==w&&p(w)}),[w]);return(0,n.useEffect)((()=>{T&&C&&d(C,N,T)}),[T,C,N]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsx)("aside",{className:"row",children:(0,Ae.jsx)("div",{className:"col-md-12",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/".concat(I,"?category_id=").concat(C),children:R})}),(0,Ae.jsxs)("li",{className:"active",children:[" Detail Page Of ",b]})]})})})})}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),s.isLoad&&(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!s.isLoad&&(0,Ae.jsxs)("div",{className:"col-md-10",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-8",children:(0,Ae.jsx)("div",{className:"card",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"mb20",children:b}),(0,Ae.jsx)(xO,{img:A})]})})}),(0,Ae.jsxs)("div",{className:"col-md-4",children:[(0,Ae.jsx)("div",{className:"card card-sm mb15",children:(0,Ae.jsx)("div",{className:"card-body p5",children:(0,Ae.jsxs)("ul",{className:"list-group list-group-horizontal list-inline",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)("b",{children:"Share"})}),(0,Ae.jsx)("li",{children:"\xa0\xa0\xa0\xa0"}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)("div",{className:"iconWish",children:[(0,Ae.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{m(!0)}}),(0,Ae.jsx)(RO,{isOpen:f,onClose:()=>{m(!1)}})]})}),(0,Ae.jsx)("li",{children:"\xa0\xa0\xa0\xa0"}),(0,Ae.jsx)("li",{children:u._id===O?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{h?(c(e),p(!1)):(a(e),p(!0))})(T),children:(0,Ae.jsx)("i",{className:!0===h?"fa fa-heart text-danger":"fa fa-heart-o"})})})]})})}),(0,Ae.jsx)("div",{className:"card card-sm mb15",children:(0,Ae.jsxs)("div",{className:"card-body p5",children:[(0,Ae.jsxs)("h5",{className:"mb0 text16 theme-text",children:[(0,Ae.jsx)("i",{className:"fa fa-calendar"})," ",(0,Ae.jsx)("b",{children:"Posted On"})," 05 Nov 2023"]}),(0,Ae.jsxs)("p",{className:"text-muted mb5",children:[(0,Ae.jsx)("b",{children:"Location :"})," Berliner Festspiele, Germany"]}),(0,Ae.jsx)("div",{children:(0,Ae.jsx)("iframe",{title:b,allowFullScreen:!0,height:"350",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d19429.71981350022!2d13.274301454071658!3d52.50239880695637!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47a850f9c36ee8a5%3A0xe2db0292ab5e1528!2sBerliner%20Festspiele!5e0!3m2!1sen!2sin!4v1699431152474!5m2!1sen!2sin",style:{border:"0"},width:"100%"})})]})}),(0,Ae.jsx)("div",{className:"card card-sm",children:u._id===O?"":(0,Ae.jsx)(CO,{})})]})]}),(0,Ae.jsx)("div",{className:"col-md-12 mt10",children:(0,Ae.jsx)("div",{className:"card",children:(0,Ae.jsx)("div",{className:"card-body",children:(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-4",children:(0,Ae.jsx)("div",{className:"property-attributes",children:(0,Ae.jsxs)("div",{className:"attr-list",children:[(0,Ae.jsx)("h4",{children:"Property Specification"}),(0,Ae.jsx)("table",{className:"table table-bordered table-striped",children:(0,Ae.jsx)("tbody",{children:Array.isArray(S)&&S.map((e=>e.value&&(0,Ae.jsxs)("tr",{children:[(0,Ae.jsx)("td",{children:(0,Ae.jsx)("strong",{children:e.attribute})}),(0,Ae.jsx)("td",{children:e.value})]},e._id)))})})]})})}),(0,Ae.jsx)("div",{className:"col-md-8",children:(0,Ae.jsxs)("div",{className:"property-description",children:[(0,Ae.jsx)("h4",{children:b}),(0,Ae.jsxs)("div",{className:"mt25",children:[(0,Ae.jsx)("h5",{children:"Property Description :"}),(0,Ae.jsxs)("p",{children:[g," "]})]})]})})]})})})}),(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-12",children:[(0,Ae.jsx)("h5",{className:"mt-3",children:"Related Field"}),(0,Ae.jsx)("hr",{className:"mt0"})]}),Array.isArray(l)&&l.map((e=>(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("div",{className:"card mb-3",style:{maxWidth:540},children:(0,Ae.jsxs)("div",{className:"row g-0",children:[(0,Ae.jsx)(Ie,{to:"/product/related-product/".concat(e._id),className:"col-md-4",children:(0,Ae.jsx)("img",{src:e.image,className:"img-fluid rounded-start",style:{height:"180px"},alt:"..."})}),(0,Ae.jsx)("div",{className:"col-md-8",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:e.title}),(0,Ae.jsx)("p",{className:"mt10",style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})})]})})},e._id)))]})]}),(0,Ae.jsx)(Ho,{})]})})})]})},DO=()=>{const{RegisterUser:e}=Kr(),[t,r]=(0,n.useState)(""),[i,s]=(0,n.useState)(""),[o,a]=(0,n.useState)(""),[c,l]=(0,n.useState)(""),[d,u]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),f=$();return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{className:"box-form",children:[(0,Ae.jsx)("div",{className:"left",style:{background:"url(./assets/images/login-bg.jpg) center bottom"},children:(0,Ae.jsxs)("div",{className:"overlay",children:[(0,Ae.jsx)("h1",{children:"Success starts here"}),(0,Ae.jsxs)("ul",{children:[(0,Ae.jsx)("li",{children:"Over 600 categories"}),(0,Ae.jsx)("li",{children:"Pay per project, not per hour"}),(0,Ae.jsx)("li",{children:"Access to talent and businesses across the globe"})]})]})}),(0,Ae.jsxs)("div",{className:"right",children:[(0,Ae.jsx)("p",{className:"mb5",children:(0,Ae.jsxs)(Ie,{className:"text-muted",to:"/login",children:[(0,Ae.jsx)("i",{className:"fa fa-long-arrow-left"})," Back"]})}),(0,Ae.jsx)("h3",{children:"Sign up with Dzital"}),(0,Ae.jsx)("div",{className:"formBx",children:(0,Ae.jsxs)("form",{className:"px-md-1 mt30",children:[(0,Ae.jsxs)("div",{className:"form-outline mb-4",children:[(0,Ae.jsxs)("label",{htmlFor:"",children:[(0,Ae.jsx)("b",{children:"Name"})," ",(0,Ae.jsx)("span",{className:"text text-danger",children:"*"})]}),(0,Ae.jsx)("input",{type:"text",value:c,onChange:e=>l(e.target.value),className:"form-control"})]}),(0,Ae.jsxs)("div",{className:"form-outline mb-3",children:[(0,Ae.jsxs)("label",{htmlFor:"",children:[(0,Ae.jsx)("b",{children:"Email"})," ",(0,Ae.jsx)("span",{className:"text text-danger",children:"*"})]}),(0,Ae.jsx)("input",{type:"email",value:t,onChange:e=>r(e.target.value),className:"form-control",required:!0})]}),(0,Ae.jsxs)("div",{className:"form-outline mb-4",children:[(0,Ae.jsxs)("label",{htmlFor:"",children:[(0,Ae.jsx)("b",{children:"Password"})," ",(0,Ae.jsx)("span",{className:"text text-danger",children:"*"})]}),(0,Ae.jsxs)("div",{className:"input-group mb-3",children:[(0,Ae.jsx)("input",{type:d?"text":"password",value:i,onChange:e=>s(e.target.value),className:"form-control",placeholder:"Password","aria-describedby":"password-toggle",required:!0}),(0,Ae.jsx)("span",{className:"input-group-text",id:"password-toggle",onClick:()=>{u(!d)},children:d?(0,Ae.jsx)(yO,{}):(0,Ae.jsx)(hO,{})})]})]}),(0,Ae.jsxs)("div",{className:"form-outline mb-4",children:[(0,Ae.jsxs)("label",{htmlFor:"",children:[(0,Ae.jsx)("b",{children:"Confirm Password"})," ",(0,Ae.jsx)("span",{className:"text text-danger",children:"*"})]}),(0,Ae.jsxs)("div",{className:"input-group mb-3",children:[(0,Ae.jsx)("input",{type:h?"text":"password",value:o,onChange:e=>a(e.target.value),className:"form-control",placeholder:"Confirm Password","aria-describedby":"password-toggle",required:!0}),(0,Ae.jsx)("span",{className:"input-group-text",id:"password-toggle",onClick:()=>{p(!h)},children:h?(0,Ae.jsx)(yO,{}):(0,Ae.jsx)(hO,{})})]})]}),(0,Ae.jsxs)("div",{className:"row mb-2 ",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("button",{type:"button",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:n=>{n.preventDefault();t&&i&&o&&c?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?i.length<8||!/^(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,}$/.test(i)?al.info("Password must be at least 8 characters long and contain a special character"):i!==!o?(e(c,t,i),f("/login"),r(""),s(""),a(""),l(""),al.success("Successfully registered!")):al.info("password did not match with confirm password"):al.info("Please input a valid Email"):al.info("Please fill in all required fields")},children:"Continue"})}),(0,Ae.jsxs)("p",{className:"text text-center mt20",children:["Already Have An Account ? ",(0,Ae.jsx)(Ie,{to:"/login",children:" LogIn"})," "]})]})]})}),(0,Ae.jsx)("p",{className:"text14 text-muted",children:"By joining, you agree to the Dzital Terms of Service and to occasionally receive emails from us. Please read our Privacy Policy to learn how we use your personal data."})]})]})}),(0,Ae.jsx)(Ho,{})]})})})})},LO={type:jn().string,tooltip:jn().bool,as:jn().elementType},MO=n.forwardRef(((e,t)=>{let{as:n="div",className:r,type:i="valid",tooltip:s=!1,...o}=e;return(0,Ae.jsx)(n,{...o,ref:t,className:Pe()(r,"".concat(i,"-").concat(s?"tooltip":"feedback"))})}));MO.displayName="Feedback",MO.propTypes=LO;const jO=MO,UO=n.createContext({}),FO=n.forwardRef(((e,t)=>{let{id:r,bsPrefix:i,className:s,type:o="checkbox",isValid:a=!1,isInvalid:c=!1,as:l="input",...d}=e;const{controlId:u}=(0,n.useContext)(UO);return i=Je(i,"form-check-input"),(0,Ae.jsx)(l,{...d,ref:t,type:o,id:r||u,className:Pe()(s,i,a&&"is-valid",c&&"is-invalid")})}));FO.displayName="FormCheckInput";const BO=FO,VO=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:i,htmlFor:s,...o}=e;const{controlId:a}=(0,n.useContext)(UO);return r=Je(r,"form-check-label"),(0,Ae.jsx)("label",{...o,ref:t,htmlFor:s||a,className:Pe()(i,r)})}));VO.displayName="FormCheckLabel";const GO=VO;const HO=n.forwardRef(((e,t)=>{let{id:r,bsPrefix:i,bsSwitchPrefix:s,inline:o=!1,reverse:a=!1,disabled:c=!1,isValid:l=!1,isInvalid:d=!1,feedbackTooltip:u=!1,feedback:h,feedbackType:p,className:f,style:m,title:g="",type:_="checkbox",label:v,children:y,as:E="input",...b}=e;i=Je(i,"form-check"),s=Je(s,"form-switch");const{controlId:T}=(0,n.useContext)(UO),S=(0,n.useMemo)((()=>({controlId:r||T})),[T,r]),w=!y&&null!=v&&!1!==v||function(e,t){return n.Children.toArray(e).some((e=>n.isValidElement(e)&&e.type===t))}(y,GO),C=(0,Ae.jsx)(BO,{...b,type:"switch"===_?"checkbox":_,ref:t,isValid:l,isInvalid:d,disabled:c,as:E});return(0,Ae.jsx)(UO.Provider,{value:S,children:(0,Ae.jsx)("div",{style:m,className:Pe()(f,w&&i,o&&"".concat(i,"-inline"),a&&"".concat(i,"-reverse"),"switch"===_&&s),children:y||(0,Ae.jsxs)(Ae.Fragment,{children:[C,w&&(0,Ae.jsx)(GO,{title:g,children:v}),h&&(0,Ae.jsx)(jO,{type:p,tooltip:u,children:h})]})})})}));HO.displayName="FormCheck";const WO=Object.assign(HO,{Input:BO,Label:GO}),zO=n.forwardRef(((e,t)=>{let{bsPrefix:r,type:i,size:s,htmlSize:o,id:a,className:c,isValid:l=!1,isInvalid:d=!1,plaintext:u,readOnly:h,as:p="input",...f}=e;const{controlId:m}=(0,n.useContext)(UO);return r=Je(r,"form-control"),(0,Ae.jsx)(p,{...f,type:i,size:o,ref:t,readOnly:h,id:a||m,className:Pe()(c,u?"".concat(r,"-plaintext"):r,s&&"".concat(r,"-").concat(s),"color"===i&&"".concat(r,"-color"),l&&"is-valid",d&&"is-invalid")})}));zO.displayName="FormControl";const qO=Object.assign(zO,{Feedback:jO}),KO=n.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Je(r,"form-floating"),(0,Ae.jsx)(i,{ref:t,className:Pe()(n,r),...s})}));KO.displayName="FormFloating";const YO=KO,JO=n.forwardRef(((e,t)=>{let{controlId:r,as:i="div",...s}=e;const o=(0,n.useMemo)((()=>({controlId:r})),[r]);return(0,Ae.jsx)(UO.Provider,{value:o,children:(0,Ae.jsx)(i,{...s,ref:t})})}));JO.displayName="FormGroup";const XO=JO;function ZO(e){let{as:t,bsPrefix:r,className:i,...s}=e;r=Je(r,"col");const o=function(){const{breakpoints:e}=(0,n.useContext)(qe);return e}(),a=function(){const{minBreakpoint:e}=(0,n.useContext)(qe);return e}(),c=[],l=[];return o.forEach((e=>{const t=s[e];let n,i,o;delete s[e],"object"===typeof t&&null!=t?({span:n,offset:i,order:o}=t):n=t;const d=e!==a?"-".concat(e):"";n&&c.push(!0===n?"".concat(r).concat(d):"".concat(r).concat(d,"-").concat(n)),null!=o&&l.push("order".concat(d,"-").concat(o)),null!=i&&l.push("offset".concat(d,"-").concat(i))})),[{...s,className:Pe()(i,...c,...l)},{as:t,bsPrefix:r,spans:c}]}const QO=n.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:o}]=ZO(e);return(0,Ae.jsx)(i,{...r,ref:t,className:Pe()(n,!o.length&&s)})}));QO.displayName="Col";const $O=QO,eA=n.forwardRef(((e,t)=>{let{as:r="label",bsPrefix:i,column:s=!1,visuallyHidden:o=!1,className:a,htmlFor:c,...l}=e;const{controlId:d}=(0,n.useContext)(UO);i=Je(i,"form-label");let u="col-form-label";"string"===typeof s&&(u="".concat(u," ").concat(u,"-").concat(s));const h=Pe()(a,i,o&&"visually-hidden",s&&u);return c=c||d,s?(0,Ae.jsx)($O,{ref:t,as:"label",className:h,htmlFor:c,...l}):(0,Ae.jsx)(r,{ref:t,className:h,htmlFor:c,...l})}));eA.displayName="FormLabel";const tA=eA,nA=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:i,id:s,...o}=e;const{controlId:a}=(0,n.useContext)(UO);return r=Je(r,"form-range"),(0,Ae.jsx)("input",{...o,type:"range",ref:t,className:Pe()(i,r),id:s||a})}));nA.displayName="FormRange";const rA=nA,iA=n.forwardRef(((e,t)=>{let{bsPrefix:r,size:i,htmlSize:s,className:o,isValid:a=!1,isInvalid:c=!1,id:l,...d}=e;const{controlId:u}=(0,n.useContext)(UO);return r=Je(r,"form-select"),(0,Ae.jsx)("select",{...d,size:s,ref:t,className:Pe()(o,r,i&&"".concat(r,"-").concat(i),a&&"is-valid",c&&"is-invalid"),id:l||u})}));iA.displayName="FormSelect";const sA=iA,oA=n.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="small",muted:s,...o}=e;return n=Je(n,"form-text"),(0,Ae.jsx)(i,{...o,ref:t,className:Pe()(r,n,s&&"text-muted")})}));oA.displayName="FormText";const aA=oA,cA=n.forwardRef(((e,t)=>(0,Ae.jsx)(WO,{...e,ref:t,type:"switch"})));cA.displayName="Switch";const lA=Object.assign(cA,{Input:WO.Input,Label:WO.Label}),dA=n.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:i,controlId:s,label:o,...a}=e;return n=Je(n,"form-floating"),(0,Ae.jsxs)(XO,{ref:t,className:Pe()(r,n),controlId:s,...a,children:[i,(0,Ae.jsx)("label",{htmlFor:s,children:o})]})}));dA.displayName="FloatingLabel";const uA=dA,hA={_ref:jn().any,validated:jn().bool,as:jn().elementType},pA=n.forwardRef(((e,t)=>{let{className:n,validated:r,as:i="form",...s}=e;return(0,Ae.jsx)(i,{...s,ref:t,className:Pe()(n,r&&"was-validated")})}));pA.displayName="Form",pA.propTypes=hA;const fA=Object.assign(pA,{Group:XO,Control:qO,Floating:YO,Check:WO,Switch:lA,Label:tA,Text:aA,Range:rA,Select:sA,FloatingLabel:uA}),mA=()=>{const{UserUpdate:e,userData:t}=Kr(),[r,i]=(0,n.useState)(t?t.email:""),[s,o]=(0,n.useState)(t?t.gender:""),[a,c]=(0,n.useState)(t?t.image:""),[l,d]=(0,n.useState)(t?t.mobile:""),[u,h]=(0,n.useState)(t?t.name:"");console.log(t);return(0,n.useEffect)((()=>{t&&(i(t.email),o(t.gender),c(t.image),d(t.mobile),h(t.name))}),[t]),(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{className:"box-form",children:[(0,Ae.jsx)("div",{className:"left",style:{background:"url(./assets/images/login-bg.jpg) center bottom"},children:(0,Ae.jsxs)("div",{className:"overlay",children:[(0,Ae.jsx)("h1",{children:"Success starts here"}),(0,Ae.jsxs)("ul",{children:[(0,Ae.jsx)("li",{children:"Over 600 categories"}),(0,Ae.jsx)("li",{children:"Pay per project, not per hour"}),(0,Ae.jsx)("li",{children:"Access to talent and businesses across the globe"})]})]})}),(0,Ae.jsxs)("div",{className:"right",children:[(0,Ae.jsx)("p",{className:"mb5",children:(0,Ae.jsxs)(Ie,{className:"text-muted",to:"/account",children:[(0,Ae.jsx)("i",{className:"fa fa-long-arrow-left"})," Back"]})}),(0,Ae.jsx)("h3",{children:"Update Your Profile"}),(0,Ae.jsxs)("div",{className:"formBx",children:[(0,Ae.jsxs)("form",{className:"px-md-1 mt30",children:[(0,Ae.jsxs)("div",{className:"form-outline mb-3",children:[(0,Ae.jsx)("b",{children:"Profile"}),(0,Ae.jsxs)("label",{className:"btn btn-outline-secondary col-md-12",children:[a?(0,Ae.jsx)("div",{children:(0,Ae.jsx)("img",{src:a||URL.createObjectURL(a),alt:"Image 1",height:50,width:50,className:"img img-responsive mr-2"})}):(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("i",{class:"fa-regular fa-image"}),(0,Ae.jsx)("span",{className:"plus-sign",children:"+"})]}),(0,Ae.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:e=>c(e.target.files[0]),hidden:!0})]})]}),(0,Ae.jsxs)("div",{className:"form-outline mb-4",children:[(0,Ae.jsx)("label",{htmlFor:"",children:(0,Ae.jsx)("b",{children:"Name"})}),(0,Ae.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),className:"form-control"})]}),(0,Ae.jsx)("div",{className:"form-outline mb-4",children:(0,Ae.jsxs)(fA.Group,{controlId:"formGender",children:[(0,Ae.jsx)(fA.Label,{children:(0,Ae.jsx)("b",{children:"Gender"})}),(0,Ae.jsxs)(fA.Select,{value:s,onChange:e=>{o(e.target.value)},children:[(0,Ae.jsx)("option",{value:"",children:"Select Gender"}),(0,Ae.jsx)("option",{value:"male",children:"Male"}),(0,Ae.jsx)("option",{value:"female",children:"Female"}),(0,Ae.jsx)("option",{value:"other",children:"Other"})]})]})}),(0,Ae.jsxs)("div",{className:"form-outline mb-3",children:[(0,Ae.jsx)("label",{htmlFor:"",children:(0,Ae.jsx)("b",{children:"Email"})}),(0,Ae.jsx)("input",{type:"email",value:r,onChange:e=>i(e.target.value),className:"form-control",required:!0})]}),(0,Ae.jsxs)("div",{className:"form-outline mb-4",children:[(0,Ae.jsx)("label",{htmlFor:"",children:(0,Ae.jsx)("b",{children:"Mobile"})}),(0,Ae.jsx)("input",{type:"mobile",value:l,onChange:e=>d(e.target.value),className:"form-control"})]}),(0,Ae.jsxs)("div",{className:"row mb-2",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("button",{type:"submit",className:"btn btnTheme width100 mb-1 mt-0",style:{background:"var(--theme-color)"},onClick:t=>{t.preventDefault(),e(u,r,l,a,s)},children:"Continue"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("p",{className:"mt-1",align:"right",children:(0,Ae.jsx)(Ie,{className:"text14 text-muted","data-bs-toggle":"collapse",to:"#forgotPassword",children:"Forgot Password"})})})]})]}),(0,Ae.jsxs)("div",{className:"input-group collapse",id:"forgotPassword",children:[(0,Ae.jsx)("input",{type:"text",className:"form-control",placeholder:"Recipient's username","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),(0,Ae.jsx)("button",{className:"btn btnTheme",type:"button",id:"button-addon2",children:"Button"})]})]}),(0,Ae.jsx)("p",{className:"text14 text-muted",children:"By joining, you agree to the Dzital Terms of Service and to occasionally receive emails from us. Please read our Privacy Policy to learn how we use your personal data."})]})]})}),(0,Ae.jsx)(Ho,{})]})})})})},gA=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Ae.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Ae.jsx)(Ie,{className:"navbar-brand",to:"#sideBarCollapse","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse",type:"button","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Ae.jsx)("i",{className:"navbar-toggler",children:(0,Ae.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Ae.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Ae.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Ae.jsx)("div",{children:n&&n.length>0&&(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("div",{className:"headBx",children:e.attribute},e._id),(0,Ae.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Ae.jsx)("ul",{className:"list-group list-group-flush",children:(0,Ae.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Ae.jsxs)("label",{children:[(0,Ae.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}})," ",n.value]})})},n._id)))})]})},e._id)}))})})]})})},_A=e=>{let{item:t}=e;const n=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(t.createdAt),r=e=>{if(!Array.isArray(t.attribute_values))return null;const n=t.attribute_values.find((t=>t.attribute===e));return n?n.value:null},i=r("Location"),s=r("Experience"),o=r("Salary");return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)(Ie,{className:"jobeItem",to:"/job-detail/".concat(t._id),children:(0,Ae.jsx)("div",{className:"card mb20",children:(0,Ae.jsxs)("div",{className:"card-body",style:{height:"220px"},children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-9 col-sm-12",children:(0,Ae.jsx)("h5",{children:t.title})}),(0,Ae.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Ae.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Ae.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-briefcase"})," ",s||""]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-inr"})," ",o||"Not disclosed"]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-map-marker"})," ",i||""]})]}),(0,Ae.jsxs)("p",{className:"m0 mb10 mt20",children:[(0,Ae.jsx)("i",{className:"fa fa-file-text-o"})," "," ",t.description]}),(0,Ae.jsxs)("div",{className:"row footBx mt20",children:[(0,Ae.jsx)("div",{className:"col",children:(0,Ae.jsxs)("span",{className:"text-muted",children:[n," Ago"]})}),(0,Ae.jsxs)("div",{className:"col text14",align:"right",children:[(0,Ae.jsx)("i",{className:"fa fa-bookmark-o"})," Save"]})]})]})})})})})},vA=()=>{const{jobList:e,getJobList:t,totalItem:r,listLoading:i,getAttributeFilterList:s}=Kr(),[o,a]=(0,n.useState)(1),c=Z(),l=new URLSearchParams(c.search),d=l.get("sub_category"),u=l.get("category_id"),h=l.get("search"),[p,f]=(0,n.useState)([]),m=Math.ceil((null===r||void 0===r?void 0:r.job)/12),g={keyword_search:h,page:o,limit:12};(0,n.useEffect)((()=>{(async()=>{d?await t(g,d,p):await t(g,"",p)})()}),[h,o,d,p]),(0,n.useEffect)((()=>{(async()=>{d&&await s({sub:d}),u&&await s({main:u})})()}),[h,d,u]);return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(cl,{title:"Jobs List Page",param:"Jobs"}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-2",children:(0,Ae.jsx)(gA,{onFilter:(e,t,n)=>{if(!0===e.target.checked){const e=p.findIndex((e=>e.attribute===t));if(-1!==e){const t=[...p];t[e].value.push(n),f(t)}else{const e=[...p,{attribute:t,value:[n]}];f(e)}}else{const e=p.map((e=>(e.attribute===t&&(e.value=e.value.filter((e=>e!==n))),e))).filter((e=>e.value.length>0));f(e)}}})}),(0,Ae.jsxs)("div",{className:"col-md-8",children:[(0,Ae.jsx)("div",{className:"row",children:i.job?Array.from({length:4}).map(((e,t)=>(0,Ae.jsx)(lh,{col:6},t))):0===e.length?(0,Ae.jsx)(hh,{des:"Please check the spelling or try searching for something else. Thank you!."}):Array.isArray(e)&&e.map(((e,t)=>(0,Ae.jsx)(_A,{item:e},t)))}),(0,Ae.jsx)("div",{align:"center",children:(0,Ae.jsx)(ch,{spacing:2,children:(0,Ae.jsx)(Fu,{count:m,page:o,onChange:e=>a(e),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Ae.jsx)(Ho,{})]})})})]})};function yA(e){return sO({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M278.6 256l68.2-68.2c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-68.2-68.2c-6.2-6.2-16.4-6.2-22.6 0-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3l68.2 68.2-68.2 68.2c-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3 6.2 6.2 16.4 6.2 22.6 0l68.2-68.2 68.2 68.2c6.2 6.2 16.4 6.2 22.6 0 6.2-6.2 6.2-16.4 0-22.6L278.6 256z"},child:[]}]})(e)}const EA=e=>{let{showModal:t,title:r,handleCloseModal:i,id:s}=e;const{userData:o,jobApply:a}=Kr(),{email:c,mobile:l,name:d}=o||{},[u,h]=(0,n.useState)(d),[p,f]=(0,n.useState)(c),[m,g]=(0,n.useState)(l),[_,v]=(0,n.useState)(null);return(0,Ae.jsx)(Ae.Fragment,{children:t&&(0,Ae.jsx)("div",{className:"modal fade show",style:{display:"block"},id:"exampleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Ae.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered",role:"document",children:(0,Ae.jsxs)("div",{className:"modal-content shadow-lg border-0",children:[(0,Ae.jsx)("div",{className:"modal-header bg-primary text-white",children:(0,Ae.jsxs)("h5",{className:" modal-titled-flex d-flex justify-content-between align-items-center w-100",id:"exampleModalLabel",children:[(0,Ae.jsxs)("span",{className:"font-weight-bold",children:[" Apply for ",r]}),(0,Ae.jsx)("span",{className:"font-weight-bold",onClick:i,type:"button",children:(0,Ae.jsx)(yA,{})})]})}),(0,Ae.jsx)("div",{className:"modal-body",children:(0,Ae.jsx)("div",{className:"container",children:(0,Ae.jsx)("div",{className:"row justify-content-center",children:(0,Ae.jsx)("div",{className:"col-lg-9",children:(0,Ae.jsx)("div",{className:"card border-0",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsxs)("div",{className:"mb-4",children:[(0,Ae.jsx)("label",{className:"mb10 ",style:{fontWeight:"bold"},children:" Enter Full Name :"}),(0,Ae.jsx)("input",{type:"text",className:"form-control form-control-lg rounded-3",placeholder:"Full Name",value:u,onChange:e=>{h(e.target.value)},required:!0})]}),(0,Ae.jsxs)("div",{className:"mb-4",children:[(0,Ae.jsx)("label",{className:"mb10 ",style:{fontWeight:"bold"},children:" Email :"}),(0,Ae.jsx)("input",{type:"email",className:"form-control form-control-lg rounded-3",placeholder:"Email Address",value:p,onChange:e=>{f(e.target.value)},required:!0})]}),(0,Ae.jsxs)("div",{className:"mb-4",children:[(0,Ae.jsx)("label",{className:"mb10 ",style:{fontWeight:"bold"},children:" Number :"}),(0,Ae.jsx)("input",{type:"number",className:"form-control form-control-lg rounded-3",placeholder:"Number ",value:m,onChange:e=>{g(e.target.value)},required:!0})]}),(0,Ae.jsxs)("div",{className:"mb-4",children:[(0,Ae.jsx)("label",{className:"mb10 ",style:{fontWeight:"bold"},children:" Upload CV/Resume  :"}),(0,Ae.jsx)("input",{className:"form-control form-control-lg rounded-3",id:"formFileLg",type:"file",onChange:e=>{v(e.target.files[0])},required:!0}),(0,Ae.jsx)("div",{className:"small text-muted mt-2",children:"Upload your CV/Resume or any other relevant file. Max file size 50 MB"})]}),(0,Ae.jsx)("div",{className:"text-center",children:(0,Ae.jsx)("button",{type:"submit",onClick:()=>{const e=new FormData;e.append("name",u),e.append("email",p),e.append("mobile",m),e.append("file",_),e.append("job_id",s),a(e),u&&p&&m&&_&&i()},className:"btn btn-primary btn-lg text-white",children:"Send Application"})})]})})})})})})]})})})})},bA=e=>{let{initialDetail:t}=e;const{getJobListDetail:r,jobDetail:i,setJobDetail:s,getJobList:o,getReletedProduct:a,isLogIn:c,reletedList:l,jobList:d,userData:u}=Kr(),{id:h}=te(),p=Z(),[f,m]=(0,n.useState)(!1),g=$();(0,n.useEffect)((()=>{!t&&h&&(async()=>{await r(h)})(),t&&t.data&&t.data._id&&s(t)}),[h,t]),(0,n.useEffect)((()=>{(async()=>{await o(h)})()}),[h]);const{description:_,title:v,attribute_values:y,createdAt:E,category_id:b,category_name:T,category_slug:S,product_id:w,sub_category_id:C,userId:R,_id:I}=i.data||{},N=e=>{if(!Array.isArray(y))return null;const t=y.find((t=>t.attribute===e));return t?t.value:null},O=N("Location"),A=N("Experience"),k=N("Salary"),x=N("Company Name"),P=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(E);(0,n.useEffect)((()=>{w&&b&&a(b,C,w)}),[w,b,C]);return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsx)("aside",{className:"row",children:(0,Ae.jsx)("div",{className:"col-md-12",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/".concat(S,"?category_id=").concat(b),children:T})}),(0,Ae.jsxs)("li",{className:"active",children:["Detail Page Of ",v]})]})})})})}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),i.isLoad&&(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!i.isLoad&&(0,Ae.jsxs)("div",{className:"col-md-6",children:[(0,Ae.jsx)("div",{className:"card jobeItem mb20",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Ae.jsx)("h5",{children:v}),(0,Ae.jsx)("h6",{className:"reviewList",children:(0,Ae.jsxs)("b",{children:[(0,Ae.jsx)("i",{className:"fa-solid fa-location-crosshairs mx-2",children:" "}),x||""]})})]}),(0,Ae.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Ae.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Ae.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-briefcase"})," ",A||""]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-inr"})," ",k||"Not Disclosed"]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-map-marker"})," ",O||"Not Mentioned"]})]}),(0,Ae.jsx)("hr",{}),(0,Ae.jsx)("div",{className:"row",children:(0,Ae.jsxs)("div",{className:"col-md-6 d-flex justify-content-between",children:[(0,Ae.jsxs)("p",{className:"mt5 mb5 text16",children:[(0,Ae.jsx)("b",{children:"Posted :"})," ",P," ago"]}),u._id===R?" ":(0,Ae.jsx)("div",{children:c?(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("button",{type:"button",className:"btn btn-primary px-3 text-white",onClick:()=>{m(!0)},children:"Apply"}),(0,Ae.jsx)(EA,{showModal:f,title:v,handleCloseModal:()=>{m(!1)},id:I})]}):(0,Ae.jsx)("button",{onClick:()=>{return e="/message",void(c?g(e):(al("please Login first"),setTimeout((()=>{g("/login?redirect=".concat(p.pathname))}),1e3)));var e},className:"btn btn-primary text-white",children:"Login to Apply"})})]})})]})}),(0,Ae.jsx)("div",{className:"card mb20",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{children:"Job description"}),(0,Ae.jsxs)("p",{children:[_," "]}),(0,Ae.jsx)("hr",{}),Array.isArray(y)&&y.map((e=>(0,Ae.jsxs)("p",{children:[(0,Ae.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]})})]}),(0,Ae.jsxs)("div",{className:"col-md-4",children:[u._id===R?"":(0,Ae.jsx)(CO,{}),(0,Ae.jsx)("div",{className:"card",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{children:(0,Ae.jsx)("b",{children:"Similar jobs"})}),(0,Ae.jsx)("hr",{}),Array.isArray(l)&&l.map((e=>{const t=t=>{if(!Array.isArray(d))return null;const n=null===d||void 0===d?void 0:d.find((t=>(null===t||void 0===t?void 0:t.product_id)===e._id));if(!n)return null;const r=null===n||void 0===n?void 0:n.attribute_values,i=null===r||void 0===r?void 0:r.find((e=>e.attribute===t));return i?null===i||void 0===i?void 0:i.value:null},n=t("Location"),r=t("Salary"),i=t("Company Name"),s=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(e.createdAt);return(0,Ae.jsxs)(Ie,{to:"/product/related-product/".concat(e._id),className:"jobeItem",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-9 col-sm-12",children:[(0,Ae.jsx)("h5",{children:e.title}),(0,Ae.jsxs)("ul",{className:"reviewList mb5",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)("b",{children:i})}),(0,Ae.jsx)("li",{className:"text-muted",children:"|"})]})]}),(0,Ae.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Ae.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Ae.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-map-marker"})," ",n]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-map-marker"})," ",r]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("b",{children:"Posted : "}),(0,Ae.jsxs)("span",{className:"text-muted",children:[s," "]})]})]}),(0,Ae.jsx)("hr",{})]},e._id)})),(0,Ae.jsx)("div",{align:"center",children:(0,Ae.jsx)(Ie,{className:"btn btn-primary",to:"/".concat(S,"?category_id=").concat(b),children:"View all"})})]})})]}),(0,Ae.jsx)(Ho,{})]})})})]})},TA=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"col-md-2",children:(0,Ae.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav",children:[(0,Ae.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Ae.jsx)(Ie,{className:"navbar-brand",to:"#sideBarCollapse",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Ae.jsx)("i",{className:"navbar-toggler",children:(0,Ae.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Ae.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Ae.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Ae.jsx)("div",{children:n&&n.length>0&&(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("div",{className:"headBx",children:e.attribute},e._id),(0,Ae.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Ae.jsx)("ul",{className:"list-group list-group-flush",children:(0,Ae.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Ae.jsxs)("label",{children:[(0,Ae.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}})," ",n.value]})})},n._id)))})]})},e._id)}))})})]})})})},SA=e=>{let{item:t}=e;const{wishListAdd:r,wishListRemove:i,userData:s}=Kr(),[o,a]=(0,n.useState)(t.isWishlist);return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"col col-lg-4 proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",style:{height:"350px"},children:[(0,Ae.jsxs)("div",{className:"imgBx",children:[(0,Ae.jsx)(Ie,{to:"/Fashion-Beauty-Details/".concat(t._id),children:(0,Ae.jsx)("img",{src:t.photo,className:"card-img-top allImg",alt:""})}),s._id===t.userId?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{o?i(e):r(e),a(!o)})(t.product_id),children:(0,Ae.jsx)("i",{className:"fa ".concat(o?"fa-heart text-danger":"fa-heart-o")})})]}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:(0,Ae.jsx)(Ie,{to:"/Fashion-Beauty-Details/".concat(t._id),children:t.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description})]})]})})})},wA=()=>{const{fashion:e,getAttributeFilterList:t,getFashionBeauty:r,totalItem:i,listLoading:s}=Kr(),[o,a]=(0,n.useState)(1),c=Math.ceil((null===i||void 0===i?void 0:i.Fashion)/12),l=Z(),d=new URLSearchParams(l.search),u=d.get("sub_category"),h=d.get("category_id"),p=d.get("search"),[f,m]=(0,n.useState)([]),g={keyword_search:p,page:o,limit:12};(0,n.useEffect)((()=>{(async()=>{u?await r(g,u,f):await r(g,"",f)})()}),[p,o,u,f]),(0,n.useEffect)((()=>{(async()=>{u&&await t({sub:u}),h&&await t({main:h})})()}),[p,u,h]);return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(cl,{title:"Fashion & Beauty List Page",param:"Fashion & Beauty"}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)(TA,{onFilter:(e,t,n)=>{if(!0===e.target.checked){const e=f.findIndex((e=>e.attribute===t));if(-1!==e){const t=[...f];t[e].value.push(n),m(t)}else{const e=[...f,{attribute:t,value:[n]}];m(e)}}else{const e=f.map((e=>(e.attribute===t&&(e.value=e.value.filter((e=>e!==n))),e))).filter((e=>e.value.length>0));m(e)}}}),(0,Ae.jsxs)("div",{className:"col-md-8",children:[(0,Ae.jsx)("div",{className:"row",children:s.Fashion?Array.from({length:6}).map(((e,t)=>(0,Ae.jsx)(dh,{col:4},t))):0===e.length?(0,Ae.jsx)(hh,{des:"Please check the spelling or try searching for something else. Thank you!"}):Array.isArray(e)&&e.map(((e,t)=>(0,Ae.jsx)(SA,{item:e},t)))}),(0,Ae.jsx)("div",{align:"center",children:(0,Ae.jsx)(ch,{spacing:2,children:(0,Ae.jsx)(Fu,{count:c,page:o,onChange:(e,t)=>a(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Ae.jsx)(Ho,{})]})})})]})},CA=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"col-md-2",children:(0,Ae.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Ae.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Ae.jsx)(Ie,{className:"navbar-brand",to:"#sideBarCollapse","data-bs-toggle":"collapse","aria-controls":"sideBarCollapse",type:"button","data-bs-target":"#sideBarCollapse",children:"Short By Filter"}),(0,Ae.jsx)("i",{className:"navbar-toggler",children:(0,Ae.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Ae.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Ae.jsx)("div",{className:"customeSidebar",children:(0,Ae.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Ae.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Ae.jsx)("div",{children:n&&n.length>0&&(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("div",{className:"headBx",children:e.attribute}),(0,Ae.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Ae.jsx)("ul",{className:"list-group list-group-flush",children:(0,Ae.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Ae.jsxs)("label",{children:[(0,Ae.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}},n._id)," ",n.value]})})},n._id)))})]})},e._id)}))})})})})]})})})},RA=e=>{let{item:t}=e;const n=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(t.createdAt);return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"card mb20",children:(0,Ae.jsx)("div",{className:"card-body jobeItemBx",children:(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-9",children:[(0,Ae.jsx)("h4",{children:t.title}),(0,Ae.jsxs)("p",{className:"text-muted mb5",children:[(0,Ae.jsx)("i",{className:"fa fa-clock-o"})," Posted on : ",n," ago"]}),(0,Ae.jsx)("p",{className:"mb-4",children:(e=>{const t=e.split(" ");return t.length>20?t.slice(0,20).join(" ")+"...":e})(t.description)})]}),(0,Ae.jsx)("div",{className:"col-md-3 viewBx",align:"center",children:(0,Ae.jsx)(Ie,{className:"btn btn-outline-primary width100",to:"/freelancer-detail/".concat(t._id),children:"View & Apply"})})]})})},t._id)})},IA=()=>{const{freelancerList:e,getAttributeFilterList:t,totalItem:r,getFreelancer:i,listLoading:s}=Kr(),[o,a]=(0,n.useState)(1),c=Z(),l=new URLSearchParams(c.search),d=l.get("sub_category"),u=l.get("category_id"),h=l.get("search"),[p,f]=(0,n.useState)([]),m=Math.ceil((null===r||void 0===r?void 0:r.freelancer)/12),g={keyword_search:h||"",page:o,limit:12};(0,n.useEffect)((()=>{(async()=>{d?await i(g,d,p):await i(g,"",p)})()}),[o,d,p,h]),(0,n.useEffect)((()=>{(async()=>{d&&await t({sub:d}),u&&await t({main:u})})()}),[d,u]);return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(cl,{title:"FreeLancer List Page",param:"FreeLancer"}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)(CA,{onFilter:(e,t,n)=>{if(!0===e.target.checked){const e=p.findIndex((e=>e.attribute===t));if(-1!==e){const t=[...p];t[e].value.push(n),f(t)}else{const e=[...p,{attribute:t,value:[n]}];f(e)}}else{const e=p.map((e=>(e.attribute===t&&(e.value=e.value.filter((e=>e!==n))),e))).filter((e=>e.value.length>0));f(e)}}}),(0,Ae.jsxs)("div",{className:"col-md-8",children:[s.freelancer?Array.from({length:3}).map(((e,t)=>(0,Ae.jsx)(lh,{col:10},t))):0===e.length?(0,Ae.jsx)(hh,{des:"Please check the spelling or try searching for something else. Thank you!."}):Array.isArray(e)&&e.map(((e,t)=>(0,Ae.jsx)(RA,{item:e},t))),(0,Ae.jsx)("div",{align:"center",children:(0,Ae.jsx)(ch,{spacing:2,children:(0,Ae.jsx)(Fu,{count:m,page:o,onChange:(e,t)=>a(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Ae.jsx)(Ho,{})]})})})]})},NA=e=>{let{initialDetail:t}=e;const{id:r}=te(),{getFreelancerDetails:i,freelancerDetail:s,getReletedProduct:o,setFreelancerDetail:a,reletedList:c}=Kr(),[l,d]=(0,n.useState)(!1);(0,n.useEffect)((()=>{!t&&r&&(async()=>{await i(r)})(),t&&t.data&&t.data._id&&a(t)}),[r,t]);const{title:u,description:h,attribute_values:p,product_id:f,createdAt:m,sub_category_id:g,category_name:_,category_id:v,category_slug:y}=s.data||{};(0,n.useEffect)((()=>{f&&v&&o(v,g,f)}),[f,v,g]);const E=e=>{if(!Array.isArray(p))return null;const t=p.find((t=>t.attribute===e));return t?t.value:null},b=E("Salary"),T=E("Location"),S=E("Experience Level"),w=E("Industry Experience"),C=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(m);return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsx)("aside",{className:"row",children:(0,Ae.jsx)("div",{className:"col-md-12",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/".concat(y,"?category_id=").concat(v),children:_})}),(0,Ae.jsxs)("li",{className:"active",children:[" Detail Page of ",u]})]})})})})}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),s.isLoad&&(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!s.isLoad&&(0,Ae.jsxs)("div",{className:"col-md-10",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-8",children:(0,Ae.jsx)("h2",{className:"mb-3",children:u})}),(0,Ae.jsxs)("div",{className:"col-md-4 d-flex gap-3 align-items-center",align:"right",children:[(0,Ae.jsxs)(Ie,{className:"btn btnTheme ",to:"#.",style:{background:"var(--theme-color)"},children:[(0,Ae.jsx)("i",{className:"fa fa-envelope "})," Send Proposal"]}),(0,Ae.jsxs)("div",{className:"iconWish",children:[(0,Ae.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{d(!0)}}),(0,Ae.jsx)(RO,{isOpen:l,onClose:()=>{d(!1)}})]})]})]}),(0,Ae.jsx)("hr",{}),(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-8",children:[(0,Ae.jsx)("div",{className:"card jobeItem mb20",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-9 col-sm-12",children:(0,Ae.jsx)("h5",{children:u})}),(0,Ae.jsx)("div",{className:"col-md-3 col-sm-12 logoBx",children:(0,Ae.jsx)("img",{src:"assets/images/g-logo.png",width:44,className:"mt5",alt:""})})]}),(0,Ae.jsxs)("ul",{className:"list-inline divider mb5",children:[(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-briefcase"})," ",w||S||""]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-inr"})," ",b||"Not Disclosed"]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-map-marker"})," ",T||"Not Mentioned"]})]}),(0,Ae.jsx)("hr",{}),(0,Ae.jsx)("div",{className:"row",children:(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("p",{className:"mt5 mb5 text16",children:[(0,Ae.jsx)("b",{children:"Posted :"})," ",C," ago"]})})})]})}),(0,Ae.jsx)("div",{className:"card ",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsxs)("h3",{children:["Description for ",u]}),(0,Ae.jsx)("p",{className:"mb0",align:"justify",children:h}),(0,Ae.jsx)("hr",{}),Array.isArray(p)&&p.map((e=>(0,Ae.jsxs)("p",{children:[(0,Ae.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]})})]}),(0,Ae.jsx)("div",{className:"col-md-4",children:(0,Ae.jsxs)("div",{className:"card text-bg-secondery",style:{background:"var(--theme-color-dark)"},children:[(0,Ae.jsx)("div",{className:"card-header",children:(0,Ae.jsx)("h5",{className:"text-light",children:"About the Client"})}),(0,Ae.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,Ae.jsxs)("li",{className:"list-group-item",children:[(0,Ae.jsx)("i",{className:"fa fa-globe"})," ",(0,Ae.jsx)("b",{children:"Country :"})," ",(0,Ae.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"Germany"})]}),(0,Ae.jsxs)("li",{className:"list-group-item",children:[(0,Ae.jsx)("i",{className:"fa fa-list"})," ",(0,Ae.jsx)("b",{children:"Projects Paid :"})," ",(0,Ae.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"0"})]}),(0,Ae.jsxs)("li",{className:"list-group-item",children:[(0,Ae.jsx)("i",{className:"fa fa-pencil-square-o"})," ",(0,Ae.jsx)("b",{children:"Projects Posted :"})," ",(0,Ae.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"1"})]}),(0,Ae.jsxs)("li",{className:"list-group-item",children:[(0,Ae.jsx)("i",{className:"fa fa-thumbs-o-up"})," ",(0,Ae.jsx)("b",{children:"Total Feedbacks :"})," ",(0,Ae.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"1"})]}),(0,Ae.jsxs)("li",{className:"list-group-item",children:[(0,Ae.jsx)("i",{className:"fa fa-thumbs-o-up"})," ",(0,Ae.jsx)("b",{children:"Feedbacks :"})," ",(0,Ae.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"1"})]}),(0,Ae.jsxs)("li",{className:"list-group-item",children:[(0,Ae.jsx)("i",{className:"fa fa-cubes"})," ",(0,Ae.jsx)("b",{children:"Total Spent :"})," ",(0,Ae.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"\u20b9 0"})]}),(0,Ae.jsxs)("li",{className:"list-group-item",children:[(0,Ae.jsx)("i",{className:"fa fa-users"})," ",(0,Ae.jsx)("b",{children:"Client Type"})," ",(0,Ae.jsx)("span",{className:"badge bg-primary rounded-pill float-end",children:"Company"})]})]}),(0,Ae.jsx)("div",{className:"card-footer text-light",children:"Member since 15 Nov, 2023"})]})})]}),(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-12",children:[(0,Ae.jsx)("h5",{className:"mt-3",children:"Related Field"}),(0,Ae.jsx)("hr",{className:"mt0"})]}),Array.isArray(c)&&c.map((e=>{const t=(e=>{const t=new Date-new Date(e),n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4);return n>1?"".concat(n," days"):"".concat(r," hours, ").concat(i," minutes")})(e.createdAt);return(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("div",{className:"card mb-3",style:{maxWidth:540},children:(0,Ae.jsxs)("div",{className:"row g-0",children:[(0,Ae.jsx)(Ie,{to:"/product/related-product/".concat(e._id),className:"col-md-4",children:(0,Ae.jsx)("img",{src:e.image,className:"img-fluid rounded-start",style:{height:"100%"},alt:"..."})}),(0,Ae.jsx)("div",{className:"col-md-8",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:e.title}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.description}),(0,Ae.jsx)("p",{className:"card-text",children:(0,Ae.jsxs)("small",{className:"text-body-secondary",children:["Posted: ",t]})})]})})]})})},e._id)}))]})]}),(0,Ae.jsx)(Ho,{})]})})})]})},OA=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"col-md-2",children:(0,Ae.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Ae.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Ae.jsx)(Ie,{className:"navbar-brand",to:"#sideBarCollapse",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Ae.jsx)("i",{className:"navbar-toggler",children:(0,Ae.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Ae.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Ae.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Ae.jsx)("div",{children:n&&n.length>0&&(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("div",{className:"headBx",children:e.attribute},e._id),(0,Ae.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Ae.jsx)("ul",{className:"list-group list-group-flush",children:(0,Ae.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Ae.jsxs)("label",{children:[(0,Ae.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}})," ",n.value]})})},n._id)))})]})},e._id)}))})})]})})})},AA=e=>{let{item:t}=e;return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("div",{className:"lCItem",children:(0,Ae.jsxs)("div",{className:"innerBx",children:[(0,Ae.jsxs)("div",{className:"titelBx",children:[(0,Ae.jsx)("i",{className:"fa fa-lightbulb-o"}),(0,Ae.jsx)("h4",{children:t.title})]}),(0,Ae.jsxs)("div",{className:"textCont",children:[(0,Ae.jsx)("h5",{className:"mb-1 text16",children:(0,Ae.jsx)("b",{children:t.title})}),(0,Ae.jsx)("h6",{className:"mb-3 text14"}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description}),(0,Ae.jsx)(Ie,{className:"btn btnTheme width100",to:"/lessons-courses-detail/".concat(t._id),style:{background:"var(--theme-color)"},children:"Start course"})]})]})})})})},kA=()=>{const{lesson:e,getAttributeFilterList:t,getLesson:r,totalItem:i,listLoading:s}=Kr(),[o,a]=(0,n.useState)(1),c=Math.ceil((null===i||void 0===i?void 0:i.Lessons)/8),l=Z(),d=new URLSearchParams(l.search),u=d.get("sub_category"),h=d.get("category_id"),p=d.get("search"),[f,m]=(0,n.useState)([]),g={keyword_search:p,page:o,limit:8};(0,n.useEffect)((()=>{(async()=>{u?await r(g,u,f):await r(g,"",f)})()}),[p,o,u,f]),(0,n.useEffect)((()=>{(async()=>{u&&await t({sub:u}),h&&await t({main:h})})()}),[p,u,h]);return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(cl,{title:"Lessons & Courses List Page",param:"Lessons & Courses"}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)(OA,{onFilter:(e,t,n)=>{if(!0===e.target.checked){const e=f.findIndex((e=>e.attribute===t));if(-1!==e){const t=[...f];t[e].value.push(n),m(t)}else{const e=[...f,{attribute:t,value:[n]}];m(e)}}else{const e=f.map((e=>(e.attribute===t&&(e.value=e.value.filter((e=>e!==n))),e))).filter((e=>e.value.length>0));m(e)}}}),(0,Ae.jsxs)("div",{className:"col-md-8",children:[(0,Ae.jsx)("div",{className:"row",children:s.Lessons?Array.from({length:4}).map(((e,t)=>(0,Ae.jsx)(lh,{col:6},t))):0===e.length?(0,Ae.jsx)(hh,{des:"Please check the spelling or try searching for something else. Thank you!"}):Array.isArray(e)&&e.map(((e,t)=>(0,Ae.jsx)(AA,{item:e},t)))}),(0,Ae.jsx)("div",{align:"center",children:(0,Ae.jsx)(ch,{spacing:2,children:(0,Ae.jsx)(Fu,{count:c,page:o,onChange:(e,t)=>a(t),color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})})]}),(0,Ae.jsx)(Ho,{})]})})})]})},xA=e=>{let{item:t}=e;return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"col-md-3",children:(0,Ae.jsx)("div",{className:"lCItem",children:(0,Ae.jsxs)("div",{className:"innerBx",children:[(0,Ae.jsxs)("div",{className:"titelBx",children:[(0,Ae.jsx)("i",{className:"fa fa-lightbulb-o"}),(0,Ae.jsx)("h5",{children:t.title})]}),(0,Ae.jsxs)("div",{className:"textCont",children:[(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description}),(0,Ae.jsx)(Ie,{className:"btn btnTheme width100 mt10",to:"/product/related-product/".concat(t._id),style:{background:"var(--theme-color)"},children:"Start course"})]})]})})})})},PA=e=>{let{initialDetail:t}=e;const{id:r}=te(),{getLessonDetail:i,lessonDetail:s,getReletedProduct:o,reletedList:a,setlessonDetail:c}=Kr(),[l,d]=(0,n.useState)(!1);(0,n.useEffect)((()=>{!t&&r&&(async()=>{await i(r)})(),t&&t.data&&t.data._id&&c(t)}),[r,t]);const{description:u,title:h,attribute_values:p,category_name:f,category_id:m,category_slug:g,product_id:_,sub_category_id:v}=s.data||{},y=e=>{if(!Array.isArray(p))return null;const t=p.find((t=>t.attribute===e));if(t&&t.value){const e=parseInt(t.value);if(!isNaN(e))return e}return null},E=y("Lessons"),b=y("Videos"),T=y("Quizzes"),S=y("Hours"),w=Array.isArray(p)?p.filter((e=>e.value.startsWith("https://youtu.be"))):[],C=e=>{const t=e.split("/").pop().split("?")[0];return"https://www.youtube.com/embed/".concat(t)};return(0,n.useEffect)((()=>{_&&m&&o(m,v,_)}),[_,m,v]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsx)("aside",{className:"row",children:(0,Ae.jsx)("div",{className:"col-md-12",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/".concat(g,"?category_id=").concat(m),children:f})}),(0,Ae.jsxs)("li",{className:"active",children:["Detail Page Of ",h]})]})})})})}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),s.isLoad&&(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!s.isLoad&&(0,Ae.jsxs)("div",{className:"col-md-10",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-8",children:(0,Ae.jsx)("h2",{className:"mb-3",children:h})}),(0,Ae.jsx)("div",{className:"col-md-4",align:"right",children:(0,Ae.jsxs)("div",{className:"col-md-4",align:"right",children:[(0,Ae.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{d(!0)}}),(0,Ae.jsx)(RO,{isOpen:l,onClose:()=>{d(!1)}})]})})]}),(0,Ae.jsx)("hr",{className:"mt0"}),(0,Ae.jsxs)("div",{className:"row mb-3",children:[(0,Ae.jsxs)("div",{className:"col-md-8",children:[(0,Ae.jsx)("div",{className:"card freelanceDtls mb-3 ",style:{background:"#feffdb"},children:(0,Ae.jsx)("div",{className:"card-body",children:(0,Ae.jsxs)("ul",{children:[(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-file-text-o"}),(0,Ae.jsx)("h6",{children:(0,Ae.jsx)("b",{children:E||"Not Mentioned"})}),(0,Ae.jsx)("p",{children:"Lessons"})]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-play"}),(0,Ae.jsx)("h6",{children:(0,Ae.jsx)("b",{children:b||"Not Mentioned"})}),(0,Ae.jsx)("p",{children:"Videos"})]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-question"}),(0,Ae.jsx)("h6",{children:(0,Ae.jsx)("b",{children:T||"Not Mentioned"})}),(0,Ae.jsx)("p",{children:"Quizzes"})]}),(0,Ae.jsxs)("li",{children:[(0,Ae.jsx)("i",{className:"fa fa-clock-o"}),(0,Ae.jsx)("h6",{className:"text-success",children:(0,Ae.jsx)("b",{children:S?"".concat(S," : 00"):"Not Mentioned"})}),(0,Ae.jsx)("p",{children:"Hours"})]})]})})}),(0,Ae.jsx)("div",{className:"card mb-3",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsxs)("h3",{className:"card-title",children:["Description for ",h]}),u,(0,Ae.jsx)("hr",{})]})})]}),(0,Ae.jsx)("div",{className:"col-md-4",children:(0,Ae.jsx)("div",{className:"card",children:(0,Ae.jsx)("div",{className:"card-body",children:w.map(((e,t)=>(0,Ae.jsx)("div",{className:"video-responsive",children:(0,Ae.jsx)("iframe",{width:"100%",height:"100%",src:C(e.value),title:"YouTube video ".concat(t+1),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},t)))})})}),(0,Ae.jsxs)("div",{className:"col-md-12",children:[(0,Ae.jsx)("h5",{className:"mt-3",children:"Related Courses"}),(0,Ae.jsx)("hr",{className:"mt0"}),(0,Ae.jsx)("div",{className:"row",children:Array.isArray(a)&&a.map((e=>(0,Ae.jsx)(xA,{item:e},e._id)))})]})]})]}),(0,Ae.jsx)(Ho,{})]})})})]})},DA=()=>{const{mypost:e,getMyPost:t,totalItem:r,myPostRemove:i,listLoading:s}=Kr(),[o,a]=(0,n.useState)(1),c=Math.ceil((null===r||void 0===r?void 0:r.post)/10),l={page:o,limit:10};(0,n.useEffect)((()=>{(async()=>{await t(l)})()}),[o]);return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"My Post"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:"My Post"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-3",children:(0,Ae.jsx)(SO,{})}),(0,Ae.jsx)("div",{className:"col-md-7",children:(0,Ae.jsx)("div",{className:"card border-0",children:(0,Ae.jsxs)("div",{className:"card card-body border-0",children:[(0,Ae.jsx)("h2",{className:"text24 mb-1",children:"My Post"}),(0,Ae.jsx)("p",{className:"text-muted mb-1",children:"Here you can see your post and edit them easily."}),(0,Ae.jsx)("hr",{className:"mt0"}),s.Post?Array.from({length:3}).map(((e,t)=>(0,Ae.jsx)(uh,{},t))):0===e.length?(0,Ae.jsx)(hh,{des:"Add a post, to See your Post Thank you!."}):Array.isArray(e)&&e.map((e=>(0,Ae.jsx)("div",{className:"card mb-3 myPostItem",children:(0,Ae.jsxs)("div",{className:"row g-0",children:[(0,Ae.jsx)("div",{className:"col-md-4",children:(0,Ae.jsx)(Ie,{to:"/product/my-post/".concat(e._id),className:"imgBx",children:(0,Ae.jsx)("img",{src:e.image,className:"img-fluid rounded-start",alt:"Dzital"})})}),(0,Ae.jsx)("div",{className:"col-md-8",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-9",children:(0,Ae.jsx)("h5",{className:"card-title mb-1",children:e.title})}),(0,Ae.jsx)("div",{className:"col-md-3",align:"right",children:(0,Ae.jsx)("h5",{className:"m0",children:(0,Ae.jsx)("b",{className:"badge bg-warning text-dark"})})})]}),(0,Ae.jsxs)("p",{className:"card-text mb-0",children:[e.description,"..."," "]}),(0,Ae.jsx)("hr",{className:"mb-2 mt-1"}),"Approved"===e.status?(0,Ae.jsxs)(Ie,{className:"btn btn-success btn-sm",style:{marginRight:"3px"},children:[(0,Ae.jsx)("i",{className:"fa fa-eye"})," Approved"]}):(0,Ae.jsxs)(Ie,{className:"btn btn-secondary btn-sm mx-1",style:{marginRight:"3px"},children:[(0,Ae.jsx)("i",{className:"fa-regular fa-eye-slash"})," ","Unapproved"]}),(0,Ae.jsxs)(Ie,{to:"/updateProduct/".concat(e._id),className:"btn btn-dark btn-sm",children:[(0,Ae.jsx)("i",{className:"fa-regular fa-pen-to-square "})," ","Edit"]}),(0,Ae.jsxs)(Ie,{className:"btn btn-danger btn-sm mx-1",onClick:()=>i(e._id),children:[(0,Ae.jsx)("i",{className:"fa-sharp fa-solid fa-trash"})," ","Delete"]})]})})]})},e._id))),Array.isArray(e)&&e.length>0?(0,Ae.jsx)("div",{align:"center",children:(0,Ae.jsx)(ch,{spacing:2,children:(0,Ae.jsx)(Fu,{count:c,page:o,onChange:e=>{a(e)},color:"primary",variant:"outlined",shape:"rounded",boundaryCount:2,siblingCount:1})})}):""]})})}),(0,Ae.jsx)(Ho,{})]})})})]})},LA=()=>{const{getMyPostListDetail:e,myPostDetail:t,updateMyPost:r}=Kr(),{id:i}=te(),[s,o]=(0,n.useState)(""),[a,c]=(0,n.useState)(""),[l,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[p,f]=(0,n.useState)(""),[m,g]=(0,n.useState)([]),[_,v]=(0,n.useState)(!1),[y,E]=(0,n.useState)([]),[b,T]=(0,n.useState)({title:"",description:"",attribute_values:[],image:"",photo:"",image_1:"",image_2:"",image_3:""}),S=(e,t,n)=>{const{name:r,value:i,files:s}=e.target;if("attribute_value"===r){const e=[...b.attribute_values];e[t].value=i,T((t=>({...t,attribute_values:e})))}if(["photo","image","image_1","image_2","image_3"].includes(r)){const[t]=s;if(t){switch(r){case"photo":c(e.target.files[0]);break;case"image":o(e.target.files[0]);break;case"image_1":d(e.target.files[0]);break;case"image_2":h(e.target.files[0]);break;case"image_3":f(e.target.files[0])}T((e=>({...e,[r]:t}))),E((e=>({...e,[r]:URL.createObjectURL(t)})))}}else T((e=>({...e,[r]:i}))),g({...m,[n]:i})};(0,n.useEffect)((()=>{var e;if((null===(e=b.category_name)||void 0===e?void 0:e.length)>0){const e=b.category_name;null!==e&&void 0!==e&&e.includes("Jobs")||null!==e&&void 0!==e&&e.includes("Freelancer")||null!==e&&void 0!==e&&e.includes("Lessons & Courses")?v(!0):v(!1)}}));return(0,n.useEffect)((()=>{T({title:t.title,description:t.description,attribute_values:t.attribute_values,image:t.image,photo:t.photo,image_1:t.image_1,image_2:t.image_2,image_3:t.image_3})}),[t]),(0,n.useEffect)((()=>{e(i)}),[i]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"SELECTED CATEGORY"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{className:"active",to:"/my-post",children:"My Post"})}),(0,Ae.jsx)("li",{className:"active",children:"Update Product"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{className:"card",children:[(0,Ae.jsx)("div",{className:"card card-header",children:(0,Ae.jsx)("h5",{className:" text-center ",children:"Update Product"})}),(0,Ae.jsx)("div",{className:"card card-body border-0",children:(0,Ae.jsxs)("form",{onSubmit:e=>{e.preventDefault();const{title:t,description:n,photo:s,image:o,image_1:a,image_2:c,image_3:l}=b,d=new FormData;d.append("title",t),d.append("description",n),!1===_?(d.append("photo",s||""),d.append("image_1",a||""),d.append("image_2",c||""),d.append("image_3",l||"")):d.append("image",o||""),Object.entries(m).forEach(((e,t)=>{let[n,r]=e;d.append("attributeData[".concat(t,"][attribute_id]"),n),d.append("attributeData[".concat(t,"][value]"),r)})),r(i,d)},encType:"multipart/form-data",children:[(0,Ae.jsxs)("div",{className:"mb20",style:{maxWidth:"500px"},children:[(0,Ae.jsx)("h6",{children:"Title"}),(0,Ae.jsx)("input",{type:"text",name:"title",id:"title",value:b.title,onChange:S,className:"form-control"})]}),(0,Ae.jsxs)("div",{className:"mb20",children:[(0,Ae.jsx)("h6",{children:"Description"}),(0,Ae.jsx)("textarea",{type:"text",name:"description",id:"description",value:b.description,onChange:S,className:"form-control min-vh-40"})]}),(0,Ae.jsx)("div",{className:"radioBx mb20",children:(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"row",children:Array.isArray(b.attribute_values)&&b.attribute_values.map(((e,t)=>(0,Ae.jsxs)("div",{className:"col-md-6 mt30",children:[(0,Ae.jsx)("label",{style:{fontWeight:"bold",fontSize:"1em"},children:e.attribute}),(0,Ae.jsx)("input",{type:"text",name:"attribute_value",id:"attribute_value_".concat(t),value:e.value,onChange:n=>S(n,t,e.attribute_id),className:"form-control mt-2"})]},e._id)))})})}),!1===_?(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("h5",{className:"m0 text-center mt50",children:"UPLOAD UP TO 4 PHOTOS"}),(0,Ae.jsxs)("div",{className:"row mt10",children:[(0,Ae.jsx)("div",{className:"col-sm-3",children:(0,Ae.jsxs)("div",{className:"fileBx mt-2",children:[(0,Ae.jsx)("input",{type:"file",name:"photo",id:"photo",style:{display:"none"},onChange:S}),(0,Ae.jsx)("label",{htmlFor:"photo",children:(0,Ae.jsx)("img",{src:y.photo||b.photo,height:70,width:100,alt:"photo"})})]})}),(0,Ae.jsx)("div",{className:"col-sm-3",children:(0,Ae.jsxs)("div",{className:"fileBx mt-2",children:[(0,Ae.jsx)("input",{type:"file",name:"image_1",id:"img1",style:{display:"none"},onChange:S}),(0,Ae.jsx)("label",{htmlFor:"img1",children:(0,Ae.jsx)("img",{height:70,width:100,src:y.image_1||b.image_1,alt:"Img_1"})})]})}),(0,Ae.jsx)("div",{className:"col-sm-3",children:(0,Ae.jsxs)("div",{className:"fileBx mt-2",children:[(0,Ae.jsx)("input",{type:"file",name:"image_2",id:"img2",onChange:S,style:{display:"none"}}),(0,Ae.jsx)("label",{htmlFor:"img2",children:(0,Ae.jsx)("img",{height:70,width:100,src:y.image_2||b.image_2,alt:"image_2"})})]})}),(0,Ae.jsx)("div",{className:"col-sm-3",children:(0,Ae.jsxs)("div",{className:"fileBx mt-2",children:[(0,Ae.jsx)("input",{type:"file",name:"image_3",id:"img3",style:{display:"none"},onChange:S}),(0,Ae.jsx)("label",{htmlFor:"img3",children:(0,Ae.jsx)("img",{height:70,width:100,src:y.image_3||b.image_3,alt:"image_3"})})]})})]})]}):(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("h5",{className:"m30 text-center",children:"UPLOAD file"}),(0,Ae.jsx)("div",{className:"row justify-content-center ",children:(0,Ae.jsx)("div",{className:"col-sm-3",children:(0,Ae.jsxs)("div",{className:"fileBx mt-2",children:[(0,Ae.jsx)("input",{type:"file",name:"image",id:"img",onChange:S,style:{display:"none"},required:!0}),(0,Ae.jsx)("label",{htmlFor:"img",children:(0,Ae.jsx)("img",{height:70,width:100,src:y.image||b.image,alt:"photo"})})]})})})]}),(0,Ae.jsx)(No,{type:"submit",className:"text text-white mt30 ",children:"Submit"})]})})]})}),(0,Ae.jsx)(Ho,{})]})})})]})},MA=()=>{const{ChnagePassword:e,userData:t}=Kr(),[r,i]=(0,n.useState)(""),[s,o]=(0,n.useState)(""),[a,c]=(0,n.useState)(""),l=(e,t)=>{t(e.target.value)};return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(cl,{title:"change-password"}),(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-3",children:(0,Ae.jsx)(SO,{})}),(0,Ae.jsx)("div",{className:"col-md-7",children:(0,Ae.jsx)("div",{className:"card border-0",children:(0,Ae.jsxs)("div",{className:"card card-body border-0",children:[(0,Ae.jsx)("h2",{className:"text24 mb5",children:"Password & Security"}),(0,Ae.jsx)("p",{className:"text-muted",children:"Manage your password settings and secure your account."}),t.social_id?(0,Ae.jsxs)("form",{onSubmit:t=>{t.preventDefault(),s===a?e(r,s):al.error("New password and confirm password must be the same")},children:[(0,Ae.jsxs)("div",{className:"row mb-4 mt40",children:[(0,Ae.jsxs)("div",{className:"col-md-6 mt-4",children:[(0,Ae.jsx)("label",{className:"mb-1",children:(0,Ae.jsx)("b",{children:"Set Password"})}),(0,Ae.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,o)})]}),(0,Ae.jsxs)("div",{className:"col-md-6 mt-4",children:[(0,Ae.jsx)("label",{className:"mb-1",children:(0,Ae.jsx)("b",{children:"Confirm Password"})}),(0,Ae.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,c)})]})]}),(0,Ae.jsx)("button",{className:"btn btnTheme",type:"submit",style:{width:"fit-content",background:"var(--theme-color)"},children:"Update Password"})]}):(0,Ae.jsxs)("form",{onSubmit:t=>{t.preventDefault(),s===a?e(r,s):al.error("New password and confirm password must be the same")},children:[(0,Ae.jsx)("div",{className:"row",children:(0,Ae.jsxs)("div",{className:"col-md-6 mt-2",children:[(0,Ae.jsx)("label",{className:"mb-1",children:(0,Ae.jsx)("b",{children:"Current Password"})}),(0,Ae.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,i)})]})}),(0,Ae.jsxs)("div",{className:"row mb-4",children:[(0,Ae.jsxs)("div",{className:"col-md-6 mt-4",children:[(0,Ae.jsx)("label",{className:"mb-1",children:(0,Ae.jsx)("b",{children:"New Password"})}),(0,Ae.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,o)})]}),(0,Ae.jsxs)("div",{className:"col-md-6 mt-4",children:[(0,Ae.jsx)("label",{className:"mb-1",children:(0,Ae.jsx)("b",{children:"Confirm Password"})}),(0,Ae.jsx)("input",{className:"form-control",type:"password",onChange:e=>l(e,c)})]})]}),(0,Ae.jsx)("button",{className:"btn btnTheme",type:"submit",style:{width:"fit-content",background:"var(--theme-color)"},children:"Update Password"})]})]})})}),(0,Ae.jsx)(Ho,{})]})})})]})},jA=()=>{const{serviceList:e,getSubServiceList:t,subServiceList:n,subServiceLoading:r}=Kr(),i=$();return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"Add Post"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:"Add Post"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{className:"card",children:[(0,Ae.jsx)("div",{className:"card card-header",children:(0,Ae.jsx)("h5",{children:"CHOOSE A CATEGORY"})}),(0,Ae.jsx)("div",{className:"card card-body border-0",style:{minHeight:"500px"},children:(0,Ae.jsx)("div",{className:"postCategoryBx",children:Array.isArray(e)&&e.map(((e,s)=>(0,Ae.jsxs)("div",{className:"dropend",children:[(0,Ae.jsx)("button",{type:"button",className:"dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:()=>{return n=e._id,void t(n);var n},children:e.title}),(0,Ae.jsx)("ul",{className:"dropdown-menu",style:{maxHeight:"250px"},children:(0,Ae.jsx)(Ae.Fragment,{children:r?(0,Ae.jsx)("div",{className:"spinner-border text-primary text-center",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})}):(0,Ae.jsx)(Ae.Fragment,{children:Array.isArray(n)&&n.map((t=>(0,Ae.jsx)("li",{children:(0,Ae.jsx)(No,{className:"dropdown-item",onClick:()=>((e,t)=>{try{i("/add-title",{state:{servicecategories:e,subservicecat:t}})}catch(pv){console.log(pv)}})(e._id,t._id),children:null===t||void 0===t?void 0:t.title})},t._id)))})})})]},s)))})})]})}),(0,Ae.jsx)(Ho,{})]})})})]})},UA=()=>{const{wishList:e,wishListRemove:t,listLoading:r}=Kr(),[i,s]=(0,n.useState)(1),o=Math.ceil(e.length/1),a=e.slice(1*(i-1),1*i);return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"Wishlist"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:"Wishlist"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-3",children:(0,Ae.jsx)(SO,{})}),(0,Ae.jsx)("div",{className:"col-md-7",children:(0,Ae.jsx)("div",{className:"card border-0",children:(0,Ae.jsxs)("div",{className:"card card-body border-0",children:[(0,Ae.jsx)("h2",{className:"text24 mb-1",children:"Wishlist"}),(0,Ae.jsx)("p",{className:"text-muted mb-1",children:"Here you can see your wishlist items."}),(0,Ae.jsx)("hr",{className:"mt0"}),r.WishList?Array.from({length:3}).map(((e,t)=>(0,Ae.jsx)(uh,{},t))):0===e.length?(0,Ae.jsx)(hh,{des:"Add a post, to See your Post Thank you!."}):a.map(((e,n)=>(0,Ae.jsx)("div",{className:"card mb-3 myPostItem",children:(0,Ae.jsxs)("div",{className:"row g-0",children:[(0,Ae.jsx)("div",{className:"col-md-4",children:(0,Ae.jsx)(Ie,{to:"/product/wishlist/".concat(e._id),className:"imgBx",children:(0,Ae.jsx)("img",{src:e.image,className:"img-fluid rounded-start",alt:e.title,style:{height:"200px"}})})}),(0,Ae.jsx)("div",{className:"col-md-8",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("div",{className:"row",children:(0,Ae.jsx)("div",{className:"col-md-9",children:(0,Ae.jsx)("h5",{className:"card-title mb-1",children:e.title})})}),(0,Ae.jsx)("p",{className:"card-text mb-0",children:e.description}),(0,Ae.jsx)("hr",{className:"mb-2 mt-1"}),(0,Ae.jsxs)("button",{className:"btn btn-danger btn-sm",onClick:()=>(e=>{t(e)})(e._id),children:[(0,Ae.jsx)("i",{className:"fa-sharp fa-solid fa-trash mx-2"}),"Remove"]})]})})]})},n))),(0,Ae.jsx)("div",{align:"center",children:(0,Ae.jsx)(Fu,{count:o,page:i,onChange:(e,t)=>{s(t)},color:"primary",variant:"outlined",shape:"rounded",className:"mt-3"})})]})})}),(0,Ae.jsx)("div",{className:"col-md-2",children:(0,Ae.jsx)(Ho,{})})]})})})]})};var FA;function BA(e){if((!FA&&0!==FA||e)&&vt){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),FA=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return FA}const VA=n.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Je(r,"modal-body"),(0,Ae.jsx)(i,{ref:t,className:Pe()(n,r),...s})}));VA.displayName="ModalBody";const GA=VA,HA=n.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:i,centered:s,size:o,fullscreen:a,children:c,scrollable:l,...d}=e;n=Je(n,"modal");const u="".concat(n,"-dialog"),h="string"===typeof a?"".concat(n,"-fullscreen-").concat(a):"".concat(n,"-fullscreen");return(0,Ae.jsx)("div",{...d,ref:t,className:Pe()(u,r,o&&"".concat(n,"-").concat(o),s&&"".concat(u,"-centered"),l&&"".concat(u,"-scrollable"),a&&h),children:(0,Ae.jsx)("div",{className:Pe()("".concat(n,"-content"),i),children:c})})}));HA.displayName="ModalDialog";const WA=HA,zA=n.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Je(r,"modal-footer"),(0,Ae.jsx)(i,{ref:t,className:Pe()(n,r),...s})}));zA.displayName="ModalFooter";const qA=zA,KA=n.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:s=!1,...o}=e;return n=Je(n,"modal-header"),(0,Ae.jsx)(Gn,{ref:t,...o,className:Pe()(r,n),closeLabel:i,closeButton:s})}));KA.displayName="ModalHeader";const YA=KA,JA=zn("h4"),XA=n.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=JA,...s}=e;return r=Je(r,"modal-title"),(0,Ae.jsx)(i,{ref:t,className:Pe()(n,r),...s})}));XA.displayName="ModalTitle";const ZA=XA;function QA(e){return(0,Ae.jsx)(On,{...e,timeout:null})}function $A(e){return(0,Ae.jsx)(On,{...e,timeout:null})}const ek=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:i,style:s,dialogClassName:o,contentClassName:a,children:c,dialogAs:l=WA,"data-bs-theme":d,"aria-labelledby":u,"aria-describedby":h,"aria-label":p,show:f=!1,animation:m=!0,backdrop:g=!0,keyboard:_=!0,onEscapeKeyDown:v,onShow:y,onHide:E,container:b,autoFocus:T=!0,enforceFocus:S=!0,restoreFocus:w=!0,restoreFocusOptions:C,onEntered:R,onExit:I,onExiting:N,onEnter:O,onEntering:A,onExited:k,backdropClassName:x,manager:P,...D}=e;const[L,M]=(0,n.useState)({}),[j,U]=(0,n.useState)(!1),F=(0,n.useRef)(!1),B=(0,n.useRef)(!1),V=(0,n.useRef)(null),[G,H]=Ur(),W=xt(t,H),z=zt(E),q=Xe();r=Je(r,"modal");const K=(0,n.useMemo)((()=>({onHide:z})),[z]);function Y(){return P||rr({isRTL:q})}function J(e){if(!vt)return;const t=Y().getScrollbarWidth()>0,n=e.scrollHeight>$e(e).documentElement.clientHeight;M({paddingRight:t&&!n?BA():void 0,paddingLeft:!t&&n?BA():void 0})}const X=zt((()=>{G&&J(G.dialog)}));sn((()=>{St(window,"resize",X),null==V.current||V.current()}));const Z=()=>{F.current=!0},Q=e=>{F.current&&G&&e.target===G.dialog&&(B.current=!0),F.current=!1},$=()=>{U(!0),V.current=Rt(G.dialog,(()=>{U(!1)}))},ee=e=>{"static"!==g?B.current||e.target!==e.currentTarget?B.current=!1:null==E||E():(e=>{e.target===e.currentTarget&&$()})(e)},te=(0,n.useCallback)((e=>(0,Ae.jsx)("div",{...e,className:Pe()("".concat(r,"-backdrop"),x,!m&&"show")})),[m,x,r]),ne={...s,...L};ne.display="block";return(0,Ae.jsx)(Ln.Provider,{value:K,children:(0,Ae.jsx)(Rn,{show:f,ref:W,backdrop:g,container:b,keyboard:!0,autoFocus:T,enforceFocus:S,restoreFocus:w,restoreFocusOptions:C,onEscapeKeyDown:e=>{_?null==v||v(e):(e.preventDefault(),"static"===g&&$())},onShow:y,onHide:E,onEnter:(e,t)=>{e&&J(e),null==O||O(e,t)},onEntering:(e,t)=>{null==A||A(e,t),Tt(window,"resize",X)},onEntered:R,onExit:e=>{null==V.current||V.current(),null==I||I(e)},onExiting:N,onExited:e=>{e&&(e.style.display=""),null==k||k(e),St(window,"resize",X)},manager:Y(),transition:m?QA:void 0,backdropTransition:m?$A:void 0,renderBackdrop:te,renderDialog:e=>(0,Ae.jsx)("div",{role:"dialog",...e,style:ne,className:Pe()(i,r,j&&"".concat(r,"-static"),!m&&"show"),onClick:g?ee:void 0,onMouseUp:Q,"data-bs-theme":d,"aria-label":p,"aria-labelledby":u,"aria-describedby":h,children:(0,Ae.jsx)(l,{...D,onMouseDown:Z,className:o,contentClassName:a,children:c})})})})}));ek.displayName="Modal";const tk=Object.assign(ek,{Body:GA,Header:YA,Title:ZA,Footer:qA,Dialog:WA,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var nk,rk="https://js.stripe.com/v3",ik=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,sk="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",ok=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(rk).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},ak=null,ck=null,lk=null,dk=function(e){return null!==ak?ak:(ak=new Promise((function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(sk),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(rk,'"]')),t=0;t<e.length;t++){var n=e[t];if(ik.test(n.src))return n}return null}();if(r&&e)console.warn(sk);else if(r){if(r&&null!==lk&&null!==ck){var i;r.removeEventListener("load",lk),r.removeEventListener("error",ck),null===(i=r.parentNode)||void 0===i||i.removeChild(r),r=ok(e)}}else r=ok(e);lk=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),ck=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(n),r.addEventListener("load",lk),r.addEventListener("error",ck)}catch(pv){return void n(pv)}else t(null)})),ak.catch((function(e){return ak=null,Promise.reject(e)})))},uk=!1,hk=function(){return nk||(nk=dk(null).catch((function(e){return nk=null,Promise.reject(e)})),nk)};Promise.resolve().then((function(){return hk()})).catch((function(e){uk||console.warn(e)}));var pk=__webpack_require__(3393);function fk(){const e=(0,pk.useStripe)(),t=(0,pk.useElements)(),[r,i]=(0,n.useState)(null),[s,o]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(!e)return;const t=new URLSearchParams(window.location.search).get("payment_intent_client_secret");t&&e.retrievePaymentIntent(t).then((e=>{let{paymentIntent:t}=e;switch(t.status){case"succeeded":i("Payment succeeded!");break;case"processing":i("Your payment is processing.");break;case"requires_payment_method":i("Your payment was not successful, please try again.");break;default:i("Something went wrong.")}}))}),[e]);return(0,Ae.jsxs)("form",{id:"payment-form",onSubmit:async n=>{if(n.preventDefault(),!e||!t)return;o(!0);const r=await e.confirmPayment({elements:t,confirmParams:{return_url:"http://localhost:3000"}});console.log("payment data",r);const{error:s}=r;"card_error"===s.type||"validation_error"===s.type?i(s.message):i("An unexpected error occurred."),o(!1)},children:[(0,Ae.jsx)(pk.PaymentElement,{id:"payment-element",options:{layout:"tabs"}}),(0,Ae.jsx)("button",{disabled:s||!e||!t,id:"submit",children:(0,Ae.jsx)("span",{id:"button-text",children:s?(0,Ae.jsx)("div",{className:"spinner",id:"spinner"}):"Pay now"})}),r&&(0,Ae.jsx)("div",{id:"payment-message",children:r})]})}const mk=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];uk=!0;var r=Date.now();return hk().then((function(e){return function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"3.3.0",startTime:t})}(r,n),r}(e,t,r)}))}("pk_test_51BTUDGJAJfZb9HEBwDg86TN1KNprHjkfipXmEDMb0gSCassK5T3ZfxsAbcgKVmAIXF7oZ6ItlZZbXO6idTHE67IM007EwQ4uN3");const gk=function(){const[e,t]=(0,n.useState)("");(0,n.useEffect)((()=>{fetch("/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:"xl-tshirt"}]})}).then((e=>e.json())).then((e=>t(e.clientSecret||"")))}),[]);const r={clientSecret:e,appearance:{theme:"stripe"}};return(0,Ae.jsx)("div",{children:e&&(0,Ae.jsx)(pk.Elements,{options:r,stripe:mk,children:(0,Ae.jsx)(fk,{})})})},_k=()=>{const{getUserplan:e,packagesList:t}=Kr(),[r,i]=(0,n.useState)(0),[s,o]=(0,n.useState)(!1),[a,c]=(0,n.useState)(!1);(0,n.useEffect)((()=>{(async()=>{o(!0);try{await e()}catch(pv){console.error("Error fetching data:",pv)}finally{o(!1)}})()}),[]);const l=()=>{c(!0)};return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(cl,{title:"packages"}),(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-3",children:(0,Ae.jsx)(SO,{})}),(0,Ae.jsx)("div",{className:"col-md-7",children:(0,Ae.jsx)("div",{className:"card border-0",children:(0,Ae.jsxs)("div",{className:"card card-body border-0",children:[(0,Ae.jsx)("h2",{className:"titleText pb-2",children:"Upgrade your membership to premium"}),!1===s?(0,Ae.jsx)("div",{className:"priceTabBx",children:(0,Ae.jsxs)("div",{className:"innerBx",children:[(0,Ae.jsx)("div",{className:"nav flex-column nav-pills col-md-4",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:Array.isArray(t)&&t.map(((e,t)=>(0,Ae.jsxs)("button",{className:"nav-link ".concat(t===r?"active":""),id:"".concat(e.title,"-tab"),onClick:()=>i(t),children:[(0,Ae.jsx)("b",{children:e.title}),(0,Ae.jsx)("br",{}),(0,Ae.jsxs)("small",{children:[e.no_of_months," Months' Access from Date Of Upgrade"]})]},t)))}),(0,Ae.jsx)("div",{className:"tab-content col-md-8",id:"v-pills-tabContent",children:Array.isArray(t)&&t.map(((e,t)=>(0,Ae.jsxs)("div",{className:"tab-pane fade ".concat(t===r?"show active":""),id:"".concat(e.title),role:"tabpanel","aria-labelledby":"".concat(e.title,"-tab"),children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-9",children:[(0,Ae.jsx)("h2",{children:e.title}),(0,Ae.jsxs)("p",{className:"text-muted m0",children:[(0,Ae.jsxs)("b",{children:[e.no_of_months," Months' Access from Date Of Upgrade"]}),(0,Ae.jsx)("br",{}),"You thrive on interactive learning and personalised feedback from Link teacher."," "]})]}),(0,Ae.jsx)("div",{className:"col-md-3",children:(0,Ae.jsxs)("h1",{className:"theme-text",children:["\u20ac",e.amount]})})]}),(0,Ae.jsx)("hr",{className:"mt-2 mb-2"}),(0,Ae.jsx)("ul",{children:Array.isArray(e.benefit)&&e.benefit.map(((e,t)=>(0,Ae.jsx)("li",{children:e},t)))}),"Free Plan"===e.title?"":(0,Ae.jsx)("button",{className:"btn btnTheme",style:{background:"var(--theme-color)"},onClick:l,children:(0,Ae.jsx)("b",{children:"Upgrade Packages"})})]},t)))})]})}):(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status"})})]})})}),(0,Ae.jsx)(Ho,{})]})})}),(0,Ae.jsxs)(tk,{show:a,size:"lg",onHide:()=>c(!1),children:[(0,Ae.jsx)(tk.Header,{closeButton:!0,children:(0,Ae.jsx)(tk.Title,{children:"Upgrade Modal"})}),(0,Ae.jsx)(tk.Body,{children:(0,Ae.jsx)(gk,{})}),(0,Ae.jsxs)(tk.Footer,{children:[(0,Ae.jsx)(No,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),(0,Ae.jsx)(No,{variant:"primary",onClick:()=>{c(!1)},children:"Upgrade"})]})]})]})},vk=()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),2e3),t(!1)})()}),[]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"Contact Us"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:"Contact Us"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),!1===e?(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Ae.jsxs)("div",{className:"col-md-10",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-sm-6",children:(0,Ae.jsxs)("div",{className:"card",children:[(0,Ae.jsx)("div",{className:"card-header",children:(0,Ae.jsx)("h4",{className:"m0",children:"Get in touch with us"})}),(0,Ae.jsxs)("form",{className:"card-body",children:[(0,Ae.jsx)("div",{className:"form-group mb-4",children:(0,Ae.jsx)("input",{type:"text",className:"form-control",id:"name",name:"nm",placeholder:"Name",required:"",autoFocus:""})}),(0,Ae.jsx)("div",{className:"form-group form_left mb-4",children:(0,Ae.jsx)("input",{type:"email",className:"form-control",id:"email",name:"em",placeholder:"Email",required:""})}),(0,Ae.jsx)("div",{className:"form-group mb-4",children:(0,Ae.jsx)("input",{type:"text",className:"form-control",id:"phone",maxLength:10,placeholder:"Mobile No.",required:""})}),(0,Ae.jsxs)("div",{className:"form-group mb-4",children:[(0,Ae.jsx)("textarea",{className:"form-control textarea-contact",rows:5,id:"comment",name:"FB",placeholder:"Type Your Message/Feedback here...",required:"",defaultValue:""}),(0,Ae.jsx)("br",{}),(0,Ae.jsxs)("button",{className:"btn btnTheme",type:"submit",style:{background:"var(--theme-color)"},children:[" ","Submit Message ",(0,Ae.jsx)("span",{className:"fa fa-send"})," "]})]})]})]})}),(0,Ae.jsx)("div",{className:"col-sm-6",children:(0,Ae.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d5071.152286297458!2d7.677349994282403!3d50.542054854758454!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47be85ab5e065037%3A0x2116fb58113383e5!2s56269%20Dierdorf-Br%C3%BCckrachdorf%2C%20Germany!5e0!3m2!1sen!2sin!4v1702715002839!5m2!1sen!2sin",width:"100%",height:480,style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]}),(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-4",children:(0,Ae.jsx)("div",{className:"addIfoBx",children:(0,Ae.jsx)("div",{className:"card mt-3",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("i",{className:"fa fa-envelope mb-3"}),(0,Ae.jsx)("h5",{className:"card-title",children:"Email Id"}),(0,Ae.jsx)("p",{className:"card-text",children:(0,Ae.jsx)("a",{to:"mailto:support@dzital.de",children:"ak@dzital.com"})})]})})})}),(0,Ae.jsx)("div",{className:"col-md-4",children:(0,Ae.jsx)("div",{className:"addIfoBx",children:(0,Ae.jsx)("div",{className:"card mt-3",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("i",{className:"fa fa-phone mb-3"}),(0,Ae.jsx)("h5",{className:"card-title",children:"Phone No."}),(0,Ae.jsx)("p",{className:"card-text",children:(0,Ae.jsx)("a",{to:"tel:+4901728250794",children:"+4901728250794"})})]})})})}),(0,Ae.jsx)("div",{className:"col-md-4",children:(0,Ae.jsx)("div",{className:"addIfoBx",children:(0,Ae.jsx)("div",{className:"card mt-3",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("i",{className:"fa fa-location-dot mb-3"}),(0,Ae.jsx)("h5",{className:"card-title",children:"Office Address"}),(0,Ae.jsx)("p",{className:"card-text",children:"P\xf6seldorfer Weg 13, 20148 Hamburg"})]})})})})]})]}),(0,Ae.jsx)(Ho,{})]})})})]})},yk=()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),2e3),t(!1)})()}),[]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"Privacy Policy"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:"Privacy Policy"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),!1===e?(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("h3",{children:"Privacy Policy"}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),(0,Ae.jsx)(Ho,{})]})})})]})},Ek=()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),1500),t(!1)})()}),[]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"Terms & Conditions"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:"Terms & Conditions"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),!1===e?(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("h3",{children:"Terms & Conditions"}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),(0,Ae.jsx)(Ho,{})]})})})]})},bk=e=>{let{item:t}=e;const{wishListAdd:r,wishListRemove:i,userData:s}=Kr(),[o,a]=(0,n.useState)(t.isWishlist);return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)("div",{className:"col col-lg-4 proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",style:{height:"350px"},children:[(0,Ae.jsxs)("div",{className:"imgBx",children:[(0,Ae.jsx)(Ie,{to:"/Electronics-detail/".concat(t._id),children:(0,Ae.jsx)("img",{src:t.photo,className:"card-img-top allImg",alt:""})}),s._id===t.userId?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{o?i(e):r(e),a(!o)})(t.product_id),children:(0,Ae.jsx)("i",{className:"fa ".concat(o?"fa-heart text-danger":"fa-heart-o")})})]}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h5",{className:"card-title",children:(0,Ae.jsx)(Ie,{to:"/Electronics-detail/".concat(t._id),children:t.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description})]})]})})})},Tk=e=>{let{onFilter:t}=e;const{filterAttributeList:n}=Kr();return(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsxs)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary sideBarNav text14",children:[(0,Ae.jsxs)("div",{className:"titelBx",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:[(0,Ae.jsx)(Ie,{className:"navbar-brand",to:"#sideBarCollapse",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sideBarCollapse","aria-controls":"sideBarCollapse",children:"Short By Filter"}),(0,Ae.jsx)("i",{className:"navbar-toggler",children:(0,Ae.jsx)("span",{className:"fa fa-chevron-down"})})]}),(0,Ae.jsx)("div",{className:"collapse navbar-collapse",id:"sideBarCollapse",children:(0,Ae.jsx)("div",{className:"customeSidebar",children:Array.isArray(n)&&n.map((e=>{const n=Array.isArray(e.options)&&e.options.length>0?e.options:Array.isArray(e.attribute_values)&&e.attribute_values.length>0?e.attribute_values:null;return(0,Ae.jsx)("div",{children:n&&n.length>0&&(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("div",{className:"headBx",children:e.attribute},e._id),(0,Ae.jsx)("div",{className:"listBx p0",children:n.map((n=>(0,Ae.jsx)("ul",{className:"list-group list-group-flush",children:(0,Ae.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:(0,Ae.jsxs)("label",{children:[(0,Ae.jsx)("input",{type:"checkbox",onChange:r=>{t(r,e.attribute,n.value)}})," ",n.value]})})},n._id)))})]})},e._id)}))})})]})})},Sk=()=>{const{electronicsList:e,getAttributeFilterList:t,totalItem:r,getElectronicsProduct:i,listLoading:s}=Kr(),[o,a]=(0,n.useState)(1),c=Math.ceil((null===r||void 0===r?void 0:r.Electronics)/12),l=Z(),d=new URLSearchParams(l.search),u=d.get("sub_category"),h=d.get("category_id"),p=d.get("search"),[f,m]=(0,n.useState)([]),g={keyword_search:p,page:o,limit:12};(0,n.useEffect)((()=>{(async()=>{u?await i(g,u,f):await i(g,"",f)})()}),[p,o,u,f]),(0,n.useEffect)((()=>{(async()=>{u&&await t({sub:u}),h&&await t({main:h})})()}),[p,u,h]);return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(cl,{title:"Electronics List Page",param:"Electronics"}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-2",children:(0,Ae.jsx)(Tk,{onFilter:(e,t,n)=>{if(!0===e.target.checked){const e=f.findIndex((e=>e.attribute===t));if(-1!==e){const t=[...f];t[e].value.push(n),m(t)}else{const e=[...f,{attribute:t,value:[n]}];m(e)}}else{const e=f.map((e=>(e.attribute===t&&(e.value=e.value.filter((e=>e!==n))),e))).filter((e=>e.value.length>0));m(e)}}})}),(0,Ae.jsxs)("div",{className:"col-md-8",children:[(0,Ae.jsx)("div",{className:"row ",children:s.Electronics?Array.from({length:6}).map(((e,t)=>(0,Ae.jsx)(dh,{col:4},t))):0===e.length?(0,Ae.jsx)(hh,{des:"Please check the spelling or try searching for something else. Thank you!"}):Array.isArray(e)&&e.map(((e,t)=>(0,Ae.jsx)(bk,{item:e},t)))}),(0,Ae.jsx)("div",{align:"center",children:(0,Ae.jsx)(ch,{spacing:2,children:(0,Ae.jsx)(Fu,{count:c,page:o,onChange:(e,t)=>a(t),color:"primary",variant:"outlined",shape:"rounded",siblingCount:0,boundaryCount:0})})})]}),(0,Ae.jsx)(Ho,{})]})})})]})},wk=e=>{let{initialDetail:t}=e;const{id:r}=te(),{getElectronicsProductDetails:i,electronicsItems:s,wishListAdd:o,wishListRemove:a,cartListAdd:c,getReletedProduct:l,reletedList:d,setElectronicsItems:u,userData:h}=Kr(),[p,f]=(0,n.useState)(!1),[m,g]=(0,n.useState)(1),[_,v]=(0,n.useState)(!1);(0,n.useEffect)((()=>{!t&&r&&(async()=>{await i(r)})(),t&&t.data&&t.data._id&&u(t)}),[r,t]);const{description:y,image_1:E,image_2:b,image_3:T,photo:S,product_id:w,title:C,attribute_values:R,_id:I,isWishlist:N,category_id:O,category_name:A,category_slug:k,sub_category_id:x,userId:P}=s.data||{},D=[S,E,b,T],L=e=>{if(!Array.isArray(R))return null;const t=R.find((t=>t.attribute===e));return t?t.value:null},M=L("Price"),j=L("Brand");(0,n.useEffect)((()=>{void 0!==N&&f(N)}),[N]);return(0,n.useEffect)((()=>{w&&O&&l(O,x,w)}),[w,O,x]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsx)("aside",{className:"row",children:(0,Ae.jsx)("div",{className:"col-md-12",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/".concat(k,"?category_id=").concat(O),children:A})}),(0,Ae.jsxs)("li",{className:"active",children:["Detail Page Of ",C]})]})})})})}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),s.isLoad&&(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!s.isLoad&&(0,Ae.jsxs)("div",{className:"col-md-10",children:[(0,Ae.jsx)("div",{className:"card",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-5",children:(0,Ae.jsx)("div",{className:"swiper mainBannerSwiper",children:(0,Ae.jsx)(dc,{loop:!0,navigation:!0,modules:[hc],className:"mySwiper",children:Array.isArray(D)&&D.map(((e,t)=>(0,Ae.jsx)(uc,{children:(0,Ae.jsx)("div",{className:"swiper-slide",children:(0,Ae.jsx)("img",{src:e,alt:""})})},t)))})})}),(0,Ae.jsxs)("div",{className:"col-md-7",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Ae.jsx)("h2",{children:j||""})}),(0,Ae.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Ae.jsx)("h4",{className:"text-muted",children:C})}),(0,Ae.jsxs)("div",{className:"col-md-2 flex col-sm-12",align:"right",children:[(0,Ae.jsxs)("div",{className:"cursor-pointer",children:[(0,Ae.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{v(!0)}}),(0,Ae.jsx)(RO,{isOpen:_,onClose:()=>{v(!1)}})]}),h._id===P?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{p?(a(e),f(!1)):(o(e),f(!0))})(w),children:(0,Ae.jsx)("i",{className:!0===p?"fa fa-heart text-danger":"fa fa-heart-o"})})]})]}),(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-5 col-sm-12",children:[(0,Ae.jsx)("h5",{className:"text-success",children:"Special price"}),(0,Ae.jsx)("h5",{children:(0,Ae.jsxs)("span",{className:"text28",children:[(0,Ae.jsx)("i",{className:"fa fa-inr",children:" "})," ",M||"Not Disclosed"]})})]}),h._id===P?"":(0,Ae.jsx)(CO,{})]}),(0,Ae.jsx)("div",{className:"col-md-7 d-flex gap-5 align-items-center ",children:h._id===P?"":(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-5",children:(0,Ae.jsxs)("div",{className:"input-group",children:[(0,Ae.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{m>1&&g(m-1)},children:"-"}),(0,Ae.jsx)("input",{type:"number",className:"form-control",value:m,readOnly:!0}),(0,Ae.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{g(m+1)},children:"+"})]})}),(0,Ae.jsx)("div",{className:"col-md-5",children:(0,Ae.jsx)("button",{className:"btn btn-primary text-white",onClick:()=>{M?c(w,m,+M):al.warning("Price is not defined")},children:"Add To Cart"})})]})})]})]}),(0,Ae.jsx)("h5",{children:"Product Description"}),(0,Ae.jsx)("hr",{}),(0,Ae.jsx)("p",{children:y}),Array.isArray(R)&&R.map((e=>(0,Ae.jsxs)("p",{children:[(0,Ae.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]},I)}),(0,Ae.jsx)("h4",{className:"mt20",children:"Related Products"}),(0,Ae.jsx)("hr",{className:"mt0"}),(0,Ae.jsx)("div",{className:"swiper productSlider",children:(0,Ae.jsx)(dc,{loop:!0,slidesPerView:5,spaceBetween:20,keyboard:{enabled:!0},autoplay:{delay:3e3},breakpoints:{320:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:3,spaceBetween:15},768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:5,spaceBetween:15}},navigation:!0,modules:[hc],className:"mySwiper",children:d.map((e=>(0,Ae.jsx)(uc,{children:(0,Ae.jsx)("div",{className:"swiper-slide proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",children:[(0,Ae.jsx)("div",{className:"imgBx",children:(0,Ae.jsx)(Ie,{to:"/product/related-product/".concat(e._id),children:(0,Ae.jsx)("img",{src:e.image,className:"card-img-top",alt:""})})}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h4",{className:"card-title",children:(0,Ae.jsx)(Ie,{children:e.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})})},e._id)))})})]}),(0,Ae.jsx)(Ho,{})]})})})]})},Ck=()=>(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("div",{className:"d-flex justify-content-center item-center",style:{position:"absolute",textAlign:"center",top:"35%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,Ae.jsxs)("p",{style:{color:"#77ced9",fontSize:"60px",fontWeight:"bold"},children:[(0,Ae.jsx)("img",{src:"assets/images/g-logo.png",alt:"Dzital",style:{width:"50px",height:"50px",marginBottom:"10px"}}),"zital"]})}),(0,Ae.jsx)("hr",{}),(0,Ae.jsxs)("svg",{style:{left:"50%",top:"50%",position:"absolute",transform:"translate(-50%, -50%) matrix(1, 0, 0, 1, 0, 0)"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 187.3 93.7",height:"300px",width:"400px",children:[(0,Ae.jsx)("path",{d:"M93.9,46.4c9.3,9.5,13.8,17.9,23.5,17.9s17.5-7.8,17.5-17.5s-7.8-17.6-17.5-17.5c-9.7,0.1-13.3,7.2-22.1,17.1 \t\t\t\tc-8.9,8.8-15.7,17.9-25.4,17.9s-17.5-7.8-17.5-17.5s7.8-17.5,17.5-17.5S86.2,38.6,93.9,46.4z",strokeMiterlimit:10,strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:4,fill:"none",id:"outline",stroke:"#77ced9"}),(0,Ae.jsx)("path",{d:"M93.9,46.4c9.3,9.5,13.8,17.9,23.5,17.9s17.5-7.8,17.5-17.5s-7.8-17.6-17.5-17.5c-9.7,0.1-13.3,7.2-22.1,17.1 \t\t\t\tc-8.9,8.8-15.7,17.9-25.4,17.9s-17.5-7.8-17.5-17.5s7.8-17.5,17.5-17.5S86.2,38.6,93.9,46.4z",strokeMiterlimit:10,strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:4,stroke:"#4E4FEB",fill:"none",opacity:"0.05",id:"outline-bg"})]})]}),Rk=e=>{let{initialDetail:t}=e;const{id:r}=te(),{getFashionBeautyDetails:i,fashionDetail:s,wishListAdd:o,wishListRemove:a,getReletedProduct:c,reletedList:l,cartListAdd:d,setFashionDetail:u,userData:h}=Kr(),[p,f]=(0,n.useState)(1),[m,g]=(0,n.useState)(!1),[_,v]=(0,n.useState)(!1);(0,n.useEffect)((()=>{!t&&r&&(async()=>{await i(r)})(),t&&t.data&&t.data._id&&u(t)}),[r,t]);const{description:y,attribute_values:E,image_1:b,image_2:T,image_3:S,photo:w,userId:C,product_id:R,title:I,isWishlist:N,category_name:O,category_id:A,category_slug:k,sub_category_id:x}=s.data||{},P=[w,b,T,S],D=e=>{if(!Array.isArray(E))return null;const t=E.find((t=>t.attribute===e));return t?t.value:null},L=D("Price"),M=D("Brand");(0,n.useEffect)((()=>{void 0!==N&&g(N)}),[N]);return(0,n.useEffect)((()=>{R&&A&&c(A,x,R)}),[R,A,x]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsx)("aside",{className:"row",children:(0,Ae.jsx)("div",{className:"col-md-12",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/".concat(k,"?category_id=").concat(A),children:O})}),(0,Ae.jsxs)("li",{className:"active",children:[" Detail Page of ",I]})]})})})})}),(0,Ae.jsx)("section",{className:"midBody bgtheme",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),s.isLoad&&(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}),!s.isLoad&&(0,Ae.jsxs)("div",{className:"col-md-10",children:[(0,Ae.jsx)("div",{className:"card",children:(0,Ae.jsx)("div",{className:"card-body",children:(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-5",children:(0,Ae.jsx)("div",{children:(0,Ae.jsx)(xO,{img:P})})}),(0,Ae.jsxs)("div",{className:"col-md-7",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-10 col-sm-12",children:(0,Ae.jsx)("h3",{children:M||""})}),(0,Ae.jsxs)("div",{className:"col-md-2 col-sm-12",align:"right",children:[h._id===C?"":(0,Ae.jsx)("div",{className:"iconWish",onClick:()=>(e=>{m?(a(e),g(!1)):(o(e),g(!0))})(R),children:(0,Ae.jsx)("i",{className:!0===m?"fa fa-heart text-danger":"fa fa-heart-o"})}),(0,Ae.jsxs)("div",{className:"iconWish",children:[(0,Ae.jsx)("i",{className:"fa fa-share-alt text20 ",onClick:()=>{v(!0)}}),(0,Ae.jsx)(RO,{isOpen:_,onClose:()=>{v(!1)}})]})]}),(0,Ae.jsx)("h4",{className:"text-muted",children:I}),(0,Ae.jsx)("h5",{className:"text-success",children:"Special price"}),(0,Ae.jsx)("h5",{children:(0,Ae.jsxs)("span",{className:"text28",children:[(0,Ae.jsx)("i",{className:"fa fa-inr",children:" "})," ",L||"Not Disclosed"]})})]}),(0,Ae.jsx)("div",{className:"row",children:h._id===C?"":(0,Ae.jsx)(CO,{})}),(0,Ae.jsx)("div",{className:"col-md-7 d-flex gap-5 align-items-center ",children:h._id===C?"":(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-5",children:(0,Ae.jsxs)("div",{className:"input-group",children:[(0,Ae.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{p>1&&f(p-1)},children:"-"}),(0,Ae.jsx)("input",{type:"number",className:"form-control",value:p,readOnly:!0}),(0,Ae.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{f(p+1)},children:"+"})]})}),(0,Ae.jsx)("div",{className:"col-md-5",children:(0,Ae.jsx)("button",{className:"btn btn-primary text-white",onClick:()=>{L?d(R,p,+L):al.warning("Price is not defined")},children:"Add To Cart"})})]})}),(0,Ae.jsx)("h4",{className:"mt-3",children:"product description"}),(0,Ae.jsx)("p",{align:"justify",children:y}),(0,Ae.jsx)("hr",{}),Array.isArray(E)&&E.map((e=>(0,Ae.jsxs)("p",{children:[(0,Ae.jsxs)("b",{children:[e.attribute," : "]}),e.value]},e._id)))]})]})})}),(0,Ae.jsx)("h4",{className:"mt20",children:"Related Products"}),(0,Ae.jsx)("hr",{className:"mt0"}),(0,Ae.jsx)("div",{className:"swiper productSlider",children:(0,Ae.jsx)(dc,{loop:!0,slidesPerView:5,spaceBetween:20,keyboard:{enabled:!0},autoplay:{delay:3e3},breakpoints:{320:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:3,spaceBetween:15},768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:5,spaceBetween:15}},navigation:!0,modules:[hc],className:"mySwiper",children:l.map((e=>(0,Ae.jsx)(uc,{children:(0,Ae.jsx)("div",{className:"swiper-slide proBx",children:(0,Ae.jsxs)("div",{className:"card mb-3",children:[(0,Ae.jsx)("div",{className:"imgBx",children:(0,Ae.jsx)(Ie,{to:"/product/related-product/".concat(e._id),children:(0,Ae.jsx)("img",{src:e.image,className:"card-img-top",alt:"",style:{height:"200px"}})})}),(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsx)("h4",{className:"card-title",children:(0,Ae.jsx)(Ie,{children:e.title})}),(0,Ae.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:e.description})]})]})})},e._id)))})})]}),(0,Ae.jsx)(Ho,{})]})})})]})},Ik=()=>{const{faq:e,getFaq:t}=Kr(),[r,i]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(async()=>{i(!0),await t(),i(!1)})()}),[]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"FAQ"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:"FAQ"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-1 adBx",children:(0,Ae.jsx)("div",{className:"sticky-top",children:(0,Ae.jsx)("img",{src:"assets/images/Ad.jpg",alt:""})})}),!0===r?(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-md-8",children:[(0,Ae.jsx)("h3",{className:"mb-3 text-center",children:"Frequently Asked Questions"}),(0,Ae.jsx)("div",{className:"accordion mt50",id:"accordionExample",children:Array.isArray(e)&&e.map(((e,t)=>(0,Ae.jsxs)("div",{className:"accordion-item",children:[(0,Ae.jsx)("h2",{className:"accordion-header",children:(0,Ae.jsx)("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#accordionItem".concat(t),"aria-expanded":0===t?"true":"false","aria-controls":"accordionItem".concat(t),children:e.question})}),(0,Ae.jsx)("div",{id:"accordionItem".concat(t),className:"accordion-collapse collapse ".concat(0===t?"show":""),"aria-labelledby":"accordionItem".concat(t),"data-bs-parent":"#accordionExample",children:(0,Ae.jsx)("div",{className:"accordion-body",children:(0,Ae.jsxs)("p",{align:"justify",children:[" ",null===e||void 0===e?void 0:e.answer," "]})})})]},e._id)))})]}),(0,Ae.jsx)("div",{className:"col-md-4",children:(0,Ae.jsx)("img",{src:"./assets/images/job-search.jpg",width:"100%",alt:""})})]})}),(0,Ae.jsx)("div",{className:"col-md-1 adBx mt50",children:(0,Ae.jsx)("div",{className:"sticky-top",children:(0,Ae.jsx)("img",{src:"assets/images/Ad.jpg",alt:""})})})]})})})]})};const Nk=function(){const{pathname:e}=Z();return(0,n.useEffect)((()=>{window.scrollTo(0,0)}),[e]),null};function Ok(){return(0,Ae.jsx)("div",{className:"App",children:(0,Ae.jsx)("div",{className:"container",children:(0,Ae.jsx)("div",{className:"row justify-content-center",children:(0,Ae.jsx)("div",{className:"col-md-4 text-center",children:(0,Ae.jsxs)("div",{className:"voiceCallWrap",children:[(0,Ae.jsx)("div",{className:"userBx",children:(0,Ae.jsx)("i",{className:"fa fa-user"})}),(0,Ae.jsx)("h3",{align:"center",children:"Mr. Rohit Modi"}),(0,Ae.jsx)("br",{}),(0,Ae.jsxs)("div",{className:"mt-5",children:[(0,Ae.jsx)("button",{class:"btn btn-success rounded rounded-5",type:"button",children:(0,Ae.jsx)("i",{class:"fa fa-phone"})}),"\xa0\xa0",(0,Ae.jsx)("button",{class:"btn btn-secondary rounded rounded-5",type:"button",children:(0,Ae.jsx)("i",{class:"fa fa-volume-xmark"})}),"\xa0\xa0",(0,Ae.jsx)("button",{class:"btn btn-danger rounded rounded-5",type:"button",children:(0,Ae.jsx)("i",{class:"fa-solid fa-phone-slash"})})]})]})})})})})}var Ak=__webpack_require__(9472),kk=__webpack_require__.n(Ak);const xk=()=>{var e,t;const{getMessageDetail:r,messageDetail:i,userData:s,getPeerUserDetail:o,peerUserData:a}=Kr(),[c,l]=(0,n.useState)(null),[d,u]=(0,n.useState)([]),[h,p]=(0,n.useState)(""),[f,m]=(0,n.useState)([]),[g,_]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1),[E,b]=(0,n.useState)(0),T=Z(),S=new URLSearchParams(T.search).get("peerUser"),w=async()=>{const e=s._id,t=i.data;if(e&&t&&c)try{await c.open({user:e,agoraToken:t}),console.log("Login successful"),_(!0),b(Date.now()+36e5)}catch(pv){console.error("Error logging in:",pv)}};(0,n.useEffect)((()=>{i&&i.data&&s&&s._id&&(!g||Date.now()>E)&&w()}),[i,s,c,g,E]);const C=async e=>{if(S){y(!0);try{const t=await e.getHistoryMessages({targetId:S,chatType:"singleChat",pageSize:20,searchDirection:"Last",searchOptions:{msgTypes:["txt"]}});u(t.messages)}catch(pv){console.error("Error fetching message history:",pv)}finally{y(!1)}}else console.error("peerUser is not defined")};(0,n.useEffect)((()=>{const e=new(kk().connection)({appKey:"711117188#1300350"});return e.addEventHandler("connection&message",{onConnected:()=>{console.log("Connect success!"),C(e)},onDisconnected:()=>{console.log("Logout success!"),_(!1)},onTextMessage:e=>{u((t=>[e,...t]))},onTokenWillExpire:()=>{console.log("Token is about to expire")},onTokenExpired:()=>{console.log("The token has expired"),_(!1),b(0)},onError:e=>{console.error("Error:",e)}}),l(e),()=>{e&&e.close()}}),[]),(0,n.useEffect)((()=>{c&&c.isOpened()&&S&&C(c)}),[c,S]);const R=async()=>{const e=S,t=h;if(!c||!c.isOpened()){console.error("User is not logged in.");try{await w()}catch(pv){return void console.error("Re-login failed:",pv)}}if(!e||!t)return void console.error("Peer ID and message are required.");const n={chatType:"singleChat",type:"txt",to:e,msg:t},r=kk().message.create(n);c.send(r).then((()=>{console.log("Message sent successfully"),m((e=>[...e,n])),p("")})).catch((e=>{console.error("Error sending message:",e)}))};return(0,n.useEffect)((()=>{r()}),[]),(0,n.useEffect)((()=>{S&&o(S)}),[S]),(0,Ae.jsx)("div",{className:"container",children:(0,Ae.jsx)("div",{className:"row clearfix",children:(0,Ae.jsx)("div",{className:"col-lg-12",children:(0,Ae.jsx)("div",{className:"card chat-app",children:(0,Ae.jsxs)("div",{className:"chat",children:[!0===v?(0,Ae.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:(0,Ae.jsx)(Jr,{animation:"border",variant:"info"})}):(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("div",{className:"chat-header clearfix",children:(0,Ae.jsx)("div",{className:"row",children:(0,Ae.jsxs)("div",{className:"col-lg-6",children:[(0,Ae.jsx)(Ie,{"data-toggle":"modal","data-target":"#view_info",children:(0,Ae.jsx)("img",{src:a.image,alt:"Dzital",height:40})}),(0,Ae.jsx)("div",{className:"chat-about",children:(0,Ae.jsx)("h6",{className:"m-b-0",children:a.name})})]})})}),(0,Ae.jsx)("div",{className:"chat-history",children:(0,Ae.jsxs)("ul",{className:"m-b-0",children:[null===d||void 0===d||null===(e=d.slice())||void 0===e||null===(t=e.reverse())||void 0===t?void 0:t.map(((e,t)=>(0,Ae.jsx)("li",{className:"clearfix",children:(0,Ae.jsx)("div",{className:e.from===s._id?"message other-message float-right":"message my-message float-left",children:e.msg})},t))),f.map(((e,t)=>(0,Ae.jsx)("li",{className:"clearfix",children:(0,Ae.jsx)("div",{className:"message other-message float-right",children:e.msg})},t)))]})})]}),(0,Ae.jsx)("div",{className:"chat-message clearfix",children:(0,Ae.jsxs)("div",{className:"input-group mb-0",children:[(0,Ae.jsx)("input",{type:"text",value:h,onChange:e=>p(e.target.value),className:"form-control",onKeyDown:e=>{"Enter"===e.key&&R()},placeholder:"Enter text here..."}),(0,Ae.jsx)("div",{className:"input-group-prepend",children:(0,Ae.jsx)("span",{className:"form-control",onClick:R,children:(0,Ae.jsx)("i",{className:"fa fa-send"})})})]})})]})})})})})};var Pk=e=>"checkbox"===e.type,Dk=e=>e instanceof Date,Lk=e=>null==e;const Mk=e=>"object"===typeof e;var jk=e=>!Lk(e)&&!Array.isArray(e)&&Mk(e)&&!Dk(e),Uk=e=>jk(e)&&e.target?Pk(e.target)?e.target.checked:e.target.value:e,Fk=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Bk=e=>{const t=e.constructor&&e.constructor.prototype;return jk(t)&&t.hasOwnProperty("isPrototypeOf")},Vk="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function Gk(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(Vk&&(e instanceof Blob||e instanceof FileList)||!n&&!jk(e))return e;if(t=n?[]:{},n||Bk(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=Gk(e[n]));else t=e}return t}var Hk=e=>Array.isArray(e)?e.filter(Boolean):[],Wk=e=>void 0===e,zk=(e,t,n)=>{if(!t||!jk(e))return n;const r=Hk(t.split(/[,[\].]+?/)).reduce(((e,t)=>Lk(e)?e:e[t]),e);return Wk(r)||r===e?Wk(e[t])?n:e[t]:r},qk=e=>"boolean"===typeof e;const Kk={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Yk={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Jk="max",Xk="min",Zk="maxLength",Qk="minLength",$k="pattern",ex="required",tx="validate";n.createContext(null);var nx=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const i=s;return t._proxyFormState[i]!==Yk.all&&(t._proxyFormState[i]=!r||Yk.all),n&&(n[i]=!0),e[i]}});return i},rx=e=>jk(e)&&!Object.keys(e).length,ix=(e,t,n,r)=>{n(e);const{name:i,...s}=e;return rx(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find((e=>t[e]===(!r||Yk.all)))},sx=e=>Array.isArray(e)?e:[e];function ox(e){const t=n.useRef(e);t.current=e,n.useEffect((()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}}),[e.disabled])}var ax=e=>"string"===typeof e,cx=(e,t,n,r,i)=>ax(e)?(r&&t.watch.add(e),zk(n,e,i)):Array.isArray(e)?e.map((e=>(r&&t.watch.add(e),zk(n,e)))):(r&&(t.watchAll=!0),n);var lx=e=>/^\w*$/.test(e),dx=e=>Hk(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ux=(e,t,n)=>{let r=-1;const i=lx(t)?[t]:dx(t),s=i.length,o=s-1;for(;++r<s;){const t=i[r];let s=n;if(r!==o){const n=e[t];s=jk(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}e[t]=s,e=e[t]}return e};var hx=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},px=e=>({isOnSubmit:!e||e===Yk.onSubmit,isOnBlur:e===Yk.onBlur,isOnChange:e===Yk.onChange,isOnAll:e===Yk.all,isOnTouch:e===Yk.onTouched}),fx=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));const mx=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const n=zk(e,i);if(n){const{_f:e,...s}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!r)break;if(e.ref&&t(e.ref,e.name)&&!r)break;mx(s,t)}else jk(s)&&mx(s,t)}}};var gx=(e,t,n)=>{const r=Hk(zk(e,n));return ux(r,"root",t[n]),ux(e,n,r),e},_x=e=>"file"===e.type,vx=e=>"function"===typeof e,yx=e=>{if(!Vk)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Ex=e=>ax(e),bx=e=>"radio"===e.type,Tx=e=>e instanceof RegExp;const Sx={value:!1,isValid:!1},wx={value:!0,isValid:!0};var Cx=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Wk(e[0].attributes.value)?Wk(e[0].value)||""===e[0].value?wx:{value:e[0].value,isValid:!0}:wx:Sx}return Sx};const Rx={isValid:!1,value:null};var Ix=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),Rx):Rx;function Nx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(Ex(e)||Array.isArray(e)&&e.every(Ex)||qk(e)&&!e)return{type:n,message:Ex(e)?e:"",ref:t}}var Ox=e=>jk(e)&&!Tx(e)?e:{value:e,message:""},Ax=async(e,t,n,r,i)=>{const{ref:s,refs:o,required:a,maxLength:c,minLength:l,min:d,max:u,pattern:h,validate:p,name:f,valueAsNumber:m,mount:g,disabled:_}=e._f,v=zk(t,f);if(!g||_)return{};const y=o?o[0]:s,E=e=>{r&&y.reportValidity&&(y.setCustomValidity(qk(e)?"":e||""),y.reportValidity())},b={},T=bx(s),S=Pk(s),w=T||S,C=(m||_x(s))&&Wk(s.value)&&Wk(v)||yx(s)&&""===s.value||""===v||Array.isArray(v)&&!v.length,R=hx.bind(null,f,n,b),I=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zk,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qk;const o=e?t:n;b[f]={type:e?r:i,message:o,ref:s,...R(e?r:i,o)}};if(i?!Array.isArray(v)||!v.length:a&&(!w&&(C||Lk(v))||qk(v)&&!v||S&&!Cx(o).isValid||T&&!Ix(o).isValid)){const{value:e,message:t}=Ex(a)?{value:!!a,message:a}:Ox(a);if(e&&(b[f]={type:ex,message:t,ref:y,...R(ex,t)},!n))return E(t),b}if(!C&&(!Lk(d)||!Lk(u))){let e,t;const r=Ox(u),i=Ox(d);if(Lk(v)||isNaN(v)){const n=s.valueAsDate||new Date(v),o=e=>new Date((new Date).toDateString()+" "+e),a="time"==s.type,c="week"==s.type;ax(r.value)&&v&&(e=a?o(v)>o(r.value):c?v>r.value:n>new Date(r.value)),ax(i.value)&&v&&(t=a?o(v)<o(i.value):c?v<i.value:n<new Date(i.value))}else{const n=s.valueAsNumber||(v?+v:v);Lk(r.value)||(e=n>r.value),Lk(i.value)||(t=n<i.value)}if((e||t)&&(I(!!e,r.message,i.message,Jk,Xk),!n))return E(b[f].message),b}if((c||l)&&!C&&(ax(v)||i&&Array.isArray(v))){const e=Ox(c),t=Ox(l),r=!Lk(e.value)&&v.length>+e.value,i=!Lk(t.value)&&v.length<+t.value;if((r||i)&&(I(r,e.message,t.message),!n))return E(b[f].message),b}if(h&&!C&&ax(v)){const{value:e,message:t}=Ox(h);if(Tx(e)&&!v.match(e)&&(b[f]={type:$k,message:t,ref:s,...R($k,t)},!n))return E(t),b}if(p)if(vx(p)){const e=Nx(await p(v,t),y);if(e&&(b[f]={...e,...R(tx,e.message)},!n))return E(e.message),b}else if(jk(p)){let e={};for(const r in p){if(!rx(e)&&!n)break;const i=Nx(await p[r](v,t),y,r);i&&(e={...i,...R(r,i.message)},E(i.message),n&&(b[f]=e))}if(!rx(e)&&(b[f]={ref:y,...e},!n))return b}return E(!0),b};function kx(e,t){const n=Array.isArray(t)?t:lx(t)?[t]:dx(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Wk(e)?r++:e[t[r++]];return e}(e,n),i=n.length-1,s=n[i];return r&&delete r[s],0!==i&&(jk(r)&&rx(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!Wk(e[t]))return!1;return!0}(r))&&kx(e,n.slice(0,-1)),e}var xx=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}},Px=e=>Lk(e)||!Mk(e);function Dx(e,t){if(Px(e)||Px(t))return e===t;if(Dk(e)&&Dk(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const n=e[i];if(!r.includes(i))return!1;if("ref"!==i){const e=t[i];if(Dk(n)&&Dk(e)||jk(n)&&jk(e)||Array.isArray(n)&&Array.isArray(e)?!Dx(n,e):n!==e)return!1}}return!0}var Lx=e=>"select-multiple"===e.type,Mx=e=>bx(e)||Pk(e),jx=e=>yx(e)&&e.isConnected,Ux=e=>{for(const t in e)if(vx(e[t]))return!0;return!1};function Fx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(e);if(jk(e)||n)for(const r in e)Array.isArray(e[r])||jk(e[r])&&!Ux(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Fx(e[r],t[r])):Lk(e[r])||(t[r]=!0);return t}function Bx(e,t,n){const r=Array.isArray(e);if(jk(e)||r)for(const i in e)Array.isArray(e[i])||jk(e[i])&&!Ux(e[i])?Wk(t)||Px(n[i])?n[i]=Array.isArray(e[i])?Fx(e[i],[]):{...Fx(e[i])}:Bx(e[i],Lk(t)?{}:t[i],n[i]):n[i]=!Dx(e[i],t[i]);return n}var Vx=(e,t)=>Bx(e,t,Fx(t)),Gx=(e,t)=>{let{valueAsNumber:n,valueAsDate:r,setValueAs:i}=t;return Wk(e)?e:n?""===e?NaN:e?+e:e:r&&ax(e)?new Date(e):i?i(e):e};function Hx(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return _x(t)?t.files:bx(t)?Ix(e.refs).value:Lx(t)?[...t.selectedOptions].map((e=>{let{value:t}=e;return t})):Pk(t)?Cx(e.refs).value:Gx(Wk(t.value)?e.ref.value:t.value,e)}var Wx=(e,t,n,r)=>{const i={};for(const s of e){const e=zk(t,s);e&&ux(i,s,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},zx=e=>Wk(e)?e:Tx(e)?e.source:jk(e)?Tx(e.value)?e.value.source:e.value:e,qx=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Kx(e,t,n){const r=zk(e,n);if(r||lx(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),s=zk(t,r),o=zk(e,r);if(s&&!Array.isArray(s)&&n!==r)return{name:n};if(o&&o.type)return{name:r,error:o};i.pop()}return{name:n}}var Yx=(e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e),Jx=(e,t)=>!Hk(zk(e,t)).length&&kx(e,t);const Xx={mode:Yk.onSubmit,reValidateMode:Yk.onChange,shouldFocusError:!0};function Zx(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={...Xx,...t},r={submitCount:0,isDirty:!1,isLoading:vx(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},i={},s=(jk(n.defaultValues)||jk(n.values))&&Gk(n.defaultValues||n.values)||{},o=n.shouldUnregister?{}:Gk(s),a={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},u={values:xx(),array:xx(),state:xx()},h=px(n.mode),p=px(n.reValidateMode),f=n.criteriaMode===Yk.all,m=async e=>{if(d.isValid||e){const e=n.resolver?rx((await E()).errors):await b(i,!0);e!==r.isValid&&u.state.next({isValid:e})}},g=(e,t)=>{(d.isValidating||d.validatingFields)&&((e||Array.from(c.mount)).forEach((e=>e&&ux(r.validatingFields,e,!!t))),r.isValidating=Object.values(r.validatingFields).some((e=>e)),u.state.next({validatingFields:r.validatingFields,isValidating:r.isValidating}))},_=(e,t,n,r)=>{const c=zk(i,e);if(c){const i=zk(o,e,Wk(n)?zk(s,e):n);Wk(i)||r&&r.defaultChecked||t?ux(o,e,t?i:Hx(c._f)):w(e,i),a.mount&&m()}},v=(e,t,n,o,a)=>{let c=!1,l=!1;const h={name:e},p=!(!zk(i,e)||!zk(i,e)._f.disabled);if(!n||o){d.isDirty&&(l=r.isDirty,r.isDirty=h.isDirty=T(),c=l!==h.isDirty);const n=p||Dx(zk(s,e),t);l=!(p||!zk(r.dirtyFields,e)),n||p?kx(r.dirtyFields,e):ux(r.dirtyFields,e,!0),h.dirtyFields=r.dirtyFields,c=c||d.dirtyFields&&l!==!n}if(n){const t=zk(r.touchedFields,e);t||(ux(r.touchedFields,e,n),h.touchedFields=r.touchedFields,c=c||d.touchedFields&&t!==n)}return c&&a&&u.state.next(h),c?h:{}},y=(n,i,s,o)=>{const a=zk(r.errors,n),c=d.isValid&&qk(i)&&r.isValid!==i;if(t.delayError&&s?(e=(e=>t=>{clearTimeout(l),l=setTimeout(e,t)})((()=>((e,t)=>{ux(r.errors,e,t),u.state.next({errors:r.errors})})(n,s))),e(t.delayError)):(clearTimeout(l),e=null,s?ux(r.errors,n,s):kx(r.errors,n)),(s?!Dx(a,s):a)||!rx(o)||c){const e={...o,...c&&qk(i)?{isValid:i}:{},errors:r.errors,name:n};r={...r,...e},u.state.next(e)}},E=async e=>{g(e,!0);const t=await n.resolver(o,n.context,Wx(e||c.mount,i,n.criteriaMode,n.shouldUseNativeValidation));return g(e),t},b=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const s in e){const a=e[s];if(a){const{_f:e,...l}=a;if(e){const l=c.array.has(e.name);g([s],!0);const d=await Ax(a,o,f,n.shouldUseNativeValidation&&!t,l);if(g([s]),d[e.name]&&(i.valid=!1,t))break;!t&&(zk(d,e.name)?l?gx(r.errors,d,e.name):ux(r.errors,e.name,d[e.name]):kx(r.errors,e.name))}l&&await b(l,t,i)}}return i.valid},T=(e,t)=>(e&&t&&ux(o,e,t),!Dx(A(),s)),S=(e,t,n)=>cx(e,c,{...a.mount?o:Wk(t)?s:ax(e)?{[e]:t}:t},n,t),w=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=zk(i,e);let s=t;if(r){const n=r._f;n&&(!n.disabled&&ux(o,e,Gx(t,n)),s=yx(n.ref)&&Lk(t)?"":t,Lx(n.ref)?[...n.ref.options].forEach((e=>e.selected=s.includes(e.value))):n.refs?Pk(n.ref)?n.refs.length>1?n.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(s)?!!s.find((t=>t===e.value)):s===e.value))):n.refs[0]&&(n.refs[0].checked=!!s):n.refs.forEach((e=>e.checked=e.value===s)):_x(n.ref)?n.ref.value="":(n.ref.value=s,n.ref.type||u.values.next({name:e,values:{...o}})))}(n.shouldDirty||n.shouldTouch)&&v(e,s,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&O(e)},C=(e,t,n)=>{for(const r in t){const s=t[r],o="".concat(e,".").concat(r),a=zk(i,o);!c.array.has(e)&&Px(s)&&(!a||a._f)||Dk(s)?w(o,s,n):C(o,s,n)}},R=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=zk(i,e),h=c.array.has(e),p=Gk(t);ux(o,e,p),h?(u.array.next({name:e,values:{...o}}),(d.isDirty||d.dirtyFields)&&n.shouldDirty&&u.state.next({name:e,dirtyFields:Vx(s,o),isDirty:T(e,p)})):!l||l._f||Lk(p)?w(e,p,n):C(e,p,n),fx(e,c)&&u.state.next({...r}),u.values.next({name:a.mount?e:void 0,values:{...o}})},I=async t=>{const s=t.target;let a=s.name,l=!0;const _=zk(i,a),T=e=>{l=Number.isNaN(e)||e===zk(o,a,e)};if(_){let S,w;const C=s.type?Hx(_._f):Uk(t),R=t.type===Kk.BLUR||t.type===Kk.FOCUS_OUT,I=!qx(_._f)&&!n.resolver&&!zk(r.errors,a)&&!_._f.deps||Yx(R,zk(r.touchedFields,a),r.isSubmitted,p,h),N=fx(a,c,R);ux(o,a,C),R?(_._f.onBlur&&_._f.onBlur(t),e&&e(0)):_._f.onChange&&_._f.onChange(t);const A=v(a,C,R,!1),k=!rx(A)||N;if(!R&&u.values.next({name:a,type:t.type,values:{...o}}),I)return d.isValid&&m(),k&&u.state.next({name:a,...N?{}:A});if(!R&&N&&u.state.next({...r}),n.resolver){const{errors:e}=await E([a]);if(T(C),l){const t=Kx(r.errors,i,a),n=Kx(e,i,t.name||a);S=n.error,a=n.name,w=rx(e)}}else g([a],!0),S=(await Ax(_,o,f,n.shouldUseNativeValidation))[a],g([a]),T(C),l&&(S?w=!1:d.isValid&&(w=await b(i,!0)));l&&(_._f.deps&&O(_._f.deps),y(a,w,S,A))}},N=(e,t)=>{if(zk(r.errors,t)&&e.focus)return e.focus(),1},O=async function(e){let t,s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=sx(e);if(n.resolver){const n=await(async e=>{const{errors:t}=await E(e);if(e)for(const n of e){const e=zk(t,n);e?ux(r.errors,n,e):kx(r.errors,n)}else r.errors=t;return t})(Wk(e)?e:a);t=rx(n),s=e?!a.some((e=>zk(n,e))):t}else e?(s=(await Promise.all(a.map((async e=>{const t=zk(i,e);return await b(t&&t._f?{[e]:t}:t)})))).every(Boolean),(s||r.isValid)&&m()):s=t=await b(i);return u.state.next({...!ax(e)||d.isValid&&t!==r.isValid?{}:{name:e},...n.resolver||!e?{isValid:t}:{},errors:r.errors}),o.shouldFocus&&!s&&mx(i,N,e?a:c.mount),s},A=e=>{const t={...s,...a.mount?o:{}};return Wk(e)?t:ax(e)?zk(t,e):e.map((e=>zk(t,e)))},k=(e,t)=>({invalid:!!zk((t||r).errors,e),isDirty:!!zk((t||r).dirtyFields,e),isTouched:!!zk((t||r).touchedFields,e),isValidating:!!zk((t||r).validatingFields,e),error:zk((t||r).errors,e)}),x=(e,t,n)=>{const s=(zk(i,e,{_f:{}})._f||{}).ref;ux(r.errors,e,{...t,ref:s}),u.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&s&&s.focus&&s.focus()},P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const a of e?sx(e):c.mount)c.mount.delete(a),c.array.delete(a),t.keepValue||(kx(i,a),kx(o,a)),!t.keepError&&kx(r.errors,a),!t.keepDirty&&kx(r.dirtyFields,a),!t.keepTouched&&kx(r.touchedFields,a),!t.keepIsValidating&&kx(r.validatingFields,a),!n.shouldUnregister&&!t.keepDefaultValue&&kx(s,a);u.values.next({values:{...o}}),u.state.next({...r,...t.keepDirty?{isDirty:T()}:{}}),!t.keepIsValid&&m()},D=e=>{let{disabled:t,name:n,field:r,fields:i,value:s}=e;if(qk(t)){const e=t?void 0:Wk(s)?Hx(r?r._f:zk(i,n)._f):s;ux(o,n,e),v(n,e,!1,!1,!0)}},L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=zk(i,e);const o=qk(t.disabled);return ux(i,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),c.mount.add(e),r?D({field:r,disabled:t.disabled,name:e,value:t.value}):_(e,!0,t.value),{...o?{disabled:t.disabled}:{},...n.progressive?{required:!!t.required,min:zx(t.min),max:zx(t.max),minLength:zx(t.minLength),maxLength:zx(t.maxLength),pattern:zx(t.pattern)}:{},name:e,onChange:I,onBlur:I,ref:o=>{if(o){L(e,t),r=zk(i,e);const n=Wk(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,a=Mx(n),c=r._f.refs||[];if(a?c.find((e=>e===n)):n===r._f.ref)return;ux(i,e,{_f:{...r._f,...a?{refs:[...c.filter(jx),n,...Array.isArray(zk(s,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),_(e,!1,void 0,n)}else r=zk(i,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!Fk(c.array,e)||!a.action)&&c.unMount.add(e)}}},M=()=>n.shouldFocusError&&mx(i,N,c.mount),j=(e,t)=>async s=>{let a;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let c=Gk(o);if(u.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await E();r.errors=e,c=t}else await b(i);if(kx(r.errors,"root"),rx(r.errors)){u.state.next({errors:{}});try{await e(c,s)}catch(pv){a=pv}}else t&&await t({...r.errors},s),M(),setTimeout(M);if(u.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:rx(r.errors)&&!a,submitCount:r.submitCount+1,errors:r.errors}),a)throw a},U=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=e?Gk(e):s,h=Gk(l),p=rx(e),f=p?s:h;if(n.keepDefaultValues||(s=l),!n.keepValues){if(n.keepDirtyValues)for(const e of c.mount)zk(r.dirtyFields,e)?ux(f,e,zk(o,e)):R(e,zk(f,e));else{if(Vk&&Wk(e))for(const e of c.mount){const t=zk(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(yx(e)){const t=e.closest("form");if(t){t.reset();break}}}}i={}}o=t.shouldUnregister?n.keepDefaultValues?Gk(s):{}:Gk(f),u.array.next({values:{...f}}),u.values.next({values:{...f}})}c={mount:n.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!d.isValid||!!n.keepIsValid||!!n.keepDirtyValues,a.watch=!!t.shouldUnregister,u.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:!p&&(n.keepDirty?r.isDirty:!(!n.keepDefaultValues||Dx(e,s))),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:p?[]:n.keepDirtyValues?n.keepDefaultValues&&o?Vx(s,o):r.dirtyFields:n.keepDefaultValues&&e?Vx(s,e):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitSuccessful:!!n.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1})},F=(e,t)=>U(vx(e)?e(o):e,t);return{control:{register:L,unregister:P,getFieldState:k,handleSubmit:j,setError:x,_executeSchema:E,_getWatch:S,_getDirty:T,_updateValid:m,_removeUnmounted:()=>{for(const e of c.unMount){const t=zk(i,e);t&&(t._f.refs?t._f.refs.every((e=>!jx(e))):!jx(t._f.ref))&&P(e)}c.unMount=new Set},_updateFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],h=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(c&&n){if(a.action=!0,h&&Array.isArray(zk(i,e))){const t=n(zk(i,e),c.argA,c.argB);l&&ux(i,e,t)}if(h&&Array.isArray(zk(r.errors,e))){const t=n(zk(r.errors,e),c.argA,c.argB);l&&ux(r.errors,e,t),Jx(r.errors,e)}if(d.touchedFields&&h&&Array.isArray(zk(r.touchedFields,e))){const t=n(zk(r.touchedFields,e),c.argA,c.argB);l&&ux(r.touchedFields,e,t)}d.dirtyFields&&(r.dirtyFields=Vx(s,o)),u.state.next({name:e,isDirty:T(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ux(o,e,t)},_updateDisabledField:D,_getFieldArray:e=>Hk(zk(a.mount?o:s,e,t.shouldUnregister?zk(s,e,[]):[])),_reset:U,_resetDefaultValues:()=>vx(n.defaultValues)&&n.defaultValues().then((e=>{F(e,n.resetOptions),u.state.next({isLoading:!1})})),_updateFormState:e=>{r={...r,...e}},_disableForm:e=>{qk(e)&&(u.state.next({disabled:e}),mx(i,((t,n)=>{let r=e;const s=zk(i,n);s&&qk(s._f.disabled)&&(r||(r=s._f.disabled)),t.disabled=r}),0,!1))},_subjects:u,_proxyFormState:d,_setErrors:e=>{r.errors=e,u.state.next({errors:r.errors,isValid:!1})},get _fields(){return i},get _formValues(){return o},get _state(){return a},set _state(e){a=e},get _defaultValues(){return s},get _names(){return c},set _names(e){c=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n={...n,...e}}},trigger:O,register:L,handleSubmit:j,watch:(e,t)=>vx(e)?u.values.subscribe({next:n=>e(S(void 0,t),n)}):S(e,t,!0),setValue:R,getValues:A,reset:F,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zk(i,e)&&(Wk(t.defaultValue)?R(e,Gk(zk(s,e))):(R(e,t.defaultValue),ux(s,e,Gk(t.defaultValue))),t.keepTouched||kx(r.touchedFields,e),t.keepDirty||(kx(r.dirtyFields,e),r.isDirty=t.defaultValue?T(e,Gk(zk(s,e))):T()),t.keepError||(kx(r.errors,e),d.isValid&&m()),u.state.next({...r}))},clearErrors:e=>{e&&sx(e).forEach((e=>kx(r.errors,e))),u.state.next({errors:e?r.errors:{}})},unregister:P,setError:x,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=zk(i,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:k}}function Qx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=n.useRef(),r=n.useRef(),[i,s]=n.useState({isDirty:!1,isValidating:!1,isLoading:vx(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:vx(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Zx(e),formState:i});const o=t.current.control;return o._options=e,ox({subject:o._subjects.state,next:e=>{ix(e,o._proxyFormState,o._updateFormState,!0)&&s({...o._formState})}}),n.useEffect((()=>o._disableForm(e.disabled)),[o,e.disabled]),n.useEffect((()=>{if(o._proxyFormState.isDirty){const e=o._getDirty();e!==i.isDirty&&o._subjects.state.next({isDirty:e})}}),[o,i.isDirty]),n.useEffect((()=>{e.values&&!Dx(e.values,r.current)?(o._reset(e.values,o._options.resetOptions),r.current=e.values,s((e=>({...e})))):o._resetDefaultValues()}),[e.values,o]),n.useEffect((()=>{e.errors&&o._setErrors(e.errors)}),[e.errors,o]),n.useEffect((()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()})),n.useEffect((()=>{e.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})}),[e.shouldUnregister,o]),t.current.formState=nx(i,o),t.current}var $x=__webpack_require__(5429),eP=__webpack_require__.n($x);const tP=()=>{const e=Z(),t=$(),{AddRealEstate:r,AddJob:i,AddFashionProduct:s,getAttributeList:o,attributeList:a,productId:c,AddFreelancer:l,AddElectronics:d,AddCourse:u,AddGoodsProduct:h}=Kr(),{handleSubmit:p}=Qx(),[f,m]=(0,n.useState)(!1),[g,_]=(0,n.useState)({}),[v,y]=(0,n.useState)({}),[E,b]=(0,n.useState)(!1),[T,S]=(0,n.useState)({bid_start_price:"",bid_entry:"",bid_increament_value:"",bid_start_date:new Date,bid_end_date:new Date}),w=(e,t,n)=>{_((n=>({...n,[e]:t}))),y((e=>({...e,[n]:t})))};(0,n.useEffect)((()=>{const e=new Date(T.bid_start_date);e.setHours(e.getHours()+1),S({...T,bid_end_date:e})}),[]),(0,n.useEffect)((()=>{null===e.state&&(al.error("add Title first"),t(-1))}),[e.state,t]),(0,n.useEffect)((()=>{var t,n;const r={category_id:(null===e||void 0===e||null===(t=e.state)||void 0===t?void 0:t.category_id)||"",sub_category_id:(null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.sub_category_id)||""};(async()=>{await o(r)})()}),[]),(0,n.useEffect)((()=>{if((null===a||void 0===a?void 0:a.length)>0){const e=Array.isArray(a)&&(null===a||void 0===a?void 0:a.map((e=>null===e||void 0===e?void 0:e.category_name)));null!==e&&void 0!==e&&e.includes("Jobs")||null!==e&&void 0!==e&&e.includes("Freelancer")||null!==e&&void 0!==e&&e.includes("Lessons & Courses")?m(!0):m(!1)}}),[a]);const C=e=>{switch(e){case"Salary Expectation":case"Typing Speed":case"Salary to":case"Salary from":case"Salary":case"Land Area":case"Price Range":case"Number of Rooms":case"Number of Bathrooms":case"Year Built":case"Square Footage":case"Rent":case"Quizzes":case"Lessons":case"Videos":case"Hours":case"Course Duration":case"Duration":case"Pack of":case"Price":case"  Model Number":case"Release Year":case"Number of Pieces":return"number";default:return"text"}},R=Array.isArray(a)&&a.map((e=>e.sub_category_name)),I=Array.isArray(a)&&a.map((e=>e.category_name));return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"SELECTED CATEGORY"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{children:(0,Ae.jsxs)(Ie,{className:"active",to:"/add-post",children:["Add Product"," "]})}),(0,Ae.jsx)("li",{className:"active",children:I[0]}),(0,Ae.jsx)("li",{className:"active",children:R[0]})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{className:"card",children:[(0,Ae.jsx)("div",{className:"card-header",children:(0,Ae.jsx)("h5",{children:"INCLUDE SOME DETAILS"})}),(0,Ae.jsx)("div",{className:"card-body border-0",children:(0,Ae.jsxs)("form",{onSubmit:p((async()=>{if(E){if(!T.bid_start_price||!T.bid_increament_value||!T.bid_start_date||!T.bid_end_date)return void al.warning("Please fill all bid related fields.");if(T.bid_start_date>=T.bid_end_date)return void al.warning("Bid end date should be greater than bid start date.")}if(!g.photo&&!g.image)return void al.warning("Please upload at least one photo.");const t={title:e.state.title,description:e.state.description,product_id:c,category_id:e.state.category_id,sub_category_id:e.state.sub_category_id},n=new FormData;if(Object.keys(t).forEach((e=>{n.append(e,t[e])})),Object.entries(v).forEach(((e,t)=>{let[r,i]=e;n.append("attributeData[".concat(t,"][attribute_id]"),r),n.append("attributeData[".concat(t,"][value]"),i)})),!0===E){n.append("bid_now",!0),n.append("bid_start_price",T.bid_start_price||""),n.append("bid_increament_value",T.bid_increament_value||"");const e=T.bid_start_date?T.bid_start_date.toISOString():"";n.append("bid_start_date",e);const t=T.bid_end_date?T.bid_end_date.toISOString():"";n.append("bid_end_date",t)}switch(!1===f?(n.append("photo",g.photo||""),n.append("image_1",g.image_1||""),n.append("image_2",g.image_2||""),n.append("image_3",g.image_3||"")):n.append("image",g.image||""),a[0].category_name){case"Goods of all kinds":return h(n);case"Fashion & Beauty":return s(n);case"Lessons & Courses":return u(n);case"Jobs":return i(n);case"Freelancer":return l(n);case"Real Estate":return r(n);case"Electronics":return d(n);default:return null}})),encType:"multipart/form-data",children:[Array.isArray(a)&&a.map((e=>{var t;return(0,Ae.jsxs)("div",{className:"radioBx mb20",children:[(0,Ae.jsx)("h6",{children:e.attribute}),(0,Ae.jsx)(Ae.Fragment,{children:e.options.length>0?Array.isArray(e.options)&&(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.map(((t,r)=>(0,Ae.jsxs)(n.Fragment,{children:[(0,Ae.jsx)("input",{type:"radio",className:"btn-check",name:e.attribute,id:"radio_".concat(e.attribute,"_").concat(t._id),value:t.option,onChange:t=>w(e.attribute,t.target.value,e._id)},r),(0,Ae.jsxs)("label",{className:"btn btn-outline-primary",htmlFor:"radio_".concat(e.attribute,"_").concat(t._id),children:[" ",t.option," "]})]},t._id)))):(0,Ae.jsx)("div",{className:"row",children:(0,Ae.jsx)("div",{className:"",children:(0,Ae.jsx)("input",{type:C(e.attribute),name:e.attribute,className:"form-control",onChange:t=>w(e.attribute,t.target.value,e._id)})},e._id)})})]},e._id)})),!1===f?(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsxs)("div",{className:"col-sm-3",children:[(0,Ae.jsx)("label",{htmlFor:"bid",children:(0,Ae.jsx)("h5",{style:{marginRight:"10px",marginBottom:"6px",color:"#77ced9"},children:"Enable Bid"})}),(0,Ae.jsx)("input",{type:"checkbox",name:"bid",onChange:e=>{b(e.target.checked)}})]}),E&&(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsxs)("div",{className:"col-sm-3",children:[(0,Ae.jsx)("label",{htmlFor:"bid_start_price",children:"Bid Start Price"}),(0,Ae.jsx)("input",{className:"form-control",type:"number",name:"bid_start_price",onChange:e=>S({...T,bid_start_price:e.target.value})})]}),(0,Ae.jsxs)("div",{className:"col-sm-3",children:[(0,Ae.jsx)("label",{htmlFor:"bid_increament_value",children:"Bid Increament Value"}),(0,Ae.jsx)("input",{className:"form-control",type:"number",name:"bid_increament_value",onChange:e=>S({...T,bid_increament_value:e.target.value})})]}),(0,Ae.jsxs)("div",{className:"col-sm-3",children:[(0,Ae.jsx)("label",{htmlFor:"bid_start_date",children:"Bid Start Date"}),(0,Ae.jsx)(eP(),{value:T.bid_start_date,onChange:e=>{S({...T,bid_start_date:e})},name:"bid_start_date"})]}),(0,Ae.jsxs)("div",{className:"col-sm-3",children:[(0,Ae.jsx)("label",{htmlFor:"bid_end_date",children:"Bid End Date"}),(0,Ae.jsx)(eP(),{value:T.bid_end_date,onChange:e=>{e>T.bid_start_date?S({...T,bid_end_date:e}):al.warning("End date must be after start date")},name:"bid_end_date",inputProps:{readOnly:!0},isValidDate:e=>e.isAfter(T.bid_start_date)})]})]})}),(0,Ae.jsx)("h5",{className:"m0",children:"UPLOAD UP TO 4 PHOTOS"}),(0,Ae.jsxs)("div",{className:"row",style:{maxWidth:"700px"},children:[(0,Ae.jsx)("div",{className:"col-sm-3",children:(0,Ae.jsxs)("div",{className:"fileBx mt-2",children:[(0,Ae.jsx)("input",{type:"file",name:"photo",id:"photo",style:{display:"none"},onChange:e=>(e=>{const t=e.target.files[0];_({...g,photo:t})})(e)}),(0,Ae.jsx)("label",{htmlFor:"photo",children:g.photo?(0,Ae.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.photo),alt:""}):"Upload Img"})]})}),(0,Ae.jsx)("div",{className:"col-sm-3",children:(0,Ae.jsxs)("div",{className:"fileBx mt-2",children:[(0,Ae.jsx)("input",{type:"file",name:"img1",id:"img1",style:{display:"none"},onChange:e=>(e=>{const t=e.target.files[0];_({...g,image_1:t})})(e)}),(0,Ae.jsx)("label",{htmlFor:"img1",children:g.image_1?(0,Ae.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.image_1),alt:"Img_1"}):"Upload Img"})]})}),(0,Ae.jsx)("div",{className:"col-sm-3",children:(0,Ae.jsxs)("div",{className:"fileBx mt-2",children:[(0,Ae.jsx)("input",{type:"file",name:"img2",id:"img2",onChange:e=>(e=>{const t=e.target.files[0];_({...g,image_2:t})})(e),style:{display:"none"}}),(0,Ae.jsx)("label",{htmlFor:"img2",children:g.image_2?(0,Ae.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.image_2),alt:"image_2"}):"Upload Img"})]})}),(0,Ae.jsx)("div",{className:"col-sm-3",children:(0,Ae.jsxs)("div",{className:"fileBx mt-2",children:[(0,Ae.jsx)("input",{type:"file",name:"img3",id:"img3",style:{display:"none"},onChange:e=>(e=>{const t=e.target.files[0];_({...g,image_3:t})})(e)}),(0,Ae.jsx)("label",{htmlFor:"img3",children:g.image_3?(0,Ae.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.image_3),alt:"image_3"}):"Upload Img"})]})})]})]}):(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("h5",{className:"m0",children:"UPLOAD file"}),(0,Ae.jsx)("div",{className:"row",style:{maxWidth:"700px"},children:(0,Ae.jsx)("div",{className:"col-sm-3",children:(0,Ae.jsxs)("div",{className:"fileBx mt-2",children:[(0,Ae.jsx)("input",{type:"file",name:"uploadfile",id:"img",onChange:e=>(e=>{const t=e.target.files[0];_({...g,image:t})})(e),style:{display:"none"},required:!0}),(0,Ae.jsx)("label",{htmlFor:"img",children:g.image?(0,Ae.jsx)("img",{height:70,width:100,src:URL.createObjectURL(g.image),alt:""}):"Upload Img"})]})})})]}),(0,Ae.jsx)(No,{type:"submit",className:"text text-white mt-2",children:"Submit"})]})})]})}),(0,Ae.jsx)(Ho,{})]})})})]})},nP=()=>{const{AddTitleDes:e}=Kr(),t=Z(),n=$(),{servicecategories:r,subservicecat:i}=(null===t||void 0===t?void 0:t.state)||{},{register:s,handleSubmit:o,formState:{errors:a}}=Qx();return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"SELECTED CATEGORY"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:"Add Product"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{className:"card",children:[(0,Ae.jsx)("div",{className:"card card-header",children:(0,Ae.jsx)("h5",{children:"INCLUDE SOME DETAILS"})}),(0,Ae.jsx)("div",{className:"card card-body border-0",children:(0,Ae.jsxs)("form",{className:"",onSubmit:o((async t=>{try{const s={title:t.title,description:t.description,category_id:r,sub_category_id:i},o=await e(s);200===o.status&&n("/add-product",{state:{id:o.data._id,...s}})}catch(pv){console.error(pv)}})),children:[(0,Ae.jsxs)("div",{className:"mb20",style:{maxWidth:"500px"},children:[(0,Ae.jsx)("h6",{children:"Title"}),(0,Ae.jsx)("input",{type:"text",className:"form-control",...s("title",{required:"Title is required",minLength:{value:10,message:"A minimum length of 10 characters is required. Please edit the field"},maxLength:{value:100,message:"Title cannot exceed 50 characters"}})}),a.title&&(0,Ae.jsx)("span",{className:"text text-danger",children:a.title.message})]}),(0,Ae.jsxs)("div",{className:"mb20",style:{maxWidth:"500px"},children:[(0,Ae.jsx)("h6",{children:"Description"}),(0,Ae.jsx)("textarea",{type:"text",className:"form-control",...s("description",{required:"Description is required",minLength:{value:150,message:"A minimum length of 150 characters is required. Please edit the field"},maxLength:{value:5500,message:"Title cannot exceed 5500 characters"}})}),a.description&&(0,Ae.jsx)("span",{className:"text text-danger",children:a.description.message})]}),(0,Ae.jsx)(No,{className:"text text-white",type:"submit",children:"Next"})]})})]})}),(0,Ae.jsx)(Ho,{})]})})})]})},rP=()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),1500),t(!1)})()}),[]),(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"Disclaimer"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)("a",{href:"index.php",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:"Disclaimer"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),!1===e?(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("h3",{children:"Disclaimer"}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),(0,Ae.jsx)(Ho,{})]})})})]})},iP=()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(async()=>{setTimeout((()=>{t(!0)}),1500),t(!1)})()}),[]),(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"Customer Support"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)("a",{href:"index.php",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:"Customer Support"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",style:{backgroundColor:"#fff"},children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),!1===e?(0,Ae.jsx)("div",{className:"col-md-10 d-flex justify-content-center ",children:(0,Ae.jsx)("div",{className:"spinner-grow text-info my-4",role:"status",children:(0,Ae.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,Ae.jsx)("div",{className:"col-md-10",children:(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("h3",{children:"Customer Support"}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),(0,Ae.jsx)("p",{align:"justify",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),(0,Ae.jsx)(Ho,{})]})})})]})},sP=()=>{const{cartList:e,getCartList:t,cartListRemove:r,cartListUpdate:i,totalprice:s,orderCheckOut:o}=Kr(),[a,c]=(0,n.useState)({});(0,n.useEffect)((()=>{(async()=>{await t()})()}),[]),(0,n.useEffect)((()=>{const t=e.reduce(((e,t)=>(e[t.item_details._id]=t.quantity,e)),{});c(t)}),[e]);return(0,Ae.jsx)("section",{className:"h-100",style:{backgroundColor:"#eee"},children:(0,Ae.jsx)("div",{className:"container py-5 h-100",children:(0,Ae.jsx)("div",{className:"row justify-content-center align-items-center h-100",children:(0,Ae.jsxs)("div",{className:"col-md-10",children:[(0,Ae.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,Ae.jsx)("h3",{className:"fw-normal mb-0 text-black",children:"Shopping Cart"})}),0===e.length?(0,Ae.jsx)(hh,{des:"Kindly add the product to your checkout. Thank you!"}):Array.isArray(e)&&e.map((e=>{const t=e.total_price/e.quantity;return(0,Ae.jsx)("div",{className:"card rounded-3 mb-4",children:(0,Ae.jsx)("div",{className:"card-body p-4",children:(0,Ae.jsxs)("div",{className:"row justify-content-between align-items-center",children:[(0,Ae.jsx)("div",{className:"col-md-2",children:(0,Ae.jsx)(Ie,{to:"/product/related-product/".concat(e.item_details._id),children:(0,Ae.jsx)("img",{className:"img-fluid rounded-3",src:e.item_details.image,alt:e.item_details.title,style:{height:"170px",width:"200px"}})})}),(0,Ae.jsx)("div",{className:"col-md-3",children:(0,Ae.jsx)("p",{className:"lead fw-normal mb-2",children:e.item_details.title})}),(0,Ae.jsx)("div",{className:"col",children:(0,Ae.jsx)("p",{className:"fw-normal mb-2",children:t})}),(0,Ae.jsxs)("div",{className:"col-md-3 d-flex align-items-center justify-content-around",children:[(0,Ae.jsx)("button",{onClick:()=>(e=>{if(a[e]>0){const t=a[e]-1;c((n=>({...n,[e]:t}))),i(e,t)}})(e.item_details._id),className:"btn btn-outline-primary btn-sm",children:"-"}),(0,Ae.jsx)("input",{value:a[e.item_details._id]||"",type:"number",className:"form-control form-control-sm",onChange:()=>{},style:{width:"60px",textAlign:"center"}}),(0,Ae.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>(e=>{const t=(a[e]||0)+1;c((n=>({...n,[e]:t}))),i(e,t)})(e.item_details._id),children:"+"})]}),(0,Ae.jsx)("div",{className:"col-md-2",children:(0,Ae.jsxs)("h5",{className:"mb-0",children:["\u20b9 ",a[e.item_details._id]*t||e.total_price]})}),(0,Ae.jsx)("div",{className:"col-md-1 text-end",children:(0,Ae.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>(e=>{r(e)})(e.item_details._id),children:(0,Ae.jsx)("i",{className:"fas fa-trash"})})})]})})},e.item_details._id)})),e.length?(0,Ae.jsx)("div",{className:"col-md-12 col-lg-4",children:(0,Ae.jsxs)("div",{className:"bg-light p-3",children:[(0,Ae.jsx)("h3",{className:"mb-4",children:"Summary"}),(0,Ae.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,Ae.jsx)("span",{children:"Total"}),(0,Ae.jsxs)("span",{className:"price",children:[" \u20b9 ",s]})]}),(0,Ae.jsx)("button",{type:"button",className:"btn btn-primary btn-lg btn-block mt-3 text-white",onClick:async()=>{const t=e.map((e=>{var t;return{product_id:null===(t=e.item_details)||void 0===t?void 0:t._id,quantity:e.quantity,total_price:e.total_price}})),n={total_price:s,items:t};await o(n,t.product_id)},children:"Checkout"})]})}):null]})})})})},oP=()=>{const{orderList:e,getMyOrderList:t,listLoading:r}=Kr();return(0,n.useEffect)((()=>{(async()=>{await t()})()}),[]),(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("section",{className:"pageBanner",children:(0,Ae.jsx)("article",{className:"container",children:(0,Ae.jsxs)("aside",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsx)("h4",{children:"My Order"})}),(0,Ae.jsx)("div",{className:"col-md-6",children:(0,Ae.jsxs)("ul",{className:"navList",children:[(0,Ae.jsx)("li",{children:(0,Ae.jsx)(Ie,{to:"/",children:"Home"})}),(0,Ae.jsx)("li",{className:"active",children:"My Order"})]})})]})})}),(0,Ae.jsx)("section",{className:"midBody",children:(0,Ae.jsx)("article",{className:"container-fluid",children:(0,Ae.jsxs)("article",{className:"row",children:[(0,Ae.jsx)(Ho,{}),(0,Ae.jsx)("div",{className:"col-md-3",children:(0,Ae.jsx)(SO,{})}),(0,Ae.jsx)("div",{className:"col-md-7",children:(0,Ae.jsx)("div",{className:"card border-0",children:(0,Ae.jsxs)("div",{className:"card card-body border-0",children:[(0,Ae.jsx)("h2",{className:"text24 mb-1",children:"My Order"}),(0,Ae.jsx)("p",{className:"text-muted mb-1",children:"Here you can see your Orders."}),(0,Ae.jsx)("hr",{className:"mt0"}),r.Post?Array.from({length:3}).map(((e,t)=>(0,Ae.jsx)(uh,{},t))):Array.isArray(e)&&0===e.length?(0,Ae.jsx)(hh,{des:"Place An Order, to See your Orders Thank you!."}):Array.isArray(e)&&e.map(((e,t)=>(0,Ae.jsx)("div",{className:"card mb-3 myPostItem",children:null===e||void 0===e?void 0:e.items.map(((e,t)=>(0,Ae.jsxs)("div",{className:"row g-0",children:[(0,Ae.jsx)("div",{className:"col-md-4",children:(0,Ae.jsx)("div",{className:"imgBx",children:(0,Ae.jsx)("img",{src:e.image,className:"img-fluid rounded-start",alt:"Dzital"})})}),(0,Ae.jsx)("div",{className:"col-md-8",children:(0,Ae.jsxs)("div",{className:"card-body",children:[(0,Ae.jsxs)("div",{className:"row",children:[(0,Ae.jsx)("div",{className:"col-md-9",children:(0,Ae.jsx)("h5",{className:"card-title mb-1",children:e.title})}),(0,Ae.jsx)("div",{className:"col-md-3",align:"right",children:(0,Ae.jsx)("h5",{className:"m0",children:(0,Ae.jsx)("b",{className:"badge bg-warning text-dark"})})})]}),(0,Ae.jsxs)("p",{className:"card-text mb-0",children:["Quantity : ",e.quantity]}),(0,Ae.jsxs)("p",{className:"card-text mb-0",children:["Total Price : ",e.total_price]}),(0,Ae.jsx)("hr",{className:"mb-2 mt-1"})]})})]})))},t)))]})})}),(0,Ae.jsx)(Ho,{})]})})})]})},aP=()=>{var e,t,r,i,s,o,a;const{getAllProductDetails:c,getAllUnAuthProductDetails:l,allPDetails:d,isLogIn:u}=Kr(),h=te();return(0,n.useEffect)((()=>{h.id&&(async()=>{u?await c(h.id):await l(h.id)})()}),[h.id]),d&&d.data?(0,Ae.jsxs)("div",{children:["Real Estate"===(null===(e=d.data)||void 0===e?void 0:e.category_name)&&(0,Ae.jsx)(PO,{initialDetail:d}),"Jobs"===(null===(t=d.data)||void 0===t?void 0:t.category_name)&&(0,Ae.jsx)(bA,{initialDetail:d}),"Freelancer"===(null===(r=d.data)||void 0===r?void 0:r.category_name)&&(0,Ae.jsx)(NA,{initialDetail:d}),"Lessons & Courses"===(null===(i=d.data)||void 0===i?void 0:i.category_name)&&(0,Ae.jsx)(PA,{initialDetail:d}),"Fashion & Beauty"===(null===(s=d.data)||void 0===s?void 0:s.category_name)&&(0,Ae.jsx)(Rk,{initialDetail:d}),"Electronics"===(null===(o=d.data)||void 0===o?void 0:o.category_name)&&(0,Ae.jsx)(wk,{initialDetail:d}),"Goods of all kinds"===(null===(a=d.data)||void 0===a?void 0:a.category_name)&&(0,Ae.jsx)(IO,{initialDetail:d})]}):null};var cP,lP=__webpack_require__(1635),dP=__webpack_require__.n(lP);!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"}(cP||(cP={}));var uP=function(e){var t;return function(){return t||(t=dP().createClient(e)),t}};function hP(e,t){var r=null;return function(){var i=(0,n.useState)(!1),s=i[0],o=i[1],a=(0,n.useState)(null),c=a[0],l=a[1],d=(0,n.useRef)(r);return(0,n.useEffect)((function(){return null===d.current?function(){try{return Promise.resolve(dP().createMicrophoneAndCameraTracks(e,t)).then((function(e){return r=e}))}catch(AL){return Promise.reject(AL)}}().then((function(e){d.current=e,o(!0)}),(function(e){l(e)})):o(!0),function(){r=null}}),[]),{ready:s,tracks:d.current,error:c}}}var pP=function(e){var t=(0,n.useRef)(null),r=e.videoTrack,i=e.config,s=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["videoTrack","config"]);return(0,n.useLayoutEffect)((function(){return null!==t.current&&r.play(t.current,i),function(){r.stop()}}),[r]),n.createElement("div",Object.assign({},s,{ref:t}))};const fP={mode:"rtc",codec:"vp8"};const mP=function(){return[uP(fP),hP()]},gP=["className","component"];const _P=dd("MuiBox",["root"]),vP=nd(),yP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:r,defaultClassName:i="MuiBox-root",generateClassName:s}=e,o=(0,Bu.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(Cl.A),a=n.forwardRef((function(e,n){const a=El(r),c=(0,Qu.A)(e),{className:l,component:d="div"}=c,u=(0,je.A)(c,gP);return(0,Ae.jsx)(o,(0,Me.A)({as:d,ref:n,className:hl(l,s?s(i):i),theme:t&&a[t]||a},u))}));return a}({themeId:id,defaultTheme:vP,defaultClassName:_P.root,generateClassName:ad.generate}),EP=yP;const bP=n.createContext();function TP(e){return ld("MuiGrid",e)}const SP=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],wP=dd("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>"spacing-xs-".concat(e))),...["column-reverse","column","row-reverse","row"].map((e=>"direction-xs-".concat(e))),...["nowrap","wrap-reverse","wrap"].map((e=>"wrap-xs-".concat(e))),...SP.map((e=>"grid-xs-".concat(e))),...SP.map((e=>"grid-sm-".concat(e))),...SP.map((e=>"grid-md-".concat(e))),...SP.map((e=>"grid-lg-".concat(e))),...SP.map((e=>"grid-xl-".concat(e)))]),CP=wP,RP=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function IP(e){const t=parseFloat(e);return"".concat(t).concat(String(e).replace(String(t),"")||"px")}function NP(e){let{breakpoints:t,values:n}=e,r="";Object.keys(n).forEach((e=>{""===r&&0!==n[e]&&(r=e)}));const i=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return i.slice(0,i.indexOf(r))}const OP=Ed("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:s,spacing:o,wrap:a,zeroMinWidth:c,breakpoints:l}=n;let d=[];r&&(d=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n["spacing-xs-".concat(String(e))]];const r=[];return t.forEach((t=>{const i=e[t];Number(i)>0&&r.push(n["spacing-".concat(t,"-").concat(String(i))])})),r}(o,l,t));const u=[];return l.forEach((e=>{const r=n[e];r&&u.push(t["grid-".concat(e,"-").concat(String(r))])})),[t.root,r&&t.container,s&&t.item,c&&t.zeroMinWidth,...d,"row"!==i&&t["direction-xs-".concat(String(i))],"wrap"!==a&&t["wrap-xs-".concat(String(a))],...u]}})((e=>{let{ownerState:t}=e;return(0,Me.A)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){let{theme:t,ownerState:n}=e;const r=(0,$u.kW)({values:n.direction,breakpoints:t.breakpoints.values});return(0,$u.NI)({theme:t},r,(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t["& > .".concat(CP.item)]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,rowSpacing:i}=n;let s={};if(r&&0!==i){const e=(0,$u.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=NP({breakpoints:t.breakpoints.values,values:e})),s=(0,$u.NI)({theme:t},e,((e,r)=>{var i;const s=t.spacing(e);return"0px"!==s?{marginTop:"-".concat(IP(s)),["& > .".concat(CP.item)]:{paddingTop:IP(s)}}:null!=(i=n)&&i.includes(r)?{}:{marginTop:0,["& > .".concat(CP.item)]:{paddingTop:0}}}))}return s}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,columnSpacing:i}=n;let s={};if(r&&0!==i){const e=(0,$u.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=NP({breakpoints:t.breakpoints.values,values:e})),s=(0,$u.NI)({theme:t},e,((e,r)=>{var i;const s=t.spacing(e);return"0px"!==s?{width:"calc(100% + ".concat(IP(s),")"),marginLeft:"-".concat(IP(s)),["& > .".concat(CP.item)]:{paddingLeft:IP(s)}}:null!=(i=n)&&i.includes(r)?{}:{width:"100%",marginLeft:0,["& > .".concat(CP.item)]:{paddingLeft:0}}}))}return s}),(function(e){let t,{theme:n,ownerState:r}=e;return n.breakpoints.keys.reduce(((e,i)=>{let s={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=(0,$u.kW)({values:r.columns,breakpoints:n.breakpoints.values}),a="object"===typeof o?o[i]:o;if(void 0===a||null===a)return e;const c="".concat(Math.round(t/a*1e8)/1e6,"%");let l={};if(r.container&&r.item&&0!==r.columnSpacing){const e=n.spacing(r.columnSpacing);if("0px"!==e){const t="calc(".concat(c," + ").concat(IP(e),")");l={flexBasis:t,maxWidth:t}}}s=(0,Me.A)({flexBasis:c,flexGrow:0,maxWidth:c},l)}return 0===n.breakpoints.values[i]?Object.assign(e,s):e[n.breakpoints.up(i)]=s,e}),{})}));const AP=e=>{const{classes:t,container:n,direction:r,item:i,spacing:s,wrap:o,zeroMinWidth:a,breakpoints:c}=e;let l=[];n&&(l=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e="spacing-".concat(t,"-").concat(String(r));n.push(e)}})),n}(s,c));const d=[];c.forEach((t=>{const n=e[t];n&&d.push("grid-".concat(t,"-").concat(String(n)))}));return pl({root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...l,"row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==o&&"wrap-xs-".concat(String(o)),...d]},TP,t)},kP=n.forwardRef((function(e,t){const r=sd({props:e,name:"MuiGrid"}),{breakpoints:i}=function(){const e=El(rd);return e[id]||e}(),s=(0,Qu.A)(r),{className:o,columns:a,columnSpacing:c,component:l="div",container:d=!1,direction:u="row",item:h=!1,rowSpacing:p,spacing:f=0,wrap:m="wrap",zeroMinWidth:g=!1}=s,_=(0,je.A)(s,RP),v=p||f,y=c||f,E=n.useContext(bP),b=d?a||12:E,T={},S=(0,Me.A)({},_);i.keys.forEach((e=>{null!=_[e]&&(T[e]=_[e],delete S[e])}));const w=(0,Me.A)({},s,{columns:b,container:d,direction:u,item:h,rowSpacing:v,columnSpacing:y,wrap:m,zeroMinWidth:g,spacing:f},T,{breakpoints:i.keys}),C=AP(w);return(0,Ae.jsx)(bP.Provider,{value:b,children:(0,Ae.jsx)(OP,(0,Me.A)({ownerState:w,className:hl(C.root,o),as:l,ref:t},S))})}));const xP=kP,PP=e=>{const[t]=mP(),r=t(),{tracks:i,setStart:s}=e,[o,a]=(0,n.useState)({video:!0,audio:!0}),c=async e=>{"audio"===e?(await i[0].setEnabled(!o.audio),a((e=>({...e,audio:!e.audio})))):"video"===e&&(await i[1].setEnabled(!o.video),a((e=>({...e,video:!e.video}))))},l={cursor:"pointer",display:"flex",alignItems:"center",margin:"0 10px"};return(0,Ae.jsxs)("div",{className:"controls",style:{display:"flex",gap:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",padding:"10px",borderRadius:"10px",color:"white"},children:[(0,Ae.jsx)("div",{onClick:()=>c("audio"),style:l,children:o.audio?(0,Ae.jsx)(fO,{style:{color:"white"}}):(0,Ae.jsx)(pO,{style:{color:"red"}})}),(0,Ae.jsx)("div",{onClick:()=>c("video"),style:l,children:o.video?(0,Ae.jsx)(vO,{style:{color:"white"}}):(0,Ae.jsx)(_O,{style:{color:"red"}})}),(0,Ae.jsx)("div",{onClick:()=>(async()=>{await r.leave(),r.removeAllListeners(),i[0].close(),i[1].close(),s(!1)})(),style:{...l,backgroundColor:"red",padding:"5px 10px",borderRadius:"5px"},children:(0,Ae.jsx)(mO,{style:{color:"white"}})})]})},DP=e=>{const{users:t,tracks:n,setStart:r}=e;return(0,Ae.jsxs)(EP,{sx:{maxWidth:"100%",height:"80vh",position:"relative",backgroundColor:"black"},children:[(0,Ae.jsxs)(xP,{container:!0,spacing:2,sx:{height:"100%"},children:[t&&t[0]&&t[0].videoTrack&&(0,Ae.jsx)(xP,{item:!0,xs:12,sx:{height:"100%"},children:(0,Ae.jsx)(EP,{sx:{position:"relative",height:"100%",width:"100%"},children:(0,Ae.jsx)(pP,{className:"vid",videoTrack:t[0].videoTrack,style:{height:"100%",width:"100%",backgroundColor:"black"}},t[0].uid)})}),n&&n[1]&&(0,Ae.jsx)(EP,{sx:{position:"absolute",bottom:16,right:16,width:"150px",height:"150px",border:"2px solid white",backgroundColor:"black",zIndex:10},children:(0,Ae.jsx)(pP,{className:"vid",videoTrack:n[1],style:{height:"100%",width:"100%"}})})]}),(0,Ae.jsx)(EP,{sx:{position:"absolute",bottom:16,left:"50%",transform:"translateX(-50%)",zIndex:20},children:(0,Ae.jsx)(PP,{tracks:n,setStart:r})})]})},LP=()=>{const{channel:e,token1:t}=te(),r=decodeURIComponent(t),[i,s]=mP(),[o,a]=(0,n.useState)([]),[c,l]=(0,n.useState)(!1),d=i(),{ready:u,tracks:h}=s();return(0,n.useEffect)((()=>{u&&h&&(console.log("init ready"),(async e=>{d.on("user-published",(async(e,t)=>{var n;await d.subscribe(e,t),console.log("subscribe success"),"video"===t&&a((t=>[...t,e])),"audio"===t&&(null===(n=e.audioTrack)||void 0===n||n.play())})),d.on("user-unpublished",((e,t)=>{var n;console.log("unpublished",e,t),"audio"===t&&(null===(n=e.audioTrack)||void 0===n||n.stop()),"video"===t&&a((t=>t.filter((t=>t.uid!==e.uid))))})),d.on("user-left",(e=>{console.log("leaving",e),a((t=>t.filter((t=>t.uid!==e.uid))))})),await d.join("84aba9e26e4c4a94b15f98a38ad04c8c",e,r,null),h&&await d.publish([h[0],h[1]]),l(!0)})(e))}),[e,u,h]),(0,Ae.jsx)("div",{className:"App",children:c&&(0,Ae.jsx)(DP,{users:o,tracks:h,setStart:l})})};const MP=function(){const{mainscreenLoading:e}=Kr();return(0,Ae.jsx)("div",{className:"App ",children:e?(0,Ae.jsx)(Ck,{}):(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(Vo,{}),(0,Ae.jsx)(Nk,{}),(0,Ae.jsx)(Zc,{position:"top-center",autoClose:2e3,closeOnClick:!0,transition:Xc}),(0,Ae.jsxs)(ve,{children:[(0,Ae.jsx)(ge,{exact:!0,path:"/",element:(0,Ae.jsx)(Nc,{})}),(0,Ae.jsx)(ge,{path:"/about-us",element:(0,Ae.jsx)(Wo,{})}),(0,Ae.jsx)(ge,{path:"/contact-us",element:(0,Ae.jsx)(vk,{})}),(0,Ae.jsx)(ge,{path:"/privacy-policy",element:(0,Ae.jsx)(yk,{})}),(0,Ae.jsx)(ge,{path:"/terms-and-conditions",element:(0,Ae.jsx)(Ek,{})}),(0,Ae.jsx)(ge,{path:"/goods_of_all_kinds",element:(0,Ae.jsx)(ph,{})}),(0,Ae.jsx)(ge,{path:"/electronics",element:(0,Ae.jsx)(Sk,{})}),(0,Ae.jsx)(ge,{path:"/Electronics-detail/:id",element:(0,Ae.jsx)(wk,{})}),(0,Ae.jsx)(ge,{path:"/Login",element:(0,Ae.jsx)(EO,{})}),(0,Ae.jsx)(ge,{path:"/Login-with-email",element:(0,Ae.jsx)(bO,{})}),(0,Ae.jsx)(ge,{path:"/product-detail/:id",element:(0,Ae.jsx)(IO,{})}),(0,Ae.jsx)(ge,{path:"/real_estate",element:(0,Ae.jsx)(kO,{})}),(0,Ae.jsx)(ge,{path:"/realstate-detail/:id",element:(0,Ae.jsx)(PO,{})}),(0,Ae.jsx)(ge,{path:"/singup",element:(0,Ae.jsx)(DO,{})}),(0,Ae.jsx)(ge,{path:"/jobs",element:(0,Ae.jsx)(vA,{})}),(0,Ae.jsx)(ge,{path:"/product/:slug/:id",element:(0,Ae.jsx)(aP,{})}),(0,Ae.jsx)(ge,{path:"/job-detail/:id",element:(0,Ae.jsx)(bA,{})}),(0,Ae.jsx)(ge,{path:"/fashion_beauty",element:(0,Ae.jsx)(wA,{})}),(0,Ae.jsx)(ge,{path:"/Fashion-Beauty-Details/:id",element:(0,Ae.jsx)(Rk,{})}),(0,Ae.jsx)(ge,{path:"/freelancer",element:(0,Ae.jsx)(IA,{})}),(0,Ae.jsx)(ge,{path:"/freelancer-detail/:id",element:(0,Ae.jsx)(NA,{})}),(0,Ae.jsx)(ge,{path:"/lesson_courses",element:(0,Ae.jsx)(kA,{})}),(0,Ae.jsx)(ge,{path:"/lessons-courses-detail/:id",element:(0,Ae.jsx)(PA,{})}),(0,Ae.jsx)(ge,{path:"/faq",element:(0,Ae.jsx)(Ik,{})}),(0,Ae.jsx)(ge,{path:"/videocall/:channel/:token1",element:(0,Ae.jsx)(LP,{})}),(0,Ae.jsx)(ge,{path:"/voice-call",element:(0,Ae.jsx)(Ok,{})}),(0,Ae.jsx)(ge,{path:"/disclaimer",element:(0,Ae.jsx)(rP,{})}),(0,Ae.jsx)(ge,{path:"/customer_support",element:(0,Ae.jsx)(iP,{})}),(0,Ae.jsx)(ge,{path:"*",element:(0,Ae.jsxs)("div",{className:"text-center py-5",children:[(0,Ae.jsx)("img",{src:"https://img1a.flixcart.com/www/linchpin/fk-cp-zion/img/error-500_f9bbb4.png",alt:"Error 500",className:"img-fluid",style:{maxWidth:"450px"}}),(0,Ae.jsx)("div",{className:"mt-3 mb-4",style:{fontSize:"1.3em"},children:"Unfortunately, the page you are looking for has been moved or deleted"}),(0,Ae.jsx)(Ie,{to:"/",className:"btn btn-primary text-white",children:"Go To Home Page"})]})}),(0,Ae.jsx)(ge,{path:"/message",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(xk,{})})}),(0,Ae.jsx)(ge,{path:"/account",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(wO,{})})}),(0,Ae.jsx)(ge,{path:"/my-post",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(DA,{})})}),(0,Ae.jsx)(ge,{path:"/updateProduct/:id",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(LA,{})})}),(0,Ae.jsx)(ge,{path:"/add-post",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(jA,{})})}),(0,Ae.jsx)(ge,{path:"/add-title",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(nP,{})})}),(0,Ae.jsx)(ge,{path:"/add-product",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(tP,{})})}),(0,Ae.jsx)(ge,{path:"/wishlist",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(UA,{})})}),(0,Ae.jsx)(ge,{path:"/cart",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(sP,{})})}),(0,Ae.jsx)(ge,{path:"/my-Order",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(oP,{})})}),(0,Ae.jsx)(ge,{path:"/packages",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(_k,{})})}),(0,Ae.jsx)(ge,{path:"/change-password",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(MA,{})})}),(0,Ae.jsx)(ge,{path:"/user-update",element:(0,Ae.jsx)(NO,{}),children:(0,Ae.jsx)(ge,{index:!0,element:(0,Ae.jsx)(mA,{})})})]}),(0,Ae.jsx)(ke,{})]})})};function jP(e,t){return function(){return e.apply(t,arguments)}}const{toString:UP}=Object.prototype,{getPrototypeOf:FP}=Object,BP=(VP=Object.create(null),e=>{const t=UP.call(e);return VP[t]||(VP[t]=t.slice(8,-1).toLowerCase())});var VP;const GP=e=>(e=e.toLowerCase(),t=>BP(t)===e),HP=e=>t=>typeof t===e,{isArray:WP}=Array,zP=HP("undefined");const qP=GP("ArrayBuffer");const KP=HP("string"),YP=HP("function"),JP=HP("number"),XP=e=>null!==e&&"object"===typeof e,ZP=e=>{if("object"!==BP(e))return!1;const t=FP(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},QP=GP("Date"),$P=GP("File"),eD=GP("Blob"),tD=GP("FileList"),nD=GP("URLSearchParams");function rD(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),WP(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function iD(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const sD="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,oD=e=>!zP(e)&&e!==sD;const aD=(cD="undefined"!==typeof Uint8Array&&FP(Uint8Array),e=>cD&&e instanceof cD);var cD;const lD=GP("HTMLFormElement"),dD=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),uD=GP("RegExp"),hD=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};rD(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},pD="abcdefghijklmnopqrstuvwxyz",fD="0123456789",mD={DIGIT:fD,ALPHA:pD,ALPHA_DIGIT:pD+pD.toUpperCase()+fD};const gD=GP("AsyncFunction"),_D={isArray:WP,isArrayBuffer:qP,isBuffer:function(e){return null!==e&&!zP(e)&&null!==e.constructor&&!zP(e.constructor)&&YP(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||YP(e.append)&&("formdata"===(t=BP(e))||"object"===t&&YP(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&qP(e.buffer),t},isString:KP,isNumber:JP,isBoolean:e=>!0===e||!1===e,isObject:XP,isPlainObject:ZP,isUndefined:zP,isDate:QP,isFile:$P,isBlob:eD,isRegExp:uD,isFunction:YP,isStream:e=>XP(e)&&YP(e.pipe),isURLSearchParams:nD,isTypedArray:aD,isFileList:tD,forEach:rD,merge:function e(){const{caseless:t}=oD(this)&&this||{},n={},r=(r,i)=>{const s=t&&iD(n,i)||i;ZP(n[s])&&ZP(r)?n[s]=e(n[s],r):ZP(r)?n[s]=e({},r):WP(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&rD(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return rD(t,((t,r)=>{n&&YP(t)?e[r]=jP(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&FP(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:BP,kindOfTest:GP,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(WP(e))return e;let t=e.length;if(!JP(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:lD,hasOwnProperty:dD,hasOwnProp:dD,reduceDescriptors:hD,freezeMethods:e=>{hD(e,((t,n)=>{if(YP(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];YP(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return WP(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:iD,global:sD,isContextDefined:oD,ALPHABET:mD,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mD.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&YP(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(XP(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=WP(e)?[]:{};return rD(e,((e,t)=>{const s=n(e,r+1);!zP(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:gD,isThenable:e=>e&&(XP(e)||YP(e))&&YP(e.then)&&YP(e.catch)};function vD(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}_D.inherits(vD,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_D.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const yD=vD.prototype,ED={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{ED[e]={value:e}})),Object.defineProperties(vD,ED),Object.defineProperty(yD,"isAxiosError",{value:!0}),vD.from=(e,t,n,r,i,s)=>{const o=Object.create(yD);return _D.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),vD.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const bD=vD;function TD(e){return _D.isPlainObject(e)||_D.isArray(e)}function SD(e){return _D.endsWith(e,"[]")?e.slice(0,-2):e}function wD(e,t,n){return e?e.concat(t).map((function(e,t){return e=SD(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const CD=_D.toFlatObject(_D,{},null,(function(e){return/^is[A-Z]/.test(e)}));const RD=function(e,t,n){if(!_D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=_D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!_D.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&_D.isSpecCompliantForm(t);if(!_D.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(_D.isDate(e))return e.toISOString();if(!a&&_D.isBlob(e))throw new bD("Blob is not supported. Use a Buffer instead.");return _D.isArrayBuffer(e)||_D.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(_D.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(_D.isArray(e)&&function(e){return _D.isArray(e)&&!e.some(TD)}(e)||(_D.isFileList(e)||_D.endsWith(n,"[]"))&&(a=_D.toArray(e)))return n=SD(n),a.forEach((function(e,r){!_D.isUndefined(e)&&null!==e&&t.append(!0===o?wD([n],r,s):null===o?n:n+"[]",c(e))})),!1;return!!TD(e)||(t.append(wD(i,n,s),c(e)),!1)}const d=[],u=Object.assign(CD,{defaultVisitor:l,convertValue:c,isVisitable:TD});if(!_D.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!_D.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),_D.forEach(n,(function(n,s){!0===(!(_D.isUndefined(n)||null===n)&&i.call(t,n,_D.isString(s)?s.trim():s,r,u))&&e(n,r?r.concat(s):[s])})),d.pop()}}(e),t};function ID(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ND(e,t){this._pairs=[],e&&RD(e,this,t)}const OD=ND.prototype;OD.append=function(e,t){this._pairs.push([e,t])},OD.toString=function(e){const t=e?function(t){return e.call(this,t,ID)}:ID;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const AD=ND;function kD(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xD(e,t,n){if(!t)return e;const r=n&&n.encode||kD,i=n&&n.serialize;let s;if(s=i?i(t,n):_D.isURLSearchParams(t)?t.toString():new AD(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const PD=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_D.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},DD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},LD={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:AD,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},MD="undefined"!==typeof window&&"undefined"!==typeof document,jD=(UD="undefined"!==typeof navigator&&navigator.product,MD&&["ReactNative","NativeScript","NS"].indexOf(UD)<0);var UD;const FD="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,BD={...e,...LD};const VD=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&_D.isArray(r)?r.length:s,a)return _D.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&_D.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&_D.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(_D.isFormData(e)&&_D.isFunction(e.entries)){const n={};return _D.forEachEntry(e,((e,r)=>{t(function(e){return _D.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const GD={transitional:DD,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=_D.isObject(e);i&&_D.isHTMLForm(e)&&(e=new FormData(e));if(_D.isFormData(e))return r?JSON.stringify(VD(e)):e;if(_D.isArrayBuffer(e)||_D.isBuffer(e)||_D.isStream(e)||_D.isFile(e)||_D.isBlob(e))return e;if(_D.isArrayBufferView(e))return e.buffer;if(_D.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return RD(e,new BD.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return BD.isNode&&_D.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=_D.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return RD(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(_D.isString(e))try{return(t||JSON.parse)(e),_D.trim(e)}catch(AL){if("SyntaxError"!==AL.name)throw AL}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||GD.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&_D.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(AL){if(n){if("SyntaxError"===AL.name)throw bD.from(AL,bD.ERR_BAD_RESPONSE,this,null,this.response);throw AL}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:BD.classes.FormData,Blob:BD.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_D.forEach(["delete","get","head","post","put","patch"],(e=>{GD.headers[e]={}}));const HD=GD,WD=_D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zD=Symbol("internals");function qD(e){return e&&String(e).trim().toLowerCase()}function KD(e){return!1===e||null==e?e:_D.isArray(e)?e.map(KD):String(e)}function YD(e,t,n,r,i){return _D.isFunction(r)?r.call(this,t,n):(i&&(t=n),_D.isString(t)?_D.isString(r)?-1!==t.indexOf(r):_D.isRegExp(r)?r.test(t):void 0:void 0)}class JD{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=qD(t);if(!i)throw new Error("header name must be a non-empty string");const s=_D.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=KD(e))}const s=(e,t)=>_D.forEach(e,((e,n)=>i(e,n,t)));return _D.isPlainObject(e)||e instanceof this.constructor?s(e,t):_D.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&WD[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=qD(e)){const n=_D.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(_D.isFunction(t))return t.call(this,e,n);if(_D.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=qD(e)){const n=_D.findKey(this,e);return!(!n||void 0===this[n]||t&&!YD(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=qD(e)){const i=_D.findKey(n,e);!i||t&&!YD(0,n[i],i,t)||(delete n[i],r=!0)}}return _D.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!YD(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return _D.forEach(this,((r,i)=>{const s=_D.findKey(n,i);if(s)return t[s]=KD(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=KD(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return _D.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&_D.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[zD]=this[zD]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=qD(e);t[r]||(!function(e,t){const n=_D.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return _D.isArray(e)?e.forEach(r):r(e),this}}JD.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),_D.reduceDescriptors(JD.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),_D.freezeMethods(JD);const XD=JD;function ZD(e,t){const n=this||HD,r=t||n,i=XD.from(r.headers);let s=r.data;return _D.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function QD(e){return!(!e||!e.__CANCEL__)}function $D(e,t,n){bD.call(this,null==e?"canceled":e,bD.ERR_CANCELED,t,n),this.name="CanceledError"}_D.inherits($D,bD,{__CANCEL__:!0});const eL=$D;const tL=BD.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];_D.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),_D.isString(r)&&o.push("path="+r),_D.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function nL(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const rL=BD.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=_D.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const iL=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[o];i||(i=c),n[s]=a,r[s]=c;let d=o,u=0;for(;d!==s;)u+=n[d++],d%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-i<t)return;const h=l&&c-l;return h?Math.round(1e3*u/h):void 0}};function sL(e,t){let n=0;const r=iL(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,c=r(a);n=s;const l={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&s<=o?(o-s)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}const oL="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=XD.from(e.headers).normalize();let s,o,{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}if(_D.isFormData(r))if(BD.hasStandardBrowserEnv||BD.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(o=i.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let d=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const u=nL(e.baseURL,e.url);function h(){if(!d)return;const r=XD.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new bD("Request failed with status code "+n.status,[bD.ERR_BAD_REQUEST,bD.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:r,config:e,request:d}),d=null}if(d.open(e.method.toUpperCase(),xD(u,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,"onloadend"in d?d.onloadend=h:d.onreadystatechange=function(){d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))&&setTimeout(h)},d.onabort=function(){d&&(n(new bD("Request aborted",bD.ECONNABORTED,e,d)),d=null)},d.onerror=function(){n(new bD("Network Error",bD.ERR_NETWORK,e,d)),d=null},d.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||DD;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new bD(t,r.clarifyTimeoutError?bD.ETIMEDOUT:bD.ECONNABORTED,e,d)),d=null},BD.hasStandardBrowserEnv&&(c&&_D.isFunction(c)&&(c=c(e)),c||!1!==c&&rL(u))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&tL.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in d&&_D.forEach(i.toJSON(),(function(e,t){d.setRequestHeader(t,e)})),_D.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),a&&"json"!==a&&(d.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&d.addEventListener("progress",sL(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",sL(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{d&&(n(!t||t.type?new eL(null,e,d):t),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const p=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);p&&-1===BD.protocols.indexOf(p)?n(new bD("Unsupported protocol "+p+":",bD.ERR_BAD_REQUEST,e)):d.send(r||null)}))},aL={http:null,xhr:oL};_D.forEach(aL,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(AL){}Object.defineProperty(e,"adapterName",{value:t})}}));const cL=e=>"- ".concat(e),lL=e=>_D.isFunction(e)||null===e||!1===e,dL=e=>{e=_D.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!lL(n)&&(r=aL[(t=String(n)).toLowerCase()],void 0===r))throw new bD("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(cL).join("\n"):" "+cL(e[0]):"as no adapter specified";throw new bD("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function uL(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new eL(null,e)}function hL(e){uL(e),e.headers=XD.from(e.headers),e.data=ZD.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return dL(e.adapter||HD.adapter)(e).then((function(t){return uL(e),t.data=ZD.call(e,e.transformResponse,t),t.headers=XD.from(t.headers),t}),(function(t){return QD(t)||(uL(e),t&&t.response&&(t.response.data=ZD.call(e,e.transformResponse,t.response),t.response.headers=XD.from(t.response.headers))),Promise.reject(t)}))}const pL=e=>e instanceof XD?{...e}:e;function fL(e,t){t=t||{};const n={};function r(e,t,n){return _D.isPlainObject(e)&&_D.isPlainObject(t)?_D.merge.call({caseless:n},e,t):_D.isPlainObject(t)?_D.merge({},t):_D.isArray(t)?t.slice():t}function i(e,t,n){return _D.isUndefined(t)?_D.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!_D.isUndefined(t))return r(void 0,t)}function o(e,t){return _D.isUndefined(t)?_D.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(pL(e),pL(t),!0)};return _D.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=c[r]||i,o=s(e[r],t[r],r);_D.isUndefined(o)&&s!==a||(n[r]=o)})),n}const mL="1.6.8",gL={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{gL[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const _L={};gL.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.8] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new bD(r(i," has been removed"+(t?" in "+t:"")),bD.ERR_DEPRECATED);return t&&!_L[i]&&(_L[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};const vL={assertOptions:function(e,t,n){if("object"!==typeof e)throw new bD("options must be an object",bD.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new bD("option "+s+" must be "+n,bD.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new bD("Unknown option "+s,bD.ERR_BAD_OPTION)}},validators:gL},yL=vL.validators;class EL{constructor(e){this.defaults=e,this.interceptors={request:new PD,response:new PD}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=fL(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&vL.assertOptions(n,{silentJSONParsing:yL.transitional(yL.boolean),forcedJSONParsing:yL.transitional(yL.boolean),clarifyTimeoutError:yL.transitional(yL.boolean)},!1),null!=r&&(_D.isFunction(r)?t.paramsSerializer={serialize:r}:vL.assertOptions(r,{encode:yL.function,serialize:yL.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&_D.merge(i.common,i[t.method]);i&&_D.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=XD.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let d,u=0;if(!a){const e=[hL.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),d=e.length,l=Promise.resolve(t);u<d;)l=l.then(e[u++],e[u++]);return l}d=o.length;let h=t;for(u=0;u<d;){const e=o[u++],t=o[u++];try{h=e(h)}catch(pv){t.call(this,pv);break}}try{l=hL.call(this,h)}catch(pv){return Promise.reject(pv)}for(u=0,d=c.length;u<d;)l=l.then(c[u++],c[u++]);return l}getUri(e){return xD(nL((e=fL(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}_D.forEach(["delete","get","head","options"],(function(e){EL.prototype[e]=function(t,n){return this.request(fL(n||{},{method:e,url:t,data:(n||{}).data}))}})),_D.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(fL(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}EL.prototype[e]=t(),EL.prototype[e+"Form"]=t(!0)}));const bL=EL;class TL{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new eL(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new TL((function(t){e=t})),cancel:e}}}const SL=TL;const wL={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(wL).forEach((e=>{let[t,n]=e;wL[n]=t}));const CL=wL;const RL=function e(t){const n=new bL(t),r=jP(bL.prototype.request,n);return _D.extend(r,bL.prototype,n,{allOwnKeys:!0}),_D.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(fL(t,n))},r}(HD);RL.Axios=bL,RL.CanceledError=eL,RL.CancelToken=SL,RL.isCancel=QD,RL.VERSION=mL,RL.toFormData=RD,RL.AxiosError=bD,RL.Cancel=RL.CanceledError,RL.all=function(e){return Promise.all(e)},RL.spread=function(e){return function(t){return e.apply(null,t)}},RL.isAxiosError=function(e){return _D.isObject(e)&&!0===e.isAxiosError},RL.mergeConfig=fL,RL.AxiosHeaders=XD,RL.formToJSON=e=>VD(_D.isHTMLForm(e)?new FormData(e):e),RL.getAdapter=dL,RL.HttpStatusCode=CL,RL.default=RL;const IL=RL,NL="http://13.201.212.185:4200",OL=e=>{let{children:t}=e;const[r,i]=(0,n.useState)(!1),[s,o]=(0,n.useState)({}),[a,c]=(0,n.useState)({}),[l,d]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[p,f]=(0,n.useState)([]),[m,g]=(0,n.useState)(!1),[_,v]=(0,n.useState)([]),[y,E]=(0,n.useState)([]),[b,T]=(0,n.useState)({isLoad:!1,data:{}}),[S,w]=(0,n.useState)({data:{},isLoad:!1}),[C,R]=(0,n.useState)([]),[I,N]=(0,n.useState)(""),[O,A]=(0,n.useState)(!1),[k,x]=(0,n.useState)(!1),[P,D]=(0,n.useState)({data:{},isLoad:!1}),[L,M]=(0,n.useState)({data:{},isLoad:!1}),[j,U]=(0,n.useState)(null),[F,B]=(0,n.useState)([]),[V,G]=(0,n.useState)({data:{},isLoad:!1}),[H,W]=(0,n.useState)([]),[z,q]=(0,n.useState)({data:{},isLoad:!1}),[K,Y]=(0,n.useState)([]),[J,X]=(0,n.useState)([]),[Q,ee]=(0,n.useState)({data:[],isLoad:!1}),[te,ne]=(0,n.useState)([]),[re,ie]=(0,n.useState)([]),[se,oe]=(0,n.useState)([]),[ae,ce]=(0,n.useState)([]),[le,de]=(0,n.useState)(),[ue,he]=(0,n.useState)([]),[pe,fe]=(0,n.useState)(!1),[me,ge]=(0,n.useState)([]),[_e,ve]=(0,n.useState)([]),[ye,Ee]=(0,n.useState)([]),[be,Te]=(0,n.useState)([]),[Se,we]=(0,n.useState)({}),[Ce,Re]=(0,n.useState)({}),[Ie,Ne]=(0,n.useState)({goods:0,job:0,freelancer:0,RealEstate:0,Lessons:0,Fashion:0,Electronics:0,post:0}),[Oe,ke]=(0,n.useState)({goods:!1,job:!1,freelancer:!1,RealEstate:!1,Lessons:!1,Fashion:!1,Electronics:!1,WishList:!1,Post:!1,cartList:!1}),xe=$(),Pe=Z(),De=localStorage.getItem("token"),[Le,Me]=(0,n.useState)([]),je=async()=>{const e=localStorage.getItem("token");if(A(!0),I||e)try{const t=await fetch("".concat(NL,"/api/profile/details"),{method:"GET",headers:{"Content-Type":"application/json",token:I||e}}),n=await t.json();t.ok?(o(n.data),i(!0)):i(!1)}catch(pv){i(!1)}else i(!1);A(!1)},Ue=async(e,t)=>{const n=new URLSearchParams(Pe.search).get("redirect");N(e),localStorage.setItem("token",e),await je(),al.success(t),xe(n?"".concat(n):"/account")},Fe=async()=>{await je()},Be=async(e,t,n)=>{try{ke({...Oe,goods:!0});const{keyword_search:i,page:o,limit:a}=e,c=await fetch("".concat(NL,"/api/product/goods/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:o,limit:a,sub_category_id:t||"",filter:Array.isArray(n)&&n.length>0?n:null,...r&&{userId:s._id}})}),l=await c.json();c.ok&&(fe(!0),v(l.data),Ne({...Ie,goods:l.total}))}catch(pv){console.log(pv)}finally{fe(!1),ke({...Oe,goods:!1})}},Ve=async(e,t,n)=>{try{ke({...Oe,Electronics:!0});const{keyword_search:i,page:o,limit:a}=e,c=await fetch("".concat(NL,"/api/product/electronics/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:o,limit:a,sub_category_id:t||"",filter:Array.isArray(n)&&n.length>0?n:null,...r&&{userId:s._id}})}),l=await c.json();c.ok&&(R(l.data),Ne({...Ie,Electronics:l.total}))}catch(pv){console.log(pv)}finally{ke({...Oe,Electronics:!1})}},Ge=async(e,t,n)=>{try{ke({...Oe,freelancer:!0});const{keyword_search:i,page:o,limit:a}=e,c=await fetch("".concat(NL,"/api/product/freelancer/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:o,limit:a,sub_category_id:t||"",filter:Array.isArray(n)&&n.length>0?n:null,...r&&{userId:s._id}})}),l=await c.json();c.ok&&(B(l.data),Ne({...Ie,freelancer:l.total}))}catch(pv){console.log(pv)}finally{ke({...Oe,freelancer:!1})}},He=async(e,t,n)=>{try{ke({...Oe,Fashion:!0});const{keyword_search:i,page:o,limit:a}=e,c=await fetch("".concat(NL,"/api/product/fashion/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:o,limit:a,sub_category_id:t,filter:Array.isArray(n)&&n.length>0?n:null,...r&&{userId:s._id}})}),l=await c.json();c.ok&&(W(l.data),Ne({...Ie,Fashion:l.total}))}catch(pv){console.log(pv)}finally{ke({...Oe,Fashion:!1})}},We=async(e,t,n)=>{try{ke({...Oe,RealEstate:!0});const{keyword_search:i,page:o,limit:a}=e,c=await fetch("".concat(NL,"/api/property/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:o,limit:a,sub_category_id:t,filter:Array.isArray(n)&&n.length>0?n:null,...r&&{userId:s._id}})}),l=await c.json();c.ok&&(X(l.data),Ne({...Ie,RealEstate:l.total}))}catch(pv){console.log(pv)}finally{ke({...Oe,RealEstate:!1})}},ze=async(e,t,n)=>{try{ke({...Oe,Lessons:!0});const{keyword_search:i,page:o,limit:a}=e,c=await fetch("".concat(NL,"/api/product/lesson-courses/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:o,limit:a,sub_category_id:t,filter:Array.isArray(n)&&n.length>0?n:null,...r&&{userId:s._id}})}),l=await c.json();c.ok&&(Y(l.data),Ne({...Ie,Lessons:l.total}))}catch(pv){console.log(pv)}finally{ke({...Oe,Lessons:!1})}},qe=async(e,t,n)=>{try{ke({...Oe,job:!0});const{keyword_search:i,page:o,limit:a}=e,c=await fetch("".concat(NL,"/api/product/job/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword_search:i||"",page:o,limit:a,sub_category_id:t||"",filter:Array.isArray(n)&&n.length>0?n:null,...r&&{userId:s._id}})}),l=await c.json();c.ok&&(ne(l.data),Ne({...Ie,job:l.total}))}catch(pv){console.log(pv)}finally{ke({...Oe,job:!1})}},Ke=async e=>{try{ke({...Oe,Post:!0});const{keyword_search:t,page:n,limit:r}=e,i=await fetch("".concat(NL,"/api/user/product/list"),{method:"Post",headers:{"Content-Type":"application/json",token:De},body:JSON.stringify({keyword_search:t||"",page:n,limit:r})}),s=await i.json();i.ok&&(Te(s.data),Ne({...Ie,post:s.total}))}catch(pv){console.log(pv)}finally{ke({...Oe,Post:!1})}},Ye=async()=>{try{ke({...Oe,WishList:!0});const e=await fetch("".concat(NL,"/api/user/product/wishlist"),{method:"GET",headers:{"Content-Type":"application/json",token:De}}),t=await e.json();e.ok&&ie(t.data.wishlist)}catch(pv){al.error("Server Down")}finally{ke({...Oe,WishList:!1})}},Je=async()=>{try{ke({...Oe,cartList:!0});const t=await fetch("".concat(NL,"/api/user/product/cart"),{method:"GET",headers:{"Content-Type":"application/json",token:De}}),n=await t.json();var e;if(t.ok)oe((null===(e=n.data)||void 0===e?void 0:e.items)||[]),de(n.data.total_price)}catch(pv){al.error("Server Down")}finally{ke({...Oe,cartList:!1})}};(0,n.useEffect)((()=>{(async()=>{x(!0);try{await Fe(),await(async()=>{A(!0);try{const e=await fetch("".concat(NL,"/api/service/list"),{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();e.ok&&h(t.data)}catch(pv){console.log(pv)}A(!1)})()}catch(pv){}finally{x(!1)}})()}),[]),(0,n.useEffect)((()=>{"/"!==Pe.pathname||O||(Ve({}),Be({}),Ge({}),He({}),We({}),ze({}),qe({}),(async()=>{try{const e=await fetch("".concat(NL,"/api/cms/getAll"),{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();e.ok&&d(t.data)}catch(pv){al.error("Server Down")}})()),"/wishlist"===Pe.pathname&&Ye()}),[Pe.pathname,O]);const Xe={RegisterUser:async(e,t,n)=>{try{const r=new FormData;r.append("name",e),r.append("email",t),r.append("password",n);const s=await IL.post("".concat(NL,"/api/register"),r,{headers:{"Content-Type":"multipart/form-data"}}),o=s.data;200===s.status?(Ue(o.token,o.message),i(!0)):(i(!1),al.error(o.message))}catch(pv){i(!1)}},LoginUser:async(e,t)=>{try{A(!0);const n=await fetch("".concat(NL,"/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await n.json();n.ok?(Ue(r.token,r.message),i(!0)):(i(!1),al.error(r.message))}catch(pv){i(!1),al.error("Server Down")}finally{A(!1)}},isLogIn:r,LogOut:async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat(NL,"/api/logout"),{method:"GET",headers:{"Content-Type":"application/json",token:e}}),n=await t.json();t.ok&&(localStorage.removeItem("token"),o({}),i(!1),function(e){op(e).signOut()}(qN),al.success(n.message),N(""))}catch(pv){al.error("Server Down")}},userData:s,cmsData:l,checkTokenValidity:je,loading:O,SocialLoginUser:async(e,t,n,r,s)=>{try{A(!0);const o=await fetch("".concat(NL,"/api/social-login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,social_id:t,register_type:n,image:s,name:r})}),a=await o.json();o.ok?(Ue(a.token,a.message),i(!0)):(i(!1),al.error(a.message))}catch(pv){al.error("Server Down")}finally{A(!1)}},serviceList:u,goodsList:_,electronicsList:C,getGoodsProductDetails:async e=>{try{T({data:{},isLoad:!0});const t=await fetch("".concat(NL,"/api/product/goods/details/").concat(e).concat(r?"?userId=".concat(s._id):""),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?T({data:n.data,isLoad:!1}):T({data:{},isLoad:!1})}catch(pv){T({data:{},isLoad:!1}),console.log(pv)}},goodsItems:b,setGoodsItems:T,getElectronicsProductDetails:async e=>{try{w({data:{},isLoad:!0});const t=await fetch("".concat(NL,"/api/product/electronics/details/").concat(e).concat(r?"?userId=".concat(s._id):""),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?w({data:n.data,isLoad:!1}):w({data:{},isLoad:!1})}catch(pv){w({data:{},isLoad:!1}),console.log(pv)}},electronicsItems:S,setElectronicsItems:w,getUserplan:async()=>{try{const e=await fetch("".concat(NL,"/api/user/membership/plan/list"),{method:"POST",headers:{"Content-Type":"application/json",token:De}}),t=await e.json();e.ok&&E(t.data)}catch(pv){al.error("Server Down")}},packagesList:y,ChnagePassword:async(e,t)=>{try{const n=await fetch("".concat(NL,"/api/change-password"),{method:"POST",headers:{"Content-Type":"application/json",token:De},body:JSON.stringify({currentPassword:e,newPassword:t})}),r=await n.json();console.log("data",r),n.ok?(al.success(r.message),xe("/account")):al.error(r.message)}catch(pv){al.error("Server Down")}},mainscreenLoading:k,updateProfile:async(e,t,n,r,i,s)=>{const o=new FormData;o.append("name",e),o.append("email",t),o.append("image",n),o.append("mobile",r),o.append("bio",i),o.append("address",s);try{const e=await IL.post("".concat(NL,"/api/profile/update"),o,{headers:{"Content-Type":"multipart/form-data",token:De}});al(e.data.message),Fe()}catch(pv){console.error("Error updating profile:",pv)}},setMainscreenLoading:x,getFreelancer:Ge,freelancerList:F,freelancerDetail:V,setFreelancerDetail:G,getFreelancerDetails:async e=>{try{G({data:{},isLoad:!0});const t=await fetch("".concat(NL,"/api/product/freelancer/details/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?G({data:n.data,isLoad:!1}):G({data:{},isLoad:!1})}catch(pv){G({data:{},isLoad:!1}),console.log(pv)}},fashion:H,wishListAdd:async e=>{try{if(!r)return al.info("Login first"),void xe("/login");{const t=await fetch("".concat(NL,"/api/user/product/wishlist/add"),{method:"POST",headers:{"Content-Type":"application/json",token:De},body:JSON.stringify({product_id:e})}),n=await t.json();t.ok?(al.success(n.message),Ye()):al.error(t.message)}}catch(pv){console.log(pv)}},wishListRemove:async e=>{try{if(!r)return al.info("Login first"),void xe("/login");{const t=await fetch("".concat(NL,"/api/user/product/wishlist/remove"),{method:"POST",headers:{"Content-Type":"application/json",token:De},body:JSON.stringify({product_id:e})}),n=await t.json();t.ok?(al.success(n.message),Ye()):al.error(t.message)}}catch(pv){console.log(pv)}},wishList:re,faq:ue,getFaq:async()=>{try{const e=await fetch("".concat(NL,"/api/all-faq"),{method:"POST",headers:{"Content-Type":"application/json",token:De}}),t=await e.json();e.ok&&he(t.data)}catch(pv){console.log(pv)}},skeleton:pe,property:J,getPropertyDetail:async e=>{try{ee({data:[],isLoad:!0});const t=await fetch("".concat(NL,"/api/property/details/").concat(e).concat(r?"?userId=".concat(s._id):""),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?ee({data:n.data,isLoad:!1}):ee({data:[],isLoad:!1})}catch(pv){ee({data:[],isLoad:!1}),console.log(pv)}},propertyDetail:Q,lesson:K,jobList:te,getGoodsProduct:Be,totalItem:Ie,getJobList:qe,getLesson:ze,getElectronicsProduct:Ve,getFashionBeauty:He,getProperty:We,setPropertyDetail:ee,listLoading:Oe,jobDetail:P,setJobDetail:D,getJobListDetail:async e=>{try{D({data:{},isLoad:!0});const t=await fetch("".concat(NL,"/api/job/details/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?D({data:n.data,isLoad:!1}):D({data:{},isLoad:!1})}catch(pv){D({data:{},isLoad:!1}),console.log(pv)}},lessonDetail:L,setlessonDetail:M,getLessonDetail:async e=>{try{M({data:{},isLoad:!0});const t=await fetch("".concat(NL,"/api/product/lesson-course/detail/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?M({data:n.data,isLoad:!1}):M({data:{},isLoad:!1})}catch(pv){M({data:{},isLoad:!1}),console.log(pv)}},fashionDetail:z,setFashionDetail:q,getFashionBeautyDetails:async e=>{try{q({data:{},isLoad:!0});const t=await fetch("".concat(NL,"/api/product/fashion/details/").concat(e).concat(r?"?userId=".concat(s._id):""),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?q({data:n.data,isLoad:!1}):q({data:{},isLoad:!1})}catch(pv){q({data:{},isLoad:!1}),console.log(pv)}},getSubServiceList:async e=>{try{g(!0);const t=await fetch("".concat(NL,"/api/service/sub-category/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parentId:e})}),n=await t.json();t.ok&&f(n.data)}catch(pv){console.log(pv)}finally{g(!1)}},subServiceList:p,subServiceLoading:m,AddTitleDes:async e=>{try{const t=await fetch("".concat(NL,"/api/user/product/add"),{method:"POST",headers:{"Content-Type":"application/json",token:De},body:JSON.stringify({...e})}),n=await t.json();return t.ok&&(al.success(n.message),Ee(n.data._id)),n}catch(pv){al.error(pv),console.log(pv)}},AddRealEstate:async e=>{try{const t=await IL.post("".concat(NL,"/api/property/add"),e,{headers:{"Content-Type":"multipart/form-data",token:De}});return al.success(t.message||"Success"),xe("/my-post"),t}catch(pv){al.error(pv),console.log(pv)}},getAttributeList:async e=>{try{const t=await IL.post("".concat(NL,"/api/attribute/list"),{category_id:e.category_id||"",sub_category_id:e.sub_category_id||""},{headers:{"Content-Type":"application/json",token:De}});return ge(t.data.data),t}catch(pv){}},attributeList:me,productId:ye,AddJob:async e=>{try{const t=await IL.post("".concat(NL,"/api/job/post"),e,{headers:{"Content-Type":"multipart/form-data",token:De}});return al.success(t.message||"Success"),xe("/my-post"),t}catch(pv){al.error(pv)}},AddFashionProduct:async e=>{try{const t=await IL.post("".concat(NL,"/api/product/fashion/add"),e,{headers:{"Content-Type":"multipart/form-data",token:De}});return al.success(t.message||"Success"),xe("/my-post"),t}catch(pv){al.error(pv)}},AddFreelancer:async e=>{try{const t=await IL.post("".concat(NL,"/api/product/freelancer/add"),e,{headers:{"Content-Type":"multipart/form-data",token:De}});return al.success(t.message||"Success"),xe("/my-post"),t}catch(pv){al.error(pv)}},AddElectronics:async e=>{try{const t=await IL.post("".concat(NL,"/api/product/electronics/add"),e,{headers:{"Content-Type":"multipart/form-data",token:De}});return al.success(t.message||"Success"),xe("/my-post"),t}catch(pv){al.error(pv)}},AddCourse:async e=>{try{const t=await IL.post("".concat(NL,"/api/product/lesson-course/add"),e,{headers:{"Content-Type":"multipart/form-data",token:De}});return al.success(t.message||"Success"),xe("/my-post"),t}catch(pv){al.error(pv)}},AddGoodsProduct:async e=>{try{const t=await IL.post("".concat(NL,"/api/product/goods/add"),e,{headers:{"Content-Type":"multipart/form-data",token:De}});return al.success(t.message||"Success"),xe("/my-post"),t}catch(pv){al.error(pv)}},getMyPost:Ke,mypost:be,myPostRemove:async e=>{try{const t=await fetch("".concat(NL,"/api/user/product/delete/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",token:De}}),n=await t.json();t.ok?(al.success(n.message),Ke(e)):al.error(t.message)}catch(pv){console.log(pv)}},getMyPostListDetail:async e=>{try{const t=await fetch("".concat(NL,"/api/user/product/detail/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",token:De}}),n=await t.json();t.ok?we(n.data):console.log("")}catch(pv){console.log(pv)}},myPostDetail:Se,updateMyPost:async(e,t)=>{try{const n=await IL.post("".concat(NL,"/api/user/product/update/").concat(e),t,{headers:{"Content-Type":"multipart/form-data",token:De}});return al.success(n.message||"Success"),xe("/my-post"),n}catch(pv){al.error(pv.message)}},getAttributeFilterList:async e=>{try{const t=e.main?{category_id:e.main}:e.sub?{sub_category_id:e.sub}:{},{data:n}=await IL.post("".concat(NL,"/api/attribute/filter/list"),t,{headers:{"Content-Type":"application/json"}});return ve(n.data),n}catch(pv){}},filterAttributeList:_e,BidAdd:async(e,t)=>{try{g(!0);const n=await fetch("".concat(NL,"/api/product/bid/add"),{method:"POST",headers:{"Content-Type":"application/json",token:De},body:JSON.stringify({bid_amount:e,productId:t})}),r=await n.json();return n.ok?al.success(r.message):al.error(r.message),r}catch(pv){console.log(pv)}},cartListAdd:async(e,t,n)=>{try{if(!r)return al.info("Login first"),void xe("/login");{const r=await fetch("".concat(NL,"/api/user/product/cart/add"),{method:"POST",headers:{"Content-Type":"application/json",token:De},body:JSON.stringify({product_id:e,quantity:t,price:n})}),i=await r.json();r.ok?(al.success(i.message),Je()):al.error(r.message)}}catch(pv){console.log(pv)}},getCartList:Je,cartList:se,cartListRemove:async e=>{try{if(!r)return al.info("Login first"),void xe("/login");{const t=await fetch("".concat(NL,"/api/user/product/cart/remove"),{method:"POST",headers:{"Content-Type":"application/json",token:De},body:JSON.stringify({product_id:e})}),n=await t.json();t.ok?(al.success(n.message),Je()):al.error(t.message)}}catch(pv){console.log(pv)}},cartListUpdate:async(e,t)=>{try{if(!r)return al.info("Login first"),void xe("/login");{const n=await fetch("".concat(NL,"/api/user/product/cart/quantity"),{method:"POST",headers:{"Content-Type":"application/json",token:De},body:JSON.stringify({product_id:e,quantity:t})}),r=await n.json();n.ok?(al.success(r.message),Je()):al.error(n.message)}}catch(pv){console.log(pv)}},getReletedProduct:async(e,t,n)=>{try{const t=await fetch("".concat(NL,"/api/product/related/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category_id:e,product_id:n})}),r=await t.json();t.ok&&Me(r.data)}catch(pv){console.log(pv)}finally{ke({...Oe,Fashion:!1})}},reletedList:Le,totalprice:le,orderCheckOut:async e=>{try{if(!r)return al.info("Login first"),void xe("/login");{const t=await fetch("".concat(NL,"/api/order-add"),{method:"POST",headers:{"Content-Type":"application/json",token:De},body:JSON.stringify(e)}),n=await t.json();t.ok?(al.success(n.message),(async()=>{try{if(!r)return al.info("Login first"),void xe("/login");{const e=await fetch("".concat(NL,"/api/user/product/cart/clear"),{method:"POST",headers:{"Content-Type":"application/json",token:De}});e.ok?Je():al.error(e.message)}}catch(pv){console.log(pv)}})()):al.error(t.message)}}catch(pv){console.log(pv)}},getMyOrderList:async()=>{try{ke({...Oe,cartList:!0});const e=await fetch("".concat(NL,"/api/order-list"),{method:"POST",headers:{"Content-Type":"application/json",token:De}}),t=await e.json();e.ok&&ce(t.data)}catch(pv){al.error("Server Down")}finally{ke({...Oe,cartList:!1})}},orderList:ae,getAllProductDetails:async e=>{try{Re({data:{},isLoad:!0});const t=await fetch("".concat(NL,"/api/wishlist/product/details/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",token:De}}),n=await t.json();t.ok&&200===n.status?Re({data:n.data,isLoad:!1}):Re({data:{},isLoad:!1})}catch(pv){Re({data:{},isLoad:!1}),console.log(pv)}},allPDetails:Ce,getAllUnAuthProductDetails:async e=>{try{Re({data:{},isLoad:!0});const t=await fetch("".concat(NL,"/api/common/product/detail/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok&&200===n.status?Re({data:n.data,isLoad:!1}):Re({data:{},isLoad:!1})}catch(pv){Re({data:{},isLoad:!1}),console.log(pv)}},jobApply:async e=>{try{const t=await IL.post("".concat(NL,"/api/job/application"),e,{headers:{"Content-Type":"multipart/form-data",token:De}});200===t.status?al.success(t.data.message):400===t.status&&al.error(t.data.message)}catch(pv){var t,n;al.error((null===pv||void 0===pv||null===(t=pv.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"An error occurred while submitting the application.")}},getMessageDetail:async()=>{try{const e=await fetch("".concat(NL,"/api/chat/user/token/create"),{method:"POST",headers:{"Content-Type":"application/json",token:De}}),t=await e.json();e.ok&&200===t.status&&U(t)}catch(pv){al.error("Server Down")}},messageDetail:j,getPeerUserDetail:async e=>{const t=localStorage.getItem("token");if(I||t)try{const n=await fetch("".concat(NL,"/api/profile/details?user_id=").concat(e),{method:"GET",headers:{"Content-Type":"application/json",token:I||t}}),r=await n.json();n.ok&&c(r.data)}catch(pv){console.log(pv)}},peerUserData:a,getCallDetail:async(e,t)=>{try{const i=await fetch("".concat(NL,"/api/room/create"),{method:"POST",headers:{"Content-Type":"application/json",token:De},body:JSON.stringify({members:e,room_type:t})}),s=await i.json();if(i.ok&&200===s.status){var n,r;const e=encodeURIComponent(null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.token);xe("/videocall/".concat(null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.channelName,"/").concat(e))}}catch(pv){al.error("Server Down")}}};return(0,Ae.jsx)(qr.Provider,{value:Xe,children:t})};__webpack_require__(8885);i.createRoot(document.getElementById("root")).render((0,Ae.jsx)(n.StrictMode,{children:(0,Ae.jsx)(we,{children:(0,Ae.jsx)(OL,{children:(0,Ae.jsx)(MP,{})})})}))})()})();
//# sourceMappingURL=main.79276c3e.js.map